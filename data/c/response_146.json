[{"tags": ["c"], "comments": [{"owner": {"reputation": 268334, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1508976142, "post_id": 46943802, "comment_id": 80835078, "body": "Short answer: No."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1508976924, "post_id": 46943802, "comment_id": 80835264, "body": "Do note that it is used both in declarations to declare pointers, and in expressions to dereference pointers. Although both are &quot;for pointers&quot;, it&#39;s important to understand the difference."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1508977010, "post_id": 46943802, "comment_id": 80835285, "body": "An asterisk is also used in <code>printf()</code> format strings with an argument to specify field width."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1508983034, "post_id": 46943802, "comment_id": 80836646, "body": "It\u2019s used in <code>scanf()</code> conversion specifications to suppress assignment."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1508982420, "post_id": 46943832, "comment_id": 80836517, "body": "... and character constant <code>&#39;*&#39;</code>, and part of a <i>string literal</i> <code>&quot;*&quot;</code>"}], "tags": [], "owner": {"reputation": 491, "user_id": 8509272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487ff5fe4697aeb326fa5092ef38f116?s=128&d=identicon&r=PG&f=1", "display_name": "savram", "link": "https://stackoverflow.com/users/8509272/savram"}, "is_accepted": false, "score": 5, "last_activity_date": 1508976229, "creation_date": 1508976229, "answer_id": 46943832, "question_id": 46943802, "link": "https://stackoverflow.com/questions/46943802/is-there-any-usage-for-in-c-else-than-multiplication-and-pointer/46943832#46943832", "title": "Is there any usage for &#39; * &#39; in C else than multiplication and pointer?", "body": "<p>Yes, it's part of multi-line comment syntax <code>/*insert comment here*/</code></p>\n"}], "owner": {"reputation": 45, "user_id": 8661070, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1587872111264848/picture?type=large", "display_name": "Stefi Zuzu", "link": "https://stackoverflow.com/users/8661070/stefi-zuzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1508977035, "answer_count": 1, "score": 2, "last_activity_date": 1508976229, "creation_date": 1508975998, "question_id": 46943802, "link": "https://stackoverflow.com/questions/46943802/is-there-any-usage-for-in-c-else-than-multiplication-and-pointer", "closed_reason": "Needs details or clarity", "title": "Is there any usage for &#39; * &#39; in C else than multiplication and pointer?", "body": "<p>Is the any more use of <code>*</code>, but for pointers <code>*p</code> and multiplication <code>a*b</code> ? If yes what usage it has?</p>\n"}, {"tags": ["c", "unix", "posix", "stat"], "comments": [{"owner": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 1, "creation_date": 1508975496, "post_id": 46943690, "comment_id": 80834907, "body": "show what you have so far"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1508975884, "post_id": 46943690, "comment_id": 80835004, "body": "What is unclear to you in <code>man 2 stat</code>?"}, {"owner": {"reputation": 7087, "user_id": 1389898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00f2a3f2624a47edc48464d4929a7508?s=128&d=identicon&r=PG", "display_name": "dlmeetei", "link": "https://stackoverflow.com/users/1389898/dlmeetei"}, "edited": false, "score": 0, "creation_date": 1508975888, "post_id": 46943690, "comment_id": 80835007, "body": "Have you read <code>man 2 stat</code>?"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508988467, "post_id": 46943690, "comment_id": 80837941, "body": "Review <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>."}, {"owner": {"reputation": 465, "user_id": 4985248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6d740162004b87937fb6277118f5ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alonzo Robbe", "link": "https://stackoverflow.com/users/4985248/alonzo-robbe"}, "reply_to_user": {"reputation": 499, "user_id": 5339899, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ebf68221eb3e8ff1037314f300217549?s=128&d=identicon&r=PG&f=1", "display_name": "TheQAGuy", "link": "https://stackoverflow.com/users/5339899/theqaguy"}, "edited": false, "score": 0, "creation_date": 1509012522, "post_id": 46943690, "comment_id": 80850004, "body": "@JackVanier I have added what i have"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1509013143, "post_id": 46943690, "comment_id": 80850435, "body": "@RobBor Your use of stat() looks fine. You have a few mismatched <code>if&#47;else</code> and missing braces in the code - but please, you should rather tell us what issue you are facing - however, if you have a program that compiles, post that code, the code you did post have a lot of other errors so it does not compile. If the issue is that your code does not compile, you should ask about that instead of asking about stat() though."}, {"owner": {"reputation": 465, "user_id": 4985248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6d740162004b87937fb6277118f5ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alonzo Robbe", "link": "https://stackoverflow.com/users/4985248/alonzo-robbe"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1509081186, "post_id": 46943690, "comment_id": 80883097, "body": "@nos sorry about the mismatch braces. They are not the issue. That just happened bc i was quickly trying to type it up. I still have not been able to figure out why its not counting as a <code>directory</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4313, "user_id": 2706707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BoAxS.gif?s=128&g=1", "display_name": "D&#250;thomhas", "link": "https://stackoverflow.com/users/2706707/d%c3%bathomhas"}, "is_accepted": false, "score": 0, "last_activity_date": 1509082062, "creation_date": 1509082062, "answer_id": 46968072, "question_id": 46943690, "link": "https://stackoverflow.com/questions/46943690/how-to-use-stat-to-check-if-commandline-argument-is-a-directory/46968072#46968072", "title": "How to use stat() to check if commandline argument is a directory?", "body": "<p>Pay close attention to the documentation: <a href=\"https://linux.die.net/man/2/stat\" rel=\"nofollow noreferrer\">stat(2)</a></p>\n\n<p>I am also unsure why you are opening the file. You don\u2019t appear to need to do that.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// Please include ALL the files indicated in the manual\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\nint main( int argc, char** argv )\n{\n  int dirCount = 0;\n\n  for (int i = 1; i &lt; argc; i++)\n  {\n    struct stat st;\n    if (stat( argv[i], &amp;st ) != 0) \n      // If something went wrong, you probably don't care,\n      // since you are just looking for directories.\n      // (This assumption may not be true. \n      //  Please read through the errors that can be produced on the man page.)\n      continue;\n\n    if (S_ISDIR( st.st_mode )) \n      dirCount += 1;\n  }\n\n  printf( \"Number of directories listed as argument = %d.\\n\", dirCount );\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 4985248, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6d740162004b87937fb6277118f5ba1f?s=128&d=identicon&r=PG&f=1", "display_name": "Alonzo Robbe", "link": "https://stackoverflow.com/users/4985248/alonzo-robbe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 849, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1509082062, "creation_date": 1508975143, "last_edit_date": 1509081117, "question_id": 46943690, "link": "https://stackoverflow.com/questions/46943690/how-to-use-stat-to-check-if-commandline-argument-is-a-directory", "title": "How to use stat() to check if commandline argument is a directory?", "body": "<p>Im trying to count the types of files inputted into a program. So if you enter echo.c its a C source, echo.h is Header and so on. But if you input a directory, like <code>echo/root</code> it should count as an <code>directory</code> type but right now its counting as a <code>exe</code> type. Ive gotten everything else working, im just trying to figure out how to use <code>stat()</code> to check if the <code>argv</code> is a directory.  </p>\n\n<p>Heres what I have so far: </p>\n\n<pre><code>#include &lt;sys/stat.h&gt; \n\nint main(int argc, char* argv[]){\nint cCount = 0;\nint cHeadCount = 0;\nint dirCount = 0; \n\n\nfor(int i = 1; i &lt; argc; i++){\n\n    FILE *fi = fopen(argv[i], \"r\");\n\n    if(!fi){\n        fprintf(stderr,\"File not found: %s\", argv[i]);\n    }\n    else{\n\n    struct stat directory;\n    //if .c extension &gt; cCount++\n    //else if .h extension &gt; cHeadCount++\n\n    else if( stat( argv[i], &amp;directory ) == 0 ){\n        if( directory.st_mode &amp; S_IFDIR ){\n          dirCount++;\n        }\n     }\n\n    }\n\n   //print values, exit\n }\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list", "hashtable"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1508975109, "post_id": 46943606, "comment_id": 80834804, "body": "BTW <code>strcpy(newptr-&gt;word&#47;* maybe name *&#47;, buffer);</code> : You need to allocate a copy destination area to <code>name</code> before this."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508975378, "post_id": 46943606, "comment_id": 80834867, "body": "start with <code>void print(node *np){ while(np){ printf(&quot;%s-&gt;&quot;, np-&gt;name); np = np-&gt;next; } printf(&quot;Nil\\n&quot;); }</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1508977041, "post_id": 46943606, "comment_id": 80835289, "body": "<code>int main(char* name)</code> is not a correct declaration of the <code>main()</code> function."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508977123, "post_id": 46943606, "comment_id": 80835309, "body": "What is the <code>names</code> array for?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1509019988, "post_id": 46943606, "comment_id": 80854974, "body": "Function definition must be above <code>main()</code> to use inside <code>main()</code> or try to declare function prototype above <code>main()</code>."}], "owner": {"reputation": 1, "user_id": 8711761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e992172d21e76ebdc1966e09d7362e25?s=128&d=identicon&r=PG", "display_name": "Noah Scharmer", "link": "https://stackoverflow.com/users/8711761/noah-scharmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508977239, "creation_date": 1508974521, "last_edit_date": 1508977239, "question_id": 46943606, "link": "https://stackoverflow.com/questions/46943606/creating-a-function-to-print-out-the-values-stored-in-hash-table", "title": "Creating a function to print out the values stored in hash table", "body": "<p>I am having trouble figuring out how to print out he values I have stored in this hash table.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct node\n{\n    char word;\n    char* name;\n    struct node* next;\n}\nnode;\n\nnode* first[26] = {NULL};\n\nint main(char* name)\n{\n\n    char* names[] = { \"nick\", \"noah\", \"kyle\", \"sam\", \"hugo\", \"batman\"};\n\n\n    int hashedValue = hash(name);\n\n    insert(hashedValue, name);\n}\n\nint hash(const char* buffer)\n{\n    return tolower(buffer[0]) - 'a';\n}\n\nvoid insert(int key, const char* buffer)\n{\n    // try to instantiate node to insert word\n    node* newptr = malloc(sizeof(node));\n    if (newptr == NULL)\n    {\n        return;\n    }\n\n    // make a new pointer\n    strcpy(newptr-&gt;word, buffer);\n    newptr-&gt;next = NULL;\n\n    // check for empty list\n    if (first[key] == NULL)\n    {\n       first[key] = newptr;\n    }\n    // check for insertion at tail\n    else\n    {\n        node* predptr = first[key];\n        while(1)\n        {\n            // insert at tail\n            if (predptr-&gt;next == NULL)\n            {\n                predptr-&gt;next = newptr;\n                break;\n            }\n\n            // update pointer\n            predptr = predptr-&gt;next;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Q:</strong>\nI want to know how to print values I have stored in this hash table program. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1508974835, "post_id": 46943598, "comment_id": 80834729, "body": "There is no space for NUL in there."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1508975002, "post_id": 46943598, "comment_id": 80834776, "body": "Maybe your source strings do not have a null terminator in the first 20 characters. The strncpy function does not add one in that case, so you would read off the end of your buffers"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508988676, "post_id": 46943598, "comment_id": 80837989, "body": "What exactly do you expect it to do?"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508988760, "post_id": 46943598, "comment_id": 80838011, "body": "Please review <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "owner": {"reputation": 83, "user_id": 8624614, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6cc2e1a8f9306dd8caeaefcf9dafd777?s=128&d=identicon&r=PG&f=1", "display_name": "Manic", "link": "https://stackoverflow.com/users/8624614/manic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508974476, "creation_date": 1508974476, "question_id": 46943598, "link": "https://stackoverflow.com/questions/46943598/copying-a-char-array-to-the-char-array-field-of-a-struct-in-an-array-of-the-stru", "title": "Copying a char array to the char array field of a struct in an array of the struct?", "body": "<p>Pardon me if the question is too confusing!</p>\n\n<p>I have the following structs:</p>\n\n<pre><code>struct msg { \n    char data[20];\n}\n\nstruct pkt {\n   int seqnum;\n   int acknum;\n   int checksum;\n   char payload[20];\n};\n</code></pre>\n\n<p>I have the following array of struct:</p>\n\n<pre><code>struct msg buffer[1000];\n</code></pre>\n\n<p>Now, I am doing the following:</p>\n\n<pre><code>void A_output(struct msg message)\n{\n    //printf(\"Message in A: %s\\n\", message.data);\n    if(inTransit == 0) {\n        if(hasBuffer &gt; 0) {\n            printf(\"%s\\n\", \"Sending from buffer...\");\n            memset(&amp;currentpkt_A-&gt;payload, '\\0', 20);\n\n            strncpy(currentpkt_A-&gt;payload, buffer[buffCount].data, 20);\n            currentpkt_A-&gt;seqnum = seq_A;\n            setChecksum(currentpkt_A);\n            printf(\"Checksum from A: %d\\n\", currentpkt_A-&gt;checksum);\n            printf(\"Payload from A: %s\\n\", currentpkt_A-&gt;payload);\n            tolayer3(0, *currentpkt_A);\n            inTransit = 1;\n\n            starttimer(0, increment);\n\n            printf(\"%s\\n\", \"Adding to buffer when sending directly...\");\n            strncpy(buffer[hasBuffer].data, message.data, 20);\n            hasBuffer++;\n            buffCount++;\n        }\n        else {\n            printf(\"Sending directly...\\n\");\n            memset(&amp;currentpkt_A-&gt;payload, '\\0', 20);\n\n            strncpy(currentpkt_A-&gt;payload, message.data, 20);\n            currentpkt_A-&gt;seqnum = seq_A;\n            setChecksum(currentpkt_A);\n            printf(\"Checksum from A: %d\\n\", currentpkt_A-&gt;checksum);\n            printf(\"Payload from A: %s\\n\", currentpkt_A-&gt;payload);\n            tolayer3(0, *currentpkt_A);\n\n            starttimer(0, increment);\n\n            inTransit = 1;\n        }\n    }\n    else {\n        printf(\"%s\\n\", \"Adding to buffer when in transit...\");\n        strncpy(buffer[hasBuffer].data, message.data, 20);\n        hasBuffer++;\n    }\n    printf(\"Buffer now has: \\n\");\n    for(int i = 0; i&lt;hasBuffer; i++)\n        printf(\"%s\\n\", buffer[i].data);\n}\n</code></pre>\n\n<p>The problem is, when I am adding to the buffer and printing it out I can see the following:</p>\n\n<p>On the first addition buffer is:</p>\n\n<p>aaaaaaaaaaaaaaaaaaaa</p>\n\n<p>On the second addition buffer is:</p>\n\n<p>aaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbb</p>\n\n<p>bbbbbbbbbbbbbbbbbbbb</p>\n\n<p>On the third addition buffer is:</p>\n\n<p>aaaaaaaaaaaaaaaaaaaabbbbbbbbbbbbbbbbbbbbcccccccccccccccccccc</p>\n\n<p>bbbbbbbbbbbbbbbbbbbbcccccccccccccccccccc</p>\n\n<p>cccccccccccccccccccc</p>\n\n<p>That is, it's getting added to the end of every cell of the array and then the new cell. I can't seem to figure out why this is happening.</p>\n"}, {"tags": ["c", "ubuntu", "libraries", "icu"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508976050, "post_id": 46943586, "comment_id": 80835053, "body": "Did you install v59 before or after this problem presented itself? If so, how?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1508976631, "post_id": 46943586, "comment_id": 80835208, "body": "You have not completely deleted version 59 from your system, otherwise you wouldn&#39;t get that undefined reference. The <code>icu-config</code> executable, and/or a few header files are still version 59. Check the version of <code>icu-config</code>, and if there&#39;s a verbose option, see if that shows which header files get included."}, {"owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "edited": false, "score": 0, "creation_date": 1508976801, "post_id": 46943586, "comment_id": 80835243, "body": "I believe I initially installed v59 before the problem occurred. I installed it by untarring the archive from the ICU site, and then manually copying the files in the archive to the filesystem in a way that mirrored the archive. For example, I copied <code>&#47;home&#47;foo&#47;icu&#47;usr&#47;local&#47;include&#47;*</code> to <code>&#47;usr&#47;local&#47;include</code>."}, {"owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "edited": false, "score": 0, "creation_date": 1508977111, "post_id": 46943586, "comment_id": 80835305, "body": "@Evert icu-config --version shows 57.1.  Don&#39;t see an option to show included header files, but will keep working on it."}, {"owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "edited": false, "score": 0, "creation_date": 1508981152, "post_id": 46943586, "comment_id": 80836225, "body": "@Evert I&#39;ve already deleted all the files in <code>&#47;usr&#47;local&#47;include&#47;unicode</code> and associated v59 files in <code>&#47;usr&#47;local&#47;*</code> a couple of times now, but I keep getting the same error. Spot-check comparison with <code>&#47;usr&#47;include&#47;unicode</code> shows the files are different. The icu-config I&#39;m running is v57 as well. What&#39;s left? I don&#39;t want to have to do a clean reinstall of Ubuntu."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508983780, "post_id": 46943586, "comment_id": 80836847, "body": "I suggest uninstalling all versions of ICU and then reinstalling the version you want. The hand patching confused things. You might need to Greg through the system to make sure everything is truly gone before doing the reinstall."}, {"owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "edited": false, "score": 0, "creation_date": 1508986545, "post_id": 46943586, "comment_id": 80837512, "body": "As I mentioned, half of Ubuntu depends on ICU 57 (the built-in one), so uninstalling it would wreak havoc with my system. It would actually be easier to do a clean reinstall of Ubuntu."}, {"owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "edited": false, "score": 0, "creation_date": 1508993133, "post_id": 46943586, "comment_id": 80839168, "body": "By the way, I&#39;ve already tried to force use of ICU 59 without much luck, but it seems if I could do this, it would be less disruptive and time-consuming than a clean reinstall of the OS."}, {"owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "edited": false, "score": 0, "creation_date": 1509053526, "post_id": 46943586, "comment_id": 80876073, "body": "I was able to show that running Ubuntu from a clean, bootable USB drive would enable me to compile and run my demo app without errors, so I am grudgingly reinstalling the OS -- but less grudgingly than if I hadn&#39;t experimented."}, {"owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "edited": false, "score": 0, "creation_date": 1509071736, "post_id": 46943586, "comment_id": 80880744, "body": "After the OS reinstall, I tried compiling the demo program from my Dropbox copy. I got the same error, except it was looking for the version 57 libraries. I cloned the repo in git (which I had done on the USB drive -- the files were in both GitHub and Dropbox), and it worked again. So it worked twice with git and not at all with Dropbox, either on my old or new installation. Is Dropbox corrupting something? Maybe I could have saved the bother of the reinstallation if I had just done a fresh git clone."}], "owner": {"reputation": 11, "user_id": 8834059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84fc1bb3b4bace6cc854fdeabe01ca1d?s=128&d=identicon&r=PG", "display_name": "Ron Hale-Evans", "link": "https://stackoverflow.com/users/8834059/ron-hale-evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 425, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508974371, "creation_date": 1508974371, "question_id": 46943586, "link": "https://stackoverflow.com/questions/46943586/icu-libraries-missing-in-c-on-ubuntu-17-10", "title": "ICU libraries missing in C on Ubuntu 17.10", "body": "<p>I'm writing a small demo application (in C on Ubuntu 17.10 with the ICU libraries) that is supposed to convert an array of UTF-8 strings to an array of UChar strings and then sort them according to the locale. However, gcc is giving an error message for one line. Here is the line:</p>\n\n<pre><code>u_strFromUTF8(s[l], 512, NULL, line, -1, &amp;err);\n</code></pre>\n\n<p>Here are my variable definitions:</p>\n\n<pre><code>FILE *fp;\nchar *line = NULL;\nchar lines[512][1000];\nUChar *uline = NULL;\nsize_t len = 0;\nssize_t read;\nint l = 0;\nint count = 0;\nUChar s[512][1000];\n</code></pre>\n\n<p>And here is the error:</p>\n\n<pre><code>/tmp/cckFKMCm.o: In function `main':\niosort1.c:(.text+0x10c): undefined reference to `u_strFromUTF8_59'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Here is the <code>icu-config</code> line I'm using to build the application:</p>\n\n<pre><code>#!/bin/bash\n`icu-config --cc --cflags --cppflags --ldflags` -static -o iosort1 iosort1.c\n</code></pre>\n\n<p>From what I can tell, <code>ld</code> is looking for one of the ICU libraries, version 59, and not finding it. Version 57 of the libraries is what comes preinstalled on Ubuntu 17.10.</p>\n\n<p>I've searched the Web and especially Stack Overflow for an answer to this issue. People have asked about many superficially similar problems, but none of the proposed answers has worked for me. Examples: including more libraries in the build script, moving the libraries to the end of the line, adding <code>-static</code>, and more.</p>\n\n<p>The tactics I have thought of myself include downloading and manually installing version 59.1 of the libraries for Fedora from the ICU site into <code>/usr/local</code>, and using the path and the library path to point to various combinations of <code>icu-config</code> versions 57 and 59, and versions 57 and 59 of the ICU libraries. I have also completely deleted version 59 from my disk, and I would have done the same for the preinstalled version 57, except that apparently half of my system depends on it.</p>\n\n<p>Paradoxically, that would seem to be a good sign, because if the preinstalled ICU libraries were broken, half of Ubuntu 17.10 would be too. So it's probable I can get things to work, but how? I don't care which version I end up using, as long as my code will compile.</p>\n\n<p>I'd like to show more of my code, but it's supposed to be one of the \"answers in the back of the book\" for a class (I'm working with the teacher to produce code samples for the students). I can probably show a little more, though, if you let me know what you want to see.</p>\n\n<p>Thanks for your time and expertise.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1508974453, "post_id": 46943576, "comment_id": 80834627, "body": "<code>temp-&gt;filename</code> point to where ? of course crash"}, {"owner": {"reputation": 37, "user_id": 6483640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9RQe.jpg?s=128&g=1", "display_name": "Doug Skinner", "link": "https://stackoverflow.com/users/6483640/doug-skinner"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508974560, "post_id": 46943576, "comment_id": 80834654, "body": "Please clarify your response, as even when I malloc space for the array of still set faults."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1508974635, "post_id": 46943576, "comment_id": 80834674, "body": "<code>fread(&amp;(temp-&gt;filename), sizeof(char), temp-&gt;filename_len, fp);</code> this line your fatal error. you must first allocate storage for <code>temp-&gt;filename</code> and then do <code>fread(temp-&gt;filename, sizeof(char), temp-&gt;filename_len, fp);</code>"}, {"owner": {"reputation": 37, "user_id": 6483640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9RQe.jpg?s=128&g=1", "display_name": "Doug Skinner", "link": "https://stackoverflow.com/users/6483640/doug-skinner"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1508974839, "post_id": 46943576, "comment_id": 80834730, "body": "As I just said, even when I allocate space this happens. If I check the return code for the fread line it returns the filename_len"}, {"owner": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "edited": false, "score": 0, "creation_date": 1508975338, "post_id": 46943576, "comment_id": 80834858, "body": "In addition to the missing allocations, I also don&#39;t see where your filename get null-terminated before you print it with %s. You either need to null-terminate it or use something like printf(&quot;%.*s\\n&quot;, temp-&gt;filename_len, temp-&gt;filename);"}], "answers": [{"comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 1, "creation_date": 1508975702, "post_id": 46943693, "comment_id": 80834958, "body": "+1.  I like your answer better because the use of <code>calloc</code> negates the need to explicitly null terminate the string."}, {"owner": {"reputation": 37, "user_id": 6483640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9RQe.jpg?s=128&g=1", "display_name": "Doug Skinner", "link": "https://stackoverflow.com/users/6483640/doug-skinner"}, "edited": false, "score": 0, "creation_date": 1508979367, "post_id": 46943693, "comment_id": 80835790, "body": "Thank you for taking the time to clarify the statements about allocation. This has resolved my issue."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1508975161, "creation_date": 1508975161, "answer_id": 46943693, "question_id": 46943576, "link": "https://stackoverflow.com/questions/46943576/misunderstanding-of-binary-file-writing-reading-in-c/46943693#46943693", "title": "Misunderstanding of binary file writing/reading in C", "body": "<pre><code>fwrite(&amp;one, one_len, 1, fp);\n</code></pre>\n\n<p><code>&amp;one</code> is the address of the <em>pointer</em> <code>one</code> on the stack, not the location it points to. This means that, instead of writing the string pointed to by <code>one</code>, you're writing the bytes that make up its address, potentially along with whatever happens to come after that in memory.</p>\n\n<pre><code>fread(&amp;(temp-&gt;filename), sizeof(char), temp-&gt;filename_len, fp);\n</code></pre>\n\n<p>Similarly, this reads a pointer (or part of a pointer) into <code>temp-&gt;filename</code>, and may additionally overwrite whatever happens to be after it.</p>\n\n<p>What you need to do is:</p>\n\n<pre><code>fwrite(one, one_len, 1, fp);\n</code></pre>\n\n<p>Write the actual contents of the string, not its address.</p>\n\n<pre><code>temp-&gt;filename = calloc(temp-&gt;filename_len + 1, sizeof(char));\nfread(temp-&gt;filename, sizeof(char), temp-&gt;filename_len, fp);\n</code></pre>\n\n<p>Allocate a buffer sized appropriately for the filename, then read data into that buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": false, "score": 1, "last_activity_date": 1508975288, "last_edit_date": 1508975288, "creation_date": 1508975196, "answer_id": 46943700, "question_id": 46943576, "link": "https://stackoverflow.com/questions/46943576/misunderstanding-of-binary-file-writing-reading-in-c/46943700#46943700", "title": "Misunderstanding of binary file writing/reading in C", "body": "<p>1) You are calling <code>fread</code> with the <strong>address of</strong> <code>temp-&gt;filename</code>. </p>\n\n<pre><code>fread(&amp;(temp-&gt;filename), sizeof(char), temp-&gt;filename_len, fp)\n</code></pre>\n\n<p>You don't want to do this.  <code>temp-&gt;filename</code> is already a pointer to a char.  Instead pass simply <code>temp-&gt;filename</code>.</p>\n\n<p>2) You aren't allocating any space for <code>temp-&gt;filename</code>.  You need to do this after you read <code>temp-&gt;filename_len</code>.</p>\n\n<pre><code>fread(&amp;(temp-&gt;filename_len), sizeof(int), 1, fp);\ntemp-&gt;filename = malloc((temp-&gt;filename_len + 1) * sizeof(char))\nfread(temp-&gt;filename, sizeof(char), temp-&gt;filename_len, fp);\ntemp-&gt;filename[temp-&gt;filename_len] = '\\0';\n</code></pre>\n\n<p>Similarly for <code>temp-&gt;contents</code></p>\n"}], "owner": {"reputation": 37, "user_id": 6483640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j9RQe.jpg?s=128&g=1", "display_name": "Doug Skinner", "link": "https://stackoverflow.com/users/6483640/doug-skinner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "accepted_answer_id": 46943693, "answer_count": 2, "score": 0, "last_activity_date": 1508975288, "creation_date": 1508974253, "question_id": 46943576, "link": "https://stackoverflow.com/questions/46943576/misunderstanding-of-binary-file-writing-reading-in-c", "title": "Misunderstanding of binary file writing/reading in C", "body": "<p>Can someone please explain why the following code segfaults whenever I attempt to do anything with either of the character arrays inside of the struct after I read it in from the binary file? The code is as follows:</p>\n\n<pre><code>struct my_struct {\n    int filename_len;\n    char *filename;\n    int size;\n    char *contents;\n};\n\nint main() {\n    FILE *fp = fopen(\"test.bin\", \"wb\");\n    char *one = \"list1\";\n    char *two = \"test file\";\n    int one_len = strlen(one);\n    int two_len = strlen(two);\n\n    fwrite(&amp;one_len, sizeof(int), 1, fp);\n    fwrite(&amp;one, one_len, 1, fp);\n    fwrite(&amp;two_len, sizeof(int), 1, fp);\n    fwrite(&amp;two, two_len, 1, fp);\n    fclose(fp);\n\n\n\n    struct x *temp = malloc(sizeof(struct x));\n    fp = fopen(\"test.bin\", \"rb\");\n\n    fread(&amp;(temp-&gt;filename_len), sizeof(int), 1, fp);\n    fread(&amp;(temp-&gt;filename), sizeof(char), temp-&gt;filename_len, fp);\n    fread(&amp;(temp-&gt;size), sizeof(int), 1, fp);\n    fread(&amp;(temp-&gt;contents), sizeof(char), temp-&gt;size, fp);\n\n    // This  does not segfault\n    printf(\"%d\\n\", temp-&gt;filename_len);\n\n    // This does\n   printf(\"%s\\n\", temp-&gt;filename);\n   fclose(fp);\n\n   return 0;\n}\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "function", "static"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1508974304, "post_id": 46943560, "comment_id": 80834579, "body": "Suppose that  <code>function1</code> is called from different places in the code. Now the choices are the local static variable or a global variable. Which do you think is better?"}, {"owner": {"reputation": 1, "user_id": 8629382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159277972575640/picture?type=large", "display_name": "Ellie Cronk", "link": "https://stackoverflow.com/users/8629382/ellie-cronk"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508974627, "post_id": 46943560, "comment_id": 80834673, "body": "Ah, I see why they used the static variable now, it&#39;s sensible in the context of a larger program. Thanks!"}, {"owner": {"reputation": 763, "user_id": 1138878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d832527d90da4e08b8c2fdd449fb9d49?s=128&d=identicon&r=PG", "display_name": "MacD", "link": "https://stackoverflow.com/users/1138878/macd"}, "edited": false, "score": 0, "creation_date": 1508974734, "post_id": 46943560, "comment_id": 80834702, "body": "In your test, run the function a couple of times (as in, call them [copy/paste the actual function call]) to see the different results. There is no &#39;better&#39; here, it just depends on what you want the function to actually DO! Do you want the function to remember where it was or do you want to have a function you can call with an input and have it pass back an output, independant of how many times you have called it?"}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1508975593, "post_id": 46943560, "comment_id": 80834933, "body": "Because static variables assignment accur just only one time. in first code, at the first calling of fuction x is initialized to zero and for further chain of calls zero increament by one. one increase one, two increase by one and so on."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1508982152, "post_id": 46943560, "comment_id": 80836454, "body": "In the second example, <code>function1</code> does not modify <code>i</code> in <code>main</code> ; these two examples do different thing"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1508982182, "post_id": 46944548, "comment_id": 80836469, "body": "The code example in &quot;argument approach&quot; does not actually work"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1902824"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1508982628, "post_id": 46944548, "comment_id": 80836563, "body": "Thanks, I&#39;ve changed it to highlight the separation of logic. The previous code could actually work (with the proper surrounding logic), but it may cause more confusion."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1902824"}, "is_accepted": false, "score": 0, "last_activity_date": 1508982842, "last_edit_date": 1508982842, "creation_date": 1508982067, "answer_id": 46944548, "question_id": 46943560, "link": "https://stackoverflow.com/questions/46943560/saving-a-value-between-function-calls-in-c/46944548#46944548", "title": "Saving a value between function calls in C", "body": "<p>As people stated in the comments, there are pros/cons to each approach. Which one you choose depends on the situation you are in, and what tradeoffs you are willing to make. Below are a few ideas to get you rolling.</p>\n\n<h2>Static variable approach</h2>\n\n<pre><code>void function1(void)\n{\n    static int x = 0;\n    printf(\"function1 has now been called %d times\\n\", ++x);\n}\n</code></pre>\n\n<h3>Pros:</h3>\n\n<ul>\n<li><p><strong>Lower resource usage</strong>: You aren't passing <code>x</code> on the stack, so you use less memory, if memory is a premium. Additionally, you save a few instructions moving the argument onto the stack. The address is also fixed, so you don't need to store it or manipulate it in code.</p></li>\n<li><p><strong>Good locality</strong>: As a static, <code>x</code> remains minimally scoped to it's purpose, meaning the code is easier to understand and debug. If the scope of <code>x</code> was increased to the entire file, it would be a lot harder to understand (who is modifying <code>x</code>, how can it change, etc).</p></li>\n<li><p><strong>More flexible architecturally (simple interface)</strong>: There really isn't a wrong way to use this function \u2014 just call it. Don't need to worry about validating inputs. If you need to move it around, just drop in the header and you are good to go.</p></li>\n</ul>\n\n<h3>Cons:</h3>\n\n<ul>\n<li><p><strong>Less flexible functionally</strong>: If you need to change the value of <code>x</code>, for example, needing to reset it, you don't have a way to do that. You would need to alter your design somehow (make <code>x</code> a global, add some reset parameter to the function, etc) to make it work. Requirements change all the time, and the one that can be minimally changed to do what you want is a hallmark of good design.</p></li>\n<li><p><strong>Harder to test</strong>: Tying into the point above, how would you unit test this function? If you wanted to test some low numbers and some high numbers (typical boundary tests), you would need to iterate through the entire space, which may not be feasible if the function takes a long time to run.</p></li>\n</ul>\n\n<h2>Argument approach</h2>\n\n<pre><code>void function1(int x)\n{\n    printf(\"function1 has now been called %d times\\n\", x);\n}\n\nvoid caller(int *x) /* could get x from anywhere */\n{                   /* showing it as a pointer from outside here */\n    *x = *x + 1;\n    function1(*x);\n}\n</code></pre>\n\n<h3>Pros:</h3>\n\n<ul>\n<li><p><strong>More flexible functionally</strong>: If your design requirements change, it's relatively simple to change. If you need to change the sequence or have special conditions, like repeat the first value or skip a particular value, that's really easy to do from the calling code. You've separated out things so you can bolt on a new driver and don't need to touch this function anymore. Things are more modular.</p></li>\n<li><p><strong>More testable</strong>: The function can be tested much easier, granting more confidence that it actually works. You can do boundary testing, test inputs you are worried about, or recreate a failure scenario with ease.</p></li>\n<li><p><strong>Easier to understand</strong>: Functions in this format have the <em>ability</em> to be easier to understand. If a function produces the same output for a given set of inputs, it is said to be pure. The example given is not pure, because it is doing IO (printing to the screen). However, generally speaking, a pure function is easier to reason about because it doesn't hold any internal state, so the only things you really care about are the inputs. Just like 1 + 1 = 2, a pure function has this same simplifying property.</p></li>\n<li><p><strong>(Potentially) more performant</strong>: In the case of pure functions, compilers can take advantage of the function's referential transparency (a fancy word meaning you can replace <code>add(1,1)</code> with <code>3</code>) and cache results from previous calls safely. Why do the same work again if you've already done it? If calling the function was particularly expensive and sat in a tight loop that called it with similar arguments, you've just saved tons of cycles. Again, this function is not pure, but even if it was, you wouldn't get any performance boosts since it is a sequential counter. Any benefits would be seen when the counter wraps, or the function is called with the same arguments again.</p></li>\n</ul>\n\n<h3>Cons:</h3>\n\n<ul>\n<li><p><strong>More resource usage</strong>: If you are squeezed for memory, you utilize a little more stack space as you pass the variable over. You also use more instructions keeping track of it's address and moving it over.</p></li>\n<li><p><strong>Easier to screw up</strong>: If you only support numbers 1-10, someone is going to pass it 0 or -1. Now you need to decide how to handle that.</p></li>\n<li><p><strong>(Potentially) less performant</strong>: You can also bog down your code handling cases that <em>should</em> never happen in the name of defensive programming (which is a good thing!). But generally speaking, defensive programming programming is not built for speed. Speed comes from carefully thought out assumptions. If you are guaranteed that your input falls in a certain range, you can keep things moving as fast as possible without pesky sanity checks peppering your pipeline. The flexibility you gain from exposing this interface comes at a performance cost.</p></li>\n<li><p><strong>Less flexible architecturally (more cruft)</strong>: If you call this function from a lot of places, now you need to string along this parameter to feed to it. If you are in a particularly deep call stack, there can be 20 or more functions which pass this argument along. And if the design changes and you need to move this function call from one place to another, you have the pleasure of ripping out the argument from the existing call stack, changing all the callers to conform to the new signature, inserting the argument into the new call stack, and changing all <em>it's</em> callers to conform to the new signature! Your other option is to leave the old call stack alone, which leads to harder maintainability and a higher \"huh\" factor when someone peruses the extra baggage from the days of yore.</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 8629382, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159277972575640/picture?type=large", "display_name": "Ellie Cronk", "link": "https://stackoverflow.com/users/8629382/ellie-cronk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2185, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1508982842, "creation_date": 1508974129, "question_id": 46943560, "link": "https://stackoverflow.com/questions/46943560/saving-a-value-between-function-calls-in-c", "title": "Saving a value between function calls in C", "body": "<p>Is there any difference in functionality between these two sections of code? The main difference is the use of 'static' in the first example to save the value of x each time function1 is called. But the second example removes the need to use 'static' altogether by passing the value of i from main to function1 on each iteration of the for loop. The both have exactly the same output. Is there any hidden advantage to using one way over the other?</p>\n\n<p>Note: the first example is a simplified version of a piece of code I've seen. Just wondering why this was used rather than the alternative.</p>\n\n<p>First example:</p>\n\n<pre><code>void function1()\n{\n    static int x = 0;\n    printf(\"function1 has now been called %d times\\n\", ++x);\n}\n\nint main(void)\n{\n    for (int i = 0; i &lt; 5; i++)\n        function1();\n    return 0;\n}\n</code></pre>\n\n<p>Second example:</p>\n\n<pre><code>void function1(int i)\n{\n    printf(\"function1 has now been called %d times\\n\", ++i);\n}\n\nint main(void)\n{\n    int i;\n    for (i = 0; i &lt; 5; i++)\n        function1(i);\n    return 0;\n}\n</code></pre>\n\n<p>I'd appreciate any shared knowledge.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1508974331, "post_id": 46943513, "comment_id": 80834587, "body": "There is no &#39;main&#39; function:  <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>  It is easier for people to help you if they can easily run your code.  Providing complete code makes that simple."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8087155"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1508974394, "post_id": 46943513, "comment_id": 80834606, "body": "Thanks for tip, added!"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8087155"}, "edited": false, "score": 0, "creation_date": 1508975112, "post_id": 46943652, "comment_id": 80834807, "body": "Thank you so much! This is exactly what I am trying to learn!"}], "tags": [], "owner": {"reputation": 1305, "user_id": 2902161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1261558429/picture?type=large", "display_name": "Ante Jablan Adamovi\u0107", "link": "https://stackoverflow.com/users/2902161/ante-jablan-adamovi%c4%87"}, "is_accepted": true, "score": 1, "last_activity_date": 1508974843, "creation_date": 1508974843, "answer_id": 46943652, "question_id": 46943513, "link": "https://stackoverflow.com/questions/46943513/how-to-make-bow-tie-shape-with-for-while-loops-in-c/46943652#46943652", "title": "How to make Bow Tie shape with for - while loops in C", "body": "<p>Change your code like:</p>\n\n<pre><code>for (i = 0; i &lt;= sayi; i++) {\n    // Prints left part of the tie in row\n    for (j = 0; j &lt; i; j++) {\n      printf(\"*\\t\");\n    }\n    // Prints the spaces between tie edges\n    for (j = 0; j &lt; sayi - i; j++) {\n        printf(\"\\t\\t\");\n    }\n    // Prints right part of the tie in row\n    for (j = 0; j &lt; i; j++) {\n      printf(\"*\\t\");\n    }\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Repeat similar but reverse for lower part of the tie.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8087155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 46943652, "answer_count": 1, "score": -4, "last_activity_date": 1508974843, "creation_date": 1508973813, "last_edit_date": 1508974545, "question_id": 46943513, "link": "https://stackoverflow.com/questions/46943513/how-to-make-bow-tie-shape-with-for-while-loops-in-c", "title": "How to make Bow Tie shape with for - while loops in C", "body": "<p>Actually I did the easy part, but couldn't get more. I am a new Comp Eng student and we're trying to learn Loops. Our professor gave us this work to learn something. I did first part easily from last lesson. But I dont know how to lead it further. </p>\n\n<p><a href=\"https://i.stack.imgur.com/z9FzH.png\" rel=\"nofollow noreferrer\">I need to reflect this and get a full Bow Tie</a></p>\n\n<p>Here it is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain(); {\n\n    int sayi;\n\n    printf(\"Sayiyi gir &gt; \");\n    scanf(\"%d\",&amp;sayi);\n\n    for (int i = 0; i &lt; sayi; i++) {\n        for (int j = 0; j &lt; i; j++) {\n            printf(\"*\\t\");\n        }\n        printf(\"\\n\");\n    }\n\n    for (int i = sayi; i &gt;= 1; i--) {\n        for (int j = 0; j &lt; i; j++) {\n            printf(\"*\\t\");\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "memory-management", "stack", "heap", "virtual-memory"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1508973744, "post_id": 46943483, "comment_id": 80834436, "body": "You never dereference the pointer. If you want a segfault, just do <code>*((int*)0);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508973897, "post_id": 46943483, "comment_id": 80834479, "body": "Even though not dereferenced, it is <i>undefined behaviour</i> since <code>ptr</code> is unintialised."}, {"owner": {"reputation": 1669, "user_id": 7508077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b4193888717f50e77805498af1435b9?s=128&d=identicon&r=PG&f=1", "display_name": "EsmaeelE", "link": "https://stackoverflow.com/users/7508077/esmaeele"}, "edited": false, "score": 0, "creation_date": 1508975260, "post_id": 46943483, "comment_id": 80834843, "body": "I think you must use <code>malloc()</code> to use pointer that refers to Heap. <code>ptr= malloc()</code> obtain desired memory location at heap, then you can access to heap with ptr pointer."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1508976109, "post_id": 46943483, "comment_id": 80835067, "body": "As I understand it from your question, you&#39;re asking for 2 different things. You can point at the heap and increment that until it crashes, or you can point somewhere on the stack and increment that until it crashes. Which one do you want?"}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508976243, "post_id": 46943483, "comment_id": 80835103, "body": "Both stack and heap actually"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1508978554, "post_id": 46943483, "comment_id": 80835630, "body": "This really depends on what hardware and compiler you are using"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508979518, "post_id": 46944023, "comment_id": 80835826, "body": "Why can&#39;t you loop over every address? Wouldn&#39;t accessing every address, setting a value, eventually cause it to run out?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508979591, "post_id": 46944023, "comment_id": 80835848, "body": "In a virtual memory system, most addresses aren&#39;t mapped, or some of them are protected because they&#39;re part of the kernel. So eventually you hit a block that isn&#39;t accessible, and that&#39;s what causes a segmentation violation."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508979712, "post_id": 46944023, "comment_id": 80835882, "body": "What sets the value for how many iterations the while loop will run for? Say it runs 500 times before the segmentation fault, why did it run 500 times rather than 1000 times?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508979894, "post_id": 46944023, "comment_id": 80835920, "body": "It&#39;s dependent on how the process memory is laid out by the operating system and C runtime library. You get the error when you run into the first unmapped address page."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508979951, "post_id": 46944023, "comment_id": 80835930, "body": "It seems like you need to read about how process memory is implemented."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508981086, "post_id": 46944023, "comment_id": 80836200, "body": "@TrevorGood Because it just happened (by coincidence!) that <code>&amp;object+499</code> was a valid readable address but <code>&amp;object+500</code> wasn&#39;t."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1508978329, "last_edit_date": 1508978329, "creation_date": 1508977882, "answer_id": 46944023, "question_id": 46943483, "link": "https://stackoverflow.com/questions/46943483/causing-a-seg-fault-in-c-heap-stack-virtual-memory/46944023#46944023", "title": "Causing a seg fault in C | Heap stack virtual memory", "body": "<p>To get a pointer that points to the stack, set it to the address of a local variable:</p>\n\n<pre><code>int main() {\n    int object;\n    int *p = &amp;object;\n</code></pre>\n\n<p>However, simply incrementing a pointer will not cause a segmentation fault. To get a segmentation fault you need to dereference an invalid pointer. So the loop should be like:</p>\n\n<pre><code>    while(1) {\n        ++ptr;\n        printf(\"%p %d\\n\", ptr, *ptr);\n    }\n</code></pre>\n\n<p>Trying to print <code>*ptr</code> will eventually cause the fault.</p>\n\n<p>For the heap you can do it similarly, but initialize <code>p</code> with a call to <code>malloc()</code> instead of the address of a local variable.</p>\n"}], "owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 1, "accepted_answer_id": 46944023, "answer_count": 1, "score": 1, "last_activity_date": 1508978329, "creation_date": 1508973639, "question_id": 46943483, "link": "https://stackoverflow.com/questions/46943483/causing-a-seg-fault-in-c-heap-stack-virtual-memory", "title": "Causing a seg fault in C | Heap stack virtual memory", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n  char *ptr;\n\n  while(1){ \n    ++ptr; \n    printf(\"%p\\n\", ptr); \n  }\n  return 0;\n}\n</code></pre>\n\n<p>Question: Your code should increment a pointer that points at the\nheap, by 1 byte, repeatedly, until the program crashes.</p>\n\n<p>I'm trying to create a segfault by iterating over all addresses in the stack, one byte at a time. However, the code just keeps running and doesn't cause a segmentation fault. How could I change it to cause a segfault? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508973807, "post_id": 46943467, "comment_id": 80834456, "body": "<code>printf(&quot;Nombre: %c\\n&quot;, *nombre[i]);</code> --&gt; <code>printf(&quot;Nombre: %s\\n&quot;,  nombre[i]);</code>"}, {"owner": {"reputation": 13, "user_id": 8127665, "user_type": "registered", "profile_image": "https://graph.facebook.com/1380580512011787/picture?type=large", "display_name": "Germinator Mendez", "link": "https://stackoverflow.com/users/8127665/germinator-mendez"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508979810, "post_id": 46943467, "comment_id": 80835902, "body": "Thank you your answer was really helpful, just that simple"}], "owner": {"reputation": 13, "user_id": 8127665, "user_type": "registered", "profile_image": "https://graph.facebook.com/1380580512011787/picture?type=large", "display_name": "Germinator Mendez", "link": "https://stackoverflow.com/users/8127665/germinator-mendez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508973526, "creation_date": 1508973526, "question_id": 46943467, "link": "https://stackoverflow.com/questions/46943467/how-to-input-strings-in-a-char-array-and-how-to-print-it-out", "title": "How to input strings in a char array and how to print it out", "body": "<p>This is my code, I'm traying to read a string from keyboard and store it in char \"nombre\" but at the time to print it only prints the first letter of each string</p>\n\n<p>int main()\n{</p>\n\n<pre><code>char nombre[10][50]={0};\nfloat calificacion[10];\nfloat promedio=0, calificacionAlta=0, calificacionBaja=100;\nint opc, sobresaliente, deficiente;\nfor(int i=0; i&lt;10; i++){\n    system(\"cls\");\n    printf(\"Ingresa el nombre del alumno no. %d: \", i+1);\n    scanf(\"%s\", nombre[i]);\n}\nfor(int i=0; i&lt;10; i++){\n    system(\"cls\");\n    printf(\"Ingresa la calificacion del alumno no. %d: \", i+1);\n    scanf(\"%f\", &amp;calificacion[i]);\n    promedio+=calificacion[i];\n    if(calificacion[i]&gt;calificacionAlta)\n        sobresaliente=i;\n    if(calificacion[i]&lt;calificacionBaja)\n        deficiente=i;\n}\npromedio/=10;\nprintf(\"Elige con que funcion quieres imprimir los datos\\n\");\nprintf(\"1.- For\\n\");\nprintf(\"2.- While\\n\");\nprintf(\"3.- Do While\\n\");\nprintf(\"4.- Salir\\n\");\nscanf(\"%d\", &amp;opc);\nswitch(opc){\n    case 1:\n</code></pre>\n\n<p>Here is the part where I'm trying to print the info of the array</p>\n\n<pre><code>        printf(\"Alumnos por encima del promedio\\n\");\n        for(int i=0; i&lt;10; i++){\n            if(calificacion[i]&gt;promedio){\n                printf(\"Nombre: %c\\n\", *nombre[i]);\n                printf(\"Calificacion: %.2f\\n\", calificacion[i]);\n            }\n        }\n\n        printf(\"Alumno sobre saliente\\n\");\n        printf(\"Nombre: %c\\n\", *nombre[sobresaliente]);\n        printf(\"Calificacion: %.2f\\n\", calificacion[sobresaliente]);\n        printf(\"Alumno burro\\n\");\n        printf(\"Nombre: %c\\n\", *nombre[deficiente]);\n        printf(\"Calificacion: %.2f\\n\", calificacion[deficiente]);\n        break;\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "arrays", "linked-list"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508972454, "post_id": 46943254, "comment_id": 80834065, "body": "2) <code>change_partysize();</code> need arguments."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508972510, "post_id": 46943254, "comment_id": 80834078, "body": "Why does <code>delete_party()</code> loop over all the groups? Shouldn&#39;t it just delete from the group for the size you give?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508972695, "post_id": 46943254, "comment_id": 80834125, "body": "@BLUEPIXY If the variables had initializations it would be a problem. Declarations by themselves are OK in <code>switch</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508972776, "post_id": 46943254, "comment_id": 80834151, "body": "What is <code>if(p &lt;= size)</code> supposed to do? Why are you comparing a pointer to a party size? I guess that was supposed to be <code>if (p-&gt;size &lt;= size)</code>"}, {"owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508973066, "post_id": 46943254, "comment_id": 80834259, "body": "@Barmar to see if the value falls outside of the range"}, {"owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1508973230, "post_id": 46943254, "comment_id": 80834296, "body": "@Barmar now I&#39;m getting a segmentation fault after creating 3 parties and deleting one of them by size"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1508973319, "post_id": 46943254, "comment_id": 80834318, "body": "<code>node *p = head[i];             node *previous = head[i];</code> : <code>p</code> and <code>previos</code> are local variables in for-loop."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1508980457, "post_id": 46943254, "comment_id": 80836057, "body": "@ConnorBrereton Instead of putting &quot;Solved&quot; in the comments and title, please select the green checkmark to the left of the answer that helped you. (You will even get a few points for this.)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1508983697, "post_id": 46943254, "comment_id": 80836827, "body": "when compiling, always enable all the warnings then fix those warnings.  There are lots of warnings about the &#39;types&#39; using an uninitialized variable, variable set but not used, etc etc.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic -Wconversion -std=gnu11</code>)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1508985113, "post_id": 46943254, "comment_id": 80837185, "body": "@ConnorBrereton Rather than edit your question, review <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "edited": false, "score": 0, "creation_date": 1508974528, "post_id": 46943528, "comment_id": 80834645, "body": "It&#39;s only deleting the first node in the list and not by the size specified. I think maybe there is an issue lying in the traversal to the node with the size"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "edited": false, "score": 0, "creation_date": 1508975481, "post_id": 46943528, "comment_id": 80834901, "body": "It deletes the first node where <code>p-&gt;size &lt;= size</code>. So if the user enters 6, it will delete a node from group 2 with size = 5 or 6."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "edited": false, "score": 0, "creation_date": 1508975530, "post_id": 46943528, "comment_id": 80834910, "body": "And since all the nodes in group 2 should have size 5 or 6, that means it will delete the first node in the group."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "edited": false, "score": 0, "creation_date": 1508975561, "post_id": 46943528, "comment_id": 80834922, "body": "Maybe you should use <code>p-&gt;size == size</code> instead of <code>&lt;=</code>?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1508973936, "creation_date": 1508973936, "answer_id": 46943528, "question_id": 46943254, "link": "https://stackoverflow.com/questions/46943254/array-of-singly-linked-list-wont-delete-node/46943528#46943528", "title": "Array of singly linked list won&#39;t delete node", "body": "<p>You're declaring new variables <code>p</code> and <code>previous</code> inside the <code>for</code> loop when you delete by <code>size</code>. So when the code after the loop uses these variables, it's using the uninitialized variables declared at the top of the function. Get rid of the declarations and just assign the variables.</p>\n\n<p>Also, <code>if (p &lt;= size)</code> appears to be a typo for <code>if (p-&gt;size &lt;= size)</code>. I'm surprised you didn't get a compiler warning for that.</p>\n\n<p>You can also replace the <code>if(breaker)</code> check with a test in the <code>for</code> header.</p>\n\n<pre><code>    for(i = group; !breaker &amp;&amp; i &gt; -1; i--)\n    {\n        p = head[i];\n        previous = head[i];\n        while(p != NULL)\n        {\n            if(p-&gt;size &lt;= size)\n            {\n                breaker = 1;\n                break;\n            }\n\n            else\n            {\n                previous = p;\n                p = p-&gt; next;\n            }\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5213380, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/043886171da0834b40b208f58026ea17?s=128&d=identicon&r=PG&f=1", "display_name": "eel314", "link": "https://stackoverflow.com/users/5213380/eel314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 46943528, "answer_count": 1, "score": 0, "last_activity_date": 1508985038, "creation_date": 1508972079, "last_edit_date": 1508985038, "question_id": 46943254, "link": "https://stackoverflow.com/questions/46943254/array-of-singly-linked-list-wont-delete-node", "title": "Array of singly linked list won&#39;t delete node", "body": "<p>I have an array[4] where each index of the array has a singly linked list that holds the following information: name, size. The switch statement controls what index the information will go into according to the size of the party.</p>\n\n<p>Problem: When trying to delete a node according to the size (user inputs) the node will not delete.</p>\n\n<p>I know that all of the cases of deletion have the proper syntax but I cannot figure out why my node will not delete. Appreciate any help.</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node\n{\n    char name[20];\n    int size;\n    struct node *next;\n}node;\n\nnode* head[4]={NULL,NULL,NULL,NULL};\nnode* tail[4]={NULL,NULL,NULL,NULL};\n\n//\n// proto's\n//\n\nvoid add_party(int, char name[], int size);\nvoid delete_party(char name[], int size);\nvoid list_parties(void);\nvoid change_p_size(char name[], int size);\n\n\n//\n// main function\n//\n\nint main()\n{\n    int x;\n    while (1)\n    {\n        fflush(stdin);\n        printf(\"\\n\\nEnter 1 to add a party\\nEnter 2 to remove a party\\nEnter 3 for the list of the party\\nEnter 4 to change party size.\\nEnter 5 to quit.\\n\\n\");\n        // user interface\n        scanf(\"%d\",&amp;x);\n        switch(x)\n        {\n                char name[20]; //local variables\n                int size;\n\n            case 1:\n                printf(\"\\nParty Name: \");\n                scanf(\"%s\", name);\n                printf(\"\\nParty Size: \");\n                scanf(\"%d\", &amp;size);\n                if(size == 0)\n                {\n                    printf(\"\\nThat is not a valid command. Party not added!\\n\");\n                }\n                if(size &gt;= 1 &amp;&amp; size &lt;= 2)\n                {\n                    add_party(0, name, size);\n                }\n                else if(size &gt;= 3 &amp;&amp; size &lt;= 4)\n                {\n                    add_party(1, name, size);\n                }\n                else if(size &gt;= 5 &amp;&amp; size &lt;= 6)\n                {\n                    add_party(2, name, size);\n                }\n                else if(size &gt;= 7)\n                {\n                    add_party(3, name, size);\n                }\n                break;\n\n            case 2:\n                printf(\"\\nSize of party to delete: \");\n                scanf(\"%i\", &amp;size);\n                delete_party(NULL, size);\n                break;\n\n            case 3:\n                list_parties();\n                break;\n\n            case 4:\n                change_partysize();\n                break;\n\n            case 5:\n                exit(0);\n\n            default:\n                continue;\n        }\n    }\n}\n\n//\n//add function\n//\n\nvoid add_party(int h, char *name, int size)\n{\n\n    //create a new node\n    int i=0;\n    int breaker = 0;\n    node *p;\n    node *new_item;\n\n    new_item = (node *)malloc(sizeof(node)); // allocate memory the size of the struct\n\n    strcpy(new_item-&gt;name,name);\n    new_item-&gt;size = size;\n\n    if(head[h] == NULL &amp;&amp; tail[h] == NULL) // if an empty list, create a head and tail\n    {\n        head[h] = new_item;\n        tail[h] = head[h];\n        new_item-&gt;next = NULL;\n        return;\n    }\n\n    //traversal\n    for(i=0; i&lt;4; i++)\n    {\n        p = head[i];\n        while(p != NULL)\n        {\n            //check that no repeating names. delete nodes that do have repeating names\n            if(strcmp(p-&gt;name,name) == 0)\n            {\n                printf(\"\\nSorry, that name is already taken\\n\");\n                free(new_item);\n                return;\n            }\n            p = p-&gt;next; //go to the next node in the list\n        }\n    }\n    tail[h]-&gt;next = new_item;\n    new_item-&gt;next = NULL;\n    tail[h] = new_item;\n}\n\n//\n//delete function\n//\n\nvoid delete_party(char *name, int size)\n{\n    int i=0;\n    int breaker = 0;\n    node *p;\n    node *previous;\n    if(name != NULL)\n    {\n        for(i=0; i&lt;4; i++)\n        {\n\n            p = previous = head[i]; //make sure previous trails behind head\n            while(p != NULL)\n            {\n                int c = (strcmp(p-&gt;name,name)==0);\n                if(c==0)\n                {\n                    breaker = 1;\n                    break;\n                }\n                else\n                    previous = p;\n                    p = p -&gt; next;\n            }\n            if(breaker==1)\n                break;\n        }\n    }\n    else\n    {\n        int group = -1;\n\n        if(size == 1 || size == 2)\n        {\n            group = 0;\n        }\n        if(size == 3 || size == 4)\n        {\n            group = 1;\n        }\n        if(size == 5 || size == 6)\n        {\n            group = 2;\n        }\n        if(size &gt;= 7)\n        {\n            group = 3;\n        }\n\n        for(i = group; i &gt; -1; i--)\n        {\n            node *p = head[i];\n            node *previous = head[i];\n            while(p != NULL)\n            {\n                if(p &lt;= size)\n                {\n                    breaker = 1;\n                    break;\n                }\n\n                else\n                {\n                    previous = p;\n                    p = p-&gt; next;\n                }\n            }\n            if(breaker)\n                break;\n        }\n    }\n    if(p == NULL)\n        return;\n    if(head[i] == tail[i] &amp;&amp; head[i] != NULL) // case 1, empty list\n    {\n        printf(\"\\nList is empty!\\n\");\n        return;\n    }\n    else if(p == tail[i] &amp;&amp; p == head[i]) // case 2, one element\n    {\n        head[i] = NULL;\n        tail[i] = NULL;\n        free(p);\n    }\n    else if(p == head[i]) // case 3, delete from the head\n    {\n        head[i] = head[i] -&gt; next;\n        tail[i] = NULL;\n        free(p);\n    }\n    else if(p == tail[i]) // case 4, delete from tail\n    {\n        tail[i] = previous;\n        tail[i] -&gt; next = NULL;\n        free(p);\n    }\n    else // case 5, delete from middle\n    {\n        previous -&gt; next = p -&gt; next;\n        free(p);\n    }\n\n}\n\n//\n// list function\n//\n\nvoid list_parties(void)\n{\n    int i = 0;\n    node *p=head;\n    for(i=0; i&lt;4; i++)\n    {\n        p=head[i];\n        while(p != NULL)\n        {\n            printf(\"\\n\\n%s, %d\\n\\n\", p-&gt;name, p-&gt;size);\n            p=p-&gt;next;\n        }\n    }\n}\n\n//\n// change function\n//\n\nvoid change_partysize(char *name, int size)\n{\n    int absolute_value = 0;\n    int comparison = 0;\n    int current_size = 0;\n    printf(\"\\nWhat name is your party under?\\n\");\n    scanf(\"%s\", name);\n    //check if the name\n    printf(\"\\nWhat would you like to change the size to?\\n\");\n    scanf(\"%d\", &amp;size);\n    node *p;\n    while(p != NULL)\n    {\n        if(p-&gt;name == name) //new size falls into same range as the size coorelating to the name\n        {\n            current_size = p-&gt;size;\n            absolute_value = abs(size - current_size);\n            comparison = size - current_size;\n\n            if(current_size &gt; 7 &amp;&amp; size &gt; 7)\n            {\n                current_size = size;\n                return;\n            }\n            else if(absolute_value &gt;= 1)\n            {\n                //delete the node's value but not the name\n                delete_party(NULL, size);\n                //insert node with new name &amp; dif size\n                add_party(NULL, name, size);\n            }\n            else\n            {\n                printf(\"\\nYou did not enter a different party size\\n\");\n                return;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "boolean"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1508971961, "post_id": 46943133, "comment_id": 80833894, "body": "Didn&#39;t you already post this question here: <a href=\"https://stackoverflow.com/questions/46901918/making-sure-a-users-input-matches-characters-generated-by-my-program\" title=\"making sure a users input matches characters generated by my program\">stackoverflow.com/questions/46901918/&hellip;</a>  You can edit your post to clarify further instead of reposting.  Like I posted there, build a frequency table of the letters the user has been provided and check them against the letters in the proposed word."}, {"owner": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1508972105, "post_id": 46943133, "comment_id": 80833944, "body": "@MFisherKDX , sorry I&#39;m a little New to this website I didn&#39;t realize there&#39;s an edit option, but wouldn&#39;t the frequency table have every single letter possible in a game of scrabble?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508972107, "post_id": 46943133, "comment_id": 80833945, "body": "<code>letter = rand() % 97;</code> is a poor way to select a letter in the range <code>&#39;A&#39;</code> to <code>&#39;Z&#39;</code>. Also, the letter bag should have specific number of each letter tile, so I suggest you find an alogrithm that picks one tile at random and removes it from the bag. The tile needs to be a <code>struct</code> with its character and score. Select one tile <code>struct</code> from the bag (an array) according to how many are left, and adjust the array."}, {"owner": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508972192, "post_id": 46943133, "comment_id": 80833973, "body": "@Weather Vane I understand what you&#39;re saying but for this project it isn&#39;t necessary because the user will only play scrabble once so decrementing letters from the array wouldn&#39;t make a difference."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508972330, "post_id": 46943133, "comment_id": 80834031, "body": "I can see you attempted to model the number of tiles available with <code>int freq[26]</code> but still, the way to go is with an array of <code>struct</code> in the letter bag."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1508972347, "post_id": 46943133, "comment_id": 80834035, "body": "@chrisHG.  Build a frequency table of just the letters that have been provided to the user.  So if the user has been provided: R S T L N E E, the freq[&#39;R&#39;] = 1, freq[&#39;S] = 1, freq[&#39;T&#39;] = 1, freq[&#39;L&#39;] = 1, freq[&#39;N&#39;] = 1 and freq[&#39;E&#39;] = 2.  Now it should be easy to check the words &quot;NESTLE&quot; and &quot;REEL&quot; are valid."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508972438, "post_id": 46943133, "comment_id": 80834060, "body": "BTW, @WeatherVane and I are talking about 2 <i>distinct</i> things ... which I can see might be confusing."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508972581, "post_id": 46943133, "comment_id": 80834094, "body": "It is not about <i>frequency</i> but about <i>availabilty</i> (and definitely not how many times you play the game). There is only one <code>&#39;Z&#39;</code> in the bag so after picking that tile, it is not about probabilty of drawing another <code>&#39;Z&#39;</code>. The probabality is only about the tiles in the bag."}, {"owner": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1508973029, "post_id": 46943133, "comment_id": 80834244, "body": "@xing so set up a for loop that goes though every element in the array that is user entered, then check if that element is present in the letter bank. How would you check the letter the user entered against the each character in the letter bank?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508973137, "post_id": 46943133, "comment_id": 80834271, "body": "I would advise you to drop that approach altogether, and have a think about a <code>struct</code> based approach with a certain number of each tile being available, and removed from the pool when picked. The problem of drawing a tile from a bag is very similar to drawing a card from a deck, where  there is only one of each card."}], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "edited": false, "score": 0, "creation_date": 1508973459, "post_id": 46943387, "comment_id": 80834355, "body": "Okay I understand the approach it makes sense, but programming wise would you run through the array of given letters with a loop. Then how is the frequency of each letter set to 1?"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "edited": false, "score": 0, "creation_date": 1508973913, "post_id": 46943387, "comment_id": 80834483, "body": "Yes.  Initialize a frequency table to all 0&#39;s.  Run through each of the given letters with a loop.  If the letter is &#39;A&#39;, then increment <code>freq[&#39;A&#39;]</code>.  Now its 1."}, {"owner": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "edited": false, "score": 0, "creation_date": 1508974162, "post_id": 46943387, "comment_id": 80834541, "body": "For clarification, the frequency table you&#39;re talking about is different than the One I used within my first function?"}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "edited": false, "score": 0, "creation_date": 1508974382, "post_id": 46943387, "comment_id": 80834604, "body": "Yes.  It&#39;s different, but similar.  I saw that and realized the confusion.  Your <code>freq</code> array specifies the frequency of the entire population of letters both used and unused.  The table I am referring to specifies the frequency of only the letters currently available for the user to play.  If this is too confusing and you understand @xing &#39;s method better, use his method."}, {"owner": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "edited": false, "score": 0, "creation_date": 1508974925, "post_id": 46943387, "comment_id": 80834757, "body": "I get your method. The only part I&#39;m confused about is how I would go through every single character in the array of given letters and set the frequency for every letter to 1. Then I would use a conditional statement to check if any letter entered by the user is less than 1 by decrementing the frequency table?"}], "tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": false, "score": 4, "last_activity_date": 1508973004, "creation_date": 1508973004, "answer_id": 46943387, "question_id": 46943133, "link": "https://stackoverflow.com/questions/46943133/how-to-get-a-program-to-compare-two-arrays-then-see-if-the-two-arrays-have-the-s/46943387#46943387", "title": "How to get a program to compare two arrays then see if the two arrays have the same characters", "body": "<blockquote>\n  <p><strong>So my only issue in this program is how I'm going to get my 'check_word' function to work.</strong> This function has to check if the user entered the letters that are provided. In a game of scrabble you get 7 letters, and the array that has the 7 letters given to the user is stored in (arr[]) Then the in the 'read_word' function is the letters the user entered.</p>\n</blockquote>\n\n<p>There are many ways to solve this problem.  Here is one way.  Build a frequency table of the letters that are provided to the user.  So if the user has been provided: <code>R S T L N E E</code>, then <code>freq['R'] = 1</code>, <code>freq['S] = 1</code>, <code>freq['T'] = 1</code>, <code>freq['L'] = 1</code>, <code>freq['N'] = 1</code> and <code>freq['E'] = 2</code>.  All the other values in <code>freq</code> are 0.  Then when the user enters a word, you can loop over each letter and subtract 1 from the frequency table of that letter.  If any value is less than 0, then the word is invalid.</p>\n\n<p>However, you have another problem in your code regarding randomizing the input -- ie: dealing the letters to the user.  @Weathervane has made a few comments there that might help.  Consider putting all the letters into a <a href=\"https://en.wikipedia.org/wiki/Set_(abstract_data_type)\" rel=\"nofollow noreferrer\">set</a> (or more properly a <a href=\"https://en.wikipedia.org/wiki/Multiset\" rel=\"nofollow noreferrer\">bag</a> -- since letters can be repeated) and randomly drawing a letter from the bag.  Repeat 7 times (or until the bag is empty). </p>\n"}, {"tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": true, "score": 1, "last_activity_date": 1509008952, "creation_date": 1509008952, "answer_id": 46950180, "question_id": 46943133, "link": "https://stackoverflow.com/questions/46943133/how-to-get-a-program-to-compare-two-arrays-then-see-if-the-two-arrays-have-the-s/46950180#46950180", "title": "How to get a program to compare two arrays then see if the two arrays have the same characters", "body": "<p>As letters are selected from all letters and from your letters, they are swapped to the end of the array and the number of available letters is decremented. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;time.h&gt;\n#include &lt;ctype.h&gt;\n#define N 98\n\nvoid generate_letter_set( char arr[], int *all, char yourletters[], int limit);\nvoid read_word(char word[], int max_size_word);\nint check_word(char word[], char yourletters[]);\n\nint main ( void) {\n    srand((unsigned) time(NULL));\n    char arr[N] = \"\";\n    char yourletters [8] = \"\";\n    char word [8]= \"\";\n    int pool = N;//available letters\n    int size_let = 7;\n    int num_let = 7;\n    int max_size_word = 7;\n    int size_letter_set = 7;\n    int size_word;\n    printf(\"This program plays a game of scrabble.\\n\");\n\n    printf ( \"pool of available letters is %d\\n\", pool);\n    generate_letter_set( arr, &amp;pool, yourletters, max_size_word);\n    printf ( \"\\npool of available letters is now %d\\n\", pool);\n    printf ( \"\\nyour letters %s\\n\", yourletters);\n    read_word(word, max_size_word);\n    if ( ( check_word(word, yourletters))) {\n        printf ( \"word %s is usable from your letters %s\\n\", word, yourletters);\n    }\n    else {\n        printf ( \"word %s is not usable from your letters %s\\n\", word, yourletters);\n    }\n\n    return 0;\n}\n\nvoid generate_letter_set(char arr[], int *all,char yourletters[], int limit)\n{\n    const char let[26] = {\"KJXQZBCMPFHVWYGLSUDNRTOAIE\"};\n\n    int freq[26] =\n    { 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 4, 4, 4, 4, 6, 6, 6, 8, 9, 9, 12 };\n\n    const int score[26] =\n    { 5, 8, 8, 10, 10, 3, 3, 3, 3, 4, 4, 4, 4, 4, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1};\n\n    int index = 0;\n    for(int i = 0 ; i &lt; 26 ; i++) {\n        for(int f = 0 ; f &lt; freq[i]; f++) {\n            arr[index++] = let[i];  //All the 98 letters are stored in let[i]\n        }\n    }\n\n    int letter;\n    char swap;\n    printf(\"Your letters are: \");\n    for(int l = 0; l &lt; limit; l++){\n        letter = rand() % *all;   //Gives the user their letters all the letters are from arr[letter]\n        printf(\"%c \", arr[letter]);\n        yourletters[l] = arr[letter];\n        *all = *all - 1;//deduct from the number of available letters\n        swap = arr[letter];//swap letter to end of array\n        arr[letter] = arr[*all];\n        arr[*all] = swap;\n    }\n\n}\n\nvoid read_word(char word[], int max_size_word) {\n    int c = 0;\n    printf(\"\\nPlease enter your word: \");\n    for(c = 0; c &lt; max_size_word; c++) {\n        int input = toupper(getchar());\n\n        if(input != '\\n')\n        {\n            word[c] = input;\n        }\n        else if(input == '\\n')\n            break;     //The word the user entered is in word[c]\n   }\n\n    return;\n}\n\nint check_word(char word[], char valid[]) {\n    char *check = word;//check is first letter in word\n    char swap = ' ';\n    int match = 0;\n    int len = strlen ( valid);\n    //Figure out how to pass two arrays through the functions\n    //Pass word[c] into this function\n    //Pass arr[letter] into this function then compare the two arrays\n    //Make it so the user has to enter less than 7 chars\n\n    while ( *check) {//loop until check points to '\\0'\n        for ( int each = 0; each &lt; len; each++) {\n            match = 0;\n            //this printf is just for show and can be removed\n            printf ( \"check %c in %.*s\\n\", *check, len, valid);\n            if ( *check == valid[each]) {\n                match = 1;\n                swap = valid[each];//swap letter to end of array\n                valid[each] = valid[len - 1];\n                valid[len - 1] = swap;\n                len--;//deduct from avaiable letters\n                break;\n            }\n        }\n        if ( !match) {\n            return 0;\n        }\n        check++;//next letter to check\n    }\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 743, "user_id": 2913477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b126939c105b8d71b18f93c6850e55f1?s=128&d=identicon&r=PG&f=1", "display_name": "MiniMax", "link": "https://stackoverflow.com/users/2913477/minimax"}, "is_accepted": false, "score": 1, "last_activity_date": 1509107647, "last_edit_date": 1509107647, "creation_date": 1509107177, "answer_id": 46974988, "question_id": 46943133, "link": "https://stackoverflow.com/questions/46943133/how-to-get-a-program-to-compare-two-arrays-then-see-if-the-two-arrays-have-the-s/46974988#46974988", "title": "How to get a program to compare two arrays then see if the two arrays have the same characters", "body": "<p>I coded your task, if you are interested, I can add comments to the code.</p>\n\n<p>How it works:</p>\n\n<ol>\n<li>The bag of tiles created in the beginning. Tiles are stored in the array, where indexes are <strong>ascii</strong> codes of letters. <code>A</code> is 65, <code>B</code> is 66, <code>Z</code> is 90. So, we are needed array of 90 elements, where only indexes from 66 to 90 will be used, others unneeded. So, I did the next trick - subtract 65 from the <strong>ascii</strong> code of letter and get following indexes: <code>A</code> - 0, <code>B</code> - 1, <code>Z</code> - 26. Now, array of 26 elements only is needed. The advantage of this method is the detection of the letter availability with the O(1) efficiency. Does the array contains the <code>M</code> letter? - check array[12], if it is non-zero, the letter contained, else does not contained. Two <code>for</code> loops are unnecessary.</li>\n<li>Rack is created and filled from the bag. It is also array[26], but have only 7 tiles inside it, other items are zero.</li>\n<li>Prints the rack content and waits the user word. User should write a word, using letters from the rack.</li>\n<li>Checks, does this word is valid - iterate through words letters and check, does this letter is contained in the rack. If yes - the letter is removed from rack and next letter of the word is processed. For example, the user have entered the word <code>cat</code>. <strong>Ascii</strong> codes are <code>67</code>,<code>65</code>,<code>84</code> (uppercase). Subtracting 65 from each code, we obtain <code>2</code>,<code>0</code>,<code>19</code>. Does this items exists (non-zero) in the rack array? Yes - the word is valid. No - non-valid, \"Try again\". If the rack have less than 7 tiles, it refilled from the bag.</li>\n<li>The game continues as long as there are tiles in the bag or in the rack.</li>\n</ol>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;ctype.h&gt;\n#define CNT 26\n//////////////////\ntypedef struct tile {\n    char letter;\n    int amount;\n    int points;\n} tile;\n/////////////\ntypedef struct tiles_set {\n    int tiles_num;\n    int storage_size;\n    tile storage[CNT];\n} tiles_set;\n\nvoid check_user_word(char *word, tiles_set rack_copy, tiles_set *rack_ptr); \nvoid fill_rack(tiles_set *rack, int to_size); \nvoid print_set(tiles_set set); \nvoid bag_init(); \n\ntiles_set bag;\n\nint main() {\n    int rack_size = 7;\n    char *user_word;\n\n    srand((unsigned) time(NULL));\n\n    bag_init();\n\n    tiles_set rack;\n    rack.storage_size = CNT;\n    rack.tiles_num = 0;\n    memset(rack.storage, 0, sizeof(rack.storage));\n\n    while(bag.tiles_num &gt; 0 || rack.tiles_num &gt; 0) {\n        fill_rack(&amp;rack, rack_size);\n\n        puts(\"Rack:\");\n        print_set(rack);\n        printf(\"\\nWrite your word: \\n\");\n\n        fgets(user_word, rack_size + 2, stdin);\n        check_user_word(user_word, rack, &amp;rack);\n    }\n    return 0;\n}\n\nvoid check_user_word(char *word, tiles_set rack_copy, tiles_set *rack_ptr) {\n    int i, ch, len;\n\n    if(!strchr(word, '\\n')) {\n        printf(\"The word should be less or equal to the amount of tiles in the rack - %d tiles\\n\", rack_ptr-&gt;tiles_num);\n        while(((ch = getchar()) != EOF) &amp;&amp; (ch != '\\n'));\n        puts(\"Try again.\");\n        return;\n    }\n\n    len = strlen(word) - 1;\n\n    char letter;\n    for(i = 0; i &lt; len; i++) {\n        letter = toupper(word[i]) - 65;\n\n        if(rack_copy.storage[letter].amount) {\n            rack_copy.storage[letter].amount--;\n            rack_copy.tiles_num--;\n        } else {\n            puts(\"You should use letters only from the rack. Try again.\");\n            return;\n        }\n    }\n    *rack_ptr = rack_copy;\n}\n\nvoid fill_rack(tiles_set *rack, int to_size) {\n    int i;  \n    char letter;\n    int cnt = to_size - rack-&gt;tiles_num;\n    for(i = 0; i &lt; cnt; i++) {\n        if(bag.tiles_num &lt;= 0) {\n            puts(\"Tiles in the bag ended.\");\n            return;\n        }\n\n        do {\n            letter = rand() / (RAND_MAX / bag.storage_size + 1);\n        } while(!bag.storage[letter].amount);\n\n        rack-&gt;storage[letter].letter = bag.storage[letter].letter;\n        rack-&gt;storage[letter].amount++;\n        rack-&gt;storage[letter].points = bag.storage[letter].points;\n        rack-&gt;tiles_num++;  \n\n        bag.storage[letter].amount--;\n        bag.tiles_num--;\n    }\n}\n\nvoid bag_init() {\n    const char letters[CNT] = \n    {'K','J','X','Q','Z','B','C','M','P','F','H','V','W','Y','G','L','S','U','D','N','R','T','O','A','I','E'};\n    int freq[CNT] = \n    { 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 4, 4, 4, 4, 6, 6, 6, 8, 9, 9, 12 };\n    const int points[CNT] =\n    { 5, 8, 8, 10, 10, 3, 3, 3, 3, 4, 4, 4, 4, 4, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1};\n\n    bag.storage_size = CNT;\n    bag.tiles_num = 98;\n\n    int i;\n    int letter_index;\n    for(i = 0; i &lt; bag.storage_size; i++) {\n        letter_index = letters[i] - 65;\n        bag.storage[letter_index].letter = letters[i];\n        bag.storage[letter_index].amount= freq[i];\n        bag.storage[letter_index].points = points[i];\n    }\n}\n\nvoid print_set(tiles_set set) {\n    int i, cnt;\n    for(i = 0; i &lt; set.storage_size; i++) {\n        cnt = set.storage[i].amount;\n        while(cnt &gt; 0) {\n            printf(\"%c \", set.storage[i].letter);\n            cnt--;\n        }\n    }\n    puts(\"\");\n}\n</code></pre>\n"}], "owner": {"reputation": 96, "user_id": 8667315, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bd1a2b47c230bf5f8ad61c110bc668e6?s=128&d=identicon&r=PG&f=1", "display_name": "chrisHG", "link": "https://stackoverflow.com/users/8667315/chrishg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 46950180, "answer_count": 3, "score": 3, "last_activity_date": 1509107647, "creation_date": 1508971369, "question_id": 46943133, "link": "https://stackoverflow.com/questions/46943133/how-to-get-a-program-to-compare-two-arrays-then-see-if-the-two-arrays-have-the-s", "title": "How to get a program to compare two arrays then see if the two arrays have the same characters", "body": "<p><strong>This is for Homework</strong>\nSo I have to program a simple game of scrabble. I have comments throughout my whole program but I'll explain what I wanted to do towards the end of this post.</p>\n\n<pre><code> #include &lt;stdio.h&gt; \n #include &lt;stdbool.h&gt; \n #include &lt;stdlib.h&gt; \n #include &lt;time.h&gt; \n#define N 96\n\n int main() {\nsrand((unsigned) time(NULL));\nint letter_set = N , size_let = 7 , num_let = 7 , max_size_word = 7 , size_letter_set = 7, size_word, arr[N];\nchar word [7]; \nprintf(\"This program plays a game of scrabble.\\n\");\n\ngenerate_letter_set(letter_set , size_let , num_let, arr);\nread_word(word, max_size_word);\ncheck_word(word, size_word, letter_set, size_letter_set, arr);\n\nreturn 0;\n}\n\n\n void generate_letter_set(int letter_set[] , int size_let , int num_let, int arr[])  \n{\n\n\nconst char let[26] = \n{'K','J','X','Q','Z','B','C','M','P','F','H','V','W','Y','G','L','S','U','D','N','R','T','O','A','I','E'};\n\nint freq[26] = \n{ 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 4, 4, 4, 4, 6, 6, 6, 8, 9, 9, 12 };\n\nconst int score[26] =\n{ 5, 8, 8, 10, 10, 3, 3, 3, 3, 4, 4, 4, 4, 4, 2, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1};\n\n    int index = 0; \n        for(int i = 0 ; i &lt; 26 ; i++) {\n            for(int f = 0 ; f &lt; freq[i]; f++) {\n                arr[index++] = let[i];  //All the 96 letters are stored in let[i]\n            //printf(\"%c \" , let[i]);  // Created the letter bank for all the letters \n\n        } \n    }       \n\n    int letter;\n        printf(\"Your letters are: \");\n            for(int l = 0; l &lt; 7; l++){\n                letter = rand() % 97;   //Gives the user their letters all the letters are from arr[letter] \n            printf(\"%c \", arr[letter]);\n\n\n        }   \n\n }\n   int read_word(char word[], int max_size_word) {\n\n{\n          int c = 0, let_count = 0;\n            printf(\"\\nPlease enter your word: \");\n        char input = toupper(getchar());\n                for(c = 0; c &lt; max_size_word; c++) {\n\n    if(input != '\\n')\n{       word[c] = input;   \n            let_count++;\n    }\n    else if(input == '\\n')\n    input = toupper(getchar());     //The word the user entered is in word[c]\n                                    }\n\nreturn let_count;\n }\n\n    }\n int check_word(char word[], int size_word, int letter_set[], int \n  size_letter_set, int arr[]) {\n//Figure out how to pass two arrays through the functions\n//Pass word[c] into this function \n//Pass arr[letter] into this function then compare the two arrays\n//Make it so the user has to enter less than 7 chars\nfor (int a; a &lt; 7; a++) {\n\n    if (word[a] != arr[a]) {\nprintf(\"Use your letters\");\n }\n\n}\n\n\n return 1;\n} \n</code></pre>\n\n<p>So my only issue in this program is how I'm going to get my 'check_word' function to work. This function has to check if the user entered the letters that are provided. In a game of scrabble you get 7 letters, and the array that has the 7 letters given to the user is stored in <strong>(arr[])</strong> Then the in the 'read_word' function is the letters the user entered. The letters that are entered are stored in <strong>word[]</strong>. So my intuition to check if the user actually used the letters from <strong>arr[]</strong> was to make a conditional statement that compared the two arrays <strong>arr[]</strong> and <strong>word[]</strong>. However I realize that would check if the user actually used every single letter and I just have to check if the user used any letters that weren't provided. I'm lost on how to make this happen and any help would be appreciated! Also please let me know in the comments if any clarification is needed, also I apologize for the huge post.</p>\n"}, {"tags": ["c", "powershell", "cmd", "child-process"], "comments": [{"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1508970109, "post_id": 46942807, "comment_id": 80833295, "body": "You&#39;re missing a space between <code>-m</code> and <code>2000</code> in the PowerShell command."}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1508970238, "post_id": 46942807, "comment_id": 80833333, "body": "Also - what PowerShell command are you using that writes to stdout that doesn&#39;t work? (<code>Start-Sleep -m 2000</code> doesn&#39;t write anything to stdout.)"}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 0, "creation_date": 1508970307, "post_id": 46942807, "comment_id": 80833360, "body": "I would not expect the command <code>start-sleep -m 2000</code> to output anything to std out (note the fixed typo). try <code>powershell write-output &quot;Hello&quot;</code>"}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1508978180, "post_id": 46942807, "comment_id": 80835543, "body": "Your question was ambiguous on that point."}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1508978611, "post_id": 46942807, "comment_id": 80835644, "body": "Does <code>cmd &#47;c powershell ...</code> work?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "edited": false, "score": 0, "creation_date": 1509021438, "post_id": 46942807, "comment_id": 80856028, "body": "@zdan - yes, I think I am discovering this.  The reappearance of my command prompt (when calling from a normal desktop <code>cmd</code> prompt) i.e. <code>C:\\&gt;</code>, is just that, a <code>cmd</code> shell prompt.  My code depends on getting something back from any executable I call, eg. <code>dir</code> returns content,  <code>time</code> returns: <code>The current time is:...</code>.  But not powershell"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509021445, "post_id": 46942807, "comment_id": 80856032, "body": "@Bill_Stewart - The missing space was a typo in the question, (edited to fix) but yes, the command works on the command line when entered correctly in a <code>cmd</code> shell.  For your last question, no, it does not work when prepended with <code>cmd &#47;c</code> as other commands do."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509022266, "post_id": 46942807, "comment_id": 80856657, "body": "@Bill_Stewart - regarding your comment: Also - what PowerShell command.... Yes, this is the problem. I am asking if there is a different way to call powershell that would not result in hanging in ReadFile. Or, is there a technique for putting a timeout, or other condition on ReadFile to return after a reasonable time of no output.   Also, One command I tried that did return something was <code>powershell -Version</code>.  It returned a single <code>M</code>, which I assume is part of the <code>Missing argument...</code> error message"}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509024523, "post_id": 46942807, "comment_id": 80858480, "body": "Could the issue be that PowerShell is outputting double-byte unicode instead of single-byte ASCII?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509024826, "post_id": 46942807, "comment_id": 80858728, "body": "@Bill_Stewart - I think the problem, as noted in other comments, is that a normal response from powershell, for most commands is <i>nothing</i>.  This is the essence of my problem.  I am trying to find an alternative calling method for <code>powershell</code> to force output back to <code>stdout</code> so that <code>ReadFile</code> is satisfied.  Eg. if powershell had an argument such as <code>-Verbose</code>, that returned content to <code>stdout</code>, the problem would be solved.  Or, if a timeout could be asserted onto the <code>ReadFile</code> function."}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509025240, "post_id": 46942807, "comment_id": 80859030, "body": "PowerShell <i>does</i> write to stdout. I prove this by opening <code>cmd.exe</code> and running the command <code>powershell -Command Write-Output &#39;Hello, world&#39; &gt; output.txt</code>. File <code>output.txt</code> contains the expected string."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509025757, "post_id": 46942807, "comment_id": 80859449, "body": "@Bill_Stewart - True, but nothing is returned when attempting to use the <code>start-sleep -m 2000</code> argument, <code>powershell</code> is silent.  And there are other arguments that are silent too.  I assume also that if these behaviors exist with other utilities, I will run into the same issues with the posted code.  I am looking for the workaround to mitigate this behavior in general."}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509027768, "post_id": 46942807, "comment_id": 80861052, "body": "So your actual question is this: How do I prevent this code from hanging when the called process writes nothing to stdout? This doesn&#39;t have anything to do with PowerShell specifically."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509030332, "post_id": 46942807, "comment_id": 80862974, "body": "@Bill_Stewart - You could summarize it that way.  And no, not <code>powershell</code> specifically, but it was <code>powershell</code> that first exhibited this behavior, and so essentially it provides the best illustration for me to describe what I have seen.  My guess is that any utility that exhibits the same behaviour will result in the same problem.  So far, most of the executables native to <code>Windows 7</code>, that I have used, do not exhibit the same behavior, and so have worked well with the <code>cmd_rsp()</code> function."}, {"owner": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509030399, "post_id": 46942807, "comment_id": 80863031, "body": "You can test this by creating a short dummy console executable that writes nothing to stdout and then see if you get the same problem. If so, then you can remove the PowerShell tag from your question."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 18730, "user_id": 2102693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sD3s8.jpg?s=128&g=1", "display_name": "Bill_Stewart", "link": "https://stackoverflow.com/users/2102693/bill-stewart"}, "edited": false, "score": 0, "creation_date": 1509031002, "post_id": 46942807, "comment_id": 80863418, "body": "@Bill_Stewart - Just tried. When a console application, that returns no output is called from a <code>cmd</code> prompt, eg: <code>c:\\apps\\bin\\DelayMs 1000</code>, the function returns what was written to <code>stdout</code> upon return, which is an identical echo of the command sent:  <code>c:\\apps\\bin\\DelayMs 1000</code>.  So evidently, there is a difference in that <code>cmd_rsp()</code> is picking up the zero returned from the C exectuable upon it return to the OS."}], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509024314, "creation_date": 1508969246, "last_edit_date": 1509024314, "question_id": 46942807, "link": "https://stackoverflow.com/questions/46942807/powershell-command-string-fails-in-cmd-process-where-all-other-commands-seem-to", "title": "powershell command string fails in cmd process, where all other commands seem to work", "body": "<p>I wrote a <em><a href=\"https://codereview.stackexchange.com/questions/162546/send-command-and-get-response-from-windows-cmd-prompt-silently\">routine</a></em> that allows me to make windows system calls from an application, trap the response into a buffer so the content of the buffer can be used in my application.  Every command I've tried, until today, has worked without a flaw, including those with very large response buffers.  The basic steps are as follows:</p>\n\n<blockquote>\n<pre><code>1) start a child cmd prompt process from application\n2) write a command to it's stdin, eg:\n3) \"cmd.exe /c dir\"  (returns listing of applications host directory)\n4) capture response from stdout\n</code></pre>\n</blockquote>\n\n<p>for most commands, making the call and getting the response is normally as simple as:</p>\n\n<pre><code>int main(void)\n{\n    char *buf = {0};\n    buf = calloc(100, 1);\n    if(!buf)return 0;\n    cmd_rsp(\"dir /s\", &amp;buf, 100);//cmd_rsp is fully defined in the links I provided in post.\n                                 //Note: all commands are prepended with \n                                 //'cmd.exe /c ' inside the cmd_rsp function.\n    printf(\"%s\", buf);\n    free(buf);\n\n    return 0;\n}\n</code></pre>\n\n<p>But when I send the command <code>powershell start-sleep -m 2000</code>, nothing is ever sent to <code>stdout</code>, causing application to hang.</p>\n\n<p>Execution flow stops at the <code>ReadFile</code> function, trying to catch at least one byte of data out through the <code>stdout</code> pipe.  ( refer to <em><a href=\"https://codereview.stackexchange.com/questions/162546/send-command-and-get-response-from-windows-cmd-prompt-silently\">code here</a></em> )</p>\n\n<p>I have read (and tried the suggestions in) <em><a href=\"https://stackoverflow.com/q/24940243/645128\">this link</a></em> about this topic, but still have not seen results using the <code>&amp;</code> to concatenate the calls.  i.e., the <code>&amp;</code> <em>does work</em> with combination calls such as:</p>\n\n<pre><code>cmd.exe /c cd c:\\\\devphys\\\\msvc\\\\ &amp;&amp; dir\n</code></pre>\n\n<p>Just not when <code>powershell</code> is called.  </p>\n\n<p>I am hoping someone familiar with this scenario can suggest a different calling convention when using such things as <code>powershell</code> in the command line, Or, suggest a way to break out of <code>ReadFile</code> (called from within the function <code>ReadFromPipe</code> ) when it is clear nothing is coming to <code>stdout</code>. </p>\n\n<p>EDIT:  in the code for <em><a href=\"https://codereview.stackexchange.com/questions/162546/send-command-and-get-response-from-windows-cmd-prompt-silently\">cmd_rsp(...)</a></em> , some may have noticed that inside the function <code>ReadFromPipe</code>, I made an attempt at a timeout using:</p>\n\n<pre><code>//Set timeouts for stream\nct.ReadIntervalTimeout = 0;\nct.ReadTotalTimeoutMultiplier = 0;\nct.ReadTotalTimeoutConstant = 10;\nct.WriteTotalTimeoutConstant = 0;\nct.WriteTotalTimeoutMultiplier = 0;\nSetCommTimeouts(g_hChildStd_OUT_Rd, &amp;ct);\n</code></pre>\n\n<p>However, as detailed <em><a href=\"https://stackoverflow.com/a/13768092/645128\">here</a></em> and <em><a href=\"https://stackoverflow.com/a/35303690/645128\">here</a></em> (see comment under post). this method, as a timeout, is not compatible with an implementation using <code>ReadFile</code> and pipes.</p>\n"}, {"tags": ["c", "algorithm", "performance", "text-processing"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 3, "creation_date": 1508968292, "post_id": 46942604, "comment_id": 80832667, "body": "&quot;I guess&quot; --- performance optimisation should be based on measurements, not assumptions. Profile it, then optimise."}, {"owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1508968626, "post_id": 46942604, "comment_id": 80832794, "body": "Done that already, can&#39;t get below 1 second with this approach. Can&#39;t even get below 10 seconds. That&#39;s why I need help. @zerkms"}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1508968659, "post_id": 46942604, "comment_id": 80832802, "body": "&quot;Done that already,&quot; --- so what exactly did the profiling tell you? What is the bottleneck?"}, {"owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1508968843, "post_id": 46942604, "comment_id": 80832863, "body": "fgets alone takes 1,6 seconds / text file. The while with strtok takes another 10 seconds/text file. @zerkms"}, {"owner": {"reputation": 552, "user_id": 5007125, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QbIq9.jpg?s=128&g=1", "display_name": "seladb", "link": "https://stackoverflow.com/users/5007125/seladb"}, "edited": false, "score": 1, "creation_date": 1508968931, "post_id": 46942604, "comment_id": 80832895, "body": "What about reading the entire file to memory using <code>fread</code> and then do the text processing in memory?"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1508969310, "post_id": 46942604, "comment_id": 80833027, "body": "If your sequence has a relatively low range (say, the only possible numbers are from <code>0</code> to <code>99</code>), you can implement a very basic hashmap that reduces your innermost <code>for</code> loop to a single <code>if</code> statement, making the algorithm <code>n</code> times faster."}, {"owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1508969347, "post_id": 46942604, "comment_id": 80833035, "body": "yes, that is the reason i need to reduce the runtime of this function. because i call it for 200 000 sequences to validate them. @xing"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1508969416, "post_id": 46942604, "comment_id": 80833063, "body": "Please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a> It is better to control the loop with <code>while(fgets(line, 256, f) != NULL)</code>. And add the consequent final newline read to the <code>strtok</code> delimiters, say <code>&quot; \\n&quot;</code>."}, {"owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "edited": false, "score": 1, "creation_date": 1508969544, "post_id": 46942604, "comment_id": 80833103, "body": "will take a look at that. but the BIG problem is here: p = strtok(line, &quot; &quot;); \t\twhile (p != NULL) \t\t{ \t\t\tsscanf(p, &quot;%d&quot;, &amp;line_int[nrelem++]); \t\t\tp = strtok(NULL, &quot; &quot;); \t\t}  THIS TAKES 10 SECONDS. here I try to convert each line of  characters from string to an array of ints. How to solve this ? THIS IS THE BIG ISSUE :D Can this be reduced below 1 second somehow, for the entire text file ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508969759, "post_id": 46942604, "comment_id": 80833178, "body": "I suggest you look at it now, since your usage is wrong."}, {"owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508969841, "post_id": 46942604, "comment_id": 80833210, "body": ":)) already changed that, thank you! :D I am willing to learn, that&#39;s why I&#39;m here @WeatherVane"}, {"owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1508970007, "post_id": 46942604, "comment_id": 80833257, "body": "yes, they do, @xing"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1508970268, "post_id": 46942604, "comment_id": 80833341, "body": "I don&#39;t see your declaration for <code>line</code> anywhere. Using local variables instead of global variables might also speed up your algorithm, if even by a small amount."}, {"owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1508970321, "post_id": 46942604, "comment_id": 80833364, "body": "that might be the best aproach so far @xing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508972312, "post_id": 46942604, "comment_id": 80834019, "body": "Does the sequence of numbers in the line have to match the sequence you have, or do you have to ensure that regardless of the order of the elements in the line, the numbers are the same?  Can you have repeats of a number in a single line?  Eyeballing your data shows no repeats.  Are the numbers limited to 1..99 or can they be bigger or smaller than that?  Have you considered: <code>int num_values = sscanf(line, &quot;%d%d%d%d%d%d%d%d%d%d&quot;, &amp;line_int[0], &amp;line_int[1], &amp;line_int[2], &amp;line_int[3], &amp;line_int[4], &amp;line_int[5], &amp;line_int[6], &amp;line_int[7], &amp;line_int[8], &amp;line_int[9]);</code>?  <i>[...continued...]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508972411, "post_id": 46942604, "comment_id": 80834050, "body": "<i>[...continuation...]</i>  That reads up to 10 numbers on a line in one call to <code>sscanf()</code>.  You know how many numbers were read.  You can immediately go into &#39;does the list found match the required list&#39; processing mode.  It won&#39;t be slower than what you&#39;ve got; it might be quicker.  It also doesn&#39;t mangle the input line, unlike using <code>strtok()</code>.  Also, before going into the quadratic search the lists loop, you should check that the sequence from the input line is at least as long as the sequence you need to match; otherwise, it can&#39;t match, but you expend time proving that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508972832, "post_id": 46942604, "comment_id": 80834172, "body": "Would there be any merit in sorting the sequence to be matched (once, before reading any data).  Then you could sort the sequence from the input line (an O(NlogN) operation) and then compare the sorted sequences.  That&#39;s an O(N) operation, giving you an O(NlogN) overall complexity, instead of the O(N*N) operation your nested loop gives you.  However, the timing constants matter on small set (10 elements) whereas they&#39;re not important with asymptotic work (hundreds or thousands of numbers per line); the sort might just slow things down."}, {"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 1, "creation_date": 1508979053, "post_id": 46942604, "comment_id": 80835724, "body": "Does the program exit once it has found the first line where all numbers are whitelisted? If so, to process the complete file, every line must contain some numbers not from the list, is this true? Can this file be downloaded somewhere?"}], "answers": [{"comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1508976851, "post_id": 46943866, "comment_id": 80835256, "body": "@MooingDuck <a href=\"https://stackoverflow.com/a/3501681/1541563\">that&#39;s intentional</a>. If <code>*lineptr</code> is <code>NULL</code>, then <code>getline()</code> will allocate a buffer for storing the line, which should be freed by the user program. Straight from <a href=\"https://linux.die.net/man/3/getline\" rel=\"nofollow noreferrer\">the manual</a>."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1508979875, "post_id": 46943866, "comment_id": 80835917, "body": "Whoever&#39;s downvoted this (or anyone else), would you mind explaining why? As far as I can tell, this is a perfectly valid answer, and it&#39;s touched on all the suggestions made in comments, as well as modifying the suspect bottleneck portion of the code profiled by OP. I&#39;m happy to improve my answer further if there&#39;s an issue with it."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510760961, "post_id": 46943866, "comment_id": 81574111, "body": "Have a look at <code>strtol</code> -- it does everything <code>atoi</code> does and more, handles errors better, and returns the separator between items so you won&#39;t need the call to <code>strchr</code> anymore either.  BTW, that wouldn&#39;t normally be considered a hash table either, formally speaking it is one, but using an identity function as the hash."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1510761941, "post_id": 46943866, "comment_id": 81574892, "body": "@BenVoigt thanks for the suggestion! When I have some more time to look this over, I&#39;ll work that into my solution. Also, I suppose calling it a sparse array or something would be more accurate, is that what you&#39;re saying?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1510772391, "post_id": 46943866, "comment_id": 81581299, "body": "&quot;Array&quot; would be accurate, as would &quot;bitmap&quot;, &quot;bitset&quot;, &quot;lookup table&quot;, etc.  It&#39;s just the word &quot;hash&quot; that is misleading, since there is no hashing function here."}], "tags": [], "owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "is_accepted": false, "score": 0, "last_activity_date": 1510773141, "last_edit_date": 1510773141, "creation_date": 1508976581, "answer_id": 46943866, "question_id": 46942604, "link": "https://stackoverflow.com/questions/46942604/text-file-processing-speed/46943866#46943866", "title": "Text file processing speed", "body": "<p>As I suggested in comments, using a hash map in your algorithm would lower the time complexity in checking if a number is in the sequence <code>seq</code>. I also changed the signature of the function to something that made a little more sense, as well as incorporating some suggestions from other comments.</p>\n\n<p>Note that this function has not been tested, other than compiling without errors. It requires <code>&lt;stdbool.h&gt;</code>, <code>&lt;stdio.h&gt;</code>, <code>&lt;stdlib.h&gt;</code>, and <code>&lt;string.h&gt;</code> in order to compile:</p>\n\n<pre><code>bool check(char *filename, int *seq, size_t seqSize) {\n    size_t lookupSize = 100;\n    char lookup[lookupSize];\n    FILE *fp;\n    char *line = NULL;\n    size_t len = 0;\n    long int num;\n    bool result = true;\n\n    memset(hash, 0, lookupSize);\n\n    for (size_t index = 0; index &lt; seqSize; index++) {\n        hash[seq[index]] = 1;\n    }\n\n    fp = fopen(filename, \"r\");\n\n    if (fp != NULL) {\n        while (getline(&amp;line, &amp;len, fp) != -1 &amp;&amp; result) {\n            char *cp = line;\n            result = false;\n\n            while (*cp != '\\0' &amp;&amp; !result) {\n                num = strtol(cp, &amp;cp, 10);\n                result = num &lt; lookupSize &amp;&amp; !lookup[num];\n            }\n        }\n\n        fclose(fp);\n        free(line);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>I set <code>lookupSize</code> to <code>100</code>, since it appears that your numbers are in the range of <code>0</code> to <code>99</code>. If you have larger numbers, you'll need to declare an array for your lookup table with a size equal to one more than the max integer value in the range you're using, which is why I only recommended this approach for a relatively small range.</p>\n"}], "owner": {"reputation": 39, "user_id": 5243276, "user_type": "registered", "profile_image": "https://graph.facebook.com/859673764120381/picture?type=large", "display_name": "Sorin Bogdan", "link": "https://stackoverflow.com/users/5243276/sorin-bogdan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510773141, "creation_date": 1508968190, "question_id": 46942604, "link": "https://stackoverflow.com/questions/46942604/text-file-processing-speed", "title": "Text file processing speed", "body": "<p>So I have a text file containing about 666 000 lines of maximum 10 numbers/line separated by a space. Example:</p>\n\n<pre><code>8 38 62 39 4 50 86 43\n53 78 38 22 39 29 78 5\n24 13 58 92\n.......\n53 78 38 22 39 29 78 5\n</code></pre>\n\n<p>Given a sequence of <strong>n</strong> numbers, I have to verify if a line has all its elements from the sequence.</p>\n\n<p>I have tried something like this:</p>\n\n<pre><code>int check()\n{\n    int nrelem = 0, nr, line_int[11];\n    int found_counter = 0, sw = 0;\n    char *p;\n\n    f = fopen(\"temp.txt\", \"rt\");\n\n    while (!feof(f))\n    {\n        nrelem = 0; found_counter = 0; sw = 0;\n\n        fgets(line, 256, f);\n\n        p = strtok(line, \" \");\n        while (p != NULL)\n        {\n            sscanf(p, \"%d\", &amp;line_int[nrelem++]);\n            p = strtok(NULL, \" \");\n        }\n\n        for (int i = 0; i &lt; n; i++)\n        {\n            for (int j = 0; j &lt; nrelem; j++)\n            {\n                if (seq[i] == line_int[j])\n                {\n                    sw = 1;\n                    break;\n                }\n            }\n            if (sw)\n                found_counter++;\n        }\n        if (found_counter == nrelem)\n            return 0;\n    }\n    fclose(f);\n    return 1;\n}\n</code></pre>\n\n<p>The problem is that the running time for this function, at 600 000 lines / file is about 14 seconds. I guess it is the way I get my elements from each line of the file with strtok and the implementation with files. Do you guys know a better approach to this, that can <strong>reduce the running time below 1 second</strong> without the need of a quantum computer? :D Thank you in advance.</p>\n"}, {"tags": ["c", "function", "pointers", "matrix"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1508967720, "post_id": 46942256, "comment_id": 80832433, "body": "Check your complier warnings. That should be a major clue."}, {"owner": {"reputation": 11, "user_id": 8834134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a29a6e8a8026c550ddbf18023990bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Gvex95", "link": "https://stackoverflow.com/users/8834134/gvex95"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1508968421, "post_id": 46942256, "comment_id": 80832723, "body": "Thanks you John Bollinger i dont know why i could not see what i was doint wrong"}], "owner": {"reputation": 11, "user_id": 8834134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a29a6e8a8026c550ddbf18023990bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Gvex95", "link": "https://stackoverflow.com/users/8834134/gvex95"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1508967117, "answer_count": 0, "score": 0, "last_activity_date": 1508966515, "creation_date": 1508966515, "question_id": 46942256, "link": "https://stackoverflow.com/questions/46942256/how-to-access-structure-field-in-function-when-having-matrix-of-structures-which", "closed_reason": "Duplicate", "title": "How to access structure field in function when having matrix of structures which is passed to function in c", "body": "<p>Hey everyone i need some help :(\nI have struct in my file like this</p>\n\n<pre><code>    typedef struct{\n    uint16_t n; //x axis\n    uint16_t m; //y axis\n    uint8_t value;\n    uint8_t finished;\n}one_element;\n</code></pre>\n\n<p>Now in main.c i have something like this</p>\n\n<pre><code>one_element loaded[8][10];\n</code></pre>\n\n<p>I am passing to function bfs loaded matrix from main like this</p>\n\n<pre><code>bfs(loaded);\n</code></pre>\n\n<p>And my bfs function is declared like this:</p>\n\n<pre><code>void bfs(one_element* loaded[]);\n</code></pre>\n\n<p>And in bfs function i want to set field for specific struct at some position, for example 0 and 0 (top left element)</p>\n\n<pre><code>one_element from_queue;\nfrom_queue = ((*getFromQueue)(&amp;myQueue));\nloaded[from_queue.m][from_queue.n].finished = 1;\n</code></pre>\n\n<p>I now for sure that indexes are good (from_queue.m and from_queue.n) i checked that in debbuger, also i dont have any errors, but i got segmentation fault when executing </p>\n\n<pre><code>loaded[from_queue.m][from_queue.n].finished = 1;\n</code></pre>\n\n<p>So what is problem, what am i doing wrong?</p>\n\n<p>Thanks \nPS: This is first problem for which i had to made account :D I hope someone can help :D</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1508966585, "post_id": 46942250, "comment_id": 80831924, "body": "Paste your code into the question, don&#39;t put it in an image. But in C90, you have to put your declarations at the top of a scope, before any code."}, {"owner": {"reputation": 1717, "user_id": 8690361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3678a10e6bc70a207a4a458c76b04c08?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/8690361/steve"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1508966770, "post_id": 46942250, "comment_id": 80832007, "body": "I don&#39;t think @FredLarson meant to paste the image..."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1508966847, "post_id": 46942250, "comment_id": 80832044, "body": "I couldn&#39;t even see the image, just a text placeholder. My employer&#39;s proxy blocks the image hosting site."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508967427, "post_id": 46942250, "comment_id": 80832306, "body": "Note that the name of the <code>gcc</code> option that disables this warning is even more descriptive than the text of the warning itself: <code>-Wdeclaration-after-statement</code>.  It is complaining that at least one of your declarations appears after one or more executable statements.  This is allowed in C99 and later, but was forbidden in C90."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1508967665, "post_id": 46942250, "comment_id": 80832408, "body": "Two options: tell your compiler to accept C99 (it&#39;s been 18 years, you really should upgrade), or move all your declarations to the top of the function: it&#39;s your <code>int i</code> that&#39;s the problem. Move it to the top of the function."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1508967714, "post_id": 46942250, "comment_id": 80832429, "body": "if you have choice, get a newer compiler.  this should not be the case i think in later standard."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1508970033, "post_id": 46942250, "comment_id": 80833273, "body": "Use <code>-std=c99</code> instead of  <code>-ansi</code>.  Thank you for pointing out. @JohnBode"}], "answers": [{"tags": [], "owner": {"reputation": 3429, "user_id": 5899161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7974a2c4fbb2bc7a521323ecfaa207a?s=128&d=identicon&r=PG&f=1", "display_name": "lukeg", "link": "https://stackoverflow.com/users/5899161/lukeg"}, "is_accepted": false, "score": 0, "last_activity_date": 1508966663, "creation_date": 1508966663, "answer_id": 46942286, "question_id": 46942250, "link": "https://stackoverflow.com/questions/46942250/iso-c90-forbids-mixing-declarations-and-code/46942286#46942286", "title": "ISO C90 forbids mixing declarations and code", "body": "<p>In fact there is code inbetween your declarations, the offending line being <code>arraySize = list-&gt;numElements</code>. You can move that line further down, after <code>LinkedListNode *curr</code> declaration or merge it with the declaration of <code>arraySize</code> the line before, like this: <code>int arraySize = list-&gt;numElements</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 8834101, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eXUU4j3O43I/AAAAAAAAAAI/AAAAAAAAARQ/eaxWhIPxXj0/photo.jpg?sz=128", "display_name": "Cameron", "link": "https://stackoverflow.com/users/8834101/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1291, "favorite_count": 0, "closed_date": 1508967259, "answer_count": 1, "score": -1, "last_activity_date": 1508966728, "creation_date": 1508966487, "last_edit_date": 1508966728, "question_id": 46942250, "link": "https://stackoverflow.com/questions/46942250/iso-c90-forbids-mixing-declarations-and-code", "closed_reason": "Duplicate", "title": "ISO C90 forbids mixing declarations and code", "body": "<p>When compiling in c, the compiler is giving me a warning telling me that C90 forbids mixing declaration and code, however their is no case of this in my code and the line that it says the warning occurs at is clearly just the declaration of a variable their is no code mixed with it. </p>\n\n<p>This is what my compiler shows</p>\n\n<pre><code>gcc -c Functions.c -Wall -ansi -pedantic\nFunctions.c:27:18: warning: ISO C90 forbids mixing declarations and code\n      [-Wdeclaration-after-statement]\n        LinkedListNode* curr;\n                        ^\n1 warning generated.\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/E6EKa.png\" alt=\"This is my function where the warning is occurring\"></p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508966263, "post_id": 46942193, "comment_id": 80831781, "body": "Try <code>printf(&quot;%p\\n&quot;, ptr);</code> instead of <code>printf(&quot;0x%X\\n&quot;, ptr);</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508992839, "post_id": 46942193, "comment_id": 80839063, "body": "Welcome to Stack Overflow. Please note that the preferred way of saying &#39;thanks&#39; around here is by up-voting good questions and helpful answers (once you have enough reputation to do so), and by accepting the most helpful answer to any question you ask (which also gives you a small boost to your reputation). Please see the <a href=\"https://stackoverflow.com/tour\">About</a> page and also <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask questions here?</a> and <a href=\"http://stackoverflow.com/help/someone-answers\">What do I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 1, "creation_date": 1508966430, "post_id": 46942209, "comment_id": 80831864, "body": "How do I increment the actual address of ptr? I&#39;m trying to cause a seg fault by increasing the pointer until I run out of memory."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 3, "creation_date": 1508966494, "post_id": 46942209, "comment_id": 80831891, "body": "You cannot increment the address of a variable @TrevorGood.  It is the variable&#39;s most fundamental characteristic -- more so even than its name.  Its address is its <i>identity</i>."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 1, "creation_date": 1508966639, "post_id": 46942209, "comment_id": 80831956, "body": "@TrevorGood: If you want to create a seg fault, set the value of <code>ptr</code> to <code>NULL</code> (or some well-known bad address) and then try to dereference it."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508966886, "post_id": 46942209, "comment_id": 80832061, "body": "I&#39;m suppose to iterate over all the addresses in the stack, and cause a segfault, by having my pointer point to a location that is not allocated within the stack. I&#39;m so confused as to how to do this. When start incrementing the pointer it just goes on forever never reaching a segfault."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508967133, "post_id": 46942209, "comment_id": 80832181, "body": "@TrevorGood accessing memory you don&#39;t own may cause a segfault. In the code shown, you&#39;re incrementing once, not forever. Put <code>ptr++</code> in a long-running loop. Secondly, <i>access</i> is the key. Try to read/write to that location each time. Eventually you&#39;ll reach memory you don&#39;t own, and your OS will most likely raise a segfault to terminate your program. Try wrapping from <code>ptr++</code> to just before <code>return 0;</code> in a <code>while(1)</code> loop and see what happens."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508967515, "post_id": 46942209, "comment_id": 80832346, "body": "I have a loop thats a million, and all the program does is run not cause a segfault? Could you just give me a quick example, I&#39;m so lost."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508967882, "post_id": 46942209, "comment_id": 80832497, "body": "@TrevorGood Post the code you&#39;re actually running with in the question,, nobody here is looking over your shoulder and can see what you&#39;re doing. But &quot;How can I force a segfault?&quot; is an entirely different question from &quot;Why doesn&#39;t this variable&#39;s address change?&quot;. If something like <code>while(1){ ptr++; *ptr = 3;}</code> doesn&#39;t do it then ask a new question and copy and paste your code into it."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508968224, "post_id": 46942209, "comment_id": 80832637, "body": "#include &lt;stdio.h&gt;  int main() {   int a = 5, *ptr;   ptr = &amp;a;     while(1){      ptr++;      *ptr = 3;     printf(&quot;%p\\n&quot;, &amp;ptr);    }   return 0; } And the address isnt changing."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508968585, "post_id": 46942209, "comment_id": 80832782, "body": "@TrevorGood segfaults for me no problem after ~200 iterations I&#39;d guess. Are you sure you&#39;re even compiling it? This is getting way beyond the scope of the question, and back and forth in comments isn&#39;t how SO works. If you&#39;re still having problems creating a segfault with that code ask a new question."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508968739, "post_id": 46942209, "comment_id": 80832832, "body": "@TrevorGood The address <i>can&#39;t</i> change. Like JohnBollinger said, that&#39;s the intrinsic identifying property that makes that variable unique. A different address means a different place in memory which means a different variable (or whatever is there). Trying to make that variable exist at a different location is like trying to make 2 objects occupy the same location in spacetime."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508969026, "post_id": 46942209, "comment_id": 80832929, "body": "Cant ask another question for 90min :(\\"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508969187, "post_id": 46942209, "comment_id": 80832983, "body": "@TrevorGood Are you even running with an operating system? If you&#39;re running this on some bare metal chip I&#39;m not sure what will happen, but you probably won&#39;t get a segfault. Are you 100% sure you&#39;re compiling that code and running the resulting executable? I&#39;ve been burned before running old/stale executables that didn&#39;t match up with my code changes for a variety of reasons. You should change that to <code>printf(&quot;%p\\n&quot;, (void*)&amp;ptr);</code>, but I highly doubt that would be preventing a segfault."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508969767, "post_id": 46942209, "comment_id": 80833184, "body": "Yep im just running ubuntu. <a href=\"https://pastebin.com/Tr77iBnv\" rel=\"nofollow noreferrer\">pastebin.com/Tr77iBnv</a>. And I&#39;m now getting a segfault, thanks. But the print statement isn&#39;t changing the address of the pointer? And thanks for the help, its greatly appreciated."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508970285, "post_id": 46942209, "comment_id": 80833348, "body": "@TrevorGood Finally! glad to hear it. Printing the address of <code>ptr</code> is never going to change. That&#39;s like me continually asking who you are and each time you give me a name different than TrevorGood. You are TrevorGood, that&#39;s never going to change. The <i>value</i> of <code>ptr</code> changes, not <code>ptr</code> itself. It&#39;s the same thing with <code>a</code>. You can change the <i>value</i> of <code>a</code> all you want, but its location in memory remains fixed. A pointer is nothing more than a variable whose <i>value</i> is an address."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508970626, "post_id": 46942209, "comment_id": 80833472, "body": "Your code should increment a pointer that points at the heap, by 1 byte, repeatedly, until the program crashes. That&#39;s the question, that I have to answer. So, from the question I&#39;m essentially using up every address in the heap, by assigning something to it, and then incrementing the pointer to a different address, assigning something to it, and so on?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508970961, "post_id": 46942209, "comment_id": 80833586, "body": "@TrevorGood well,, no. You&#39;re on the stack and you&#39;re incrementing <code>ptr</code> by <code>sizeof(int)</code> each time (probably 4 bytes, but it depends on your system). If you want something from the heap you need to <a href=\"https://linux.die.net/man/3/malloc\" rel=\"nofollow noreferrer\"><code>malloc</code></a> it first, and use <code>char</code> instead of <code>int</code> to get 1 byte. Read in your book about the stack and the heap, do some googling. If you&#39;re still lost in (now 60 min?) ask another question. This discussion has gone way beyond the scope of your original question. SO comment section isn&#39;t the place to learn these things."}], "tags": [], "owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "is_accepted": false, "score": 4, "last_activity_date": 1508966588, "last_edit_date": 1508966588, "creation_date": 1508966260, "answer_id": 46942209, "question_id": 46942193, "link": "https://stackoverflow.com/questions/46942193/c-memory-stack-and-heap/46942209#46942209", "title": "C memory stack and heap", "body": "<p>you incremented <code>ptr</code>'s value. It still resides in the same place in memory. <code>&amp;ptr</code> tells you its address.  This is no different than doing something like <code>a++</code>.  If you print out <code>a</code>'s value, it will now be 6, but if you print out the address of <code>a</code> with <code>printf(\"%p\\n\", (void*)&amp;a);</code>, it will be the same before and after the increment.</p>\n"}, {"tags": [], "owner": {"reputation": 794, "user_id": 1328157, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LwvtP.jpg?s=128&g=1", "display_name": "nachiketkulk", "link": "https://stackoverflow.com/users/1328157/nachiketkulk"}, "is_accepted": false, "score": 3, "last_activity_date": 1508966894, "last_edit_date": 1508966894, "creation_date": 1508966634, "answer_id": 46942279, "question_id": 46942193, "link": "https://stackoverflow.com/questions/46942193/c-memory-stack-and-heap/46942279#46942279", "title": "C memory stack and heap", "body": "<ol>\n<li><p>5 is the value of <code>a</code> and <code>&amp;a</code> is the address of <code>a</code>.</p></li>\n<li><p><code>ptr = &amp;a</code> means address of <code>a</code> equals the value of <code>ptr</code>.</p></li>\n<li><p><code>&amp;ptr</code> is the address of <code>ptr</code>.</p></li>\n</ol>\n\n<p>You can think of <code>ptr</code> as a box that can hold an address as it's value.</p>\n\n<p>When you increment <code>ptr</code> you change the address held inside the box i.e. <code>ptr</code>; not the address of the box itself.  </p>\n"}], "owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508966894, "creation_date": 1508966128, "question_id": 46942193, "link": "https://stackoverflow.com/questions/46942193/c-memory-stack-and-heap", "title": "C memory stack and heap", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (void) {\n  int a = 5, *ptr;\n  ptr = &amp;a;\n\n  printf(\"0x%X\\n\", ptr);\n  printf(\"%p\\n\", &amp;ptr); //Why are these the same? \n  printf(\"%d\\n\", *ptr);\n\n  ptr++;\n\n  printf(\"0x%X\\n\", ptr);\n  printf(\"%p\\n\", &amp;ptr); //Why are these the same? \n  printf(\"%d\\n\", *ptr);\n\n  return 0; \n}\n</code></pre>\n\n<p>Why are those two values the same? Since I incremented the pointer shouldn't the address change as well? </p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 1, "creation_date": 1508966200, "post_id": 46942191, "comment_id": 80831748, "body": "Write it down not as decimals (base 10) but as binary (base 2) and all will be clear. Seriously. I&#39;m not joking. 1=&gt;1, 2=&gt;10, 0.5 =&gt; 0.1, 0.25 =&gt; 0.01, but how do does look 0.15 or 0.17 or in binary? Try writing it all, then remember there is a limited number of bits, and try taking what&#39;s left and converting it back to decimal."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1508966247, "post_id": 46942191, "comment_id": 80831765, "body": "You know the amount of numbers that can be represented using a finite number of bits is also finite? But the amount of fractional numbers between two arbitrary numbers is infinite."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 2, "creation_date": 1508966436, "post_id": 46942191, "comment_id": 80831866, "body": "Same reason as why some rational numbers can be represented with a terminating decimal (like 1/4 = 0.25), but others cannot (like 1/3 = 0.3333\u2026)."}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 27758, "user_id": 717732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YCxg1.png?s=128&g=1", "display_name": "quetzalcoatl", "link": "https://stackoverflow.com/users/717732/quetzalcoatl"}, "edited": false, "score": 2, "creation_date": 1509000587, "post_id": 46942191, "comment_id": 80842263, "body": "@quetzalcoatl: you are right, but I guess that many people will have problems expressing floating point values in anything else but decimal. It takes some time and understanding to grasp that binary 0.1 is decimal 0.5, etc. And it gets worse with values like binary 0.1010001 etc."}], "owner": {"reputation": 253, "user_id": 8345366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d073beaee453f762368eaaca104248f?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/8345366/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1508966375, "answer_count": 0, "score": 0, "last_activity_date": 1508966123, "creation_date": 1508966123, "question_id": 46942191, "link": "https://stackoverflow.com/questions/46942191/why-can-c-represent-some-floating-points-but-not-others-with-same-amount-of-deci", "closed_reason": "Duplicate", "title": "Why can C represent some floating points but not others with same amount of decimals", "body": "<p>How come C can represent the floating points 1.75 and 1.05 exactly, but not 2.45 and 0.7?</p>\n\n<p>In the code below I have tried to demonstrate what I mean. 1.75 - 1.05 - 0.70 is exactly 0, but 1.75 - 2.45 - 0.70 is not, but the amount of decimal places is the same.</p>\n\n<p>C code:</p>\n\n<pre><code>  int digs = DECIMAL_DIG;\n\n  printf(\"1.75 - 1.05 -0.70: %.*e \\n\",digs, A1-A3-A4);\n  printf(\"1.75 - 2.45 - 0.70: %.*e \\n\",digs, A1-A2+A4);\n  printf(\"\\n2.45: %.*e \\n\",digs, 2.45);\n  printf(\"\\n1.75: %.*e \\n\",digs, 1.75);\n  printf(\"\\n1.05: %.*e \\n\",digs, 1.05);\n  printf(\"\\n0.70: %.*e \\n\",digs, 0.70);\n  printf(\"\\n1.00: %.*e \\n\",digs, 1.00);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1.75 - 1.05 -0.70: 0.000000000000000000000e+000\n1.75 - 2.45 - 0.70: -2.220446049250313100000e-016\n\n2.45: 2.450000000000000200000e+000\n\n1.75: 1.750000000000000000000e+000\n\n1.05: 1.050000000000000000000e+000\n\n0.70: 6.999999999999999600000e-001\n\n1.00: 1.000000000000000000000e+000\n</code></pre>\n"}, {"tags": ["c", "string", "gcc", "assembly", "decimal"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1508965567, "post_id": 46942038, "comment_id": 80831449, "body": "Convert it to hex and it will be clear."}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 1, "creation_date": 1508967262, "post_id": 46942038, "comment_id": 80832235, "body": "I think you omitted <code>movb $0, -13(%rbp)</code>, didn&#39;t you? It is part of the second string, which is 3 bytes long."}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 339561, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1dddc4b6c57e369dab7ad1d2e262dab7?s=128&d=identicon&r=PG", "display_name": "Leandro", "link": "https://stackoverflow.com/users/339561/leandro"}, "edited": false, "score": 0, "creation_date": 1508965845, "post_id": 46942065, "comment_id": 80831591, "body": "I also found this link useful: <a href=\"https://stackoverflow.com/questions/19323806/copying-a-4-element-character-array-into-an-integer-in-c\" title=\"copying a 4 element character array into an integer in c\">stackoverflow.com/questions/19323806/&hellip;</a>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 187, "user_id": 339561, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1dddc4b6c57e369dab7ad1d2e262dab7?s=128&d=identicon&r=PG", "display_name": "Leandro", "link": "https://stackoverflow.com/users/339561/leandro"}, "edited": false, "score": 0, "creation_date": 1508965964, "post_id": 46942065, "comment_id": 80831648, "body": "yeah on a big endian architecture, the values would have been different. Some intel assemblers like MASM use big endian for strings (since it&#39;s manual, it&#39;s easier <i>not to have to swap</i>), which means that the assembled code has the bytes swapped compared to the asm source. Destabilizing..."}, {"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 3, "creation_date": 1508967095, "post_id": 46942065, "comment_id": 80832166, "body": "The buffer is automatic, so it is not already zeroed, but 6513249 as a long is 0x00636261, so the null terminator is there."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1508994108, "post_id": 46942065, "comment_id": 80839485, "body": "@prl true for that part, but what about the <code>ab</code> string where the compiler uses a 16-bit move?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 3, "creation_date": 1509001095, "post_id": 46942065, "comment_id": 80842519, "body": "The OP didn&#39;t show the surrounding code.  gcc uses a separate instruction to store the zero instead of overlapping stores or leaving padding out to 4B.  <a href=\"https://godbolt.org/g/wJir9S\" rel=\"nofollow noreferrer\">godbolt.org/g/wJir9S</a>.  It&#39;s a missed optimization: <code>push imm32</code> or <code>mov r&#47;m64, imm32</code> could store the 1B and 2B strings with explicit <code>0</code> after one and implicit <code>0</code> after the other (from sign-extension to 64 bits, because the last character is below 127).  The 3-byte string could overlap the last 3 bytes of that store with another 4B store.  The stack is 16B-aligned, so you could do this with no chance of crossing a cache line."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1509001163, "post_id": 46942065, "comment_id": 80842554, "body": "@PeterCordes I&#39;ll edit the zero buffer part. I could only assume here (and it was an extension to the answer to the question: damn this godbolt site is cool!)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1509005801, "post_id": 46942065, "comment_id": 80845341, "body": "Reported as <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82729\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=82729</a>.  Silly compilers.  (clang didn&#39;t do any better, and icc is worse (copying from string literals even for tiny strings.)"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 5, "last_activity_date": 1509001259, "last_edit_date": 1509001259, "creation_date": 1508965582, "answer_id": 46942065, "question_id": 46942038, "link": "https://stackoverflow.com/questions/46942038/gcc-assembly-string-representation/46942065#46942065", "title": "gcc assembly string representation", "body": "<p>let's take the hex value of the 32-bit integer of the first line:</p>\n\n<pre><code>&gt;&gt;&gt; hex(6513249)\n'0x636261'\n</code></pre>\n\n<p>which is <code>cba</code></p>\n\n<p>As the processor is little-endian, it's just an optimized way to initialize a small string with just a 32-bit move instead of a tedious byte-by-byte copy.</p>\n\n<p>The nul-termination is not handled for all strings here (<code>movw    $25185, -15(%rbp)</code> sets <code>a</code> and <code>b</code> but doesn't nul-terminate), and it's done elsewhere in code you're not showing (note that there's room for the nul-termination byte: first string is at offset -12, second string is at offset -15, which makes it 3 bytes long, and same for the last one)</p>\n"}], "owner": {"reputation": 187, "user_id": 339561, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1dddc4b6c57e369dab7ad1d2e262dab7?s=128&d=identicon&r=PG", "display_name": "Leandro", "link": "https://stackoverflow.com/users/339561/leandro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 767, "favorite_count": 0, "accepted_answer_id": 46942065, "answer_count": 1, "score": 2, "last_activity_date": 1509001259, "creation_date": 1508965434, "question_id": 46942038, "link": "https://stackoverflow.com/questions/46942038/gcc-assembly-string-representation", "title": "gcc assembly string representation", "body": "<pre><code>char a[] = \"abc\";   // movl    $6513249, -12(%rbp)\nchar ab[] = \"ab\";  // movw    $25185, -11(%rbp) \nchar abc[] = \"a\"; // movw    $97, -10(%rbp)\n</code></pre>\n\n<p>The C code above is represented in assembly (gcc -S code.c) as:</p>\n\n<pre><code>movl    $6513249, -12(%rbp)\nmovw    $25185, -15(%rbp)\nmovw    $97, -17(%rbp)\n</code></pre>\n\n<p>97 is 'a' in decimal, but why \"ab\" is 25185 and \"abc\" is 6513249?</p>\n"}, {"tags": ["c", "multithreading", "segmentation-fault"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1508964764, "post_id": 46941835, "comment_id": 80830993, "body": "and where does it go wrong. Run it under a debugger"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1508964782, "post_id": 46941835, "comment_id": 80831009, "body": "<code>int* num;         *num = 15;</code> dereferencing an uninitialized pointer... that&#39;s <i>undefined behaviour</i>"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1508965042, "post_id": 46941835, "comment_id": 80831151, "body": "Compiling with clang using <code>-Wall</code> generates three warnings, all of which need to be fixed before your code even has a chance of running correctly. So no, your code does <i>not</i> compile fine."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8834026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936dc641c2b0c87fb484f1542b9735e2?s=128&d=identicon&r=PG&f=1", "display_name": "FWayne", "link": "https://stackoverflow.com/users/8834026/fwayne"}, "edited": false, "score": 0, "creation_date": 1508990248, "post_id": 46941891, "comment_id": 80838388, "body": "I did everything suggested by you, and I still have a seg-fault. It literally makes no sense.                                                                                               int n = atoi(argv[1]);         pthread_t thread;         pthread_create(&amp;thread,(pthread_attr_t*)NULL, (void*)&amp;calc_con, &amp;n);         pthread_join(thread, NULL);"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 9, "user_id": 8834026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936dc641c2b0c87fb484f1542b9735e2?s=128&d=identicon&r=PG&f=1", "display_name": "FWayne", "link": "https://stackoverflow.com/users/8834026/fwayne"}, "edited": false, "score": 0, "creation_date": 1508993994, "post_id": 46941891, "comment_id": 80839451, "body": "the problem lies in the <code>calc_con</code> routine then. are you still using uninitialized pointers? running a debugger on your code would help even more than our proof-reading."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 9, "user_id": 8834026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936dc641c2b0c87fb484f1542b9735e2?s=128&d=identicon&r=PG&f=1", "display_name": "FWayne", "link": "https://stackoverflow.com/users/8834026/fwayne"}, "edited": false, "score": 0, "creation_date": 1508994439, "post_id": 46941891, "comment_id": 80839602, "body": "check my last edit, you have another dereferencing issue. Why making things more complex than they should be?"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 3, "last_activity_date": 1508994378, "last_edit_date": 1508994378, "creation_date": 1508964889, "answer_id": 46941891, "question_id": 46941835, "link": "https://stackoverflow.com/questions/46941835/segmentation-fault-using-threads-in-c/46941891#46941891", "title": "Segmentation fault using threads in C", "body": "<p>okay you <em>need</em> to pass a <code>void *</code> as an argument to <code>pthread_create</code>, but you still need to respect the basics:</p>\n\n<pre><code>int* num;\n*num = 15;\npthread_t thread;\npthread_create(&amp;thread,(pthread_attr_t*)NULL, (void *)&amp;calc_con, (void *)num);\n</code></pre>\n\n<p>Here <code>*num = 15;</code> you're writing <code>15</code> to an <em>uninitialized pointer</em>. That's <em>undefined behaviour</em>.</p>\n\n<p>I would do:</p>\n\n<pre><code>int num = 15;\npthread_t thread;\npthread_create(&amp;thread,(pthread_attr_t*)NULL, &amp;calc_con, &amp;num);\n</code></pre>\n\n<p>note that you don't have to cast to <code>void *</code> from pointers on non-void. Since <code>num</code> is declared in the <code>main</code> routine, you can pass a pointer on it to your threads safely.</p>\n\n<p>note that as pointed by dasblinkenlight, you also have to fix the recieving end, in <code>calc_con</code>, which has the same issue:</p>\n\n<pre><code>int * x;  // uninitialized pointer\n*x = *n;  // copy data \"in the woods\"\n</code></pre>\n\n<p>just dereference into a local variable and you have your value:</p>\n\n<pre><code>int x = *((int *)n);\n</code></pre>\n\n<p>and another one:</p>\n\n<pre><code>int * values[1000];\n</code></pre>\n\n<p>is an uninitialized array of integer pointers, not an array of integers like you're intending. It should be</p>\n\n<pre><code>int values[1000];\n</code></pre>\n\n<p>then</p>\n\n<pre><code>values[0] = x;\n</code></pre>\n\n<p>(it's not because there's a lot of <code>*</code> operators that it's good code)</p>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508965249, "post_id": 46941914, "comment_id": 80831278, "body": "why casting <code>num</code> to <code>void *</code> ? nice catch with the value passed as <code>void *</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508994417, "post_id": 46941914, "comment_id": 80839598, "body": "note that <code>*values[0] = *x;</code> is also wrong. OP uses dereferencing with uninitialized pointers everywhere."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1508965000, "creation_date": 1508965000, "answer_id": 46941914, "question_id": 46941835, "link": "https://stackoverflow.com/questions/46941835/segmentation-fault-using-threads-in-c/46941914#46941914", "title": "Segmentation fault using threads in C", "body": "<p>You are passing an <code>int</code> to your thread using a <code>void*</code>. This will work on many platforms, but there is no guarantees that the number would \"round-trip\" correctly. Once you get pointer back, you save it in a dereferenced uninitialized pointer, which is incorrect.</p>\n\n<p>Pass a pointer to <code>num</code> instead, and copy the pointer into <code>x</code> directly:</p>\n\n<pre><code>void calc_con(void *n);\n...\nvoid calc_con(void *n) {\n        int i = 0;\n        int * x = n;\n        *values[0] = *x;\n        while(*x &gt; 1) {\n                if(*x % 2 == 0) {\n                        *x /= 2;\n                } else if(*x % 2 == 1) {\n                        *x *= 3;\n                        *x++;\n                }\n                i++;\n                *values[i] = *x;\n        }\n        pthread_exit(0);\n}\n...\nint num = 15;\npthread_create(&amp;thread,(pthread_attr_t*)NULL, calc_con, (void *)&amp;num);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8834026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936dc641c2b0c87fb484f1542b9735e2?s=128&d=identicon&r=PG&f=1", "display_name": "FWayne", "link": "https://stackoverflow.com/users/8834026/fwayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508994378, "creation_date": 1508964676, "question_id": 46941835, "link": "https://stackoverflow.com/questions/46941835/segmentation-fault-using-threads-in-c", "title": "Segmentation fault using threads in C", "body": "<p>I'm getting a seg fault within this code, but I can't find the problem anywhere. It compiles just fine with -lpthread, but it just won't run. This program takes in an integer from the command line and then creates a new thread to calculate the collatz conjecture using that value. This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid print_con();\nvoid calc_con(int *n);\n\nint * values[1000];\n\nint main(int argc, char * argv[])\n{\n        int* num;\n        *num = 15;\n        pthread_t thread;\n        pthread_create(&amp;thread,(pthread_attr_t*)NULL, (void *)&amp;calc_con, (void *)num);\n        pthread_join(thread, NULL);\n        print_con();\n        return 0;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>void calc_con(int *n)\n{\n        int i = 0;\n        int * x;\n        *x = *n;\n        *values[0] = *x;\n        while(*x &gt; 1)\n        {\n                if(*x % 2 == 0)\n                        *x /= 2;\n                else if(*x % 2 == 1)\n                {\n                        *x *= 3;\n                        *x++;\n                }\n                i++;\n                *values[i] = *x;\n        }\n        pthread_exit(0);\n}\n\nvoid print_con()\n{\n        int i;\n        for(i = 0; i &lt; 1000; i++)\n        {\n                if(*values[i] &gt; 0)\n                        printf(\"%d\", *values[i]);\n        }\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 6, "creation_date": 1508964445, "post_id": 46941758, "comment_id": 80830810, "body": "<code>calloc</code> sets <code>node-&gt;next</code> to <code>NULL</code>. Accessing <code>node-&gt;next-&gt;next</code> when <code>node-&gt;next</code> is <code>NULL</code> is undefined behavior, i.e. don&#39;t do that."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 6, "creation_date": 1508964493, "post_id": 46941758, "comment_id": 80830831, "body": "calloc is useless here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1508964660, "post_id": 46941758, "comment_id": 80830921, "body": "You use <code>calloc</code> and then set <code>init-&gt;next = NULL;</code>. No need to do that."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508964738, "post_id": 46941758, "comment_id": 80830967, "body": "Is useless because both <code>struct</code> members were explicitly initialised."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1508964861, "post_id": 46941758, "comment_id": 80831052, "body": "Given the typedef, <code>node-&gt;next-&gt;next</code> is a syntax error"}, {"owner": {"reputation": 17, "user_id": 8653931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d303765df326107143d35e18524526?s=128&d=identicon&r=PG&f=1", "display_name": "pinacoloda", "link": "https://stackoverflow.com/users/8653931/pinacoloda"}, "edited": false, "score": 0, "creation_date": 1508965226, "post_id": 46941758, "comment_id": 80831256, "body": "Thanks for the calloc advice,  what if I&#39;m supposed to code against node-&gt;next-&gt;next?  It would throw a segfault if you tried to access node-&gt;next-&gt;next-&gt;data access right?  I&#39;m just trying to think where I&#39;m messing up in my code that&#39;s not producing a NULL tail."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1508965263, "post_id": 46941758, "comment_id": 80831285, "body": "<a href=\"https://stackoverflow.com/a/27718190/905902\">stackoverflow.com/a/27718190/905902</a> No. a NULL pointer value is not necessarily represented by <i>all-zeros</i> (so:in this case, the calloc() is more or less useless. It won&#39;t harm, but justa malloc() would do. Plus: proper initialisation to NULL,of course)"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508965265, "post_id": 46941758, "comment_id": 80831286, "body": "Show us your insert function and the test code that yields the erroneous result."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508965411, "post_id": 46941758, "comment_id": 80831368, "body": "<code>node-&gt;next-&gt;next-&gt;data</code> is bad: check every pointer in that chain."}, {"owner": {"reputation": 17, "user_id": 8653931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d303765df326107143d35e18524526?s=128&d=identicon&r=PG&f=1", "display_name": "pinacoloda", "link": "https://stackoverflow.com/users/8653931/pinacoloda"}, "edited": false, "score": 0, "creation_date": 1508966095, "post_id": 46941758, "comment_id": 80831701, "body": "void insertNode(node *head, char data)                   {                   while(node-&gt;next != NULL)                              node = node-&gt;next;                     node-&gt;data = data;               node-&gt;next = createNode();              }"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1508967299, "post_id": 46941758, "comment_id": 80832251, "body": "&quot;I&#39;m getting a value that isn&#39;t NULL in the node-&gt;next-&gt;next block&quot; --&gt; add that code to the post  that demonstrates this."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1508967302, "post_id": 46941758, "comment_id": 80832253, "body": "See also <a href=\"http://c-faq.com/null/varieties.html\" rel=\"nofollow noreferrer\">c-faq.com/null/varieties.html</a>"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508968336, "post_id": 46941758, "comment_id": 80832689, "body": "@pinacoloda, edit your question to show the code, don&#39;t add it to the comments."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1508973052, "post_id": 46941758, "comment_id": 80834252, "body": "<code>createNode();</code> is an error (missing argument). Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "owner": {"reputation": 17, "user_id": 8653931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d303765df326107143d35e18524526?s=128&d=identicon&r=PG&f=1", "display_name": "pinacoloda", "link": "https://stackoverflow.com/users/8653931/pinacoloda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508968803, "creation_date": 1508964319, "last_edit_date": 1508968803, "question_id": 46941758, "link": "https://stackoverflow.com/questions/46941758/tail-of-linked-list-not-being-set-to-null-using-calloc", "title": "Tail of linked list not being set to NULL using Calloc?", "body": "<p>Let's say that I have a struct setup like this:   </p>\n\n<pre><code>typedef struct node{\n   char data;\n   struct node *next;\n} node;\n</code></pre>\n\n<p>I'm setting up the node like this:           </p>\n\n<pre><code>node *createNode(char data){\n   node *init = calloc(1, sizeof(node));\n   init-&gt;data = data;\n   init-&gt;next = NULL;\n\n   return init;\n}\n</code></pre>\n\n<p>And there's some insert function that takes data and inserts it into the node.<br>\nShouldn't the reference </p>\n\n<pre><code>node-&gt;next-&gt;next      \n</code></pre>\n\n<p>Always be set NULL because of calloc(zeroes out the memory block)?<br>\nI'm getting a value that isn't NULL in the node->next->next block and I'm confused why this is happening.       </p>\n\n<p>Edit:    </p>\n\n<pre><code>void insertNode(node *head, char data) { \n     while(node-&gt;next != NULL) \n           node = node-&gt;next; \n     node-&gt;data = data; \n     node-&gt;next = createNode(); \n} \n</code></pre>\n\n<p>The main function just loops through a string and uses the node pointer as the first parameter, I can't post anymore than this since it's getting too close to my actual code that I'm working on right now.        </p>\n"}, {"tags": ["c", "for-loop", "indexing", "matrix-multiplication"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1508962611, "post_id": 46941250, "comment_id": 80829934, "body": "Are the values stored in your C array ever initialized to zero before you start summing into them?"}, {"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1508962927, "post_id": 46941250, "comment_id": 80830090, "body": "I just realised not, but strangely that is the algorithm that gives the correct result. I am very confused now"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1508963938, "post_id": 46941250, "comment_id": 80830545, "body": "The first example <code>C[(i * n) + j] += ... </code>is clearly wrong (or unlucky), because the memory provided by <code>malloc</code> has uninitialised values. Perhaps use <code>calloc</code>?"}, {"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "edited": false, "score": 0, "creation_date": 1508965603, "post_id": 46941250, "comment_id": 80831466, "body": "I understand what you&#39;re explaining, but I have tested it several times and it is working perfectly"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1508967666, "post_id": 46941250, "comment_id": 80832409, "body": "No, it is not &quot;working perfectly&quot;.  &quot;Testing several times&quot; is not adequate to prove perfection.  Assign all elements of <code>C[]</code> to 0.0 first.  Then use in the loops."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1508967929, "post_id": 46941250, "comment_id": 80832527, "body": "<code>fmin(double x, double y)</code> for finding the minimum of 2 integers is poor use of mixing a FP function with integer math - although I doubt that is the problem (unless <code>&lt;math.h&gt;</code> was not included."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1508968101, "post_id": 46941250, "comment_id": 80832595, "body": "What are the values of <code>n,b</code> used in <code>blocked_ijk_matmul()</code>?"}, {"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "edited": false, "score": 0, "creation_date": 1508968565, "post_id": 46941250, "comment_id": 80832773, "body": "I have set <code>n = 2</code> and <code>b = 1</code> for testing, but in practice they would be in magnitude of thousands. I have changed the <code>malloc</code> to <code>calloc</code> too."}], "owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508962260, "creation_date": 1508962260, "question_id": 46941250, "link": "https://stackoverflow.com/questions/46941250/matrix-multiplication-not-working-when-i-store-the-result-of-a-sum-instead-of-ac", "title": "Matrix multiplication not working when I store the result of a sum instead of accessing that element on each sum", "body": "<p>I am writing a <a href=\"http://www.netlib.org/utk/papers/autoblock/node2.html\" rel=\"nofollow noreferrer\">blocked matrix multiplication algorithm</a> for n x n matrices. My matrices are stored as 1D arrays. My first version of the algorithm works fine:</p>\n\n<pre><code>double * blocked_ijk_matmul(double *A, double *B, int n, int b) {\n    double *C = (double *) malloc(n * n * sizeof(double));\n    int i_block, j_block, k_block, i, j, k;\n\n    for (i_block = 0; i_block &lt; n; i_block += b) {\n        for (j_block = 0; j_block &lt; n; j_block += b) {\n            for (k_block = 0; k_block &lt; n; k_block += b) {\n                for (i = i_block; i &lt; fmin(i_block + b, n); ++i) {\n                    for (j = j_block; j &lt; fmin(j_block + b, n); ++j) {\n                        for (k = k_block; k &lt; fmin(k_block + b, n); ++k) {\n                            C[(i * n) + j] += A[(i * n) + k] * B[(k * n) + j];\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    return C;\n}\n</code></pre>\n\n<p>However, in this algorithm <code>C[(i *n) * j]</code> is computed quite a large number of times depending on the size of the matrices. If I instead try to store this sum, and then set the value of <code>C[(i *n) * j]</code> to the total sum value when all summations are complete, I get incorrect results:</p>\n\n<pre><code>double * blocked_ijk_matmul(double *A, double *B, int n, int b) {\n    double *C = (double *) malloc(n * n * sizeof(double));\n    int i_block, j_block, k_block, i, j, k;\n\n    for (i_block = 0; i_block &lt; n; i_block += b) {\n        for (j_block = 0; j_block &lt; n; j_block += b) {\n            for (k_block = 0; k_block &lt; n; k_block += b) {\n                for (i = i_block; i &lt; fmin(i_block + b, n); ++i) {\n                    for (j = j_block; j &lt; fmin(j_block + b, n); ++j) {\n                        double sum = 0;\n                        for (k = k_block; k &lt; fmin(k_block + b, n); ++k) {\n                            sum += A[(i * n) + k] * B[(k * n) + j];\n                        }\n                        C[(i * n) + j] = sum;\n                    }\n                }\n            }\n        }\n    }\n\n    return C;\n}\n</code></pre>\n\n<p>I cannot figure out for quite some time why this is not working. Clearly, <code>double sum = 0;</code> and <code>C[(i * n) + j] = sum;</code> need to be placed somewhere else, but I cannot figure out where.</p>\n"}, {"tags": ["c", "sockets", "networking"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 6, "creation_date": 1508962255, "post_id": 46941162, "comment_id": 80829755, "body": "you are aware that in non blocking mode, socket will not wait when you use recv ? non blocking mode is not magic. Read about EAGAIN and EWOULDBLOCK"}, {"owner": {"reputation": 133, "user_id": 6372440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1197845496892804/picture?type=large", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6372440/thomas"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1508962666, "post_id": 46941162, "comment_id": 80829957, "body": "@Stargateur yes. I tried looping the recv until it got a message, but that clearly didn&#39;t work. I also tried setting the socket back to blocking before the recv, and that didn&#39;t seem to work either. What options do I have?"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 2, "creation_date": 1508962947, "post_id": 46941162, "comment_id": 80830100, "body": "Retry &quot;looping the recv until it got a message&quot; should work <code>if (num_bytes == 0 || (num_bytes == -1 &amp;&amp; num_bytes != EAGAIN &amp;&amp; num_bytes != EWOULDBLOCK) { break; }</code>. Or use other solution with blocking mode (select, epoll, etc...)."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1509010602, "post_id": 46941162, "comment_id": 80848634, "body": "@Stargateur Retrying if <code>num_bytes == 0</code> would be a complete waste of time. The peer has disconnected: there will never be any more data; you should stop reading and close the socket."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1509017751, "post_id": 46941162, "comment_id": 80853436, "body": "@EJP read his code I give this example to fit in his code, these condition will stop read loop."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 6372440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1197845496892804/picture?type=large", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6372440/thomas"}, "edited": false, "score": 0, "creation_date": 1509134125, "post_id": 46948685, "comment_id": 80912408, "body": "Thank you. Your solution did exactly what I need!  I&#39;ll update the OP with the working code."}], "tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": true, "score": 2, "last_activity_date": 1509004407, "last_edit_date": 1592644375, "creation_date": 1509004407, "answer_id": 46948685, "question_id": 46941162, "link": "https://stackoverflow.com/questions/46941162/no-response-from-recv-when-using-nonblocking-socket/46948685#46948685", "title": "No response from recv when using nonblocking socket", "body": "<p>As pointed in comments, in non-blocking mode, you have to handle cases when\nserver is not ready to send data.</p>\n<p>For <a href=\"https://linux.die.net/man/3/recv\" rel=\"nofollow noreferrer\">man recv(3)</a></p>\n<blockquote>\n<p><strong>Return Value</strong></p>\n<p>Upon successful completion, recv() shall return the length of the message in bytes. If no messages are available to be received and the peer has performed an orderly shutdown, recv() shall return 0. Otherwise, -1 shall be returned and errno set to indicate the error.</p>\n<p><strong>Errors</strong></p>\n<p>The recv() function shall fail if:</p>\n<p>EAGAIN or EWOULDBLOCK</p>\n<p>The socket's file descriptor is marked O_NONBLOCK and no data is waiting to be received; or MSG_OOB is set and no out-of-band data is available and either the socket's file descriptor is marked O_NONBLOCK or the socket does not support blocking to await out-of-band data.</p>\n</blockquote>\n<p>Since your client may try to read before the server send something, you must\nadapt your code to wait:</p>\n<pre><code>/* maximum number of retry, one second per retry */\nint retry = 10;\nunsigned total_bytes_received = 0;\nwhile(retry) {\n    num_bytes = recv(sock, buf+total_bytes_received, MAX_LEN, 0);\n    if (0 == num_bytes)\n    {\n        /* socket has been closed by peer */            \n        break;\n    }\n    else if(-1 == num_bytes)\n    {\n        if ((EAGAIN == errno) || (EWOULDBLOCK == errno))\n        {\n            /* no data to be read on socket */\n            retry--;\n            /* wait one second */\n            sleep(1);\n        }\n        else\n        {\n            /* other error */\n            perror(&quot;recv&quot;);\n            break;\n        }\n    }\n    else\n    {\n        total_bytes_received += num_bytes;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 6372440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1197845496892804/picture?type=large", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6372440/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 46948685, "answer_count": 1, "score": -1, "last_activity_date": 1509134230, "creation_date": 1508961825, "last_edit_date": 1509134230, "question_id": 46941162, "link": "https://stackoverflow.com/questions/46941162/no-response-from-recv-when-using-nonblocking-socket", "title": "No response from recv when using nonblocking socket", "body": "<p>I am trying to create a portscanner in c. If the port is open, I want to get a response from the server. When I use regular blocking sockets, this works fine. For example, I know that for a certain address on my network, if I check port 80, it will return the html page to me when I call recv. I have tested this, and it works correctly every time.</p>\n\n<p>However, I want to use nonblocking sockets, because sometimes certain servers will not respond and will cause the program to hang. I was able to get the nonblocking sockets to (kindof) work (the code is currently commented out below). I could see which ports were open, which were closed, and which timed out, but I was not able to get a response from the server (even though I know it should send one). What am I doing wrong?</p>\n\n<p>tl;dr: When using nonblocking sockets (vs blocking), recv doesn't return any data.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n\n#include &lt;fcntl.h&gt;\n\n#define MAX_LEN 100000\n\nint main(int argc, char **argv)\n{\n    int sock, test_sock;\n    struct sockaddr_in server_addr;\n    struct hostent *hp;\n    char buf[MAX_LEN];\n    int num_bytes;\n    int err_code;\n    int START_PORT = 1;\n    int END_PORT = 100;\n\n    fd_set fdset;\n    struct timeval tv;\n    int opts;\n\n    // resolve server name for its IP address, etc.\n    hp = gethostbyname(argv[1]);\n    if (NULL == hp) {\n        perror(\"gethostbyname\");\n        exit(2);\n    }\n\n    //printf(\"Here1\\n\");\n\n    // build remote server addr/port\n    memset(&amp;server_addr, 0, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    memcpy(&amp;server_addr.sin_addr, hp-&gt;h_addr, hp-&gt;h_length);\n    //server_addr.sin_port = htons(atoi(argv[2]));\n\n\n    test_sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    for(int i=START_PORT; i&lt;=END_PORT; i++) {\n        printf(\"Here2\\n\");\n        sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); //created the tcp socket\n        //opts = fcntl(sock, F_SETFL, O_NONBLOCK);\n        printf(\"Here3\\n\");\n        if (sock &lt; 0)\n        {\n            perror(\"Socket()\\n\");\n            exit(1);\n        }  \n\n        server_addr.sin_port = htons(i);\n\n        // connect to server\n        printf(\"Here4\\n\");\n        err_code = connect(sock, (struct sockaddr *)&amp;server_addr, sizeof(server_addr));\n        printf(\"Here5\\n\");\n\n        /* ... */\n\n        if (err_code &lt; 0) {\n            printf(\"Port %d: connection refused\\n\", i);\n            //exit(3);\n        } else {\n            printf(\"Port %d:\\n\", i);\n            memset(buf, 0, MAX_LEN);\n\n            // Create message to send\n            char message[256];\n            strcpy(message, \"GET / HTTP/1.0\\r\\nHost: \");\n            strcat(message, argv[1]);\n            strcat(message, \"\\r\\n\\r\\n\");\n\n            unsigned total_bytes_sent = 0;\n            num_bytes = send(sock, message, strlen(message), 0);\n            if (num_bytes &lt; 0) {\n                perror(\"send\");\n                exit(4);\n            }\n\n            unsigned total_bytes_received = 0;\n            while(1) {\n                num_bytes = recv(sock, buf+total_bytes_received, MAX_LEN, 0);\n                if(num_bytes &lt;= 0){\n                    break;\n                }\n                total_bytes_received += num_bytes;\n            }\n\n            // display received ack message\n            //printf(\"Port %d:\\n\", i);\n            fflush(stdout);\n            write(1, buf, total_bytes_received);\n            printf(\"\\n\");\n            printf(\"Done...\\n\");\n        }\n\n        close(sock);\n    }\n\n\n\n    // close sock to release resource\n    close(sock);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>SOLUTION</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;errno.h&gt;\n\n#include &lt;fcntl.h&gt;\n\n#define MAX_LEN 100000\n\nint main(int argc, char **argv)\n{\nint sock, sock_test;\nstruct sockaddr_in server_addr;\nstruct hostent *hp;\nchar buf[MAX_LEN];\nint num_bytes;\nint err_code;\nint START_PORT = 1;\nint END_PORT = 100;\nint valid = 1;\n\nfd_set fdset;\nstruct timeval tv;\n\n\n// resolve server name for its IP address, etc.\nhp = gethostbyname(argv[1]);\nif (NULL == hp) {\n    perror(\"gethostbyname\");\n    exit(2);\n}\n\n// build remote server addr/port\nmemset(&amp;server_addr, 0, sizeof(server_addr));\nserver_addr.sin_family = AF_INET;\nmemcpy(&amp;server_addr.sin_addr, hp-&gt;h_addr, hp-&gt;h_length);\n\n\n\nfor(int i=START_PORT; i&lt;=END_PORT; i++) {\n    sock_test = socket(AF_INET, SOCK_STREAM, 0);\n    if (sock_test &lt; 0)\n    {\n        perror(\"Socket()\\n\");\n        exit(1);\n    }  \n\n    fcntl(sock_test, F_SETFL, O_NONBLOCK);\n    server_addr.sin_port = htons(i);\n\n    connect(sock_test, (struct sockaddr *)&amp;server_addr, sizeof(server_addr));\n\n    FD_ZERO(&amp;fdset);\n    FD_SET(sock_test, &amp;fdset);\n    tv.tv_sec = 3;            \n    tv.tv_usec = 0;\n\n    if (select(sock_test + 1, NULL, &amp;fdset, NULL, &amp;tv) == 1)\n    {\n        int so_error;\n        socklen_t len = sizeof so_error;\n\n        getsockopt(sock_test, SOL_SOCKET, SO_ERROR, &amp;so_error, &amp;len);\n\n        if (so_error == 0) {\n            printf(\"%s:%d is open\\n\", argv[1], i);\n\n            memset(buf, 0, MAX_LEN);\n\n\n            // Create message to send\n            char message[256];\n            strcpy(message, \"GET / HTTP/1.0\\r\\nHost: \");\n            strcat(message, argv[1]);\n            strcat(message, \"\\r\\n\\r\\n\");\n\n            printf(\"Here6\\n\");\n\n            unsigned total_bytes_sent = 0;\n            num_bytes = send(sock_test, message, strlen(message), 0);\n\n            printf(\"Here7\\n\");\n\n            int retry = 3;\n            unsigned total_bytes_received = 0;\n            while(retry) {\n                num_bytes = recv(sock_test, buf+total_bytes_received, MAX_LEN, 0);\n                    if (0 == num_bytes)\n                    {\n                    /* socket has been closed by peer */            \n                    break;\n                    }\n                    else if(-1 == num_bytes)\n                    {\n                    if ((EAGAIN == errno) || (EWOULDBLOCK == errno))\n                    {\n                            /* no data to be read on socket */\n                            retry--;\n                         /* wait one second */\n                            sleep(1);\n                    }\n                    else\n                    {\n                            /* other error */\n                            perror(\"recv\");\n                            break;\n                    }\n                    }\n                    else\n                {\n                    total_bytes_received += num_bytes;\n                    }\n            }\n\n            // display received ack message\n            //printf(\"Port %d:\\n\", i);\n            fflush(stdout);\n            write(1, buf, total_bytes_received);\n            printf(\"\\n\");\n            printf(\"Done...\\n\");\n        }\n        else\n        {\n            //printf(\"%s:%d is closed\\n\", argv[1], i);\n        }\n    } else {\n        printf(\"timed out\\n\");\n        valid = 0; //set the boolean flag to false      \n    }\n\n    close(sock_test);\n}\n\n\n\n    // close sock to release resource\n    close(sock_test);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1508961413, "post_id": 46941032, "comment_id": 80829323, "body": "what&#39;s the type of  <code>msg</code>?"}, {"owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1508961530, "post_id": 46941032, "comment_id": 80829384, "body": "data.msg is a pointer to an array of longs."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1508961771, "post_id": 46941032, "comment_id": 80829506, "body": "<code>convertion</code> ? are you sure? <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, cannot reproduce here. (tried clang &amp; gcc with all warnings on)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508961827, "post_id": 46941032, "comment_id": 80829536, "body": "what about <code>(uint8_t)(data.msg[0])</code> ? that would be simpler and does the same thing."}, {"owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "edited": false, "score": 0, "creation_date": 1508962067, "post_id": 46941032, "comment_id": 80829657, "body": "If you look up stdint.h, uint8_t is actually an unsigned char which also generates it&#39;s own equally annoying but harmless complaints."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508964465, "post_id": 46941032, "comment_id": 80830819, "body": "what about a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ? no one seems able to reproduce your warning. Also state the name &amp; the version of your compiler. Unless it&#39;s a linter ?*"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508966260, "post_id": 46941032, "comment_id": 80831775, "body": "It does beg the question, why the array of int if you&#39;re only using the one byte?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508973021, "post_id": 46941032, "comment_id": 80834239, "body": "Note that 0x00000000000000FF and 0xFF are the same value and the same type; the extra zeros make no difference."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1508973355, "post_id": 46941032, "comment_id": 80834332, "body": "Note that <code>a |= b</code> is a shorthand for <code>a = a | b</code> except that <code>a</code> is evaluated once (which matters if <code>a</code> is actually spelled <code>t-&gt;p[q++]-&gt;r[j--]</code> or something baroque, if not broken, like that).  Given that <code>a | b</code> is evaluated by promoting both arguments to <code>int</code> and then evaluating the expression, the assignment is shortening the <code>int</code> result and triggering the message.  Your cast doesn&#39;t change the expression.  Try <code>messagesize = (uint16_t)(messagesize | (data.msg[0] &amp; 0xFF));</code> -- that cast might avoid the shortening conversion message,"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1508979007, "post_id": 46941032, "comment_id": 80835717, "body": "Set your compiler to shop showing this useless warning"}, {"owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "edited": false, "score": 0, "creation_date": 1508981733, "post_id": 46941032, "comment_id": 80836366, "body": "Jonathan Leffler,  excellent observation. Definately worth keeping in mind but the -Wconversion flag will still flag this."}], "answers": [{"tags": [], "owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "is_accepted": true, "score": 2, "last_activity_date": 1508979954, "creation_date": 1508979954, "answer_id": 46944265, "question_id": 46941032, "link": "https://stackoverflow.com/questions/46941032/avoiding-warning-messages-when-using-bit-shifting-to-extract-parts-of-a-word/46944265#46944265", "title": "Avoiding warning messages when using bit shifting to extract parts of a word", "body": "<p>You are getting these warnings because somewhere within your make file someone is using the flag \"-Wconversion\". This is a very conservative flag that warns of the <em>possibility</em> of precision loss. This does not mean anything is actually wrong with the values. </p>\n\n<p>The more common flags ( -Wall, -Werror, -Pendactic) do not call           -Wconversion.  As far as I know it has to be called explicitly.</p>\n\n<p>I wrote a sample which should be pretty similar to the behavior you described:</p>\n\n<pre><code>uint8_t func(uint16_t i)\n{\n    uint8_t out = 0;\n    out |= i;\n    return out;\n}\n\nint main()\n{\n    long l;\n    uint8_t i;\n    l = 0xFFFFFFFFFFFFFFFF;  // -1 (unsigned)\n    printf(\"Initial Long: %ld\\n\", l);\n    i = func(l);\n    printf(\"8 bits: %d\\n\", i);  // value: 255\n}\n</code></pre>\n\n<p>I tried multiple c and c++ standards.  I'm only getting warnings when<br>\n-Wconversion is used. This code does exactly what it is supposed to.  As long as you are getting the values you are looking for I would question if the -Wconversion needs to be in he make file, or use a #pragma to ignore it like this:</p>\n\n<pre><code>#pragma GCC diagnostic ignored \"-Wconversion\"\n</code></pre>\n"}], "owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 46944265, "answer_count": 1, "score": 2, "last_activity_date": 1508979954, "creation_date": 1508961342, "question_id": 46941032, "link": "https://stackoverflow.com/questions/46941032/avoiding-warning-messages-when-using-bit-shifting-to-extract-parts-of-a-word", "title": "Avoiding warning messages when using bit shifting to extract parts of a word", "body": "<p>Assuming that data.msg is a pointer to an array of longs(64 bit), \nwhy is this giving me the warning below.</p>\n\n<pre><code>uint16_t messageSize = 0;\nmessageSize |= (uint16_t)(data.msg[0] &amp; 0x00000000000000FF);\n</code></pre>\n\n<p>output</p>\n\n<pre><code>warning: convertion to 'uint16_t {aka short unsigned int}' from 'int'\n</code></pre>\n\n<p>If I remove the cast to uint16_t I get the same message with the exception that it says long instead of int.  Regardless, I am getting the correct values and only losing precision I want to loose but I am trying to get rid of the warnings.</p>\n"}, {"tags": ["c", "windows", "malloc"], "comments": [{"owner": {"reputation": 1802, "user_id": 7034621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZCc06.jpg?s=128&g=1", "display_name": "orhtej2", "link": "https://stackoverflow.com/users/7034621/orhtej2"}, "edited": false, "score": 1, "creation_date": 1508960923, "post_id": 46940817, "comment_id": 80829068, "body": "IMO the problem is <code>strcat</code> that appends something to string literal."}, {"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1508960923, "post_id": 46940817, "comment_id": 80829069, "body": "thank you for the fast answer but the problem is different, If i did it right when memory is created in s_malloc it is initilised and filled with &#39;\\0&#39;. And the lenth i give to the function in the nedded plus 1. So the string has &#39;\\0&#39; in the last byte. Thank you anyway"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508961000, "post_id": 46940817, "comment_id": 80829115, "body": "yeah <code>open(strcat(LDTOCAT, logfile), O_RDONLY)</code> is wrong if <code>LDTOCAT</code> is a string literal. My answer is probably wrong. Deleting it."}, {"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1508961028, "post_id": 46940817, "comment_id": 80829129, "body": "Anyway the problem is before strcat ,"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508961133, "post_id": 46940817, "comment_id": 80829185, "body": "<code>printf(&quot;File found: %s\\n&quot;, strcat(logfilefullpath, logfile));</code> this is also strange. Why not doing <code>printf(&quot;File found: %s%s\\n&quot;, logfilefullpath, logfile);</code> and avoid a risky <code>strcat</code>"}, {"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1508961244, "post_id": 46940817, "comment_id": 80829236, "body": "#define LDTOCAT &quot;C:\\\\Users\\\\admin\\\\logdrstrace\\\\&quot;. Ok this is the declaretion of LDTOCAT."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508961483, "post_id": 46940817, "comment_id": 80829361, "body": "can we see the execution traces (right before it crashes) to see the sizes printed."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508961512, "post_id": 46940817, "comment_id": 80829374, "body": "are you sure <code>checkLogFileDirectory();</code> returns a valid string? can we see the code of this?"}, {"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1508962258, "post_id": 46940817, "comment_id": 80829756, "body": "the size printed are 60 and 1"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1508962323, "post_id": 46940817, "comment_id": 80829800, "body": "It is just a mistake to assume that the memory corruption occurred in this snippet.  It could have happened <i>anywhere</i> in code that ran before this.   Get rid of s_malloc and replace with calloc() so you can use standard heap corruption diagnostic tooling like crtdbg.h and Application Verifier."}, {"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1508962574, "post_id": 46940817, "comment_id": 80829922, "body": "@HansPassant you say that the corruption of heap could be before that calling? Ok i&#39;ll try to look for mistake in that direction"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508964261, "post_id": 46940817, "comment_id": 80830705, "body": "@Valgio now that you posted the new snippet, I have found a serious issue, check my edited answer."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1508964418, "post_id": 46940817, "comment_id": 80830802, "body": "@HansPassant <code>file = s_malloc(strlen(fdata.cFileName), sizeof(char)); memcpy(file, fdata.cFileName, strlen(fdata.cFileName)+1);</code> That is <i>wrong</i> for sure!"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1509030794, "post_id": 46940870, "comment_id": 80863284, "body": "Ok thank you! I&#39;ll correct it now! For the open() yes, this is another error but i have never reached this point ahahha"}, {"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1509035853, "post_id": 46940870, "comment_id": 80866424, "body": "Oh yes!! for now it works good! Thank you very much! Too much kind :)"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1508964140, "last_edit_date": 1508964140, "creation_date": 1508960637, "answer_id": 46940870, "question_id": 46940817, "link": "https://stackoverflow.com/questions/46940817/malloc-on-windows/46940870#46940870", "title": "malloc on Windows", "body": "<p>Your allocation function is okay (it's a poor man's version of <code>calloc</code> with error checking, maybe using <code>calloc</code> would save some manual code and would be more efficient)</p>\n\n<p>But in <code>checkLogFileDirectory</code> this code is wrong:</p>\n\n<pre><code>file = s_malloc(strlen(fdata.cFileName), sizeof(char));\nmemcpy(file, fdata.cFileName, strlen(fdata.cFileName)+1);\n</code></pre>\n\n<p>there's not enough space for <code>file</code> (nul-terminating char). You're missing 1 byte, which can corrupt the rest of your application by undefined behaviour (allocating 15 or 16 useless blocks sometimes makes it \"work\" because it changes the memory layout).</p>\n\n<p>Why not just do:</p>\n\n<pre><code>file = strdup(fdata.cFileName);\n</code></pre>\n\n<p>Also, as noted in comments, if you reach a further point of your program you'll have a big issue here:</p>\n\n<pre><code>int fd = open(strcat(LDTOCAT, logfile), O_RDONLY);\n</code></pre>\n\n<p><code>LDTOCAT</code> is a <em>string literal</em>, you cannot apply <code>strcat</code> on it. And even if you could, you wouldn't have enough room.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1509030895, "post_id": 46945338, "comment_id": 80863359, "body": "Ok! I&#39;ll make this change. Tahnk you very much"}, {"owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1509035785, "post_id": 46945338, "comment_id": 80866386, "body": "Yes! I modified my program as you said! Thank, it&#39;s more readable, and correct"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "edited": false, "score": 0, "creation_date": 1509048148, "post_id": 46945338, "comment_id": 80873463, "body": "Good. By the way, you don&#39;t have to worry about malloc failing to allocate 200 or 300 bytes. Unless you are running your program on a device with severe memory limitation!"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 1, "last_activity_date": 1508987957, "creation_date": 1508987957, "answer_id": 46945338, "question_id": 46940817, "link": "https://stackoverflow.com/questions/46940817/malloc-on-windows/46945338#46945338", "title": "malloc on Windows", "body": "<pre><code>HANDLE hfile = INVALID_HANDLE_VALUE;\nWIN32_FIND_DATA fdata, nullValue;\nwhile(hfile == INVALID_HANDLE_VALUE)\n{\n    hfile = FindFirstFileA(LOGDIR, &amp;nullValue);\n}\n</code></pre>\n\n<p>Note that this loop will run forever if something is wrong. Then you put the whole function in another <code>while</code> loop.</p>\n\n<p>If the function call is valid then you have success the first time, otherwise you cannot fix a problem with brute force. </p>\n\n<p>You are not closing <code>hfile</code>. You have many more errors in this section. There are plenty of examples and documentation for <code>FindFirstFile</code> you can consult. </p>\n\n<p>You already have <code>strcat</code>, you should have <code>strcpy</code> too. <code>strcpy</code> will add null terminator at the end of the string. Just use the standard <code>malloc</code> and <code>strcpy</code></p>\n\n<p>You have to <code>free</code> the <code>malloc</code> allocation, so it's simpler if your function always returns a pointer and <code>NULL</code> on failure.</p>\n\n<pre><code>char* checkLogFileDirectory()\n{\n    char* file = NULL;\n    WIN32_FIND_DATA fdata;\n    HANDLE hfile = FindFirstFile(\"C:\\\\Users\\\\admin\\\\logdrstrace\\\\*.log\", &amp;fdata);\n    if(hfile != INVALID_HANDLE_VALUE)\n    {\n        do \n        {\n            if(strcmp(fdata.cFileName, \".\") == 0 || strcmp(fdata.cFileName, \"..\") == 0)\n                continue;\n            int len = strlen(fdata.cFileName);\n            file = malloc(len + 1);\n            strcpy(file, fdata.cFileName);\n            break;\n        } while(FindNextFile(hfile, &amp;fdata));\n        FindClose(hfile);\n    }\n    return file;\n}\n\nint main()\n{\n    char *file = checkLogFileDirectory();\n    if(file) {\n        printf(\"%s\\n\", file);\n        free(file);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8831889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94a8fa1c790c3795f7eee2d1d53e416c?s=128&d=identicon&r=PG&f=1", "display_name": "Valgio", "link": "https://stackoverflow.com/users/8831889/valgio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 46940870, "answer_count": 2, "score": 0, "last_activity_date": 1509036296, "creation_date": 1508960429, "last_edit_date": 1509036296, "question_id": 46940817, "link": "https://stackoverflow.com/questions/46940817/malloc-on-windows", "title": "malloc on Windows", "body": "<p>I'm new in this forum and i hope to do it right. \nMy problem is the following:\n I'm writing a program that has this function:</p>\n\n<pre><code>void* s_malloc(int _size, int dim){\n    printf(\"%d %d\\n\", _size, dim);\n    char* pointer;\n    pointer = (char*)malloc(_size * dim);\n    printf(\"Malloc eseguita \\n\");\n    if(pointer == NULL){\n        ExitFailure(strerror(errno));\n    }else{\n        for(int i = 0; i &lt; dim * _size; i++){\n            pointer[i] = '\\0';\n        }\n        printf(\"Allocata\\n\");\n        return (void*)pointer;\n    }\n    return (void*) NULL;\n}\n</code></pre>\n\n<p>I tested this function a lot ( In the truth i wrote this function a month ago and since that moment i have used it a lot ). I'm pretty sure that the function works fine. \nHowever in this other function i use 's_malloc' and it crash</p>\n\n<pre><code>#define LDTOCAT \"C:\\\\Users\\\\admin\\\\logdrstrace\\\\\"\n\nvoid startProcess(){\n    char* logfile, *logfilefullpath;\n    int run = TRUE, lenth = 0;\n\n    /*\n    for(int i = 0; i &lt; 16; i ++){\n        s_malloc(60, 1);\n    }*/ commented\n\n    while(run){\n        logfile = checkLogFileDirectory();\n        Sleep(1000);\n        #ifdef DEBUG_MODE\n        printf(\"\\nValue returned: %s\\n\", logfile);\n        fflush(stdout);\n        #endif // DEBUG_MODE\n        if(strcmp(logfile, NOFILEFOUND) != 0){\n            run = FALSE;\n        }\n    }\n    lenth = (strlen(LDTOCAT)+strlen(logfile)+1);\n     #ifdef DEBUG_MODE\n        printf(\"Let's go forward allocating memory: size %d\\n\", lenth);\n        printf(\"LDTOCAT size: %d, logfile size: %d + 1\\n\", strlen(LDTOCAT), strlen(logfile));\n        fflush(stdout);\n        #endif // DEBUG_MODE\n\n    logfilefullpath =(char*) s_malloc(lenth, sizeof(char));\n    #ifdef DEBUG_MODE\n    printf(\"Memory created!\\n\");\n    fflush(stdout);\n    #endif // DEBUG_MODE\n    memcpy(logfilefullpath, LDTOCAT, sizeof(LDTOCAT));\n    #ifdef DEBUG_MODE\n    printf(\"Created logfilefullpath with directory: %s\\n\", logfilefullpath);\n    fflush(stdout);\n    printf(\"File found: %s\\n\", strcat(logfilefullpath, logfile));\n    #endif // DEBUG_MODE\n\n    int fd = open(strcat(LDTOCAT, logfile), O_RDONLY);\n    if(fd &lt;= OK){\n        ExitFailure(strerror(errno));\n    }\n}\n</code></pre>\n\n<p>As you can see there is a for loop at the begginning commented. Now we have three possibility:\n1) If i compile and run the program it fails in s_malloc function when it executes the command 'loginfulpath = (char*)s_malloc(lenth, sizeof(char))' it enters in s_malloc and crash when it calls the original malloc. Sometimes the errno varible is setted on \"Not enough memory\" but sometimes crashes and stop. \n2) if i decomment the loop at the begginning and the stop condition is 'i&lt;15' it crashes like in the point one\n3)if i put the stop condition 'i&lt;16', magically, it works fine.</p>\n\n<p>there is a third function that opens a directory and looks for a file,\ninfact as you can see in the code it avoids the first 2 files found becouse\nthey are . and ..</p>\n\n<pre><code>#define NOFILEFOUND \"Nothing\"\n\n char* checkLogFileDirectory(){\n HANDLE hfile = INVALID_HANDLE_VALUE;\n WIN32_FIND_DATA fdata, nullValue;\n char* file = NULL;\n int counter=0;\n while(hfile == INVALID_HANDLE_VALUE){\n hfile = FindFirstFileA(LOGDIR, &amp;nullValue);\n }\n #ifdef DEBUG_MODE\n printf(\"-FileFound: %s\\n\", nullValue.cFileName);\n#endif // DEBUG_MODE\n while(FindNextFile(hfile, &amp;fdata) &amp;&amp; counter != 2){\n        #ifdef DEBUG_MODE\n        printf(\"-File found: %s\\n\", fdata.cFileName);\n        #endif // DEBUG_MODE\n    if(counter == 1){\n         #ifdef DEBUG_MODE\n        printf(\"Third file it's my file\\n\");\n        #endif // DEBUG_MODE\n        file = s_malloc(strlen(fdata.cFileName), sizeof(char));\n        memcpy(file, fdata.cFileName, strlen(fdata.cFileName)+1);\n        if(file == NULL){\n            ExitFailure(\"Error reading file\");\n        }\n        file[strlen(fdata.cFileName)] = '\\0';\n\n    }\n    counter ++;\n }\n #ifdef DEBUG_MODE\n printf(\"\\n\\=&gt;File selected: %s\", file==NULL | file == \"\" ? NOFILEFOUND:file);\n #endif // DEBUG_MODE\n return counter == 2? file : NOFILEFOUND;\n}\n</code></pre>\n\n<p>NB: I printed the vaule of any varibles and they were correct, \nI'm on Virtual machine with vmware workstation.\nI'm sorry for my english i hope you will able to understand it</p>\n\n<p>This is the output when it crashes in cases 1 or 2</p>\n\n<pre><code>-FileFound: .\n-File found: ..\n-File found: drstrace.calc.exe.00532.0000.log\nThird file it's my file\n32 1\nMalloc eseguita\nAllocata\n\n=&gt;File selected: drstrace.calc.exe.00532.0000.log\nValue returned: drstrace.calc.exe.00532.0000.log\nLet's go forward allocating memory: size 60\nLDTOCAT size: 27, logfile size: 32 + 1\n60 1\nMalloc eseguita\nError: Not enough space!!\n</code></pre>\n\n<p>Thank you!! </p>\n"}, {"tags": ["c", "memory", "memory-management"], "comments": [{"owner": {"reputation": 858, "user_id": 3750062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097546a539804f0e62654904c546831a?s=128&d=identicon&r=PG&f=1", "display_name": "HeroicKatora", "link": "https://stackoverflow.com/users/3750062/heroickatora"}, "edited": false, "score": 0, "creation_date": 1508959146, "post_id": 46940186, "comment_id": 80828104, "body": "Have you looked at the assembly? The strcpy call already seems like undefined behaviour, as you copy 2 characters into a 1 character long buffer. The compiler might simply optimize this into an infinite loop."}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1508960685, "post_id": 46940186, "comment_id": 80828934, "body": "Also, <code>++a_heap_pointer</code> followed immediately by <code>a_heap_pointer = ...</code> makes the increment a no-op, and so could be optimized away completely, depending on compiler flags - it&#39;s code that has no side effects."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508958973, "post_id": 46940366, "comment_id": 80828008, "body": "Is there anyway to start allocating memory somewhere at the top of the heap so I won&#39;t have to wait as long for it to crash?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508959040, "post_id": 46940366, "comment_id": 80828050, "body": "No. But why not use larger chunks? A megabyte at a time might be reasonable."}, {"owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508959175, "post_id": 46940366, "comment_id": 80828129, "body": "The assignment said in increments of 1 byte. Is there anyway to find out the last address in the heap? What I&#39;m suppose to do is when the program crashes, write down that address that caused the seg fault."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "reply_to_user": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "edited": false, "score": 0, "creation_date": 1508959507, "post_id": 46940366, "comment_id": 80828311, "body": "There is no standard mechanism in C, but your operating system and C environment might have one. Or you could try it first with blocks of one megabyte, and then after that program crashes, try a new one which first allocates as many megabytes as you could successfully allocate, and then goes byte by byte."}], "tags": [], "owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1508958998, "last_edit_date": 1508958998, "creation_date": 1508958760, "answer_id": 46940366, "question_id": 46940186, "link": "https://stackoverflow.com/questions/46940186/heapcrash-seg-fault-by-increment-a-pointer-that-points-to-heap/46940366#46940366", "title": "Heapcrash - seg fault by increment a pointer that points to heap", "body": "<p>Printing on the screen is very slow compared to in-memory operations, so if you remove the printfs, you will probably not have to wait as long.</p>\n\n<p>But modern computers have a lot of memory, and when you take into account swap space on disk it can be many hundreds of gigabytes. Prepare to wait for a long time.</p>\n\n<p>Also, in C, strings are NUL-terminated, so the strings \"a\" and \"b\" both require two chars storage. Therefore your calls to <code>strcpy</code> overwrite memory that may be used for other things, so your program's behaviour is undefined. Anything can happen, for example that it gets stuck and never terminates.</p>\n\n<p>And a side note: I'm not sure what effect you expect <code>++a_heap_pointer;</code> to have? You increment that pointer, but then you immediately replace the incremented value by the return value from <code>malloc</code>, so the result of the increment operation will never be used.</p>\n"}], "owner": {"reputation": 35, "user_id": 8595552, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/1864164660576213/picture?type=large", "display_name": "Trevor Good", "link": "https://stackoverflow.com/users/8595552/trevor-good"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508958998, "creation_date": 1508958160, "question_id": 46940186, "link": "https://stackoverflow.com/questions/46940186/heapcrash-seg-fault-by-increment-a-pointer-that-points-to-heap", "title": "Heapcrash - seg fault by increment a pointer that points to heap", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nvoid foo() {\n\n    char *a_heap_pointer; \n    a_heap_pointer = (char*)malloc(1 * sizeof(char));\n    strcpy(a_heap_pointer, \"a\");  \n    printf(\"%s\\n\", a_heap_pointer);\n\n    while (1){\n      ++a_heap_pointer; \n\n      a_heap_pointer = (char*)malloc(1 * sizeof(char));\n      strcpy(a_heap_pointer, \"b\");  \n      printf(\"%s\\n\", a_heap_pointer);\n    }\n}\n\nint main (void) {\n  foo(); \n  return 0; \n}\n</code></pre>\n\n<p>Hi there, I'm trying to make my C program cause a segmentation fault by incrementing a pointer that points at the heap, by 1 byte, repeatedly, until the program crashes. However, as my code stands now it just runs indefinitely? I presume because the heap is so large that it would take awhile for it to run out. How can I make my program break the heap? </p>\n"}, {"tags": ["c", "memory-management", "dynamic", "memory-leaks", "malloc"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1508958162, "post_id": 46940151, "comment_id": 80827526, "body": "<code>free(line);         return line;</code> that <i>is</i> undefined behaviour. Don&#39;t free your buffer. Leave it to the caller when it&#39;s not used anymore."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508958519, "post_id": 46940151, "comment_id": 80827746, "body": "sizeof doesn&#39;t do what you think it does. (And I have no idea what you think sizeof(capacity)   does.)"}, {"owner": {"reputation": 9, "user_id": 8821475, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d80e56a7bed8f2cbb850dc4ad6669f1?s=128&d=identicon&r=PG&f=1", "display_name": "compolo", "link": "https://stackoverflow.com/users/8821475/compolo"}, "edited": false, "score": 0, "creation_date": 1508958535, "post_id": 46940151, "comment_id": 80827757, "body": "If I do not return line, then I will not get my line."}, {"owner": {"reputation": 9, "user_id": 8821475, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d80e56a7bed8f2cbb850dc4ad6669f1?s=128&d=identicon&r=PG&f=1", "display_name": "compolo", "link": "https://stackoverflow.com/users/8821475/compolo"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508958586, "post_id": 46940151, "comment_id": 80827791, "body": "I know @rici, It is an idea of what I am trying to do. If buffer reaches capacity, double buffer space."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1508958840, "post_id": 46940151, "comment_id": 80827927, "body": "So keep track of how much you have used. Posix provides <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\"><code>getline</code></a> and there are <a href=\"https://gist.github.com/ingramj/1105106\" rel=\"nofollow noreferrer\">sample implementations</a> you can study."}, {"owner": {"reputation": 9, "user_id": 8821475, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d80e56a7bed8f2cbb850dc4ad6669f1?s=128&d=identicon&r=PG&f=1", "display_name": "compolo", "link": "https://stackoverflow.com/users/8821475/compolo"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508960562, "post_id": 46940151, "comment_id": 80828874, "body": "@rici this has a different function definition than what I am going for"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1508974464, "post_id": 46940151, "comment_id": 80834629, "body": "You don&#39;t document your requirements so I&#39;ll take your word for it. However, it seemed likely that the example code, which both reads dara and reallocates a buffer, would have something of interest. If not, I apologise for the distraction."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8821475, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d80e56a7bed8f2cbb850dc4ad6669f1?s=128&d=identicon&r=PG&f=1", "display_name": "compolo", "link": "https://stackoverflow.com/users/8821475/compolo"}, "edited": false, "score": 0, "creation_date": 1508976965, "post_id": 46941492, "comment_id": 80835274, "body": "My problem is, I use a similar approach except I use fgetc to pull from file stream. If I call my program as ./program &lt; input.txt, and it reads until EOF, I am stuck in an infinite loop."}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "reply_to_user": {"reputation": 9, "user_id": 8821475, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d80e56a7bed8f2cbb850dc4ad6669f1?s=128&d=identicon&r=PG&f=1", "display_name": "compolo", "link": "https://stackoverflow.com/users/8821475/compolo"}, "edited": false, "score": 0, "creation_date": 1509006753, "post_id": 46941492, "comment_id": 80845975, "body": "when you do &quot;./program &lt; input.txt&quot; you &#39;re changing the input stream, the above code should be fine,"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509015998, "post_id": 46941492, "comment_id": 80852294, "body": "In order to compare with <code>EOF</code> it is necessary to use <code>int</code> for <code>c</code>, not <code>char</code>. In addition, this program may cause buffer overrun."}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509026586, "post_id": 46941492, "comment_id": 80860100, "body": "@BLUEPIXY getchar() returns an int so c here holds the int/ASCII value of any character read why won&#39;t it work for EOF? Also regarding buffer overrun can you please explain."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509027077, "post_id": 46941492, "comment_id": 80860460, "body": "1) <code>char</code> is <code>signed char</code> or <code>unsigned char</code>. Since <code>EOF</code> is usually implemented with negative numbers(E.g.<code>-1</code>), it does not match when implemented with <code>unsigned char</code>."}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "edited": false, "score": 0, "creation_date": 1509027310, "post_id": 46941492, "comment_id": 80860666, "body": "thanks for replying when we say char its signed by default right? So it&#39;s good coding practice to mention explicitly whether it&#39;s signed or unsigned right. Also regarding buffer overrun I don&#39;t understand can you please explain."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1509027434, "post_id": 46941492, "comment_id": 80860772, "body": "2) E.g Since the <code>if( i == size){</code> is not established at the input of the ninth letter, it is not expanded. At the end of this loop <code>i</code> is incremented to <code>10</code>. If a newline is entered at the beginning of the next loop, it exits the loop.  And <code>str[i] = &#39;\\0&#39;;</code> is executed, but since the <code>i</code> is <code>10</code>(So <code>str[10] = &#39;\\0&#39;;</code>), it is beyond the reserved buffer."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509027566, "post_id": 46941492, "comment_id": 80860890, "body": "<i>we say char its signed by default right?</i> No, it is implementation dependent. It is not necessarily signed."}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509031062, "post_id": 46941492, "comment_id": 80863457, "body": "@BLUEPIXY thanks, I still don&#39;t get why I didn&#39;t get a segfault or runtime error when I gave input string as helloworld :P thanks for the help I will update the code."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509038541, "post_id": 46941492, "comment_id": 80867948, "body": "1-2) <code>getchar()</code> returns an <code>int</code>. The breakdown is <code>0</code>-<code>255</code>(a character) and <code>-1</code>(<code>EOF</code>). When <code>signed char</code> is used as a receiver, This time, since it is the same as 255(<code>&#39;\\xFF&#39;</code> and <code>-1</code>(<code>EOF</code>)), it malfunctions. In other word, it is determined that the character <code>&#39;\\xFF&#39;</code>(which may not be used much  but it is not <code>EOF</code>) is <code>EOF</code>. Therefore, you should use <code>int</code> as mentioned at the beginning."}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "edited": false, "score": 0, "creation_date": 1509045975, "post_id": 46941492, "comment_id": 80872135, "body": "store the int in char array?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509081816, "post_id": 46941492, "comment_id": 80883353, "body": "After the check of <code>EOF</code> is done, it is within the range that can be expressed with <code>char</code>, so there is no problem."}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "edited": false, "score": 0, "creation_date": 1509087575, "post_id": 46941492, "comment_id": 80885715, "body": "So use signed or unsigned char in this situation? I saw a few answers which say if you&#39;re reading from a jpeg or some other file tile and doing &quot;raw&quot; reads then using unsigned is correct as we are storing the binary data .In this case using unsigned wrong as we are storing an int value directly. BTW really appreciate you spending time helping me on this thanks a ton! :)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1509118323, "post_id": 46941492, "comment_id": 80904787, "body": "<i>So use signed or unsigned char in this situation?</i> In the case where comparison with <code>EOF</code> is necessary, the receiver type of <code>getchar</code>(<code>fgetc</code> and <code>getc</code>)  needs to be <code>int</code> as already explained. If you don&#39;t need to compare with <code>EOF</code>, you don&#39;t necessarily need to use <code>int</code>."}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "edited": false, "score": 0, "creation_date": 1509172015, "post_id": 46941492, "comment_id": 80920655, "body": "@BLUEPIXYThanks a lot. :)"}], "tags": [], "owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "is_accepted": false, "score": 0, "last_activity_date": 1509087314, "last_edit_date": 1509087314, "creation_date": 1508963215, "answer_id": 46941492, "question_id": 46940151, "link": "https://stackoverflow.com/questions/46940151/reading-in-a-line-from-file-or-stdin-dynamically/46941492#46941492", "title": "Reading in a line from file or stdin dynamically", "body": "<p>Here is an example to read a line and store it in a Character array.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void) {\n    signed char *str;\n    int c;\n    int i;\n    int size = 10;\n    str = malloc(size*sizeof(char));\n    for(i=0;(c=getchar()) !='\\n' &amp;&amp; c != EOF;++i){\n        if( i == size){\n            size = 2*size;\n            str = realloc(str, size*sizeof(char));\n            if(str == NULL){\n                printf(\"Error Unable to Grow String! :(\");\n                exit(-1);\n            }\n        } \n        str[i] = c;\n    }\n    if(i == size){\n        str = realloc(str, (size+1)*sizeof(char));\n        if(str == NULL){\n            printf(\"Error Unable to Grow String! :(\");\n            exit(-1);\n        }\n\n    }\n    str[i] = '\\0';\n    printf(\"My String : %s\", str);\n    return 0;\n}\n</code></pre>\n\n<p>The array is resized to twice it's original size if current array can't hold the characters read from input.</p>\n"}], "owner": {"reputation": 9, "user_id": 8821475, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d80e56a7bed8f2cbb850dc4ad6669f1?s=128&d=identicon&r=PG&f=1", "display_name": "compolo", "link": "https://stackoverflow.com/users/8821475/compolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 872, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509087314, "creation_date": 1508958025, "question_id": 46940151, "link": "https://stackoverflow.com/questions/46940151/reading-in-a-line-from-file-or-stdin-dynamically", "title": "Reading in a line from file or stdin dynamically", "body": "<p>I am posed with a situation where my function does exactly what I want except handle higher amounts of input.</p>\n\n<p>I initially thought to process each character one by one but was running into problems doing this. So <code>fscanf</code> not only does what I want it to do but it is essential in reading in only one line. I noticed, I cannot reallocate space for bigger array this way though. I have tried using format specifiers i.e. <code>%*s</code> to include a specific amount of buffer space before hand but this still does not work.</p>\n\n<p>I have noticed also, I would have no way of knowing the size of the string I am reading in.</p>\n\n<p>Here is my attempt and thoughts:</p>\n\n<pre><code>#define LINE_MAX 1000\n\nchar* getline(FILE* inputStream)\n{\n    int capacity = LINE_MAX;\n    char* line = malloc(capacity * sizeof(char));\n    int ch;\n\n    /* if (sizeof(capacity) == sizeof(line)) { // Not a valid comparison? Too late?\n        capacity *= 2;\n        line = realloc(line, capacity * sizeof(line));\n    } */\n\n    if (fscanf(stream, \"%[^\\n]s\", line) == 1) {\n        ch = fgetc(inputStream);\n        if (ch != '\\n' &amp;&amp; ch != EOF) {\n            fscanf(inputStream, \"%*[^\\n]\");\n            fscanf(inputStream, \"%*c\");\n        }\n        free(line);\n        return line;\n    }\n    free(line);\n    return NULL;\n}\n</code></pre>\n\n<p>I am new to memory allocation in general but I feel as though I had a good idea of what to do here. Turns out I was wrong.</p>\n"}, {"tags": ["c", "struct", "makefile", "compilation", "include"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1508957747, "post_id": 46940025, "comment_id": 80827252, "body": "<code>.h</code> files are not compiled. And &quot;doesn&#39;t work&quot; is not a valid problem description."}, {"owner": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 2, "creation_date": 1508957888, "post_id": 46940025, "comment_id": 80827337, "body": "You have two rules for search.o, one of those should be search_tree.o"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1508957972, "post_id": 46940025, "comment_id": 80827394, "body": "you could just type: <code>gcc -o myprog *.c</code> if all your files are in the same dir"}, {"owner": {"reputation": 25, "user_id": 5381363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8AZBx.png?s=128&g=1", "display_name": "Trojax", "link": "https://stackoverflow.com/users/5381363/trojax"}, "reply_to_user": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 0, "creation_date": 1508957981, "post_id": 46940025, "comment_id": 80827400, "body": "@odin yes, my bad while copying the code, im editing it now."}, {"owner": {"reputation": 25, "user_id": 5381363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8AZBx.png?s=128&g=1", "display_name": "Trojax", "link": "https://stackoverflow.com/users/5381363/trojax"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1508958603, "post_id": 46940025, "comment_id": 80827802, "body": "@EugeneSh. Im not compiling any .h files in my code.Also, i mention what kind of errors i get."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1508959736, "post_id": 46940025, "comment_id": 80828437, "body": "how are you even sure it&#39;s a makefile problem? Have you tried compiling it all manually? If it&#39;s complaining it can&#39;t find structs it sounds like to me you&#39;re forgetting a <code>#include</code> somewhere"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1508960216, "post_id": 46940025, "comment_id": 80828660, "body": "You might want to add <code>-I.</code> to your <code>gcc</code> command."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5381363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8AZBx.png?s=128&g=1", "display_name": "Trojax", "link": "https://stackoverflow.com/users/5381363/trojax"}, "edited": false, "score": 0, "creation_date": 1511868354, "post_id": 46941104, "comment_id": 82017217, "body": "Great answer, lots of help.Thanks!"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 1, "last_activity_date": 1508961583, "creation_date": 1508961583, "answer_id": 46941104, "question_id": 46940025, "link": "https://stackoverflow.com/questions/46940025/compiling-multiple-c-and-h-files/46941104#46941104", "title": "Compiling multiple .c and .h files", "body": "<p>You do not need to explicitly create a rule for each file - <code>make</code> has a number of <a href=\"https://www.gnu.org/software/make/manual/make.html#Using-Implicit\" rel=\"nofollow noreferrer\">implicit rules</a> that already do 90% of what you need.  Your makefile can be as simple as</p>\n\n<pre><code>CC=gcc\nCFLAGS=-std=c11 -pedantic -Wall -Werror # my usual compiler flags\nLDFLAGS=   # specify additional libraries and library search paths here\n\nmyprog: main.o search.o search_table.o list.o\n        $(CC) -o $@ $(LDFLAGS) $?\n\nclean:\n        rm -rf myprog *.o \n</code></pre>\n\n<p>There's already an implicit rule to build <code>.o</code> files from <code>.c</code> files, so you don't need to create your own unless you want to override the default, which is</p>\n\n<pre><code>%.o : %.c\n        $(CC) -c $(CFLAGS) $(CPPFLAGS) $&lt; -o $@\n</code></pre>\n\n<p>You do need the explicit <code>myprog</code> rule to link the object files into the executable since the executable name doesn't match any of the source or object file names.  <code>$@</code> expands to the target name, <code>myprog</code>, and <code>$?</code> expands to the list of prerequisites for the target (i.e., the object files).  <code>$&lt;</code> expands to the first name in the list of prerequisites.</p>\n\n<p>This doesn't cover header file dependencies, but your project is small enough for that to not be too much of an issue.  However, give <a href=\"http://scottmcpeak.com/autodepend/autodepend.html\" rel=\"nofollow noreferrer\">this article</a> a read for one way to handle that.  </p>\n"}, {"tags": [], "owner": {"reputation": 13458, "user_id": 1773798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4Ljqn.png?s=128&g=1", "display_name": "Renaud Pacalet", "link": "https://stackoverflow.com/users/1773798/renaud-pacalet"}, "is_accepted": false, "score": 1, "last_activity_date": 1509005063, "creation_date": 1509005063, "answer_id": 46948879, "question_id": 46940025, "link": "https://stackoverflow.com/questions/46940025/compiling-multiple-c-and-h-files/46948879#46948879", "title": "Compiling multiple .c and .h files", "body": "<p>Similar to John's proposal with a small bug fixed (<code>$^</code> automatic variable instead of <code>$?</code>), a bit more automation (<code>wildcard</code> to search for the C source files) and with dependencies added for the header files (<code>$(OBJS): %.o: %.h</code> static pattern rule):</p>\n\n<pre><code>EXEC := myprog\nOBJS := $(patsubst %.c,%.o,$(wildcard *.c))\n\n$(EXEC): $(OBJS)\n    $(CC) -o $@ $(LDFLAGS) $^\n\n$(OBJS): %.o: %.h\n\nclean:\n    rm -f $(EXEC) $(OBJS)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5381363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8AZBx.png?s=128&g=1", "display_name": "Trojax", "link": "https://stackoverflow.com/users/5381363/trojax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 46941104, "answer_count": 2, "score": 0, "last_activity_date": 1509005063, "creation_date": 1508957539, "last_edit_date": 1508958017, "question_id": 46940025, "link": "https://stackoverflow.com/questions/46940025/compiling-multiple-c-and-h-files", "title": "Compiling multiple .c and .h files", "body": "<p>My program is divided into 6 files:</p>\n\n<ol>\n<li>list.h (Containing basic list struct info and function prototypes)</li>\n<li>list.c (Containg the implementation of the above)</li>\n<li>search_tree.h (Containing basic tree struct info and function prototypes)</li>\n<li>search_tree.c (Containing the implementation of the above, and includes list.h)</li>\n<li>search.h ( again, prototypes of functions )</li>\n<li>search.c (implementation of the aobve functions)</li>\n<li>main.c ( Requires all of the above in order to run )</li>\n</ol>\n\n<p>I cant seem to figure out what the makefile should be, i've tried the one below but it doesnt work and i get errors of structs and functions not implemented.</p>\n\n<pre><code>myprog: list.o search_tree.o search.o main.o\n    gcc -o myprog list.o search_tree.o search.o main.o\n\nlist.o: list.c list.h\n    gcc -c list.c\n\nsearch_tree.o: search_tree.c search_tree.h\n    gcc -c search_tree.c\n\nsearch.o: search.c search.h\n    gcc -c search.c\n\nmain.o: search.h search_tree.h list.h hash_table.h\n   gcc -c main.c\n</code></pre>\n"}, {"tags": ["c", "linux", "file", "sed"], "comments": [{"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1508957133, "post_id": 46939901, "comment_id": 80826926, "body": "Open the file, move the cursor to the location, change and save. It works the same way as sed except it does not actually load the whole file."}, {"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1508957171, "post_id": 46939901, "comment_id": 80826952, "body": "Yes just open the file, use seek to place yourself at the value and then write the new one."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508957323, "post_id": 46939901, "comment_id": 80827037, "body": "...and if the new data is not the same length as the previous data...?"}, {"owner": {"reputation": 5, "user_id": 6609378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1930b0ad62290ff08e0035bce98ead25?s=128&d=identicon&r=PG&f=1", "display_name": "cmlink", "link": "https://stackoverflow.com/users/6609378/cmlink"}, "edited": false, "score": 0, "creation_date": 1508957463, "post_id": 46939901, "comment_id": 80827109, "body": "Well the data in this case happens to be the same length, but I imagine reading and rewriting the entire file is the only solution for data of a different size."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1508957524, "post_id": 46939901, "comment_id": 80827136, "body": "Technically, you could rewrite the <i>remainder</i> of the file instead of the whole file. But that becomes complicated. And for small files, I doubt it would be any faster."}, {"owner": {"reputation": 5, "user_id": 6609378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1930b0ad62290ff08e0035bce98ead25?s=128&d=identicon&r=PG&f=1", "display_name": "cmlink", "link": "https://stackoverflow.com/users/6609378/cmlink"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508957858, "post_id": 46939901, "comment_id": 80827314, "body": "@Weather Vane in this case, yes I always know exactly where in the file the data will be located.  But if there were variable length data occurring before it in the file, then a read would be necessary to locate the data to be changed."}], "answers": [{"tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1508958118, "last_edit_date": 1508958118, "creation_date": 1508957735, "answer_id": 46940072, "question_id": 46939901, "link": "https://stackoverflow.com/questions/46939901/editing-single-value-in-file-in-c-efficiently/46940072#46940072", "title": "Editing single value in file in C efficiently", "body": "<p>Working with files is like working with arrays in the sense that one can't truly before insertions and deletions. Insertions and deletions require shifting (copying) the rest of the file/array. Only replacing elements is possible (by opening the file for reading and writing, and using <code>seek</code>).</p>\n\n<p>Reading and writing the entire file is quite efficient, especially for tiny files. If the memory usage isn't an issue, that's the approach I would take.</p>\n\n<p>Other solutions might be better in specific circumstances, but the approach you describe is generally the best.</p>\n"}], "owner": {"reputation": 5, "user_id": 6609378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1930b0ad62290ff08e0035bce98ead25?s=128&d=identicon&r=PG&f=1", "display_name": "cmlink", "link": "https://stackoverflow.com/users/6609378/cmlink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 46940072, "answer_count": 1, "score": 0, "last_activity_date": 1508958118, "creation_date": 1508957032, "question_id": 46939901, "link": "https://stackoverflow.com/questions/46939901/editing-single-value-in-file-in-c-efficiently", "title": "Editing single value in file in C efficiently", "body": "<p>I have a C program that currently edits a single value in a parameter file by using sed through a system call.  I'd like to change the program to use the C file libraries to edit this value, but the only way I know how to do this is by reading in the entire file, changing the value, and rewriting the file.  Is there a more efficient way to do this?  The program is intended for use on an embedded device so I'd like to use the most efficient solution possible.</p>\n"}, {"tags": ["c", "locale", "setlocale"], "comments": [{"owner": {"reputation": 984, "user_id": 129031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80f97305f07eb9f8a34d33fbfaf7700?s=128&d=identicon&r=PG", "display_name": "A.Rashad", "link": "https://stackoverflow.com/users/129031/a-rashad"}, "edited": false, "score": 1, "creation_date": 1508957138, "post_id": 46939891, "comment_id": 80826929, "body": "it seems to be related to currency, date and other region specific input interpretation"}, {"owner": {"reputation": 984, "user_id": 129031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80f97305f07eb9f8a34d33fbfaf7700?s=128&d=identicon&r=PG", "display_name": "A.Rashad", "link": "https://stackoverflow.com/users/129031/a-rashad"}, "edited": false, "score": 0, "creation_date": 1508957261, "post_id": 46939891, "comment_id": 80827002, "body": "from <a href=\"http://www.cplusplus.com/reference/clocale/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/clocale</a> The &quot;C&quot; locale is the minimal locale. It is a rather neutral locale which has the same settings across all systems and compilers, and therefore the exact results of a program using this locale are predictable. This is the locale used by default on all C programs"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 7256967, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/86c21dc3682df7403331044314ed5da4?s=128&d=identicon&r=PG&f=1", "display_name": "Lilli", "link": "https://stackoverflow.com/users/7256967/lilli"}, "edited": false, "score": 0, "creation_date": 1508957430, "post_id": 46939976, "comment_id": 80827092, "body": "In what context and how should it be used?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1508958198, "post_id": 46939976, "comment_id": 80827558, "body": "When you want your program to execute in a place that uses a different convention.."}], "tags": [], "owner": {"reputation": 2741, "user_id": 2036161, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ba65c6994b3945d68ea848b7d8a27253?s=128&d=identicon&r=PG", "display_name": "ventsyv", "link": "https://stackoverflow.com/users/2036161/ventsyv"}, "is_accepted": false, "score": 0, "last_activity_date": 1508957461, "last_edit_date": 1508957461, "creation_date": 1508957325, "answer_id": 46939976, "question_id": 46939891, "link": "https://stackoverflow.com/questions/46939891/what-is-setlocale-for/46939976#46939976", "title": "What is setlocale() for?", "body": "<p>It's locale specific settings. For example, in some countries comma is used for decimal separator, in others, it's dot. In the US 22,001 is often understood to be 22 thousand and 1, in some European countries that's 22 point 001. </p>\n\n<p>Dates can be given in DD/MM/YYYYY (most of Europe) or MM/DD/YYYY (in the US) format and so forth. </p>\n"}, {"comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 0, "creation_date": 1580736680, "post_id": 46940175, "comment_id": 106184173, "body": "question: when I try <code>LC_ALL=fr_FR.UTF-8 ls &#47;tmp&#47;nonexisting</code> i get mixed French and English message: <code>ls: impossible d&#39;acc&#233;der &#224; &#39;&#47;tmp&#47;nonexisting&#39;: No such file or directory</code>. Is there a way I can make everything French like in the answer? My bash version is 5.0.11. Any help would be appreciated."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1508958780, "last_edit_date": 1508958780, "creation_date": 1508958106, "answer_id": 46940175, "question_id": 46939891, "link": "https://stackoverflow.com/questions/46939891/what-is-setlocale-for/46940175#46940175", "title": "What is setlocale() for?", "body": "<p>Read on Linux  the <a href=\"http://man7.org/linux/man-pages/man3/setlocale.3.html\" rel=\"nofollow noreferrer\">setlocale(3)</a> and <a href=\"http://man7.org/linux/man-pages/man7/locale.7.html\" rel=\"nofollow noreferrer\">locale(7)</a> man pages. Read also the <a href=\"https://en.wikipedia.org/wiki/Internationalization_and_localization\" rel=\"nofollow noreferrer\">internationalization and localization</a> wikipage. </p>\n\n<p>On Debian and Ubuntu, you might run (as root) the <code>dpkg-reconfigure locales</code> to add more locales.</p>\n\n<p>Then you could set your <code>LANG</code> (and <code>LC_ALL</code> and others) environment variables (see <a href=\"http://man7.org/linux/man-pages/man7/environ.7.html\" rel=\"nofollow noreferrer\">environ(7)</a>) to change the language of message.</p>\n\n<p>For example, I have the French UTF-8 locale installed. If I do</p>\n\n<pre><code>% env LC_ALL=fr_FR.UTF-8 ls /tmp/nonexisting \n</code></pre>\n\n<p>I'm getting the error message in French:</p>\n\n<pre><code>ls: impossible d'acc\u00e9der \u00e0 '/tmp/nonexisting': Aucun fichier ou dossier de ce type\n</code></pre>\n\n<p>If I use the <code>C</code>  locale (which is the default one), it is in  English:</p>\n\n<pre><code>% env LC_ALL=C ls /tmp/nonexisting\nls: cannot access '/tmp/nonexisting': No such file or directory\n</code></pre>\n\n<p>As a rule of thumb, you want to <code>export LC_ALL=C LANG=C</code> before running commands that you exhibit on this forum (e.g. because you don't want to show error messages from the compiler or the shell in French).</p>\n\n<p>If you are <em>coding</em> a program which you want to internationalize (ez.g. to be easily usable by people understanding only French or Chinese), you need at least to use <a href=\"http://man7.org/linux/man-pages/man3/gettext.3.html\" rel=\"nofollow noreferrer\">gettext(3)</a> (notably for <code>printf</code>  format strings!) and perhaps <a href=\"http://man7.org/linux/man-pages/man3/textdomain.3.html\" rel=\"nofollow noreferrer\">textdomain(3)</a> and you'll need to use <a href=\"http://man7.org/linux/man-pages/man1/msgfmt.1.html\" rel=\"nofollow noreferrer\">msgfmt(1)</a> for dealing with message catalogs. Of course you'll need to build catalogs of translated messages.</p>\n\n<p>Localization also influences how numbers are parsed and printed (with a comma or a dot separating the thousands or the decimal digits) and how money and time get printed and parsed (e.g. <a href=\"http://man7.org/linux/man-pages/man3/strftime.3.html\" rel=\"nofollow noreferrer\">strftime(3)</a>).</p>\n"}], "owner": {"reputation": 91, "user_id": 7256967, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/86c21dc3682df7403331044314ed5da4?s=128&d=identicon&r=PG&f=1", "display_name": "Lilli", "link": "https://stackoverflow.com/users/7256967/lilli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1607, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1508958780, "creation_date": 1508957004, "last_edit_date": 1508958296, "question_id": 46939891, "link": "https://stackoverflow.com/questions/46939891/what-is-setlocale-for", "title": "What is setlocale() for?", "body": "<p>I'm studying c++ and I have found this function of C++ library:\n<code>setlocale</code> (<a href=\"http://www.cplusplus.com/reference/clocale/setlocale/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/clocale/setlocale/</a>) but I'm not able to understand what is it for.</p>\n\n<p>I have used on Ubuntu:</p>\n\n<p><code>printf (\"Locale is: %s\\n\", setlocale(LC_ALL,\"\") );</code></p>\n\n<p>it prints <code>Locale is: en_US.UTF-8</code></p>\n\n<p>but on macOs it prints:</p>\n\n<p><code>Locale is: C</code> what does means this C?</p>\n\n<p>In what context and how should it be used?</p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1508957324, "post_id": 46939890, "comment_id": 80827038, "body": "Not really following your question. Your code is fine. Your global variable ossList[] is returned from the function."}, {"owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 1, "creation_date": 1508957658, "post_id": 46939890, "comment_id": 80827207, "body": "Yes it&#39;s returned. But return to a pointer. I don&#39;t get the magic of when my initialized pointer in top.c becomes an array"}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1508958427, "post_id": 46939890, "comment_id": 80827697, "body": "Are you confused about how arrays are converted to pointer?"}, {"owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1508958587, "post_id": 46939890, "comment_id": 80827792, "body": "Exactly. As mentioned I&#39;m used to pointers to arrays, where e.g pointer+k points to element k (or k+1..whatever) but confused about array converted to pointer array-ish... Which are accessed by element index"}], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "edited": false, "score": 1, "creation_date": 1508960318, "post_id": 46940477, "comment_id": 80828722, "body": "This was it. &quot; <code>pointer[i]</code> is equivalent to incrementing a pointer by <code>i</code> (i.e. <code>pointer+i</code> )&quot;. Probably too simple LOL."}, {"owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "edited": false, "score": 0, "creation_date": 1508962934, "post_id": 46940477, "comment_id": 80830094, "body": "I hope you got your points before question got closed LMAO"}, {"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "reply_to_user": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "edited": false, "score": 0, "creation_date": 1508963168, "post_id": 46940477, "comment_id": 80830213, "body": "Haha we&#39;re good, as long as you&#39;ve understood the point here or in the duplicate link"}, {"owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "edited": false, "score": 0, "creation_date": 1508964139, "post_id": 46940477, "comment_id": 80830629, "body": "The point here was crystal"}], "tags": [], "owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "is_accepted": true, "score": 1, "last_activity_date": 1508959148, "creation_date": 1508959148, "answer_id": 46940477, "question_id": 46939890, "link": "https://stackoverflow.com/questions/46939890/struct-array-assigned-to-pointer-whats-happening/46940477#46940477", "title": "Struct array assigned to pointer. What&#39;s happening?", "body": "<p>The trick is that accessing <code>ossList</code> (as in <code>*ossListGet = ossList;</code>) gives you a pointer to only the first element of <code>ossList[10]</code>; your initialized pointer in Top.c doesn't \"become an array\", but ends up pointing to <code>ossList[0]</code>.</p>\n\n<p>Since array indexing using <code>pointer[i]</code> is equivalent to incrementing a pointer by <code>i</code> (i.e. <code>pointer+i</code>), you can access the other elements of <code>ossList[10]</code> by simply incrementing the pointer to the first element (<code>ossList+k</code>) or, ideally, using <code>[]</code> (<code>ossList[k]</code>).</p>\n"}], "owner": {"reputation": 809, "user_id": 2923755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-eUSbCnXkgow/AAAAAAAAAAI/AAAAAAAAArk/QX5YTDngfcA/photo.jpg?sz=128", "display_name": "niCk cAMel", "link": "https://stackoverflow.com/users/2923755/nick-camel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "closed_date": 1508962563, "accepted_answer_id": 46940477, "answer_count": 1, "score": 1, "last_activity_date": 1508960916, "creation_date": 1508957002, "last_edit_date": 1508960916, "question_id": 46939890, "link": "https://stackoverflow.com/questions/46939890/struct-array-assigned-to-pointer-whats-happening", "closed_reason": "Duplicate", "title": "Struct array assigned to pointer. What&#39;s happening?", "body": "<p>EDIT:\n<strong>What the difference between accessing an element in a array pointer via index <code>pointer[i]</code> vs. via pointer incrementation <code>pointer+1</code>.</strong>\nPeople are marking this question as duplicate to this <a href=\"https://stackoverflow.com/questions/11555997/c-c-int-vs-int-pointers-vs-array-notation-what-is-the-difference\">question</a>\nI have a hard time understanding how? Sure, it's a question regarding arrays and pointers, but the question similarities ends there. Sure, the references to C99 might help someone to dig deeper in C99.. but then, why use SO?\nEND EDIT</p>\n\n<p>I have a struct (say defined so that all C files have access to it)</p>\n\n<pre><code>typedef struct\n{\n  uint8_t a;\n  uint8_t b;\n} task_t;\n</code></pre>\n\n<p>And in one C file (say Sub.c) I create an array of such structs</p>\n\n<pre><code>task_t ossList[10] = {};\n</code></pre>\n\n<p>which are further filled with values for <code>a</code> and <code>b</code> during runtime</p>\n\n<p>In the same C file (Sub.c) I've written a function which enables other C files to get this struct array.</p>\n\n<pre><code>void HLP_GetStruct(task_t ** ossListGet) {\n    *ossListGet = ossList;\n}\n</code></pre>\n\n<p>The way I get the struct from other files (say Top.c) is by:</p>\n\n<pre><code>    task_t * ossList;\n    HLP_GetStruct(&amp;ossList);\n\n    for (k=0; k&lt;nTasks; k++) {\n        printf(\"OssList  %d %d\", ossList[k].a, ossList[k].b)\n    }\n</code></pre>\n\n<p>And it's all good. But then when I looked more closely I wondered how this can even work. what's really going on?</p>\n\n<p>In my outer C file (Top.c), I initialize <strong>a</strong> pointer to same type of struct. </p>\n\n<pre><code>task_t * ossList;\n</code></pre>\n\n<p>I then pass the reference to the other C file (Sub.c)</p>\n\n<pre><code>HLP_GetStruct(&amp;ossList);\n</code></pre>\n\n<p>and in that C file (Sub.c) I point my pointer to the \"real\" ossList struct <strong>array</strong> and I somehow get a pointer <strong>array</strong> back!? </p>\n\n<pre><code>void HLP_GetStruct(task_t ** ossListGet) {\n        *ossListGet = ossList;\n    }\n</code></pre>\n\n<p>And I can access the indices by</p>\n\n<pre><code>for (k=0; k&lt;nTasks; k++) {\n            printf(\"OssList  %d %d\", ossList[k].a, ossList[k].b)\n        }\n</code></pre>\n\n<p>How?</p>\n\n<p>(I've never done it like this before, my arrays have more or less always been declared as pointers, and pointer points by default to first element and you can \"copy\" over the pointer etc...)</p>\n\n<p>Sub.c</p>\n\n<pre><code>task_t ossList[10] = {};\nDoSomethingWithStructArray();\nvoid HLP_GetStruct(task_t ** ossListGet) {\n    *ossListGet = ossList;\n}\n</code></pre>\n\n<p>Top.c</p>\n\n<pre><code>task_t * ossList;\nHLP_GetStruct(&amp;ossList);\n\nfor (k=0; k&lt;nTasks; k++) {\n  printf(\"OssList  %d %d\", ossList[k].a, ossList[k].b)\n}\n</code></pre>\n"}, {"tags": ["c", "stdin"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1508957085, "post_id": 46939872, "comment_id": 80826898, "body": "<code>while(character != &#39;\\n&#39;);</code> Will cause an endless loop (assuming <code>character</code> does not have an initial value of <code>\\n</code>)."}, {"owner": {"reputation": 1, "user_id": 8816142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4fb4cf92047bf3f98ce6a55997f1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael91", "link": "https://stackoverflow.com/users/8816142/michael91"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1508957275, "post_id": 46939872, "comment_id": 80827010, "body": "@pzaenger We are not supposed to use this function :-/"}, {"owner": {"reputation": 1, "user_id": 8816142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4fb4cf92047bf3f98ce6a55997f1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael91", "link": "https://stackoverflow.com/users/8816142/michael91"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1508957390, "post_id": 46939872, "comment_id": 80827078, "body": "@JohnnyMopp Unfortunately i&#39;ve got no clue how to make it. Could you please try to explain it to me?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1508958031, "post_id": 46939872, "comment_id": 80827432, "body": "If you are just echoing the input back to the console, why do you need to store it in the array? To just read <code>stdin</code> char-by-char you could use <code>getchar()</code>. See the documentation for <a href=\"http://en.cppreference.com/w/c/io/getchar\" rel=\"nofollow noreferrer\"><code>getchar()</code></a>"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508967078, "post_id": 46939872, "comment_id": 80832150, "body": "So this is a homework assignment?  Goal is to demonstrate the ability to read characters from stdin, storing them in an array of lines and then print each of those lines?  You really should post the assignment your teacher gave you, along with whatever code you have and an accurate description of your difficulties."}, {"owner": {"reputation": 1, "user_id": 8816142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4fb4cf92047bf3f98ce6a55997f1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael91", "link": "https://stackoverflow.com/users/8816142/michael91"}, "reply_to_user": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508974778, "post_id": 46939872, "comment_id": 80834710, "body": "@jwdonahue Im sorry. Yes, that&#39;s a little piece of the task. I&#39;ve edited the code. Now it works and prints the first line of .txt. I would like to print the whole .txt file. Possibly 2D character array and put it into cycle? Thank you"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508980135, "post_id": 46939872, "comment_id": 80835968, "body": "Have you learned how do/while, do and for loops work yet?"}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1508981356, "post_id": 46939872, "comment_id": 80836269, "body": "Also, please make up your mind whether you want to read the data into a 2D buffer of characters, an array of char pointers, or just print the data to the screen.  You must say these things in your post above, not in the comments.  It would be better if you just copied the problem statement that your teacher gave you, into the post.  That would give us clue what an appropriate answer to your query should look like.  We&#39;re not here to write code for you or help you get out of thinking your way through this problem.  We are here to answer your questions and will do so, when you ask coherently."}, {"owner": {"reputation": 1, "user_id": 8816142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4fb4cf92047bf3f98ce6a55997f1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael91", "link": "https://stackoverflow.com/users/8816142/michael91"}, "reply_to_user": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1509000669, "post_id": 46939872, "comment_id": 80842304, "body": "@jwdonahue I just want to print the data on the screen. Task is to make a 2D character array and print all those string lines on the screen (from .txt input). I assume while would be the best option.  I need somehow to make a &quot;linecounter&quot;."}, {"owner": {"reputation": 1, "user_id": 8816142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4fb4cf92047bf3f98ce6a55997f1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael91", "link": "https://stackoverflow.com/users/8816142/michael91"}, "edited": false, "score": 0, "creation_date": 1509001902, "post_id": 46939872, "comment_id": 80842927, "body": "We should avoid using do."}, {"owner": {"reputation": 1376, "user_id": 2838941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e39251a55e152152746be25dc9cddf?s=128&d=identicon&r=PG&f=1", "display_name": "fork2execve", "link": "https://stackoverflow.com/users/2838941/fork2execve"}, "edited": false, "score": 0, "creation_date": 1509015458, "post_id": 46939872, "comment_id": 80851942, "body": "Fixing your homework is not what SO is for."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1509035882, "post_id": 46939872, "comment_id": 80866445, "body": "@xCute Devil, one more try.  Edit your original question to make it clear, exactly what your assignment is, not what you think you should do.  Read from stdin or read from a text file?  Put the data from the file into a 2D array, or just write it to stdout?"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 8632813, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82cd430c4b8dbd99e4e57f4b216f082e?s=128&d=identicon&r=PG&f=1", "display_name": "Clerisse Lucas", "link": "https://stackoverflow.com/users/8632813/clerisse-lucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1509023291, "last_edit_date": 1509023291, "creation_date": 1509021670, "answer_id": 46954633, "question_id": 46939872, "link": "https://stackoverflow.com/questions/46939872/reading-text-from-stdin-without-fopen/46954633#46954633", "title": "Reading text from stdin (without fopen)", "body": "<blockquote>\n  <p>without using fopen</p>\n</blockquote>\n\n<p>If <code>open</code> is tolerated. Why not use it with <code>read</code> ? This solution will allow you to read char by char.</p>\n\n<pre><code>int main(void)\n{\n  int file_descriptor = open(\"./path\", O_RDWR); /* Open with read/write */\n  char text_block[10]; // Random size\n\n  read(file_descriptor, text_block, 1); /* This will read 1 characters\n  from the file */\n\n  /* Then do what you want with the char readed. */\n}\n</code></pre>\n\n<p>Considering this solution, here is a process which will work :</p>\n\n<ol>\n<li>Use <code>stat()</code> function to <strong>know the size of the file</strong> (read the manual)</li>\n<li>Use the same process as above but <strong>instead of read 1 char read the size of the file</strong></li>\n<li>Each line is separated by <strong>'\\n'</strong> exept the last one. Just use this to separate your fully readed file into lines</li>\n</ol>\n\n<p>I guess it's for homework... This code have an error <strong>and won't compile until you found it.</strong> Which mean search the manual on the net and read it.</p>\n"}], "owner": {"reputation": 1, "user_id": 8816142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da4fb4cf92047bf3f98ce6a55997f1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Michael91", "link": "https://stackoverflow.com/users/8816142/michael91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1509023291, "creation_date": 1508956940, "last_edit_date": 1508974086, "question_id": 46939872, "link": "https://stackoverflow.com/questions/46939872/reading-text-from-stdin-without-fopen", "title": "Reading text from stdin (without fopen)", "body": "<p>I'm trying to write some code to read my text file from stdin char by char, line by line, without using <code>fopen</code>. I need 42 lines with a maximum of 100 chars.</p>\n\n<p>Help me to get this working and explain to me how it works. Thank you!</p>\n\n<pre><code>int main()                                                      \n{\nchar str[100];\n\nfgets(str, sizeof(str), stdin);\nfputs(str, stdout);\nreturn 0;}\n</code></pre>\n"}, {"tags": ["c", "encryption", "ascii"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1508956399, "post_id": 46939673, "comment_id": 80826501, "body": "Nothing to do with your problem but you should use <code>a[i]</code> instead of <code>*(a+i)</code> for array accesses as it&#39;s much more readable."}, {"owner": {"reputation": 2836, "user_id": 3529197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceed214a6e603c456a8ebaacc036b407?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3529197/neo"}, "edited": false, "score": 0, "creation_date": 1508956524, "post_id": 46939673, "comment_id": 80826563, "body": "Normal Ceaser Cipher uses only ascii chars (only English letters, really. You might want to specify what exactly is your code about. Besides, give a better description of your input and desired output compared to the one you get."}, {"owner": {"reputation": 13, "user_id": 8680116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b46aef22df5e928bfd53a1ae6e36b84?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/8680116/spook"}, "edited": false, "score": 0, "creation_date": 1508956540, "post_id": 46939673, "comment_id": 80826575, "body": "Thats fair enough I will take that into account Thank you!"}, {"owner": {"reputation": 13, "user_id": 8680116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b46aef22df5e928bfd53a1ae6e36b84?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/8680116/spook"}, "reply_to_user": {"reputation": 2836, "user_id": 3529197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceed214a6e603c456a8ebaacc036b407?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3529197/neo"}, "edited": false, "score": 0, "creation_date": 1508956636, "post_id": 46939673, "comment_id": 80826622, "body": "@Neo I added an example"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1508956678, "post_id": 46939673, "comment_id": 80826643, "body": "And what output do you actually get?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1508957081, "post_id": 46939673, "comment_id": 80826895, "body": "Do you keep re-encoding the same already encoded message 100 times, and then decode it 100 times to arrive back where you started? Does any encoded character have a <code>0</code> value in it causing string truncation? You don&#39;t pass a length but detect the <code>0</code> terminator."}, {"owner": {"reputation": 4470, "user_id": 1884363, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DmTLe.jpg?s=128&g=1", "display_name": "sudo", "link": "https://stackoverflow.com/users/1884363/sudo"}, "edited": false, "score": 0, "creation_date": 1508960304, "post_id": 46939673, "comment_id": 80828708, "body": "The combination of <code>*(string+index) != &#39;\\0&#39;</code> and <code>*(string+index) += ...</code> looks problematic. You keep adding to the characters with no modulo. You could be overflowing <code>char</code> and ending up with a 0 for a character. I would try restricting to ASCII like Neo said. Something like <code>string[i] = (string[i] + your_shift) % 26 + 65</code> (and minus for decoding) would restrict to capital English letters."}, {"owner": {"reputation": 4470, "user_id": 1884363, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DmTLe.jpg?s=128&g=1", "display_name": "sudo", "link": "https://stackoverflow.com/users/1884363/sudo"}, "edited": false, "score": 0, "creation_date": 1508962297, "post_id": 46939673, "comment_id": 80829782, "body": "I tried fixing it that way and got it outputting the correct thing except rolled right (&quot;LMNOPQRTSTUVWXYZABCD...&quot;). Maybe there&#39;s another problem I&#39;m not seeing."}], "owner": {"reputation": 13, "user_id": 8680116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b46aef22df5e928bfd53a1ae6e36b84?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/8680116/spook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508957374, "creation_date": 1508956195, "last_edit_date": 1508957374, "question_id": 46939673, "link": "https://stackoverflow.com/questions/46939673/ceasar-cipher-in-c-not-outputing-correctly-past-100-iterations", "title": "Ceasar Cipher In C not outputing correctly past 100 iterations", "body": "<p>I'm working on an assignment for class so I would prefer for you to assist me in the matter or rather point me in the right direction rather than just giving me an answer. That being said my program encrypts a string based on a Ceasar Cipher (This is not by any means secure it is merely a simple program). When it runs through encoding and decoding the result is find and never has any issues assuming the number of passes (or rather number of times I encrypt it) is less than 100. When the encode and decode are over 100 passes I get a different string than expected as an output for my encode, and my decode only outputs a single character (the first).</p>\n\n<p>This is the code and note it is intentional that the output is not within the normal ascii range as that is what the assignment asks.</p>\n\n<pre><code>enum CODE_METHOD {ENCODE, DECODE};  \nint mystrlen(const unsigned char *string)\n{\n  int length = 0;\n  int index;\n\n  for(index = 0;*(string+index) != 0; index++)\n    length++;\n\n  return length;\n}\n\nvoid jumble(unsigned char *string, \n            const unsigned char *password, \n            enum CODE_METHOD method, \n            int passes)\n{\n  int index, index_2;\n  int len = mystrlen(password);\n\n  for(index_2 = 0; index_2 &lt; passes; index_2++)\n    for(index=0; *(string+index) != '\\0'; ++index )\n      *(string+index) += (method == ENCODE) ?   *(password+(index % len)) \n                                            : - *(password+(index % len));\n}\n</code></pre>\n\n<p>Also here is an example driver which would call this</p>\n\n<pre><code>#include &lt;stdio.h&gt;  /* printf, putchar                  */\n#include \"jumble.h\" /* mystrlen, jumble, ENCODE, DECODE */\n\nvoid test_stress(int passes)\n{\n  unsigned char phrase[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  unsigned char *password = (unsigned char*) \"rumpelstiltskin\";\n  size_t length = sizeof(phrase);\n  size_t i;\n\n  printf(\"\\nStress ======================================\\n\");\n  printf(\"Original phrase:\\n\");\n  printf(\"%s\\n\", phrase);\n  jumble(phrase, password, ENCODE, passes);\n\n  printf(\"\\nEncoded phrase:\\n\");\n  for (i = 0; i &lt; length; i++)\n    putchar(phrase[i]);\n\n  jumble(phrase, password, DECODE, passes);\n  printf(\"\\nDecoded back:\\n\");\n  printf(\"%s\\n\", phrase);\n}\n\nint main(void)\n{\n  test_stress(100);\n  return 0;\n}\n</code></pre>\n\n<p>Here is the expected output of the above driver:</p>\n\n<pre><code>Stress ======================================\nOriginal phrase:\nABCDEFGHIJKLMNOPQRSTUVWXYZ\n\nEncoded phrase:\n\u00c9\u00f6\u00d7\u00b9v3\u02dcMz\u203a8RG\u00d8\u00e6\u00c8\u2026B\u00a7\\\u2030\u00aa \nDecoded back:\nABCDEFGHIJKLMNOPQRSTUVWXYZ\n</code></pre>\n\n<p>Recieved output</p>\n\n<pre><code>Stress ======================================\nOriginal phrase:\nABCDEFGHIJKLMNOPQRSTUVWXYZ\n\nEncoded phrase:\n\u00c9 \u00d1\u00e4\u00a3\u00ce\u00f9 \u00bf\u00d2\u00fe\u00cf\u00c4\u00e3PD \u00b3  \u00c7\u00c8 \nDecoded back:\nA\n</code></pre>\n\n<p>Again I would like to be pointed in the right direction here</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "c", "pointers", "multidimensional-array", "implicit-conversion"], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1508957706, "creation_date": 1508957706, "answer_id": 46940062, "question_id": 46939655, "link": "https://stackoverflow.com/questions/46939655/why-does-a-2d-array-behave-like-a-1d-array-of-pointers-instead-of-a-1d-array-of/46940062#46940062", "title": "Why does a 2D array behave like a 1D array of pointers instead of a 1D array of integers?", "body": "<p>According to the C Standard (6.3.2.1 Lvalues, arrays, and function designators)</p>\n\n<blockquote>\n  <p>3 Except when it is the operand of the sizeof operator or the unary &amp;\n  operator, or is a string literal used to initialize an array, <strong>an\n  expression that has type \u2018\u2018array of type\u2019\u2019 is converted to an\n  expression with type \u2018\u2018pointer to type\u2019\u2019 that points to the initial\n  element of the array object and is not an lvalue</strong>. If the array\n  object has register storage class, the behavior is undefined.</p>\n</blockquote>\n\n<p>Thus in the first for loop</p>\n\n<pre><code>for(i = 0; i &lt; dimA[0]; ++i) {\n    for(j = 0; j &lt; dimA[1]; ++j) {\n        printf(\"%3d\", *(A[i] + j)); //This would work if the elements of A[] are pointers\n    }\n    printf(\"\\n\\n\");\n}\n</code></pre>\n\n<p>the expression <code>A[i]</code> has the type <code>int[2]</code>. Being converted to pointer it has the type <code>int *</code>. So for each i the expression <code>A[i]</code> points to the first element of each \"row\" of the array <code>A</code>.</p>\n\n<p>The expression <code>A[i] + j</code> points to the j-th element of each row. So dereferencing the pointer you get j-th element of the i-th row of the array.</p>\n\n<p>In the second loop</p>\n\n<pre><code>for(i = 0; i &lt; dimA[0]; ++i) {  //Same code as printArray function\n    for(j = 0; j &lt; dimA[1]; ++j) {\n        printf(\"%3d\", A[i*dimA[1] + j]);//This would work if the elements of A[] are the rows of a 2D array mapped into a 1D array\n    }\n    printf(\"\\n\\n\");\n}\n</code></pre>\n\n<p>the expression <code>A[i*dimA[1] + j]</code> has the type <code>int *</code> and points to <code>i *dimA[1] + j</code> \"row\" of the array that is it points beyond the array. So the loop does not make sense.</p>\n\n<p>The function declared like</p>\n\n<pre><code>void printArray(int *A, int* dimA);\n</code></pre>\n\n<p>is called like</p>\n\n<pre><code>printArray(A, dimA);\n</code></pre>\n\n<p>The second argument that has the type <code>int[2]</code> is indeed converted to pointer of the type <code>int *</code> that points to the first element of the array.</p>\n\n<p>As for the first argument then it is also converted to pointer to its first element. And what is the element of the array? The element of this two-dimensional array is a one-dimensional array of the type <code>int[2]</code>. So pointer to an object of this type will have type <code>int ( * )[2]</code></p>\n\n<p>Pointers <code>int *</code> and <code>int ( * )[2]</code> are not compatible and by this reason the compiler shall issue a diagnostic message.</p>\n\n<p>the correct declaration of the function should look like</p>\n\n<pre><code>void printArray(int ( *A )[2], int *dimA);\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1902824"}, "is_accepted": false, "score": 1, "last_activity_date": 1508959597, "creation_date": 1508959597, "answer_id": 46940598, "question_id": 46939655, "link": "https://stackoverflow.com/questions/46939655/why-does-a-2d-array-behave-like-a-1d-array-of-pointers-instead-of-a-1d-array-of/46940598#46940598", "title": "Why does a 2D array behave like a 1D array of pointers instead of a 1D array of integers?", "body": "<p>Compiling the code gives a warning that is a bit of a clue to what is going on:</p>\n\n<pre><code>main.c:27:27: warning: format specifies type 'int' but the argument has type 'int *' [-Wformat]\n            printf(\"%3d\", A[i*dimA[1] + j]);//This would work if the elements of A[] are the rows of a 2D array mapped into a 1D array\n                    ~~~   ^~~~~~~~~~~~~~~~\nmain.c:32:16: warning: incompatible pointer types passing 'int [2][2]' to parameter of type 'int *' [-Wincompatible-pointer-types]\n    printArray(A, dimA);\n               ^\nmain.c:3:22: note: passing argument to parameter 'A' here\nvoid printArray(int *A, int* dimA) {\n</code></pre>\n\n<p>When you declare your array:</p>\n\n<pre><code>int A[2][2] = {{1,2},{3,4}};\n</code></pre>\n\n<p>this is stored as one contiguous chunk of memory, as you stated. In memory, this is equivalent to:</p>\n\n<pre><code>int A[4] = {1,2,3,4};\n</code></pre>\n\n<p>However, whenever you go to lookup/dereference the values, depending on the type, the compiler is implicitly doing some bookkeeping for you. For the second case:</p>\n\n<pre><code>int A[4] = {1,2,3,4};\n\nA[0] = *(&amp;A + 0) = 1\nA[1] = *(&amp;A + 1) = 2\n...\n</code></pre>\n\n<p>fairly straightforward, the index is simply an offset off the base address. However, for the first case:</p>\n\n<pre><code>      y  x\nint A[2][2] = {{1,2},{3,4}};\n                     y   x\nA[0][0] = *(&amp;A + 2 * 0 + 0) = *(&amp;A + 0) = 1\nA[1][0] = *(&amp;A + 2 * 1 + 0) = *(&amp;A + 2) = 3\n...\n</code></pre>\n\n<p>things start to look a bit confusing.</p>\n\n<p>The first thing to note is that since the type is declared as an <code>int[2][2]</code>, you <em>must</em> dereference it twice. That is what the first warning is complaining about. Because it was only dereferenced once, your <code>int **</code> became an <code>int *</code>, which is not the same as an <code>int</code>.</p>\n\n<p>The second thing to notice is because the type is declared as a multi-dimensional array, the compiler will do some bookkeeping for you. Since the array was being dereferenced on the first dimension, the size of the second dimension to stride to the correct location was already taken into account, so instead of <code>col * j + i</code>, you actually got <code>col * (col * j + i) + i</code>, which is not what you want!</p>\n\n<p>To get the desired effect, you can either:</p>\n\n<ol>\n<li><p>Cast <code>A</code> into an <code>int *</code>. This is what happened when you called your <code>printArray</code> function, and also why it works.</p></li>\n<li><p>Access the array from the lowest dimension. Instead of saying <code>A[i*dimA[1] + j]</code>, do <code>A[0][i*dimA[1] + j]</code>. This will correctly dereference to an <code>int</code> and also effectively bypass the bookkeeping.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 2, "last_activity_date": 1508961825, "last_edit_date": 1508961825, "creation_date": 1508959989, "answer_id": 46940711, "question_id": 46939655, "link": "https://stackoverflow.com/questions/46939655/why-does-a-2d-array-behave-like-a-1d-array-of-pointers-instead-of-a-1d-array-of/46940711#46940711", "title": "Why does a 2D array behave like a 1D array of pointers instead of a 1D array of integers?", "body": "<blockquote>\n  <p>When trying to pass a 2D array to a function, I learned that you cannot do so with dynamically allocated arrays, since the compiler needs to know array[][columns].</p>\n</blockquote>\n\n<p>This is true, in the sense that you cannot pass <em>any</em> array to a function.  You cannot even express such a concept in C, though you can write code that looks like that to the casual eye.  In almost every context where an expression evaluating to an array appears -- including function call expressions -- the array value is replaced by a pointer to the first array element.</p>\n\n<p>It is partially true in the sense that a 2D array is an array of arrays, and the dimension of the (array) element type is is part of the overall array's type, part of the type of every element, and part of the type of a pointer to the first element.  As such, that dimension must be part of the type of any function parameter to which you want to pass (a pointer to the first element of) the array.</p>\n\n<p>It is most accurately characterized as false, however, even for 2D arrays both of whose dimensions are determined at run time.  Since 1999, C has supported variable-length arrays (though in C11 it was made optional), and these play very nicely indeed with dynamically-allocated multi-dimensional arrays and with pointers to arrays of varying dimension:</p>\n\n<pre><code>// Dynamically allocating a 2D array of runtime-determined dimensions:\nunsigned rows = calculate_number_of_rows();\nunsigned columns = calculate_number_of_columns();\nint (*matrix)[columns] = malloc(rows * sizeof(*matrix));\n</code></pre>\n\n<p>They work well for functions accepting such pointers, too:</p>\n\n<pre><code>void do_something(unsigned rows, unsigned columns, int matrix[rows][columns]);\n</code></pre>\n\n<p>... or, equivalently ...</p>\n\n<pre><code>void do_something(unsigned rows, unsigned columns, int matrix[][columns]);\n</code></pre>\n\n<p>... or ...</p>\n\n<pre><code>void do_something(unsigned rows, unsigned columns, int (*matrix)[columns]);\n</code></pre>\n\n<p>Those three forms are completely equivalent.</p>\n\n<blockquote>\n  <p>However, I learned that a 2D array is stored a 1D array, where the elements of each new row just follows the elements of the previous row.</p>\n</blockquote>\n\n<p>A 2D array is an array of 1D arrays.  The elements of any array are stored contiguously in memory without padding, so the layout of a 2D array of dimensions (<em>r</em>, <em>c</em>) cannot be distinguished from the layout of a 1D array of dimension <em>r</em> * <em>c</em>, but I recommend against thinking of it in the terms\nyou used.</p>\n\n<blockquote>\n  <p>When I pass an array name to a function as a pointer to an array, this seems to be the case, and my code works fine.</p>\n</blockquote>\n\n<p>Do not do that.  In practice, it is very likely to work exactly as you say, but you should heed the warnings emitted by your compiler -- and it definitely should be emitting warnings about that.</p>\n\n<blockquote>\n  <p>However, in the function where the 2D array is declared, it behaves as an array of pointers instead.</p>\n</blockquote>\n\n<p>You've not presented an example of a function that would fit your description.  Certainly it is possible to pass an array of pointers, but it is quite possible to pass a pointer to an array instead.  See above for examples.</p>\n"}], "owner": {"reputation": 25, "user_id": 8833347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/797ab2c78bd361e6ec0854872464afc6?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Bellows", "link": "https://stackoverflow.com/users/8833347/nathan-bellows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 1, "accepted_answer_id": 46940711, "answer_count": 3, "score": 2, "last_activity_date": 1598348810, "creation_date": 1508956112, "last_edit_date": 1598348810, "question_id": 46939655, "link": "https://stackoverflow.com/questions/46939655/why-does-a-2d-array-behave-like-a-1d-array-of-pointers-instead-of-a-1d-array-of", "title": "Why does a 2D array behave like a 1D array of pointers instead of a 1D array of integers?", "body": "<p>I have been researching and testing my knowledge in C (I am a new computer engineering student), and ran into a problem I cannot figure out. </p>\n\n<p>When trying to pass a 2D array to a function, I learned that you cannot do so with dynamically allocated arrays, since the compiler needs to know array[][columns]. However, I learned that a 2D array is stored a 1D array, where the elements of each new row just follows the elements of the previous row. When I pass an array name to a function as a pointer to an array, this seems to be the case, and my code works fine. However, in the function where the 2D array is declared, it behaves as an array of pointers instead.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid printArray(int *A, int* dimA) {\n    for(int i = 0; i &lt; dimA[0]; ++i) {\n        for(int j = 0; j &lt; dimA[1]; ++j) {\n            printf(\"%3d\", A[i*dimA[1] + j]);//This would work if the elements of A[] are the rows of a 2D array mapped into a 1D array\n        }\n    printf(\"\\n\\n\");\n    }\nreturn;\n}\n\nint main(){\n    int A[2][2] = {{1,2},{3,4}};\n    int dimA[2] = {2,2};//dimensions of the array\n    int i, j; \n\n    for(i = 0; i &lt; dimA[0]; ++i) {\n        for(j = 0; j &lt; dimA[1]; ++j) {\n            printf(\"%3d\", *(A[i] + j)); //This would work if the elements of A[] are pointers\n        }\n        printf(\"\\n\\n\");\n    }\n\n    for(i = 0; i &lt; dimA[0]; ++i) {  //Same code as printArray function\n        for(j = 0; j &lt; dimA[1]; ++j) {\n            printf(\"%3d\", A[i*dimA[1] + j]);//This would work if the elements of A[] are the rows of a 2D array mapped into a 1D array\n        }\n        printf(\"\\n\\n\");\n    }\n\n    printArray(A, dimA);\n    return 0;\n}\n</code></pre>\n\n<p>The following code outputs the array correctly in main() when the array is treated as an array of pointers, but not when treated as a 1D array of integers. However, when I pass the same array to the printArray function as a pointer, I can treat it as a 1D array of integers and it works. Any help would be appreciated (I already understand that I can instead use an array of pointers, but I really want to understand what the problem was). Thanks!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3592, "user_id": 6276385, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89c7b071a5c25c2f6ccc6f1f41bdb2e3?s=128&d=identicon&r=PG&f=1", "display_name": "gonutz", "link": "https://stackoverflow.com/users/6276385/gonutz"}, "edited": false, "score": 0, "creation_date": 1508956128, "post_id": 46939589, "comment_id": 80826347, "body": "You should maybe consider using a library for that, there are about a zillion CSV libraries for it."}, {"owner": {"reputation": 65, "user_id": 6279326, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/208de71ae36d23f80aaa73b1e0ad5838?s=128&d=identicon&r=PG&f=1", "display_name": "noobprogrammer1987", "link": "https://stackoverflow.com/users/6279326/noobprogrammer1987"}, "reply_to_user": {"reputation": 3592, "user_id": 6276385, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89c7b071a5c25c2f6ccc6f1f41bdb2e3?s=128&d=identicon&r=PG&f=1", "display_name": "gonutz", "link": "https://stackoverflow.com/users/6276385/gonutz"}, "edited": false, "score": 0, "creation_date": 1508956411, "post_id": 46939589, "comment_id": 80826507, "body": "Are any of them standard c libraries? I am working on a very old system. Can you provide a few examples please?"}, {"owner": {"reputation": 3592, "user_id": 6276385, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89c7b071a5c25c2f6ccc6f1f41bdb2e3?s=128&d=identicon&r=PG&f=1", "display_name": "gonutz", "link": "https://stackoverflow.com/users/6276385/gonutz"}, "edited": false, "score": 0, "creation_date": 1508956618, "post_id": 46939589, "comment_id": 80826613, "body": "There is no CSV library in the standard library, just google and try one that looks good to you <a href=\"https://www.google.com/search?q=c%2B%2B+csv+library\" rel=\"nofollow noreferrer\">google.com/search?q=c%2B%2B+csv+library</a>"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1508960018, "post_id": 46939589, "comment_id": 80828570, "body": "If the OP is looking for a C library, a better search is probably <a href=\"http://google.com/search?q=c+csv+library\" rel=\"nofollow noreferrer\">google.com/search?q=c+csv+library</a>"}, {"owner": {"reputation": 65, "user_id": 6279326, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/208de71ae36d23f80aaa73b1e0ad5838?s=128&d=identicon&r=PG&f=1", "display_name": "noobprogrammer1987", "link": "https://stackoverflow.com/users/6279326/noobprogrammer1987"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1508961118, "post_id": 46939589, "comment_id": 80829180, "body": "@ThomasPadron-McCarthy I am looking for any method that will help me. I have spent two days on this one VERY frustrating problem."}, {"owner": {"reputation": 65, "user_id": 6279326, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/208de71ae36d23f80aaa73b1e0ad5838?s=128&d=identicon&r=PG&f=1", "display_name": "noobprogrammer1987", "link": "https://stackoverflow.com/users/6279326/noobprogrammer1987"}, "reply_to_user": {"reputation": 3592, "user_id": 6276385, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/89c7b071a5c25c2f6ccc6f1f41bdb2e3?s=128&d=identicon&r=PG&f=1", "display_name": "gonutz", "link": "https://stackoverflow.com/users/6276385/gonutz"}, "edited": false, "score": 0, "creation_date": 1509035597, "post_id": 46939589, "comment_id": 80866293, "body": "@gonutz Can you please take a look at that?"}, {"owner": {"reputation": 65, "user_id": 6279326, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/208de71ae36d23f80aaa73b1e0ad5838?s=128&d=identicon&r=PG&f=1", "display_name": "noobprogrammer1987", "link": "https://stackoverflow.com/users/6279326/noobprogrammer1987"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1509035638, "post_id": 46939589, "comment_id": 80866317, "body": "@ThomasPadron-McCarthy can you please take a look at that?"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1509107571, "post_id": 46939589, "comment_id": 80897630, "body": "@noobprogrammer1987: For one thing, the function <code>split_on_unescaped_newlines</code> returns its result as a value, so you can&#39;t use <code>line</code> as if that was the result."}, {"owner": {"reputation": 65, "user_id": 6279326, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/208de71ae36d23f80aaa73b1e0ad5838?s=128&d=identicon&r=PG&f=1", "display_name": "noobprogrammer1987", "link": "https://stackoverflow.com/users/6279326/noobprogrammer1987"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1509123037, "post_id": 46939589, "comment_id": 80907243, "body": "@ThomasPadron-McCarthy Thank you. I guess the documentation was wrong then. The documentation says it will return an array of strings. <a href=\"https://github.com/semitrivial/csv_parser\" rel=\"nofollow noreferrer\">github.com/semitrivial/csv_parser</a>"}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1509169357, "post_id": 46939589, "comment_id": 80920194, "body": "@noobprogrammer1987:  Yes? It does return an array of strings."}, {"owner": {"reputation": 65, "user_id": 6279326, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/208de71ae36d23f80aaa73b1e0ad5838?s=128&d=identicon&r=PG&f=1", "display_name": "noobprogrammer1987", "link": "https://stackoverflow.com/users/6279326/noobprogrammer1987"}, "reply_to_user": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1509200068, "post_id": 46939589, "comment_id": 80927817, "body": "@ThomasPadron-McCarthy then what am I doing wrong? I thought when you have an array of strings you can select a string from the array like <code>line[0]</code>."}, {"owner": {"reputation": 25589, "user_id": 15727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FFivc.jpg?s=128&g=1", "display_name": "Thomas Padron-McCarthy", "link": "https://stackoverflow.com/users/15727/thomas-padron-mccarthy"}, "edited": false, "score": 0, "creation_date": 1509202097, "post_id": 46939589, "comment_id": 80928468, "body": "@noobprogrammer1987: <code>line</code> is not an array of strings, but an array of characters, that is, a single string. But that is not the main problem. The main problem is that <code>line</code> is the <i>input</i> to the function, and it then returns its result as output, but you discard that output."}], "owner": {"reputation": 65, "user_id": 6279326, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/208de71ae36d23f80aaa73b1e0ad5838?s=128&d=identicon&r=PG&f=1", "display_name": "noobprogrammer1987", "link": "https://stackoverflow.com/users/6279326/noobprogrammer1987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509039605, "creation_date": 1508955910, "last_edit_date": 1509039605, "question_id": 46939589, "link": "https://stackoverflow.com/questions/46939589/parse-comma-serpataed-file-of-different-types", "title": "Parse comma serpataed file of different types", "body": "<p>This is what I came up with for reading a csv file with multiple types. It seems to get the job done in all cases but 1,2,,\"a\". Where there is a blank space. Can I please have some ideas on how to fix this? </p>\n\n<pre><code>const char* getfield(char* line, int num)\n{\nconst char* tok;\nfor (tok = strtok(line, \",\");\n        tok &amp;&amp; *tok;\n        tok = strtok(NULL, \",\\n\"))\n{\n    if (!--num)\n        return tok;\n}\nreturn NULL;\n}\n\nwhile(fgets(line, 80, inputfp1) != NULL)\n{\n    printf(\" line is %s \\n\", line);\n\n    char* tmp1 = strdup(line);\n    char* tmp2 = strdup(line);\n    char* tmp3 = strdup(line);\n    char* tmp4 = strdup(line);\n    printf(\"Field 1 would be %s\\n\", getfield(tmp1, 1));\n    printf(\"Field 2 would be %s\\n\", getfield(tmp2, 2));\n    printf(\"Field 3 would be %s\\n\", getfield(tmp3, 3));\n    printf(\"Field 4 would be %s\\n\", getfield(tmp4, 4));\n    // NOTE strtok clobbers tmp\n    free(tmp1);\n    free(tmp2);\n    free(tmp3);\n    free(tmp4);\n\n    //sscanf(line, \"%d, %d, %d, %d\", &amp;column1[i], &amp;column2[i], &amp;column3[i], &amp;column4[i]);\n    //printf(\" column1[i] is %d column2[i] is %d column3[i] is %d column4[i] is %d \\n\", column1[i], column2[i], column3[i], column4[i]);\n    i++;\n    memset(line, 0, 80);\n}\n</code></pre>\n\n<p>Ok I used a library like was suggested and don't understand why this is not working. </p>\n\n<p><a href=\"https://ideone.com/RylYp1\" rel=\"nofollow noreferrer\">https://ideone.com/RylYp1</a></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n/*\n * Given a string which might contain unescaped newlines, split it up into\n * lines which do not contain unescaped newlines, returned as a\n * NULL-terminated array of malloc'd strings.\n */\nchar **split_on_unescaped_newlines(const char *txt) {\n    const char *ptr, *lineStart;\n    char **buf, **bptr;\n    int fQuote, nLines;\n\n    /* First pass: count how many lines we will need */\n    for ( nLines = 1, ptr = txt, fQuote = 0; *ptr; ptr++ ) {\n        if ( fQuote ) {\n            if ( *ptr == '\\\"' ) {\n                if ( ptr[1] == '\\\"' ) {\n                    ptr++;\n                    continue;\n                }\n                fQuote = 0;\n            }\n        } else if ( *ptr == '\\\"' ) {\n            fQuote = 1;\n        } else if ( *ptr == '\\n' ) {\n            nLines++;\n        }\n    }\n\n    buf = malloc( sizeof(char*) * (nLines+1) );\n\n    if ( !buf ) {\n        return NULL;\n    }\n\n    /* Second pass: populate results */\n    lineStart = txt;\n    for ( bptr = buf, ptr = txt, fQuote = 0; ; ptr++ ) {\n        if ( fQuote ) {\n            if ( *ptr == '\\\"' ) {\n                if ( ptr[1] == '\\\"' ) {\n                    ptr++;\n                    continue;\n                }\n                fQuote = 0;\n                continue;\n            } else if ( *ptr ) {\n                continue;\n            }\n        }\n\n        if ( *ptr == '\\\"' ) {\n            fQuote = 1;\n        } else if ( *ptr == '\\n' || !*ptr ) {\n            size_t len = ptr - lineStart;\n\n            if ( len == 0 ) {\n                *bptr = NULL;\n                return buf;\n            }\n\n            *bptr = malloc( len + 1 );\n\n            if ( !*bptr ) {\n                for ( bptr--; bptr &gt;= buf; bptr-- ) {\n                    free( *bptr );\n                }\n                free( buf );\n                return NULL;\n            }\n\n            memcpy( *bptr, lineStart, len );\n            (*bptr)[len] = '\\0';\n\n            if ( *ptr ) {\n                lineStart = ptr + 1;\n                bptr++;\n            } else {\n                bptr[1] = NULL;\n                return buf;\n            }\n        }\n    }\n}\n\nint main(void) {\n    // your code goes here\n    char line[80] = \"52,243,,542\";\n\n    split_on_unescaped_newlines(line);\n    printf(\"line  %s\\n\", line[0]);\n    printf(\"line  %s\\n\", line[1]);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "posix", "shared-memory"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1508954830, "post_id": 46939034, "comment_id": 80825624, "body": "Why do you think shared memory is mapped to disk?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1508954893, "post_id": 46939034, "comment_id": 80825662, "body": "on linux shm_open would normally create a device <code>file</code> in /dev/shm."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1508954901, "post_id": 46939034, "comment_id": 80825668, "body": "Btw oracle uses shared memory and it does not go to disk"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1508954947, "post_id": 46939034, "comment_id": 80825700, "body": "Related: <a href=\"https://superuser.com/questions/45342/when-should-i-use-dev-shm-and-when-should-i-use-tmp\" title=\"when should i use dev shm and when should i use tmp\">superuser.com/questions/45342/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/9745281/tmp-vs-dev-shm-for-temp-file-storage-on-linux\" title=\"tmp vs dev shm for temp file storage on linux\">stackoverflow.com/questions/9745281/&hellip;</a>"}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1508955189, "post_id": 46939034, "comment_id": 80825832, "body": "@EdHeal I know that not all implementations of shared memory are mapped to disk but a lot of usual ones are."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1508955312, "post_id": 46939034, "comment_id": 80825909, "body": "Please could you give me a reference"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1508955324, "post_id": 46939034, "comment_id": 80825916, "body": "No, the disk is not relevant. You could use <code>shm_open</code> without any swap. See <a href=\"http://man7.org/linux/man-pages/man7/shm_overview.7.html\" rel=\"nofollow noreferrer\">shm_overview(7)</a>, and <code>&#47;dev&#47;shm&#47;</code> is generally a <a href=\"https://en.wikipedia.org/wiki/Tmpfs\" rel=\"nofollow noreferrer\">tmpfs</a> mounted file system so dont use any disk."}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1508956030, "post_id": 46939034, "comment_id": 80826285, "body": "@EdHeal I don&#39;t have any references but just consider the case of mapping a disk file to memory and using it as a shared object. You will have to confirm that data is written back to the file (using <code>msync</code>) to make sure synchronization is happening as expected (i mean updates are taking place in all other processes memory maps)."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1508956167, "post_id": 46939034, "comment_id": 80826375, "body": "Are we talking about shared memory or memory mapped files? The two things are different"}, {"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1508961896, "post_id": 46939034, "comment_id": 80829574, "body": "@EdHeal I think shared memory is implemented using memory mapped files, isn&#39;t it ?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1508962638, "post_id": 46939034, "comment_id": 80829946, "body": "1. Surely shared memory is just that - perhaps using the metaphor of file handles etc it is just memory - not disk. 2. You are contradicting yourself from about two hours ago. 3. Database require shared memory to be just memory. Other wise there is no performance gain when a database cannot control that aspect of hardware"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1508962663, "post_id": 46939034, "comment_id": 80829956, "body": "Also please find a reference for you assumptins"}], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 0, "creation_date": 1508956199, "post_id": 46939495, "comment_id": 80826399, "body": "Now it makes sense. So the parameter passed to <code>shm_open</code> is the filename on /dev/shm/ <code>tempfs</code> filesystem ?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "edited": false, "score": 1, "creation_date": 1508956266, "post_id": 46939495, "comment_id": 80826435, "body": "Yes, and that is documented in <a href=\"http://man7.org/linux/man-pages/man7/shm_overview.7.html\" rel=\"nofollow noreferrer\">shm_overview(7)</a>. You should read documentation and <code>man</code> pages before asking questions on SO or elsewhere."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 5, "last_activity_date": 1508956341, "last_edit_date": 1508956341, "creation_date": 1508955601, "answer_id": 46939495, "question_id": 46939034, "link": "https://stackoverflow.com/questions/46939034/what-type-of-memory-objects-does-shm-open-use/46939495#46939495", "title": "What type of memory objects does `shm_open` use?", "body": "<blockquote>\n  <p>Usually, shared memory is implemented using portions of On-Disk files mapped to processes address spaces. </p>\n</blockquote>\n\n<p>This is generally false, at least on a desktop or laptop running a recent Linux distribution, with some reasonable amount of RAM (e.g. 8Gbytes at least).</p>\n\n<p>So, the disk is not relevant. You could use <code>shm_open</code> without any swap. See <a href=\"http://man7.org/linux/man-pages/man7/shm_overview.7.html\" rel=\"nofollow noreferrer\">shm_overview(7)</a>, and notice that <code>/dev/shm/</code> is generally a <a href=\"https://en.wikipedia.org/wiki/Tmpfs\" rel=\"nofollow noreferrer\">tmpfs</a> mounted file system so don't use any disk. See <a href=\"http://man7.org/linux/man-pages/man5/tmpfs.5.html\" rel=\"nofollow noreferrer\">tmpfs(5)</a>. And <code>tmpfs</code> don't use the disk (unless you reach <a href=\"https://en.wikipedia.org/wiki/Thrashing_(computer_science)\" rel=\"nofollow noreferrer\">thrashing</a> conditions, which is unlikely) since it works in <a href=\"https://en.wikipedia.org/wiki/Virtual_memory\" rel=\"nofollow noreferrer\">virtual memory</a>.</p>\n\n<blockquote>\n  <p>the filesystem is involved to write changes on the disk which is a great overhead.</p>\n</blockquote>\n\n<p>This is usually wrong. On most systems, recently written files are in the <a href=\"https://en.wikipedia.org/wiki/Page_cache\" rel=\"nofollow noreferrer\">page cache</a>, which does not reach the disk quickly (BTW, that is why the shutdown procedure needs to call <a href=\"http://man7.org/linux/man-pages/man2/sync.2.html\" rel=\"nofollow noreferrer\">sync(2)</a> which is rarely used otherwise...).</p>\n\n<p>BTW, on most desktops and laptops, it is easy to observe. The hard disk has some LED, and you won't see it blinking when using <code>shm_open</code> and related calls. BTW, you could also use <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\">proc(5)</a> (notably <code>/proc/diskstats</code> etc....) to query the kernel about its disk activity.</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1508955759, "creation_date": 1508955759, "answer_id": 46939548, "question_id": 46939034, "link": "https://stackoverflow.com/questions/46939034/what-type-of-memory-objects-does-shm-open-use/46939548#46939548", "title": "What type of memory objects does `shm_open` use?", "body": "<blockquote>\n  <p>Usually, shared memory is implemented using portions of On-Disk files mapped to processes address spaces. Whenever a memory access occurs on the shared region, the filesystem is involved to write changes on the disk which is a great overhead.</p>\n</blockquote>\n\n<p>That seems rather presumptuous, and not entirely correct.  Substantially all machines that implement shared memory regions (in the IPC sense) have virtual memory units by which they support the feature.  There may or may not be any persistent storage backing any particular shared memory segment, or any part of it.  Only the part, if any, that is paged out needs to be backed by such storage.</p>\n\n<blockquote>\n  <p><code>shm_open</code>, apparently, works in the same way. It returns a file descriptor which can even be used with regular file operations (e.g <code>ftruncate</code>, <code>ftell</code>, <code>fseek</code> ...etc).</p>\n</blockquote>\n\n<p>That <code>shm_open()</code> has an interface modeled on that of <code>open()</code>, and that it returns a file descriptor that can meaningfully be used with certain general-purpose I/O function, do not imply that <code>shm_open()</code> \"works in the same way\" in any broader sense.  Pretty much all system resources are represented to processes as files.  This affords a simpler overall system interface, but it does not imply any commonality of the underlying resources beyond the fact that they can be manipulated via the same functions -- to the extent that indeed they can be.</p>\n\n<blockquote>\n  <p>So, what is the string parameter passed to <code>shm_open</code> &amp; what does <code>shm_open</code> creates/opens ?</p>\n</blockquote>\n\n<p>The parameter is a string identifying the shared memory segment.  You already knew that, but you seem to think there's more to it than that.  There isn't, at least not at the level (POSIX) at which the <code>shm_open</code> interface is specified.  The identifier is meaningful primarily to the kernel.  Different implementations handle the details differently.</p>\n\n<blockquote>\n  <p>Is it a file on some temporary filesystem (/tmp) which is eventually used by many processes to create the shared region </p>\n</blockquote>\n\n<p>Could be, but probably isn't.  Any filesystem interface provided for it is likely (but not certain) to be a virtual filesystem, not actual, accessible files on disk.  Persistent storage, if used, is likely to be provided out of the system's swap space.</p>\n\n<blockquote>\n  <p>(Well, i think it has to be some kind of files since it returns a file descriptor) ?</p>\n</blockquote>\n\n<p>Such a conclusion is unwarranted.  Sockets and pipes are represented via file descriptors, too, but they don't have corresponding accessible files.</p>\n\n<blockquote>\n  <p>Or is it some kind of a mysterious and hidden filesystem backed by the kernel ?</p>\n</blockquote>\n\n<p>That's probably a better conception, though again, there might not be any persistent storage at all.  To the extent that there is any, however, it is likely to be part of the system's swap space, which is not all that mysterious.</p>\n"}], "owner": {"reputation": 985, "user_id": 6531241, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XySrX.jpg?s=128&g=1", "display_name": "Karim Manaouil", "link": "https://stackoverflow.com/users/6531241/karim-manaouil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 859, "favorite_count": 1, "accepted_answer_id": 46939548, "answer_count": 2, "score": 3, "last_activity_date": 1508956974, "creation_date": 1508954030, "last_edit_date": 1508956974, "question_id": 46939034, "link": "https://stackoverflow.com/questions/46939034/what-type-of-memory-objects-does-shm-open-use", "title": "What type of memory objects does `shm_open` use?", "body": "<p>Usually, shared memory is implemented using portions of On-Disk files mapped to processes address spaces. Whenever a memory access occurs on the shared region, the filesystem is involved to write changes on the disk which is a great overhead.<br><br> Typically, a call to <code>fopen()</code> returns a file descriptor which is passed to <code>mmap()</code> to create the file's memory map. <code>shm_open</code>, apparently, works in the same way. It returns a file descriptor which can even be used with regular file operations (e.g <code>ftruncate</code>, <code>ftell</code>, <code>fseek</code> ...etc). We do specify a string as a parameter to <code>shm_open</code> but unlike <code>fopen()</code>, it is not a name of a real file on the visible filesystem (mounted HDD, Flash drives, SSD ... etc). The same string name can be used by totally unrelated processes to map the same region into their address spaces.<br><br>\nSo, what is the string parameter passed to <code>shm_open</code> &amp; what does <code>shm_open</code> creates/opens ? Is it a file on some temporary filesystem (/tmp) which is eventually used by many processes to create the shared region (Well, i think it has to be some kind of files since it returns a file descriptor) ? Or is it some kind of a mysterious and hidden filesystem backed by the kernel ?<br><br>\nPeople say <code>shm_open</code> is faster then <code>fopen</code> because no disk operations are involved so the theory i suggest is that the kernel uses an invisible RAM-based filesystem to implement shared memory with <code>shm_open</code> !</p>\n"}, {"tags": ["c", "gcc", "x86", "inline-assembly"], "comments": [{"owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "edited": false, "score": 4, "creation_date": 1508954028, "post_id": 46938995, "comment_id": 80825170, "body": "I understand this isn&#39;t the point of the question, but I would ask why you&#39;re using assembly here..."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1508954186, "post_id": 46938995, "comment_id": 80825270, "body": "I second the question posed by Falcon. What are you tryign to achieve by using inline? As well pushing a value on the stack in inline assembly could yield the incorrect results if the code generated became relative to <i>ESP</i>. The compiler also has no idea that <code>asm volatile ( &quot;pop %eax&quot; )</code> is intended to return any value, and the function is <code>void</code> so it complains."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1508956564, "post_id": 46938995, "comment_id": 80826589, "body": "This code is fraught with so many issues (what you are doing won&#39;t reliably work), but if we assume for sake of argument you wanted to pop a value into EAX a have it as a return value - you&#39;d change <code>void _trim</code> to <code>char *_trim</code> and define a return pointer like <code>char *retptr</code> in the function and then do this at the bottom <code>__asm__ __volatile__ ( &quot;pop %0&quot; : &quot;=r&quot;(retptr) :: &quot;memory&quot; ); return retptr;</code>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1508961004, "post_id": 46938995, "comment_id": 80829121, "body": "Some of us act like a broken record but this link has good advice: <a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">gcc.gnu.org/wiki/DontUseInlineAsm</a>"}], "answers": [{"comments": [{"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 2, "creation_date": 1508959281, "post_id": 46940461, "comment_id": 80828182, "body": "WRT #1: This is especially true if the code is compiled with <code>-fomit-frame-pointer</code>."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1508959410, "post_id": 46940461, "comment_id": 80828256, "body": "@duskwuff : and likely with any level of optimization turned on. Ultimately I think we all agree, what this OP is doing is not valid. But it does still interest me as to why he was doing all this. He must have been dealing with a problem that lead him down this path. I&#39;d be curious to know what it was"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1508959548, "post_id": 46940461, "comment_id": 80828328, "body": "In your update - the code you has the return type as void. Maybe you mean char *"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1508959565, "post_id": 46940461, "comment_id": 80828344, "body": "@MichaelPetch: The problem was thinking (probably having been wrongly taught) that a temp variable is more expensive than pushing/popping on the stack."}, {"owner": {"reputation": 73, "user_id": 6442757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46fe76c26aa962bd1d62f9ee50db584?s=128&d=identicon&r=PG&f=1", "display_name": "JimEli", "link": "https://stackoverflow.com/users/6442757/jimeli"}, "edited": false, "score": 0, "creation_date": 1508982243, "post_id": 46940461, "comment_id": 80836476, "body": "Obviously a different compiler, but the eax idea came from here: <a href=\"https://docs.microsoft.com/en-us/cpp/assembler/inline/writing-functions-with-inline-assembly\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/assembler/inline/&hellip;</a>"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 73, "user_id": 6442757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46fe76c26aa962bd1d62f9ee50db584?s=128&d=identicon&r=PG&f=1", "display_name": "JimEli", "link": "https://stackoverflow.com/users/6442757/jimeli"}, "edited": false, "score": 1, "creation_date": 1508983504, "post_id": 46940461, "comment_id": 80836782, "body": "@JimEli: Microsoft&#39;s idea of inline asm is something completely different and utterly wrong in so many ways. It works (and fundamentally can only work) by turning the C compiler into an ultra-dumb high level assembler in the functions it&#39;s used in. GCC&#39;s inline asm on the other hand integrates with the AST and is compatible with arbitrarily-advanced optimizations, <i>but as a consequence</i> you have to tell it how the asm fits in, satisfy your side of the interface contract, and <i>not lie to it</i>."}], "tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 4, "last_activity_date": 1508959579, "last_edit_date": 1508959579, "creation_date": 1508959093, "answer_id": 46940461, "question_id": 46938995, "link": "https://stackoverflow.com/questions/46938995/how-to-prevent-gcc-warning-that-function-has-no-return-when-inline-assembly/46940461#46940461", "title": "How to prevent GCC warning that function has no return when inline assembly?", "body": "<p>Your inline asm is just completely invalid.</p>\n\n<ol>\n<li><p>You cannot leave an inline asm block with the stack pointer different from what it was when you entered. If you do, any subsequent access to the stack by the compiler will be wrong and all hell will break loose. You can't just \"fix it in a later asm block\" because you have no way to guarantee that the compiler makes no access to the stack in between. In your own example, you call <code>isdigit</code> in between, making a function call without respecting the function call ABI (that the stack must be aligned mod 16 at function call).</p></li>\n<li><p>Loading a value into <code>eax</code> (or whatever the ABI's return-value register is) in a particular asm block <strong>does not</strong> return that value from the function. All it does is clobber a register that you told the compiler you would not clobber (you didn't include it in the clobber list for the asm block), thereby creating another reason all hell could break loose. If the compiler had some important value kept in that register (for example, the stack canary for ssp), and it gets a different value when reading it back, anything could happen. Even ignoring that breakage, there's no reason to think the value you put in <code>eax</code> will still be there when the function returns, or will serve as the function's return value. The compiler may load something else there before it actually returns, or make a transformation (inlining, or various inter-procedural optimizations based on having access to the definition of the function) such that the caller obtains the return value in some other way than what it would use when having made an external call to an unknown function matching the ABI.</p></li>\n</ol>\n\n<p>The way you fix your code (minimizing changes in style) is:</p>\n\n<pre><code>char *trim(char *s) {\n    char *d, *d0;\n\n    d0 = d = s;\n\n    // Ignore everything but digits...\n    while (*s != '\\0') {\n        if (isdigit(*s))\n            *d++ = *s;\n        s++;\n    }\n    *d = '\\0'; // Terminate string.\n\n    return d0;\n}\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6442757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e46fe76c26aa962bd1d62f9ee50db584?s=128&d=identicon&r=PG&f=1", "display_name": "JimEli", "link": "https://stackoverflow.com/users/6442757/jimeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1508959579, "creation_date": 1508953871, "question_id": 46938995, "link": "https://stackoverflow.com/questions/46938995/how-to-prevent-gcc-warning-that-function-has-no-return-when-inline-assembly", "title": "How to prevent GCC warning that function has no return when inline assembly?", "body": "<p>I'm using a bit of inline assembly to load a function return value into the eax register. However, GCC squawks about the function not returning a value if it is defined as such:</p>\n\n<pre><code>char *trim(char *s);\n</code></pre>\n\n<p>This generates the following 2 warnings:</p>\n\n<pre><code>control reaches end of non-void function [-Wreturn-type]\nNo return, in function returning non-void\n</code></pre>\n\n<p>Hence the use of the weak alias below. Is there a better method to prevent GCC from complaining about no return value from the _trim function? I tried to disable the appropriate compiler warning, but I didn\u2019t have much luck with that. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>// Trim all but digits from the string, return start of string.\nvoid _trim(char *s) {\n    char *d;\n\n    // Save start of string for function return and set d=s.\n    asm volatile (\n        \"mov %1, %0 \\n\" // Set d = s.\n        \"push %1\"       // Save start of string for function return.\n        : \"=r\" (d) : \"r\" (s)\n    );\n    // Ignore everything but digits...\n    while (*s != '\\0') {\n        if (isdigit(*s))\n            *d++ = *s;\n        s++;\n    }\n    *d = '\\0'; // Terminate string.\n    asm volatile ( \"pop %eax\" ); // Retrieve beginning of string.\n}\n\n// Define weak alias to prevent gcc from squawking about no return value.\nchar *trim(char *) __attribute__ ((weak, alias (\"_trim\")));\n#endif\n\nint main(void) {\n    char line[80];\n\n// ...\n    if (strlen(trim(line)) == 8)\n// Do something...\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "fftw"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1508953428, "post_id": 46938677, "comment_id": 80824831, "body": "Cast has higher precedence than +, so the addition will be multiplied by sizeof float."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508953948, "post_id": 46938677, "comment_id": 80825124, "body": "If <code>R_FFT_INDEX</code> index is supposed to be an index of an <code>fftwf_complex</code> element relative to the pointer <code>box</code>, then dereference that element by index first, and extract the component you want from the resulting <code>fftwf_complex</code> object.  This is the simplest approach that is actually correct."}, {"owner": {"reputation": 87, "user_id": 8087342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4798bd173dead977fa9bf4c95e99f7e8?s=128&d=identicon&r=PG&f=1", "display_name": "TimeFall", "link": "https://stackoverflow.com/users/8087342/timefall"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1508956186, "post_id": 46938677, "comment_id": 80826388, "body": "R_FFT_INDEX is a pointer relative to box, I think, but it&#39;s built in such a way so as to access the real data that&#39;s stored in box after the transform. I&#39;m still confused as to how that works. @stark I&#39;m not sure I understand what you mean by the addition will be multiplied by sizeof(float)? Does this mean it&#39;s actually element 4 * 45 (assuming a float is 4 bytes)?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1508957871, "post_id": 46938677, "comment_id": 80827324, "body": "When you add 45 to a pointer to a float, you add 45 * sizeof(float) to the number in the pointer.  Pointer arithmetic is always based on the type of object pointed to, which is why ++ works for pointers stepping through an array."}, {"owner": {"reputation": 87, "user_id": 8087342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4798bd173dead977fa9bf4c95e99f7e8?s=128&d=identicon&r=PG&f=1", "display_name": "TimeFall", "link": "https://stackoverflow.com/users/8087342/timefall"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1508959278, "post_id": 46938677, "comment_id": 80828177, "body": "@stark I see. So, since fftwf_complex is defined as typedef float fftwf_complex[2], where [0] is the real part and [1] is the imaginary part, when it gets cast to a float *, *(float *)box + 45 would really be 45 * 4 bytes away from the first address? Is there a way to tell what element of box that corresponds to, or does that question not even make sense to ask in this case?"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1508959958, "post_id": 46938677, "comment_id": 80828541, "body": "I would try to figure out how to eliminate the cast.  It is usually a bad idea."}], "answers": [{"tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": true, "score": 1, "last_activity_date": 1509963340, "creation_date": 1509963340, "answer_id": 47134517, "question_id": 46938677, "link": "https://stackoverflow.com/questions/46938677/pointer-math-with-complex-array/47134517#47134517", "title": "Pointer Math with Complex Array", "body": "<p><code>box</code> is allocated as an array of <code>N</code> <code>fftwf_complex</code>. Then a backward 3D c2r fftw transform using <code>N,N,N</code> is performed on <code>box</code>, requiring <code>N*N*(N/2+1)</code> <code>fftwf_complex</code>. See  <a href=\"http://www.fftw.org/fftw3_doc/Real_002ddata-DFT-Array-Format.html#Real_002ddata-DFT-Array-Format\" rel=\"nofollow noreferrer\">http://www.fftw.org/fftw3_doc/Real_002ddata-DFT-Array-Format.html#Real_002ddata-DFT-Array-Format</a> Therefore, this code might trigger undefined behavior, such as segmentation fault, before reaching the pointer arithmetics...</p>\n\n<p>It is practical to cast back <code>box</code> to an array of float because the DFT is performed in place. Indeed, <code>box</code> is used twice as the fftwf_plan is created. <code>box</code> is both the input array of complex and the output array of real:</p>\n\n<pre><code>plan = fftwf_plan_dft_c2r_3d(N,N,N,box,(float *)box,\n     FFTW_ESTIMATE);\n</code></pre>\n\n<p>Once <code>fftwf_execute(plan);</code> is called, <code>box</code> is better seen as an array of real. Nevertheless, this array is of size <code>N*N*2*(N/2+1)</code>, where the items located at positions i,j,k where k>N-1 are meaningless. See <a href=\"http://www.fftw.org/fftw3_doc/Real_002ddata-DFT-Array-Format.html#Real_002ddata-DFT-Array-Format\" rel=\"nofollow noreferrer\">FFTW's Real-data DFT Array Format</a>:</p>\n\n<blockquote>\n  <p>For an in-place transform, some complications arise since the complex data is slightly larger than the real data. In this case, the final dimension of the real data must be padded with extra values to accommodate the size of the complex data\u2014two extra if the last dimension is even and one if it is odd. That is, the last dimension of the real data must physically contain 2 * (nd-1/2+1) double values (exactly enough to hold the complex data). This physical array size does not, however, change the logical array size\u2014only nd-1 values are actually stored in the last dimension, and nd-1 is the last dimension passed to the planner. </p>\n</blockquote>\n\n<p>This is the reason why the real array <code>smoothed_box</code> is introduced, though an <code>N*N*N</code> array would be expected. If <code>smoothed_box</code> were an array of size <code>N*N*N</code>, then the following conversion could have been performed:</p>\n\n<pre><code>for(i=0;i&lt;N;i++){\n  for(j=0;j&lt;N;j++){\n    for(k=0;k&lt;N;k++){\n     smoothed_box[(i*N+j)*N+k]=((float *)box)[(i*N+j)*(2*(N/2+1))+k]\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8087342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4798bd173dead977fa9bf4c95e99f7e8?s=128&d=identicon&r=PG&f=1", "display_name": "TimeFall", "link": "https://stackoverflow.com/users/8087342/timefall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 47134517, "answer_count": 1, "score": 1, "last_activity_date": 1509963340, "creation_date": 1508952812, "question_id": 46938677, "link": "https://stackoverflow.com/questions/46938677/pointer-math-with-complex-array", "title": "Pointer Math with Complex Array", "body": "<p>I have this snippet of code with some pointer math that I'm having trouble understanding:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;complex.h&gt;\n#include &lt;fftw3.h&gt;\n\nint main(void)\n{\n    int i, j, k;\n    int N, N2;\n    fftwf_complex *box;\n    fftwf_plan plan;\n    float *smoothed_box;\n\n    // Allocate memory for arrays (Ns are set elsewhere and properly,\n    // I've just left it out for clarity)\n    box = (fftwf_complex *)fftwf_malloc(N * sizeof(fftwf_complex));\n    smoothed_box = (float *)malloc(N2 * sizeof(float));\n\n    // Create complex data and fill box with it. Do FFT. Box has the\n    // Hermitian symmetry that complex data has when doing FFTs with \n    // real data\n    plan = fftwf_plan_dft_c2r_3d(N,N,N,box,(float *)box,\n         FFTW_ESTIMATE);\n    ...\n\n    // end fft\n\n    // Now do the loop I don't understand\n    for(i = 0; i &lt; N2; i++)\n    {\n        for(j = 0; j &lt; N2; j++)\n        {\n            for(k = 0; k &lt; N2; k++)\n            {\n                smoothed_box[R_INDEX(i,j,k)] = *((float *)box + \n                    R_FFT_INDEX(i*f + 0.5, j*f + 0.5, k*f +0.5))/V;\n            }\n        }\n    }\n\n    // Do other stuff\n    ...\n\n    return 0;\n}\n</code></pre>\n\n<p>Where f and V are just some numbers that are set elsewhere in the code and don't matter for this particular question. Additionally, the functions R_FFT_INDEX and R_INDEX don't really matter, either. What's important is that, for the first loop iteration ,when i=j=k=0, R_INDEX = 0 and R_FFT_INDEX=45. smoothed_box has 8 elements and box has 320.</p>\n\n<p>So, in gdb, when I print smoothed_box[0] after the loop, I get smoothed_box[0] = some number. Now, I understand that, for an array of normal types, say floats, array + integer will give array[integer], assuming that integer is within the bounds of the array.</p>\n\n<p>However, fftwf_complex is defined as typedef float fftw_complex[2], as you need to hold both the real and imaginary parts of the complex number. It's also being casted to a float * from a fftwf_complex *, and I'm unsure what this does, given the typedef.  </p>\n\n<p>All I know is that when I print box[45] in gdb, I get box[45] = some complex number that is not smoothed_box[0] * V. Even when I print *((float *)box + 45)/V, I get a different number than smoothed_box[0].</p>\n\n<p>So, I was just wondering if anyone could explain to me the pointer math that is being done in the above loop? Thank you, and I appreciate your time!</p>\n"}, {"tags": ["c", "data-structures", "recursive-datastructures"], "comments": [{"owner": {"reputation": 1439, "user_id": 7396613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea7490a33ebc405a244013b37af249ec?s=128&d=identicon&r=PG&f=1", "display_name": "M.K", "link": "https://stackoverflow.com/users/7396613/m-k"}, "edited": false, "score": 0, "creation_date": 1508953052, "post_id": 46938580, "comment_id": 80824637, "body": "Show us what elements doest root have (The node, show us the node, where you create that structure and all the elements)."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1508953557, "post_id": 46938580, "comment_id": 80824900, "body": "Compile with all warnings and debug info: <code>gcc -Wall -Wextra -g</code> with <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a>. <b>Use the debugger</b> <code>gdb</code> (and <code>valgrind</code>). Your fix-my-code question is off-topic here."}, {"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 1, "creation_date": 1508953665, "post_id": 46938580, "comment_id": 80824971, "body": "<code>root</code> is a pointer pointing to a node in the tree. If you assign NULL to <code>root</code> that doesn&#39;t mean the node is deleted but it just breaks the link of <code>root</code> pointer and node it&#39;s pointing to but the parents either <code>left</code> or <code>right</code> pointer is still pointing to that node. You need to <code>free (root)</code> in order to delete it. But just freeing it is not sufficient, you need to break the link between the parent node and the node which has been freed (by assigning NULL to respective <code>left</code> or <code>right</code> pointer). Your <code>delNode()</code> function is incomplete."}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954137, "post_id": 46938580, "comment_id": 80825242, "body": "free(root) removes the existence of the the location root is pointing. \t I want it to be present just that it must be NULL"}], "answers": [{"comments": [{"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954019, "post_id": 46938957, "comment_id": 80825164, "body": "free(root) removes the existence of the the location root is pointing."}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954043, "post_id": 46938957, "comment_id": 80825183, "body": "I want it to be present just that it must be NULL"}, {"owner": {"reputation": 758, "user_id": 7596874, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-43Jhmpr68-k/AAAAAAAAAAI/AAAAAAAAAAc/-weaMEfAr40/photo.jpg?sz=128", "display_name": "Rathan Naik", "link": "https://stackoverflow.com/users/7596874/rathan-naik"}, "reply_to_user": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954150, "post_id": 46938957, "comment_id": 80825247, "body": "@PrajvalM It makes no sense that node has to be present and be NULL, you are contradicting yourself."}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954230, "post_id": 46938957, "comment_id": 80825297, "body": "while printing it out if root == NULL i wont be printing it"}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954383, "post_id": 46938957, "comment_id": 80825379, "body": "like using a nullptr"}, {"owner": {"reputation": 758, "user_id": 7596874, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-43Jhmpr68-k/AAAAAAAAAAI/AAAAAAAAAAc/-weaMEfAr40/photo.jpg?sz=128", "display_name": "Rathan Naik", "link": "https://stackoverflow.com/users/7596874/rathan-naik"}, "reply_to_user": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954427, "post_id": 46938957, "comment_id": 80825404, "body": "<code>*root = NULL</code>; I think this is what you want to achieve."}, {"owner": {"reputation": 758, "user_id": 7596874, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-43Jhmpr68-k/AAAAAAAAAAI/AAAAAAAAAAc/-weaMEfAr40/photo.jpg?sz=128", "display_name": "Rathan Naik", "link": "https://stackoverflow.com/users/7596874/rathan-naik"}, "reply_to_user": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954543, "post_id": 46938957, "comment_id": 80825465, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/157509/discussion-between-rathan-naik-and-prajval-m\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954561, "post_id": 46938957, "comment_id": 80825475, "body": "that won&#39;t work coz the data types will be conflicting"}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954678, "post_id": 46938957, "comment_id": 80825532, "body": "*root = NULL makes no sense"}, {"owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "edited": false, "score": 0, "creation_date": 1508954743, "post_id": 46938957, "comment_id": 80825570, "body": "root is of Node type which is a structure with int data &amp; Node type left and right"}], "tags": [], "owner": {"reputation": 758, "user_id": 7596874, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-43Jhmpr68-k/AAAAAAAAAAI/AAAAAAAAAAc/-weaMEfAr40/photo.jpg?sz=128", "display_name": "Rathan Naik", "link": "https://stackoverflow.com/users/7596874/rathan-naik"}, "is_accepted": false, "score": 2, "last_activity_date": 1508953746, "creation_date": 1508953746, "answer_id": 46938957, "question_id": 46938580, "link": "https://stackoverflow.com/questions/46938580/root-null-not-working-in-my-c-program/46938957#46938957", "title": "root = NULL not working in my C program", "body": "<p>This will not delete the node, root is just a reference to a memory location.<br>\nHere is a simple explanation:<br>\nSo <code>root</code> its like an arrow to a box, you are pointing an arrow to some box(memory location) say box1 with some contents. Here <code>root = NULL</code> you are pointing the arrow to nothing that is say an empty space, but box1 still has the contents in it.</p>\n\n<p>What you need to do is, clear the contents of the box1</p>\n\n<pre><code>free(root);   //This is make memory space available, i.e deallocates the memory \n</code></pre>\n\n<p>Also your logic to tree node deletion is flawed/incomplete(probably incomplete), but I believe you know that already.</p>\n"}, {"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1509379206, "creation_date": 1509379206, "answer_id": 47019511, "question_id": 46938580, "link": "https://stackoverflow.com/questions/46938580/root-null-not-working-in-my-c-program/47019511#47019511", "title": "root = NULL not working in my C program", "body": "<p>your <code>delNode</code> method is not correct. Deleting a node from a tree is not so simple. Just consider how will you handle left sub-tree and right sub-tree of the node to be deleted. By assigning <code>root= NULL;</code>  you are not going to achieve anything at all. By using free(root) also you are not going to achieve anything but permanently delete the child nodes (child trees) of root currently pointing to. I have corrected you method see below and try with this:-</p>\n\n<pre><code>    Node* delNode(int key, Node *root) {\n      Node *nodeToBeDeleted=NULL\n      Node *predecessor = root;\n      if(root-&gt;data != key &amp;&amp; root-&gt;left != NULL) {\n        nodeToBeDeleted = delNode(key,root-&gt;left);\n        if(nodeToBeDeleted){  //if we found the node to be deleted in left sub tree\n          if(nodeToBeDeleted-&gt;right != NULL){\n             root-&gt;left = nodeToBeDeleted-&gt;right;\n             predecessor = findPredecessor(root-&gt;right);\n             predecessor-&gt;left = nodeToBeDeleted-&gt;left;\n          }          \n          else{\n             root-&gt;left = nodeToBeDeleted-&gt;left;\n          }\n          free(nodeToBeDeleted);\n        }\n      }\n      if(root-&gt;data != key &amp;&amp; root-&gt;right != NULL) {\n        nodeToBeDeleted = delNode(key,root-&gt;right);\n         if(nodeToBeDeleted){  //if we found the node to be deleted in the right sub tree\n            if(nodeToBeDeleted-&gt;right != NULL){\n             root-&gt;right = nodeToBeDeleted-&gt;right;\n             predecessor = findPredecessor(root-&gt;right);\n             predecessor-&gt;left = nodeToBeDeleted-&gt;left;\n          }          \n          else{\n             root-&gt;right = nodeToBeDeleted-&gt;left;\n          }\n          free(nodeToBeDeleted);\n         }\n      }\n      if(root-&gt;data != key &amp;&amp; root-&gt;left == NULL) {\n        return NULL;\n      }\n      if(root-&gt;data != key &amp;&amp; root-&gt;right == NULL) {\n        return NULL;\n      }\n      if(root-&gt;data == key) {\n        return root;\n      }\n\n    }\n</code></pre>\n\n<p>add the below method to find predecessor node of the tree</p>\n\n<pre><code>    Node* findPredecessor(Node *root) {\n     Node *predecessor = root;\n      if(root!=NULL) {\n        predecessor = findPredecessor(root-&gt;left);   \n      }\n      if(predecessor == NULL)\n            return root;\n      else\n            return predecessor;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1521188897, "creation_date": 1521188897, "answer_id": 49316138, "question_id": 46938580, "link": "https://stackoverflow.com/questions/46938580/root-null-not-working-in-my-c-program/49316138#49316138", "title": "root = NULL not working in my C program", "body": "<p>I needed to free the node first and then use delete. My bad.</p>\n"}], "owner": {"reputation": 1948, "user_id": 8690313, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-hQ93tpA6Lmk/AAAAAAAAAAI/AAAAAAAAB2I/7F3CoNnnhts/photo.jpg?sz=128", "display_name": "Prajval M", "link": "https://stackoverflow.com/users/8690313/prajval-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1521188897, "creation_date": 1508952504, "last_edit_date": 1508953417, "question_id": 46938580, "link": "https://stackoverflow.com/questions/46938580/root-null-not-working-in-my-c-program", "title": "root = NULL not working in my C program", "body": "<p>I have created the following function to delete a Node from a tree:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>void delNode(int key, Node *root) {\n  if(root-&gt;data != key &amp;&amp; root-&gt;left != NULL) {\n    delNode(key,root-&gt;left);\n  }\n  if(root-&gt;data != key &amp;&amp; root-&gt;right != NULL) {\n    delNode(key,root-&gt;right);\n  }\n  if(root-&gt;data != key &amp;&amp; root-&gt;left == NULL) {\n    return;\n  }\n  if(root-&gt;data != key &amp;&amp; root-&gt;right == NULL) {\n    return;\n  }\n  if(root-&gt;data == key) {\n    root = NULL;\n    return;\n  }\n}\n</code></pre>\n\n<p>I have the following function for traversal</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void printInorder(Node *root) {\n  if(root!=NULL) {\n    printInorder(root-&gt;left);\n    printf(\"%d \",root-&gt;data);\n    printInorder(root-&gt;right);\n  }\n}\n</code></pre>\n\n<p>When I delete an element &amp; display the tree even the deleted node is shown.</p>\n\n<p>PS: I want to delete the entire tree keeping the Node as the root</p>\n"}, {"tags": ["c", "loops"], "comments": [{"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1508952170, "post_id": 46938469, "comment_id": 80824108, "body": "scanf() requires you to pass a pointer to the variable.  So use xPtr or &amp;x, not *xPtr."}], "answers": [{"tags": [], "owner": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "is_accepted": true, "score": 1, "last_activity_date": 1508952503, "creation_date": 1508952503, "answer_id": 46938578, "question_id": 46938469, "link": "https://stackoverflow.com/questions/46938469/encountering-critical-error-after-using-scanf-to-enter-a-number/46938578#46938578", "title": "Encountering critical error after using scanf to enter a number", "body": "<p>scanf requires you to send the address to where the data will be saved, for example:</p>\n\n<pre><code>int x;\nscanf(\"%d\", &amp;x); // save to address of x\n</code></pre>\n\n<p>In your example, you need to send either the adress of x, or the pointer (which saves the address of x)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8748717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ea99cc8e5f169c72cb699e192be85f?s=128&d=identicon&r=PG", "display_name": "redBhutan", "link": "https://stackoverflow.com/users/8748717/redbhutan"}, "is_accepted": false, "score": 0, "last_activity_date": 1508954473, "last_edit_date": 1508954473, "creation_date": 1508954163, "answer_id": 46939082, "question_id": 46938469, "link": "https://stackoverflow.com/questions/46938469/encountering-critical-error-after-using-scanf-to-enter-a-number/46939082#46939082", "title": "Encountering critical error after using scanf to enter a number", "body": "<p>Hang on, just a thought, did you try removing the extra '*' in your scanf statement for the arguments? So for instance, instead of scanf(\"%lf\", *something)  you use\nscanf(\"%lf\", something).</p>\n\n<p>Scanf expects an address but what you seem to be doing is giving it a 'value' instead of an address. That's what adding the * to a pointer does. That expression * on a pointer variable means it is now a value and not an address. The address itself is the pointer variable name which you initialized. So just use the pointer variable without the preceding asterix (*) and see if that works.</p>\n"}], "owner": {"reputation": 3, "user_id": 8832980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d80363ee5db4675d224a57c825368e3a?s=128&d=identicon&r=PG&f=1", "display_name": "sla2yer", "link": "https://stackoverflow.com/users/8832980/sla2yer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 46938578, "answer_count": 2, "score": -2, "last_activity_date": 1508956003, "creation_date": 1508952046, "last_edit_date": 1508956003, "question_id": 46938469, "link": "https://stackoverflow.com/questions/46938469/encountering-critical-error-after-using-scanf-to-enter-a-number", "title": "Encountering critical error after using scanf to enter a number", "body": "<p>Okay I am coding in C and using Codeblocks. I am trying to use the taylor series to calculate sinh(x) to practice loops. My program runs but after I enter a number it runs into a critical error and crashes. </p>\n\n<p>I am fairly certain my error occurs somewhere in the assigning of a valuethrough the use of a pointer at the first scanf line in the getInput function, these lines in question being:</p>\n\n<pre><code>        printf (\"please enter the value of x\\n\");\n        scanf (\"%lf\", *xPtr);\n        printf (\"please enter the number of terms you would like to use\\n\");\n        scanf (\"%lf\", *nPtr);\n</code></pre>\n\n<p>The whole of my mess of a code is as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n//Global declerations\ndouble x, *xPtr = &amp;x; //declares variable x and the x pointer\ndouble n, *nPtr = &amp;n; //declares variable n and the n pointer\n\n//Function protypes\nvoid getInput ();\ndouble sinHyper ();\n\n\n/*-------------------------------------------------------------\nfunction: main\nDescription: calls the funtion getInput to get the input values, the\n        value of x and the number of terms (n), from the user.\n        main then calls calls the function sinHyper to compute\n        the value of sinh(x)\n\n---------------------------------------------------------------*/\nvoid main (shx)\n{\n  // variable declarations\n\n getInput();\n double sinhx, *sinhxPtr;\n\n *sinhxPtr = shx;\n printf(\"sinh(%.6e)\\n\", *sinhxPtr);\n\n}\n\nvoid getInput (void)\n{\n\n  printf (\"please enter the value of x\\n\");\n  scanf (\"%lf\", *xPtr);\n  printf (\"please enter the number of terms you would like to use\\n\");\n  scanf (\"%lf\", *nPtr);\n  while  (*nPtr &lt;= 0 ) {\n    printf (\"please enter make sure to use at least 1 term(s) for the computation of sinhx \\n\");\n    scanf (\"%lf\", *nPtr);\n  }\n}\n\n\ndouble sinHyper ()\n{\n    double shx, *shxPtr = &amp;shx;\n    double i;\n    i = 1;\n    double priorTerm, *pTPtr;   //pTPtr = PriorTermPointer\n    pTPtr = &amp;priorTerm;\n\n    do\n    {\n        if ( i == *nPtr )\n            *shxPtr = *xPtr;\n        else\n            {\n            *pTPtr = *xPtr;\n            *pTPtr = ((pow((*xPtr), 2))/((2*i+1)*2*i))+(*pTPtr);\n                i = i + 1;\n\n                if (i != *nPtr)\n                {\n                  *pTPtr = ((pow((*xPtr), 2))/((2*i+1)*2*i))+(*pTPtr);\n                  i = i + 1;\n                }\n\n            }\n    }\n    while ( i != *nPtr );\n    if (*nPtr == 1)\n      return shx;\n\n    else\n      *shxPtr = *pTPtr;\n    return shx;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "edited": false, "score": 0, "creation_date": 1508951434, "post_id": 46938277, "comment_id": 80823685, "body": "do I need to initialize it to NULL at first?"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1508951454, "post_id": 46938277, "comment_id": 80823694, "body": "Whats <code>pNode[numElem];</code>?"}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508951499, "post_id": 46938277, "comment_id": 80823722, "body": "How did you declare and initialize <code>pNode</code>?"}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1508951559, "post_id": 46938277, "comment_id": 80823757, "body": "@tkausl that initializes the size so pNode[12];"}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508951586, "post_id": 46938277, "comment_id": 80823774, "body": "@Cmi that&#39;s not an initialization. It&#39;s an access..."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1508951600, "post_id": 46938277, "comment_id": 80823778, "body": "It doesn&#39;t. And <code>pNode</code> was never declared."}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508951625, "post_id": 46938277, "comment_id": 80823791, "body": "@litelite pNode is a pointer of Node that I pass through the functon"}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508951654, "post_id": 46938277, "comment_id": 80823803, "body": "@Cmi and how does the caller initialize the memory for <code>pNode</code>?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1508951660, "post_id": 46938277, "comment_id": 80823808, "body": "We need to see the <i>entire function</i>."}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508951776, "post_id": 46938277, "comment_id": 80823863, "body": "@zwol Just edited it"}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508951803, "post_id": 46938277, "comment_id": 80823884, "body": "@litelite I set the memory manually"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1508951813, "post_id": 46938277, "comment_id": 80823898, "body": "please read this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508951888, "post_id": 46938277, "comment_id": 80823938, "body": "@Cmi Show the code."}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508951932, "post_id": 46938277, "comment_id": 80823957, "body": "@litelite I just did"}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508952105, "post_id": 46938277, "comment_id": 80824061, "body": "@Cmi you did not initialize any memory. You just created a dangling pointer. So (unless there is any other code in that function) <code>pNode[numElem];</code> will just access some random memory which is undefined behavior."}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508952143, "post_id": 46938277, "comment_id": 80824085, "body": "@litelite so my pNode[numElem] does nothing than?"}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1508952177, "post_id": 46938277, "comment_id": 80824116, "body": "@Cmi it reads a random adress in memory, that&#39;s what it does."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508952395, "post_id": 46938277, "comment_id": 80824240, "body": "@Cmi,litelite More precisely, it <i>would</i> read a random address in memory, but the value isn&#39;t used, so the compiler won&#39;t bother generating code to do anything at all because of that statement."}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508952936, "post_id": 46938277, "comment_id": 80824546, "body": "@zwol True, but it would in debug mode where the code is not optimized."}], "answers": [{"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1508952272, "post_id": 46938493, "comment_id": 80824173, "body": "Good for you figuring this out for yourself, but do you realize that you have created an array, not a linked list?  (Maybe you <i>mean</i> to make an array of linked list heads?)"}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508952367, "post_id": 46938493, "comment_id": 80824225, "body": "@zwol I am making a linked list but am starting slow though"}, {"owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508953832, "post_id": 46938493, "comment_id": 80825058, "body": "@zwol by the way is it better to use realloc?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508955925, "post_id": 46938493, "comment_id": 80826240, "body": "realloc is for when you already have a chunk of memory allocated (by malloc) and you need to change how big it is."}], "tags": [], "owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "is_accepted": true, "score": 1, "last_activity_date": 1508952405, "last_edit_date": 1508952405, "creation_date": 1508952164, "answer_id": 46938493, "question_id": 46938277, "link": "https://stackoverflow.com/questions/46938277/why-is-my-program-crashing-when-i-try-to-initialize-my-pointer/46938493#46938493", "title": "Why is my program crashing when I try to initialize my pointer?", "body": "<p>I needed this <code>pNode = malloc(numElem * sizeof(Node));</code></p>\n"}, {"comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508952237, "post_id": 46938502, "comment_id": 80824151, "body": "<a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Don&#39;t cast the result of <code>malloc</code></a>."}, {"owner": {"reputation": 349, "user_id": 2866386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/930fd6e80836bed94d8df3d114cc1143?s=128&d=identicon&r=PG&f=1", "display_name": "asam", "link": "https://stackoverflow.com/users/2866386/asam"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508952412, "post_id": 46938502, "comment_id": 80824253, "body": "zwol, that depends on the compiler. so your classification is wrong! if, for example, it is necessary to compile with C++ also, it is requested to use the cast. I add C++ to my answer!"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508952465, "post_id": 46938502, "comment_id": 80824288, "body": "No, it doesn&#39;t depend on the compiler."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1508952910, "post_id": 46938502, "comment_id": 80824535, "body": "The question is about C only.  Casting the result of malloc is an actively bad practice in C and should never be encouraged.  Only when someone specifically requires code that can be compiled as both C and C++ should you include that cast."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1509051451, "post_id": 46938502, "comment_id": 80875181, "body": "No, it is not. The question is about C only."}], "tags": [], "owner": {"reputation": 349, "user_id": 2866386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/930fd6e80836bed94d8df3d114cc1143?s=128&d=identicon&r=PG&f=1", "display_name": "asam", "link": "https://stackoverflow.com/users/2866386/asam"}, "is_accepted": false, "score": -1, "last_activity_date": 1508952708, "last_edit_date": 1508952708, "creation_date": 1508952192, "answer_id": 46938502, "question_id": 46938277, "link": "https://stackoverflow.com/questions/46938277/why-is-my-program-crashing-when-i-try-to-initialize-my-pointer/46938502#46938502", "title": "Why is my program crashing when I try to initialize my pointer?", "body": "<p>You need to allocate memory for pNode, for your case (C language) it could be,</p>\n\n<pre><code>pNode = (Node *)malloc( numElem * sizeof(Node) );\n</code></pre>\n\n<p>The cast is not required for strict C, but for C++ it is.</p>\n"}], "owner": {"reputation": 359, "user_id": 6913879, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/413be750139b5b0cd86f575bb64028df?s=128&d=identicon&r=PG&f=1", "display_name": "Cmi", "link": "https://stackoverflow.com/users/6913879/cmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 46938493, "answer_count": 2, "score": -2, "last_activity_date": 1511008504, "creation_date": 1508951350, "last_edit_date": 1511008504, "question_id": 46938277, "link": "https://stackoverflow.com/questions/46938277/why-is-my-program-crashing-when-i-try-to-initialize-my-pointer", "title": "Why is my program crashing when I try to initialize my pointer?", "body": "<p>So my program runs the numElements method but than crashes, am I declaring my variables wrong or is my pointer variable wrong?</p>\n\n<p>Header.h</p>\n\n<pre><code>typedef struct Node {\nint number;\nstruct Node *pNext;\n}Node;\n</code></pre>\n\n<p>Other.h</p>\n\n<pre><code>void LinkedList(Node *pNode){\n\nint i,j,c,numElem;\ntime_t t;\nsrand((unsigned) time(&amp;t));\nnumElem = numElements();\npNode[numElem];\n\nfor(i = 0; i &lt; numElem; i++){\n\n    pNode[i].number = (rand() % (MAX - MIN)) + MIN;\n    //c = (rand() % (MAX - MIN)) + MIN;\n    printf(\"P is %d\\n\",pNode[i].number);\n    printf(\"C = %d\",c);\n\n   }\n}\n</code></pre>\n\n<p>Main.c </p>\n\n<pre><code>Node *pNode;\nLinkedList(pNode);\n</code></pre>\n"}, {"tags": ["c", "string", "scanf"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1508950574, "post_id": 46937996, "comment_id": 80823219, "body": "What&#39;s <code>&quot;%[^\\n]s&quot;</code>??? How did you build this format and why? What was your reasoning behind it?"}, {"owner": {"reputation": 979, "user_id": 7946951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BdBV7.jpg?s=128&g=1", "display_name": "Deepak Singh", "link": "https://stackoverflow.com/users/7946951/deepak-singh"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1508950818, "post_id": 46937996, "comment_id": 80823339, "body": "@xin after adding one space in the second scanf, able to read the second string. its working fine. But why need to add one extra space?"}], "owner": {"reputation": 979, "user_id": 7946951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/BdBV7.jpg?s=128&g=1", "display_name": "Deepak Singh", "link": "https://stackoverflow.com/users/7946951/deepak-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1508951028, "answer_count": 0, "score": 0, "last_activity_date": 1508950326, "creation_date": 1508950326, "question_id": 46937996, "link": "https://stackoverflow.com/questions/46937996/through-scanf-not-able-to-get-two-strings", "closed_reason": "Duplicate", "title": "Through scanf not able to get two strings", "body": "<p>I tried to read the two string through scanf, but only first string able to read. Second scanf is not able to read the string and once control is going to second printf, getting some garbage values.</p>\n\n<pre><code>code:\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nint main(){\n\n        char string1[20], string2[20];\n\n        printf(\"Enter the first string :\");\n        scanf(\"%[^\\n]s\", string1);\n\n        printf(\"Enter the second string:\");\n        scanf(\"%[^\\n]s\", string2);\n\n        printf(\"First string  = %s\\n\", string1);\n        printf(\"Second string = %s\\n\", string2);\n        return 0;\n}\n\n\noutput:\n\n$ ./a.out \nEnter the first string :c programming\nEnter the second string:First string  = c programming\nSecond string = \ufffd@\n$\n</code></pre>\n"}, {"tags": ["c", "recursion", "minimax"], "answers": [{"tags": [], "owner": {"reputation": 708, "user_id": 4385757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc6b2e30d36fe104d543582b8b217432?s=128&d=identicon&r=PG&f=1", "display_name": "chessprogrammer", "link": "https://stackoverflow.com/users/4385757/chessprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1509062222, "creation_date": 1509062222, "answer_id": 46965515, "question_id": 46937970, "link": "https://stackoverflow.com/questions/46937970/connect-four-comparison-of-evaluation-c/46965515#46965515", "title": "connect four - comparison of evaluation - c", "body": "<blockquote>\n  <p>Or do I really need to introduce something new more complex? Or maybe\n  I'm missing off something completely?</p>\n</blockquote>\n\n<p>Unfortunately the answer is the latter. Minimax is not a void function. It returns the value of the node that it represents. That is how evaluation is compared. You are also missing another fundamental concept. Your function only considers terminal nodes to be those where the game is won or the board is full. While this is technically true, no real minimax function works that way. The number of nodes would be around 7^48, so your function would literally take upwards of ten years to terminate on a modern pc. What real world minimax functions do is set a maximum depth for the search to reach (unless you add tree pruning expect this to be 5 or 6), and consider all nodes at that depth to be terminal and evaluate them using a heuristic (inexact guess) evalation function. In connect four this could be based on something like the number of three in a rows. Another mistake you made is calling your eval function if you know there is a winner. If you know which player won than return the proper value straight out, no need to call the expensive eval function. You also cannot stream line your function for both min and max as you did. You must either create a seperate function for min and max, or use the negamax variant.</p>\n\n<p>My advise: It seems you don't really understand how the algorithm should be implemented. Read up on minimax and negamax psuedocode.</p>\n"}], "owner": {"reputation": 49, "user_id": 8110165, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0f7c05a059250fab42145a7e7308178?s=128&d=identicon&r=PG&f=1", "display_name": "whatever.idc", "link": "https://stackoverflow.com/users/8110165/whatever-idc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1509062222, "creation_date": 1508950230, "question_id": 46937970, "link": "https://stackoverflow.com/questions/46937970/connect-four-comparison-of-evaluation-c", "title": "connect four - comparison of evaluation - c", "body": "<p>I try to implement the minimax algorithm into my connect four game.\nI\u00b4m done with the evaluation-function and halfway done with the algorithm-function. </p>\n\n<p>I just can`t find the solution for the \"last\" problem. Here are my functions:</p>\n\n<pre><code>void minimax(field f){\nint i;\nfield c;\nconvert_1D_to_2D(f, c);\nfor(i=0;i&lt;COLS;i++) {\n    if(can_throw(c, i) == 0) {\n        throw(f, i);\n        convert_1D_to_2D(f, c);\n        if((is_winner(c) == 0) &amp;&amp; (is_board_full(f) == 0)) { //no winner, board not full\n            minimax(f);\n        }\n        else if(is_winner(c) == 1) { //there is a winner\n            evaluate_turn(f);\n            //compare evaluation\n            undo_turn(f);\n        }\n        else if(is_winner(c) == 0 &amp;&amp; (is_board_full(f) == 1)) { //no winner, board full\n            evaluate_turn(f);\n            //compare evaluation\n            undo_turn(f);\n        }\n    }\n}\n</code></pre>\n\n<p>The field is an array with f[COLS*ROWS+1], where f[0] is the depth and the other elements save in which columns were thrown. the \"c\"-board represents the \"graphical\" board with 0 for free, 1 for player 1 and 2 for player 2.</p>\n\n<pre><code>static int evaluate_turn(field f) {\nfield c;\nconvert_1D_to_2D(f, c);\nif (((f[0] % 2) == 1) &amp;&amp; (current_player == 1) &amp;&amp; (is_winner(c) == 1) ) { //player 1 won, max for him || +1\n    return 1;\n}\nelse if (((f[0] % 2) == 2) &amp;&amp; (current_player == 2) &amp;&amp; (is_winner(c) == 1) ) { //player 2 won, max for him || +1\n    return 1;\n}\nif (((f[0] % 2) == 1) &amp;&amp; (current_player == 2) &amp;&amp; (is_winner(c) == 1) ) { //player 2 won, counting for 1 || -1\n    return -1;\n}\nelse if (((f[0] % 2) == 2) &amp;&amp; (current_player == 1) &amp;&amp; (is_winner(c) == 1) ) { //player 1 won, counting for 2 || -1\n    return -1;\n}\nelse if ((is_board_full(f) == 1) &amp;&amp; (is_winner(c) == 0)) { //draw || 0\n    return 0;\n}\n</code></pre>\n\n<p>So my problem is, that i can't think of a clean solution to compare the evaluation bottom to top. I really think, that I don't need to introduce a new datastructure (which would get way too big). It's like the solution is right in front of me but i can't grab it.</p>\n\n<p>Is it possible to just compare the evaluation on the \"way back\" of the recursion? If yes, how?</p>\n\n<p>Or do I really need to introduce something new more complex? Or maybe I'm missing off something completely?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1508949861, "post_id": 46937790, "comment_id": 80822816, "body": "You&#39;re missing the code to add it to the linked list."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1508949911, "post_id": 46937790, "comment_id": 80822852, "body": "@harper Perhaps <a href=\"https://en.wikipedia.org/wiki/Third_gender\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Third_gender</a>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1508950235, "post_id": 46937790, "comment_id": 80823037, "body": "@harper perhaps Hermaphrodite?"}, {"owner": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "edited": false, "score": 0, "creation_date": 1508963952, "post_id": 46937790, "comment_id": 80830553, "body": "Why not use typedef for student struct and course struct?"}, {"owner": {"reputation": 21, "user_id": 8585370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d22e28d75a531869b8eab2435fd78c31?s=128&d=identicon&r=PG&f=1", "display_name": "dp123", "link": "https://stackoverflow.com/users/8585370/dp123"}, "reply_to_user": {"reputation": 1353, "user_id": 2464664, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/E7FRL.jpg?s=128&g=1", "display_name": "AAB", "link": "https://stackoverflow.com/users/2464664/aab"}, "edited": false, "score": 0, "creation_date": 1508965429, "post_id": 46937790, "comment_id": 80831382, "body": "@AAB because these structs were predefined, i am not allowed to change it!"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1509003435, "creation_date": 1509003435, "answer_id": 46948374, "question_id": 46937790, "link": "https://stackoverflow.com/questions/46937790/creating-a-linked-list-to-enroll-students-in-c/46948374#46948374", "title": "Creating a linked list to enroll students in C", "body": "<p>The <code>enroll_student</code> function is <strong>not</strong> for inserting anything in a linked list. The purpose of the function is to a) create a new student object and b) initialize the object. So it is a function that you call when you want a new student object but the code for inserting student objects in a linked list has to be added outside the function. Something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_NAME_LEN 100\n\ntypedef enum _SEX {MALE = 'M', FEMALE = 'F', OTHER = 'O'} SEX;\n\nstruct course {\n  char grade;\n  unsigned int number;\n  struct course *next;\n};\n\nstruct student {\n  char name[MAX_NAME_LEN];\n  unsigned int age;\n  SEX sex;\n  float gpa;\n  struct course *courses;\n  struct student *next;\n};\n\nstruct student* enroll_student(char *name, unsigned int age, SEX sex, float gpa){\n  struct student *enroll = NULL;\n  /*allocate memory*/\n  enroll = malloc(sizeof *enroll);\n\n  if(enroll != NULL){\n    /*INITIALIZE*/\n    strncpy(enroll-&gt;name, name, MAX_NAME_LEN);\n    enroll-&gt;age = age;\n    enroll-&gt;sex = sex;\n    enroll-&gt;gpa = gpa;\n    enroll-&gt;courses = NULL;\n    enroll-&gt;next = NULL;\n\n  }\n  return enroll;\n}\n\nint main(void) {\n  static struct student *head = NULL;\n  struct student* st;\n\n  // Make a new student\n  st = enroll_student(\"Bart\", 21, MALE, 1.0);\n\n  // Insert in front of list\n  st-&gt;next = head;\n  head = st;\n\n  // Make a new student\n  st = enroll_student(\"Kim\", 25, FEMALE, 1.0);\n\n  // Insert in front of list\n  st-&gt;next = head;\n  head = st;\n\n  // Print all students in the list\n  struct student* tmp = head;\n  while (tmp)\n  {\n    printf(\"Name: %s\\n\", tmp-&gt;name);\n    tmp = tmp-&gt;next;\n  }\n\n  // Free allocated memory\n  while (head)\n  {\n    tmp = head;\n    head = head-&gt;next;\n    free(tmp);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Name: Kim\nName: Bart\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8585370, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d22e28d75a531869b8eab2435fd78c31?s=128&d=identicon&r=PG&f=1", "display_name": "dp123", "link": "https://stackoverflow.com/users/8585370/dp123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "accepted_answer_id": 46948374, "answer_count": 1, "score": -1, "last_activity_date": 1509028234, "creation_date": 1508949557, "last_edit_date": 1509028234, "question_id": 46937790, "link": "https://stackoverflow.com/questions/46937790/creating-a-linked-list-to-enroll-students-in-c", "title": "Creating a linked list to enroll students in C", "body": "<p>In parser.h:</p>\n\n<pre><code>typedef enum _SEX {MALE = 'M', FEMALE = 'F', OTHER = 'O'} SEX;\n\nstruct course {\n char grade;\n unsigned int number;\n struct course *next;\n};\n\nstruct student {\n  char name[MAX_NAME_LEN];\n  unsigned int age;\n  SEX sex;\n  float gpa;\n  struct course *courses;\n  struct student *next;\n };\n</code></pre>\n\n<p>In parser.c: \nI have a function struct student * enroll_student(...) which I cannot change. This function creates a new student and store it in its appropriate position (following dictionary order) in the list. This is what I have so far.... \nMY question: I don't know how to access the enum SEX and I do not know if this is the correct approach. \nAny feedback or help will be really appreciated. Thank you! </p>\n\n<pre><code>   /*globally declared*/\n   static struct student *head; \n\nstruct student* enroll_student(char *name, unsigned int age, SEX sex, float gpa){\n\n struct student *enroll = NULL;\n   /*allocate memory*/\n    enroll = (struct student*)malloc(sizeof(struct));\n\n  if(enroll != NULL){\n    /*INITIALIZE*/\n    strncpy(enroll-&gt;name, name, MAX_NAME_LEN);\n    enroll-&gt;age = age; \n    /* How do I access the ENUM SEX?*/\n    enroll-&gt;gpa = gpa; \n    enroll-&gt;next = NULL;\n\n   }\n   return enroll;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1508948343, "post_id": 46937414, "comment_id": 80822008, "body": "Variable-length arrays are in C99. Maybe you&#39;re using an older compiler?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1508950019, "post_id": 46937414, "comment_id": 80822911, "body": "It would also possibly be an issue if OP is using C11, depending on the compiler, as VLA support was made optional."}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 1, "creation_date": 1508949868, "post_id": 46937564, "comment_id": 80822824, "body": "C/C++ is not a language.  This is a C question so answers relating to C++ constructs are off topic.  Furthermore, C99 supports Variable Length Arrays, and C11 has optional support for VLAs."}, {"owner": {"reputation": 1985, "user_id": 1136400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6MCZ.png?s=128&g=1", "display_name": "Doncho Gunchev", "link": "https://stackoverflow.com/users/1136400/doncho-gunchev"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1508951012, "post_id": 46937564, "comment_id": 80823450, "body": "You are correct. C++ does not, C11 does.. will fix the answer shortly..."}], "tags": [], "owner": {"reputation": 1985, "user_id": 1136400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6MCZ.png?s=128&g=1", "display_name": "Doncho Gunchev", "link": "https://stackoverflow.com/users/1136400/doncho-gunchev"}, "is_accepted": false, "score": -1, "last_activity_date": 1508951674, "last_edit_date": 1508951674, "creation_date": 1508948792, "answer_id": 46937564, "question_id": 46937414, "link": "https://stackoverflow.com/questions/46937414/why-is-this-not-valid-in-c-arrays/46937564#46937564", "title": "Why is this not valid in C (Arrays)?", "body": "<p>There is <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a> support in C99 and C11 (optional). With GCC 7.2.1 your example works. I compiled like this:</p>\n\n<pre><code>gcc abc.c -o abc\n\ngcc --std=c99 abc.c -o abc\n</code></pre>\n\n<p>Looks like your compiler does not support this feature.</p>\n"}], "owner": {"reputation": 1, "user_id": 8832816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43758b1c2aae1f1aaf89b0368a7db538?s=128&d=identicon&r=PG&f=1", "display_name": "Tanmay Hole", "link": "https://stackoverflow.com/users/8832816/tanmay-hole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "closed_date": 1508949051, "answer_count": 1, "score": 0, "last_activity_date": 1508951674, "creation_date": 1508948271, "question_id": 46937414, "link": "https://stackoverflow.com/questions/46937414/why-is-this-not-valid-in-c-arrays", "closed_reason": "Duplicate", "title": "Why is this not valid in C (Arrays)?", "body": "<pre><code>#include&lt;stdio.h&gt;\nint main(){\n    int n;\n    printf(\"Enter a value for n\\n\");\n    scanf(\"%d\",&amp;n);\n    int A[n];\n}\n</code></pre>\n\n<p>Why can't I assign the size of an array explicitly from a user?</p>\n"}, {"tags": ["c++", "c", "linux", "gcc"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1508947916, "post_id": 46937263, "comment_id": 80821751, "body": "Most Linux distributions have a separate package that includes all the development files. On Fedora, for example, you would install the libstdc++-devel package."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508948683, "post_id": 46937263, "comment_id": 80822198, "body": "Thanks, so I could download something similar for Ubuntu?  I&#39;m concerned as I  am compiling a simple c file and when making larger projects in Cmake, I get complaints that it can&#39;t find the cc1.exe, and it can&#39;t as its not present in the include directory of the compiler I am using"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508949075, "post_id": 46937263, "comment_id": 80822389, "body": "Use the dpkg command to search for all packages whose names contain &quot;gcc&quot; or &quot;libstdc&quot;. Read their description. Read the documentation for the dpkg command. Figure it out yourself."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508949290, "post_id": 46937263, "comment_id": 80822505, "body": "what kind of advice is that - figure it out yourself, don&#39;t you think I tried.  I can read the description of every version of gcc i have installed, where is that going to get me when I have a specific query"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1508949563, "post_id": 46937263, "comment_id": 80822648, "body": "The most useful skill a developer can have is to know where to find and how to understand technical documentation. For example had you read the documentation I referred you to, you would&#39;ve known that it includes not only packages that are already installed, but all packages that <b><i>can</i></b> be installed, in addition. Then, it becomes trivial to review the list, and install the ones that tell you they&#39;re for C++."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508949815, "post_id": 46937263, "comment_id": 80822784, "body": "well, firstly I am not a developer but trying my best, secondly i have installed libstdc++ no to avail"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508950244, "post_id": 46937263, "comment_id": 80823042, "body": "I just verified on someone else&#39;s Ubuntu 16 laptop, using dpkg, that one needs to install the &quot;g++&quot; and the correct &quot;libstdc++-dev&quot; packages. And I didn&#39;t have to ask someone else on stackoverflow.com to do this for me."}, {"owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1508950519, "post_id": 46937263, "comment_id": 80823193, "body": "I&#39;ve already installed g++ and libstdc++6 still the same error  p.s you are a better developer than me - this isn&#39;t a competition - i&#39;ve been struggling for two days"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1508953121, "post_id": 46937263, "comment_id": 80824682, "body": "Learn to read carefully.  <code>libstdc++6</code> is not the same as <code>libstdc++-devel</code>"}, {"owner": {"reputation": 671, "user_id": 1729825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d83a68a5cecb60d7d1d0ff391585401?s=128&d=identicon&r=PG", "display_name": "simp76", "link": "https://stackoverflow.com/users/1729825/simp76"}, "edited": false, "score": 0, "creation_date": 1509025078, "post_id": 46937263, "comment_id": 80858912, "body": "Those files are part of libc development package linux-libc-dev package. If it isn&#39;t there you&#39;ll need to install the package. The kernel headers are part of package linux-headers-&lt;your-kernel-version&gt; package. Something like linux-headers-4.4.0-47. These contain only kernel headers. This post has some relevant information too - <a href=\"https://stackoverflow.com/questions/37158651/why-is-stddef-h-not-in-usr-include\" title=\"why is stddef h not in usr include\">stackoverflow.com/questions/37158651/&hellip;</a>"}], "owner": {"reputation": 89, "user_id": 7179701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e4bed3e1744626db3ac2744d6518da?s=128&d=identicon&r=PG&f=1", "display_name": "emmasaunders123", "link": "https://stackoverflow.com/users/7179701/emmasaunders123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 469, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508947803, "creation_date": 1508947803, "question_id": 46937263, "link": "https://stackoverflow.com/questions/46937263/g-gcc-include-files-not-found", "title": "g++ gcc include files not found", "body": "<p>Hi I have a few versions of gcc and g++ on my Ubuntu 16.04 which i select with alternative config.  When compiling a very simple source the compiler can't find the headers.(stddef.h: No such file or directory)</p>\n\n<p>Upon investigation the gcc installations don't have a full directory, for example:</p>\n\n<p>usr/lib/gcc/x86_64-linux-gnu/4.8    has an include directory with cc1.exe</p>\n\n<p>whilst:</p>\n\n<p>usr/lib/gcc/x86_64-linux-gnu/4.7    had no include directory and no cc1.exe (just a cc1plus.exe)</p>\n\n<p>I have re-installed 4.7 but can't seem to get it to be a complete installation ,any help?</p>\n\n<p>Thanks</p>\n\n<p>Emma</p>\n"}, {"tags": ["c", "function", "pointers", "void-pointers", "return-type"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1508948188, "post_id": 46937238, "comment_id": 80821921, "body": "<i>&quot;Is such declaration <code>void *(*function) ()</code> is valid ?&quot;</i> -- a compiler gives you the best answer to this question. Yes, it is valid. <code>function</code> is a pointer to a function that doesn&#39;t get any arguments and returns a void pointer. Read <a href=\"https://stackoverflow.com/a/30345939/4265352\">this answer</a> for a detailed explanation about how to read the C declarations."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1508948280, "post_id": 46937238, "comment_id": 80821969, "body": "Perhaps a better approach would be to explain <i>why</i> you have these questions, as taken in isolation, they mean almost nothing."}, {"owner": {"reputation": 1533, "user_id": 4364101, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JoPAj.jpg?s=128&g=1", "display_name": "Jordan Mackie", "link": "https://stackoverflow.com/users/4364101/jordan-mackie"}, "edited": false, "score": 0, "creation_date": 1556283461, "post_id": 46937238, "comment_id": 98396179, "body": "Badly worded question but the answers are useful"}], "answers": [{"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 2, "last_activity_date": 1508948116, "creation_date": 1508948116, "answer_id": 46937354, "question_id": 46937238, "link": "https://stackoverflow.com/questions/46937238/pointer-to-a-function-and-its-return-type-void/46937354#46937354", "title": "Pointer to a function and its return type (void)", "body": "<p>The notation</p>\n\n<pre><code>void * (*function)();\n</code></pre>\n\n<p>means \u201cdeclare a function pointer named <code>function</code>, which points to a function that takes an unspecified number of arguments, then returns a <code>void *</code>.\u201d</p>\n\n<p>Since this just declares a variable, it doesn\u2019t define a function and so nothing can be said about what value is going to be returned. You\u2019d need to assign this pointer to point to a function before you can call it.</p>\n\n<p>Once you do assign <code>function</code> to point to something, if you call <code>function</code>, you\u2019ll get back a <code>void *</code>, which you can think of as \u201ca pure memory address\u201d since it contains an address but can\u2019t be dereferenced to an object without a cast.</p>\n\n<p>Notice that returning a <code>void *</code> is not the same as as a function that has a <code>void</code> return type. The former means \u201cI return a memory address,\u201d and the latter means \u201cI don\u2019t return anything at all.\u201d</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 1, "last_activity_date": 1508950661, "creation_date": 1508950661, "answer_id": 46938076, "question_id": 46937238, "link": "https://stackoverflow.com/questions/46937238/pointer-to-a-function-and-its-return-type-void/46938076#46938076", "title": "Pointer to a function and its return type (void)", "body": "<p>The declaration is read as follows:</p>\n\n<pre><code>        function        -- function is a \n       *function        -- pointer to \n      (*function) ()    -- function taking unspecified parameters\n     *(*function) ()    -- returning pointer to\nvoid *(*function) ();   -- void\n</code></pre>\n\n<p>So, <code>function</code> is a <em>pointer</em> to a function type, not a function itself.  You could have multiple functions, each returning pointers to <code>void</code>:</p>\n\n<pre><code>void *foo( void )    { ... }\nvoid *bar( void )    { ... }\nvoid *bletch( void ) { ... }\n</code></pre>\n\n<p>You can use the <code>function</code> pointer to point to each of those functions, and decide at runtime which to call:</p>\n\n<pre><code>if ( condition1 )\n  function = foo;\nelse if ( condition2 )\n  function = bar;\nelse\n  function = bletch;\n\nvoid *ptr = function(); // or (*function)();\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8555402, "user_type": "registered", "profile_image": "https://graph.facebook.com/1919492631645974/picture?type=large", "display_name": "Dipesh Kumar Gupta", "link": "https://stackoverflow.com/users/8555402/dipesh-kumar-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3593, "favorite_count": 2, "accepted_answer_id": 46938076, "answer_count": 2, "score": 0, "last_activity_date": 1508951665, "creation_date": 1508947738, "last_edit_date": 1508951665, "question_id": 46937238, "link": "https://stackoverflow.com/questions/46937238/pointer-to-a-function-and-its-return-type-void", "title": "Pointer to a function and its return type (void)", "body": "<p>Is such declaration <code>void *(*function) ()</code> is valid ?\nIf it is valid then <code>*function</code> will return any address to called function .\nAt that address, what value is returning? \nIs value save at that address is 0. If it is zero,what is the difference between <code>return 0</code> and return nothing in function having return type <code>void</code>.</p>\n"}, {"tags": ["c", "pointers", "struct", "segmentation-fault", "malloc"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 6, "creation_date": 1508947462, "post_id": 46937098, "comment_id": 80821468, "body": "your type names are completely off. This code doesn&#39;t compile. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that works (and after that, you probably dereferencing a null/garbage pointer)"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1508947468, "post_id": 46937098, "comment_id": 80821473, "body": "it should be <code>str-&gt;size = 0</code>. Thats assuming that mapadt_s is actually str_s. And test the return of malloc."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1508948877, "post_id": 46937331, "comment_id": 80822295, "body": "&quot;types in C have no capital as first letter&quot; - Please provide a reference to the standard disallowing this (or enforcing a specific naming scheme at all). That was also not stated by Jean-Francois. It is also not clear if that is the problem. We don&#39;t know which type <code>MapADT</code> is without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You just made up some speculative code."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1508954057, "post_id": 46937331, "comment_id": 80825188, "body": "No, you just speculate. OP does not provide enought information. Your code is not the same as OP provided. That&#39;s why we request a MCVE <b>before</b> answering. Please notice questions should be useful for future readers. We are not a debugging service. You might want to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, too."}], "tags": [], "owner": {"reputation": 81, "user_id": 7175012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Nf17.png?s=128&g=1", "display_name": "spuyet", "link": "https://stackoverflow.com/users/7175012/spuyet"}, "is_accepted": true, "score": -1, "last_activity_date": 1508948980, "last_edit_date": 1508948980, "creation_date": 1508948043, "answer_id": 46937331, "question_id": 46937098, "link": "https://stackoverflow.com/questions/46937098/segfault-with-setting-value-to-struct-created-using-malloc/46937331#46937331", "title": "Segfault with setting value to struct created using malloc", "body": "<p>Here is a working version, the segfault come from the fact that you tried to deference your <code>str</code> pointer twice. Also, you have to return a pointer to the allocated memory not the value. Do no forget to free the allocated memory ;)</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\ntypedef struct str_s {\n   int size;\n   bool (*func)(const void* a, const void* b);\n} my_struct;\n\nmy_struct *create(bool (*func)(const void *a, const void *b)) {\n  my_struct *str = malloc(sizeof(my_struct));\n  str-&gt;size = 0;\n  str-&gt;func = func;\n\n  return str;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8832696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73321d70f887b62933b8cae8a6594737?s=128&d=identicon&r=PG&f=1", "display_name": "J.C.", "link": "https://stackoverflow.com/users/8832696/j-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1508985048, "accepted_answer_id": 46937331, "answer_count": 1, "score": -3, "last_activity_date": 1508948980, "creation_date": 1508947309, "question_id": 46937098, "link": "https://stackoverflow.com/questions/46937098/segfault-with-setting-value-to-struct-created-using-malloc", "closed_reason": "Not suitable for this site", "title": "Segfault with setting value to struct created using malloc", "body": "<p>I'm having a problem with my C code that I can't understand.<br>\nHere, I'm trying to create a struct pointer using malloc, but whenever I try to set values to the created struct, I run into a segmentation fault error. I used GDB to get as far as to where the errors were located, but I don't have much insight as how to fix it. If anyone could give me insight to this, I'd appreciate it.</p>\n\n<p>This isn't the full code, but just the part that matters.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\ntypedef struct str_s {\n   int size;\n   bool (*func)(const void* a, const void* b);\n} *Str; // Cannot change this\n\nStr create(bool (*func)(const void *a, const void *b)) {\n  MapADT* str = malloc(sizeof(struct mapadt_s));\n  (*str)-&gt;size = 0; // Segmentation Fault here\n  (*str)-&gt;func= func;\n\n  return *kv_map;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1508947369, "post_id": 46937084, "comment_id": 80821397, "body": "never use <code>gets</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508947376, "post_id": 46937084, "comment_id": 80821402, "body": "<code>x = SchrijfString(x);</code> Since <code>x</code> itself has been updated, there is no need to write back. --&gt; <code>SchrijfString(x);</code>, <code>char SchrijfString(char x[])</code> --&gt; <code>char *SchrijfString(char x[])</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508947453, "post_id": 46937084, "comment_id": 80821460, "body": "In <code>char x[60]; x = SchrijfString(x);</code> you can&#39;t do that: you already defined that <code>x</code> is an array. Use a pointer type as the last comment."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508947572, "post_id": 46937084, "comment_id": 80821535, "body": "The <code>return</code> in <code>SchrijfString()</code> returns the wrong type; it returns a <code>char *</code>, but the function signature says it returns a single <code>char</code>.  In context, there&#39;s not much virtue in returning the <code>char *</code> since it is simply the value you passed into the function.  You don&#39;t even return NULL if <code>gets()</code> -- which you shouldn&#39;t be using anyway -- indicates EOF."}, {"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1508950304, "post_id": 46937084, "comment_id": 80823076, "body": "I would encourage your to hand over the &quot;code&quot; to a C compiler. When it the compiler stops complaining please improve the question."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508948090, "post_id": 46937168, "comment_id": 80821861, "body": "See <a href=\"https://stackoverflow.com/questions/1694036/why-is-the-gets-function-so-dangerous-that-it-should-not-be-used\">Why <code>gets()</code> is so dangerous it should never be used</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1508949393, "post_id": 46937168, "comment_id": 80822567, "body": "<code>fgets</code> is not just a drop-in replacement for <code>gets</code>. It&#39;s safer, but unlike <code>gets</code> it leaves the trailing <code>&#39;\\n&#39;</code> in the target array."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1508947628, "last_edit_date": 1508947628, "creation_date": 1508947512, "answer_id": 46937168, "question_id": 46937084, "link": "https://stackoverflow.com/questions/46937084/return-value-of-function-is-a-string-in-c/46937168#46937168", "title": "return value of function is a string in C", "body": "<p>The <code>gets</code> function is already populating <code>x</code> with a string specified by the user, so no need to return anything from <code>SchrijfString</code> or to assign anything to <code>x</code> back in main.  Your function prototypes don't match the definitions.  They need to be the same.</p>\n\n<p>Also, <code>gets</code> is deprecated because it is unsafe.  Use <code>fgets</code> instead.</p>\n\n<pre><code>void SchrijfString(char x[], int len);\nvoid  LeesString(char x[]);\n\nint main(void)\n{\n    char x[60];\n    SchrijfString(x, sizeof(x));\n    LeesString(x);\n    return 0;\n}\n\nvoid SchrijfString(char x[], int len)\n{\n    printf(\"geef een string in: \\n\");\n    fgets(x, len, stdin);\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8830746, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8029d749977ec6fed5b40e0e40a9b1ac?s=128&d=identicon&r=PG&f=1", "display_name": "reyntjensm", "link": "https://stackoverflow.com/users/8830746/reyntjensm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508950783, "creation_date": 1508947246, "last_edit_date": 1508950783, "question_id": 46937084, "link": "https://stackoverflow.com/questions/46937084/return-value-of-function-is-a-string-in-c", "title": "return value of function is a string in C", "body": "<p>I made some code in C with two functions.</p>\n\n<p>One functions looks for a word (group of characters) and then saves it to a string. The other function shows what's inside the string. I can't find the right way to save the returning value to a string.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar SchrijfString(void);\nvoid LeesString(char);\n\nint main(void)\n{\n    char x[60];\n    x = SchrijfString(x);\n    LeesString(x);\n    return 0;\n}\n\nchar SchrijfString(char x[])\n{\n    printf(\"geef een string in: \\n\");\n    gets(x);\n    return x;\n}\n\nvoid LeesString(char x[])\n{\n    printf(\"In de string zit:\\n %s\", x);\n    getchar();\n}\n</code></pre>\n"}, {"tags": ["c", "function", "calculator"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1508947044, "post_id": 46936897, "comment_id": 80821189, "body": "If you must use the function, then <code>double result = divide(3, 4);</code>.  However, the returned value for the code shown will be 0 (for the arguments 3 and 4).  The division is integer division; the result (3/4 is 0) is converted to <code>double</code> and then returned.  Fix by casting one or both arguments to <code>double</code> before dividing, or by changing the function signature to take <code>double</code> arguments instead of <code>int</code> arguments."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1508947449, "post_id": 46936897, "comment_id": 80821455, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16221776/why-dividing-two-integers-doesnt-get-a-float\">Why dividing two integers doesn&#39;t get a float?</a>"}, {"owner": {"reputation": 7, "user_id": 7106548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1131091593673316/picture?type=large", "display_name": "Henrique Guimar&#227;es", "link": "https://stackoverflow.com/users/7106548/henrique-guimar%c3%a3es"}, "edited": false, "score": 0, "creation_date": 1508947509, "post_id": 46936897, "comment_id": 80821495, "body": "No, that&#39;s not the problem. The function works the way I want"}, {"owner": {"reputation": 7, "user_id": 7106548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1131091593673316/picture?type=large", "display_name": "Henrique Guimar&#227;es", "link": "https://stackoverflow.com/users/7106548/henrique-guimar%c3%a3es"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508947583, "post_id": 46936897, "comment_id": 80821540, "body": "@JonathanLeffler I just need to take the result of the function of the first division and use it as a variable on the same function"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508947735, "post_id": 46936897, "comment_id": 80821633, "body": "I don&#39;t know what you mean by &quot;use [the result of division] as a variable on the same function&quot;.  However, there&#39;s nothing to stop you writing: <code>double x = divide(divide(p, q), divide(r, divide(t, u)));</code> if you have the variables defined and initialized appropriately, and none of the divisions returns 0."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7106548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1131091593673316/picture?type=large", "display_name": "Henrique Guimar&#227;es", "link": "https://stackoverflow.com/users/7106548/henrique-guimar%c3%a3es"}, "edited": false, "score": 0, "creation_date": 1508947424, "post_id": 46936980, "comment_id": 80821434, "body": "I know what you mean but the function works the way I want for now. Thing is, it should be the user inputing the values, not values already declared in the code"}], "tags": [], "owner": {"reputation": 2836, "user_id": 3529197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ceed214a6e603c456a8ebaacc036b407?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3529197/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1508947515, "last_edit_date": 1508947515, "creation_date": 1508946948, "answer_id": 46936980, "question_id": 46936897, "link": "https://stackoverflow.com/questions/46936897/save-the-result-of-a-function-to-a-variable-in-c/46936980#46936980", "title": "Save the result of a function to a variable in C", "body": "<p>You can assign the value to a variable using <code>=</code>, same as you'd assign a hardcoded value.  </p>\n\n<pre><code>double value = divide (x, y);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 7106548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1131091593673316/picture?type=large", "display_name": "Henrique Guimar&#227;es", "link": "https://stackoverflow.com/users/7106548/henrique-guimar%c3%a3es"}, "edited": false, "score": 0, "creation_date": 1508948101, "post_id": 46937165, "comment_id": 80821867, "body": "That&#39;s it! Thanks! Didn&#39;t think it could be so simple"}], "tags": [], "owner": {"reputation": 82, "user_id": 8740801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f7a5460772c4efc271c8809fb613b3?s=128&d=identicon&r=PG&f=1", "display_name": "amanagg1204", "link": "https://stackoverflow.com/users/8740801/amanagg1204"}, "is_accepted": true, "score": 0, "last_activity_date": 1508947506, "creation_date": 1508947506, "answer_id": 46937165, "question_id": 46936897, "link": "https://stackoverflow.com/questions/46936897/save-the-result-of-a-function-to-a-variable-in-c/46937165#46937165", "title": "Save the result of a function to a variable in C", "body": "<p>What you can do is store the value returned by function in another variable.</p>\n\n<p>Simply write double div = divide (x,y);</p>\n\n<p>Now take another input z and call the divide function again.</p>\n\n<p>Hope this solves your problem</p>\n"}], "owner": {"reputation": 7, "user_id": 7106548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1131091593673316/picture?type=large", "display_name": "Henrique Guimar&#227;es", "link": "https://stackoverflow.com/users/7106548/henrique-guimar%c3%a3es"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1623, "favorite_count": 0, "accepted_answer_id": 46937165, "answer_count": 2, "score": -1, "last_activity_date": 1508947515, "creation_date": 1508946707, "last_edit_date": 1508947466, "question_id": 46936897, "link": "https://stackoverflow.com/questions/46936897/save-the-result-of-a-function-to-a-variable-in-c", "title": "Save the result of a function to a variable in C", "body": "<p>I have this assignement to make a simple calculator. But one of the exercises is to take the value of the division and divide it for another number. I made functions for this and what I need help with is, how to take the value returned from the function and use it again. Should I use pointers or store it in an array? TY</p>\n\n<p>This is what I got so far:</p>\n\n<pre><code>int op;\nint x, y, z;\n\nprintf(\"\\n4.Divis\u00e3o       '/'\\n\\n\");\nscanf(\"%d\", &amp;op);\n\n//Asks the user for the values\nprintf(\"x:\");\nscanf(\"%d\", &amp;x);\nprintf(\"y:\");\nscanf(\"%d\", &amp;y);\nprintf(\"\\nDivis\u00e3o: %d / %d = %.1f\", x, y, divide (x, y)); //Basic division\nprintf(\"Outro valor:\"); //Asks for another variable\nscanf (\"%d\", &amp;z);       //Reads the variable\n/*printf(\"\\nDivis\u00e3o 2 : %.1f / %d = %.1f\", div, z, divide (div, z));*/ \n//Tried to use function variable, don't mind this\n\n//Should it be a recursive function?\ndouble divide (int a, int b) \n{\n float div;\n div =  a / b;\n return div; \n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "scanf", "user-input", "do-while"], "comments": [{"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1508945740, "post_id": 46936478, "comment_id": 80820259, "body": "Hint: think of a number <code>choice</code> for which both <code>choice != 0</code> and <code>choice != 1</code> would evaluate to <code>false</code>; that&#39;s the number you need to enter in order to end the loop."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508945948, "post_id": 46936478, "comment_id": 80820425, "body": "Yes, it will read in the enter key."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1508946662, "post_id": 46936478, "comment_id": 80820920, "body": "Mega-dupe.  Many, many similar Q&#39;s:("}], "answers": [{"tags": [], "owner": {"reputation": 984, "user_id": 129031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b80f97305f07eb9f8a34d33fbfaf7700?s=128&d=identicon&r=PG", "display_name": "A.Rashad", "link": "https://stackoverflow.com/users/129031/a-rashad"}, "is_accepted": false, "score": 0, "last_activity_date": 1508947267, "last_edit_date": 1508947267, "creation_date": 1508945629, "answer_id": 46936536, "question_id": 46936478, "link": "https://stackoverflow.com/questions/46936478/do-while-loop-does-not-end/46936536#46936536", "title": "do-while loop does not end", "body": "<p>replace the <strong>or</strong> with an <strong>and</strong>, because your <em>while</em> is checking for a condition and continuing while that condition is true.</p>\n"}, {"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1508946094, "post_id": 46936547, "comment_id": 80820540, "body": "It would make more logical sense to do <code>scanf(&quot; %d&quot;,&amp;choice)</code>"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508946227, "post_id": 46936547, "comment_id": 80820631, "body": "@ChrisTurner Yes, but it works with chars as well... depends on how he likes the most."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1508946277, "post_id": 46936547, "comment_id": 80820662, "body": "<code>choice</code> is defined as an <code>int</code> not a <code>char</code> though..."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508946319, "post_id": 46936547, "comment_id": 80820688, "body": "it does not matter, scanf will put the value on the lower-order byte of the integer value."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1508946439, "post_id": 46936547, "comment_id": 80820767, "body": "This is a potential bug (depends on the indeterminate initialization value for <code>int</code>), also undefined behavior. When it&#39;s so easy to fix, you must fix it."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1508946587, "post_id": 46936547, "comment_id": 80820867, "body": "@anatolyg -- you are right.  If the initial value of  int is not 0, then the behaviour of this code is undefined.  So yes, correct is to ask scanf to write sizeof(int) bytes instead only 1."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1508947391, "post_id": 46936547, "comment_id": 80821408, "body": "<i>it does not matter, scanf will put the value on the lower-order byte of the integer value.</i> Really?!?!?! Because <code>scanf()</code> won&#39;t do <i>anything</i> to the rest of the bytes.  And what happens if you use <code>scanf( &quot;%d&quot;, &amp;c );</code> and the user enters the letter <code>X</code>?"}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1508947585, "post_id": 46936547, "comment_id": 80821541, "body": "@AndrewHenle in that case scanf probably will modify maximum sizeof(int) bytes."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1508948125, "post_id": 46936547, "comment_id": 80821887, "body": "<i>probably will modify maximum sizeof(int) bytes</i>??  Probably?  Not at all. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\"><b>7.21.6.2  The <code>fscanf</code> function</b>, paragraph 9</a>: &quot;An input item is read from the stream, unless the specification includes an <code>n</code> specifier. ... <b>The first character, if any, after the input item remains unread</b>&quot;  In short, the <code>X</code> <i>remains in the stream</i> and the <code>int</code> value is unmodified.  Functions have return values for reasons."}, {"owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1509004157, "post_id": 46936547, "comment_id": 80844287, "body": "@AndrewHenle I did not check the ISO 9899.  This is why I said <code>probably</code>... not interested to check the definition of scan in this case.  If the <code>int</code> variable is previously initialized with <code>0</code>  then it works well with <code>&quot;%c&quot;</code>."}], "tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1508947326, "last_edit_date": 1508947326, "creation_date": 1508945689, "answer_id": 46936547, "question_id": 46936478, "link": "https://stackoverflow.com/questions/46936478/do-while-loop-does-not-end/46936547#46936547", "title": "do-while loop does not end", "body": "<pre><code>scanf(\"%c\", &amp;choice);\n</code></pre>\n\n<p>Here you scan the value of <code>choice</code> as <code>char</code>, you should subtract <code>'0'</code></p>\n\n<pre><code>choice -= '0';\n</code></pre>\n\n<p>after the scan.</p>\n\n<p>As well,  <code>(choice != 0 || choice !=1 )</code> is all the time true, you should insert <code>(choice != 0 &amp;&amp; choice !=1 )</code> in if-statement as well as in while-statement.</p>\n\n<p>EDIT:</p>\n\n<p>If the initial value of <code>choice</code> is not 0 (which may happen, as you inplicitly declared it with storage class specifier <code>auto</code>), the behaviour of the code is undefined, as @anatolyg  commented here.</p>\n\n<p>So you should use <code>scanf(\"%d\", &amp;choice);</code> or initialize <code>choice=0</code> before the loop in order for the current code to be sound.</p>\n"}, {"tags": [], "owner": {"reputation": 8686, "user_id": 4700922, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-9K3KUZoJG2o/AAAAAAAAAAI/AAAAAAAAADw/a8wE25XA7Vo/photo.jpg?sz=128", "display_name": "Ali Sheikhpour", "link": "https://stackoverflow.com/users/4700922/ali-sheikhpour"}, "is_accepted": false, "score": 4, "last_activity_date": 1508945697, "creation_date": 1508945697, "answer_id": 46936551, "question_id": 46936478, "link": "https://stackoverflow.com/questions/46936478/do-while-loop-does-not-end/46936551#46936551", "title": "do-while loop does not end", "body": "<p>Your situation check is incorrect:</p>\n\n<p>change this </p>\n\n<pre><code>if(choice != 0 || choice != 1)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if(choice != 0 &amp;&amp; choice != 1)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7930526, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5378ada62dee23cb9cc3dfacb03dafd6?s=128&d=identicon&r=PG&f=1", "display_name": "L.Kay", "link": "https://stackoverflow.com/users/7930526/l-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "closed_date": 1508953088, "answer_count": 3, "score": 1, "last_activity_date": 1508947326, "creation_date": 1508945486, "last_edit_date": 1508946082, "question_id": 46936478, "link": "https://stackoverflow.com/questions/46936478/do-while-loop-does-not-end", "closed_reason": "Duplicate", "title": "do-while loop does not end", "body": "<p>I'm attempting to do a do-while loop where the user inputs a value, either 1 or 0, and if it is not 1 or 0 then the loop will ask them to do it again until they enter 1 or 0. However, in runtime, when i enter 1 or 0, it will keep printing the stuff inside the if statement</p>\n\n<blockquote>\n  <p>you have given an incorrect response, it must either be 1 or 0</p>\n</blockquote>\n\n<p>even though i have entered 1/0, staying in this loop forever. Does it store the <kbd>enter</kbd> key? What am i missing and how do i fix this?</p>\n\n<pre><code>int validateresultmanual(char* word, char* suggestion)\n{\n    int choice;\n    int result;\n\n    if(suggestion == NULL)\n    {\n        result = FALSE;\n    }\n    else\n    {\n        do\n        {\n            printf(\"Enter 0 for yes or 1 for no: Do you want to change %s to %s?\\n\", word, suggestion);\n            scanf(\"%c\", &amp;choice);\n            if(choice != 0 || choice != 1)\n            {\n                printf(\"You have given an incorrect response, it must either be 1 or 0\\n\");\n            }\n            else if(choice == 0)\n            {\n                printf (\"\\n yaaaaaaaaaaaaa \\n\");\n                result = TRUE;\n            }\n            else if (choice == 1)\n            {\n                result = FALSE;\n            }\n     } while (choice != 0 || choice !=1 );\n}\nreturn result;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "linked-list", "crash"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1508945407, "post_id": 46936350, "comment_id": 80820031, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1508945425, "post_id": 46936350, "comment_id": 80820051, "body": "Hint: Learn how to use a debugger."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508945591, "post_id": 46936350, "comment_id": 80820163, "body": "The massive use of global variables (<code>head</code>, <code>ch</code>, <code>start</code> and <code>ptr</code>) makes me think you should rethink your program from the ground up."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508946459, "post_id": 46936350, "comment_id": 80820782, "body": "I just made a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> by writing some minimal code so I could test the <code>create</code> function and it works fine. The problem is elsewhere in the code you didn&#39;t show us."}, {"owner": {"reputation": 25, "user_id": 8832506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wv8kCgY_AUo/AAAAAAAAAAI/AAAAAAAAAZE/3FF1IvzsP9U/photo.jpg?sz=128", "display_name": "lambda", "link": "https://stackoverflow.com/users/8832506/lambda"}, "edited": false, "score": 0, "creation_date": 1508946931, "post_id": 46936350, "comment_id": 80821109, "body": "here is the link to the complete code-&gt;&gt;&gt;&gt;  <a href=\"https://drive.google.com/open?id=0B72VhP-JuqyKM1BGQnZBYk1rUzg\" rel=\"nofollow noreferrer\">drive.google.com/open?id=0B72VhP-JuqyKM1BGQnZBYk1rUzg</a>"}, {"owner": {"reputation": 25, "user_id": 8832506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wv8kCgY_AUo/AAAAAAAAAAI/AAAAAAAAAZE/3FF1IvzsP9U/photo.jpg?sz=128", "display_name": "lambda", "link": "https://stackoverflow.com/users/8832506/lambda"}, "edited": false, "score": 0, "creation_date": 1508947116, "post_id": 46936350, "comment_id": 80821242, "body": "here is the links for the screenshot with the error.  -&gt;&gt; <a href=\"https://drive.google.com/file/d/0B72VhP-JuqyKdFY3VTNwLXc2UUU/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/0B72VhP-JuqyKdFY3VTNwLXc2UUU/&hellip;</a> <a href=\"https://drive.google.com/file/d/0B72VhP-JuqyKQ2hFWUw1dzZxM2M/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/0B72VhP-JuqyKQ2hFWUw1dzZxM2M/&hellip;</a> <a href=\"https://drive.google.com/file/d/0B72VhP-JuqyKMmpGSW1VdHhPNnc/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/0B72VhP-JuqyKMmpGSW1VdHhPNnc/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 7411566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/572d999739c80dcc26a2caf3821b8f57?s=128&d=identicon&r=PG&f=1", "display_name": "theShivamAgarwal", "link": "https://stackoverflow.com/users/7411566/theshivamagarwal"}, "is_accepted": true, "score": 1, "last_activity_date": 1508959323, "creation_date": 1508959323, "answer_id": 46940527, "question_id": 46936350, "link": "https://stackoverflow.com/questions/46936350/linked-list-prgrm-stopped-working-error/46940527#46940527", "title": "Linked List prgrm stopped working error", "body": "<p>I observe from your code that you are using ptr as a pointer to the last node of the linked list as shown in the following lines of create() function :-</p>\n\n<pre><code>if (start==NULL)\n    start = ptr = head;\nelse\n{\n    ptr-&gt;next=head;\n    ptr=head;\n}\n</code></pre>\n\n<p>While in the display function, you are again initialiing </p>\n\n<pre><code>ptr = start;\n</code></pre>\n\n<p>and then traversing to the end of the loop, where ptr becomes null as in the following lines :- </p>\n\n<pre><code>while(ptr!=NULL)\n{\n    printf(\"%d-&gt;\",ptr-&gt;num);\n    ptr=ptr-&gt;next;\n}\n</code></pre>\n\n<p>(Similarly in delast() and delany() functions, you are doing the following operation :- </p>\n\n<pre><code>free(ptr);\n</code></pre>\n\n<p>which will again result in making ptr = null, thus resulting in <strong>segmentation fault</strong>. )</p>\n\n<p>Thus, when you create list for 1st time, code works fine, because the value of ptr is preserved, however, once you display the list, or delete any element and then again go back to create the list(Menu option 1), the value of ptr becomes null, so,</p>\n\n<pre><code>ptr-&gt;next = head;\n</code></pre>\n\n<p>results in <strong>Segmentation Fault</strong>.</p>\n\n<p>So, one possible solution is to use a new pointer say *end instead of *ptr in the create() function, and never make the value of end = null; as shown below :- </p>\n\n<pre><code>void create()\n{\n do{\n    printf(\"Enter the num:\");\n    head=(NODE *) malloc(sizeof(NODE));\n    scanf(\"%d\",&amp;head-&gt;num);\n    head-&gt;next=NULL;\n    if(start==NULL)\n        start=end=head;\n    else\n    {\n        end-&gt;next=head;\n        end=head;\n    }\n    printf(\"Do you want to enter more elements:(1/0)\");\n    scanf(\"%d\",&amp;ch);\n}\n while(ch==1);\n}\n</code></pre>\n\n<p>Or, you when creating the list, you can traverse to the end of the list to add new element, instead of directly using the end pointer (so, no need of saving the extra end pointer).</p>\n\n<pre><code>void create()\n{\n do{\n    printf(\"Enter the num:\");\n    head=(NODE *) malloc(sizeof(NODE));\n    scanf(\"%d\",&amp;head-&gt;num);\n    head-&gt;next=NULL;\n    if(start == NULL)\n        start = head;\n    else\n    {\n        ptr = start;\n        while (ptr-&gt;next != NULL){\n            ptr = ptr-&gt;next;\n        }\n        ptr-&gt;next = head;\n    }        \n    printf(\"Do you want to enter more elements:(1/0)\");\n    scanf(\"%d\",&amp;ch);\n}\n while(ch==1);\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8832506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wv8kCgY_AUo/AAAAAAAAAAI/AAAAAAAAAZE/3FF1IvzsP9U/photo.jpg?sz=128", "display_name": "lambda", "link": "https://stackoverflow.com/users/8832506/lambda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 46940527, "answer_count": 1, "score": 0, "last_activity_date": 1508959323, "creation_date": 1508945155, "last_edit_date": 1508945251, "question_id": 46936350, "link": "https://stackoverflow.com/questions/46936350/linked-list-prgrm-stopped-working-error", "title": "Linked List prgrm stopped working error", "body": "<p>I am writing a linked list program in C</p>\n\n<p>The problem is with create function. \nCreate() works perfectly at the first run. Then when i exit to menu and call the create function again the program crashes with the message \"linkedlist has stopped working\" Hint: linkedlist is the name of my prgrm.</p>\n\n<pre><code>void create()\n{\n    do\n   {\n       printf(\"Enter the num:\");\n       head=(NODE *) malloc(sizeof(NODE));\n       scanf(\"%d\",&amp;head-&gt;num);\n       head-&gt;next=NULL;\n       if(start==NULL)\n           start=ptr=head;\n       else\n       {\n           ptr-&gt;next=head;\n           ptr=head;\n       }\n       printf(\"Do you want to enter more elements:(1/0)\");\n       scanf(\"%d\",&amp;ch);\n   }\n   while(ch==1);\n}\n</code></pre>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1508944106, "post_id": 46935910, "comment_id": 80819047, "body": "you don&#39;t store the read in name..."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1508944207, "post_id": 46935910, "comment_id": 80819123, "body": "Aside: Your program flow is strange in that it makes the user input a name after entering the exit code, -1."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1508944381, "post_id": 46935910, "comment_id": 80819258, "body": "Please fix the indentation of your code."}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1508944429, "post_id": 46935910, "comment_id": 80819291, "body": "Say you wish to create list such as 1-&gt;2-&gt;NULL. when it comes to inserting 2, you are doing p-&gt;next=n; where p is NULL !"}, {"owner": {"reputation": 29, "user_id": 8625204, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8bf925bebc1b6d7d895624cc2fa0d75f?s=128&d=identicon&r=PG&f=1", "display_name": "joshua", "link": "https://stackoverflow.com/users/8625204/joshua"}, "edited": false, "score": 1, "creation_date": 1508944455, "post_id": 46935910, "comment_id": 80819307, "body": "i tried to save name n-&gt;name=name but it shows error"}, {"owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "edited": false, "score": 0, "creation_date": 1508944615, "post_id": 46935910, "comment_id": 80819425, "body": "fixed the indentation"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1508944717, "post_id": 46935910, "comment_id": 80819499, "body": "you need to use <a href=\"https://linux.die.net/man/3/strcpy\" rel=\"nofollow noreferrer\"><code>strcpy</code></a> or something similar to copy a string."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1508944844, "post_id": 46935910, "comment_id": 80819598, "body": "@AditiRawat <code>p</code> won&#39;t be <code>NULL</code> as in the previous iteration of the loop it gets assigned with the value of <code>n</code>"}, {"owner": {"reputation": 29, "user_id": 8625204, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8bf925bebc1b6d7d895624cc2fa0d75f?s=128&d=identicon&r=PG&f=1", "display_name": "joshua", "link": "https://stackoverflow.com/users/8625204/joshua"}, "edited": false, "score": 0, "creation_date": 1508944961, "post_id": 46935910, "comment_id": 80819704, "body": "Thanks the lot it solves my issues"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "edited": false, "score": 0, "creation_date": 1508945087, "post_id": 46935910, "comment_id": 80819798, "body": "@AditiRawat only the formatting has been edited - the logic hasn&#39;t changed"}, {"owner": {"reputation": 787, "user_id": 7714006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bf23fe02b176b9ec4b72f65570e0b5?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi Rawat", "link": "https://stackoverflow.com/users/7714006/aditi-rawat"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508945206, "post_id": 46935910, "comment_id": 80819884, "body": "@Chris Turner I thought p=n was a part of the else block. My bad!"}], "answers": [{"tags": [], "owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "is_accepted": false, "score": 0, "last_activity_date": 1508953537, "creation_date": 1508953537, "answer_id": 46938897, "question_id": 46935910, "link": "https://stackoverflow.com/questions/46935910/error-while-printing-the-linked-list/46938897#46938897", "title": "Error while printing the linked list", "body": "<p>You actually read in the <code>name</code> variable, but you don't move it in your structure.\nThat said, you could directly read into the structure you allocate, but the tricky part is taking care of not overflowding your buffer when the user input is too big (more than 19 chars).</p>\n\n<p>This could look like this:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct node {\n    int id;\n    char name[20];\n    struct node *next;\n};\n\nstruct node *create(void) {\n    struct node *p, *r;\n    printf(\"Linked List\\n\");\n    p = r = NULL;\n    while (1) {\n        int id;\n        printf(\"Enter the Id or-1 to stop:\");\n        scanf(\"%d\", &amp;id);\n\n        if (id == -1)\n            break; // user asked to leave\n\n        struct node *n = malloc(sizeof(*n));\n        // if (n == NULL) exit(-1); as you prefere...\n        n-&gt;id = id;\n        printf(\"Enter the name \");\n        // careful of buffer overflow here\n        scanf(\"%19s%*[^\\n]\", n-&gt;name);\n        n-&gt;next = NULL;\n\n        if (r == NULL)\n            r = n;\n        else\n            p-&gt;next = n;\n        p = n;\n    }\n    return r;\n}\n\nvoid delete(struct node *r) {\n    while (r != NULL) {\n        struct node *n = r;\n        r = r-&gt;next;\n        free(n);\n    }\n}\n\nvoid display(const struct node *r) {\n    printf(\"\\nId             Name \\n\");\n    while (r != NULL) {\n        printf(\"%d         %s\\n\", r-&gt;id, r-&gt;name);\n        r = r-&gt;next;\n    }\n}\n\nint main(int argc, char **argv) {\n    struct node *ptr = create();\n    display(ptr);\n    delete(ptr);\n    return 0;\n}\n</code></pre>\n\n<p>As a bonus, I also added the free part so that you don't leak.</p>\n"}], "owner": {"reputation": 29, "user_id": 8625204, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8bf925bebc1b6d7d895624cc2fa0d75f?s=128&d=identicon&r=PG&f=1", "display_name": "joshua", "link": "https://stackoverflow.com/users/8625204/joshua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508953537, "creation_date": 1508943957, "last_edit_date": 1508944547, "question_id": 46935910, "link": "https://stackoverflow.com/questions/46935910/error-while-printing-the-linked-list", "title": "Error while printing the linked list", "body": "<p>I created the linked list to store employee id and name.</p>\n\n<p>When I tried to print it, it shows only id not an employee name and i also want to exit the program when the user enter -1 and not asking the name its should simply exit the program and display the id and name i am currently using devC++ for compiling my code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct node\n{\n    int id;\n    char name[20];\n    struct node *next;\n};\n\nstruct node *create()\n{\n    struct node *p, *r, *n;\n    int s, k;\n    char name[20];\n    s = sizeof(struct node);\n    printf(\"Linked List\\n\");\n    printf(\"Enter id:\");\n    scanf(\"%d\", &amp;k);\n    printf(\"Enter name:\");\n    scanf(\"%s\", name);\n    p = r = NULL;\n    while(k!=-1)\n    {\n        n = (struct node *)malloc(s);\n        n-&gt;id = k;\n        n-&gt;next = NULL;\n        if(r == NULL)\n            r = n;\n        else\n            p-&gt;next=n;\n        p=n;\n        printf(\"Enter the Id or-1 to stop:\");\n        scanf(\"%d\", &amp;k);\n        printf(\"Enter the name \");\n        scanf(\"%s\", name);\n    }\n    return(r);      \n}\n\nvoid display(struct node *r)\n{\n     printf(\"\\nId             Name \\n\");\n     while(r != NULL)\n     {\n         printf(\"\\n %d\", r-&gt;id);\n         printf(\"\\n %s\", r-&gt;name);\n         r = r-&gt;next;    \n     }\n}\n\nint main()\n{\n    struct node *ptr;\n    ptr = create();\n    display(ptr);\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "initialization", "automatic-storage"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1508943993, "post_id": 46935890, "comment_id": 80818967, "body": "absolutely not. No automatic initialization is done for automatic storage in <code>c</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1508944511, "last_edit_date": 1508944511, "creation_date": 1508944039, "answer_id": 46935940, "question_id": 46935890, "link": "https://stackoverflow.com/questions/46935890/structure-on-the-stack-fields-initialized/46935940#46935940", "title": "structure on the stack - fields initialized?", "body": "<p>No, it's quite the opposite.</p>\n\n<p>Since <code>s</code> is an automatic storage local scoped (i.e., block scoped) variable, unless initialized explicitly, the contents are <strong>indeterminate</strong>.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.7.9</p>\n\n<blockquote>\n  <p>If an object that has automatic storage duration is not initialized explicitly, its value is\n  indeterminate. [...].</p>\n</blockquote>\n\n<p>However, if you want to zero-initialize the variable for an(y) aggregate type, you can simply use an initialization statement like</p>\n\n<blockquote>\n<pre><code>aggregate-type variable = {0};\n</code></pre>\n</blockquote>\n\n<p>which uses the following property from paragraph 21 of the same chapter, (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p><strong>If there are fewer initializers in a brace-enclosed list than there are elements or members\n  of an aggregate</strong>, or fewer characters in a string literal used to initialize an array of known\n  size than there are elements in the array, <strong>the remainder of the aggregate shall be\n  initialized implicitly the same as objects that have static storage duration.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "is_accepted": false, "score": 2, "last_activity_date": 1508944059, "creation_date": 1508944059, "answer_id": 46935950, "question_id": 46935890, "link": "https://stackoverflow.com/questions/46935890/structure-on-the-stack-fields-initialized/46935950#46935950", "title": "structure on the stack - fields initialized?", "body": "<p>No, they won't be initialized at all. The structure values will end up with whatever garbage is on the stack where the structure is placed.</p>\n"}, {"comments": [{"owner": {"reputation": 4740, "user_id": 738154, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f2c009cb225b8ecee8de486630c37225?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/738154/mark"}, "edited": false, "score": 0, "creation_date": 1508944154, "post_id": 46935957, "comment_id": 80819083, "body": "&quot;If you initialize at least one field of a struct but not all, then the remaining fields will be initialized to 0.&quot; -- is this guaranteed by the C standard?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 4740, "user_id": 738154, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f2c009cb225b8ecee8de486630c37225?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/738154/mark"}, "edited": false, "score": 0, "creation_date": 1508944257, "post_id": 46935957, "comment_id": 80819152, "body": "@Mark 0 or equivalent, but mostly, yes,"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 4740, "user_id": 738154, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f2c009cb225b8ecee8de486630c37225?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/738154/mark"}, "edited": false, "score": 0, "creation_date": 1508944505, "post_id": 46935957, "comment_id": 80819351, "body": "@Mark Yes it is.  See my edit."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1508944371, "last_edit_date": 1508944371, "creation_date": 1508944068, "answer_id": 46935957, "question_id": 46935890, "link": "https://stackoverflow.com/questions/46935890/structure-on-the-stack-fields-initialized/46935957#46935957", "title": "structure on the stack - fields initialized?", "body": "<p>If a variable (<code>struct</code> or otherwise) is declared local to a function or a containing scope (i.e. has automatic storage duration), it is not initialized in any way.  You need to explicitly set the fields in the <code>struct</code>.  </p>\n\n<p>If you initialize at least one field of a struct but not all, then the remaining fields will be initialized the same as file scope variables (i.e. variables with static storage duration), which means <code>NULL</code> for pointer types and 0 for numeric types.</p>\n\n<p>From section 6.7.9 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p><em>10</em> <strong>If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate.</strong> If an object that\n  has static or thread storage duration is not initialized explicitly,\n  then: </p>\n  \n  <p>\u2014 if it has pointer type, it is initialized to a null pointer;</p>\n  \n  <p>\u2014 if it has arithmetic type, it is initialized to (positive or unsigned)\n  zero;</p>\n  \n  <p>\u2014 if it is an aggregate, every member is initialized\n  (recursively) according to these rules, and any padding is initialized\n  to zero bits; </p>\n  \n  <p>\u2014 if it is a union, the first named member is\n  initialized (recursively) according to these rules, and any padding is\n  initialized to zero bits;</p>\n  \n  <p>...</p>\n  \n  <p><em>21</em> <strong>If there are fewer initializers in a brace-enclosed list than there are elements or members of an aggregate</strong>, or fewer characters in\n  a string literal used to initialize an array of known size than there\n  are elements in the array, <strong>the remainder of the aggregate shall be\n  initialized implicitly the same as objects that have static storage\n  duration.</strong></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 13124, "user_id": 1419272, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dcbff46aa5cd0a98d13d76595b3375f0?s=128&d=identicon&r=PG", "display_name": "alinsoar", "link": "https://stackoverflow.com/users/1419272/alinsoar"}, "is_accepted": false, "score": 0, "last_activity_date": 1508946189, "creation_date": 1508946189, "answer_id": 46936715, "question_id": 46935890, "link": "https://stackoverflow.com/questions/46935890/structure-on-the-stack-fields-initialized/46936715#46936715", "title": "structure on the stack - fields initialized?", "body": "<pre><code>struct my_struct s;\n       ...\n       /* here we access the contents 's' as '&amp;s' */\n</code></pre>\n\n<p>Here you have not a static variable, you have an automatic variable, so there is no pre-initialization.</p>\n\n<p>On the other hand, if you compile with optimizations you have no guarantee where the compiler stores this variable unless you check the assembler's output, which is not defined by the C language.</p>\n"}], "owner": {"reputation": 4740, "user_id": 738154, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/f2c009cb225b8ecee8de486630c37225?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/738154/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1522227071, "accepted_answer_id": 46935957, "answer_count": 4, "score": 3, "last_activity_date": 1508946189, "creation_date": 1508943897, "last_edit_date": 1508945866, "question_id": 46935890, "link": "https://stackoverflow.com/questions/46935890/structure-on-the-stack-fields-initialized", "closed_reason": "Duplicate", "title": "structure on the stack - fields initialized?", "body": "<p>Consider the following code:</p>\n\n<pre><code>void func()\n{\n   int p;\n   ...\n   if (p &gt; MAX) {\n       struct my_struct s;\n       ...\n       /* here we access the contents 's' as '&amp;s' */\n   }\n}\n</code></pre>\n\n<p>In this snippet <code>s</code> is on the stack. Is it guaranteed that the compiler initializes all structure fields to zero?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1508943585, "post_id": 46935755, "comment_id": 80818676, "body": "The name is &quot;recursion&quot;."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1508943736, "post_id": 46935755, "comment_id": 80818778, "body": "And as a side notice: For portable programs you cannot rely on the contents of <code>d_type</code>; it might contain <code>DT_UNKNOWN</code> for some filesystems. In this case you need to call <code>stat()</code> to find out if it is a directory (see also <code>man 3 readdir</code>)."}, {"owner": {"reputation": 21, "user_id": 8560727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/722cdc7fb1ed2f034c44ad47d762bc0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Lee", "link": "https://stackoverflow.com/users/8560727/ryan-lee"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1508944446, "post_id": 46935755, "comment_id": 80819300, "body": "@xing would i have to strcat the name to the path and open that?"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1508944716, "post_id": 46935755, "comment_id": 80819496, "body": "Another aside:  good practice to declare <code>const char* file</code> (rather than non-const) unless you intend to change it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508944746, "post_id": 46935755, "comment_id": 80819522, "body": "You can <code>sprintf</code> another path name so you don&#39;t lose the name of the present directory - there may be more than one directory in the present one."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508948852, "post_id": 46935755, "comment_id": 80822283, "body": "You&#39;re leaking directory streams each time the nested <code>opendir()</code> succeeds.  You must capture the return and <code>closedir()</code> it if it is not null."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1508950935, "post_id": 46935755, "comment_id": 80823409, "body": "You should also note <a href=\"http://stackoverflow.com/questions/5125919/stat-error-no-such-file-or-directory-when-file-name-is-returned-by-readdir\"><code>stat()</code> error ENOENT with <code>readdir()</code></a> and also review the use of POSIX function <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/nftw.html\" rel=\"nofollow noreferrer\"><code>nftw()</code></a>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1508951000, "post_id": 46935755, "comment_id": 80823443, "body": "missing POSIX or Linux flag"}], "answers": [{"tags": [], "owner": {"reputation": 758, "user_id": 7596874, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-43Jhmpr68-k/AAAAAAAAAAI/AAAAAAAAAAc/-weaMEfAr40/photo.jpg?sz=128", "display_name": "Rathan Naik", "link": "https://stackoverflow.com/users/7596874/rathan-naik"}, "is_accepted": false, "score": 1, "last_activity_date": 1508945523, "last_edit_date": 1508945523, "creation_date": 1508944822, "answer_id": 46936239, "question_id": 46935755, "link": "https://stackoverflow.com/questions/46935755/c-programming-opening-directories-within-directories/46936239#46936239", "title": "C programming opening directories within directories", "body": "<p>This Code calls function recursively to list the files and directories.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) {\n    listdir(\".\", 0);       //Call the function for the current path\n}\n\n/* Function to list files and directories\n * @parameter Name : Name is the path\n * @parameter indent: indentation for printing the files and directories \n                      in the hierarchical structure\n */\nvoid listdir(const char *name, int indent)\n{\n    DIR *dir;\n    struct dirent *entry;\n\n    /* Base Case, return if the current file is not directory */\n    if (!(dir = opendir(name)))\n        return;\n\n    /*Loop for all the files in the current directory */\n    while ((entry = readdir(dir)) != NULL) {\n        if (entry-&gt;d_type == DT_DIR) {\n            char path[1024];\n\n            /* If the path is . (current path) or .. (parent of the current \n              directory) then continue (do not call  lisdir()), \n              we don't want to stuck in infinite situation!\n            */\n            if (strcmp(entry-&gt;d_name, \".\") == 0 || strcmp(entry-&gt;d_name, \"..\") == 0)\n                continue;\n            snprintf(path, sizeof(path), \"%s/%s\", name, entry-&gt;d_name);\n            printf(\"%*s[%s]\\n\", indent, \"\", entry-&gt;d_name);\n\n            /* Call the function again for the current path\n               Add 2 to indentation, that is to leave 2 more spaces in the \n               hierarchical structure \n            */\n            listdir(path, indent + 2);\n        } else {\n            printf(\"%*s- %s\\n\", indent, \"\", entry-&gt;d_name);\n        }\n    }\n    closedir(dir);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8560727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/722cdc7fb1ed2f034c44ad47d762bc0e?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Lee", "link": "https://stackoverflow.com/users/8560727/ryan-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1508950834, "creation_date": 1508943504, "last_edit_date": 1508950834, "question_id": 46935755, "link": "https://stackoverflow.com/questions/46935755/c-programming-opening-directories-within-directories", "title": "C programming opening directories within directories", "body": "<pre><code>#include &lt;dirent.h&gt; \n#include &lt;stdio.h&gt; \n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n\nint program(char* file) {\n  DIR *d;\n  struct dirent *dir;\n  d = opendir(file);\n  if (d) {\n     while ((dir = readdir(d)) != NULL) {\n       if(dir-&gt;d_type == DT_DIR) {\n         if(opendir(dir-&gt;d_name)!=NULL) {\n          printf(\"Open successful!  \");\n         }\n         printf(\"Is a dir! \");\n       }\n\n       printf(\"%s\\n\", dir-&gt;d_name);\n     }\n\n     closedir(d);\n  }\n\n return(0);\n\n}\n</code></pre>\n\n<p>Lets say i access a directory in a c program like this and i find that one of its entries is also a directory? How do i open this directory entry? I don't think my code is doing it correctly</p>\n"}, {"tags": ["c", "signals", "compiler-optimization"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508943287, "post_id": 46935618, "comment_id": 80818489, "body": "Declare <code>current</code> as type <code>volatile sigatomic_t</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1508947643, "post_id": 46935618, "comment_id": 80821572, "body": "What else are you missing? Calling <code>printf()</code> in a signal handler is undefined behavior.  Only async-signal-safe functions can be safely called from a signal handler."}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": true, "score": 5, "last_activity_date": 1508943485, "last_edit_date": 1508943485, "creation_date": 1508943333, "answer_id": 46935690, "question_id": 46935618, "link": "https://stackoverflow.com/questions/46935618/gcc-invalid-optimization-when-using-posix-signals/46935690#46935690", "title": "GCC - invalid optimization when using POSIX signals", "body": "<p>Accessing an object with static storage duration and type other than <code>volatile sig_atomic_t</code> from a signal handler results in undefined behavior. The source for this is (for C11):</p>\n\n<blockquote>\n  <p>7.14.1.1 The signal function</p>\n  \n  <p>[...]</p>\n  \n  <p>5 If the signal occurs other than as the result of calling the abort or raise function, the behavior is undefined if the signal handler refers to any object with static or thread storage duration that is not a lock-free atomic object other than by assigning a value to an object declared as volatile sig_atomic_t, or...</p>\n</blockquote>\n\n<p>POSIX likely will (possible future direction, not decided yet) define the behavior under slightly more relaxed conditions; in some sense it mistakenly already does, via loopholes with use of AS-safe functions. I have an open issue on the Austin Group issue tracker about this topic:</p>\n\n<p><a href=\"http://austingroupbugs.net/view.php?id=728\" rel=\"noreferrer\">http://austingroupbugs.net/view.php?id=728</a></p>\n"}], "owner": {"reputation": 91, "user_id": 2244484, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d8f63635d371eb623ec1900b3fe3bb4?s=128&d=identicon&r=PG", "display_name": "user2244484", "link": "https://stackoverflow.com/users/2244484/user2244484"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "accepted_answer_id": 46935690, "answer_count": 1, "score": 1, "last_activity_date": 1508943485, "creation_date": 1508943157, "question_id": 46935618, "link": "https://stackoverflow.com/questions/46935618/gcc-invalid-optimization-when-using-posix-signals", "title": "GCC - invalid optimization when using POSIX signals", "body": "<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n\nint current = 0;\n\nvoid sigint_handle(int sig) {\n    printf(\"sigint: %d\\n\", current);\n}\n\nint main()\n{\n    sigset(SIGINT, sigint_handle);\n\n    while (1) {\n        current++;\n        // if (current % 1000000 == 0) printf(\"hey\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiled with optimization level <code>-O0</code> using GCC 7.2.0, this code works as expected. However, with any other optimization level, sending sigint will print out <code>sigint: 0</code> each time. It will also work correctly regardless of optimization when the output line is uncommented.</p>\n\n<p>Am I missing something about signals, is this a bug in gcc or is this the intended behavior (and if so, why?)?</p>\n"}, {"tags": ["c", "file", "scanf", "fopen"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508942982, "post_id": 46935487, "comment_id": 80818265, "body": "You need <a href=\"http://en.cppreference.com/w/c/io/rewind\" rel=\"nofollow noreferrer\">rewind</a>. and <code>&lt;=</code> --&gt; <code>&lt;</code>, <code>char</code> --&gt;. <code>int</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508943044, "post_id": 46935487, "comment_id": 80818314, "body": "And you need to format your C code correctly. For example like the samples in your C text book."}, {"owner": {"reputation": 109, "user_id": 7673761, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10209081156529721/picture?type=large", "display_name": "Nakos Kotsanis", "link": "https://stackoverflow.com/users/7673761/nakos-kotsanis"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508943483, "post_id": 46935487, "comment_id": 80818624, "body": "@BLUEPIXY when u saying char --&gt; int u mean the line char ch; (thats the only line that contains char) Thanks"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1508943710, "post_id": 46935487, "comment_id": 80818753, "body": "BTW to count the numbers without counting bytes, use something like this: <code>int dummy; while (fscanf(f1, &quot;%d&quot;, &amp;dummy) == 1) counter++;</code> - this code checks the return code from <code>fscanf</code>, which will be 1 after successfully reading a number. This will remove spaces automatically, isn&#39;t prone to <a href=\"https://stackoverflow.com/a/8858073/509868\">the <code>EOF</code> bug</a>, and handles double-digit numbers correctly."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1508943911, "post_id": 46935487, "comment_id": 80818915, "body": "^This! Because it counts the elements in the same way that they are read in. Counting spaces in between can only be an estimation; it fails if other kinds of white space are used to separate the data or if there is more than one space character between values. And it gets rid of the silly notation that the actual count of numbers is <code>count + 1</code> in the program."}], "answers": [{"tags": [], "owner": {"reputation": 979, "user_id": 8620508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd9173b8d1a379731c97c9d42a50f0?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/8620508/klaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1508943440, "creation_date": 1508943440, "answer_id": 46935732, "question_id": 46935487, "link": "https://stackoverflow.com/questions/46935487/how-to-read-integers-from-txt-file-and-store-them-in-a-integer-type-array-in-c/46935732#46935732", "title": "How to read integers from .txt file and store them in a integer type array in C", "body": "<p>Each time you read something from a file, the pointer moves one position. After you've read the file once to count the number of integers, the pointer is pointing to the end of the file. </p>\n\n<p>You have to rewind your FILE pointer, so it goes back to the start and you can scan again to get the numbers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    FILE *f1;\n    int i,counter=0;\n    char ch;\n    f1 = fopen(\"nums.txt\",\"r\");\n\n    while((ch = fgetc(f1))!=EOF){if(ch==' '){counter++; }}\n    int arMain[counter+1];\n\n    rewind(f1); /* Rewind f1 */\n    for(i=0; i&lt;counter+1; i++)         {\n        fscanf(f1, \"%d\", &amp;arMain[i]);       \n    }\n\n    for(i = 0; i &lt;= counter+1; i++)     {\n        printf(\"\\n%d\",arMain[i]);       \n    }\n\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 7673761, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10209081156529721/picture?type=large", "display_name": "Nakos Kotsanis", "link": "https://stackoverflow.com/users/7673761/nakos-kotsanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 916, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1508952290, "creation_date": 1508942778, "last_edit_date": 1508952290, "question_id": 46935487, "link": "https://stackoverflow.com/questions/46935487/how-to-read-integers-from-txt-file-and-store-them-in-a-integer-type-array-in-c", "title": "How to read integers from .txt file and store them in a integer type array in C", "body": "<p>I have a file that contains integers separated with <code>' '</code></p>\n\n<p>Example File1</p>\n\n<pre><code>8 7 8 8 7 7 7\n</code></pre>\n\n<p>Example file2</p>\n\n<pre><code>10 0 3 11 0 2 3 3 2 4 5 6 2 11\n</code></pre>\n\n<p>I want to read these integers and save them in an integer array.</p>\n\n<pre><code>   --&gt;int array[for example File1]={8,7,8,8,7,7,7}\n   --&gt;int array[for example File2]={10,0,3,11,0,2,3,3,2,4,5,6,2,11}\n</code></pre>\n\n<p>I have done this code so far... Can anyone help here? </p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main() {\n  FILE *f1;\n  int i,counter=0;\n  char ch;\n  f1 = fopen(\"C:\\\\Numbers.txt\",\"r\");\n\n  while((ch = fgetc(f1))!=EOF){if(ch==' '){counter++; }}\n  int arMain[counter+1];\n\n  for(i=0; i&lt;counter+1; i++) {\n     fscanf(f1, \"%d\", &amp;arMain[i]);\n  }\n\n  for(i = 0; i &lt;= counter+1; i++) {\n    printf(\"\\n%d\",arMain[i]);\n  }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c", "hash", "micro-optimization"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1508942701, "post_id": 46935380, "comment_id": 80818046, "body": "And what is the question?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1508942702, "post_id": 46935380, "comment_id": 80818047, "body": "You really need to expand more on the requirements. Your &quot;universal hash&quot; definition is very different from the mathematical one."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1508942911, "post_id": 46935380, "comment_id": 80818212, "body": "Width of the index would also be important to know here."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1508943883, "post_id": 46935380, "comment_id": 80818900, "body": "An important aspect is, if the hash function has to be cryptographically secure or if it just needs to be equally distributed"}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 0, "creation_date": 1508944758, "post_id": 46935380, "comment_id": 80819532, "body": "Wanted to mention <code>Long.hashCode</code> and <code>Long.reverseBytes</code> for fiddling."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1508947091, "post_id": 46935380, "comment_id": 80821220, "body": "This also seems like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>.  <i>Why</i> do you need this hash?  What <i>problem</i> are you trying to actually solve?"}, {"owner": {"reputation": 44632, "user_id": 382763, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/swPG1.png?s=128&g=1", "display_name": "Thomas Mueller", "link": "https://stackoverflow.com/users/382763/thomas-mueller"}, "edited": false, "score": 0, "creation_date": 1508957915, "post_id": 46935380, "comment_id": 80827358, "body": "I expanded the question, and added background info."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1508989686, "post_id": 46935380, "comment_id": 80838236, "body": "How micro-optimized do you want this to be?  Can you take advantage of SIMD 128b vectors to manipulate your data?  (x86 SSE, ARM NEON, whatever MIPS calls theirs, ...)  What about hardware CRC instructions on x86?  It&#39;s not a great hash, but it is very fast with hardware support.  (Maybe just concat the &quot;index&quot; and the key and do a 192 bit CRC32C.  If you save the state after processing the key, you get the CRC of key + different indices even more cheaply)"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1508989933, "post_id": 46935380, "comment_id": 80838294, "body": "Do you really need 64-bit indices?  Is something like an XOR of all four 4B chunks anywhere near useful?"}, {"owner": {"reputation": 44632, "user_id": 382763, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/swPG1.png?s=128&g=1", "display_name": "Thomas Mueller", "link": "https://stackoverflow.com/users/382763/thomas-mueller"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1508992356, "post_id": 46935380, "comment_id": 80838923, "body": "@PeterCordes the CRC idea sounds nice, but would require too much hardware support for me (I prefer a solution that works in C as well as Java... I know...). But popcount, clz, nlz and so on a fine. Carry-less multiplication probably not (not available in Java yet). reverseBytes should be fine, it seems to be <a href=\"https://gist.github.com/apangin/7a9b7062a4bd0cd41fcc\" rel=\"nofollow noreferrer\">an intrinsic</a>. Indices should be about 40 bits (32 bit is not enough in some cases), but if there is a great solution with 32 bit, then I could adapt the algorithm maybe."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1508992970, "post_id": 46935380, "comment_id": 80839109, "body": "So you can assume <code>popcnt</code> hardware support but not <code>crc32</code>?  Is it more of a software issue in taking advantage of it?  They both appeared at the same time on Intel, in Nehalem (SSE4.2).  But <a href=\"https://en.wikipedia.org/wiki/SSE4#POPCNT_and_LZCNT\" rel=\"nofollow noreferrer\">AMD had <code>popcnt</code> starting with K10</a>, and not CRC32 until Bulldozer.  Anyway, it&#39;s not <i>really</i> portable to assume hardware popcnt support, but you definitely want to use it if available, so you need some kind of runtime dispatching.  Byte-reverse is cheap since 486 <code>bswap</code>, so you don&#39;t have to worry about that (but I don&#39;t think it helps)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1508993024, "post_id": 46935380, "comment_id": 80839124, "body": "How portable do you need the solution to be?  This is for your library which has C and Java versions and that anyone might use on any hardware?  Including non-x86?  Is it acceptable to use a totally different hash on different machines (run-time) or in different builds (compile time)?  So if support is available, you could do something that would be slow in pure C, but that reduces collisions.  See also <a href=\"https://stackoverflow.com/questions/17645167/implementing-sse-4-2s-crc32c-in-software\" title=\"implementing sse 4 2s crc32c in software\">stackoverflow.com/questions/17645167/&hellip;</a> for CRC32C with HW or SW."}, {"owner": {"reputation": 44632, "user_id": 382763, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/swPG1.png?s=128&g=1", "display_name": "Thomas Mueller", "link": "https://stackoverflow.com/users/382763/thomas-mueller"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1509001638, "post_id": 46935380, "comment_id": 80842795, "body": "@PeterCordes I would prefer a solution that is available on ARM and Intel. Right now I&#39;m experimenting with a solution inspired by <a href=\"https://lemire.me/blog/2017/09/18/visiting-all-values-in-an-array-exactly-once-in-random-order/\" rel=\"nofollow noreferrer\">Daniel Lemire</a>, for 2^n, so that even multiplication is not needed if the same key is used with index, index+1, index+2. I don&#39;t think even hardware CRC can beat addition + shift + xor."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1509002214, "post_id": 46935380, "comment_id": 80843093, "body": "Yeah an LCG (linear congruential generator) should be good with a power-of-2 <code>n</code> (when the compiler <i>knows</i> it&#39;s a power of 2, or you manually code it to modulo using <code>&amp; (n-1)</code>), but you could do that for the index part for any way of hashing the key down to 32-bit, couldn&#39;t you?  (And BTW, one CRC32 instruction has 3c latency on Sandybridge, same as add+shift+xor but fewer instructions to decode.  So it&#39;s quite good as long as you can use the instruction efficiently.  The raw instruction might need some post-processing to make a real CRC32C, but you don&#39;t need that, just its mixing)"}], "answers": [{"comments": [{"owner": {"reputation": 44632, "user_id": 382763, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/swPG1.png?s=128&g=1", "display_name": "Thomas Mueller", "link": "https://stackoverflow.com/users/382763/thomas-mueller"}, "edited": false, "score": 0, "creation_date": 1508958057, "post_id": 46936942, "comment_id": 80827455, "body": "The problem is that this approach is not sufficiently random (see <a href=\"https://en.wikipedia.org/wiki/Avalanche_effect\" rel=\"nofollow noreferrer\">avalanche effect</a>)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 44632, "user_id": 382763, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/swPG1.png?s=128&g=1", "display_name": "Thomas Mueller", "link": "https://stackoverflow.com/users/382763/thomas-mueller"}, "edited": false, "score": 0, "creation_date": 1508993615, "post_id": 46936942, "comment_id": 80839314, "body": "@ThomasMueller  yes, that is the case. But now it depends on your application. If you just want the hash to create a hashmap, random is not needed. But I will leave you as the judge of your application."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1508946838, "creation_date": 1508946838, "answer_id": 46936942, "question_id": 46935380, "link": "https://stackoverflow.com/questions/46935380/very-fast-universal-hash-function-for-128-bit-keys/46936942#46936942", "title": "Very fast universal hash function for 128 bit keys", "body": "<p>You need a hash function that outputs 32 bits for 128 bits of inputs. </p>\n\n<p>A simple way would be to just return \"some\" 32 bits out of the original 128 bits. There are many ways of choosing 32 bits and every choice will have collisions. But the index can decide which 32 bits to choose.</p>\n\n<p>128/32 = 4, so 4 indices are enough to find at least one different bit. </p>\n\n<ul>\n<li>For key 0 you choose the lower most 32 bits</li>\n<li>For key 1 you choose the next 32 bits </li>\n<li>and so on .. </li>\n</ul>\n\n<p>The C implementation would be </p>\n\n<pre><code>uint32_t universal_hash(uint64_t key_higher, uint64_t key_lower, int index) {\n    // For a lack of portable 128 bit datatype we take the key in parts.\n    return 0xFFFFFFFF &amp; ( index &gt;=2 ? key_higher &gt;&gt; ((index - 2)*32) : key_lower &gt;&gt; (index*32));\n}\n</code></pre>\n"}], "owner": {"reputation": 44632, "user_id": 382763, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/swPG1.png?s=128&g=1", "display_name": "Thomas Mueller", "link": "https://stackoverflow.com/users/382763/thomas-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 673, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1508958259, "creation_date": 1508942501, "last_edit_date": 1508958259, "question_id": 46935380, "link": "https://stackoverflow.com/questions/46935380/very-fast-universal-hash-function-for-128-bit-keys", "title": "Very fast universal hash function for 128 bit keys", "body": "<p>I need a very fast universal hash function for a 128-bit key. The returned value needs to be about 32 bit (well, 16 bit would be sufficient; in most cases I only need 1-4 bits actually). </p>\n\n<p>Universal hash means, there are two parameters: key (128 bit) and index (64 bit). For two keys, the universal hash function needs to return different result eventually, if called with different indexes. So with a different index, the universal hash should behave like a different hash function. For <code>x = universalHash(k, i)</code> and <code>y = universalHash(k, i + 1)</code>, it would be best if on average 50% of all bits are different between x and y (randomly). The same for the case if the method is called with different keys. In practise, 5% off is OK for me.</p>\n\n<p>It needs to be very fast (one or two multiplications at most). It is called millions of times. Please don't say: no, you won't need it to be fast. It also needs to return different values eventually.</p>\n\n<p>What I have so far (Java code, but C is (due to the lack of a 128 bit data type, the key is the composite of a and b, which are 64 bit each):</p>\n\n<pre><code>int universalHash(long a, long b, long index) {\n    long x = a ^ Long.rotateLeft(b, (int) index) ^ index;\n    int y = (int) ((x &gt;&gt;&gt; 32) ^ x);\n    y = ((y &gt;&gt;&gt; 16) ^ y) * 0x45d9f3b;\n    y = ((y &gt;&gt;&gt; 16) ^ y) * 0x45d9f3b;\n    y = (y &gt;&gt;&gt; 16) ^ y;\n    return y;\n}\n\nint universalHash2(long a, long b, long index) {\n    long x = Long.rotateLeft(a, (int) index) ^ \n            Long.rotateRight(b, (int) index) ^ index;\n    x = (x ^ (x &gt;&gt;&gt; 32)) * 0xbf58476d1ce4e5b9L;\n    return (int) ((x &gt;&gt;&gt; 32) ^ x);\n}\n</code></pre>\n\n<p>(The second method is actually broken for some values.)</p>\n\n<p>I would like to have a hash function that is faster than those above, and is guaranteed to work in all cases (if possible provably correct, even thought that's not a strict requirement; it doesn't need to be cryptographically secure however).</p>\n\n<p>I will call the universalHash method with incrementing index (first index 0, then index 1, and so on) for the same keys. It would be best if the next result could be calculated faster (e.g. without multiplication) from the previous result. But I also need to have a fast \"direct access\" if the index is some value (as in the example code).</p>\n\n<p><strong>Background</strong></p>\n\n<p>The problem I'm trying to solve is finding a MPHF (minimal perfect hash function) for a relatively small set of keys (up to 16 keys by directly mapping, and up to about 1024 keys by splitting into smaller subsets). For details on the algorithm, see my <a href=\"https://github.com/thomasmueller/minperf\" rel=\"nofollow noreferrer\">MinPerf project</a>, specially the <a href=\"https://github.com/thomasmueller/minperf/blob/master/src/test/java/org/minperf/simple/recsplit.md\" rel=\"nofollow noreferrer\">RecSplit</a> <a href=\"https://www.slideshare.net/ThomasMueller12/recsplit-minimal-perfect-hashing\" rel=\"nofollow noreferrer\">algorithm</a>. To support set of size 10^12 (like <a href=\"https://github.com/rizkg/BBHash\" rel=\"nofollow noreferrer\">BBHash</a>), I'm trying to internally use 128 bit signatures, which would simplify the algorithm.</p>\n"}, {"tags": ["c", "stdout", "stdin"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508942905, "post_id": 46935325, "comment_id": 80818207, "body": "@PaulOgilvie Given the code it looks like &quot;cruft&quot; is standing for &quot;nothing&quot;."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508943029, "post_id": 46935325, "comment_id": 80818304, "body": "How can you tell what is cruft in a binary file?"}, {"owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "edited": false, "score": 0, "creation_date": 1508943085, "post_id": 46935325, "comment_id": 80818346, "body": "I&#39;m trying to send stdin as-is at start of the program to stdout after working with stdin.   I know stdin not being closed, but I remember something about it being a PITA if accessed before. I tried fseek to reset position in stream so that I could read from first byte of stdin to last. Up to 64k at a time."}, {"owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1508943446, "post_id": 46935325, "comment_id": 80818602, "body": "@WeatherVane this attempts to fit values into smaller values, checks if file-size is different after changes. If a file has too many unique chunks, there is no saving, so just output file as-is. I don&#39;t need the program written, it&#39;s this case I just can&#39;t seem to crack it"}, {"owner": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1508943522, "post_id": 46935325, "comment_id": 80818643, "body": "OT: <code>sizeof(char)</code> equals 1 by definition and you are already using that fact implicitly, when you pass <code>sizeof(readbuffer)</code> as the number of elements."}, {"owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "reply_to_user": {"reputation": 9301, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1508943675, "post_id": 46935325, "comment_id": 80818731, "body": "@Bob__ I&#39;ve actually tried switching those operands around too. Same result. zero-length file"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1508945077, "post_id": 46935325, "comment_id": 80819788, "body": "What&#39;s the resulting file?  It writes to stdout, are you using a shell to redirect the output?  What command-line are you using?  If you are redirecting to an existing file then the shell will truncate it to zero bytes before running your program."}, {"owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1508945502, "post_id": 46935325, "comment_id": 80820096, "body": "@cdarke usage: <code>.&#47;executable &lt; &#47;path&#47;to&#47;in -flags &gt; &#47;path&#47;to&#47;out</code> I think the problem is that I&#39;m using stdin to send to utilities, I&#39;m pretty sure that is emptying the stream... I don&#39;t use C often because of weird quirks like this. If I use a different mode (any other flags) my program works just fine, it&#39;s this return stdin if optimized is &gt; original case."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1508950621, "post_id": 46935325, "comment_id": 80823231, "body": "What do you mean by sending to utilities?  Are those called by the C executable?  Its not a particularly weird quirk - most command-line utility programs are written in C and it works the same in all the languages I have ever seen."}, {"owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "edited": false, "score": 0, "creation_date": 1508951161, "post_id": 46935325, "comment_id": 80823526, "body": "utilities (other C code via libraries)"}], "answers": [{"comments": [{"owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "edited": false, "score": 0, "creation_date": 1509222648, "post_id": 46940609, "comment_id": 80934761, "body": "It should also be noted there are easier more widely compatible ways to handle the buffer. Also you either need to deal with buffer overflow, or realloc the memory space (which eats RAM) for n-length files.  The end solution I proposed (still hasn&#39;t been merged upstream) allow a max-size read-bytes option through CLI args."}], "tags": [], "owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "is_accepted": true, "score": 0, "last_activity_date": 1509223389, "last_edit_date": 1509223389, "creation_date": 1508959644, "answer_id": 46940609, "question_id": 46935325, "link": "https://stackoverflow.com/questions/46935325/stdin-to-stdout-after-processing/46940609#46940609", "title": "stdin to stdout after processing", "body": "<p>Right this question has a strange answer. Essentially I had to read <code>stdin</code> into a buffer (<code>inbuf</code>), then output the contents of that buffer. The overarching reason I was getting no output was multi-faceted. </p>\n\n<ol>\n<li><p>Firstly I'd failed to spot a branch which already determined if the input buffer was smaller than the output buffer</p>\n\n<pre><code>if((readinbytes &lt; outbuffersize) || force) {\n    // inside this is where the code was...\n</code></pre></li>\n<li><p>It looks like (because stdout was being used to write to) there was a section that contained a log statement that was not output in the matching <code>else</code> block. The code inherited was terribly formatted so it was never picked up on. </p>\n\n<p>As outputting error messages is not fulfilling the purpose of the utility (always output a valid output file if a valid input file is provided)</p></li>\n</ol>\n\n<p><strong>solution</strong> (<code>stdin</code> is read into <code>inbuf</code> at the start of the program)</p>\n\n<pre><code>set_filemode_binary(stdout);\nif (fwrite(inbuf, 1, readinbytes, stdout) != insize) {\n    fprintf(stderr, \"error writing to stdout\\n\");\n    free(inbuf);\n    exit(3);\n}\n</code></pre>\n\n<p><strong>errata</strong> (reading in <code>stdin</code>)</p>\n\n<pre><code>unsigned char * inbuf = NULL;\nsize_t readinbytes;\nlong insize = 0;\n\n// elsewhere...\n\n// die if no stdin\ninsize = getFileSize(stdin);\nif (insize &lt; 0) {\n    fprintf(stderr, \"no input to stdin\\n\");\n    exit(2);\n}\n// read stdin to buffer\ninbuf = createBuffer(insize); // wrapper around malloc handling OOM\nif ((readinbytes = fread(inbuf, sizeof(char), insize, stdin)) &lt; 0) {\n    fprintf(stderr, \"error reading from stdin\\n\");\n    free(inbuf);\n    exit(3);\n}\n</code></pre>\n\n<p><em>Also</em> don't forget to <code>free(inbuf)</code>. </p>\n\n<pre><code>if(inbuf){ free(inbuf); }\n</code></pre>\n\n<p>I Hope this helps someone.</p>\n"}], "owner": {"reputation": 1100, "user_id": 1548557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0d23686d0f2a1f68be3cdb60a4adc86?s=128&d=identicon&r=PG", "display_name": "MrMesees", "link": "https://stackoverflow.com/users/1548557/mrmesees"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 46940609, "answer_count": 1, "score": -2, "last_activity_date": 1509223389, "creation_date": 1508942354, "last_edit_date": 1508959845, "question_id": 46935325, "link": "https://stackoverflow.com/questions/46935325/stdin-to-stdout-after-processing", "title": "stdin to stdout after processing", "body": "<p>I have a utility that is supposed to optimize files by transforming them into an alternate file-format. If it cannot make the files smaller, I would like the original file returned.</p>\n\n<p>The design is to use <code>stdin</code> in and <code>stdout</code> for input and output. This is for a case where the processed size is larger than the original file size. All other branches are tested as working.</p>\n\n<pre><code>  char readbuffer[65536];\n  ssize_t readinbytes;\n  while ((readinbytes = fread(readbuffer, sizeof(char), insize, stdin)) &gt; 0) {\n    if (fwrite(readbuffer, sizeof(char), readnbytes, stdout) != readnbytes) {\n      fatal(\"can't write to stdout, please smash and burn the computer\\n\");\n    }\n  }\n</code></pre>\n\n<p><strong>Problem</strong> This is resulting in a file with size 0</p>\n"}, {"tags": ["c", "sockets", "ftp", "fork"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1508941795, "post_id": 46934991, "comment_id": 80817387, "body": "What exactly happens when the process dies?  What error message is displayed?"}, {"owner": {"reputation": 81, "user_id": 7175012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Nf17.png?s=128&g=1", "display_name": "spuyet", "link": "https://stackoverflow.com/users/7175012/spuyet"}, "edited": false, "score": 0, "creation_date": 1508941802, "post_id": 46934991, "comment_id": 80817391, "body": "Are you waiting the child process in your parent process ? <a href=\"http://www.manpages.info/linux/wait.2.html\" rel=\"nofollow noreferrer\">manpages.info/linux/wait.2.html</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508942116, "post_id": 46934991, "comment_id": 80817639, "body": "You must ensure that the port is stored in network byte order by using <code>addr.sin_port = htons(port)</code>."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1508942128, "post_id": 46934991, "comment_id": 80817649, "body": "<code>printf</code> output is buffered. You need to either add <code>\\n</code> to your printf string (<code>printf(&quot;OK\\n&quot;);</code>) or an explicit call to <code>flush(stdout)</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508942801, "post_id": 46934991, "comment_id": 80818132, "body": "Your approach to handling PASV seems brittle at best.  You can have only one process listening on a given (address, port) pair at any one time, but you appear to be using only one port to service all PASV transfers.  Since you fork first and attempt to bind the PASV port in the child processes, you&#39;ll be unable to handle multiple simultaneous clients in PASV mode."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508943084, "post_id": 46934991, "comment_id": 80818342, "body": "Note also that you probably want to set the <code>SO_REUSEPORT</code> option on your sockets, or at least on the ones used for your PASV trasfers.  Otherwise, there will be a delay between when you close the listening socket and when you can bind another to the same port."}, {"owner": {"reputation": 47, "user_id": 6892641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ht9fMEjkRq8/AAAAAAAAAAI/AAAAAAAAAAc/hRLlMsrWvaM/photo.jpg?sz=128", "display_name": "Owen", "link": "https://stackoverflow.com/users/6892641/owen"}, "edited": false, "score": 0, "creation_date": 1508945552, "post_id": 46934991, "comment_id": 80820135, "body": "It doesn&#39;t print anything, just stops replying to that client."}, {"owner": {"reputation": 47, "user_id": 6892641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ht9fMEjkRq8/AAAAAAAAAAI/AAAAAAAAAAc/hRLlMsrWvaM/photo.jpg?sz=128", "display_name": "Owen", "link": "https://stackoverflow.com/users/6892641/owen"}, "edited": false, "score": 0, "creation_date": 1508946115, "post_id": 46934991, "comment_id": 80820554, "body": "John: I didn&#39;t use <code>addr.sin_port = htons(port)</code>, but this function works when I first call it in my main process."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1508946185, "post_id": 46934991, "comment_id": 80820595, "body": "Add <code>printf</code> statements (which include <code>\\n</code> in the output string) at each step along the way.  That should give you some idea where you&#39;re going wrong."}, {"owner": {"reputation": 47, "user_id": 6892641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ht9fMEjkRq8/AAAAAAAAAAI/AAAAAAAAAAc/hRLlMsrWvaM/photo.jpg?sz=128", "display_name": "Owen", "link": "https://stackoverflow.com/users/6892641/owen"}, "edited": false, "score": 0, "creation_date": 1508946704, "post_id": 46934991, "comment_id": 80820952, "body": "I use <code>printf</code> to look for the problem and the problem seems to occur between &quot;It is still normal here&quot; and &quot;It is going to break&quot;. Is it the &quot;return 1&quot; that destroy that process?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1508947255, "post_id": 46934991, "comment_id": 80821329, "body": "@Owen No, that just returns from the function.  If your code as given above is accurate, I find it hard to believe that the process just dies and nothing prints after that.  You need to step though your code with a debugger to see exactly what&#39;s happening."}, {"owner": {"reputation": 47, "user_id": 6892641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ht9fMEjkRq8/AAAAAAAAAAI/AAAAAAAAAAc/hRLlMsrWvaM/photo.jpg?sz=128", "display_name": "Owen", "link": "https://stackoverflow.com/users/6892641/owen"}, "edited": false, "score": 0, "creation_date": 1509030061, "post_id": 46934991, "comment_id": 80862763, "body": "The program finally works after I refactored my functions in <code>server.c</code>, though I still don&#39;t know why... The error just happened and disappeared. But I did learn a lot from above comments."}, {"owner": {"reputation": 47, "user_id": 6892641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ht9fMEjkRq8/AAAAAAAAAAI/AAAAAAAAAAc/hRLlMsrWvaM/photo.jpg?sz=128", "display_name": "Owen", "link": "https://stackoverflow.com/users/6892641/owen"}, "edited": false, "score": 0, "creation_date": 1509030180, "post_id": 46934991, "comment_id": 80862856, "body": "The program finally works after I refactored my functions in <code>server.c</code>, though I still don&#39;t know why... The error just happened and disappeared. But I did learn a lot from above comments."}], "owner": {"reputation": 47, "user_id": 6892641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-ht9fMEjkRq8/AAAAAAAAAAI/AAAAAAAAAAc/hRLlMsrWvaM/photo.jpg?sz=128", "display_name": "Owen", "link": "https://stackoverflow.com/users/6892641/owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508948256, "creation_date": 1508941487, "last_edit_date": 1508948256, "question_id": 46934991, "link": "https://stackoverflow.com/questions/46934991/socket-process-dies-after-binding-a-new-socket", "title": "Socket: process dies after binding a new socket", "body": "<p>I'm writing an ftp server in C using fork() to handle multiple client. The \ncreate part and bind part are as follows:</p>\n\n<pre><code>//create socket\nint createSocket()\n{\n    int listenfd;\n    if ((listenfd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1) \n    {\n        printf(\"Error socket(): %s(%d)\\n\", strerror(errno), errno);\n        exit(1);\n    }\n    printf(\"socketfd is: %d\\n\", listenfd);\n    return listenfd;\n}\n\nint bindSocketToServer(int listenfd, int port)\n{\n    struct sockaddr_in addr;\n    memset(&amp;addr, 0, sizeof(addr));\n    addr.sin_family = AF_INET;\n    addr.sin_port = port;\n    addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    if (bind(listenfd, (struct sockaddr*)&amp;addr, sizeof(addr)) == -1) \n    {\n        printf(\"Error bind(): %s(%d)\\n\", strerror(errno), errno);\n        return -1;  \n    }\n    //It is normal here.\n    pirntf(\"It is still normal here.\\n\");\n    return 1;\n}\n\npasvPort = 30000;\npasvFilefd = createSocket();\nwhile(1)\n{\n    printf(\"start.\\n\");\n    if(bindSocketToServer(pasvFilefd, pasvPort) &gt; 0)\n    {\n        printf(\"going to break.\\n\"); \n        break;\n    }\n    else\n        pasvPort += 1;\n    printf(\"error.\\n\");\n}\nprintf(\"Listening port%d\", pasvPort); //It can be printed.\n</code></pre>\n\n<p>These work fine when I start my server and listen to port 21 in main process. But when I try to handle 'pasv' command and bind a socket to a new port as follows(in another process created by fork()), the process dies and I don't know why.</p>\n\n<p>Edit: That's how I use fork().And in serveOneClient() I handle the 'pasv' command. </p>\n\n<pre><code>pid = fork();\nif(pid &lt; 0)\n{\n    printf(\"Error fork(): %s(%d)\\n\", strerror(errno), errno);           \n    continue;\n}\nelse if(pid == 0)\n{\n    close(listenfd);\n    serveOneClient(connfd);\n    printf(\"serving one over.\\n\");\n    close(connfd);\n    return 0;\n}\nelse\n    close(connfd);\n</code></pre>\n"}, {"tags": ["c", "arrays", "data-structures", "mpi", "function-pointers"], "comments": [{"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1508945061, "post_id": 46934813, "comment_id": 80819781, "body": "Please show some code, your explanation is very hard to follow. For example, &quot;array of user defined structures&quot; seens to be an array  to user defined structures."}, {"owner": {"reputation": 37, "user_id": 5423909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb77f9f9588f3b4e72af54caf0242680?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Folly", "link": "https://stackoverflow.com/users/5423909/nathan-folly"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1509014560, "post_id": 46934813, "comment_id": 80851385, "body": "Fair enough, I hope it is clearer now. The problem lies within the function <i>Cell_givenumberofvertices_parallel()</i>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5423909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb77f9f9588f3b4e72af54caf0242680?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Folly", "link": "https://stackoverflow.com/users/5423909/nathan-folly"}, "edited": false, "score": 0, "creation_date": 1509106123, "post_id": 46954681, "comment_id": 80896756, "body": "Yes, I might have oversimplified the code in my quest to produce a small example. I the actual application, the vertex positions change over time. Also the function <i>get/givenumberovertices()</i> is just a simplified representation. In the real application, the employed function depends on the number of vertices and their location. Adding an MPI_Comm * comm to struct Cell sounds like what I&#39;m looking for. But I struggle to understand where and how to create that new communicator. If I do it in <i>createCell()</i>, I don&#39;t know on which other processors the cell exists."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "reply_to_user": {"reputation": 37, "user_id": 5423909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb77f9f9588f3b4e72af54caf0242680?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Folly", "link": "https://stackoverflow.com/users/5423909/nathan-folly"}, "edited": false, "score": 0, "creation_date": 1509107141, "post_id": 46954681, "comment_id": 80897356, "body": "i updated my answer with the communicator creation. the cell communicator should be created once all your cell have been initialized."}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 0, "last_activity_date": 1509107103, "last_edit_date": 1509107103, "creation_date": 1509021776, "answer_id": 46954681, "question_id": 46934813, "link": "https://stackoverflow.com/questions/46934813/mpi-communicator-for-each-element-of-an-array-of-structures/46954681#46954681", "title": "mpi communicator for each element of an array of structures", "body": "<p>I still do not get the full picture of what you are trying to achieve nor the rationale for such a design.</p>\n\n<p>Anyway, here are some thoughts.</p>\n\n<p>First, be aware that when invoking a collective operation, all tasks from the communicator should invoke it, otherwise some tasks may hang.</p>\n\n<p>Second, in <code>Cell_givenumberofvertices_parallel()</code>, you can replace <code>MPI_Gather()</code> with <code>MPI_Reduce()</code>. And since the main loop print on all the ranks, i believe you really want <code>MPI_Allreduce()</code></p>\n\n<p>I also suspect you want to add a <code>MPI_Comm * comm</code> field to <code>struct Cell</code>,\notherwise not all ranks invoke the collective on <code>MPI_COMM_WORLD</code> and that will hang.</p>\n\n<p>Third, i do not see the need for a pointer function.</p>\n\n<p>If a cell is only on one task, then the comm should be <code>MPI_COMM_SELF</code>, and you can use <code>MPI_Allreduce()</code> so there is no need for two subroutines.</p>\n\n<p>Last but not least, i do not see how the function can return different values over time, so the total number of vertices can be computed at initialization, and stored as new field.</p>\n\n<p>for example, that could be</p>\n\n<pre><code>struct Cell{\n  unsigned localNbOfVertices;\n  unsigned totalNbOfVertices;\n  MPI_Comm comm;\n};\n</code></pre>\n\n<p>and in your main loop, you can</p>\n\n<pre><code>  for(i=0;i&lt;numberofcells;i++){\n     unsigned local=0, total;\n     MPI_Comm comm;\n     if(cells[i]) local=cells[i]-&gt;localNbOfVertices;\n     MPI_Allreduce(&amp;local, &amp;total, 1, MPI_UNSIGNED, MPI_SUM, MPI_COMM_WORLD);\n     if(cells[i] cells[i]-&gt;totalNbOfVertices = total;\n     printf(\"%i vertices in cell number %i \\n\",total,i);\n     if(cells[i]) MPI_Comm_split(MPI_COMM_WORLD, 0, world_rank, &amp;cells[i]-&gt;comm); else MPI_Comm_split(MPI_COMM_WORLD, MPI_UNDEFINED, world_rank, &amp;comm);\n  }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5423909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb77f9f9588f3b4e72af54caf0242680?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Folly", "link": "https://stackoverflow.com/users/5423909/nathan-folly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 46954681, "answer_count": 1, "score": 0, "last_activity_date": 1509107103, "creation_date": 1508940970, "last_edit_date": 1509014284, "question_id": 46934813, "link": "https://stackoverflow.com/questions/46934813/mpi-communicator-for-each-element-of-an-array-of-structures", "title": "mpi communicator for each element of an array of structures", "body": "<p>I'm new to MPI and not sure if this is the right approach. Or if I am supposed to use MPI in this manner but my problem is the following:</p>\n\n<p>I have an array of pointers to user defined structures. Depending on what's happening in each process, an element of the array may either be NULL or a pointer to the instance of the user defined structure. I now need the elements of the array to communicate with each other over MPI. This is problematic, since some of them do not exist.</p>\n\n<p>I should elaborate: The structure has a function pointer to the function in which the communication needs to happen. If the element exists, the function gets called. If not, not.</p>\n\n<p>My Idea: create a dedicated MPI communicator for each element of the array that includes all the processors on which the element is NOT NULL. Then refer to this communicator during communication for the respective element.</p>\n\n<p>Can I create an \"array\" of MPI communicators, one for each element of the array? And then reference MPI_COMM_ARRAY[i] for each element?\nOr am I just completely on a dead end and shouldn't use NULL as array entries at all?\nWhat is the \"clean\" way of coding this?</p>\n\n<p>This is a simplification of what I have right now. It works if by chance the cells exist across all processes. It fails if they don't.\nExample code:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt;\n#include &lt;mpi.h&gt;\n\n\nvoid * createcell();\nvoid Cell_givenumberofvertices(void * _self, int * NbOfVertices);\nvoid Cell_givenumberofvertices_parallel(void * _self, int * NbOfVertices);\nvoid Cell_addvertex(void * _self);\nvoid addvertex(void * _self);\nvoid getnumberofvertices(void * _self, int * NbOfVertices);\n\n\nstruct Cell{\n  unsigned NbOfVertices;\n  void (* givenumberofvertices)(void * _self, int * NbOfVertices);\n  void (* addvertex)(void * _self);\n};\n\nvoid * createcell(){\n  struct Cell * self = calloc(1, sizeof(struct Cell));\n  int world_size;\n\n  MPI_Comm_size(MPI_COMM_WORLD,&amp;world_size);\n\n  self-&gt;NbOfVertices = 0;\n  self-&gt;addvertex = Cell_addvertex;\n\n  if(world_size==0) self-&gt;givenumberofvertices = Cell_givenumberofvertices;\n  else self-&gt;givenumberofvertices = Cell_givenumberofvertices_parallel;\n\n  return self;\n}\n\nvoid Cell_givenumberofvertices(void * _self, int * NbOfVertices){\n   struct Cell * self = _self;\n   * NbOfVertices = self-&gt;NbOfVertices;\n   return;\n}\n\nvoid Cell_givenumberofvertices_parallel(void * _self, int * NbOfVertices){\n  struct Cell * self = _self;\n  int world_size, world_rank;\n  int i;\n  int * NbVertxOnProcess;\n  int totalnumberofvertices=0;\n\n  MPI_Comm_size(MPI_COMM_WORLD,&amp;world_size);\n  MPI_Comm_rank(MPI_COMM_WORLD,&amp;world_rank);\n  NbVertxOnProcess = (int *) malloc(world_size*sizeof(int));\n\n  MPI_Gather(&amp;(self-&gt;NbOfVertices),1,MPI_UNSIGNED,NbVertxOnProcess,1,MPI_INT,0,MPI_COMM_WORLD);\n\n  for(i=0;i&lt;world_size;i++) totalnumberofvertices+=NbVertxOnProcess[i];\n\n   * NbOfVertices = totalnumberofvertices;\n   return;\n}\n\nvoid Cell_addvertex(void * _self){\n  struct Cell * self = _self;\n  self-&gt;NbOfVertices ++;\n  return;\n}\n\n void addvertex(void * _self){\n   struct Cell * self = _self;\n   self-&gt;addvertex(self);\n }\n\n void getnumberofvertices(void * _self, int * NbOfVertices){\n  struct Cell * self = _self;\n  self-&gt;givenumberofvertices(self, NbOfVertices);\n }  \n\n\n\nint main(int argc, char *argv[]) {\n  void ** cells;\n  int i,j;\n  const int numberofcells = 100;\n  const int numberofvertices = 100;\n  const float domainlength = 115.4;\n  float grid[numberofcells];\n  float vertexcoordinates[numberofvertices];\n  int world_rank;\n\n  MPI_Init(NULL,NULL);\n\n  /* create array of Cell pointers */\n  cells = (void **) calloc(numberofcells,sizeof(void *));\n\n  /* create grid */\n  for(i=0;i&lt;numberofcells;i++){\n    grid[i]=domainlength/numberofcells*(i+1);\n  }\n  /* generate random vertex coordinates */\n  MPI_Comm_rank(MPI_COMM_WORLD,&amp;world_rank);\n  srand((unsigned int) world_rank);\n  for(i=0;i&lt;numberofvertices;i++){\n    vertexcoordinates[i]=((float)rand()/(float)(RAND_MAX)) * domainlength;\n  }\n  /* find the cell the vertex is in */\n  for(i=0;i&lt;numberofvertices;i++){\n    for(j=0;j&lt;numberofcells;j++){\n      float lb, ub;\n      if(j==0) lb=0.0;\n      else lb=grid[j-1];\n      ub = grid[j];\n      if(lb&lt;vertexcoordinates[i]&amp;&amp;vertexcoordinates[i]&lt;ub){\n         if(!cells[j]){\n          cells[j]=createcell();\n         }\n        addvertex(cells[j]);\n      }\n    }\n  }\n\n  for(i=0;i&lt;numberofcells;i++){\n     if(cells[i]){\n      int NbVertxInCell;\n      getnumberofvertices(cells[i], &amp;NbVertxInCell);\n      printf(\"%i vertices in cell number %i \\n\",NbVertxInCell,i);\n    }\n  }\n  MPI_Finalize();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "malloc", "free"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508941094, "post_id": 46934785, "comment_id": 80816888, "body": "You should ask one question at a time, and search before posting to find whether it has already been answered. Did you try any basic searches like <i>C what does free do</i> or <i>C double free</i>? This will be a duplicate of <a href=\"https://stackoverflow.com/questions/28454123/c-what-does-free-do-to-the-memory\">C - What does free() do to the memory?</a> and/or <a href=\"https://stackoverflow.com/questions/21057393/what-does-double-free-mean\">What does \u201cdouble free\u201d mean?</a> or any of tens of other equivalent questions."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508941892, "post_id": 46934785, "comment_id": 80817457, "body": "also: <a href=\"https://stackoverflow.com/questions/33840319/why-does-free-not-clear-out-a-pointers-value\">Why does free not clear out a pointers value?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8661834, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2vsTiFvP910/AAAAAAAAAAI/AAAAAAAAAFM/3a077yA5gKQ/photo.jpg?sz=128", "display_name": "Kunal Chand", "link": "https://stackoverflow.com/users/8661834/kunal-chand"}, "edited": false, "score": 0, "creation_date": 1508957619, "post_id": 46935087, "comment_id": 80827185, "body": "Thank You for your fast Response.  Kindly Explain in a Little Simpler Manner . What is UB ?"}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "reply_to_user": {"reputation": 1, "user_id": 8661834, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2vsTiFvP910/AAAAAAAAAAI/AAAAAAAAAFM/3a077yA5gKQ/photo.jpg?sz=128", "display_name": "Kunal Chand", "link": "https://stackoverflow.com/users/8661834/kunal-chand"}, "edited": false, "score": 0, "creation_date": 1508957927, "post_id": 46935087, "comment_id": 80827366, "body": "@KunalChand UB = Undefined Behaviour = anything can happen, from the progam continuing as if everything was correct and even returning correct results, through any unreasonable or even weird results up to sudden crash of the proces and program termination."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508959424, "post_id": 46935087, "comment_id": 80828266, "body": "UB is behaviour that the Standard does not define, which therefore renders the result of an offending program undefined, meaning that it may fail to compile, work 100% perfectly until it horribly breaks 3 years later, or even make you a nice cup of tea. In other words, avoid it as an absolute rule. You may ask why such a category of behaviour exists? Well, (A) again, just search about it, and (B) because C is designed to be a fast language, not a safe one, so the onus is on the programmer not to invoke UB, instead of being on the language to waste cycles saving the programmer from themselves."}], "tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": false, "score": 1, "last_activity_date": 1508941736, "creation_date": 1508941736, "answer_id": 46935087, "question_id": 46934785, "link": "https://stackoverflow.com/questions/46934785/free-function-use-in-c/46935087#46935087", "title": "free() Function use in C?", "body": "<p><code>free(ptr)</code> de-allocates the memory block pointed to by its argument <code>ptr</code>, that is it returns the block to the free pool. Consecutive calls to <code>malloc()</code> may use that memory, re-allocating it for another purpose.</p>\n\n<p>However, <code>free()</code> receives its argument as <strong>a copy</strong>, that is it gets the value from the <code>ptr</code> variable, <em>not the variable itself</em>. As a result it can't 'clear the pointer'. If you expect the <code>ptr</code> variable becomes <code>NULL</code>, you're wrong. That's a common mistake. You should assign <code>ptr = NULL</code> yourself after <code>free()</code> to make sure the variable value becomes unusable.</p>\n\n<p>As for the memory block itself: <code>free()</code> is not obliged to 'make it garbage' or clear it. You can try accessing the freed memory by the same pointer, and often you will see the previous content still present there.<br>\nBut <strong>don't rely on it!</strong> The memory can be reallocated for another purpose almost any time (the freed memory <em>might</em> even become unavailable for the process), so fiddling with it may invoke unpredictable results (so-called Undefined Behavior).</p>\n\n<p>An attempt to deallocate a block twice (i.e. a second <code>free()</code> with the same pointer) is UB, too.</p>\n"}], "owner": {"reputation": 1, "user_id": 8661834, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2vsTiFvP910/AAAAAAAAAAI/AAAAAAAAAFM/3a077yA5gKQ/photo.jpg?sz=128", "display_name": "Kunal Chand", "link": "https://stackoverflow.com/users/8661834/kunal-chand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1554847663, "creation_date": 1508940873, "last_edit_date": 1554847663, "question_id": 46934785, "link": "https://stackoverflow.com/questions/46934785/free-function-use-in-c", "title": "free() Function use in C?", "body": "<p>I am Confused and thinking about Free Pointer in Following way , can someone clarify </p>\n\n<p>I always thought that the free function just removes the address stored in the pointer, hence breaking the connection between the pointer and the space allocated for block. At the end making the values at the space a garbage value and hence making it virtually free to use by another program. </p>\n\n<p>Please specify the reason why I am wrong.</p>\n\n<p>Also, What happens when you point two pointers to a single space allocated \nand Try to free them both? Does it Gives a compilation Error / Run Time Error?</p>\n"}, {"tags": ["c", "algorithm", "time", "embedded"], "comments": [{"owner": {"reputation": 42740, "user_id": 189134, "user_type": "moderator", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jFsyb.png?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/189134/andy"}, "edited": false, "score": 1, "creation_date": 1508979619, "post_id": 46934779, "comment_id": 80835859, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/157523/discussion-on-question-by-brendanmcl-in-ansi-c-how-to-handle-or-expressions\">moved to chat</a>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1509006714, "post_id": 46934779, "comment_id": 80845952, "body": "1. No 2. <code>time_diff = current_time - previous_time; if (time_diff &lt; 0) time_diff += 24*60*60;</code> 3. Store timestamps in seconds (or smaller units), only convert to hh:mm:ss or whatever for human-facing output."}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1510490791, "post_id": 46934779, "comment_id": 81448053, "body": "Unless you can guarantee that it can only ever cross <i>one</i> midnight boundary, using time-of-day only is a bad idea. In fact, it&#39;s a bad idea for even only zero or one crossings since, if a job starts 9:15am Monday and finishes 9:30am Tuesday, how many hours is that?"}, {"owner": {"reputation": 37, "user_id": 8832006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143d677487b74f41eb29304391f7d4f6?s=128&d=identicon&r=PG&f=1", "display_name": "BrendanMcL", "link": "https://stackoverflow.com/users/8832006/brendanmcl"}, "reply_to_user": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1510544761, "post_id": 46934779, "comment_id": 81464475, "body": "@paxdiablo : agree. We ended up down this path due the nature of the system (a fodder growing room) prototyped on arduino. The system is off-grid and has no net connectivity, so implementing a proper calendar system (and keeping it synched to real-time) seemed overkill. The user specifies a number of schedule events by setting the days of the week they should run and the start and stop times (or start duration repeat) so at most the system can handle a 1 week repeating timeframe. Needing to run lights and heaters overnight brought up the midnight crossing issue."}, {"owner": {"reputation": 37, "user_id": 8832006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143d677487b74f41eb29304391f7d4f6?s=128&d=identicon&r=PG&f=1", "display_name": "BrendanMcL", "link": "https://stackoverflow.com/users/8832006/brendanmcl"}, "reply_to_user": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1510544942, "post_id": 46934779, "comment_id": 81464521, "body": "@paxdiablo : in your example the config file would specify start = 09:15:00, stop = 09:30:00, and would be treated as a 15 minute job. Its a limitation of the system therefore that no job can run for more than 24 hours."}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 8832006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143d677487b74f41eb29304391f7d4f6?s=128&d=identicon&r=PG&f=1", "display_name": "BrendanMcL", "link": "https://stackoverflow.com/users/8832006/brendanmcl"}, "is_accepted": false, "score": 1, "last_activity_date": 1510498026, "last_edit_date": 1510498026, "creation_date": 1510489823, "answer_id": 47248794, "question_id": 46934779, "link": "https://stackoverflow.com/questions/46934779/in-ansi-c-how-to-handle-or-time-expressions-crossing-midnight-without-using/47248794#47248794", "title": "In ANSI C, how to handle &gt; or &lt; time expressions crossing midnight without using a day variable", "body": "<ol>\n<li>Definitely use time_t with an epoch reference. As a 32 bit value in seconds from the reference time it allows > &lt; >= and &lt;= expressions to be language native rather than needing special treatment. </li>\n<li>For a schedule that may start and finish in the same day, or may start today and finish tomorrow (or start yesterday and finish today), and is only described in terms of 24 hour time, there are 6 possible patterns to consider with reference to now : as illustrated and extensively commented in the following code:</li>\n</ol>\n\n<p>. </p>\n\n<pre><code>void ScheduleOperate(BlockNode *b) {\n    tm* now_tm;\n    tm* temp_tm;\n\n    time_t start;\n    time_t end;\n    time_t zero_today;\n\n    time_t now;\n    time_t temp;\n\n    temp = time(NULL);\n    temp_tm = localtime(&amp;temp);\n\n    temp_tm-&gt;tm_hour = 0;\n    temp_tm-&gt;tm_min = 0;\n    temp_tm-&gt;tm_sec = 0;\n    zero_today = mktime(temp_tm);\n\n    now = time(NULL);\n    now_tm = localtime(&amp;now);\n\n\n    uint8_t target_state = UINT8_INIT;\n    uint8_t today_num = now_tm-&gt;tm_wday;\n    uint8_t yesterday_num = ((today_num - 1) + 7) % 7;\n\n\n    switch (b-&gt;block_type) {\n        case SCH_START_STOP: {\n\n            // convert start and end times to time_t values\n            start = zero_today + b-&gt;settings.sch.time_start;\n            end = zero_today + b-&gt;settings.sch.time_end;\n\n            // Determine the pattern - a schedule contained within today (end &gt;= start) or one that\n            //  crosses midnight (end &lt; start).\n\n            if (end &gt;= start) { //schedule contained within this 24hr period\n                // is today an active day?\n                //XXX align day num conversion\n                if (b-&gt;settings.sch.days[today_num] == 1) {\n                    // Could be in 1 of 3 periods\n                    //  1 - before start time (start &gt; now &amp;&amp; end &gt;= now)\n                    //  2 - during the active period (start &lt; now &amp;&amp; end &gt;= now)\n                    //  3 - after the active period (start &lt; now &amp;&amp; end &lt; now)\n                    if (start &gt; now &amp;&amp; end &gt;= now) target_state = 0;\n                    if (start &lt;= now &amp;&amp; end &gt; now) target_state = 1;\n                    if (start &lt;= now &amp;&amp; end &lt; now) target_state = 0;\n                }\n            } else {\n                if (end &lt; start) {\n                    //schedule must cross midnight\n                    // Could be in 1 of 3 periods\n                    //  1 - yesterday was active and it started yesterday and is still running\n                    //  2 - if it was active yesterday it is now finished, and not yet time to start again\n                    //  3 - in the next active period that will continue past the next midnight\n\n                    // was yesterday an active day? (ie. active period started yesterday)\n                    if (b-&gt;settings.sch.days[yesterday_num] == 1) {\n                        // start an active period from yesterday that should be still running\n                        if (start &gt;= now &amp;&amp; end &gt; now) target_state = 1;\n                        // time to turn it off?\n                        if (start &gt;= now &amp;&amp; end &lt; now) target_state = 0;\n                    }\n                    // is today active?\n                    if (b-&gt;settings.sch.days[today_num]) {\n                        if (start &lt;= now &amp;&amp; end &lt; now) target_state = 1;\n                    }\n                }\n            }\n                if (target_state == 1 &amp;&amp; b-&gt;active == 0) {              //all conditions met, go active\n                    b-&gt;active = 1;\n                    b-&gt;last_update = now;\n                    EventMsg(b-&gt;block_id, E_ACT);\n                }\n                if (target_state == 0 &amp;&amp; b-&gt;active == 1) { //deact\n                    b-&gt;active = 0;\n                    b-&gt;last_update = now;\n                    EventMsg(b-&gt;block_id, E_DEACT);\n                }\n\n            break;\n        }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8832006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143d677487b74f41eb29304391f7d4f6?s=128&d=identicon&r=PG&f=1", "display_name": "BrendanMcL", "link": "https://stackoverflow.com/users/8832006/brendanmcl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1510498026, "creation_date": 1508940836, "last_edit_date": 1509005649, "question_id": 46934779, "link": "https://stackoverflow.com/questions/46934779/in-ansi-c-how-to-handle-or-time-expressions-crossing-midnight-without-using", "title": "In ANSI C, how to handle &gt; or &lt; time expressions crossing midnight without using a day variable", "body": "<p>In the following code example (which compiles and runs):</p>\n\n<pre><code>typedef struct BASIC_TIME {\n    int hh;\n    int mm;\n    int ss;\n} BasicTime_t;\n\ntypedef struct DEVICE {\n    // id, settings, etc\n    BasicTime_t last_checked;\n    BasicTime_t check_interval;\n} Device_t;\n\nBasicTime_t GetTimeNow(void) {\n    BasicTime_t now;\n    // Code to get real-time - differs from platform to platform\n    // Edge case for this example:\n        now.hh = 23;\n        now.mm = 55;\n        now.ss = 00;\n    return now;\n}\n\nint TimeGrEq(BasicTime_t a, BasicTime_t b) {\n    // is time a &gt;= time b (i.e. is a later than b) ?\n    // Question - is there a more elegant way to write this function?\n    if (a.hh &lt; b.hh) {\n        return 0;\n    }\n    if (a.hh &gt; b.hh) {\n        return 1;\n    } else { // must be same hour\n        if (a.mm &gt; b.mm) {\n            return 1;\n        }\n        if (a.mm &lt; b.mm) {\n            return 0;\n        } else { //must be same minute\n            if (a.ss &gt; b.ss) {\n                return 1;\n            }\n            if (a.ss &lt; b.ss) {\n                return 0;\n            } else { // must be the same time!\n                return 1;\n            }\n        }\n    }\n}\n\n\nBasicTime_t AddTime (BasicTime_t t1, BasicTime_t t2) {\n    BasicTime_t result;\n    // Question is there an elegant way to do this?\n    result.hh = t1.hh + t2.hh;\n    result.mm = t1.mm + t2.mm;\n    result.ss = t1.ss + t2.ss;\n    if (result.ss &gt;= 60) {\n        result.ss = result.ss % 60;\n        result.mm++;\n    }\n    if (result.mm &gt;= 60) {\n        result.mm = result.mm % 60;\n        result.hh++;\n    }\n    if (result.hh &gt;= 24) {\n        result.hh = result.hh % 24;\n        //We loose any day carry when crossing midnight\n        //unless we add another variable\n\n    }\n    return result;\n}\n\nvoid ReadDevice(Device_t device) {\n    //code to read and log data from the device -\n    //e.g. a temperature sensor\n    device.last_checked = GetTimeNow();\n    printf(\"Device Checked - Next Should be 10 Minutes From Now\\n\");\n}\n\nint IsItTime(BasicTime_t last_checked, BasicTime_t interval) {\n    BasicTime_t now = GetTimeNow();\n    BasicTime_t next = AddTime(last_checked, interval);\n    if (TimeGrEq(now, next)) {\n        return 1;\n    }\n    return 0;\n}\n\nint main(void) {\n    Device_t sensor;\n\n    // to illustrate an edge case example:\n    sensor.last_checked.hh = 23;\n    sensor.last_checked.mm = 53;\n    sensor.last_checked.ss = 0;\n\n    sensor.check_interval.hh = 0;\n    sensor.check_interval.mm = 10;\n    sensor.check_interval.ss = 0;\n\n    while(1) {\n        if (IsItTime(sensor.last_checked, sensor.check_interval)) {\n            // In this edge case IsItTime will evaluate TRUE in error\n            // Question - In ANSI C is there a smart / best practice\n            //      way to detect midnight roll-over in a custom time\n            //      struct without extra day flags or variables?\n            // Question - How should the test be \"debounced\" given\n            //      that the loop will execute many times during\n            //      the 1 second interval (is it possible to do it \n            //      without adding further \"done\" flags that have to\n            //      be cleared later?)\n\n            ReadDevice (sensor);\n        }\n    }\n    return -1;\n}\n</code></pre>\n\n<ol>\n<li><p>In ANSI C is there a smart / best practice way to detect midnight roll-over in a custom time struct without extra day flags or variables?</p></li>\n<li><p>Question - How should the test be \"debounced\" given that the loop will execute many times during the 1 second interval (is it possible to do it without adding further \"done\" flags that have to be cleared later?</p></li>\n<li><p>How can the time operations code be improved - see inline comments?</p></li>\n</ol>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 5, "creation_date": 1508940065, "post_id": 46934432, "comment_id": 80815996, "body": "Been a while since I&#39;ve done any C, but here&#39;s my best guess: If the <code>void gradient ...</code> line is the first thing in your header file then <code>npy_intp*</code> is the problem, since your header doesn&#39;t itself <code>include</code> the numpy headers that define <code>npy_intp</code> as a type."}, {"owner": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "reply_to_user": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 0, "creation_date": 1508940670, "post_id": 46934432, "comment_id": 80816549, "body": "But the file that includes &quot;gradient.h&quot; includes the numpy headers, isn&#39;t that enough?"}, {"owner": {"reputation": 5307, "user_id": 2372812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/atrZ9.jpg?s=128&g=1", "display_name": "Tom Dalton", "link": "https://stackoverflow.com/users/2372812/tom-dalton"}, "edited": false, "score": 1, "creation_date": 1508940911, "post_id": 46934432, "comment_id": 80816753, "body": "The error you&#39;re seeing suggests it is not... but like I say, I&#39;m rusty. It&#39;s probably worth trying to add the relevant numpy header[s] to gradient.h and see what happens... and then give me a grovelling apology if it works ;-)"}, {"owner": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "edited": false, "score": 1, "creation_date": 1508942665, "post_id": 46934432, "comment_id": 80818025, "body": "No it is not. The file &quot;gradient.h&quot; will be compiled with only the headers specified <i>in it</i> included. On the other hand, there exist many very fine tools to optimize numerical operations in Python: <a href=\"http://docs.cython.org/en/latest/\" rel=\"nofollow noreferrer\">Cython</a> is easy to install, for instance, but there are many more."}], "owner": {"reputation": 513, "user_id": 4170533, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6d7e9e1d005c09df672403daa8d72e6?s=128&d=identicon&r=PG&f=1", "display_name": "Lugi", "link": "https://stackoverflow.com/users/4170533/lugi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508939900, "creation_date": 1508939900, "question_id": 46934432, "link": "https://stackoverflow.com/questions/46934432/compiling-a-c-extension-for-python", "title": "Compiling a C extension for Python", "body": "<p>I've written a C extension for Python (bascially the first thing I've ever coded in C). I've stumbled upon a few compiler errors in header file where I declare the function. Declaration looks like following:</p>\n\n<pre><code>void gradient(float* inputs, float* kernels, float* grads, npy_intp* input_dims, npy_intp* kernels_dims, npy_intp* output_dims,  float* g_inputs, float* g_kernels);\n</code></pre>\n\n<p>Compiler throws the following errors</p>\n\n<pre><code>gradient.h(1): error C2143: syntax error: missing ')' before '*'\ngradient.h(1): error C2081: 'npy_intp': name in formal parameter list illegal\ngradient.h(1): error C2143: syntax error: missing '{' before '*'\ngradient.h(1): error C2143: syntax error: missing ';' before '*'\ngradient.h(1): error C2059: syntax error: 'type'\ngradient.h(1): error C2059: syntax error: ')'\n</code></pre>\n\n<p>The error with 'npy_inpt' I think I understand, I should convert that npy_intp array to C ints before passing it to function, is that correct? But what about the first one with pointer ('*')?</p>\n"}, {"tags": ["c", "arrays", "character"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1508939559, "post_id": 46934256, "comment_id": 80815561, "body": "<a href=\"https://linux.die.net/man/3/isdigit\" rel=\"nofollow noreferrer\"><code>man isdigit</code></a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1508939870, "post_id": 46934256, "comment_id": 80815820, "body": "<code>i &lt;= sizeof(string) &#47; sizeof(string[0]) - 1;</code> --&gt; <code>string[i];</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1508939964, "post_id": 46934256, "comment_id": 80815892, "body": "Unrelated, but there is no such thing as a &quot;non-integer-character&quot;, but there are &quot;non-digit chararacters&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508940135, "post_id": 46934456, "comment_id": 80816071, "body": "Damn, It&#39;s shorter! Op&#39;s solution is actually inefficent, and they aren&#39;t bad overall!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508940583, "post_id": 46934456, "comment_id": 80816482, "body": "I don&#39;t see any significant difference between your <code>arrayContains</code> and the one of the OP."}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508940606, "post_id": 46934456, "comment_id": 80816507, "body": "2nd part of for loop"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508940661, "post_id": 46934456, "comment_id": 80816539, "body": "OK, but that&#39;s not really <i>significant</i> nor better nor worse, just different."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1508940753, "post_id": 46934456, "comment_id": 80816600, "body": "OK, now <code>arrayContains</code> is really pointless, why not just call <code>isdigit</code> in first place? And the name <code>arrayContains</code> is misleading anyway."}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508941144, "post_id": 46934456, "comment_id": 80816924, "body": "Hey! If op WANTS to have such function - let him! Plus, return values!"}], "tags": [], "owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "is_accepted": false, "score": 2, "last_activity_date": 1508941195, "last_edit_date": 1508941195, "creation_date": 1508939963, "answer_id": 46934456, "question_id": 46934256, "link": "https://stackoverflow.com/questions/46934256/c-search-for-non-number-character-in-array/46934456#46934456", "title": "C: search for non-number-character in array", "body": "<p>You should really check out <code>isdigit</code> C function!</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n\nint hasDigit(const char *s)\n{\n    while (*s) {\n        if (isdigit(*s++) == 0) return 0;\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p>Code above returns 1 on empty string. Watch out! You can use my function instead of your <code>arrayContains</code>. If you want to use your routine, please check out my \"version\":</p>\n\n<pre><code>int arrayContains(char value) {\n    return isdigit(value)?0:-1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1508940087, "post_id": 46934480, "comment_id": 80816017, "body": "This doesn&#39;t solve problem of arrayConsains return value problem"}, {"owner": {"reputation": 87, "user_id": 6824409, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BGV288dq0a4/AAAAAAAAAAI/AAAAAAAAAHM/OPEz7JaVsIc/photo.jpg?sz=128", "display_name": "Soocks", "link": "https://stackoverflow.com/users/6824409/soocks"}, "reply_to_user": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1508940399, "post_id": 46934480, "comment_id": 80816320, "body": "You don&#39;t need arrayContains, as Krzysztof Szewczyk said, you can use isDigit or use Ascii table"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508940469, "post_id": 46934480, "comment_id": 80816389, "body": "<code>(string[i] &gt; 121 &amp;&amp; string[i] &lt; 112)</code> can never be true"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508940485, "post_id": 46934480, "comment_id": 80816407, "body": "@ChrisTurner I think it can."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "edited": false, "score": 0, "creation_date": 1508940521, "post_id": 46934480, "comment_id": 80816429, "body": "@KrzysztofSzewczyk what number is more than 121, but also less than 112 then? ;)"}, {"owner": {"reputation": 1693, "user_id": 6889435, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DKfVf.png?s=128&g=1", "display_name": "Kamila Szewczyk", "link": "https://stackoverflow.com/users/6889435/kamila-szewczyk"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508940571, "post_id": 46934480, "comment_id": 80816471, "body": "@ChrisTurner You are right, they cant ;d. I thought that operators ar inversed. Now its even worse."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508940789, "post_id": 46934480, "comment_id": 80816638, "body": "I&#39;m also not sure why the code is checking to see if the character is between &#39;p&#39; and &#39;y&#39;...surely if it&#39;s checking for a digit the correct ASCII values are 48 and 57...but that&#39;s why using <code>isdigit()</code> is the correct solution"}, {"owner": {"reputation": 87, "user_id": 6824409, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BGV288dq0a4/AAAAAAAAAAI/AAAAAAAAAHM/OPEz7JaVsIc/photo.jpg?sz=128", "display_name": "Soocks", "link": "https://stackoverflow.com/users/6824409/soocks"}, "edited": false, "score": 0, "creation_date": 1508941215, "post_id": 46934480, "comment_id": 80816976, "body": "Well isdigit() looks at ascii table to check if a char is a digit, always good to know"}, {"owner": {"reputation": 148, "user_id": 7847845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1617113984984989/picture?type=large", "display_name": "Alexander Tepe", "link": "https://stackoverflow.com/users/7847845/alexander-tepe"}, "edited": false, "score": 0, "creation_date": 1508941537, "post_id": 46934480, "comment_id": 80817223, "body": "I think the reason why it might fail could be the way I check if my value is a space? (string[I] == &quot; &quot;). Can I do this more elegant?"}, {"owner": {"reputation": 87, "user_id": 6824409, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BGV288dq0a4/AAAAAAAAAAI/AAAAAAAAAHM/OPEz7JaVsIc/photo.jpg?sz=128", "display_name": "Soocks", "link": "https://stackoverflow.com/users/6824409/soocks"}, "edited": false, "score": 0, "creation_date": 1508943005, "post_id": 46934480, "comment_id": 80818285, "body": "You can use string[i] == 32 or maybe isspace().  But be carefull, isspace() returns true for space, form-feed (&#39;\\f&#39;), newline (&#39;\\n&#39;), carriage return (&#39;\\r&#39;), horizontal tab (&#39;\\t&#39;) and vertical tab (&#39;\\v&#39;)"}], "tags": [], "owner": {"reputation": 87, "user_id": 6824409, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BGV288dq0a4/AAAAAAAAAAI/AAAAAAAAAHM/OPEz7JaVsIc/photo.jpg?sz=128", "display_name": "Soocks", "link": "https://stackoverflow.com/users/6824409/soocks"}, "is_accepted": false, "score": -1, "last_activity_date": 1569496083, "last_edit_date": 1569496083, "creation_date": 1508940040, "answer_id": 46934480, "question_id": 46934256, "link": "https://stackoverflow.com/questions/46934256/c-search-for-non-number-character-in-array/46934480#46934480", "title": "C: search for non-number-character in array", "body": "<p>You use the operator sizeof() which won't return the length of the String but the memory size of the pointer (a size_t so 8 bytes). </p>\n\n<p>I suggest you to use this for your <code>for</code> loop:</p>\n\n<pre><code>for (int i = 0; string[i] != '\\0' &amp;&amp; string[i] != '\\n'; i++) {\n    ...\n}\n</code></pre>\n\n<p>String in C are just a part of memory, it's just like an array and the only way to get the length is to find the end ('\\0')</p>\n\n<p>I also suggest you to directly search into the ASCII table. Characters are just number between 0 and 127. Digits are between 48 and 57, a simple condition does the stuff !</p>\n\n<pre><code>if (string[i] &lt;= 48 &amp;&amp; string[i] &gt;= 57) {\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508942668, "post_id": 46935372, "comment_id": 80818027, "body": "But you&#39;re skipping characters after a space still"}, {"owner": {"reputation": 148, "user_id": 7847845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1617113984984989/picture?type=large", "display_name": "Alexander Tepe", "link": "https://stackoverflow.com/users/7847845/alexander-tepe"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508942751, "post_id": 46935372, "comment_id": 80818083, "body": "Yes I am skipping the space characters because I am not interested in them. I just want to work with the integers"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1508942828, "post_id": 46935372, "comment_id": 80818149, "body": "No, I mean you&#39;re skipping the space...and then the character afterwards because you&#39;re doing an extra <code>i++</code>"}], "tags": [], "owner": {"reputation": 148, "user_id": 7847845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1617113984984989/picture?type=large", "display_name": "Alexander Tepe", "link": "https://stackoverflow.com/users/7847845/alexander-tepe"}, "is_accepted": false, "score": 0, "last_activity_date": 1508942478, "creation_date": 1508942478, "answer_id": 46935372, "question_id": 46934256, "link": "https://stackoverflow.com/questions/46934256/c-search-for-non-number-character-in-array/46935372#46935372", "title": "C: search for non-number-character in array", "body": "<p>I seem to have solved it:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint arrayContains(char value);\n\nint main(int argc, char **argv) {\n    const int LINESIZE = 255;\n    if (argc != 2) {\n        printf(\"wrong args!\");\n        return -1;\n    }\n    char *command1 = argv[1];\n    FILE *handle = fopen(command1, \"r\");\n    if (!handle) {\n        printf(\"file not found!\");\n        return -1;\n    }\n    int count = 0;\n    int sum = 0;\n    int median;\n    char string[LINESIZE];\n    while (fgets(string, LINESIZE, handle) != NULL) {\n        for (int i = 0; i &lt;= sizeof(string) / sizeof(string[0]) - 1; i++) {\n            printf(\"%c\\n\", string[i]);\n            if (isspace(string[i]) == 0) {\n                i++;\n            }\n            else if (isdigit(string[i]) == 0) {\n                count++;\n                sum += (int)string[i];\n            }\n            else {\n                printf(\"non-integer-character found!\\n\");\n                return -1;\n            }\n        }\n        fgets(string, LINESIZE, handle);\n    }\n    median = sum / count;\n    printf(\"%s\\n\", string);\n    printf(\"%d\\n\", median);\n}\n</code></pre>\n\n<p>it now kinda does the job as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1508945528, "last_edit_date": 1508945528, "creation_date": 1508942903, "answer_id": 46935540, "question_id": 46934256, "link": "https://stackoverflow.com/questions/46934256/c-search-for-non-number-character-in-array/46935540#46935540", "title": "C: search for non-number-character in array", "body": "<p>There are several problems with your code.</p>\n\n<p>This bit matches a space, but will result in you skipping the following character because your loop will also do <code>i++</code>.</p>\n\n<pre><code>if (string[i] == ' ') {\n    i++;\n}\n</code></pre>\n\n<p>This is not the right way to turn a digit into a number. What you're getting here is the ASCII value of the character rather than the value of the digit. So for example if you have a '1' you're adding 49 to sum rather than 1.</p>\n\n<pre><code>sum += (int)string[i];\n</code></pre>\n\n<p>As discussed elsewhere, you're better off using <code>isdigit()</code> to identify if you've got a digit character. You can also use <code>isspace()</code> to test to see if you have a space or '\\n' character (it covers all whitespace). Which would make your loop statement a lot less complicated as you can process the whole string and easily handle lines that are longer than the size of your buffer.</p>\n\n<p>This code corrects the problems you have</p>\n\n<pre><code>while (fgets(string, LINESIZE, handle) != NULL) {\n    for (char *pos=string; *pos!='\\0'; pos++) {\n        printf(\"%c\", *pos);\n        if (isdigit(*pos)) {\n            count++;\n            sum += *pos-'0';\n        } elseif(!isspace(*pos)) {\n            printf(\"non-integer-character found!\\n\");\n            return -1;\n        }\n    }\n    median = sum / count;\n    printf(\"%s\\n\", string);\n    printf(\"%d\\n\", median);\n}\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 7847845, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1617113984984989/picture?type=large", "display_name": "Alexander Tepe", "link": "https://stackoverflow.com/users/7847845/alexander-tepe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 46935540, "answer_count": 4, "score": 1, "last_activity_date": 1569496083, "creation_date": 1508939450, "question_id": 46934256, "link": "https://stackoverflow.com/questions/46934256/c-search-for-non-number-character-in-array", "title": "C: search for non-number-character in array", "body": "<p>I am building a C program which gets a .txt file as an argument. Inside the .txt there are rows of integer numbers, with a space between them, like this:</p>\n\n<pre><code>1 2 3 4\n5 6 7 8\n...\n</code></pre>\n\n<p>I am supposed to find out, if a non-integer-character shows up inside the .txt file, like this:</p>\n\n<pre><code>1 2 a 4\n...\n</code></pre>\n\n<p>Since there is no instanceof operator in C, I use an array which contains the numbers from 0-9 and check each character of the .txt-file, if it is either a space or an integer. If it is neither, the program is supposed to exit.\nIf there are no problems in the file, the program calculates a median and prints the line to stdout.\nThis is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n\nint arrayContains(char value);\n\nint main(int argc, char **argv) {\n    const int LINESIZE = 255;\n    if (argc != 2) {\n        printf(\"wrong args!\");\n        return -1;\n    }\n    char *command1 = argv[1];\n    FILE *handle = fopen(command1, \"r\");\n    if (!handle) {\n        printf(\"file not found!\");\n        return -1;\n    }\n    int count = 0;\n    int sum = 0;\n    int median;\n    char string[LINESIZE];\n    while (fgets(string, LINESIZE, handle) != NULL) {\n        for (int i = 0; i &lt;= sizeof(string) / sizeof(string[0]) - 1; i++) {\n            printf(\"%c\", string[i]);\n            if (string[i] == ' ') {\n                i++;\n            }\n            else if (arrayContains(string[i]) == 0) {\n                count++;\n                sum += (int)string[i];\n            }\n            else {\n                printf(\"non-integer-character found!\\n\");\n                return -1;\n            }\n        }\n        median = sum / count;\n        printf(\"%s\\n\", string);\n        printf(\"%d\\n\", median);\n    }\n}\n\nint arrayContains(char value) {\n    const char numbers[10] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9'};\n    for (int i = 0; i &lt;= 9; i++) {\n        if (numbers[i] == value) {\n            return 0;\n        }\n    }\n    return -1;\n}\n</code></pre>\n\n<p>Now the output of the program is always the first number of the txt-file and immediately after that: \"non-integer-character found!\".\nWhich tells me that the comparison between the element of the string from gets() and an element from the constant \"numbers\" array inside the arrayContains() function, will always result in a return of -1 from the arrayContains() function.\nWhat am I doing wrong?</p>\n"}, {"tags": ["c++", "c", "gcc", "linker", "lto"], "comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 1, "creation_date": 1508939320, "post_id": 46934111, "comment_id": 80815357, "body": "I suggest you to add cmake tag to your question."}, {"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1508939482, "post_id": 46934111, "comment_id": 80815488, "body": "@LethalProgrammer CMake is not really relevant to the question but I only use it as build system. All of this can be done also without CMake."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508942441, "post_id": 46934111, "comment_id": 80817858, "body": "&quot;the executable cannot be linked to it&quot;.  What error messages are you getting?"}, {"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508942620, "post_id": 46934111, "comment_id": 80817992, "body": "@n.m. Undefined references to called lib functions."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508942769, "post_id": 46934111, "comment_id": 80818098, "body": "Seems unlikely. Can you produce a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508943480, "post_id": 46934111, "comment_id": 80818621, "body": "@n.m. I added it to the question."}], "answers": [{"comments": [{"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1508944157, "post_id": 46935769, "comment_id": 80819085, "body": "This doesn&#39;t answer the questions which I asked. What is the meaning of <code>liblto_plugin</code> used by <code>ar</code> and what is the difference of this solution with using only <code>-ffat-lto-objects</code> which also works without <code>liblto_plugin</code>. See <code>My questions are:</code> part."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1508944854, "last_edit_date": 1508944854, "creation_date": 1508943548, "answer_id": 46935769, "question_id": 46934111, "link": "https://stackoverflow.com/questions/46934111/which-is-the-correct-way-to-build-a-static-library-with-link-time-code-generatio/46935769#46935769", "title": "Which is the correct way to build a static library with link time code generation on Linux?", "body": "<p>Instructions:</p>\n\n<ol>\n<li>Compile your object files with options <code>-flto -fno-fat-lto-objects</code>. <code>-fno-fat-lto-objects</code> is not strictly necessary, however, it makes sure it either does lto or fails (instead of falling back to non-lto mode).</li>\n<li>Create the static library with <code>ar rcsT --plugin &lt;path-to-lto-plugin&gt; ...</code> You need the full path to <code>liblto_plugin.so</code> here. Option <code>T</code> here creates a <em>thin</em> archive (does not copy <code>.o</code> files).</li>\n<li>Link with <code>-flto</code> flag.</li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code>$ cat library.cc\nnamespace library {\n\nint f(int a) {\n    return a + 1;\n}\n\n}\n$ cat test.cc\n#include &lt;iostream&gt;\n\nnamespace library { int f(int); }\n\nint main() {\n    std::cout &lt;&lt; library::f(0) &lt;&lt; '\\n';\n}\n$ g++ -c -Wall -Wextra -std=gnu++14 -O3 -flto -fno-fat-lto-objects -o library.o library.cc\n$ ar rcsT --plugin /usr/libexec/gcc/x86_64-redhat-linux/5.3.1/liblto_plugin.so library.a library.o \n$ g++ -c -Wall -Wextra -std=gnu++14 -O3 -flto -fno-fat-lto-objects -o test.o test.cc\n$ g++ -o test -flto -O3 test.o \n/tmp/ccY0l2jQ.ltrans0.ltrans.o: In function `main':\n&lt;artificial&gt;:(.text.startup+0x37): undefined reference to `library::f(int)'\ncollect2: error: ld returned 1 exit status\n$ g++ -o test -flto test.o library.a\n$ ./test\n1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1508944347, "post_id": 46935891, "comment_id": 80819232, "body": "This doesn&#39;t answer the questions which I asked. What is the meaning of <code>liblto_plugin</code> used by <code>ar</code> and what is the difference of this solution with using only <code>-ffat-lto-objects</code> which also works without <code>liblto_plugin</code>? See <code>My questions are:</code> part."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1508945272, "post_id": 46935891, "comment_id": 80819933, "body": "@bobeff the meaning of --pkugun flag is &quot;use the plugin&quot;. It is required for building lto-enabled archives, as your warning message should have said."}, {"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1508945593, "post_id": 46935891, "comment_id": 80820166, "body": "But why the example works also only with <code>-ffat-lto-objects</code>? Maybe than always normal compiled code is used by linker instead of intermediate code no matter of <code>-flto</code> flag?"}, {"owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "edited": false, "score": 0, "creation_date": 1508945743, "post_id": 46935891, "comment_id": 80820261, "body": "&quot;All other methods either don&#39;t work at all (non-fat objects in the archive) or don&#39;t actually result in link time optimisation (fat objects in tge archive).&quot; I think that this answers the question and I will accept it."}, {"owner": {"reputation": 15757, "user_id": 176841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45a168cb9eb8454d66c78f18e29d9342?s=128&d=identicon&r=PG", "display_name": "jberryman", "link": "https://stackoverflow.com/users/176841/jberryman"}, "edited": false, "score": 0, "creation_date": 1552353320, "post_id": 46935891, "comment_id": 96967915, "body": "I think you can place a symlink to the plugin .so in <code>&#47;usr&#47;lib&#47;bfd-plugins&#47;</code> and <code>ar</code>, <code>nm</code> etc should pick it up (but I&#39;m struggling with LTO at the moment myself)"}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1508945809, "last_edit_date": 1508945809, "creation_date": 1508943901, "answer_id": 46935891, "question_id": 46934111, "link": "https://stackoverflow.com/questions/46934111/which-is-the-correct-way-to-build-a-static-library-with-link-time-code-generatio/46935891#46935891", "title": "Which is the correct way to build a static library with link time code generation on Linux?", "body": "<p>If you don't add <code>--plugin /psth/to/lto-plugin.so*</code> to <code>ar</code> parameters, you will get undefined references at link time <em>and a warning at archive creation time</em>. Or at least that's what I'm getting. You probably need to add it here:</p>\n\n<pre><code>set(CMAKE_C_ARCHIVE_CREATE \"&lt;CMAKE_AR&gt; --plugin &lt;LTO_PLUGIN_PATH&gt; \\\n  qcs &lt;TARGET&gt; &lt;OBJECTS&gt;\")\n</code></pre>\n\n<p>(<code>LINK_FLAGS</code> probably don't belong here, so I omitted them).</p>\n\n<p>I don't know how to set LTO_PLUGIN_PATH automatically.</p>\n\n<p>The plugin enables <code>ar</code> to create LTO-enabled archives. All other methods either don't work at all (non-fat objects in the archive) or don't actually result in link time optimisation (fat objects in the archive \u2014 in this case only the traditional object code is used, the LTO information is ignored).</p>\n"}], "owner": {"reputation": 2782, "user_id": 853791, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/w0oVE.jpg?s=128&g=1", "display_name": "bobeff", "link": "https://stackoverflow.com/users/853791/bobeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2459, "favorite_count": 1, "accepted_answer_id": 46935891, "answer_count": 2, "score": 3, "last_activity_date": 1508945809, "creation_date": 1508939084, "last_edit_date": 1508943374, "question_id": 46934111, "link": "https://stackoverflow.com/questions/46934111/which-is-the-correct-way-to-build-a-static-library-with-link-time-code-generatio", "title": "Which is the correct way to build a static library with link time code generation on Linux?", "body": "<p>I'm wandering which is the right way to compile static library on Linux with GCC in such way that when link time optimizations (LTO) be applied to the executable the library to be consumable and possibly to be achieved optimal performance.</p>\n\n<p>When library is compiled only with <code>-flto</code> the executable cannot be linked to it no matter whether it uses <code>-flto</code> or not. The error is:</p>\n\n<blockquote>\n  <p>undefined reference to `hello'</p>\n</blockquote>\n\n<p>where <code>hello</code> is function defined in the library.</p>\n\n<p>According to the answer to <a href=\"https://stackoverflow.com/questions/39236917/using-gccs-link-time-optimization-with-static-linked-libraries/39256013\">this</a> Stack Overflow question one possible solution is the following:</p>\n\n<pre><code>set(CMAKE_AR gcc-ar)\nset(CMAKE_C_ARCHIVE_CREATE \"&lt;CMAKE_AR&gt; qcs &lt;TARGET&gt; &lt;LINK_FLAGS&gt; &lt;OBJECTS&gt;\")\nset(CMAKE_C_ARCHIVE_FINISH true)\n</code></pre>\n\n<p>Then the library can be linked to the executable both with <code>-flto</code> and without <code>-flto</code> passed to the linker flags.</p>\n\n<p>But according to the answer to <a href=\"https://stackoverflow.com/questions/13799452/what-is-the-difference-in-gcc-between-lto-and-fat-lto-objects\">this</a> Stack Overflow question if we want static library to be compiled in such way to be usable with and without LTO than we have to use <code>-ffat-lto-objects</code>. If we add this flag to the library compilation flags again the library can be linked to executables both with <code>-flto</code> and without <code>-flto</code> passed to the linker flags.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>What is the exact meaning of the first solution with <code>gcc-ar</code>?</li>\n<li><p>What is the difference between different working variants when library is compiled with <code>-flto</code>.</p>\n\n<p>2.1 Executable without <code>-flto</code>.</p>\n\n<ul>\n<li>Library is using only <code>gcc-ar</code>.</li>\n<li>Library is using only <code>-ffat-lto-objects</code>.</li>\n<li>Library is using both <code>gcc-ar</code> and <code>-ffat-lto-objects</code></li>\n</ul>\n\n<p>2.2 Executable with <code>-flto</code> and the same 3 variants for the library.</p></li>\n</ol>\n\n<p>Here is Minimal, Complete, and Verifiable example with my test project which is modified version of the example from <a href=\"https://stackoverflow.com/questions/39236917/using-gccs-link-time-optimization-with-static-linked-libraries/39256013\">this</a> Stack Overflow question. I'm using GCC version <code>7.2.0</code>.</p>\n\n<p>CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.9)\n\nproject(lto)\n\nset(CMAKE_C_FLAGS_RELEASE \"${CMAKE_C_FLAGS_RELEASE} -g -O3\")\n\nadd_subdirectory(lib)\nadd_subdirectory(exe)\n</code></pre>\n\n<p>exe/CMakeLists.txt</p>\n\n<pre><code>set(TARGET_NAME exe)\n\nadd_executable(${TARGET_NAME} src/main.c)\n\ntarget_link_libraries(${TARGET_NAME} lib)\n\noption(EXE_LTO \"Use link time optimizations for the executable.\" OFF)\n\nif(${EXE_LTO})\n  target_compile_options(${TARGET_NAME} PRIVATE \"-flto\")\nendif()\n</code></pre>\n\n<p>exe/src/main.c</p>\n\n<pre><code>extern void hello();\n\nint main()\n{\n  hello();\n  return 0;\n}\n</code></pre>\n\n<p>lib/CMakeLists.txt</p>\n\n<pre><code>set(TARGET_NAME lib)\n\nadd_library(${TARGET_NAME} STATIC src/lib.c)\n\noption(LIB_LTO \"Use link time optimizations for the library.\" OFF)\noption(LIB_FAT_LTO \"Create fat LTO objects for library files.\" OFF)\noption(LIB_USE_LTO_AR \"Use another AR program for LTO objects.\" OFF)\n\nif(${LIB_LTO})\n  target_compile_options(${TARGET_NAME} PRIVATE -flto)\nendif()\n\nif(${LIB_FAT_LTO})\n  target_compile_options(${TARGET_NAME} PRIVATE -ffat-lto-objects)\nendif()\n\nif(${LIB_USE_LTO_AR})\n  set(CMAKE_AR gcc-ar)\n  set(CMAKE_C_ARCHIVE_CREATE \"&lt;CMAKE_AR&gt; qcs &lt;TARGET&gt; &lt;LINK_FLAGS&gt; &lt;OBJECTS&gt;\")\n  set(CMAKE_C_ARCHIVE_FINISH true)\nendif()\n</code></pre>\n\n<p>lib/src/lib.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid hello()\n{\n  puts(\"Hello\");\n}\n</code></pre>\n"}, {"tags": ["c", "string", "pointers", "tree", "strtok"], "comments": [{"owner": {"reputation": 3863, "user_id": 1158990, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/75c96a358578ef004ae24e4204e9cd0b?s=128&d=identicon&r=PG", "display_name": "gbtimmon", "link": "https://stackoverflow.com/users/1158990/gbtimmon"}, "edited": false, "score": 2, "creation_date": 1508938452, "post_id": 46933828, "comment_id": 80814692, "body": "I believe you want to use strcmp"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1508939349, "post_id": 46933828, "comment_id": 80815375, "body": "You will need to make a copy of the string when you insert it. Use <code>strdup()</code>perhaps, though it is  POSIX rather than Standard C."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1508939619, "post_id": 46933828, "comment_id": 80815610, "body": "<code>strdup()</code> is almost certainly going to be there. If not, you can <code>char* newStr = malloc(strlen(oldStr) + 1) ; strcpy(newStr, oldStr);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8831578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f381388ea39e9a4bf7c4f5e937222acb?s=128&d=identicon&r=PG", "display_name": "arucuenca", "link": "https://stackoverflow.com/users/8831578/arucuenca"}, "is_accepted": true, "score": 1, "last_activity_date": 1508939138, "creation_date": 1508939138, "answer_id": 46934130, "question_id": 46933828, "link": "https://stackoverflow.com/questions/46933828/how-to-get-the-string-value-from-a-pointer/46934130#46934130", "title": "How to get the string value from a pointer", "body": "<p>Thank you @gbtimmon. I changed the compare method to:</p>\n\n<pre><code>int comp=strcmp(val, (*arvore)-&gt;dado);\n\nif(comp&lt;0)\n{\n    inserir(&amp;(*arvore)-&gt;esq, val);\n}\nelse if(comp&gt;0)\n{\n    inserir(&amp;(*arvore)-&gt;dir, val);\n}\nelse if(comp==0){\n    (*arvore)-&gt;freq++;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8831578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f381388ea39e9a4bf7c4f5e937222acb?s=128&d=identicon&r=PG", "display_name": "arucuenca", "link": "https://stackoverflow.com/users/8831578/arucuenca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 46934130, "answer_count": 1, "score": 0, "last_activity_date": 1508939138, "creation_date": 1508938309, "question_id": 46933828, "link": "https://stackoverflow.com/questions/46933828/how-to-get-the-string-value-from-a-pointer", "title": "How to get the string value from a pointer", "body": "<p>How do I get the string value from the <code>strtok</code> pointer and insert it in a tree?\nHere's the input and division part:</p>\n\n<pre><code>printf(\"\\nDigite a frase: \");\nfgets(frase,TAM,stdin);\n\nval=strtok(frase,\" (),.-;\");\nwhile(val!=NULL){      \n   inserir(&amp;raiz,val);\n   val = strtok (NULL, \" (),.-;\");\n}\n</code></pre>\n\n<p>And here is the insertion in the tree:</p>\n\n<pre><code>void inserir(no **arvore, char val[]){\n    no *temp = NULL;\n    if(!(*arvore))\n    {\n        temp = (no *)malloc(sizeof(no));\n        temp-&gt;esq = temp-&gt;dir = NULL;\n        temp-&gt;dado = val;\n        temp-&gt;freq=1;\n        *arvore = temp;\n        return;\n    }\n\n    if(val &lt; (*arvore)-&gt;dado)\n    {\n        inserir(&amp;(*arvore)-&gt;esq, val);\n    }\n    else if(val &gt; (*arvore)-&gt;dado)\n    {\n        inserir(&amp;(*arvore)-&gt;dir, val);\n    }\n    else if(val==(*arvore)-&gt;dado){\n        (*arvore)-&gt;freq++;\n    }\n\n}\n</code></pre>\n\n<p>I need the insertion part to compare the value of the string, but it's comparing the value of the pointer.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1508937553, "post_id": 46933482, "comment_id": 80814010, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/28871314/read-rows-of-ints-from-a-file-in-c\">read rows of ints from a file in C</a>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508938059, "post_id": 46933482, "comment_id": 80814402, "body": "You cannot easily use <code>fscanf()</code> for this because of the requirement that you ignore lines with fewer than two integers.  <code>fscanf()</code> treats all whitespace separating input fields the same, including newlines.  You could read a line at a time via <code>fgets()</code>, and then employ <code>sscanf()</code>, but because your input format is pretty simple, it might in some ways indeed be easier to write a parser that operates character by character."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1508938133, "post_id": 46933482, "comment_id": 80814456, "body": "Just to fully understand your question: If a line has 5 ints, you must read all 5 ints, right?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508938179, "post_id": 46933482, "comment_id": 80814491, "body": "What are you supposed to do with the <code>int</code>s you read (and do not ignore)?"}, {"owner": {"reputation": 17, "user_id": 5228985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8af2b90ee7547b0722a253d7a2bc53?s=128&d=identicon&r=PG&f=1", "display_name": "aaronm2112", "link": "https://stackoverflow.com/users/5228985/aaronm2112"}, "edited": false, "score": 0, "creation_date": 1508938323, "post_id": 46933482, "comment_id": 80814602, "body": "Yes, as long as there are two or more integers on a line, they should be read in."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508938339, "post_id": 46933482, "comment_id": 80814613, "body": "Your commented out loop looks like the way forward - just need to have it parse the numbers and track how many there are per line etc..."}, {"owner": {"reputation": 17, "user_id": 5228985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8af2b90ee7547b0722a253d7a2bc53?s=128&d=identicon&r=PG&f=1", "display_name": "aaronm2112", "link": "https://stackoverflow.com/users/5228985/aaronm2112"}, "edited": false, "score": 0, "creation_date": 1508938470, "post_id": 46933482, "comment_id": 80814704, "body": "As far as what we&#39;re supposed to do with the integers that get read in, we are supposed to do simple calculations like finding  the sum, lowest number, the highest number, and finding the mean."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1508938898, "post_id": 46933482, "comment_id": 80815009, "body": "It now occurs to me that if you cannot use arrays <i>at all</i> then you cannot use <code>fgets()</code>, because you must provide a <code>char</code> array for it to read the line into.  Technically, you cannot use the <code>scanf</code> family of functions either, because you must provide the format as a <code>char</code> array (strings, including those designated by string literals, are arrays of <code>char</code>).  Perhaps your instructor will ignore that technicality, but the surest way to fulfill all the requirements would be by parsing character by character."}], "answers": [{"tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": false, "score": 0, "last_activity_date": 1508941100, "creation_date": 1508941100, "answer_id": 46934858, "question_id": 46933482, "link": "https://stackoverflow.com/questions/46933482/reading-integers-in-from-a-file-line-by-line-separated-by-whitespace/46934858#46934858", "title": "Reading Integers in from a file, line by line, separated by whitespace", "body": "<p>The outer loop will scan two items an int and a char. When the outer loop scans an int and a space, the inner loop will set the variables and continue scanning until an int and newline is scanned.</p>\n\n<pre><code>char ws = ' ';\nint num = 0;\n\nwhile ( result = fscanf ( inFileHandle, \"%d%c\", &amp;num, &amp;ws)) {\n    if ( EOF == result) {\n        break;\n    }\n    if ( 2 == result &amp;&amp; ' ' == ws) {//scanned an int an a space\n        sum = num;\n        highest = num;\n        lowest = num;\n        while ( 2 == fscanf ( inFileHandle, \"%d%c\", &amp;num, &amp;ws)) {\n            sum += num;\n            if ( highest &lt; num) {\n                highest = num;\n            }\n            if ( lowest &gt; num) {\n                lowest = num;\n            }\n            if ( '\\n' == ws) {//quit when a newline is scanned\n                break;\n            }\n        }\n        printf ( \"sum is %d\\n\", sum);\n        printf ( \"highest is %d\\n\", highest);\n        printf ( \"lowest is %d\\n\", lowest);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1508941564, "last_edit_date": 1508941564, "creation_date": 1508941134, "answer_id": 46934874, "question_id": 46933482, "link": "https://stackoverflow.com/questions/46933482/reading-integers-in-from-a-file-line-by-line-separated-by-whitespace/46934874#46934874", "title": "Reading Integers in from a file, line by line, separated by whitespace", "body": "<p>If you are not allowed to use arrays (including strings which are char arrays), you'll have to read the file one char at the time and build the integer values manually. To do that you need a number of state variables to keep track on the progress.</p>\n\n<p>It could be like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;limits.h&gt;\n\nint main(void) {\n  int max = INT_MIN;\n  int min = INT_MAX;\n  int current;\n  int numbersOnThisLine = 0;\n  int parsingNumber = 0;\n  int negative;\n  int number = 0;\n  int firstNumber;\n\n\n  FILE* f = fopen(\"numbers.txt\", \"r\");\n  if (!f)\n  {\n    printf(\"file error\\n\");\n    return 1;\n  }\n\n  while ((current = fgetc(f)) != EOF)\n  {\n    switch (current)\n    {\n\n      case '-':\n          negative = 1;\n          break;\n\n      case ' ':\n          if (parsingNumber)\n          {\n            if (negative) number = -number;\n            printf(\"Found %d\\n\", number);\n            ++numbersOnThisLine;\n            if (numbersOnThisLine == 1)\n            {\n              firstNumber = number;\n            }\n            if (numbersOnThisLine &gt;= 2)\n            {\n              if (firstNumber &gt; max) max = firstNumber;\n              if (firstNumber &lt; min) min = firstNumber;\n              if (number &gt; max) max = number;\n              if (number &lt; min) min = number;\n            }\n          }\n          parsingNumber = 0;\n          number = 0;\n          negative = 0;\n          break;\n\n      case '\\n':\n          if (parsingNumber)\n          {\n            if (negative) number = -number;\n            printf(\"Found %d\\n\", number);\n            ++numbersOnThisLine;\n            if (numbersOnThisLine &gt;= 2)\n            {\n              if (number &gt; max) max = number;\n              if (number &lt; min) min = number;\n            }\n          }\n          numbersOnThisLine = 0;\n          parsingNumber = 0;\n          number = 0;\n          negative = 0;\n          break;\n\n      default:\n          if (current &gt; '9' || current &lt; '0')\n          {\n            printf(\"Illegal file format\\n\");\n            fclose(f);\n            return 1;\n          }\n          parsingNumber = 1;\n          number = 10 * number + (current - '0');\n          break;\n    }\n  }\n  fclose(f);\n\n  printf(\"min=%d max=%d\\n\", min, max);\n  return 0;\n}\n</code></pre>\n\n<p>With numbers.txt as:</p>\n\n<pre><code>-12343\n5 -5 -11 0\n555\n444 -2 343 -4 7\n</code></pre>\n\n<p>the output is:</p>\n\n<pre><code>Found -12343\nFound 5\nFound -5\nFound -11\nFound 0\nFound 555\nFound 444\nFound -2\nFound 343\nFound -4\nFound 7\nmin=-11 max=444\n</code></pre>\n\n<p><strong>BTW</strong> The code above actually uses char arrays (aka strings) in the <code>printf</code> - if you must avoid that also, you can use <code>putc</code> for printing.</p>\n"}], "owner": {"reputation": 17, "user_id": 5228985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b8af2b90ee7547b0722a253d7a2bc53?s=128&d=identicon&r=PG&f=1", "display_name": "aaronm2112", "link": "https://stackoverflow.com/users/5228985/aaronm2112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1543, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1508953476, "creation_date": 1508937366, "last_edit_date": 1508953476, "question_id": 46933482, "link": "https://stackoverflow.com/questions/46933482/reading-integers-in-from-a-file-line-by-line-separated-by-whitespace", "title": "Reading Integers in from a file, line by line, separated by whitespace", "body": "<p>I'm quite stuck and not sure where to begin with the project I'm working on. The idea is to read data (integers) in from an input file. We're supposed to read each integer in one at a time, line by line. We cannot use arrays. Only loops. Additionally, we should be ignoring lines with &lt;2 integers (i.e. lines 1 and 3 in the example below.)</p>\n\n<p>The input file is formatted like this:</p>\n\n<pre><code>3\n5 -5 0\n5\n1 -2 3 -4 5\n</code></pre>\n\n<p>This is what I have so far (snippet):</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>while (fscanf(inFileHandle, \"%d\", &amp;num) == 1) {\n   //read in one number, add to sum\n   sum += num;\n\n   if (num &gt; highest) {\n      highest = num;\n   }\n   else if (num &lt; lowest) {\n      lowest = num;\n   }\n}\n\n/* while ((c = (char)getc(inFileHandle)) != EOF) {\n      if (c == ' ') {\n         printf(\"space found\");\n      }\n      else if (c == '\\n') { //newline reached\n      }\n      else {\n         printf(\"int found\");\n      }\n\n   }*/\n\nfclose(inFileHandle);\n</code></pre>\n\n<p>With the data that gets read in, we are supposed to do calculations, but that isn't the point of this question.</p>\n\n<p>As you can see I have a while loop that uses fscanf to read in an integer, but that's not entirely what I want. I only want to read in integers if the line has two or more integers (like lines 2 and 4 in the input file).</p>\n\n<p>I also tried reading in one character at a time with getc(), and then checking the individual char \"c\", but I hit a dead end with that idea.</p>\n\n<p>What's the best way to begin?</p>\n\n<p>If anything is unclear, let me know.</p>\n"}, {"tags": ["c", "split", "overflow", "expand", "iup"], "comments": [{"owner": {"reputation": 971, "user_id": 1898478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541bc8ea25ade8fc2d055a8ae7764ac0?s=128&d=identicon&r=PG", "display_name": "Antonio Scuri", "link": "https://stackoverflow.com/users/1898478/antonio-scuri"}, "edited": false, "score": 0, "creation_date": 1508955129, "post_id": 46933321, "comment_id": 80825795, "body": "Which native system? Windows or GTK?  Which IUP version? I run your code here in Windows and it is working with the latest IUP version."}, {"owner": {"reputation": 15, "user_id": 8831636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f35c6bf825b35c063bcf195b7be94c8?s=128&d=identicon&r=PG", "display_name": "evilpudding", "link": "https://stackoverflow.com/users/8831636/evilpudding"}, "reply_to_user": {"reputation": 971, "user_id": 1898478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541bc8ea25ade8fc2d055a8ae7764ac0?s=128&d=identicon&r=PG", "display_name": "Antonio Scuri", "link": "https://stackoverflow.com/users/1898478/antonio-scuri"}, "edited": false, "score": 0, "creation_date": 1508958533, "post_id": 46933321, "comment_id": 80827756, "body": "I&#39;m using the latest version, and I&#39;m testing for mothe gtk and windows, can you fill one of the lists to see if it scrolls properly? To me, the problem happens even if the list is empty though..."}, {"owner": {"reputation": 971, "user_id": 1898478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541bc8ea25ade8fc2d055a8ae7764ac0?s=128&d=identicon&r=PG", "display_name": "Antonio Scuri", "link": "https://stackoverflow.com/users/1898478/antonio-scuri"}, "edited": false, "score": 0, "creation_date": 1508976025, "post_id": 46933321, "comment_id": 80835046, "body": "Yes, it does scrolls properly. But if the dialog is too small it will crop the lists in the vertical. Why you don&#39;t post a screenshot?"}, {"owner": {"reputation": 15, "user_id": 8831636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f35c6bf825b35c063bcf195b7be94c8?s=128&d=identicon&r=PG", "display_name": "evilpudding", "link": "https://stackoverflow.com/users/8831636/evilpudding"}, "reply_to_user": {"reputation": 971, "user_id": 1898478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541bc8ea25ade8fc2d055a8ae7764ac0?s=128&d=identicon&r=PG", "display_name": "Antonio Scuri", "link": "https://stackoverflow.com/users/1898478/antonio-scuri"}, "edited": false, "score": 0, "creation_date": 1509115896, "post_id": 46933321, "comment_id": 80903246, "body": "I&#39;m currently on linux, but on window&#39;s it&#39;s just the same. First image is the window as it opens, second image is when I resize horizontally just a little bit, third image is when I add many entries to the list, fourth image is when I resize the window just a little bit after those inserts. <a href=\"https://imgur.com/a/HKaHP\" rel=\"nofollow noreferrer\">imgur.com/a/HKaHP</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8831636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f35c6bf825b35c063bcf195b7be94c8?s=128&d=identicon&r=PG", "display_name": "evilpudding", "link": "https://stackoverflow.com/users/8831636/evilpudding"}, "edited": false, "score": 0, "creation_date": 1510336779, "post_id": 47020145, "comment_id": 81407604, "body": "Does this mean I have to calculate how many lines would be visible, and recalculate every time the dialog is resized?"}, {"owner": {"reputation": 971, "user_id": 1898478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541bc8ea25ade8fc2d055a8ae7764ac0?s=128&d=identicon&r=PG", "display_name": "Antonio Scuri", "link": "https://stackoverflow.com/users/1898478/antonio-scuri"}, "reply_to_user": {"reputation": 15, "user_id": 8831636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f35c6bf825b35c063bcf195b7be94c8?s=128&d=identicon&r=PG", "display_name": "evilpudding", "link": "https://stackoverflow.com/users/8831636/evilpudding"}, "edited": false, "score": 0, "creation_date": 1510505176, "post_id": 47020145, "comment_id": 81452826, "body": "No, this means that you should use the VISIBLELINES to set a minimum number os lines that will be always visible, defining the crop size of the dialog contents. When the dialog is expanded further than that the actual number of lines in the list will be automatically expanded."}], "tags": [], "owner": {"reputation": 971, "user_id": 1898478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/541bc8ea25ade8fc2d055a8ae7764ac0?s=128&d=identicon&r=PG", "display_name": "Antonio Scuri", "link": "https://stackoverflow.com/users/1898478/antonio-scuri"}, "is_accepted": true, "score": 0, "last_activity_date": 1509381275, "creation_date": 1509381275, "answer_id": 47020145, "question_id": 46933321, "link": "https://stackoverflow.com/questions/46933321/iup-split-overflowing-dialog/47020145#47020145", "title": "IUP split overflowing dialog?", "body": "<p>It occurs only when the list has many items, or an item is very large.</p>\n\n<p>The problem is that the natural size of the list by default considers all its items. So it is larger than the actual size of the dialog, even when using expand=yes and inside the split. This is a historic behavior and cannot be changed.</p>\n\n<p>To avoid that we have two attributes: VISIBLECOLUMNS and VISIBLELINES, that when set will disable this behavior of the natural size. For instance:</p>\n\n<p>IupSetAttribute(list_entries, \"VISIBLECOLUMNS\", \"10\");\n  IupSetAttribute(list_entries, \"VISIBLELINES\", \"3\");</p>\n\n<p>Then your sample should work as you expected.</p>\n"}], "owner": {"reputation": 15, "user_id": 8831636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f35c6bf825b35c063bcf195b7be94c8?s=128&d=identicon&r=PG", "display_name": "evilpudding", "link": "https://stackoverflow.com/users/8831636/evilpudding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 47020145, "answer_count": 1, "score": 1, "last_activity_date": 1509381275, "creation_date": 1508936885, "question_id": 46933321, "link": "https://stackoverflow.com/questions/46933321/iup-split-overflowing-dialog", "title": "IUP split overflowing dialog?", "body": "<p>The gui I'm trying to create follows this simple logic:</p>\n\n<ul>\n<li>IupDialog:\n\n<ul>\n<li>IupVbox\n\n<ul>\n<li>IupSplit\n\n<ul>\n<li>IupList</li>\n<li>IupList</li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>The lists are supposed to fill the split, and have scrollbars if needed. This is working, however, if I resize the window just a bit, the <em>IupVbox</em> becomes so big as to not fit the dialog and you can't see it's margins or the list's scrollbars. I'm probably doing something wrong, but I can't figure it out.</p>\n\n<p>Here's a simplified version of what I'm doing:</p>\n\n<pre><code>Ihandle *page, *box_options, *split, *btn_work, *dlg;\n{\n    list_entries = IupList(NULL);\n    IupSetAttribute(list_entries, \"EXPAND\", \"YES\");\n}\n{\n    list_log = IupList (NULL);\n    IupSetAttribute(list_log, \"EXPAND\", \"YES\");\n}\n\nsplit = IupSplit(list_entries, list_log);\nIupSetAttribute(split, \"ORIENTATION\", \"VERTICAL\");\n\npage = IupVbox(split, NULL);\nIupSetAttribute(page, \"GAP\", \"20\");\ndlg = IupDialog(page);\nIupShowXY (dlg, IUP_CENTER, IUP_CENTER);\n</code></pre>\n"}, {"tags": ["c", "algorithm", "recursion", "backtracking"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1508938395, "post_id": 46933277, "comment_id": 80814656, "body": "Please describe your problem in text, not (via a link) with an image."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1508939354, "post_id": 46933277, "comment_id": 80815380, "body": "You create all 12! permutations, which is already a lot. Then you test whether the set-up is possible for each permutation from scratch. You should design your algorithm so that you enforce that you visit only valid permutations from the outset, which cuts down the number of evaluations and saves the test."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7622347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1226598234054881/picture?type=large", "display_name": "Petr Kroupa", "link": "https://stackoverflow.com/users/7622347/petr-kroupa"}, "edited": false, "score": 0, "creation_date": 1509048386, "post_id": 46935235, "comment_id": 80873567, "body": "Yeah I think I had somewhat a similiar idea, but my problem is that I&#39;m not able to implement it (I&#39;m a begginer). So I&#39;m wondering could you?:) pretty please?"}], "tags": [], "owner": {"reputation": 2387, "user_id": 4059145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P9q8e.png?s=128&g=1", "display_name": "Photon", "link": "https://stackoverflow.com/users/4059145/photon"}, "is_accepted": false, "score": 2, "last_activity_date": 1508942135, "creation_date": 1508942135, "answer_id": 46935235, "question_id": 46933277, "link": "https://stackoverflow.com/questions/46933277/effective-backtracking-algorithm/46935235#46935235", "title": "Effective backtracking algorithm", "body": "<p>Well you only asked for an idea :\nInstead of all n! permutations, you gotta use backtracking to ignore permutations that will surely make wires cross.</p>\n\n<p>i.e. u have permutation 1 2 3 4 .... 11, and 1 2 3 part already makes wires cross, so u can ignore all permutations for 4 .... 11 part</p>\n\n<p>Here`s some pseudo-code for implementation details:</p>\n\n<pre><code>int n;              // devices\nint cost[n][n];     // cost for putting device i into slot j\nbool used[n]={0};   // we need to keep track of used devices\nint slots[n];       // tracks which device is in which slot\nint edges[n-1];     //edges of a tree\nint ats = INF;\n\nbool cross(); //function that checks if any devices cross\n              //it seems you already wrote something similar, so i skipped this\n\nsolve(int x, int total)     //function that tries putting remaining blocks into slot x\n{\nif(x==n) //all slots are filled means we`re done\n{\nats = min(ats,total);\nreturn;\n}\n\nif(total &gt; ats)     // some pruning optimization for some speedup\nreturn;             // cause no matter what we do we won`t be able to beat this cost\n\n\nfor(int i=0; i&lt;n; i++)\nif(!used[i])                    //if device is not used and\n                                //we can try putting it into our slot\n{\n    slot[x] = i;\n    used[i] = true;\n    if(!cross())                //if putting device i into slot x makes some lines cross, skip it\n    solve(x+1,total + cost[i][x]);\n    used[i] = false;\n}\n}\n\nmain()\n{\n\nfor (int i=0; i&lt;n; i++) //try all devices into slot 0\n{\nused[i] = true;\nslot[i]=0;\nsolve(1,cost[i][0]);\nused[i] = false;\n}\n\nprint(ats);\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 7622347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1226598234054881/picture?type=large", "display_name": "Petr Kroupa", "link": "https://stackoverflow.com/users/7622347/petr-kroupa"}, "edited": false, "score": 0, "creation_date": 1509210140, "post_id": 46990859, "comment_id": 80931099, "body": "wow that&#39;s... amazing? Good work, you&#39;re a genius. And thank you very much for your help :)."}], "tags": [], "owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "is_accepted": true, "score": 2, "last_activity_date": 1509201280, "creation_date": 1509201280, "answer_id": 46990859, "question_id": 46933277, "link": "https://stackoverflow.com/questions/46933277/effective-backtracking-algorithm/46990859#46990859", "title": "Effective backtracking algorithm", "body": "<p>Your program generates all possible permutations and then tests whether the permutation is valid. The test itself involves nested loops. You could try optimize your data structures, so that your checks are more efficient or you could try to find dead ends in the search space early, as Photon suggests.</p>\n\n<p>A more efficient approach might be to design the program so that only valid permutations are created.This reduces the search space and also gets rid of the tests.</p>\n\n<p>If you look at the example in the problem description, the wrie network is an acyclic graph:</p>\n\n<pre><code>                            5          \n                            |         \n                        1   6\n                        |   |\n                    0---2---7\n                        |   |\n                        3   8               \n                        |\n                        4\n</code></pre>\n\n<p>If you start with tool 0 and put it in slot 0, the next step is to place a permutation of tool 2 and its \"descendants\", that is of tools 1, 7 and 3 and its respective connected tools. From the perspective of tool 0, you can turn this into a tree:</p>\n\n<pre><code>                  [1237]\n                / /  |  \\\n              1  2  [34] [678]\n                   / |    |  \\ \\\n                  3  4   [56] 7  8\n                          | \\\n                          5  6\n</code></pre>\n\n<p>Here, the leaves correspond to just a single tool. The branches have several tools. All prumutations of the branches form valid arrangements.</p>\n\n<pre><code>0 (1 2 (3 4) ((5 6) 7 8))\n</code></pre>\n\n<p>Of course, every permutation of <code>[56]</code> must be combined with every permutation of the other branches. You can achieve this by implementing a kind of odometer that doesn't go through the numbers from 0 to 9 in each space, but through the possible permutations of the branches.</p>\n\n<p>Every generated permutation is valid, but this technique doesn't create all possible permutations yet. Remember that we've fixed tool 0 in slot 0, but that needn't be the case. But the topography of  valid layout can be used to generate 8 other layouts by rotating it and putting tool 0 in slots 1, 2, and so on.</p>\n\n<p>This technique reduces you search space from 9! to 9 &middot; 4! &middot; 2! &middot; 3! &middot; 2! or by a factor of 70. And there are no tests, but at the cost of a more complicated data structure.</p>\n\n<p>(The reduction is extreme in your 12-tool example, where the network of wires ir really just a straight line without bifurcations.)</p>\n\n<p>This code implements the described technique:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n\n\n\nenum {\n    N = 16                          // hardcoded max. size\n};\n\nstruct tool {\n    int conn[N - 1];                // wire connections\n    int nconn;\n\n    int desc[N];                    // \"descendants\" of the tree node\n    int ndesc;\n\n    int cost[N];                    // row of the cost matrix\n    int used;                       // flag for recursive descent\n};\n\nstruct drill {\n    int n;\n    struct tool tool[N];\n\n    int root;                       // root node    \n    int branch[N];                  // indices of branch nodes\n    int nbranch;                    // permutating branches\n\n    int opt;                        // current optimum\n};\n\nvoid swap(int a[], int i, int j)\n{\n    int s = a[i]; a[i] = a[j]; a[j] = s;\n}\n\nvoid reverse(int a[], int i, int n)\n{\n    while (i &lt; --n) swap(a, i++, n);\n}\n\n/*\n *      Turn an array to the next higher permutation. When the\n *      permutation is already the highest, return 0 and reset the\n *      array to the smalles permutation. Otherwise, return 1.\n */\nint next_perm(int a[], int n)\n{\n    int i = n - 1;\n    int k = n - 1;\n\n    if (n &lt; 2) return 0;\n\n    while (k &amp;&amp; a[k] &lt; a[k - 1]) k--;\n    if (k == 0) {\n        reverse(a, 0, n);\n        return 0;\n    }\n    k--;\n\n    while (i &gt; k &amp;&amp; a[i] &lt; a[k]) i--;\n    swap(a, i, k);\n    reverse(a, k + 1, n);\n\n    return 1;\n}\n\n/*\n *      Insertion sort for sorting the branches at the beginning.\n */\nvoid sort(int a[], int len)\n{\n    for (int i = 1; i &lt; len; i++) {\n        int k = i;\n\n        while (k &gt; 0 &amp;&amp; a[k] &lt; a[k - 1]) {\n            swap(a, k, k - 1);\n            k--;\n        }\n    }\n}\n\n/*\n *      Determine the list of descendants for each node.\n */\nvoid descend(struct drill *dr, int n)\n{\n    struct tool *t = dr-&gt;tool + n;\n\n    t-&gt;ndesc = 1;\n    t-&gt;desc[0] = n;\n\n    t-&gt;used = 1;\n\n    for (int i = 0; i &lt; t-&gt;nconn; i++) {\n        int m = t-&gt;conn[i];\n\n        if (dr-&gt;tool[m].used == 0) {\n            t-&gt;desc[t-&gt;ndesc++] = m;\n            descend(dr, m);\n        }\n    }\n\n    if (t-&gt;ndesc &gt; 1) {\n        sort(t-&gt;desc, t-&gt;ndesc);\n        dr-&gt;branch[dr-&gt;nbranch++] = n;\n    }\n\n    t-&gt;used = 0;\n}\n\n/*\n *      Fill the array a with the current arrangement in the tree.\n */\nint evaluate(struct drill *dr, int a[], int n)\n{\n    struct tool *t = dr-&gt;tool + n;\n    int m = 0;\n\n    if (n == dr-&gt;root) {\n        a[0] = dr-&gt;root;\n        return 1 + evaluate(dr, a + 1, dr-&gt;tool[n].conn[0]);\n    }\n\n    for (int i = 0; i &lt; t-&gt;ndesc; i++) {\n        int d = t-&gt;desc[i];\n\n        if (d == n) {\n            a[m++] = d;\n        } else {\n            m += evaluate(dr, a + m, d);\n        }\n    }\n\n    return m;\n}\n\n/*\n *      Evaluate all possible permutations and find the optimum.\n */\nvoid optimize(struct drill *dr)\n{\n    dr-&gt;opt = (1u &lt;&lt; 31) - 1;\n\n    for (;;) {\n        int i = 0;\n        struct tool *t = dr-&gt;tool + dr-&gt;branch[0];\n\n        for (int j = 0; j &lt; dr-&gt;n; j++) {\n            int a[2 * N];\n            int cost = 0;\n\n            evaluate(dr, a, dr-&gt;root);\n\n            for (int i = 0; i &lt; dr-&gt;n; i++) {\n                int k = (i + j) % dr-&gt;n;\n\n                cost += dr-&gt;tool[i].cost[a[k]];\n            }\n\n            if (cost &lt; dr-&gt;opt) dr-&gt;opt = cost;\n        }\n\n        while (next_perm(t-&gt;desc, t-&gt;ndesc) == 0) {\n            i++;\n\n            if (i == dr-&gt;nbranch) return;\n            t = dr-&gt;tool + dr-&gt;branch[i];            \n        }\n    }\n}\n\n/*\n *      Read and prepare drill data, then optimize.\n */\nint main(void)\n{\n    struct drill dr = {0};\n\n    fscanf(stdin, \"%d\", &amp;dr.n);\n\n    for (int j = 0; j &lt; dr.n; j++) {\n        for (int i = 0; i &lt; dr.n; i++) {\n            scanf(\"%d\", &amp;dr.tool[j].cost[i]);\n        }\n    }\n\n    for (int i = 1; i &lt; dr.n; i++) {\n        int a, b;\n\n        scanf(\"%d\", &amp;a);\n        scanf(\"%d\", &amp;b);\n\n        dr.tool[a].conn[dr.tool[a].nconn++] = b;\n        dr.tool[b].conn[dr.tool[b].nconn++] = a;\n    }\n\n    while (dr.tool[dr.root].nconn &gt; 1) dr.root++;\n    dr.tool[dr.root].used = 1;\n\n    descend(&amp;dr, dr.tool[dr.root].conn[0]);\n    optimize(&amp;dr);\n\n    printf(\"%d\\n\", dr.opt);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7622347, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1226598234054881/picture?type=large", "display_name": "Petr Kroupa", "link": "https://stackoverflow.com/users/7622347/petr-kroupa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 46990859, "answer_count": 2, "score": 1, "last_activity_date": 1509201280, "creation_date": 1508936744, "last_edit_date": 1509048993, "question_id": 46933277, "link": "https://stackoverflow.com/questions/46933277/effective-backtracking-algorithm", "title": "Effective backtracking algorithm", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n\nlong result = LONG_MAX;\n\nvoid swap(int *a, int *b) {\n    int temp = *a;\n    *a = *b;\n    *b = temp;\n}\n\nint hasConnection(int *array, int arrayIndex, int maxBound, int *rules, int size) {\n    int connection;\n    for (int i = 0; i &lt; (size - 1)*2; i++) {\n        if (rules[i] == array[arrayIndex]) {\n            if (i % 2) {\n                connection = rules[i - 1];\n            } else {\n                connection = rules[i + 1];\n            }\n            for (int j = maxBound - 1; j &gt;= 0; j--) {\n                if (array[j] == connection) {\n                    return 1;\n                }\n            }\n        }\n    }\n    return 0;\n}\n\nint isCrossed(int *array, int outConnectionIndex, int inConnectionIndex, int *rules, int size) {\n    for (int i = inConnectionIndex + 1; i &lt; outConnectionIndex; i++) {//sweep trough indexes in between\n        if (hasConnection(array, i, inConnectionIndex, rules, size)) {//array[i] has connection with index lower than inConnectionIndex\n            return 1;\n        }\n    }\n    return 0;\n}\n\nint isWiredInsideAndCrossed(int *array, int arrayIndex, int *rules, int size) {\n    int connection;\n    for (int i = 0; i &lt; 2 * (size - 1); i++) {\n        if (rules[i] == array[arrayIndex]) {\n            if (i % 2) {\n                connection = rules[i - 1];\n            } else {\n                connection = rules[i + 1];\n            }\n            for (int j = 1; j &lt; arrayIndex - 1; j++) {\n                if (array[j] == connection) {\n                    if (isCrossed(array, arrayIndex, j, rules, size)) {\n                        return 1;\n                    }\n                }\n            }\n        }\n    }\n    return 0;\n}\n\nvoid trySequence(int * array, int size, int *priceMap, int *rules) {\n    int ret = 0;\n    for (int i = 0; i &lt; size; i++) {\n        ret = ret + priceMap[i * size + array[i]];\n        if (ret &gt;= result || isWiredInsideAndCrossed(array, i, rules, size)) {\n            return;\n        }\n    }\n    result = ret;\n}\n\nvoid permute(int *array, int i, int size, int *priceMap, int *rules) {\n    if (size == i) {\n        trySequence(array, size, priceMap, rules);\n        return;\n    }\n    int j = i;\n    for (j = i; j &lt; size; j++) {\n        swap(array + i, array + j);\n        permute(array, i + 1, size, priceMap, rules);\n        swap(array + i, array + j);\n    }\n    return;\n}\n\nint main(int argc, char** argv) {    \n    int size;\n    fscanf(stdin, \"%d\", &amp;size);\n    int *priceMap = malloc(sizeof (int)*size * size);\n    int *rules = malloc(sizeof (int)*(size - 1)*2);\n    int i = 0;\n    int squaredSize = size*size;\n    while (i &lt; squaredSize) {\n        scanf(\"%d\", priceMap + i);\n        i++;\n    }\n    i = 0;\n    int rulesSize = (size - 1)*2;\n    while (i &lt; rulesSize) {\n        scanf(\"%d\", rules + i);\n        i++;\n    }\n    int arrayToPermute [size];\n    for (int j = 0; j &lt; size; j++) {\n        arrayToPermute[j] = j;\n    }\n    permute(arrayToPermute, 0, size, priceMap, rules);\n    printf(\"%ld\\n\", result);\n    return (EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>It's supposed to do <a href=\"http://picpaste.com/Untitled-3nM5y1lY.png\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>EDIT: Basicaly the task is to find the cheapest combination of N devices placed in N slots on the edge of a circle, on the input there is a cost matrix that tells what each device would cost to install in each slot, devices are also connected to each other by wires that mustn't cross. There are always N-1 connections.\nDetails and examples are on the link above.</p>\n\n<p>My problem is that my solution is way too slow.\nI need it to solve a drill head of size 13 generally in less than two seconds.\nToo be precise: I need this input solved in less than 1s:</p>\n\n<pre><code>12\n 27 25 21 27 25 30 27 26 22 28 27 26\n 21 22 26 30 25 28 21 21 22 23 22 30\n 20 21 22 20 30 30 30 22 30 26 23 26\n 27 30 24 21 20 24 26 24 22 22 24 22\n 29 26 20 29 22 23 27 28 23 28 30 27\n 21 21 20 30 20 22 25 29 22 29 27 24\n 26 21 30 24 23 23 29 29 29 28 23 22\n 25 27 21 24 20 24 27 23 27 28 25 26\n 26 27 23 27 23 27 29 30 25 24 20 23\n 20 22 25 20 23 26 20 29 21 24 25 20\n 27 28 25 20 25 22 26 23 24 21 26 23\n 23 21 28 23 26 30 22 30 25 26 26 20\n0 1\n1 2\n2 3\n3 4\n4 5\n5 6\n6 7\n7 8\n8 9\n9 10\n10 11\n</code></pre>\n\n<p>(solution is 262)\n and this in less than 2s:</p>\n\n<pre><code>13\n 52  9 42 65 54 47 16 62 35 47 63  2 48\n 25  4 12 25 58 12 45 62 70 60 40 17 33\n 28 64 64 62  1 28  3 26 56 15 59 64 17\n  7 23 70 20 57 70 46  5  6  1 21 12 40\n 62 53  5 15 22 43 57 15 26 42 51 16 38\n 20 13 64  3 51 22 28  1 18 27  4 36  9\n 11 20 41 65 29 63 54 28 31 63 27 59 41\n 44 21 42 16 59 10 60 11  3 53 52 53 37\n 41 51 18  4 38  6 22 49 15 51 54 61  7\n 54  6  5 24 47 35 46 11 26 17 53 37 25\n 34 42  6 54 40 47 59 25 53 53 37  9 64\n 69 63 68  5 37 16 17 61 33 51 19 39 44\n  6 47  4  6 21 17 23 24 13 29 34 54 33\n0 1\n0 2\n0 3\n1 4\n1 5\n1 6\n2 7\n2 8\n2 9\n3 10\n3 11\n3 12\n</code></pre>\n\n<p>.(solution is 165)\nSo I'm wondering if anybody would have an idea how to do this, I'm completely lost?</p>\n"}, {"tags": ["c", "arrays", "binary"], "comments": [{"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 6, "creation_date": 1508936433, "post_id": 46933141, "comment_id": 80813202, "body": "Can copy the array into a <code>uint16_t</code>, then use the <code>~</code> operator on it, then copy it back into the array. Watch out from Endian-ness issues though. Actually, since you copy back, that&#39;s not even an issue."}, {"owner": {"reputation": 839, "user_id": 1477869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ded2654469bf87bc5b4f8b110588e25?s=128&d=identicon&r=PG&f=1", "display_name": "OHHH", "link": "https://stackoverflow.com/users/1477869/ohhh"}, "reply_to_user": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1508936808, "post_id": 46933141, "comment_id": 80813486, "body": "I ended up doing memset(array, 255, size); is that bad?"}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 2, "creation_date": 1508936909, "post_id": 46933141, "comment_id": 80813556, "body": "<code>memset(array, ~0, 2)</code> would be nicer IMO... Thought you wanted to invert <b>any</b> value, not just zeros..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1508937487, "post_id": 46933141, "comment_id": 80813973, "body": "To invert a general <code>char</code> array of arbitrary length and unknown content, the best approach is probably to loop over all the bytes and invert each one individually via the <code>~</code> operator.  There&#39;s no need to copy bytes around to different objects, and doing so would be inefficient.  It&#39;s also unsafe to alias a pointer of non-character (and non-void) type to your array."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508936961, "post_id": 46933237, "comment_id": 80813593, "body": "In a general sense, yes, but the question is about how to do this <i>in C</i>."}, {"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508937029, "post_id": 46933237, "comment_id": 80813635, "body": "@JohnBollinger Yes, but this very much seems like homework and someone already mentioned the <code>~</code> operator, I don&#39;t intend to write the complete function here. I explained what to do."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508937287, "post_id": 46933237, "comment_id": 80813824, "body": "If you don&#39;t think it appropriate to write a <i>bona fide</i> answer to the question, then don&#39;t.  But don&#39;t write a non-responsive answer, either.  What you&#39;ve written here is appropriate for a comment, not an answer."}], "tags": [], "owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "is_accepted": true, "score": 1, "last_activity_date": 1508936613, "creation_date": 1508936613, "answer_id": 46933237, "question_id": 46933141, "link": "https://stackoverflow.com/questions/46933141/cleanest-way-to-invert-the-binary-value-of-an-char-array-in-c/46933237#46933237", "title": "Cleanest way to invert the binary value of an char array in C?", "body": "<p>Let's say that your length, <code>2</code>, is just in your example, and you want to have something work no matter the length of the char array. You still need a loop, but you can invert the binary values of up to 64 bits at once (on a 64 bit CPU, disregarding SIMD capabilities). If you are REALLY looking for THE BEST performance, you need to look into SIMD.</p>\n\n<p>You can check the remaining length of the array (values you have not inverted) in every iteration of the loop, and invert 64, 32, 16 or 8 bits at once, the biggest that fits.</p>\n"}, {"comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1508936923, "post_id": 46933302, "comment_id": 80813567, "body": "This is very un-clean and ineffective. Why not just <code>uint16_t *x = (uint16_t*)&amp;arr;</code>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 2, "creation_date": 1508936962, "post_id": 46933302, "comment_id": 80813594, "body": "@HansPetterTaugb&#248;lKragset Because that violates the language&#39;s aliasing rules and is undefined behaviour. Anyway, compilers may optimise away the <code>memcpy</code>s into what you &#39;really&#39; meant. Writing legal code that is guaranteed to work is better than writing succinct code and hoping for the best."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 0, "creation_date": 1508936976, "post_id": 46933302, "comment_id": 80813603, "body": "@HansPetterTaugb&#248;lKragset: Very bad!!! You cannot rely on <code>arr</code> being aligned to a 16-bit address. This will yield unexpected results on some platforms."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508937041, "post_id": 46933302, "comment_id": 80813642, "body": "@goodvibration, actually, yes, you <i>can</i> rely on the memory returned by <code>malloc()</code> to be properly aligned, but Hans&#39;s suggestion nevertheless does potentially violate the strict aliasing rule."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1508937090, "post_id": 46933302, "comment_id": 80813676, "body": "@JohnBollinger: Maybe with <code>malloc</code>, but not in general (i.e., if you allocate the array statically)."}], "tags": [], "owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "is_accepted": false, "score": 1, "last_activity_date": 1508936818, "creation_date": 1508936818, "answer_id": 46933302, "question_id": 46933141, "link": "https://stackoverflow.com/questions/46933141/cleanest-way-to-invert-the-binary-value-of-an-char-array-in-c/46933302#46933302", "title": "Cleanest way to invert the binary value of an char array in C?", "body": "<p>Try this:</p>\n\n<pre><code>uint16_t x;\nmemcpy(&amp;x, arr, sizeof x);\nx = ~x;\nmemcpy(arr, &amp;x, sizeof x);\n</code></pre>\n"}], "owner": {"reputation": 839, "user_id": 1477869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2ded2654469bf87bc5b4f8b110588e25?s=128&d=identicon&r=PG&f=1", "display_name": "OHHH", "link": "https://stackoverflow.com/users/1477869/ohhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 46933237, "answer_count": 2, "score": 0, "last_activity_date": 1508936818, "creation_date": 1508936325, "last_edit_date": 1508936660, "question_id": 46933141, "link": "https://stackoverflow.com/questions/46933141/cleanest-way-to-invert-the-binary-value-of-an-char-array-in-c", "title": "Cleanest way to invert the binary value of an char array in C?", "body": "<p>Lets say I have a char array of len = 2.</p>\n\n<pre><code>char* array = malloc(2);\nmemset(array, 0, 2);\n</code></pre>\n\n<p>This is 2 bytes = 0000000000000000. How could I turn this into 11111111111111111?</p>\n\n<p>I can do it with a for loop and a pointer, but I don't think this is the cleanest way of doing it.</p>\n"}, {"tags": ["c", "function", "struct", "linked-list"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1508934931, "post_id": 46932594, "comment_id": 80812029, "body": "<a href=\"https://stackoverflow.com/a/41383540/2173917\"><b><i>DO NOT</i></b> use <code>gets()</code>, it is dangerous. use <code>fgets()</code> instead.</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1508934941, "post_id": 46932594, "comment_id": 80812035, "body": "<a href=\"https://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of malloc() and family in C..</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1508935007, "post_id": 46932594, "comment_id": 80812077, "body": "You know what? Outside the function, <code>head</code> remains unchanged!!"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1508935140, "post_id": 46932594, "comment_id": 80812165, "body": "Also <code>noFood</code> never changes resulting in <code>index</code> within <code>additem</code> being 0 forever."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1508935380, "post_id": 46932594, "comment_id": 80812358, "body": "@SouravGhosh This doesn&#39;t help because this is exactly what was asked. Be more constructive."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1508935490, "post_id": 46932594, "comment_id": 80812451, "body": "@Jean-BaptisteYun&#232;s What does not help??"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1508935526, "post_id": 46932594, "comment_id": 80812475, "body": "@Adrian  Kindly show your research / debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1508936138, "post_id": 46932594, "comment_id": 80812964, "body": "&quot;which comes from my display function&quot; Why don&#39;t you even show your display function? I assume it does not come from this function but from passing parameters by value instead of reference."}, {"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1508936731, "post_id": 46932594, "comment_id": 80813439, "body": "My display function looks like this: pastebin.com/WjEfCHgH @Gerhardh"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1508939171, "post_id": 46932594, "comment_id": 80815231, "body": "@SouravGhosh Your comment."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1508939659, "post_id": 46932594, "comment_id": 80815634, "body": "@Jean-BaptisteYun&#232;s Which part?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1508936157, "post_id": 46932706, "comment_id": 80812986, "body": "I did that, and I wrote the get function like this: gets((*head + index)-&gt;name); etc. But it still doesn&#39;t work."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508936242, "post_id": 46932706, "comment_id": 80813059, "body": "That is because you have to increment <code>nofood</code> too."}, {"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1508936622, "post_id": 46932706, "comment_id": 80813349, "body": "Okay, but I can&#39;t get past the realloc function because a breakpoint gets triggered."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508936825, "post_id": 46932706, "comment_id": 80813498, "body": "Use a debugger to check what you do wrong. I can&#39;t see what you did exactly. And increment <code>nofood</code> <i>after</i> calling <code>additem</code>, of course."}, {"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1508938054, "post_id": 46932706, "comment_id": 80814400, "body": "I made it work, and I added a noFood++; in main after calling additem ofcourse, but it still prints that the list is empty from my display function."}, {"owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "edited": false, "score": 0, "creation_date": 1508939226, "post_id": 46932706, "comment_id": 80815272, "body": "Now it prints the list, and I can add several items, but it breaks on my print within my display function."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508942572, "post_id": 46932706, "comment_id": 80817954, "body": "Show your print function."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 1, "last_activity_date": 1508936185, "last_edit_date": 1508936185, "creation_date": 1508935216, "answer_id": 46932706, "question_id": 46932594, "link": "https://stackoverflow.com/questions/46932594/why-does-it-print-that-my-list-is-empty/46932706#46932706", "title": "Why does it print that my list is empty?", "body": "<p>The updated value of <code>head</code> is never returned to the caller. Use:</p>\n\n<pre><code>void additem(food **head, int index) {\n\n    *head = (food*)realloc(*head, sizeof(food)*(index + 1));\n</code></pre>\n\n<p>and call it like:</p>\n\n<pre><code>    additem(&amp;foods, nofood);\n</code></pre>\n\n<p>When you pass <code>food</code> you pass the value of <code>food</code>. Although the function updates this value, the value is not communicated back to the caller. This is called \"call-by-value\". If you pass the <em>address</em> of <code>food</code>, and assign to the thing (variable) that <code>head</code> points to, you have changed the caller's value. This is called \"call-by-reference\" (though strictly speaking, passing any pointer is call-by-reference).</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1508935394, "creation_date": 1508935394, "answer_id": 46932787, "question_id": 46932594, "link": "https://stackoverflow.com/questions/46932594/why-does-it-print-that-my-list-is-empty/46932787#46932787", "title": "Why does it print that my list is empty?", "body": "<p>Consider this simple program:</p>\n\n<pre><code>void foo(int bar)\n{\n  bar = bar + 1;\n}\n\nint main()\n{\n  int test = 4;\n  foo(bar);\n  printf(\"bar = %d\\n\", bar);\n}\n</code></pre>\n\n<p>What is the output of this simple program?\nIf you know the answer you know the answer to your problem.</p>\n"}], "owner": {"reputation": 11, "user_id": 8700241, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HJb5s.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/8700241/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1508936185, "creation_date": 1508934892, "last_edit_date": 1508935367, "question_id": 46932594, "link": "https://stackoverflow.com/questions/46932594/why-does-it-print-that-my-list-is-empty", "title": "Why does it print that my list is empty?", "body": "<p>I have an add function and use a realloc to take in the data from a struct and store it. But when I print it out, it says that it's empty, which comes from my display function. How can I fix this?</p>\n\n<pre><code>void additem(food *head, int index) {\n    head = (food*)realloc(head, sizeof(food)*(index + 1));\n    if (head != NULL) {\n        printf(\"Enter name: \");\n        gets((head + index)-&gt;name);\n        printf(\"Type unit of meauserement: \");\n        gets((head + index)-&gt;unit);\n        printf(\"Enter value: \");\n        scanf(\"%d\", &amp;(head + index)-&gt;data);\n    }\n    else {\n        printf(\"\\nExiting!!\");\n        free(head);\n    }\n}\n</code></pre>\n\n<p>My main function looks like this:</p>\n\n<pre><code>food *foods = NULL;\nint option, nofood = 0;\nwhile (1) {\n    system(\"CLS\");\n    printf(\"1 - add food\\n2 - print shopping list\\n3 - delete item\\n4 - change amount\\n5 - end\\nWhat do you want to do? \");\n    scanf(\"%d\", &amp;option);\n    clear();\n    switch (option) {\n    case 1: additem(foods, nofood);\n        break;\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1508934657, "post_id": 46932439, "comment_id": 80811846, "body": "Swap the {i,j} &lt;--&gt; {j,i} values  (ecxept for the diagonal)"}, {"owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "edited": false, "score": 0, "creation_date": 1508934658, "post_id": 46932439, "comment_id": 80811847, "body": "In your function you could allocate T, transpose C to T, copy T to C and free T afterwards"}, {"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 2, "creation_date": 1508935180, "post_id": 46932439, "comment_id": 80812207, "body": "BTW, in <code>C = transpose(C, n);</code> you got a memory leak"}, {"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "reply_to_user": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1508935284, "post_id": 46932439, "comment_id": 80812293, "body": "@Amadeus How so? By not freeing <code>T</code> inside the function?"}, {"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1508935679, "post_id": 46932439, "comment_id": 80812609, "body": "@wildplasser That is a better solution, please see the edit to my original question."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1508935909, "post_id": 46932439, "comment_id": 80812794, "body": "<code>void</code> is not <code>void *</code>, these are different things."}, {"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508935941, "post_id": 46932439, "comment_id": 80812819, "body": "@n.m. My bad, didn&#39;t spot that."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1508936047, "post_id": 46932439, "comment_id": 80812889, "body": "You are swapping {2,3} with {3,2} (when i==2,j==3) and afterwards swapping {3,2} with {2,3} (when i==3,j==2). The net result is a no-op."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1508936233, "post_id": 46932439, "comment_id": 80813051, "body": "<code>for (j = 0; j &lt; n; ++j) {</code> --&gt;&gt;  <code>for (j = i+1; j &lt; n; j++) {</code>   BTW:there are methods with a better locality of reference (if performance matters)"}], "answers": [{"comments": [{"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "edited": false, "score": 0, "creation_date": 1508934794, "post_id": 46932523, "comment_id": 80811932, "body": "I was trying to get something along the lines of this working. And how do I then declare <code>C</code> and pass it into the function?"}, {"owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "edited": false, "score": 2, "creation_date": 1508934797, "post_id": 46932523, "comment_id": 80811934, "body": "Don&#39;t forget to free the old C, else you will get a memory leak."}, {"owner": {"reputation": 8570, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1508934804, "post_id": 46932523, "comment_id": 80811944, "body": "And, Memory leak?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508934851, "post_id": 46932523, "comment_id": 80811982, "body": "And why exactly would anyone prefer this over the original function?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508934981, "post_id": 46932523, "comment_id": 80812057, "body": "You cannot free the old C and <b>then</b> use it."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1508935115, "post_id": 46932523, "comment_id": 80812147, "body": "This is <i>not</i> in-place transpose. OP wants to change the contents of what <code>C</code> points to, not to make it point to a different place."}], "tags": [], "owner": {"reputation": 337, "user_id": 2563058, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1513172627/picture?type=large", "display_name": "qwn", "link": "https://stackoverflow.com/users/2563058/qwn"}, "is_accepted": false, "score": -1, "last_activity_date": 1508934920, "last_edit_date": 1508934920, "creation_date": 1508934658, "answer_id": 46932523, "question_id": 46932439, "link": "https://stackoverflow.com/questions/46932439/function-to-transpose-a-matrix-in-place/46932523#46932523", "title": "Function to transpose a matrix in place", "body": "<pre><code>void transpose(double **C, double *M, int n) {\n    double *T = (double *) malloc(n * n * sizeof(double));\n    int i, j;\n\n    for (i = 0; i &lt; n; ++i) {\n      for (j = 0; j &lt; n; ++j) {\n          T[i + (j * n)] = M[(i * n) + j];\n      }\n    }\n\n    *C = T;\n}\n</code></pre>\n\n<p>And call your function like this :</p>\n\n<pre><code>transpose(&amp;C, n);\n</code></pre>\n\n<p>As the comments suggest free the old C before to avoid memory leak</p>\n"}, {"comments": [{"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "edited": false, "score": 1, "creation_date": 1508936444, "post_id": 46933036, "comment_id": 80813213, "body": "As pointed out in the comments above, I beliebe this what swap each pair of elements twice, thus cancelling each other out."}, {"owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "reply_to_user": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "edited": false, "score": 0, "creation_date": 1508936727, "post_id": 46933036, "comment_id": 80813433, "body": "@KOB It does not. Notice we loop for i from 0 to n and for j from 0 to i (exclusive)? This means you&#39;ll never swap twice because j will always be less than i, so you will never loop over both elements (i, j) and (j, i), undoing a swap."}, {"owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "edited": false, "score": 1, "creation_date": 1508936858, "post_id": 46933036, "comment_id": 80813521, "body": "Sorry, I thought both i and j were looping 0 through n."}], "tags": [], "owner": {"reputation": 1530, "user_id": 2727710, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000318383381/picture?type=large", "display_name": "kamoroso94", "link": "https://stackoverflow.com/users/2727710/kamoroso94"}, "is_accepted": false, "score": 0, "last_activity_date": 1508936997, "last_edit_date": 1508936997, "creation_date": 1508936008, "answer_id": 46933036, "question_id": 46932439, "link": "https://stackoverflow.com/questions/46932439/function-to-transpose-a-matrix-in-place/46933036#46933036", "title": "Function to transpose a matrix in place", "body": "<p>First of all, your code has a memory leak.  You overwrite the previous value of <code>C</code> without ever freeing it.</p>\n\n<p>To transpose in place, you need to just swap all the right indexes without swapping twice.  So it's like the same problem as reversing an array in place.</p>\n\n<pre><code>void transpose(double *M, int n) {\n  int i, j;\n  double temp;\n  for(i = 0; i &lt; n; i++) {\n    for(j = 0; j &lt; i; j++) {\n      temp = M[i + j * n];\n      M[i + j * n] = M[j + i * n];\n      M[j + i * n] = temp;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": true, "score": 0, "last_activity_date": 1508936760, "last_edit_date": 1508936760, "creation_date": 1508936444, "answer_id": 46933180, "question_id": 46932439, "link": "https://stackoverflow.com/questions/46932439/function-to-transpose-a-matrix-in-place/46933180#46933180", "title": "Function to transpose a matrix in place", "body": "<pre><code>void transpose(double *arr, size_t siz)\n{\n\nsize_t ii,jj;\n\nfor(ii=0;ii&lt;siz;ii++)  {\n        for(jj=ii+1;jj&lt;siz;jj++){\n                double tmp;\n                size_t aa,bb;\n\n                aa = ii+ siz * jj;\n                bb = jj+ siz * ii;\n                tmp = arr[aa];\n                arr[aa] = arr[bb];\n                arr[bb] = tmp;\n                }\n        }\n}\n</code></pre>\n\n<hr>\n\n<p>Don't worry about the<code>aa</code> and <code>bb</code> variables. Any decent compiler will optimize them away. </p>\n"}], "owner": {"reputation": 2986, "user_id": 4564080, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83009ae032b72f3c1aa2bba01ab123e1?s=128&d=identicon&r=PG&f=1", "display_name": "KOB", "link": "https://stackoverflow.com/users/4564080/kob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 46933180, "answer_count": 3, "score": 1, "last_activity_date": 1508940544, "creation_date": 1508934436, "last_edit_date": 1508935648, "question_id": 46932439, "link": "https://stackoverflow.com/questions/46932439/function-to-transpose-a-matrix-in-place", "title": "Function to transpose a matrix in place", "body": "<p>I have written the following function in C</p>\n\n<pre><code>double * transpose(double *M, int n) {\n    double *T = (double *) malloc(n * n * sizeof(double));\n    int i, j;\n\n    for (i = 0; i &lt; n; ++i) {\n      for (j = 0; j &lt; n; ++j) {\n          T[i + (j * n)] = M[(i * n) + j];\n      }\n    }\n\n    return T;\n}\n</code></pre>\n\n<p>and I call it as such:</p>\n\n<pre><code>C = transpose(C, n);\n</code></pre>\n\n<p>where <code>C</code> was previously declared as</p>\n\n<pre><code>double *C = (double *) malloc(n * n * sizeof(double));\n</code></pre>\n\n<p>and then initialised with values.</p>\n\n<p>How can I, instead of returning <code>T</code>, set my function type to void and then call the equivalent of <code>*M = *T</code> instead of my <code>return</code> statement. In other words, how can I call the function like:</p>\n\n<pre><code>transpose(C, n);\n</code></pre>\n\n<p>so that <code>*C</code> is pointing to the memory allocation created by <code>*T</code>?</p>\n\n<p>EDIT:</p>\n\n<p>As pointed out by wildplasser below, a more efficient way of transposing the matrix in place would be swapping the {i, j} pairs except along the diagonal.</p>\n\n<p>Something along the lines of this:</p>\n\n<pre><code>void * transpose(double *M, int n) {\n    int i, j;\n\n    for (i = 0; i &lt; n; ++i) {\n        for (j = 0; j &lt; n; ++j) {\n            if (i != j) {\n                double temp = M[i + (j * n)];\n                M[i + (j * n)] = M[(i * n) + j];\n                M[(i * n) + j] = temp;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>However, calling this as</p>\n\n<pre><code>transpose(C, n);\n</code></pre>\n\n<p>does not allow <code>C</code> to keep it's transposition after the function. What am I doing wrong here?</p>\n\n<p>Also GCC is giving me the warning </p>\n\n<pre><code>Utilities.c: In function 'transpose':\nUtilities.c:34:1: warning: control reaches end of non-void function [-Wreturn-type]\n}\n^\n</code></pre>\n\n<p>I have defined my function as <code>void</code> in both the header and source file?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1508933851, "post_id": 46932199, "comment_id": 80811247, "body": "answer: there&#39;s garbage. What do you mean by &quot;deleting&quot;? choose a value which is invalid like <code>-1</code>. You cannot &quot;delete&quot; <code>array[2]</code>. it&#39;s not a dynamic vector"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1508934014, "post_id": 46932199, "comment_id": 80811364, "body": "What exactly do you mean by &quot;delete&quot; <code>array[2]</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": -1, "last_activity_date": 1508933858, "creation_date": 1508933858, "answer_id": 46932232, "question_id": 46932199, "link": "https://stackoverflow.com/questions/46932199/c-delete-element-of-an-array/46932232#46932232", "title": "C delete element of an array", "body": "<ul>\n<li>If it's a global or a static variable the content will be initialized to 0.</li>\n<li>If it's a local variable, the content will be indetermined.</li>\n</ul>\n\n<hr>\n\n<pre><code>int foo[3];\n\nint Test\n{\n  int bar[3];\n  // here the elements of bar will be indetermined\n\n  int static blab[3];\n  // here the elements of blab will be initialized to 0\n}\n\nint main()\n{\n  // all 3 elements of foo will be initialized to 0\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1508933962, "creation_date": 1508933962, "answer_id": 46932272, "question_id": 46932199, "link": "https://stackoverflow.com/questions/46932199/c-delete-element-of-an-array/46932272#46932272", "title": "C delete element of an array", "body": "<p>If you don't initialize the array then:</p>\n\n<ul>\n<li><p>if it is an automatic variable (declared inside a function) it will have garbage;</p></li>\n<li><p>if it is a global variable, it will be zero.</p></li>\n</ul>\n\n<p>To \"delete\" an element from the array you have to:</p>\n\n<ul>\n<li><p>keep track of how many valid elements there are using a variable (initialily 3);</p></li>\n<li><p>move all higher elements one place down and decrement the number of valid elements (so now it says 2).</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1508933992, "creation_date": 1508933992, "answer_id": 46932285, "question_id": 46932199, "link": "https://stackoverflow.com/questions/46932199/c-delete-element-of-an-array/46932285#46932285", "title": "C delete element of an array", "body": "<p>The contents of the array depends on where it's defined.</p>\n\n<p>Global variables, or <code>static</code> local variables are zero-initialized. Local variables which are not <code>static</code> are not initialized, their values is <em>indeterminate</em> (and will <em>seem</em> random).</p>\n\n<p>And there's no way to \"delete\" an element in an array, or make an element uninitialized. An array have a fixed size, that size can not be changed. And you can not reliably set an element to be indeterminate again (which is a state that you can not check for).</p>\n"}, {"comments": [{"owner": {"reputation": 9095, "user_id": 8542346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b206b49cec657d28a5876f8330780e?s=128&d=identicon&r=PG&f=1", "display_name": "H.S.", "link": "https://stackoverflow.com/users/8542346/h-s"}, "edited": false, "score": 0, "creation_date": 1508934473, "post_id": 46932380, "comment_id": 80811703, "body": "What if the input <code>size</code> is &gt; 100? Better to add a check on <code>size</code> input if you use fixed size array in your program."}], "tags": [], "owner": {"reputation": 571, "user_id": 6803066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QM0U5.png?s=128&g=1", "display_name": "Sunny Jangid", "link": "https://stackoverflow.com/users/6803066/sunny-jangid"}, "is_accepted": false, "score": 1, "last_activity_date": 1508934262, "creation_date": 1508934262, "answer_id": 46932380, "question_id": 46932199, "link": "https://stackoverflow.com/questions/46932199/c-delete-element-of-an-array/46932380#46932380", "title": "C delete element of an array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#define MAX_SIZE 100\n\nint main()\n{\n    int arr[MAX_SIZE];\n    int i, size, pos;\n\n    /* Input size and element in array */\n    printf(\"Enter size of the array : \");\n    scanf(\"%d\", &amp;size);\n    printf(\"Enter elements in array : \");\n    for(i=0; i&lt;size; i++)\n    {\n        scanf(\"%d\", &amp;arr[i]);\n    }\n\n    /* Input element position to delete */\n    printf(\"Enter the element position to delete : \");\n    scanf(\"%d\", &amp;pos);\n\n    /* If delete position is invalid */\n    if(pos==size+1 || pos&lt;0)\n    {\n        printf(\"Invalid position! Please enter position between 1 to %d\", size);\n    }\n    else\n    {\n        /* Copy next element value to current element */\n        for(i=pos-1; i&lt;size-1; i++)\n        {\n            arr[i] = arr[i + 1];\n        }\n\n        /* Decrement array size by 1 */\n        size--;\n    }\n\n    /* Print array after deletion */\n    printf(\"\\nElements of array after delete are : \");\n    for(i=0; i&lt;size; i++)\n    {\n        printf(\"%d\\t\", arr[i]);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 431, "user_id": 8831243, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YQxlc.jpg?s=128&g=1", "display_name": "sachin kumara liyanage", "link": "https://stackoverflow.com/users/8831243/sachin-kumara-liyanage"}, "is_accepted": false, "score": 0, "last_activity_date": 1508936270, "creation_date": 1508936270, "answer_id": 46933118, "question_id": 46932199, "link": "https://stackoverflow.com/questions/46932199/c-delete-element-of-an-array/46933118#46933118", "title": "C delete element of an array", "body": "<p>you can use this code,this code can delete any position in code</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n int main(){\n int i, size, pos,j;\n\n//  array size\nprintf(\"Enter size of the array : \");\nscanf(\"%d\", &amp;size);\n\nint array[size];\n\n\n\nfor(i=0; i&lt;size; i++)\n{\n    printf(\"Enter element %d : \",i+1);\n    scanf(\"%d\", &amp;array[i]);\n}\n\n//position to delete \nprintf(\"Enter position to delete : \");\nscanf(\"%d\", &amp;pos);\n\n//invalid position\nif(pos&gt;=size || pos&lt;0)\n{\n    printf(\"Invalid position! Please enter position between 0 to %d\", size);\n}\nelse\n{\n\n\n    j=0;\n\n    for(i=0; i&lt;size; i++)\n    {\n        if(pos==i){\n            continue;\n        }\n        arr[j] = arr[i];\n        j++;\n    }\n\n    //Decrement size\n    size--;\n}\n\n// Print array \nprintf(\"\\nElements of array after delete are : \");\nfor(i=0; i&lt;size; i++)\n{\n    printf(\"%d\\t\", arr[i]);\n}\n\nreturn 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 8110165, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f0f7c05a059250fab42145a7e7308178?s=128&d=identicon&r=PG&f=1", "display_name": "whatever.idc", "link": "https://stackoverflow.com/users/8110165/whatever-idc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10608, "favorite_count": 0, "accepted_answer_id": 46932232, "answer_count": 5, "score": 1, "last_activity_date": 1549776727, "creation_date": 1508933770, "last_edit_date": 1508934114, "question_id": 46932199, "link": "https://stackoverflow.com/questions/46932199/c-delete-element-of-an-array", "title": "C delete element of an array", "body": "<p>How can I delete an element of an array in c?\nFor example when I declare this:</p>\n\n<pre><code>int array[3];\n</code></pre>\n\n<p>What is in these 3 cells when I don't initialize them?</p>\n\n<p>For example when I fill these now but want to delete array[2] again.</p>\n\n<pre><code>array[0] = 0;\narray[1] = 1;\narray[2] = 2;\n</code></pre>\n\n<p>Now I want to delete element array[2] again.\nHow exactly can I do this? Setting it to 0 won't help me since this still has a meaning in my programme.</p>\n\n<p>The context is, that I save the turns of a game in the array elements. But when I want to undo a turn I have to delete the element again or give that element its former \"content\".</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1508932825, "post_id": 46931837, "comment_id": 80810466, "body": "you mean <code>float a = atof(astr);</code>, drop the <code>&amp;</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1508932827, "post_id": 46931837, "comment_id": 80810469, "body": "<code>scanf(&quot;%s&quot;,&amp;astr);</code> ..if your compiler is silent, either fire up the warning level or throw it away."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1508932865, "post_id": 46931837, "comment_id": 80810495, "body": "@SouravGhosh right but <code>char astr;</code> explains there&#39;s no warning, but a lot of UB :)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1508932936, "post_id": 46931837, "comment_id": 80810547, "body": "<code>char != string</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1508932937, "post_id": 46931837, "comment_id": 80810548, "body": "@Jean-Fran&#231;oisFabre Good God...there you go. :)"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1508933228, "post_id": 46931837, "comment_id": 80810772, "body": "could just use <code>scanf(&quot;%f&quot;,&amp;a)</code> and avoid all the undefined behaviour with the not-strings"}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 2, "last_activity_date": 1508933334, "last_edit_date": 1508933334, "creation_date": 1508932988, "answer_id": 46931944, "question_id": 46931837, "link": "https://stackoverflow.com/questions/46931837/how-to-convert-a-string-to-a-float-in-c/46931944#46931944", "title": "How to convert a String to a Float in C", "body": "<p>instead of 3 wrong lines:</p>\n\n<pre><code>char astr;\nscanf(\"%s\",&amp;astr);\nfloat a = atof(&amp;astr);\n</code></pre>\n\n<p>let me propose working lines:</p>\n\n<pre><code>char astr[20];  // should be enough\nscanf(\"%19s\",astr);  // 19 protects from buffer overflow on astr\nfloat a = atof(astr);\n</code></pre>\n\n<p>First, you cannot scan a string into a <code>char</code>: not enough room / undefined behaviour. Pass a char <em>array</em> instead (and in that case drop the <code>&amp;</code>, it's already an address)</p>\n\n<p>Second, pass the string to <code>atof</code>, not the pointer on the string.</p>\n\n<p>Aside: <code>atof</code> doesn't check for errors, better use <a href=\"http://%60http://en.cppreference.com/w/c/string/byte/strtof%60\" rel=\"nofollow noreferrer\"><code>strtof</code></a> which provides (optional) error checking.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1508934495, "post_id": 46932381, "comment_id": 80811722, "body": "Welcome to Stack Overflow! This question is looking for an <i>explanation</i>, not simply for working code.  Your answer provides no insight for the questioner, and may be deleted.  Please <a href=\"https://stackoverflow.com/posts/46932381/edit\">edit</a> to explain what causes the observed symptoms."}], "tags": [], "owner": {"reputation": 1, "user_id": 8831200, "user_type": "registered", "profile_image": "https://graph.facebook.com/1917835364900767/picture?type=large", "display_name": "Akshay Krishnan", "link": "https://stackoverflow.com/users/8831200/akshay-krishnan"}, "is_accepted": false, "score": -1, "last_activity_date": 1508934262, "creation_date": 1508934262, "answer_id": 46932381, "question_id": 46931837, "link": "https://stackoverflow.com/questions/46931837/how-to-convert-a-string-to-a-float-in-c/46932381#46932381", "title": "How to convert a String to a Float in C", "body": "<pre><code>int main () {\nfloat val;\nchar str[10];\nstrcpy(str, \"1234\");\nval = atof(str);\nprintf(\"%f\", val);\nreturn 0;\n}\n</code></pre>\n\n<p>You can also use strtod() refer man page of atof()</p>\n"}], "owner": {"reputation": 29, "user_id": 8831314, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b8b995e9105df6088ff992789c222219?s=128&d=identicon&r=PG&f=1", "display_name": "Gehteuch Nixan", "link": "https://stackoverflow.com/users/8831314/gehteuch-nixan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 46931944, "answer_count": 2, "score": 0, "last_activity_date": 1508934262, "creation_date": 1508932674, "question_id": 46931837, "link": "https://stackoverflow.com/questions/46931837/how-to-convert-a-string-to-a-float-in-c", "title": "How to convert a String to a Float in C", "body": "<p>I have written the following code</p>\n\n<pre><code>#include &lt;stdio.h&gt;      \n#include &lt;stdlib.h&gt; \nint main()\n\n{\n    // declaration of variables as strings\n    char astr;\n    char bstr;\n    char cstr;\n\n    /* Input three sides of a triangle */\n    printf(\"Enter first side of triangle: \");\n    scanf(\"%s\",&amp;astr);\n    printf(\"Enter second side of triangle: \");\n    scanf(\"%s\",&amp;bstr);\n    printf(\"Enter third side of triangle: \");\n    scanf(\"%s\",&amp;cstr);\n\n    // conversion of strings to float\n    float a = atof(&amp;astr);\n    float b = atof(&amp;bstr);\n    float c = atof(&amp;cstr);\n    // checking if given triangle is valid\n    if((a + b &gt; c) &amp;&amp; (a + c &gt; b) &amp;&amp; (b + c &gt; a))\n    {\n       // Checking for special cases of triangle\n\n        if(a==b &amp;&amp; b==c)\n        {\n            /* If all sides are equal */\n            printf(\"Equilateral triangle.\");\n        }\n        else if(a==b || a==c || b==c)\n        {\n            /* If any two sides are equal */\n            printf(\"Isosceles triangle.\");\n        }\n        else\n        {\n            /* If none sides are equal */\n            printf(\"Scalene triangle.\");\n        }\n    }\n    else\n    {\n        printf(\"Triangle is not valid. \\n\");\n    }\n\n    printf(\"%f \\n\", a);\n    printf(\"%f \\n\", b);\n    printf(\"%f \\n\" ,c);\n    return 0;\n}\n</code></pre>\n\n<p>However when I run it, I get \"Triangle is not valid\" despite the fact that mathematically the triangle would be valid</p>\n\n<p>When printing the Values stored in a b and c I discover that only the Value for c is stored correctly but a and b are always 0.000000</p>\n\n<p>what have I done wrong?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1508933180, "post_id": 46931763, "comment_id": 80810733, "body": "Can you please be more specific about what you are trying to do?  (The answer is probably either &quot;just use getnameinfo&quot; or &quot;that&#39;s the wrong question to be asking&quot; but without more information that&#39;s all I can give you.)"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 3385389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1636360319/picture?type=large", "display_name": "Gioviiz", "link": "https://stackoverflow.com/users/3385389/gioviiz"}, "edited": false, "score": 0, "creation_date": 1509014766, "post_id": 46941396, "comment_id": 80851520, "body": "Yes cheking that is not zeros (after beeing memset to 0 at startup) seams the most ragionable way to. Thanks"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1508963268, "last_edit_date": 1508963268, "creation_date": 1508962847, "answer_id": 46941396, "question_id": 46931763, "link": "https://stackoverflow.com/questions/46931763/how-to-know-if-sockaddr-storage-usage-at-runtime/46941396#46941396", "title": "How to know if sockaddr_storage usage at runtime", "body": "<p>Check the <code>ss_family</code> field.  It will be <code>AF_INET</code> for an IPv4 address, or <code>AF_INET6</code> for an IPv6 address.  You can then type-cast the <code>sockaddr_storage</code> accordingly to either <code>sockaddr_in</code> or <code>sockaddr_in6</code> in order to access the <code>sockaddr_in::sin_addr</code> or <code>sockaddr_in6::sin6_addr</code> field, respectively, to make sure it is not set to zeros.</p>\n"}], "owner": {"reputation": 19, "user_id": 3385389, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1636360319/picture?type=large", "display_name": "Gioviiz", "link": "https://stackoverflow.com/users/3385389/gioviiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 46941396, "answer_count": 1, "score": 0, "last_activity_date": 1508963268, "creation_date": 1508932437, "question_id": 46931763, "link": "https://stackoverflow.com/questions/46931763/how-to-know-if-sockaddr-storage-usage-at-runtime", "title": "How to know if sockaddr_storage usage at runtime", "body": "<p>A runtime I'ld like to to know if an stack defined struct sockaddr_storage was assigned to any IP address (IPv4 or IPv6)</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["c", "linux", "json-c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508933627, "post_id": 46931449, "comment_id": 80811059, "body": "<code>json_object_put</code> <i>decrements the reference count of</i> <code>json_object</code> <i>and frees it if it reaches zero.</i> (See <a href=\"https://json-c.github.io/json-c/json-c-0.10/doc/html/json__object_8h.html\" rel=\"nofollow noreferrer\">json-c.github.io/json-c/json-c-0.10/doc/html/&hellip;</a>). Further, the library may have internal object/memory management that does not necessarilly releases the storage to the heap, and neither does this imply the heap decreases (which is something else than &quot;the system&quot;)."}, {"owner": {"reputation": 1, "user_id": 5827628, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j8sE-NhLTHs/AAAAAAAAAAI/AAAAAAAAAFI/Ruq9tNXGnPo/photo.jpg?sz=128", "display_name": "debabrata pal", "link": "https://stackoverflow.com/users/5827628/debabrata-pal"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508934104, "post_id": 46931449, "comment_id": 80811448, "body": "Hello Paul, thanks for answer. But if the same experiment is done with malloc and free, ps -aux shows correct VSZ, ie it increases with alloc and decreases with  free. That is also from heap. so only conclusion if json library eats memory but not gives to system. Seem like a dangerous idea."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508934632, "post_id": 46931449, "comment_id": 80811827, "body": "No, it does not necessarilly &quot;eat&quot; memory. The library may have internal memory management and a pool of object storage. Try allocating an object again and see wat happens to storage (maybe allocate a lot of objects and release them all, then do again and see how memory usage evolves)."}, {"owner": {"reputation": 1, "user_id": 5827628, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j8sE-NhLTHs/AAAAAAAAAAI/AAAAAAAAAFI/Ruq9tNXGnPo/photo.jpg?sz=128", "display_name": "debabrata pal", "link": "https://stackoverflow.com/users/5827628/debabrata-pal"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508996546, "post_id": 46931449, "comment_id": 80840268, "body": "Memory usage clamps to peak value ever used. After that new objects reuse memory hold by the process, even if none is used, the peak memory consumption never goes back to system. That is strange, huh?"}], "owner": {"reputation": 1, "user_id": 5827628, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j8sE-NhLTHs/AAAAAAAAAAI/AAAAAAAAAFI/Ruq9tNXGnPo/photo.jpg?sz=128", "display_name": "debabrata pal", "link": "https://stackoverflow.com/users/5827628/debabrata-pal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 504, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1508936584, "creation_date": 1508931472, "last_edit_date": 1508936584, "question_id": 46931449, "link": "https://stackoverflow.com/questions/46931449/when-json-object-put-frees-memory-to-system", "title": "When json_object_put frees memory to system?", "body": "<p>I've this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;json/json.h&gt;\n#include &lt;stdio.h&gt;\n\njson_object *new_array;\n\nvoid add_result_event(json_object *scan_result) {\n    json_object_array_add(new_array, scan_result);\n}\n\n\nvoid add_scan_result() {\n    json_object *scan_result = json_object_new_object();\n    json_object_object_add(scan_result, \"ssid\", json_object_new_string(\"ssssssssssssssssssssssssssssiiiiiiiiiiiidddddddddd\"));\n    add_result_event(scan_result);\n}\n\nvoid alloc_object() {\n    int i = 0;\n    while (i &lt; 100000) {\n        add_scan_result();\n        i++;\n    }\n}\n\nint main() {\n    new_array = json_object_new_array();\n    printf(\" not started.. see memory\\n\");\n    system(\"ps -aux | grep sonj\");\n    sleep (1);\n\n    alloc_object();\n    printf(\" allocated.. see memory\\n\");\n    system(\"ps -aux | grep sonj\");\n    sleep (1);\n\n    json_object_put(new_array);\n\n    printf(\" freed.. see memory\\n\");\n    system(\"ps -aux | grep sonj\");\n    sleep (1);\n\n    new_array  =  json_object_new_array();\n    printf(\" allocated.. see memory\\n\");\n    alloc_object();\n    system(\"ps -aux | grep sonj\");\n    sleep (1);\n}\n</code></pre>\n\n<p>Compiled with:</p>\n\n<pre><code>~$ gcc json_array_obj_d.c -ljson-c -o sonj\n</code></pre>\n\n<p>Then, ran with:</p>\n\n<pre><code>~$ ./sonj\n</code></pre>\n\n<p>The VSZ field of output is not showing any memory freed to system after the <code>json_object_put call</code>.</p>\n\n<p>So freeing with <code>json_object_put</code> does not give the memory to system, but next allocation also does not take more memory to system.</p>\n\n<p>After <code>json_object_put</code> is called when the free memory shows up in system?</p>\n"}, {"tags": ["c", "merge", "singly-linked-list"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1508930799, "post_id": 46931118, "comment_id": 80809047, "body": "Please <a href=\"https://stackoverflow.com/posts/46931118/edit\">edit</a> your question and provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1508930809, "post_id": 46931118, "comment_id": 80809054, "body": "What makes you think that &quot;LIST 2&quot; should be empty?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8831014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22511485643c91ff595c02f5348338c?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Somani", "link": "https://stackoverflow.com/users/8831014/saurabh-somani"}, "edited": false, "score": 0, "creation_date": 1508932823, "post_id": 46931310, "comment_id": 80810465, "body": "But I have incremented list2 to point to next node in each iteration of while loop, so won&#39;t it point to NULL after the last iteration?"}, {"owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "reply_to_user": {"reputation": 3, "user_id": 8831014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22511485643c91ff595c02f5348338c?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Somani", "link": "https://stackoverflow.com/users/8831014/saurabh-somani"}, "edited": false, "score": 0, "creation_date": 1508932906, "post_id": 46931310, "comment_id": 80810527, "body": "The pointers are passed by value to the merge function, basically, you only took a copy and incremented it, not affecting the pointer outside the scope of the function"}, {"owner": {"reputation": 3, "user_id": 8831014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22511485643c91ff595c02f5348338c?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Somani", "link": "https://stackoverflow.com/users/8831014/saurabh-somani"}, "edited": false, "score": 0, "creation_date": 1508933314, "post_id": 46931310, "comment_id": 80810839, "body": "Okay... Got it! Thanks for the reply brother! :)"}], "tags": [], "owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "is_accepted": true, "score": 1, "last_activity_date": 1508931106, "creation_date": 1508931106, "answer_id": 46931310, "question_id": 46931118, "link": "https://stackoverflow.com/questions/46931118/merging-2-singly-linked-lists-without-head-node/46931310#46931310", "title": "Merging 2 Singly Linked Lists (without Head Node)", "body": "<p>There is no reason for List2 to be empty:</p>\n\n<p>List 2 is not literally a list, merely a pointer to the first element of the second list, which after merge becomes the second element of the complete list.</p>\n\n<p>In memory, there is only a single list <code>[1-&gt;5-&gt;2-&gt; 6-&gt; 3-&gt; 7]</code>, with the pointer <code>list1</code> pointing to its first element and <code>list2</code> pointing to the second one.</p>\n\n<p>Thus, when you print your <code>list1</code> it will print the list starting form 1, while when you print <code>list2</code> it will print the list starting from 5</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8831014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22511485643c91ff595c02f5348338c?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Somani", "link": "https://stackoverflow.com/users/8831014/saurabh-somani"}, "edited": false, "score": 0, "creation_date": 1508933365, "post_id": 46931339, "comment_id": 80810873, "body": "Thanks for the suggestion! I appreciate your efforts :)"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 3, "user_id": 8831014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22511485643c91ff595c02f5348338c?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Somani", "link": "https://stackoverflow.com/users/8831014/saurabh-somani"}, "edited": false, "score": 0, "creation_date": 1508933639, "post_id": 46931339, "comment_id": 80811073, "body": "Nope. Just one."}, {"owner": {"reputation": 3, "user_id": 8831014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22511485643c91ff595c02f5348338c?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Somani", "link": "https://stackoverflow.com/users/8831014/saurabh-somani"}, "edited": false, "score": 0, "creation_date": 1508934286, "post_id": 46931339, "comment_id": 80811554, "body": "Your answer helped me but didn&#39;t answer the question"}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1508931206, "creation_date": 1508931206, "answer_id": 46931339, "question_id": 46931118, "link": "https://stackoverflow.com/questions/46931118/merging-2-singly-linked-lists-without-head-node/46931339#46931339", "title": "Merging 2 Singly Linked Lists (without Head Node)", "body": "<p>Pointers are pointers. They just point at things. It's perfectly valid to have a pointer that points in the middle of a linked list. This way, one list can be a subset of another list. As pointed out in the comment, this is not strange behavior from a merge function.</p>\n\n<p>Howver, if you want to do this:\nIn order to \"make list 2 empty\" you could just dereference it after the call. Like this:</p>\n\n<pre><code>merge(list1, list2);\nlist2 = NULL;\n</code></pre>\n\n<p>If you want to do it within the function, you could use pointer to pointers:</p>\n\n<pre><code>void merge(NODE **list1, NODE **list2)\n{\n    NODE *ptr1 = *list1;\n    NODE *ptr2 = *list2;    \n // Do stuff\n    if(blabla) \n        **list1 = NULL;\n    else\n        **list2 = NULL;\n}\n</code></pre>\n\n<p>and then call merge like this:</p>\n\n<pre><code>merge(&amp;list1, &amp;list1)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8831014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22511485643c91ff595c02f5348338c?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Somani", "link": "https://stackoverflow.com/users/8831014/saurabh-somani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 46931310, "answer_count": 2, "score": 0, "last_activity_date": 1508932512, "creation_date": 1508930571, "last_edit_date": 1508932512, "question_id": 46931118, "link": "https://stackoverflow.com/questions/46931118/merging-2-singly-linked-lists-without-head-node", "title": "Merging 2 Singly Linked Lists (without Head Node)", "body": "<p>I have 2 Singly Linked Lists <strong>without Head Node</strong> :</p>\n\n<p>LIST 1:   [x1->x2->.....->xn]</p>\n\n<p>LIST 2:   [y1->y2->......->ym]</p>\n\n<p>After merging:</p>\n\n<p>if(n &lt; m)</p>\n\n<p>LIST 1:   [x1->y1->x2->y2->.....->xn->yn->y(n+1)->....->ym]</p>\n\n<p>else</p>\n\n<p>LIST 1:   [x1->y1->x2->y2->.....->xm->ym->x(m+1)->....->xn]</p>\n\n<p>Here's my Merge function:</p>\n\n<pre><code>void merge(NODE *list1, NODE *list2)\n{\n    NODE *ptr1 = list1;\n    NODE *ptr2 = list2;\n\n    while(1)\n    {\n        if(ptr2 == NULL)\n            break;\n\n        if(ptr1-&gt;next == NULL)\n        {\n            ptr1-&gt;next = ptr2;\n            display(list1);\n\n            while(list2 != NULL)\n                list2 = list2-&gt;next;\n\n            break;\n        }\n\n        list2 = list2-&gt;next;\n\n        ptr2-&gt;next = ptr1-&gt;next;\n        ptr1-&gt;next = ptr2;\n\n        ptr2 = list2;\n        ptr1 = (ptr1-&gt;next)-&gt;next;\n\n        display(list1);\n    }\n}\n</code></pre>\n\n<p><strong>But after executing it in main function, LIST 2 should've been empty, but it's not.</strong></p>\n\n<p>For example:</p>\n\n<p>LIST 1:    [1-> 2-> 3]</p>\n\n<p>LIST 2:    [5-> 6-> 7]</p>\n\n<p>After merging:</p>\n\n<p>LIST 1:    [1-> 5-> 2-> 6-> 3-> 7]</p>\n\n<p>LIST 2:    [5-> 2-> 6-> 3-> 7] (This should've been empty)</p>\n\n<p>Please Explain!</p>\n\n<p><strong>Edit :</strong></p>\n\n<p><strong>Sample Output :</strong></p>\n\n<p>----------[List 1]----------</p>\n\n<p>Enter an element (-123 to exit): 1</p>\n\n<p>[  LIST:    1  ]</p>\n\n<p>Enter an element (-123 to exit): 2</p>\n\n<p>[  LIST:    1  2  ]</p>\n\n<p>Enter an element (-123 to exit): -123</p>\n\n<p>----------[List 2]----------</p>\n\n<p>Enter an element (-123 to exit): 5</p>\n\n<p>[  LIST:    5  ]</p>\n\n<p>Enter an element (-123 to exit): 6</p>\n\n<p>[  LIST:    5  6  ]</p>\n\n<p>Enter an element (-123 to exit): 7</p>\n\n<p>[  LIST:    5  6  7  ]</p>\n\n<p>Enter an element (-123 to exit): 8</p>\n\n<p>[  LIST:    5  6  7  8  ]</p>\n\n<p>Enter an element (-123 to exit): -123</p>\n\n<p>[  LIST:    1  5  2  ]</p>\n\n<p>[  LIST:    1  5  2  6  7  8  ]</p>\n\n<p>----------[Merged List]----------</p>\n\n<p>[  LIST:    1  5  2  6  7  8  ]</p>\n\n<p>[  LIST:    5  2  6  7  8  ]</p>\n"}, {"tags": ["c", "arrays", "string"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 4, "creation_date": 1508929218, "post_id": 46930644, "comment_id": 80807988, "body": "did you know what&#39;s this line for? <code>&#47;&#47;space[num - 1] = &#39;\\0&#39;;</code>"}, {"owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1508929423, "post_id": 46930644, "comment_id": 80808140, "body": "it sets the string terminator? My code works fine with this line. But once i remove it, the random chars start appearing before digit 9. I thought the compiler should set the string terminator automatically?"}, {"owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1508929464, "post_id": 46930644, "comment_id": 80808176, "body": "I just tried an online compiler. It worked fine there. Is it my compiler&#39;s problem?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1508929532, "post_id": 46930644, "comment_id": 80808217, "body": "<code>&#47;&#47;display int according to the width</code>..what is this?"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1508929896, "post_id": 46930644, "comment_id": 80808433, "body": "&quot;I thought the compiler should set the string terminator automatically&quot; -- Why would you think that? The only time this occurs is when an array is initialized with a string literal."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1508930040, "post_id": 46930644, "comment_id": 80808526, "body": "<i>&quot; Is it my compiler&#39;s problem? &quot;</i>  On average, once every 10 years it is a bug in your compiler. Every other time it is a bug in <i>your</i> code.  :-)"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1508930086, "post_id": 46930644, "comment_id": 80808549, "body": "The max value for <code>num</code> is 9. Then why not define <code>char space[9]</code> instead of <code>space[num]</code>? It can be compiled but is bad style for C. I don&#39;t know why it was added as feature."}, {"owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1508930101, "post_id": 46930644, "comment_id": 80808564, "body": "@xing How does the * work? You can sub in anything at the *?"}, {"owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1508930257, "post_id": 46930644, "comment_id": 80808694, "body": "@DavidBowling so when i declare char array[5]; without initializing it, the default values are garbage? or 0?"}, {"owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "edited": false, "score": 0, "creation_date": 1508930360, "post_id": 46930644, "comment_id": 80808756, "body": "garbage, see <a href=\"https://stackoverflow.com/a/12750525/5036612\">this answer</a> for clarification"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 1, "creation_date": 1508930370, "post_id": 46930644, "comment_id": 80808764, "body": "@Anlinyang The initial values are 0 for static/global arrays and garbage for automatic/stack arrays like in this case."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1508934892, "post_id": 46930644, "comment_id": 80812006, "body": "Also note that <code>int num;</code> is uninitialized, <i>and</i> you&#39;re not checking if <code>scanf()</code> fails.  If the uninitialized random value in <code>num</code> is between 1 and 9, and the user enters something like <code>a</code>, the <code>scanf()</code> will fail, the value in <code>num</code> won&#39;t change, and the loop will end.  By not initializing <code>num</code>, and by not ensuring it&#39;s actually set to a specific value, you have undefined behavior."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "edited": false, "score": 0, "creation_date": 1508933813, "post_id": 46930897, "comment_id": 80811215, "body": "space[9] = {&#39;\\0}; \\\\initializes the array to 0s and removed the garbage"}], "tags": [], "owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "is_accepted": true, "score": 1, "last_activity_date": 1508929940, "creation_date": 1508929940, "answer_id": 46930897, "question_id": 46930644, "link": "https://stackoverflow.com/questions/46930644/weird-behavior-for-char-array-in-c/46930897#46930897", "title": "Weird behavior for char array in C", "body": "<p>When you declare your char array in the stack, its values are not initialized at 0, meaning those slots contain whatever was on the stack at the moment.</p>\n\n<p>Said otherwise, the surprising part is not the behavior at 9 but at every other value, since this char array's contents prior to overwriting them are purely undefined.</p>\n\n<p>You have to initialize it yourself at 0 if you want a certain result.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "edited": false, "score": 0, "creation_date": 1508930548, "post_id": 46931054, "comment_id": 80808873, "body": "Thank you so much for alternative solution. I didn&#39;t know about this. Can you explain a bit more on how * works? it can be anywhere inside the &quot; &quot;? and sub in any data type?"}], "tags": [], "owner": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "is_accepted": false, "score": 2, "last_activity_date": 1508931024, "last_edit_date": 1508931024, "creation_date": 1508930404, "answer_id": 46931054, "question_id": 46930644, "link": "https://stackoverflow.com/questions/46930644/weird-behavior-for-char-array-in-c/46931054#46931054", "title": "Weird behavior for char array in C", "body": "<p>The width field can be used to specify a field within which to print the value. Following % are width and precision fields. <code>%5d</code> would always use a width of 5. With <code>%*d</code> the asterisk allows for a variable width argument, in this example <code>num + 1</code>. The width needs an integer type.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, char * argv[]){\n\n    int num = 0;\n\n    do{\n       //prompt user to enter an int\n       printf(\"Please enter an integer between 1 and 9 inclusive: \");\n\n       if ( 1 != scanf(\" %d\", &amp;num)) {\n            num = 0;\n            //input was not an int so check for EOF \n            if ( EOF == getchar ( )) {\n                return 0;\n            }\n            //clean pending characters up to newline\n            while ( '\\n' != getchar ( )) { }\n        }\n\n       //check if the number is between 1 and 9\n       if (num &lt; 1 || num &gt; 9) puts(\"You have enter an invalid integer! Try again!\");\n\n       //ask for input unless valid\n   }while(num &lt; 1 || num &gt; 9);\n\n   //display int according to the width\n   printf(\"Your input is:%*d\\n\", num + 1, num);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3717, "user_id": 1215996, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ff628cd135c5f60ce0dfda4b40ac06e?s=128&d=identicon&r=PG", "display_name": "Sumit Trehan", "link": "https://stackoverflow.com/users/1215996/sumit-trehan"}, "is_accepted": false, "score": 1, "last_activity_date": 1508931348, "creation_date": 1508931348, "answer_id": 46931400, "question_id": 46930644, "link": "https://stackoverflow.com/questions/46930644/weird-behavior-for-char-array-in-c/46931400#46931400", "title": "Weird behavior for char array in C", "body": "<p>Printing the string with <code>%s</code> format specifier looks for the NULL terminator <code>'\\0'</code> and keep on printing the characters till it finds the <code>NULL terminator</code>.</p>\n\n<p>Since the <code>space[]</code> array is local, it can have any garbage value. The last element may not be <code>'\\0'</code> and hence you are seeing the strange characters in the output.</p>\n\n<p>For the cases which are working is hence not a predictable behavior.\nHence you need to explicity terminate the string with <code>'\\0'</code>, Or you can do a memset in the beginning before using the array.</p>\n\n<pre><code>memset(space, 0, sizeof(space));\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 7926170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f8b69a640eb3c4cb97210668c543c7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Milk_QD", "link": "https://stackoverflow.com/users/7926170/milk-qd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 46930897, "answer_count": 3, "score": 1, "last_activity_date": 1508931348, "creation_date": 1508929151, "last_edit_date": 1508929679, "question_id": 46930644, "link": "https://stackoverflow.com/questions/46930644/weird-behavior-for-char-array-in-c", "title": "Weird behavior for char array in C", "body": "<p>I am writing a program which allows the user to enter a number between 1 and 9 inclusive. Then display the width of output according to the number entered by the user. E.g. if 1 is entered, the program should print out \"Your input is 1\". If the 5 is entered, the program should print out \"Your input is XXXXX5\" [X = space]</p>\n\n<p>So what I did what initializing a char array of size of the integer entered which is responsible for the width. Then initialize the char array with ' ' accordingly using for loop.</p>\n\n<p>Everything works fine with number 1 to 8. But when I entered 9, there would be random characters before the digit such as \"Your input is        \ufffd@9\".</p>\n\n<p>What is happening? It seems like the compiler did not add the string terminator for the case of 9. Then it works fine when I manually set the last char to be '\\0'.</p>\n\n<p>Here are my codes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main(int argc, char * argv[]){\n\n    int num;\n\n    do{\n       //prompt user to enter an int\n       printf(\"Please enter an integer between 1 and 9 inclusive: \");\n\n       scanf(\" %d\", &amp;num);\n\n       //check if the number is between 1 and 9\n       if (num &lt; 1 || num &gt; 9) puts(\"You have enter an invalid integer! Try again!\");\n\n       //ask for input unless valid\n   }while(num &lt; 1 || num &gt; 9);\n\n   char space[num]; //max width is num-1 but 1 more slot for string terminator\n\n   //initiate the string according to the width\n   for (int i = 0 ; i &lt; num - 1 ; i++){\n      space[i] = ' ';\n   }\n\n   //space[num - 1] = '\\0';\n\n   //display int according to the width\n   printf(\"Your input is %s%d\\n\", space, num);\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "eclipse", "gcc", "arm", "imx6"], "comments": [{"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1508945548, "post_id": 46930149, "comment_id": 80820130, "body": "Please provide the exact command line used to compile the program."}, {"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1508945781, "post_id": 46930149, "comment_id": 80820289, "body": "What operating system runs on the target (if any) and how do you load and run the compiled program?"}, {"owner": {"reputation": 21, "user_id": 8830450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b835c6b4b2b15ade9229b246ce41dccc?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A Johnson", "link": "https://stackoverflow.com/users/8830450/mark-a-johnson"}, "reply_to_user": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509022624, "post_id": 46930149, "comment_id": 80856938, "body": "I have updated the original question the the information you asked for."}, {"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509025478, "post_id": 46930149, "comment_id": 80859220, "body": "Okay. There is still some confusion though. You mention <code>--specs=nosys.specs</code> and link to a different post. However, that post seems to be about Cortex-M0 which is quite a different processor and unlikely to run Linux. So anything what you were told there may not apply here. You should use <code>arm-linux-gnueabihf</code> toolchain with very minimum amount of compilation options, since it&#39;s Linux. Try first to compile this without Eclipse, from command line, removing all options that are not necessary. For this simple program, you should not need any options at all."}, {"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509027998, "post_id": 46930149, "comment_id": 80861233, "body": "Something like this: <code>arm-linux-gnueabihf-gcc -mcpu=cortex-a9 -static -o test test.c</code>"}, {"owner": {"reputation": 21, "user_id": 8830450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b835c6b4b2b15ade9229b246ce41dccc?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A Johnson", "link": "https://stackoverflow.com/users/8830450/mark-a-johnson"}, "reply_to_user": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509031193, "post_id": 46930149, "comment_id": 80863547, "body": "That works as a Command Line! I have managed to hammer Eclipse to get the command looking like it should be the same (-I&quot;D:\\SDKC_imx6Sandbox\\SDK\\Projects\\Test_6_1&quot; -O0 -static -o -mcpu=cortex-a9) but am suffering from an &quot;unrecognised emulation mode: cpu=cortex-a9&quot;"}, {"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509031745, "post_id": 46930149, "comment_id": 80863905, "body": "So your program works on the target?  I am not sure what is <code>unrecognised emulation mode</code> - is it a compiler error? It took <code>-mcpu</code> from your command line. Maybe your toolchain does not know this processor? You may get away just omitting it. BTW: <code>-static</code> is just in case libraries on the target may not match what you have in the toolchain. It is better to sort this out and remove <code>-static</code>."}, {"owner": {"reputation": 21, "user_id": 8830450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b835c6b4b2b15ade9229b246ce41dccc?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A Johnson", "link": "https://stackoverflow.com/users/8830450/mark-a-johnson"}, "reply_to_user": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509032070, "post_id": 46930149, "comment_id": 80864113, "body": "I believe it to be a &quot;Linker Error&quot; its coming from ../arm-linux-gnueabihf/bin/ld.exe and says it supports &quot;armelf_linux_eabi armelfb_linux_eabi&quot; (if i remove -static from the command line it still builds/runs)"}, {"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509032375, "post_id": 46930149, "comment_id": 80864290, "body": "So I guess this may be caused by the Eclipse plugin doing build in its own way. Unfortunately, I am not experienced with it. Try to figure out what it is actually doing."}, {"owner": {"reputation": 799, "user_id": 8366816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29020983ccbb8941f6a319ed39d90b9d?s=128&d=identicon&r=PG&f=1", "display_name": "A.K.", "link": "https://stackoverflow.com/users/8366816/a-k"}, "edited": false, "score": 0, "creation_date": 1509032522, "post_id": 46930149, "comment_id": 80864384, "body": "I see. Somebody (Eclipse) is calling <code>ld</code> directly and the <code>-m</code> option leaks to its command line. You should either use <code>gcc</code> as a linker or adjust <code>ld</code> options as they are different."}], "owner": {"reputation": 21, "user_id": 8830450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b835c6b4b2b15ade9229b246ce41dccc?s=128&d=identicon&r=PG&f=1", "display_name": "Mark A Johnson", "link": "https://stackoverflow.com/users/8830450/mark-a-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1509022575, "creation_date": 1508927771, "last_edit_date": 1509022575, "question_id": 46930149, "link": "https://stackoverflow.com/questions/46930149/eclipse-setup-to-compile-c-and-c-for-imx6-solox-cortexa9-in-a-windows-envirome", "title": "Eclipse Setup to Compile c and c++ for iMX6 SoloX CortexA9 in a windows enviroment", "body": "<p>I am trying to compile a simple C application for a SoloX Cortex-A9 using Eclipse in a Windows Environment.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main () {\nint ch;\nfor( ch = 75 ; ch &lt;= 100; ch++ )\n{\n    printf(\"ASCII value = %d, Character = %c\\n\", ch , ch );\n}\nreturn(0);\n}\n</code></pre>\n\n<p>I am looking for a assistance setting up Eclipse and getting the Toolchain/Command Sorted.</p>\n\n<p>So far I have tried the following with varying degree's of success.</p>\n\n<p><a href=\"https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads\" rel=\"nofollow noreferrer\">arm-none-eabi-gcc</a> with <a href=\"https://stackoverflow.com/questions/19419782/exit-c-text0x18-undefined-reference-to-exit-when-using-arm-none-eabi-gcc\">--specs=nosys.specs</a> to remove some issues.</p>\n\n<p>This compiles, but when executed produces a Segmentation Fault</p>\n\n<p>It was then suggested that the solox (Cortexa9) is a armhf and not an armel so I tried <a href=\"https://releases.linaro.org/components/toolchain/binaries/latest/arm-linux-gnueabihf/\" rel=\"nofollow noreferrer\">arm-linux-gnueabihf</a></p>\n\n<p>This also complies but much to my irritation also produces a \"Segmentation Fault.\"</p>\n\n<p>Eclipse Plugins; I have\nThe GNU ARM Eclipse Plug-in is an Eclipse CDT Manged Build Extension for GNU ARM Toolchains like CodeSourcery G++ Lite, GNUARM, WinARM, Yagarto, and supports the development of managed C/C++ applications for the ARM series of processors.\nVersion: 0.5.3.201010141144</p>\n\n<p>Feeling very out of depth and hoping someone can point me in the right direction.</p>\n\n<p><em>Edit to provide additional information;</em></p>\n\n<p>\"All Options\" command is - \"-I\"D:\\SDKC_imx6Sandbox\\SDK\\Projects\\Test_6_1\" -I\"D:\\SDKC_imx6Sandbox\\SDK\\Projects\\Test_6_1/source\" -O3 -Wall -Wa,-adhlns=\"$@.lst\" -c -fmessage-length=0 -mcpu=cortex-a9\"</p>\n\n<p>The Target is running Linux and I am loading the binary via winscp over Ethernet.</p>\n"}, {"tags": ["c", "arrays", "function-calls"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1508926477, "post_id": 46929646, "comment_id": 80806210, "body": "<code>y[i - 1];</code> access <code>y[-1]</code> if <code>i == 0</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1508926497, "post_id": 46929646, "comment_id": 80806219, "body": "How and why did you think <code>void read(int)</code> would be equal to <code>void read(int k[MAX])</code>? Perhaps you should take a few steps back, and <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">read a couple of good beginners books</a>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508926898, "post_id": 46929646, "comment_id": 80806481, "body": "unrelated : <code>gem = som &#47; 7;         return gem;</code> --&gt; <code>gem = som &#47; 7.;           return gem;</code> (or <code>gem = (double)som &#47; MAX;           return gem;</code>) and move after for-loop."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1508926385, "creation_date": 1508926385, "answer_id": 46929682, "question_id": 46929646, "link": "https://stackoverflow.com/questions/46929646/trying-to-read-integer-with-scanf-in-array/46929682#46929682", "title": "trying to read integer with scanf in array", "body": "<p><em>When in doubt, check the data type!!</em></p>\n\n<p>In your code, the function call</p>\n\n<pre><code>  read(temp[MAX]);   //trying to pass an int type \n</code></pre>\n\n<p>is wrong. The function accepts an <code>int *</code>.</p>\n\n<p>You need to pass the pointer to the beginning of the array, like</p>\n\n<pre><code>  read(temp);\n</code></pre>\n\n<p>That said, <code>temp[MAX]</code> is already off-by-one, causing <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>Also, your loop controller variable usage is bit odd. You can simply use like</p>\n\n<pre><code>  for (int i = 0; i &lt; MAX; i++)\n</code></pre>\n\n<p>and then, use <code>i</code> as the iterator (indexing).</p>\n"}, {"tags": [], "owner": {"reputation": 233, "user_id": 8392085, "user_type": "registered", "profile_image": "https://graph.facebook.com/1138510539583074/picture?type=large", "display_name": "Dadhich Sourav", "link": "https://stackoverflow.com/users/8392085/dadhich-sourav"}, "is_accepted": false, "score": 0, "last_activity_date": 1508928876, "creation_date": 1508928876, "answer_id": 46930538, "question_id": 46929646, "link": "https://stackoverflow.com/questions/46929646/trying-to-read-integer-with-scanf-in-array/46930538#46930538", "title": "trying to read integer with scanf in array", "body": "<p>Generally,Parameters are always passed by value in C. Therefore, in the above code, value of read(temp[MAX]); is not modified using the function. So how do we modify the value of a local variable of a function inside another function. Pointer is the solution to such problems. Using pointers, we can modify a local variable of a function inside another function. We only get the effect of pass by reference using pointers.</p>\n"}], "owner": {"reputation": 27, "user_id": 8830746, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8029d749977ec6fed5b40e0e40a9b1ac?s=128&d=identicon&r=PG&f=1", "display_name": "reyntjensm", "link": "https://stackoverflow.com/users/8830746/reyntjensm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508928876, "creation_date": 1508926265, "last_edit_date": 1508927229, "question_id": 46929646, "link": "https://stackoverflow.com/questions/46929646/trying-to-read-integer-with-scanf-in-array", "title": "trying to read integer with scanf in array", "body": "<p>I made some code to compare temperature of the week.</p>\n\n<p>I made two functions, one to write to the array, other one is to calculate average temp. It compiles without errors. As soon as I enter my first number the app crashes and I get this error in the stdio.h lib :</p>\n\n<blockquote>\n  <p>Exception thrown at 0x533C742E (ucrtbased.dll) in 7.3.exe: 0xC0000005: Access violation writing location 0xCCCCCCCC.</p>\n</blockquote>\n\n<p>I made a similar exercise without functions and it was working perfect.\nHope you guys can help me out. Here is my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define MAX 7\n#define _NO_CRT_STDIO_INLINE\nvoid read(int);\nfloat gem(int);\n\nint main(void)\n{\n    float x = 0;\n    int temp[MAX];\n    read(temp[MAX]);\n    x = gem(temp[MAX]);\n    printf(\"%f\", x);\n}\n\nvoid read(int k[MAX])\n{\n    for (int i = 1; i &lt; 8; i++)\n    {\n        printf(\"geef de temp voor dag %d \", i);\n        scanf_s(\"%d%*c\", &amp;k[i-1]);\n    }\n}\n\nfloat gem(int y[MAX])\n{\n    int som = 0;\n    float gem = 0;\n    for (int i = 0; i &lt; 8; i++)\n    {\n        som += y[i - 1];\n        gem = som / 7;\n        return gem;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "types", "casting"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1508925670, "post_id": 46929333, "comment_id": 80805655, "body": "<code>argv[1]</code> is a <code>char*</code>, and casting a <code>char*</code> to a <code>double</code> doesn&#39;t make sense. <i>Casting</i> is not the same thing as <i>converting</i>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1508925803, "post_id": 46929333, "comment_id": 80805760, "body": "@MichaelWalz - actually a cast is a type of conversion.    The issue here is that converting a <code>char *</code> to a <code>float</code> (or <code>double</code>) is not the same as interpreting and parsing a string to obtain a <code>float</code>.   The latter is what <code>atof()</code> does."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1508925828, "post_id": 46929333, "comment_id": 80805776, "body": "@Peter yes, that&#39;s a better explanation."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508925900, "post_id": 46929333, "comment_id": 80805827, "body": "@MichaelWalz - I thought so too  ;)"}, {"owner": {"reputation": 31, "user_id": 7452378, "user_type": "registered", "profile_image": "https://graph.facebook.com/1222371504549353/picture?type=large", "display_name": "gotoat", "link": "https://stackoverflow.com/users/7452378/gotoat"}, "edited": false, "score": 0, "creation_date": 1517612223, "post_id": 46929333, "comment_id": 84181373, "body": "This is a plain C question not a C/C++ question."}], "answers": [{"tags": [], "owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "is_accepted": false, "score": 0, "last_activity_date": 1508927357, "creation_date": 1508927357, "answer_id": 46930014, "question_id": 46929333, "link": "https://stackoverflow.com/questions/46929333/char-argv-to-floating-point-type-casting-in-plain-c/46930014#46930014", "title": "char *argv[] to floating point type casting in plain C", "body": "<p>The problem you are seeing is related to cast/conversion. In the second line - where you are getting error - you need to convert the string to <code>double</code>, but you are not - you are just casting the value, i.e. \"telling the compiler that what you have there is a <code>double</code>\", which is not.</p>\n\n<p>Casting works in C for similar types - <code>int</code> to <code>float</code>, <code>short</code> to <code>double</code>, <code>float</code> to <code>long</code>, <code>char</code> to <code>int</code>. Of course, you might lose precision in some of the conversions there. However, you can't, for instance, convert a <code>int []</code> to <code>int</code> (actually, you might, but you certainly have unexpected results) because one is an array and the other is a single variable.</p>\n\n<p>To make it work, you should use <code>atod</code> function. Check <a href=\"https://stackoverflow.com/questions/10605653/converting-char-to-float-or-double\">this post</a> for details.</p>\n"}], "owner": {"reputation": 31, "user_id": 7452378, "user_type": "registered", "profile_image": "https://graph.facebook.com/1222371504549353/picture?type=large", "display_name": "gotoat", "link": "https://stackoverflow.com/users/7452378/gotoat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 736, "favorite_count": 0, "closed_date": 1509032249, "answer_count": 1, "score": -2, "last_activity_date": 1560900967, "creation_date": 1508925296, "last_edit_date": 1560900967, "question_id": 46929333, "link": "https://stackoverflow.com/questions/46929333/char-argv-to-floating-point-type-casting-in-plain-c", "closed_reason": "Duplicate", "title": "char *argv[] to floating point type casting in plain C", "body": "<p>I am trying to convert argv[1] to a floating point value but I end up with an compilation error. Here is my code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char *argv[])\n{\n\n        double circleArea = 3.14159 * atof(argv[1]) * atof(argv[1]); //this works\n\n        double circleArea = 3.14159 * (double) argv[1] * (double) argv[1]; //this does not\n\n        return 0;\n\n}`\n</code></pre>\n\n<p>Why does the first statement compile and the second one does not? Should not the <code>(double) argv[1]</code> be just as valid as <code>atof(argv[1])</code>? I want to be able to do this in plain C not C++.</p>\n\n<p>Update: These are the errors I get: </p>\n\n<pre><code>circleArea.c: In function \u2018main\u2019:\ncircleArea.c:9:2: error: pointer value used where a floating point value was expected\n  double area = 3.14159 * (double) argv[1] * (double) argv[1]; //this does not\n  ^~~~~~\ncircleArea.c:9:2: error: pointer value used where a floating point value was expected\n</code></pre>\n"}, {"tags": ["c", "pointers", "recursion", "matrix", "memory-management"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1508925279, "post_id": 46929161, "comment_id": 80805348, "body": "That probably means that <code>Minor</code> is <code>NULL</code>, probably because <code>Create2DMatrixCmplx(len, len)</code> returned <code>NULL</code>. You need to debug this with your debugger. There is not enough code here, we can&#39;t help much more. You don&#39;t know how to use your debugger? Well, then it&#39;s the perfect moment to start learning. BTW: you probbaly need to free the matrice instances <code>Matrix</code> and <code>Minor</code> after each iteration."}, {"owner": {"reputation": 1432, "user_id": 3764197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wBhLD.jpg?s=128&g=1", "display_name": "dieKoderin", "link": "https://stackoverflow.com/users/3764197/diekoderin"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508925446, "post_id": 46929161, "comment_id": 80805501, "body": "@MichaelWalz Minor is not empty. I am sure. And I know how to debug. There problem must be something else"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508925507, "post_id": 46929161, "comment_id": 80805540, "body": "Without <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> we can&#39;t do much."}, {"owner": {"reputation": 1432, "user_id": 3764197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wBhLD.jpg?s=128&g=1", "display_name": "dieKoderin", "link": "https://stackoverflow.com/users/3764197/diekoderin"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508925599, "post_id": 46929161, "comment_id": 80805605, "body": "@MichaelWalz what is needed here?  Create2DMatrixCmplx(len, len)?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1508925629, "post_id": 46929161, "comment_id": 80805630, "body": "<code>Matrix = A;</code> probably doesn&#39;t do what you think it does. It&#39;s only copying a pointer, not the matrix contents."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1508925727, "post_id": 46929161, "comment_id": 80805699, "body": "@Mary a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is needed here."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1508926861, "post_id": 46929161, "comment_id": 80806453, "body": "Even without an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, there are at least three problems with the code: (1) The memory allocated by the two calls to <code>Create2DMatrixCmplx</code> is never freed (do you have a function that frees a 2D matrix?); (2) The line <code>Matrix = A;</code> overwrites the pointer to one of the matrices allocated by <code>Create2DMatrixCmplx</code> (you probably need to call a function to copy the matrix contents of <code>A</code> to <code>Matrix</code> instead); (3) the variable <code>int c[100];</code> is never used, and quite large for a recursive function (but perhaps the compiler will be kind to you and not allocate any space for it)."}, {"owner": {"reputation": 1432, "user_id": 3764197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wBhLD.jpg?s=128&g=1", "display_name": "dieKoderin", "link": "https://stackoverflow.com/users/3764197/diekoderin"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1508927299, "post_id": 46929161, "comment_id": 80806720, "body": "@IanAbbott (1) I take care of Matrix &quot;A&quot; after this function, but I am using &quot;Minor&quot; and &quot;Matrix&quot; here. I am not sure when I can free them. I was doing it right before the &quot;return&quot; but then I thought maybe this is causing my problem and removed it (2) I did add a function to copy the content. but I have error in &quot;Writing&quot; not &quot;Reading&quot; (3) Thanks for the Tip. removed it."}, {"owner": {"reputation": 1432, "user_id": 3764197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wBhLD.jpg?s=128&g=1", "display_name": "dieKoderin", "link": "https://stackoverflow.com/users/3764197/diekoderin"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1508933063, "post_id": 46929161, "comment_id": 80810632, "body": "@IanAbbott I edited the question."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1509010683, "post_id": 46929161, "comment_id": 80848688, "body": "Where are the variables <code>c1</code>, <code>c2</code>, <code>O</code> and <code>l</code> defined? Should <code>l-1</code> in the recursive call to <code>determinantC</code> be <code>len-1</code>?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1509011524, "post_id": 46929161, "comment_id": 80849338, "body": "It&#39;s probably also worth mentioning that this algorithm is completely impractical for large matrices. You should probably find the determinant by Gaussian elimination instead."}], "owner": {"reputation": 1432, "user_id": 3764197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wBhLD.jpg?s=128&g=1", "display_name": "dieKoderin", "link": "https://stackoverflow.com/users/3764197/diekoderin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1509011156, "creation_date": 1508924838, "last_edit_date": 1509011156, "question_id": 46929161, "link": "https://stackoverflow.com/questions/46929161/access-violation-writing-location-0x00000000-pointers-in-recursive-function", "title": "Access violation writing location 0x00000000 pointers in recursive function", "body": "<p>This is my code calculating the determinant of a Matrix of complex numbers. I have to define matrices like this(double pointer) because I am working with a really old project with C.(dont ask why)</p>\n\n<pre><code>int i, j, k, c1, c2;\n\n\ntypedef struct {\n    double re;\n    double im;\n} cmplx;\n\n\ncmplx** Create2DMatrixCmplx(int d1, int d2)\n{\n    cmplx **matCC = (cmplx**)malloc(d1 * sizeof(cmplx*));\n\n    for (i = 0; i &lt; d1; i++)\n        matCC[i] = ((cmplx*)malloc(d2 * sizeof(cmplx)));\n\n    if ( matCC == NULL )\n    {\n        printf(\"Error: out of memory.\\n\");\n        return;\n    }\n    return matCC;\n}\n\n\n\nvoid matrixCAssign(cmplx** a1, cmplx** a2, int l1, int l2)\n{\n    for (i = 0; i &lt; l1; i++)\n        for (j = 0; j &lt; l2; j++)    \n            a1[i][j] = a2[i][j];\n}\n\n\ncmplx determinantC(cmplx **A, int len)\n{\n    cmplx det, temp;\n    cmplx** Matrix =  Create2DMatrixCmplx(len, len);\n    cmplx** Minor =  Create2DMatrixCmplx(len, len);\n    matrixCAssign( Matrix, A, len, len );\n\n    if(len == 1)\n    {\n        det = Matrix[0][0];\n    }\n    else if(len == 2)\n    {\n        det = (Matrix[0][0] * Matrix[1][1]) - (Matrix[0][1] * Matrix[1][0]));\n    }\n    else\n    {\n        for(i = 0 ; i &lt; len ; i++)\n        {\n            c1 = 0, c2 = 0;\n            for(j = 0 ; j &lt; len ; j++)\n            {\n                for(k = 0 ; k &lt; len ; k++)\n                {\n                    if(j != 0 &amp;&amp; k != i)\n                    {\n                        Minor[c1][c2] = Matrix[j][k];\n                        c2++;\n                        if( c2 &gt; len-2 )\n                        {\n                            c1++;\n                            c2=0;\n                        }\n                    }\n                }\n            }\n\n            temp = determinantC(Minor,len-1);\n            det +=  ( Matrix[0][i] * temp) * O;\n\n            O = -1 * O;\n        }\n    }\n\n    return det;\n}\n\nmain()\n{\n    cmplx **A= Create2DMatrixCmplx(1024, 1024);\n    // set data to A\n    cmplx det = determinantC( A, 1024 );\n}\n</code></pre>\n\n<p>I get Writing Access error in this line:</p>\n\n<blockquote>\n  <p>Minor[c1][c2] = Matrix[j][k];</p>\n</blockquote>\n\n<p>when the error happen, the values are:</p>\n\n<blockquote>\n  <p>c1=337,    c2=338,    len=974,</p>\n</blockquote>\n\n<p>\"Minor\" dimentions are len*len in each iteration and c1, c2 values are smaller.</p>\n\n<p>So I guess the problem must be with pointers. I am making a new instance of \"cmplx** Matrix\" in each iteration but I am calling the function with the pointer type. Do I get a new instance of the object when I call it with pointer? If so why is it no problem in iterations before? Value of len at the begining is 1024.</p>\n\n<p>Can somebody help me find the problem? I can not see it. </p>\n"}, {"tags": ["c", "xor"], "comments": [{"owner": {"reputation": 3150, "user_id": 5660689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f9eb32e09617459b856d14945faf70d?s=128&d=identicon&r=PG&f=1", "display_name": "nadavvadan", "link": "https://stackoverflow.com/users/5660689/nadavvadan"}, "edited": false, "score": 2, "creation_date": 1508924865, "post_id": 46929139, "comment_id": 80805051, "body": "loop through the array and use the <code>^</code> xor operator..?"}, {"owner": {"reputation": 1, "user_id": 8830608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c21934392206242e7b060d92d4690d?s=128&d=identicon&r=PG&f=1", "display_name": "Royce royce", "link": "https://stackoverflow.com/users/8830608/royce-royce"}, "edited": false, "score": 0, "creation_date": 1508925197, "post_id": 46929139, "comment_id": 80805282, "body": "No the post is about two integers.  If I loop through the array, each elements of  the array will xor with 1 ( for example)."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8830608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c21934392206242e7b060d92d4690d?s=128&d=identicon&r=PG&f=1", "display_name": "Royce royce", "link": "https://stackoverflow.com/users/8830608/royce-royce"}, "edited": false, "score": 0, "creation_date": 1508925761, "post_id": 46929290, "comment_id": 80805723, "body": "But in this case, I xor all the elements by 1..256 if I am not wrong.  For example; I can represent 1 as <code>unsigned char one[] = { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,&zwnj;&#8203;0x00,0x00,0x00,0x01}&zwnj;&#8203;;</code> , So I think I can xor these two array. However, I  do not know how I can increment the array by 1."}, {"owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "reply_to_user": {"reputation": 1, "user_id": 8830608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c21934392206242e7b060d92d4690d?s=128&d=identicon&r=PG&f=1", "display_name": "Royce royce", "link": "https://stackoverflow.com/users/8830608/royce-royce"}, "edited": false, "score": 0, "creation_date": 1508925979, "post_id": 46929290, "comment_id": 80805879, "body": "Here you just XOR byte by byte through the whole array. I don&#39;t get your comment, could you please clarify what you want? Maybe a sample input/output in your question would help."}, {"owner": {"reputation": 1, "user_id": 8830608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c21934392206242e7b060d92d4690d?s=128&d=identicon&r=PG&f=1", "display_name": "Royce royce", "link": "https://stackoverflow.com/users/8830608/royce-royce"}, "edited": false, "score": 0, "creation_date": 1508928680, "post_id": 46929290, "comment_id": 80807591, "body": "Yes, I apologize for my bad clarification, I have edited my question"}], "tags": [], "owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "is_accepted": false, "score": 0, "last_activity_date": 1508925181, "creation_date": 1508925181, "answer_id": 46929290, "question_id": 46929139, "link": "https://stackoverflow.com/questions/46929139/how-to-xor-char-array-with-an-integer-in-c/46929290#46929290", "title": "How to XOR char array with an integer in C", "body": "<p>Something like:</p>\n\n<pre><code>int i;\nfor (i = 0; i &lt; length; i++) {\n    cryptotext[i] = ciphertext[i] ^ (i%256);\n}\n</code></pre>\n\n<p>Note that you can use only one array if you don't want to keep you plain text:</p>\n\n<pre><code>ciphertext[i] ^= (i%256);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 402, "user_id": 8805085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a35bfb24036bd5fcd7cab953e120e12?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh Vyas", "link": "https://stackoverflow.com/users/8805085/jayesh-vyas"}, "is_accepted": false, "score": 0, "last_activity_date": 1508925553, "creation_date": 1508925553, "answer_id": 46929403, "question_id": 46929139, "link": "https://stackoverflow.com/questions/46929139/how-to-xor-char-array-with-an-integer-in-c/46929403#46929403", "title": "How to XOR char array with an integer in C", "body": "<p>XOR performs the following operations. please see below.</p>\n\n<pre><code>x   y    XOR\n------------\n0   0     0\n1   0     1\n0   1     1\n1   1     0\n</code></pre>\n\n<p>You can't xor the entire array in one piece. you need to loop through the array and transform it character by character.</p>\n\n<p>perform loop through the array and perform the XOR Operation.</p>\n"}], "owner": {"reputation": 1, "user_id": 8830608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6c21934392206242e7b060d92d4690d?s=128&d=identicon&r=PG&f=1", "display_name": "Royce royce", "link": "https://stackoverflow.com/users/8830608/royce-royce"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1839, "favorite_count": 0, "closed_date": 1508935599, "answer_count": 2, "score": 0, "last_activity_date": 1508928436, "creation_date": 1508924758, "last_edit_date": 1508928436, "question_id": 46929139, "link": "https://stackoverflow.com/questions/46929139/how-to-xor-char-array-with-an-integer-in-c", "closed_reason": "Duplicate", "title": "How to XOR char array with an integer in C", "body": "<p>I am trying to implement a cryptographic algorithm in C. I have an unsigned char array;</p>\n\n<pre><code> unsigned char ciphertext[] = { 0xA5, 0xB2, 0x3C, 0xAB, 0x03, 0xF1, 0xD3, 0x1C, 0x7F, 0xAD, 0x37, 0xA8, 0x8C, 0x8B, 0xCD, 0x90, 0xD4, 0xC2, 0x30, 0xAB, 0xD2, 0x3F, 0x3D, 0xAF, 0x58, 0x94, 0x1F, 0x50, 0xAF, 0xA2, 0xCE, 0x01 };\n</code></pre>\n\n<p>I need to XOR the char array with all values from 1 to 256. How can I do it in C? Thank you in advance.\n ED\u0130T:\n  I want to XOR my char array with;</p>\n\n<pre><code>unsigned char [] = { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01};\nunsigned char two = { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02};\nunsigned char three[] = { 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03};\n</code></pre>\n\n<p>And so on... That is the reason why I can not xor through each elements. It would be something different. </p>\n"}, {"tags": ["c", "blas", "openblas", "cblas"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508924204, "post_id": 46928891, "comment_id": 80804569, "body": "Questions about working code are probably more fitting on Code Review."}, {"owner": {"reputation": 197, "user_id": 6053483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/933627536757039/picture?type=large", "display_name": "Valentin Mercier", "link": "https://stackoverflow.com/users/6053483/valentin-mercier"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508925522, "post_id": 46928891, "comment_id": 80805550, "body": "What is code review ?"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508925609, "post_id": 46928891, "comment_id": 80805613, "body": "<a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 197, "user_id": 6053483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/933627536757039/picture?type=large", "display_name": "Valentin Mercier", "link": "https://stackoverflow.com/users/6053483/valentin-mercier"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508925708, "post_id": 46928891, "comment_id": 80805687, "body": "thank you, do you know if i can transfer this post ?"}, {"owner": {"reputation": 197, "user_id": 6053483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/933627536757039/picture?type=large", "display_name": "Valentin Mercier", "link": "https://stackoverflow.com/users/6053483/valentin-mercier"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508926302, "post_id": 46928891, "comment_id": 80806086, "body": "There are no blas , cblas or open blas on it :/"}], "answers": [{"tags": [], "owner": {"reputation": 197, "user_id": 6053483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/933627536757039/picture?type=large", "display_name": "Valentin Mercier", "link": "https://stackoverflow.com/users/6053483/valentin-mercier"}, "is_accepted": true, "score": 1, "last_activity_date": 1509089575, "creation_date": 1509089575, "answer_id": 46969760, "question_id": 46928891, "link": "https://stackoverflow.com/questions/46928891/blas-dgemv-slower-than-manual-implementation/46969760#46969760", "title": "Blas dgemv slower than manual implementation", "body": "<p>Ok the point is that my blas implementation is faster for big matrix but the overhead of blas slow down the things for little matrix !</p>\n"}], "owner": {"reputation": 197, "user_id": 6053483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/933627536757039/picture?type=large", "display_name": "Valentin Mercier", "link": "https://stackoverflow.com/users/6053483/valentin-mercier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 46969760, "answer_count": 1, "score": 1, "last_activity_date": 1509089575, "creation_date": 1508924100, "question_id": 46928891, "link": "https://stackoverflow.com/questions/46928891/blas-dgemv-slower-than-manual-implementation", "title": "Blas dgemv slower than manual implementation", "body": "<p>I'm trying to use BLAS in my c programm to improve the speed of a matrix/vector product.</p>\n\n<p>Manually i had this code :</p>\n\n<pre><code>for (j = 0; j &lt; ann-&gt;hidden; ++j) {\n\n        double delta = 0;\n        //h is known before \n        for (k = 0; k &lt; (h == ann-&gt;hidden_layers-1 ? ann-&gt;outputs : ann-&gt;hidden); ++k) {\n            const double forward_delta = dd[k];\n            const int windex = k * (ann-&gt;hidden + 1) + (j + 1);\n            const double forward_weight = ww[windex];\n            delta += forward_delta * forward_weight;\n        }\n        *d = *o * (1.0-*o) * delta;\n        ++d; ++o;\n    }\n}\n</code></pre>\n\n<p>So i tried to replace this double for by the blas function cblas_dgemv and it look like it :</p>\n\n<pre><code>int n = h == ann-&gt;hidden_layers-1 ? ann-&gt;outputs : ann-&gt;hidden ;\n    int m = ann-&gt;hidden ;\n    double *delta = calloc(m,sizeof(double));\n    cblas_dgemv(CblasColMajor,CblasNoTrans,m,n,1,&amp;ww[1],m,dd,1,0.0,delta,1);\n    for(j=0 ;  j &lt; ann-&gt;hidden; ++j) {\n      *d = *o * (1.0-*o)*delta[j];\n      ++d; ++o;\n\n    }\n    free(delta);\n    }\n</code></pre>\n\n<p>The output value are good.</p>\n\n<p>The problem is that my implementation with BLAS is way slower than the \"manual\" one...</p>\n\n<p>I don't know if it's because i don't use the most optimized function for this calculation or did i do something wrong ?</p>\n"}, {"tags": ["c", "casting", "floating-point", "overflow", "unsigned"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1508924683, "post_id": 46928840, "comment_id": 80804908, "body": "To be precise, this is not casting. Assignment causes <i>implicit conversion</i>."}, {"owner": {"reputation": 337, "user_id": 5358265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIQwd.png?s=128&g=1", "display_name": "Grant Sanders", "link": "https://stackoverflow.com/users/5358265/grant-sanders"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1508925096, "post_id": 46928840, "comment_id": 80805217, "body": "Is there any difference between casting and implicit conversion that would affect the result in this scenario?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1508925264, "post_id": 46928840, "comment_id": 80805333, "body": "Casting is an <i>cast operation</i>, which results in <i>explicit conversion</i>. Same rules are used for implicit and explicit conversions, but they are different things in standard."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1508930134, "post_id": 46928840, "comment_id": 80808598, "body": "You can get <code>-2147483648</code> because this is what the instruction of your processor produces, or you can get something else on a different processor, or you can get strange results because your processor is using a 64-bit signed conversion instruction to implement what is a 32-bit unsigned conversion in the source code. Being undefined behavior, the compiler does not have to be consistent. See <a href=\"http://blog.frama-c.com/index.php?post/2013/10/09/Overflow-float-integer\" rel=\"nofollow noreferrer\">blog.frama-c.com/index.php?post/2013/10/09/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": false, "score": 2, "last_activity_date": 1508924922, "last_edit_date": 1508924922, "creation_date": 1508924471, "answer_id": 46929035, "question_id": 46928840, "link": "https://stackoverflow.com/questions/46928840/what-happens-when-casting-floating-point-types-to-unsigned-integer-types-when-th/46929035#46929035", "title": "What happens when casting floating point types to unsigned integer types when the value would overflow?", "body": "<p>In both cases value is out of range, so it's undefined behaviour.</p>\n\n<blockquote>\n  <h3>6.3.1.4 Real floating and integer</h3>\n  \n  <ol>\n  <li>When a finite value of real floating type is converted to an integer type other than <code>_Bool</code>,\n  the fractional part is discarded (i.e., the value is truncated toward zero). If the value of\n  the integral part cannot be represented by the integer type, the behavior is undefined. <sup>61)</sup></li>\n  </ol>\n  \n  <p><sub>61) The remaindering operation performed when a value of integer type is converted to unsigned type\n  need not be performed when a value of real floating type is converted to unsigned type. Thus, the\n  range of portable real floating values is (\u22121, U<em>type</em>_MAX+1).</sub></p>\n</blockquote>\n\n<p>To make this well defined code, you should check that value is within possible range before doing the conversion.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1509061180, "last_edit_date": 1509061180, "creation_date": 1508955076, "answer_id": 46939352, "question_id": 46928840, "link": "https://stackoverflow.com/questions/46928840/what-happens-when-casting-floating-point-types-to-unsigned-integer-types-when-th/46939352#46939352", "title": "What happens when casting floating point types to unsigned integer types when the value would overflow?", "body": "<blockquote>\n  <p>What happens when casting floating point types to unsigned integer types when the value would overflow (?)</p>\n</blockquote>\n\n<p><em>undefined behavior</em> (UB)</p>\n\n<hr>\n\n<p>In addition <a href=\"https://stackoverflow.com/a/46929035/2410359\">@user694733</a> fine answer, to prevent <em>undefined behavior</em> caused by out of range <code>float</code> to <code>unsigned</code> code can first test the <code>float</code> value.</p>\n\n<p>Yet testing for the range is tricky, for unsigned types and especially for signed types.  The detail is that all conversions and constants prior to the integer conversion must be <em>exact</em>.   FP math near the limits needs to be exact too.</p>\n\n<p>Examples:</p>\n\n<p>Conversion to a 32-bit unsigned is valid for the range -0.999... to 4294967295.999....</p>\n\n<p>Conversion to a 32-bit 2's complement signed is valid for the range -2147483648.999... to  2147483647.999....</p>\n\n<hr>\n\n<pre><code>// code uses FP constants that are exact powers-of-2 to insure their exact encoding.\n\n// Form a FP constant that is exactly UINT_MAX + 1\n#define FLT_UINT_MAX_P1 ((UINT_MAX/2 + 1)*2.0f)\n\nbool convert_float_to_unsigned(unsigned *u, float f) {\n  if (f &gt; -1.0f &amp;&amp; f &lt; FLT_UINT_MAX_P1) {\n    *u = (unsigned) f;\n    return true;\n  }\n  return false;  // out of range\n}\n\n\n#define FLT_INT_MAX_P1 ((INT_MAX/2 + 1)*2.0f)\nbool convert_float_to_int(int *i, float f) {\n  #if INT_MIN == -INT_MAX\n  // Rare non 2's complement integer\n  if (fabsf(f) &lt; FLT_INT_MAX_P1) {\n    *i = (int) f;\n    return true;\n  }\n  #else\n  // Do not use f + 1 &gt; INT_MIN as it may incur rounding\n  // Do not use f &gt; INT_MIN - 1.0f as it may incur rounding\n  // f - INT_MIN is expected to be exact for values near the limit\n  if (f - INT_MIN &gt; -1 &amp;&amp; f &lt; FLT_INT_MAX_P1) {\n    *i = (int) f;\n    return true;\n  }\n  #endif \n  return false;  // out of range\n}\n</code></pre>\n\n<hr>\n\n<p>Pedantic code would take additional steps to cope with the rare <code>FLT_RADIX 10</code>.</p>\n\n<p><code>FLT_EVAL_METHOD</code>, which allows for <code>float</code> math be calculated at higher precision, may play a role, yet so far I do not see it negatively affecting the above solution.</p>\n"}], "owner": {"reputation": 337, "user_id": 5358265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIQwd.png?s=128&g=1", "display_name": "Grant Sanders", "link": "https://stackoverflow.com/users/5358265/grant-sanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 46939352, "answer_count": 2, "score": 2, "last_activity_date": 1578442697, "creation_date": 1508923938, "last_edit_date": 1578442697, "question_id": 46928840, "link": "https://stackoverflow.com/questions/46928840/what-happens-when-casting-floating-point-types-to-unsigned-integer-types-when-th", "title": "What happens when casting floating point types to unsigned integer types when the value would overflow?", "body": "<p>I'm wondering what happens when casting from a floating point type to an unsigned integer type in C when the value can't be accurately represented by the integer type in question. Take for instance</p>\n\n<pre><code>func (void)\n{\nfloat a = 1E10;\nunsigned b = a;\n}\n</code></pre>\n\n<p>The value of <code>b</code> I get on my system (with <code>unsigned</code> on my system being able to represent values from 0 to 2<sup>32</sup>-1) is <code>1410065408</code>. This seems sensible to me because it's simply the lowest order bits of the result of the cast.</p>\n\n<p>I believe the behavior of operations such as these is undefined by the standard. Am I wrong? What can I expect in practice if I do things like this?</p>\n\n<p>Also, what happens with signed types? If <code>b</code> is of type <code>int</code>, I get <code>-2147483648</code>, which doesn't really make sense to me.</p>\n"}, {"tags": ["c++", "c", "matlab", "dll", "labview"], "comments": [{"owner": {"reputation": 3211, "user_id": 12470196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YQal2.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/12470196/max"}, "edited": false, "score": 0, "creation_date": 1576409389, "post_id": 46928129, "comment_id": 104883863, "body": "It is better to generate C code from Matlab and than link &amp; compile your wrapper code together with the Matlab-generated C code into a single DLL, which you than call from LabVIEW. You may need to link some Matlab-specific header functions to make this run (but the compiler will complain;) )"}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5339646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fc833ebee2ca42d9b637dd87cf7af2d?s=128&d=identicon&r=PG&f=1", "display_name": "slacker", "link": "https://stackoverflow.com/users/5339646/slacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1509544107, "creation_date": 1509544107, "answer_id": 47056417, "question_id": 46928129, "link": "https://stackoverflow.com/questions/46928129/create-dll-wrapper-in-c-code-for-matlab-labview-interfacing/47056417#47056417", "title": "Create DLL wrapper in C code for Matlab/LabView interfacing", "body": "<p>For attempt #2 did you add the reference to the matlab dll in your project?</p>\n"}], "owner": {"reputation": 71, "user_id": 5575776, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1b65e8b5093e36a010bdbf56de1cd1f0?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge S", "link": "https://stackoverflow.com/users/5575776/jorge-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 658, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1509544107, "creation_date": 1508921937, "last_edit_date": 1508946477, "question_id": 46928129, "link": "https://stackoverflow.com/questions/46928129/create-dll-wrapper-in-c-code-for-matlab-labview-interfacing", "title": "Create DLL wrapper in C code for Matlab/LabView interfacing", "body": "<p>I want to build with Matlab Compiler SDK a DLL that can be called from LabView. As you may know, the library generated by the Matlab Compiler SDK (lets call it 'my_dll.dll'/'my_dll.lib') is not directly callable by LabView, as it uses non-standard data types ( mxArrays ).</p>\n\n<p>Thus, my plan is to generate in C a wrapper code. This wrapper code, whenever it is called, will execute the needed routines of the Matlab Runtime Engine and call the functions generated in 'my_dll.dll'. This wrapper code would be basically extremely similar to any other executable or application using the previously generated DLL, following the guidelines of <a href=\"https://ch.mathworks.com/help/releases/R2017b/compiler_sdk/cxx/integrate-a-cc-shared-library-into-an-application.html\" rel=\"nofollow noreferrer\">this</a>. </p>\n\n<p>Code example:</p>\n\n<pre><code>int main(double *input){\n\n    /* Call the mclInitializeApplication routine. Make sure that the application\n * was initialized properly by checking the return status. This initialization\n * has to be done before calling any MATLAB API's or MATLAB Compiler SDK generated\n * shared library functions. */\n\n   mclmcrInitialize();\n\n   if( !mclInitializeApplication(NULL,0) )\n   {\n       fprintf(stderr, \"Could not initialize the application.\\n\");\n       return -1;\n   }\n\nreturn mclRunMain((mclMainFcnType)wrapper_main,0,NULL);\n\n}\n\n\ndouble wrapper_main(int argc, char **argv) {\n\n//declare variables\ndouble *out; // Here my output will be stored\ndouble number = 16; // This is the input number\n\n// Initialise library\ndll_layer1Initialize();\n\n//Create two pointers of mxArray type to store inputs and outputs\nmxArray *in1_ptr;\nmxArray *out1_ptr = NULL;\n\n//Allocate input pointer to a 1 by 1 double, real matrix\nin1_ptr = mxCreateDoubleMatrix(1, 1, mxREAL);\n\n//Move the data from the input to the pointer\nmemcpy(mxGetPr(in1_ptr), &amp;number, 1 * sizeof(double));\n\n//Pass values to mlfFoo and receive in mxArray type variable\n//mlfFoo is my matlab function. In this case it only performs\n//the square root of the input number.\nmlfFoo(1, &amp;out1_ptr, in1_ptr);\n\nout = mxGetPr(out1_ptr);\n\nprintf(\"\\n Result is: %f\", *out);\n\n//Terminate foo implementation\ndll_layer1Terminate();\nmclTerminateApplication();\n\nreturn 0;\n}\n</code></pre>\n\n<p>However, in order to call this C wrapper code from LabView, I would have to generate a new DLL, and here comes the problem, since I do not find the way to do this. The following picture summarizes what I want to do.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aVefV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aVefV.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Things that I have tried:</p>\n\n<p>1 - Compile the C wrapper code and my_dll.lib to generate a wrapper.dll with the Matlab Compiler SDK 'mbuild' command. This only creates an executable, but not a dll. Maybe I am missing something.</p>\n\n<p>2 - Use Visual Studio to create the DLL. The problem I am facing here is that when I am going to build the project it gives me plenty of errors, like: </p>\n\n<blockquote>\n  <p>Error   LNK2019 unresolved external symbol _mclRunMain_proxy referenced in function \"public: static double __cdecl Wrapper::Functions::wrapper_sqrt(double)\" (?wrapper_sqrt@Functions@Wrapper@@SANN@Z)  Win32Project1   ...\\visual studio 2015\\Projects\\Win32Project1\\Win32Project1\\wrapper.obj 1   </p>\n</blockquote>\n\n<p>Maybe my error here is that I am not properly linking the Matlab libraries, in which case I do not know how to fix it.</p>\n\n<p>Other possibilities to run Matlab code in LabView is the use of MathScript node, Matlab Script node or Matlab Coder(for creating also a DLL) however, I am discarding those options for several other reasons.</p>\n\n<p>Thank you beforehand for your help.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1508921720, "post_id": 46927950, "comment_id": 80802818, "body": "Use pen and paper to write down variables, arrays &amp; their values and the pointers. There are just too many pointers to be followed for me to explain it and I leave it to you."}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1508922177, "creation_date": 1508922177, "answer_id": 46928211, "question_id": 46927950, "link": "https://stackoverflow.com/questions/46927950/pointer-to-two-dimension-array/46928211#46928211", "title": "pointer to two-dimension array", "body": "<p>There are three paths of interpretation of  the same value - the starting address of the memory extent occupied by the array. So dereferencing the value casted to <code>char *</code> you will get the value of the first element of the type <code>char</code> of the array. </p>\n"}, {"tags": [], "owner": {"reputation": 739, "user_id": 8281970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/abHXs.jpg?s=128&g=1", "display_name": "Ketan Mukadam", "link": "https://stackoverflow.com/users/8281970/ketan-mukadam"}, "is_accepted": false, "score": 0, "last_activity_date": 1508925001, "last_edit_date": 1508925001, "creation_date": 1508924666, "answer_id": 46929115, "question_id": 46927950, "link": "https://stackoverflow.com/questions/46927950/pointer-to-two-dimension-array/46929115#46929115", "title": "pointer to two-dimension array", "body": "<p>You can think of an array variable as containing the memory address of its first element. In your case since the array is a 2D array, the \"first element\" t[0] is in-fact pointer to the 'first row'. Note that in terms of memory there is no special storage for element t[0] and t[1], it gets converted to appropriate memory offset, but it helps to think that way.   Hence when you deference the pointer (*t), you get the same value as you would get for the array variable. </p>\n\n<pre><code>t = [0]  --&gt; 'a','b','c'\n    [1]  --&gt; 'd','e','f'\n</code></pre>\n\n<p>Try this <code>printf(\"%p %p %p\\n\", t,*t, t[0]);</code>, you will get same value for all.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4147930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/615f9f68039981f0abeae0e2c537c72d?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/4147930/tom"}, "edited": false, "score": 0, "creation_date": 1508981366, "post_id": 46930054, "comment_id": 80836272, "body": "struct list{ \t\tint item; \t\tstruct list *next; \t\t};"}, {"owner": {"reputation": 1, "user_id": 4147930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/615f9f68039981f0abeae0e2c537c72d?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/4147930/tom"}, "edited": false, "score": 0, "creation_date": 1508981400, "post_id": 46930054, "comment_id": 80836279, "body": "struct list **lpp; \tfor(lpp = &amp;list; *lpp != NULL; lpp = &amp;(*lpp)-&gt;next) \t\t{ \t\tif((*lpp)-&gt;item == i) \t\t\t{ \t\t\t*lpp = (*lpp)-&gt;next; \t\t\tbreak; \t\t\t} \t\t} \t}"}, {"owner": {"reputation": 1, "user_id": 4147930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/615f9f68039981f0abeae0e2c537c72d?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/4147930/tom"}, "edited": false, "score": 0, "creation_date": 1508981640, "post_id": 46930054, "comment_id": 80836336, "body": "in above example, lpp and *lpp are different address, I am confused and look forward to your advice."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 1, "user_id": 4147930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/615f9f68039981f0abeae0e2c537c72d?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/4147930/tom"}, "edited": false, "score": 0, "creation_date": 1508993788, "post_id": 46930054, "comment_id": 80839375, "body": "Sorry for the dely, I&#39;ve been working on my real job... Of course <code>t</code> and <code>*t</code> have different address. Recall a <i>pointer</i> is nothing but a variable that holds <b><i>the address to something else</i></b> as its value. So <code>t</code> is a pointer with its own address, and the value stored at <code>t</code> is the address for something else (i.e. a separate address) which you obtain by dereferencing <code>t</code> (e.g. <code>*t</code>). Take look at <a href=\"http://www.thegeekstuff.com/2011/12/c-pointers-fundamentals\" rel=\"nofollow noreferrer\">What are pointers?</a> and the link at the bottom (Advanced Pointers)."}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1508927460, "creation_date": 1508927460, "answer_id": 46930054, "question_id": 46927950, "link": "https://stackoverflow.com/questions/46927950/pointer-to-two-dimension-array/46930054#46930054", "title": "pointer to two-dimension array", "body": "<p>When you declare the <code>typedef char trgm[3];</code>, then <code>trgm</code> refers to *an array of char [3]`. This is important.</p>\n\n<p>When you declare <code>trgm *t = test</code>, the pointer <code>t</code> is a <em>pointer to array of char [3]</em>. By setting <code>t = test;</code> you make <code>t</code> a pointer that points to the first <em>row</em> of <code>test</code> (essentially equivalent to <code>test[0]</code>. Since an array variable holds (or points to) the first element of <code>test</code>, both <code>t</code> and <code>test</code> point to the same value. Dereferncing the either the pointer <code>t</code> or <code>test</code> (e.g. <code>*t</code> or <code>*test</code>) will access the first element of <code>test</code>.</p>\n\n<p>Now since <code>t</code> is a pointer to array of char [3], it is a pointer with two-levels of indirection and can therefore be dereferenced twice (as can test). Take <code>test[row][col]</code>. Let's look at the pointer equivalent for the array. <code>test can be written as</code></p>\n\n<pre><code>*(*(test + col) + row)\n</code></pre>\n\n<p>(both <code>col</code> and <code>row</code> are <code>0</code> when referencing the first element (e.g. <code>test[0][0]</code>) so the above is simply</p>\n\n<pre><code>*(*(test + 0) + 0)\n</code></pre>\n\n<p><strong>note:</strong> anything plus <code>0</code> is just that thing again, so it simplifies to:</p>\n\n<pre><code>**test\n</code></pre>\n\n<p>For <code>t</code> it is just:</p>\n\n<pre><code>(*t)[col]    /* to index cols 0 - 2 */\n</code></pre>\n\n<p>It too can be rewritten as:</p>\n\n<pre><code>*((*t) + col)\n</code></pre>\n\n<p>With <code>col</code> being zero for the first element, you get</p>\n\n<pre><code>**t\n</code></pre>\n\n<p>However, <code>t</code> by pointing to the first row, allows pointer arithmetic (e.g. <code>t = t + 1;</code>, or just <code>t++</code>) to update <code>t</code> to point to the second row, and so on.</p>\n\n<p>So, in sum, whether you are looking at <code>test</code> or you are looking at <code>t</code>, both initially reference the address for the first element in <code>test</code>, both are (or can be considered) pointers with two levels of indirection, and dereferencing each once, or twice, will still point at the original element in test. You can use <code>t</code> to access all values in your array, for instance:</p>\n\n<pre><code>for (; t &lt; &amp;test[2]; t++)\n    printf (\" %c, %c, %c\\n\", (*t)[0], (*t)[1], (*t)[2]);\nputchar ('\\n');\n</code></pre>\n\n<p>Which will output:</p>\n\n<pre><code> a, b, c\n d, e, f\n</code></pre>\n\n<p>Lastly, there is no need to make <code>test</code> a global variable. Avoid global variables to reduce the chance of name collision. Declare <code>test</code> in <code>main()</code> and pass it pointer to it to any other function it is required.</p>\n\n<p>Putting that altogether, you could do something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef char trgm[3];\n\nint main(void)\n{\n    char test[][3] = {{'a','b','c'},\n                      {'d','e','f'}};\n    trgm *t;\n    t = test;\n    printf(\"%c\\n\",*(char *)t);\n    printf(\"%c\\n\",*(char *)*t);\n    printf(\"%c\\n\",**t);\n\n    for (; t &lt; &amp;test[2]; t++)\n        printf (\" %c, %c, %c\\n\", (*t)[0], (*t)[1], (*t)[2]);\n    putchar ('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/p2x3\na\na\na\na, b, c\nd, e, f\n</code></pre>\n\n<p>Look things over and let me know if you have any further questions.</p>\n"}], "owner": {"reputation": 1, "user_id": 4147930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/615f9f68039981f0abeae0e2c537c72d?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/4147930/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1508927460, "creation_date": 1508921387, "last_edit_date": 1508921428, "question_id": 46927950, "link": "https://stackoverflow.com/questions/46927950/pointer-to-two-dimension-array", "title": "pointer to two-dimension array", "body": "<pre><code>typedef char trgm[3];\n\nchar test[2][3] = {'a','b','c','d','e','f'};\n\nint main(void)\n{\n    trgm *t;\n    t = test;\n    printf(\"%c\\n\",*(char *)t);\n    printf(\"%c\\n\",*(char *)*t);\n    printf(\"%c\\n\",**t);\n    return 0;\n}\n</code></pre>\n\n<p>the output of three printf is same. I don't understand why the t and *t are same? what does complier do internal?</p>\n"}, {"tags": ["c", "double", "fmod"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1508921471, "post_id": 46927868, "comment_id": 80802665, "body": "<code>powl</code> expects and returns values of type <code>long double</code>. You assign the return value to variable of type <code>double</code> only, losing some precision."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1508921631, "post_id": 46927868, "comment_id": 80802768, "body": "@Gerhardh: I don&#39;t think even <code>long double</code> precision is going to help in this case ! ;-)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1508921655, "post_id": 46927868, "comment_id": 80802784, "body": "Replace with repeated calculations. like <a href=\"https://ideone.com/yKFSSE\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 1, "user_id": 4597593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34ab58e2ecbf6496917cd82fa589773?s=128&d=identicon&r=PG&f=1", "display_name": "Iv&#225;n Escalante", "link": "https://stackoverflow.com/users/4597593/iv%c3%a1n-escalante"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508922238, "post_id": 46927868, "comment_id": 80803156, "body": "@BLUEPIXY : Thank you, your solve save my life :D"}, {"owner": {"reputation": 337, "user_id": 974048, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/891a0296a92ece0dd65b218f43c4bf51?s=128&d=identicon&r=PG", "display_name": "Skynight", "link": "https://stackoverflow.com/users/974048/skynight"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1509240863, "post_id": 46927868, "comment_id": 80938636, "body": "@BLUEPIXY Thanks brother! That saved me as well!"}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1508921427, "creation_date": 1508921427, "answer_id": 46927964, "question_id": 46927868, "link": "https://stackoverflow.com/questions/46927868/error-working-with-doubles-and-fmod/46927964#46927964", "title": "Error working with doubles and fmod", "body": "<p><code>1234^79</code> has <a href=\"https://www.wolframalpha.com/input/?i=1234%5E79\" rel=\"nofollow noreferrer\">245 decimal digits</a>.</p>\n\n<p><code>double</code> only has a precision of around 17 decimal digits. </p>\n\n<p>You need to use a little math to reduce this problem to something that doesn't require arbitrary precision (see <a href=\"https://en.wikipedia.org/wiki/Modular_exponentiation\" rel=\"nofollow noreferrer\">Modular Exponentiation</a>).</p>\n\n<p>(Or just use an arbitrary precision math library + brute force if you aren't interested in an efficient solution.)</p>\n"}], "owner": {"reputation": 1, "user_id": 4597593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34ab58e2ecbf6496917cd82fa589773?s=128&d=identicon&r=PG&f=1", "display_name": "Iv&#225;n Escalante", "link": "https://stackoverflow.com/users/4597593/iv%c3%a1n-escalante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508921427, "creation_date": 1508921147, "question_id": 46927868, "link": "https://stackoverflow.com/questions/46927868/error-working-with-doubles-and-fmod", "title": "Error working with doubles and fmod", "body": "<p>Im trying to calculate a power and then a module of big numbers (type double). I want to calcule (1234^79) mod 3337. The result is 901 (Ubuntu's calculator) but function fmod returns 1788.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;tgmath.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid main(){\n\n    double res1;\n    double dou = powl(1234.00,79.00);//function for doubles\n\n    printf(\"Result in double o powl %.3f\\n\",dou);\n    res1=fmod(dou, 3337.00);//doubles\n\n    printf(\"Result in double of fmod %.2f\\n\",res1);\n}\n</code></pre>\n\n<p>What am I doing wrong? Some answer?\nThanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508921626, "post_id": 46927848, "comment_id": 80802764, "body": "What <b>exactly</b> is the requirement? You could limit the length of the string to some fairly big number (e.g. 4000) which is reasonable, because text files rarely have vewry long lines. I also suggest not to use <code>read</code> and <code>write</code> but <code>fread</code> and <code>fwrite</code>, or even <code>fgets</code> if the input is line oriented."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1508921898, "post_id": 46927848, "comment_id": 80802946, "body": "Note: <code>strlen(</code>&quot;Error read\\n&quot;)` is 11, not 10."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508921944, "post_id": 46927848, "comment_id": 80802973, "body": "I don&#39;t think you can &quot;insert&quot; (read) more than 20 chars. <code>read</code> just stops at your buffer size."}, {"owner": {"reputation": 75, "user_id": 8830281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ecc008935e7d9612d5cc3d2e061e55d?s=128&d=identicon&r=PG&f=1", "display_name": "Serus", "link": "https://stackoverflow.com/users/8830281/serus"}, "edited": false, "score": 0, "creation_date": 1508923942, "post_id": 46927848, "comment_id": 80804363, "body": "i have to use read and write..it&#39;s not my chose"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1508924250, "post_id": 46927848, "comment_id": 80804605, "body": "There are plenty of ways to achieve what you want. Simple if validation statement to limit 20 char can solve your problem."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 8830281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ecc008935e7d9612d5cc3d2e061e55d?s=128&d=identicon&r=PG&f=1", "display_name": "Serus", "link": "https://stackoverflow.com/users/8830281/serus"}, "edited": false, "score": 0, "creation_date": 1508924766, "post_id": 46928319, "comment_id": 80804967, "body": "Ok, I have implemented your first solution but I have some questions: You check if the input is more than (19 char + \\n). If yes, what does that read(STDIN_FILENO, &amp;c, 1); ? I mean.. if I will not insert the endline command, what will happen? I don&#39;t see any problem but I don&#39;t know why"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 75, "user_id": 8830281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ecc008935e7d9612d5cc3d2e061e55d?s=128&d=identicon&r=PG&f=1", "display_name": "Serus", "link": "https://stackoverflow.com/users/8830281/serus"}, "edited": false, "score": 0, "creation_date": 1508925240, "post_id": 46928319, "comment_id": 80805313, "body": "<code>read(STDIN_FILENO, &amp;c, 1);</code> reads a single byte (and is discarded). If you don&#39;t enter a newline, your program won&#39;t get an input at all (also <a href=\"https://www.gnu.org/software/libc/manual/html_node/Canonical-or-Not.html\" rel=\"nofollow noreferrer\">see</a>)."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1508922478, "creation_date": 1508922478, "answer_id": 46928319, "question_id": 46927848, "link": "https://stackoverflow.com/questions/46927848/limit-buffer-in-read-function/46928319#46928319", "title": "Limit buffer in read() function", "body": "<blockquote>\n  <p>The code works but I'm not satisfied..there is one problem: The buffer is a 20char but I can insert more than 20 char...why?</p>\n</blockquote>\n\n<p>Because your program can't stop someone inputting more than 20 chars; all it can do is <em>limit</em> that it doesn't overflow the <code>buffer</code> which it already does - <code>read()</code> doesn't read more than the requested bytes. It only <em>appears</em> as if a <code>read()</code> call is reading more than size (20) but acutally read() reads only (upto) 20 chars and the rest is read in the <em>next</em> iteration.</p>\n\n<p>No matter what method you use to read input and/or increase buffer size, this problem of \"extra input\" is always going to be there.\nWhat you can do instead is check if if <code>len</code> is 20 <em>and</em> <code>buffer[19]</code> is not <code>\\n</code>:</p>\n\n<pre><code>   else {\n        write(STDERR_FILENO, buffer, len);\n        /* Read out the left over chars. */\n        if (len == 20 &amp;&amp; buffer[19] != '\\n') {\n            char c;\n            do {\n                read(STDIN_FILENO, &amp;c, 1); /* left out the error checking */\n            } while (c != '\\n');\n        }\n</code></pre>\n\n<p>Or increase the buffer size, say, to 512 bytes and then only look at the first 20 bytes that you're interested in.</p>\n\n<p>Note: Add error checking for <em>all</em> <code>read()</code> and <code>write()</code> calls.</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1508927395, "last_edit_date": 1508927395, "creation_date": 1508925766, "answer_id": 46929482, "question_id": 46927848, "link": "https://stackoverflow.com/questions/46927848/limit-buffer-in-read-function/46929482#46929482", "title": "Limit buffer in read() function", "body": "<p>You're not allocating enough memory for your buffer. You always need 1 more to store the NUL terminating character. And you also need to remember to add that NUL character to the end of the string read in by <code>read</code> as it won't do it for you.</p>\n\n<p>When you get an error, you should exit the loop.</p>\n\n<pre><code>#define BUF_SIZE (20)\nint main() {\n    char *buffer = malloc(sizeof(char)*(BUF_SIZE+1));\n    int len = 0;\n\n    do {\n        len = read(STDIN_FILENO, buffer, BUF_SIZE);\n        if(len == -1) {\n            write(STDERR_FILENO, \"Error read\\n\", 10);\n            break;\n        } else {\n            buffer[len]='\\0';\n            write(STDERR_FILENO, buffer, len);\n        }\n    } while(strncmp(buffer,\"fine\\n\", 5));\n\n    free(buffer);\n    return 0;\n}\n</code></pre>\n\n<p>You'll probably also find that the <code>strncmp(buffer,\"fine\\n\", 5)</code> isn't going to work as you'd need to process the read in string to handle lines of input as <code>read</code> will happily read in multiple lines at a time (assuming they all fit in the buffer size).</p>\n"}], "owner": {"reputation": 75, "user_id": 8830281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ecc008935e7d9612d5cc3d2e061e55d?s=128&d=identicon&r=PG&f=1", "display_name": "Serus", "link": "https://stackoverflow.com/users/8830281/serus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 46928319, "answer_count": 2, "score": 0, "last_activity_date": 1508927395, "creation_date": 1508921061, "question_id": 46927848, "link": "https://stackoverflow.com/questions/46927848/limit-buffer-in-read-function", "title": "Limit buffer in read() function", "body": "<p>I have to create a program that asks from standard input a string and write in standard error the string previously written.\nThis is my program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\n int main() {\n    char *buffer = malloc(sizeof(char)*20);\n    int len = 0;\n\n    do {\n        len = read(STDIN_FILENO, buffer, 20);\n        if(len == -1)\n            write(STDERR_FILENO, \"Error read\\n\", 10);\n        else\n            write(STDERR_FILENO, buffer, len);\n    } while(strncmp(buffer,\"fine\\n\", 5));\n\n    free(buffer);\n    return 0;\n}\n</code></pre>\n\n<p>The code works but I'm not satisfied..there is one problem:\nThe buffer is a 20char but I can insert more than 20 char...why? How I can limit the buffer to only 20 char?</p>\n"}, {"tags": ["c", "macos", "gcc", "libsvm"], "comments": [{"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1508932720, "post_id": 46927793, "comment_id": 80810395, "body": "<code>gcc</code> or <code>clang</code>?"}, {"owner": {"reputation": 107, "user_id": 8830193, "user_type": "registered", "profile_image": "https://graph.facebook.com/1482290178522509/picture?type=large", "display_name": "\u9673\u5b50\u8efc", "link": "https://stackoverflow.com/users/8830193/%e9%99%b3%e5%ad%90%e8%bb%bc"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1509002726, "post_id": 46927793, "comment_id": 80843430, "body": "i used gcc to compile, now i figure out the problem, just use       brew install libsvm"}, {"owner": {"reputation": 107, "user_id": 8830193, "user_type": "registered", "profile_image": "https://graph.facebook.com/1482290178522509/picture?type=large", "display_name": "\u9673\u5b50\u8efc", "link": "https://stackoverflow.com/users/8830193/%e9%99%b3%e5%ad%90%e8%bb%bc"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1514270103, "post_id": 46927793, "comment_id": 82918786, "body": "no .. but i still cant  compile any c code"}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 8830193, "user_type": "registered", "profile_image": "https://graph.facebook.com/1482290178522509/picture?type=large", "display_name": "\u9673\u5b50\u8efc", "link": "https://stackoverflow.com/users/8830193/%e9%99%b3%e5%ad%90%e8%bb%bc"}, "is_accepted": false, "score": 1, "last_activity_date": 1555577707, "creation_date": 1555577707, "answer_id": 55742505, "question_id": 46927793, "link": "https://stackoverflow.com/questions/46927793/make-error-when-i-want-to-make-libsvm-system-mac-os-x-10-12-6/55742505#55742505", "title": "&quot;make&quot; error when I want to make libsvm (system : MAC OS X 10.12.6)", "body": "<p>It seems that my MACOS have something wrong, I figure out that I changed some .cpp or .h file in my /usr/local/.. so I just reset the whole system hahahah. What a sad story</p>\n"}], "owner": {"reputation": 107, "user_id": 8830193, "user_type": "registered", "profile_image": "https://graph.facebook.com/1482290178522509/picture?type=large", "display_name": "\u9673\u5b50\u8efc", "link": "https://stackoverflow.com/users/8830193/%e9%99%b3%e5%ad%90%e8%bb%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1555577707, "creation_date": 1508920881, "question_id": 46927793, "link": "https://stackoverflow.com/questions/46927793/make-error-when-i-want-to-make-libsvm-system-mac-os-x-10-12-6", "title": "&quot;make&quot; error when I want to make libsvm (system : MAC OS X 10.12.6)", "body": "<p>when i make under the libsvm/python  folder,terminal show that:</p>\n\n<pre><code>make -C .. lib\nc++ -Wall -Wconversion -O3 -fPIC -fopenmp -c svm.cpp\nclang: error: unsupported option '-fopenmp'\nmake[1]: *** [svm.o] Error 1\nmake: *** [lib] Error 2\n</code></pre>\n\n<p>so i try to find the mistake,and I think it's the problem of my gcc compile,because I change some files before.</p>\n\n<p>so I started to test it . \njust simply write a     test.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    printf(\"Hello World\");\n}\n</code></pre>\n\n<p>I used the command:</p>\n\n<pre><code>gcc test.c -o test\n</code></pre>\n\n<p>and</p>\n\n<pre><code>./test\n</code></pre>\n\n<p>There were lots of ERROR</p>\n\n<pre><code>In file included from tset.c:1:\n/usr/include/stdio.h:242:81: error: expected function body after function declarator\nFILE    *fopen(const char * __restrict __filename, const char * __restrict __mode) __DARWIN_ALIAS_STARTING(...\n                                                                                   ^\n/usr/include/stdio.h:244:63: error: expected function body after function declarator\nint      fprintf(FILE * __restrict, const char * __restrict, ...) __printflike(2, 3);\n                                                                  ^\n/usr/include/stdio.h:246:56: error: expected function body after function declarator\nint      fputs(const char * __restrict, FILE * __restrict) __DARWIN_ALIAS(fputs);\n                                                           ^\n/usr/include/stdio.h:249:37: error: expected function body after function declarator\n                 FILE * __restrict) __DARWIN_ALIAS(freopen);\n                                    ^\n/usr/include/stdio.h:250:62: error: expected function body after function declarator\nint      fscanf(FILE * __restrict, const char * __restrict, ...) __scanflike(2, 3);\n                                                                 ^\n/usr/include/stdio.h:254:107: error: expected function body after function declarator\n  ...void * __restrict __ptr, size_t __size, size_t __nitems, FILE * __restrict __stream) __DARWIN_ALIAS(fwrite);\n                                                                                          ^\n/usr/include/stdio.h:259:43: error: expected function body after function declarator\nint      printf(const char * __restrict, ...) __printflike(1, 2);\n                                              ^\n/usr/include/stdio.h:266:42: error: expected function body after function declarator\nint      scanf(const char * __restrict, ...) __scanflike(1, 2);\n                                             ^\n/usr/include/stdio.h:269:63: error: expected function body after function declarator\nint      sprintf(char * __restrict, const char * __restrict, ...) __printflike(2, 3) __swift_unavailable(\"U...\n                                                                  ^\n/usr/include/stdio.h:270:68: error: expected function body after function declarator\nint      sscanf(const char * __restrict, const char * __restrict, ...) __scanflike(2, 3);\n                                                                       ^\n/usr/include/stdio.h:273:21: error: expected parameter declarator\n__swift_unavailable(\"Use mkstemp(3) instead.\")\n                    ^\n/usr/include/stdio.h:273:21: error: expected ')'\n/usr/include/stdio.h:273:20: note: to match this '('\n__swift_unavailable(\"Use mkstemp(3) instead.\")\n                   ^\n/usr/include/stdio.h:275:1: error: expected function body after function declarator\n__deprecated_msg(\"This function is provided for compatibility reasons only.  Due to security concerns inher...\n^\n/usr/include/stdio.h:279:68: error: expected function body after function declarator\nint      vfprintf(FILE * __restrict, const char * __restrict, va_list) __printflike(2, 0);\n                                                                       ^\n/usr/include/stdio.h:280:48: error: expected function body after function declarator\nint      vprintf(const char * __restrict, va_list) __printflike(1, 0);\n                                                   ^\n/usr/include/stdio.h:281:68: error: expected function body after function declarator\nint      vsprintf(char * __restrict, const char * __restrict, va_list) __printflike(2, 0) __swift_unavailab...\n                                                                       ^\n/usr/include/stdio.h:461:65: error: expected function body after function declarator\nint      asprintf(char ** __restrict, const char * __restrict, ...) __printflike(2, 3);\n                                                                    ^\n/usr/include/stdio.h:468:70: error: expected function body after function declarator\nint      vasprintf(char ** __restrict, const char * __restrict, va_list) __printflike(2, 0);\n                                                                         ^\ntset.c:4:4: warning: implicitly declaring library function 'printf' with type 'int (const char *, ...)'\n      [-Wimplicit-function-declaration]\n   printf(\"OK\");\n   ^\ntset.c:4:4: note: include the header &lt;stdio.h&gt; or explicitly provide a declaration for 'printf'\n1 warning and 18 errors generated.\n</code></pre>\n\n<p>and i delete the  #include   in the test.c </p>\n\n<pre><code>int main()\n{\n  printf(\"Hello World\");\n  return 0;\n}\n</code></pre>\n\n<p>and run again terminnal shows:</p>\n\n<pre><code>Hello World\n</code></pre>\n\n<p>Just wonder ....why</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1508921072, "post_id": 46927774, "comment_id": 80802397, "body": "You allocate <code>n</code> or <code>m</code> elements of <code>double</code> but then index by <code>s</code>, which is <code>m + n</code>..."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508921269, "post_id": 46927774, "comment_id": 80802529, "body": "note that <code>r</code> is equal to <code>n</code> following the loop <code>for (r = j; r &lt; n; r++)</code>, which is (also) out of bounds when accessing <code>aux = a[r][s];</code>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508921560, "post_id": 46927774, "comment_id": 80802716, "body": "If the matrix is of size nxm, then in the loop <code>for (int s = 0; s &lt; (n+m); s++)</code> variable <code>s</code> may never be larger than <code>m-1</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508921957, "post_id": 46927774, "comment_id": 80802979, "body": "<code>j&lt;=m;</code> --&gt; <code>j &lt; m;</code>"}, {"owner": {"reputation": 31, "user_id": 8829883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7564fca702cd16d8c1fab5bc54f342dc?s=128&d=identicon&r=PG&f=1", "display_name": "Adria", "link": "https://stackoverflow.com/users/8829883/adria"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1508921988, "post_id": 46927774, "comment_id": 80803000, "body": "@PaulOgilvie true, matrix is in fact n x n+m, i edited the information, i should still replace &quot;n+m&quot; with &quot;n+m-1&quot;"}, {"owner": {"reputation": 31, "user_id": 8829883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7564fca702cd16d8c1fab5bc54f342dc?s=128&d=identicon&r=PG&f=1", "display_name": "Adria", "link": "https://stackoverflow.com/users/8829883/adria"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508922045, "post_id": 46927774, "comment_id": 80803031, "body": "@BLUEPIXY True, I constantly go out of bounds, thanks!"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508922051, "post_id": 46927774, "comment_id": 80803033, "body": "What is your input?"}, {"owner": {"reputation": 31, "user_id": 8829883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7564fca702cd16d8c1fab5bc54f342dc?s=128&d=identicon&r=PG&f=1", "display_name": "Adria", "link": "https://stackoverflow.com/users/8829883/adria"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508922715, "post_id": 46927774, "comment_id": 80803493, "body": "@MichaelWalz &quot;The program receives an entry file (input and output file names typed in by the user), containing n, m, and a bunch of numbers which will fill in a matrix.&quot;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1508923170, "post_id": 46927774, "comment_id": 80803833, "body": "@Adria What I meant is you should provide an example of input that triggers the problem. It&#39;s just to help us to reproduce the problem without needing to guess."}, {"owner": {"reputation": 31, "user_id": 8829883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7564fca702cd16d8c1fab5bc54f342dc?s=128&d=identicon&r=PG&f=1", "display_name": "Adria", "link": "https://stackoverflow.com/users/8829883/adria"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508923605, "post_id": 46927774, "comment_id": 80804114, "body": "@MichaelWalz This is the input file I tried, I guess it&#39;s fine <a href=\"https://imgur.com/a/KVoAP\" rel=\"nofollow noreferrer\">imgur.com/a/KVoAP</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1508925091, "post_id": 46927774, "comment_id": 80805211, "body": "@Adria pleeease in the future don&#39;t post pictures of text but <a href=\"https://stackoverflow.com/posts/46927774/edit\">edit</a> your question and paste text <i>there</i> as text."}], "owner": {"reputation": 31, "user_id": 8829883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7564fca702cd16d8c1fab5bc54f342dc?s=128&d=identicon&r=PG&f=1", "display_name": "Adria", "link": "https://stackoverflow.com/users/8829883/adria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508921884, "creation_date": 1508920835, "last_edit_date": 1508921884, "question_id": 46927774, "link": "https://stackoverflow.com/questions/46927774/im-getting-this-error-thread-1-exc-bad-access-code-exc-i386-gpflt", "title": "I&#39;m getting this error: Thread 1: EXC_BAD_ACCESS (code=EXC_I386_GPFLT)", "body": "<p>I need help here! I'm trying to code a console-based C program which solves several systems of equations.</p>\n\n<p><strong>Exercise:</strong></p>\n\n<p>The program receives an entry file (input and output file names typed in by the user), containing n, m, and a bunch of numbers which will fill in a matrix. This matrix is an extended matrix which has n rows and n+m columns (where m is the number of systems to solve). First \"submatrix\" nxn must be reduced using Gauss Elimination method with pivoting.</p>\n\n<p>This is my code:</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;math.h&gt;\n\n    int gauss_pivot (double **a, int n, int m, double tol);\n\n    void resol (double **a, int n, int m);\n\n    int main(void) {\n\n        double **ampliada;\n        int n, m;\n        int i, j;\n        FILE *entrada, *sortida;\n        char nomE[31], nomS[31];\n\n        printf(\"Noms dels fitxers d'entrada i sortida\\n\");\n        scanf(\"%s %s\", nomE, nomS);\n\n        entrada = fopen(nomE, \"r\");\n        sortida = fopen(nomS, \"w\");\n\n        if (entrada == NULL || sortida == NULL){\n            if (entrada == NULL){\n                printf(\"Error en el fitxer d'entrada\\n\");\n                exit(1);\n            }\n            else{\n                printf(\"Error en el fitxer de sortida\\n\");\n                exit(1);\n            }\n        }\n\n        fscanf(entrada, \"%d\", &amp;n);\n        fscanf(entrada, \"%d\", &amp;m);\n\n        ampliada = (double**)malloc(n*sizeof(double*));\n        if (ampliada == NULL) {\n            printf(\"Mem\u00f2ria insuficient\\n\");\n            exit(1);\n        }\n        for (i=0; i&lt;n; i++){\n            ampliada[i] = (double*)malloc(m*sizeof(double));\n            if (ampliada[i] == NULL){\n                printf(\"Mem\u00f2ria insuficient\\n\");\n                exit(1);\n            }\n        }\n\n        for (i=0; i&lt;n; i++){\n            for (j=0; j&lt;=m; j++){\n                fscanf(entrada, \"%le\", &amp;ampliada[i][j]);\n            }\n        }\n\n        gauss_pivot(ampliada, n, m, 10^(-16));\n\n        resol(ampliada, n, m);\n\n        return 0;\n    }\n\n    int gauss_pivot (double **a, int n, int m, double tol){\n\n        float q;\n        double pivot, aux;\n        int r;\n\n        for (int j = 0; j &lt; n; j++){\n            pivot = 0;\n            for (r = j; r &lt; n; r++){\n                if (fabs(a[r][j]) &gt; pivot){\n                    pivot = a[r][j];\n                }\n            }\n            if (pivot != a[j][j]){\n                for (int s = 0; s &lt; (n+m); s++){\n                    aux = a[r][s];\n                    a[r][s] = a[j][s];\n                    a[j][s] = aux;\n                }\n            }\n            for (int i = 0; i &lt; n; i++){\n                if(i &gt; j){\n                    q = a[i][j]/a[j][j];\n                    for (int k = 0; k &lt; (n+m); k++){\n                        a[i][k] = a[i][k] - q*a[j][k];\n                    }\n                }\n            }\n        }\n\n        return 0;\n    }\n\n    void resol (double **a, int n, int m){\n\n        double resultats[n], suma;\n\n        for (int s = 1; s &lt;= m; s++){\n            printf(\"Soluci\u00f3 al sistema %d:\\n\", s);\n\n            resultats[n]=a[n][n+1]/a[n][n];\n            for(int i = n-1; i &gt;= 1; i--){\n                suma=0;\n                for(int j=i+1; j&lt;=n; j++){\n                    suma=suma+a[i][j]*resultats[j];\n                }\n                resultats[i]=(a[i][n+1]-suma)/a[i][i];\n            }\n\n            for (int r = 1; r &lt;= n; r++){\n                printf(\"X_%d = %f\", r, resultats[r]);\n            }\n\n        }\n    }\n</code></pre>\n\n<p>It crashes on the following lines (sometimes one, somtimes the other):</p>\n\n<pre><code>                    aux = a[r][s];\n                    a[r][s] = a[j][s];\n                    a[j][s] = aux;\n</code></pre>\n\n<p>And I get the following error message:</p>\n\n<blockquote>\n  <p>Thread 1: EXC_BAD_ACCESS (code=EXC_I386_GPFLT)</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "windows", "apache", "batch-file", "cgi"], "comments": [{"owner": {"reputation": 3245, "user_id": 4367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6f38c9b05244aee63fe1ae05a2d1b82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/4367/rick"}, "edited": false, "score": 0, "creation_date": 1508921257, "post_id": 46927711, "comment_id": 80802521, "body": "Is your (Apache) server also running on windows?"}, {"owner": {"reputation": 154, "user_id": 6293817, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9c2e71378c7d39e1f27f53e035e748a1?s=128&d=identicon&r=PG&f=1", "display_name": "Ghos3t", "link": "https://stackoverflow.com/users/6293817/ghos3t"}, "reply_to_user": {"reputation": 3245, "user_id": 4367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6f38c9b05244aee63fe1ae05a2d1b82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/4367/rick"}, "edited": false, "score": 0, "creation_date": 1508925719, "post_id": 46927711, "comment_id": 80805695, "body": "@Rick Apache is also running on windows."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 6293817, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9c2e71378c7d39e1f27f53e035e748a1?s=128&d=identicon&r=PG&f=1", "display_name": "Ghos3t", "link": "https://stackoverflow.com/users/6293817/ghos3t"}, "edited": false, "score": 0, "creation_date": 1508923580, "post_id": 46928369, "comment_id": 80804096, "body": "I am using a C program .exe because my actual program is much more complicated and once the pdf&#39;s are moved it has to pick a pdf file from the new location and attach it to a email and send it. The program that iv&#39;e shown above is just a basic test program,"}, {"owner": {"reputation": 3245, "user_id": 4367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6f38c9b05244aee63fe1ae05a2d1b82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/4367/rick"}, "reply_to_user": {"reputation": 154, "user_id": 6293817, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9c2e71378c7d39e1f27f53e035e748a1?s=128&d=identicon&r=PG&f=1", "display_name": "Ghos3t", "link": "https://stackoverflow.com/users/6293817/ghos3t"}, "edited": false, "score": 0, "creation_date": 1508925079, "post_id": 46928369, "comment_id": 80805202, "body": "Ok, then you should add the <code>Content-Type: &lt;your mime&gt;</code> output and add the <code>.exe</code> to the <code>AddHandler cgi-script</code> Apache config. Like @ChrisTurner &#39;s answer."}], "tags": [], "owner": {"reputation": 3245, "user_id": 4367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6f38c9b05244aee63fe1ae05a2d1b82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/4367/rick"}, "is_accepted": false, "score": 2, "last_activity_date": 1508925640, "last_edit_date": 1508925640, "creation_date": 1508922644, "answer_id": 46928369, "question_id": 46927711, "link": "https://stackoverflow.com/questions/46927711/how-to-execute-a-batch-script-using-system-command-in-a-cgi-application-written/46928369#46928369", "title": "How to execute a batch script using system command in a CGI application written in C, executed through web browser (Apache Server)", "body": "<p>Make sure you allow cgi execution by adding this to the VistualHost file or .htaccess file (see: <a href=\"https://www.devside.net/wamp-server/running-exe-and-batch-files-as-cgi-scripts-in-apache-under-windows\" rel=\"nofollow noreferrer\">https://www.devside.net/wamp-server/running-exe-and-batch-files-as-cgi-scripts-in-apache-under-windows</a>)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AddHandler cgi-script .bat # add .exe if you wish\nOptions +ExecCGI +FollowSymlinks\n</code></pre>\n\n<p>And why use a C program / .exe to execute a batch file? This batch file should also do the trick (to be honest I did not test this):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>@echo off\necho Content-Type: text/html\necho.\nCALL PDF_MOVE.bat || goto error\necho file copy successfull\ngoto :EOF\n:error\necho file copy failure\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1508924114, "creation_date": 1508924114, "answer_id": 46928895, "question_id": 46927711, "link": "https://stackoverflow.com/questions/46927711/how-to-execute-a-batch-script-using-system-command-in-a-cgi-application-written/46928895#46928895", "title": "How to execute a batch script using system command in a CGI application written in C, executed through web browser (Apache Server)", "body": "<p>We don't know what the batch file outputs, but your C code is missing one vital important thing to conform to the CGI standards - a HTTP header.</p>\n\n<p>The bare minimum you need to output is the Content-Type which since you're not expecting to output any HTML, might as well be \"text/plain\". The header is terminated with a blank line.</p>\n\n<pre><code>printf(\"Content-Type: text/plain\\n\\n\");\n</code></pre>\n\n<p>Without that, Apache will treat anything you output as the header and return an error 500 if it doesn't understand it.</p>\n\n<p>Configuration-wise, Apache needs to be told that CGI \"scripts\" exist in the folder you're trying to run it from and what extension they have.</p>\n\n<pre><code>Options +ExecCGI\nAddHandler cgi-script .exe\n</code></pre>\n\n<p>That might need to be in your main apache configuration inside a <code>&lt;Directory ...&gt;</code> block or in a \".htaccess\" if you have allowed \"users\" to override the <code>Options</code> directive with <code>AllowOverride Options</code></p>\n\n<p>The executable also needs permissions to be read and executed by Apache.</p>\n"}], "owner": {"reputation": 154, "user_id": 6293817, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9c2e71378c7d39e1f27f53e035e748a1?s=128&d=identicon&r=PG&f=1", "display_name": "Ghos3t", "link": "https://stackoverflow.com/users/6293817/ghos3t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 983, "favorite_count": 0, "accepted_answer_id": 46928895, "answer_count": 2, "score": 0, "last_activity_date": 1529651183, "creation_date": 1508920670, "last_edit_date": 1529651183, "question_id": 46927711, "link": "https://stackoverflow.com/questions/46927711/how-to-execute-a-batch-script-using-system-command-in-a-cgi-application-written", "title": "How to execute a batch script using system command in a CGI application written in C, executed through web browser (Apache Server)", "body": "<p>Basically, I have written a CGI script in C, which contains a single system() function which is supposed to call a a batch file on the server where the EXE resides. A sample code I have written is as follows:-</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    //system(\"ROBOCOPY \\\\pdffiles \\\\\\\\10.6.202.88\\\\d$\\\\pdffiles /mov /ZB /XJ /FFT /MT /R:2 /W:5 /V\");\n\n    int t = 0;\n    t= system(\"PDF_MOVE.bat\");\n\n    if(t == -1)\n        {\n            printf(\"file copy failure\");\n        }\n        else\n        {\n            printf(\"file copy successfull\");\n        }\n\n    return 0;\n}\n</code></pre>\n\n<p>After I compile this code and put the generated .exe file in a folder in the Apache server.</p>\n\n<p>Then when I try to hit this exe from a web browser by entering the full path of the exe in the browser(i.e <a href=\"http://10.6.202.111/path/to/file_copy_test.exe\" rel=\"nofollow noreferrer\">http://10.6.202.111/path/to/file_copy_test.exe</a>). This either tries to download the .exe file or gives me a Internal server error (500). The batch file contains the robocopy command that I have commented in the code. Also if I directly try to run the robocopy command through the system commmand, it fails as well.</p>\n\n<ul>\n<li>The Batch file itself runs properly.</li>\n<li>Running the robocopy command on the command line works correctly.</li>\n<li>If I execute the .exe file directly by double clicking it then it works correctly and calls the batch file properly.</li>\n<li>Only when trying to execute the .exe through the browser does this code fail.</li>\n</ul>\n\n<p>What can I do to fix this, any Apache setting needs to be changed?. do the path to the folders needs to be changed?. I have tried putting ./ in front of the batch file name but then it fails on the command line as '.' is not recognised.</p>\n\n<p>The Apache error log shows:</p>\n\n<p>[cgi:error] [pid 10604:tid 1512] [client 172.24.2.82:56507] AH01215: operable program or batch file.\\r: D:/itrade/app/user/file_copy_test.exe</p>\n\n<hr>\n\n<p>After making the suggested changes, I realised that the source and destination paths provided for the Robocopy command were incorrect. Fixing that finally made it work.</p>\n\n<p>The batch file I used:-</p>\n\n<pre><code>@echo off\n(\nnet use \\\\10.6.202.88\\d$ /user:Username password\nROBOCOPY D:\\path\\to\\pdffiles \\\\10.6.202.88\\d$\\pdffiles /ZB /COPYALL /mov /XJ /FFT /MT /R:2 /W:5 /v /tee /log:robocopy_log.txt\nEXIT\n) &gt;output.txt 2&gt;&amp;1\n</code></pre>\n"}, {"tags": ["c", "random", "normal-distribution"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1508919645, "post_id": 46927386, "comment_id": 80801537, "body": "I just googled this for you:  <a href=\"https://stackoverflow.com/questions/2325472/generate-random-numbers-following-a-normal-distribution-in-c-c\">Generate random numbers following a normal distribution in C/C++</a>."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1508920010, "post_id": 46927386, "comment_id": 80801761, "body": "Actually, what do you mean &quot;normal distribution in specific <b>range</b>?!&quot; Normal distribution... &quot;normally&quot; has <b>infinite <i>range</i></b>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1508920070, "post_id": 46927386, "comment_id": 80801794, "body": "&quot;random number with normal distribution in specific range&quot; There is no such thing. It&#39;s either normal or in a specific range."}, {"owner": {"reputation": 1717, "user_id": 8740387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c52c34f18b15f314a70053032eb0931?s=128&d=identicon&r=PG&f=1", "display_name": "S. Hesam", "link": "https://stackoverflow.com/users/8740387/s-hesam"}, "edited": false, "score": 0, "creation_date": 1508920368, "post_id": 46927386, "comment_id": 80801964, "body": "I know Box-Muller transform method, Do you mean to specify the range by specifying the mean and standard deviation?"}], "owner": {"reputation": 1717, "user_id": 8740387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c52c34f18b15f314a70053032eb0931?s=128&d=identicon&r=PG&f=1", "display_name": "S. Hesam", "link": "https://stackoverflow.com/users/8740387/s-hesam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1508919949, "answer_count": 0, "score": 0, "last_activity_date": 1508929197, "creation_date": 1508919603, "last_edit_date": 1508929197, "question_id": 46927386, "link": "https://stackoverflow.com/questions/46927386/generation-of-random-number-with-normal-distribution-in-specific-rangefor-examp", "closed_reason": "Duplicate", "title": "generation of random number with normal distribution in specific range(for example [0,1]) in C programming", "body": "<p>I know that how to generate random number with normal distribution,\nbut my problem is determining range of numbers are produced.\nI need these numbers for random electrons velocities(dimensionless) which are between zero and one.</p>\n"}, {"tags": ["c++", "c", "static", "extern"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 8, "creation_date": 1508919474, "post_id": 46927311, "comment_id": 80801435, "body": "You can&#39;t. It&#39;s <code>static</code>"}, {"owner": {"reputation": 31113, "user_id": 112079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3ccb721ddaf2f6e7dccc66262f406b1?s=128&d=identicon&r=PG&f=1", "display_name": "fvu", "link": "https://stackoverflow.com/users/112079/fvu"}, "edited": false, "score": 1, "creation_date": 1508919540, "post_id": 46927311, "comment_id": 80801478, "body": "Some more info about static <a href=\"https://stackoverflow.com/questions/7259830/why-and-when-to-use-static-structures-in-c-programming/7259892#7259892\">here</a>. Short version: <code>static</code> used in this context limits the variable&#39;s visibility to the current &quot;translation unit&quot; (roughly the file in which it&#39;s defined)."}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1508919704, "post_id": 46927311, "comment_id": 80801570, "body": "I was hoping that &quot;extern&quot; can break the &quot;static&quot; ruler :("}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1508919750, "post_id": 46927311, "comment_id": 80801603, "body": "@Tiger Hwang  Remove the static specifier in the C file."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1508919755, "post_id": 46927311, "comment_id": 80801608, "body": "@TigerHwang - Doesn&#39;t work like that I&#39;m afraid. And good that it doesn&#39;t, or proper encapsulation would be impossible."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1508919858, "post_id": 46927311, "comment_id": 80801669, "body": "<code>extern</code> cannot affect the C file as it is only used in the C++ file."}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1508919881, "post_id": 46927311, "comment_id": 80801678, "body": "I can not remove the &quot;static&quot;, there are many of them and the file is still build in the project"}, {"owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "edited": false, "score": 0, "creation_date": 1508919919, "post_id": 46927311, "comment_id": 80801702, "body": "you can use regex to edit all of them no?"}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1508920192, "post_id": 46927311, "comment_id": 80801855, "body": "Actually it&#39;s generated by a tool from XML, maybe I can try change the generator, and hope my colleges will not angry at me :)"}, {"owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "edited": false, "score": 0, "creation_date": 1508920464, "post_id": 46927311, "comment_id": 80802027, "body": "@TigerHwang Well is there any reason those variables have to be declared in C? if it is a large generated file shouldn&#39;t it be something like a CSV?"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 2, "creation_date": 1508920577, "post_id": 46927311, "comment_id": 80802090, "body": "The <code>static</code> modifier implies that your intention is to keep the field private. I would certainly be angry if a junior member of the team decided to make all fields public so that they can be accessed from anywhere."}, {"owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "edited": false, "score": 1, "creation_date": 1508920971, "post_id": 46927311, "comment_id": 80802326, "body": "@TigerHwang But wait, do all the strings have the <code>void p()</code> that will print them out, or is it only in your example? Basically is there a need to access those strings themselves?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1508921213, "post_id": 46927311, "comment_id": 80802484, "body": "What problem are you <b>actually</b> trying to solve. Tell us more about the context. This smells like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>."}, {"owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "edited": false, "score": 0, "creation_date": 1508923337, "post_id": 46927311, "comment_id": 80803937, "body": "There are a lot of such C files generated, which contain many strings as arrays and build into a lib.  They also contain some functions using these strings.  The functions are not static, they are exported in a header file.  I want to use the string in my C++ code, but not the functions.  If this does not work, then I have to figure out another solution, maybe generate some functions to export the strings."}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1508920838, "post_id": 46927471, "comment_id": 80802250, "body": "Nothing implied about it - it&#39;s very explicit; that&#39;s exactly what it&#39;s used for."}], "tags": [], "owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "is_accepted": false, "score": 2, "last_activity_date": 1508920786, "last_edit_date": 1508920786, "creation_date": 1508919859, "answer_id": 46927471, "question_id": 46927311, "link": "https://stackoverflow.com/questions/46927311/how-to-access-global-variable-in-c-source-file-from-c-source-file/46927471#46927471", "title": "How to access global variable in C source file from c++ source file", "body": "<p>In C, the <code>static</code> statement implies that the symbol should NOT be exported.</p>\n\n<p>Thus, it is possible to access those variables simply by removing that keyword.</p>\n\n<p><a href=\"https://www.ibm.com/developerworks/aix/library/au-aix-symbol-visibility/index.html\" rel=\"nofollow noreferrer\">This article</a> might help you understand better the symbol visibility concept</p>\n\n<p>Apart from that, while C might have trouble using mangled C++ symbols, the opposite poses absolutely no compatibility issue. </p>\n"}, {"tags": [], "owner": {"reputation": 402, "user_id": 8805085, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a35bfb24036bd5fcd7cab953e120e12?s=128&d=identicon&r=PG&f=1", "display_name": "Jayesh Vyas", "link": "https://stackoverflow.com/users/8805085/jayesh-vyas"}, "is_accepted": false, "score": 3, "last_activity_date": 1508920887, "creation_date": 1508920887, "answer_id": 46927797, "question_id": 46927311, "link": "https://stackoverflow.com/questions/46927311/how-to-access-global-variable-in-c-source-file-from-c-source-file/46927797#46927797", "title": "How to access global variable in C source file from c++ source file", "body": "<p>when you are using <code>static</code> keyword in your file. it indicates that the variable prefixed with static can't be exported in another file. you can keep that variable as non static and then it is possible to access those variables in another files as well.</p>\n\n<p>you can refer the following article.\n<a href=\"https://cboard.cprogramming.com/cplusplus-programming/102259-global-variable-access-c-cplusplus.html\" rel=\"nofollow noreferrer\">https://cboard.cprogramming.com/cplusplus-programming/102259-global-variable-access-c-cplusplus.html</a></p>\n"}], "owner": {"reputation": 300, "user_id": 6221642, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-VfFCMY6NznA/AAAAAAAAAAI/AAAAAAAAACE/KpkmsLQYFZw/photo.jpg?sz=128", "display_name": "Tiger Hwang", "link": "https://stackoverflow.com/users/6221642/tiger-hwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1508953270, "creation_date": 1508919357, "last_edit_date": 1508953270, "question_id": 46927311, "link": "https://stackoverflow.com/questions/46927311/how-to-access-global-variable-in-c-source-file-from-c-source-file", "title": "How to access global variable in C source file from c++ source file", "body": "<p>There is a very big C file, which defined a lot of strings and used locally.  I would like to do access these strings from a C++ file, but using extern \"C\" does not help.  </p>\n\n<p>The C file look like this:  data.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic char* str = \"string\\n\";\n\nvoid p() {\n   printf(str);\n}\n</code></pre>\n\n<p>and the c++ file look like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nextern \"C\" {\n   extern char* str;\n   extern void p();\n};\n\nint main(int argc, char* argv[]) {\n   p();\n   std::cout &lt;&lt; str;\n   return 0;\n}\n</code></pre>\n\n<p>I am using VS2013, the compile gives error  </p>\n\n<pre><code>error LNK2001: unresolved external symbol _str\nfatal error LNK1120: 1 unresolved externals\n</code></pre>\n\n<p>Calling the functions defined in C file has no problem.</p>\n\n<p>Is it even possible to access the variables in C from C++?  And how to do it correctly?</p>\n"}, {"tags": ["c", "cs50", "recover"], "comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1508919254, "post_id": 46927001, "comment_id": 80801304, "body": "There&#39;s a <a href=\"http://cs50.stackexchange.com/\">cs50 stack exchange site</a> if you&#39;re interested."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508922212, "post_id": 46927001, "comment_id": 80803139, "body": "Put <code>#include &lt;stdint.h&gt;</code>"}, {"owner": {"reputation": 1, "user_id": 8830095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e027846c42244f230aae67270fffc97?s=128&d=identicon&r=PG&f=1", "display_name": "jules654", "link": "https://stackoverflow.com/users/8830095/jules654"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1508922678, "post_id": 46927001, "comment_id": 80803464, "body": "Hi @BLUEPIXY, thanks - I tried that but no help. I was including that in &#39;bmp.h&#39;"}], "owner": {"reputation": 1, "user_id": 8830095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e027846c42244f230aae67270fffc97?s=128&d=identicon&r=PG&f=1", "display_name": "jules654", "link": "https://stackoverflow.com/users/8830095/jules654"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1508918647, "creation_date": 1508918381, "last_edit_date": 1508918647, "question_id": 46927001, "link": "https://stackoverflow.com/questions/46927001/cs50-pset-4-recover-check50-gives-following-error-expected-exit-code-0-not", "title": "cs50: pset 4: Recover. Check50 gives following error: &#39;expected exit code 0, not 1&#39;", "body": "<p>I have completed the task and can view the .jpg images but when I run check50 I get the following error message:</p>\n\n<pre><code>:) recover.c exists.\n:( recover.c compiles.\nexpected exit code 0, not 1\n...etc. \n</code></pre>\n\n<p>When I run <code>echo $?</code> in the terminal I get a value of zero so this doesn't appear to be referring to main's return value. Any ideas?</p>\n\n<pre><code>/**\n * Recovers jpeg from raw file.\n *\n * */\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;math.h&gt;\n\n#include \"bmp.h\"\n\nint main(int argc, char *argv[])\n{\n    // ensure proper usage:1 file names as arg\n    if (argc != 2)\n    {\n        fprintf(stderr, \"Usage: ./recover infile\\n\");\n        return 1;\n    }\n\n    char *infile = argv[1]; //name infile\n\n    // create file pointer to read input file\n    FILE *inptr = fopen(infile, \"r\");\n    if (inptr == NULL)  //check that it is pointing somewhere\n    {\n        fprintf(stderr, \"Could not open %s.\\n\", infile);\n        return 2;\n    }\n\n    fseek(inptr, 0L, SEEK_END); //go to end of file\n    int size = ftell(inptr);        //store length of file in bytes\n    rewind(inptr);              //rewind to start of file. equivalent to: fseek(inptr, 0L, SEEK_SET);\n    int num_blocks = size/512;      //total number of blocks. Note that the final E0F block (which might be less than 512 bytes)\n                                    //will be lost but this is good\n\n    uint8_t* buffer = malloc( 512 * sizeof(uint8_t)); //get buffer pointer to series of byte long ints\n    if (buffer == NULL)  //check that it is pointing somewhere\n    {\n        fprintf(stderr, \"Could not allocate memory.\\n\");\n        return -1;\n    }\n\n    int jpg_count = 0;\n\n\n    for (int block = 0; block &lt; num_blocks; block++)\n    {\n\n        fread(buffer, 1, 512, inptr); // store a block in the buffer\n\n\n        if (buffer[0] == 0xff &amp;&amp;\n            buffer[1] == 0xd8 &amp;&amp;\n            buffer[2] == 0xff &amp;&amp;\n            (buffer[3] &amp; 0xf0) == 0xe0)\n        {\n            char filename[10];   //create filename\n            sprintf(filename, \"%03i.jpg\", jpg_count);\n\n            jpg_count++;\n            FILE *img = fopen(filename, \"w\"); //create file pointer to append to output file\n            fwrite(buffer, 1, 512, img);   //copy Block to img\n            fclose(img);\n\n        }\n        else\n        {\n            if (jpg_count &gt; 0)\n            {\n                char filename[10];   //create filename\n                sprintf(filename, \"%03i.jpg\", jpg_count -1);\n\n                FILE *img = fopen(filename, \"a\");\n                fwrite(buffer, 1, 512, img);\n                fclose(img);\n            }\n        }\n    }\n    free(buffer);\n\n\n    // close infile\n    fclose(inptr);\n\n    //if success\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "docker", "tcp-ip"], "comments": [{"owner": {"reputation": 579, "user_id": 4371177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0deb2a7b0ef3f1264fab392cb1584f72?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar", "link": "https://stackoverflow.com/users/4371177/mazhar"}, "edited": false, "score": 0, "creation_date": 1508917979, "post_id": 46926582, "comment_id": 80800541, "body": "What&#39;s the return value of connect() call ? It is less than 0 but what it is ? Try to find that out, it will help you."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1508918909, "post_id": 46926582, "comment_id": 80801098, "body": "What command did you run for connect and did you run both server and client in same containers?"}, {"owner": {"reputation": 995, "user_id": 5164088, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/bGTOG.jpg?s=128&g=1", "display_name": "S7_0", "link": "https://stackoverflow.com/users/5164088/s7-0"}, "reply_to_user": {"reputation": 579, "user_id": 4371177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0deb2a7b0ef3f1264fab392cb1584f72?s=128&d=identicon&r=PG&f=1", "display_name": "Mazhar", "link": "https://stackoverflow.com/users/4371177/mazhar"}, "edited": false, "score": 0, "creation_date": 1509002931, "post_id": 46926582, "comment_id": 80843558, "body": "Hello @Mazhar and TarunLalwani. I edit my original post :) (And yes, I run the server and the client in same containers)"}, {"owner": {"reputation": 8028, "user_id": 18092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41c64bdb2472e682117c58e4a07b8486?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/18092/fred"}, "edited": false, "score": 1, "creation_date": 1509006834, "post_id": 46926582, "comment_id": 80846021, "body": "<a href=\"https://stackoverflow.com/questions/24319662/from-inside-of-a-docker-container-how-do-i-connect-to-the-localhost-of-the-mach\" title=\"from inside of a docker container how do i connect to the localhost of the mach\">stackoverflow.com/questions/24319662/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 995, "user_id": 5164088, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/bGTOG.jpg?s=128&g=1", "display_name": "S7_0", "link": "https://stackoverflow.com/users/5164088/s7-0"}, "is_accepted": false, "score": 1, "last_activity_date": 1509074526, "creation_date": 1509074526, "answer_id": 46966998, "question_id": 46926582, "link": "https://stackoverflow.com/questions/46926582/c-application-server-client-doesnt-work-in-docker-container/46966998#46966998", "title": "C application server/client doesn&#39;t work in docker container", "body": "<p>Problem solve !</p>\n\n<p>I used to launch my container with the following way:</p>\n\n<pre><code> docker run -it --security-opt seccomp=unconfined --mount type=bind,src=/Users/steven/Documents/eip/firmware_coit,dst=/bidon 987steven/eip_linux bash\n</code></pre>\n\n<p>But I only need to add to the command line:</p>\n\n<pre><code>--net=\"host\"\n</code></pre>\n\n<blockquote>\n  <p>Alternatively you can run a docker container with network settings set\n  to host. Such a container will share the network stack with the docker\n  host and from the container point of view, localhost (or 127.0.0.1)\n  will refer to the docker host.</p>\n</blockquote>\n\n<p>Source: <a href=\"https://stackoverflow.com/questions/24319662/from-inside-of-a-docker-container-how-do-i-connect-to-the-localhost-of-the-mach\">From inside of a Docker container, how do I connect to the localhost of the machine?</a></p>\n"}], "owner": {"reputation": 995, "user_id": 5164088, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/bGTOG.jpg?s=128&g=1", "display_name": "S7_0", "link": "https://stackoverflow.com/users/5164088/s7-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1509074526, "creation_date": 1508916949, "last_edit_date": 1509002878, "question_id": 46926582, "link": "https://stackoverflow.com/questions/46926582/c-application-server-client-doesnt-work-in-docker-container", "title": "C application server/client doesn&#39;t work in docker container", "body": "<p>I'm a newbie with Docker.\nI write a server/client (very simple) application which both of them run in the same container.</p>\n\n<p>I'm working on OSX and it work perfectly when I connect the client to the server.</p>\n\n<p>However, I can't connect my client to my server. Here's my code:</p>\n\n<p>client.c:</p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int sockfd = 0, n = 0;\n    char recvBuff[1024];\n    struct sockaddr_in serv_addr;\n\n    if(argc != 2) {\n      printf(\"\\n Usage: %s &lt;ip of server&gt; \\n\",argv[0]);\n      return 1;\n    }\n    memset(recvBuff, '0',sizeof(recvBuff));\n    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) &lt; 0) {\n      printf(\"\\n Error : Could not create socket \\n\");\n      return 1;\n    }\n    memset(&amp;serv_addr, '0', sizeof(serv_addr));\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_port = htons(5000);\n    if(inet_pton(AF_INET, argv[1], &amp;serv_addr.sin_addr)&lt;=0) {\n      printf(\"\\n inet_pton error occured\\n\");\n      return 1;\n    }\n\n   int connect_value = connect(sockfd, (struct sockaddr *)&amp;serv_addr, sizeof(serv_addr));\n   if (connect_value &lt; 0) {\n     printf(\"Value of connect_value %d\\n\", connect_value);\n     fprintf(stderr, \"Value of errno: %d\\n\", errno);\n     return (1);\n   }\n\n    while ( (n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) &gt; 0){\n      recvBuff[n] = 0;\n      if(fputs(recvBuff, stdout) == EOF)\n        printf(\"\\n Error : Fputs error\\n\");\n    }\n    if(n &lt; 0)\n      printf(\"\\n Read error \\n\");\n    return 0;\n}\n</code></pre>\n\n<p>server.c</p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int listenfd = 0, connfd = 0;\n    struct sockaddr_in serv_addr;\n\n    char sendBuff[1025];\n    time_t ticks;\n\n    listenfd = socket(AF_INET, SOCK_STREAM, 0);\n    memset(&amp;serv_addr, '0', sizeof(serv_addr));\n    memset(sendBuff, '0', sizeof(sendBuff));\n\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);\n    serv_addr.sin_port = htons(5000);\n\n    bind(listenfd, (struct sockaddr*)&amp;serv_addr, sizeof(serv_addr));\n\n    listen(listenfd, 10);\n\n    while(1)\n    {\n        connfd = accept(listenfd, (struct sockaddr*)NULL, NULL);\n\n        ticks = time(NULL);\n        snprintf(sendBuff, sizeof(sendBuff), \"%.24s\\r\\n\", ctime(&amp;ticks));\n        write(connfd, sendBuff, strlen(sendBuff));\n\n        close(connfd);\n        sleep(1);\n     }\n}\n</code></pre>\n\n<p>the command line I use to launch my container:</p>\n\n<pre><code>docker run -it --security-opt seccomp=unconfined --mount type=bind,src=/Users/steven/Documents/eip/firmware_coit,dst=/bidon 987steven/eip_linux bash\n</code></pre>\n\n<p>I compile and run with the following way:</p>\n\n<blockquote>\n  <p>gcc server.c -o server &amp;&amp; ./server</p>\n  \n  <p>gcc client.c -o client &amp;&amp; ./client 127.0.0.1</p>\n  \n  <p>Error : Connect Failed Value of</p>\n  \n  <p>connect_value -1</p>\n  \n  <p>Value of errno: 111</p>\n</blockquote>\n\n<p>I tried to figured out by myself before post on SO but most of the topic and read about:</p>\n\n<ul>\n<li>how to connect unix-socket to docker-demon</li>\n<li>docker.sock</li>\n<li>docker container networking (offical documentation)</li>\n</ul>\n\n<p>But didn't find anything that could solve my problem.</p>\n\n<p>Just to be clear that I have a very few knowledge in network in general and newbie in docker. Please feel free to ask if you node additional information from me. Thanks</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1508916368, "post_id": 46926379, "comment_id": 80799540, "body": "Without showing the code you already have and explaining what exactly is the problem with it, this question is off-topic."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1508916378, "post_id": 46926379, "comment_id": 80799551, "body": "Welcome to Stack Overflow! Kindly show your research / debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1508916385, "post_id": 46926379, "comment_id": 80799560, "body": "Welcome to Stack Overflow! I&#39;m voting to close this question as this is clearly a write my code request without any visible effort from Patryk Besler, not a <i>question</i>."}, {"owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "edited": false, "score": 0, "creation_date": 1508916643, "post_id": 46926379, "comment_id": 80799739, "body": "you can get input values separated by space like that: scanf(&quot;%d %d %d&quot;, &amp;var1, &amp;var2, &amp;var3);"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1508916723, "post_id": 46926379, "comment_id": 80799801, "body": "<code>int n; scanf(&quot;%d&quot;, &amp;n); &#47;* check input *&#47; int array[n]; for(int i = 0; i &lt; n; ++i) scanf(&quot;%d&quot;, array + i);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 840, "user_id": 6704493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4c301ad478ef6b75733125f2b3d049d?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Dymowski", "link": "https://stackoverflow.com/users/6704493/pawe%c5%82-dymowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1508919095, "last_edit_date": 1508919095, "creation_date": 1508918576, "answer_id": 46927065, "question_id": 46926379, "link": "https://stackoverflow.com/questions/46926379/assigning-data-to-arrays/46927065#46927065", "title": "Assigning data to arrays", "body": "<p>Here is the solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int arraySize = 0;\n    printf(\"How big array do you want?\\n\");\n    scanf(\"%d\", &amp;arraySize);\n\n    int array[arraySize];\n\n    printf(\"Please enter %d digits separated by space:\\n\", arraySize);\n\n    int i = 0;        \n    while (i &lt; arraySize &amp;&amp; scanf(\"%d\", &amp;array[i++]) == 1)\n         /*empty loop*/;\n\n    for(int i = 0; i &lt; arraySize; i++){\n         printf(\"%d, \", array[i]);\n    }\n}\n</code></pre>\n\n<p>For getting user input separated by space I used solution from this post:\n<a href=\"https://stackoverflow.com/questions/9599794/putting-numbers-separated-by-a-space-into-an-array\">Putting numbers separated by a space into an array</a></p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1508921318, "creation_date": 1508921318, "answer_id": 46927928, "question_id": 46926379, "link": "https://stackoverflow.com/questions/46926379/assigning-data-to-arrays/46927928#46927928", "title": "Assigning data to arrays", "body": "<p>If you know the maximum number of integers that you will input, then there is no need to dynamically allocate storage for an array unless the max number is so large that you risk <em>StackOverflow</em> (which is compiler dependent, but generally you can fit at least <code>250000</code> integers, see <a href=\"https://stackoverflow.com/questions/1825964/c-c-maximum-stack-size-of-program\">C/C++ maximum stack size of program</a>)</p>\n\n<p>Unless you are dealing with that many (you're not, you're talking <code>20</code>), instead of dynamically allocating storage, simply declare a <em>constant</em> and declare an integer array of constant size, e.g.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXI 20     /* if you need a constant, define one */\n\nint main (void) {\n\n    int n = 0, \n        array[MAXI] = {0};\n    ...\n</code></pre>\n\n<p>You now have <code>array</code> with storage for <code>MAXI</code> (<code>20</code>) integers. You have also declared a convenient constant at the top of your code, so if you need to adjust the number of integers you accept, you simply change one-number rather than picking through all declarations and loop limits to make the change.</p>\n\n<p>The MOST important thing you will do is <strong>validate all user input</strong>. That means verifying that the user entered valid data, your program successfully converted the input to a value you can use in your code, and.. the value is within the proper range. You do this for EVERY input you take. For example, getting the number of integers from the user:</p>\n\n<pre><code>    printf (\"how many numbers (up to %d)?: \", MAXI);\n    /* validate ALL user input, including range of input */\n    if (scanf (\"%d\", &amp;n) != 1 || n &lt; 1 || n &gt; MAXI) {\n        fprintf (stderr, \"error: invalid input 'n'.\\n\");\n        return 1;\n    }\n</code></pre>\n\n<p>By checking the return of <code>scanf</code> you validate one integer was entered by the user and successfully converted to <code>int</code> and placed in the variable <code>n</code>. You next must verify that it is in the range of values your program will take (e.g. <code>1-&gt;MAXI</code>. The entry of a <em>negative</em> value more than <code>20</code> would result in <em>Undefined Behavior</em>, so make sure the value is in the proper range. (<code>0</code> just would be self-defeating for your program)</p>\n\n<p>Next, get the values and store them in your array. (you are just doing the same thing <code>n</code> times, so <em>use a loop!</em> You can also dispense with the range check as long as you are entering values within the normal integer range)</p>\n\n<pre><code>    for (int i = 0; i &lt; n; i++) {   /* read/validate 'n' integers */\n        printf (\"array[%2d]: \", i);\n        if (scanf (\"%d\", &amp;array[i]) != 1) {\n            fprintf (stderr, \"error: invalid input 'array[%d]'.\\n\", i);\n            return 1;\n        }\n    }\n</code></pre>\n\n<p>(it's also nice to prompt the user reminding them which value you are expecting, e.g. <code>\"array[1]: \"</code>, etc..)</p>\n\n<p>Other than outputting your array, your sort is the last thing you need to do. C provides <code>qsort</code> as the standard sorting routine. It is far more efficient and far better tested than anything you (or I) will write off the top of our heads -- use it in all real situations.</p>\n\n<p>That said, there is nothing wrong with writing your own sort, and it is good practice. (and for 20 values or less, it is just as fast). But, use a function! If there are parts of your code that can be used more than once, write a function to help make your code more maintainable (and much easier to read). You can write a bubble-sort simply:</p>\n\n<pre><code>void bubblesort (int *arr, int size)\n{\n    int i, j, tmp;\n\n    for (i = 0; i &lt; size; i++) {\n        for(j = 0; j &lt; (size-1) - i; j++) {\n            if( arr[j] &lt; arr[j+1] ) {   /* change to &gt; for ascending */\n                tmp = arr[j];\n                arr[j] = arr[j+1];\n                arr[j+1] = tmp;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Putting it altogether, you can do something similar to the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAXI 20     /* if you need a constant, define one */\n\nvoid bubblesort (int *arr, int size)\n{\n    int i, j, tmp;\n\n    for (i = 0; i &lt; size; i++) {\n        for(j = 0; j &lt; (size-1) - i; j++) {\n            if( arr[j] &lt; arr[j+1] ) {   /* change to &gt; for ascending */\n                tmp = arr[j];\n                arr[j] = arr[j+1];\n                arr[j+1] = tmp;\n            }\n        }\n    }\n}\n\nint main (void) {\n\n    int n = 0, \n        array[MAXI] = {0};\n\n    printf (\"how many numbers (up to %d)?: \", MAXI);\n    /* validate ALL user input, including range of input */\n    if (scanf (\"%d\", &amp;n) != 1 || n &lt; 1 || n &gt; MAXI) {\n        fprintf (stderr, \"error: invalid input 'n'.\\n\");\n        return 1;\n    }\n\n    for (int i = 0; i &lt; n; i++) {   /* read/validate 'n' integers */\n        printf (\"array[%2d]: \", i);\n        if (scanf (\"%d\", &amp;array[i]) != 1) {\n            fprintf (stderr, \"error: invalid input 'array[%d]'.\\n\", i);\n            return 1;\n        }\n    }\n\n    printf (\"before:\");             /* output before: ... */\n    for (int i = 0; i &lt; n; i++)\n        printf (\" %d\", array[i]);\n    putchar ('\\n');\n\n    bubblesort (array, n);          /* sort your array */\n\n    printf (\"after :\");             /* output after: ... */\n    for (int i = 0; i &lt; n; i++)\n        printf (\" %d\", array[i]);\n    putchar ('\\n');\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ /bin/arrayinput\nhow many numbers (up to 20)?: 5\narray[ 0]: 1\narray[ 1]: 2\narray[ 2]: 3\narray[ 3]: 4\narray[ 4]: 5\nbefore: 1 2 3 4 5\nafter : 5 4 3 2 1\n</code></pre>\n\n<p>Look things over and let me know if you have further questions.</p>\n"}], "owner": {"reputation": 21, "user_id": 8829890, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/13af9806c3dbde48b6a35caf8e3cef55?s=128&d=identicon&r=PG&f=1", "display_name": "Patryk Besler", "link": "https://stackoverflow.com/users/8829890/patryk-besler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508921318, "creation_date": 1508916301, "last_edit_date": 1508916740, "question_id": 46926379, "link": "https://stackoverflow.com/questions/46926379/assigning-data-to-arrays", "title": "Assigning data to arrays", "body": "<p>So I have to create a program that will first ask the user how many numbers will he enter(up to 20). After that user inputs his numbers:\nFor example (input):</p>\n\n<blockquote>\n  <p>9</p>\n  \n  <p>1 2 3 4 5 6 7 8 9</p>\n</blockquote>\n\n<p>Program has to print those numbers, assign them to static array and then input and sort them from biggest to smallest.\nFor example(output):</p>\n\n<blockquote>\n  <p>before:   1   2   3   4   5   6   7   8   9 </p>\n  \n  <p>after:    9   8   7   6   5   4   3   2   1</p>\n</blockquote>\n\n<p>I know how to do second part of the program. However I can't figure out how do you assign those numbers to an array while their way of input is like that:\n1 2 3...</p>\n\n<p>This is what I came up with when you input numbers separetly but only up to 10 numbers:</p>\n\n<pre><code>int main()\n{\n    int i, j, t;\n    int num[10];\n    scanf(\"%d\", &amp;num[0]);\n    scanf(\"%d\", &amp;num[1]);\n    scanf(\"%d\", &amp;num[2]);\n    scanf(\"%d\", &amp;num[3]);\n    scanf(\"%d\", &amp;num[4]);\n    scanf(\"%d\", &amp;num[5]);\n    scanf(\"%d\", &amp;num[6]);\n    scanf(\"%d\", &amp;num[7]);\n    scanf(\"%d\", &amp;num[8]);\n    scanf(\"%d\", &amp;num[9]);\n    int pos[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n\n    for(j=0; j&lt;10; j++)\n    {\n        for(i=0; i&lt;9-j; i++)\n        if(pos[i]&lt;pos[i+1])\n        {\n            t = pos[i];\n            pos[i] = pos[i+1];\n            pos[i+1] = t;\n        }\n\n    }\n\n    for(i=0; i&lt;10;i++){\n        printf(\"%d\", num[pos[i]]);\n        if(i!=9)\n            printf(\"\\t\");\n    }\n\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "assembly", "inline", "volatile"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1508914778, "post_id": 46925862, "comment_id": 80798524, "body": "You may want to look at the examples at <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">gcc Extended-Asm (and see volatile a few PP down)</a>"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 3, "last_activity_date": 1508914884, "creation_date": 1508914884, "answer_id": 46925949, "question_id": 46925862, "link": "https://stackoverflow.com/questions/46925862/execution-of-volatile-instruction/46925949#46925949", "title": "Execution of volatile instruction", "body": "<p>Inline assembly isn't specified by the C standard. I assume this is code for <code>gcc</code> and compatible, then you should have a look at <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">the manual</a>.</p>\n\n<p>As for your specific questions:</p>\n\n<blockquote>\n  <p>How does the compiler translate the instruction (asm volatile (\"sc\"))?</p>\n</blockquote>\n\n<p>The <code>volatile</code> in this context instructs the compiler that the assembler snippet <strong>must</strong> be included, even if the compiler can't see a reason it's actually needed for the behavior of the program. Whatever comes in the first string parameter is literal assembly code of the target platform.</p>\n\n<blockquote>\n  <p>Why are some arguments passed as strings and some are not</p>\n</blockquote>\n\n<p>It's just part of the syntax, refer to the manual I listed above. Inline assembly can \"bind\" input and output parameters to C variables and also tell the compiler which registers are \"clobbered\" by the assembly snippet (among other things).</p>\n"}, {"tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": false, "score": 1, "last_activity_date": 1508916260, "creation_date": 1508916260, "answer_id": 46926364, "question_id": 46925862, "link": "https://stackoverflow.com/questions/46925862/execution-of-volatile-instruction/46926364#46926364", "title": "Execution of volatile instruction", "body": "<p>Inline assemblers have to bridge the gap between C and assembly so in addition to ones assembly code, one needs to give details of how they interact. The first item in the GCC assembly template is the actual assembly, the other items include assigning input variables, output variables and clobbers (registers/memory) that the assembly may clobber so C need to steer clear of. The full details may be found: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}], "owner": {"reputation": 257, "user_id": 2927392, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d13c6d1107c7409f9e2df6a16694036d?s=128&d=identicon&r=PG&f=1", "display_name": "user2927392", "link": "https://stackoverflow.com/users/2927392/user2927392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "closed_date": 1508916659, "answer_count": 2, "score": -1, "last_activity_date": 1508916858, "creation_date": 1508914543, "last_edit_date": 1508914618, "question_id": 46925862, "link": "https://stackoverflow.com/questions/46925862/execution-of-volatile-instruction", "closed_reason": "Duplicate", "title": "Execution of volatile instruction", "body": "<pre><code>int __attribute__ ((noinline)) mySystemCall (uint32 Exception, uint32 Parameter)\n{ \n   #ifdef PROCESSORX\n   __asm__ volatile (\"sc\")\n   #else\n   __asm__ __volatile__ (\"mov R0, %0; mov R1, %1; svc 0x0 \" : : \"r\" (Exception), \"r\" (Parameter));\n\n}\n</code></pre>\n\n<p>How does the compiler translate the instruction (asm volatile (\"sc\"))?</p>\n\n<p>Why are some arguments passed as strings and some are not (ex: </p>\n\n<pre><code> __asm__ __volatile__(\"rdtsc\": \"=a\" (a), \"=d\" (d) ))\n</code></pre>\n"}, {"tags": ["c", "assembly", "symbols", "extern", "dereference"], "comments": [{"owner": {"reputation": 852, "user_id": 3227496, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/874115077/picture?type=large", "display_name": "Hans Petter Taugb&#248;l Kragset", "link": "https://stackoverflow.com/users/3227496/hans-petter-taugb%c3%b8l-kragset"}, "edited": false, "score": 1, "creation_date": 1508915978, "post_id": 46925694, "comment_id": 80799257, "body": "Can you show the relevant parts of the ASM code?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1508923091, "post_id": 46925694, "comment_id": 80803774, "body": "You mean <code>&amp;var</code> is a double-pointer?  So you have to load twice to access the malloced memory?  Yes, that&#39;s what happens when you store malloc return values in memory instead of passing them in registers."}, {"owner": {"reputation": 163, "user_id": 2281013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/m4Iqr.png?s=128&g=1", "display_name": "Hertzu", "link": "https://stackoverflow.com/users/2281013/hertzu"}, "edited": false, "score": 0, "creation_date": 1509011132, "post_id": 46925694, "comment_id": 80849028, "body": "I have added a code sample in ASM. I would like to avoid using brackets twice!"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1509123070, "post_id": 46925694, "comment_id": 80907259, "body": "@Nicol&#225;sHertzulis There isn&#39;t really a way to avoid that as I explained in my answer. That&#39;s just how assembly works. The first load fetches the pointer, the second fetches the datum pointed to."}], "answers": [{"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": false, "score": 3, "last_activity_date": 1508920341, "creation_date": 1508920341, "answer_id": 46927625, "question_id": 46925694, "link": "https://stackoverflow.com/questions/46925694/how-to-dereference-a-pointer-in-asm-data-section/46927625#46927625", "title": "How to dereference a pointer in ASM data section?", "body": "<p>That's how variables work. The value of a symbol (i.e. its address) cannot change at runtime, which is why symbols generally resolve to the address of a datum and not the datum itself. There is no way to get the exact behaviour you desire because the address <code>malloc</code> returns cannot be known at link time.</p>\n\n<p>If you want to avoid dealing with variables containing pointers, consider creating an array in static storage instead.</p>\n"}], "owner": {"reputation": 163, "user_id": 2281013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/m4Iqr.png?s=128&g=1", "display_name": "Hertzu", "link": "https://stackoverflow.com/users/2281013/hertzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1509010971, "creation_date": 1508914073, "last_edit_date": 1509010971, "question_id": 46925694, "link": "https://stackoverflow.com/questions/46925694/how-to-dereference-a-pointer-in-asm-data-section", "title": "How to dereference a pointer in ASM data section?", "body": "<p>I have a C code that declares a global pointer and initializes it. Something like this:</p>\n\n<pre><code>my_type* var = malloc(...)\n</code></pre>\n\n<p>When I declare var as an extern symbol in ASM x86 I get a reference to the pointer, i.e. a double pointer, which is really inconvenient because whenever I want to access the content I have to do something like this:</p>\n\n<pre><code>extern var\nmov ax, [var]\nmov dx, [ax]\n</code></pre>\n\n<p>I want to get a symbol in ASM that holds the value returned by malloc, i.e a pointer to my_type as I have in the C code. </p>\n\n<p>Is there a way to do this?</p>\n"}]