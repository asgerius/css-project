[{"tags": ["java", "c", "macos", "java-native-interface", "sudo"], "answers": [{"tags": [], "owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "is_accepted": false, "score": 1, "last_activity_date": 1501110888, "creation_date": 1501110888, "answer_id": 45338897, "question_id": 45338813, "link": "https://stackoverflow.com/questions/45338813/run-jni-native-code-as-root-mac/45338897#45338897", "title": "Run JNI Native Code as Root (Mac)", "body": "<p>Native linked libraries are run in the process space of the linked application, so you will need to run the entire application as root for the native code to execute as root (you could however investigate <a href=\"https://serverfault.com/questions/267227/why-is-chroot-never-used-on-mac-os-x\"><code>chroot</code></a>).</p>\n"}], "owner": {"reputation": 909, "user_id": 3420060, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/lrXwx.png?s=128&g=1", "display_name": "Crizly", "link": "https://stackoverflow.com/users/3420060/crizly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501110888, "creation_date": 1501110258, "question_id": 45338813, "link": "https://stackoverflow.com/questions/45338813/run-jni-native-code-as-root-mac", "title": "Run JNI Native Code as Root (Mac)", "body": "<p>I've got some C code (.so file) that I call from a java app (JNI) that needs to be run as root.</p>\n\n<p>Is there any way to make the .so file run as root (on a mac) without having to make the entire java app run as root?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1501113647, "post_id": 45338719, "comment_id": 77640458, "body": "There are multiple issues that will need to be addressed.  How have you set the default locale to Vietnamese?  Does the environment have locale support for Vietnamese?  Are you using the appropriate code set (UTF-8, or perhaps UTF-16 or even UTF-32 if you&#39;re using <code>wchar_t</code>)? Regarding the regexes, you&#39;d have to define a multibyte code set to support the full range of characters; there isn&#39;t an 8-bit code set that can support the full diversity of Vietnamese, is there?"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1501113977, "post_id": 45338719, "comment_id": 77640535, "body": "Can you also tell us what return <code>setlocale</code> in your case?"}], "owner": {"reputation": 13, "user_id": 5378491, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076233655720922/picture?type=large", "display_name": "Ki&#234;n Tr\u1ecbnh", "link": "https://stackoverflow.com/users/5378491/ki%c3%aan-tr%e1%bb%8bnh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501113472, "creation_date": 1501109727, "last_edit_date": 1501113472, "question_id": 45338719, "link": "https://stackoverflow.com/questions/45338719/setlocale-in-ndk-seems-not-to-work-for-my-language-vietnamese", "title": "setlocale in NDK seems not to work for my language (Vietnamese)", "body": "<p>My language is VietNam. I use NDK for run my code C in Android but some functions that use <code>wchar_t</code> do not work correctly. I think function <code>setlocale(LC_CTYPE, \"\");</code> does not work or does not work correctly for my language when using NDK.</p>\n\n<p>Code example:</p>\n\n<pre><code>void synthesis_main(){\n    setlocale(LC_CTYPE, \"\");\n    __android_log_print(ANDROID_LOG_INFO, \"ANDROID_LOG_INFO \", \"TEST %ls\",L\"T\u00f4i r\u1ea5t vui n\u1ebfu ch\u1ea1y \u0111\u01b0\u1ee3c.\");\n}\n</code></pre>\n\n<p>Result:</p>\n\n<ul>\n<li>have only character \"T\"</li>\n</ul>\n\n<p>My question:</p>\n\n<ul>\n<li>How do I make setlocale(LC_CTYPE, \"\") work with NDK?</li>\n<li>Is there a regex library can use for characters in Japan or VietNam which use type of character is <code>char</code> (not <code>wchar_t</code>)?</li>\n</ul>\n"}, {"tags": ["c", "language-lawyer", "c11"], "comments": [{"owner": {"reputation": 930, "user_id": 7800665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cidmm.jpg?s=128&g=1", "display_name": "MrJLP", "link": "https://stackoverflow.com/users/7800665/mrjlp"}, "edited": false, "score": 2, "creation_date": 1501110518, "post_id": 45338651, "comment_id": 77639688, "body": "What&#39;s the actual error?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1501111835, "post_id": 45338651, "comment_id": 77640014, "body": "\u2026and, wholly tangentially, I note that this fragment defines <code>g</code> as <code>int g()</code> rather than <code>int g(void)</code>.  This should lay to rest the canard that <code>int main()</code> is not approved by the standard \u2014 there is no prototype for <code>g()</code>, but the function definition is valid."}, {"owner": {"reputation": 2500, "user_id": 452266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ee44db2603eda7d1f62f0317d6b9f8?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/452266/brian"}, "edited": false, "score": 2, "creation_date": 1501112306, "post_id": 45338651, "comment_id": 77640149, "body": "I read the problem as function <code>g</code> is passing in both fields of the union to <code>f</code>.  <code>f</code> is treating each parameter as an independent structure, except that they actually come from the same union and thus alias."}], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "edited": false, "score": 0, "creation_date": 1501188221, "post_id": 45339179, "comment_id": 77682610, "body": "I am still trying to understand it: <code>&amp;u.s1</code> and <code>&amp;u.s2</code> gets evaluated inside g (and g has visibility of union u) before calling f and then they get passed as a pair of input params (a pointer to struct t1 and a pointer to astruct t2)  to f on stack. Why does f need to know the details of union u?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "edited": false, "score": 0, "creation_date": 1501193985, "post_id": 45339179, "comment_id": 77685073, "body": "Good question. I don&#39;t have a definitive answer \u2014 but it&#39;s roughly &quot;because the standard says so&quot;. Two important C compilers don&#39;t think there&#39;s a problem, even when their arms are twisted hard to complain about anything and everything. I rechecked with <code>-fstrict-aliasing</code> specified too; no complaints. In my initial comment, I noted that examples are not normative \u2014 they can be removed without changing the meaning of the standard, and errors in examples are undesirable (and rare) but do not affect the validity of the standard (see <a href=\"https://stackoverflow.com/questions/21364398/\">SO 21364398</a>)."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "edited": false, "score": 0, "creation_date": 1501194209, "post_id": 45339179, "comment_id": 77685134, "body": "The sub-text to my comment is that there&#39;s a possibility that this example is erroneous, though it is pretty unlikely.  You can find rules about aliasing in the C11 standard &#167;6.5 <b>Expressions</b>, &#182;7: <i>An object shall have its stored value accessed only by an lvalue expression that has one of the following types:</i> (followed by a bullet list) with footnote 88 which says <i>The intent of this list is to specify those circumstances in which an object may or may not be aliased.</i> The list uses the term <i>effective type</i> specified in &#182;6 \u2014 see also &#167;6.2.7 <b>Compatible type and composite type</b>. is also"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "edited": false, "score": 0, "creation_date": 1501194434, "post_id": 45339179, "comment_id": 77685193, "body": "This sort of dizzying spinning through different sections of the standard makes it hard to be sure what&#39;s going on at times."}, {"owner": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "edited": false, "score": 0, "creation_date": 1501229747, "post_id": 45339179, "comment_id": 77697119, "body": "Thanks @Jonathan-leffler for your guidance!"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1502708349, "post_id": 45339179, "comment_id": 78303236, "body": "Since the union is not visible to <code>f</code>, the compiler may assume when compiling <code>f</code> that <code>*p1</code> and <code>*p2</code> do not alias each other."}, {"owner": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1502750553, "post_id": 45339179, "comment_id": 78326196, "body": "@R.. thanks for input, so this means possibility of missing a chance to optimize by compiler, but does that make it invalid as per the note Example 3 in &#167;6.5.2.3 Structure and union members of ISO/IEC 9899:2011? I resolved it based on Jonathan Leffler&#39;s comment that it might be erroneous."}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "reply_to_user": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "edited": false, "score": 0, "creation_date": 1502755393, "post_id": 45339179, "comment_id": 78327390, "body": "@VikasYadav: You interpreted my comment backwards. I said the compiler <i>may assume</i>, (rather than <i>may not assume</i>) that they don&#39;t alias each other. Jonathan is wrong in thinking the example is erroneous. The compiler can clearly reorder (or otherwise optimize) the accesses to <code>*p1</code> and <code>*p2</code>, assuming they don&#39;t refer to the same object, thereby yielding a different result from what would necessarily be obtained if the union were visible to <code>f</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1515343552, "post_id": 45339179, "comment_id": 83256189, "body": "Although I mention that examples in the standard are not normative, they are supposed to be illustrative and do not contain errors in the ordinary course of events.  Despite any comments made previously (by me), I don&#39;t think there&#39;s likely to be an error in the standard (nor in this example in the standard)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1516914077, "post_id": 45339179, "comment_id": 83896627, "body": "@JonathanLeffler: The fact that some compilers &quot;interpret&quot; the Standard in a way which is incompatible with a large amount of code that would rely upon Common Initial Sequence guarantees in ways that were defined in C89 would seem prima facie evidence that the Standard is defective.  The real problem, though, is that the Standard fails to attach any significance to the act of driving a pointer of one type from a pointer or lvalue of another.  If a function receives a <code>struct t1*</code> and a <code>struct t2*</code> and there is no evidence within the function that the types might alias, it might be..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1516914354, "post_id": 45339179, "comment_id": 83896785, "body": "...reasonable for a compiler to assume they won&#39;t even if they share a CIS in a visible declared union type.  If, however, one function receives two pointers of type <code>struct t1*</code>, does some stuff with the first, casts the second one of them to <code>struct t2*</code> and passes it to another function, and then does some more stuff with the first, the fact that the cast and use of the second pointer appeared between the two groups of actions with s1 should be recognized as giving adequate notice that the second function might affect something of type s1."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1517265059, "post_id": 45339179, "comment_id": 84017022, "body": "BTW, unless things have changed very recently, gcc doesn&#39;t care about whether the complete union type is visible but ignores the CIS guarantee even when a complete union type is visible."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 6, "last_activity_date": 1501136271, "last_edit_date": 1501136271, "creation_date": 1501113042, "answer_id": 45339179, "question_id": 45338651, "link": "https://stackoverflow.com/questions/45338651/c11-related-language-correctness/45339179#45339179", "title": "C11 related language correctness", "body": "<p>The example comes from Example 3 in \u00a76.5.2.3 <strong>Structure and union members</strong> of ISO/IEC 9899:2011.  One of the prior paragraphs is (<strong>emphasis</strong> added):</p>\n\n<blockquote>\n  <p>\u00b66 One special guarantee is made in order to simplify the use of unions: if a union contains several structures that share a common initial sequence (see below), and if the union object currently contains one of these structures, it is permitted to inspect the common initial part of any of them <strong>anywhere that a declaration of the completed type of the union is visible</strong>. Two structures share a <em>common initial sequence</em> if corresponding members have compatible types (and, for bit-fields, the same widths) for a sequence of one or more initial members.</p>\n</blockquote>\n\n<p>The code quoted in the question is preceded by the comment:</p>\n\n<blockquote>\n  <p>The following is not a valid fragment (because the union type is not visible within function <code>f</code>).</p>\n</blockquote>\n\n<p>This now makes sense in light of the highlighted statement.  The code in <code>g()</code> is making use of the common initial sequence, but that only applies where the <code>union</code> is visible and it isn't visible in <code>f()</code>.</p>\n\n<p>The issue is also one of strict aliasing.  That's a complex topic.  See <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">What is the strict aliasing rule?</a> for the details.</p>\n\n<p>For whatever it is worth, GCC 7.1.0 doesn't report the problem even under stringent warning options.  Neither does Clang, even with the <code>-Weverything</code> option:</p>\n\n<pre><code>clang -O3 -g -std=c11 -Wall -Wextra -Werror -Wmissing-prototypes \\\n    -Wstrict-prototypes -Weverything -pedantic \u2026\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1517264936, "post_id": 45342544, "comment_id": 84016973, "body": "The Effective Type rule offers heap-duration objects an example of objects which have no declared type, and does not so far as I can tell contain any rule for treating objects of static or automatic duration (which are required to have declared types) as though they have a declared type in some contexts but not others.  Requiring that compilers treat such objects as though they might have a declared type the compiler can&#39;t see would in many cases impair optimization, but I know of nothing in the Standard that says compilers only have to follow the rules..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1517264950, "post_id": 45342544, "comment_id": 84016978, "body": "...when convenient to do so.  What am I missing?"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 3, "last_activity_date": 1501135540, "creation_date": 1501135540, "answer_id": 45342544, "question_id": 45338651, "link": "https://stackoverflow.com/questions/45338651/c11-related-language-correctness/45342544#45342544", "title": "C11 related language correctness", "body": "<p>This is because of the \"effective type\" rule. If you see <code>f</code> isolated, the two arguments have different type, and the compiler is allowed to do certain optimizations.</p>\n\n<p>Here, <code>p1</code> is accessed twice. If <code>p1</code> and <code>p2</code> are supposed to be different, the compiler needs not to reload <code>p1</code>'s value for the <code>return</code> since it cannot have changed.</p>\n\n<p><code>f</code> is valid code, and the optimization is valid.</p>\n\n<p>Calling it with the same object, in <code>g</code>, is not valid, because without seeing that both may come from the same <code>union</code> the compiler may not take provisions to avoid the optimization.</p>\n\n<p>This is one of the cases, where the whole burden to prove that a call is valid lays on the user of a function, generally no compiler can warn you about this if <code>f</code> and <code>g</code> happen to be in different translation units.</p>\n"}], "owner": {"reputation": 322, "user_id": 1974707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a271d991e6b79402cdfc7be10e9c441?s=128&d=identicon&r=PG", "display_name": "Vikas Yadav", "link": "https://stackoverflow.com/users/1974707/vikas-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 45339179, "answer_count": 2, "score": 5, "last_activity_date": 1515343228, "creation_date": 1501109222, "last_edit_date": 1515343228, "question_id": 45338651, "link": "https://stackoverflow.com/questions/45338651/c11-related-language-correctness", "title": "C11 related language correctness", "body": "<p>The following code snippet is an example from the <a href=\"http://port70.net/~nsz/c/c11/n1570.html/#6.5.2.3p6\" rel=\"nofollow noreferrer\">C11 standard \u00a76.5.2.3</a>:</p>\n\n<pre><code>struct t1 { int m; };\nstruct t2 { int m; };\nint f(struct t1 *p1, struct t2 *p2)\n{\n    if (p1-&gt;m &lt; 0)\n        p2-&gt;m = -p2-&gt;m;\n    return p1-&gt;m;\n}\nint g()\n{\n    union {\n        struct t1 s1;\n        struct t2 s2;\n    } u;\n    /* ... */\n    return f(&amp;u.s1, &amp;u.s2);\n}\n</code></pre>\n\n<p>As per C11, the last line inside <code>g()</code> is invalid. Why so? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1501109218, "post_id": 45338636, "comment_id": 77639346, "body": "Care to be more specific than &quot;some error&quot;?"}, {"owner": {"reputation": 5, "user_id": 8372814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae54bc90bb50aa5cd69cafcda9721d92?s=128&d=identicon&r=PG&f=1", "display_name": "Ron ", "link": "https://stackoverflow.com/users/8372814/ron"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1501109291, "post_id": 45338636, "comment_id": 77639367, "body": "this: prog.c: In function \u2018main\u2019: prog.c:15:9: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018<b>attribute</b>\u2019 before \u2018int\u2019          int i, n;          ^~~ prog.c:16:9: warning: implicit declaration of function \u2018clrscr\u2019 [-Wimplicit-function-declaration]          clrscr();          ^~~~~~ prog.c:25:33: warning: format \u2018%s\u2019 expects argument of type \u2018char <i>\u2019, but argument 2 has type \u2018char (</i>)[100]\u2019 [-Wformat=]                          scanf(&quot;%s&quot;,&amp;e[i].name);                                  ^"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1501109314, "post_id": 45338636, "comment_id": 77639377, "body": "<i>having some error</i> is an absolutely useless problem description. We can&#39;t see your screen or read your mind. Explain <b>specifically</b> what <i>error</i> or problem you&#39;re having, and ask a <b>specific question</b> about that problem. Do so by making an <a href=\"https://stackoverflow.com/posts/45338636/edit\">edit</a> to your question and adding the details there in the question where they belong, not buried in comment noise."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501109381, "post_id": 45338636, "comment_id": 77639401, "body": "1) <code>struct employee emp[100]</code> --&gt; <code>struct employee emp[100];</code> or delete this."}, {"owner": {"reputation": 5, "user_id": 8372814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae54bc90bb50aa5cd69cafcda9721d92?s=128&d=identicon&r=PG&f=1", "display_name": "Ron ", "link": "https://stackoverflow.com/users/8372814/ron"}, "edited": false, "score": 0, "creation_date": 1501109399, "post_id": 45338636, "comment_id": 77639403, "body": "edit the thread, added the error in bottom. Thanks"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501109408, "post_id": 45338636, "comment_id": 77639406, "body": "2) <code>\\%d</code> --&gt; <code>\\\\%d</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501109463, "post_id": 45338636, "comment_id": 77639426, "body": "3) <code>&amp;e[i].name</code> --&gt; <code>e[i].name</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501109506, "post_id": 45338636, "comment_id": 77639435, "body": "4) <code>clrscr();</code> : Delete this. This is not standard function."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1501109586, "post_id": 45338636, "comment_id": 77639460, "body": "The error messages are really clear about what&#39;s wrong. Can you ask about specifically what you don&#39;t understand?"}, {"owner": {"reputation": 5, "user_id": 8372814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae54bc90bb50aa5cd69cafcda9721d92?s=128&d=identicon&r=PG&f=1", "display_name": "Ron ", "link": "https://stackoverflow.com/users/8372814/ron"}, "edited": false, "score": 0, "creation_date": 1501109932, "post_id": 45338636, "comment_id": 77639547, "body": "In the error, i am not understanding the part where it says &quot;expected &quot;=&quot; ... before int."}, {"owner": {"reputation": 5, "user_id": 8372814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae54bc90bb50aa5cd69cafcda9721d92?s=128&d=identicon&r=PG&f=1", "display_name": "Ron ", "link": "https://stackoverflow.com/users/8372814/ron"}, "edited": false, "score": 0, "creation_date": 1501110031, "post_id": 45338636, "comment_id": 77639569, "body": "Problem fixed, thanks!"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501110045, "post_id": 45338636, "comment_id": 77639573, "body": "<i>&quot;expected &quot;=&quot; ... before int.</i> You forgot to write <code>;</code> at the end of the previous line."}], "answers": [{"tags": [], "owner": {"reputation": 1250, "user_id": 8340832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee45d1f85fce309587afa3bdab7c42?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval Ben-Arie", "link": "https://stackoverflow.com/users/8340832/yuval-ben-arie"}, "is_accepted": false, "score": 4, "last_activity_date": 1501110425, "last_edit_date": 1501110425, "creation_date": 1501109776, "answer_id": 45338730, "question_id": 45338636, "link": "https://stackoverflow.com/questions/45338636/error-in-c-code-using-structure/45338730#45338730", "title": "Error in C code using Structure", "body": "<ol>\n<li>Remove <code>clrscr</code> function  </li>\n<li>Remove <code>e[100]</code></li>\n<li>Add <code>;</code> after <code>emp[100]</code></li>\n<li>Fix indentation</li>\n<li>Use <code>emp</code> instead of <code>e</code> everywhere.</li>\n<li>Use <code>SIZE</code> and add <code>MAX_STR_LEN</code>.</li>\n<li>Change <code>\\%d</code> to <code>\\t %d</code></li>\n<li>Separate <code>age</code> and <code>salary</code> to two lines (best practice).</li>\n<li>Check input <code>n</code>.</li>\n<li>Should also add some overflow protection when getting names of employees. I leave that for you to research.</li>\n</ol>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define MAX_STR_LEN 100\n#define SIZE 100\n\n\nstruct employee\n{\n    int empno;\n    char name[MAX_STR_LEN];\n    int age;\n    int salary;\n};\n\nint main(void)\n{ \n    struct employee emp[SIZE];\n    int i, n;\n\n    printf(\"Enter the number of employees\\n\");\n    scanf(\"%d\",&amp;n);\n\n    if (n &gt; SIZE) {\n        printf(\"Too many employees (will process first %d)\\n\", SIZE);\n        n = SIZE;\n    }\n\n    for (i = 0; i &lt; n; i++)\n    {\n        printf(\"\\n Enter employee number : \");\n        scanf(\"%d\",&amp;emp[i].empno);\n\n        printf(\"\\n Enter name of employee : \");\n        scanf(\"%s\",&amp;emp[i].name);\n\n        printf(\"\\n Enter age of employee : \");\n        scanf(\"%d\",&amp;emp[i].age);\n\n        printf(\"\\n Enter salary of employee : \");\n        scanf(\"%d\",&amp;emp[i].salary);\n    }   \n    printf(\"\\n Emp. No. Name \\t Age \\t Salary \\n\\n\");\n    for (i = 0; i &lt; n; i++)\n    {\n        printf(\"%d \\t %s \\t %d \\t %d \\n\", \n            emp[i].empno, emp[i].name, emp[i].age, emp[i].salary);\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8372814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae54bc90bb50aa5cd69cafcda9721d92?s=128&d=identicon&r=PG&f=1", "display_name": "Ron ", "link": "https://stackoverflow.com/users/8372814/ron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1501110425, "creation_date": 1501109132, "last_edit_date": 1501109432, "question_id": 45338636, "link": "https://stackoverflow.com/questions/45338636/error-in-c-code-using-structure", "title": "Error in C code using Structure", "body": "<p>i'm currently working on an assignment on which i have to use structure is c to WAP to take input of 100 employees as name, age and salary and show it as output but I am having some error which im not able to fix.</p>\n\n<p>PS: Newbie.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define SIZE 100\n\n\nstruct employee\n{\n    int empno;\n    char name[100];\n    int age, salary;\n} e[100];\n\nint main(void)\n{ \n    struct employee emp[100]\n    int i, n;\n    clrscr();\n\n        printf(\"Enter the number of employees\\n\");\n        scanf(\"%d\",&amp;n);\n            for (i=0;i&lt;n;i++)\n                {\n                    printf(\"\\n Enter employee number : \");\n                    scanf(\"%d\",&amp;e[i].empno);\n                    printf(\"\\n Enter name of employee : \");\n                    scanf(\"%s\",&amp;e[i].name);\n                    printf(\"\\n Enter age of employee : \");\n                    scanf(\"%d\",&amp;e[i].age);\n                    printf(\"\\n Enter salary of employee : \");\n                    scanf(\"%d\",&amp;e[i].salary);\n                }   \n        printf(\"\\n Emp. No. Name \\t Age \\t Salary \\n\\n\");\n            for (i=0;i&lt;n;i++)\n                printf(\"%d \\t %s \\t %d \\%d \\n\", \ne[i].empno,e[i].name,e[i].age,e[i].salary);\nreturn 0;\n}\n</code></pre>\n\n<p>and this is the error</p>\n\n<pre><code>prog.c: In function \u2018main\u2019:\nprog.c:15:9: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018int\u2019\n         int i, n;\n         ^~~\nprog.c:16:9: warning: implicit declaration of function \u2018clrscr\u2019 [-Wimplicit-function-declaration]\n         clrscr();\n         ^~~~~~\nprog.c:25:33: warning: format \u2018%s\u2019 expects argument of type \u2018char *\u2019, but argument 2 has type \u2018char (*)[100]\u2019 [-Wformat=]\n                         scanf(\"%s\",&amp;e[i].name);\n                             ^\n</code></pre>\n"}, {"tags": ["c", "mapping"], "comments": [{"owner": {"reputation": 1250, "user_id": 8340832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee45d1f85fce309587afa3bdab7c42?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval Ben-Arie", "link": "https://stackoverflow.com/users/8340832/yuval-ben-arie"}, "edited": false, "score": 0, "creation_date": 1501109404, "post_id": 45337528, "comment_id": 77639405, "body": "same source code means same source files or just same code in another file?"}, {"owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "reply_to_user": {"reputation": 1250, "user_id": 8340832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee45d1f85fce309587afa3bdab7c42?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval Ben-Arie", "link": "https://stackoverflow.com/users/8340832/yuval-ben-arie"}, "edited": false, "score": 0, "creation_date": 1501180829, "post_id": 45337528, "comment_id": 77678722, "body": "same source files"}], "owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501103567, "creation_date": 1501103567, "question_id": 45337528, "link": "https://stackoverflow.com/questions/45337528/what-does-debug-info-mean-in-a-map-file-where-all-the-object-o-files-were-l", "title": "what does .debug_info mean in a map file where all the object (*.o) files were listed?", "body": "<p>For the same source code the hex files compile to be identical, however the *.elf and *.map files are different only under the <code>.debug_info     0x00000000    0x294b5</code> section. Memory addresses are same otherwise.</p>\n"}, {"tags": ["c", "arrays", "malloc", "realloc", "strtok"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1501101567, "post_id": 45336910, "comment_id": 77635968, "body": "<code>malloc&#47;strcpy</code> can be replaced by <code>strdup</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501101679, "post_id": 45336910, "comment_id": 77636033, "body": "<code>*(array+j)</code> : The area of <code>NULL</code> as sentinel is not secured and stored. and Add the caller&#39;s code."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1501101719, "post_id": 45336910, "comment_id": 77636053, "body": "@EugeneSh., <code>strdup</code> is not in standard C (but widely available), so if this is some sort of exercise, this could be problematic."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1501101730, "post_id": 45336910, "comment_id": 77636065, "body": "The print loop attempts to iterate until it meets a NULL pointer, but you do not ensure that there is a NULL pointer at the end of the list."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1501101795, "post_id": 45336910, "comment_id": 77636107, "body": "@FlorianWeimer Hm.you are right, wasn&#39;t aware it is not standard."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1501102314, "post_id": 45336910, "comment_id": 77636365, "body": "@FlorianWeimer-- <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/strdup.html\" rel=\"nofollow noreferrer\">it <i>is</i> POSIX</a>, so that&#39;s something...."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8372262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdfc3419ae702e2f747bf4ecb2d4206?s=128&d=identicon&r=PG&f=1", "display_name": "phlatphish", "link": "https://stackoverflow.com/users/8372262/phlatphish"}, "edited": false, "score": 0, "creation_date": 1501258837, "post_id": 45338005, "comment_id": 77717865, "body": "Because I am a nube I can&#39;t upvote comments or answers, so thank you for the tip about ending the array with a NULL pointer. That proved very useful. Along the way I also learned not to nest calls to strtok. Lost a day or two on that."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 95, "user_id": 8372262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdfc3419ae702e2f747bf4ecb2d4206?s=128&d=identicon&r=PG&f=1", "display_name": "phlatphish", "link": "https://stackoverflow.com/users/8372262/phlatphish"}, "edited": false, "score": 0, "creation_date": 1501283152, "post_id": 45338005, "comment_id": 77728406, "body": "@phlatphish You may select the best answer that is in this case a single answer.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1501105630, "creation_date": 1501105630, "answer_id": 45338005, "question_id": 45336910, "link": "https://stackoverflow.com/questions/45336910/making-an-array-of-tokens-from-string-with-strtok-malloc-and-realloc/45338005#45338005", "title": "Making an array of tokens from string with strtok, malloc, and realloc", "body": "<p>You should append the array of pointers with a null pointer. Otherwise it is unknown how many elements the array contains.</p>\n\n<p>If to use your approach that is not smart enough because it does not report an allocation error then the function can look as it is shown in this demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar ** chunkify( char *line, const char *sep )\n{\n    char **array = malloc( sizeof( char * ) );\n\n    if ( array )\n    {\n        size_t n = 1;\n\n        char *token = strtok( line, sep );\n\n        while ( token )\n        {\n            char **tmp = realloc( array, ( n + 1 ) * sizeof( char * ) );\n\n            if ( tmp == NULL ) break;\n\n            array = tmp;\n            ++n;\n\n            array[ n - 2 ] = malloc( strlen( token ) + 1 );\n            if ( array[ n - 2 ] != NULL ) strcpy( array[ n - 2 ], token );\n\n            token = strtok( NULL, sep );\n        }\n\n        array[ n - 1 ] = NULL;\n    }\n\n    return array;\n}\n\nint main(void) \n{\n    char s[] = \"Hello World\";\n    char **array = chunkify( s, \" \" );\n\n    if ( array != NULL )\n    {\n        for ( char **p = array; *p; ++p ) puts( *p );\n\n        for ( char **p = array; *p; ++p ) free( *p );\n        free( array );\n    }       \n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Hello\nWorld\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 8372262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fdfc3419ae702e2f747bf4ecb2d4206?s=128&d=identicon&r=PG&f=1", "display_name": "phlatphish", "link": "https://stackoverflow.com/users/8372262/phlatphish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1036, "favorite_count": 0, "accepted_answer_id": 45338005, "answer_count": 1, "score": 2, "last_activity_date": 1501105630, "creation_date": 1501101328, "question_id": 45336910, "link": "https://stackoverflow.com/questions/45336910/making-an-array-of-tokens-from-string-with-strtok-malloc-and-realloc", "title": "Making an array of tokens from string with strtok, malloc, and realloc", "body": "<p>There are some topics that partially overlap with this but I am still seeking an answer.</p>\n\n<p>The tokenizing part is working fine but the dynamic memory allocation seems not to be, based on a segfault when the print loop is uncommented.</p>\n\n<p>The free() is just to check whether free() works, not to be part of the finished function, and it is returning NULL until it can return something sensible.</p>\n\n<p>sep is usually a space. Any \\n on the end of line is taken care of before it gets here.</p>\n\n<pre><code>char ** chunkify(char *line, char *sep)\n{\n   printf(\"%s\\n\", line);\n\n   char **array = malloc(sizeof(char *));        \n   int token_count = 0;\n   char *token = NULL;   \n   token = strtok(line, sep);\n\n   while( token != NULL )\n   {              \n      printf(\"\\t%s\\n\", token);\n      array = realloc(array,(token_count + 1) * sizeof(char *));      \n      array[token_count] = malloc(strlen(token) + 1);\n      strcpy(array[token_count],token);\n      token = strtok(NULL, sep);\n      token_count++;\n   }  \n\n   /*\n   int j;\n   for ( j=0 ; *(array+j) ; ++j)\n   {\n      printf(\"\\t%s\\n\", *(array+j));\n      free(*(array+j)); // just to see if it frees cleanly\n   }\n   free(array);\n   */\n\n   return NULL; // will return array when it's fixed\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "concurrency", "serial-port", "tty"], "answers": [{"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 1, "last_activity_date": 1501107693, "last_edit_date": 1501107693, "creation_date": 1501107363, "answer_id": 45338324, "question_id": 45336300, "link": "https://stackoverflow.com/questions/45336300/open-tty-from-multiple-processes-simultaneously-possible/45338324#45338324", "title": "open tty from multiple processes simultaneously possible?", "body": "<p>Normally, it is possible to open a serial device from more than one process simultaneously.</p>\n\n<p>You can use the <a href=\"http://man7.org/linux/man-pages/man2/ioctl_tty.2.html\" rel=\"nofollow noreferrer\"><code>TIOCEXCL</code></a> <a href=\"http://man7.org/linux/man-pages/man2/ioctl.2.html\" rel=\"nofollow noreferrer\"><code>ioctl()</code></a> to get exclusive access:</p>\n\n<pre><code>if (!ioctl(fd, TIOCEXCL)) {\n    /* Any further open() on the tty\n       that is currently open on descriptor fd\n       will fail with errno == EBUSY\n       (except for the administrator, with the \n        CAP_SYS_ADMIN capability) */\n}\n</code></pre>\n\n<p>and to re-allow other <code>open()</code>s,</p>\n\n<pre><code>ioctl(fd, TIOCNXCL);\n</code></pre>\n\n<p>You'll need to include <code>&lt;sys/ioctl.h&gt;</code> for the function, and <code>&lt;termios.h&gt;</code> for the constants.</p>\n\n<p>Many Linux serial libraries already do this. Some serial drivers may allow only one open at a time, too, so to determine the reason for the behaviour you are seeing, I'd need a lot more details (how you open the serial device, and the serial device driver used, in particular).</p>\n\n<p>Personally -- and I do believe this is what most Linux serial libraries do --, I recommend you <em>try</em> the <code>ioctl(fd, TIOCEXCL)</code>, and <em>maybe</em> warn the user if it fails (it returns 0 if success, -1 otherwise); and, in all cases, use <code>ioctl(fd, TIOCNXCL); close(fd);</code> to close the tty.</p>\n"}], "owner": {"reputation": 1325, "user_id": 1285331, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r3T0X.jpg?s=128&g=1", "display_name": "Fabian Knapp", "link": "https://stackoverflow.com/users/1285331/fabian-knapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1302, "favorite_count": 0, "accepted_answer_id": 45338324, "answer_count": 1, "score": 0, "last_activity_date": 1501141126, "creation_date": 1501099046, "last_edit_date": 1501141126, "question_id": 45336300, "link": "https://stackoverflow.com/questions/45336300/open-tty-from-multiple-processes-simultaneously-possible", "title": "open tty from multiple processes simultaneously possible?", "body": "<p>I have to ensure that a tty device on linux is only accessible from one instance at once.\nTo do so, I have implemented a <code>flock()</code> function.\nHowever, in my tests I wasnt able to open the serial port from another process at the same time even without the <code>flock()</code> logic.</p>\n\n<p>Im now wondering if this is the normal behaviour in all cases so I can delete my <code>flock()</code> logic and rely on the blocking <code>open()</code> logic? Is it in any case possible to open a serial port from different instances simultaneously?</p>\n\n<p>EDIT:</p>\n\n<p>I have figured out that it is indeed possible to open the tty port multiple times simultaneously without <code>flock()</code> logic.\nHowever, it seems, that the <code>open()</code> function is blocked due to the <code>flock()</code>.</p>\n"}, {"tags": ["python", "c", "python-3.x", "linker", "python-c-api"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 1, "creation_date": 1501098635, "post_id": 45336176, "comment_id": 77634347, "body": "You did not link the library."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1501098761, "post_id": 45336176, "comment_id": 77634428, "body": "Please edit the title! It does not make any sense and is just missleading. You don&#39;t &quot;embed Python code in C&quot;. You call simply functions from the Python C API. That&#39;s not different from any other library."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1501134460, "post_id": 45336176, "comment_id": 77645996, "body": "@Olaf technically this looks like embedding to me, see <code>PyRun_SimpleString(&quot;print(&#39;This is Python in C&#39;)&quot;);</code>. It is embedding via an library API."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501152688, "post_id": 45336176, "comment_id": 77658249, "body": "@AjayBrahmakshatriya: The title is completely different. And this is not really embedding, but simply passing a string to a library function. It is not different from e.g. <code>fopen</code> Where no one would say the file contents is embedded into the C code. In fact the question is not even related to Python or possibly C, but linking and there is no information given by the user to really solve it (jut rough guesses)."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1501356967, "post_id": 45336176, "comment_id": 77747156, "body": "@Olaf The python 2.7.13 documentation refers to this as Very High Level Embedding. See this <a href=\"https://docs.python.org/2/extending/embedding.html\" rel=\"nofollow noreferrer\">webpage</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1501357736, "post_id": 45336176, "comment_id": 77747406, "body": "@Simon: It could call it &quot;christianising&quot;. Doesn&#39;t change the fact you simply call a normal C functions and use a library. I already said: learn to abstract concepts."}], "answers": [{"comments": [{"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1501100082, "post_id": 45336396, "comment_id": 77635151, "body": "I have tried this but it returns an error saying it cannot find lpython3.6m the path on my computer for python is C:\\Users\\Simon\\AppData\\Local\\Programs\\Python\\Python36-32"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 1, "creation_date": 1501135816, "post_id": 45336396, "comment_id": 77646565, "body": "try to add -L C:\\Users\\Simon\\AppData\\Local\\Programs\\Python\\Python36-32\\lib&zwnj;&#8203;s"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1501154058, "post_id": 45336396, "comment_id": 77659263, "body": "Solved it ! Compiled it with gcc python_test_in_c.c -lpython36 added the python36 dll along with the exe and it works. The . (dot) and m in python3.6m generates an error, remove these and it works.Thanks for the help everyone."}], "tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": true, "score": 2, "last_activity_date": 1501099447, "creation_date": 1501099447, "answer_id": 45336396, "question_id": 45336176, "link": "https://stackoverflow.com/questions/45336176/calling-python-3-function-in-c/45336396#45336396", "title": "Calling Python-3 function in C", "body": "<p>You are not linking with the python library...</p>\n\n<p>try:</p>\n\n<pre><code>gcc python_test_in_c.c -lpython3.6m\n</code></pre>\n\n<p>change 3.6 to your version of choice...</p>\n"}], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 815, "favorite_count": 0, "accepted_answer_id": 45336396, "answer_count": 1, "score": 0, "last_activity_date": 1516977320, "creation_date": 1501098551, "last_edit_date": 1516977320, "question_id": 45336176, "link": "https://stackoverflow.com/questions/45336176/calling-python-3-function-in-c", "title": "Calling Python-3 function in C", "body": "<p>I am trying to call Python code in C with this code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Python.h&gt;\n\nint main()\n{\n    PyObject* pInt;\n\n    Py_Initialize();\n\n    PyRun_SimpleString(\"print('This is Python in C')\");\n\n    Py_Finalize();\n\n    printf(\"\\n\");\n    return 0;\n} \n</code></pre>\n\n<p>and have tried compiling it with this command:</p>\n\n<pre><code>gcc python_test_in_c.c \n</code></pre>\n\n<p>However it returns an error returns saying:</p>\n\n<pre><code>undefined referance to `__imp __Py_Initialise`\nundefined referance to `__imp__PyRun_SimpleSringFlags`\nundefined referance to `__imp__Py_Finalise`\ncollect2.exe:  error: ld returned 1 exit status\n</code></pre>\n\n<p>What is going wrong?  How can I fix this?</p>\n\n<p>Any help would be appreciated</p>\n\n<p>P.S I am not sure, but could this be something to do with the fact I copied the Python 'include' file (containing Python.h) in the include file for MinGW located at C:/MinGW</p>\n\n<p>UPDATE:  I have now learned this is ok to do but considered bad practice.</p>\n"}, {"tags": ["c", "arrays", "string", "pointers"], "comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1501096770, "post_id": 45335619, "comment_id": 77633273, "body": "Are you familiar with pointers and how they relate to arrays in C?"}, {"owner": {"reputation": 64, "user_id": 6842140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q1BsfksTdpU/AAAAAAAAAAI/AAAAAAAAADc/eVhfmgmuX6I/photo.jpg?sz=128", "display_name": "Vishal Shevale", "link": "https://stackoverflow.com/users/6842140/vishal-shevale"}, "edited": false, "score": 0, "creation_date": 1501096771, "post_id": 45335619, "comment_id": 77633274, "body": "char * will return the starting address of memory block for your string. So that you can have access to the string out of this method as well."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1501096852, "post_id": 45335619, "comment_id": 77633315, "body": "A C function cannot return an array, although it may return a <code>struct</code> which contains an array."}, {"owner": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 4, "creation_date": 1501096994, "post_id": 45335619, "comment_id": 77633391, "body": "This function should return <code>const char*</code> anyway."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 2, "creation_date": 1501097262, "post_id": 45335619, "comment_id": 77633542, "body": "@Rabbid76: If you mean &quot;it will help detect illegal write-accesses&quot;, you are correct. But it is - unfortunately - not required in C for legacy reasons which should have been burried deeply since 20 years."}, {"owner": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "reply_to_user": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1501097274, "post_id": 45335619, "comment_id": 77633547, "body": "@templatetypedef I know that array names can be used as pointer, so myArray and &amp;myArray[0] are the same thing"}, {"owner": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "reply_to_user": {"reputation": 138000, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1501097331, "post_id": 45335619, "comment_id": 77633587, "body": "@Rabbid76 Yes you&#39;re correct I was just in a hurry I guess :)"}, {"owner": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "reply_to_user": {"reputation": 64, "user_id": 6842140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q1BsfksTdpU/AAAAAAAAAAI/AAAAAAAAADc/eVhfmgmuX6I/photo.jpg?sz=128", "display_name": "Vishal Shevale", "link": "https://stackoverflow.com/users/6842140/vishal-shevale"}, "edited": false, "score": 0, "creation_date": 1501097400, "post_id": 45335619, "comment_id": 77633638, "body": "@ShewaleVishal Thanks for your answer it was exactly what I was looking for!"}, {"owner": {"reputation": 478, "user_id": 7989544, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RCpdI.jpg?s=128&g=1", "display_name": "Biswajit Roy", "link": "https://stackoverflow.com/users/7989544/biswajit-roy"}, "edited": false, "score": 1, "creation_date": 1501097866, "post_id": 45335619, "comment_id": 77633930, "body": "You need to return the start address of the array to get access to the array which you can get using *. I don&#39;t think we can directly return arrays."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501099017, "post_id": 45335619, "comment_id": 77634566, "body": "Instead you can return a pointer to an array."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501099429, "post_id": 45335619, "comment_id": 77634793, "body": "E.g <code>const char (*printstring(void))[10]{     return (const char(*)[10])&quot;my string&quot;; }</code> But this is limited and not easy to use."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1501141554, "post_id": 45335619, "comment_id": 77650134, "body": "&quot;<i>Since what the function does is return a character array</i>&quot; no, exactly not! It returns the address of the array&#39;s (as string here) 1st element (a <code>char</code> here)."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "edited": false, "score": 0, "creation_date": 1501097527, "post_id": 45335742, "comment_id": 77633727, "body": "I still haven&#39;t got to structs but just to reference your answer later are you saying there&#39;s another way I could achieve what I&#39;m trying to do?"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "edited": false, "score": 0, "creation_date": 1501098083, "post_id": 45335742, "comment_id": 77634027, "body": "@BareWithImANoob Yes. I added the code. It&#39;s probably a bad idea, though. Returning large objects in general is, in my opinion."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1501098246, "post_id": 45335742, "comment_id": 77634128, "body": "In <code>main</code> you could have <code>printf(&quot;%s\\n&quot;, printstring().chars);</code> But it is an ugly way of doing it."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 5, "last_activity_date": 1501097982, "last_edit_date": 1501097982, "creation_date": 1501096923, "answer_id": 45335742, "question_id": 45335619, "link": "https://stackoverflow.com/questions/45335619/why-does-the-function-have-to-return-a-char-but-not-a-char-array/45335742#45335742", "title": "Why does the function have to return a char * but not a char array?", "body": "<p>Because because of the the way C was designed, arrays are not first-class citizens in it. You can neither return them nor pass them to a function by value.</p>\n\n<p>If you want achieve either of those things, you'll have to wrap the array in a struct.</p>\n\n<pre><code>struct ten_chars{ char chars[10]; };\n\nstruct ten_chars printstring(void)\n{\n    return (struct ten_chars){\"my string\"};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "edited": false, "score": 0, "creation_date": 1501100139, "post_id": 45336105, "comment_id": 77635183, "body": "Thanks for clarifying that that &quot;my string&quot; decays to a pointer cause I didn&#39;t have that in mind"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "reply_to_user": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "edited": false, "score": 0, "creation_date": 1501100626, "post_id": 45336105, "comment_id": 77635464, "body": "@BareWithImANoob-- sure... that seemed like the answer to the question, &quot;why does the function have to return a <code>char *</code> but not a <code>char</code> array?&quot;"}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": false, "score": 2, "last_activity_date": 1501103589, "last_edit_date": 1501103589, "creation_date": 1501098210, "answer_id": 45336105, "question_id": 45335619, "link": "https://stackoverflow.com/questions/45335619/why-does-the-function-have-to-return-a-char-but-not-a-char-array/45336105#45336105", "title": "Why does the function have to return a char * but not a char array?", "body": "<p>The string literal <code>\"my string\"</code> does have array type. Note that <code>sizeof \"my string\"</code> will evaluate to <code>10</code>, as expected for an array that holds 10 <code>char</code>s (including the <code>'\\0'</code>). You can think of <code>\"my string\"</code> as an identifier that identifies an array, and decays to a pointer to the first element of the array in most expressions (but not in, e.g., <code>sizeof</code> expressions).</p>\n\n<p>So, in the return statement, <code>\"my string\"</code> decays to a pointer to the first element of the array that holds the characters of the string literal (and the null terminator). It is this pointer that is returned from the function, and this is why the return type must be <code>char *</code>.</p>\n\n<p>For the record, it is not even possible to return an array from a function in C, though you can return a pointer to an array. You can also return a <code>struct</code> that contains an array field from a function.</p>\n\n<p>Take a look at this example code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar * getstring(void);\n\nint main(void)\n{\n    printf(\"%s\\n\", getstring());\n\n    return 0;\n}\n\nchar * getstring(void)\n{\n    printf(\"sizeof \\\"my string\\\": %zu\\n\", sizeof \"my string\");\n    printf(\"*(\\\"my string\\\" + 1): %c\\n\", *(\"my string\" + 1));\n\n    return \"my string\";\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sizeof \"my string\": 10\n*(\"my string\" + 1): y\nmy string\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1501138888, "post_id": 45336410, "comment_id": 77648325, "body": "I read your disclaimer. Disclaiming irrelevancy doesn&#39;t absolve it"}], "tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": false, "score": -2, "last_activity_date": 1501111780, "last_edit_date": 1501111780, "creation_date": 1501099492, "answer_id": 45336410, "question_id": 45335619, "link": "https://stackoverflow.com/questions/45335619/why-does-the-function-have-to-return-a-char-but-not-a-char-array/45336410#45336410", "title": "Why does the function have to return a char * but not a char array?", "body": "<p>Disclaimer: this is not intended as an exact answer to the question since it is about <code>c++</code>, not <code>c</code>. But i thought that it could be interesting in context of this discussion.</p>\n\n<p>In <code>c++</code> there is a way to return a reference to an array which could look like the following:</p>\n\n<pre><code>static const char (&amp;func())[12]  {\n    return \"hello world\";\n}\n</code></pre>\n\n<p>This is similar to returning a pointer and does not copy the values. But it is <strong>not</strong> possible in plain <code>c</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1501111310, "last_edit_date": 1501111310, "creation_date": 1501102042, "answer_id": 45337123, "question_id": 45335619, "link": "https://stackoverflow.com/questions/45335619/why-does-the-function-have-to-return-a-char-but-not-a-char-array/45337123#45337123", "title": "Why does the function have to return a char * but not a char array?", "body": "<p>Firstly, C doesn't allow you to define a function that returns an array type; something like</p>\n\n<pre><code>char printstring(void)[10] { return \"my string\"; }\n</code></pre>\n\n<p>simply isn't allowed, and the compiler will yell at you over it.</p>\n\n<p>Secondly, because what you are returning isn't an array.</p>\n\n<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, or is a string literal used to initialize another array in a declaration, an expression of type \"N-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.</p>\n\n<p>The expression <code>\"my string\"</code> has type \"10-element array of <code>char</code>\".  Since it isn't the operand of either the <code>sizeof</code> or unary <code>&amp;</code> operators, and since it isn't being used to initialize an array of <code>char</code> in a declaration, it \"decays\" to an expression of type <code>char *</code>.  Its value is the address of the first character in the string, and that address value is what your function is actually returning.  </p>\n\n<p>This is by design - it was Ritchie's way of kind-of-sort-of preserving B's array semantics in C.  However, it means that array expressions in C do not retain their array-ness in most circumstances.  </p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1501141458, "creation_date": 1501141458, "answer_id": 45344401, "question_id": 45335619, "link": "https://stackoverflow.com/questions/45335619/why-does-the-function-have-to-return-a-char-but-not-a-char-array/45344401#45344401", "title": "Why does the function have to return a char * but not a char array?", "body": "<p>In C it is not allowed to assign to an array variable. </p>\n\n<pre><code>char a[] = \"test\";\nchar b[5] = a; /* ILLEGAL */\n</code></pre>\n\n<p>So why then would one want to defined a function returning an array, if its result could be assigned to anything?</p>\n"}], "owner": {"reputation": 57, "user_id": 8372111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a089581a2501d4cd3f489c53c29079c2?s=128&d=identicon&r=PG&f=1", "display_name": "BareWithImANoob", "link": "https://stackoverflow.com/users/8372111/barewithimanoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1501141458, "creation_date": 1501096518, "last_edit_date": 1501098664, "question_id": 45335619, "link": "https://stackoverflow.com/questions/45335619/why-does-the-function-have-to-return-a-char-but-not-a-char-array", "title": "Why does the function have to return a char * but not a char array?", "body": "<pre><code>char * printstring(void)\n{\n    return \"my string\";\n}\n</code></pre>\n\n<p>Since what the function does is return a character array why do I have to state that my function returns <code>char*</code> and not <code>char[]</code> at the declaration.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1501097120, "post_id": 45335570, "comment_id": 77633459, "body": "The problem is that the value read by <code>%15c</code> and <code>%5c</code> is not null-terminated, so both of your codes have undefined behaviour."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501097287, "post_id": 45335570, "comment_id": 77633555, "body": "The return type of <code>main()</code> is always <code>int</code>, never <code>void</code>.  Not that this is the central problem here."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501102022, "post_id": 45335570, "comment_id": 77636224, "body": "@JohnBollinger Although not the central issue, C  allows <code>void main()</code> per &quot;or in some other implementation-defined manner.&quot; C11 &#167;5.1.2.2.1 1"}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501103967, "post_id": 45335817, "comment_id": 77637267, "body": "No, @chux.  Regardless of field width, a <code>%c</code> directive tells <code>printf()</code> to expect a corresponding <code>int</code> argument and convert it to <code>unsigned char</code> for printing.  A <code>char *</code> is not acceptable as the corresponding argument, and if one were passed, the resulting undefined behavior would more likely be along the lines of interpreting some part of the pointer value as an <code>unsigned char</code> than to output any of the pointed-to characters."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501104258, "post_id": 45335817, "comment_id": 77637385, "body": "Yes, of course, you are correct.  A &quot;If you remember the 60s - you weren&#39;t there.&quot; moment."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1501097177, "creation_date": 1501097177, "answer_id": 45335817, "question_id": 45335570, "link": "https://stackoverflow.com/questions/45335570/c-reading-character-in-scanf-statement-returns-garbage-value/45335817#45335817", "title": "c : Reading character in scanf statement returns garbage value", "body": "<p>The <code>%c</code> directive is for reading individual characters and character arrays, but not for those arrays specifically used as C strings.  In particular, it does not store a null character after the last character transferred from the input.</p>\n\n<p>Therefore, both of your <code>scanf()</code> calls are perfectly fine, but the subsequent <code>printf()</code> calls are not.  In each case, the contents of the array designated by <code>c</code> are not null-terminated, therefore attempting to print the array via an <code>%s</code> directive will cause <code>scanf()</code> to read past the end of the array, producing undefined behavior.  That the undefined behavior in one case seems reasonable to you and the undefined behavior in the other case does not is irrelevant.</p>\n\n<p>I advise against working with unterminated string-like arrays as you are doing.  It would be better to make the arrays large enough for a terminator, and to ensure that they are, in fact, terminated.  But if you must print unterminated or possibly unterminated character arrays via <code>printf()</code>, then be sure to use the precision field of the directive to limit the number of characters that may be printed:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void) {\n    char c[5];\n    printf(\"enter a character\\n\");\n    scanf(\"%5c\", c);\n    printf(\"%.5s\\n\", c);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 6842140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q1BsfksTdpU/AAAAAAAAAAI/AAAAAAAAADc/eVhfmgmuX6I/photo.jpg?sz=128", "display_name": "Vishal Shevale", "link": "https://stackoverflow.com/users/6842140/vishal-shevale"}, "is_accepted": false, "score": 0, "last_activity_date": 1501097240, "creation_date": 1501097240, "answer_id": 45335838, "question_id": 45335570, "link": "https://stackoverflow.com/questions/45335570/c-reading-character-in-scanf-statement-returns-garbage-value/45335838#45335838", "title": "c : Reading character in scanf statement returns garbage value", "body": "<p>If your input is more than 5 characters then your program will displays 5 characters perfectly and then start displaying garbage value because while printing the string it will print upto '\\0' character. And if '\\0' is not present at last then it will print garbage.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 1, "last_activity_date": 1501097449, "creation_date": 1501097449, "answer_id": 45335897, "question_id": 45335570, "link": "https://stackoverflow.com/questions/45335570/c-reading-character-in-scanf-statement-returns-garbage-value/45335897#45335897", "title": "c : Reading character in scanf statement returns garbage value", "body": "<p>You are using the wrong format specifier in <code>scanf</code> for a string.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    char c[15];\n    printf(\"enter a string\\n\");\n    scanf(\"%14s\", c);               // change %c to %s\n    printf(\"%s\\n\", c);\n    return 0;\n}\n</code></pre>\n\n<p>Note that the length limit is one less than the array size, to allow room for a <code>nul</code> terminator.</p>\n"}], "owner": {"reputation": 183, "user_id": 5126109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991d8d0da818ea80b41fc0e5ec5244e7?s=128&d=identicon&r=PG&f=1", "display_name": "gotam", "link": "https://stackoverflow.com/users/5126109/gotam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 45335817, "answer_count": 3, "score": -1, "last_activity_date": 1501097457, "creation_date": 1501096343, "last_edit_date": 1501097457, "question_id": 45335570, "link": "https://stackoverflow.com/questions/45335570/c-reading-character-in-scanf-statement-returns-garbage-value", "title": "c : Reading character in scanf statement returns garbage value", "body": "<p>I am using Ubuntu 14.04 and gcc 4.8.4 </p>\n\n<pre><code> #include&lt;stdio.h&gt;\n void main()\n {\n     char c[15];\n     printf(\"enter a character\\n\");\n     scanf(\"%15c\",c);\n     printf(\"%s\\n\",c);\n }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>enter a character\nqwertyuiopasdfghjkl\nqwertyuiopasdfg\n</code></pre>\n\n<p>When I execute the program above with more than 15 characters as input, the  output does not return garbage values. But when I execute the program below: </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n    char c[5];\n    printf(\"enter a character\\n\");\n    scanf(\"%5c\",c);\n    printf(\"%s\\n\",c);\n}\n</code></pre>\n\n<p>I am giving input which is more than 5 characters. It returns output with  garbage values.</p>\n"}, {"tags": ["c", "arrays", "pointers", "undefined-behavior"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501096645, "post_id": 45335550, "comment_id": 77633206, "body": "When would the expression <code>*argv + argc</code> ever make sense? The length of <code>argv[0]</code> isn&#39;t related to <code>argc</code>. If you meant <code>argv + argc</code>, it&#39;s fine AIUI because pointers &quot;one element past the end of the array&quot; are well-defined and can be compared to other pointers in the same array. (Or <code>argv + argc + 1</code> because, as chux mentioned, <code>argv</code> ends with <code>NULL</code>.)"}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501096743, "post_id": 45335550, "comment_id": 77633254, "body": "@chux Good to know ! I just have to use <code>&lt;=</code> then. But the original question shouldn&#39;t take my mistake in consideration. Updated with better example"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501096982, "post_id": 45335550, "comment_id": 77633384, "body": "Your second code is OK as <code>str</code> is always a valid pointer.  It last value is not de-reference-able though."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1501097568, "post_id": 45335550, "comment_id": 77633741, "body": "The edited expression <code>*strArray + arrayLen</code> still doesn&#39;t make sense."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1501099687, "post_id": 45335550, "comment_id": 77634931, "body": "Incrementing <i>one step</i> past the end of the array is fine. Incrementing any further is not. <code>pointer2 += 4</code> is undefined behavior, but <code>pointer2 += 3</code> would not be, even though it would cause <code>pointer2</code> to point past the end of the array."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501100959, "post_id": 45335550, "comment_id": 77635640, "body": "Note that &quot;Is comparing to a pointer one element past the end of an array well-defined?&quot; does not apply to the UB of <code>int* pointer = 0; pointer++;</code>."}, {"owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501101920, "post_id": 45335550, "comment_id": 77636175, "body": "@chux The point was &quot;does it matter if I create a pointer pointing to nothing as long as I don&#39;t use it to access&quot; but the question was narrowed a bit to the example I provided."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1501097179, "post_id": 45335768, "comment_id": 77633491, "body": "Is not the &quot;one passed&quot; rule applies to non-array objects too?  <code>int x; int *p = &amp;x+1;</code>"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1501097776, "post_id": 45335768, "comment_id": 77633873, "body": "@chux You may be right.  Section 6.5.8 part 4 says <i>&quot;For the purposes of these operators, a pointer to an object that is not an element of an array behaves the same as a pointer to the first element of an array of length one with the type of the object as its element type.</i>&quot;  Section 6.5.6 part 7 has the same wording."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1501109103, "post_id": 45335768, "comment_id": 77639307, "body": "The quoted 6.5.8 applies to <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, and <code>&gt;</code>.  The <code>==</code> and <code>!=</code> operators never yield Undefined Behavior when given pointers to objects, pointers &quot;just past&quot; objects, or null pointers.  A comparison between a pointer &quot;to&quot; one object and a pointer &quot;just past&quot; another may report equality, but that does not imply the pointers may be used interchangeably."}, {"owner": {"reputation": 18021, "user_id": 538216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e91a4b631b4bb7f0c477626617dd3926?s=128&d=identicon&r=PG", "display_name": "Levi Morrison", "link": "https://stackoverflow.com/users/538216/levi-morrison"}, "edited": false, "score": 0, "creation_date": 1530318276, "post_id": 45335768, "comment_id": 89208558, "body": "Does this also apply to the element one before the array? I&#39;m asking because I&#39;m needing to iterate in reverse and the nicest idiom would be a pointer one step before the first element."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 18021, "user_id": 538216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e91a4b631b4bb7f0c477626617dd3926?s=128&d=identicon&r=PG", "display_name": "Levi Morrison", "link": "https://stackoverflow.com/users/538216/levi-morrison"}, "edited": false, "score": 0, "creation_date": 1530318406, "post_id": 45335768, "comment_id": 89208579, "body": "@LeviMorrison it does not"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 18021, "user_id": 538216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e91a4b631b4bb7f0c477626617dd3926?s=128&d=identicon&r=PG", "display_name": "Levi Morrison", "link": "https://stackoverflow.com/users/538216/levi-morrison"}, "edited": false, "score": 0, "creation_date": 1530381032, "post_id": 45335768, "comment_id": 89220567, "body": "@LeviMorrison: IMHO, the best way to understand the allowance for &quot;just-past&quot; pointers is to recognize that each object has two associated addresses: one for the start and one for the end.  An array of three elements will have four associated address: start of first, between first and second, between second and third, and end of third."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1530320894, "last_edit_date": 1530320894, "creation_date": 1501097027, "answer_id": 45335768, "question_id": 45335550, "link": "https://stackoverflow.com/questions/45335550/is-comparing-to-a-pointer-one-element-past-the-end-of-an-array-well-defined/45335768#45335768", "title": "Is comparing to a pointer one element past the end of an array well-defined?", "body": "<p>Comparing to a pointer <em>one step</em> past the end of an array is well defined. However, your <code>pointer</code> and <code>pointer2</code> examples are undefined, even if you do literally nothing with those pointers.</p>\n\n<p>A pointer may point to one element past the end of the array.  That pointer may not be dereferenced (otherwise that would be <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>) but is can be compared to another pointer within the array.</p>\n\n<p>Section 6.5.6 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> says the following regarding pointer addition:</p>\n\n<blockquote>\n  <p><em>8</em> If both the pointer operand and the result point to elements of the same array object, <strong>or one past the last element of the array\n  object</strong>, the evaluation shall not produce an overflow; <strong>otherwise, the\n  behavior is undefined</strong>. If the result points one past the last element\n  of the array object, it shall not be used as the operand of a unary <code>*</code>\n  operator that is evaluated.</p>\n</blockquote>\n\n<p>Section 6.5.8 says the following regarding pointer comparisons:</p>\n\n<blockquote>\n  <p><em>5</em> When two pointers are compared, the result depends on the relative locations in the address space of the objects pointed to. <strong>If two\n  pointers to object types both point to the same object, or both point\n  one past the last element of the same array object, they compare\n  equal.</strong> If the objects pointed to are members of the same aggregate\n  object, pointers to structure members declared later compare greater\n  than pointers to members declared earlier in the structure, and\n  pointers to array elements with larger subscript values compare\n  greater than pointers to elements of the same array with lower\n  subscript values. All pointers to members of the same union object\n  compare equal. <strong>If the expression P points to an element of an array\n  object and the expression Q points to the last element of the same\n  array object, the pointer expression Q+1 compares greater than P. In\n  all other cases, the behavior is undefined.</strong></p>\n</blockquote>\n\n<p>In the case of <code>pointer1</code>, it starts out pointing to <code>NULL</code>.  Incrementing this pointer invokes undefined behavior because it don't point to a valid object.</p>\n\n<p>For <code>pointer2</code>, it is increased by 4, putting it <em>two</em> elements past the end of the array, not one, so this is again undefined behavior.  Had it been increased by 3, the behavior would be well defined.</p>\n"}], "owner": {"reputation": 3182, "user_id": 5771029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1014844931887743/picture?type=large", "display_name": "Winter", "link": "https://stackoverflow.com/users/5771029/winter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 1, "accepted_answer_id": 45335768, "answer_count": 1, "score": 4, "last_activity_date": 1530320894, "creation_date": 1501096280, "last_edit_date": 1501164929, "question_id": 45335550, "link": "https://stackoverflow.com/questions/45335550/is-comparing-to-a-pointer-one-element-past-the-end-of-an-array-well-defined", "title": "Is comparing to a pointer one element past the end of an array well-defined?", "body": "<p>I learned by <a href=\"https://stackoverflow.com/q/29825352/5771029\">this question</a> that incrementing a NULL pointer or incrementing past the end of an array isn't well-defined behavior:</p>\n\n<pre><code>int* pointer = 0;\npointer++;\n\nint a[3];\nint* pointer2 = &amp;a[0];\npointer2 += 4; \n</code></pre>\n\n<p>But what If the pointer pointing to a invalid place is only used for comparison and memory at his location is never accessed?</p>\n\n<p>Example:</p>\n\n<pre><code>void exampleFunction(int arrayLen, char** strArray)\n{\n    for(char** str = strArray; str &lt; strArray + arrayLen; str++) //or even str &lt; &amp;strArray[arrayLen]\n    {\n        //here *str is always a pointer to the first char of my string\n    }\n}\n</code></pre>\n\n<p>Here I compare my pointer to a pointer one element past the end of the array. Is this well-defined behavior?</p>\n"}, {"tags": ["c", "debugging"], "comments": [{"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 5, "creation_date": 1501095054, "post_id": 45335183, "comment_id": 77632346, "body": "Why are you sending the addresses of your variables into the printf statements&gt;"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1501095174, "post_id": 45335183, "comment_id": 77632428, "body": "An inch is exactly 2.54 centimetres, not 2.5.  And I don&#39;t think you should be dividing by 1000000 on that line."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1501095207, "post_id": 45335183, "comment_id": 77632447, "body": "Aside <code>inches = Km*25&#47;1000000;</code> better as <code>inches = centimetres*2.54;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501095311, "post_id": 45335183, "comment_id": 77632499, "body": "Another aside: why are you working in <code>float</code> in 21st century? Use <code>double</code> except where very good reason not to. You don&#39;t use <code>short</code> when you can use <code>int</code> do you, except, again for a very good reason."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1501095375, "post_id": 45335183, "comment_id": 77632528, "body": "remove <code>&amp;</code>  from argument of <code>printf</code>"}], "answers": [{"tags": [], "owner": {"reputation": 552, "user_id": 3368420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3cc00fa27c8b4224cd6ccf961bcda2e?s=128&d=identicon&r=PG", "display_name": "Juan Jos&#233; Ram&#237;rez", "link": "https://stackoverflow.com/users/3368420/juan-jos%c3%a9-ram%c3%adrez"}, "is_accepted": false, "score": 2, "last_activity_date": 1501100860, "last_edit_date": 1501100860, "creation_date": 1501095968, "answer_id": 45335462, "question_id": 45335183, "link": "https://stackoverflow.com/questions/45335183/what-is-wrong-in-this-c-code-the-answer-is-always-zero/45335462#45335462", "title": "what is wrong in this c code? The Answer is always zero?", "body": "<p><code>printf</code> function writes the value of the variable. The ampersand operator <code>&amp;</code> turns your value into a pointer and that's the error. Instead of printing the actual value of your variables, you are printing the address memory of the pointer.</p>\n\n<p>Read <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_printf.htm\" rel=\"nofollow noreferrer\">documentation</a> on printf function. More info on <code>&amp;</code> and <code>*</code> <a href=\"https://stackoverflow.com/questions/2094666/pointers-in-c-when-to-use-the-ampersand-and-the-asterisk\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501105889, "post_id": 45336701, "comment_id": 77638052, "body": "&quot;If you want to print the location, ..., use a decimal or hexadecimal formatter (%d and %x&quot; is poor advice and detracts from a good answer - recommend delete that paragraph.  <code>%d</code> is for <code>int</code>, not an address.  To print a <code>void *</code>, use <code>%p</code>."}], "tags": [], "owner": {"reputation": 977, "user_id": 5487769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-EoZSfEaOzPk/AAAAAAAAAAI/AAAAAAAAAAw/tx0tg5WpYUw/photo.jpg?sz=128", "display_name": "adrian", "link": "https://stackoverflow.com/users/5487769/adrian"}, "is_accepted": false, "score": 1, "last_activity_date": 1501184383, "last_edit_date": 1501184383, "creation_date": 1501100514, "answer_id": 45336701, "question_id": 45335183, "link": "https://stackoverflow.com/questions/45335183/what-is-wrong-in-this-c-code-the-answer-is-always-zero/45336701#45336701", "title": "what is wrong in this c code? The Answer is always zero?", "body": "<p>You are printing the <em>location</em> of the variables. The calculation is fine, but you're not actually printing the value of the variable. You're printing where it is in memory. </p>\n\n<p>The <code>&amp;</code> operator will give the location of the variable. You can fix your program by removing the <code>&amp;</code>s in the printf statements, i.e. this:</p>\n\n<pre><code>printf(\"%f\\n\", &amp;inches);\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>printf(\"%f\\n\", inches); \n</code></pre>\n\n<p>Also, <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow noreferrer\">here</a> is a link to a pretty in-depth <code>printf()</code> reference; to learn more about pointers, you can go to <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/C/node10.html\" rel=\"nofollow noreferrer\">this page</a>. </p>\n"}], "owner": {"reputation": 1, "user_id": 8371882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/073ab313b46568e2290692885d8f2b01?s=128&d=identicon&r=PG&f=1", "display_name": "shubham preet", "link": "https://stackoverflow.com/users/8371882/shubham-preet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "answer_count": 2, "score": -7, "last_activity_date": 1501184383, "creation_date": 1501094958, "last_edit_date": 1501100642, "question_id": 45335183, "link": "https://stackoverflow.com/questions/45335183/what-is-wrong-in-this-c-code-the-answer-is-always-zero", "title": "what is wrong in this c code? The Answer is always zero?", "body": "<p>I am new to c, please help, the answer to this is always zero.why? Instead of converting KM to Metres or centimetres(sorry for typos);</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    float Km;\n    float metres;\n    float inches;\n    float centimetres;\n\n    printf(\"Welcome, please enter the distance in Km.\\n\");\n\n    scanf(\"%f\", &amp;Km);\n    metres = Km * 1000;\n    centimetres = Km*100000;\n    inches = Km*25/1000000;\n\n    printf(\"Distance In Metres is:\\n\");\n    printf(\"%f\\n\", &amp;metres);\n\n    printf(\"Distance in Centimeters is:\\n\");\n    printf(\"%f\\n\", &amp;centimetres);\n\n    printf(\"Distance in Inches is:\\n\");\n    printf(\"%f\\n\", &amp;inches);\n\n    printf(\"bye\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "multithreading", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 1, "creation_date": 1501090461, "post_id": 45333405, "comment_id": 77629737, "body": "Did you enable <code>htop</code>s &quot;Show custom thread names&quot; option? And possibly &quot;Update process names on every refresh&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 1608, "user_id": 1758023, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8867b4c763d9995de34ec14bfb9fbdab?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/1758023/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1501095915, "creation_date": 1501095915, "answer_id": 45335442, "question_id": 45333405, "link": "https://stackoverflow.com/questions/45333405/p-thread-set-thread-name-not-showing-up-in-htop/45335442#45335442", "title": "p_thread set thread name not showing up in htop", "body": "<p>I figured it out. I had a filter in htop, and that was hiding my named threads. Once I removed that filter, it showed.</p>\n"}], "owner": {"reputation": 1608, "user_id": 1758023, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8867b4c763d9995de34ec14bfb9fbdab?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/1758023/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 0, "accepted_answer_id": 45335442, "answer_count": 1, "score": 1, "last_activity_date": 1501095915, "creation_date": 1501089069, "question_id": 45333405, "link": "https://stackoverflow.com/questions/45333405/p-thread-set-thread-name-not-showing-up-in-htop", "title": "p_thread set thread name not showing up in htop", "body": "<p>I have a multi-threaded C application and I would like to set the thread names so that they show up in tools such as htop.</p>\n\n<p>I am creating the threads </p>\n\n<pre><code>pthread_create(&amp;q-&gt;threads[i].thread, NULL, worker, &amp;q-&gt;threads[i]);\n//q-&gt;threads[i].thread is a pthread_t object, \n//and q-&gt;threads[i] is the arg passed to worker.\n</code></pre>\n\n<p>and in the worker function I have </p>\n\n<pre><code>pthread_t self = pthread_self();\nsnprintf(name, 16, \"worker-%d\", data-&gt;id);\nprintf(\"The name to be set is %s\\n\", name);\nint res = pthread_setname_np(self, name);\nprintf(\"setname returned %d\\n\", res);\nchar thread_name[16];\nres = pthread_getname_np(self, thread_name, 16);\nprintf(\"Get name returned %d and shows the name is '%s'\\n\", res, thread_name);\n</code></pre>\n\n<p>When I run the code, I get</p>\n\n<pre><code>The name to be set is worker-1\nsetname returned 0\nGet name returned 0 and shows the name is 'worker-1'\n</code></pre>\n\n<p>for each of my worker threads (the names are of the form worker-X)</p>\n\n<p>However, when I view the results in htop (I have set htop to show the thread tree), all the threads show up with the parent program name.</p>\n\n<p>There is no other code that references the thread name anywhere, so I can't see where that is being reset. I also looked in /proc/{PID} and the thread names are set wrong in there also. So, I believe that it is an issue with my code, but I cannot figure it out.</p>\n\n<p>I am running Ubuntu 16. I am also using CMake, but I don't think that has anything to do with it.</p>\n"}, {"tags": ["c", "linux", "ubuntu-16.04", "popen", "fgets"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1501088000, "post_id": 45332999, "comment_id": 77628112, "body": "Learn about <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\">poll(2)</a> and take some time to read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\"><i>Advanced Linux Programming</i></a>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1501088187, "post_id": 45332999, "comment_id": 77628241, "body": "if <code>popen</code> doesn&#39;t work, why are you continuing on and trying to read from <code>fp</code>? You should stop when you print out the error message."}, {"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1501088503, "post_id": 45332999, "comment_id": 77628459, "body": "@ChrisTurner if the error message you are referring to is, &quot;can&#39;t open file&quot;, it never prints that out"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501088922, "post_id": 45332999, "comment_id": 77628728, "body": "<code>strcat(R, &quot;library(Ryacas)\\n&quot;);</code> --&gt; <code>strcpy(R, &quot;library(Ryacas)\\n&quot;);</code>"}, {"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501089214, "post_id": 45332999, "comment_id": 77628929, "body": "@BLUEPIXY same problem even with that edit"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1501145953, "post_id": 45332999, "comment_id": 77653084, "body": "Aside from the fact that your question clearly has the misleading &quot;popen doesn&#39;t work&quot; in the title, you still should fix your code so that if you do get that error message (or any others), it should break out of the loop or at least continue on to the next iteration"}], "answers": [{"comments": [{"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "edited": false, "score": 0, "creation_date": 1501090455, "post_id": 45333769, "comment_id": 77629731, "body": "You are right. However, I changed to strcpy as @BLUEPIXY suggested, but still hangs!"}], "tags": [], "owner": {"reputation": 1154, "user_id": 5329483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540d2cd6d0b20c87290f01247f8aae17?s=128&d=identicon&r=PG&f=1", "display_name": "user5329483", "link": "https://stackoverflow.com/users/5329483/user5329483"}, "is_accepted": false, "score": 0, "last_activity_date": 1501090117, "creation_date": 1501090117, "answer_id": 45333769, "question_id": 45332999, "link": "https://stackoverflow.com/questions/45332999/c-program-hangs-on-fgets-after-popen-doesnt-work/45333769#45333769", "title": "C Program Hangs on Fgets after Popen doesn&#39;t work", "body": "<p>I didn't went through the entire code, but I spotted this flaw:</p>\n\n<pre><code>char R[5000];\nbuff1 = makeInvert();\nstrcat(R, \"library(Ryacas)\\n\");\nstrcat(R, \"yacas(\\\"Solve(\");\n</code></pre>\n\n<p>You <code>strcat</code>-ing \"library...\" onto an uninitialized string. You should use <code>strcpy</code> for the first string as you did it elsewhere or insert <code>R[0]='\\0';</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "edited": false, "score": 0, "creation_date": 1501092491, "post_id": 45334248, "comment_id": 77630976, "body": "you are completely right - the Rscript is still running. Do you think if I write the Rscript in a non-main function (And can therefore return null if fopen fails), the Rscript will finish?"}, {"owner": {"reputation": 1974, "user_id": 2355605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8503ba1b60b6a66f4df937805561cee?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/2355605/guillaume"}, "reply_to_user": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "edited": false, "score": 0, "creation_date": 1501094279, "post_id": 45334248, "comment_id": 77631936, "body": "If I run your script manually, the R process takes 100% cpu.  So it&#39;s either taking a very long time or process of Ryacas is buggy and goes into an infinite loop.  I am not quite sure what the expected runtime of the script should be"}], "tags": [], "owner": {"reputation": 1974, "user_id": 2355605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8503ba1b60b6a66f4df937805561cee?s=128&d=identicon&r=PG", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/2355605/guillaume"}, "is_accepted": false, "score": 0, "last_activity_date": 1501091706, "creation_date": 1501091706, "answer_id": 45334248, "question_id": 45332999, "link": "https://stackoverflow.com/questions/45332999/c-program-hangs-on-fgets-after-popen-doesnt-work/45334248#45334248", "title": "C Program Hangs on Fgets after Popen doesn&#39;t work", "body": "<p>If you use non-blocking I/O, fgets() will exit as soon as no output is available.  That does not seem to be what you want.  You want to read the whole output then exit.  I would recommend removing the fcntl() part.</p>\n\n<p>The issue seems to be that your R script is not finishing.  I would recommend running your program through strace -f and post the output.  Also, have you tried to run \"Rscript computation/inverse.R\" directly and make sure it does return the output you're expecting <em>and</em> is exiting (if not fgets will get stuck)?  When your process gets blocked, did you see if the Rscript is still running (I expect it does and that's why your process is stuck)</p>\n\n<p>You're still have some unrelated issues: you're closing the popen() fd with fclose(), instead of pclose().  If fopen(filename, \"w\") fails, you do not exit so it'll crash.  </p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501189143, "post_id": 45360686, "comment_id": 77683098, "body": "it seems that the <code>Rscript</code> is expecting something to cause it to exit that is not in the produced inverse.R file.  I suspect the <code>Rscript</code> is an interactive script, so it waiting for something to be input..    I suspect the <code>inverse.R</code> script needs one more line that says: <code>quit()</code>"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1501188726, "last_edit_date": 1501188726, "creation_date": 1501188298, "answer_id": 45360686, "question_id": 45332999, "link": "https://stackoverflow.com/questions/45332999/c-program-hangs-on-fgets-after-popen-doesnt-work/45360686#45360686", "title": "C Program Hangs on Fgets after Popen doesn&#39;t work", "body": "<p>the current posted code seems to have been edited since the comments and prior answer were posted.</p>\n\n<p>To avoid confusion, ADD edits, do not overlay the original question.</p>\n\n<p>when calling any of the heap allocation functions (malloc, calloc, realloc) </p>\n\n<ul>\n<li>the expression: <code>sizeof(char)</code> is defined as 1 and multiplying anything by 1 has no effect.  Suggest removing that expression.</li>\n<li>always check (!=NULL) the returned value to assure the operation was successful</li>\n<li>When some operation fails, any error message should be output to <code>stderr</code>, not <code>stdout</code> so use <code>perror()</code>  which will also output the reason the OS thinks the operation failed.</li>\n</ul>\n\n<p>After announcing an <em>unrecoverable</em> error event, the program should exit, not continue on as if everything were 'good'. </p>\n\n<p>it is poor programming practice to include header files that are not being used.  Suggest removing the include statements for: <code>math.h</code> and <code>fctrl.h</code></p>\n\n<p>when using <code>popen()</code>, the resulting file descriptor pointer should be closed via <code>pclose()</code>, not <code>fclose()</code></p>\n\n<p>I took the latest posted code and performed several simplifications and corrections, resulting in the following:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define num_func 10\n\n\nchar * makeInvert( void );\n\n\nchar * makeInvert()\n{\n    char * buffer = malloc(200);\n    if( !buffer )\n    {\n        perror( \"malloc failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, malloc successful\n\n    double a = (double)(rand()%5)-5.0;\n    double b = (double)(rand()%5)-5.0;\n    double c = (double)(rand()%5)-5.0;\n    double n = (double)(rand()%5)-5.0;\n    n *= 2;\n    n += 1;\n    sprintf(buffer, \"%g(x + %g)^%g + %g == y\", a, b, n, c);\n    return buffer;\n} // end function: makeInvert\n\n\nint main( void )\n{\n    printf(\"entered main \\n\");\n    int i;\n    //char * buff1;\n\n    for (i = 0; i &lt; num_func; i++)\n    {\n        FILE * f = fopen( \"inverse.R\", \"w\");\n        if (!f)\n        {       //validate file is open\n                //printf(\"cant open file\");\n                perror( \"fopen for computation/inverse.R for write failed\" );\n                exit( EXIT_FAILURE );\n        }\n\n        // implied else, fopen successful\n\n        char R[5000];\n\n        strcpy(R, \"library(Ryacas)\\nyacas(\\\"Solve(\");\n        strcat(R, makeInvert());\n        strcat(R, \", x)\\\")\\n\\n\");\n        fputs(R, f);\n\n        //printf(\"before fclose\\n\");\n        //fflush(stdout);\n        fclose(f);\n        f = NULL;\n\n        //printf(\"after fclose\\n\");\n        //fflush(stdout);\n\n        //char command[300];\n        //strcpy(command, \"Rscript computation/inverse.R\");\n        //printf(\"command %s\\n\", command);\n\n        FILE * fp = popen( \"Rscript inverse.R\", \"r\");\n        if (!fp)\n        {       //validate file is open\n                //printf(\"cant open file\");\n                //fflush(stdout);\n                perror( \"popen for inverse.R for read failed\" );\n                exit( EXIT_FAILURE );\n        }\n\n        // implied else, popen successful\n\n        //printf(\"after popen\\n\");\n        //fflush(stdout);\n\n        char path[5000];\n        while (fgets(path, sizeof(path)-1, fp) != NULL)\n        {\n               printf(\"output: %s\\n\", path);\n        }\n\n        //fclose(fp);\n        pclose( fp );\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Amongst other things, note the consistent indenting, for the purpose of readability.  The compiler doesn't care, but us humans do.</p>\n\n<p>Note: <code>R</code> is not installed on my linux 16.04</p>\n\n<p>The resulting .R file contains:</p>\n\n<pre><code>library(Ryacas)\nyacas(\"Solve(-2(x + -4)^-5 + -4 == y, x)\")\n</code></pre>\n\n<p>the output from running the modified code is:</p>\n\n<pre><code>entered main \nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\nsh: 1: Rscript: not found\n</code></pre>\n"}], "owner": {"reputation": 1486, "user_id": 6637004, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/84f0334c76323d612a5fefc5b1d2deef?s=128&d=identicon&r=PG&f=1", "display_name": "maddie", "link": "https://stackoverflow.com/users/6637004/maddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1388, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1501188726, "creation_date": 1501087656, "last_edit_date": 1501092227, "question_id": 45332999, "link": "https://stackoverflow.com/questions/45332999/c-program-hangs-on-fgets-after-popen-doesnt-work", "title": "C Program Hangs on Fgets after Popen doesn&#39;t work", "body": "<p><strong>EDIT</strong>: I wrote a C program that generates invertible functions and writes them into R files that are executed and opened with <code>popen</code>. I am running this program on Ubuntu 16.04. My program compiles, but the R script never finishes/hangs</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n#define num_func 10\n\nchar * makeInvert(){\n    char * buffer = malloc(200 * sizeof(char));\n    double a = (double)(rand()%5)-5.0; \n    double b = (double)(rand()%5)-5.0; \n    double c = (double)(rand()%5)-5.0; \n    double n = (double)(rand()%5)-5.0;\n    n *= 2;\n    n += 1;\n    sprintf(buffer, \"%g(x + %g)^%g + %g == y\", a, b, n, c);\n    return buffer;\n\n}\n\nint main() {\n  printf(\"entered main \\n\");\n  int i;\n  char * buff1;\n\n  for (i = 0; i &lt; num_func; i++) {\n        char R[5000];\n    buff1 = makeInvert();\n\n    strcpy(R, \"library(Ryacas)\\n\");\n    strcat(R, \"yacas(\\\"Solve(\");\n    strcat(R, buff1);\n    strcat(R, \", x)\\\")\\n\\n\");\n    //sleep(1);\n    char filename[100];\n    strcpy(filename, \"computation/\");\n    strcat(filename, \"inverse\");\n    strcat(filename, \".R\");\n    FILE * f = fopen(filename, \"w\");    \n    if (!f) {       //validate file is open \n            printf(\"cant open file\");\n     }\n    fputs(R, f);\n    printf(\"before fclose\");\n    fflush(stdout);\n    fclose(f);\n        f = NULL;\n    printf(\"after fclose\");\n    fflush(stdout);\n\n    char path[5000];\n    char command[300];\n    strcpy(command,\"Rscript \");\n    strcat(command, \"computation/inverse\");\n\n    strcat(command, \".R\");\n    printf(\"command %s\\n\", command);\n    FILE * fp = popen(command, \"r\");\n\n    if (!fp) {       //validate file is open \n            printf(\"cant open file\");\n            fflush(stdout);\n     }\n\n    printf(\"after popen\\n\");\n    fflush(stdout);\n\n    while (fgets(path, sizeof(path)-1, fp) != NULL) {\n           printf(\"output: %s\\n\", path);\n\n        }\n    fclose(fp);\n\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output from running <code>strace -f program_name</code></p>\n\n<pre><code>execve(\"/usr/bin/test\", [\"test\"], [/* 20 vars */]) = 0\nbrk(NULL)                               = 0x16ef000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f95f15a9000\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=53425, ...}) = 0\nmmap(NULL, 53425, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f95f159b000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0&gt;\\0\\1\\0\\0\\0P\\t\\2\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0755, st_size=1868984, ...}) = 0\nmmap(NULL, 3971488, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f95f0fbc000\nmprotect(0x7f95f117c000, 2097152, PROT_NONE) = 0\nmmap(0x7f95f137c000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1c0000) = 0x7f95f137c000\nmmap(0x7f95f1382000, 14752, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f95f1382000\nclose(3)                                = 0\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f95f159a000\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f95f1599000\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f95f1598000\narch_prctl(ARCH_SET_FS, 0x7f95f1599700) = 0\nmprotect(0x7f95f137c000, 16384, PROT_READ) = 0\nmprotect(0x60a000, 4096, PROT_READ)     = 0\nmprotect(0x7f95f15ab000, 4096, PROT_READ) = 0\nmunmap(0x7f95f159b000, 53425)           = 0\nbrk(NULL)                               = 0x16ef000\nbrk(0x1710000)                          = 0x1710000\nopen(\"/usr/lib/locale/locale-archive\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=1668976, ...}) = 0\nmmap(NULL, 1668976, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f95f1400000\nclose(3)                                = 0\nclose(1)                                = 0\nclose(2)                                = 0\nexit_group(1)                           = ?\n+++ exited with 1 +++\n</code></pre>\n\n<p>When I run <code>Rscript computation/inverse.R</code> directly, it hangs and doesn't output anything.</p>\n\n<hr>\n\n<p>I believe it is hanging on the <code>fgets</code> because when I run the program on gdb for the backtrace, I see this:</p>\n\n<pre><code>after popen \n^C\nProgram received signal SIGINT, Interrupt.\n0x00007ffff7b04230 in __read_nocancel ()\n    at ../sysdeps/unix/syscall-template.S:84\n84  ../sysdeps/unix/syscall-template.S: No such file or directory.\n(gdb) backtrace\n#0  0x00007ffff7b04230 in __read_nocancel ()\n    at ../sysdeps/unix/syscall-template.S:84\n#1  0x00007ffff7a875e8 in _IO_new_file_underflow (fp=0x6034f0) at fileops.c:592\n#2  0x00007ffff7a8860e in __GI__IO_default_uflow (fp=0x6034f0) at genops.c:413\n#3  0x00007ffff7a7bc6a in __GI__IO_getline_info (fp=fp@entry=0x6034f0, \n    buf=buf@entry=0x7fffffffd1d0 \"\", n=4998, delim=delim@entry=10, \n    extract_delim=extract_delim@entry=1, eof=eof@entry=0x0) at iogetline.c:60\n#4  0x00007ffff7a7bd78 in __GI__IO_getline (fp=fp@entry=0x6034f0, \n    buf=buf@entry=0x7fffffffd1d0 \"\", n=&lt;optimized out&gt;, delim=delim@entry=10, \n    extract_delim=extract_delim@entry=1) at iogetline.c:34\n#5  0x00007ffff7a7ab7d in _IO_fgets (buf=0x7fffffffd1d0 \"\", n=&lt;optimized out&gt;, \n    fp=0x6034f0) at iofgets.c:53\n#6  0x0000000000401288 in main () at test.c:123\n(gdb) frame 6\n#6  0x0000000000401288 in main () at test.c:123\n123     while (fgets(path, sizeof(path)-1, fp) != NULL) {\n</code></pre>\n\n<p>After reading <a href=\"https://stackoverflow.com/questions/149860/how-to-prevent-fgets-blocks-when-file-stream-has-no-new-data\">this post</a>, I added this code after I <code>popen</code></p>\n\n<pre><code>    int fd = fileno(fp);\n\n    int flags;\n    flags = fcntl(fd, F_GETFL, 0);\n    flags |= O_NONBLOCK;\n    fcntl(fd, F_SETFL, flags);\n</code></pre>\n\n<p>The post explains that, \"In Linux (or any Unix-y OS), you can mark the underlying file descriptor used by popen() to be non-blocking. [Using the above code] if there is no input available, fgets will return NULL with errno set to EWOULDBLOCK.\" When I run gdb now, I get:</p>\n\n<pre><code>after popen \n^C\nProgram received signal SIGINT, Interrupt.\n0x00007ffff785f188 in _IO_new_proc_close (fp=0x6034f0) at iopopen.c:339\n339 iopopen.c: No such file or directory.\n(gdb) bt\n#0  0x00007ffff785f188 in _IO_new_proc_close (fp=0x6034f0) at iopopen.c:339\n#1  0x00007ffff7869960 in _IO_new_file_close_it (fp=fp@entry=0x6034f0) at fileops.c:172\n#2  0x00007ffff785d3ef in _IO_new_fclose (fp=0x6034f0) at iofclose.c:58\n#3  0x00000000004013f9 in main () at test.c:130\n(gdb) frame 3\n#3  0x00000000004013f9 in main () at test.c:130\n130     fclose(fp);\n(gdb) \n</code></pre>\n"}, {"tags": ["c", "gcc", "assembly", "cross-compiling"], "comments": [{"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 4, "creation_date": 1501084865, "post_id": 45331783, "comment_id": 77625974, "body": "There&#39;s something wrong with your assembler if you&#39;re getting an error from the assembler about <code>call ___main</code>. Changing it to <code>call _main</code> won&#39;t fix the problem, as that would cause an infinite recursive loop. Notice how <code>_main</code> is defined earlier the assembly code. The assembly function <code>___main</code> is a C++ library initialization function, the assembly function <code>_main</code> is the C function <code>main</code>."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1501085098, "post_id": 45331783, "comment_id": 77626136, "body": "Also, any modern configuration shouldn&#39;t <i>need</i> to generate <code>call ___main</code>; the work it would do (e.g. running C++ global constructors) is taken care of with magic ELF sections instead.  The assembly generated looks suspiciously like 16-bit <code>a.out</code>-format x86 code, none of which things should be true for a &quot;new architecture&quot;.  Are you writing this cross compiler&#39;s back-end yourself?  If so, I strongly recommend cribbing from the aarch64 back-end rather than the x86 back-end; aarch64 is ELF-based and hasn&#39;t accumulated decades of cruft."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1501085281, "post_id": 45331783, "comment_id": 77626277, "body": "If you&#39;re <i>not</i> writing the cross-compiler yourself, the problem is likely to be that you (or whoever you got it from) built GCC incorrectly. It would really help if you told us the <code>config.sub</code> triplet for the architecture you&#39;re trying to build for. (If you have no idea what a <code>config.sub</code> triplet is, suspend what you&#39;re doing immediately and find out; this is a concept you must understand to work with GCC-style cross compilers.)"}, {"owner": {"reputation": 71, "user_id": 8370882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a76f78e2986c0c82024e55bbb024df0c?s=128&d=identicon&r=PG&f=1", "display_name": "vg34", "link": "https://stackoverflow.com/users/8370882/vg34"}, "edited": false, "score": 0, "creation_date": 1501147202, "post_id": 45331783, "comment_id": 77654066, "body": "I added <code>jmp 2</code> instruction in main&#39;s prologue so it won&#39;t fall into an infinite loop. Now I&#39;m trying to find out what generates the <code>call ___main</code> instruction."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1501172866, "post_id": 45331783, "comment_id": 77673949, "body": "@vaskog It sounds like you are writing this back-end yourself, so I&#39;ll tell you that you need to define <code>INIT_SECTION_ASM_OP</code> in your <code>tm.h</code>, and that the specific section of the <a href=\"https://gcc.gnu.org/onlinedocs/gccint/\" rel=\"nofollow noreferrer\">internals manual</a> that you missed is &quot;<a href=\"https://gcc.gnu.org/onlinedocs/gccint/Initialization.html\" rel=\"nofollow noreferrer\">How Initialization Functions Are Handled</a>&quot;. You should make time to read the internals manual cover to cover; if you read it already, read through it again. To successfully write a GCC back end you basically need to know the internals manual by heart."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1501172915, "post_id": 45331783, "comment_id": 77673981, "body": "@vaskog Also, if you are not already using ELF, you should <b>immediately</b> switch to ELF.  Everything will work better."}], "owner": {"reputation": 71, "user_id": 8370882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a76f78e2986c0c82024e55bbb024df0c?s=128&d=identicon&r=PG&f=1", "display_name": "vg34", "link": "https://stackoverflow.com/users/8370882/vg34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 278, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1501146535, "creation_date": 1501084017, "last_edit_date": 1501146535, "question_id": 45331783, "link": "https://stackoverflow.com/questions/45331783/gcc-cross-compiler-generates-main-instead-of-main", "title": "gcc cross compiler generates ___main instead of _main", "body": "<p>I am building cross-compiler for a new architecture, but when compiling a simple c code like the following:</p>\n\n<pre><code>int sum(int a, int b);\n\nint main()\n{\n    int z=sum(2,3);\n    return 0;\n}\n\nint sum(int a, int b)\n{\n    return a+b; \n}\n</code></pre>\n\n<p>I am getting the following assembler code:</p>\n\n<pre><code>.text\n    .global _main\n_main:\n    push fp\n    mov fp, sp\n    jmp 2\n    call ___main\n    limm r0, 3\n    push r0\n    limm r1, 2\n    push r1\n    call _sum\n\n    ...\n    ...\n\n    ret\n\n    .global _sum\n_sum:\n    push fp\n    mov fp, sp\n\n    ...\n    ...\n\n    ret\n</code></pre>\n\n<p>When trying to assemble the code, it raises an error wrong argument for <strong>call ___main</strong>, but it works fine for the other labels which have just one underscore (like _sum).</p>\n\n<p>Now, my question is: is there any way how I can change the assembler output, so that it will output <em>call _main</em> (any macro or something else in the compiler files)?</p>\n\n<p>I have read quite a lot about this error, and it says that <em>call _main</em> and <em>call ___main</em> are part of the C library setup and have the same address (which is true), but my assembler is not letting it through.</p>\n\n<p>I am using GCC version 5.3.0 for the cross compiler.</p>\n"}, {"tags": ["c", "intel-mkl"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1501083771, "post_id": 45331632, "comment_id": 77625136, "body": "<i>Or will there also be padding between array elements?</i> - think, how can it even do it? It is returning you a pointer to <code>void</code>, it doesn&#39;t have any notion of &quot;elements&quot;. And it is aligning the <i>start</i> of array, no padding in the end is required."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1501083901, "post_id": 45331632, "comment_id": 77625225, "body": "@EugeneSh. .. and even if there were, the C Standard explicitly defines that no padding <i>between</i> array elements shall occur."}, {"owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1501083907, "post_id": 45331632, "comment_id": 77625231, "body": "@EugeneSh. Thanks, can you put it as an answer?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1501083955, "post_id": 45331632, "comment_id": 77625272, "body": "Nah.. too lazy."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1501092217, "post_id": 45331632, "comment_id": 77630817, "body": "@EugeneSh. I&#39;d UV your <a href=\"https://stackoverflow.com/questions/45331632/will-memcpy-correctly-copy-an-array-allocated-with-mkl-malloc#comment77625272_45331632\">comment</a>, but I guess I am T.L. too.   ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 16365, "user_id": 401656, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NczD5.png?s=128&g=1", "display_name": "jjmontes", "link": "https://stackoverflow.com/users/401656/jjmontes"}, "is_accepted": true, "score": 1, "last_activity_date": 1501084412, "creation_date": 1501084412, "answer_id": 45331907, "question_id": 45331632, "link": "https://stackoverflow.com/questions/45331632/will-memcpy-correctly-copy-an-array-allocated-with-mkl-malloc/45331907#45331907", "title": "Will memcpy correctly copy an array allocated with mkl_malloc?", "body": "<p>Your example <code>memcpy(b, a, 10 * sizeof(double));</code> will work correctly.</p>\n\n<p>Alignment applies to the <em>start address</em>, not to the size of the reserved memory block.</p>\n"}], "owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 45331907, "answer_count": 1, "score": 2, "last_activity_date": 1501084412, "creation_date": 1501083646, "question_id": 45331632, "link": "https://stackoverflow.com/questions/45331632/will-memcpy-correctly-copy-an-array-allocated-with-mkl-malloc", "title": "Will memcpy correctly copy an array allocated with mkl_malloc?", "body": "<p>I'm allocating an array with <code>mkl_malloc</code> with a <code>64</code> alignment, and I need to make a copy of it. But I don't understand how aligning works. Does <code>mkl_malloc</code> just add padding at the end so that the total size of the array is a multiple of 64 bytes? Or will there also be padding between array elements?</p>\n\n<p>Will code like the example below copy all of <code>a</code> into <code>b</code>, or only part of it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;mkl.h&gt;\n\nint main() {\n    double *a = mkl_malloc(10 * sizeof(double), 64);\n\n    // is this enough memory to include a?\n    double *b = malloc(10 * sizeof(double));\n\n    // will this copy all of a?\n    memcpy(b, a, 10 * sizeof(double));\n\n    mkl_free(a);\n    free(b);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sdl"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1501082993, "post_id": 45331316, "comment_id": 77624524, "body": "Silly question, but does this work in other applications? Not all keyboards can detect an arbitrary number of simultaneous keypresses -- if you see folks advertising a keyboard with &quot;NKRO&quot;, that&#39;s what it&#39;s about. See also <a href=\"https://en.wikipedia.org/wiki/Rollover_(key)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Rollover_(key)</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083094, "post_id": 45331316, "comment_id": 77624608, "body": "If this is Linux, by the way, one way to answer the question with certainty is to parse evdev events coming from the input core (if you&#39;re on Linux) -- see the example code at <a href=\"https://python-evdev.readthedocs.io/en/latest/usage.html\" rel=\"nofollow noreferrer\">python-evdev.readthedocs.io/en/latest/usage.html</a>"}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083147, "post_id": 45331316, "comment_id": 77624661, "body": "@CharlesDuffy I tried it with another program, which I wrote especially to study events, and the problem was there too, it was the same. Also, you are telling me that my computer may not be able to detect 3 keypresses at the same time? It is strange since in several applications I can use more than 3 keys at the same time. However I am not on Linux, unfortunately."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083194, "post_id": 45331316, "comment_id": 77624699, "body": "<i>Which</i> keys matters. Explicit modifier keys such as ctrl and alt often have special handling at the hardware level. Which platform are you on? Maybe we can try to find an equivalent test."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083340, "post_id": 45331316, "comment_id": 77624806, "body": "...if this is a USB keyboard, you might try <a href=\"http://desowin.org/usbpcap/\" rel=\"nofollow noreferrer\">USBpcap</a> to look at which events are coming from the hardware. (Obviously, if there&#39;s no hardware event, there won&#39;t be anything you can do to fix the issue from software)."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083356, "post_id": 45331316, "comment_id": 77624824, "body": "It is not, I use a laptop PC"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083397, "post_id": 45331316, "comment_id": 77624861, "body": "Can you find a USB keyboard? Either it&#39;ll work, and that&#39;ll answer the question (as being about the hardware), or it won&#39;t, and you&#39;ll be able to sniff events to figure it out that way."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083447, "post_id": 45331316, "comment_id": 77624901, "body": "Interesting: I made a test in the game Minecraft. I assigned to the keys down and left some movements, and in game, when pressing both, my character was going backwards and on the left, but I could not jump (with space)."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1501083466, "post_id": 45331316, "comment_id": 77624917, "body": "I don&#39;t have a USB keyboard"}], "answers": [{"comments": [{"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 2, "creation_date": 1501084372, "post_id": 45331690, "comment_id": 77625578, "body": "The term &quot;ghost&quot; (written in the wikipedia page you shared) interested me so I searched on the Internet and found something that also helps alot understanding the problem I am facing: <a href=\"https://www.microsoft.com/appliedsciences/antighostingexplained.mspx\" rel=\"nofollow noreferrer\">microsoft.com/appliedsciences/antighostingexplained.mspx</a>"}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": true, "score": 4, "last_activity_date": 1501083784, "last_edit_date": 1592644375, "creation_date": 1501083784, "answer_id": 45331690, "question_id": 45331316, "link": "https://stackoverflow.com/questions/45331316/no-sdl-event-for-space-keypress-if-downright-or-upleft-already-pressed/45331690#45331690", "title": "No SDL event for space keypress if down+right or up+left already pressed", "body": "<p>This is almost certainly a hardware limitation. Quoting from <a href=\"https://en.wikipedia.org/wiki/Rollover_(key)\" rel=\"nofollow noreferrer\">the relevant Wikipedia page</a>, emphasis added:</p>\n<blockquote>\n<p><strong>Certain high-end keyboards have &quot;n-key rollover&quot;.</strong> This means that each key is scanned completely independently by the keyboard hardware, so that each keypress is correctly detected regardless of how many other keys are being pressed or held down at the time. [...]</p>\n<p><strong>However, to reduce cost and design complexity, most computer keyboards do not isolate all keys in this way. Instead, they use a matrix of key switches,</strong> without any isolation diodes, <strong>that assumes that only a limited number of keys will be held down at any given time.</strong> With these keyboards, pressing as few as three keys can cause ghosting effects, although care is taken when laying out the matrix arrangement that this does not happen for common modifier key combinations.</p>\n</blockquote>\n"}], "owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 45331690, "answer_count": 1, "score": 2, "last_activity_date": 1501083784, "creation_date": 1501082763, "last_edit_date": 1501083250, "question_id": 45331316, "link": "https://stackoverflow.com/questions/45331316/no-sdl-event-for-space-keypress-if-downright-or-upleft-already-pressed", "title": "No SDL event for space keypress if down+right or up+left already pressed", "body": "<p>I am experimenting movements in a 2D game in SDL, and it works fine. However when I add the possibility for the character to shoot by pressing <code>SPACE</code>, I face a strange bug: If down and right keys or up and left keys are already pressed, no event is created when pressing <code>SPACE</code>. In other cases, an event is created, as it should be.</p>\n\n<p>Here is the loop I use to get some events:</p>\n\n<pre><code>while (on == 1)\n{\n    SDL_PollEvent(&amp;event);\n    switch (event.type)\n    {\n        case SDL_KEYDOWN:\n            switch (event.key.keysym.sym)\n            {\n                case SDLK_ESCAPE:\n                    on = 0;\n                    break;\n                case SDLK_UP:\n                    shooter1.dir[0] = 1; // shooter1 is an instance of a structure that\n                                         // contains a position and an array representing\n                                         // 4 directions (down, up, left, right)\n                    break;\n                case SDLK_DOWN:\n                    shooter1.dir[1] = 1;\n                    break;\n                case SDLK_LEFT:\n                    shooter1.dir[2] = 1;\n                    break;\n                case SDLK_RIGHT:\n                    shooter1.dir[3] = 1;\n                    break;\n                case SDLK_SPACE:         // Eventually, the program does not go in this\n                                         // case, even though the SPACE key is pressed\n                    fprintf(stderr, \"SPACE PRESSED\\n\");\n                    break;\n                default:\n                    break;\n            }\n            break;\n        case SDL_KEYUP:\n            switch (event.key.keysym.sym)\n            {\n                case SDLK_UP:\n                    shooter1.dir[0] = 0;\n                    break;\n                case SDLK_DOWN:\n                    shooter1.dir[1] = 0;\n                    break;\n                case SDLK_LEFT:\n                    shooter1.dir[2] = 0;\n                    break;\n                case SDLK_RIGHT:\n                    shooter1.dir[3] = 0;\n                    break;\n                default:\n                    break;\n            }\n            break;\n        default:\n            break;\n    }\n    event.type = 0;\n    get_new_positions(&amp;shooter1);\n    SDL_BlitSurface(background, NULL, screen, &amp;background_pos);\n    blit_shooter(screen, &amp;shooter1);\n    SDL_Flip(screen);\n}\n</code></pre>\n\n<p>Any idea of what this behavior is due to?</p>\n"}, {"tags": ["c", "winapi", "winhttp", "getlasterror"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1501083198, "post_id": 45330858, "comment_id": 77624703, "body": "You are propably referring to the example at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383144(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this page</a>. Look again at the code. The check for <code>ERROR_WINHTTP_RESEND_REQUEST</code> is done if either <code>WinHttpSendRequest()</code> or <code>WinHttpReceiveResponse()</code> fails."}], "answers": [{"tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": true, "score": 4, "last_activity_date": 1501094098, "creation_date": 1501094098, "answer_id": 45334947, "question_id": 45330858, "link": "https://stackoverflow.com/questions/45330858/winhttpsendrequest-and-error-winhttp-resend-request/45334947#45334947", "title": "WinHttpSendRequest and ERROR_WINHTTP_RESEND_REQUEST", "body": "<blockquote>\n  <p>But samples from MSDN (Authentication in WinHTTP) checks for this\n  value after WinHttpReceiveResponse.</p>\n</blockquote>\n\n<p>At a first glance <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383144(v=vs.85).aspx\" rel=\"nofollow noreferrer\">the sample</a> may look like that. But if you look closely, the sample actually checks for <code>ERROR_WINHTTP_RESEND_REQUEST</code> if <strong>either</strong> <code>WinHttpSendRequest()</code> <strong>or</strong> <code>WinHttpReceiveResponse()</code> fails:</p>\n\n<pre><code>// Send a request.\nbResults = WinHttpSendRequest( hRequest,\n                               WINHTTP_NO_ADDITIONAL_HEADERS,\n                               0,\n                               WINHTTP_NO_REQUEST_DATA,\n                               0, \n                               0, \n                               0 );\n\n// End the request.\nif( bResults )\n  bResults = WinHttpReceiveResponse( hRequest, NULL );\n\n// Resend the request in case of \n// ERROR_WINHTTP_RESEND_REQUEST error.\nif( !bResults &amp;&amp; GetLastError( ) == ERROR_WINHTTP_RESEND_REQUEST)\n    continue;\n</code></pre>\n\n<p>If <code>WinHttpSendRequest()</code> returns <code>FALSE</code>, the call to <code>WinHttpReceiveResponse()</code> will be skipped and <code>GetLastError()</code> will be checked for <code>ERROR_WINHTTP_RESEND_REQUEST</code>. This code is inside a <code>while</code> loop, so the <code>continue</code> statement will cause the remaining portion of the loop to be skipped so <code>WinHttpSendRequest()</code> will be called again.</p>\n\n<p><strong>Conclusion:</strong> The sample is in line with the reference documentation.</p>\n"}], "owner": {"reputation": 315, "user_id": 2514215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ca566c93b8bdc17b5898e88c30bcc2b?s=128&d=identicon&r=PG", "display_name": "Ali Asadpoor", "link": "https://stackoverflow.com/users/2514215/ali-asadpoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "accepted_answer_id": 45334947, "answer_count": 1, "score": 3, "last_activity_date": 1501094426, "creation_date": 1501081567, "last_edit_date": 1501094426, "question_id": 45330858, "link": "https://stackoverflow.com/questions/45330858/winhttpsendrequest-and-error-winhttp-resend-request", "title": "WinHttpSendRequest and ERROR_WINHTTP_RESEND_REQUEST", "body": "<p>Is it possible for GetLastError() to return ERROR_WINHTTP_RESEND_REQUEST after calling WinHttpSendRequest?</p>\n\n<p>Documentation for WinHttpSendRequest:</p>\n\n<blockquote>\n  <p>ERROR_WINHTTP_RESEND_REQUEST <br>\n  The application must call\n  WinHttpSendRequest again due to a redirect or authentication\n  challenge. Windows Server\u00a02003 with SP1, Windows\u00a0XP with SP2 and\n  Windows\u00a02000:\u00a0\u00a0This error is not supported.</p>\n</blockquote>\n\n<p>But samples from MSDN (Authentication in WinHTTP) checks for this value after WinHttpReceiveResponse.</p>\n"}, {"tags": ["c", "raspberry-pi", "gnuplot"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501080958, "post_id": 45330475, "comment_id": 77622787, "body": "Not sure I understand what you&#39;re doing here, but in any case, elaborating a bit on the &quot;<i>stopped working</i>&quot; part would probably be helpful."}, {"owner": {"reputation": 91, "user_id": 7122572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ed0f1ca04053b43ad2a651b7810a981?s=128&d=identicon&r=PG&f=1", "display_name": "Emperon", "link": "https://stackoverflow.com/users/7122572/emperon"}, "edited": false, "score": 0, "creation_date": 1501081376, "post_id": 45330475, "comment_id": 77623180, "body": "before I put the while loop in the program, gnuplot started normally at the end of my c program plotting my data. I just need to know if I can live stream data to gnuplot in c. this is the first time I do such thing."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 3, "creation_date": 1501082126, "post_id": 45330475, "comment_id": 77623822, "body": "@Christoph - Sadly, here&#39;s an on-topic GNUplot question and it was downvoted. I really don&#39;t understand some Stack Overflow members at times. On-topic questions are downvoted; off-topic questions are upvoted."}, {"owner": {"reputation": 3626, "user_id": 7932936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88294cbc3a02c75cfbb906658ad85e15?s=128&d=identicon&r=PG", "display_name": "user8153", "link": "https://stackoverflow.com/users/7932936/user8153"}, "edited": false, "score": 4, "creation_date": 1501086806, "post_id": 45330475, "comment_id": 77627371, "body": "Just a guess: you might have to send a single line containing the letter &quot;e&quot; to gnuplot after you send the inline data (i.e., after the for loop if the <code>fprintf</code> statement) -- otherwise gnuplot doesn&#39;t know that it has all the data for the current plot and should proceed to display it."}, {"owner": {"reputation": 91, "user_id": 7122572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ed0f1ca04053b43ad2a651b7810a981?s=128&d=identicon&r=PG&f=1", "display_name": "Emperon", "link": "https://stackoverflow.com/users/7122572/emperon"}, "edited": false, "score": 0, "creation_date": 1501088079, "post_id": 45330475, "comment_id": 77628158, "body": "Yes!!! you sir saved my day. thank you very much!"}], "owner": {"reputation": 91, "user_id": 7122572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1ed0f1ca04053b43ad2a651b7810a981?s=128&d=identicon&r=PG&f=1", "display_name": "Emperon", "link": "https://stackoverflow.com/users/7122572/emperon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1612490041, "creation_date": 1501080645, "last_edit_date": 1612490041, "question_id": 45330475, "link": "https://stackoverflow.com/questions/45330475/gnuplot-live-stream-with-c", "title": "gnuplot live stream with c", "body": "<p>I'm an electronic engineer and I can use C. I'm writing a program that acquires data from an ECG module and send it to another remote pc using an arrays of data through socket. All works properly. My problem is, I need to plot that data in live stream.</p>\n\n<p>To stream data I tried to use gnuplot, everything worked fine but when I put the <code>fprintf</code> code in a while loop to refresh the array and write new data it stopped working.</p>\n\n<p>This is part of the raw code I used to call gnuplot in my c program:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>FILE* gnuplot = popen(\"gnuplot -persist\", \"w\");\nwhile(1) {\n    //pulizia buffer e lettura\n    bzero(buffer, sizeof(buffer));\n\n    n = read(newsockfd,buffer,sizeof(buffer));\n    if (n &lt; 0) error(\"Errore nella lettura del Socket\");\n\n    for (j=0; j &lt;= 255; j++){\n        printf(\"%d \",buffer[j]);\n    }\n\n    //comunico con gnuplot e invio i miei dati \n    fprintf(gnuplot, \"plot '-' \\n\");\n    for (i = 0; i &lt; NUM_POINTS; i++)\n    {\n        fprintf(gnuplot, \"%d %d\\n\", (r+i), buffer[i]);\n    }\n    r = r+i+1;\n    fflush(gnuplot);\n}\n</code></pre>\n\n<p>Why did the program stop working when I added the <code>printf</code>, and how do I fix it?</p>\n"}, {"tags": ["c", "memmove"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1501078016, "post_id": 45329296, "comment_id": 77620338, "body": "Please link to the post that you&#39;re referring to."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1501078043, "post_id": 45329296, "comment_id": 77620356, "body": "Did the buffers you tested with overlap? Because that&#39;s the main purpose of memmove."}, {"owner": {"reputation": 4659, "user_id": 2595033, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/bd78391e14ec16fe30d2e1811a841c70?s=128&d=identicon&r=PG", "display_name": "user9993", "link": "https://stackoverflow.com/users/2595033/user9993"}, "edited": false, "score": 1, "creation_date": 1501078094, "post_id": 45329296, "comment_id": 77620394, "body": "<code>it will perform forward copying otherwise it will perform backward copying</code>. What does this even mean? That it will copy from address 0x000 to 0xFFF sometimes but othertimes will copy from 0xFFF to 0x000? Why would it need to do a reverse copy?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1501078484, "post_id": 45329296, "comment_id": 77620714, "body": "&quot;I tried forward copying for both cases and that worked perfectly fine without any error.&quot;  --&gt; show that code.  Perhaps what you conclude as &quot;perfectly fine&quot; is not so."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1501080245, "post_id": 45329296, "comment_id": 77622207, "body": "&quot;There was this post \u2026&quot; - which post? The standard does not make any requirement <b>how</b> the library functions have to accomplish their task. (and it typically is not that simple as you wrote). And what is your problem? It seems there is none, so what is unclear about the documentation?"}, {"owner": {"reputation": 323, "user_id": 8297714, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1431515270247024/picture?type=large", "display_name": "Yatendra Rathore", "link": "https://stackoverflow.com/users/8297714/yatendra-rathore"}, "edited": false, "score": 0, "creation_date": 1501084915, "post_id": 45329296, "comment_id": 77626012, "body": "<a href=\"https://stackoverflow.com/a/22746165/8297714\">stackoverflow.com/a/22746165/8297714</a> for the above source code and <a href=\"https://stackoverflow.com/a/27774099/8297714\">stackoverflow.com/a/27774099/8297714</a> for the comment that signified it.(check the third comment)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501093761, "post_id": 45329296, "comment_id": 77631653, "body": "BTW:  <code>if ( ps &lt; pd )</code>  is UB, yet likely does what you want."}], "answers": [{"comments": [{"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1501107093, "post_id": 45329421, "comment_id": 77638580, "body": "Hmmm, I get the feeling that backwards copying would be very cache unfriendly. Am I right?"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 15, "last_activity_date": 1501078695, "last_edit_date": 1501078695, "creation_date": 1501078183, "answer_id": 45329421, "question_id": 45329296, "link": "https://stackoverflow.com/questions/45329296/why-memmove-function-works-this-way/45329421#45329421", "title": "Why memmove() function works this way?", "body": "<blockquote>\n  <p>if the source address(data to be copied from) is greater than destination address(data to be copied to), it will perform forward copying otherwise it will perform backward copying.</p>\n</blockquote>\n\n<p>This is important only when <code>from</code> and <code>to</code> ranges <em>overlap</em>. For non-overlapping ranges the direction of copying does not matter.</p>\n\n<p>It matters for overlapping ranges because if you start copying from the beginning, you will destroy the source data before you get to copying it.</p>\n"}], "owner": {"reputation": 323, "user_id": 8297714, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1431515270247024/picture?type=large", "display_name": "Yatendra Rathore", "link": "https://stackoverflow.com/users/8297714/yatendra-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 1, "accepted_answer_id": 45329421, "answer_count": 1, "score": 6, "last_activity_date": 1501084811, "creation_date": 1501077927, "last_edit_date": 1501084811, "question_id": 45329296, "link": "https://stackoverflow.com/questions/45329296/why-memmove-function-works-this-way", "title": "Why memmove() function works this way?", "body": "<p>I was going through various questions related to <code>memmove()</code> vs <code>memcpy()</code> on Stack Overflow.</p>\n\n<p>There was this post that implied that if the source address (data to be copied from) is greater than destination address (data to be copied to), it will perform forward copying otherwise it will perform backward copying.</p>\n\n<p>Why it is that way?  I tried forward copying for both cases and that worked perfectly fine without any error.</p>\n\n<p>Can you please elaborate? I'm not getting the reason.</p>\n\n<p>EDIT: here's what i meant to say:</p>\n\n<pre><code>#include &lt;memory.h&gt; \n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\nvoid *memmoveCustom(void *dest, const void *src, size_t n)\n{\n    unsigned char *pd = (unsigned char *)dest;\n    const unsigned char *ps = (unsigned char *)src;\n    if ( ps &lt; pd )\n        for (pd += n, ps += n; n--;)\n            *--pd = *--ps;\n    else\n        while(n--)\n            *pd++ = *ps++;\n    return dest;\n}\n\nint main( void )\n{\n    printf( \"The string: %s\\n\", str1 );\n\n    memmoveCustom( str1 + 1, str1, 9 );\n    printf( \"Implemented memmove output: %s\\n\", str1 );\n\n    getchar();\n}\n</code></pre>\n\n<p>Above program is an example code that is implementing a custom memmove() function.\nInside the function, you can see when the source address was greater than destination address, it performed forward copying otherwise it added n-location to the existing addresses and performed the copying from backward.\nThat's it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 1, "creation_date": 1501078015, "post_id": 45329286, "comment_id": 77620336, "body": "<code>for(i=len-1;i&gt;=0;i++)</code>--&gt; <code>for(i=len-1;i&gt;=0;i--)</code> and why are you allocating memory for <code>str</code> in main when you are already allocating memory in <code>reverse()</code>"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1501078017, "post_id": 45329286, "comment_id": 77620340, "body": "<code>str=reverse(input);</code> is leaking memory."}, {"owner": {"reputation": 11, "user_id": 6024792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af9a1e430c114dba4bbe8141db571897?s=128&d=identicon&r=PG&f=1", "display_name": "karan2996", "link": "https://stackoverflow.com/users/6024792/karan2996"}, "edited": false, "score": 0, "creation_date": 1501078377, "post_id": 45329286, "comment_id": 77620609, "body": "Made the required changes but i&#39;m still getting the same error."}, {"owner": {"reputation": 425, "user_id": 8119002, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jdJBu.jpg?s=128&g=1", "display_name": "pierreafranck", "link": "https://stackoverflow.com/users/8119002/pierreafranck"}, "edited": false, "score": 0, "creation_date": 1501079111, "post_id": 45329286, "comment_id": 77621235, "body": "I try your programme and it works for me. Just change the last printf into <code>printf(&quot;%s\\n&quot;, str);</code> and <code>input = &quot;ATGC&quot;</code> before the call to reverse. It works fine and print CGAT."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501110473, "post_id": 45329286, "comment_id": 77639678, "body": "in function: <code>main()</code>, the array <code>str[]</code> is being set, but never used."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501110685, "post_id": 45329286, "comment_id": 77639730, "body": "when calling any of the heap allocation functions: (malloc, calloc, realloc) 1) the expression <code>sizeof(char)</code> is (per the standard) always 1.  Multiplying anything by 1 has no effect.  Suggest remove that expression the call to <code>malloc()</code>  2) the returned type from any these functions is <code>void*</code> which can be assigned to any other pointer.  Casting just clutters the code (and is error prone).  Suggest removing the cast.  3) always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501111017, "post_id": 45329286, "comment_id": 77639810, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value (not the parameter values) to assure the operation was successful.  2) when using the <code>%s</code> input/format specifier, always include a MAX CHARACTERS modifier that is 1 less than the length of the input buffer so a buffer overrun will not occur.  Such buffer overrun results in undefined behavior and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501111139, "post_id": 45329286, "comment_id": 77639847, "body": "the posted code has a massive memory leak.  This can be fixed by inserting this statement: <code>free( str );</code>  just before returning from <code>main()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501111247, "post_id": 45329286, "comment_id": 77639876, "body": "suggest: print the input buffer before performing the <code>reverse</code>  Then add a new print statement After the call to <code>reverse()</code> to allow the user to verify the modified string"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501111429, "post_id": 45329286, "comment_id": 77639925, "body": "All the output streams are buffered.  So the output can sit in that buffer until the program ends.  To get immediate display on the terminal, either append a &#39;\\n&#39; to the end of the format string (for instance of <code>printf()</code>) -or- follow the print operation with a call to <code>fflush( stdout )</code>  Note, the first method is preferred."}], "answers": [{"comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1501078537, "post_id": 45329505, "comment_id": 77620758, "body": "Why should the for loop be infinite? Counting down from len-1 ... 0 is perfectly fine"}, {"owner": {"reputation": 3879, "user_id": 7371784, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78e670334411962158df4d1ac6803ac9?s=128&d=identicon&r=PG&f=1", "display_name": "Kristjan Kica", "link": "https://stackoverflow.com/users/7371784/kristjan-kica"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1501078614, "post_id": 45329505, "comment_id": 77620814, "body": "He had it <code>++</code> instead of <code>--</code> .Must have edited it now."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1501078748, "post_id": 45329505, "comment_id": 77620922, "body": "Ah, I missed that fix. Of course you are right, then."}], "tags": [], "owner": {"reputation": 3879, "user_id": 7371784, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/78e670334411962158df4d1ac6803ac9?s=128&d=identicon&r=PG&f=1", "display_name": "Kristjan Kica", "link": "https://stackoverflow.com/users/7371784/kristjan-kica"}, "is_accepted": false, "score": 1, "last_activity_date": 1501078396, "creation_date": 1501078396, "answer_id": 45329505, "question_id": 45329286, "link": "https://stackoverflow.com/questions/45329286/im-getting-runtime-error-segmentation-fault-sigsegv-why/45329505#45329505", "title": "I&#39;m getting Runtime Error : Segmentation Fault (SIGSEGV), why?", "body": "<p>First of all, you use <code>i++</code> instead of <code>i--</code> in the for loop. That means that the <code>for</code> loop never ends and <code>k</code> gets very very big and your <code>rev[k]</code> atempts to access values that it shouldnt.</p>\n\n<p>Secondly, you do not need to allocate memory for <code>str</code>, because you allocate it in the function.</p>\n\n<p>And you should allocate memory for one more char in the function as you will need if for <code>'\\0'</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 4, "last_activity_date": 1501078650, "creation_date": 1501078650, "answer_id": 45329616, "question_id": 45329286, "link": "https://stackoverflow.com/questions/45329286/im-getting-runtime-error-segmentation-fault-sigsegv-why/45329616#45329616", "title": "I&#39;m getting Runtime Error : Segmentation Fault (SIGSEGV), why?", "body": "<p>You do not allocate enough memory to hold your reversed string:</p>\n\n<pre><code>int len=strlen(input);\n...\nrev=(char*)malloc(sizeof(char)*len);\n...\nrev[k]='\\0';\n</code></pre>\n\n<p>You missed 1 extra byte for the terminating <code>\\0</code>.</p>\n\n<p>And by the way... Please don't cast the return value from <code>malloc</code> to a pointer.</p>\n"}], "owner": {"reputation": 11, "user_id": 6024792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af9a1e430c114dba4bbe8141db571897?s=128&d=identicon&r=PG&f=1", "display_name": "karan2996", "link": "https://stackoverflow.com/users/6024792/karan2996"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1501084575, "creation_date": 1501077915, "last_edit_date": 1501084575, "question_id": 45329286, "link": "https://stackoverflow.com/questions/45329286/im-getting-runtime-error-segmentation-fault-sigsegv-why", "title": "I&#39;m getting Runtime Error : Segmentation Fault (SIGSEGV), why?", "body": "<p>I am getting a runtime error in this and i can't seem to figure it out.\nThis is my code to reverse a string and change A to T and vice-versa and to change C to G and vice-versa,</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nchar* reverse(char *input)\n{\n    int len=strlen(input);\n    char *rev=NULL;\n    rev=(char*)malloc(sizeof(char)*len);\n    int i,k=0;\n    for(i=len-1;i&gt;=0;i--)\n    {\n        rev[k++]=input[i];\n        if(rev[k-1]=='A')\n            rev[k-1]='T';\n        else if(rev[k-1]=='T')\n            rev[k-1]='A';\n        else if(rev[k-1]=='C')\n            rev[k-1]='G';\n        else if(rev[k-1]=='G')\n            rev[k-1]='C';\n    }\n    rev[k]='\\0';\n    return rev;\n}\n\nint main()\n{\n    char *input=(char *)malloc(sizeof(char)*1000);\n    scanf(\"%s\",input);\n    char *str =NULL;//(char*)malloc(sizeof(char)*1000);\n    str=reverse(input);\n    printf(\"%s\",input);\n     free(input);\n}\n</code></pre>\n"}, {"tags": ["c", "string"], "comments": [{"owner": {"reputation": 712, "user_id": 4009370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b92c9a656d5274db5b46d2341ea468?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Sprague", "link": "https://stackoverflow.com/users/4009370/chris-sprague"}, "edited": false, "score": 1, "creation_date": 1501077408, "post_id": 45329017, "comment_id": 77619798, "body": "You&#39;re not copying anything when encountering space characters, so when you print out <code>temp</code> the characters you see there are at the mercy of what was allocated for you (for example, the <code>?</code> character). You should use another index to keep track of how far you are in to <code>temp</code> so you make sure the &quot;holes&quot; are filled in. You should also make sure <code>temp</code> is properly null-terminated when you&#39;re finished copying."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501077454, "post_id": 45329017, "comment_id": 77619836, "body": "Two problems: You use uninitialized elements of <code>s</code> since you use <code>sizeof</code> instead of <code>strlen</code> to get the length of the string in <code>s</code>. The other is you basically make a straight string copy from <code>s</code> to <code>temp</code> <i>except</i> where <code>s</code> contains a space, where you leave the corresponding element in <code>temp</code> <i>uninitialized</i>."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 4, "creation_date": 1501077620, "post_id": 45329017, "comment_id": 77619995, "body": "Why don&#39;t you replace your format string <code>&quot;%c&quot;</code> by a string that only includes the fields you want without spaces? Like <code>&quot;%a%b%d%T&quot;</code>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1501081624, "post_id": 45329017, "comment_id": 77623390, "body": "Again a perfect opportunity to learn how to use debugger and trace through the program line by line inspecting the values of the relevant variables to learn what is <i>really</i> going on. If then a <i>specific</i> question arises feel free to come back here."}], "answers": [{"comments": [{"owner": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501079357, "post_id": 45329112, "comment_id": 77621468, "body": "@chux I think what you&#39;re suggesting is an improvement."}], "tags": [], "owner": {"reputation": 8543, "user_id": 2067492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af3ad01b032767b05a7e98fede6d6e?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/2067492/matt"}, "is_accepted": false, "score": 6, "last_activity_date": 1501079444, "last_edit_date": 1501079444, "creation_date": 1501077499, "answer_id": 45329112, "question_id": 45329017, "link": "https://stackoverflow.com/questions/45329017/how-to-remove-spaces-from-date-time-string-in-c/45329112#45329112", "title": "How to remove spaces from date time string in c", "body": "<pre><code>int j = 0;\nfor (int i = 0; s[i]!='\\0'; i++) {\n  if (s[i] != ' ') {\n    temp[j] = s[i];\n    j++;\n  }\n}\n</code></pre>\n\n<p>Keep track of the index so you don't just leave the spaces with some random value. Also, you should add a null at the end of temp.</p>\n\n<pre><code>temp[j] = '\\0';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 425, "user_id": 8119002, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jdJBu.jpg?s=128&g=1", "display_name": "pierreafranck", "link": "https://stackoverflow.com/users/8119002/pierreafranck"}, "is_accepted": false, "score": 4, "last_activity_date": 1501078500, "last_edit_date": 1501078500, "creation_date": 1501077961, "answer_id": 45329317, "question_id": 45329017, "link": "https://stackoverflow.com/questions/45329017/how-to-remove-spaces-from-date-time-string-in-c/45329317#45329317", "title": "How to remove spaces from date time string in c", "body": "<p>Matt's answer works but you can do it too:</p>\n\n<p>This exemple is without call to system function: strlen. Here we don't need it. It's a bit optimize. </p>\n\n<pre><code>i = 0;\nint j = 0;\nwhile (s[i] != '\\0')\n  {\n    if (s[i] == ' ')\n      {\n        temp[j] = s[i];\n        j++;\n      }\n    i++;\n  }\ntemp[j] = '\\0';\n</code></pre>\n\n<p>Don't forget the '\\0' at the end of your string. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501078928, "post_id": 45329384, "comment_id": 77621059, "body": "If the string came from <code>asctime()</code>, there is no <code>&quot;%c&quot;</code> to replace."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501079063, "post_id": 45329384, "comment_id": 77621187, "body": "Ah yes, true enough."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1501079675, "post_id": 45329384, "comment_id": 77621740, "body": "This has the advantage that the original <code>char s[64];</code> may be smaller/less chance of overrun."}], "tags": [], "owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "is_accepted": false, "score": 2, "last_activity_date": 1501079118, "last_edit_date": 1501079118, "creation_date": 1501078112, "answer_id": 45329384, "question_id": 45329017, "link": "https://stackoverflow.com/questions/45329017/how-to-remove-spaces-from-date-time-string-in-c/45329384#45329384", "title": "How to remove spaces from date time string in c", "body": "<p>Matt already provided an answer for what you <em>asked</em>.</p>\n\n<p>What you probably <em>want</em> or <em>need</em> can also be achieved a bit easier.\nIf you don't want spaces, just avoid adding them in the first place:</p>\n\n<p>Replace your format string <code>\"%c\"</code> for <code>strftime()</code> which provides standard format for your locale with a string that creates directly what you want: <code>\"%a%b%d%T\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1501082205, "last_edit_date": 1501082205, "creation_date": 1501081897, "answer_id": 45330971, "question_id": 45329017, "link": "https://stackoverflow.com/questions/45329017/how-to-remove-spaces-from-date-time-string-in-c/45330971#45330971", "title": "How to remove spaces from date time string in c", "body": "<p>A bit more expensive, but you at least do not need another variable and as well have a valid string on each modification.</p>\n\n<pre><code>#include &lt;string.h&gt;\n\n...\n\n  size_t l = strlen(s);\n  for (size_t i = 0; i &lt; l; ++i) {\n    if (s[i] != ' ') {\n      memmove(s+i, s+i+1, l-i+1); \n    }\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 967, "user_id": 5294619, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/afe990a13c278488b9e2268e226f082a?s=128&d=identicon&r=PG&f=1", "display_name": "ddbug", "link": "https://stackoverflow.com/users/5294619/ddbug"}, "is_accepted": false, "score": 0, "last_activity_date": 1501084663, "creation_date": 1501084663, "answer_id": 45331998, "question_id": 45329017, "link": "https://stackoverflow.com/questions/45329017/how-to-remove-spaces-from-date-time-string-in-c/45331998#45331998", "title": "How to remove spaces from date time string in c", "body": "<p>You can squeeze spaces out in place, using standard library functions. Given that the string is very short and there's only a few spaces, performance won't suffer much.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n    time_t t = time(NULL);\n    struct tm *tm = localtime(&amp;t);\n    char s[64];\n    strftime(s, sizeof(s), \"%c\", tm);\n    printf(\"before: %s\\n\", s);\n\n    for ( char *p = strchr(s, ' '); p ;  p = strchr(p, ' ') )\n        strcpy(p, p+1);\n\n   printf(\"after: %s\\n\",s);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 8020705, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/41237e3aa506f0b25f5d0009e2a16572?s=128&d=identicon&r=PG&f=1", "display_name": "artic sol", "link": "https://stackoverflow.com/users/8020705/artic-sol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1501084663, "creation_date": 1501077255, "question_id": 45329017, "link": "https://stackoverflow.com/questions/45329017/how-to-remove-spaces-from-date-time-string-in-c", "title": "How to remove spaces from date time string in c", "body": "<p>The code below creates a string with date and time for example <code>Wed Jul 26 14:45:28 2017</code> </p>\n\n<p>How could I remove the spaces from it? So that is is <code>WedJul2614:45:28</code>?</p>\n\n<p>Original code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main() {\n    time_t t = time(NULL);\n    struct tm *tm = localtime(&amp;t);\n    char s[64];\n    strftime(s, sizeof(s), \"%c\", tm);\n    printf(\"%s\\n\", s);\n}\n</code></pre>\n\n<p>I tried this code but it prints <code>wed?July</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main() {\n    time_t t = time(NULL);\n    struct tm *tm = localtime(&amp;t);\n    char s[64];\n    char temp[64];\n    strftime(s, sizeof(s), \"%c\", tm);\n    printf(\"%s\\n\", s);\n\n\n    for (int i = 0; i &lt; sizeof(s); i++) {\n      if (s[i] != ' ') {\n        temp[i] = s[i];\n      }\n    }\nprintf(\"%s\\n\", temp);  \n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1501077243, "post_id": 45328951, "comment_id": 77619650, "body": "You call <code>fprintf</code> <i>unconditionally</i>, even if <code>debug</code> is a null pointer."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501077304, "post_id": 45328951, "comment_id": 77619715, "body": "Also, you&#39;re <i>sure</i> that the filename will never be longer than 127 characters?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 1, "creation_date": 1501077351, "post_id": 45328951, "comment_id": 77619740, "body": "<code>printf(&quot;Cannot open %s for output\\n&quot;, filename);</code> should be <code>fprintf(stderr, &quot;Cannot open %s for output: %s\\n&quot;, filename, strerror(errno));</code>.  <b>Always</b> include <code>strerror(errno)</code> in the printed error message when I/O fails.  (You may need to add includes of <code>string.h</code> and <code>errno.h</code>.) This will not fix your immediate problem, but it will tell you <i>why</i> the debug file failed to be opened, which is your <i>next</i> problem."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1501077588, "post_id": 45328951, "comment_id": 77619963, "body": "You only have a declaration for <code>debug</code>.  It is not defined any where. How does this compile/link?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1501077939, "post_id": 45328951, "comment_id": 77620277, "body": "@AjayBrahmakshatriya Not to mention <code>file</code> instead of <code>FILE</code>. And a bunch of unknown variables. It&#39;s definitely not a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, <b>Complete</b>, and Verifiable Example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8370394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2900c0edc46a8c3997e44c02dfb22d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/8370394/naresh"}, "edited": false, "score": 0, "creation_date": 1501130363, "post_id": 45329612, "comment_id": 77644539, "body": "debug is a FILE pointer"}, {"owner": {"reputation": 629, "user_id": 8370553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4207ad9e3d4579b65cb4d9b10f5fc661?s=128&d=identicon&r=PG", "display_name": "tomrcht", "link": "https://stackoverflow.com/users/8370553/tomrcht"}, "reply_to_user": {"reputation": 11, "user_id": 8370394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2900c0edc46a8c3997e44c02dfb22d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/8370394/naresh"}, "edited": false, "score": 0, "creation_date": 1501141250, "post_id": 45329612, "comment_id": 77649927, "body": "Yes, but if your file is not found / failed to open, it will be a null pointer, thus raising a segfault."}, {"owner": {"reputation": 11, "user_id": 8370394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2900c0edc46a8c3997e44c02dfb22d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/8370394/naresh"}, "edited": false, "score": 0, "creation_date": 1501225787, "post_id": 45329612, "comment_id": 77694667, "body": "Yes, you are right i got it...thank you"}], "tags": [], "owner": {"reputation": 629, "user_id": 8370553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4207ad9e3d4579b65cb4d9b10f5fc661?s=128&d=identicon&r=PG", "display_name": "tomrcht", "link": "https://stackoverflow.com/users/8370553/tomrcht"}, "is_accepted": false, "score": 1, "last_activity_date": 1501078643, "creation_date": 1501078643, "answer_id": 45329612, "question_id": 45328951, "link": "https://stackoverflow.com/questions/45328951/signal-11-coredump/45329612#45329612", "title": "Signal 11 (Coredump)", "body": "<p>Your <code>fprintf</code> will try to print the <code>debug</code> variable even if it is a null pointer, resulting in a segfault.</p>\n"}], "owner": {"reputation": 11, "user_id": 8370394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2900c0edc46a8c3997e44c02dfb22d0a?s=128&d=identicon&r=PG&f=1", "display_name": "Naresh", "link": "https://stackoverflow.com/users/8370394/naresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "closed_date": 1501089294, "answer_count": 1, "score": 0, "last_activity_date": 1501124112, "creation_date": 1501077091, "last_edit_date": 1501124112, "question_id": 45328951, "link": "https://stackoverflow.com/questions/45328951/signal-11-coredump", "closed_reason": "Not suitable for this site", "title": "Signal 11 (Coredump)", "body": "<p>I am getting coredump at \"fprintf\", help me in fixing this error...</p>\n\n<p>GDB report:\nProgram received signal SIGSEGV, Segmentation fault.\n0x0000003935467934 in fwrite () from /lib64/libc.so.6</p>\n\n<p>Code:</p>\n\n<pre><code>extern FILE *debug;\n int main(int argc, char ** argv)\n {\n   if (argc != 2)\n   {\n       exit(1);\n   }\n    char filename[128];\n\n    memset(filename,  '\\0', 128);\n    strcpy(filename, var);\n    strcat(filename,\"/rout/debug\");\n    strcat(filename,\"_\");\n    strcat(filename,dateStr);\n    strcat(filename,\"_\");\n    strcat(filename,argv[1]);\n    strcat(filename,\".out\");\n\n   debug = fopen(filename, \"a\");\n   if (debug == NULL)\n      printf(\"Cannot open %s for output\\n\", filename);\n   fprintf(debug, \"\\n\\n\\t\\t********** Started **********\\n\\n\");\n   fflush(debug);\n }\n</code></pre>\n"}, {"tags": ["c", "debugging", "go", "cgo", "gccgo"], "comments": [{"owner": {"reputation": 2776, "user_id": 1094529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/glcan.png?s=128&g=1", "display_name": "Milo Christiansen", "link": "https://stackoverflow.com/users/1094529/milo-christiansen"}, "edited": false, "score": 0, "creation_date": 1501076014, "post_id": 45328414, "comment_id": 77618608, "body": "If you know how to use GDB, can&#39;t you debug the go program with that? Before delve was a thing that was the accepted solution,. I think go even comes with some GDB support scripts..."}, {"owner": {"reputation": 86274, "user_id": 32880, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35b00dd652b316f6cd6bb5c12c5be999?s=128&d=identicon&r=PG", "display_name": "JimB", "link": "https://stackoverflow.com/users/32880/jimb"}, "edited": false, "score": 2, "creation_date": 1501076173, "post_id": 45328414, "comment_id": 77618743, "body": "The simplest solution is often a liberal application of <code>printf</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2776, "user_id": 1094529, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/glcan.png?s=128&g=1", "display_name": "Milo Christiansen", "link": "https://stackoverflow.com/users/1094529/milo-christiansen"}, "is_accepted": false, "score": 2, "last_activity_date": 1501087040, "last_edit_date": 1501087040, "creation_date": 1501086624, "answer_id": 45332701, "question_id": 45328414, "link": "https://stackoverflow.com/questions/45328414/how-can-i-debug-c-code-called-with-cgo/45332701#45332701", "title": "How can I debug C code called with cgo?", "body": "<p>Some investigation shows your only real options are as follows:</p>\n\n<ol>\n<li>GDB. Go programs should work with GDB just fine, but GDB and cgo may not get along. I think this will work on *NIX systems, but Windows may or may not cooperate. Try it and see?</li>\n<li>Liberal application of good ol <code>printf</code> or other logging.</li>\n</ol>\n\n<p>Neither of these options is very good...</p>\n\n<p><a href=\"https://gist.github.com/dwbuiten/c9865c4afb38f482702e\" rel=\"nofollow noreferrer\">This document has a section on cgo debugging</a> seems to indicate that it works ok.</p>\n"}], "owner": {"reputation": 151, "user_id": 5919841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186c25db62190f816cd7195c8b5dff2b?s=128&d=identicon&r=PG&f=1", "display_name": "aedcv", "link": "https://stackoverflow.com/users/5919841/aedcv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2684, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1501087040, "creation_date": 1501075679, "question_id": 45328414, "link": "https://stackoverflow.com/questions/45328414/how-can-i-debug-c-code-called-with-cgo", "title": "How can I debug C code called with cgo?", "body": "<p><strong>Background</strong></p>\n\n<p>I'm currently in the process of writing a Go interface for this <a href=\"https://github.com/relic-toolkit/relic\" rel=\"nofollow noreferrer\">library</a>. </p>\n\n<p>As a first step, I'm trying to run the tests in <code>/test/test_pc.c</code> by calling them through Go wrappers. It is important to note that the tests are successful when compiled by GCC.</p>\n\n<p><em>Important Additional Details</em>: It is worth mentioning that currently I have all the C code that I want to run above <code>import \"C\"</code>. The reason for this is that the <code>relic_test.h</code> doesn't provide function prototypes, thus cgo does not recognize the functions through calls like <code>C.foo()</code>. Therefore, I put all the <code>test_pc.c</code> code in the following format:</p>\n\n<pre class=\"lang-golang prettyprint-override\"><code>package main\n// #include&lt;&gt;\n/*\nvoid test1(){}\nvoid test2(){}\n.\n.\nvoid testN(){}\n*/\nimport \"C\"\nfunc main(){\n  C.test1()\n  C.testN()\n}\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<p>Whenn I try running them from go, the execution gets \"stuck\" (i.e. the code is in execution but it just simply doesn't go to the next instruction) in one particular test. \nHow can I find out why the code gets stuck? How can I observe the execution flow of the program?</p>\n\n<p><strong>Thing I've Tried</strong></p>\n\n<p>Again, if I try using C directly (i.e. if I compile it with GCC and run it), the code works. Thus, GDB will also work.\nI've also tried  using <code>go tools cgo -debug-gcc</code>, but this only prints preprocessing directives. <code>go tools cgo -gccgo</code> doesn't output anything. finally, the Go debugger, Delve, is not able to debug the C calls.</p>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1501077929, "post_id": 45327792, "comment_id": 77620269, "body": "Have you even looked up the MSDN documentation for TrackPopupMenu()? That would propably have been faster than writing this SO question."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501078127, "post_id": 45327792, "comment_id": 77620420, "body": "It&#39;s a modal thingy - it has it&#39;s own message-handler internally."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8274202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1409e0b01005c3a33467c6a857023?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaster12", "link": "https://stackoverflow.com/users/8274202/codemaster12"}, "edited": false, "score": 0, "creation_date": 1501080747, "post_id": 45328546, "comment_id": 77622615, "body": "I am pretty sure I tried removing TMP_RETURNCMD and it didn&#39;t work before but now it does! Thanks!"}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": true, "score": 4, "last_activity_date": 1501076030, "creation_date": 1501076030, "answer_id": 45328546, "question_id": 45327792, "link": "https://stackoverflow.com/questions/45327792/win32-shortcut-menu-doesnt-send-messages-in-any-case/45328546#45328546", "title": "Win32 Shortcut Menu doesn&#39;t send messages in any case", "body": "<p>The <code>TPM_RETURNCMD</code> flag causes <code>TrackPopupMenu</code> to return the chosen menu item id as the functions return value instead of sending a <code>WM_COMMAND</code> message.</p>\n\n<p>Also, allocating <code>MENUINFO</code> like that is unnecessary, it is a small struct, just use the stack.</p>\n"}], "owner": {"reputation": 15, "user_id": 8274202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e1409e0b01005c3a33467c6a857023?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaster12", "link": "https://stackoverflow.com/users/8274202/codemaster12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 45328546, "answer_count": 1, "score": 0, "last_activity_date": 1501076030, "creation_date": 1501074064, "question_id": 45327792, "link": "https://stackoverflow.com/questions/45327792/win32-shortcut-menu-doesnt-send-messages-in-any-case", "title": "Win32 Shortcut Menu doesn&#39;t send messages in any case", "body": "<p>I have a <strong>shortcut menu</strong> that I display but no matter what I do with it, <strong>it doesn't send any messages.</strong> </p>\n\n<p><strong>I tried it in a high level mouse hook</strong>, <strong>tried it in WM_CONTEXTMENU</strong> window procedure message. <strong>No matter what I will do, what I return, it never sends a message.</strong></p>\n\n<p>The menu is created during application launch, destroyed when application is closing down.</p>\n\n<p>Here is the menu creation code:</p>\n\n<pre><code>DoomRatGUI_SlavesListItemMenu = CreatePopupMenu();\nDoomRatGUI_SlavesListItemMenuInfo = calloc(1, sizeof(MENUINFO));\nDoomRatGUI_SlavesListItemMenuInfo-&gt;fMask = MIM_STYLE | MIM_APPLYTOSUBMENUS;\nDoomRatGUI_SlavesListItemMenuInfo-&gt;cbSize = sizeof(MENUINFO);\nDoomRatGUI_SlavesListItemMenuInfo-&gt;dwStyle = MNS_NOCHECK | MNS_NOTIFYBYPOS;\n//DoomRatGUI_SlavesListItemMenuInfo-&gt;hbrBack = ResourcesManager_GetDarkGreyBrush();\nSetMenuInfo(DoomRatGUI_SlavesListItemMenu, DoomRatGUI_SlavesListItemMenuInfo);\nAppendMenuW(DoomRatGUI_SlavesListItemMenu, MF_STRING, 1001, L\"Actions\");\nAppendMenuW(DoomRatGUI_SlavesListItemMenu, MF_STRING, 1002, L\"Quick Info\");\nAppendMenuW(DoomRatGUI_SlavesListItemMenu, MF_STRING, 1003, L\"Quick Stop\");\nAppendMenuW(DoomRatGUI_SlavesListItemMenu, MF_STRING, 1004, L\"Quick Restart\");\n</code></pre>\n\n<p>I show the menu using the line of code:</p>\n\n<pre><code>TrackPopupMenu(DoomRatGUI_SlavesListItemMenu, TPM_LEFTALIGN | TPM_TOPALIGN | TPM_RETURNCMD | TPM_LEFTBUTTON | TPM_NOANIMATION, LOWORD(Arg_lParam), HIWORD(Arg_lParam), 0, DoomRatGUI_WindowHandle, NULL);\n</code></pre>\n\n<p>If you know a solution tell me what I have to do because I have tried everything, like... where to put that piece of code exactly, Thanks.</p>\n\n<p>PS: <strong>DoomRAT isn't anything malicious, its a tiny 2D game</strong> I am working on for learning.</p>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 1733, "user_id": 1472459, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/583f4a0d147f136a5bbc30a29c51abbc?s=128&d=identicon&r=PG", "display_name": "Ed King", "link": "https://stackoverflow.com/users/1472459/ed-king"}, "is_accepted": false, "score": 1, "last_activity_date": 1501076028, "creation_date": 1501076028, "answer_id": 45328545, "question_id": 45327728, "link": "https://stackoverflow.com/questions/45327728/test-client-code-for-full-duplex-mode/45328545#45328545", "title": "Test client code for full duplex mode", "body": "<p>Your question is incredibly vague, but I'm taking a punt and saying you're developing a TCP/IP client.</p>\n\n<p>If so, <a href=\"http://www.hw-group.com/products/hercules/index_en.html\" rel=\"nofollow noreferrer\">Hercules</a> is a brilliant tool for Windows. If you're on Linux, you can just use <code>netcat</code>.</p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501084022, "creation_date": 1501073928, "last_edit_date": 1501084022, "question_id": 45327728, "link": "https://stackoverflow.com/questions/45327728/test-client-code-for-full-duplex-mode", "title": "Test client code for full duplex mode", "body": "<p>I implemented C network client using LWIP library on a small controller board. How I can I test it is it full full duplex mode or not?</p>\n\n<p>Is there any simple test tool or some other way?</p>\n"}, {"tags": ["c", "function-pointers"], "comments": [{"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 10, "creation_date": 1501072680, "post_id": 45327198, "comment_id": 77615942, "body": "Short answer: no. Long answer, noooooo!!!"}, {"owner": {"reputation": 9541, "user_id": 384674, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4157684c31f0d2f3dd94e43eeab90d6d?s=128&d=identicon&r=PG", "display_name": "Betlista", "link": "https://stackoverflow.com/users/384674/betlista"}, "edited": false, "score": 1, "creation_date": 1501072759, "post_id": 45327198, "comment_id": 77616005, "body": "What are you going to do if user provides <code>bar</code> ? It seems lika a <a href=\"https://meta.stackexchange.com/a/66378/184024\">XY Problem</a>. Is <code>map</code> also considered as switch/case method (because in fact it is, but...)?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1501072912, "post_id": 45327198, "comment_id": 77616126, "body": "Sure there is. read the string argument representing <code>foo1</code>, or <code>foo2</code>.  Then with a series of <code>if else</code> determine which string was passed, and in that branch, call the function <code>foo1()</code>, or <code>f002()</code>, or..."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1501072963, "post_id": 45327198, "comment_id": 77616174, "body": "It will be necessary to map a string to a function pointer somehow.   There is no way in C to achieve that without writing code to do the mapping.   And it will be necessary to cope with supplied strings that don&#39;t correspond to any function - since users can&#39;t be prevented from supplying arbitrary strings."}, {"owner": {"reputation": 9541, "user_id": 384674, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4157684c31f0d2f3dd94e43eeab90d6d?s=128&d=identicon&r=PG", "display_name": "Betlista", "link": "https://stackoverflow.com/users/384674/betlista"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 2, "creation_date": 1501072966, "post_id": 45327198, "comment_id": 77616175, "body": "@ryyker but this is switch/case method in broader meaning, isn&#39;t it?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1501073095, "post_id": 45327198, "comment_id": 77616278, "body": "@Betlister - depends what you mean by &quot;broader meaning&quot;.   It is possible to do anything with a set of <code>if&#47;else</code> constructs that can be done with a <code>switch&#47;case</code>.   The reverse is not true (not all <code>if&#47;else</code> constructs can be readily mapped to a <code>switch&#47;case</code>)."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 9541, "user_id": 384674, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4157684c31f0d2f3dd94e43eeab90d6d?s=128&d=identicon&r=PG", "display_name": "Betlista", "link": "https://stackoverflow.com/users/384674/betlista"}, "edited": false, "score": 0, "creation_date": 1501073119, "post_id": 45327198, "comment_id": 77616308, "body": "@Betlista - Yes, I noticed the restrictions in the very last statement after posting the comment.  But string compares in a branch of some kind is the only way to do this in C that I am aware."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 2, "creation_date": 1501073725, "post_id": 45327198, "comment_id": 77616808, "body": "@paxdiablo Short answer: <b>yes</b>. Long answer: Whyyyyyyyyy?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1501074509, "post_id": 45327198, "comment_id": 77617386, "body": "well, compute a hash key of your function name and store pointers to your functions in an array indexed by this key, then call <code>funcarray[hash(argv[1])]();</code> and declare any invalid user input <b>undefined behavior</b> -- problem solved ;)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501080882, "post_id": 45327198, "comment_id": 77622730, "body": "@FelixPalmen or fill other entries with NULL and check before calling :)"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501112084, "post_id": 45327198, "comment_id": 77640090, "body": "never access beyond <code>argv[0]</code> with out first checking <code>argc</code> to assure the command line parameter(s) actually exist."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1501148381, "post_id": 45327198, "comment_id": 77655014, "body": "Similar question: <a href=\"https://stackoverflow.com/a/43006107/7478597\">SO: How to compare my string, which is stored in an array, to function names from a complete library in c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 14, "last_activity_date": 1501073740, "last_edit_date": 1501073740, "creation_date": 1501073006, "answer_id": 45327350, "question_id": 45327198, "link": "https://stackoverflow.com/questions/45327198/function-name-as-a-parameter-to-main-in-c/45327350#45327350", "title": "Function name as a parameter to main in C", "body": "<p>You can't do it directly, because C neither have <a href=\"https://en.wikipedia.org/wiki/Type_introspection\" rel=\"noreferrer\">introspection</a> nor <a href=\"https://en.wikipedia.org/wiki/Reflection_(computer_programming)\" rel=\"noreferrer\">reflection</a>. You have to <em>map</em> a name (a string) to a (pointer to a) function yourself.</p>\n\n<p>One not to uncommon way to create such a mapping is to have a structure with that information, and then use an array of those structure for all functions. Then you iterate over the array to find the name and its function pointer.</p>\n\n<p>Perhaps something like</p>\n\n<pre><code>struct name_function_map_struct\n{\n    char *name;             // Name of the function\n    void (*function)(void); // Pointer to the function\n};\n\n// Declare function prototypes\nvoid foo1(void);\nvoid foo2(void);\nvoid foo3(void);\n\n// Array mapping names to functions\nconst struct name_function_map_struct name_function_map[] = {\n    { \"foo1\", &amp;foo1 },\n    { \"foo2\", &amp;foo2 },\n    { \"foo3\", &amp;foo3 }\n};\n\nint main(int argc, char *argv[])\n{\n    // Some error checking\n    if (argc &lt; 2)\n    {\n        // Missing argument\n        return 1;\n    }\n\n    // Calculate the number of elements in the array\n    const size_t number_functions = sizeof name_function_map / sizeof name_function_map[0]\n\n    // Find the function pointer\n    for (size_t i = 0; i &lt; number_functions; ++i)\n    {\n        if (strcmp(argv[1], name_function_map[i].name) == 0)\n        {\n            // Found the function, call it\n            name_function_map[i].function();\n\n            // No need to search any more, unless there are duplicates?\n            break;\n        }\n    }\n}\n\n// The definitions (implementations) of the functions, as before...\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 5, "last_activity_date": 1501073670, "last_edit_date": 1501073670, "creation_date": 1501073094, "answer_id": 45327395, "question_id": 45327198, "link": "https://stackoverflow.com/questions/45327198/function-name-as-a-parameter-to-main-in-c/45327395#45327395", "title": "Function name as a parameter to main in C", "body": "<p>Yes, but you don't likely want to do this for the reason you're aiming for (i.e. avoiding a <code>switch</code> statement). <a href=\"https://stackoverflow.com/a/19716028/1022889\">From another SO answer (compile via <code>gcc -std=c99 -Wall -rdynamic ds.c -o ds -ldl</code>, assuming the filename is <code>ds.c</code>):</a> (<strong>Keep in mind that you'll need to know the function signature, ie: return type plus arguments; in advance</strong>).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dlfcn.h&gt;\n\nvoid hello ()\n{\n    printf (\"hello world\\n\");\n}\n\nint main (int argc, char **argv)\n{\n    char *buf = \"hello\";\n    void *hndl = dlopen (NULL, RTLD_LAZY);\n    if (!hndl) { fprintf(stderr, \"dlopen failed: %s\\n\", dlerror()); \n        exit (EXIT_FAILURE); };\n    void (*fptr) (void) = dlsym (hndl, buf);\n    if (fptr != NULL)\n        fptr ();\n    else\n        fprintf(stderr, \"dlsym %s failed: %s\\n\", buf, dlerror());\n    dlclose (hndl);\n}    \n</code></pre>\n\n<p>You're best off just creating a function dedicated to providing the function/string mapping. The example I've provided is just for proof that something like what you've asked for can be done. <strong>Just because you can, doesn't mean you should.</strong></p>\n\n<h1>Modified Example</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dlfcn.h&gt;\n\nvoid foo1(void);\nvoid foo2(void);\nvoid foo3(void);\n\nint main (int argc, char **argv)\n{\n\n    /* dlopen() self. */\n    void *hndl = dlopen (NULL, RTLD_LAZY);\n    if (!hndl) { fprintf(stderr, \"dlopen failed: %s\\n\", dlerror()); \n        exit (EXIT_FAILURE); };\n\n    /* Attempt to find symbols and call them. */\n    for (int i = 0; i &lt; argc; i++) {\n        void (*fptr) (void) = dlsym(hndl, argv[i]);\n        if (fptr != NULL)\n            fptr();\n        else\n            fprintf(stderr, \"dlsym %s failed: %s\\n\", argv[i], dlerror());\n    }\n\n    /* Cleanup. */\n    dlclose (hndl);\n\n    return 0;\n}\n\nvoid foo1()\n{\n    printf(\"hello world\\n\");\n}\n\nvoid foo2()\n{\n    printf(\"Mello world\\n\");\n}\n\nvoid foo3()\n{\n    printf(\"Jello world\\n\");\n}\n</code></pre>\n\n<h1>Sample Run</h1>\n\n<pre><code>./ds foo1 foo2 foo3 foo1\ndlsym ./ds failed: ./ds: undefined symbol: ./ds\nhello world\nMello world\nJello world\nhello world\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 2, "last_activity_date": 1501079210, "last_edit_date": 1501079210, "creation_date": 1501073466, "answer_id": 45327536, "question_id": 45327198, "link": "https://stackoverflow.com/questions/45327198/function-name-as-a-parameter-to-main-in-c/45327536#45327536", "title": "Function name as a parameter to main in C", "body": "<p>C doesn't work like that. It (normally) compiles to machine code and unless it incorporates debug information the executable doesn't retain the identifiers (function names, variable names and type names) present in the source file.</p>\n\n<p>Even if that debug information is there, there is no standard way of accessing that information during execution.</p>\n\n<p>Your only option is something like:</p>\n\n<pre><code>if(strcmp(func_user,\"foo1)==0){\n    foo1();\n}else if (strcmp(func_user,\"foo2)==0){\n    foo2();\n}/* and so on... */\n</code></pre>\n\n<p>[or of course arrays and/or data structures that amounts to this...]</p>\n\n<p>Assuming a traditional compile and link process, where you call <code>foo1()</code> what will go into the object code is instructions that effectively say \"call foo1\". So far so good. But when the linker comes along it will turn \"call foo1\" into a jump (typically assembler <code>jmp</code>) to an address that the linker has determined is the entry point of <code>foo1()</code> and (unless you include debug symbols as mentioned) all reference to the identifier <code>foo1</code> will be removed. Execution doesn't need to know what you called the function it only needs to know the address of its entry point and that is all that (normally) appears in the executable.</p>\n\n<p>Footnote: Before anyone mentions it C99 does define a symbol <code>__func__</code> that is the same as the function being compiled. In <code>main()</code> it will be <code>main</code>that can be used to emit meaningful error messages but can't be used in any way to call that function or somehow register it to some look-up table.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 8363624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebe2e71e511257ea80a7cc2f1f581b3?s=128&d=identicon&r=PG&f=1", "display_name": "Yet Another John Smith", "link": "https://stackoverflow.com/users/8363624/yet-another-john-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1501133990, "last_edit_date": 1501133990, "creation_date": 1501075192, "answer_id": 45328242, "question_id": 45327198, "link": "https://stackoverflow.com/questions/45327198/function-name-as-a-parameter-to-main-in-c/45328242#45328242", "title": "Function name as a parameter to main in C", "body": "<p>In addition to @<code>Some programmer dude</code> answer:</p>\n\n<p>Instead of writing function's name twice you can use preprocessor (<a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.0/cpp/Stringification.html\" rel=\"nofollow noreferrer\">stringify</a>):</p>\n\n<pre><code>#define FUNC_MAP_ENTRY(name) { #name, &amp;name}\n\nconst struct name_function_map_struct name_function_map[] = {\n    FUNC_MAP_ENTRY(foo1),\n    FUNC_MAP_ENTRY(foo2),\n    FUNC_MAP_ENTRY(foo3)\n};\n</code></pre>\n\n\n\n<p><hr/>\nBy the way, <strike>if you use C++ or you have some dynamic array in pure C (it's not hard to <a href=\"https://stackoverflow.com/questions/3536153/c-dynamically-growing-array\">implement</a>) you could make dynamic table</strike> this is working example how to implement dynamic function table:</p>\n\n<pre><code>// MIT license\n// Copyright 2017 \"Yet Another John Smith\"\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and\n// associated documentation files (the \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all copies or substantial\n// portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT\n// LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO\n// EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR\n// THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\n// ================================\n//   Dynamic function names table\n// ================================\n\nstruct FuncNamesTableEntry\n{\n    const char* name;\n    // You could make it more flexibile (could store any function type)\n    // say use (void*), but user have to cast it by hand then\n    void(*func_ptr)(void);\n};\n\nstruct FuncNamesTable\n{\n    struct FuncNamesTableEntry* entries;\n    size_t size;\n    size_t capacity;\n};\n\n\nvoid func_table_init(struct FuncNamesTable * tbl)\n{\n    tbl-&gt;entries = NULL;\n    tbl-&gt;size = 0;\n    tbl-&gt;capacity = 0;\n}\n\n\n#define eprintf(fmt, ...) fprintf(stderr, fmt, ##__VA_ARGS__)\n\n\nvoid func_table_add_entry(\n    struct FuncNamesTable * tbl,\n    struct FuncNamesTableEntry entry)\n{\n    if (tbl-&gt;size &gt;= tbl-&gt;capacity) {\n        struct FuncNamesTableEntry* new_mem;\n        size_t new_capacity = tbl-&gt;capacity * 1.5 + 1;\n\n        new_mem = realloc(tbl-&gt;entries, new_capacity * sizeof(struct FuncNamesTableEntry));\n        if (new_mem == NULL) {\n            printf(\"%s\\n\", \"Not enough memory\");\n            exit(1);\n        }\n\n        tbl-&gt;entries = new_mem;\n        tbl-&gt;capacity = new_capacity;\n    }\n\n    tbl-&gt;entries[tbl-&gt;size] = entry;\n    tbl-&gt;size += 1;\n}\n\n\nstruct FuncNamesTable _the_func_table;\n// I need this hack to make ADD macro\nstruct FuncNamesTableEntry _insterting_entry;\n\n#define FUNC_TABLE_INIT() func_table_init(&amp;_the_func_table);\n//#define FUNC_TABLE_ENTRY(f_name) struct FuncNamesTableEntry{#f_name, &amp;f_name}\n#define FUNC_TABLE_ADD_ENTRY(f_name) do{                        \\\n    _insterting_entry.name = #f_name;                           \\\n    _insterting_entry.func_ptr = &amp;f_name;                       \\\n    func_table_add_entry(&amp;_the_func_table, _insterting_entry);  \\\n}while(0);\n\n#define FUNC_TABLE_ITERATE(_i)                                     \\\n    for (struct FuncNamesTableEntry* _i = _the_func_table.entries; \\\n         _i - _the_func_table.entries &lt; _the_func_table.size;      \\\n         ++_i)\n\n\nvoid foo1(void){}\nvoid foo2(void){}\nvoid foo3(void){}\nvoid foo4(void){}\nvoid foo5(void){}\nvoid foo6(void){}\n\nint main(int argc, char const *argv[])\n{\n    FUNC_TABLE_INIT();\n\n    FUNC_TABLE_ADD_ENTRY(foo1);\n    FUNC_TABLE_ADD_ENTRY(foo2);\n    FUNC_TABLE_ADD_ENTRY(foo3);\n    FUNC_TABLE_ADD_ENTRY(foo4);\n\n    if (1) {\n        FUNC_TABLE_ADD_ENTRY(foo5);\n    }\n    else {\n        FUNC_TABLE_ADD_ENTRY(foo6);\n    }\n\n    FUNC_TABLE_ITERATE(i)\n    {\n        printf(\"Name: '%s'; pointer: %p\\n\", i-&gt;name, i-&gt;func_ptr);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2479, "user_id": 1269997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dE3UU.jpg?s=128&g=1", "display_name": "sanchop22", "link": "https://stackoverflow.com/users/1269997/sanchop22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 790, "favorite_count": 2, "answer_count": 4, "score": 6, "last_activity_date": 1501133990, "creation_date": 1501072571, "question_id": 45327198, "link": "https://stackoverflow.com/questions/45327198/function-name-as-a-parameter-to-main-in-c", "title": "Function name as a parameter to main in C", "body": "<p>I have a main function as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[])\n{\n    int i, sum = 0;\n    char *func_user = argv[1];\n\n    // execute func_user function\n\n    return 0;\n}\n\nvoid foo1(void)\n{\n    printf(\"I'm foo1.\");\n}\n\nvoid foo2(void)\n{\n    printf(\"I'm foo2.\");\n}\n\nvoid foo3(void)\n{\n    printf(\"I'm foo3.\");\n}\n</code></pre>\n\n<p>I want user to give his function name as an argument to main and I want my program to execute this given function. Is there any way to do this (something like using reflection) without using switch/case like methods?</p>\n"}, {"tags": ["python", "c", "amazon-web-services", "deployment", "aws-lambda"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4038636"}, "edited": false, "score": 1, "creation_date": 1501072961, "post_id": 45327122, "comment_id": 77616172, "body": "Hi tnx, I know that. Problem is that the libraries I want to include have to be installed with conda. I have tried to copy folders of libs from anaconda2/pkgs folder and include them in the zip file but I get: &quot;Unable to import module &#39;lambda_function&#39;: No module named pkg_resources&quot;"}], "tags": [], "owner": {"reputation": 22640, "user_id": 1476885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/evXY6.jpg?s=128&g=1", "display_name": "Zanon", "link": "https://stackoverflow.com/users/1476885/zanon"}, "is_accepted": false, "score": 1, "last_activity_date": 1501072392, "creation_date": 1501072392, "answer_id": 45327122, "question_id": 45326500, "link": "https://stackoverflow.com/questions/45326500/deployment-package-for-aws-lambda-with-c-files/45327122#45327122", "title": "Deployment package for AWS Lambda with C files", "body": "<p>You need to compile it using an EC2 machine with an Amazon Linux image. Compile and include the result in the zip file that you will upload to AWS Lambda.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4038636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "closed_date": 1501089176, "answer_count": 1, "score": 1, "last_activity_date": 1501146358, "creation_date": 1501070753, "last_edit_date": 1501146358, "question_id": 45326500, "link": "https://stackoverflow.com/questions/45326500/deployment-package-for-aws-lambda-with-c-files", "closed_reason": "Not suitable for this site", "title": "Deployment package for AWS Lambda with C files", "body": "<p>I need some libraries in python that uses C files in AWS Lambda. For example I want to use <a href=\"https://github.com/andrix/python-snappy\" rel=\"nofollow noreferrer\">python-snappy</a> library. How can I compile it to be able to use it with Lambda?</p>\n\n<p>EDIT: it seems like Amazon EMR didn't like to install libraries with pip but when I tried to install them on my laptop that runs Linux I was able to install them without problem. Used virtualenv to set up everything and included files from site-packages into my lambda project and it is working now.</p>\n"}, {"tags": ["c", "pthreads"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1501069165, "post_id": 45325786, "comment_id": 77613317, "body": "You&#39;re probably looking for <a href=\"https://linux.die.net/man/3/pthread_cond_wait\" rel=\"nofollow noreferrer\"><code>pthread_cond_wait()</code></a>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1501069169, "post_id": 45325786, "comment_id": 77613319, "body": "Which OS please?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501069202, "post_id": 45325786, "comment_id": 77613344, "body": "@alk the question mentions <i>pthreads</i> ..."}, {"owner": {"reputation": 1970, "user_id": 5646176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lmKVM.jpg?s=128&g=1", "display_name": "RonTLV", "link": "https://stackoverflow.com/users/5646176/rontlv"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501069233, "post_id": 45325786, "comment_id": 77613373, "body": "@alk android jni c"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501069252, "post_id": 45325786, "comment_id": 77613391, "body": "@FelixPalmen: There is a POSIX thread port to windows."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501069329, "post_id": 45325786, "comment_id": 77613446, "body": "@alk sure, but I think it&#39;s straight forward to suggest the POSIX threads method of waiting for a condition when the question asks about <i>pthreads</i> ;) (and we can probably exclude win32 anyways)"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501069331, "post_id": 45325786, "comment_id": 77613450, "body": "It seems you are using &quot;signal &quot; in a somewhat ambiguous manner, right?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501069374, "post_id": 45325786, "comment_id": 77613487, "body": "@FelixPalmen: Well, the title does not mention &quot;condition&quot; but &quot;signal&quot; ..."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 1, "creation_date": 1501069377, "post_id": 45325786, "comment_id": 77613488, "body": "@RonTLV, do you mean <i>signal</i> as in <code>SIGINT</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501069447, "post_id": 45325786, "comment_id": 77613537, "body": "@alk which is an abstract &quot;signal to continue&quot;, as <a href=\"https://linux.die.net/man/3/pthread_cond_signal\" rel=\"nofollow noreferrer\"><code>pthread_cond_signal()</code></a> would issue. I think this is quite obvious from the context of the question."}, {"owner": {"reputation": 1970, "user_id": 5646176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lmKVM.jpg?s=128&g=1", "display_name": "RonTLV", "link": "https://stackoverflow.com/users/5646176/rontlv"}, "edited": false, "score": 0, "creation_date": 1501069614, "post_id": 45325786, "comment_id": 77613668, "body": "What I need is the exact behavior of waitForSingleObject( Event ) / m_event.pulseEvent(), or Java wait / notify, or Java count down latch."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501070375, "post_id": 45325786, "comment_id": 77614211, "body": "@RonTLV that could be a problem in general, since those synchro mechanisms have &#39;issues&#39;, and replicating those issues will be difficult:)  I would use a semaphore, but maybe that&#39;s just me.."}, {"owner": {"reputation": 3193, "user_id": 6608866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a0bd6f09706e701866702448c5924?s=128&d=identicon&r=PG&f=1", "display_name": "PaulR", "link": "https://stackoverflow.com/users/6608866/paulr"}, "edited": false, "score": 3, "creation_date": 1501070740, "post_id": 45325786, "comment_id": 77614471, "body": "See this answer: <a href=\"https://stackoverflow.com/a/33116597/6608866\">stackoverflow.com/a/33116597/6608866</a>"}], "owner": {"reputation": 1970, "user_id": 5646176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lmKVM.jpg?s=128&g=1", "display_name": "RonTLV", "link": "https://stackoverflow.com/users/5646176/rontlv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 628, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501068951, "creation_date": 1501068951, "question_id": 45325786, "link": "https://stackoverflow.com/questions/45325786/in-pthread-how-to-make-a-thread-wait-for-a-signal", "title": "In pthread, how to make a thread wait for a signal", "body": "<p>My objective is to create a thread that is reusable and not one that terminates when reaching the end of the thread function.</p>\n\n<p>This is a pseudo code of what I'm trying to achieve with pthreads:</p>\n\n<pre><code>bool doRun = true;\n\nvoid thread_func( void* p ) {\n    while( doRun ) {\n        waitForSignal() // just like waitForSingleObject\n        // run thread\n    }\n}\n</code></pre>\n\n<p>I used the win32 function <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx\" rel=\"nofollow noreferrer\">waitForSingleObject</a> together with an Event in the past quite a lot and I have no idea how to implement that kind of behavior with pthreads.</p>\n\n<p>Your help is appreciated</p>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 721, "user_id": 481537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e33c31ff36ebef4f4517017ee4515199?s=128&d=identicon&r=PG", "display_name": "Alex Garcia", "link": "https://stackoverflow.com/users/481537/alex-garcia"}, "edited": false, "score": 0, "creation_date": 1501068084, "post_id": 45325410, "comment_id": 77612475, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12824703/array-format-for-define-c-preprocessor\">Array format for #define (C preprocessor)</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1501072470, "post_id": 45325410, "comment_id": 77615767, "body": "Why do you try to obfuscate your code? There is no need for the macro; if you need a custom type name, use a <code>typedef</code> (but as you hav to know how to initialise, this also is not very useful). Don&#39;t get too fancy with macros."}, {"owner": {"reputation": 2928, "user_id": 1093607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8b42640843657fdbedab849601c83d07?s=128&d=identicon&r=PG", "display_name": "Vit Bernatik", "link": "https://stackoverflow.com/users/1093607/vit-bernatik"}, "edited": false, "score": 0, "creation_date": 1501141697, "post_id": 45325410, "comment_id": 77650250, "body": "it is not part of question. But it is test code, which test one function with many parameters, and I give expected system state as array initializer. Basically it is 4 lines of code <code>ret = tested_funct(PARA,PARB,...); if(ret!=0) return PAR_X | ret; ret = chkModuleState({EXP_STATE}) return PAR_Y | ret;</code> And this repeats 50 times... So I use macro for that. Calling macro repeatedly looks like a table and it is very nice to read what states are tested. True debugging is little obscured..."}], "answers": [{"comments": [{"owner": {"reputation": 2928, "user_id": 1093607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8b42640843657fdbedab849601c83d07?s=128&d=identicon&r=PG", "display_name": "Vit Bernatik", "link": "https://stackoverflow.com/users/1093607/vit-bernatik"}, "edited": false, "score": 0, "creation_date": 1501069712, "post_id": 45325507, "comment_id": 77613749, "body": "Sorry I modified questions. I did not mention originally that initializer is only part of my macro arguments. I have more arguments so your answer is not valid after my modification... IT seems it is working when modified slightly: <code>#define INIT_ARR2(VAR_NAME,...) int VAR_NAME[] = {__VA_ARGS__}</code>. Thx for effort I up you, but I like mine solution better as it keeps at least parenthesis over initialize."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 2928, "user_id": 1093607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8b42640843657fdbedab849601c83d07?s=128&d=identicon&r=PG", "display_name": "Vit Bernatik", "link": "https://stackoverflow.com/users/1093607/vit-bernatik"}, "edited": false, "score": 2, "creation_date": 1501070275, "post_id": 45325507, "comment_id": 77614141, "body": "Whatever suits your needs better :)"}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 6, "last_activity_date": 1501070320, "last_edit_date": 1501070320, "creation_date": 1501068129, "answer_id": 45325507, "question_id": 45325410, "link": "https://stackoverflow.com/questions/45325410/c-preprocessor-init-array/45325507#45325507", "title": "C preprocessor init array", "body": "<p>You can use variable number of arguments with the macro as - </p>\n\n<pre><code>#define INIT_ARR(VAR_NAME, ...) int VAR_NAME[] = {__VA_ARGS__}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "edited": false, "score": 0, "creation_date": 1501070009, "post_id": 45325934, "comment_id": 77613962, "body": "Good, but this is not a hack, just a normal behaviour of C Preprocessor. :)"}, {"owner": {"reputation": 2928, "user_id": 1093607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8b42640843657fdbedab849601c83d07?s=128&d=identicon&r=PG", "display_name": "Vit Bernatik", "link": "https://stackoverflow.com/users/1093607/vit-bernatik"}, "reply_to_user": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "edited": false, "score": 1, "creation_date": 1501072702, "post_id": 45325934, "comment_id": 77615961, "body": "yes. To me calling of <code>myArgs</code> macro seems not so obvious. In first step it will be just set to <code>myArgs (1,2,3,4)</code> which will be executed and turn into <code>1,2,3,4</code>. Luckily the space between <code>myArgs</code> and <code>(1,2,3,4)</code> is not a problem. And luckily it is interpreted correctly recursively... But glad you say it is &quot;not a hack&quot;. I will use your comment when my boss will ask me what is that ;)"}], "tags": [], "owner": {"reputation": 2928, "user_id": 1093607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8b42640843657fdbedab849601c83d07?s=128&d=identicon&r=PG", "display_name": "Vit Bernatik", "link": "https://stackoverflow.com/users/1093607/vit-bernatik"}, "is_accepted": true, "score": 7, "last_activity_date": 1501069328, "creation_date": 1501069328, "answer_id": 45325934, "question_id": 45325410, "link": "https://stackoverflow.com/questions/45325410/c-preprocessor-init-array/45325934#45325934", "title": "C preprocessor init array", "body": "<p>I think I cracked it:</p>\n\n<pre><code>#define myArgs(...) __VA_ARGS__\n#define INIT_ARR(VAR_NAME,ARR_DATA) int VAR_NAME[] = {myArgs ARR_DATA}\nINIT_ARR(myArr,(1,2,3,4));\n</code></pre>\n\n<p>will be interpreted correctly as:</p>\n\n<pre><code>int myArr[] = {1,2,3,4};\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/34182426/1093607\">annoying_squid's answer</a> helped me to figure it out...</p>\n"}], "owner": {"reputation": 2928, "user_id": 1093607, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8b42640843657fdbedab849601c83d07?s=128&d=identicon&r=PG", "display_name": "Vit Bernatik", "link": "https://stackoverflow.com/users/1093607/vit-bernatik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2493, "favorite_count": 0, "accepted_answer_id": 45325934, "answer_count": 2, "score": 3, "last_activity_date": 1501070320, "creation_date": 1501067899, "last_edit_date": 1501069843, "question_id": 45325410, "link": "https://stackoverflow.com/questions/45325410/c-preprocessor-init-array", "title": "C preprocessor init array", "body": "<p>I'm writing a complex macro and I need to pass also array initializer. Basically I have trouble to do:</p>\n\n<pre><code>#define INIT_ARR(VAR_NAME,ARR_DATA) int VAR_NAME[] = ARR_DATA\n</code></pre>\n\n<p>then I would call it </p>\n\n<pre><code>INIT_ARR(myNm,{1,2,3});\n</code></pre>\n\n<p>but preprocessors interprets any commas (also the one inside curly braces) as new macro parameter so it gives me error:</p>\n\n<pre><code>error:  #55-D: too many arguments in invocation of macro \"INIT_ARR\" \n</code></pre>\n\n<p>preprocessor does not ignore () so I can do:</p>\n\n<pre><code>#define INIT_ARR(VAR_NAME,ARR_DATA) int VAR_NAME[] = {ARR_DATA}\nINIT_ARR(myNm,(1,2,3));\n</code></pre>\n\n<p>but then it is interpreted as </p>\n\n<pre><code>int myNm[] = {(1,2,3)};\n</code></pre>\n\n<p>which is not correct for C. </p>\n\n<p>Is there a way how to do it?? For example remove braces from parameter?</p>\n"}, {"tags": ["c", "function", "pointers", "malloc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 9, "creation_date": 1501067893, "post_id": 45325368, "comment_id": 77612337, "body": "Yes it is. What makes you think it isn&#39;t? It doesn&#39;t return the &quot;address of the pointer variable&quot; but the &quot;<i>value</i> of the pointer variable&quot; (which, of course, is an address)."}, {"owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "edited": false, "score": 0, "creation_date": 1501068930, "post_id": 45325368, "comment_id": 77613133, "body": "@FelixPalmen print the address of pointer same inside func() and main() function.See <a href=\"http://ide.geeksforgeeks.org/sULNzy\" rel=\"nofollow noreferrer\">ide.geeksforgeeks.org/sULNzy</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501069023, "post_id": 45325368, "comment_id": 77613207, "body": "what you print there is not the <b>address of the pointer</b> but the <b>value of the pointer</b>. The <b>address of the pointer</b> would be <code>&amp;p</code> in <code>func</code> resp. <code>&amp;ptr</code> in <code>main</code>. Of course, the <b>value</b> of a pointer <b>is an address</b> (but the address of the object the pointer points to)."}], "answers": [{"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 4, "creation_date": 1501068118, "post_id": 45325449, "comment_id": 77612504, "body": "To re-iterate, the OP is returning the <b>value</b> of a pointer, not the <b>address of</b> a local variable."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1501068284, "post_id": 45325449, "comment_id": 77612622, "body": "In interests of completeness, may wish to mention that - in the OP&#39;s example - <code>main()</code> (or some other function called after the <code>printf()</code> statement) would need to call <code>free(ptr)</code>.  If the malloced memory is released within <code>func()</code>, accessing <code>*ptr</code> in <code>main()</code> will have undefined behaviour."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 9, "last_activity_date": 1501068567, "last_edit_date": 1501068567, "creation_date": 1501067978, "answer_id": 45325449, "question_id": 45325368, "link": "https://stackoverflow.com/questions/45325368/returning-an-address-of-a-local-pointer-variable-to-main-function/45325449#45325449", "title": "Returning an address of a local pointer variable to main() function", "body": "<p>No, you do <em>not</em> return a pointer to (address of) a local variable. That would be doing something like</p>\n\n<pre><code>int i = 10;\nreturn &amp;i;\n</code></pre>\n\n<p>Instead you return a pointer to an object allocated on the heap.</p>\n\n<p>You do have a memory leak though, since you don't <code>free</code> the memory anywhere. Calling <code>free</code> should be done by the code <em>calling</em> your function (unless it in turn return the pointer <em>value</em>, where the responsibility continues upt he call-chain).</p>\n"}, {"tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 1, "last_activity_date": 1501068806, "last_edit_date": 1501068806, "creation_date": 1501068481, "answer_id": 45325627, "question_id": 45325368, "link": "https://stackoverflow.com/questions/45325368/returning-an-address-of-a-local-pointer-variable-to-main-function/45325627#45325627", "title": "Returning an address of a local pointer variable to main() function", "body": "<p>This is perfectly valid.</p>\n\n<p>What is not guaranteed is what will happen to the variables on the stack frame once a function returns and the stack frame shrinks.</p>\n\n<p>What you are returning is an address to some <code>malloc</code>ed memory and <em>not</em> the address of a local variable (allocated on the stack). This is very similar to how <code>strdup()</code> works. Here's an implementation of <code>strdup()</code> taken from <a href=\"https://opensource.apple.com/source/Libc/Libc-186/string.subproj/strdup.c\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>char *\nstrdup(str)\n    const char *str;\n{\n    size_t len;\n    char *copy;\n\n    len = strlen(str) + 1;\n    if (!(copy = malloc((u_int)len)))\n        return (NULL);\n    bcopy(str, copy, len);\n    return (copy);\n}\n</code></pre>\n\n<p>One obvious downside of this (as mentioned by \"Some programmer dude\") is that the responsibility of <code>free</code>ing is passed on to the caller.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1501080699, "post_id": 45325975, "comment_id": 77622576, "body": "&quot;<i>The allocation is done via de-referencing a pointer variable of type int.</i>&quot; no, <code>sizeof</code> just operates on the <i>type</i> of the expression. No dereferencing happens here."}], "tags": [], "owner": {"reputation": 158, "user_id": 5668661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba225f0f15b696c13a25c3d86b42c3b8?s=128&d=identicon&r=PG&f=1", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/5668661/helloworld"}, "is_accepted": false, "score": 1, "last_activity_date": 1501069418, "creation_date": 1501069418, "answer_id": 45325975, "question_id": 45325368, "link": "https://stackoverflow.com/questions/45325368/returning-an-address-of-a-local-pointer-variable-to-main-function/45325975#45325975", "title": "Returning an address of a local pointer variable to main() function", "body": "<p>This is a valid and correct code, although bit confusing.</p>\n\n<p>The func is allocating memory of size int. The allocation is done via de-referencing a pointer variable of type int.</p>\n\n<p>Alter allocation the integer value of 10 is set in the memory. 10 should be set as integer (can be compiler dependent). But definitely will not be of greater than the size of integer so should be safe operation.</p>\n\n<p>After that the pointer value is returned by the function.</p>\n\n<p>In main() the returned pointer is set to another integer pointer. This points to the original memory allocated by malloc().</p>\n\n<p>After that the de-referenced integer pointer is printed in the printf() statement. This will print the value of 10.</p>\n\n<p>What is missing is the free() call, which is not the good behaviour in here.</p>\n\n<p>This can be a good academic exercise for kids.</p>\n"}, {"tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 3, "last_activity_date": 1501095882, "last_edit_date": 1501095882, "creation_date": 1501070088, "answer_id": 45326228, "question_id": 45325368, "link": "https://stackoverflow.com/questions/45325368/returning-an-address-of-a-local-pointer-variable-to-main-function/45326228#45326228", "title": "Returning an address of a local pointer variable to main() function", "body": "<p>Inside <code>func()</code>, <code>p</code> is a pointer to memory allocated by <code>malloc()</code> (or to potentially allocated memory, since <code>malloc()</code> can fail, returning a null pointer; this should be checked for). If successful, this memory allocation will persist until it is explicitly <code>free</code>d.</p>\n\n<p>The value of <code>p</code> is returned to the calling function, <code>main()</code> in this case. <code>p</code> is either a pointer to a successful allocation, or is a null pointer, and the returned value (which is temporary, and not an lvalue) is then assigned to <code>ptr</code>. So, the allocated storage can be accessed through <code>ptr</code>, which is a <em>copy</em> of the value held by <code>p</code> before <code>func()</code> returned, though the lifetime of <code>p</code> itself has ended now that <code>func()</code> has returned.</p>\n\n<p>Of course <code>ptr</code> should be <code>free</code>d when it is no longer needed to avoid memory leaks. And, there is potential undefined behavior here if <code>malloc()</code> fails, since then <code>ptr</code> is a null pointer.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1907, "favorite_count": 2, "accepted_answer_id": 45326228, "answer_count": 4, "score": 2, "last_activity_date": 1501222886, "creation_date": 1501067795, "last_edit_date": 1501222886, "question_id": 45325368, "link": "https://stackoverflow.com/questions/45325368/returning-an-address-of-a-local-pointer-variable-to-main-function", "title": "Returning an address of a local pointer variable to main() function", "body": "<p>In the following example, function <code>func()</code> returning an <strong>address of a local pointer variable</strong> to <code>main()</code> function. It's working fine in GCC. </p>\n\n<p>So, <strong>Is it well-defined behaviour?</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint *func(void);\n\nint *func(void)\n{\n   int *p;\n   p = malloc(sizeof *p);\n   *p = 10;\n   return p;\n}\n\nint main() \n{\n    int *ptr = func();\n    printf(\"%d\\n\",*ptr);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1501069678, "post_id": 45325346, "comment_id": 77613723, "body": "See also: <a href=\"https://stackoverflow.com/q/24610737/253056\">why sizeof(short + short) has different size than sizeof(short)?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 2, "last_activity_date": 1501069190, "creation_date": 1501069190, "answer_id": 45325881, "question_id": 45325346, "link": "https://stackoverflow.com/questions/45325346/why-is-sizeof-returning-4-bytes-rather-than-2-bytes-of-short-int/45325881#45325881", "title": "why is sizeof() returning 4 bytes rather than 2 bytes of short int?", "body": "<p>The statement</p>\n\n<pre><code>sizeof(c = a+b);\n</code></pre>\n\n<p>doesn't measure the size of variable <code>c</code> but the size of the value computed from expression <code>c = a+b</code>. It is the value of <code>a+b</code> that is assigned to <code>c</code> but it is also the value of the entire expression.</p>\n\n<p>The integral values whose storage type is smaller than <code>int</code> that appear in an arithmetic expression are promoted to <code>int</code> (or <code>unsigned int</code>) for the computation. The storage type of the result of the arithmetic expression is <code>int</code>. This is not affected that the fact that you store it in a <code>short int</code> variable. Hence the value returned by <code>sizeof()</code>.</p>\n\n<p>The same for <code>sizeof(c*d)</code>.</p>\n"}], "owner": {"reputation": 147, "user_id": 7669940, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b74479c2e2b6dec43eb8433b42f105b?s=128&d=identicon&r=PG&f=1", "display_name": "Jaivvignesh", "link": "https://stackoverflow.com/users/7669940/jaivvignesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "closed_date": 1501069477, "answer_count": 1, "score": -1, "last_activity_date": 1501075463, "creation_date": 1501067743, "last_edit_date": 1501075463, "question_id": 45325346, "link": "https://stackoverflow.com/questions/45325346/why-is-sizeof-returning-4-bytes-rather-than-2-bytes-of-short-int", "closed_reason": "Duplicate", "title": "why is sizeof() returning 4 bytes rather than 2 bytes of short int?", "body": "<p>To print the size of the variables using sizeof()</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n    int a = 10,b = 20; \n    short int c;\n    short int d = sizeof(c = a+b);\n    int e = sizeof(c*d); //e holds the value of 4 rather than 2\n    double f = sizeof(e*f);\n    printf(\"d:%d\\ne:%d\\nf:%lf\\n\",d,e,f);\n}\n</code></pre>\n\n<p>Why is sizeof() returning the size of int rather than short int which is meant to be 2 bytes?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501067825, "post_id": 45325320, "comment_id": 77612277, "body": "I afraid no-one will be able to help you. You need to figure it out yourself"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501070688, "post_id": 45325320, "comment_id": 77614440, "body": "Umm.. &#39;O_NONBLOCK&#39;.."}, {"owner": {"reputation": 11, "user_id": 8369400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aebe756095629d33cdaf64ceaa1cea8?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Ravindra", "link": "https://stackoverflow.com/users/8369400/nishant-ravindra"}, "edited": false, "score": 0, "creation_date": 1501072534, "post_id": 45325320, "comment_id": 77615811, "body": "Yea figured that out after I had posted the question.Thanks a lot!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501095117, "post_id": 45325320, "comment_id": 77632397, "body": "Hmm, 1) code has trouble yet does not check the result of various functions. <code>fseek(), fread(), tcgetattr()</code>, and at least 4 others, etc.  Seems like that would be the first step and more efficient that posting on SO.  2) Try opening the file in binary more.  <code>fopen(&quot;compass_script(1).4th&quot;,&quot;rb&quot;)</code>"}, {"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1501148057, "post_id": 45325320, "comment_id": 77654742, "body": "<a href=\"http://man7.org/linux/man-pages/man2/write.2.html#RETURN_VALUE\" rel=\"nofollow noreferrer\">Read the docs!</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23612, "user_id": 147407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/65f858d8a973f4ee8d97517a21a17e7d?s=128&d=identicon&r=PG", "display_name": "Andrejs Cainikovs", "link": "https://stackoverflow.com/users/147407/andrejs-cainikovs"}, "edited": false, "score": 0, "creation_date": 1501148183, "post_id": 45346313, "comment_id": 77654840, "body": "Was about to post that code snippet by myself. Good answer. +1."}, {"owner": {"reputation": 11, "user_id": 8369400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aebe756095629d33cdaf64ceaa1cea8?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Ravindra", "link": "https://stackoverflow.com/users/8369400/nishant-ravindra"}, "edited": false, "score": 0, "creation_date": 1501157400, "post_id": 45346313, "comment_id": 77661624, "body": "Yes, that was very helpful."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 1, "last_activity_date": 1501147625, "last_edit_date": 1501147625, "creation_date": 1501146815, "answer_id": 45346313, "question_id": 45325320, "link": "https://stackoverflow.com/questions/45325320/unable-to-write-the-complete-script-onto-a-device-on-the-serial-port/45346313#45346313", "title": "Unable to write the complete script onto a device on the serial port", "body": "<p>Well, that's the specification.  When you write to a file, your process normally is blocked until the whole data is written.  And this means your process will run again only when all the data has been written to the disk buffers.  This is not true for devices, as the device driver is the responsible of determining how much data is to be written in one pass.  This means that, depending on the device driver, you'll get all data driven, only part of it, or even none at all.  That simply depends on the device, and how the driver implements its control.</p>\n\n<p>On the floor, device drivers normally have a limited amount of memory to fill buffers and are capable of a limited amount of data to be accepted.  There are two policies here, the driver can block the process until more buffer space is available to process it, or it can return with a partial write only.</p>\n\n<p>It's your program resposibility to accept a partial read and continue writing the rest of the buffer, or to pass back the problem to the client module and return only a partial write again.  This approach is the most flexible one, and is the one implemented everywhere.  Now you have a reason for your partial write, but the ball is on your roof, you have to decide what to do next.</p>\n\n<p>Also, be careful, as you use <code>long</code> for the <code>ftell()</code> function call return value and <code>int</code> for the <code>fwrite()</code> function call... Although your amount of data is not huge and it's not probable that this values cannot be converted to <code>long</code> and <code>int</code> respectively, the return type of both calls is <code>size_t</code> and <code>ssize_t</code> resp. (like the <code>speed_t</code> type you use for the baudrate values)  <code>long</code> can be 32bit and <code>size_t</code> a 64bit type.</p>\n\n<p>The best thing you can do is to ensure the whole buffer is written by some code snippet like the next one:</p>\n\n<pre><code>char *p = buffer;\nwhile (numbytes &gt; 0) {\n    ssize_t n = write(fd, p, numbytes);\n    if (n &lt; 0) {\n        perror(\"write\");\n        /* driver signals some error */\n        return 1;\n    }\n    /* writing 0 bytes is weird, but possible, consider putting\n     * some code here to cope for that possibility. */\n    /* n &gt;= 0 */\n    /* update pointer and numbytes */\n    p += n;\n    numbytes -= n;\n}\n/* if we get here, we have written all numbytes */\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8369400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aebe756095629d33cdaf64ceaa1cea8?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Ravindra", "link": "https://stackoverflow.com/users/8369400/nishant-ravindra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501147625, "creation_date": 1501067661, "last_edit_date": 1501147217, "question_id": 45325320, "link": "https://stackoverflow.com/questions/45325320/unable-to-write-the-complete-script-onto-a-device-on-the-serial-port", "title": "Unable to write the complete script onto a device on the serial port", "body": "<p>The script file has over 6000 bytes which is copied into a buffer.The contents of the buffer are then written to the device connected to the serial port.However the write function only returns 4608 bytes whereas the buffer contains 6117 bytes.I'm unable to understand why this happens.</p>\n\n<pre><code>{   \n    FILE *ptr;\n\n    long numbytes;\n    int i;\n    ptr=fopen(\"compass_script(1).4th\",\"r\");//Opening the script file\n\n    if(ptr==NULL)\n        return 1;\n\n    fseek(ptr,0,SEEK_END);\n\n    numbytes = ftell(ptr);//Number of bytes in the script \n    printf(\"number of bytes in the calibration script %ld\\n\",numbytes);\n    //Number of bytes in the script is 6117.                      \n    fseek(ptr,0,SEEK_SET);\n    char writebuffer[numbytes];//Creating a buffer to copy the file\n\n    if(writebuffer == NULL)\n        return 1;\n\n    int s=fread(writebuffer,sizeof(char),numbytes,ptr);\n    //Transferring  contents into the buffer\n\n    perror(\"fread\");\n\n    fclose(ptr);\n\n    fd = open(\"/dev/ttyUSB3\",O_RDWR | O_NOCTTY | O_NONBLOCK);\n    //Opening serial port\n\n    speed_t baud=B115200;\n\n    struct termios serialset;//Setting a baud rate for communication\n\n    tcgetattr(fd,&amp;serialset);\n\n    cfsetispeed(&amp;serialset,baud);\n    cfsetospeed(&amp;serialset,baud);\n\n    tcsetattr(fd,TCSANOW,&amp;serialset); \n\n    long bytesw=0;\n    tcflush(fd,TCIFLUSH);\n    printf(\"\\nnumbytes %ld\",numbytes);\n    bytesw=write(fd,writebuffer,numbytes);\n    //Writing the script into the  device connected to the serial port\n\n    printf(\"bytes written%ld\\n\",bytesw);//Only 4608 bytes are written\n\n    close (fd);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1501068350, "post_id": 45325286, "comment_id": 77612677, "body": "I suggest you read the chapter dealing with pointers in your C textbook."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7905871"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1501068445, "post_id": 45325286, "comment_id": 77612745, "body": "Thank you for your suggest, I do not have C textbook!! I just read some tutorial on website. I tried to find a good textbook but I can&#39;t get a good one."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1501069538, "post_id": 45325286, "comment_id": 77613608, "body": "<a href=\"https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">This link</a> may help."}], "answers": [{"tags": [], "owner": {"reputation": 721, "user_id": 481537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e33c31ff36ebef4f4517017ee4515199?s=128&d=identicon&r=PG", "display_name": "Alex Garcia", "link": "https://stackoverflow.com/users/481537/alex-garcia"}, "is_accepted": false, "score": 0, "last_activity_date": 1505340029, "last_edit_date": 1505340029, "creation_date": 1501068366, "answer_id": 45325582, "question_id": 45325286, "link": "https://stackoverflow.com/questions/45325286/what-does-int-and-double-mean-for-elements-outside-the-c-functions-argumen/45325582#45325582", "title": "What does int * and double ** mean for elements outside the C function&#39;s arguments?", "body": "<p>In C you traditionally use pointers to modify variables that were declared at a different scope than the one of your function.</p>\n\n<p>Pointers to pointers (<code>**</code>) though, are usually used when you want to manipulate those addresses in some way.</p>\n\n<p>Now as for you question:</p>\n\n<blockquote>\n  <p>How do we know they must get <code>**</code> or <code>*</code>?</p>\n</blockquote>\n\n<p>Well it depends on what you want to do with the data. If you want to manipulate the value you only need a pointer; if you want to manipulate the address you may need a pointer to a pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 209, "user_id": 7658944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197708885c5d718abd5711f49b17c6e0?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/7658944/robert"}, "is_accepted": true, "score": 1, "last_activity_date": 1501068872, "last_edit_date": 1501068872, "creation_date": 1501068391, "answer_id": 45325588, "question_id": 45325286, "link": "https://stackoverflow.com/questions/45325286/what-does-int-and-double-mean-for-elements-outside-the-c-functions-argumen/45325588#45325588", "title": "What does int * and double ** mean for elements outside the C function&#39;s arguments?", "body": "<p>The reasons for declaring a variable a * or ** are countless, it's better to try and get a grip of what they actually mean instead of getting hung up on why they're used in this specific instance.</p>\n\n<p>A pointer <strong>*</strong> is a reference to a <strong>memory location</strong> where a value is stored. In the case of a char it is a reference to a single memorylocation holding a byte, and in the case of an int it's usually 4 bytes on a 32bit system.</p>\n\n<p>You can pass a pointer as an argument to indicate this is where you want the result to be stored. Another reason might be efficiency. If you have a very large struct <strong>it's better to pass a 4byte (on a 32bit system) reference to the area of memory where the struct lies instead of loading the entire struct on the stack</strong>.</p>\n\n<p>A <strong>**</strong> is a double pointer. It is pointing to a specific memory location that itself is storing the memory location of something else.</p>\n\n<pre><code>char a[5];\n</code></pre>\n\n<p>Here, the variable a is actually a char * pointing at the first element of a[], namely a[0].</p>\n\n<pre><code>char a[5][5];\n</code></pre>\n\n<p>Here a is a char **, pointing to the first element of a[][], namely a[0], which will return a char * pointing at a[0][0].</p>\n\n<p>The second example is better when you want to fiddle with the pointers. Maybe you have a char** (an 'Array of strings'), and you want to replace one of the 'strings' (a string is just a char[] in c), you simply change the char* pointed to by the char**).</p>\n\n<p>I hope this makes it a little clearer for you.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 8056246, "user_type": "registered", "profile_image": "https://graph.facebook.com/1535643463133726/picture?type=large", "display_name": "Austin Hoffmann", "link": "https://stackoverflow.com/users/8056246/austin-hoffmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1501113264, "creation_date": 1501113264, "answer_id": 45339201, "question_id": 45325286, "link": "https://stackoverflow.com/questions/45325286/what-does-int-and-double-mean-for-elements-outside-the-c-functions-argumen/45339201#45339201", "title": "What does int * and double ** mean for elements outside the C function&#39;s arguments?", "body": "<p>Pointers are used when we want the <strong>location</strong> of a value, as opposed to just the <strong>value</strong>. Now why would we want this? One simple scenario is actually illustrated in your question. In c, it is often inconvenient (if not impossible) to return more than one value from a function. An easy way to get around that is with pointers! When you pass arguments into a function normally, for example </p>\n\n<pre><code>int myFunction(int some_parameter);\n</code></pre>\n\n<p>you are actually passing a <strong>copy</strong> of some_parameter into your function. When the function returns, the original value of some_parameter is unchanged. But what if we want to change some_parameter in the function? We pass a <strong>pointer</strong> to the value instead. This allows us to directly change the value of some_parameter at its original memory location, instead of a copy. So as you can see, if we instead had </p>\n\n<pre><code>void myFunction(int* parameter1, int* parameter2) {\n    *parameter1 = 1;\n    *parameter2 = 2;\n}\n</code></pre>\n\n<p>When you exit the function, your values parameter1 and parameter 2 will be 1 and 2 respectively, even though you never actually returned a value!\nPointers are one of the most useful and difficult parts about c, and I recommend you consult the other sources that others have selected in order to learn more about them.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7905871"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 45325588, "answer_count": 3, "score": 0, "last_activity_date": 1505340029, "creation_date": 1501067587, "last_edit_date": 1501075077, "question_id": 45325286, "link": "https://stackoverflow.com/questions/45325286/what-does-int-and-double-mean-for-elements-outside-the-c-functions-argumen", "title": "What does int * and double ** mean for elements outside the C function&#39;s arguments?", "body": "<p>I am learning C language and doing a lot of practice. I understand that <code>*</code> and <code>**</code> are pointers in <code>.c</code> function. </p>\n\n<p>Please consider the following function (another <code>.c</code> function) </p>\n\n<pre><code>void pcc(int* n, int* d, int* family, int* type, double* par, double* nu, double* out)\n{\n  int i, j, in=1, k, **fam;\n  double *w, **v, t, **theta, **x, **ny;\n\n   \u2026some works\n\n}\n</code></pre>\n\n<p>My question is, why do we use the pointer in the argument of the function? Because as I understand we use the pointer to point the previous identifed elements. </p>\n\n<p>Also, why do we use pointer for some elements that are not already defined in the arguments of the function. For example, in the last function we define a new element after writing the argument of the function: </p>\n\n<pre><code> int i, j, in=1, k, **fam;\n      double *w, **v, t, **theta, **x, **ny;\n</code></pre>\n\n<p>For instance, <code>double *w</code> was not in the argument of the function! also <code>**v</code> and other elements. How do we know they must get <code>**</code> or <code>*</code>.</p>\n\n<p>Any help please?</p>\n"}, {"tags": ["objective-c", "c", "swift", "unsafemutablepointer"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501156083, "post_id": 45339353, "comment_id": 77660671, "body": "Thank you very much OOPer, this code makes the compiler happy, but however, the result is 1, which is negative in this case.So the function is giving back an error. .  <b>Also, i noticed</b> data property is nil, and trying to access data.pointee gives me the error <b>Command failed due to signal: Segmentation fault: 11</b>"}, {"owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "reply_to_user": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501159148, "post_id": 45339353, "comment_id": 77662985, "body": "Thanks for reporting. But my code above, <code>let result = ...; if result == FOSCMDRET_OK {...}</code> would output machine codes equivalent to your ObjC code <code>if ( FOSCMDRET_OK == ...) {...}</code>. Have you filled up all code equivalent to your ObjC code? For example, my code omitted <code>while (mHandle) {...}</code> as you have not referred to that part in your question. But, in fact, you need it. And generally, when the result of an API call returned non-OK value, the API does not affect the region specified by pointer arguments. So, if it returned <code>1</code> and it&#39;s not OK, it&#39;s quite natural <code>data</code> is still <code>nil</code>."}, {"owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "reply_to_user": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501159338, "post_id": 45339353, "comment_id": 77663136, "body": "You are not showing how <code>mHandle</code> is declared nor is given a value. If you get non-OK result with my Swift code, that&#39;s because other parts of your Swift code is wrong. Do not hide relevant parts of your code and show all of them."}, {"owner": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501162488, "post_id": 45339353, "comment_id": 77666002, "body": "I am sorry if i ommitted relevant code. Would the objective c function implementation (file .h and .m ) and .swift class where i am actually working, be enough? I could also send you the project if you would want to take a look, its not a problem, and is a project i created only for camera implementation, so its pretty basic. Thanks for all your help,here is a preview  <a href=\"https://paste.ofcode.org/37dqy55aSbci868attH7qi3\" rel=\"nofollow noreferrer\">paste.ofcode.org/37dqy55aSbci868attH7qi3</a>"}, {"owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "reply_to_user": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501163499, "post_id": 45339353, "comment_id": 77666870, "body": "@Simone, I have updated the last code in my answer, which is equivalent to your <b>currently working</b> Objective-C code. That&#39;s all I can do as for now. If you need more, you should include more info (not too much more than enough) into your question. There may be many others who can solve your issue, with including such info in the question, they can answer it without reading long comments."}, {"owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "reply_to_user": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501173965, "post_id": 45339353, "comment_id": 77674646, "body": "@Simone, why do you put <code>DispatchQueue.main.async</code> in your updated code? You have not shown any of <code>dispatch_queue</code> in your <b>currently working</b> ObjC code. I cannot say anything about codes which are not included in your question."}, {"owner": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501181831, "post_id": 45339353, "comment_id": 77679303, "body": "because, from my code interpretation, the line  <b>[NSThread detachNewThreadSelector:@selector(RunInThread:) toTarget:self withObject:^(void *param){</b> in objective c, should be something related to threads, so thats why i ve put a dispatch async. Please note that even without the dispatch, <b>every</b> time i access data.pointee, compiler complains about segmentation error. It looks impossible to solve..."}, {"owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "reply_to_user": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "edited": false, "score": 0, "creation_date": 1501197070, "post_id": 45339353, "comment_id": 77686025, "body": "@Simone, first, include that part (or a little more) into your question. Second, <code>detachNewThreadSelector:oTarget:withObject:</code> is completely different thing than <code>DispatchQueue.main.async</code>. Third, <b>Command failed due to signal: Segmentation fault: 11</b> is caused by a compiler bug, usually triggered by some combinations of errors in your code. Anyway, I have given up to help you, as you are ignoring my repeated request to update your ObjC code. I cannot help who do not want to be helped. Hope someone can help you or you can fix the issue by yourself. Good luck."}, {"owner": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "reply_to_user": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "edited": false, "score": 0, "creation_date": 1501225943, "post_id": 45339353, "comment_id": 77694769, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/150374/discussion-between-simone-and-ooper\">continue this discussion in chat</a>."}, {"owner": {"reputation": 264, "user_id": 277821, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/012016804bcf80a8ad8cc5c97c21f8e7?s=128&d=identicon&r=PG", "display_name": "MetaImi", "link": "https://stackoverflow.com/users/277821/metaimi"}, "edited": false, "score": 0, "creation_date": 1523371521, "post_id": 45339353, "comment_id": 86528178, "body": "Did you find a solution for this?"}], "tags": [], "owner": {"reputation": 43976, "user_id": 6541007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xMee.jpg?s=128&g=1", "display_name": "OOPer", "link": "https://stackoverflow.com/users/6541007/ooper"}, "is_accepted": false, "score": 0, "last_activity_date": 1501163196, "last_edit_date": 1501163196, "creation_date": 1501114441, "answer_id": 45339353, "question_id": 45324330, "link": "https://stackoverflow.com/questions/45324330/error-passing-an-unsafemutablepointer-to-a-function/45339353#45339353", "title": "Error passing an UnsafeMutablePointer to a function", "body": "<p>First of all, using the initializer of <code>UnsafeMutablePointer</code> in this way may generate an unexpected result and you should never do:</p>\n\n<pre><code>let data = UnsafeMutablePointer&lt;FOSDEC_DATA&gt;(&amp;fosdecData)\n</code></pre>\n\n<p>Swift compiler may prepare a temporary region for the inout parameter and pass the address of the region, which is released immediately after the call. Unfortunately, this code may work in some cases, but you know codes work-in-some-cases can be a hard-to-fix bug.</p>\n\n<hr>\n\n<p>Second, in your Objective-C code, you <strong>declare <code>data</code> as <code>FOSDEC_DATA*</code> -- pointer to <code>FOSDEC_DATA</code> -- and initializing it to <code>NULL</code></strong>.</p>\n\n<p>Why are you trying to initialize your Swift version of <code>data</code> with <code>&amp;fosdecData</code>? There's no <code>fosdecData</code> in your Objective-C code.</p>\n\n<p>The equivalent Swift code for the declaration of <code>data</code> should be like this:</p>\n\n<pre><code>var data: UnsafeMutablePointer&lt;FOSDEC_DATA&gt;? = nil\n</code></pre>\n\n<p>You should <strong>declare <code>data</code> as <code>UnsafeMutablePointer&lt;FOSDEC_DATA&gt;?</code> -- pointer to <code>FOSDEC_DATA</code> -- and initialize it to <code>nil</code></strong>.</p>\n\n<p>In addition, it needs to be <code>var</code>, your <code>FosSdk_GetVideoData</code> would rewrite it to a valid pointer to <code>FOSDEC_DATA</code>.</p>\n\n<hr>\n\n<p>Third, you need to pass <code>UnsafeMutablePointer&lt;UnsafeMutablePointer&lt;Int8&gt;?&gt;!</code> to the second parameter of <code>FosSdk_GetVideoData</code>, but <code>&amp;data</code> would generate a pointer of type <code>UnsafeMutablePointer&lt;UnsafeMutablePointer&lt;FOSDEC_DATA&gt;?&gt;</code>.</p>\n\n<p>To make this sort of pointer type conversion, you need to use <code>withMemoryRebound&lt;T, Result&gt;(to:capacity:_:)</code>. And you need to call <code>withUnsafeMutablePointer&lt;T, Result&gt;(to:_:)</code> to get a pointer to <code>data</code>.</p>\n\n<pre><code>let result = withUnsafeMutablePointer(to: &amp;data) {\n    pointerToFosdecDataPtr in\n    //pointerToFosdecDataPtr: UnsafeMutablePointer&lt;UnsafeMutablePointer&lt;FOSDEC_DATA&gt;?&gt;\n    pointerToFosdecDataPtr.withMemoryRebound(to: UnsafeMutablePointer&lt;Int8&gt;?.self, capacity: 1) {\n        pointerToInt8Ptr in\n        //pointerToInt8Ptr: UnsafeMutablePointer&lt;UnsafeMutablePointer&lt;Int8&gt;?&gt;\n        //...\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>So, your Swift code equivalent to your Objective-C code would be something like this:</p>\n\n<pre><code>var data: UnsafeMutablePointer&lt;FOSDEC_DATA&gt;? = nil\nvar outlen: Int32 = 0\n\nwhile mHandle != 0 {\n\n    let result = withUnsafeMutablePointer(to: &amp;data) {\n        pointerToFosdecDataPtr in\n        //pointerToFosdecDataPtr: UnsafeMutablePointer&lt;UnsafeMutablePointer&lt;FOSDEC_DATA&gt;?&gt;\n        pointerToFosdecDataPtr.withMemoryRebound(to: UnsafeMutablePointer&lt;Int8&gt;?.self, capacity: 1) {\n            pointerToInt8Ptr in\n            //pointerToInt8Ptr: UnsafeMutablePointer&lt;UnsafeMutablePointer&lt;Int8&gt;?&gt;\n            FosSdk_GetVideoData(mHandle, pointerToInt8Ptr, &amp;outlen, FOSDECTYPE_RGB24)\n            //Implicit `return` works here and the result is passed to `result`.\n        }\n    }\n    if result == FOSCMDRET_OK &amp;&amp; outlen &gt; 0 {\n        if let data = data, data.pointee.type == FOSMEDIATYPE_VIDEO {\n            //...\n            //self.imageFromAVPicture...\n        } else {\n        }\n    }\n    usleep(20*1000)\n}\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>Code updated to reflect whole behavior of the <strong>currently working</strong> Objective-C code. (Renamed <code>mhandle</code> to <code>mHandle</code> as in Objective-C code.)</p>\n"}], "owner": {"reputation": 83, "user_id": 4584610, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10204722766123465/picture?type=large", "display_name": "Simone", "link": "https://stackoverflow.com/users/4584610/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1501226438, "creation_date": 1501064911, "last_edit_date": 1501226438, "question_id": 45324330, "link": "https://stackoverflow.com/questions/45324330/error-passing-an-unsafemutablepointer-to-a-function", "title": "Error passing an UnsafeMutablePointer to a function", "body": "<p>i am an ios developer who uses swift.\nI am using an sdk in order to communicate with an ip camera retrieve data from it, and show it to the user. \nI ve a project shipped with the sdk, which is written in obj c, and is working without problems. The problem is i am not able to pass the parameter to the expected parameter type from the function.\nThe SDK is very old, i integrated it using static libraries and a bridging header and i was able to connect successfully to the camera. I think the sdk is written in c or c++, and i am basically having problems with the parameter conversion.</p>\n\n<p><strong>Fos.h</strong></p>\n\n<pre><code>typedef struct   \n{ \nint                       channel;\nlong long                 time;\nunsigned int              index;\nFOSMEDIATYPE              type;     //Is video or audio\nFOSDECFMT                 fmt;      //The format of video or audio.\nshort                     isKey;\nshort                     multiAudioPage;\nint                       frameTag; \nunion{ \n    FOSVIDEO_INFO      video;       //Media type is video.\n    FOSAUDIO_INFO      audio;       //Media type is audio.\n} media;\nunsigned long long      pts;        //Pts.\nunsigned int              len;      //Size of data.\nchar                      data[0];  //Just data.\n}ATTRIBUTE_PACKED FOSDEC_DATA;    //Save the video or audio data,include video or audio information.\n</code></pre>\n\n<p>.</p>\n\n<p><strong>Objective C function, currently working</strong></p>\n\n<pre><code>- (IBAction)login:(id)sender {\n//[self._imageView add]\nNSString* str = [self._textField text];\nconst char* url = [str UTF8String];\nchar ip[128];\nint port;\nchar usr[64];\nchar pwd[64];\nint count = sscanf(url, \"%[^:]:%d/%[^:]:%s\", ip, &amp;port, usr, pwd);\nif (count != 4) {\n    return;\n}\n\nmHandle = FosSdk_Create(ip, \"\", usr, pwd, port, port, FOSIPC_H264, FOSCNTYPE_IP);\n//mHandle = FosSdk_Create(ip, \"FASDFDSAFDASFASD\", usr, pwd, port, port, FOSIPC_H264, FOSCNTYPE_P2P);\nif (mHandle == FOSHANDLE_INVALID) {\n    return;\n}\n[self._Login setEnabled:NO];\n[self._Logout setEnabled:YES];\n\n[NSThread detachNewThreadSelector:@selector(RunInThread:) toTarget:self withObject:^(void *param){\n\n    int usrPrivilege = 0;\n    FOSCMD_RESULT ret = FosSdk_Login(mHandle, &amp;usrPrivilege, 500);\n    if (FOSCMDRET_OK != ret) {\n        return;\n    }\n\n    ret = FosSdk_OpenVideo(mHandle, FOSSTREAM_SUB, 500);\n    if (FOSCMDRET_OK != ret) {\n        return;\n    }\n    //char* framebuf = (char*)malloc(512*1024);\n    FOSDEC_DATA* data = NULL;\n\n    int outlen = 0;\n    while (mHandle) {\n// FosSdk_RetainHandle(mHandle, &amp;usrPrivilege);\n        if ( FOSCMDRET_OK == FosSdk_GetVideoData(mHandle, (char**)&amp;data, &amp;outlen, FOSDECTYPE_RGB24) &amp;&amp; outlen&gt;0)\n        {\n\n            if (data-&gt;type == FOSMEDIATYPE_VIDEO) {\n                //int a=0;\n                //a++;\n                [self imageFromAVPicture:data-&gt;data width:data-&gt;media.video.picWidth height:data-&gt;media.video.picHeight];\n            }\n            else{\n            }\n        }\n        usleep(20*1000);\n    }\n }];\n}\n</code></pre>\n\n<p>.</p>\n\n<p><strong>The method signature in fos.h</strong>  </p>\n\n<pre><code>    FOSSDK FOSCMD_RESULT FOSAPI FosSdk_GetVideoData(FOSHANDLE handle, char **data, int *outLen, FOSDECFMT videoFmt);\n</code></pre>\n\n<p>.</p>\n\n<p><strong>When calling it from objective-c</strong></p>\n\n<pre><code>FosSdk_GetVideoData(&lt;#unsigned int handle#&gt;, &lt;#char **data#&gt;, &lt;#int *outLen#&gt;, &lt;#FOSDECFMT videoFmt#&gt;)\n}];\n</code></pre>\n\n<p>.</p>\n\n<p><strong>When calling it from swift</strong></p>\n\n<pre><code>FosSdk_GetVideoData(handle: UInt32,\n                   data: UnsafeMutablePointer&lt;UnsafeMutablePointer&lt;Int8&gt;?&gt;!,\n                   outLen: UnsafeMutablePointer&lt;Int32&gt;!,\n                   videoFmt: FOSDECFMT)\n</code></pre>\n\n<p>.</p>\n\n<p><strong>The error is data parameter, exactly:</strong></p>\n\n<pre><code>Cannot convert value of type 'UnsafeMutablePointer&lt;FOSDEC_DATA&gt;' to expected argument type 'UnsafeMutablePointer&lt;Int8&gt;?'\n</code></pre>\n\n<p>.</p>\n\n<p><strong>I ve tried changing the declaration of data to this, but it gives me this error</strong> </p>\n\n<pre><code>let data = UnsafeMutablePointer&lt;Int8&gt;(&amp;fosdecData)\nAmbiguous use of 'init'\n</code></pre>\n\n<p>.</p>\n\n<p>This pointer stuff is a bit complicated but i was able to pair my device with the camera, using methods which used unsafeMutablePointers too.\nHowever, i cannot figure out how to pass this empy data object to the function.</p>\n\n<p>The SDK is outdated and bad documented, which does not help.\nAnyway, i need to make it working.\nHope to get some help, thanks coders!\n.</p>\n\n<p><strong>EDIT, THANKS TO OOPer</strong>\n.\nHere is the updated version in swift, which actually produces an unexpected error. The result returned from the function is now 0, so it s correct. However, trying to access original FosdedData struct, i have a <strong>Command failed due to signal: Segmentation fault: 11</strong>.\nHow could i solve this? Sorry for long question, i wanted to be accurate.</p>\n\n<pre><code>var mhandle : UInt32 = FOS_HANDLE_INIT.rawValue\n\noverride func viewDidLoad() {\n    super.viewDidLoad()\n\n    //These functions basically do camera pairing, and write result on mhandle, which is equal to 0 , if functions work, otherwise 1\n    initializeFOS()\n    startEzLinkFOS()\n    sdkCreateFOS()\n    loginFOS()\n    openVideoFOS()        \n\n    var data: UnsafeMutablePointer&lt;FOSDEC_DATA&gt;? = nil\n    var outlen : Int32 = 0\n    while self.mhandle &gt; 0 {\n        let resultOOPer = withUnsafeMutablePointer(to: &amp;data) { pointerToFosdecData in\n            pointerToFosdecData.withMemoryRebound(to: UnsafeMutablePointer&lt;Int8&gt;?.self, capacity: 1, { (pointerToInt8Pointer) in\n\n                FosSdk_GetVideoData(self.mhandle, pointerToInt8Pointer, &amp;outlen, FOSDECTYPE_RGB24)\n            })\n        }\n\n        if resultOOPer == FOSCMDRET_OK &amp;&amp; outlen &gt; 0{\n            if let unwrData = data {\n\n                //if unwrData.pointee.type == FOSMEDIATYPE_VIDEO{\n                //Produced Output when i try access pointee, which is actually the fosdecData struct i need:\n                //Command failed due to signal: Segmentation fault: 11\n                //}\n            }\n        }\n        usleep(20*1000)\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "initialization", "malloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 8, "creation_date": 1501064076, "post_id": 45323930, "comment_id": 77609618, "body": "The contents of the memory is <i>indeterminate</i>. It <i>might</i> be seemingly random. Or it <i>might</i> be all zeroes. You simply do not know beforehand."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1501064161, "post_id": 45323930, "comment_id": 77609686, "body": "<i>&quot;The program doesn&#39;t print OK. malloc isn&#39;t supposed to initialize the allocated memory to zero. &quot;</i> - It&#39;s also not supposed to guarantee it <i>isn&#39;t</i> all zero. Either way, by reading indeterminate values, your program has undefined behavior. You can&#39;t expect anything."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501064173, "post_id": 45323930, "comment_id": 77609693, "body": "Also, debug-builds might actually cause memory you allocate, or even local variables, to <i>be</i> initialized. To make memory and pointer problems easier to detect."}, {"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 0, "creation_date": 1501064280, "post_id": 45323930, "comment_id": 77609775, "body": "In Visual C++ for example, the memory region allocated is <i>always</i> set to 0xCDCDCDCD in Debug mode and is random in Release mode. It is an implementation defined behavior and every compiler does what it wants with the allocated memory region."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501064367, "post_id": 45323930, "comment_id": 77609831, "body": "@StoryTeller &quot;by reading indeterminate values, your program has undefined behavior&quot; Not in C, only in C++ is this unconditional. In C it <i>might</i> be UB depending on if it&#39;s a &quot;trap value&quot; IIRC."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1501064745, "post_id": 45323930, "comment_id": 77610107, "body": "@Someprogrammerdude - Whether or not a type has trap values isn&#39;t defined by the C standard. And if a trap value is read the behavior is explicitly undefined. So I do believe it&#39;s UB all around."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1501064826, "post_id": 45323930, "comment_id": 77610168, "body": "@StoryTeller You probably got a point there."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501064877, "post_id": 45323930, "comment_id": 77610206, "body": "@Someprogrammerdude but irrespective of whether it has a trap representatio or not, reading uninitialized variables is UB in C, right?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501065499, "post_id": 45323930, "comment_id": 77610640, "body": "@StoryTeller but irrespective of whether the type has a trap representation or not, reading uninitialized value is UB in C, right?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501065729, "post_id": 45323930, "comment_id": 77610782, "body": "@AjayBrahmakshatriya - UB in the language lawyer sense or just the &quot;don&#39;t do this if you want predictability&quot; sense? In the first sense it depends. If the standard guarantees that variable is merely unspecified, then that&#39;s not UB, only unpredictable. Your program still has to behave a certain way. If the standard says it&#39;s indeterminate, than that&#39;s entirely UB, the compiler can do whatever."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501065876, "post_id": 45323930, "comment_id": 77610895, "body": "@StoryTeller okay, so you mean the standard guarantees that if I do 2 reads on the uninitialized value it will read the same both the times? I think this should also not be guaranteed since a compiler could optimize the first read out."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501066085, "post_id": 45323930, "comment_id": 77611023, "body": "@AjayBrahmakshatriya - I&#39;m afraid I presented my argument poorly. For a plain local variable, it&#39;s always declared as indeterminate if uninitialized, IIRC. But for a block of memory you get from malloc or such, semantics may vary. For instance, various sources of true entropy give you unspecified values, not indeterminate ones. So your program stays well-formed and its behavior defined."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501066208, "post_id": 45323930, "comment_id": 77611112, "body": "@StoryTeller Oh! So you mean the program <code>int a; int b = a; int c = a; if (b==c) printf(&quot;yes&quot;);else printf(&quot;no&quot;);</code> is guaranteed to print &quot;yes&quot; by the standards?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501066340, "post_id": 45323930, "comment_id": 77611187, "body": "@AjayBrahmakshatriya - Eh, no. <code>a</code> is uninitialized. Its value indeterminate. The behavior is UB. If you did something like <code>int *a = source_of_entropy(); int b = *a; ...</code> then it would not be UB, if <code>source_of_entropy</code> was well behaved with regard to the contents of the memory it returns."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501066359, "post_id": 45323930, "comment_id": 77611205, "body": "@AjayBrahmakshatriya; <i>but irrespective of whether the type has a trap representation or not, reading uninitialized value is UB in C, right?</i> No. Reading uninitialized variable is not always UB. It <i>can be</i> UB if the type has trap representation."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501066482, "post_id": 45323930, "comment_id": 77611302, "body": "@StoryTeller Ah! Now I get you. But malloc is not well behaved with regards to the content of the memory it returns, right? (purely by standards not implementation). So it should be UB?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501066630, "post_id": 45323930, "comment_id": 77611394, "body": "@AjayBrahmakshatriya - <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.22.3.4p2\" rel=\"nofollow noreferrer\">You got it. It&#39;s explicitly indeterminate</a>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501066781, "post_id": 45323930, "comment_id": 77611495, "body": "@StoryTeller Great! Thanks for clarifying the difference between unspecified and indeterminate values and bearing with the doubts!"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 9, "last_activity_date": 1501066145, "last_edit_date": 1501066145, "creation_date": 1501064048, "answer_id": 45323971, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/45323971#45323971", "title": "Is malloc() initializing allocated array to zero?", "body": "<blockquote>\n  <p>malloc isn't supposed to initialize the allocated memory to zero.  </p>\n</blockquote>\n\n<p>Memory allocated by <code>malloc</code> is uninitialised. Value at these locations are indeterminate. In this case accessing that memory can result in an undefined behavior if the value at that location is to be trap representation for the type.    </p>\n\n<p>n1570-\u00a76.2.6.1 (p5):</p>\n\n<blockquote>\n  <p>Certain object representations need not represent a value of the object type. If the stored value of an object has such a representation and is read by an lvalue expression that does not have character type, the behavior is undefined. [...]</p>\n</blockquote>\n\n<p>and footnote says:  </p>\n\n<blockquote>\n  <p>Thus, an automatic variable can be initialized to a trap representation without causing undefined behavior, but the value of the variable cannot be used until a proper value is stored in it.</p>\n</blockquote>\n\n<p>Nothing good can be expected if the behavior is undefined.You may or may not get expected result.</p>\n"}, {"tags": [], "owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "is_accepted": false, "score": 3, "last_activity_date": 1501065149, "last_edit_date": 1501065149, "creation_date": 1501064128, "answer_id": 45324002, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/45324002#45324002", "title": "Is malloc() initializing allocated array to zero?", "body": "<p><code>void *malloc(size_t size)</code> is just supposed to keep aside the specified amount of space. That's all. There is no guarantee as to what will be present in that space.</p>\n\n<p>Quoted from the man pages:</p>\n\n<blockquote>\n  <p>The <code>malloc()</code> function allocates size bytes and returns a pointer to\n  the allocated memory. The memory is not initialized. If <code>size</code> is 0,\n  then <code>malloc()</code> returns either NULL, or a unique pointer value that can\n  later be successfully passed to <code>free()</code>.</p>\n</blockquote>\n\n<p>Apart from <code>calloc()</code> you can use the <code>memset()</code> function to zero out a block of memory.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1569783629, "post_id": 45324007, "comment_id": 102699079, "body": "The last paragraph is not correct. Merely using an indeterminate value does not necessarily lead to undefined behaviour. It can be very erratic though. It does become undefined behaviour if you pass it to a library function."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": true, "score": 12, "last_activity_date": 1501087445, "last_edit_date": 1501087445, "creation_date": 1501064137, "answer_id": 45324007, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/45324007#45324007", "title": "Is malloc() initializing allocated array to zero?", "body": "<p>The man page of <a href=\"https://linux.die.net/man/3/malloc\" rel=\"noreferrer\">malloc</a> says:</p>\n\n<blockquote>\n  <p>The malloc() function allocates size bytes and returns a pointer to\n  the allocated memory. <strong>The memory is not initialized.</strong> If size is 0,\n  then malloc() returns either NULL, or a unique pointer value that can\n  later be successfully passed to free().</p>\n</blockquote>\n\n<p>So, <code>malloc()</code> returns <strong>uninitialized memory</strong>, the contents of which is indeterminate.</p>\n\n<pre><code> if (arr[i] != 0)\n</code></pre>\n\n<p>In your program, You have tried to access the content of a memory block, which is invoked <strong>undefined behavior</strong>.</p>\n"}, {"comments": [{"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 2, "creation_date": 1501065489, "post_id": 45324147, "comment_id": 77610633, "body": "GCC documentation: <i>the cast is necessary in contexts other than assignment operators</i>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 2, "creation_date": 1501066182, "post_id": 45324147, "comment_id": 77611091, "body": "@RyanB. - GCC isn&#39;t being C standard compliant here. <code>void*</code> is implicitly convertible to all object types. No cast required."}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 7, "last_activity_date": 1501065788, "last_edit_date": 1501065788, "creation_date": 1501064459, "answer_id": 45324147, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/45324147#45324147", "title": "Is malloc() initializing allocated array to zero?", "body": "<blockquote>\n  <p><code>malloc</code> isn't supposed to initialize the allocated memory to zero. Why is this happening?</p>\n</blockquote>\n\n<p>This is how it was designed more than 40 years ago.</p>\n\n<p>But, on the same time, there was created the <a href=\"http://en.cppreference.com/w/c/memory/calloc\" rel=\"noreferrer\"><code>calloc()</code></a> function that <strong>initializes the allocated memory to zero</strong> and it's the recommended way to allocate memory for arrays.</p>\n\n<p>The line:</p>\n\n<pre><code>arr = (int *)malloc(sz * sizeof(int));\n</code></pre>\n\n<p>Should read:</p>\n\n<pre><code>arr = calloc(sz, sizeof(int));\n</code></pre>\n\n<p>If you are learning C from an old book it teaches you to always cast the value returned by <code>malloc()</code> or <code>calloc()</code> (a <code>void *</code>) to the type of the variable you assign the value to (<code>int *</code> in your case). This is obsolete, if the value returned by <code>malloc()</code> or <code>calloc()</code> is directly assigned to a variable, the modern versions of C do not need that cast any more.</p>\n"}, {"comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1569789178, "post_id": 45324420, "comment_id": 102700301, "body": "Can you elaborate on <i>&quot;In modern versions of GCC, it is set to 0x000000 if you don&#39;t enable code optimizations, and random otherwise.&quot;</i>? Possibly include a reference?"}], "tags": [], "owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "is_accepted": false, "score": 6, "last_activity_date": 1501077626, "last_edit_date": 1501077626, "creation_date": 1501065135, "answer_id": 45324420, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/45324420#45324420", "title": "Is malloc() initializing allocated array to zero?", "body": "<p>From the C Standard 7.22.3.4:</p>\n\n<p><strong>Synopsis</strong></p>\n\n<pre><code>#include &lt;stdlib.h&gt;\nvoid *malloc(size_t size);\n</code></pre>\n\n<p><strong>Description</strong></p>\n\n<blockquote>\n  <p>The malloc function allocates space for an object whose size is\n  specified by size and whose value is indeterminate.</p>\n</blockquote>\n\n<p>The value is <strong>indeterminate</strong>. So, every compiler is free to behave how it wants. For example, in Microsoft Visual C++, in <code>Debug</code> mode, the area of allocated memory by <code>malloc()</code> is all set to <code>0xCDCDCDCD</code> and when in <code>Release</code> mode it is random. In modern versions of GCC, it is set to 0x000000 if you don't enable code optimizations, and random otherwise. I don't know about other compilers, but you get the idea.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 3, "last_activity_date": 1501144576, "creation_date": 1501144576, "answer_id": 45345476, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/45345476#45345476", "title": "Is malloc() initializing allocated array to zero?", "body": "<p>The first time you call <code>malloc(3)</code>, it asks to the operating system to get memory for the heap space.</p>\n\n<p>For security reasons, the unix/linux kernel (and many other operating systems) in general zeroes the page contents that is to be given to a process, so no process can access that memory's previous contents and do nasty things with it (like searching for old passwords, or similar things).</p>\n\n<p>If you do several allocations and deallocations of memory, when the malloc module reuses the previous memory, you'll see garbage coming from <code>malloc(3)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12284532, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vLPADaOTfpQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reO2fC6E7JBL-zl_DIYeS5Akoc7-w/photo.jpg?sz=128", "display_name": "kalaiamuthan manisekar", "link": "https://stackoverflow.com/users/12284532/kalaiamuthan-manisekar"}, "is_accepted": false, "score": 2, "last_activity_date": 1572249097, "creation_date": 1572249097, "answer_id": 58587304, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/58587304#58587304", "title": "Is malloc() initializing allocated array to zero?", "body": "<p>Zero's are assigned to page contents at first time in linux kernel.</p>\n\n<p>Below program explains the memory initialisation difference in malloc and calloc:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\n#define SIZE 5\n\nint main(void) {\n    int *mal = (int*)malloc(SIZE*sizeof(int));\n    int *cal = (int*)calloc(SIZE, sizeof(int));\n\n    mal[4] = cal[4] = 100;\n\n    free(mal); free(cal);\n\n    mal = (int*)malloc(SIZE*sizeof(int));\n    cal = (int*)calloc(SIZE, sizeof(int));\n\n    for(int i=0; i&lt;SIZE; i++) {\n        printf(\"mall[%d] = %d\\n\", i, mal[i]);\n    }\n    for(int i=0; i&lt;SIZE; i++) {\n        printf(\"call[%d] = %d\\n\", i, cal[i]);\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 526, "user_id": 9078344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j7O7g.jpg?s=128&g=1", "display_name": "OpSocket", "link": "https://stackoverflow.com/users/9078344/opsocket"}, "edited": false, "score": 0, "creation_date": 1602956902, "post_id": 64033203, "comment_id": 113886051, "body": "Why not use <code>calloc</code> if you set the bytes of the memory block pointed by arr to 0?"}, {"owner": {"reputation": 11, "user_id": 13856192, "user_type": "registered", "profile_image": "https://graph.facebook.com/2995164193870855/picture?type=large", "display_name": "Luke Demandelemoi", "link": "https://stackoverflow.com/users/13856192/luke-demandelemoi"}, "reply_to_user": {"reputation": 526, "user_id": 9078344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j7O7g.jpg?s=128&g=1", "display_name": "OpSocket", "link": "https://stackoverflow.com/users/9078344/opsocket"}, "edited": false, "score": 0, "creation_date": 1603917448, "post_id": 64033203, "comment_id": 114191452, "body": "I&#39;d rather use calloc myself because it allow me more flexibility like dynamically changing the allocated block size but the point here was to answer the author&#39;s question accurately with little changes to the original code."}], "tags": [], "owner": {"reputation": 11, "user_id": 13856192, "user_type": "registered", "profile_image": "https://graph.facebook.com/2995164193870855/picture?type=large", "display_name": "Luke Demandelemoi", "link": "https://stackoverflow.com/users/13856192/luke-demandelemoi"}, "is_accepted": false, "score": 0, "last_activity_date": 1600882960, "last_edit_date": 1600882960, "creation_date": 1600881758, "answer_id": 64033203, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero/64033203#64033203", "title": "Is malloc() initializing allocated array to zero?", "body": "<p>For old school C coders stuck in the 80's like me who just can't live without using malloc to allocate everything from the heap(dynamic memory), <em>memset</em> is great for filling you memory segment with any chosen character without too much headaches. It's also great for clearing stuff when the need arises.</p>\n<p>Compile and work great with GCC:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;mem.h&gt;\n\nint main() \n{\n\n  int *arr;\n    int sz = 100000;\n  arr = (int *)malloc(sz * sizeof(int));\n\n    memset(arr, 0, sz);\n\n\n   int i;\n    for (i = 0; i &lt; sz; ++i) {\n        if (arr[i] != 0) {\n          printf(&quot;OK\\n&quot;);\n         break;\n       }\n }\n\n free(arr);\n return 0;\n}\n</code></pre>\n<p>ref: <a href=\"http://www.cplusplus.com/reference/cstring/memset/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstring/memset/</a></p>\n"}], "owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32886, "favorite_count": 3, "accepted_answer_id": 45324007, "answer_count": 8, "score": 9, "last_activity_date": 1600882960, "creation_date": 1501063970, "last_edit_date": 1519900901, "question_id": 45323930, "link": "https://stackoverflow.com/questions/45323930/is-malloc-initializing-allocated-array-to-zero", "title": "Is malloc() initializing allocated array to zero?", "body": "<p>Here is the code I'm using:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int *arr;\n    int sz = 100000;\n    arr = (int *)malloc(sz * sizeof(int));\n\n    int i;\n    for (i = 0; i &lt; sz; ++i) {\n        if (arr[i] != 0) {\n            printf(\"OK\\n\");\n            break;\n        }\n    }\n\n    free(arr);\n    return 0;\n}\n</code></pre>\n\n<p>The program doesn't print <code>OK</code>. <code>malloc</code> isn't supposed to initialize the allocated memory to zero. Why is this happening?</p>\n"}, {"tags": ["c", "if-statement", "conditional"], "comments": [{"owner": {"reputation": 956, "user_id": 3744997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KiTfT.png?s=128&g=1", "display_name": "Abhishek Agarwal", "link": "https://stackoverflow.com/users/3744997/abhishek-agarwal"}, "edited": false, "score": 1, "creation_date": 1501060898, "post_id": 45322620, "comment_id": 77607140, "body": "In absence of brackets only the first statement is considered part of the if-else block. So it is equivalent to the first of your options."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1501060900, "post_id": 45322620, "comment_id": 77607146, "body": "Why would the <code>else</code> slurp up multiple statements? BTW the number of lines is irrelevant."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501061234, "post_id": 45322620, "comment_id": 77607390, "body": "&#39;I don&#39;t have a quick access to a C compiler&#39; download one and a debugger.  You will need one anyway for test/debug, and getting the tools now will allow you to test out any such confusions."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501061274, "post_id": 45322620, "comment_id": 77607411, "body": ".. or just try it out on an online compiler."}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1501063028, "post_id": 45322620, "comment_id": 77608789, "body": "If you use an <code>if</code> statement, 1) do not omit brackets, and 2) do not place two brackets on the same line. You won&#39;t destroy your SSD by storing these several extra characters. However, if a ternary operator might make the expression more readable, like this: <code>*i = (stuff==1) ? 1 : Ne</code>, then it&#39;s possible to save some typing."}], "answers": [{"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1501065873, "post_id": 45322716, "comment_id": 77610893, "body": "It also shows how brackets can save you a lot of guess work."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 5, "last_activity_date": 1501061311, "last_edit_date": 1501061311, "creation_date": 1501061001, "answer_id": 45322716, "question_id": 45322620, "link": "https://stackoverflow.com/questions/45322620/single-line-if-statements-in-c-which-statements-are-affected/45322716#45322716", "title": "Single-line if statements in C - which statements are affected?", "body": "<p>Following code</p>\n\n<pre><code>if (ge.g[*l][*k].s==1) *i=1; else *i=Ne;  \n*j=*l; \n</code></pre>\n\n<p>when formatted correctly is written like this:</p>\n\n<pre><code>if (ge.g[*l][*k].s==1)\n   *i=1;\n else\n   *i=Ne;  \n\n*j=*l; \n</code></pre>\n\n<p>and this is the equivalent code <em>with</em> braces:</p>\n\n<pre><code>if (ge.g[*l][*k].s==1)\n{\n   *i=1;\n}\nelse\n{\n   *i=Ne;  \n}\n\n*j=*l; \n</code></pre>\n\n<p>This shows the importance of code being formatted correctly so it is readable and understandable also by humans and not only by comilers.</p>\n"}, {"tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 1, "last_activity_date": 1501062135, "last_edit_date": 1501062135, "creation_date": 1501061761, "answer_id": 45323026, "question_id": 45322620, "link": "https://stackoverflow.com/questions/45322620/single-line-if-statements-in-c-which-statements-are-affected/45323026#45323026", "title": "Single-line if statements in C - which statements are affected?", "body": "<p>Simplifying brackets </p>\n\n<blockquote>\n  <p>{}</p>\n</blockquote>\n\n<p>create a \"compound\" statement (I know that the C scholars will be very upset seeing this \"definition\") . In your question the single statement can be replaced by the compound one (in the braces). The position of the statement does not matter as the most of whitespace is ignored by the compiler (except the strings &amp; everything processed by the preprocessor). You can even add 100000 newlines and it will not change anything. It is only important for us humans :)</p>\n\n<pre><code>if(x==y)start(x);else start(y);\n</code></pre>\n\n<p>===</p>\n\n<pre><code>if (x == y)\n    start(x);\nelse \n    start(y);\n</code></pre>\n\n<p>===</p>\n\n<pre><code>if      (x       ==                  y)\n\n\n\n\n\n                                                                start(              x          ); \n\n\n\n                                                                 else \n\n\n\n\nstart(                                           y)                        \n\n;\n</code></pre>\n\n<p>but the second one is the easiest one to read IMHO :)</p>\n"}, {"tags": [], "owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "is_accepted": false, "score": 1, "last_activity_date": 1501062006, "creation_date": 1501062006, "answer_id": 45323126, "question_id": 45322620, "link": "https://stackoverflow.com/questions/45322620/single-line-if-statements-in-c-which-statements-are-affected/45323126#45323126", "title": "Single-line if statements in C - which statements are affected?", "body": "<p>The curly braces actually group a number of statements as one compound statement.</p>\n\n<p><code>if</code> has a syntax like the following:</p>\n\n<pre><code>if (condition) statement1 [else statement2]\n</code></pre>\n\n<p><em>where [ ] indicates: optional</em></p>\n\n<p>Now <code>statement1</code> can be a single statement (delimited by a semicolon), or a so-called compound statement, i.e. a group of subsequent statements enclosed in curly braces. The same is true for <code>statement2</code>.</p>\n\n<p>That is why your first alternative is correct. If the second line were involved too, braces would have to be used, to group the statements together into one compound statement. Since there are no \"curlies\", the first alternative is correct.</p>\n"}, {"tags": [], "owner": {"reputation": 452, "user_id": 7247051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ad026d36f38a1088e8ce7a1786da9c31?s=128&d=identicon&r=PG&f=1", "display_name": "Ihdina", "link": "https://stackoverflow.com/users/7247051/ihdina"}, "is_accepted": false, "score": 1, "last_activity_date": 1501065623, "last_edit_date": 1501065623, "creation_date": 1501064374, "answer_id": 45324106, "question_id": 45322620, "link": "https://stackoverflow.com/questions/45322620/single-line-if-statements-in-c-which-statements-are-affected/45324106#45324106", "title": "Single-line if statements in C - which statements are affected?", "body": "<blockquote>\n  <p>Single Statement (without bracket).</p>\n</blockquote>\n\n<p><strong>One statement</strong> is an operation that <strong>ends with single ; sign</strong>.</p>\n\n<pre><code>if (condition)\n    statement 1;\n</code></pre>\n\n<p>example:</p>\n\n<pre><code> if (ge.g[*l][*k].s==1) \n     *i=1;  // statement 1\n else \n     *i=Ne; // statement 1\n\n *j=*l; // statement 2\n</code></pre>\n\n<blockquote>\n  <p>Single Statement (with bracket).</p>\n</blockquote>\n\n<pre><code>if (condition) {\n    statement 1;\n}\n</code></pre>\n\n<p>example:</p>\n\n<pre><code> if (ge.g[*l][*k].s==1)  {\n     *i=1;  // statement 1\n }\n else {\n     *i=Ne; // statement 1\n }\n\n *j=*l; // statement 2\n</code></pre>\n\n<blockquote>\n  <p>Multiple Statement (with brackets)</p>\n</blockquote>\n\n<p><strong>Brackets {</strong> are <strong>only needed</strong> when your statement is <strong>more than one</strong>.</p>\n\n<pre><code>if (condition) {\n    statement 1;\n    statement 2;\n    statement n;\n}\n</code></pre>\n\n<p>example:</p>\n\n<pre><code> if (ge.g[*l][*k].s==1) {\n     *i++; // statement 1\n     *i++; // statement 2\n     *i++; // statement 3\n }\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 8363528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91569fc4b7638fd0e951d2a8e500cc8f?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/8363528/piotr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4366, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1501075667, "creation_date": 1501060754, "last_edit_date": 1501075667, "question_id": 45322620, "link": "https://stackoverflow.com/questions/45322620/single-line-if-statements-in-c-which-statements-are-affected", "title": "Single-line if statements in C - which statements are affected?", "body": "<p>I'm trying to translate some code from C to another language. I don't have a quick access to a C compiler and just found myself confused with the single-line if statements. I know that statements like:</p>\n\n<pre><code>if (condition) [statement]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (condition)\n    [statement]\n</code></pre>\n\n<p>can be evaluated without the brackets, i.e. are equivalent to:</p>\n\n<pre><code>if (condition) {[statement]}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (condition)\n    {[statement]}\n</code></pre>\n\n<p>respectively, but I'm not sure about the sample code I'm dealing with. It goes:</p>\n\n<pre><code>if (ge.g[*l][*k].s==1) *i=1; else *i=Ne;  \n*j=*l; \n</code></pre>\n\n<p>I feel like the second line is not affected by the if statement, but it's not immediately obvious from the context of the code. Long story short: is the above equivalent to:</p>\n\n<pre><code>if (ge.g[*l][*k].s==1) {*i=1;} else {*i=Ne;}  \n*j=*l; \n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (ge.g[*l][*k].s==1) {*i=1;} else {*i=Ne;  \n*j=*l;} \n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c", "pointers", "avr", "atmega", "avr-gcc"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501060900, "post_id": 45322600, "comment_id": 77607142, "body": "it is a <code>const</code> pointer to a <code>volatile unsigned char</code> . If you just need help with reading it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501060938, "post_id": 45322600, "comment_id": 77607171, "body": "The asterisk <code>*</code> can mean different things in different scopes. It can mean multiplication if used as a binary operator. It can mean pointer is used in a type (like the typecast <code>(volatile unsigned char* const)</code>). Or it can mean <i>dereference a pointer</i> if used as an unary operator (which is what&#39;s happening here with the &quot;first&quot; asterisk)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501060941, "post_id": 45322600, "comment_id": 77607173, "body": "@user247954 it&#39;s an external resource. But someone already did the work for you."}, {"owner": {"reputation": 69, "user_id": 3992623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/161051912a0a7f5296c25c76413fff1c?s=128&d=identicon&r=PG&f=1", "display_name": "user247954", "link": "https://stackoverflow.com/users/3992623/user247954"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501060991, "post_id": 45322600, "comment_id": 77607213, "body": "@AjayBrahmakshatriya I get that but shouldn&#39;t the second asterisk be enough to define this pointer? why do we need 2 asterisks?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501060993, "post_id": 45322600, "comment_id": 77607215, "body": "It&#39;s not defining the macro as an address. That macro is replaced in code by an lvalue."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501061078, "post_id": 45322600, "comment_id": 77607277, "body": "@user247954 the outer most * is just to dereference this address. Basically it reads a single <code>BYTE</code> from the address <code>0x31</code>, everywhere this macro is used."}], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501061464, "post_id": 45322743, "comment_id": 77607552, "body": "It can be used to <i>write</i> to the address as well, if used as the lhs of an assignment."}, {"owner": {"reputation": 69, "user_id": 3992623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/161051912a0a7f5296c25c76413fff1c?s=128&d=identicon&r=PG&f=1", "display_name": "user247954", "link": "https://stackoverflow.com/users/3992623/user247954"}, "edited": false, "score": 0, "creation_date": 1501061827, "post_id": 45322743, "comment_id": 77607863, "body": "If we take the inner part only why it isn&#39;t enough to read and write from the address?"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 69, "user_id": 3992623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/161051912a0a7f5296c25c76413fff1c?s=128&d=identicon&r=PG&f=1", "display_name": "user247954", "link": "https://stackoverflow.com/users/3992623/user247954"}, "edited": false, "score": 0, "creation_date": 1501062098, "post_id": 45322743, "comment_id": 77608055, "body": "@user247954: Because it&#39;s just the pointer poiting to an address. To get access to that specific address you have to dereference it. If you have for example a <code>int* intPtr</code> and would use it by <code>intPtr = 42</code> you would write 42 to the pointers value and not to the address which the pointer contains."}, {"owner": {"reputation": 69, "user_id": 3992623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/161051912a0a7f5296c25c76413fff1c?s=128&d=identicon&r=PG&f=1", "display_name": "user247954", "link": "https://stackoverflow.com/users/3992623/user247954"}, "edited": false, "score": 0, "creation_date": 1501062266, "post_id": 45322743, "comment_id": 77608183, "body": "@AndreKampling Ok I got it. Thank you for the clear explanation."}], "tags": [], "owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "is_accepted": true, "score": 8, "last_activity_date": 1503990002, "last_edit_date": 1503990002, "creation_date": 1501061052, "answer_id": 45322743, "question_id": 45322600, "link": "https://stackoverflow.com/questions/45322600/why-use-2-pointers-to-point-to-register-address-in-atmega-microcontroller/45322743#45322743", "title": "Why use 2 pointers to point to register address in atmega microcontroller?", "body": "<p>You can separate <code>*((volatile unsigned char* const) 0x31)</code> into 2 parts:<br>\none inner part: <code>(volatile unsigned char* const) 0x31</code><br>\nand one outer part: <code>*( inner part )</code>.</p>\n\n<p>The <strong>inner part</strong> casts the integer <code>0x31</code> to a <code>volatile unsigned char</code> pointer which is constant.<br>\nA pointer type consist of the type name and an asterisk after the type name: <code>type*</code>. To cast an expression parenthesis are uses <code>(type)expression</code>.</p>\n\n<p>The <strong>outer part</strong> dereferences the address the pointer contains as the asterisk is in front of it: <code>*pointer</code> in order to access it's value.</p>\n\n<blockquote>\n  <p>If we take the inner part only why it isn't enough to read and write from the address?</p>\n</blockquote>\n\n<p>Imagine a pointer <code>int* intPtr</code> pointing to a valid integer already. If you now want to change that integer you have to do it by <code>*intPtr = 42;</code>. If you would do instead <code>intPtr = 42;</code> you would write 42 to the pointers value and not to the address it points to, so that 42 would be the new address the pointer contains.</p>\n\n<p><strong>In short:</strong><br>\nThe macro reads one byte (<code>unsigned char</code>) from address <code>0x31</code> if it's on the right hand side of an assigment and writes one byte to it if it's on the left hand side.</p>\n\n<p><strong>Usage:</strong><br>\nA typical usage is to do bit manipulation like clearing or setting single bits on that register lying on that specific address:</p>\n\n<pre><code>myDDRD &amp;= ~(1 &lt;&lt; PD0); /* clear bit 0 as PD0 is defined as 0 */\nmyDDRD |= (1 &lt;&lt; PD1);  /* set bit 1 as PD1 is defined as 1   */\n</code></pre>\n\n<p>For more information about bit manipulation, see here: <a href=\"https://stackoverflow.com/a/47990/8051589\">How do you set, clear, and toggle a single bit?</a></p>\n"}], "owner": {"reputation": 69, "user_id": 3992623, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/161051912a0a7f5296c25c76413fff1c?s=128&d=identicon&r=PG&f=1", "display_name": "user247954", "link": "https://stackoverflow.com/users/3992623/user247954"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 45322743, "answer_count": 1, "score": 0, "last_activity_date": 1503990002, "creation_date": 1501060704, "last_edit_date": 1501060846, "question_id": 45322600, "link": "https://stackoverflow.com/questions/45322600/why-use-2-pointers-to-point-to-register-address-in-atmega-microcontroller", "title": "Why use 2 pointers to point to register address in atmega microcontroller?", "body": "<p>This Line defines address for DDRD register in avr microcontroller</p>\n\n<pre><code>#define myDDRD *((volatile unsigned char* const) 0x31)\n</code></pre>\n\n<p>Can you please clarify how pointers is used in the above line?\nWhy do we need the first asterisk? shouldn't the second one be enough to point to the address 0x31?</p>\n"}, {"tags": ["c", "module", "include", "header-files", "redefinition"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1501060574, "post_id": 45322499, "comment_id": 77606881, "body": "You should <b>never</b> <code>#include</code> source files. Write header files (<code>.h</code>) containing <b>only</b> declarations and <i>include-guard macros</i>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501060588, "post_id": 45322499, "comment_id": 77606897, "body": "There&#39;s no one single rule to split a project into multiple files. <i>Except</i> that structures and declarations (like function prototypes) should be in <i>header files</i> and you should never <code>#include</code> source files!"}], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "edited": false, "score": 0, "creation_date": 1501061155, "post_id": 45322557, "comment_id": 77607336, "body": "Thanks for the advice! That&#39;s what I tried to do, but the problem remains on the structures and typedef: they must be placed in the .c file or in the .h? For example, for the vec3.c module, where does the definition of the vec3 structure be placed? Thank you so much!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2742371"}, "reply_to_user": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "edited": false, "score": 0, "creation_date": 1501061413, "post_id": 45322557, "comment_id": 77607511, "body": "@ArcticPi For functions that has to be accessible by other .c files they should be declared in the .h file. Then #include the .h file in the .c file which is going to use your function."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "edited": false, "score": 0, "creation_date": 1501062952, "post_id": 45322557, "comment_id": 77608730, "body": "@Arctic Pi those are declaration, if they are meant to be reusable, place them into header. While typedef means type definition, the syntctic unit that starts with the keyword is called typedef declaration. See my answer"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2742371"}, "is_accepted": false, "score": 3, "last_activity_date": 1501061449, "last_edit_date": 1501061449, "creation_date": 1501060612, "answer_id": 45322557, "question_id": 45322499, "link": "https://stackoverflow.com/questions/45322499/c-properly-partitioning-the-code-into-multiple-files/45322557#45322557", "title": "C - properly partitioning the code into multiple files", "body": "<p>You should never include <code>.c</code> files.</p>\n\n<p>Create for each implementation file (<code>.c</code>), a header file (<code>.h</code>) and declare therein the functions. Then include the header file instead in your corresponding implementation file. Once declared and included you should write the implementation of those declared functions in your implementation file. </p>\n\n<p>Then to use the functions you include the header file.</p>\n\n<p>Example of a header file (example.h):</p>\n\n<pre><code>#ifndef EXAMPLE_H\n#define EXAMPLE_H\n\n/* Function declarations */\nvoid example();\n\n#endif /* EXAMPLE_H */\n</code></pre>\n\n<p>Example of an implementation file (example.c):</p>\n\n<pre><code>#include \"example.h\"\n\nvoid example() {\n    /* TODO: add logic */\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": true, "score": 1, "last_activity_date": 1501080606, "last_edit_date": 1501080606, "creation_date": 1501061936, "answer_id": 45323096, "question_id": 45322499, "link": "https://stackoverflow.com/questions/45322499/c-properly-partitioning-the-code-into-multiple-files/45323096#45323096", "title": "C - properly partitioning the code into multiple files", "body": "<p>The is no language-defined rule about file organization. Actually, all files included into your source file form so-called \"compilation unit\" created by precompiler, and are treated by compiler as single file. Precompiler's directive <code>#include</code> literally does that... includes that other file into the current file being processed. Thus it is essential to  ensure that files are included only once.</p>\n\n<p>A classic way to do so is to use #ifndef directive of preprocessor. Most compilers support directive <code>#pragma once</code> but it is not a standart tool, that sometimes behaves unpredictably in case of circular includes.</p>\n\n<p>It is accepted practice to call files that contain reusable declarations and definitions \"headers\" and give them .h (and .hpp sometimes). C++ standard headers agreed to not have extension at all to avoid mixing them with C headers. E.g. stdio.h  is superceded by cstdio and former shouldn't be used  in C++. Sometimes there is requrement to include large repetetive definitions, that can get different extensions  .inc, .incl , etc.</p>\n\n<p>So why people do say \"never include .c files\". It's related to the toolchain used, the set of utilities that control application's building process. You would almost never run compiler manually. There always is a building tool that usually decides what to do with file , basing that decision on extension. .c files usually considered to represent separate compilation modules, so tool would run compiler for EACH of them, before trying to link them together.</p>\n\n<p>Headers should not define objects such as functions or variables, they can declare them for external linking. Why? If you include header file with defined variable into several compilation units, you'll get an error from linker, because all units will contain same symbol. So, definition should be unique or program is considered ill-formed. Functions always assumed to have external linking by default</p>\n\n<pre><code>/* myheader.h */\n#ifndef ___MYHEADER_H\n#define ___MYHEADER_H\n\nextern int globalVariable;\n\ntypedef struct MyType {\n\n};\n\nint foo(MyType);\n\n#endif\n\n/* myheader.cpp */\n#include \"myheader.h\"\n\nint globalVariable = 5;\n\nint foo(MyType param)\n{\n/* body of foo */\n}\n</code></pre>\n\n<p>How files are organized in project is up to designer. If you're part of team, you're expected to follow recommendations of that team's lead designer or their approved documentation.</p>\n"}], "owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 45323096, "answer_count": 2, "score": 0, "last_activity_date": 1501080606, "creation_date": 1501060465, "question_id": 45322499, "link": "https://stackoverflow.com/questions/45322499/c-properly-partitioning-the-code-into-multiple-files", "title": "C - properly partitioning the code into multiple files", "body": "<p>I'm writing a program in C and I'm separating the parts in different .c files (modules).</p>\n\n<p>Some modules (say B and C) include the same module (say A) and when these modules (B and C) are included by another module (say D), a diamond \"hierarchy\" is formed that causes redefinition problems.</p>\n\n<p>Eg.</p>\n\n<p><strong>vec3.c</strong></p>\n\n<pre><code>#include &lt;math.h&gt;\n\ntypedef struct {\n    float x, y, z;\n} vec3;\n\nfloat dot(vec3 v1, vec3 v2) {\n    return v1.x*v2.x + v1.y*v2.y + v1.z*v2.z;\n}\n\n/* ... other stuff ... */\n</code></pre>\n\n<p><strong>ray.c</strong></p>\n\n<pre><code>#include \"vec3.c\"\n\ntypedef struct {\n    vec3 A, B;\n} ray;\n\nvec3 origin(ray r) {\n    return r.A;\n}\n\n/* ... other stuff ... */\n</code></pre>\n\n<p><strong>sphere.c</strong></p>\n\n<pre><code>#include \"ray.c\"\n\ntypedef struct {\n    float t;\n    vec3 p;\n    vec3 n;\n} record;\n\ntypedef struct {\n    vec3 center;\n    float radius;\n} sphere;\n\ntypedef enum {false, true} bool;\n\nbool hit_sphere(sphere s, ray r, float tmin, float tmax, record *rec) {\n    /* ... do stuff ... */\n}\n\n/* ... other stuff ... */\n</code></pre>\n\n<p><strong>camera.c</strong></p>\n\n<pre><code>#include \"ray.c\"\n\ntypedef struct {\n    vec3 origin;\n    vec3 lower_left_corner;\n    vec3 horizontal;\n    vec3 vertical;\n} camera;\n\n/* ... other stuff ... */\n\nvec3 origin = {0.0, 0.0, 0.0};\nvec3 lower_left_corner = {-2.0, -1.0, -1.0};\nvec3 horizontal = {4.0, 0.0, 0.0};\nvec3 vertical = {0.0, 2.0, 0.0};\n\ncamera cam = {origin, lower_left_corner, horizontal, vertical};\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\n#include \"sphere.c\"\n#include \"camera.c\"\n\n/* ... other stuff ... */\n\nint main() {\n    /* ... do stuff ... */\n}\n</code></pre>\n\n<p>In this case the problem arises because both camera.c and sphere.c include ray.c (and hence also vec3.c), so there is a double definition of the structures and functions defined in these modules.</p>\n\n<p>How can I rearrange the code to not have these problems?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501059595, "post_id": 45322050, "comment_id": 77606113, "body": "&quot;<i>Should I do the casting forcefully</i>&quot; - probably not &quot;<i>or perhaps there&#39;s c++ alternative for signal</i>&quot;  -- no. Don&#39;t use <code>signal()</code> at all, use <code>sigaction()</code> (but that doesn&#39;t solve your problem, you should probably just add some C glue code. Having a member function as a signal handler doesn&#39;t make too much sense if you think about the fact a signal is delivered <i>to your process</i>)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501059609, "post_id": 45322050, "comment_id": 77606122, "body": "Force fully casting might not yield correct results. The ABI for C and C++ could be different."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501059711, "post_id": 45322050, "comment_id": 77606179, "body": "Also, there&#39;s not much you can do safely in a signal handler anyways. The best thing to do is to just modify some <code>volatile sig_atomic_t</code> flag. (potentially after storing some other info like the signal number) Any actual processing should be done outside the signal handler."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1501059761, "post_id": 45322050, "comment_id": 77606214, "body": "@felixpalmen, Hi and thanks for your reply. I need the function as member of a class since this class contain other data that affect the handler behavior..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501059849, "post_id": 45322050, "comment_id": 77606297, "body": "@Zohar81 your handler shouldn&#39;t have much behavior. Read <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">signal safety</a> for a list of functions you <b>can</b> call in a signal handler. Everything else would be dangerous."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1501060054, "post_id": 45322050, "comment_id": 77606467, "body": "@felixPalmen after I simplified my code, all I need from the signal handler is to wait until the signal <code>SIGUSR1</code> arrives (just like pthread_cond_t but also for other processes). do you suggest other way to do so ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501060240, "post_id": 45322050, "comment_id": 77606617, "body": "@Zohar81 see my comment above: have the signal handler raise a <code>volatile sig_atomic_t</code> flag and periodically check this from your main code. If you need to <i>wait</i> for a signal, you can use a &quot;<i>self-pipe</i>&quot; instead and block on it with <code>poll()</code>, <code>select()</code> or similar."}], "answers": [{"comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1501060011, "post_id": 45322217, "comment_id": 77606431, "body": "&quot;There is no portable way to convert a C++ function to a C function because they can have different ABIs.&quot;, partially correct statement but for the wrong reason. The reason that one generally cannot convert C++ to C functions is that C++ functions can have a context. If a context doesn&#39;t exist, then casting C++ functions to C function pointers is fine. For example, a lambda can be cast to a C function as long as it doesn&#39;t have a capture list."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1501060129, "post_id": 45322217, "comment_id": 77606518, "body": "@TheQuantumPhysicist are you sure the context is the only reason? The C and C++ ABI could have different alignment requirements (for the stack pointer or the code), or the calling convention could be different."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1501060239, "post_id": 45322217, "comment_id": 77606616, "body": "Yes, I&#39;m sure. You can try to cast a lambda to a C function pointer and see that it works. That&#39;s a <a href=\"https://en.wikipedia.org/wiki/Counterexample\" rel=\"nofollow noreferrer\">counterexample</a>, right? ABI has nothing to do with it as long as you&#39;re compiling everything in one program. ABI comes to question when dealing with plugins, for example. That&#39;s another story."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 2, "creation_date": 1501060492, "post_id": 45322217, "comment_id": 77606817, "body": "@TheQuantumPhysicist I am afraid that is not a counter example. It is like saying since <code>x - 5 == 0</code> is true for <code>x = 5</code> implies that it is true for all x. I am not saying it <b>won&#39;t</b> work (casting lambda to C function). Ofcourse it works on my machine, on your machine, on OPs machine. Doesn&#39;t mean it will work every where."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1501060608, "post_id": 45322217, "comment_id": 77606919, "body": "@TheQuantumPhysicist also, no! ABI doesn&#39;t come to question only when plugins are used. A single compiler with a single translation unit can use different ABIs depending on what code it is dealing with. (That is essentially the reason behind the <code>extern &quot;C&quot;</code> )."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1501060883, "post_id": 45322217, "comment_id": 77607131, "body": "Your statement is: &quot;C++ functions can never be converted to C functions&quot;. A single example suffices to disprove this statement, which I provided. Also the reason behind <code>extern &quot;C&quot;</code> is to create C linkage and disable name mangling. Sure, that has something to do with ABI. However, talking about C++ ABI has nothing whatsoever to do with the OP&#39;s question. Again, that&#39;s a whole other story. There&#39;s ABSOLUTELY no benefit in mentioning ABI here. The context is all that matters. I&#39;m sorry but I can&#39;t ping-pong with you any longer. Please shutdown the discussion as it&#39;s branching. Have a nice day!"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1501060983, "post_id": 45322217, "comment_id": 77607203, "body": "Have a nice day :)"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1501063920, "post_id": 45322217, "comment_id": 77609484, "body": "@ajaybrahmakshatriya, the only problem with your proposal is that I need to set cpphandler from within one of the class methods, so your probably meant it would be a class member (because if it&#39;s a global variable, we&#39;re missing the all point of making the code looks neat)  ... but how can I call non static member from within a the c function ?? thanks"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501064072, "post_id": 45322217, "comment_id": 77609614, "body": "How are you going to get the object whose function must be called? Is it a global?"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1501064272, "post_id": 45322217, "comment_id": 77609766, "body": "I wanted to call the handler from within one of the methods in my class. so I have the object pointer as <code>this</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501064577, "post_id": 45322217, "comment_id": 77609979, "body": "<code>cpphandler = std::bind(&amp;myclass::my_handler, this, std::placeholders::_1);</code> call this line in my answer with the appropriate context (where this is visible). This will create a binding with proper value of <code>this</code>. And the member of that object will be called. you might want to make cpphandler global and set its value from one of the functions of the object, so that <code>this</code> will be properly set."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1501064783, "post_id": 45322217, "comment_id": 77610135, "body": "does <code>cpphandler</code> is called from within the class method ? does <code>cpphandler</code> is class member or just local variable defined in stack ? maybe you can modify your code to exemplify your point ? It&#39;d be very appreciated. Thanks"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "edited": false, "score": 0, "creation_date": 1501065122, "post_id": 45322217, "comment_id": 77610367, "body": "@Zohar81 check the latest edit. Also with this method you can have just a single handler. If you need to have more handlers you will have to create more wrapper functions. But you cant create wrappers on the fly."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1501065055, "last_edit_date": 1501065055, "creation_date": 1501059789, "answer_id": 45322217, "question_id": 45322050, "link": "https://stackoverflow.com/questions/45322050/using-c-function-pointer-as-signal-handler/45322217#45322217", "title": "Using c++ function pointer as signal handler.", "body": "<p>There is no portable way to convert a C++ function to a C function because they can have different ABIs.</p>\n\n<p>What you can do is this declare a global variable cpphandler as -</p>\n\n<pre><code>std::function&lt;void(int)&gt; cpphandler = NULL;\n</code></pre>\n\n<p>Also declare a function as - </p>\n\n<pre><code>extern \"C\" {\n    void signal_handler(int i);\n}\nvoid signal_handler(int i){\n    cpphandler(i);\n    return;\n}\n</code></pre>\n\n<p>Now in the function where you want to create the binding do -</p>\n\n<pre><code>cpphandler = std::bind(&amp;myclass::my_handler, this, std::placeholders::_1); \nsignal(x, signal_handler); //replace x with whatever signal you want to install \n</code></pre>\n\n<p>This makes sure that the function <code>signal_handler</code> is created with C ABI. And calls the C++ function code with C++ ABI.</p>\n\n<p>Now you can use the <code>signal</code> function with <code>signal_handler</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 4377807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e019179a87899afa9e583b2a14b31477?s=128&d=identicon&r=PG&f=1", "display_name": "Maged Elghareib", "link": "https://stackoverflow.com/users/4377807/maged-elghareib"}, "is_accepted": false, "score": 0, "last_activity_date": 1501152688, "creation_date": 1501152688, "answer_id": 45348682, "question_id": 45322050, "link": "https://stackoverflow.com/questions/45322050/using-c-function-pointer-as-signal-handler/45348682#45348682", "title": "Using c++ function pointer as signal handler.", "body": "<p>As you are using a C++ compiler, I suggest that you simply define a normal function that calls your member function handler:</p>\n\n<pre><code>void signal_handler_wrapper(int x)\n{\n   myclass::my_handler(x);\n}\n</code></pre>\n\n<p>Then in your main code:</p>\n\n<pre><code>signal(SIGINT, signal_handler_wrapper);\n</code></pre>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1099, "favorite_count": 0, "accepted_answer_id": 45322217, "answer_count": 2, "score": 3, "last_activity_date": 1535457280, "creation_date": 1501059297, "question_id": 45322050, "link": "https://stackoverflow.com/questions/45322050/using-c-function-pointer-as-signal-handler", "title": "Using c++ function pointer as signal handler.", "body": "<p>I'd like to add new handler to signal SIGUSR1 in my code. here's <code>signal</code> signature form header file <code>signal.h</code> : </p>\n\n<p><code>void   (*signal(int, void (*)(int)))(int);</code></p>\n\n<p>My handler is a member function, so I'm using <code>std::bind</code> to make the function fit in <code>signal</code> accepted input. </p>\n\n<pre><code>myclass::my_handler(int x);\n</code></pre>\n\n<p>Here's my conversion of the member function to <code>signal</code> accepted input: </p>\n\n<pre><code>std::bind(&amp;myclass::my_handler, this, std::placeholders::_1); \n</code></pre>\n\n<p>However, <code>std::bind</code> return the c++ representation of function pointer (a.k.a <code>std::function&lt;void(int)&gt;</code>) and I need the C representation which is <code>(void)(*)(int)</code>.</p>\n\n<p>Should I do the casting forcefully, or perhaps there's c++ alternative for <code>signal</code> ? </p>\n\n<p>Thanks </p>\n"}, {"tags": ["c", "arrays", "string", "char", "segmentation-fault"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1501058329, "post_id": 45321628, "comment_id": 77605160, "body": "<code>str = (char*)malloc(20);       34         str = &quot;this is a test&quot;;</code>...LEAKKKKKKK"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1501058429, "post_id": 45321628, "comment_id": 77605241, "body": "<code>str = &quot;this is a test&quot;;</code> --&gt; <code>strcpy(str, &quot;this is a test&quot;);</code>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1501058483, "post_id": 45321628, "comment_id": 77605281, "body": "Your compiler isn&#39;t warning you about the dangerous assignment of a string-literal pointer (i.e. <code>char const *</code>) to a modifiable string pointer (<code>char *</code>).  You need to turn your warning levels up (or use a compiler that will warn you)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1501058599, "post_id": 45321628, "comment_id": 77605371, "body": "BTW, <a href=\"/q/605845\">don&#39;t cast the return value from <code>malloc()</code></a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1501058611, "post_id": 45321628, "comment_id": 77605384, "body": "Next time don&#39;t put line numbers into your code, post the code as is."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501058648, "post_id": 45321628, "comment_id": 77605412, "body": "<code>return NULL;</code> --&gt; <code>return str;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 6, "last_activity_date": 1501058439, "creation_date": 1501058439, "answer_id": 45321685, "question_id": 45321628, "link": "https://stackoverflow.com/questions/45321628/char-str-and-mallocing-the-memory-for-str-still-getting-segfault/45321685#45321685", "title": "char *str and malloc&#39;ing the memory for str, still getting SEGFAULT", "body": "<p>When you do</p>\n\n<pre><code>str = (char*)malloc(20);\nstr = \"this is a test\";\n</code></pre>\n\n<p>you <em>reassign</em> the pointer <code>str</code> to point somewhere else right after the allocation.</p>\n\n<p>In fact you make it point to a string literal, which is an array of <em>read-only</em> characters. Attempting to modify a string literal leads to <em>undefined behavior</em>.</p>\n\n<p>The simple solution is to use arrays instead. Or to <em>copy</em> into the memory you allocate using <a href=\"http://en.cppreference.com/w/c/string/byte/strcpy\" rel=\"noreferrer\"><code>strcpy</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1501059629, "last_edit_date": 1501059629, "creation_date": 1501058477, "answer_id": 45321698, "question_id": 45321628, "link": "https://stackoverflow.com/questions/45321628/char-str-and-mallocing-the-memory-for-str-still-getting-segfault/45321698#45321698", "title": "char *str and malloc&#39;ing the memory for str, still getting SEGFAULT", "body": "<p>Well, there are differences between a pointer (pointing to a string literal) and an array, they are not the same. <a href=\"http://c-faq.com/aryptr/\" rel=\"nofollow noreferrer\">Check the C-FAQ for arrays and pointers</a> for more insight on this. </p>\n\n<p>First of all,</p>\n\n<pre><code>  str = (char*)malloc(20); \n  str = \"this is a test\";\n</code></pre>\n\n<p>causes memory leak, as you're overwriting the pointer returned by <code>malloc()</code>. This case, <code>malloc()</code> can be simply removed, as you're not storing anything to the memory location pointer to by the <code>str</code>, rather you are storing the base address of the unnamed <code>const char</code> array in the pointer variable.</p>\n\n<p>Later, when you try to pass the pointer to the string literal and try to alter the content, you invoke  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>, as string literals are read-only and attempt to alter them causes the UB.</p>\n\n<p>On the other hand, you don't see the problem while using a <code>char</code> array, because, the array content is modifiable.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1501058911, "post_id": 45321874, "comment_id": 77605592, "body": "&quot;<i>the constant string address is local to that function</i>&quot; &lt;- what? oO"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1501059318, "post_id": 45321874, "comment_id": 77605885, "body": "Now it&#39;s a code-only answer without any explanation and using <code>memcpy()</code> here is a) needlessly complicated (that&#39;s what <code>strcpy()</code> is for) and b) wrong like shown (doesn&#39;t copy the <code>0</code> terminator). Appreciate your willingness to give answers, but this is unfortunately a bad one."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501059523, "post_id": 45321874, "comment_id": 77606038, "body": "Also the the last argument should be <code>MIN(20, strlen(&quot;this is a test&quot;))</code> (even after ignoring the copy of <code>\\0</code>)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501066753, "post_id": 45321874, "comment_id": 77611477, "body": "How does this get upvoted? The code shown <b>is wrong</b>. The result of this is not a string and OP&#39;s code will treat it as one."}], "tags": [], "owner": {"reputation": 60, "user_id": 6752106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f65b95d44f33c5a6f2fc5fdfa29a550?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Salauddin", "link": "https://stackoverflow.com/users/6752106/mohammed-salauddin"}, "is_accepted": false, "score": 1, "last_activity_date": 1501073809, "last_edit_date": 1501073809, "creation_date": 1501058870, "answer_id": 45321874, "question_id": 45321628, "link": "https://stackoverflow.com/questions/45321628/char-str-and-mallocing-the-memory-for-str-still-getting-segfault/45321874#45321874", "title": "char *str and malloc&#39;ing the memory for str, still getting SEGFAULT", "body": "<pre><code> str = (char*)malloc(20);\n if(NULL != str)\n memcpy(str,\"this is a test\",(strlen(\"this is a test\") + 1));\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 2713461, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e55cd2deed656b53632d32d9161c6c75?s=128&d=identicon&r=PG&f=1", "display_name": "user2713461", "link": "https://stackoverflow.com/users/2713461/user2713461"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 45321685, "answer_count": 3, "score": -3, "last_activity_date": 1501073809, "creation_date": 1501058304, "last_edit_date": 1501061801, "question_id": 45321628, "link": "https://stackoverflow.com/questions/45321628/char-str-and-mallocing-the-memory-for-str-still-getting-segfault", "title": "char *str and malloc&#39;ing the memory for str, still getting SEGFAULT", "body": "<p>I have written a small C program to reverse a string.\nIn this even though, I declare the <code>str</code> as<br>\nchar *str<br>\nand then<br>\n<code>str = (char*)malloc(20);\nstr = \"this is a test\";</code><br>\nHowever, I wont get SEGFAULT if I use<br>\n<code>char str[20] = \"this is a test\"</code></p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \n#include &lt;string.h&gt; \n\nvoid swap(char *a, char *b)\n{ \n  char temp; \n  temp = *a;\n  *a = *b; \n  *b = temp; \n} \n\nchar* reverse(char *str)\n{ \n  int len = strlen(str); \n  printf(\"len = %d \\t %s\\n\", len, str); \n  int i = 0; \n\n  if (len == 0) \n    return NULL; \n  for (i=0; i&lt;len/2; i++) \n  { \n    swap((str+i), (str+len-1-i));    \n    printf(\"%s\\n\", str); \n  } \n  return str; \n} \n\nint main(void)\n{ \n  char *str; \n  str = (char *)malloc(20); \n  str = \"this is a test\"; \n\n  printf(\"%s\\n\", str); \n  reverse(str); \n  printf(\"%s\\n\", str); \n  return 0; \n} \n</code></pre>\n\n<p>My understanding was I will get SEGFAULT, if I declare,<br>\n<code>char *str=\"This is a test\"</code>  becuase it will be a constant string.<br>\nSo, I thought, when, I malloc, <code>str</code> will be allocated from the heap and heap memory will accessible to both the functions. But,\nstill get the SEGFAULT error.</p>\n"}, {"tags": ["c", "gtk3"], "comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1501514870, "post_id": 45321527, "comment_id": 77800569, "body": "Use a GtkComboBox with a ListStore model, and then manipulate the order using <code>gtk_list_store_reorder()</code>; however, you must then maintain the sort order yourself (that is, add the entries to the list store in sorted order), and not use the GtkTreeSortable interface."}], "owner": {"reputation": 700, "user_id": 6532156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2554d837bb158637bd537e8d315836ea?s=128&d=identicon&r=PG", "display_name": "Eduard Itrich", "link": "https://stackoverflow.com/users/6532156/eduard-itrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1501485562, "creation_date": 1501058007, "last_edit_date": 1501072864, "question_id": 45321527, "link": "https://stackoverflow.com/questions/45321527/wrap-gtkcombobox-column-wise-instead-of-row-wise", "title": "Wrap GtkComboBox column-wise instead of row-wise", "body": "<p>I'm having trouble to wrap a GTKComboBox with a large number of alphabetically sorted entries column-wise instead of row-wise.</p>\n\n<p>Please have a look at the following minimal working example and the attached screenshot to get an idea of what I'm trying to achieve. The focal point of my code is the function <code>gtk_combo_box_set_wrap_width</code> which wraps the GtkComboBox as table (see <a href=\"https://developer.gnome.org/gtk3/3.22/GtkComboBox.html#gtk-combo-box-set-wrap-width\" rel=\"nofollow noreferrer\">GTK3 API reference</a>).</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\nint main(int argc, char *argv[]) \n{\n    GtkWidget *window;\n    GtkWidget *combobox;\n\n    gtk_init(&amp;argc,&amp;argv);\n\n    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n    gtk_container_set_border_width(GTK_CONTAINER(window), 10 );\n    gtk_window_set_default_size(GTK_WINDOW(window), 100, 50);\n\n    combobox = gtk_combo_box_text_new();\n    gtk_combo_box_text_append(GTK_COMBO_BOX_TEXT(combobox), NULL, \"A\" );\n    gtk_combo_box_text_append(GTK_COMBO_BOX_TEXT(combobox), NULL, \"B\" );\n    gtk_combo_box_text_append(GTK_COMBO_BOX_TEXT(combobox), NULL, \"C\" );\n    gtk_combo_box_text_append(GTK_COMBO_BOX_TEXT(combobox), NULL, \"D\" );\n\n    gtk_combo_box_set_wrap_width (GTK_COMBO_BOX(combobox), 2);\n\n    gtk_container_add(GTK_CONTAINER(window), combobox);\n\n    gtk_widget_show_all(window);\n    gtk_main();\n\n    return(0);\n}\n</code></pre>\n\n<p>This gives me the following output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TCDEJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TCDEJ.png\" alt=\"Row-wise wrap\"></a></p>\n\n<p>As you can see, the entries get wrapped row-wise, i.e. are read from left to right.</p>\n\n<p>Is there a convenient way to wrap the elements column-wise <strong>without re-sorting them accordingly</strong>?</p>\n\n<p><a href=\"https://i.stack.imgur.com/1OTSS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1OTSS.png\" alt=\"Column-wise wrap\"></a> </p>\n"}, {"tags": ["c", "windows", "port"], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501059984, "post_id": 45321502, "comment_id": 77606411, "body": "Nearly:)   Note that the port open may fail because another process has already opened it, (in which case, move on to try the next port, step 5)."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501060240, "post_id": 45321502, "comment_id": 77606618, "body": "Another variant is to create a separate handler thread for every port.  The one that finds the device with a successful open and poll, wins, the others terminate themselves.  If the serial port handling is already threaded off, (as it often is), then this may be easier and would surely be quicker:)"}, {"owner": {"reputation": 4268, "user_id": 5897829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7105808cb099e98f04fe464af68c6?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Verjans", "link": "https://stackoverflow.com/users/5897829/martin-verjans"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501060412, "post_id": 45321502, "comment_id": 77606744, "body": "@MartinJames updated my answer. Multi-threading is indeed a nice idea."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1501060515, "post_id": 45321502, "comment_id": 77606838, "body": "I upvoted you anyway, since you had the correct plan, essentially:)"}], "tags": [], "owner": {"reputation": 4268, "user_id": 5897829, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2c7105808cb099e98f04fe464af68c6?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Verjans", "link": "https://stackoverflow.com/users/5897829/martin-verjans"}, "is_accepted": true, "score": 1, "last_activity_date": 1501060248, "last_edit_date": 1501060248, "creation_date": 1501057954, "answer_id": 45321502, "question_id": 45321374, "link": "https://stackoverflow.com/questions/45321374/c-get-com-port-number-of-specific-device/45321502#45321502", "title": "C - get COM port number of specific device", "body": "<p>Each physical port on your machine has a number that doesn't change. So if you connect your device on the same port every time you shouldn't need this.</p>\n\n<p>But if you might change the port everytime, a solution that might work is :</p>\n\n<ol>\n<li><p>Try to open COM 1</p>\n\n<ul>\n<li>If you have an error, port is already open by somebody else, go to Step 3</li>\n<li>If port does open, move on to Step 2</li>\n</ul></li>\n<li><p>Try to send a message that will be recognized by your device</p>\n\n<ul>\n<li>If your receive the expected answer, you know it's the right port.</li>\n<li>If you don't receive anything (or something nonsense), you know it's not the right COM Port. </li>\n</ul></li>\n<li>Move to next available COM Port and repeat until you find it, or that you enumerated all COM Ports</li>\n</ol>\n"}], "owner": {"reputation": 308, "user_id": 6589237, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/208b7aef2775e7bc7f6e7cc9d4b3bc41?s=128&d=identicon&r=PG&f=1", "display_name": "muliku", "link": "https://stackoverflow.com/users/6589237/muliku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 45321502, "answer_count": 1, "score": 1, "last_activity_date": 1501061964, "creation_date": 1501057627, "last_edit_date": 1501061964, "question_id": 45321374, "link": "https://stackoverflow.com/questions/45321374/c-get-com-port-number-of-specific-device", "title": "C - get COM port number of specific device", "body": "<p>is there a way to automatically detect to which COM port was my device connected on Windows? It is one specific device so I know its name or whatever I need for this.</p>\n\n<p>Right now I have a C program, where I must input COM port number in the console e.g.:</p>\n\n<pre><code>printf(\"COM port number?\\n\");\nscanf(\"%d\",&amp;port_no); \ndo_stuff_with_COM_port(port_no);\n</code></pre>\n\n<p>It is annoying to check everytime in windows device manager which number my device is connected to and I want my program to automatically detect port number. How can I achieve this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "kinect", "gesture"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1501058980, "post_id": 45321342, "comment_id": 77605650, "body": "Why didn&#39;t you just <code>apt-get install libfftw3-dev</code>?"}, {"owner": {"reputation": 33, "user_id": 8368476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de18e207cf22e977918a39f41bf8e04b?s=128&d=identicon&r=PG&f=1", "display_name": "solmn", "link": "https://stackoverflow.com/users/8368476/solmn"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1501064569, "post_id": 45321342, "comment_id": 77609974, "body": "I did but nothing has changed i still got the same error"}], "answers": [{"tags": [], "owner": {"reputation": 616, "user_id": 6468292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08e71abd5c73f2a228aa78ed00c364da?s=128&d=identicon&r=PG&f=1", "display_name": "Solomon", "link": "https://stackoverflow.com/users/6468292/solomon"}, "is_accepted": true, "score": 3, "last_activity_date": 1506700440, "last_edit_date": 1506700440, "creation_date": 1501073023, "answer_id": 45327358, "question_id": 45321342, "link": "https://stackoverflow.com/questions/45321342/how-to-build-fftw-in-ubuntu/45327358#45327358", "title": "How to build FFTW in Ubuntu?", "body": "<p>do this</p>\n\n<p><code>./configure --enable-shared<br>\n  sudo make CFLAGS=-fPIC<br>\n  sudo make install</code></p>\n\n<p>This will solve your problem.</p>\n"}], "owner": {"reputation": 33, "user_id": 8368476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de18e207cf22e977918a39f41bf8e04b?s=128&d=identicon&r=PG&f=1", "display_name": "solmn", "link": "https://stackoverflow.com/users/8368476/solmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 2, "accepted_answer_id": 45327358, "answer_count": 1, "score": 2, "last_activity_date": 1514386850, "creation_date": 1501057521, "last_edit_date": 1514386850, "question_id": 45321342, "link": "https://stackoverflow.com/questions/45321342/how-to-build-fftw-in-ubuntu", "title": "How to build FFTW in Ubuntu?", "body": "<p>I have been working on Gesture recognition project. I use XKin gesture recogntion  library <a href=\"https://github.com/fpeder/XKin\" rel=\"nofollow noreferrer\">https://github.com/fpeder/XKin</a>. To compile Xkin i had to install fftw (<a href=\"http://www.fftw.org/download.html\" rel=\"nofollow noreferrer\">http://www.fftw.org/download.html</a>) I build fftw successfully with</p>\n\n<pre><code>./configure  \nmake  \nmake install\n</code></pre>\n\n<p>But when i build Xkin i got this Error</p>\n\n<p><code>/usr/bin/ld: /usr/local/lib/libfftw3.a(lt4-problem.o): relocation R_X86_64_32 against</code>.rodata.str1.1' can not be used when making a shared object; recompile with -fPIC  </p>\n\n<p>/usr/local/lib/libfftw3.a: error adding symbols: Bad value\ncollect2: error: ld returned 1 exit status<br>\nmake[2]: <strong>* [lib/posture/libposture.so] Error 1<br>\nmake[1]: *</strong> [lib/posture/CMakeFiles/posture.dir/all] Error 2<br>\nmake: *** [all] Error 2`</p>\n"}, {"tags": ["c", "hex", "memory-mapping"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1501057014, "post_id": 45321129, "comment_id": 77604263, "body": "Have you done a <code>diff</code> to see how they differ?"}, {"owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1501057410, "post_id": 45321129, "comment_id": 77604516, "body": "I used Winmerge and it shows that the map files have differences. Under the  <code>*(.debug_info .gnu.linkonce.wi.*)</code> section ALL object files are listed and they show that they have different addresses."}, {"owner": {"reputation": 205, "user_id": 14247222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6Ghi.png?s=128&g=1", "display_name": "Lale", "link": "https://stackoverflow.com/users/14247222/lale"}, "edited": false, "score": 0, "creation_date": 1615554770, "post_id": 45321129, "comment_id": 117733508, "body": "have you resolved this problem?"}], "owner": {"reputation": 409, "user_id": 4657413, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/6u2Hm.jpg?s=128&g=1", "display_name": "newb7777", "link": "https://stackoverflow.com/users/4657413/newb7777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501059768, "creation_date": 1501056910, "last_edit_date": 1501059768, "question_id": 45321129, "link": "https://stackoverflow.com/questions/45321129/why-does-same-source-code-generates-different-map-memory-addresses-and-elf-fil", "title": "Why does Same Source Code generates different Map (Memory addresses) and elf file?", "body": "<p>I have 2 exact same source codes which are under 2 different project names. </p>\n\n<p>They generate the same output hex file, but the map file and elf files are different. Can anyone explain?</p>\n"}, {"tags": ["c", "makefile", "compiler-errors", "openmpi"], "comments": [{"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1501059092, "post_id": 45321074, "comment_id": 77605729, "body": "Please edit the post and add the command which triggered the linker error message."}, {"owner": {"reputation": 27, "user_id": 8368386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393a44240a7a17ceaaf1e2154ed6e2f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnson T", "link": "https://stackoverflow.com/users/8368386/johnson-t"}, "reply_to_user": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1501060396, "post_id": 45321074, "comment_id": 77606735, "body": "Hi Florian, i have added the scripts (compile.sh) to compile the program"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1501060451, "post_id": 45321074, "comment_id": 77606778, "body": "I meant the <code>gcc</code> invocation (or whatever compiler or linker is used) that leads to the error message."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1501061660, "post_id": 45321074, "comment_id": 77607714, "body": "<code>-lm -lmpi</code> looks wrong, try <code>-lmpi -lm</code>."}, {"owner": {"reputation": 27, "user_id": 8368386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393a44240a7a17ceaaf1e2154ed6e2f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnson T", "link": "https://stackoverflow.com/users/8368386/johnson-t"}, "edited": false, "score": 0, "creation_date": 1501062532, "post_id": 45321074, "comment_id": 77608402, "body": "where do i get the gcc invocation u mean, please?"}, {"owner": {"reputation": 27, "user_id": 8368386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393a44240a7a17ceaaf1e2154ed6e2f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnson T", "link": "https://stackoverflow.com/users/8368386/johnson-t"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1501062701, "post_id": 45321074, "comment_id": 77608539, "body": "@n.m. i have tried that, didnt work - same error"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 0, "creation_date": 1501073467, "post_id": 45321074, "comment_id": 77616614, "body": "The gcc invocation should be the line before the error you already quoted (the line starting with <code>&#47;usr&#47;bin&#47;ld: outseis.o:</code>). Note that it could be wrapped.  We need the whole thing."}, {"owner": {"reputation": 27, "user_id": 8368386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393a44240a7a17ceaaf1e2154ed6e2f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnson T", "link": "https://stackoverflow.com/users/8368386/johnson-t"}, "edited": false, "score": 0, "creation_date": 1501084324, "post_id": 45321074, "comment_id": 77625539, "body": "Hi Florian, i have added the line before the error - a very long line. Thanks"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1501099892, "post_id": 45321074, "comment_id": 77635041, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45135/why-does-the-order-in-which-libraries-are-linked-sometimes-cause-errors-in-gcc\">Why does the order in which libraries are linked sometimes cause errors in GCC?</a>"}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1527468320, "post_id": 45321074, "comment_id": 88126444, "body": "you should not need <code>-lmpi</code> (e.g. <code>mpicc</code> does it for you), but you should append <code>-lm</code> at the very end of your command (e.g. <b>after</b> all the <code>*.o</code> files)"}], "owner": {"reputation": 27, "user_id": 8368386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f393a44240a7a17ceaaf1e2154ed6e2f?s=128&d=identicon&r=PG&f=1", "display_name": "Johnson T", "link": "https://stackoverflow.com/users/8368386/johnson-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527429649, "creation_date": 1501056767, "last_edit_date": 1527429649, "question_id": 45321074, "link": "https://stackoverflow.com/questions/45321074/error-compiling-program-with-makefile-on-linux-with-openmpi-undefined-reference", "title": "Error compiling program with makefile on Linux with openmpi: undefined reference to symbol &#39;trunc@@GLIBC_2.2.5&#39;", "body": "<p>I am trying to compile a program on Linux+openmpi using a makefile but got this error: I have looked at answers to similar issues but can still fix it.</p>\n\n<pre><code> mpicc  -lmpi -lm -ldl hh_visco.o hh_elastic.o abs_update.o absorb.o av_mue.o av_rho.o av_tau.o catseis.o check_fs.o checkfd.o comm_ini.o cpml_update.o exchange_par.o exchange_s_rsg.o exchange_s.o exchange_v.o sofi2D.o holbergcoeff.o info.o initproc.o json_parser.o matcopy.o matcopy_elastic.o merge.o mergemod.o note.o outseis.o outseis_glob.o operators_s.o operators_v.o PML_pro.o prepare_update_s.o psource.o rd_sour.o read_checkpoint.o read_par_json.o readdsk.o readmod_visco.o readmod_elastic.o receiver.o save_checkpoint.o saveseis.o saveseis_glob.o seismo_ssg.o snap_ssg.o sources.o splitrec.o splitsrc.o subgrid_bounds.o surface.o surface_elastic.o update_s_elastic_abs.o update_s_elastic_interior.o update_s_elastic_PML.o update_s_visc_abs.o update_s_visc_interior.o update_s_visc_PML.o update_v_abs.o update_v_interior.o update_v_PML.o util.o wavefield_update_s_el.o wavefield_update_s_visc.o wavefield_update_v.o wavelet.o write_par.o writedsk.o writemod.o zero_elastic.o zero_visc.o zero_PML_elastic.o zero_PML_visc.o -o ../bin/sofi2D\n    /usr/bin/ld: outseis.o: undefined reference to symbol 'trunc@@GLIBC_2.2.5'\n    /usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/libm.so: error adding symbols: DSO missing from command line\n    collect2: error: ld returned 1 exit status\nmake: *** [sofi2D] Error 1\n</code></pre>\n\n<p>The makefile is below: I suspect it has to do with a missing library, but can seems to find how to do that. </p>\n\n<p>the script to run the compilation is</p>\n\n<pre><code>#---- general compilation\n\ncd ../src\n#make all\nmake clean\nmake sofi2D\ncd ../par\n</code></pre>\n\n<p>and makefile below (not entire)</p>\n\n<pre><code># Makefile for SOFI2D\n\n#--------------------------------------------------------\n# edit here:\n\n# source code for model generation\n# model file for viscoelastic modeling L&gt;0\nMODEL_V = hh_visco.c\n# model file for elastic modeling L=0\nMODEL_E = hh_elastic.c\n# model file for viscoelastic modeling (overnight built)\nMODEL_BV = benchmod.c\n# model file for elastic modeling L=0 (overnight built)\nMODEL_BE = benchmod_el.c\nEXEC= ../bin\n\nEXEC= ../bin\n\n\n# Compiler (LAM: CC=hcc, CRAY T3E: CC=cc)\n\n# ON Linux cluster running LAM\n#CC=hcc\n#LFLAGS=-lm -lmpi \n#CFLAGS=-Wall -O4\n\n# ON Linux cluster running OpenMPI and ON MAC\nCC=mpicc\nLFLAGS=-lm -lmpi \nCFLAGS=-Wall -O3 \n\n# On CRAY T3E\n# CC=cc\n\n# On SCHARnet system\n#CC=mpicc\n#LFLAGS=-lm  \n\n# On HLRN system\n#CC=mpcc\n#LFLAGS=-lm  \n\n# ALTIX\n#CC=icc\n#CFLAGS=-mp -O3 -ip0\n#LFLAGS=-lmpi -lm \n\n# after this line, no further editing should be necessary\n# --------------------------------------------------------\n\n.c.o:\n    $(CC) $(CFLAGS) -c $&lt;\n</code></pre>\n"}, {"tags": ["c", "jenkins", "build", "build-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 625, "user_id": 5966422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eTGvj.png?s=128&g=1", "display_name": "Suresh", "link": "https://stackoverflow.com/users/5966422/suresh"}, "is_accepted": false, "score": 0, "last_activity_date": 1501059419, "creation_date": 1501059419, "answer_id": 45322097, "question_id": 45320915, "link": "https://stackoverflow.com/questions/45320915/jenkins-for-c-projects-and-artefacts/45322097#45322097", "title": "Jenkins for C# Projects and Artefacts", "body": "<p>Please go through this Stackoverflow thread <a href=\"https://stackoverflow.com/questions/44255898/setting-up-continuous-integration-and-continuous-deployment-for-microsoft-applic/44265805#44265805\">setting-up-continuous-integration-and-continuous-deployment-for-microsoft-applications</a>.</p>\n\n<p>They also have the Java stack established with Jenkins and Nexus and wants to reuse the same tools to setup the CI/CD process for their Microsoft.Net applications.</p>\n"}], "owner": {"reputation": 97, "user_id": 3013676, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/60f8a4ab1292ce94db55759e19a1e58e?s=128&d=identicon&r=PG&f=1", "display_name": "Lord_Pinhead", "link": "https://stackoverflow.com/users/3013676/lord-pinhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501059419, "creation_date": 1501056251, "question_id": 45320915, "link": "https://stackoverflow.com/questions/45320915/jenkins-for-c-projects-and-artefacts", "title": "Jenkins for C# Projects and Artefacts", "body": "<p>after my last question about artefacts in an C# project, i\u00b4am using Nuget for my DLL\u00b4s, but with no \"Snapshot\" like system i use in Maven.</p>\n\n<p>Are there any projects or tutorials about building an Build Pipeline with Jenkins as the Buildsystem and deploying Artefacts to an Artefact Server? </p>\n\n<p>In our Java projects, i use Jenkins and Sonatype Nexus. Now i think i need Jenkins with msbuild and some kind of nuget server (atm it is just an file storage). Maybe, someone has done it already. I dont want to host an extra Team Foundation Server if i can avoid it.</p>\n\n<p>Regards</p>\n"}, {"tags": ["c", "string", "pointers", "null"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1501056199, "post_id": 45320878, "comment_id": 77603724, "body": "Without a <code>&#39;\\0&#39;</code> byte at the end, it is not a <i>string</i>. That&#39;s how strings in C are defined: a sequence of <code>char</code> ending with <code>&#39;\\0&#39;</code>."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1501067702, "post_id": 45320878, "comment_id": 77612192, "body": "<code>scanf(&quot;%s&quot;,s);</code>?  Where is <code>s</code> defined?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1501111838, "post_id": 45320878, "comment_id": 77640017, "body": "the posted code does not compile!  this line: <code>scanf(&quot;%s&quot;,s);</code>  has 3 problems: 1) the array <code>s</code> is not defined.  2) always check the returned value, not the parameter values) to assure the operation was successful. 3) when using the input/format specifier: <code>%s</code>, always include a MAX CHARACTERS modifier that is one less than the length of the input buffer, so the input cannot overflow the buffer.  Such buffer overflow is undefined behavior and can lead to a seg fault event.  Suggest: <code>char s[20];  if( 1 != scanf( &quot;%19s&quot;, s ) ) { handle error }</code>"}, {"owner": {"reputation": 17, "user_id": 8368342, "user_type": "registered", "profile_image": "https://graph.facebook.com/1103227156475029/picture?type=large", "display_name": "S\u01a1n Blue", "link": "https://stackoverflow.com/users/8368342/s%c6%a1n-blue"}, "edited": false, "score": 0, "creation_date": 1502341572, "post_id": 45320878, "comment_id": 78168717, "body": "My bad. That&#39;s S which i mean string. I edited."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1501056244, "creation_date": 1501056244, "answer_id": 45320912, "question_id": 45320878, "link": "https://stackoverflow.com/questions/45320878/why-do-we-have-to-add-null-to-print-a-reserve-string-using-pointer-in-c/45320912#45320912", "title": "why do we have to add NULL to print a reserve string using pointer in C?", "body": "<p>Setting <code>*pre='\\0';</code> is an idiomatic way of adding a NUL-terminator to the end of your <code>char[]</code> array. This is required for the C string type functions to work: e.g. the <code>printf</code> call with <code>%s</code> specifier.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 3, "last_activity_date": 1501056450, "last_edit_date": 1501056450, "creation_date": 1501056322, "answer_id": 45320942, "question_id": 45320878, "link": "https://stackoverflow.com/questions/45320878/why-do-we-have-to-add-null-to-print-a-reserve-string-using-pointer-in-c/45320942#45320942", "title": "why do we have to add NULL to print a reserve string using pointer in C?", "body": "<p>You are using <code>%s</code> in <code>printf</code> and it expects its argument to be null terminated. It is not necessary to null terminate if you are treating <code>reverse</code> as a character array and then you can use a loop and print the reversed string character by character.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 8368342, "user_type": "registered", "profile_image": "https://graph.facebook.com/1103227156475029/picture?type=large", "display_name": "S\u01a1n Blue", "link": "https://stackoverflow.com/users/8368342/s%c6%a1n-blue"}, "edited": false, "score": 0, "creation_date": 1502346500, "post_id": 45328381, "comment_id": 78170725, "body": "I got another problem. *pre=&#39;\\0&#39; is ok but there was no adress in it. I&#39;m used to *pre[number].   So, Is it right that *pre will point to the newest address?  At first, *pre=string[0], after *pre=*pre+n (7 for example), *pre now points at   string[n+1] ( *pre=string[8] )?"}], "tags": [], "owner": {"reputation": 105, "user_id": 8350245, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-33kYNAGQ-a0/AAAAAAAAAAI/AAAAAAAAAHQ/oJ1SYwWf7EI/photo.jpg?sz=128", "display_name": "Milan", "link": "https://stackoverflow.com/users/8350245/milan"}, "is_accepted": false, "score": 0, "last_activity_date": 1598455182, "last_edit_date": 1598455182, "creation_date": 1501075608, "answer_id": 45328381, "question_id": 45320878, "link": "https://stackoverflow.com/questions/45320878/why-do-we-have-to-add-null-to-print-a-reserve-string-using-pointer-in-c/45328381#45328381", "title": "why do we have to add NULL to print a reserve string using pointer in C?", "body": "<pre><code>*pre='\\0'; \n</code></pre>\n<p>Here backward slash is for escape sequence and 0 is representing  the null character<code>'\\0'</code>. In C language we use null character to end the string. So suppose you ask user to enter string.</p>\n<pre><code>scanf(&quot;%s&quot;,s);\n</code></pre>\n<p>Here user enter <strong>stackoverflow</strong> so total 13 characters. But to store that string actually we need an array size of 14. Because we have have to add null character at the end of string.\nHere, in our String data will store something like this...</p>\n<pre><code>s[]={'s','t','a','c','k','o','v','e','r','f','l','o','w','\\0'};\n</code></pre>\n<p>So Question is why do we need to end a string with null character? Answer is simple, so we could know that where string is ending.</p>\n<pre><code>while(*ps){\n  ps++;\n  i++;\n} \nwhile(i&gt;=0){\nps--;\n*pre = *ps;\npre++;\n--i;\n}\n*pre='\\0';\n</code></pre>\n<p>Here in first while loop <code>*ps</code> and <code>i</code> will increment until <code>*ps!='\\0'</code>. And in second while loop run until <code>i &gt;= 0</code> is true. <code>*ps</code> decrement and assign <code>*ps</code> data to <code>*pre</code> so string can be reversed. And when second while loop ends <code>*pre='\\0'</code> you are ending the reverse string with null character.</p>\n<p>long story in short :)\nwhen you enter string through <code>scanf(&quot;%s&quot;,s);</code> compiler will end add the null character at the end of string. But when you manipulate (reversing) the string you have to end reverse string with null character at the end. and that's what you have done by <code>*pre='\\0';</code> this line.</p>\n<p>To make more sense about it you should make basic string program and read about <em>string</em>.</p>\n"}], "owner": {"reputation": 17, "user_id": 8368342, "user_type": "registered", "profile_image": "https://graph.facebook.com/1103227156475029/picture?type=large", "display_name": "S\u01a1n Blue", "link": "https://stackoverflow.com/users/8368342/s%c6%a1n-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1598455182, "creation_date": 1501056143, "last_edit_date": 1502341508, "question_id": 45320878, "link": "https://stackoverflow.com/questions/45320878/why-do-we-have-to-add-null-to-print-a-reserve-string-using-pointer-in-c", "title": "why do we have to add NULL to print a reserve string using pointer in C?", "body": "<p>This is a program in C to print a string in reverse using a pointer.\nWhat is the meanning of <code>*pre='\\0'</code>?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n   char string[50],reserve[50];\n   char *ps = string;\n   char *pre = reserve;\n   int i=-1;\n   printf(\" Input a string : \");\n   scanf(\"%s\",string);\n   while(*ps)\n   {\n      ps++;\n      i++;\n   }\n   while(i&gt;=0)\n   {\n      ps--;\n      *pre = *ps;\n      pre++;\n      --i;\n   }\n   *pre='\\0';\n   printf(\" Reverse of the string is : %s\\n\\n\",reserve);\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1501055868, "post_id": 45320728, "comment_id": 77603528, "body": "<code>(wchar_t *)p_str[ii]</code> -&gt; <code>((wchar_t *)p_str)[ii]</code> -- see <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/operator_precedence</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1501056036, "post_id": 45320728, "comment_id": 77603632, "body": "&quot;<i>There is no object or struct here.</i>&quot; &lt;- there is. Whatever your <code>void *</code> points to is an <i>object</i> in the terms of C. But <code>void</code> is an incomplete type, so your compiler doesn&#39;t know the size and therefore can&#39;t do indexing. The indexing has higher precedence than the cast. Use parantheses to first cast to a complete type and indexing will work."}, {"owner": {"reputation": 61, "user_id": 5119591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-aJdrNvy9ip4/AAAAAAAAAAI/AAAAAAAAACM/snOoWluSgZA/photo.jpg?sz=128", "display_name": "Oosutsuke", "link": "https://stackoverflow.com/users/5119591/oosutsuke"}, "edited": false, "score": 0, "creation_date": 1501056536, "post_id": 45320728, "comment_id": 77603940, "body": "@FelixPalmen: I understand. Thank you very much. Exactly!!!"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5119591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-aJdrNvy9ip4/AAAAAAAAAAI/AAAAAAAAACM/snOoWluSgZA/photo.jpg?sz=128", "display_name": "Oosutsuke", "link": "https://stackoverflow.com/users/5119591/oosutsuke"}, "edited": false, "score": 0, "creation_date": 1501056601, "post_id": 45320891, "comment_id": 77603987, "body": "I understand. Thank you very much. +1"}], "tags": [], "owner": {"reputation": 141, "user_id": 8363624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebe2e71e511257ea80a7cc2f1f581b3?s=128&d=identicon&r=PG&f=1", "display_name": "Yet Another John Smith", "link": "https://stackoverflow.com/users/8363624/yet-another-john-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1501056172, "creation_date": 1501056172, "answer_id": 45320891, "question_id": 45320728, "link": "https://stackoverflow.com/questions/45320728/expression-must-be-a-pointer-to-a-complete-object-type-when-cast-void-pointer/45320891#45320891", "title": "Expression must be a pointer to a complete object type when cast void pointer", "body": "<p>I dont know why you get exactly that error, but according to <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">this</a> table\nexpression </p>\n\n<p><code>(wchar_t *)p_str[ii]</code> is <code>(wchar_t *)(p_str[ii])</code> </p>\n\n<p>not <code>((wchar_t *)p_str)[ii]</code>, </p>\n\n<p>probably it's not what you want</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 6, "last_activity_date": 1501057005, "creation_date": 1501057005, "answer_id": 45321156, "question_id": 45320728, "link": "https://stackoverflow.com/questions/45320728/expression-must-be-a-pointer-to-a-complete-object-type-when-cast-void-pointer/45321156#45321156", "title": "Expression must be a pointer to a complete object type when cast void pointer", "body": "<p>To understand the error message, you have to know two things:</p>\n\n<ol>\n<li>Any value having a type stored somewhere is called an <em>object</em> in C. Your variables identify objects, your pointers (should) point to objects.</li>\n<li>Types in C can be complete or incomplete. The distinction is that for <em>complete</em> types, the size of an object of that type is known. For <em>incomplete</em> types, it is unknown. Without knowing the size, e.g. indexing isn't possible because you need the size to calculate the offset of the next array element. <code>void</code> is a special case of an <em>incomplete type</em>: it can't ever be completed, because it's unknown (<code>void *</code> is the <em>generic pointer type</em> and may point to an object of <em>any type</em>).</li>\n</ol>\n\n<p>So, your compiler just tells you that <code>p_str[ii]</code> is invalid because you attempt to index on a pointer of type <code>void *</code>.</p>\n\n<hr>\n\n<p>The source of the problem is simple: indexing has a higher precedence than casting, therefore just use parantheses to solve this problem:</p>\n\n<pre><code>((wchar_t *)p_str)[ii]\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5119591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-aJdrNvy9ip4/AAAAAAAAAAI/AAAAAAAAACM/snOoWluSgZA/photo.jpg?sz=128", "display_name": "Oosutsuke", "link": "https://stackoverflow.com/users/5119591/oosutsuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2957, "favorite_count": 0, "accepted_answer_id": 45320891, "answer_count": 2, "score": 1, "last_activity_date": 1501057005, "creation_date": 1501055684, "question_id": 45320728, "link": "https://stackoverflow.com/questions/45320728/expression-must-be-a-pointer-to-a-complete-object-type-when-cast-void-pointer", "title": "Expression must be a pointer to a complete object type when cast void pointer", "body": "<p>I'm trying to do function remove extension of a name is type wchar_t or char, inside for() i cast void pointer to type wchar_t or char, then there was an error:</p>\n\n<blockquote>\n  <p>Expression must be a pointer to a complete object type.</p>\n</blockquote>\n\n<p>Here is sample code to show an instance of the issue by itself.</p>\n\n<pre><code>int RemoveExtension(\n    void    *p_str,     /*  Name                        */\n    bool    isWchar     /*  true\uff1awchar_t, false\uff1achar\u3000*/\n) {\n    int ii, len;\n\n    // Get length\n    len = (isWchar) ? wcslen( (wchar_t *)p_str ) : strlen( (char *)p_str );\n\n    // Remove extension\n    /*\u3000wchar_t\u3000*/\n    if( isWchar ) {\n\n        for( ii = 0; ii &lt; len; ii++ ) {\n            if( L'.' == (wchar_t *)p_str[ii] ) {  //Error here\n                (wchar_t *)p_str[ii] = L'\\0';     //Error here\n                break;\n            }\n        }\n    }\n    /*\u3000char\u3000*/\n    else {\n\n        for( ii = 0; ii &lt; len; ii++ ) {\n            if( '.' == (char *)p_str[ii]) {       //Error here\n                (char *)p_str[ii] = '\\0';         //Error here\n                break;\n            }\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm not understanding what this error is trying to say. There is no object or struct here.</p>\n"}, {"tags": ["c", "ip"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1501054682, "post_id": 45320364, "comment_id": 77602689, "body": "Perhaps you need to read more about the <a href=\"https://en.wikipedia.org/wiki/Internet_Protocol\" rel=\"nofollow noreferrer\">Internet Protocol</a> and <a href=\"https://en.wikipedia.org/wiki/IP_header\" rel=\"nofollow noreferrer\">its headers</a>? Especially since the ToS header field has been deprecated and changed its meaning."}], "answers": [{"tags": [], "owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "is_accepted": true, "score": 0, "last_activity_date": 1516753412, "last_edit_date": 1592644375, "creation_date": 1501055084, "answer_id": 45320533, "question_id": 45320364, "link": "https://stackoverflow.com/questions/45320364/whats-the-meaning-from-the-ip-headers-in-c-iph-tos/45320533#45320533", "title": "Whats the meaning from the IP Headers in C iph_tos?", "body": "<p>From <a href=\"http://man7.org/linux/man-pages/man7/ip.7.html\" rel=\"nofollow noreferrer\">[man]: IP(7)</a>:</p>\n<blockquote>\n<p><code>IP_TOS</code> (since Linux 1.0)<br></p>\n<p>Set or receive the <strong>Type-Of-Service</strong> (<em>TOS</em>) field that is sent...</p>\n</blockquote>\n"}], "owner": {"reputation": 47, "user_id": 8208498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b7ded91076e824165fde13dfe857949?s=128&d=identicon&r=PG&f=1", "display_name": "X2E B599", "link": "https://stackoverflow.com/users/8208498/x2e-b599"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45320533, "answer_count": 1, "score": 0, "last_activity_date": 1516753412, "creation_date": 1501054513, "last_edit_date": 1501094954, "question_id": 45320364, "link": "https://stackoverflow.com/questions/45320364/whats-the-meaning-from-the-ip-headers-in-c-iph-tos", "title": "Whats the meaning from the IP Headers in C iph_tos?", "body": "<p>Of course, some information are going to be send to the target machine. Something like the IP version and the length... But what does \"tos\" mean?\n\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad\u00ad</p>\n"}, {"tags": ["c", "binary"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501054261, "post_id": 45320217, "comment_id": 77602391, "body": "As for a way to get to know what&#39;s happening, split all the expressions up into their simplest possible sub-expressions. Store each sub-expression in a separate variable. Then use a debugger to step through the code line by line while monitoring the variables, to see what happens in each step."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501054304, "post_id": 45320217, "comment_id": 77602420, "body": "Or if you don&#39;t have access to a computer with a debugger, then use <i>pen and paper!</i>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1501054454, "post_id": 45320217, "comment_id": 77602525, "body": "Without a computer the easiest way is converting into binary using pen and paper. At least doing bitlevel operations directly on hexadecimal numbers is beyond <b>my</b> intellectual possibilities."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501054462, "post_id": 45320217, "comment_id": 77602534, "body": "Are you allowed to assume a specific size for <code>unsigned int</code>?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501054606, "post_id": 45320217, "comment_id": 77602634, "body": "@StoryTeller <code>printf(&quot;%8x\\n&quot;, tmp);</code> implies that <code>unsigned int</code> has 32 bits."}, {"owner": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501054636, "post_id": 45320217, "comment_id": 77602654, "body": "size of unsigned int is 32 bits"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501054666, "post_id": 45320217, "comment_id": 77602683, "body": "@WeatherVane - I see only an implicit assumption. This question would have been better served with <code>uint32_t</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501054716, "post_id": 45320217, "comment_id": 77602711, "body": "@StoryTeller but you <i>did</i> ask to make an assumption, not for a definition!"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501054812, "post_id": 45320217, "comment_id": 77602782, "body": "@WeatherVane - I asked for explicit assurance. Not excuses to justify an implicit assumption."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501054855, "post_id": 45320217, "comment_id": 77602818, "body": "<i>Are you allowed to assume a specific size for unsigned int?</i>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1501054869, "post_id": 45320217, "comment_id": 77602832, "body": "If you can do multiplication and division with hex numbers, you can use that <code>x &lt;&lt; 3</code> is the same as <code>x * 2^3</code> which is the same as <code>x * 8</code>. Similar <code>x &gt;&gt; 3</code> is <code>x&#47;8</code>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501054946, "post_id": 45320217, "comment_id": 77602877, "body": "@WeatherVane - And? I know what I said. And I intentionally asked for the more general clarification instead of &quot;is unsigned int 32 bit&quot;? What exactly is this arguing with me for?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1501055253, "post_id": 45320217, "comment_id": 77603083, "body": "@StoryTeller all I did was to reply to your comment. It is <i>your</i> argument, not mine."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501055339, "post_id": 45320217, "comment_id": 77603139, "body": "@WeatherVane - The only one being argumentative is you. My reply to <i>you</i> was what I meant in my original comment. Then you started throwing exclamation marks and quotes in italic, as if I insulted you personally. What do you want exactly?"}], "answers": [{"comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1501055390, "post_id": 45320522, "comment_id": 77603174, "body": "<code>C|2</code> is <code>E</code>, <code>A|C</code> is <code>E</code> and <code>8|3</code> is <code>B</code> so (if the other calculations are correct): <code>0x8ACF | 0x3C28</code> -&gt; <code>BEEF</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1501055445, "post_id": 45320522, "comment_id": 77603224, "body": "@4386427 I would have written that, but I don&#39;t know how to explain how I got C | 2 = E without going through the bit representation."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1501055537, "post_id": 45320522, "comment_id": 77603281, "body": "@4386427 also funny that <code>notChicken(33) == 0xBEEF</code> :)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1501055571, "post_id": 45320522, "comment_id": 77603306, "body": "@AjayBrahmakshatriya - I think that&#39;s the intended pun :)"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1501055628, "post_id": 45320522, "comment_id": 77603346, "body": "yep - a teacher (or book writer) having a little fun. There&#39;s nothing like nerd-jokes... :)"}, {"owner": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501055701, "post_id": 45320522, "comment_id": 77603405, "body": "You can explain how you got to 0x2468ACF | 0x3B2A3C28? @AjayBrahmakshatriya"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501056336, "post_id": 45320522, "comment_id": 77603820, "body": "@Daniel, do you mean the values? That is just multiplication and division. You can use a calculator for the second one. First one can be done orally. Because division by 8 is just removing the last hex and doubling the others and add 1 if the last digit (that was removed) was greater than 8."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501056424, "post_id": 45320522, "comment_id": 77603863, "body": "@Daniel, if you mean how I got there step wise, I just replaced <code>v1</code> and <code>v2</code> with the constants they are defined as which is <code>(0x12345678 &#47; 8) | (0x87654785 * 8)</code>"}, {"owner": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501057705, "post_id": 45320522, "comment_id": 77604719, "body": "@AjayBrahmakshatriya I didnt undersrtand the calculation of 0x87654785 * 8 and 0x12345678 / 8. I will happy to get an explanation."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501057986, "post_id": 45320522, "comment_id": 77604912, "body": "@Daniel they are just multiplications. Like you do multiplication in decimal like <code>25 * 2= 50</code> or something like that. It is just that the multiplication is done with numbers represented in hex. It may not be possible to do it orally. Or you can covert them to decimals then multiply and convert back. Converting to decimal without a calculator also seems very difficult to me."}, {"owner": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501058593, "post_id": 45320522, "comment_id": 77605365, "body": "@AjayBrahmakshatriya What is the method of multiplication and division at base 16? If you can explain please that I did not understand what you did. Thanks"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501059288, "post_id": 45320522, "comment_id": 77605855, "body": "@Daniel there is no straight forward way to do it. You should use a calculator for it. Most scientific or programming calculators have hex representation in them."}, {"owner": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "edited": false, "score": 0, "creation_date": 1501064428, "post_id": 45320522, "comment_id": 77609880, "body": "@AjayBrahmakshatriya Thanks. I succeeded to do it in the calculator."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1501055158, "last_edit_date": 1501055158, "creation_date": 1501055043, "answer_id": 45320522, "question_id": 45320217, "link": "https://stackoverflow.com/questions/45320217/working-with-bits-output-in-c/45320522#45320522", "title": "Working with bits-output in c", "body": "<p>Although not a good idea, lets try to break down your operation.</p>\n\n<p>You have given <code>w = 33</code></p>\n\n<p>The last part -</p>\n\n<p><code>v3 &amp; ~(v3 &lt;&lt; (w &gt;&gt; 1))</code> is going to evaluate as <code>v3 &amp; ~(v3 &lt;&lt; 16)</code></p>\n\n<p><code>v3 &lt;&lt; 16</code> is <code>0xffff0000</code> and <code>~</code> of that is <code>0xffff</code></p>\n\n<p>since <code>v3</code> is all ones you get <code>0xffff</code>. This will mask off the upper 16 bits of the previous computation.</p>\n\n<p>Now <code>(v1 &gt;&gt; 3) | (v2 &lt;&lt; 3);</code></p>\n\n<p>We care only about the lower 16 bits. </p>\n\n<p><code>&gt;&gt; 3</code> is dividing by 8 and <code>&lt;&lt; 3</code> is multiplying by 8.</p>\n\n<p>So the result of first part will be</p>\n\n<pre><code>0x2468ACF | 0x3B2A3C28\n</code></pre>\n\n<p>Keeping only the lower 16 bits </p>\n\n<pre><code>0x8ACF | 0x3C28\n</code></pre>\n\n<p>Finally I don't know how you are going to do the OR without writing the bitwise representation. I can help with the last hex. It will be <code>F</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 7310626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ccaeb7fa88f691c6db67fd59628e05?s=128&d=identicon&r=PG&f=1", "display_name": "daniel", "link": "https://stackoverflow.com/users/7310626/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 45320522, "answer_count": 1, "score": 0, "last_activity_date": 1501055158, "creation_date": 1501054109, "last_edit_date": 1501054427, "question_id": 45320217, "link": "https://stackoverflow.com/questions/45320217/working-with-bits-output-in-c", "title": "Working with bits-output in c", "body": "<p>I have to say what the output of the program for w = 33. I do not know how to do it. Does anyone have an idea how to solve this without writing the binary representation of each number?</p>\n\n<pre><code>void notChicken(int w) \n{\n    unsigned int v1 = 0x12345678;\n    unsigned int v2 = 0x87654785;\n    unsigned int v3 = 0xffffffff;\n    unsigned int tmp;\n    tmp = (v1 &gt;&gt; 3) | (v2 &lt;&lt; 3);\n    tmp &amp;= v3 &amp; ~(v3 &lt;&lt; (w &gt;&gt; 1));\n    printf(\"%8x\\n\", tmp);\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "assembly", "gdb"], "comments": [{"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 1, "creation_date": 1501053975, "post_id": 45320077, "comment_id": 77602198, "body": "@MattGibson, the alleged duplicate question does not actually answer this question. It does not explain <i>why</i> stack alignment is required."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "edited": false, "score": 1, "creation_date": 1501059726, "post_id": 45320077, "comment_id": 77606186, "body": "@FlorianWeimer <i>&quot;which should produce 16-byte alignment, which needed for SSE instructions&quot;</i> is one of rational reasons (copied from an answer there!), and the other reason is &quot;because why not, I like my compiler keeping stack aligned&quot;. (it may have some performance implications when using stack for local variables, and the amounts of memory today is not a (that big) problem)"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 2, "creation_date": 1501069507, "post_id": 45320077, "comment_id": 77613586, "body": "Most ABI have stack alignment requirements. This isn&#39;t limited to certain machine level instructions. This is why the compiler will allocate &quot;more than is needed...&quot; though, since it is required for alignment, it really isn&#39;t &quot;unneeded&quot;"}], "owner": {"reputation": 2165, "user_id": 5460216, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/v3Z3y.png?s=128&g=1", "display_name": "7_R3X", "link": "https://stackoverflow.com/users/5460216/7-r3x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1501053851, "answer_count": 0, "score": 0, "last_activity_date": 1501053670, "creation_date": 1501053670, "question_id": 45320077, "link": "https://stackoverflow.com/questions/45320077/allocation-of-unnecessary-buffer", "closed_reason": "Duplicate", "title": "Allocation of unnecessary buffer", "body": "<p>I have a little C program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid getInput();\nvoid what();\n\nint main()\n{\n        getInput();\n}\n\nvoid getInput()\n{\n        char buffer[6];\n        gets(buffer);\n        puts(buffer);\n}\n\nvoid what()\n{\n        printf(\"What!! No one called me!!\\n\");\n}\n</code></pre>\n\n<p>And when debugging in GDB, I get(I have not included the code for function what() ):</p>\n\n<pre><code>0x5555555546f0 &lt;main&gt;           push   %rbp                                                                                                                         \u2502\n   \u25020x5555555546f1 &lt;main+1&gt;         mov    %rsp,%rbp                                                                                                                    \u2502\n   \u25020x5555555546f4 &lt;main+4&gt;         mov    $0x0,%eax                                                                                                                    \u2502\n   \u25020x5555555546f9 &lt;main+9&gt;         callq  0x555555554705 &lt;getInput&gt;                                                                                                    \u2502\n   \u25020x5555555546fe &lt;main+14&gt;        mov    $0x0,%eax                                                                                                                    \u2502\n   \u25020x555555554703 &lt;main+19&gt;        pop    %rbp                                                                                                                         \u2502\n   \u25020x555555554704 &lt;main+20&gt;        retq\n   |0x555555554705 &lt;getInput&gt;       push   %rbp                                                                                                                         \u2502\n   \u25020x555555554706 &lt;getInput+1&gt;     mov    %rsp,%rbp                                                                                                                    \u2502\n   \u25020x555555554709 &lt;getInput+4&gt;     sub    $0x10,%rsp                                                                                                                  \u2502\n  &gt;\u25020x55555555470d &lt;getInput+8&gt;     lea    -0x6(%rbp),%rax                                                                                                              \u2502\n   \u25020x555555554711 &lt;getInput+12&gt;    mov    %rax,%rdi                                                                                                                    \u2502\n   \u25020x555555554714 &lt;getInput+15&gt;    mov    $0x0,%eax                                                                                                                    \u2502\n   \u25020x555555554719 &lt;getInput+20&gt;    callq  0x5555555545a0 &lt;gets@plt&gt;                                                                                                    \u2502\n   \u25020x55555555471e &lt;getInput+25&gt;    lea    -0x6(%rbp),%rax                                                                                                              \u2502\n   \u25020x555555554722 &lt;getInput+29&gt;    mov    %rax,%rdi                                                                                                                    \u2502\n   \u25020x555555554725 &lt;getInput+32&gt;    callq  0x555555554590 &lt;puts@plt&gt;                                                                                                    \u2502\n   \u25020x55555555472a &lt;getInput+37&gt;    nop                                                                                                                                 \u2502\n   \u25020x55555555472b &lt;getInput+38&gt;    leaveq                                                                                                                              \u2502\n   \u25020x55555555472c &lt;getInput+39&gt;    retq\n</code></pre>\n\n<p>I believe that <code>sub    $0x10,%rsp</code> in <code>getInput()</code> at  is used to allocate the memory onto the stack by making the stack pointer to point 16 bytes away from its current position. I wonder why did the compiler allocated 16 bytes of memory on the stack while the C code only asks for 6 bytes? I understand that the very next instruction, <code>lea    -0x6(%rbp),%rax</code>, lets the user use only 6 bytes of memory but why did we allocate 16 instead?</p>\n"}, {"tags": ["c", "gcc", "enums", "type-conversion", "gcc-warning"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1501053847, "post_id": 45319942, "comment_id": 77602101, "body": "even with <code>-Wall -Wextra -pedantic</code> it doesn&#39;t issue the warning. I guess you&#39;ll have to use extra check tools (which is bummer because nothing beats using the compiler)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501054410, "post_id": 45319942, "comment_id": 77602499, "body": "<code>-Wenum-compare</code> is included in <code>Wall</code>, but it only checks comparisons (as stated). You&#39;d like <code>Wenum-assign</code> :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501054872, "post_id": 45319942, "comment_id": 77602835, "body": "With an <code>enum</code> being not much more than syntactic sugar for named integer values, there&#39;s not much you can do. Just out of academic interest, I once created some <a href=\"https://codereview.stackexchange.com/q/96069/77356\">enum classes like code</a>, but I doubt it&#39;s useful in practice."}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "edited": false, "score": 0, "creation_date": 1501054907, "post_id": 45319942, "comment_id": 77602852, "body": "GCC have been adding useful &amp; practical warnings (<code>-Wimplicit-fallthrough</code> for example). Perhaps they would consider <code>-Wenum-conversion</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501055162, "post_id": 45319942, "comment_id": 77603031, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4669454/how-to-make-gcc-warn-about-passing-wrong-enum-to-a-function\">How to make gcc warn about passing wrong enum to a function</a>"}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501055361, "post_id": 45319942, "comment_id": 77603150, "body": "@jean-fran&#231;ois-fabre - yes I read this question first, but its about passing function args, not arithmetic or mixing enums in expressions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1501055483, "post_id": 45319942, "comment_id": 77603247, "body": "@ideasman42 regarding your edit: Jean-Fran&#231;ois isn&#39;t suggesting to <b>switch</b> to C++, just to (ab)use a C++ compiler for an additional code checking step..."}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "edited": false, "score": 0, "creation_date": 1501055590, "post_id": 45319942, "comment_id": 77603324, "body": "Ah, I didn&#39;t realize, that that could be made more clear. Even so, we use enough C-only features this wont work, or at least it wont work on a project wide basis (large number of source files) - where it would be most useful."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501055699, "post_id": 45319942, "comment_id": 77603404, "body": "I&#39;m suggesting to build a checker tool out of g++ and your makefile switched to g++. Compile all objects done that way to the trash and keep only interesting messages (and filtering out other errors related to C-only features) using a good <code>grep</code> command. That&#39;s what <i>I</i> would do."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501055759, "post_id": 45319942, "comment_id": 77603438, "body": "and the linked question also works for your case."}, {"owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "edited": false, "score": 0, "creation_date": 1501055848, "post_id": 45319942, "comment_id": 77603512, "body": "Only in trivial cases, for large C projects (which make some use of C11) its impractical <i>(which is why I note using C++ isn&#39;t an option).</i> The example is of course a trivial case but that&#39;s just to communicate the intent."}], "answers": [{"tags": [], "owner": {"reputation": 4569, "user_id": 1282773, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GFxGD.jpg?s=128&g=1", "display_name": "ivaigult", "link": "https://stackoverflow.com/users/1282773/ivaigult"}, "is_accepted": false, "score": 1, "last_activity_date": 1501150544, "creation_date": 1501150544, "answer_id": 45347832, "question_id": 45319942, "link": "https://stackoverflow.com/questions/45319942/how-to-warn-when-assigning-or-performing-arithmetic-with-different-enum-types-in/45347832#45347832", "title": "How to warn when assigning or performing arithmetic with different enum types in GCC?", "body": "<p>According to <a href=\"https://stackoverflow.com/a/28484481/1282773\">this answer</a>, only clang supports the desired behavior.</p>\n\n<p>There are <a href=\"https://stackoverflow.com/questions/11903625/how-to-emulate-strongly-typed-enum-in-c\">some approaches</a> to emulate strongly typed enums in C, but they seem to have various limitations.</p>\n"}], "owner": {"reputation": 29662, "user_id": 432509, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/2vl0v.png?s=128&g=1", "display_name": "ideasman42", "link": "https://stackoverflow.com/users/432509/ideasman42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 16, "last_activity_date": 1501150544, "creation_date": 1501053274, "last_edit_date": 1501064170, "question_id": 45319942, "link": "https://stackoverflow.com/questions/45319942/how-to-warn-when-assigning-or-performing-arithmetic-with-different-enum-types-in", "title": "How to warn when assigning or performing arithmetic with different enum types in GCC?", "body": "<p>While I'm aware this is valid C not to differentiate between enum types.</p>\n\n<p>GCC does have <code>-Wenum-compare</code> (which I'm using) and works as expected.</p>\n\n<p>I tried using <code>-Wconversion</code> but this doesn't make any difference.</p>\n\n<p>How can assignments and arithmetic operators (<code>+</code>/<code>-</code>/<code>&amp;</code>/<code>|</code>... etc) also generate warnings? (assignment, or and... etc)</p>\n\n<pre><code>{\n    enum Foo f = SOME_VALUE;\n    enum Bar b = SOME_OTHER_VALUE;\n\n    if (f != b) {\n        /* this warns! */\n    }\n\n    f = b;  /* &lt;-- how to warn about this? */\n    f |= b;  /* .. and this? */\n\n}\n</code></pre>\n\n<hr>\n\n<p>Notes:</p>\n\n<ul>\n<li>Switching to C++ is not an option <em>(as suggested in other answers)</em>.</li>\n<li><a href=\"https://stackoverflow.com/questions/4669454\">This question</a> is closely related, however its not a duplicate because it's about passing arguments instead of arithmetic.</li>\n</ul>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501053465, "post_id": 45319887, "comment_id": 77601835, "body": "To the people marking this as a duplicate of questions about string concatenation, the question is <i>not</i> about the string concatenation but why the compiler doesn&#39;t give an error for passing to few arguments to a varargs function."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1501053564, "post_id": 45319887, "comment_id": 77601883, "body": "As Some programmer dude said: He already got how string concatenation works. OP saids: <code>2nd string will be undefined</code> because of <code>%s:%s</code>. What he want&#39;s to know is why this is not a compiler error."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501053799, "post_id": 45319887, "comment_id": 77602068, "body": "@Someprogrammerdude so what should I close this as? brightshine: because you&#39;re using a bad compiler (and you didn&#39;t disclose which one you&#39;re using)."}, {"owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "edited": false, "score": 4, "creation_date": 1501053842, "post_id": 45319887, "comment_id": 77602096, "body": "You say that you <i>just get a warning</i>. What warning? <code>gcc</code> gives: <code>warning: format \u2018%s\u2019 expects a matching \u2018char *\u2019 argument</code>, which seems pretty clear to me."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501053918, "post_id": 45319887, "comment_id": 77602153, "body": "@AnttiHaapala Who says it has to be closed? Why?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501054329, "post_id": 45319887, "comment_id": 77602436, "body": "@Someprogrammerdude because it is a duplicate?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501054479, "post_id": 45319887, "comment_id": 77602551, "body": "@AnttiHaapala Of what? Of questions about string-concatenations? But the question <i>isn&#39;t</i> about that, therefore such questions aren&#39;t duplicates. If you find a question about why missing arguments to vararg functions isn&#39;t an error, then I&#39;ll gladly vote to close this question, but not otherwise."}, {"owner": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "edited": false, "score": 0, "creation_date": 1501054941, "post_id": 45319887, "comment_id": 77602874, "body": "The title of the question states that the concatanation is &quot;accidental&quot;. The duplicate quenstion makes clear that such concatenations <i>always</i> happen."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "edited": false, "score": 0, "creation_date": 1501055017, "post_id": 45319887, "comment_id": 77602920, "body": "@HansLub: With accidental he wants to express that fact that he might forget the comma: <code>When I forget to insert a comma before [...]</code>. I think this is clear to the OP."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 5054, "user_id": 548515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55624bebc921a03713d00a91c9e58a36?s=128&d=identicon&r=PG", "display_name": "Hans Lub", "link": "https://stackoverflow.com/users/548515/hans-lub"}, "edited": false, "score": 0, "creation_date": 1501055026, "post_id": 45319887, "comment_id": 77602925, "body": "@HansLub The title is a little misleading and should probably be edited. The question itself is IMO quite clear."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501055628, "post_id": 45319887, "comment_id": 77603347, "body": "@Someprogrammerdude a duplicate of &quot;why no error of wrong number of arguments to printf&quot;"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501055762, "post_id": 45319887, "comment_id": 77603441, "body": "@AnttiHaapala I can&#39;t find that question on SO. Can you provide a link?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501055818, "post_id": 45319887, "comment_id": 77603491, "body": "For example this: <a href=\"https://stackoverflow.com/q/28194227/918959\">stackoverflow.com/q/28194227/918959</a> even simpler. Why conflate it with string concatenation."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501056010, "post_id": 45319887, "comment_id": 77603616, "body": "The string concatenation is just a reasoning why the error could happen to a careful user, but at the core the question is about &quot;why doesn&#39;t compiler give a diagnostic message when too few arguments are provided to printf when the format is known&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1501053513, "creation_date": 1501053513, "answer_id": 45320028, "question_id": 45319887, "link": "https://stackoverflow.com/questions/45319887/file-macro-will-be-concatenated-to-previous-string-accidentally-in-c/45320028#45320028", "title": "__FILE__ macro will be concatenated to previous string accidentally in C", "body": "<p>While it is possible for the compiler to do it in e.g. <code>printf</code> and <code>scanf</code> (because it knows about the format-strings for those functions), it can't be generally done for variable-argument functions.</p>\n\n<p>If you create a vararg function, how would the compiler know what number of arguments is the correct? The answer is that it can't. Therefore the C specification doesn't say it has to be an error.</p>\n\n<p>That compilers (some, not all) give warnings for <code>printf</code> and <code>scanf</code> is just because the creators of the compiler are nice enough to add it. It's not required.</p>\n"}], "owner": {"reputation": 955, "user_id": 2526833, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FVqZO.jpg?s=128&g=1", "display_name": "Brightshine", "link": "https://stackoverflow.com/users/2526833/brightshine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1501055857, "answer_count": 1, "score": 3, "last_activity_date": 1501077379, "creation_date": 1501053096, "last_edit_date": 1501077379, "question_id": 45319887, "link": "https://stackoverflow.com/questions/45319887/file-macro-will-be-concatenated-to-previous-string-accidentally-in-c", "closed_reason": "Duplicate", "title": "__FILE__ macro will be concatenated to previous string accidentally in C", "body": "<p>This is the simplest example of my question:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main() {\n        printf(\"%s:%s\\n\", \"I am in file\" __FILE__);\n}\n</code></pre>\n\n<p>When I forget to insert a comma before \"<strong>__FILE__</strong>\" macro, I expect to get a compile error, but just get a warning. So the output will be:</p>\n\n<blockquote>\n  <p>I am in filetest.c:[C</p>\n</blockquote>\n\n<ul>\n<li>1st string will be : \"I am in file\" concatenate with <strong>__FILE__</strong> macro</li>\n<li>2nd string will be undefined</li>\n</ul>\n\n<p>Could someone tell me why it is not a compile error?</p>\n"}, {"tags": ["c", "elf", "ldd", "nm", "readelf"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6336540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c996dfdea438aa91eca13c452245da?s=128&d=identicon&r=PG&f=1", "display_name": "\ucd5c\ub3d9\uaddc", "link": "https://stackoverflow.com/users/6336540/%ec%b5%9c%eb%8f%99%ea%b7%9c"}, "edited": false, "score": 0, "creation_date": 1501053606, "post_id": 45319993, "comment_id": 77601921, "body": "Thx. Where is ELFW function declared?"}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 35, "user_id": 6336540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c996dfdea438aa91eca13c452245da?s=128&d=identicon&r=PG&f=1", "display_name": "\ucd5c\ub3d9\uaddc", "link": "https://stackoverflow.com/users/6336540/%ec%b5%9c%eb%8f%99%ea%b7%9c"}, "edited": false, "score": 0, "creation_date": 1501053649, "post_id": 45319993, "comment_id": 77601946, "body": "Oh, it&#39;s a shortcut used by glibc to unify 32-bit and 64-bit code. I&#39;m going to switch to 64-bit-only expressions."}, {"owner": {"reputation": 35, "user_id": 6336540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c996dfdea438aa91eca13c452245da?s=128&d=identicon&r=PG&f=1", "display_name": "\ucd5c\ub3d9\uaddc", "link": "https://stackoverflow.com/users/6336540/%ec%b5%9c%eb%8f%99%ea%b7%9c"}, "edited": false, "score": 0, "creation_date": 1501054464, "post_id": 45319993, "comment_id": 77602535, "body": "The return type of ELF64_R_SYM (p-&gt;r_info) is integer.. Ultimately, I want to match the symbol in Symtab and the symbol in .rela.dyn."}, {"owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "reply_to_user": {"reputation": 35, "user_id": 6336540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c996dfdea438aa91eca13c452245da?s=128&d=identicon&r=PG&f=1", "display_name": "\ucd5c\ub3d9\uaddc", "link": "https://stackoverflow.com/users/6336540/%ec%b5%9c%eb%8f%99%ea%b7%9c"}, "edited": false, "score": 0, "creation_date": 1501056440, "post_id": 45319993, "comment_id": 77603879, "body": "It&#39;s an index into the .dynsym section."}], "tags": [], "owner": {"reputation": 26934, "user_id": 8316315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d833a8a46fea39d7bfca1540ea9c07?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Weimer", "link": "https://stackoverflow.com/users/8316315/florian-weimer"}, "is_accepted": true, "score": 2, "last_activity_date": 1501056428, "last_edit_date": 1501056428, "creation_date": 1501053408, "answer_id": 45319993, "question_id": 45319775, "link": "https://stackoverflow.com/questions/45319775/how-can-i-get-the-symbol-name-in-struct-elf64-rela/45319993#45319993", "title": "How can I get the symbol name in struct &quot;Elf64_Rela&quot;", "body": "<p>Not all relocations refer to symbols, so you need to check <code>ELF64_R_TYPE (p-&gt;r_info)</code> first.  The set of relocations which have symbols are architecture-specific.</p>\n\n<p>For those relocations which have symbols, <code>ELF64_R_SYM (p-&gt;r_info)</code> should be the index of the associated symbol in the <code>.dynsym</code> section.</p>\n"}], "owner": {"reputation": 35, "user_id": 6336540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1c996dfdea438aa91eca13c452245da?s=128&d=identicon&r=PG&f=1", "display_name": "\ucd5c\ub3d9\uaddc", "link": "https://stackoverflow.com/users/6336540/%ec%b5%9c%eb%8f%99%ea%b7%9c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 1, "accepted_answer_id": 45319993, "answer_count": 1, "score": 3, "last_activity_date": 1501056428, "creation_date": 1501052710, "last_edit_date": 1501052883, "question_id": 45319775, "link": "https://stackoverflow.com/questions/45319775/how-can-i-get-the-symbol-name-in-struct-elf64-rela", "title": "How can I get the symbol name in struct &quot;Elf64_Rela&quot;", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;elf.h&gt;\n\n\nElf64_Rela *retab;\nElf64_Rela *retab_end;\nElf64_Ehdr *ehdr;\nElf64_Shdr *shdr;\nchar *strtab;\n\nvoid elf_open(char *filename)\n{\n\n    int fd = open(filename, O_RDONLY);\n    struct stat sbuf;\n    fstat(fd, &amp;sbuf);\n    void *maddr = mmap(NULL, sbuf.st_size, PROT_READ, MAP_SHARED, fd, 0);\n    close(fd);\n\n\n    ehdr = maddr;\n    shdr = (Elf64_Shdr *)(maddr + ehdr-&gt;e_shoff);\n    for (int i = 0; i &lt; ehdr-&gt;e_shnum; i++) \n    {\n        if (shdr[i].sh_type == SHT_RELA) \n        {   \n            retab = (Elf64_Rela *)(maddr + shdr[i].sh_offset);\n            retab_end = (Elf64_Rela *)((char *)retab + shdr[i].sh_size);\n            strtab = (char *)(maddr + shdr[shdr[i].sh_link].sh_offset);\n            break;\n        }\n    }\n}\n\nint main()\n{\n    elf_open(\"lib1.so\");\n    Elf64_Rela *p = retab;\n\n    while(p&lt;retab_end)  \n    {\n        printf(\"%x %d\\n\",p-&gt;r_offset,p-&gt;r_info);\n\n        p++;\n    }\n}\n</code></pre>\n\n<p>This is my code to get <code>.rela.dyn</code> section . But I don't know hot to get the symbol's name. I know that <code>Elf64_Rela</code> structure doesn't have a <code>name</code> field. In the 'SYMTAB' section, I can get the symbol name using <code>&amp;strtab[p-&gt;st_name]</code>. How can I do?</p>\n\n<pre><code>typedef struct {\n    Elf64_Addr r_offset;\n    Elf64_Xword r_info;\n    Elf64_Sxword r_addend;\n} Elf64_Rela;\n</code></pre>\n"}, {"tags": ["c", "logic"], "comments": [{"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501051934, "post_id": 45319522, "comment_id": 77600812, "body": "Answer to this question in C language will be more preferable."}, {"owner": {"reputation": 781, "user_id": 6792999, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh3.googleusercontent.com/-Uydpx7gvoPA/AAAAAAAAAAI/AAAAAAAAABE/_0cMCKnsKTU/photo.jpg?sz=128", "display_name": "Aldeguer", "link": "https://stackoverflow.com/users/6792999/aldeguer"}, "edited": false, "score": 1, "creation_date": 1501051983, "post_id": 45319522, "comment_id": 77600840, "body": "Please read how to ask, show some code... something  <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 17647, "user_id": 5515060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BXWsz.png?s=128&g=1", "display_name": "Lino", "link": "https://stackoverflow.com/users/5515060/lino"}, "edited": false, "score": 0, "creation_date": 1501051988, "post_id": 45319522, "comment_id": 77600843, "body": "<i>what have you tried?</i> provide some <b>code</b> or anything you already have achieved"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501052084, "post_id": 45319522, "comment_id": 77600911, "body": "If you want answers in C, then why did you add the <code>java</code> tag? Please pick one or the other."}, {"owner": {"reputation": 1117, "user_id": 6886968, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/39f936b8cac875dd01c7ee968b488635?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/6886968/akshay"}, "edited": false, "score": 0, "creation_date": 1501052091, "post_id": 45319522, "comment_id": 77600916, "body": "Post what you have tried until now..no one is going to write a code for you"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052105, "post_id": 45319522, "comment_id": 77600928, "body": "Since the two arrays are not of same size,hence i&#39;m not able to print correct answer..tbh i can&#39;t really think of any possible logic in C,,if possible do help and provide an answer Lino,thank u"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1501052111, "post_id": 45319522, "comment_id": 77600931, "body": "Also please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052130, "post_id": 45319522, "comment_id": 77600949, "body": "#include&lt;stdio.h&gt; #include&lt;conio.h&gt; void main() { int i,j; \tchar a[]=&quot;pqrstuv&quot;; \tchar b[]=&quot;cdef&quot;; \t  \tfor(i=0;i&lt;=6;i++) \t{ \t\tprintf(&quot;%c&quot;,a[i]); \t\tfor(j=0;j&lt;=i;j++) \t\t{ \t\t\t \t\t\tprintf(&quot;%c&quot;,b[j]); \t\t} \t}  \t }"}, {"owner": {"reputation": 2988, "user_id": 452414, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rDMfs.png?s=128&g=1", "display_name": "babon", "link": "https://stackoverflow.com/users/452414/babon"}, "edited": false, "score": 0, "creation_date": 1501052134, "post_id": 45319522, "comment_id": 77600950, "body": "&quot;WAP&quot; - now that&#39;s new to me :D"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052193, "post_id": 45319522, "comment_id": 77600988, "body": "will do,tbh i&#39;m new here"}, {"owner": {"reputation": 1117, "user_id": 6886968, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/39f936b8cac875dd01c7ee968b488635?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/6886968/akshay"}, "edited": false, "score": 2, "creation_date": 1501052228, "post_id": 45319522, "comment_id": 77601010, "body": "Edit your question..don&#39;t post your code in comments"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052432, "post_id": 45319522, "comment_id": 77601142, "body": "Anyone got the logic yet?"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052603, "post_id": 45319522, "comment_id": 77601257, "body": "Can anyone provide me the answer..?TBH i just made an account here and hoping someone can solve it as it was asked to one of my friend,i could not find the answer anywhere else"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1501052607, "post_id": 45319522, "comment_id": 77601258, "body": "&quot;WAP&quot; is for &quot;want a program&quot; ?"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052643, "post_id": 45319522, "comment_id": 77601281, "body": "WAP means Write a Program"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052664, "post_id": 45319522, "comment_id": 77601296, "body": "Yunnosch can u please help me on this"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501052708, "post_id": 45319522, "comment_id": 77601325, "body": "&quot;Write A Program&quot; as in &quot;for free&quot;, is off-topic here. Check the coment by @Someprogrammerdude on useful things to read."}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052729, "post_id": 45319522, "comment_id": 77601336, "body": "Any help or hint will be really appriciated"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501052800, "post_id": 45319522, "comment_id": 77601376, "body": "Can you at least provide a hint to solve this,,for lets say helping someone as a human?doing some good deed? moreover it will brush up your knowledge aswell"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1501052920, "post_id": 45319522, "comment_id": 77601466, "body": "Here&#39;s an algorithm: In <i>one</i> loop (not nested) print the first character of <code>a</code> followed by the first character of <code>b</code>. In the next iteration print the second character of each array. And so on. If beyond the end of either <code>a</code> or <code>b</code> don&#39;t print anything from it. Continue looping until the end of the longest string."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1501052983, "post_id": 45319522, "comment_id": 77601512, "body": "Ok, I will help. Edit you question to explain more about what you want to achieve. Consider how anybody should know how you want to derive the desired output from input. Shall we guess? Otherwise the anser is <code>printf(&quot;axbyczdefg&quot;\\n&quot;);</code> You need to explain what you tried, the posted code is quite far from anything which could achieve close to the goal. Explain your thinking, explain your obstacles. Show the output you get. Explain what is wrong about it. And please stop writing comments which are basically &quot;WAP&quot; again and again."}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501053042, "post_id": 45319522, "comment_id": 77601548, "body": "Some Programmer dude...thank u so much...will try to implement using the help u provided."}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501053096, "post_id": 45319522, "comment_id": 77601590, "body": "Yunnosch ..ok sir,i&#39;ll try to edit..as i&#39;m new here i really dont know how stackoverflow works but anyway thank u"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1501053141, "post_id": 45319522, "comment_id": 77601620, "body": "Again, please read the list of useful informaiton provided by Someprogrammerdude."}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501053826, "post_id": 45319522, "comment_id": 77602086, "body": "#include&lt;stdio.h&gt; #include&lt;conio.h&gt; void main() { int i,j; \tchar a[]=&quot;pqrstuv&quot;; \tchar b[]=&quot;cdef&quot;; \t  \tfor(i=0;i&lt;=6;i++) \t{ \t\tprintf(&quot;%c&quot;,a[i]); \t\tif(i&lt;4) \t\t{ \t\tprintf(&quot;%c&quot;,b[i]);\t \t\t} \t}  \t }"}, {"owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "edited": false, "score": 0, "creation_date": 1501053840, "post_id": 45319522, "comment_id": 77602093, "body": "this is the answer finally."}], "answers": [{"tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1501053080, "creation_date": 1501053080, "answer_id": 45319884, "question_id": 45319522, "link": "https://stackoverflow.com/questions/45319522/wap-in-c-or-java-consider-two-char-arrays-abcdefg-and-xyz-the-output-mus/45319884#45319884", "title": "WAP in C or java: Consider two char arrays, &quot;abcdefg&quot; and &quot;xyz&quot;...the output must print &quot;axbyczdefg&quot;", "body": "<p>like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    const char *a = \"abcdefg\";\n    const char *b = \"xyz\";\n\n    while(*a || *b){\n        if(*a)\n            putchar(*a++);\n        if(*b)\n            putchar(*b++);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8361925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14be3948362a5fac1dc124460a5c88a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ibes", "link": "https://stackoverflow.com/users/8361925/ibes"}, "is_accepted": false, "score": 0, "last_activity_date": 1501053339, "creation_date": 1501053339, "answer_id": 45319966, "question_id": 45319522, "link": "https://stackoverflow.com/questions/45319522/wap-in-c-or-java-consider-two-char-arrays-abcdefg-and-xyz-the-output-mus/45319966#45319966", "title": "WAP in C or java: Consider two char arrays, &quot;abcdefg&quot; and &quot;xyz&quot;...the output must print &quot;axbyczdefg&quot;", "body": "<p>Maybe something like this</p>\n\n<pre><code>@Test\npublic void test() {\n    List&lt;String&gt; strings1 = Arrays.asList(\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\");\n    List&lt;String&gt; strings2 = Arrays.asList(\"x\", \"y\", \"z\");\n\n    List&lt;String&gt; result = join(strings1, strings2);\n    System.out.println(String.join(\" \", result));\n}\n\nList&lt;String&gt; join(List&lt;String&gt; first, List&lt;String&gt; second) {\n    List&lt;String&gt; result = new ArrayList&lt;&gt;();\n\n    for (int i = 0; i &lt; first.size(); i++) {\n       result.add(first.get(i));\n\n       if (i &lt; second.size()) {\n           result.add(second.get(i));\n       }\n    }\n\n    if ( second.size() &gt; first.size() ) {\n        result.addAll(second.subList(first.size(), second.size()));\n    }\n\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8368046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FSuCkSsQ2Ig/AAAAAAAAAAI/AAAAAAAAAII/IzXsajMUrgE/photo.jpg?sz=128", "display_name": "Rakshit Bhardwaj", "link": "https://stackoverflow.com/users/8368046/rakshit-bhardwaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1501053732, "creation_date": 1501051881, "last_edit_date": 1501053174, "question_id": 45319522, "link": "https://stackoverflow.com/questions/45319522/wap-in-c-or-java-consider-two-char-arrays-abcdefg-and-xyz-the-output-mus", "title": "WAP in C or java: Consider two char arrays, &quot;abcdefg&quot; and &quot;xyz&quot;...the output must print &quot;axbyczdefg&quot;", "body": "<p>Consider two char arrays, \"abcdefg\" and \"xyz\".</p>\n\n<p>The output must print \"axbyczdefg\", please help I've been stuck on this since morning.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nvoid main() {\n    int i,j;\n    char a[]=\"abcdefg\";\n    char b[]=\"xyz\";\n    for(i=0;i&lt;=6;i++) {\n        printf(\"%c\",a[i]);\n        for(j=0;j&lt;=i;j++) {\n             printf(\"%c\",b[j]);\n        }\n     }\n}\n</code></pre>\n"}, {"tags": ["c", "opencl"], "comments": [{"owner": {"reputation": 1876, "user_id": 2353816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/t5smr.jpg?s=128&g=1", "display_name": "Anders Cedronius", "link": "https://stackoverflow.com/users/2353816/anders-cedronius"}, "edited": false, "score": 3, "creation_date": 1501053229, "post_id": 45319076, "comment_id": 77601666, "body": "You should not have the inner loop in the kernel program. The kernel program should just do the math YUV-&gt;RGB for a single &#39;element&#39; then you use clEnqueueNDRangeKernel to segment the workers to the GPU&#39;s."}, {"owner": {"reputation": 539, "user_id": 6525712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/656b10da18de6f302492451ce5322494?s=128&d=identicon&r=PG&f=1", "display_name": "a_sid", "link": "https://stackoverflow.com/users/6525712/a-sid"}, "reply_to_user": {"reputation": 1876, "user_id": 2353816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/t5smr.jpg?s=128&g=1", "display_name": "Anders Cedronius", "link": "https://stackoverflow.com/users/2353816/anders-cedronius"}, "edited": false, "score": 0, "creation_date": 1501081877, "post_id": 45319076, "comment_id": 77623618, "body": "@AndersCedronius I have updated my code to include your suggestion. However, my kernel is not being recognized now. I have included the details in my question above."}, {"owner": {"reputation": 423, "user_id": 6403908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c417abbf02cc56b054e2b2404e6358a4?s=128&d=identicon&r=PG&f=1", "display_name": "Jovasa", "link": "https://stackoverflow.com/users/6403908/jovasa"}, "edited": false, "score": 0, "creation_date": 1501091466, "post_id": 45319076, "comment_id": 77630342, "body": "Don&#39;t go just guessing things. If you want to do something meaningful grab a book and start reading, you won&#39;t get anywhere otherwise."}, {"owner": {"reputation": 539, "user_id": 6525712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/656b10da18de6f302492451ce5322494?s=128&d=identicon&r=PG&f=1", "display_name": "a_sid", "link": "https://stackoverflow.com/users/6525712/a-sid"}, "reply_to_user": {"reputation": 423, "user_id": 6403908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c417abbf02cc56b054e2b2404e6358a4?s=128&d=identicon&r=PG&f=1", "display_name": "Jovasa", "link": "https://stackoverflow.com/users/6403908/jovasa"}, "edited": false, "score": 0, "creation_date": 1501105362, "post_id": 45319076, "comment_id": 77637829, "body": "@Jovasa I have referred to quite a few sources to reach my current level of understanding of OpenCL. I asked this question because I am struggling to apply my knowledge to this particular function."}], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 6525712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/656b10da18de6f302492451ce5322494?s=128&d=identicon&r=PG&f=1", "display_name": "a_sid", "link": "https://stackoverflow.com/users/6525712/a-sid"}, "edited": false, "score": 0, "creation_date": 1501359376, "post_id": 45348469, "comment_id": 77747949, "body": "I made changes in my code according to the advice you have given me. My program abruptly terminates when I run it. Why could this be happening? Could this be a result of faulty memory allocation?"}], "tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": true, "score": 1, "last_activity_date": 1501152147, "creation_date": 1501152147, "answer_id": 45348469, "question_id": 45319076, "link": "https://stackoverflow.com/questions/45319076/opencl-kernel-causes-application-to-run-indefinitely-and-only-stops-after-i-shut/45348469#45348469", "title": "OpenCL kernel causes application to run indefinitely and only stops after I shut down my IDE", "body": "<p>I don't know if this is the only cause for your problems (there may be more I haven't yet spotted), but you have a type mismatch in your <code>YCbCr_MCU</code> kernel argument. You can't have pointer-to-pointer arguments, this is true. Simply removing the <code>*</code> won't fix it though.</p>\n\n<p>In particular, the line</p>\n\n<pre><code>MCU_Cb = &amp;YCbCr_MCU[1];\n</code></pre>\n\n<p>in the kernel gets 1 byte past the start of whatever YCbCr_MCU points to, which, looking at the host code, is actually the start of the array of pointers, not the array of pixels.</p>\n\n<pre><code>ret = clSetKernelArg(color_kernel, 0, sizeof(cl_mem), (void *)&amp;colorMCU_GPU);\n</code></pre>\n\n<p>It looks like <code>YCbCr_MCU</code> is supposed to be an array of 3 pointers to the Y, Cb, Cr planes containing your source pixels. You will need to pass these to your kernel as 3 direct pointers to the 3 arrays instead of a pointer to the 3 pointers. In other words, turn it into Y, Cb, and, Cr arguments, and set them to <code>colorMCU_GPU[0]</code> through <code>colorMCU_GPU[2]</code> on the host.</p>\n"}], "owner": {"reputation": 539, "user_id": 6525712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/656b10da18de6f302492451ce5322494?s=128&d=identicon&r=PG&f=1", "display_name": "a_sid", "link": "https://stackoverflow.com/users/6525712/a-sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 45348469, "answer_count": 1, "score": 1, "last_activity_date": 1501372588, "creation_date": 1501050542, "last_edit_date": 1501372588, "question_id": 45319076, "link": "https://stackoverflow.com/questions/45319076/opencl-kernel-causes-application-to-run-indefinitely-and-only-stops-after-i-shut", "title": "OpenCL kernel causes application to run indefinitely and only stops after I shut down my IDE", "body": "<p>I am trying to run portions of <a href=\"https://github.com/claf/MJPEG/tree/master/tima_seq_version/src\" rel=\"nofollow noreferrer\">this</a> code on the GPU using OpenCL. I am now trying to run the function which deals with YCbCr to RGB conversion. </p>\n\n<p><em>Please note that as of now I am not trying to optimize the GPU code. I simply want an output identical to that on the CPU.</em></p>\n\n<p>The function is originally written like this:</p>\n\n<pre><code>void YCbCr_to_ARGB(uint8_t *YCbCr_MCU[3], uint32_t *RGB_MCU, uint32_t nb_MCU_H, uint32_t nb_MCU_V)\n{\n\n    uint8_t *MCU_Y, *MCU_Cb, *MCU_Cr;\n    int R, G, B;\n    uint32_t ARGB;\n    uint8_t index, i, j;\n\n    MCU_Y = YCbCr_MCU[0];\n    MCU_Cb = YCbCr_MCU[1];\n    MCU_Cr = YCbCr_MCU[2];\n    for (i = 0; i &lt; 8 * nb_MCU_V; i++) {\n        for (j = 0; j &lt; 8 * nb_MCU_H; j++) {\n            index = i * (8 * nb_MCU_H)  + j;\n            R = (MCU_Cr[index] - 128) * 1.402f + MCU_Y[index];\n            B = (MCU_Cb[index] - 128) * 1.7772f + MCU_Y[index];\n            G = MCU_Y[index] - (MCU_Cb[index] - 128) * 0.34414f -\n                (MCU_Cr[index] - 128) * 0.71414f;\n            /* Saturate */\n            if (R &gt; 255)\n                R = 255;\n            if (R &lt; 0)\n                R = 0;\n            if (G &gt; 255)\n                G = 255;\n            if (G &lt; 0)\n                G = 0;\n            if (B &gt; 255)\n                B = 255;\n            if (B &lt; 0)\n                B = 0;\n            ARGB = ((R &amp; 0xFF) &lt;&lt; 16) | ((G &amp; 0xFF) &lt;&lt; 8) | (B &amp; 0xFF);\n            // ARGB = 0xFF &lt;&lt; 8;\n            RGB_MCU[(i * (8 * nb_MCU_H) + j)] = ARGB;\n        }\n    }\n}\n</code></pre>\n\n<p>The variables of this function are declared in <code>main.c</code> in the following way:</p>\n\n<pre><code>cl_uchar* YCbCr_MCU[3] = { NULL, NULL, NULL};\ncl_uint* RGB_MCU = NULL;\n</code></pre>\n\n<p>Memory for these variables is being allocated in this way:</p>\n\n<pre><code>if (screen_init_needed == 1) \n{\n                    screen_init_needed = 0;\n\n.....\n.....\n//Some code\n\nfor (index = 0 ; index &lt; SOF_section.n ; index++) {\nYCbCr_MCU[index] = malloc(MCU_sx * MCU_sy * max_ss_h * max_ss_v);\n\nYCbCr_MCU_ds[index] = malloc(MCU_sx * MCU_sy * max_ss_h * max_ss_v);\n\n}\n\nRGB_MCU = malloc (MCU_sx * MCU_sy * max_ss_h * max_ss_v * sizeof(cl_int));\n}\n\nbreak;\n}\n</code></pre>\n\n<p>I directly copied and pasted it in my <code>.cl</code> file and made a few minor changes to make it agree with OpenCL standards. My modified OpenCL code looked like this:</p>\n\n<pre><code>__kernel void YCbCr_to_ARGB(__global uchar* YCbCr_MCU[3], __global uint* RGB_MCU, uint nb_MCU_H, uint nb_MCU_V)\n    {        \n        __global uchar *MCU_Y, *MCU_Cb, *MCU_Cr;\n        int R, G, B;\n        uint ARGB;\n        uchar index, i, j;\n\n        MCU_Y = YCbCr_MCU[0];\n        MCU_Cb = YCbCr_MCU[1];\n        MCU_Cr = YCbCr_MCU[2];\n\n//Same code as the first code snippet\n        ......\n        ......\n        ......\n\n    }\n</code></pre>\n\n<p>When I built and ran my application with the above kernel code in my <code>.cl</code> file, I got errors. One of the errors stated that OpenCL doesn't allow pointer to pointer arguments.</p>\n\n<p>In order to get around these errors, I modified my code again to look like this:</p>\n\n<pre><code>__kernel void YCbCr_to_ARGB(__global uchar YCbCr_MCU[3], __global uint* RGB_MCU, uint nb_MCU_H, uint nb_MCU_V)\n{         \n            __global uchar *MCU_Y, *MCU_Cb, *MCU_Cr;\n            int R, G, B;\n            uint ARGB;\n            uchar index, i, j;\n\n            MCU_Y = &amp;YCbCr_MCU[0];\n            MCU_Cb = &amp;YCbCr_MCU[1];\n            MCU_Cr = &amp;YCbCr_MCU[2];\n\n    //Same code as the first code snippet\n            ......\n            ......\n            ......   \n}\n</code></pre>\n\n<p>When I built and ran the application again, I did not get any errors. This prompted me to write the host code for this kernel.</p>\n\n<p>It looks like this:</p>\n\n<pre><code> color_kernel= clCreateKernel(program, \"YCbCr_to_ARGB\", &amp;ret);\n\n//YCbCr_MCU for YCbCrtoARGB\ncl_mem colorMCU_GPU= clCreateBuffer(context, CL_MEM_READ_WRITE, 3 * sizeof(cl_uchar), NULL, &amp;ret);\n\n\n//rgb_MCU for YCbCrtoARGB\ncl_mem RGB_GPU= clCreateBuffer(context, CL_MEM_READ_WRITE,  sizeof(cl_uint), NULL, &amp;ret);\n</code></pre>\n\n<p>I called the kernel arguments exactly where the original function was called in <code>main.c</code>. I performed the remaining steps for this kernel in the following way:</p>\n\n<pre><code>if(color&amp;&amp;(SOF_section.n&gt;1)\n{\nret = clEnqueueWriteBuffer(command_queue, colorMCU_GPU, CL_TRUE, 0, 3 * sizeof(cl_uchar), YCbCr_MCU, 0, NULL, NULL);\n\nret = clEnqueueWriteBuffer(command_queue, RGB_GPU, CL_TRUE, 0,  sizeof(cl_uint), RGB_MCU, 0, NULL, NULL);\n\nret = clSetKernelArg(color_kernel, 0, sizeof(cl_mem), (void *)&amp;colorMCU_GPU);\nret |= clSetKernelArg(color_kernel, 1, sizeof(cl_mem), (void *)&amp;RGB_GPU);\nret = clSetKernelArg(color_kernel, 2, sizeof(cl_uint), (void *)&amp;max_ss_h);\nret |= clSetKernelArg(color_kernel, 3, sizeof(cl_uint), (void *)&amp;max_ss_v);\n\nret = clEnqueueTask(command_queue, color_kernel, 0, NULL, NULL);\n\nret = clEnqueueReadBuffer(command_queue, RGB_GPU, CL_TRUE, 0, sizeof(cl_uint), RGB_MCU, 0, NULL, NULL);\n\n//YCbCr_to_ARGB(YCbCr_MCU, RGB_MCU, max_ss_h, max_ss_v);\n</code></pre>\n\n<p>After I run and build the code with these arguments, the code keeps running indefinitely (The output of this is supposed to be a movie clip running on a screen. With this code, I only get a black screen). I have to close Eclipse and reopen it to make additional changes to the code after this.</p>\n\n<p><strong>What is causing the program to behave like this? Is there anyway to safely run this function on the GPU?</strong></p>\n\n<p>Update:</p>\n\n<p>I followed Anders Cedronius' advice and changed my kernel code in the following way:</p>\n\n<pre><code>__kernel void YCbCr_to_ARGB(__global uchar YCbCr_MCU[3], __global uint* RGB_MCU, uint nb_MCU_H, uint nb_MCU_V)\n{\n   printf(\"Doing color conversion\\n\");  \n\n    __global uchar *MCU_Y, *MCU_Cb, *MCU_Cr;\n    int R, G, B;\n    uint ARGB;\n    uchar index, i, j;\n\n    i= get_global_id(0);\n    j= get_global_id(1);\n\n    MCU_Y = &amp;YCbCr_MCU[0];\n    MCU_Cb = &amp;YCbCr_MCU[1];\n    MCU_Cr = &amp;YCbCr_MCU[2];\n\n    if (i &lt; 8 * nb_MCU_V &amp;&amp; j &lt; 8 * nb_MCU_H)\n    {\n            index = i * (8 * nb_MCU_H)  + j;\n            R = (MCU_Cr[index] - 128) * 1.402f + MCU_Y[index];\n            B = (MCU_Cb[index] - 128) * 1.7772f + MCU_Y[index];\n            G = MCU_Y[index] - (MCU_Cb[index] - 128) * 0.34414f -\n                (MCU_Cr[index] - 128) * 0.71414f;\n\n\n            /* Saturate */\n            if (R &gt; 255)\n                R = 255;\n            if (R &lt; 0)\n                R = 0;\n            if (G &gt; 255)\n                G = 255;\n            if (G &lt; 0)\n                G = 0;\n            if (B &gt; 255)\n                B = 255;\n            if (B &lt; 0)\n                B = 0;\n            ARGB = ((R &amp; 0xFF) &lt;&lt; 16) | ((G &amp; 0xFF) &lt;&lt; 8) | (B &amp; 0xFF);\n            // ARGB = 0xFF &lt;&lt; 8;\n        RGB_MCU[(i * (8 * nb_MCU_H) + j)] = ARGB;\n\n\n}\n\nprintf(\"Finished color conversion\\n\");\n}\n</code></pre>\n\n<p>My host code for calling the kernel now looks like this:</p>\n\n<pre><code>color_kernel= clCreateKernel(program, \"YCbCr_to_ARGB\", &amp;ret);\n</code></pre>\n\n<p>I am setting the work size and the kernel arguments in the following way:</p>\n\n<pre><code>ret = clEnqueueWriteBuffer(command_queue, colorMCU_GPU, CL_TRUE, 0, 3*sizeof(cl_uchar), YCbCr_MCU, 0, NULL, NULL);\nchk(ret, \"clEnqueueWriteBuffer\");\n\nret = clEnqueueWriteBuffer(command_queue, RGB_GPU, CL_TRUE, 0,  sizeof(cl_uint), RGB_MCU, 0, NULL, NULL);\nchk(ret, \"clEnqueueWriteBuffer\");\n\n\nret = clSetKernelArg(color_kernel, 0, sizeof(cl_mem), (void *)&amp;colorMCU_GPU);\nret |= clSetKernelArg(color_kernel, 1, sizeof(cl_mem), (void *)&amp;RGB_GPU);\nret = clSetKernelArg(color_kernel, 2, sizeof(cl_uint), (void *)&amp;max_ss_h);\nret |= clSetKernelArg(color_kernel, 3, sizeof(cl_uint), (void *)&amp;max_ss_v);\n\n\nsize_t itemColor[2] = {1, 1};\n\nret = clEnqueueNDRangeKernel(command_queue, kernel, 2, NULL, itemColor, NULL, 0, NULL, NULL);\nchk(ret, \"clEnqueueNDRange\");\n\nret = clEnqueueReadBuffer(command_queue, RGB_GPU, CL_TRUE, 0, sizeof(cl_uint), RGB_MCU, 0, NULL, NULL);\n\n\nclFinish(command_queue);\n</code></pre>\n\n<p>I ran this code and I NO LONGER get a black screen. However, the kernel for \"YCbCr to RGB\" is not being recognized now. <strong>Even my printf comments are not being displayed on the output console. It is like my code does not have the color conversion function.</strong></p>\n\n<p>Update:</p>\n\n<p>I hadn't changed the name of my kernel in the command <code>EnqueueNDRangeKernel</code>. I changed the name and now the printf statements are appearing on the console. However, I am not still not getting the correct output.</p>\n\n<pre><code>size_t itemColor[2] = {1, 1};\n\nret = clEnqueueNDRangeKernel(command_queue, color_kernel, 2, NULL, itemColor, NULL, 0, NULL, NULL);\n\nchk(ret, \"clEnqueueNDRange\");\n\nclFinish(command_queue);\n</code></pre>\n\n<p>Update:</p>\n\n<p>I followed pmdj's advice and made changes to my kernel code. It now looks like this:</p>\n\n<pre><code>__kernel void YCbCr_to_ARGB(__global uchar* Y_GPU, __global uchar* Cb_GPU, __global uchar* Cr_GPU, __global uint* RGB_MCU, uint nb_MCU_H, uint nb_MCU_V)\n{  \n    __global uchar *MCU_Y, *MCU_Cb, *MCU_Cr;\n    int R, G, B;\n    uint ARGB;\n    uchar index, i, j;\n\nunsigned char   iid= get_global_id(0);\nunsigned char   jid= get_global_id(1);\n\n    // MCU_Y = &amp;YCbCr_MCU[0];\n      // MCU_Cb = &amp;YCbCr_MCU[1];\n      // MCU_Cr = &amp;YCbCr_MCU[2];\n\n      MCU_Y= Y_GPU;\n      MCU_Cb= Cb_GPU;\n      MCU_Cr= Cr_GPU;\n\n    if (iid &lt;= (8 * nb_MCU_V) &amp;&amp; jid &lt;= (8 * nb_MCU_H))\n    {\n\n            index = iid * (8 * nb_MCU_H)  + jid;\n            R = (MCU_Cr[index] - 128) * 1.402f + MCU_Y[index];\n            B = (MCU_Cb[index] - 128) * 1.7772f + MCU_Y[index];\n            G = MCU_Y[index] - (MCU_Cb[index] - 128) * 0.34414f -\n                (MCU_Cr[index] - 128) * 0.71414f;\n\n\n            /* Saturate */\n            if (R &gt; 255)\n                R = 255;\n            if (R &lt; 0)\n                R = 0;\n            if (G &gt; 255)\n                G = 255;\n            if (G &lt; 0)\n                G = 0;\n            if (B &gt; 255)\n                B = 255;\n            if (B &lt; 0)\n                B = 0;\n            ARGB = ((R &amp; 0xFF) &lt;&lt; 16) | ((G &amp; 0xFF) &lt;&lt; 8) | (B &amp; 0xFF);\n\n        RGB_MCU[(iid * (8 * nb_MCU_H) + jid)] = ARGB;\n\n        }\n}\n</code></pre>\n\n<p>In the host code, I created and allocated memory for 4 new variables:</p>\n\n<pre><code>Y_ForGPU= (cl_uchar *)malloc(MCU_sx * MCU_sy * max_ss_h * max_ss_v);\n\nCb_ForGPU= (cl_uchar *)malloc(MCU_sx * MCU_sy * max_ss_h * max_ss_v);\n\nCr_ForGPU= (cl_uchar *)malloc(MCU_sx * MCU_sy * max_ss_h * max_ss_v);\n\n//Now will do it for RGB\nRGB_testing= (cl_uint *)malloc (MCU_sx * MCU_sy * max_ss_h * max_ss_v * sizeof(cl_int));\n</code></pre>\n\n<p>I created buffers in the following way:</p>\n\n<pre><code>cl_mem for_Y= clCreateBuffer(context, CL_MEM_READ_WRITE| CL_MEM_COPY_HOST_PTR, (MCU_sx * MCU_sy * max_ss_h * max_ss_v), Y_ForGPU, &amp;ret);\n\n\ncl_mem for_Cb= clCreateBuffer(context, CL_MEM_READ_WRITE| CL_MEM_COPY_HOST_PTR, (MCU_sx * MCU_sy * max_ss_h * max_ss_v), Cb_ForGPU , &amp;ret);\n\ncl_mem for_Cr= clCreateBuffer(context, CL_MEM_READ_WRITE| CL_MEM_COPY_HOST_PTR, (MCU_sx * MCU_sy * max_ss_h * max_ss_v), Cr_ForGPU, &amp;ret);\n\n//rgb_MCU for YCbCrtoARGB\ncl_mem RGB_GPU= clCreateBuffer(context, CL_MEM_READ_WRITE, (MCU_sx * MCU_sy * max_ss_h * max_ss_v * sizeof(cl_int)), NULL, &amp;ret);\n</code></pre>\n\n<p>I then set the kernel arguments, executed the kernel and sent the computed data back on the host:</p>\n\n<pre><code>ret = clSetKernelArg(color_kernel, 0, sizeof(cl_mem), &amp;for_Y);\nret |= clSetKernelArg(color_kernel, 1, sizeof(cl_mem), &amp;for_Cb);\nret |= clSetKernelArg(color_kernel, 2, sizeof(cl_mem), &amp;for_Cr);\nret |= clSetKernelArg(color_kernel, 3, sizeof(cl_mem), &amp;RGB_GPU);\nret |= clSetKernelArg(color_kernel, 4, sizeof(cl_uint), &amp;max_ss_h);\nret |= clSetKernelArg(color_kernel, 5, sizeof(cl_uint), &amp;max_ss_v);\n\n\nconst size_t itemColor[2] = {100, 100};\n\nret = clEnqueueNDRangeKernel(command_queue, color_kernel, 2, NULL, itemColor, NULL, 0, NULL, NULL);\nclFinish(command_queue);\n\n//Copy result to the host\nret = clEnqueueReadBuffer(command_queue, RGB_GPU, CL_TRUE, 0, (MCU_sx * MCU_sy * max_ss_h * max_ss_v * sizeof(cl_int)), RGB_testing, 0, NULL, NULL);\n</code></pre>\n\n<p>However, now my code simply terminates abruptly. Why might this be happening?</p>\n\n<p>Update:</p>\n\n<p>My code is now working. The problems were probably occurring due to differences in the pointers. I set the Y, Cb, Cr and RGB variables (which I created) equal to the original variables in the host code. </p>\n\n<pre><code>//---Setting color variables equal to array elements----//\n\nY_ForGPU= YCbCr_MCU[0];\nCb_ForGPU= YCbCr_MCU[1];\nCr_ForGPU= YCbCr_MCU[2];\n\n//----RGB is being assigned value-----//\n\nRGB_testing= RGB_MCU;\n</code></pre>\n"}, {"tags": ["c", "geolocation", "geometry", "compass-geolocation"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1501050374, "post_id": 45318930, "comment_id": 77599846, "body": "&quot;Does not work&quot; is not a proper error description. Which result do you expect and what do you get? Does your formula work on paper and you have a C problem or is your formula already wrong?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1501050498, "post_id": 45318930, "comment_id": 77599911, "body": "Besides missing mandatory information in your question, a first suggestion would be that you should look at the parameters of <code>atan2</code> a bit closer. What is expected and what do you pass?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501051243, "post_id": 45318930, "comment_id": 77600362, "body": "You say &quot;compass heading&quot; but make no correction from &quot;true north&quot; to &quot;magnetic north&quot;."}, {"owner": {"reputation": 3, "user_id": 5706017, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FcH3F7ZSxGk/AAAAAAAAAAI/AAAAAAAAACs/rFOLAptPUDA/photo.jpg?sz=128", "display_name": "Darshan Shah", "link": "https://stackoverflow.com/users/5706017/darshan-shah"}, "edited": false, "score": 0, "creation_date": 1501051436, "post_id": 45318930, "comment_id": 77600484, "body": "When I pass same angle, it gives me random number. Also I think I should pass atan2(Latitude, Longitude) Right?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1501051517, "post_id": 45318930, "comment_id": 77600537, "body": "The earth being not flat the algorithm is certainly more complicated than calculating atan2."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501051562, "post_id": 45318930, "comment_id": 77600568, "body": "&quot;Does not work&quot; because your approach is naive. <a href=\"http://www.igismap.com/formula-to-find-bearing-or-heading-angle-between-two-points-latitude-longitude/\" rel=\"nofollow noreferrer\">See this</a>, found in a few seconds."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1501051576, "post_id": 45318930, "comment_id": 77600583, "body": "A quick Google search: <a href=\"http://www.movable-type.co.uk/scripts/latlong.html\" rel=\"nofollow noreferrer\">movable-type.co.uk/scripts/latlong.html</a>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1501051665, "post_id": 45318930, "comment_id": 77600640, "body": "And please when asking such a question you should include the input and the expected and the actual output. And also read this: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501051751, "post_id": 45318930, "comment_id": 77600688, "body": "Did you forget to convert the inputs to radians? &quot;I am passing lat1, long1, lat2, long2 in degree&quot;."}, {"owner": {"reputation": 3, "user_id": 5706017, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FcH3F7ZSxGk/AAAAAAAAAAI/AAAAAAAAACs/rFOLAptPUDA/photo.jpg?sz=128", "display_name": "Darshan Shah", "link": "https://stackoverflow.com/users/5706017/darshan-shah"}, "edited": false, "score": 0, "creation_date": 1501052009, "post_id": 45318930, "comment_id": 77600859, "body": "I write code with reference of <a href=\"https://stackoverflow.com/questions/4403515/heading-from-point-a-to-point-b-in-2d-space\" title=\"heading from point a to point b in 2d space\">stackoverflow.com/questions/4403515/&hellip;</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1501052093, "post_id": 45318930, "comment_id": 77600918, "body": "@DarshanShah show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1501055573, "post_id": 45318930, "comment_id": 77603307, "body": "@DarshanShah &quot;Also I think I should pass atan2(Latitude, Longitude) Right?&quot; Wrong. <code>longitude</code> and <code>latitude</code> are differences of angles. My manpage for <code>atan2</code> does not ask for angles or difference of angles."}, {"owner": {"reputation": 3, "user_id": 5706017, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FcH3F7ZSxGk/AAAAAAAAAAI/AAAAAAAAACs/rFOLAptPUDA/photo.jpg?sz=128", "display_name": "Darshan Shah", "link": "https://stackoverflow.com/users/5706017/darshan-shah"}, "edited": false, "score": 0, "creation_date": 1501056680, "post_id": 45318930, "comment_id": 77604044, "body": "From my man page &quot;double atan2(double y, double x);&quot; And here I am passing double value"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1501057007, "post_id": 45318930, "comment_id": 77604258, "body": "@Darshan Shah atan2 approach is not applicable to geo coordinates. Look at <code>latlong</code> link given by Michael Walz"}, {"owner": {"reputation": 3, "user_id": 5706017, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FcH3F7ZSxGk/AAAAAAAAAAI/AAAAAAAAACs/rFOLAptPUDA/photo.jpg?sz=128", "display_name": "Darshan Shah", "link": "https://stackoverflow.com/users/5706017/darshan-shah"}, "edited": false, "score": 0, "creation_date": 1501057769, "post_id": 45318930, "comment_id": 77604771, "body": "I think in this link also they are using atan2. See code below of link and LatLon.prototype.bearingTo = function(point) of <a href=\"http://www.movable-type.co.uk/scripts/latlong.html\" rel=\"nofollow noreferrer\">movable-type.co.uk/scripts/latlong.html</a>"}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1501060485, "post_id": 45318930, "comment_id": 77606812, "body": "But that code accounts for spherical coordinates. Note that y and x there are not just lat and long differences"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1501064419, "post_id": 45318930, "comment_id": 77609872, "body": "@DarshanShah if you look a bit closer on atan2 (the meaning, not only the signature) you might find out that the parameters are distances in x and y direction. Not angles and not differences of angles. The type alone is not sufficient to make a valid parameter."}, {"owner": {"reputation": 3, "user_id": 5706017, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FcH3F7ZSxGk/AAAAAAAAAAI/AAAAAAAAACs/rFOLAptPUDA/photo.jpg?sz=128", "display_name": "Darshan Shah", "link": "https://stackoverflow.com/users/5706017/darshan-shah"}, "edited": false, "score": 0, "creation_date": 1501065175, "post_id": 45318930, "comment_id": 77610409, "body": "Ok thanks. So for this I have to find distance between two points. So angle = atan2((lon2 - lon1), (lat2 - lat1)); should work."}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1501072450, "post_id": 45318930, "comment_id": 77615749, "body": "In your updated code - atan2 returns value in radians, not degrees"}], "answers": [{"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1501132072, "creation_date": 1501132072, "answer_id": 45341840, "question_id": 45318930, "link": "https://stackoverflow.com/questions/45318930/find-compass-heading-with-geo-cordinates/45341840#45341840", "title": "Find compass heading with geo-cordinates", "body": "<pre><code>angle = atan2(y,x);\nprintf(\"Angle: %lf\\n\", radiansToDegrees(fmod(angle + 360.0, 360.0)));\n</code></pre>\n\n<p>Here you have got <strong>radian</strong> value of angle, so adding 360 <strong>degrees</strong> is nonsense.\nPossible corrections:</p>\n\n<pre><code>radiansToDegrees(fmod(angle + 2*Pi, 2*Pi))\nor \nfmod(radiansToDegrees(angle) + 360.0, 360.0)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5706017, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FcH3F7ZSxGk/AAAAAAAAAAI/AAAAAAAAACs/rFOLAptPUDA/photo.jpg?sz=128", "display_name": "Darshan Shah", "link": "https://stackoverflow.com/users/5706017/darshan-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1501650425, "creation_date": 1501050031, "last_edit_date": 1501650425, "question_id": 45318930, "link": "https://stackoverflow.com/questions/45318930/find-compass-heading-with-geo-cordinates", "title": "Find compass heading with geo-cordinates", "body": "<p>I would like to find compass head from two geo location.\nI am writing C application. I write a function like,</p>\n\n<pre><code>double CalculateHeading(double lat1, double long1, double lat2, double long2)\n{\n   double Latitude = lat1 - lat2;\n   double Longitude = long1 - long2;\n   double angle = 0;\n\n   printf(\"\\n#################################\\n\");\n   printf(\"Lat1: %lf Lat2: %lf\\n\", lat1, lat2);\n   printf(\"Long1: %lf Long2: %lf\\n\", long1, long2);\n   printf(\"Lat Diff: %lf\\n\", Latitude);\n   printf(\"Long Diff: %lf\\n\", Longitude);\n   angle = atan2(Longitude, Latitude);\n   angle = radiansToDegrees(angle);\n   printf(\"Angle: %lf\\n\", angle);\n   printf(\"#################################\\n\");\n   return angle;\n}\n</code></pre>\n\n<p>But this not works on the same location. Here I am passing lat1, long1, lat2, long2 in degree.\nCan anyone help me out here?</p>\n\n<p>Updated Code from <a href=\"http://www.movable-type.co.uk/scripts/latlong.html\" rel=\"nofollow noreferrer\">http://www.movable-type.co.uk/scripts/latlong.html</a> which is working,</p>\n\n<pre><code>#define degreesToRadians(angleDegrees) (angleDegrees * M_PI / 180.0)\n#define radiansToDegrees(angleRadians) (angleRadians * 180.0 / M_PI)\n\ndouble CalculateHeading(double lat1, double lon1, double lat2, double lon2)\n{\n   double lat1_rad = degreesToRadians(lat1);\n   double lat2_rad = degreesToRadians(lat2);\n   double diffLon = lon2-lon1;\n   double dLon = degreesToRadians(diffLon);\n   double y = sin(dLon) * cos(lat2_rad);\n   double x = cos(lat1_rad) * sin(lat2_rad) - sin(lat1_rad) * cos(lat2_rad) * cos(dLon);\n   double angle = 0;\n\n   angle = atan2(y,x);\n   printf(\"Angle: %lf\\n\", radiansToDegrees(fmod(angle + 360.0, 360.0)));\n   return angle;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "posix", "pid"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501049737, "post_id": 45318767, "comment_id": 77599498, "body": "The <code>exec</code> family of functions is to execute <i>one</i> program only. You can&#39;t use them to execute multiple programs. Especially not through the <code>argv</code> array, which <code>exec</code> doesn&#39;t use to find the program to execute."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501049846, "post_id": 45318767, "comment_id": 77599563, "body": "You will have to use a loop. <code>execve</code> will execute only the first program and treat the other commands as arguments to the first. You are right, you would have to use a loop."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501050335, "post_id": 45318767, "comment_id": 77599827, "body": "Oh and remember to <code>fork</code> a new process in the loop, as a successful <code>execve</code> call will not return."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501051228, "post_id": 45318767, "comment_id": 77600349, "body": "The tool for executing a batch of commands is the shell, so you could <code>execve()</code> <code>&#47;bin&#47;sh</code> with a proper argument list --- or as already stated, do yourself what a shell does (<code>fork()</code>, <code>execve()</code> and <code>wait()</code> ... or <code>posix_spawn()</code> and <code>wait()</code>)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501145439, "post_id": 45318767, "comment_id": 77652720, "body": "@Someprogrammerdude, better said <i>is a system call designed only to load a program image in memory and start executing it</i>.  IMHO."}], "answers": [{"comments": [{"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1502865696, "post_id": 45319013, "comment_id": 78371266, "body": "Hi @Linuxknowledgeseeker if this or any answer has solved your question please consider <a href=\"https://meta.stackexchange.com/q/5234/179419\">accepting it</a> by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this."}], "tags": [], "owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "is_accepted": false, "score": 4, "last_activity_date": 1501052779, "last_edit_date": 1501052779, "creation_date": 1501050328, "answer_id": 45319013, "question_id": 45318767, "link": "https://stackoverflow.com/questions/45318767/execve-how-can-i-initialise-char-argv-with-multiple-commands-instead-of-a-s/45319013#45319013", "title": "execve: how can I initialise char *argv[ ] with multiple commands instead of a single command?", "body": "<p>You can not execute multiple commands with just one <code>execve</code> call. In a loop you will need to <code>fork</code> your program to execute multiple <code>execve</code> calls. In the <a href=\"https://linux.die.net/man/2/execve\" rel=\"nofollow noreferrer\">manpage of execve</a> it's written:</p>\n\n<blockquote>\n  <p>execve() does not return on success, and the text, data, bss, and stack of the calling process are overwritten by that of the program loaded. [...]</p>\n  \n  <p>Return value<br>\n  On success, execve() does not return, on  error  -1  is  returned,  and\n         errno is set appropriately.</p>\n</blockquote>\n\n<p><strong>Method using fork:</strong></p>\n\n<p>Output:</p>\n\n<pre><code>Hello 1\nHello 2\nHello 3\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n   int idx;\n   char *argv[][4] = { {\"/bin/sh\", \"-c\", \"echo Hello 1\", 0},\n                       {\"/bin/sh\", \"-c\", \"echo Hello 2\", 0},\n                       {\"/bin/sh\", \"-c\", \"echo Hello 3\", 0} };\n   for (idx = 0; idx &lt; 3; idx++)\n   {\n      if (0 == fork()) continue;\n      execve(argv[idx][0], &amp;argv[idx][0], NULL);\n      fprintf(stderr, \"Oops!\\n\");\n   }\n\n   return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Method using command concatenation:</strong><br>\nA workaround would be to concate the commands using the shell:</p>\n\n<p>Output:</p>\n\n<pre><code>Hello 1\nHello 2\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(void)\n{\n   char *argv[] = {\"/bin/sh\", \"-c\", \"echo Hello 1 &amp;&amp; echo Hello 2\", 0};\n   execve(argv[0], &amp;argv[0], NULL);\n   fprintf(stderr, \"Oops!\\n\");\n\n   return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 8345180, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b11645a57caae61e494f26c0f5ffa75?s=128&d=identicon&r=PG&f=1", "display_name": "Linuxknowledgeseeker", "link": "https://stackoverflow.com/users/8345180/linuxknowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1501260973, "post_id": 45320055, "comment_id": 77718940, "body": "In case the number of arguments for each command is different, how should we initialise it and call in the loop?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 81, "user_id": 8345180, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b11645a57caae61e494f26c0f5ffa75?s=128&d=identicon&r=PG&f=1", "display_name": "Linuxknowledgeseeker", "link": "https://stackoverflow.com/users/8345180/linuxknowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1501261232, "post_id": 45320055, "comment_id": 77719050, "body": "@Linuxknowledgeseeker the simplest method would be: fill up with more <code>0</code> values at the end, so they have the same length. Or maybe don&#39;t use a loop. Or use an array of <code>char **</code> instead of a 2d-array of <code>char *</code>. It depends on what you want to do."}, {"owner": {"reputation": 81, "user_id": 8345180, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b11645a57caae61e494f26c0f5ffa75?s=128&d=identicon&r=PG&f=1", "display_name": "Linuxknowledgeseeker", "link": "https://stackoverflow.com/users/8345180/linuxknowledgeseeker"}, "edited": false, "score": 0, "creation_date": 1501304064, "post_id": 45320055, "comment_id": 77731894, "body": "Could you please post an example with char ** to execute 4 commands with variable number of arguments"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 1, "last_activity_date": 1501053603, "creation_date": 1501053603, "answer_id": 45320055, "question_id": 45318767, "link": "https://stackoverflow.com/questions/45318767/execve-how-can-i-initialise-char-argv-with-multiple-commands-instead-of-a-s/45320055#45320055", "title": "execve: how can I initialise char *argv[ ] with multiple commands instead of a single command?", "body": "<p>The <code>exec*()</code> family of functions <strong>replaces</strong> the current running process with a new executable. So there's no way to execute multiple commands, because once you call <code>execve()</code>, your own program doesn't run any more -- the process is now executing the new program.</p>\n\n<p>The existing answer shows the \"classic\" approach of using <code>fork()</code> to create a new process and calling an <code>exec*()</code> function there. This has a little overhead of copying some process-related resources that are immediately replaced again by the <code>exec*()</code> call. To solve this inefficiency, <code>vfork()</code> was invented. <code>vfork()</code> isn't supposed to do any of the copying and therefore, doing anything other than calling <code>_exit()</code> or one of the <code>exec*()</code> functions in a child created by <code>vfork()</code>is <strong>undefined behavior</strong>.</p>\n\n<p>This is a huge source of bugs and was later removed again from the POSIX standard, so you <em>should not use <code>vfork()</code> in a modern program</em>. Nowadays, there's a new way to solve this problem: <a href=\"https://linux.die.net/man/3/posix_spawn\" rel=\"nofollow noreferrer\"><code>posix_spawn()</code></a>. This function creates a new process directly with a new executable. As this is a good match for what you're trying to achieve in your question, here's a tiny usage example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;spawn.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nextern char **environ;\n\nint main(void)\n{\n    char *argv[][3] = {\n        { \"echo\", \"First command\", 0},\n        { \"echo\", \"Second command\", 0}\n    };\n\n    for (int i = 0; i &lt; 2; ++i)\n    {\n        pid_t pid;\n        if (posix_spawn(&amp;pid, \"/bin/echo\", 0, 0, argv[i], environ) != 0)\n        {\n            fputs(\"Error spawning child.\\n\", stderr);\n        }\n        else\n        {\n            // could get exit code etc here, see\n            // https://linux.die.net/man/2/waitpid\n            wait(0);\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1501145341, "last_edit_date": 1592644375, "creation_date": 1501145034, "answer_id": 45345631, "question_id": 45318767, "link": "https://stackoverflow.com/questions/45318767/execve-how-can-i-initialise-char-argv-with-multiple-commands-instead-of-a-s/45345631#45345631", "title": "execve: how can I initialise char *argv[ ] with multiple commands instead of a single command?", "body": "<p>Well, you cannot.  Simply.  The <code>execve(2)</code> system call is not a call to execute several commands, but only to overwrite the space allocated by a process by loading a new program image into its virtual space.  This means the only way to execute several commands from <code>execve(2)</code> is to load a shell and make it execute several commands.  You have to understand that this means loading a program into memory and begin executing it, and not executing programs or shell scripts in general.  When you understand this, you'll be able to understand the reason of loading a shell to execute several commands in a row (like the below example or what the <code>system(3)</code> function call does)</p>\n<pre><code>execlp(&quot;/bin/bash&quot;, &quot;bash&quot;, &quot;-c&quot;, &quot;echo foo; echo bar&quot;, NULL);\n</code></pre>\n<p>for example, will execute two different echo comands which are passed to a <code>bash(1)</code> shell in a single parameter string.</p>\n<h1>Note</h1>\n<p>I've used the similar <code>execvp(2)</code> system call for simplicity, but the same is applicable to the <code>execve(2)</code> (which is the full general system call interface, although both translate to the same <code>exec()</code> system call.</p>\n"}], "owner": {"reputation": 81, "user_id": 8345180, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2b11645a57caae61e494f26c0f5ffa75?s=128&d=identicon&r=PG&f=1", "display_name": "Linuxknowledgeseeker", "link": "https://stackoverflow.com/users/8345180/linuxknowledgeseeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1713, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1501145341, "creation_date": 1501049524, "last_edit_date": 1501054275, "question_id": 45318767, "link": "https://stackoverflow.com/questions/45318767/execve-how-can-i-initialise-char-argv-with-multiple-commands-instead-of-a-s", "title": "execve: how can I initialise char *argv[ ] with multiple commands instead of a single command?", "body": "<p>execve: how can I initialise char <code>*argv[ ]</code> with multiple commands instead of a single command?<br>\nIf I want to execute 4 commands, can I use the following statement?</p>\n\n<pre><code>char *argv[4][ ] = { {...}, {...}, {...} };\n</code></pre>\n\n<p>And to execute them using execve, can I use a loop with a var from 1 to 4?</p>\n"}, {"tags": ["c", "unix", "go"], "answers": [{"comments": [{"owner": {"reputation": 355, "user_id": 5819540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qhhiN4wB3Fg/AAAAAAAAAAI/AAAAAAAAABg/agaXzdWPuSU/photo.jpg?sz=128", "display_name": "GZ Xue", "link": "https://stackoverflow.com/users/5819540/gz-xue"}, "edited": false, "score": 0, "creation_date": 1501062082, "post_id": 45321654, "comment_id": 77608044, "body": "I know this repo and I have read it. I just want to try out. Thanks for your answer. I got <code>undefined: utmp.ReadUtmp</code>, <code>undefined: utmp.UtmpxFile</code>."}, {"owner": {"reputation": 355, "user_id": 5819540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qhhiN4wB3Fg/AAAAAAAAAAI/AAAAAAAAABg/agaXzdWPuSU/photo.jpg?sz=128", "display_name": "GZ Xue", "link": "https://stackoverflow.com/users/5819540/gz-xue"}, "edited": false, "score": 0, "creation_date": 1501062289, "post_id": 45321654, "comment_id": 77608203, "body": "I want to wait to see is there other answer."}, {"owner": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 1, "creation_date": 1501062339, "post_id": 45321654, "comment_id": 77608239, "body": "GZ Xue, did you run <code>go get github.com&#47;ericlagergren&#47;go-gnulib&#47;utmp</code> to install the utmp library?"}, {"owner": {"reputation": 355, "user_id": 5819540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qhhiN4wB3Fg/AAAAAAAAAAI/AAAAAAAAABg/agaXzdWPuSU/photo.jpg?sz=128", "display_name": "GZ Xue", "link": "https://stackoverflow.com/users/5819540/gz-xue"}, "reply_to_user": {"reputation": 5565, "user_id": 3915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd658bdf42cb1145386e10bf3da116a?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/3915/mark"}, "edited": false, "score": 0, "creation_date": 1501062480, "post_id": 45321654, "comment_id": 77608354, "body": "yes, but I got <code>package github.com&#47;ericlagergren&#47;go-gnulib: no buildable Go source files in &#47;Users&#47;xxx&#47;code&#47;src&#47;github.com&#47;ericlagergren&#47;go-gnulib</code> @Mark"}, {"owner": {"reputation": 1543, "user_id": 8356442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b8f892cf10c7afae14ab19ebbe89543?s=128&d=identicon&r=PG", "display_name": "Martin Campbell", "link": "https://stackoverflow.com/users/8356442/martin-campbell"}, "edited": false, "score": 1, "creation_date": 1501062747, "post_id": 45321654, "comment_id": 77608571, "body": "As Mark says, you need to run <code>go get github.com&#47;ericlagergren&#47;go-gnulib&#47;utmp</code>. You need the <code>utmp</code> at the end. Alternatively, if easier, install the <a href=\"https://github.com/golang/dep\" rel=\"nofollow noreferrer\">dep</a> tool and run <code>dep init</code> in your project to automatically install the package."}], "tags": [], "owner": {"reputation": 1543, "user_id": 8356442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b8f892cf10c7afae14ab19ebbe89543?s=128&d=identicon&r=PG", "display_name": "Martin Campbell", "link": "https://stackoverflow.com/users/8356442/martin-campbell"}, "is_accepted": true, "score": 2, "last_activity_date": 1501060191, "last_edit_date": 1501060191, "creation_date": 1501058364, "answer_id": 45321654, "question_id": 45318603, "link": "https://stackoverflow.com/questions/45318603/how-to-cast-bytes-to-structc-struct-in-go/45321654#45321654", "title": "How to cast bytes to struct(c struct) in go?", "body": "<p>I think you're going about this the wrong way. If you were wanting to use the C library, you would use the C library to read the file.</p>\n\n<p>Don't use cgo purely to have struct definitions, you should create these in Go yourself. You could then write the appropriate marshal / unmarshal code to read from the raw bytes. </p>\n\n<p>A quick Google shows that someone has already done the work required to convert a look of the relevant C library to Go. See the <a href=\"https://github.com/ericlagergren/go-gnulib/tree/master/utmp\" rel=\"nofollow noreferrer\">utmp repository</a>.</p>\n\n<p>A short example of how this could be used is:</p>\n\n<pre><code>package main\n\nimport (\n    \"bytes\"\n    \"fmt\"\n    \"log\"\n\n    \"github.com/ericlagergren/go-gnulib/utmp\"\n)\n\nfunc handleError(err error) {\n    if err != nil {\n        log.Fatal(err)\n    }\n}\n\nfunc byteToStr(b []byte) string {\n    i := bytes.IndexByte(b, 0)\n    if i == -1 {\n        i = len(b)\n    }\n    return string(b[:i])\n}\n\nfunc main() {\n    list, err := utmp.ReadUtmp(utmp.UtmpxFile, 0)\n    handleError(err)\n    for _, u := range list {\n        fmt.Println(byteToStr(u.User[:]))\n    }\n} \n</code></pre>\n\n<p>You can view the <a href=\"https://godoc.org/github.com/ericlagergren/go-gnulib/utmp\" rel=\"nofollow noreferrer\">GoDoc</a> for the <code>utmp</code> package for more information.</p>\n"}], "owner": {"reputation": 355, "user_id": 5819540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qhhiN4wB3Fg/AAAAAAAAAAI/AAAAAAAAABg/agaXzdWPuSU/photo.jpg?sz=128", "display_name": "GZ Xue", "link": "https://stackoverflow.com/users/5819540/gz-xue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 45321654, "answer_count": 1, "score": 0, "last_activity_date": 1501060191, "creation_date": 1501048995, "question_id": 45318603, "link": "https://stackoverflow.com/questions/45318603/how-to-cast-bytes-to-structc-struct-in-go", "title": "How to cast bytes to struct(c struct) in go?", "body": "<pre><code>package main\n\n/*\n#define _GNU_SOURCE 1\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;utmpx.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nchar *path_utmpx = _PATH_UTMPX;\n\ntypedef struct utmpx utmpx;\n*/\nimport \"C\"\nimport (\n  \"fmt\"\n  \"io/ioutil\"\n)\n\ntype Record C.utmpx\n\nfunc main() {\n\n  path := C.GoString(C.path_utmpx)\n\n  content, err := ioutil.ReadFile(path)\n  handleError(err)\n\n  var records []Record\n\n  // now we have the bytes(content), the struct(Record/C.utmpx)\n  // how can I cast bytes to struct ?\n}\n\nfunc handleError(err error) {\n  if err != nil {\n    panic(\"bad\")\n  }\n}\n</code></pre>\n\n<p>I'm trying to read <code>content</code> into <code>Record</code> \nI have asked a few related questions.</p>\n\n<p><a href=\"https://stackoverflow.com/q/44036358/5819540\">Cannot access c variables in cgo</a></p>\n\n<p><a href=\"https://stackoverflow.com/q/45300938/5819540\">Can not read utmpx file in go</a></p>\n\n<p>I have read some articles and posts but still cannot figure out a way to do this. </p>\n"}, {"tags": ["c", "pointers", "encryption", "segmentation-fault", "cs50"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501047403, "post_id": 45318219, "comment_id": 77598418, "body": "You attempt to dereference a null pointer and write to it? That should be pretty clear. And if you don&#39;t know about pointers then why are you <i>using</i> them? <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">Get a couple of good beginners books</a> and read. Learn first, use later."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501047488, "post_id": 45318219, "comment_id": 77598461, "body": "<code>string y = NULL;</code> --&gt; <code>string y = calloc(strlen(t)+1, sizeof(char)); </code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501047662, "post_id": 45318219, "comment_id": 77598549, "body": "<code>n = strlen(t); i &lt; n;</code> : Use a different variable name for <code>n</code> here."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501047724, "post_id": 45318219, "comment_id": 77598578, "body": "On an unrelated note, please avoid using <a href=\"https://en.wikipedia.org/wiki/Magic_number_(programming)\" rel=\"nofollow noreferrer\"><i>magic numbers</i></a>. If by <code>97</code> you mean the <a href=\"http://en.cppreference.com/w/c/language/ascii\" rel=\"nofollow noreferrer\">ASCII</a> character <code>&#39;a&#39;</code> then <i>say</i> so. Or better yet, since you want to convert between upper and lover case use <a href=\"http://en.cppreference.com/w/c/string/byte/toupper\" rel=\"nofollow noreferrer\"><code>toupper</code></a> and <a href=\"http://en.cppreference.com/w/c/string/byte/tolower\" rel=\"nofollow noreferrer\"><code>tolower</code></a>. You already use <code>toupper</code> but wrongly, you should be using <a href=\"http://en.cppreference.com/w/c/string/byte/isupper\" rel=\"nofollow noreferrer\"><code>isupper</code></a> instead."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1501047947, "post_id": 45318219, "comment_id": 77598662, "body": "Regarding pointers, the type-name <code>string</code> is an alias for <code>char *</code>. It is a pointer type. This is one of the bad things about CS50 and its library, it makes you believe that you&#39;re not using pointers when in fact you are. While the CS50 library do hide some of the complexities of C, it does so to the detriment of learning C properly IMO."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501048084, "post_id": 45318219, "comment_id": 77598722, "body": "<code>if (tolower(t[i])){</code> --&gt; <code>if (islower((unsigned char)t[i])){</code>"}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1501048221, "post_id": 45318219, "comment_id": 77598773, "body": "Get into the habit of using <code>valgrind</code> against your code. Use a <code>lint</code> checker outside of the compiler as well."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501048341, "post_id": 45318219, "comment_id": 77598825, "body": "@Someprogrammerdude Yep, and if you really need a magic number, but you don&#39;t know why you need it or why it has it&#39;s value, name it <code>strange_magic_number</code> or something."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1501051496, "post_id": 45318219, "comment_id": 77600529, "body": "@Someprogrammerdude <i>And if you don&#39;t know about pointers then why are you using them</i> That is because he doesn&#39;t know he is using pointers! The cs50 and it&#39;s &quot;string&quot; type strikes again!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501051710, "post_id": 45318219, "comment_id": 77600668, "body": "@AjayBrahmakshatriya Yeah I noticed the CS50 part later. In my oppinion, learning from CS50 is almost worse than learning from &quot;online judges&quot;."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1501052344, "post_id": 45318219, "comment_id": 77601080, "body": "@Someprogrammerdude wait? People <b>learn</b> from online judges?"}, {"owner": {"reputation": 131, "user_id": 4521463, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/59511c317977ee3cbfbc241bac338280?s=128&d=identicon&r=PG&f=1", "display_name": "kquach", "link": "https://stackoverflow.com/users/4521463/kquach"}, "edited": false, "score": 0, "creation_date": 1501086353, "post_id": 45318219, "comment_id": 77627083, "body": "Thanks for all your input. I&#39;ll consult the books."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4521463, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/59511c317977ee3cbfbc241bac338280?s=128&d=identicon&r=PG&f=1", "display_name": "kquach", "link": "https://stackoverflow.com/users/4521463/kquach"}, "edited": false, "score": 0, "creation_date": 1501086323, "post_id": 45328833, "comment_id": 77627058, "body": "Thanks! This really helped."}], "tags": [], "owner": {"reputation": 125, "user_id": 6728154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6QGex.png?s=128&g=1", "display_name": "Geo", "link": "https://stackoverflow.com/users/6728154/geo"}, "is_accepted": true, "score": 2, "last_activity_date": 1501076779, "creation_date": 1501076779, "answer_id": 45328833, "question_id": 45318219, "link": "https://stackoverflow.com/questions/45318219/c-store-to-null-pointer-error-segmentation-fault/45328833#45328833", "title": "C - store to null pointer error, segmentation fault", "body": "<p>You get this error message because variable <code>y</code>is <code>NULL</code>.</p>\n\n<p>Type <code>string</code> is actually a <code>typedef</code> (an alias in other words) to <code>char *</code> which means \"pointer to <code>char</code>\" therefore <code>y</code> is a pointer to char.</p>\n\n<p>When you are doing <code>y[i]</code>, you dereference a <code>NULL</code> pointer which is not allowed and leads to an error. <code>NULL</code>represents a non-existing memory space so you can not store your ciphertext here !</p>\n\n<p>To solve this problem you can declare and initialize <code>y</code> as follows :</p>\n\n<pre><code>char *y = calloc(strlen(t) + 1, sizeof(char)); // Ciphertext, ready to hold some data !\n</code></pre>\n\n<p><em>You will have to <code>#include &lt;stdlib.h&gt;</code>in order to use the <code>calloc()</code> function.</em></p>\n\n<p>Now, <code>y</code> is a pointer to a memory space as large as <code>t</code> (plaintext and cyphertext have the same size) that you can dereference and write data to !</p>\n\n<p>You should definitely learn about pointers and how memory works before going any further. Some programmer dude posted a great list of books in the comments of your original post,  take a look at it !</p>\n"}], "owner": {"reputation": 131, "user_id": 4521463, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/59511c317977ee3cbfbc241bac338280?s=128&d=identicon&r=PG&f=1", "display_name": "kquach", "link": "https://stackoverflow.com/users/4521463/kquach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4236, "favorite_count": 0, "accepted_answer_id": 45328833, "answer_count": 1, "score": 2, "last_activity_date": 1501133056, "creation_date": 1501047269, "last_edit_date": 1501133056, "question_id": 45318219, "link": "https://stackoverflow.com/questions/45318219/c-store-to-null-pointer-error-segmentation-fault", "title": "C - store to null pointer error, segmentation fault", "body": "<p>Please bear with my code. I'm a beginner in C. The code below builds a Vigenere cipher. The user inputs a <code>key</code> argument which is used to encrypt a <code>plaintext</code> message. The code will output the <code>ciphertext</code>.</p>\n\n<p>The error I receive is as follows. Note that I have not studied pointers yet.</p>\n\n<p>Any help in diagnosing the error would be greatly appreciated!</p>\n\n<pre><code>vigenere.c:47:13: runtime error: store to null pointer of type 'char'\nSegmentation fault\n</code></pre>\n\n<p>The code</p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(int argc, string argv[]){\n\n// check for 2 arguments\nif (argc != 2){\n\n    printf(\"missing command-line argument\\n\");\n    return 1;\n\n} \n\n// check for character argument\nint i,n;\n\nfor (i = 0, n = strlen(argv[1]); i &lt; n; i++){\n\n    if (!isalpha(argv[1][i])){\n\n        printf(\"non-character argument\\n\");\n        return 1;\n\n    }\n\n}\n\n// if previous 2 checks are cleared, request 'plaintext' from user\n\nprintf(\"plaintext:\");\n\n// declare plaintext, key, and ciphertext\n\nstring t = get_string();    // plaintext\nstring u = argv[1];         // key (argument)\nstring y = NULL;            // ciphertext\n\n// encode plaintext with key -&gt; ciphertext\n\nfor (i = 0, n = strlen(t); i &lt; n; i++){\n\n    if (tolower(t[i])){\n\n        y[i] = (char)((((int)t[i] + (int)tolower(u[i%n])) - 97) % 26) + 97;\n\n    } else {\n\n        y[i] = (char)((((int)t[i] + (int)tolower(u[i%n])) - 65) % 26) + 65;\n\n    }\n\n\n}\n\n\nprintf(\"ciphertext: %s\\n\", y);\n\n}\n</code></pre>\n"}, {"tags": ["c", "i2c", "8051"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 2, "creation_date": 1501049701, "post_id": 45317599, "comment_id": 77599486, "body": "The 8051 itself doesn&#39;t include an I2C controller. There are many devices that has a 8051 together with other on-chip stuff, e.g. a I2C controller. What is your case? If your chip doesn&#39;t have a built-in I2C controller, you&#39;ll have to do bit-bang using the native 8051 ports. Try search the net for something like &quot;8051 bit bang I2C&quot;. It will give you multiple code examples, e.g. <a href=\"https://www.8051projects.net/wiki/I2C_Implementation_on_8051\" rel=\"nofollow noreferrer\">8051projects.net/wiki/I2C_Implementation_on_8051</a> If your chip does include an I2C controller the data sheet will tell you how to use it."}], "answers": [{"tags": [], "owner": {"reputation": 963, "user_id": 805796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/351bc6b115265f0a9fbcb328c4532ced?s=128&d=identicon&r=PG", "display_name": "MCG", "link": "https://stackoverflow.com/users/805796/mcg"}, "is_accepted": true, "score": 0, "last_activity_date": 1501119831, "last_edit_date": 1501119831, "creation_date": 1501116830, "answer_id": 45339644, "question_id": 45317599, "link": "https://stackoverflow.com/questions/45317599/how-does-i2c-protocol-work/45339644#45339644", "title": "How does I2C Protocol work", "body": "<p>The Module 2 is essentially I2C driver using bit banging of 8051 port. I2C protocol follows a sequence. It is started by start sequence and stopped by stop sequence. You can have different functions. The communication is started by the master and each slave has an address. So in module2, you will write all below functions.</p>\n\n<p>For example, the I2 read sequence will be following</p>\n\n<pre><code>I2C_Start();  // set I2C start sequence\nI2C_Send(slave_address|1); Send I2C slave address in read mode\nI2C_read_ACK(); //master will know slave got data \nwhile(number_of bytes){\nI2C_Read();\nI2C_send_ACK();\nnumber_of bytes--;\n}\nI2C_NAK();    //slave need to know so it will not prepare next data.\nI2C_Stop();   //stop communication\n</code></pre>\n\n<p>Again the write on slave will have below steps</p>\n\n<pre><code>I2C_Start();  // set I2C start sequence\nI2C_Send(slave_address); Send I2C slave address in write mode\nI2C_read_ACK(); //master will know slave got data \nwhile(number_of bytes){\nI2C_Write();\nI2C_read_ACK(); //master will know slave got data \nnumber_of bytes--;\n}\nI2C_Stop(); //stop communication\n</code></pre>\n\n<p>I also see driver at\n<a href=\"https://circuitdigest.com/microcontroller-projects/digital-clock-using-8051-microcontroller\" rel=\"nofollow noreferrer\">https://circuitdigest.com/microcontroller-projects/digital-clock-using-8051-microcontroller</a></p>\n\n<p>Official I2C protocol is here </p>\n\n<p><a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwici4Ocn6jVAhUIwlQKHV_zAJ8QFggoMAA&amp;url=https%3A%2F%2Fwww.nxp.com%2Fdocuments%2Fuser_manual%2FUM10204.pdf&amp;usg=AFQjCNHgNi6wOD4MjIDsnT0DXTYLS_-gPQ\" rel=\"nofollow noreferrer\">https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwici4Ocn6jVAhUIwlQKHV_zAJ8QFggoMAA&amp;url=https%3A%2F%2Fwww.nxp.com%2Fdocuments%2Fuser_manual%2FUM10204.pdf&amp;usg=AFQjCNHgNi6wOD4MjIDsnT0DXTYLS_-gPQ</a></p>\n"}], "owner": {"reputation": 33, "user_id": 8229782, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce570126834e20cbda1d89ce8513da6f?s=128&d=identicon&r=PG&f=1", "display_name": "ABH786", "link": "https://stackoverflow.com/users/8229782/abh786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 45339644, "answer_count": 1, "score": 2, "last_activity_date": 1501119831, "creation_date": 1501043985, "last_edit_date": 1501046360, "question_id": 45317599, "link": "https://stackoverflow.com/questions/45317599/how-does-i2c-protocol-work", "title": "How does I2C Protocol work", "body": "<p>I have visited on some links and looked for some example programs for I2C programming.  I want to write my own code for I2C protocol. Suppose DS1307 RTC and LCD connected to 8051. I am using Keil software to write a C program. It's very difficult to write whole program of I2C for me, so I tried to break program in small parts:</p>\n\n<ul>\n<li>Module 1: define and set pins for LCD and DS1307 RTC</li>\n<li>Module 2: write C code for DS1307 (make functions for DS1307 such as read, write)</li>\n<li>Module 3: write C code for LCD (data, command initialize, etc)</li>\n<li>Module 4: main function </li>\n</ul>\n\n<p>I understand module 1 but I am looking help to understand module 2. So again I want break module 2 in small parts. </p>\n\n<p>How to break module 2 in small parts for easy understanding? How many functions should be in module2?</p>\n"}, {"tags": ["c", "sockets", "http", "unistd.h"], "comments": [{"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1501045374, "post_id": 45317284, "comment_id": 77597580, "body": "Have you read <a href=\"https://en.wikipedia.org/wiki/HTTP_persistent_connection\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 1, "creation_date": 1501054246, "post_id": 45317284, "comment_id": 77602377, "body": "What are the values returned by <code>write</code> and <code>read</code>, in case of failure, what is the <code>errno</code> value? (Hint: use <code>perror()</code> function)"}, {"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "reply_to_user": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1501077473, "post_id": 45317284, "comment_id": 77619855, "body": "@jeff6times7 HTTP 1.1 (what I&#39;m using) is persistent by default. Are you suggesting using or not using persistence?"}, {"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "reply_to_user": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1501077548, "post_id": 45317284, "comment_id": 77619930, "body": "@purplepsycho The return values of <code>read</code> and <code>write</code> are never <code>-1</code>, so that is not the issue."}, {"owner": {"reputation": 2445, "user_id": 1707353, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/212f7b84a07bc7aea4f574669fe2465f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Holt", "link": "https://stackoverflow.com/users/1707353/jeff-holt"}, "edited": false, "score": 0, "creation_date": 1501080615, "post_id": 45317284, "comment_id": 77622492, "body": "@MuhammadYojer It depends on whether or not you expect most of your web site&#39;s client requests keep a connection open. If they do, then the way you&#39;re testing is appropriate. If you&#39;re not sure, then you should test both ways. Be that as it may, you may get closer to answering your own question if you stop using persistent connections."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1501084474, "post_id": 45317284, "comment_id": 77625659, "body": "Unrelated: <code>#endif &#47;&#47;CONNECTOR_H_INCLUDED</code> should be on the <i>last</i> line of <code>connector.h</code>"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 0, "creation_date": 1501077687, "post_id": 45319723, "comment_id": 77620050, "body": "The return values are always valid (never <code>-1</code>), so that is not the issue."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 1, "creation_date": 1501084091, "post_id": 45319723, "comment_id": 77625364, "body": "@MuhammadYojer: What about <code>0</code>?"}], "tags": [], "owner": {"reputation": 774, "user_id": 746618, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2e08fae44d9362af3127657e9fbb4a79?s=128&d=identicon&r=PG", "display_name": "ilia", "link": "https://stackoverflow.com/users/746618/ilia"}, "is_accepted": false, "score": 0, "last_activity_date": 1501052562, "creation_date": 1501052562, "answer_id": 45319723, "question_id": 45317284, "link": "https://stackoverflow.com/questions/45317284/unistd-write-stops-writing-after-100-consecutive-socket-write-reads-program-r/45319723#45319723", "title": "unistd write() stops writing after 100 consecutive socket write/reads, program returns 3328 error code", "body": "<p>Server may close a connection, so you have to test return codes from write and read functions,and if there is a failure, reestablish a connection.</p>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 0, "creation_date": 1501077032, "post_id": 45321639, "comment_id": 77619450, "body": "I checked the return values, and they&#39;re always valid (never <code>-1</code>). In addition, I moved <code>servaddr</code> from <code>connector.h</code> to <code>connector.c</code>, and declared it static, but that changed nothing; <code>write</code> still stops sending after 100 read/write requests. You can see the updated source <a href=\"https://github.com/MuhammadYojer/simple-load-tester\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "edited": false, "score": 1, "creation_date": 1501078467, "post_id": 45321639, "comment_id": 77620696, "body": "@MuhammadYojer: No you do not check the return values of <b>all</b> read and writes but only every second, and reading from a socket closed by the peer will return 0. Why dont&#39;t you use the common <code>cr = read(...); if (cr &lt;= 0) {...}</code>?"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 3, "last_activity_date": 1501058329, "creation_date": 1501058329, "answer_id": 45321639, "question_id": 45317284, "link": "https://stackoverflow.com/questions/45317284/unistd-write-stops-writing-after-100-consecutive-socket-write-reads-program-r/45321639#45321639", "title": "unistd write() stops writing after 100 consecutive socket write/reads, program returns 3328 error code", "body": "<p>Your code is bad because you never test the return values of read and write and so you could still try to access the socket after it has been closed server side, but that should not cause a crash.</p>\n\n<p>But after looking at your github code, I noticed that you <em>define</em> <code>struct sockaddr_in servaddr;</code> in a .h file that is included in 2 different c files. It is true that some compilers can allow it, but it is not conformant C because it does not respect the One Definition Rule. In fact, you define twice the same variable in one single program causing Undefined Behaviour.</p>\n\n<p>The correct way is to <em>declare</em> the variable as external in the include file: <code>extern struct sockaddr_in servaddr;</code>, and only <em>define</em> it in one single c file. In you current source, you could even only declare it in the connector.c file.</p>\n\n<p>But in general global variables are a nightmare because they could be changed at a unexpected time from an unexpected place, and result in using a wrong value. At least <code>servaddr</code> should be declared static in connector.c.</p>\n"}, {"tags": [], "owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "is_accepted": false, "score": 0, "last_activity_date": 1501144562, "creation_date": 1501144562, "answer_id": 45345468, "question_id": 45317284, "link": "https://stackoverflow.com/questions/45317284/unistd-write-stops-writing-after-100-consecutive-socket-write-reads-program-r/45345468#45345468", "title": "unistd write() stops writing after 100 consecutive socket write/reads, program returns 3328 error code", "body": "<p>Each call to <code>read</code>/<code>write</code> should be tested, and connection should be reestablished on error:</p>\n\n<p>In file <code>main.c</code>, instead of </p>\n\n<pre><code>//set up the connection\nsocket_id = get_socket();\nget_ip_address(\"example.com\");\nestablish_connection(socket_id);\n/*...*/\n//send the request\nwhile(1) {\n    if(write(socket_id, request, strlen(request)) == -1 || read(socket_id, message, 1024 * 1024) == -1) {\n        establish_connection(socket_id);\n        write(socket_id, request, strlen(request));\n        read(socket_id, message, 1024 * 1024);\n    }else {\n        write(socket_id, request, strlen(request));\n        read(socket_id, message, 1024 * 1024);\n    }\n}\n</code></pre>\n\n<p>You should write something like:</p>\n\n<pre><code>/* query should be declared before this point */\nwhile (1)\n{\n    /* set up the connection */\n    socket_id = get_socket();\n    get_ip_address(\"example.com\");\n    establish_connection(socket_id);\n\n    /* send the request */\n    while (1)\n    {\n        if (write(socket_id, request, strlen(request))&lt;=0)\n        {\n            /* something goes wrong while writing, exit the inner while loop */\n            perror(\"write\");\n            break;\n        }\n        if (read(socket_id, message, 1024 * 1024)&lt;=0)\n        {\n            /* something goes wrong while reading, exit the inner while loop */\n            perror(\"read\");\n            break;\n        }\n    }\n    /* if this point is reach, that means that one write or read call goes wrong */\n    close(socket_id);\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6929149, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9757bec3015e2446ea3d6050118d47f5?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yojer", "link": "https://stackoverflow.com/users/6929149/muhammad-yojer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1501144562, "creation_date": 1501042065, "last_edit_date": 1592644375, "question_id": 45317284, "link": "https://stackoverflow.com/questions/45317284/unistd-write-stops-writing-after-100-consecutive-socket-write-reads-program-r", "title": "unistd write() stops writing after 100 consecutive socket write/reads, program returns 3328 error code", "body": "<p>I am trying to test the amount of traffic my website can handle, and so I created a C program to send a bunch of consecutive requests to my website (probably not the best way, but I did it just because I don't really know C, not because I <em>really</em> need to test load-handling). Here is the relevant code (if you really feel like you need the full source, see <a href=\"https://github.com/MuhammadYojer/simple-load-tester\" rel=\"nofollow noreferrer\">here</a>):</p>\n<pre><code>while(1) {\n        sleep(1);\n        write(socket_id, request, strlen(request));\n        read(socket_id, message, 1024 * 1024);\n}\n</code></pre>\n<p>where <code>socket_id</code> is the id of an established socket connection, <code>request</code> is the HTTP request to be sent, and <code>message</code> where the results of the <code>read</code> will be stored. This is the HTTP GET request:</p>\n<pre><code>GET / HTTP/1.1\nHost: website.com\nFrom: ...\n</code></pre>\n<p>I am tracking views on via a php script in my website.</p>\n<p>No matter how long the thread <code>sleep</code>s, it still crashes after 100 write/reads. Why is this?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041003, "post_id": 45317049, "comment_id": 77596309, "body": "Is your function like <code>int func(enum Kind k, ...)</code> ? and Call like <code>int sum = func(Total, 1,2,3);</code>"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041054, "post_id": 45317049, "comment_id": 77596320, "body": "it&#39;s like int fund (Rule rule, int one,...)"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041136, "post_id": 45317049, "comment_id": 77596332, "body": "the second arg given doesn&#39;t indicate the number of the integer arguments that follows so I don&#39;t know how to get the total"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041137, "post_id": 45317049, "comment_id": 77596334, "body": "In such a case <code>one</code> must be the number of remaining arguments."}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041165, "post_id": 45317049, "comment_id": 77596342, "body": "it&#39;s not the case. That&#39;s why I am confused"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041218, "post_id": 45317049, "comment_id": 77596351, "body": "Well also the arguments always ends with a -1"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041245, "post_id": 45317049, "comment_id": 77596358, "body": "so  i need to find a way to check if it has reached -1"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1501041295, "post_id": 45317049, "comment_id": 77596365, "body": "@HiruSepalika Please add these details to the question itself."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501041297, "post_id": 45317049, "comment_id": 77596366, "body": "If valid data does not include <code>-1</code> then you can know the end of the element."}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501041566, "post_id": 45317049, "comment_id": 77596425, "body": "so an example of the function call would be func(Rule rule, 7,5,3,1 -1)  and -1 would always indicate the end of the arguments which means the total would not include -1."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042086, "post_id": 45317205, "comment_id": 77596559, "body": "va_start(args, rule) is giving me an error. When I used my second argument it worked. Also I am getting wrong numbers"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042465, "post_id": 45317205, "comment_id": 77596659, "body": "Second argument? You said there is only 1 fixed argument. How did you give the second argument?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042476, "post_id": 45317205, "comment_id": 77596663, "body": "Can you show your prototype?"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042533, "post_id": 45317205, "comment_id": 77596682, "body": "int choose( Rule rule, int v1, ... )"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042575, "post_id": 45317205, "comment_id": 77596692, "body": "Why is v1 there? cant you make <code>int choose (Rule rule, ...);</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042712, "post_id": 45317205, "comment_id": 77596730, "body": "Check the edits I suggested."}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042715, "post_id": 45317205, "comment_id": 77596731, "body": "This is wat i have to work off of"}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 0, "last_activity_date": 1501042943, "last_edit_date": 1501042943, "creation_date": 1501041523, "answer_id": 45317205, "question_id": 45317049, "link": "https://stackoverflow.com/questions/45317049/how-to-find-out-the-number-of-arguments-using-variable-arguments-if-the-first/45317205#45317205", "title": "How to find out the number of arguments (using variable arguments) if the first argument just indicates and enum value?", "body": "<p>You mentioned that the end of your arguments is marked by a <code>-1</code>. This means you can keep getting more arguments until you get a <code>-1</code>. </p>\n\n<p>Following is the way you can do it using <code>va_list</code> -</p>\n\n<pre><code>if(rule == TYPE) {\n    int total = 0;\n    va_list args;\n    va_start(args, rule);\n    int j;\n    while(1){\n        j = va_arg(args, int);\n        if(j!=-1)\n            total += j;\n        else\n            break;\n    }\n    va_end(args);\n    return total;\n}\n</code></pre>\n\n<p>You mentioned in the comments that your prototype is </p>\n\n<pre><code>int choose(Rule rule, int v1, ...);\n</code></pre>\n\n<p>In that case you need the modifications -</p>\n\n<p>At the very top</p>\n\n<pre><code>if(v1 == -1)\n    return 0;\n</code></pre>\n\n<p>And </p>\n\n<pre><code>int total = v1;\nva_list args;\nva_start(args, v1);\n</code></pre>\n\n<p>Demo <a href=\"https://ideone.com/rWdgtb\" rel=\"nofollow noreferrer\">Here</a></p>\n"}, {"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501041993, "post_id": 45317245, "comment_id": 77596526, "body": "<a href=\"http://ideone.com/phcXO9\" rel=\"nofollow noreferrer\">DEMO</a>"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042293, "post_id": 45317245, "comment_id": 77596606, "body": "I am not getting the right value for the total. If I use rule as my second arg for va_start I get the following error.. &quot; second parameter of &#39;va_start&#39; not last named argument&quot;"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042372, "post_id": 45317245, "comment_id": 77596635, "body": "@HiruSepalika Show me your code. The second argument is not specified in the prototype. What is the purpose of argument <code>one</code>?"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042554, "post_id": 45317245, "comment_id": 77596686, "body": "if(rule == first)         return v1;     else if(rule == total) {         va_list ap;         va_start(ap, v1);         int total = 0;         int number = 0;         number = va_arg(ap, int);         while(number != -1){             total += number;             number = va_arg(ap, int);         }         va_end(ap);         return total;     }       return 0;}"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042667, "post_id": 45317245, "comment_id": 77596715, "body": "@HiruSepalika Is <code>v1</code> included in total in this case?"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042693, "post_id": 45317245, "comment_id": 77596725, "body": "yes it should be included"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042743, "post_id": 45317245, "comment_id": 77596740, "body": "@HiruSepalika You can <code>return total + v1;</code> instead of <code>return total;</code>"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501042834, "post_id": 45317245, "comment_id": 77596774, "body": "Thanks that worked!"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501042975, "post_id": 45317245, "comment_id": 77596821, "body": "But this wont work if v1 is -1"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501043168, "post_id": 45317245, "comment_id": 77596875, "body": "@AjayBrahmakshatriya sure. I will fix."}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501043178, "post_id": 45317245, "comment_id": 77596881, "body": "I can just add that condition before actually calculating the total"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501043227, "post_id": 45317245, "comment_id": 77596899, "body": "Do you guys know how to get the element right before it finds -1"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501043483, "post_id": 45317245, "comment_id": 77596978, "body": "@BLUEPIXY Do you know how to get the element right before -1"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501043645, "post_id": 45317245, "comment_id": 77597026, "body": "@HiruSepalika It is only that the validity of an element is other than <code>-1</code>. So If programmers passed <code>-1,1,2,3,-1</code>, The program returns 0 even if it is not intended by the programmer."}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501043832, "post_id": 45317245, "comment_id": 77597072, "body": "I am confused. I just want to return the element right before the last element which is always -1"}, {"owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501044045, "post_id": 45317245, "comment_id": 77597146, "body": "@BLUEPIXY ? How would you do that"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "reply_to_user": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "edited": false, "score": 0, "creation_date": 1501044048, "post_id": 45317245, "comment_id": 77597147, "body": "@HiruSepalika I don&#39;t get you. Please explain exactly what kind of situation you are assuming."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": true, "score": 1, "last_activity_date": 1501043258, "last_edit_date": 1501043258, "creation_date": 1501041825, "answer_id": 45317245, "question_id": 45317049, "link": "https://stackoverflow.com/questions/45317049/how-to-find-out-the-number-of-arguments-using-variable-arguments-if-the-first/45317245#45317245", "title": "How to find out the number of arguments (using variable arguments) if the first argument just indicates and enum value?", "body": "<p>like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdarg.h&gt;\n\ntypedef enum rule {\n    first, total\n} Rule;\n\nint fund(Rule rule, int v1, ...){\n    switch(rule){\n    case total:\n        {\n            int total = v1, value;\n            if(v1 == -1) return 0;\n            va_list ap;\n\n            va_start(ap, v1);\n            value = va_arg(ap, int);\n            while(value != -1){\n                total += value;\n                value = va_arg(ap, int);\n            }\n            va_end(ap);\n\n            return total;\n        }\n        break;\n    case first:\n        return v1;\n    }\n    return -1;\n}\n\nint main(void){\n    printf(\"first:%d\\n\", fund(first, 1, 2, 3, 4, -1));//first:1\n    printf(\"total:%d\\n\", fund(total, 7, 5, 3, 1, -1));//total:16\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8354684, "user_type": "registered", "profile_image": "https://graph.facebook.com/1329215090524716/picture?type=large", "display_name": "Hiru Sepalika", "link": "https://stackoverflow.com/users/8354684/hiru-sepalika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1501042309, "accepted_answer_id": 45317245, "answer_count": 2, "score": -2, "last_activity_date": 1501043258, "creation_date": 1501040621, "question_id": 45317049, "link": "https://stackoverflow.com/questions/45317049/how-to-find-out-the-number-of-arguments-using-variable-arguments-if-the-first", "closed_reason": "Needs details or clarity", "title": "How to find out the number of arguments (using variable arguments) if the first argument just indicates and enum value?", "body": "<p>So I am given an list of enum values. This function will return integer value. It takes in an enum value and the rest is followed by integer values. I am supposed to get the total of the following integer values if the enum type is called total and return the total. </p>\n"}, {"tags": ["java", "c", "android-studio", "cmake", "undefined-reference"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 7301484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/917747b3283ef08f50536002d82917ec?s=128&d=identicon&r=PG", "display_name": "Hippo", "link": "https://stackoverflow.com/users/7301484/hippo"}, "is_accepted": false, "score": 4, "last_activity_date": 1501213792, "creation_date": 1501213792, "answer_id": 45364560, "question_id": 45316915, "link": "https://stackoverflow.com/questions/45316915/undefined-reference-to-function-with-cmake-in-android-studio/45364560#45364560", "title": "Undefined reference to function with Cmake in Android studio", "body": "<p>I found the problem.<br>\nAndroid Studio needs to specify the dependencies between the files in CMakeLists :</p>\n\n<pre><code>target_link_libraries( # Specifies the target library.\n                   util\n                   sha\n                   ai\n                   allnet_log\n\n                   # Links the target library to the log library\n                   # included in the NDK.\n                   ${log-lib} )\n</code></pre>\n\n<p>The #includes in file are not enough.</p>\n"}], "owner": {"reputation": 81, "user_id": 7301484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/917747b3283ef08f50536002d82917ec?s=128&d=identicon&r=PG", "display_name": "Hippo", "link": "https://stackoverflow.com/users/7301484/hippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2055, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1501213792, "creation_date": 1501039553, "question_id": 45316915, "link": "https://stackoverflow.com/questions/45316915/undefined-reference-to-function-with-cmake-in-android-studio", "title": "Undefined reference to function with Cmake in Android studio", "body": "<p>I try to add C functions to my Java Android App.<br>\nI already managed to run a basic function Hello World in C.<br>\nIn this file hello.c I call another C function contained in another file (astart.c) which itself calls another function C in another file (util.c) which calls others functions in others files.<br>\nNo problem for that, is not it?  </p>\n\n<p>I add the libraries to my CMakeLists.txt :</p>\n\n<pre><code># Sets the minimum version of CMake required to build the native\n# library. You should either keep the default value or only pass a\n# value of 3.4.0 or lower.\n\ncmake_minimum_required(VERSION 3.4.1)\n\n# Creates and names a library, sets it as either STATIC\n# or SHARED, and provides the relative paths to its source code.\n# You can define multiple libraries, and CMake builds it for you.\n# Gradle automatically packages shared libraries with your APK.\n\nadd_library( # Sets the name of the library.\n         native-lib\n\n         # Sets the library as a shared library.\n         SHARED\n\n         # Provides a relative path to your source file(s).\n         # Associated headers in the same location as their source\n         # file are automatically included.\n         src/main/cpp/native-lib.cpp )\n\nadd_library( hello\n\n         # Sets the library as a shared library.\n         SHARED\n\n         src/main/myCpp/hello.c )\n\nadd_library( astart\n\n         # Sets the library as a shared library.\n        SHARED\n\n         src/main/myCpp/astart.c )\n\nadd_library( ai\n\n         # Sets the library as a shared library.\n         SHARED\n\n         src/main/myCpp/lib/ai.c )\n\nadd_library( sha\n\n         # Sets the library as a shared library.\n         SHARED\n\n         src/main/myCpp/lib/sha.c )\n\nadd_library( util\n\n         # Sets the library as a shared library.\n         SHARED\n\n         src/main/myCpp/lib/util.c )\n\nadd_library( allnet_log\n\n         # Sets the library as a shared library.\n         SHARED\n\n         src/main/myCpp/lib/allnet_log.c )\n\n#add_library( packet\n\n         # Sets the library as a shared library.\n#            SHARED\n\n#           src/main/myCpp/lib/packet.c )\n\nadd_library( configfiles\n\n         # Sets the library as a shared library.\n         SHARED\n\n         src/main/myCpp/lib/configfiles.c )\n\nadd_library( allnet_queue\n\n         # Sets the library as a shared library.\n         SHARED\n\n         src/main/myCpp/lib/allnet_queue.c )\n\n\n\n# Add the directories where the Cpp header files are to let CMake             find them during compile time\ninclude_directories(src/main/myCpp/)\ninclude_directories(src/main/myCpp/lib/)\n\n# Searches for a specified prebuilt library and stores the path as a\n# variable. Because system libraries are included in the search path by\n# default, you only need to specify the name of the public NDK library\n# you want to add. CMake verifies that the library exists before\n# completing its build.\n\nfind_library( # Sets the name of the path variable.\n          log-lib\n\n          # Specifies the name of the NDK library that\n          # you want CMake to locate.\n          log )\n\n# Specifies libraries CMake should link to your target library. You\n# can link multiple libraries, such as libraries you define in the\n# build script, prebuilt third-party libraries, or system libraries.\n\ntarget_link_libraries( # Specifies the target library.\n                   native-lib\n\n                   # Links the target library to the log library\n                   # included in the NDK.\n                   ${log-lib} )\n</code></pre>\n\n<p>My gradle file :</p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\ncompileSdkVersion 25\nbuildToolsVersion \"25.0.0\"\ndefaultConfig {\n    applicationId \"com.example.hippolytelacassagne.allnet\"\n    minSdkVersion 19\n    targetSdkVersion 25\n    versionCode 1\n    versionName \"1.0\"\n    testInstrumentationRunner    \"android.support.test.runner.AndroidJUnitRunner\"\n    externalNativeBuild {\n        cmake {\n            cppFlags \"\"\n            cFlags \"-fexceptions\"\n        }\n    }\n}\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\nexternalNativeBuild {\n    cmake {\n        path \"CMakeLists.txt\"\n    }\n}\n\n// If you want Gradle to package prebuilt native libraries\n// with your APK, modify the default source set configuration\n// to include the directory of your prebuilt .so files as follows.\nsourceSets {\n    main {\n        jni.srcDirs = []\n        jniLibs.srcDirs 'imported-lib/src/', 'more-imported-   libs/src/'\n    }\n}\n}\n\ndependencies {\ncompile fileTree(include: ['*.jar'], dir: 'libs')\nandroidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n    exclude group: 'com.android.support', module: 'support-annotations'\n})\ncompile 'com.android.support:appcompat-v7:25.3.1'\ntestCompile 'junit:junit:4.12'\n}\n</code></pre>\n\n<p>My hello.c called in Home.java :</p>\n\n<pre><code>#include &lt;jni.h&gt;\n\n#include \"lib/app_util.h\"\n#include \"lib/packet.h\"\n#include \"astart.c\"\n\nJNIEXPORT\njstring\nJNICALL\nJava_com_example_hippolytelacassagne_allnet_Home_Hello(\nJNIEnv *env,\njobject callingObject)\n{\n    char * args [] = { \"allnet\", \"-v\", \"def\", NULL };\n    astart_main(3, args);\n    return (*env)-&gt;NewStringUTF(env, \"Hello World\");\n}\n</code></pre>\n\n<p>The includes if astart.c called in hello.c :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;pwd.h&gt;\n#include &lt;ifaddrs.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;net/if.h&gt;      /* IFF_LOOPBACK, etc */\n#include &lt;arpa/inet.h&gt;   /* inet_addr */\n\n#include \"lib/util.h\"\n#include \"lib/allnet_log.h\"\n#include \"lib/packet.h\"\n#include \"lib/configfiles.h\"\n#include \"lib/allnet_queue.h\"\n</code></pre>\n\n<p>And the includes of util.c called in astart.c :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;time.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;netdb.h&gt;  /* h_errno */\n#include &lt;dirent.h&gt;  /* h_errno */\n#include &lt;sys/time.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/un.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#include \"packet.h\"\n#include \"mgmt.h\"\n#include \"allnet_log.h\"\n#include \"util.h\"\n#include \"ai.h\"\n#include \"sha.h\"\n</code></pre>\n\n<p>And here is the error message of the gradle console :</p>\n\n<pre><code>    FAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:externalNativeBuildDebug'.\n&gt; Build command failed.\n  Error while executing '/Users/hippolytelacassagne/Library/Android/sdk/cmake/3.6.4111459/bin/cmake' with arguments {--build /Users/hippolytelacassagne/AndroidStudioProjects/Allnet/app/.externalNativeBuild/cmake/debug/mips64 --target util}\n  [1/2] Building C object CMakeFiles/util.dir/src/main/myCpp/lib/util.c.o\n  [2/2] Linking C shared library ../../../../build/intermediates/cmake/debug/obj/mips64/libutil.so\n  FAILED: : &amp;&amp; /Users/hippolytelacassagne/Library/Android/sdk/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang  --target=mips64el-none-linux-android --gcc-toolchain=/Users/hippolytelacassagne/Library/Android/sdk/ndk-bundle/toolchains/mips64el-linux-android-4.9/prebuilt/darwin-x86_64 --sysroot=/Users/hippolytelacassagne/Library/Android/sdk/ndk-bundle/sysroot -fPIC -isystem /Users/hippolytelacassagne/Library/Android/sdk/ndk-bundle/sysroot/usr/include/mips64el-linux-android -D__ANDROID_API__=21 -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -fintegrated-as -Wa,--noexecstack -Wformat -Werror=format-security -fexceptions -O0 -fno-limit-debug-info  -Wl,--exclude-libs,libgcc.a --sysroot /Users/hippolytelacassagne/Library/Android/sdk/ndk-bundle/platforms/android-21/arch-mips64 -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -Wl,--no-undefined -Wl,-z,noexecstack -Qunused-arguments -Wl,-z,relro -Wl,-z,now -shared -Wl,-soname,libutil.so -o ../../../../build/intermediates/cmake/debug/obj/mips64/libutil.so CMakeFiles/util.dir/src/main/myCpp/lib/util.c.o  -lm &amp;&amp; :\n  CMakeFiles/util.dir/src/main/myCpp/lib/util.c.o: In function `mgmt_to_string':\n  /Users/hippolytelacassagne/AndroidStudioProjects/Allnet/app/src/main/myCpp/lib/util.c:245: undefined reference to `ia_to_string'\n  /Users/hippolytelacassagne/AndroidStudioProjects/Allnet/app/src/main/myCpp/lib/util.c:274: undefined reference to `ia_to_string'\n  CMakeFiles/util.dir/src/main/myCpp/lib/util.c.o: In function `init_packet':\n  /Users/hippolytelacassagne/AndroidStudioProjects/Allnet/app/src/main/myCpp/lib/util.c:532: undefined reference to `sha512_bytes'\n  CMakeFiles/util.dir/src/main/myCpp/lib/util.c.o: In function `print_gethostbyname_error':\n  /Users/hippolytelacassagne/AndroidStudioProjects/Allnet/app/src/main/myCpp/lib/util.c:1554: undefined reference to `log_print'\n  clang: error: linker command failed with exit code 1 (use -v to see invocation)\n  ninja: build stopped: subcommand failed.\n\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n</code></pre>\n\n<p>It would appear that the errors come from some functions of util.c.<br>\nI don't understand because the functions that are supposedly not defined are defined in the included files.</p>\n\n<p>Does anyone have an idea? Thank you.</p>\n"}, {"tags": ["c", "sockets", "signals", "nonblocking"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1501043701, "post_id": 45316686, "comment_id": 77597041, "body": "You have an <code>alarm(0)</code> line.  Unless I&#39;m missing something, you&#39;ve never set the alarm to a bigger value, so you don&#39;t get an alarm signal delivered.  (Of course, it could be in the code you omitted, but you should not be showing us non-compilable code \u2014 we need an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) that compiles and displays the behaviour you&#39;re asking about.)"}, {"owner": {"reputation": 306, "user_id": 5536921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/p3Yu6.jpg?s=128&g=1", "display_name": "Brian SP", "link": "https://stackoverflow.com/users/5536921/brian-sp"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1501084565, "post_id": 45316686, "comment_id": 77625751, "body": "@JonathanLeffler you&#39;re right, I should have written a complete &amp; compilable sample, well I think your explanation is clear enough to be an answer even without complete code, I will go deeper in signals and will pay more attention to using alarm() function. thanks"}], "answers": [{"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1501043836, "creation_date": 1501043836, "answer_id": 45317570, "question_id": 45316686, "link": "https://stackoverflow.com/questions/45316686/c-sigalrm-not-received/45317570#45317570", "title": "C - SIGALRM not received", "body": "<p>Your code in the GitHub repo never calls <code>alarm()</code> with a non-zero number.  You'll never get an alarm signal delivered automatically unless you actually request one.  Relying on some other process to send your process an alarm signal isn't resilient.</p>\n"}], "owner": {"reputation": 306, "user_id": 5536921, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/p3Yu6.jpg?s=128&g=1", "display_name": "Brian SP", "link": "https://stackoverflow.com/users/5536921/brian-sp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 45317570, "answer_count": 1, "score": 0, "last_activity_date": 1501043836, "creation_date": 1501038007, "last_edit_date": 1501040298, "question_id": 45316686, "link": "https://stackoverflow.com/questions/45316686/c-sigalrm-not-received", "title": "C - SIGALRM not received", "body": "<p>I'm new to signals, I'm trying to set SIGALRM on UDP echo service, as a socket programming practice.<br>\nSo here I have a UDP socket, the client sends a string to server and waits for response (any response, here the string is echoed by server).<br>\nThe goals is to set SIGALRM and let the client resend the string a few times if no responses were made by server or UDP packets get lost.  </p>\n\n<p>Here, I used a small sample and simplified long lines with ..., you can get more details on my <a href=\"https://github.com/proph8/Sockets/blob/master/Asynchronous_UDPEcho/sigALRM-Client.c\" rel=\"nofollow noreferrer\">github repo</a> (line 51)  </p>\n\n<p><em>sigALRM-Client.c</em>  </p>\n\n<pre><code>unsigned int tries = 0;\n\nvoid CatchAlarm()\n{\n    tries += 1;\n}\n\nint main(int argc, char **argv)\n{\n    // SKIPPED\n    // ...\n    struct sigaction handler;\n    handler.sa_handler = CatchAlarm;\n    handler.sa_flags = 0;\n    if(sigfillset(&amp;handler.sa_mask) &lt; 0)\n        return 1;\n\n    if(sigaction(SIGALRM, &amp;handler, 0) &lt; 0)\n        return 2;\n\n    ssize_t bytes;\n\n    bytes = sendto(servSock,...);\n\n    while((bytes = recvfrom(servSock,...)) &lt; 0) {\n        // alarm went off\n        if(errno == EINTR) {\n            // try 5 times\n            if(tries &lt; 5) {\n                bytes = sendto(servSock,...);\n            } else {\n                fprintf(stdout, \"no response, waiting...\\n\");\n            }\n        } else {\n            fprintf(stdout, \"failed to get data\\n\");\n            return 3;\n        }\n    }\n    // recvfrom() got something, cancel timeout\n    alarm(0);\n    fprintf(stdout, \"received %d bytes of data\\n\", bytes);\n    close(servSock);\n}\n</code></pre>\n\n<p>When I run the client, it won't receive SIGALRM signal and UDP packets get lost in first attempt?!<br>\nClient won't retry sending string then exit after 5 attempts, instead, it waits for server response forever!<br>\nWhat prevents client to get SIGALRM?<br>\nDid I miss something here?  </p>\n"}, {"tags": ["c", "linux", "linux-kernel", "formatting", "astyle"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11327426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea4be2c40f5e849062991832c04be5a0?s=128&d=identicon&r=PG&f=1", "display_name": "andalevor", "link": "https://stackoverflow.com/users/11327426/andalevor"}, "is_accepted": false, "score": 1, "last_activity_date": 1554705695, "creation_date": 1554705695, "answer_id": 55567564, "question_id": 45316549, "link": "https://stackoverflow.com/questions/45316549/astyle-incorrectly-formatting-linux-style-braces/55567564#55567564", "title": "Astyle Incorrectly Formatting Linux Style Braces", "body": "<p>Astyle option \"--style=1tbs\" could be used to fix that.</p>\n"}], "owner": {"reputation": 611, "user_id": 3342427, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e758eeefb9b72c755d9b4302d626f00?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3342427/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1554705695, "creation_date": 1501037051, "question_id": 45316549, "link": "https://stackoverflow.com/questions/45316549/astyle-incorrectly-formatting-linux-style-braces", "title": "Astyle Incorrectly Formatting Linux Style Braces", "body": "<p>According to the <a href=\"https://www.kernel.org/doc/html/v4.10/process/coding-style.html\" rel=\"nofollow noreferrer\">Linux kernel coding style</a>, if only one branch of a conditional statement\nis a single statement, then braces should be used in both branches. For example:</p>\n\n<pre><code>    if (condition) {\n            do_this();\n            do_that();\n    } else {\n            otherwise();\n    }\n</code></pre>\n\n<p>This can be found in <a href=\"https://www.kernel.org/doc/html/v4.10/process/coding-style.html#placing-braces-and-spaces\" rel=\"nofollow noreferrer\">Section 3</a> of the official Linux kernel coding style document.</p>\n\n<p>Astyle's latest release <code>3.0.1</code> incorrectly formats conditionals like this. For example, Astyle leaves the following untouched:</p>\n\n<pre><code>if (condition) {\n        do_this();\n        do_that();\n} else\n        otherwise();\n</code></pre>\n\n<p>Is there a known fix for this in Astyle? If not, are current development efforts underway? If not, could someone point me in the right direction to get this fix integrated into the tool.</p>\n"}, {"tags": ["c", "winapi", "memory-address", "portable-executable"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 6, "creation_date": 1501037291, "post_id": 45316540, "comment_id": 77595420, "body": "No, no and no. If you feel the need to do this, you&#39;re doing something very wrong. (With regard to your last (third) question, recent versions of Windows will actually prevent you from doing so.)"}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1501043328, "post_id": 45316540, "comment_id": 77596927, "body": "DLLs get relocated to dynamically assigned addresses."}, {"owner": {"reputation": 1075, "user_id": 5377688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpeXm.png?s=128&g=1", "display_name": "byteptr", "link": "https://stackoverflow.com/users/5377688/byteptr"}, "edited": false, "score": 1, "creation_date": 1501121320, "post_id": 45316540, "comment_id": 77642205, "body": "Hey guys, my 2 cents: obviously the question was posted by someone new to low level Windows programming; for a newbie, IMO this is a very good question and where to find the answer in official sources may not be so apparent.  As such, why all the downvotes? I would rather the the OP ask the question rather than such a mistake be made in production code. BTW Great answer @David Heffernan"}], "answers": [{"comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 1, "creation_date": 1501053685, "post_id": 45318950, "comment_id": 77601978, "body": "It is perhaps also worth nothing that by default modern Windows systems will <a href=\"http://en.wikipedia.org/wiki/Address_space_layout_randomization\" rel=\"nofollow noreferrer\">intentionally relocate the systems DLLs at random</a> on reboot."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 3, "last_activity_date": 1501050102, "creation_date": 1501050102, "answer_id": 45318950, "question_id": 45316540, "link": "https://stackoverflow.com/questions/45316540/base-address-of-winapi-across-all-versions-of-windows/45318950#45318950", "title": "Base address of WinAPI across all versions of Windows", "body": "<p>The answer to all your questions is no.</p>\n\n<p>Relative function entry point address vary from one version of Windows to the next, vary even on system updates.</p>\n\n<p>The DLLs themselves have base  addresses that vary from version to version. And finally, DLLs need not load at their desired base  address. They may be relocated. </p>\n\n<p>Finally, you cannot redistribute system DLLs. Not only does that contravene the license, but it won't work because system DLLs are only compatible with the version of Windows that they are delivered with. </p>\n\n<p>Whatever your problem is, hardcoding function entry points is not the solution. </p>\n"}], "owner": {"reputation": 69, "user_id": 4722775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1548b67e09c724841d973a2e95048ea?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Peters", "link": "https://stackoverflow.com/users/4722775/andrew-peters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1501050102, "creation_date": 1501036996, "question_id": 45316540, "link": "https://stackoverflow.com/questions/45316540/base-address-of-winapi-across-all-versions-of-windows", "title": "Base address of WinAPI across all versions of Windows", "body": "<p>Let's assume I hardcode a given address for a Windows API into my executable. Can I assume that this address will evaluate to the correct API across all Windows versions (XP, 7, Vista, Server07/12, etc)?</p>\n\n<p>If not, is it possible for me to make this so without obtaining the address before-hand (GetProcAddress or enumerating dll ordinals)?</p>\n\n<p>Would I have to provide a prepackaged version of the .dll with the given address inside my application?</p>\n"}, {"tags": ["c", "eof"], "comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1501038459, "post_id": 45316519, "comment_id": 77595699, "body": "reading <code>dval</code> results in undefined behavior because <code>int</code> is probably shorter than <code>double</code>"}, {"owner": {"reputation": 399, "user_id": 3043719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acc4e5abf27298eca852c348648c8f11?s=128&d=identicon&r=PG&f=1", "display_name": "shen", "link": "https://stackoverflow.com/users/3043719/shen"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1501039499, "post_id": 45316519, "comment_id": 77595977, "body": "@L\u01b0uV\u0129nhPh&#250;c  okey. but how to explain <code>cval</code>? <code>-1</code> in <code>int</code> occupies 4 bytes <code>0xFF 0xFF 0xFF 0xFF</code> in memory. thus <code>cval</code> should equals to <code>0xFF</code> right? which is <code>255</code> on ascii table?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 2, "creation_date": 1501039937, "post_id": 45316519, "comment_id": 77596066, "body": "undefined behavior means <i>anything can happen</i>, including <a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">making demons fly out of your nose</a>. However in this case the character at code point 255 is printed out. <code>%c</code> is not for printing a char as its numeric value. Use <code>printf(&quot;%d\\n&quot;, (char)eof.cval)</code> instead"}, {"owner": {"reputation": 399, "user_id": 3043719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acc4e5abf27298eca852c348648c8f11?s=128&d=identicon&r=PG&f=1", "display_name": "shen", "link": "https://stackoverflow.com/users/3043719/shen"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1501040439, "post_id": 45316519, "comment_id": 77596204, "body": "for sure it will not print 255, but the 255th  character in ascii table. <code>0xFF</code> is the value on memory. am I right?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1501041115, "post_id": 45316519, "comment_id": 77596328, "body": "&quot;a test, to have a look in memory.&quot; --&gt; instead add member <code>unsigned char uc[sizeof double]</code> and print the elements of the array in hex to gain a better understanding."}, {"owner": {"reputation": 399, "user_id": 3043719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acc4e5abf27298eca852c348648c8f11?s=128&d=identicon&r=PG&f=1", "display_name": "shen", "link": "https://stackoverflow.com/users/3043719/shen"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501042373, "post_id": 45316519, "comment_id": 77596636, "body": "good hint! thx @chux :&gt;"}, {"owner": {"reputation": 399, "user_id": 3043719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acc4e5abf27298eca852c348648c8f11?s=128&d=identicon&r=PG&f=1", "display_name": "shen", "link": "https://stackoverflow.com/users/3043719/shen"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1501042955, "post_id": 45316519, "comment_id": 77596812, "body": "@L\u01b0uV\u0129nhPh&#250;c    output for <code>printf(&quot;%d\\n&quot;, (char)eof.cval)</code> is not <code>255</code> as expected, but still <code>-1</code>..."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 1, "creation_date": 1501044139, "post_id": 45316519, "comment_id": 77597182, "body": "@weiShen it&#39;s because <a href=\"https://stackoverflow.com/q/2054939/995714\"><code>char</code> is signed by default on your platform</a>. Change to <code>unsigned char</code> and see"}, {"owner": {"reputation": 399, "user_id": 3043719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acc4e5abf27298eca852c348648c8f11?s=128&d=identicon&r=PG&f=1", "display_name": "shen", "link": "https://stackoverflow.com/users/3043719/shen"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1501045650, "post_id": 45316519, "comment_id": 77597673, "body": "@L\u01b0uV\u0129nhPh&#250;c    finally got <code>255</code>. thank you for your patience :)"}], "answers": [{"tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": true, "score": 1, "last_activity_date": 1611123199, "last_edit_date": 1611123199, "creation_date": 1501037096, "answer_id": 45316555, "question_id": 45316519, "link": "https://stackoverflow.com/questions/45316519/the-eof-value-in-different-type-an-union/45316555#45316555", "title": "The &quot;EOF&quot; value in different type (an union)?", "body": "<p>A union is big enough to hold the biggest of it's members. It does not hold them all. Only one of it's values is usable at a time.</p>\n<p>You've set <code>ival</code> and it's good, but that means <code>cval</code>, <code>fval</code> and <code>dval</code> pretty much hold rubbish (not quite: you could figure it out based on the value of <code>ival</code>)</p>\n<p>Not a duplicate, but interesting reading: <a href=\"https://stackoverflow.com/questions/252552/why-do-we-need-c-unions\">Why do we need C Unions?</a></p>\n"}], "owner": {"reputation": 399, "user_id": 3043719, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/acc4e5abf27298eca852c348648c8f11?s=128&d=identicon&r=PG&f=1", "display_name": "shen", "link": "https://stackoverflow.com/users/3043719/shen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 45316555, "answer_count": 1, "score": -4, "last_activity_date": 1611123199, "creation_date": 1501036841, "last_edit_date": 1501087443, "question_id": 45316519, "link": "https://stackoverflow.com/questions/45316519/the-eof-value-in-different-type-an-union", "title": "The &quot;EOF&quot; value in different type (an union)?", "body": "<p>I am reading the C book <strong>K&amp;R</strong>. I know that <strong>the macro <code>EOF</code> on my system is <code>-1</code></strong>. \n</p>\n\n<pre><code>int eof = EOF;\nprintf(\"EOF on my system is: %d\\n\",eof);\n</code></pre>\n\n<p>But when I assign <code>EOF</code> to a union, the output somehow confused me. I can only understand <code>v.ival</code> is <code>-1</code>. Anyone can explain why the rest of them: <code>v.cval</code>, <code>v.fval</code>, and <code>v.dval</code> would be like this?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>union eof_val {\n    int ival;\n    char cval;\n    float fval;\n    double dval;\n} eof;\n\neof.ival = EOF;\n\nprintf(\"EOF to int = %d\\n\", eof.ival);        /* output: -1 */\nprintf(\"EOF to char = %c\\n\", eof.cval);       /* output: \ufffd */\nprintf(\"EOF to float = %f\\n\", eof.fval);      /* output: nan */\nprintf(\"EOF to double = %f\\n\", eof.dval);     /* output: 0.000000 */\n</code></pre>\n"}, {"tags": ["c", "pointers", "malware"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1501034144, "post_id": 45316137, "comment_id": 77594561, "body": "You could try using <code>unsigned char *</code> as the pointer type.  Obviously there is a lot that could go wrong here"}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 1, "creation_date": 1501035043, "post_id": 45316137, "comment_id": 77594807, "body": "What are you trying to do here is not clear, C is a compiled lang and the ELF(output) is completely different than your source code. Are you suggesting to read C code? C is pure pointer based lang and dereferencing is very basic nature, which book can you give the name? Are you trying to make debugger like program (where &#39;backtrace&#39; output functions address, which is than mapped with generated Map file). There are quite a few wrong assumptions here."}, {"owner": {"reputation": 315, "user_id": 4393339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/375afaed678540dfbe1b6cc0cb00d25c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shinde", "link": "https://stackoverflow.com/users/4393339/aditya-shinde"}, "reply_to_user": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 0, "creation_date": 1501037493, "post_id": 45316137, "comment_id": 77595470, "body": "@MilindDeore i know elf will contain the binary and not the source. That is exactly what I am trying to do. I want to keep a reference to the entry of main and then read its contents during runtime. And by read its contents, i mean read compiled opcodes of main. I know this can be done by objcopy ing the .text section of the elf. But that defeats the purpose, cos then, ill need 2 elfs, one just sitting there and the other reading its contents. I dont want that. I want a program which can read its own opcodes. I honestly don&#39;t know if this is even possible. And that is why I am asking."}, {"owner": {"reputation": 1869, "user_id": 191514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9feb361cc722c5c1ddfecac28e2108?s=128&d=identicon&r=PG&f=1", "display_name": "dyasta", "link": "https://stackoverflow.com/users/191514/dyasta"}, "edited": false, "score": 0, "creation_date": 1501039137, "post_id": 45316137, "comment_id": 77595874, "body": "It is a very complex operation that is not likely to get an answer here that is usable because it&#39;d be more like a book... and you really need to be further along to tackle this one. BUT maybe you are talking about simply obtaining the Entry Point, in which case you would traverse the PE header, I am not even clear on the question, but your details make it sound like you want to wrap an EXE with virtual opcode processor, and THAT is a big job."}, {"owner": {"reputation": 315, "user_id": 4393339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/375afaed678540dfbe1b6cc0cb00d25c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shinde", "link": "https://stackoverflow.com/users/4393339/aditya-shinde"}, "reply_to_user": {"reputation": 1869, "user_id": 191514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9feb361cc722c5c1ddfecac28e2108?s=128&d=identicon&r=PG&f=1", "display_name": "dyasta", "link": "https://stackoverflow.com/users/191514/dyasta"}, "edited": false, "score": 0, "creation_date": 1501039525, "post_id": 45316137, "comment_id": 77595987, "body": "@bitsum I wonder how viruses copy their own code while infecting other files."}, {"owner": {"reputation": 1869, "user_id": 191514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9feb361cc722c5c1ddfecac28e2108?s=128&d=identicon&r=PG&f=1", "display_name": "dyasta", "link": "https://stackoverflow.com/users/191514/dyasta"}, "edited": false, "score": 0, "creation_date": 1501039744, "post_id": 45316137, "comment_id": 77596032, "body": "There are numerous methods. I don&#39;t want to go into detail, that&#39;d be a full answer to a separate question."}, {"owner": {"reputation": 315, "user_id": 4393339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/375afaed678540dfbe1b6cc0cb00d25c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shinde", "link": "https://stackoverflow.com/users/4393339/aditya-shinde"}, "reply_to_user": {"reputation": 1869, "user_id": 191514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9feb361cc722c5c1ddfecac28e2108?s=128&d=identicon&r=PG&f=1", "display_name": "dyasta", "link": "https://stackoverflow.com/users/191514/dyasta"}, "edited": false, "score": 0, "creation_date": 1501039999, "post_id": 45316137, "comment_id": 77596086, "body": "@bitsum Alright ill ask a seperate question."}, {"owner": {"reputation": 1869, "user_id": 191514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9feb361cc722c5c1ddfecac28e2108?s=128&d=identicon&r=PG&f=1", "display_name": "dyasta", "link": "https://stackoverflow.com/users/191514/dyasta"}, "edited": false, "score": 0, "creation_date": 1501040344, "post_id": 45316137, "comment_id": 77596176, "body": "You will get attacked by the community, and I have not the time nor desire to write the book this would require. Someone might. It is an entire sub-field, so it&#39;s like asking &quot;How does Organic Chemistry work?&quot; when you know just a little about chemistry."}, {"owner": {"reputation": 315, "user_id": 4393339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/375afaed678540dfbe1b6cc0cb00d25c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shinde", "link": "https://stackoverflow.com/users/4393339/aditya-shinde"}, "reply_to_user": {"reputation": 1869, "user_id": 191514, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bf9feb361cc722c5c1ddfecac28e2108?s=128&d=identicon&r=PG&f=1", "display_name": "dyasta", "link": "https://stackoverflow.com/users/191514/dyasta"}, "edited": false, "score": 0, "creation_date": 1501040770, "post_id": 45316137, "comment_id": 77596260, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/150131/discussion-between-aditya-shinde-and-bitsum\">continue this discussion in chat</a>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1501041940, "post_id": 45316137, "comment_id": 77596507, "body": "The reason for your issue is the <code>main_ptr++</code>. There are no proper semantics defined for pointer arithmetic operations on function pointers on any implementations. But most implementations do define cast to <code>void*</code> (and further to int*) even though it is UB."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 4393339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/375afaed678540dfbe1b6cc0cb00d25c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shinde", "link": "https://stackoverflow.com/users/4393339/aditya-shinde"}, "edited": false, "score": 0, "creation_date": 1501043397, "post_id": 45317341, "comment_id": 77596948, "body": "Thanks! that worked. The endian-ness is messed up though. But it actually does point to the entry of main and starts printing the compiled bytes"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 315, "user_id": 4393339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/375afaed678540dfbe1b6cc0cb00d25c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shinde", "link": "https://stackoverflow.com/users/4393339/aditya-shinde"}, "edited": false, "score": 1, "creation_date": 1501043474, "post_id": 45317341, "comment_id": 77596970, "body": "@AdityaShinde Yes, <code>int</code> might be read with it&#39;s own endian-ness. If you want to preserve the original byte order, consider casting to <code>unsigned char*</code> instead of <code>int*</code>. You will get byte by byte."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 2, "last_activity_date": 1501043360, "last_edit_date": 1592644375, "creation_date": 1501042408, "answer_id": 45317341, "question_id": 45316137, "link": "https://stackoverflow.com/questions/45316137/how-to-access-text-section-using-a-function-pointer-in-c/45317341#45317341", "title": "How to access .text section using a function pointer in C?", "body": "<p>There are 2 issue with your code (even though as such it is UB to be strict).\nBut even from any implementations point of view there are the following issues</p>\n<ol>\n<li><p>None of the implementations define the <code>*</code> operator for function pointer.</p>\n</li>\n<li><p>None of the implementations define the <code>++</code> operator on the function pointers because size of a function is not defined.</p>\n</li>\n</ol>\n<p>But most implementations do define casting a fptr to <code>void*</code> and then to other data pointers even though it is UB.</p>\n<p>You can make use of that fact.</p>\n<p>I tried the simple modification of your code -</p>\n<pre><code>for(i=0;i&lt;10;i++)\n    printf(&quot;%x &quot;,*((int*)main_ptr++));\n</code></pre>\n<p>And it produced the &quot;expected&quot; behavior with <code>gcc</code> (MinGW64), compared the output against objdump.</p>\n<h2>Finally this goes with the warning that none of the approaches are portable. Perhaps there is no portable way to achieve what you are doing.</h2>\n<p>If you just have to get the same code as main, one way could be to read the actual binary (pointed by <code>arg[0]</code>). Parse the headers to find main and then read the bytes from there. Since reading the file would give you a data pointer there is no UB there.</p>\n"}], "owner": {"reputation": 315, "user_id": 4393339, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/375afaed678540dfbe1b6cc0cb00d25c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Shinde", "link": "https://stackoverflow.com/users/4393339/aditya-shinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "closed_date": 1501073870, "accepted_answer_id": 45317341, "answer_count": 1, "score": 1, "last_activity_date": 1501043360, "creation_date": 1501033990, "question_id": 45316137, "link": "https://stackoverflow.com/questions/45316137/how-to-access-text-section-using-a-function-pointer-in-c", "closed_reason": "Needs details or clarity", "title": "How to access .text section using a function pointer in C?", "body": "<p>I am trying to inject executable code in memory using C. The executable should be able to read it's own code and copy it to some other location referenced by a pointer. The general template code is as follows</p>\n\n<pre><code>int\nmain(){\n    int (*main_ptr)();\n    main_ptr=main; // make the pointer point to start of main\n    /*\n    * rest of the code.\n    *\n    */\n\n\n    /*Now I am trying to print the first 10 bytes of the main function.\n    * just to see if it is possible to access main's code.\n    */\n\n    for(int i=0;i&lt;10;i++)\n        printf(\"%x \",*main_ptr++);\n    return 0;\n}\n</code></pre>\n\n<p>but the output is the value of the pointer (i.e. address of main function), not the value to which it points (the code of the main function). I had read somewhere that C does not dereference function pointers. But I do not know why. Is there a way to get around this? \nOr, is there another way for a program to access its own code section?</p>\n\n<p>P.S. I understand that many may think this is a stupid question and does not contribute significantly to research and all that. But I'am trying to understand how malware is written and given the absence of material on the web, it has been frustrating, so I decided to try this myself. Any help would be great.</p>\n"}, {"tags": ["c", "file", "loops"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501033208, "post_id": 45315982, "comment_id": 77594346, "body": "<code>while(fgets(user_str, BUF, usernames) &amp;&amp; fgets(pass_str, BUF, passwords)){ fprintf( final_file, &quot;%-25s %s\\n&quot;, user_str, pass_str ); }</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1501033568, "post_id": 45315982, "comment_id": 77594434, "body": "Possibly you want to remove newlines from <code>user_str</code>"}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "edited": false, "score": 0, "creation_date": 1501034112, "post_id": 45315982, "comment_id": 77594548, "body": "BLUEPIXY and M.M. I am still getting non portable pointer conversion warning."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1501034215, "post_id": 45315982, "comment_id": 77594582, "body": "<code>fgets()</code> returns a pointer, not an <code>int</code>."}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "edited": false, "score": 0, "creation_date": 1501034628, "post_id": 45315982, "comment_id": 77594672, "body": "David Bowling, a pointer to what and thats not really my question I added some code so you guys could look at the other stuff."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1501034632, "post_id": 45315982, "comment_id": 77594673, "body": "<code>!= EOF</code> --&gt; <code>!= NULL</code>, <code>char *user_str, *pass_str;</code> --&gt; <code>char user_str[BUF], pass_str[BUF];</code>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1501034803, "post_id": 45315982, "comment_id": 77594723, "body": "Don&#39;t modify question code based on comments; this only makes existing comments and answers confusing to others who come across this later; if you need to, add an Edit. You  had <code>int ct, ck;</code> receiving the return value from <code>fgets()</code> This is wrong, because <code>fgets()</code> returns a pointer to <code>char</code>. Now you are comparing the return value with <code>EOF</code>, also wrong. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.21.7.2\" rel=\"nofollow noreferrer\">Read the docs</a>."}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501034910, "post_id": 45315982, "comment_id": 77594764, "body": "@BLUEPIXY I&#39;m wanting it to check for the end of the file at that point not NULL"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501035032, "post_id": 45315982, "comment_id": 77594804, "body": "Read  <b>Return value</b> of reference of <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\">fgets</a>"}, {"owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501035075, "post_id": 45315982, "comment_id": 77594816, "body": "Ahh thank you @BLUEPIXY I know I&#39;ve been on here a lot but I&#39;m taking a smummer class and my teacher isn&#39;t really doing anything besides grading."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1501035254, "post_id": 45315982, "comment_id": 77594867, "body": "<code>user_str</code> is not assigned nor initialized --&gt; <code>fgets( user_str, BUF, usernames)</code> --&gt; UB."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1501036401, "post_id": 45315982, "comment_id": 77595189, "body": "How much <i>Storage</i> do you have at the location pointed to by <code>user_str</code> and <code>pass_str</code>?? How about <code>char user_str[BUF] = &quot;&quot;; pass_str[BUF] = &quot;&quot;;</code>??"}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1501034127, "post_id": 45316065, "comment_id": 77594556, "body": "I see a description of <code>fgets()</code>, but I don&#39;t see the promised explanation of how OP went wrong...."}], "tags": [], "owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "is_accepted": false, "score": 1, "last_activity_date": 1501033426, "creation_date": 1501033426, "answer_id": 45316065, "question_id": 45315982, "link": "https://stackoverflow.com/questions/45315982/non-portable-pointer-conversion/45316065#45316065", "title": "Non-portable pointer conversion", "body": "<p>@BLUEPIXY has given you the correct code - Here's the explanation of where you went wrong in your code:-  </p>\n\n<blockquote>\n  <p>char *fgets(char *str, int n, FILE *stream)  </p>\n  \n  <p>reads a line from the specified stream and stores it into the string pointed to by str. It stops when either (n-1) characters are read, the newline character is read, or the end-of-file is reached, whichever comes first.</p>\n  \n  <h2>Retun value of fgets</h2>\n  \n  <p>On success: the function returns the same str parameter  </p>\n  \n  <p>If the End-of-File is encountered and no characters have been read,\n  the contents of str remain unchanged and a null pointer is returned</p>\n  \n  <p>If an error occurs, a null pointer is returned.</p>\n</blockquote>\n\n<p>Source:- <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">C Tutorial Point</a></p>\n"}], "owner": {"reputation": 87, "user_id": 8239226, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/55c338e7452dfa270319ef12f44ddda8?s=128&d=identicon&r=PG&f=1", "display_name": "Demarcus Sales", "link": "https://stackoverflow.com/users/8239226/demarcus-sales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1501034446, "creation_date": 1501032710, "last_edit_date": 1501034446, "question_id": 45315982, "link": "https://stackoverflow.com/questions/45315982/non-portable-pointer-conversion", "title": "Non-portable pointer conversion", "body": "<p>I am writing a program that takes strings from two files and combines them to make a third file with the combined string. </p>\n\n<pre><code>#define BUF 255\n\nint main( void)\n{\n    FILE *usernames; FILE *passwords; FILE *final_file;\n    char *user_str, *pass_str;\n    int ct, ck;\n\n    usernames = fopen( \".\\\\info_files\\\\usernames.txt\", \"r\" );\n    passwords = fopen( \".\\\\info_files\\\\passwords.txt\", \"r\" );\n    final_file = fopen( \".\\\\info_files\\\\usernamesPasswords.txt\", \"w\" );\n\n    if ( (usernames == NULL) || (passwords == NULL) || (final_file == NULL) \n    )\n    {\n\n        printf( \"failed to open one of the files\" );\n\n    }\n\n    while ( (fgets( user_str, BUF, usernames) != EOF ) &amp;&amp; ( fgets( pass_str, BUF, passwords) != EOF)) \n    {       \n        fprintf( final_file, \"%-25s %s\\n\", user_str, pass_str );        \n    }   \n\n\n\n    fclose( usernames );\n    fclose( passwords );\n    fclose( final_file );\n\n    return 0;\n}\n</code></pre>\n\n<p>This is what's giving me trouble. I have no idea what is causing this to crash. \nThis is edited from what was first posted. </p>\n"}, {"tags": ["c", "runtime", "big-o"], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 7563901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XOeAX.jpg?s=128&g=1", "display_name": "Lavaman65", "link": "https://stackoverflow.com/users/7563901/lavaman65"}, "is_accepted": true, "score": 2, "last_activity_date": 1501033852, "creation_date": 1501033852, "answer_id": 45316117, "question_id": 45315946, "link": "https://stackoverflow.com/questions/45315946/big-o-of-nested-loop-that-with-varying-iterations/45316117#45316117", "title": "Big O of nested loop that with varying iterations?", "body": "<p>For the second loop (which it appears that you still need an answer for), you have sort of a misleading bit of code, where you have 3 nested loops, so at first glance, it makes sense that the runtime is O(n^3). </p>\n\n<p>However, this is incorrect. This is because the innermost while loop modifies j, the same variable that the for loop modifies. This code is actually equivalent to this bit of code below:</p>\n\n<pre><code>for(i = 0; i &lt; n; i++){\n  for(j = i; j &lt; n; j++){\n    arr[i] += arr[j]; /* THIS LINE */\n    j++;\n  }\n}\n</code></pre>\n\n<p>This is because the while loop on the inside will run, incrementing j until j == n, then it breaks out. At that point, the inner for loop will increment j again and compare it to n, where it will find that j >= n, and exit. You should be familiar with this case already, and recognize it as O(n^2).</p>\n\n<p>Just a note, the second bit of code is not safe (technically), as j may overflow when you increment it an additional time after the while loop finishes running. This would cause the for loop to run forever. However, this will only occur when n = int_max().</p>\n"}, {"comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 1, "creation_date": 1501061933, "post_id": 45316340, "comment_id": 77607942, "body": "This should be the accepted answer as it corrects OP&#39;s wrong answer for question 1."}, {"owner": {"reputation": 855, "user_id": 7563901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XOeAX.jpg?s=128&g=1", "display_name": "Lavaman65", "link": "https://stackoverflow.com/users/7563901/lavaman65"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1501089435, "post_id": 45316340, "comment_id": 77629081, "body": "@meowgoesthedog agreed"}], "tags": [], "owner": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "is_accepted": false, "score": 6, "last_activity_date": 1501035530, "creation_date": 1501035530, "answer_id": 45316340, "question_id": 45315946, "link": "https://stackoverflow.com/questions/45315946/big-o-of-nested-loop-that-with-varying-iterations/45316340#45316340", "title": "Big O of nested loop that with varying iterations?", "body": "<p>Regarding the first one. It is <strong>not</strong> <code>O(n^2)</code>!!! For the sake of simplicity and readability, let's rewrite it in the form of pseudocode:</p>\n\n<pre><code>for i in [1, 2, ... n]:                              # outer loop\n    for j in [1, 2, ... 1000/i]:                     # inner loop\n        do domething with time complexity O(1).      # constant-time operation\n</code></pre>\n\n<p>Now, the number of constant-time operations within the inner loop (which depends on parameter <code>i</code> of the outer loop) can be expressed as:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GkV6O.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GkV6O.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now, we can calculate the number of constant-time operations overall: </p>\n\n<p><a href=\"https://i.stack.imgur.com/57tAA.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/57tAA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here, <code>N(n)</code> is a harmonic number (see <a href=\"https://en.wikipedia.org/wiki/Harmonic_number\" rel=\"noreferrer\">wikipedia</a>), and there is a very interesting property of these numbers:</p>\n\n<p><a href=\"https://i.stack.imgur.com/yBTux.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/yBTux.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where <code>C</code> is <a href=\"https://en.wikipedia.org/wiki/Euler%E2%80%93Mascheroni_constant\" rel=\"noreferrer\">Euler\u2013Mascheroni constant</a>. Therefore, the complexity of the first algorithm is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mgZ97.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mgZ97.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Regarding the second one. It seems like either the code contains a mistake, or it is a trick test question. The code resolves to</p>\n\n<pre><code>for (i = 1; i &lt; n; i++)\n    for(j = i; j &lt; n; j++){\n        arr[j]++;\n        j++;\n    }\n</code></pre>\n\n<p>The inner loop takes</p>\n\n<p><a href=\"https://i.stack.imgur.com/7Mjwv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7Mjwv.png\" alt=\"enter image description here\"></a></p>\n\n<p>operations, so we can calculate overall complexity:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BmSI9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BmSI9.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 177, "user_id": 7594127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/965c731d858cdf1a15090769f9171075?s=128&d=identicon&r=PG&f=1", "display_name": "below_avg_st", "link": "https://stackoverflow.com/users/7594127/below-avg-st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "accepted_answer_id": 45316117, "answer_count": 2, "score": 2, "last_activity_date": 1501035530, "creation_date": 1501032416, "question_id": 45315946, "link": "https://stackoverflow.com/questions/45315946/big-o-of-nested-loop-that-with-varying-iterations", "title": "Big O of nested loop that with varying iterations?", "body": "<p>I'm having a bit of trouble figuring out the Big O run time for the two set of code samples where the iterations depend on outside loops. I have a basic understanding of the Big O run times and I can figure out the run times for simpler code samples. I'm not too sure how some lines are affecting the run time.</p>\n\n<p>I would consider this first one O(n^2). However, I'm not certain.</p>\n\n<pre><code>for(i = 1; i &lt; n; i++){\n for(j = 1000/i; j &gt; 0; j--){  &lt;--Not sure if this is still O(n)\n    arr[j]++; /* THIS LINE */\n }\n}\n</code></pre>\n\n<p>I'm a bit more lost with this one. O(n^3) possibly O(n^2)? </p>\n\n<pre><code>for(i = 0; i &lt; n; i++){\n for(j = i; j &lt; n; j++){\n    while( j&lt;n ){\n      arr[i] += arr[j]; /* THIS LINE */\n      j++;\n    }\n }\n}\n</code></pre>\n\n<p>I found this post and I applied this to the first code sample but I'm still unsure about the second. <a href=\"https://stackoverflow.com/questions/362059/what-is-the-big-o-of-a-nested-loop-where-number-of-iterations-in-the-inner-loop\">What is the Big-O of a nested loop, where number of iterations in the inner loop is determined by the current iteration of the outer loop?</a></p>\n"}, {"tags": ["c", "sockets", "http", "http-headers", "ip-address"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501031611, "post_id": 45315750, "comment_id": 77593983, "body": "Your request is malformed, the line separator must be <code>\\r\\n</code>. After each single line. Also HTTP1.1 absolutely doesn&#39;t work without Host header, so please stop trying that and produce a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that is according to your best knowledge."}], "answers": [{"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 0, "last_activity_date": 1501043646, "creation_date": 1501043646, "answer_id": 45317533, "question_id": 45315750, "link": "https://stackoverflow.com/questions/45315750/how-can-i-bypass-websites-that-block-direct-connections/45317533#45317533", "title": "How can I bypass websites that block direct connections?", "body": "<p>Your request is malformed:</p>\n\n<ul>\n<li><p>Each line needs to be terminated by <code>\\r\\n</code>, not just <code>\\n</code>. (Some web servers will let you get away with <code>\\n</code>, but I have no idea whether that'll work on 000webhost.)</p></li>\n<li><p>Every header needs a <code>\\r\\n</code> after it. The modified code you mention in the last paragraph is missing a <code>\\r\\n</code> at the end of the <code>Host</code> header.</p></li>\n<li><p>The <code>Host</code> header needs to just be a hostname (e.g, <code>\"Host: example.com\"</code>). Don't include <code>http://</code>.</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 8366688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b55ad513f13316d9900993063bbf8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Reynolds", "link": "https://stackoverflow.com/users/8366688/brian-reynolds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1395, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573070180, "creation_date": 1501030847, "question_id": 45315750, "link": "https://stackoverflow.com/questions/45315750/how-can-i-bypass-websites-that-block-direct-connections", "title": "How can I bypass websites that block direct connections?", "body": "<p>I'm trying to access the website <code>https://www.000webhost.com</code> with C sockets:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char** argv) {\n    struct sockaddr_in servaddr;\n    struct hostent *hp;\n    int sock_id;\n    char message[1024*1024];\n    char request[] = \"GET / HTTP/1.1\\n\" \"From: ...\\n\";\n\n    //get a socket  \n    if((sock_id = socket(AF_INET, SOCK_STREAM, 0)) == -1) {\n        fprintf(stderr,\"Couldn't get a socket.\\n\"); \n        exit(EXIT_FAILURE);\n    }else {\n        fprintf(stderr,\"Got a socket.\\n\");\n    }\n\n    memset(&amp;servaddr,0,sizeof(servaddr));\n\n    //get address\n    if((hp = gethostbyname(\"000webhost.com\")) == NULL) {\n        fprintf(stderr,\"Couldn't get an address.\\n\"); \n        exit(EXIT_FAILURE);\n    }else {\n        fprintf(stderr,\"Got an address.\\n\");\n    }\n\n    memcpy((char *)&amp;servaddr.sin_addr.s_addr, (char *)hp-&gt;h_addr, hp-&gt;h_length);\n\n    //port number and type\n    servaddr.sin_port = htons(80);\n    servaddr.sin_family = AF_INET;\n\n    //connect\n    if(connect(sock_id, (struct sockaddr *)&amp;servaddr, sizeof(servaddr)) != 0) {\n        fprintf(stderr, \"Couldn't connect.\\n\");\n    }else {\n        fprintf(stderr,\"Got a connection.\\n\");\n    }\n\n    //request\n    write(sock_id,request,strlen(request));\n\n    //response\n    read(sock_id,message,1024*1024);\n\n    fprintf(stdout,\"%s\",message);\n\n    return 0;\n}\n</code></pre>\n\n<p>If I change the <code>request[]</code> array from <code>\"GET / HTTP/1.1\\n\" \"From: ...\\n\"</code> to <code>\"GET / HTTP/1.1\\n\" \"Host: https://www.000webhost.com\" \"From: ...\\n\"</code> (therefore removing the direct-IP adress from the request), I still get the error <code>Error 1003. Direct IP access not allowed</code>. Is there some other part of the request that I need to modify? What else do I need to do?</p>\n"}, {"tags": ["c#", "c", "console", "console-application", "communication"], "comments": [{"owner": {"reputation": 433, "user_id": 886206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6HYAn.jpg?s=128&g=1", "display_name": "douglasquaid84", "link": "https://stackoverflow.com/users/886206/douglasquaid84"}, "edited": false, "score": 0, "creation_date": 1501030823, "post_id": 45315656, "comment_id": 77593808, "body": "There are many ways to do inter-process communication in windows. Sockets is my preferred way, other methods are pipes and shared memory. Here is the windows article on IPC: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365574(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1501032097, "post_id": 45315656, "comment_id": 77594091, "body": "how do they normally talk to each other?"}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1501032195, "post_id": 45315656, "comment_id": 77594113, "body": "if it&#39;s a serial port, just use serial, write an adaption layer for your microntroller code to send  serial.  You can then use virtual serial ports to connect them."}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1501032479, "post_id": 45315656, "comment_id": 77594172, "body": "If you don&#39;t want virtual serial, then  fake your serial into a tcp connection.  The other approach I have done is compile my C code into a library and then created a managed library.  I did this so I could emulate various peripherial devices (like I2C) and create visualizations and check the code didn&#39;t wear flash unecessarily, etc"}, {"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1501032661, "post_id": 45315656, "comment_id": 77594215, "body": "one last note, a lot of that style of testing goes away if you unit test in visual studio (I wrote SeaTest for doing unit testing for this kind of thing )  <a href=\"https://github.com/keithn/seatest\" rel=\"nofollow noreferrer\">github.com/keithn/seatest</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3965967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9a8d9f027d7cadaa1d82962d2e8f39?s=128&d=identicon&r=PG&f=1", "display_name": "John Vickers", "link": "https://stackoverflow.com/users/3965967/john-vickers"}, "is_accepted": false, "score": 1, "last_activity_date": 1501036070, "creation_date": 1501036070, "answer_id": 45316410, "question_id": 45315656, "link": "https://stackoverflow.com/questions/45315656/passing-data-between-a-c-application-and-a-c-console-application-in-visual-stud/45316410#45316410", "title": "Passing data between a C# application and a C console application in visual studio while debugging", "body": "<p>Cairn O.,</p>\n\n<p>Thanks for pointing me onto ICP, I hadn't really thought about doing sockets because I assumed it would be complex to do a server in C under Windows. After doing some reading on the different types of ICP, I came across this article:</p>\n\n<p><a href=\"http://www.binarytides.com/winsock-socket-programming-tutorial/\" rel=\"nofollow noreferrer\">http://www.binarytides.com/winsock-socket-programming-tutorial/</a></p>\n\n<p>It has really simple examples that are working for creating a client and a server in C. This method should work really well for me because it is a direct emulation of one of the connection methods I will have in the micro (USB and RS232 being the other types of connections).</p>\n\n<p>This way I can also test my Ethernet socket connection code in my C# application at the same time, and I don't have to fake it out like I thought I would have to with other methods!</p>\n\n<p>Hope this helps someone else too!</p>\n\n<p>Thanks again,\nJohn Vickers</p>\n"}], "owner": {"reputation": 41, "user_id": 3965967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9a8d9f027d7cadaa1d82962d2e8f39?s=128&d=identicon&r=PG&f=1", "display_name": "John Vickers", "link": "https://stackoverflow.com/users/3965967/john-vickers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501036070, "creation_date": 1501030212, "question_id": 45315656, "link": "https://stackoverflow.com/questions/45315656/passing-data-between-a-c-application-and-a-c-console-application-in-visual-stud", "title": "Passing data between a C# application and a C console application in visual studio while debugging", "body": "<p>I am working on an embedded system protocol to communicate from a micro-controller to a computer. The micro-controller code is in C and the computer application is in C#. For debugging purposes, I have the micro-controller portion currently in a visual studio project since it is faster to compile and step through than on the micro-controller directly. I would like to be able to pass data back and forth between my C# application and the C console application and have both running in their own debuggers so I can step through all steps of the communication loop. </p>\n\n<p>I have seen some references that look like this should be possible by redirecting stdin and stdout from the C console application, but all of the examples are when the process is launched from the C# application. Since both application would need to be launched from their VS debug sessions, I am not sure how to get this connection working.</p>\n\n<p>All I need is a way to send a byte array in each direction and receive it in the other application.</p>\n\n<p>Any help would be appreciated!</p>\n\n<p>Thanks,\nJohn Vickers</p>\n"}, {"tags": ["c", "rust", "inotify", "newtype"], "comments": [{"owner": {"reputation": 134258, "user_id": 785065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAbxM.jpg?s=128&g=1", "display_name": "loganfsmyth", "link": "https://stackoverflow.com/users/785065/loganfsmyth"}, "edited": false, "score": 0, "creation_date": 1501029491, "post_id": 45315521, "comment_id": 77593520, "body": "Given that <code>Event</code> has <code>.name</code>, can&#39;t you use that to map back to the file already?"}, {"owner": {"reputation": 195, "user_id": 3818171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43695c967e20dac254e535ff08980858?s=128&d=identicon&r=PG&f=1", "display_name": "arsalan86", "link": "https://stackoverflow.com/users/3818171/arsalan86"}, "reply_to_user": {"reputation": 134258, "user_id": 785065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qAbxM.jpg?s=128&g=1", "display_name": "loganfsmyth", "link": "https://stackoverflow.com/users/785065/loganfsmyth"}, "edited": false, "score": 0, "creation_date": 1501029592, "post_id": 45315521, "comment_id": 77593549, "body": "loganfsmyth: <code>.name</code> only returns a filename if a directory is being watched. Edited question to include that info."}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 3818171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43695c967e20dac254e535ff08980858?s=128&d=identicon&r=PG&f=1", "display_name": "arsalan86", "link": "https://stackoverflow.com/users/3818171/arsalan86"}, "edited": false, "score": 0, "creation_date": 1501037786, "post_id": 45316225, "comment_id": 77595562, "body": "Thanks for answer! Yes, it does seem like the library needs some work. I have managed to fork it and make a few changes that solve my use case (for now), but the issues you&#39;ve highlighted are making me think twice about deploying anything based on this library."}, {"owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "reply_to_user": {"reputation": 195, "user_id": 3818171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43695c967e20dac254e535ff08980858?s=128&d=identicon&r=PG&f=1", "display_name": "arsalan86", "link": "https://stackoverflow.com/users/3818171/arsalan86"}, "edited": false, "score": 0, "creation_date": 1501051584, "post_id": 45316225, "comment_id": 77600590, "body": "In defense of <code>inotify-rs</code>, many people have been hit by inotify trickiness in the past. Android <code>FileObserver</code> has precisely same issues. Java 7 <code>WatchService</code> reports inotify queue overflows, but does not properly account for the other issues. And even if the API can handle them transparently, everyone tends to forget about hardlinks\u2026"}, {"owner": {"reputation": 195, "user_id": 3818171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43695c967e20dac254e535ff08980858?s=128&d=identicon&r=PG&f=1", "display_name": "arsalan86", "link": "https://stackoverflow.com/users/3818171/arsalan86"}, "edited": false, "score": 0, "creation_date": 1501063521, "post_id": 45316225, "comment_id": 77609169, "body": "gotcha, but I&#39;m evaluating whether it would be better to just poll in my usecase"}], "tags": [], "owner": {"reputation": 3604, "user_id": 1643723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e16eeec789c8b7281a9d7dd56b8030?s=128&d=identicon&r=PG", "display_name": "user1643723", "link": "https://stackoverflow.com/users/1643723/user1643723"}, "is_accepted": true, "score": 3, "last_activity_date": 1501089698, "last_edit_date": 1501089698, "creation_date": 1501034729, "answer_id": 45316225, "question_id": 45315521, "link": "https://stackoverflow.com/questions/45315521/how-do-i-use-the-watchdescriptor-struct-generated-by-inotify-rs-to-match-events/45316225#45316225", "title": "How do I use the WatchDescriptor struct generated by inotify-rs to match events to files that generated them?", "body": "<p>There are some substantial issues with this library:</p>\n\n<ul>\n<li>The poor choice of type to represent the inotify watch descriptor. Inotify watch descriptors are <em>not</em> Unix file descriptors, they are just some integral number, scoped per inotify file descriptor. Not a flaw by itself, but I certainly would view that as a red flag.</li>\n<li>As noted above, inotify watch descriptor values are scoped per parent inotify file descriptor. This makes the use of <code>[derive(Eq)]</code> on <code>WatchDescriptor</code> highly questionable. Looks like a straight-up bug.</li>\n<li>There is nothing to ensure that inotify watches are closed before closing the inotify descriptor. There is nothing to ensure that watch descriptors don't get reused behind your back (they can be reused after watch descriptor number wraps). Those issues probably won't bite you immediately, but\u2026 IMO, the entire inotify-rs should have been declared <code>unsafe</code>. It does not add any actual safety on top of inotify, just some sugar and pointless wrappers. It does not even implement <code>Drop</code> for the watch descriptor!</li>\n<li>The library does nothing to highlight major gotchas of inotify: event queue overflows, <code>IN_IGNORED</code> and hard links sharing the same inode (and the same inotify watch descriptors!)</li>\n</ul>\n\n<p>I recommend you to carefully read the inotify documentation and write your own wrapper if necessary. This library won't save you any trouble.</p>\n"}], "owner": {"reputation": 195, "user_id": 3818171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43695c967e20dac254e535ff08980858?s=128&d=identicon&r=PG&f=1", "display_name": "arsalan86", "link": "https://stackoverflow.com/users/3818171/arsalan86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 2, "accepted_answer_id": 45316225, "answer_count": 1, "score": 3, "last_activity_date": 1501089698, "creation_date": 1501029021, "last_edit_date": 1501029658, "question_id": 45315521, "link": "https://stackoverflow.com/questions/45315521/how-do-i-use-the-watchdescriptor-struct-generated-by-inotify-rs-to-match-events", "title": "How do I use the WatchDescriptor struct generated by inotify-rs to match events to files that generated them?", "body": "<p>I'm using Inotify (through the inotify-rs wrapper) to watch a large number of files (not directories) across a filesystem.</p>\n\n<p>The following inotify-rs method returns a <code>WatchDescriptor</code> struct:</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>add_watch&lt;P&gt;(&amp;mut self, path: P, mask: WatchMask) -&gt; io::Result&lt;WatchDescriptor&gt;\nwhere\n   P: AsRef&lt;Path&gt;\n</code></pre>\n\n<p><code>WatchDescriptor</code> is a newtype struct: <code>pub struct WatchDescriptor(RawFd);</code> where <code>std::os::unix::io::RawFd</code> is type <code>c_int</code>/<code>f32</code></p>\n\n<p>the Inotify subsystem returns an <code>inotify_event</code> struct each time a watch is triggered:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>struct inotify_event {\n        int      wd;       /* Watch descriptor */\n        uint32_t mask;     /* Mask describing event */\n        uint32_t cookie;   /* Unique cookie associating related\n                                events (for rename(2)) */\n        uint32_t len;      /* Size of name field */\n        char     name[];   /* Optional null-terminated name */\n    };\n</code></pre>\n\n<p>The \"Watch descriptor\" <code>int wd</code> matches the watch descriptor generated by the initial call to <code>add_watch()</code></p>\n\n<p>In turn, the inotify-rs wrapper returns the following event struct:</p>\n\n<pre class=\"lang-rust prettyprint-override\"><code>pub struct Event&lt;'a&gt; {    \n    pub wd    : WatchDescriptor,\n    pub mask  : EventMask,\n    pub cookie: u32,\n    pub name  : &amp;'a OsStr,\n}\n</code></pre>\n\n<p>I am trying to use <code>Event.wd</code> to match the event to a file from a list of files being watched. (<code>.name</code> only returns a filename if the event triggered on a watch for a directory) I have been unsuccessful at trying to use a <code>HashMap</code> because the struct <code>WatchDescriptor</code> does not derive the <code>Hash</code> trait. I tried to fork the crate and implement that myself, but that opened up an entirely new can of worms.</p>\n\n<p>The simplest way should be to use <code>Event.wd.0</code> to get a <code>c_int</code>/<code>i32</code> but then I have to deal with <code>error: field '0' of struct 'inotify::WatchDescriptor' is private</code></p>\n\n<p>Is there a simple way to do this, short of re-writing the wrapper to behave the way I want it, or to do a PR and wait for it to be merged?</p>\n\n<p>I have considered creating an <code>Inotify</code> for each file being watched, but in a scenario where hundreds of files could be watched, this will be prohibitively expensive.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501028936, "post_id": 45315484, "comment_id": 77593414, "body": "<code>j++;</code> --&gt; <code>cnt++</code>, <code>tmp = malloc(sizeof(node)); tmp = head;</code> : <code>tmp</code> overwrite by <code>head</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1501029564, "post_id": 45315484, "comment_id": 77593544, "body": "Do you know that there are 3162 lines in the file?  How do you know that?  What if the file was edited?  What should the code do if there aren&#39;t that many lines in the file?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501029862, "post_id": 45315484, "comment_id": 77593602, "body": "stops responding presumably because it is busy overflowing that <code>j</code>, and then it reads past the end of file with fgets; fgets returns NULL..."}, {"owner": {"reputation": 2622, "user_id": 1834967, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Fdxei.jpg?s=128&g=1", "display_name": "Felix Guo", "link": "https://stackoverflow.com/users/1834967/felix-guo"}, "edited": false, "score": 0, "creation_date": 1501032549, "post_id": 45315484, "comment_id": 77594190, "body": "remember to <code>fclose</code> your file before you return..."}, {"owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "edited": false, "score": 0, "creation_date": 1501033684, "post_id": 45315484, "comment_id": 77594462, "body": "Which compiler are you using? And were you able to compile it?"}, {"owner": {"reputation": 11, "user_id": 8366703, "user_type": "registered", "profile_image": "https://graph.facebook.com/875759359240516/picture?type=large", "display_name": "Dylan", "link": "https://stackoverflow.com/users/8366703/dylan"}, "edited": false, "score": 0, "creation_date": 1501033781, "post_id": 45315484, "comment_id": 77594473, "body": "I totally missed that j++ error. Thank you!"}, {"owner": {"reputation": 11, "user_id": 8366703, "user_type": "registered", "profile_image": "https://graph.facebook.com/875759359240516/picture?type=large", "display_name": "Dylan", "link": "https://stackoverflow.com/users/8366703/dylan"}, "edited": false, "score": 0, "creation_date": 1501034394, "post_id": 45315484, "comment_id": 77594617, "body": "It&#39;s just for a school project and I made the file so it can&#39;t be edited in the program but I&#39;ll add error checking for that. I&#39;ll also add fclose and stop the j overflow."}, {"owner": {"reputation": 11, "user_id": 8366703, "user_type": "registered", "profile_image": "https://graph.facebook.com/875759359240516/picture?type=large", "display_name": "Dylan", "link": "https://stackoverflow.com/users/8366703/dylan"}, "edited": false, "score": 0, "creation_date": 1501034416, "post_id": 45315484, "comment_id": 77594624, "body": "I&#39;m using CodeBlocks with MinGW to compile."}], "answers": [{"tags": [], "owner": {"reputation": 4703, "user_id": 5375464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3292ca87ff6c766b75dbe4b2ea0831da?s=128&d=identicon&r=PG&f=1", "display_name": "J...S", "link": "https://stackoverflow.com/users/5375464/j-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1501068615, "last_edit_date": 1501068615, "creation_date": 1501035233, "answer_id": 45316287, "question_id": 45315484, "link": "https://stackoverflow.com/questions/45315484/assign-random-name-from-file-to-structure-name/45316287#45316287", "title": "Assign random name from file to structure name", "body": "<p>Use the <code>struct</code> keyword along with the name of your structure.\nie, use <code>struct node</code> instead of just <code>node</code> in your program.</p>\n\n<p>Consider using <code>srand()</code> along with <code>rand()</code> otherwise everytime you run the program, <code>rand()</code> will probably return the same value.</p>\n\n<p>When you do <code>strcpy(tmp-&gt;name, buff);</code> after using <code>fgets()</code> to read into <code>buff</code>, remember that <code>fgets()</code> will keep the newline\n(<code>\\n</code>) at the end of the string. You might want to remove that.</p>\n\n<p>If you are trying to open the file named <code>Names.txt</code>, you should write <code>fopen(\"Names.txt\",\"r\");</code> instead of <code>fopen(\"Names\",\"r\");</code></p>\n\n<p><a href=\"https://stackoverflow.com/users/971127/bluepixy\">BLUEPIXY</a> pointed out that in</p>\n\n<pre><code>tmp = malloc(sizeof(struct node));\ntmp = head;\n</code></pre>\n\n<p>you are first allocating memory to <code>tmp</code> and then orphaning that memory by overwriting <code>tmp</code> with <code>head</code>.\nUse another variable to store the new node.</p>\n\n<p>I think you just want to assign a value to <code>name</code> of <code>head</code>. If so, there's no need to create a new node.</p>\n\n<p>And as <a href=\"https://stackoverflow.com/users/1834967/felix-guo\">Felix Guo</a> pointed out, use <code>fclose()</code> to close your file stream when you are done working with it.</p>\n\n<p>EDIT:\nOf course, you'll need to change the <code>j++</code> in the <code>while</code> loop to <code>cnt++</code> but you already noticed that.</p>\n"}], "owner": {"reputation": 11, "user_id": 8366703, "user_type": "registered", "profile_image": "https://graph.facebook.com/875759359240516/picture?type=large", "display_name": "Dylan", "link": "https://stackoverflow.com/users/8366703/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501068615, "creation_date": 1501028746, "last_edit_date": 1501033709, "question_id": 45315484, "link": "https://stackoverflow.com/questions/45315484/assign-random-name-from-file-to-structure-name", "title": "Assign random name from file to structure name", "body": "<p>I'm currently writing a program in C that will end up being a horse race game. The part I'm stuck on is generating random names from a file. I'm using a structure for the horse and a linked list to store 10 horses. The names are in a file \"Names\". I want to pick a random line in the file, go to it, copy the name to the current node in the linked list, and move on to the next horse. Currently it just stops responding when I start it and returns -1073741819 (0xC0000005)</p>\n\n<p>I'm not very experienced with using C to interact with files so any help is greatly appreciated.</p>\n\n<pre><code>struct node{\n    int data;\n    float mult;\n    float payout;\n    int score;\n    struct node *next;\n    char name[20];//Where I'm trying to store the random name.\n};\n\n\nvoid rand_name(node* head, int i){\n    //A function to generate a random name from a list of 3162 names.\n\n    FILE* infile;\n    infile = fopen(\"Names\",\"r\");\n\n    if(infile == NULL){\n        printf(\"Error opening Names.txt\");\n        exit(EXIT_FAILURE);\n    }\n    int cnt, j = rand() % 3162;//Pick a random line to copy.\n    char buff[100];\n\n    node *tmp = NULL;\n    tmp = malloc(sizeof(node));\n    tmp = head;\n\n    for(cnt = 0; cnt &lt; 1; cnt++){\n        tmp = tmp-&gt;next; //Get to the current node.\n    }\n    cnt = 0;\n    while(cnt &lt; j){\n        //Copy each line until you get to the random line to copy.\n        fgets(buff, 100, infile);\n        j++;\n    }\n\n    strcpy(tmp-&gt;name, buff); //Store the last copied line into the node.\n\n    return;\n}\n</code></pre>\n"}, {"tags": ["c", "tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501028586, "post_id": 45315443, "comment_id": 77593345, "body": "<code>node* newNode = (node*)malloc(sizeof(node*));</code> --&gt; <code>node* newNode = (node*)malloc(sizeof(node));</code> or <code>node* newNode = malloc(sizeof(*newNode));</code>"}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501035510, "post_id": 45315443, "comment_id": 77594936, "body": "Thats a good catch @BLUEPIXY. Mohammed Would be nice if you execute under GDB and check backtrace, good opportunity to learn debugging as well."}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 6728154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6QGex.png?s=128&g=1", "display_name": "Geo", "link": "https://stackoverflow.com/users/6728154/geo"}, "is_accepted": false, "score": 0, "last_activity_date": 1501078379, "creation_date": 1501078379, "answer_id": 45329493, "question_id": 45315443, "link": "https://stackoverflow.com/questions/45315443/segmentation-fault-creating-a-binary-search-tree-in-c/45329493#45329493", "title": "Segmentation fault creating a binary search tree in C", "body": "<p>This line :</p>\n\n<pre><code>node* newNode = (node*)malloc(sizeof(node*));\n</code></pre>\n\n<p>You are allocating <code>sizeof(node *)</code>bytes which is actually the size of a pointer for you system. What you want is to allocate enough memory to hold <strong>the structure itself</strong> and not a pointer to it. Something like this will work :</p>\n\n<pre><code>node* newNode = (node*)malloc(sizeof(node) * sizeof(char));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 8049643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a753aef4d5b850435908a318c28d167e?s=128&d=identicon&r=PG&f=1", "display_name": "MOHAMMED SALEH", "link": "https://stackoverflow.com/users/8049643/mohammed-saleh"}, "is_accepted": true, "score": 0, "last_activity_date": 1517241105, "creation_date": 1517241105, "answer_id": 48505129, "question_id": 45315443, "link": "https://stackoverflow.com/questions/45315443/segmentation-fault-creating-a-binary-search-tree-in-c/48505129#48505129", "title": "Segmentation fault creating a binary search tree in C", "body": "<p>change this line:</p>\n\n<pre><code>node* newNode = (node*)malloc(sizeof(node*));\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>node* newNode = (node*)malloc(sizeof(node));\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8366698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 48505129, "answer_count": 2, "score": 2, "last_activity_date": 1517241105, "creation_date": 1501028405, "last_edit_date": 1501029657, "question_id": 45315443, "link": "https://stackoverflow.com/questions/45315443/segmentation-fault-creating-a-binary-search-tree-in-c", "title": "Segmentation fault creating a binary search tree in C", "body": "<p>I just started learning about trees in C and I keep getting a segmentation fault with my code. The code is meant to create the tree then return the smallest and biggest values in the tree. I have looked at other peoples code and I can't seem to find the mistake that I am making. If anyone can spot it that will be very helpful.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct node{\n    int data;\n    struct node* right;\n    struct node* left;\n}node;\n\nnode* Insert(node* root, int data);\nint Min(node* root);\nint Max(node* root);\nnode* GetNewNode(int data);\n\nint main(void){\n    int min, max, data, x;\n    node* root = NULL;\n    printf(\"how many elements would you like to be in the tree\\n\");\n    scanf(\"%i\", &amp;x);\n    for(int i = 0; i &lt; x; i++){\n        scanf(\"%i\", &amp;data);\n        root = Insert(root, data);\n    }\n    min = Min(root);\n    max = Max(root);\n    printf(\"the min value is %i, and the max value is %i\\n\", min, max);\n\n}\n\nnode* Insert(node* root, int data){\n    if(root == NULL){\n        root = GetNewNode(data);\n    }\n    else if(data &lt;= root-&gt;data){\n        root-&gt;left = Insert(root-&gt;left, data);\n    }\n    else{\n        root-&gt;right= Insert(root-&gt;right, data);\n    }\n    return root;\n}\n\nnode* GetNewNode(int data){\n    node* newNode = (node*)malloc(sizeof(node*));\n    newNode-&gt;data = data;\n    newNode-&gt;left = newNode-&gt;right = NULL;\n    return newNode;\n}\n\nint Min(node* root){\n    node* temp = root;\n    if(root-&gt;left == NULL){\n        return root-&gt;data;\n    }\n    else{\n        return Min(root-&gt;left);\n    }\n}\n\nint Max(node* root){\n    node* temp = root;\n    if(root-&gt;right == NULL){\n        return root-&gt;data;\n    }\n    else{\n        return Max(root-&gt;right);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "strcmp", "qsort"], "comments": [{"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1501026354, "post_id": 45315178, "comment_id": 77592814, "body": "Is the type of <code>pp</code> literally <code>char * const *</code>, or are those asterisks meant for emphasis?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1501026451, "post_id": 45315178, "comment_id": 77592843, "body": "<code>char *const*</code> is a different animal than a <code>const char*</code>.  The first is a pointer to a pointer, the second is a pointer to a <code>char</code>.  So the first order of business is for you to understand what you really have in those void pointers."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501026636, "post_id": 45315178, "comment_id": 77592884, "body": "<code>*(qq)+j</code> --&gt; <code>*(qq+j)</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 4, "last_activity_date": 1501027835, "last_edit_date": 1501027835, "creation_date": 1501027075, "answer_id": 45315288, "question_id": 45315178, "link": "https://stackoverflow.com/questions/45315178/in-c-if-i-have-char-const-pointer-how-do-i-access-each-and-every-element/45315288#45315288", "title": "in c, if i have char *const* pointer, how do i access each and every element?", "body": "<p><code>qsort</code> works for elements of <em>any</em> size. The only way it can work is by passing <em>pointers</em> to the first bytes of the elements, and these are of type <code>const void *</code>.</p>\n\n<p>So if you have an array of <code>int</code>s, the comparison function gets 2 pointers to <code>void</code>, that actually points to 2 <code>int</code>s in the array, and you compare the pointed-to objects:</p>\n\n<pre><code>int cmp(const void *p, const void *q) {\n    int *pp = p;\n    int *qq = q;\n    return *pp - *qq; // for example, ignoring all possible UB and such.\n}\n</code></pre>\n\n<p>Likewise, if you have an <em>array of pointers to char</em>, i.e. <code>char *array[]</code>, then each element is a pointer to char, and the comparison function gets passed in 2 arguments: pointers to const void that point to these elements. When you cast them back you get: </p>\n\n<pre><code>char *const *pp = p;\n</code></pre>\n\n<p>I.e. a pointer to a constant pointer to char. The actual objects that you must compare are <em>pointed-to by these pointers</em>.</p>\n\n<p>And this is why your <code>wcmp</code> doesn't work:</p>\n\n<pre><code>int wcmp(const void *p, const void *q) {\n    const char *pp = p;\n    const char *qq = q;\n    ...\n}\n</code></pre>\n\n<p>This would be appropriate if each element in the array to be sorted was a <code>char</code>. But the elements were <em>pointers</em> to char, so it means that the arguments to <code>wcmp</code> (each of which points to an element in the array) must be converted to <em>pointers to pointers to char</em>:</p>\n\n<pre><code>int wcmp(const void *p, const void *q) {\n    char *const *ptmp = p;\n    char *const *qtmp = q;\n</code></pre>\n\n<p>Then you must dereference them to get the actual pointer to char</p>\n\n<pre><code>    char *pp = *ptmp; // dereference them\n    char *qq = *qtmp; \n</code></pre>\n\n<p>Or, you can shorten those 2 to:</p>\n\n<pre><code>    char *pp = *(char *const *)p;\n    char *qq = *(char *const *)q;\n</code></pre>\n\n<p>As for the rest of the <code>wcmp</code>, that's not really C - a true C programmer loves changing pointers:</p>\n\n<pre><code>    while(isspace(*pp)) {\n        pp ++;\n    }\n\n    while(isspace(*qq)) {\n        qq ++;\n    }\n\n    return strcmp(pp, qq);\n}\n</code></pre>\n\n<p>that is, for as long as <code>pp</code> points to a space character, increment <code>pp</code> so that it points to the next character; and do the same for <code>qq</code> too, and then compare the strings whose first characters are pointed to by <code>pp</code> and <code>qq</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 8366608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dddf934734beca818a645d84221a631b?s=128&d=identicon&r=PG&f=1", "display_name": "Jigglybutt", "link": "https://stackoverflow.com/users/8366608/jigglybutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 45315288, "answer_count": 1, "score": -5, "last_activity_date": 1501027835, "creation_date": 1501026265, "last_edit_date": 1501026314, "question_id": 45315178, "link": "https://stackoverflow.com/questions/45315178/in-c-if-i-have-char-const-pointer-how-do-i-access-each-and-every-element", "title": "in c, if i have char *const* pointer, how do i access each and every element?", "body": "<p>this is for the qsort comparison function, </p>\n\n<pre><code>int cmp(const void *p, const void *q) {\n    char *const* pp = p;\n    char *const* qq = q;\n    ...\n}\n</code></pre>\n\n<p>i want to compare the elements of the two strings. i tried (*pp)[i] since *pp is p, but it doesnt seem to work. also, what is the advantage of catching p and q this way instead of just creating two const char *?</p>\n\n<p>last but no least, i have another comparison function that is supposed to skip leading white spaces</p>\n\n<pre><code>int wcmp(const void *p, const void *q) {\n\n    const char *pp = p;\n    const char *qq = q;\n    size_t i = 0;\n    size_t j = 0;\n\n    while(isspace(*(pp+i))) {\n        i++;\n    }\n\n    while(isspace(*(qq)+j)) {\n        j++;\n    }\n\n    return strcmp(pp+i, qq+j);\n}\n</code></pre>\n\n<p>but when i test it with </p>\n\n<pre><code>    d afdsa\n   hello\n  heal\n</code></pre>\n\n<p>the output is</p>\n\n<pre><code>  heal\n    d afdsa\n   hello\n</code></pre>\n\n<p>what is going on with \"d afdsa\" in the middle?</p>\n"}, {"tags": ["c", "windows", "ascii", "mingw32"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1501026367, "post_id": 45315127, "comment_id": 77592821, "body": "result depend from code page used by console. usual console use OEM code page, when you ANSI code page. you need use Unicode functions and text for correct print"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1501028983, "post_id": 45315127, "comment_id": 77593428, "body": "Note that you should not use <code>\\</code> termination to create long strings \u2014 witness the spaces on the second and subsequent lines.  Use string concatenation: <code>&quot;\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\\n&quot;      &quot;\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2592\\n&quot;      &quot;\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\\n&quot;      &quot;\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2592\\n&quot;      &quot;\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\\n&quot;</code> which deals with the leading  blanks too.  There&#39;s just white space (newlines in your code, blanks in my comment) between the string segments.  The backslash-newline mechanism was necessary before C90, but not since then."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1501029151, "post_id": 45315127, "comment_id": 77593461, "body": "It probably isn&#39;t any consolation to tell you that the code works OK on a Mac running macOS Sierra."}], "answers": [{"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501026591, "post_id": 45315195, "comment_id": 77592871, "body": "Did you read what I wrote? That is the reason he see two characters for one in his table. His table has completely different content that he thinks"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501026699, "post_id": 45315195, "comment_id": 77592904, "body": "@ Ryan B Read before comment. You do not have a clue what is happening there."}, {"owner": {"reputation": 11, "user_id": 3063686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ccb07b68aab7f45c3e051e3150b94b7?s=128&d=identicon&r=PG&f=1", "display_name": "xaresys", "link": "https://stackoverflow.com/users/3063686/xaresys"}, "edited": false, "score": 0, "creation_date": 1501033430, "post_id": 45315195, "comment_id": 77594399, "body": "I ran the character test, and everything showed up as the same character for some reason... such as <code>32 &#47; 20 = \u2557</code>, <code>33 &#47; 21 = \u2557</code>, <code>34 &#47; 22 = \u2557</code> all the way to <code>255 &#47; ff = \u2557</code>"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "reply_to_user": {"reputation": 11, "user_id": 3063686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ccb07b68aab7f45c3e051e3150b94b7?s=128&d=identicon&r=PG&f=1", "display_name": "xaresys", "link": "https://stackoverflow.com/users/3063686/xaresys"}, "edited": false, "score": 0, "creation_date": 1501042408, "post_id": 45315195, "comment_id": 77596644, "body": "Forgot another i in my printf"}], "tags": [], "owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "is_accepted": false, "score": 0, "last_activity_date": 1501087553, "last_edit_date": 1501087553, "creation_date": 1501026357, "answer_id": 45315195, "question_id": 45315127, "link": "https://stackoverflow.com/questions/45315127/print-ascii-box-not-working/45315195#45315195", "title": "Print ASCII box not working", "body": "<ol>\n<li><p>How your text editor codes unprintable characters is unknown but I guess it is UTF-something, and yout table contains something completely different that you think</p></li>\n<li><p>See how do ascii > 127 print</p>\n\n<pre><code>for(int i = 32; i &lt; 256;i++)\n    printf(\"%3d / %02x = %c\\n\\r\", i, i, i);`\n</code></pre></li>\n</ol>\n\n<p>Then define your table using escape sequences - for example</p>\n\n<pre><code>char a[] = \"\\xf3\\xef\"\n</code></pre>\n\n<p>Here you have 4 columns version</p>\n\n<pre><code>for (int i = 32; i &lt; 256; i++)\n    printf(\"%3d / %02x = %c%s\", i, i, i, ((i &gt;&gt; 2) &lt;&lt; 2 == i) ? \"\\n\\r\" : \"\\t\");\n</code></pre>\n\n<p>and the output should be like this: </p>\n\n<pre><code> 32 / 20 =\n 33 / 21 = !     34 / 22 = \"     35 / 23 = #     36 / 24 = $\n 37 / 25 = %     38 / 26 = &amp;     39 / 27 = '     40 / 28 = (\n 41 / 29 = )     42 / 2a = *     43 / 2b = +     44 / 2c = ,\n 45 / 2d = -     46 / 2e = .     47 / 2f = /     48 / 30 = 0\n 49 / 31 = 1     50 / 32 = 2     51 / 33 = 3     52 / 34 = 4\n 53 / 35 = 5     54 / 36 = 6     55 / 37 = 7     56 / 38 = 8\n 57 / 39 = 9     58 / 3a = :     59 / 3b = ;     60 / 3c = &lt;\n 61 / 3d = =     62 / 3e = &gt;     63 / 3f = ?     64 / 40 = @\n 65 / 41 = A     66 / 42 = B     67 / 43 = C     68 / 44 = D\n 69 / 45 = E     70 / 46 = F     71 / 47 = G     72 / 48 = H\n 73 / 49 = I     74 / 4a = J     75 / 4b = K     76 / 4c = L\n 77 / 4d = M     78 / 4e = N     79 / 4f = O     80 / 50 = P\n 81 / 51 = Q     82 / 52 = R     83 / 53 = S     84 / 54 = T\n 85 / 55 = U     86 / 56 = V     87 / 57 = W     88 / 58 = X\n 89 / 59 = Y     90 / 5a = Z     91 / 5b = [     92 / 5c = \\\n 93 / 5d = ]     94 / 5e = ^     95 / 5f = _     96 / 60 = `\n 97 / 61 = a     98 / 62 = b     99 / 63 = c    100 / 64 = d\n101 / 65 = e    102 / 66 = f    103 / 67 = g    104 / 68 = h\n105 / 69 = i    106 / 6a = j    107 / 6b = k    108 / 6c = l\n109 / 6d = m    110 / 6e = n    111 / 6f = o    112 / 70 = p\n113 / 71 = q    114 / 72 = r    115 / 73 = s    116 / 74 = t\n117 / 75 = u    118 / 76 = v    119 / 77 = w    120 / 78 = x\n121 / 79 = y    122 / 7a = z    123 / 7b = {    124 / 7c = |\n125 / 7d = }    126 / 7e = ~    127 / 7f =     128 / 80 = \u00c7\n129 / 81 = \u00fc    130 / 82 = \u00e9    131 / 83 = \u00e2    132 / 84 = \u00e4\n133 / 85 = \u00e0    134 / 86 = \u00e5    135 / 87 = \u00e7    136 / 88 = \u00ea\n137 / 89 = \u00eb    138 / 8a = \u00e8    139 / 8b = \u00ef    140 / 8c = \u00ee\n141 / 8d = \u00ec    142 / 8e = \u00c4    143 / 8f = \u00c5    144 / 90 = \u00c9\n145 / 91 = \u00e6    146 / 92 = \u00c6    147 / 93 = \u00f4    148 / 94 = \u00f6\n149 / 95 = \u00f2    150 / 96 = \u00fb    151 / 97 = \u00f9    152 / 98 = \u00ff\n153 / 99 = \u00d6    154 / 9a = \u00dc    155 / 9b = \u00f8    156 / 9c = \u00a3\n157 / 9d = \u00d8    158 / 9e = \u00d7    159 / 9f = \u0192    160 / a0 = \u00e1\n161 / a1 = \u00ed    162 / a2 = \u00f3    163 / a3 = \u00fa    164 / a4 = \u00f1\n165 / a5 = \u00d1    166 / a6 = \u00aa    167 / a7 = \u00ba    168 / a8 = \u00bf\n169 / a9 = \u00ae    170 / aa = \u00ac    171 / ab = \u00bd    172 / ac = \u00bc\n173 / ad = \u00a1    174 / ae = \u00ab    175 / af = \u00bb    176 / b0 = \u2591\n177 / b1 = \u2592    178 / b2 = \u2593    179 / b3 = \u2502    180 / b4 = \u2524\n181 / b5 = \u00c1    182 / b6 = \u00c2    183 / b7 = \u00c0    184 / b8 = \u00a9\n185 / b9 = \u2563    186 / ba = \u2551    187 / bb = \u2557    188 / bc = \u255d\n189 / bd = \u00a2    190 / be = \u00a5    191 / bf = \u2510    192 / c0 = \u2514\n193 / c1 = \u2534    194 / c2 = \u252c    195 / c3 = \u251c    196 / c4 = \u2500\n197 / c5 = \u253c    198 / c6 = \u00e3    199 / c7 = \u00c3    200 / c8 = \u255a\n201 / c9 = \u2554    202 / ca = \u2569    203 / cb = \u2566    204 / cc = \u2560\n205 / cd = \u2550    206 / ce = \u256c    207 / cf = \u00a4    208 / d0 = \u00f0\n209 / d1 = \u00d0    210 / d2 = \u00ca    211 / d3 = \u00cb    212 / d4 = \u00c8\n213 / d5 = \u0131    214 / d6 = \u00cd    215 / d7 = \u00ce    216 / d8 = \u00cf\n217 / d9 = \u2518    218 / da = \u250c    219 / db = \u2588    220 / dc = \u2584\n221 / dd = \u00a6    222 / de = \u00cc    223 / df = \u2580    224 / e0 = \u00d3\n225 / e1 = \u00df    226 / e2 = \u00d4    227 / e3 = \u00d2    228 / e4 = \u00f5\n229 / e5 = \u00d5    230 / e6 = \u00b5    231 / e7 = \u00fe    232 / e8 = \u00de\n233 / e9 = \u00da    234 / ea = \u00db    235 / eb = \u00d9    236 / ec = \u00fd\n237 / ed = \u00dd    238 / ee = \u00af    239 / ef = \u00b4    240 / f0 = \u00ad\n241 / f1 = \u00b1    242 / f2 = \u2017    243 / f3 = \u00be    244 / f4 = \u00b6\n245 / f5 = \u00a7    246 / f6 = \u00f7    247 / f7 = \u00b8    248 / f8 = \u00b0\n249 / f9 = \u00a8    250 / fa = \u00b7    251 / fb = \u00b9    252 / fc = \u00b3\n253 / fd = \u00b2    254 / fe = \u25a0    255 / ff = \u00a0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 3063686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ccb07b68aab7f45c3e051e3150b94b7?s=128&d=identicon&r=PG&f=1", "display_name": "xaresys", "link": "https://stackoverflow.com/users/3063686/xaresys"}, "edited": false, "score": 0, "creation_date": 1501033135, "post_id": 45315572, "comment_id": 77594322, "body": "I changed <code>shade_block</code>&#39;s type to <code>wchar_t</code>, added the L before it, and used wprintf, and now it prints nothing. Is this a problem with my compiler?"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501054817, "post_id": 45315572, "comment_id": 77602787, "body": "No. See my answer. Forget unicode &amp; w_char for the moment."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 11, "user_id": 3063686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ccb07b68aab7f45c3e051e3150b94b7?s=128&d=identicon&r=PG&f=1", "display_name": "xaresys", "link": "https://stackoverflow.com/users/3063686/xaresys"}, "edited": false, "score": 0, "creation_date": 1501055289, "post_id": 45315572, "comment_id": 77603108, "body": "@xaresys I use <code>WriteConsoleW</code> and it really print all this charasters"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501055430, "post_id": 45315572, "comment_id": 77603209, "body": "@PeterJ - why I need Forget unicode ? Unicode is native for windows and with Unicode all perfect working"}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1501055433, "post_id": 45315572, "comment_id": 77603211, "body": "@RbMm - calm down and give the guy a chance to go through his first &quot;hello world&quot; applications. I know that you know how to do it, but it will make a complete mess in his brain. Give him a chance to understand what the string, pointer etc etc are. I hope that you know what I mean"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 11, "user_id": 3063686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ccb07b68aab7f45c3e051e3150b94b7?s=128&d=identicon&r=PG&f=1", "display_name": "xaresys", "link": "https://stackoverflow.com/users/3063686/xaresys"}, "edited": false, "score": 0, "creation_date": 1501056183, "post_id": 45315572, "comment_id": 77603713, "body": "@xaresys - <code>wprintf</code> not solution here, because look like crt translate Unicode to ansi first (with own default code page convertions) and then use ansi <code>printf</code> - problem with crt itself. use windows api <code>WriteConsoleW</code> instead. with this all is worked."}], "tags": [], "owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "is_accepted": false, "score": 0, "last_activity_date": 1501056037, "last_edit_date": 1501056037, "creation_date": 1501029408, "answer_id": 45315572, "question_id": 45315127, "link": "https://stackoverflow.com/questions/45315127/print-ascii-box-not-working/45315572#45315572", "title": "Print ASCII box not working", "body": "<p>windows console used only Unicode (UTF-16 encoding) for display text in console. if you pass text to console in Unicode, say via <code>WriteConsoleW</code> - it will be displayed as is. if you use ansi version <code>WriteConsoleA</code> - your text initially will be converted to Unicode by call <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd319072(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>MultiByteToWideChar</code></a> and as first parameter <code>CodePage</code> will be used value returned from <a href=\"https://docs.microsoft.com/en-us/windows/console/getconsoleoutputcp\" rel=\"nofollow noreferrer\"><code>GetConsoleOutputCP</code></a>. by default console used OEM code page <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318114(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GetOEMCP</code></a>. however you use ansi encoding (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318070(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GetACP</code></a>). you can call <a href=\"https://docs.microsoft.com/en-us/windows/console/setconsoleoutputcp\" rel=\"nofollow noreferrer\"><code>SetConsoleOutputCP</code></a> before print in ansi. and you will be need use specific, hardcoded code page value - exactly the same, which your compiler use when compiled you source string <code>\"\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\"</code>. when you run on the same windows, where you compile code (<em>and if compiler not give you warning C4566: character represented by universal-character-name '\\uxxxx' cannot be represented in the current code page (N)</em>) - the <code>SetConsoleOutputCP(GetACP())</code> - will be worked, but the ANSI code pages can be different on different computers - so not work on another.</p>\n\n<p>so good solution here - use Unicode <code>L\"\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\"</code> strings with <code>WriteConsoleW</code> or another <code>W</code> functions. if you got string in runtime as multibyte strings - you need before print it or\ncall <code>SetConsoleOutputCP(cp)</code> where cp - is code page used in your string and then use <code>A</code> function for output.\nor (better) first yourself convert string to Unicode via <code>MultiByteToWideChar(cp, *)</code> and then use <code>W</code> functions for output</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3063686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ccb07b68aab7f45c3e051e3150b94b7?s=128&d=identicon&r=PG&f=1", "display_name": "xaresys", "link": "https://stackoverflow.com/users/3063686/xaresys"}, "is_accepted": true, "score": 0, "last_activity_date": 1501087059, "creation_date": 1501087059, "answer_id": 45332823, "question_id": 45315127, "link": "https://stackoverflow.com/questions/45315127/print-ascii-box-not-working/45332823#45332823", "title": "Print ASCII box not working", "body": "<p>Though RbMm and PeterJ's answers worked, I used tips from <a href=\"https://stackoverflow.com/questions/15528359/printing-utf-8-strings-with-printf-wide-vs-multibyte-string-literals\" title=\"this\">this</a> StackOVerflow question and eventually figured out how to print the block as-is without any character-escaping or WriteConsoleW:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;wchar.h&gt;              //For wprintf and wide chars\n#include &lt;io.h&gt;                 //For _setmode\n#define U_16 0x20000            //U-16 text mode, for the text blocks\n\nconst wchar_t shade_block[] = {\n    L\"\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\\n\"\n    \"\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2592\\n\"\n    \"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\\n\"\n    \"\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2592\\n\"\n    \"\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\\n\"\n    };\n\nint main()\n{\n    _setmode(_fileno(stdout), U_16); //set the output mode to U_16\n    wprintf(L\"%s\\n\", shade_block);\n\n    return 0;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3063686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ccb07b68aab7f45c3e051e3150b94b7?s=128&d=identicon&r=PG&f=1", "display_name": "xaresys", "link": "https://stackoverflow.com/users/3063686/xaresys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 45332823, "answer_count": 3, "score": -2, "last_activity_date": 1501087553, "creation_date": 1501025956, "last_edit_date": 1501087354, "question_id": 45315127, "link": "https://stackoverflow.com/questions/45315127/print-ascii-box-not-working", "title": "Print ASCII box not working", "body": "<p>I am just trying to print a shape filled with filled ASCII boxes into the console, but the output is just garbage text. Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nconst char shade_block[] = {\n    \"\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\\n\\\n     \u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2592\\n\\\n     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\\n\\\n     \u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2592\\n\\\n     \u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2588\u2592\u2592\\n\\\n    \"};\n\nint main()\n{\n    printf(shade_block);\n    return 0;\n}\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>\u0393\u00fb\u00c6\u0393\u00fb\u00c6\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00c6\u0393\u00fb\u00c6\n         \u0393\u00fb\u00c6\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00c6\n         \u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\n         \u0393\u00fb\u00c6\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00c6\n         \u0393\u00fb\u00c6\u0393\u00fb\u00c6\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00ea\u0393\u00fb\u00c6\u0393\u00fb\u00c6\n</code></pre>\n\n<p>Picture of the code, if it's not displaying properly.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RJvAl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RJvAl.png\" alt=\"Picture of the code, if it&#39;s not displaying properly.\"></a></p>\n\n<p>I am working in C, CodeLite IDE, WIndows 10 with MinGW-32. Thanks in advance.</p>\n"}, {"tags": ["c", "runtime", "big-o"], "answers": [{"tags": [], "owner": {"reputation": 1250, "user_id": 8340832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee45d1f85fce309587afa3bdab7c42?s=128&d=identicon&r=PG&f=1", "display_name": "Yuval Ben-Arie", "link": "https://stackoverflow.com/users/8340832/yuval-ben-arie"}, "is_accepted": false, "score": 0, "last_activity_date": 1501026403, "creation_date": 1501026403, "answer_id": 45315203, "question_id": 45315103, "link": "https://stackoverflow.com/questions/45315103/what-is-the-bounding-function-big-o-of-the-number-of-times-the-indicated-line/45315203#45315203", "title": "What is the bounding function (Big-O) of the number of times the indicated line is run? (C)", "body": "<p>Big O notation describes the behavior as n approaches infinity.<br>\nA=O(B) where A and B are functions of n, means that the limit of A/B when n approaches positive infinity is smaller than positive infinity.<br>\nSo the cases under n=1000 don't affect Big O notation.</p>\n"}, {"tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 0, "last_activity_date": 1501029611, "last_edit_date": 1501029611, "creation_date": 1501028566, "answer_id": 45315458, "question_id": 45315103, "link": "https://stackoverflow.com/questions/45315103/what-is-the-bounding-function-big-o-of-the-number-of-times-the-indicated-line/45315458#45315458", "title": "What is the bounding function (Big-O) of the number of times the indicated line is run? (C)", "body": "<p>The asymptotic runtime of that code is <strong>O(1)</strong> i.e. no matter how large <code>n</code> is, there exists a constant that is <code>&lt;=</code> than the number of times the line <code>arr[j]++;</code> is executed, and that constant happens to be rather small.</p>\n\n<p>Proof:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nlong long int test(long long int n) {\n   long long int ct = 0;\n   long long int i, j;\n   for (i = 1; i &lt; n; i++) {\n       for (j = 1000/i; j &gt; 0; j--) {\n          ct ++;\n       }\n   }\n   return ct;\n}\n\nint main(void) {\n    long long int n;\n    for (n = 1; n &lt; 100000000; n *= 10) {\n        printf(\"testing with n = %lld: ct = %lld\\n\", n, test(n));\n    }\n}\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>testing with n = 1: ct = 0\ntesting with n = 10: ct = 2827\ntesting with n = 100: ct = 5132\ntesting with n = 1000: ct = 7068\ntesting with n = 10000: ct = 7069\ntesting with n = 100000: ct = 7069\ntesting with n = 1000000: ct = 7069\ntesting with n = 10000000: ct = 7069\n</code></pre>\n\n<p>It is bounded above by the hard constant 7069, which is never exceeded, as when <code>n</code> exceeds 1000, the quotient will be 0.</p>\n"}, {"tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": false, "score": 0, "last_activity_date": 1501029400, "last_edit_date": 1501029400, "creation_date": 1501028792, "answer_id": 45315490, "question_id": 45315103, "link": "https://stackoverflow.com/questions/45315103/what-is-the-bounding-function-big-o-of-the-number-of-times-the-indicated-line/45315490#45315490", "title": "What is the bounding function (Big-O) of the number of times the indicated line is run? (C)", "body": "<p>Notice that for any n > 1000 that the inner loop will never run at all - the starting value of j, when factoring in integer division, is zero. As a result, after n exceeds 1000, the number of times that the inner loop runs is completely independent of n - only the first 1000 iterations of the outer loop will have that inner statement execute.</p>\n\n<p>Since in the long run the number of iterations of the inner loop is independent of n, in a big-O sense the indicated statement runs O(1) times.</p>\n\n<p>However, provided that you keep n small, you will see a logarithmic growth in the number of times that loop runs. Notice that when i = 1 the loop runs 1000 times, when i = 2 it runs 1000/2 times, etc. Ignoring the effect of rounding down, after k iterations of the outer loop the inner loop will run</p>\n\n<blockquote>\n  <p>1000 + 1000/2 + 1000/3 + ...+ 1000/k</p>\n  \n  <p>= 1000(1/1 + 1/2 + 1/3 + ... + 1/k)</p>\n  \n  <p>= 1000H<sub>K</sub></p>\n</blockquote>\n\n<p>times, where H<sub>k</sub> is the kth <a href=\"https://en.m.wikipedia.org/wiki/Harmonic_number\" rel=\"nofollow noreferrer\">harmonic number</a>. The kth harmonic number is &Theta;(log k), so ignoring the effects of rounding down the number of loop iterations will grow logarithmically.</p>\n\n<p>To summarize, in the short term the growth is logarithmic, but due to integer division the answer is O(1).</p>\n"}], "owner": {"reputation": 57, "user_id": 8142474, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dba30a4f36189d3e86f2c4bdc53d1d0e?s=128&d=identicon&r=PG&f=1", "display_name": "asd", "link": "https://stackoverflow.com/users/8142474/asd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1501029611, "creation_date": 1501025789, "last_edit_date": 1501029009, "question_id": 45315103, "link": "https://stackoverflow.com/questions/45315103/what-is-the-bounding-function-big-o-of-the-number-of-times-the-indicated-line", "title": "What is the bounding function (Big-O) of the number of times the indicated line is run? (C)", "body": "<p>I'm trying to grasp the concept of runtime and Im a bit confused on this problem. I know the runtime of the outer loop is O(n). I also know for values of n greater than 1000, the inner loop will run in constant time. However, for values of n &lt; 1000, the inner loop appears to have a logarithmic runtime. So does this mean the Big O of the function would be O(n log n) since I'm supposed to assume worst case scenario? </p>\n\n<pre><code>for(i = 1; i &lt; n; i++) {\n  for(j = 1000/i; j &gt; 0; j--) {\n     arr[j]++;     &lt;-------- THIS LINE\n     }\n } \n</code></pre>\n"}, {"tags": ["c", "infinite-loop", "quicksort"], "comments": [{"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 2, "creation_date": 1501025768, "post_id": 45315052, "comment_id": 77592648, "body": "start and end will never change once passed in"}, {"owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "edited": false, "score": 2, "creation_date": 1501025960, "post_id": 45315052, "comment_id": 77592698, "body": "while should be &quot;if&quot;"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1501026037, "post_id": 45315052, "comment_id": 77592724, "body": "BTW <code>10^6</code> is <code>1000000</code>, not <code>100000</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5950, "user_id": 3991211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042922965/picture?type=large", "display_name": "Garr Godfrey", "link": "https://stackoverflow.com/users/3991211/garr-godfrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1501026021, "creation_date": 1501026021, "answer_id": 45315140, "question_id": 45315052, "link": "https://stackoverflow.com/questions/45315052/language-c-quicksort/45315140#45315140", "title": "Language C - QuickSort", "body": "<p>You are using recursion so you don't need a loop:</p>\n\n<pre><code>void sort_array(unsigned int a[], int start, int end){\n  if(start &lt; end){\n    int pos_piv = partition(a, start, end);\n    sort_array(a, start, pos_piv-1);\n    sort_array(a, pos_piv+1, end);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7838272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cE8ul.jpg?s=128&g=1", "display_name": "Jo&#227;o Rodrigues", "link": "https://stackoverflow.com/users/7838272/jo%c3%a3o-rodrigues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 45315140, "answer_count": 1, "score": 0, "last_activity_date": 1501026021, "creation_date": 1501025417, "question_id": 45315052, "link": "https://stackoverflow.com/questions/45315052/language-c-quicksort", "title": "Language C - QuickSort", "body": "<p>I was trying to code a quick sort program in c, and my recursive function is in an infinite loop.</p>\n\n<p>The problem is:</p>\n\n<p>You have been given an array \nA of size \nN.This array contains integers ranging from \n1 to \n10^9. You need to sort the contents of this array by their value and then print the contents of it.</p>\n\n<p>Input Format:</p>\n\n<p>The first line contains a single integers N denoting the size of the array. The next line contains N space separated integers denoting the contents of the array.</p>\n\n<p>Output Format:</p>\n\n<p>Print N space separated integers, i.e. the final sorted array.</p>\n\n<p>Constraints:</p>\n\n<p>1\u2264N\u226410^6</p>\n\n<p>1\u2264A[i]\u226410^9</p>\n\n<pre><code>void fill_vet(unsigned int a[], unsigned int n){\n    int i;\n    for(i=0; i&lt;n; i++)\n        scanf(\"%u\", &amp;a[i]);\n}\n\nvoid print_vet(unsigned int a[], unsigned int n){\n    int i;\n    for(i=0; i&lt;n; i++)\n        printf(\"%u \", a[i]);\n}\n\nint partition(unsigned int a[], int start, int end){\n    int i, j;\n    unsigned int pivot, n_swap;\n    i = start + 1;\n    pivot = a[start];\n    for(j = start+1; j&lt;=end; j++){\n        if(a[j] &lt; pivot){\n            n_swap = a[j];\n            a[j] = a[i];\n            a[i] = n_swap;\n            i++;\n        }\n    } \n    n_swap = a[i-1];\n    a[i-1] = a[start];\n    a[start] = n_swap;\n    return i-1;\n}\n\nvoid sort_array(unsigned int a[], int start, int end){\n    while(start &lt; end){\n        int pos_piv = partition(a, start, end);\n        sort_array(a, start, pos_piv-1);\n        sort_array(a, pos_piv+1, end);\n    }\n}\n\nint main()\n{\n    unsigned int n, a[100000];\n    scanf(\"%u\", &amp;n);\n    fill_vet(a, n);\n    sort_array(a, 0, n-1);\n    print_vet(a, n);\n    return 0;\n}\n</code></pre>\n\n<p>Can you tell me where is the error pls!</p>\n"}, {"tags": ["c", "gcc"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 1381852, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4701aeabee1b1df821457e663b6a0028?s=128&d=identicon&r=PG", "display_name": "user1381852", "link": "https://stackoverflow.com/users/1381852/user1381852"}, "edited": false, "score": 0, "creation_date": 1501035495, "post_id": 45315429, "comment_id": 77594931, "body": "Thanks for that. I thought that could be the case but I was not sure."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": true, "score": 5, "last_activity_date": 1501028341, "creation_date": 1501028341, "answer_id": 45315429, "question_id": 45315025, "link": "https://stackoverflow.com/questions/45315025/gcc-compiler-in-cygwin-output-exe/45315429#45315429", "title": "gcc compiler in Cygwin output .exe", "body": "<p>GCC on Windows defaults to creating an file named <code>a.exe</code> on Windows, because the <code>.exe</code> extension is important - a file name <code>a.out</code> would not recognized as an executable program on Windows. The default output could be named <code>a.out.exe</code> but it would be different from <code>a.out</code> anyway, so it is just as sensible to produce a file named <code>a.exe</code> instead.</p>\n\n<p><code>a.exe</code> is less keypresses, too.</p>\n"}], "owner": {"reputation": 107, "user_id": 1381852, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4701aeabee1b1df821457e663b6a0028?s=128&d=identicon&r=PG", "display_name": "user1381852", "link": "https://stackoverflow.com/users/1381852/user1381852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 1, "accepted_answer_id": 45315429, "answer_count": 1, "score": 3, "last_activity_date": 1501028341, "creation_date": 1501025307, "question_id": 45315025, "link": "https://stackoverflow.com/questions/45315025/gcc-compiler-in-cygwin-output-exe", "title": "gcc compiler in Cygwin output .exe", "body": "<p>Just starting in C, and learning the basics.\nI have created a simple program that when compiled, would expected to compile as a.out however gcc is compiling as a.exe.</p>\n"}, {"tags": ["c", "string", "char", "metaprogramming"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1501021965, "post_id": 45314516, "comment_id": 77591531, "body": "How about using <code>fputc</code>..."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1501022073, "post_id": 45314516, "comment_id": 77591560, "body": "Please post some code examples to show us what you tried and where you&#39;re stuck, otherwise it&#39;s very hard to know how to help. ... Also, without showing us an attempt, it mostly feels as if you&#39;re asking us to do your homework for you, and I&#39;m sure this isn&#39;t what you meant."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1501022130, "post_id": 45314516, "comment_id": 77591583, "body": "If you&#39;re learning why not do it yourself by adding 64 to the random number and outputting that. In ASCII &quot;A&quot; is 65."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501022271, "post_id": 45314516, "comment_id": 77591607, "body": "<code>int n = 50; while(n--){ fputc(rand() % 26 + &#39;A&#39;, fp); }</code>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1501022511, "post_id": 45314516, "comment_id": 77591684, "body": "No, we do not add <code>1</code> to <code>64</code> but add <code>0</code> to <code>&#39;A&#39;</code>, just like BLUEPIXY did above."}], "answers": [{"comments": [{"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 0, "creation_date": 1501022608, "post_id": 45314602, "comment_id": 77591721, "body": "<code>char new_char = &#39;A&#39; + rnd</code> Easier to read :)"}, {"owner": {"reputation": 325, "user_id": 6684651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZzVwu.png?s=128&g=1", "display_name": "mike bayko", "link": "https://stackoverflow.com/users/6684651/mike-bayko"}, "reply_to_user": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 0, "creation_date": 1501022699, "post_id": 45314602, "comment_id": 77591752, "body": "you mean <code>char new_char = (&#39;A&#39; - 1) + rnd;</code> (since 65 + 1 would give OP &quot;B&quot;, and OP wants to get &quot;A&quot; when rnd is equal to 1) :)"}, {"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 0, "creation_date": 1501022751, "post_id": 45314602, "comment_id": 77591767, "body": "<code>rnd</code> can be 0, you are starting with 64+0 = @"}, {"owner": {"reputation": 325, "user_id": 6684651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZzVwu.png?s=128&g=1", "display_name": "mike bayko", "link": "https://stackoverflow.com/users/6684651/mike-bayko"}, "edited": false, "score": 0, "creation_date": 1501022834, "post_id": 45314602, "comment_id": 77591789, "body": "True, but OP said that when <code>rnd</code> is <code>1</code>, he wants to generate &#39;A&#39; :("}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 3, "creation_date": 1501022882, "post_id": 45314602, "comment_id": 77591802, "body": "@mikebayko, e.g. <code>rand() %26</code> can only return <code>0-25</code> not <code>1-26</code>."}, {"owner": {"reputation": 325, "user_id": 6684651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZzVwu.png?s=128&g=1", "display_name": "mike bayko", "link": "https://stackoverflow.com/users/6684651/mike-bayko"}, "edited": false, "score": 0, "creation_date": 1501022922, "post_id": 45314602, "comment_id": 77591813, "body": "@above point made. I will change my code."}, {"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 0, "creation_date": 1501022925, "post_id": 45314602, "comment_id": 77591815, "body": "You are right, but you should point that out just in case OP is wrong about what he wants."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501023160, "post_id": 45314602, "comment_id": 77591881, "body": "&quot;C a char is really jsut a data type that can range from the number 0, to the number 255.&quot; is not specified by C and is not needed in this answer.  It could be -128 to 127, 0 to 65535, etc."}, {"owner": {"reputation": 325, "user_id": 6684651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZzVwu.png?s=128&g=1", "display_name": "mike bayko", "link": "https://stackoverflow.com/users/6684651/mike-bayko"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501023330, "post_id": 45314602, "comment_id": 77591941, "body": "@chux good point, although I am pretty sure that chars are only 1 byte in size in C? (0 to 255 would be unsigned char)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1501023663, "post_id": 45314602, "comment_id": 77592048, "body": "Yes, in C a <code>char</code> is 1 byte, <i>signed</i> or <i>unsigned</i>. The trick is that a byte may be 8,9, 16, etc. bits.  8 bits is the most common."}, {"owner": {"reputation": 325, "user_id": 6684651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZzVwu.png?s=128&g=1", "display_name": "mike bayko", "link": "https://stackoverflow.com/users/6684651/mike-bayko"}, "edited": false, "score": 0, "creation_date": 1501023870, "post_id": 45314602, "comment_id": 77592118, "body": "But what about words, dwords, and qwords?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501034473, "post_id": 45314602, "comment_id": 77594632, "body": "@mikebayko &quot;words, dwords, and qwords&quot; are not defined by C.  They mean whatever a given implementation wants them to mean."}], "tags": [], "owner": {"reputation": 325, "user_id": 6684651, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/ZzVwu.png?s=128&g=1", "display_name": "mike bayko", "link": "https://stackoverflow.com/users/6684651/mike-bayko"}, "is_accepted": false, "score": 1, "last_activity_date": 1501023606, "last_edit_date": 1501023606, "creation_date": 1501022189, "answer_id": 45314602, "question_id": 45314516, "link": "https://stackoverflow.com/questions/45314516/how-to-create-a-file-with-random-char-in-c/45314602#45314602", "title": "How to create a file with random char in C?", "body": "<p>You can use the ASCII table of characters to generate valid characters. The base for the uppercase alphabet is at 65, so when you generate </p>\n\n<pre><code>int rnd = rand() % 26;\n</code></pre>\n\n<p>you can say something like</p>\n\n<pre><code>char new_char = 65 + rnd;\n</code></pre>\n\n<p>or as others have stated, it is easier to read</p>\n\n<pre><code>char new_char = 'A' + rnd;\n</code></pre>\n\n<p>which should give you one character in the ascii table of characters based off of the result of <code>rand() % 26</code>. Remember, in C an unsigned char is really just a data type that can range from the number 0, to the number 255.\n(as stated below, a signed char can range from -126 to 127)</p>\n\n<p>Things like <code>'a'</code> and <code>'b'</code> are translated into their ascii equivalent. (i.e. the corresponding number between 0 and 255 that they represent.)</p>\n\n<p>(unless you are using UNICODE of course.)</p>\n\n<p>I hope this helped.</p>\n"}, {"comments": [{"owner": {"reputation": 1049, "user_id": 5304415, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L8N5s.png?s=128&g=1", "display_name": "Ryan B.", "link": "https://stackoverflow.com/users/5304415/ryan-b"}, "edited": false, "score": 0, "creation_date": 1501024057, "post_id": 45314793, "comment_id": 77592173, "body": "Plus, this method allowss easily to skip some characters (for example I and O as they look like numbers)"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1501023517, "creation_date": 1501023517, "answer_id": 45314793, "question_id": 45314516, "link": "https://stackoverflow.com/questions/45314516/how-to-create-a-file-with-random-char-in-c/45314793#45314793", "title": "How to create a file with random char in C?", "body": "<p>Simple set an array with random letters selected via <code>rand()</code></p>\n\n<pre><code>#define RANDOM_STRING_LENGTH 50\n\nchar buf[RANDOM_STRING_LENGTH + 1];\nfor (size_t i = 0; i &lt; RANDOM_STRING_LENGTH; i++) {\n  buf[i] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"[rand() %26];\n}\nbuf[RANDOM_STRING_LENGTH] = '\\0';\n\nputs(buf);\n</code></pre>\n"}], "owner": {"reputation": 185, "user_id": 5303888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c2e6f4235c21376426f0fac6078d02?s=128&d=identicon&r=PG&f=1", "display_name": "physnolimits", "link": "https://stackoverflow.com/users/5303888/physnolimits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "closed_date": 1501025282, "answer_count": 2, "score": 0, "last_activity_date": 1501023606, "creation_date": 1501021672, "question_id": 45314516, "link": "https://stackoverflow.com/questions/45314516/how-to-create-a-file-with-random-char-in-c", "closed_reason": "Needs details or clarity", "title": "How to create a file with random char in C?", "body": "<p>I have no problem in generate random numbers with rand()\nI have to create an output file with a string of char e.g. \"AQSDJEIOFHDUK\" \nWhen the result of rand ()%26 +1 is 1 I've to print in the file \"A\" when the result is \"2\" B and so on. I already know a priori how many char will be in the string let's say 50. \nI've to do that in C language.\nWhich function I should use? \nStrcat?</p>\n"}, {"tags": ["android", "c", "android-studio", "shared-libraries"], "answers": [{"tags": [], "owner": {"reputation": 1942, "user_id": 5458344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c732ce4032f4b690f5b4e33e5031ec?s=128&d=identicon&r=PG&f=1", "display_name": "E.Abdel", "link": "https://stackoverflow.com/users/5458344/e-abdel"}, "is_accepted": false, "score": 0, "last_activity_date": 1528207964, "last_edit_date": 1528207964, "creation_date": 1527160159, "answer_id": 50507825, "question_id": 45314478, "link": "https://stackoverflow.com/questions/45314478/how-to-load-native-library-into-native-android-code-androidstudio/50507825#50507825", "title": "How to load native library into native android code? (AndroidStudio)", "body": "<p>If this can help someone, here how to load a library in native code c/c++ :</p>\n\n<p><strong>1 -</strong> to avoid <code>java.lang.UnsatisfiedLinkError: dlopen failed:</code> add this to the build.gradle into <code>android</code> block : </p>\n\n<pre><code>sourceSets {\n    main {\n        jniLibs.srcDirs = ['src/main/jniLibs']\n    }\n}\n</code></pre>\n\n<p>Assuming that your lib files are in </p>\n\n<blockquote>\n  <p>src/main/jniLibs/{Architecture}/</p>\n</blockquote>\n\n<p>( depending where is your <code>jniLibs</code> folder, in my case it is located at <code>app/src/main/</code> but the most time it is in <code>app/</code>)</p>\n\n<hr>\n\n<p><strong>2 -</strong> In your CMakeList, add you library as <strong>SHARED</strong> and <strong>IMPORTED</strong> by adding the following block :</p>\n\n<pre><code>add_library(mylib SHARED\n            IMPORTED\n            )\n</code></pre>\n\n<hr>\n\n<p><strong>3 -</strong> Add target properties to locate you lib <strong>mylib.so</strong> by adding the following block :</p>\n\n<pre><code>set_target_properties( mylib PROPERTIES \nIMPORTED_LOCATION \n${PROJECT_SOURCE_DIR}/../jniLibs/${ANDROID_ABI}/mylib.so\n)\n</code></pre>\n\n<p>We back forward (/../) here because we concidere that CMakeLists.txt is in </p>\n\n<blockquote>\n  <p>src/main/cpp/</p>\n</blockquote>\n\n<p>Otherwise, the most time it is in <code>app/</code> folder, in this case, we don't need to back forward.</p>\n\n<p>So we have to back to <strong>main/</strong> before going into <strong>jniLibs/</strong> </p>\n\n<hr>\n\n<p><strong>4 -</strong> Add you lib <strong>mylib</strong> to your target link libraries :</p>\n\n<pre><code>target_link_libraries(native-library-jni\n                      ..\n                      ..\n                      mylib\n                      ..\n                      ..\n                      )\n</code></pre>\n\n<p><hr>\n<strong>5 -</strong> Finally, to call methods of your lib <strong>mylib.so</strong>, you have to create/copy-past the header containing these methods signatures and include it in your source file : <code>#include \"mylib.h\"</code></p>\n\n<p>You can now call your methods <code>[namespace::]method(args...)</code></p>\n\n<p><hr>\n<strong>Extra links :</strong> </p>\n\n<p><a href=\"https://cmake.org/cmake/help/v3.3/variable/PROJECT_SOURCE_DIR.html\" rel=\"nofollow noreferrer\">PROJECT_SOURCE_DIR</a></p>\n\n<p><a href=\"https://cmake.org/cmake/help/v3.3/variable/CMAKE_SOURCE_DIR.html\" rel=\"nofollow noreferrer\">CMAKE_SOURCE_DIR</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/32028667/are-cmake-source-dir-and-project-source-dir-the-same-in-cmake?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">Q : Are CMAKE_SOURCE_DIR and PROJECT_SOURCE_DIR the same in CMake?</a></p>\n"}], "owner": {"reputation": 1141, "user_id": 5110937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b1eb5d8ad4966cf91c9e4088cbfd9e1?s=128&d=identicon&r=PG&f=1", "display_name": "rafoo", "link": "https://stackoverflow.com/users/5110937/rafoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1197, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1528207964, "creation_date": 1501021452, "last_edit_date": 1501021879, "question_id": 45314478, "link": "https://stackoverflow.com/questions/45314478/how-to-load-native-library-into-native-android-code-androidstudio", "title": "How to load native library into native android code? (AndroidStudio)", "body": "<p>I have a library in C called <strong>mylib</strong> in the folder\n<strong>jniLibs/your_architecture/mylib.so</strong></p>\n\n<p>In Java, to load the library, you just have to type that code in your source:</p>\n\n<pre><code>static {\n  System.loadLibrary(\"mylib\");\n}\n</code></pre>\n\n<p>But how can you load the library in a native C code (in Android Studio) ?\nI add that the library don't use the JNI conventions, it's a normal shared library.</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "pipeline"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1501042291, "post_id": 45314314, "comment_id": 77596604, "body": "Since each thread calls <code>print(1, 1)</code>, it is difficult to see why you expect different behaviour.  Maybe you should be using <code>print(*pvalor, *pvalor+1)</code>?  I&#39;m not clear what the <code>print()</code> function is really supposed to do, and why it calls itself recursively.  Also, <code>return (n+1, parar+0);</code> doesn&#39;t do anything different from <code>return parar;</code> \u2014 did you intend to call <code>print()</code> there too?  And why the <code>+ 0</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8366296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5b764bda329dc666a0aedf01c116ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Erick Xavier", "link": "https://stackoverflow.com/users/8366296/erick-xavier"}, "is_accepted": false, "score": 0, "last_activity_date": 1501199561, "last_edit_date": 1501199561, "creation_date": 1501141528, "answer_id": 45344420, "question_id": 45314314, "link": "https://stackoverflow.com/questions/45314314/how-to-make-4-threads-interact-with-each-other/45344420#45344420", "title": "How to make 4 threads interact with each other?", "body": "<p>I think i did the wrong explaination about my question. Sorry about that, however i think i ended right now. 4 threads. 4 instructions, pipeline(maybe) and didn't used mutex, but semaphores. Btw the language barricade has been made everything more difficult, even ask here.</p>\n\n<p>@edit final and maybe right code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;semaphore.h&gt;\n\nsem_t mutex;\npthread_t id1;\npthread_t id2;\npthread_t id3;\npthread_t id4;\n\nvoid delay (int miliseconds){\n\n    long pause;\n    clock_t now,then;\n\n    pause = miliseconds*(CLOCKS_PER_SEC/1000);\n    now = then = clock();\n    while( (now-then) &lt; pause )\n        now = clock();\n}\n\npthread_mutex_t lock;\n\nvoid *thread_cont(void *arg){\n\n    int *pvalor;\n    pvalor=arg;\n\n\n    pthread_mutex_lock(&amp;lock);\n    sem_wait(&amp;mutex);\n    printf (\"\\n---Thread %i---\", *pvalor);\n    printf (\"Stage 1\");\n    delay(2000);\n\n\n    printf (\"\\n---Thread %i---\", *pvalor);\n    printf (\"Stage 2\");\n    sem_post(&amp;mutex);\n    pthread_mutex_unlock(&amp;lock);\n\n\n    printf (\"\\n---Thread %i---\", *pvalor);\n    printf (\"Stage 3\");\n    delay(2000);\n\n    printf (\"\\n---Thread %i---\", *pvalor);\n    printf (\"Stage 4\");\n    delay(2000);\n\n    pthread_exit(0);\n\n}\n\n\nint main(){\n\n    //create threads\n\n    sem_init(&amp;mutex, 0, 2);\n\n\n//ONE FOR EACH CREATE\n\nint offset1 = 1;\nint offset2 = 2;\nint offset3 = 3;\nint offset4 = 4;\n\n\n    pthread_create(&amp;id1, NULL, thread_cont, &amp;offset1);      \n    delay(2000);\n    pthread_create(&amp;id2, NULL, thread_cont, &amp;offset2);\n    delay(2000);\n    pthread_create(&amp;id3, NULL, thread_cont, &amp;offset3);\n    delay(2000);\n    pthread_create(&amp;id3, NULL, thread_cont, &amp;offset3);\n    delay(2000);\n    pthread_create(&amp;id4, NULL, thread_cont, &amp;offset4);\n    delay(2000);\n\n\n    pthread_join(id1, NULL);\n    pthread_join(id2, NULL);\n    pthread_join(id3, NULL);\n    pthread_join(id4, NULL);\n\n\n    sem_destroy(&amp;mutex);\n\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8366296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5b764bda329dc666a0aedf01c116ae1?s=128&d=identicon&r=PG&f=1", "display_name": "Erick Xavier", "link": "https://stackoverflow.com/users/8366296/erick-xavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501199561, "creation_date": 1501020423, "last_edit_date": 1501042165, "question_id": 45314314, "link": "https://stackoverflow.com/questions/45314314/how-to-make-4-threads-interact-with-each-other", "title": "How to make 4 threads interact with each other?", "body": "<p>I have a program with 4 threads, at the end i should print the thread and the pipeline (2 cycles) stage. Something like:</p>\n\n<pre><code>Thread 2: Stage 1 and 2\nThread 3: Stage 2 and 3\nThread 1: Stage 3 and 4\nThread 4: Stage 4 and 5\n</code></pre>\n\n<p>But I don't know how to do this counter for stages because with what I'm doing I can't show anything but stage 1 and 2 for each thread, instead of 1 and 2, 2 and 3...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\nvoid delay (int miliseconds){\n\n    long pause;\n    clock_t now,then;\n\n    pause = miliseconds*(CLOCKS_PER_SEC/1000);\n    now = then = clock();\n    while( (now-then) &lt; pause )\n        now = clock();\n}\n\nint print(int n, int parar){\n\n    if (n == 5) {\n        printf(\"\\nEst\u00e1gio 4 e 5\");\n\n    } else {\n        printf(\"Est\u00e1gio %i e %i\\n\",n, n+1);\n        if (parar == 2) {\n            return (n+1, parar+0);\n        }\n\n        return print(n+1, parar+1);\n    }\n}\n\nvoid thread_cont(void *arg){\n\n    int *pvalor;\n    pvalor=arg;\n\n    pthread_mutex_lock(&amp;mutex);\n    printf (\"\\n---Thread %i--- \\n\", *pvalor);\n    int a = print(1, 1);\n    delay(2000);\n    pthread_mutex_unlock(&amp;mutex);\n\n/*\n    if (*pvalor == 1){\n        printf (\"Est\u00e1gio 1 e 2\");\n    }\n\n    if (*pvalor == 2){\n    printf (\"Est\u00e1gio 2 e 3\");\n    }\n\n    if (*pvalor == 3){\n    printf (\"Est\u00e1gio 3 e 4\");\n    }\n\n    if (*pvalor == 4){\n    printf (\"Est\u00e1gio 4 e 5\");\n    }\n\n*/\n\n}\n\nint main() {\n\n    pthread_t id1;\n    int offset1 = 1;\n    pthread_create(&amp;id1, NULL, thread_cont, &amp;offset1);\n\n    pthread_t id2;\n    int offset2 = 2;\n    pthread_create(&amp;id2, NULL, thread_cont, &amp;offset2);\n\n    pthread_t id3;\n    int offset3 = 3;\n    pthread_create(&amp;id3, NULL, thread_cont, &amp;offset3);\n\n    pthread_t id4;\n    int offset4 = 4;\n    pthread_create(&amp;id4, NULL, thread_cont, &amp;offset4);\n\n    pthread_join(id1, NULL);\n    pthread_join(id2, NULL);\n    pthread_join(id3, NULL);\n    pthread_join(id4, NULL);\n\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": true, "score": 3, "last_activity_date": 1501023572, "creation_date": 1501023572, "answer_id": 45314799, "question_id": 45313966, "link": "https://stackoverflow.com/questions/45313966/union-declaration-with-array-pointer/45314799#45314799", "title": "Union declaration with array pointer?", "body": "<p>No, that is not possible. Using the name of an array has it \"decay\" to a pointer to the first element in almost all contexts.</p>\n\n<p>BTW, this has nothing to do with the fact that your array is hidden inside a <code>union</code>. Arrays can't be assigned to and the only way to initialize them is by using an initializer as you did.</p>\n\n<p>You could just use <code>memcpy</code> to copy the contents, though.</p>\n"}], "owner": {"reputation": 1509, "user_id": 3699261, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/fqJKs.jpg?s=128&g=1", "display_name": "eszik.k", "link": "https://stackoverflow.com/users/3699261/eszik-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 45314799, "answer_count": 1, "score": 1, "last_activity_date": 1501023606, "creation_date": 1501018859, "last_edit_date": 1501023606, "question_id": 45313966, "link": "https://stackoverflow.com/questions/45313966/union-declaration-with-array-pointer", "title": "Union declaration with array pointer?", "body": "<p>I have the following union structure:</p>\n\n<pre><code>typedef union Message\n{\n  struct\n  {\n    unsigned short header: 16;\n    unsigned short header2: 16;\n    unsigned int timestamp: 32;\n    unsigned int payload: 32;\n\n  } pieces;\n  unsigned short whole[6];\n}Message;\n</code></pre>\n\n<p>If I declare this way it works</p>\n\n<pre><code>Message msg = {.whole={255,255,255,0,255,0}};\n</code></pre>\n\n<p>I am just wondering there is any solution to declare union by an exsisting array? Like this:</p>\n\n<pre><code>unsigned short arr[] = {255,255,255,0,255,0};\nMessage msg = {.whole=arr};\n</code></pre>\n"}, {"tags": ["android", "c", "android-emulator", "emulation", "android-kernel"], "answers": [{"comments": [{"owner": {"reputation": 1861, "user_id": 5605365, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0bcaecd20a17e1bd30a208a7a6f15438?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5605365/matt"}, "edited": false, "score": 0, "creation_date": 1593021661, "post_id": 45313643, "comment_id": 110636732, "body": "How does this answer the question?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4936030"}, "is_accepted": true, "score": -1, "last_activity_date": 1501017469, "creation_date": 1501017469, "answer_id": 45313643, "question_id": 45313264, "link": "https://stackoverflow.com/questions/45313264/emulator-error-could-not-load-opengles-emulation-library/45313643#45313643", "title": "emulator: ERROR: Could not load OpenGLES emulation library", "body": "<p>You can find answer in this link:\n<a href=\"http://en.proft.me/2016/05/13/fix-libgl-error-unable-load-driver-i965_driso/\" rel=\"nofollow noreferrer\">http://en.proft.me/2016/05/13/fix-libgl-error-unable-load-driver-i965_driso/</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4936030"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 1, "accepted_answer_id": 45313643, "answer_count": 1, "score": 0, "last_activity_date": 1501017469, "creation_date": 1501015852, "question_id": 45313264, "link": "https://stackoverflow.com/questions/45313264/emulator-error-could-not-load-opengles-emulation-library", "title": "emulator: ERROR: Could not load OpenGLES emulation library", "body": "<p>I download Android_Wear_Square_API_23 by android studio avd manager. but now when i want to run it with terminal by <code>./emulator64-x86 -avd Android_Wear_Square_API_23</code> i get error </p>\n\n<p><code>emulator: ERROR: Could not load OpenGLES emulation library [lib64OpenglRender]: lib64OpenglRender.so: cannot open shared object file: No such file or directory\nFailed to open lib64EGL_translator: [lib64EGL_translator.so: cannot open shared object file: No such file or directory]\ngles2_dispatch_init: Could not load lib64GLES_V2_translator [lib64GLES_V2_translator.so: cannot open shared object file: No such file or directory]\nemulator: ERROR: Could not load OpenGLES emulation library [lib64OpenglRender]: lib64OpenglRender.so: cannot open shared object file: No such file or directory\nemulator: ERROR: Could not initialize OpenglES emulation, use '-gpu off' to disable it.</code></p>\n\n<p>I also try <code>./emulator64-x86 -avd Android_Wear_Square_API_23 -gpu off</code> but i get this error :</p>\n\n<p><code>Failed to open lib64EGL_translator: [lib64EGL_translator.so: cannot open shared object file: No such file or directory]\ngles2_dispatch_init: Could not load lib64GLES_V2_translator [lib64GLES_V2_translator.so: cannot open shared object file: No such file or directory]\n</code></p>\n\n<p>Can anybody fix this problem?</p>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1501015514, "post_id": 45313151, "comment_id": 77588885, "body": "Don&#39;t use obscure sites as reference. There is no guarantee in the standard for a specific max. duration."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1501015567, "post_id": 45313151, "comment_id": 77588920, "body": "There are many cool functions in <code>time.h</code>. Why not to take a look?"}, {"owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 1, "creation_date": 1501015591, "post_id": 45313151, "comment_id": 77588940, "body": "What&#39;s your target?  Linux, windows, C99, other?  How much resolution do you need (second, sub-second, sub-tick)?"}, {"owner": {"reputation": 852, "user_id": 7902058, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/624bb806e1a9197a8fa9c264898bdac6?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/7902058/medo"}, "reply_to_user": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "edited": false, "score": 0, "creation_date": 1501015841, "post_id": 45313151, "comment_id": 77589071, "body": "@BrianCain I am targeting Linux, and would like to calculate in terms of hours and minutes."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1501016096, "post_id": 45313151, "comment_id": 77589204, "body": "Realize also that <code>clock()</code> returns the CPU time spent by the program, not the wall clock time. It&#39;s not clear to me which one you&#39;re interested in."}, {"owner": {"reputation": 852, "user_id": 7902058, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/624bb806e1a9197a8fa9c264898bdac6?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/7902058/medo"}, "reply_to_user": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1501016157, "post_id": 45313151, "comment_id": 77589248, "body": "@MichaelBurr I want to get the duration time from the time that the program runs until the end. Just how long does it take in simple way"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1501016874, "post_id": 45313151, "comment_id": 77589621, "body": "If your program runs for several hours would one second accuracy be good? If so, you can use the simple <code>time</code> function to stamp the beginning and end."}], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 2, "last_activity_date": 1501016345, "creation_date": 1501016345, "answer_id": 45313367, "question_id": 45313151, "link": "https://stackoverflow.com/questions/45313151/how-to-extend-clock-execution-time/45313367#45313367", "title": "How to extend clock() execution time", "body": "<p>Use <code>gettimeofday()</code> (<a href=\"https://linux.die.net/man/2/gettimeofday\" rel=\"nofollow noreferrer\">https://linux.die.net/man/2/gettimeofday</a>). It offers microsecond resolution over a very long period. Record the start time and the end time and calculate the difference.</p>\n"}, {"tags": [], "owner": {"reputation": 13359, "user_id": 489590, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e16b3d117fa188c4dbdafb8dc27a4df0?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Cain", "link": "https://stackoverflow.com/users/489590/brian-cain"}, "is_accepted": true, "score": 2, "last_activity_date": 1501018892, "last_edit_date": 1501018892, "creation_date": 1501016789, "answer_id": 45313460, "question_id": 45313151, "link": "https://stackoverflow.com/questions/45313151/how-to-extend-clock-execution-time/45313460#45313460", "title": "How to extend clock() execution time", "body": "<p><strike>The <a href=\"http://en.cppreference.com/w/c/chrono/time\" rel=\"nofollow noreferrer\"><code>time()</code></a> function is specified in C89, C99, C11.  It has second resolution and usually spans more than 30-bits worth of seconds.  It's likely the most portable solution.  In fact, I'd never heard of <code>clock()</code> until today.  Counting ticks is rarely what you want even if you need high resolution.</strike></p>\n\n<p>If you don't need a portable way to measure CPU/execution time, use <a href=\"http://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\"><code>procfs</code></a>.  <code>proc/self/stat</code>'s <code>stime</code> field and <code>sysconf(_SC_CLK_TCK)</code> should be all you need. </p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 2, "last_activity_date": 1501023177, "creation_date": 1501023177, "answer_id": 45314741, "question_id": 45313151, "link": "https://stackoverflow.com/questions/45313151/how-to-extend-clock-execution-time/45314741#45314741", "title": "How to extend clock() execution time", "body": "<p>The standard across all POSIXy systems, including, Linux, is the <a href=\"http://man7.org/linux/man-pages/man2/clock_gettime.2.html\" rel=\"nofollow noreferrer\">clock_gettime()</a> POSIX.1 function.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>#define _POSIX_C_SOURCE 200809L\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n/* Clock used by wall_start()/wall_elapsed() */\n#ifdef CLOCK_MONOTONIC\n#define  WALL_CLOCK_ID  CLOCK_MONOTONIC\n#else\n#define  WALL_CLOCK_ID  CLOCK_REALTIME\n#endif\n\nstatic struct timespec  wall_started = { 0 };\n\nstatic inline void wall_start(void)\n{\n    if (clock_gettime(WALL_CLOCK_ID, &amp;wall_started)) {\n        wall_started.tv_sec = 0;\n        wall_started.tv_nsec = 0;\n    }\n}\n\nstatic inline void wall_elapsed(void)\n{\n    struct timespec  t;\n    if (!clock_gettime(WALL_CLOCK_ID, &amp;t))\n        return (double)(t.tv_sec - wall_started.tv_sec)\n             + (double)(t.tv_nsec - wall_started.tv_nsec) / 1000000000.0;\n    else\n        return -1.0;\n}\n\n/* Return the number of seconds of CPU time\n   used by this process (includes all threads)\n*/\nstatic inline double cpu_elapsed(void)\n{\n    struct timespec  t;\n\n    if (!clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &amp;t))\n        return (double)t.tv_sec\n             + (double)t.tv_nsec / 1000000000.0;\n\n    return -1.0;\n}\n</code></pre>\n\n<p>If you want to display the time in days, hours, minutes, and seconds, you'll also need a simple function to split the (floating-point) seconds into days, hours, and minutes.</p>\n\n<p>Here is one implementation, which takes pointers to ints for days, hours, and minutes; you can use NULL if you don't want to split that out. The function returns the remaining seconds:</p>\n\n<pre><code>static inline double split_seconds(double  secs,\n                                   int    *days,\n                                   int    *hours,\n                                   int    *minutes)\n{\n    /* We split the absolute number of seconds, only. */\n    if (secs &lt; 0.0)\n        secs = 0.0;\n\n    if (days) {\n        const int  ndays = (int)(secs / 86400.0);\n        secs -= (double)ndays * 86400.0;\n        *days = ndays;\n    }\n\n    if (hours) {\n        const int  nhours = (int)(secs / 3600.0);\n        secs -= (double)nhours * 3600.0;\n        *hours = nhours;\n    }\n\n    if (minutes) {\n        const int  nminutes = (int)(secs / 60.0);\n        secs -= (double)nminutes * 60.0;\n        *minutes = nminutes;\n    }\n\n    return secs;\n}\n</code></pre>\n\n<p>For example, calling <code>split_seconds(3661.25, NULL, &amp;h, NULL)</code> returns <code>61.25</code> with <code>h == 1</code>. Calling <code>split_seconds(3661.25, &amp;d, &amp;h, &amp;m)</code> returns <code>1.25</code>, with <code>d == 0</code>, <code>h == 1</code>, <code>m == 1</code>, corresponding to 0 days, 1 hour, 1 minute, and 1.25 seconds.</p>\n\n<p>The <code>CLOCK_REALTIME</code> clock is the standard wall clock in POSIXy systems, but it is affected by NTP (Network Time Protocol) changes, and the system administrator can directly set it. It is not, however, affected by Daylight Savings Time or anything related to timezones, because it is in UTC, not local time.</p>\n\n<p>The <code>CLOCK_MONOTONIC</code> clock is similar to <code>CLOCK_REALTIME</code>, except that its epoch is unknown (probably set to some time in the past when the machine last booted), and it is not affected by NTP time jumps (but is affected by small incremental changes by NTP, to keep the computer clock synchronized to network time sources), and is not affected by system time changes by the system administrator.</p>\n\n<p>If available, <code>CLOCK_MONOTONIC</code> is considered better for measuring elapsed real-world time than <code>CLOCK_REALTIME</code>; <code>CLOCK_REALTIME</code> is better suited to cases where you compare to an absolute real-world time, or check if a specific date/time has already passed or not.</p>\n\n<p>If you intend to store a timestamp to e.g. a file, you must use <code>CLOCK_REALTIME</code> and not <code>CLOCK_MONOTONIC</code>, because the latter is only meaningful on that same machine, and only until the next boot.</p>\n\n<p>When using <code>CLOCK_REALTIME</code>, remember that it is in UTC, and users normally specify their times and dates in local time; you probably want to use <a href=\"http://man7.org/linux/man-pages/man3/strptime.3.html\" rel=\"nofollow noreferrer\"><code>strptime()</code></a> POSIX.1 function to parse the text (use <code>#define _XOPEN_SOURCE</code> in Linux), and <a href=\"http://man7.org/linux/man-pages/man3/mktime.3.html\" rel=\"nofollow noreferrer\"><code>mktime()</code></a> to generate the <code>time_t</code> you can store to the <code>tv_sec</code> member of a <code>struct timespec</code> structure.</p>\n"}], "owner": {"reputation": 852, "user_id": 7902058, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/624bb806e1a9197a8fa9c264898bdac6?s=128&d=identicon&r=PG&f=1", "display_name": "Medo", "link": "https://stackoverflow.com/users/7902058/medo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 45313460, "answer_count": 3, "score": 0, "last_activity_date": 1501023177, "creation_date": 1501015364, "last_edit_date": 1501017381, "question_id": 45313151, "link": "https://stackoverflow.com/questions/45313151/how-to-extend-clock-execution-time", "title": "How to extend clock() execution time", "body": "<p>My C program can run more than 3 hours. For the sake of my experiment, I want to calculate the duration time (i.e., execution time) taken by the program until it finishes. I use <code>start = clock();</code> at the beginning of <code>main()</code>, at the end I do <code>end = clock()</code>, finally subtract <code>end - start</code> the get the execution time. However, as it is said <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_clock.htm\" rel=\"nofollow noreferrer\">here</a>, <code>clock_t clock(void)</code> is limited to 72 minutes. How can I enforce it to count the whole execution time not only 72 minutes?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1501010699, "post_id": 45311912, "comment_id": 77586205, "body": "<code>*(x) != &#39;\\0&#39;</code> when <code>x</code> is a <code>float *</code> makes no sense. At best it compares with the 0 value..."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1501010757, "post_id": 45311912, "comment_id": 77586237, "body": "Please include the output in your question, as text, not as a link to an image of the text."}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1501010771, "post_id": 45311912, "comment_id": 77586246, "body": "@Jean-FrancoisFabre i want to know how many elements are there before \\0 thats why i used while *x !=\\0"}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1501010816, "post_id": 45311912, "comment_id": 77586281, "body": "@KeithThompson Okay sir will do from now on"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1501010818, "post_id": 45311912, "comment_id": 77586283, "body": "What makes you think that all arrays are zero-terminated? It is a specialty of char arrays initialised by a string constant. Guessing at your not shown output, you are accessing beyond the array and invoking undefined behaviour."}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1501010883, "post_id": 45311912, "comment_id": 77586317, "body": "@Yunnosch So float/int arrays don&#39;t end with \\0?"}, {"owner": {"reputation": 3984, "user_id": 164344, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c978ca7e1c3da231710b8c114009faa5?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/164344/tim"}, "edited": false, "score": 3, "creation_date": 1501010954, "post_id": 45311912, "comment_id": 77586345, "body": "<i>So float/int arrays don&#39;t end with \\0?</i> Correct"}, {"owner": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 1, "creation_date": 1501010987, "post_id": 45311912, "comment_id": 77586355, "body": "Maybe you are confusing <code>NUL</code>-terminated strings and arrays. String literals like <code>&quot;ABC&quot;</code> are finalized with <code>&#39;\\0&#39;</code>. Arrays like <code>{&#39;A&#39;, &#39;B&#39;, &#39;C&#39;}</code> are not. (zero-terminated strings are special types of Arrays.)"}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "reply_to_user": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 0, "creation_date": 1501011525, "post_id": 45311912, "comment_id": 77586638, "body": "@JojOatXGME so is there a way to know exactly how many numbers user has entered in an array except for initializing an array to zero prior to its usage and then using while( arr[i] != 0) ?"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1501011571, "post_id": 45311912, "comment_id": 77586665, "body": "@Muneeb use a <i>counter</i> variable. Or if the array is static then please <i>do</i> add the 0 / 0.0 there explicitly."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501011607, "post_id": 45311912, "comment_id": 77586688, "body": "<code>int a[4] = {1,2,3,4}; float b[4] = {1.1,2.2,3.3,4.4};</code> --&gt; <code>int a[] = {1,2,3,4, 0}; float b[] = {1.1,2.2,3.3,4.4, 0};</code>"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1501011644, "post_id": 45311912, "comment_id": 77586712, "body": "The 0 terminator only applies to <i>strings</i>, not to arrays in general.  If you need to keep track of how many elements in an array have been set, you need to use a separate counter."}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1501011797, "post_id": 45311912, "comment_id": 77586795, "body": "@JohnBode elaboration on the &quot;separate counter&quot; please."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1501011905, "post_id": 45311912, "comment_id": 77586853, "body": "You can say an <code>int length = 4</code> when you create the array, and then whenever you call a function taking an array, also give it a length parameter."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1501012494, "post_id": 45311912, "comment_id": 77587224, "body": "@AnttiHaapala A lot of times an array might be static but have <code>0</code> as an internal value. Terminating it with a zero often does not help in this case. However, a static array has a static size, and just storing its size will always work."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1501013232, "post_id": 45311912, "comment_id": 77587642, "body": "@Muneeb: Use a separate variable to keep track of how many elements in the array have been set."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1501011289, "post_id": 45312042, "comment_id": 77586507, "body": "Detail: &quot;converts the <code>&#39;\\0&#39;</code> into an <code>int</code> &quot;` --&gt; <code>&#39;\\0&#39;</code> is an <code>int </code> in C, no conversion needed."}, {"owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "edited": false, "score": 0, "creation_date": 1501011333, "post_id": 45312042, "comment_id": 77586528, "body": "Thank you sir i got that . :)"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501011418, "post_id": 45312042, "comment_id": 77586577, "body": "@chux Oops, yes, I keep forgetting that rule because it is not at all what I expect."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1501012065, "post_id": 45312042, "comment_id": 77586954, "body": "That is what distinguishes the <code>char</code> array from the string. The latter is a <code>char</code> array which is terminated with a <code>&#39;\\0&#39;</code>. You can implement a similar sentinel in any type of array instead of passing its length, you would have to implement that yourself, but with the <code>char</code> array, library functions will treat it as a string, when properly terminated."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "edited": false, "score": 0, "creation_date": 1501016444, "post_id": 45312042, "comment_id": 77589414, "body": "@Muneeb A while ago I updated my answer to add a section on what you can do instead; I forgot to comment on it then."}], "tags": [], "owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "is_accepted": false, "score": 10, "last_activity_date": 1501012390, "last_edit_date": 1501012390, "creation_date": 1501011137, "answer_id": 45312042, "question_id": 45311912, "link": "https://stackoverflow.com/questions/45311912/c-integer-float-array-strange-behavior/45312042#45312042", "title": "C integer/float array strange behavior", "body": "<p>In general, there is no zero element after the end of an array. You cannot assume there is; this kind of code could just as easily segfault. You are finding a zero which is only there by coincidence.</p>\n\n<p>In <code>char</code> arrays in particular, this rule is the same. However, a literal string like <code>\"Hello, world!\"</code> is actually one <code>char</code> longer than what you\u2019d get just by counting characters. This is <a href=\"http://en.cppreference.com/w/c/language/string_literal\" rel=\"noreferrer\">equivalent to</a> an unmodifiable <code>char[13]</code> of <code>{'H', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd', '!', '\\0'}</code>. A lot of library functions for working with <code>char</code>s expect a terminating <code>'\\0'</code>; no such expectation usually exists for other types of arrays and you need to pass the length explicitly.</p>\n\n<p>Also note that your <code>*(x) != '\\0'</code> <a href=\"http://en.cppreference.com/w/c/language/conversion#Usual_arithmetic_conversions\" rel=\"noreferrer\">treats</a> the <code>'\\0'</code> as an <code>int</code> or <code>float</code> zero, and is equivalent to <code>*x != 0</code> or <code>*x != 0.0f</code> (for the different types of <code>x</code> in the different functions). If you had stored an actual 0 in one of the arrays, it would have just counted to that.</p>\n\n<hr>\n\n<p>Since there is no special sentinel convention for <code>int</code> or <code>float</code> arrays (because <code>0</code> and <code>0.0f</code> are usually perfectly reasonable values to put in the array), you should create a separate <a href=\"http://en.cppreference.com/w/c/types/size_t\" rel=\"noreferrer\"><code>size_t</code></a> variable to keep track of the array\u2019s length. Then, if you ever need to create a function acting on an array, you can also give it a <code>length</code> parameter and have it iterate up to that. For example:</p>\n\n<pre><code>void foo(int* x, size_t length)\n{\n\n    for (size_t i = 0; i &lt; length; ++i)\n    {\n        printf(\"%i \", x[i]);\n    }\n\n} \n</code></pre>\n\n<p>(I use <a href=\"http://en.cppreference.com/w/c/types/size_t\" rel=\"noreferrer\"><code>size_t</code></a> here because it typically represents the size of structures in memory).</p>\n\n<p>Then you can call this with <code>foo(a, 4);</code>. If you need a variable-sized array, you can create a <code>size_t a_length</code> variable when you create <code>a</code>, and update it whenever <code>a</code>\u2019s size changes.</p>\n\n<p>You might even want to do this with <code>char</code> arrays sometimes, such as if you have binary data which might contain zero bytes, or because scanning for the end of the string takes time and you usually don\u2019t need to look at each character.</p>\n"}, {"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1501020181, "creation_date": 1501020181, "answer_id": 45314256, "question_id": 45311912, "link": "https://stackoverflow.com/questions/45311912/c-integer-float-array-strange-behavior/45314256#45314256", "title": "C integer/float array strange behavior", "body": "<p>You are confusing a <em>character array</em> with a <em>character string</em>.  In C, strings are not a specific data type; they are implemented using <em>character arrays</em>.  The end of a string is indicated by a NUL terminator, but end of the string is not necessarily the end of the array which may be larger, and a <em>character array</em> need not represent string at all.</p>\n\n<p>Your observation that other array types have zero terminators (past the end of the array or otherwise) is a false conclusion - the zeroes you have observed in <em>proximity</em> to the end are purely coincidental.</p>\n"}], "owner": {"reputation": 5, "user_id": 6495409, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c2dafe0f07d425dd5b2d1948e5b08333?s=128&d=identicon&r=PG&f=1", "display_name": "Muneeb", "link": "https://stackoverflow.com/users/6495409/muneeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1501020181, "creation_date": 1501010637, "last_edit_date": 1501013403, "question_id": 45311912, "link": "https://stackoverflow.com/questions/45311912/c-integer-float-array-strange-behavior", "title": "C integer/float array strange behavior", "body": "<p>Okay so i was just fooling around making random programs and seeing their outputs to understanding how things work and i noticed a strange thing about integer/float arrays. Unlike char array the '\\0' character is not stored directly after the last entered element into the array. In integer array it is stored two elements after the last element and in float its four elements. Here's the code to demonstrate this strange fact. Please help me understand why this happens.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid foo(int* x)\n{\n    while ( *(x) != '\\0' )\n    {\n        printf(\"%i \",*x);\n        ++x;\n    }\n} \n\nvoid foo1(float* x)\n{\n    while ( *(x) != '\\0')\n    {\n        printf(\"%.1f \",*x);\n        ++x;\n    }\n} \n\nvoid foo2(char* x)\n{\n    while( *(x) != '\\0' )\n    {\n        printf(\"%c\",*x);\n        ++x;\n    }\n} \n\nint main(void)\n{\n    int a[4] = {1,2,3,4};\n    float b[4] = {1.1,2.2,3.3,4.4};\n    char name[] = \"Muneeb\";\n\n    foo(a);\n    printf(\"\\n\\n\");\n\n    foo1(b);\n    printf(\"\\n\\n\");\n\n    foo2(name);\n    return 0;\n  }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 2 3 4 -12345677723 -1623562626\n1.1 2.2 3.3 4.4 0.0 0.0 0.0 0.0 -0.0 -1.3\n</code></pre>\n"}, {"tags": ["c", "sockets", "select", "tcp", "openssl"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1501007570, "post_id": 45311021, "comment_id": 77584401, "body": "Maybe you are thinking of <a href=\"http://man7.org/linux/man-pages/man2/shutdown.2.html\" rel=\"nofollow noreferrer\">shutdown(2)</a> but your question is <i>very</i> unclear."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1501007595, "post_id": 45311021, "comment_id": 77584412, "body": "First try writing a small example that demonstrates the problem without SSL."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501007855, "post_id": 45311021, "comment_id": 77584571, "body": "&quot;<i>even if I supply no ID argument</i>&quot; - that is not possible given the code shown. In any case, clients have no concept of socket IDs, that is strictly private to your code. So how you are determining which socket ID to close? Presumably you have associated your own unique ID (client usernamae, etc) to each socket, and clients are able to request those IDs, which you then use to lookup the actual socket IDs. Is that right? If not, that is what you <i>should</i> be doing."}, {"owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1501007898, "post_id": 45311021, "comment_id": 77584587, "body": "@BasileStarynkevitch can you elaborate on how my question is unclear? I have multiple clients connecting in to a central server. I want to be able to force a client to disconnect from a different client."}, {"owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501007964, "post_id": 45311021, "comment_id": 77584621, "body": "@RemyLebeau I would tend to agree with you however it does work. I just don&#39;t know why."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501008015, "post_id": 45311021, "comment_id": 77584655, "body": "@tehOJ:  &quot;<i>it does work</i>&quot; - what works? Calling <code>kill_socket()</code> without an ID value? That is not possible given the code shown. The parameter is required. Which goes back to my question - how are you determining which socket ID to close? Please show that code. Otherwise, your question is likely to be closed as off-topic."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501008034, "post_id": 45311021, "comment_id": 77584665, "body": "You cannot <i>force</i> a client on a different machine to do anything.  The most you can do is send it a signal of some kind, and hope that it understands and honors your request."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501008108, "post_id": 45311021, "comment_id": 77584711, "body": "@JohnBollinger: a client sends a command to the <i>server</i>, and the <i>server</i> then closes the requested client socket.  The requesting client is not telling another client to disconnect."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501008345, "post_id": 45311021, "comment_id": 77584851, "body": "I still don&#39;t see any <i>forcing</i> going on in that sequence of events, @RemyLebeau.  I am perhaps being too picky about details of wording, but wording anomalies sometimes betray misconceptions or wrong expectations."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1501008538, "post_id": 45311021, "comment_id": 77584989, "body": "The only way you could call <code>kill_socket</code> without an ID is if there&#39;s no declaration visible for <code>kill_socket</code> from where it was called, in which case you invoke <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> because the implicit declaration <code>int kill_socket()</code> doesn&#39;t match the definition <code>void kill_socket(int id)</code>."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1501008596, "post_id": 45311021, "comment_id": 77585024, "body": "We need to see how <code>kill_socket</code> is being called."}, {"owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501008770, "post_id": 45311021, "comment_id": 77585139, "body": "<code>kill_socket()</code> added above. @JohnBollinger I apologize for the confusion but yes, @RemyLebeau is correct. I&#39;m trying to close the local socket not force the client to do anything. I&#39;m trying to terminate the socket on the server side."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 2, "creation_date": 1501008798, "post_id": 45311021, "comment_id": 77585156, "body": "There is not enough information in your question body to explain the behavior you are observing. Right now, the problems could be: (1) your array has the wrong values in them; (2) you are passing the wrong value to your function; (3) the client command is wrong; (4) the client command was parsed incorrectly by the server; (5) your server is closing the connection to your client for an unrelated reason; (6) a combination of the above; (7) some other unforseen reason. If you provide a complete example, there will be a higher chance the problem can be identified."}, {"owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1501008998, "post_id": 45311021, "comment_id": 77585265, "body": "@jxh We&#39;re talking 460 lines of code in the core.c file alone. Plus two other .c files along with their respective header files. I&#39;m trying to show what I (in my admittedly limited wisdom) think is relevant to show what I&#39;m trying to get at. Is there another way I should show the code?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1501009108, "post_id": 45311021, "comment_id": 77585332, "body": "@tehOJ: Yes, my original suggestion of writing a small example that demonstrates the problem. <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501009155, "post_id": 45311021, "comment_id": 77585362, "body": "@tehOJ: the code shown requires clients to know each other&#39;s socket IDs. How are they getting those values? Those IDs should be private to the server code only and NOT known to the remote parties, unless you have implemented a command that allows clients to retreive a list of available socket IDs, which is bad design. Clients should login with a unique ID, and the server keep track of those login IDs and associated socket IDs. Then a client can send a command to request a given login ID be closed, and the server can lookup the actual socket ID to close."}, {"owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501009422, "post_id": 45311021, "comment_id": 77585497, "body": "@RemyLebeau &quot;socket ID&quot; as defined in the code above is a bit of a misnomer I think. I&#39;m passing a single integer that corresponds with the index of the <code>int client_socket[MAX_CONNECTIONS]</code> array of file descriptors. And now rubber ducking with you I&#39;m thinking that&#39;s my issue. Does each socket have some type of serialized ID number that I should be calling there?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501009593, "post_id": 45311021, "comment_id": 77585585, "body": "@tehOJ: by &quot;socket ID&quot;, I&#39;m referring to the socket file descriptor. <code>close()</code> requires a socket file descriptor as input. <code>kill_socket()</code> takes an array index as input, and uses that index to retrieve a socket descriptor from the array and pass it to <code>close()</code>. Your command handler is getting that index directly from the client&#39;s command input. So how is the client getting those array indexes in the first place? How does it know which client is located at which array index? How does it even know about the array in the first place? Bad design."}, {"owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501009780, "post_id": 45311021, "comment_id": 77585686, "body": "@RemyLebeau I&#39;m storing a list of connected clients using sqlite3. A properly authenticated client can pull the list of currently connected clients which looks like this:  1  |  10.96.113.230  |  (null) 2  |  10.96.113.242  |  (null)"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1501009978, "post_id": 45311021, "comment_id": 77585785, "body": "You would need to expose the array of sockets somehow so that the client can select the proper index and indicate that that index from your array of sockets is the one that you want to shut down."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501009988, "post_id": 45311021, "comment_id": 77585792, "body": "@tehOJ: The list of clients stored in the DB (why are you doing that?) may not match the list of clients stored in the array in memory. This is a VERY bad design. I stick by my earlier suggestion. You should require the clients to login to the server (how are they authenticated? You might already have this), and store those login IDs with the socket descriptors they belong to. Then, when requested, you can find the socket descriptor that belongs to a specified login ID, regardless of where it is located in the array."}, {"owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1501010085, "post_id": 45311021, "comment_id": 77585855, "body": "@RemyLebeau Ok I&#39;ll do some more reading/research and see what I can come up with. Thank you to everyone for all the help and advice!"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1501010086, "post_id": 45311021, "comment_id": 77585856, "body": "1. Zero is a valid socket descriptor (although it normally refers to standard input). You should use -1 instead. 2. You don&#39;t seem to have any checks in your code, so guessing about the source of misbehaviour is pretty much useless: it could be anywhere. 3. You use <code>atoi()</code> to parse the user command parameter. You should use e.g. <code>strtol()</code> with proper error checking (including that the entire parameter was converted) instead. 4. As Remy Lebeau mentioned, you only have at most a few tens of thousands of clients, which can definitely stay in memory; no need for a DB."}], "owner": {"reputation": 21, "user_id": 8365523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9015634094af448bb5a6671c2099d9fe?s=128&d=identicon&r=PG&f=1", "display_name": "tehOJ", "link": "https://stackoverflow.com/users/8365523/tehoj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "closed_date": 1501009859, "answer_count": 0, "score": 2, "last_activity_date": 1501008635, "creation_date": 1501007251, "last_edit_date": 1501008635, "question_id": 45311021, "link": "https://stackoverflow.com/questions/45311021/how-do-i-close-a-socket-from-another-socket-in-c-using-switch", "closed_reason": "Not suitable for this site", "title": "How do I close a socket from another socket in C (using switch)?", "body": "<p>I'm using <code>select()</code> along with OPENSSL to open multiple sockets on a generic TCP Server. I have a pretty standard setup using a pool of of file descriptors an then listening on each socket individually using </p>\n\n<pre><code>int sd = client_socket[id];\n/* Add new socket to array of sockets */\nfor (i = 0; i &lt; MAX_CONNECTIONS; i++) {\n    /* If position is empty */\n    if (client_socket[i] == 0) {\n        client_socket[i] = new_socket;\n        client_ssl_sockets[i] = *ssl; //save ssl object to array\n        break;\n    }\n}\n</code></pre>\n\n<p>What I want to do is issue a command from a client to force close another client's socket. I'm currently using</p>\n\n<pre><code>void kill_socket(int id) {\n    close(client_socket[id]);\n    client_socket[id] = 0;\n}\n</code></pre>\n\n<p>Unfortunately the above just closes my socket - even if I supply no ID argument. Is there another way to be able to reference a specific socket in the pool of sockets to isolate and close it with an issued command?</p>\n\n<p>Clarification Edit:\nWhen I say a command issued by another client I mean a text string being taken in via SSL_read and then being used by a switch statement as such:</p>\n\n<pre><code>ret_status = SSL_read(ssl, buf, MAX_BUF);\n\nstrncpy(pre, buf, 2); /* Pull first 2 characters of buffer */\nstrcpy(var, buf + 2); /* Pull rest of characters from buffer for function argument (where applicable) */\n\ncmd = atoi(pre); /* Convert buffer prefix to integer for switch */\n\nswitch (cmd) {\n    ...\n}\n</code></pre>\n\n<p>Then I can have a client execute a command (and even pass an argument into the function with the <code>var</code> string above. </p>\n\n<p>The problem as I see it is that the <code>close()</code> function is being called inside the <code>for</code> loop responsible for that specific socket and can't see the other sockets. How do I make a socket visible (and interactive) to other sockets? </p>\n\n<p>EDIT: Switch statement calling the <code>kill_socket()</code> function as requested by @Remy</p>\n\n<pre><code>case 98: /* Disconnect node */\n    if (check_auth(client_ip[i]) == 1) {\n        printf(\"Closing client connection!\\n\\n\");\n        kill_socket(atoi(var));\n     } else {\n        printf(\"You must authenticate first!\\n\\n\");\n     }\n\n     break;\n</code></pre>\n"}, {"tags": ["c", "signals", "mpi", "openmpi"], "answers": [{"comments": [{"owner": {"reputation": 901, "user_id": 1030294, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a6d23ebc68b11282abea7c0d51ded53d?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/1030294/marc"}, "edited": false, "score": 0, "creation_date": 1501008374, "post_id": 45311118, "comment_id": 77584869, "body": "I&#39;ve tried this too. Each process publishes its pid and I use it to raise the signal using kill -SIGUSR &lt;pid&gt; from another shell. Still it prints once, and I expect the statement in signal handler printed twice for each process"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 901, "user_id": 1030294, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a6d23ebc68b11282abea7c0d51ded53d?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/1030294/marc"}, "edited": false, "score": 0, "creation_date": 1501009728, "post_id": 45311118, "comment_id": 77585667, "body": "I seriously think you are using the wrong tool to achieve whatever it is you are trying."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 1, "last_activity_date": 1501007656, "creation_date": 1501007656, "answer_id": 45311118, "question_id": 45309891, "link": "https://stackoverflow.com/questions/45309891/error-in-signal-handling-in-openmpi/45311118#45311118", "title": "Error in signal handling in OpenMPI", "body": "<p>You cannot use signal forwarding the way you describe:</p>\n\n<blockquote>\n  <p>Open MPI will forward SIGUSR1 and SIGUSR2 <strong>from mpiexec</strong> to the other processes</p>\n</blockquote>\n\n<p>You can't just send a signal to yourself, you would have to find the <code>mpiexec</code> process. This process can run on a different node, so you cannot easily send a signal to it anyway.</p>\n\n<p>I cannot think of a reasonable way to really interrupt other MPI ranks like that, except for <code>MPI_Abort</code>, which is probably not what you want. Depending on your actual goal, you probably have to chose from asynchronous point to point communication, one-side communication or threads.</p>\n"}], "owner": {"reputation": 901, "user_id": 1030294, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a6d23ebc68b11282abea7c0d51ded53d?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/1030294/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501062909, "creation_date": 1501003251, "last_edit_date": 1501062909, "question_id": 45309891, "link": "https://stackoverflow.com/questions/45309891/error-in-signal-handling-in-openmpi", "title": "Error in signal handling in OpenMPI", "body": "<p>I'm working to understand signal handling in OpenMPI. I read that \"Open MPI will forward SIGUSR1 and SIGUSR2 from mpiexec to the other processes\". My question is that is this feature enabled by default installation.</p>\n\n<p>The scenario is that one MPI process raises a SIGUSR1, which has to be detected by 'orted' which is then forwarded to other processes.</p>\n\n<p>In my test code, I define a custom signal handler for SIGUSR1 and register this signal handler accordingly. I send a signal by using kill() or raise(). I assume that ORTE daemon will receive this signal and has to forward this signal to the remaining processes.</p>\n\n<p>// test.c</p>\n\n<pre><code>void handle_signal(int signal){\nif(SIGNAL==SIGUSR1)\nprintf(\"received SIGUSR1 signal \\n\");\n}\nint main(){\nMPI_Init(NULL, NULL);\n\n   int my_rank;\n   MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n\nsignal(SIGUSR1, handle_signal);\n\nif(my_rank == 1) // process with rank 1 raises SIGUSR1\n     kill(getpid(), SIGUSR1);\n\nMPI_Finalize();\nreturn 0;\n}\n</code></pre>\n\n<p>If I run this as\nmpirun -np 3 ./test</p>\n\n<p>I would expect to have the statement printed twice from the other two processes. But when I run this code, it only prints once, and that too from ORTE HNP, unlike the application processes. Do I need to call any other API on orted explicitly pass this signal, so that the application processes receive the SIGUSR1.</p>\n\n<p>-\nMarc</p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1500998485, "post_id": 45308333, "comment_id": 77578670, "body": "<code>k = i;     k = i % divisor;</code>...what&#39;s the purpose? you can get rid of the first statement completely, inn&#39;it?"}, {"owner": {"reputation": 4900, "user_id": 1085937, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b66b1894c805a260947000d16658f845?s=128&d=identicon&r=PG", "display_name": "Jeeter", "link": "https://stackoverflow.com/users/1085937/jeeter"}, "edited": false, "score": 1, "creation_date": 1500998568, "post_id": 45308333, "comment_id": 77578740, "body": "<code>k = i % divisor</code> will always return a number between <code>0</code> and <code>divisor</code>. This is how the <a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow noreferrer\">modulo operator</a> works"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1500998613, "post_id": 45308333, "comment_id": 77578770, "body": "Get a couple of <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">good beginners books</a>. Read about <i>selection statements</i> (like <code>if ... else ...</code>)."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1500999409, "post_id": 45308333, "comment_id": 77579317, "body": "<code>93 94 95 96</code> --&gt; <code>96 97 98 99</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500999609, "post_id": 45308333, "comment_id": 77579445, "body": "like <a href=\"http://ideone.com/YODfyz\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1501001905, "post_id": 45308333, "comment_id": 77580971, "body": "or <a href=\"http://ideone.com/WN8vfF\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501004124, "post_id": 45308333, "comment_id": 77582377, "body": "I would start the output labelling with <code>a</code> not with <code>x</code>. You have run out of letters at &quot;and so on&quot;!"}], "answers": [{"tags": [], "owner": {"reputation": 10050, "user_id": 3512538, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/6Om7A.png?s=128&g=1", "display_name": "CIsForCookies", "link": "https://stackoverflow.com/users/3512538/cisforcookies"}, "is_accepted": true, "score": 1, "last_activity_date": 1500999244, "creation_date": 1500999244, "answer_id": 45308606, "question_id": 45308333, "link": "https://stackoverflow.com/questions/45308333/prints-numbers-in-a-certain-sequence-or-series/45308606#45308606", "title": "Prints numbers in a certain sequence or series", "body": "<p>Using <code>%</code> won't get you far... <code>k = i % divisor;</code> will make sure <code>k</code> is somewhere between [0,4] (since <code>divisor = 4</code>) which is not what you want.</p>\n\n<p>What about using 2 loops?</p>\n\n<pre><code>int main(){\n  int i,j;\n  for(i = 0; i &lt; 100; i+=8){   // increment by 8 to make 0 -&gt; 8 -&gt; 16 jumps\n    for(j = 0; j &lt; 4; j++){    // print 4 values for x and y, starting from the initial value i, and i+4\n      printf(\"x = %d\\ty = %d\\n\", i+j, i+j+4);\n    }\n  }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1501005102, "post_id": 45308971, "comment_id": 77582966, "body": "Why do you have <code>lim</code> as an alias for <code>i</code>?  Why do you have separated conditions (<code>for</code> limit and an <code>if-break</code>) to exit the second loop?"}, {"owner": {"reputation": 43, "user_id": 8289587, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t8_MyqkcJbs/AAAAAAAAAAI/AAAAAAAAABo/EbHcX_jtC-g/photo.jpg?sz=128", "display_name": "VVV", "link": "https://stackoverflow.com/users/8289587/vvv"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1501092420, "post_id": 45308971, "comment_id": 77630936, "body": "Yes i agree that using lim was of no use. I used it just for the sake of better understanding.    The break statement is necessary without which the inner loop will print numbers greater than limit = 100. (That is, 101 102 103 104)"}], "tags": [], "owner": {"reputation": 43, "user_id": 8289587, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t8_MyqkcJbs/AAAAAAAAAAI/AAAAAAAAABo/EbHcX_jtC-g/photo.jpg?sz=128", "display_name": "VVV", "link": "https://stackoverflow.com/users/8289587/vvv"}, "is_accepted": false, "score": -1, "last_activity_date": 1501001279, "last_edit_date": 1501001279, "creation_date": 1501000329, "answer_id": 45308971, "question_id": 45308333, "link": "https://stackoverflow.com/questions/45308333/prints-numbers-in-a-certain-sequence-or-series/45308971#45308971", "title": "Prints numbers in a certain sequence or series", "body": "<p>I've written a code that has a two lined output\nThe first line will consist of x values and the second consists of y values.\nHope this would help you out.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n\n\n    int lim, i,j;\n    int limit = 100;\n\n    printf(\"x = \");\n\n    for(i = 0; i &lt;= limit; i = i + 8){\n       lim = i;\n       for (j = i; j &lt;= lim + 3; j++){ \n           printf(\"%d \",j);\n    }\n }\n   printf(\"\\n\");\n\n\n   printf(\"y = \");\n\n   for(i = 4; i &lt;= limit; i = i + 8){\n   lim = i;\n\n    for (j = i; j &lt;= lim + 4; j++){ \n\n      if (j &gt; 100)\n      break;\n\n      printf(\"%d \",j);\n    }\n  } \n\n}\n</code></pre>\n\n<p>Let me explain:</p>\n\n<p>Here I've written 2 for loops because according to the sequence, the 4 consecutive numbers have a difference of 8 between them.\nAs this sequence has a sub sequence, it is necessary to use 2 for loops.The elements to be removed also follows a similar pattern so, I printed them too.  </p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 0, "last_activity_date": 1501026553, "last_edit_date": 1501026553, "creation_date": 1501024130, "answer_id": 45314869, "question_id": 45308333, "link": "https://stackoverflow.com/questions/45308333/prints-numbers-in-a-certain-sequence-or-series/45314869#45314869", "title": "Prints numbers in a certain sequence or series", "body": "<p>The problem specification is self-inconsistent.  It specifies:</p>\n\n<pre><code>x = 0 1 2 3 8 9 10 11 ... 93 94 95 96\ny = 4 5 6 7 12 13 14 15 ... 97 98 99 100\n</code></pre>\n\n<p>There are at least two problems:</p>\n\n<ol>\n<li>Groups of 4 should start on even numbers, so the last sets are wrongly grouped.</li>\n<li>The <code>x</code> line should end with <code>96 97 98 99</code> and the <code>y</code> line should end with <code>92 93 94 95</code> (and maybe <code>100</code> too, if that should be included in the output).</li>\n</ol>\n\n<p>The code in the question is flawed because of the way it uses <code>k = i; k = i % divisor;</code> and because there isn't the necessary nested loop structure.  I suppose that strictly you could write the code without nested loops, but using nested loops is simpler.</p>\n\n<p>The two lines are a bit inconveniently long for display, so it would be better, perhaps, to wrap them at a suitable length.  The code below deals with these various issues.  It exploits the fact that <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html\" rel=\"nofollow noreferrer\"><code>printf()</code></a> returns the number of characters printed.  It ignores the possibility that <code>printf()</code> returns an error (a negative return value).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n/*\n** tag      = string at start of line\n** start    = starting value\n** finish   = last value to be printed\n** major    = major increment\n** minor    = number of elements in each sub-sequence\n** num_wid  = width to use for numbers (1 for minimum width)\n** line_wid = wrap lines after this width\n*/\nstatic void print_sequence(const char *tag, int start, int finish,\n                    int major, int minor, int num_wid, int line_wid)\n{\n    int count = printf(\"%s =\", tag);\n    for (int i = start; i &lt;= finish; i += major)\n    {\n        for (int j = 0; j &lt; minor &amp;&amp; i + j &lt;= finish; j++)\n        {\n            if (count &gt; line_wid)\n            {\n                putchar('\\n');\n                count = printf(\"%*s  \", (int)strlen(tag), \"\");\n            }\n            count += printf(\" %*d\", num_wid, i + j);\n        }\n    }\n    putchar('\\n');\n}\n\nint main(void)\n{\n    print_sequence(\"x\", 0, 100, 8, 4, 2, 70);\n    print_sequence(\"y\", 4, 100, 8, 4, 2, 70);\n\n    print_sequence(\"x\", 0, 100, 8, 4, 2, 160);\n    print_sequence(\"y\", 4, 100, 8, 4, 2, 160);\n\n    print_sequence(\"x\", 0, 100, 8, 4, 3, 70);\n    print_sequence(\"y\", 4, 100, 8, 4, 3, 70);\n\n    return 0;\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>x =  0  1  2  3  8  9 10 11 16 17 18 19 24 25 26 27 32 33 34 35 40 41 42\n    43 48 49 50 51 56 57 58 59 64 65 66 67 72 73 74 75 80 81 82 83 88 89\n    90 91 96 97 98 99\ny =  4  5  6  7 12 13 14 15 20 21 22 23 28 29 30 31 36 37 38 39 44 45 46\n    47 52 53 54 55 60 61 62 63 68 69 70 71 76 77 78 79 84 85 86 87 92 93\n    94 95 100\nx =  0  1  2  3  8  9 10 11 16 17 18 19 24 25 26 27 32 33 34 35 40 41 42 43 48 49 50 51 56 57 58 59 64 65 66 67 72 73 74 75 80 81 82 83 88 89 90 91 96 97 98 99\ny =  4  5  6  7 12 13 14 15 20 21 22 23 28 29 30 31 36 37 38 39 44 45 46 47 52 53 54 55 60 61 62 63 68 69 70 71 76 77 78 79 84 85 86 87 92 93 94 95 100\nx =   0   1   2   3   8   9  10  11  16  17  18  19  24  25  26  27  32\n     33  34  35  40  41  42  43  48  49  50  51  56  57  58  59  64  65\n     66  67  72  73  74  75  80  81  82  83  88  89  90  91  96  97  98\n     99\ny =   4   5   6   7  12  13  14  15  20  21  22  23  28  29  30  31  36\n     37  38  39  44  45  46  47  52  53  54  55  60  61  62  63  68  69\n     70  71  76  77  78  79  84  85  86  87  92  93  94  95 100\n</code></pre>\n\n<p>You probably shouldn't submit this code as the answer to the homework assignment.  It is probably too configurable for it to be safe.</p>\n\n<h3>Single loop code</h3>\n\n<p>This implementation of the <code>print_sequence()</code> function presents the same external interface, but the implementation is a bit different.</p>\n\n<pre><code>static void print_sequence(const char *tag, int start, int finish,\n                    int major, int minor, int num_wid, int line_wid)\n{\n    assert(major &gt; 0 &amp;&amp; minor &gt; 0 &amp;&amp; major &gt; minor);\n    int count = printf(\"%s =\", tag);\n    int p_limit = start + minor;        // print limit\n    int c_limit = start + major - 1;    // count limit\n    for (int i = start; i &lt;= finish; i++)\n    {\n        if (i &lt; p_limit)\n        {\n            if (count &gt; line_wid)\n            {\n                putchar('\\n');\n                count = printf(\"%*s  \", (int)strlen(tag), \"\");\n            }\n            count += printf(\" %*d\", num_wid, i);\n        }\n        else if (i == c_limit)\n        {\n            p_limit += major;\n            c_limit += major;\n        }\n    }\n    putchar('\\n');\n}\n</code></pre>\n\n<p>This produces the same output as before.  It is marginally less efficient than the original, but you'd be hard pressed to measure the cost of incrementing <code>i</code> a few extra times around the loop.</p>\n\n<p>Also note that both these solutions can print up to <code>num_wid + 1</code> characters beyond the specified line length.  You can fix that by adjusting <code>line_wid</code> by <code>num_wid + 1</code>.  The code could also check that <code>major</code> is at least as big as <code>minor</code>, and that both are strictly positive; also that <code>line_wid</code> is big enough for the tag, the <code>=</code> and at least one number.  There's an element of <a href=\"https://en.wikipedia.org/wiki/Garbage_in,_garbage_out\" rel=\"nofollow noreferrer\">GIGO</a> \u2014 if you provide bogus parameters, the output will be correspondingly bogus.</p>\n"}], "owner": {"reputation": 312, "user_id": 7712908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8ff5e444c5ef577c7c14adf34dd362?s=128&d=identicon&r=PG&f=1", "display_name": "blackbeard", "link": "https://stackoverflow.com/users/7712908/blackbeard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 45308606, "answer_count": 3, "score": 0, "last_activity_date": 1517559209, "creation_date": 1500998415, "last_edit_date": 1517559209, "question_id": 45308333, "link": "https://stackoverflow.com/questions/45308333/prints-numbers-in-a-certain-sequence-or-series", "title": "Prints numbers in a certain sequence or series", "body": "<p>I am trying to write a code in C that will print at a given range (0 - 100). </p>\n\n<p>x would only print from 0 to 3, and then 8 to 11, and then 16 to 19 and so on.\ny would only print the rest, for example from 4 to 7, and then 12 to 15, and then 20 to 23 and so on. </p>\n\n<p>The output should look like this:</p>\n\n<pre><code>x = 0 1 2 3 8 9 10 11 ... 92 93 94 95   \ny = 4 5 6 7 12 13 14 15 ... 96 97 98 99\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "strcat"], "comments": [{"owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "edited": false, "score": 0, "creation_date": 1500997627, "post_id": 45307971, "comment_id": 77577997, "body": "@WeatherVane Compiler warnings enabled. The <code>malloc(strlen(new)+1)</code> should allow that extra byte?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500997689, "post_id": 45307971, "comment_id": 77578050, "body": "So what did the compiler say about <code>strlen(new)</code>? And about missing library header?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500997780, "post_id": 45307971, "comment_id": 77578141, "body": "@Olaf not a good idea IMHO to remove the code that could clarify what this huge accumulation of weirdness should actually achieve ..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500997847, "post_id": 45307971, "comment_id": 77578186, "body": "There are various erros, flaws and missconceptions in the code. All these will be covered by a beginner&#39;s C book. Please understand we are not a debugging/tutoring service. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Youtube videos or obscure blogs can&#39;t substitute a good textbook."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1500997885, "post_id": 45307971, "comment_id": 77578211, "body": "<code>if(str[i]!=&quot; &quot;)</code> will always be <code>true</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500997887, "post_id": 45307971, "comment_id": 77578214, "body": "@FelixPalmen: It does not really help to understand what OP tries to achieve. OP should read a textbook and forget about Java when writing C code."}, {"owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500997892, "post_id": 45307971, "comment_id": 77578218, "body": "@WeatherVane No warning regarding it.  Only warning about implicit declaration of <code>malloc</code> for that line.  Note that I changed it to <code>strlen(*new)</code> to remove another warning on incompatible types."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1500997973, "post_id": 45307971, "comment_id": 77578292, "body": "fix like <a href=\"http://ideone.com/jSCfBj\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500997976, "post_id": 45307971, "comment_id": 77578295, "body": "Ah, so you <i>did</i> get warnings! Don&#39;t be surpised about crashing code if you ignore them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500997980, "post_id": 45307971, "comment_id": 77578301, "body": "@Olaf If you&#39;re smart, eager, generally programming experienced <b>and</b> masochistic enough, you <b>can</b> learn C from example code, man-pages, the standard and other online resources (BTDT) -- but I&#39;d indeed recommend a good book as well. As for the code, I assume the java version at least did what was intended, so it might be helpful to understand <b>anything</b> here."}, {"owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "edited": false, "score": 0, "creation_date": 1500998065, "post_id": 45307971, "comment_id": 77578362, "body": "@FelixPalmen The Java worked properly.  Hence why I provided it.  My Java is much more sensible than my C..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1500998194, "post_id": 45307971, "comment_id": 77578460, "body": "@BrinBrody for starters, <code>char *new[strlen(str)];</code> defines an array of <b>pointers</b> to char, with the amount of pointers equal to the amount of characters in <code>str</code> (without the terminating <code>\\0</code>) -- not what you want"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1500998238, "post_id": 45307971, "comment_id": 77578492, "body": "@BrinBrody as the code continues to have such strange things, please don&#39;t take it as an offense, but, me too, I recommend you first learn some C basics from a book"}, {"owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "edited": false, "score": 0, "creation_date": 1500998251, "post_id": 45307971, "comment_id": 77578503, "body": "@FelixPalmen Fixed it, no cigar."}, {"owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "edited": false, "score": 0, "creation_date": 1500998289, "post_id": 45307971, "comment_id": 77578543, "body": "@FelixPalmen Thank you for the suggestion.  I&#39;ll look into it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1500998973, "post_id": 45307971, "comment_id": 77579013, "body": "@FelixPalmen: I agree about learning by the standard. All other resources are to some degree incomplete, flawed or plain wrong (even the standard has some corrigenda). The problems greatly increase for blogs and youtube videos. I&#39;d say by the latter you cannot really learn the language. (Man-pages are typically directly from the standard, but you have to know about the function to find them)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1500999798, "post_id": 45307971, "comment_id": 77579569, "body": "Declaring array <code>new</code> as an automatic (block-scope) variable does not cause its contents to be initialized.  Calling <code>strlen(new)</code> before assigning anything to <code>new</code> therefore produces undefined behavior.  Even after assigning contents, calling <code>strlen(new)</code> produces undefined behavior if there is not at least one null character (<code>&#39;\\0&#39;</code>) among those contents.  Possibly you meant <code>sizeof(new)</code> instead."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501000068, "post_id": 45307971, "comment_id": 77579742, "body": "Moreover, you should not return <code>new</code> from your function, nor any other pointer to automatic storage.  The lifetime of the pointed-to storage ends when the variable goes out of scope, and attempting to dereference the pointer afterward produces undefined behavior."}, {"owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501000072, "post_id": 45307971, "comment_id": 77579747, "body": "@JohnBollinger See solution.  Thanks for the help."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1501006247, "post_id": 45307971, "comment_id": 77583613, "body": "@JohnBollinger <code>new</code> of type <code>char*[]</code>. So calling <code>strlen</code> is wrong anyway."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1500998649, "creation_date": 1500998649, "answer_id": 45308421, "question_id": 45307971, "link": "https://stackoverflow.com/questions/45307971/segmentation-fault-on-strcat/45308421#45308421", "title": "Segmentation fault on strcat", "body": "<p>So, not sure whether this helps you, but a C code doing the same as your Java code would look like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstatic char *removeBlanks(const char *str)\n{\n    char *result = malloc(strlen(str) + 1);\n    if (!result) exit(1);\n    const char *r = str;\n    char *w = result;\n    while (*r)\n    {\n        // copy each character except when it's a blank\n        if (*r != ' ') *w++ = *r;\n        ++r;\n    }\n    *w = 0; // terminate the result to be a string (0 byte)\n    return result;\n}\n\nint main(void)\n{\n    const char *str = \"This has spaces in it.\";\n    char *new = removeBlanks(str);\n    puts(new);\n    free(new);\n    return 0;\n}\n</code></pre>\n\n<p>I would'nt recommend to name a variable <code>new</code> ... if you ever want to use C++, this is a reserved keyword.</p>\n"}, {"tags": [], "owner": {"reputation": 1017, "user_id": 2599537, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf6e2a137be7b8bd13d1f8efec703554?s=128&d=identicon&r=PG", "display_name": "devil0150", "link": "https://stackoverflow.com/users/2599537/devil0150"}, "is_accepted": false, "score": 1, "last_activity_date": 1500998795, "creation_date": 1500998795, "answer_id": 45308465, "question_id": 45307971, "link": "https://stackoverflow.com/questions/45307971/segmentation-fault-on-strcat/45308465#45308465", "title": "Segmentation fault on strcat", "body": "<p>I tried compiling with warnings enabled, here are some you should fix.</p>\n\n<ul>\n<li>You need to include <code>stdlib.h</code></li>\n<li><code>char *new[strlen(str)]</code> creates an array of <code>char*</code> not of <code>char</code>, so not really a string. Change it to <code>char new[strlen(str)]</code>.</li>\n<li>To check if <code>str[i]</code> is a space, you compare it to the space character <code>' '</code>, not a string whose only character is a space <code>\" \"</code>. So change it to <code>str[i]!=' '</code></li>\n<li><code>strcat</code> takes a string as the second argument and not a character, like you're giving it with <code>str[i]</code>.</li>\n</ul>\n\n<p>Also, what are you using <code>buffer</code> for?</p>\n\n<p>Another mistake, is that you probably assumed that uninitialized arrays take zero values. The <code>new</code> array has random values, not zero/null. <code>strcat</code> concatenates two strings, so it would try to put the string in its second argument at the end of the first argument <code>new</code>. The \"end\" of a string is the null character. The program searches <code>new</code> for the first null character it can find, and when it finds this null, it starts writing the second argument from there.</p>\n\n<p>But because <code>new</code> is uninitialized, the program might not find a null character in <code>new</code>, and it would keep searching further than the length of <code>new</code>, <code>strlen(str)</code>, continuing the search in unallocated memory. That is probably what causes the segmentation fault.</p>\n"}, {"tags": [], "owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "is_accepted": true, "score": 2, "last_activity_date": 1500999184, "last_edit_date": 1500999184, "creation_date": 1500998835, "answer_id": 45308477, "question_id": 45307971, "link": "https://stackoverflow.com/questions/45307971/segmentation-fault-on-strcat/45308477#45308477", "title": "Segmentation fault on strcat", "body": "<p>You can't use <code>strcat</code> like you did, it is intended to catenate a C-string at the end of another given one. <code>str[i]</code> is a char not a C-string (remember that a C-string is a contiguous sequence of chars the last being the NUL byte).</p>\n\n<p>You also cannot compare strings with standard comparison operators, if you really need to compare strings then there is a <code>strcmp</code> function for it. But you can compare chars with standard operators as char is just a kind of integer type.</p>\n\n<p>This should do the trick:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nchar * deblank(const char str[]) {\n    char *buffer = malloc(strlen(str)+1); // allocate space to contains as much char as in str, included ending NUL byte\n    for (int i=0, j=0; i&lt;strlen(str)+1; i++) { // for every char in str, included the ending NUL byte\n      if (str[i]!=' ') { // if not blank\n        buffer[j++] = str[i]; // copy\n      }\n    }\n    return buffer; // return a newly constructed C-string\n}\n\nint main(void){\n    char str[] = \"This has spaces in it.\";\n    char *new = deblank(str);\n    puts(new);\n    free(new); // release the allocated memory\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "edited": false, "score": 0, "creation_date": 1500999141, "post_id": 45308496, "comment_id": 77579138, "body": "Thanks?  This is more a breakdown of what&#39;s wrong, and less of a solution?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "edited": false, "score": 2, "creation_date": 1500999174, "post_id": 45308496, "comment_id": 77579166, "body": "@BrinBrody Correct. You asked for &quot;<i>Any insights into this error</i>&quot;, not a solution."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1500998887, "creation_date": 1500998887, "answer_id": 45308496, "question_id": 45307971, "link": "https://stackoverflow.com/questions/45307971/segmentation-fault-on-strcat/45308496#45308496", "title": "Segmentation fault on strcat", "body": "<p>OK, let's do this.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * deblank(const char str[]){\n    char *new[strlen(str)];\n</code></pre>\n\n<p>^ This line creates an array of pointers, not a string.</p>\n\n<pre><code>    char *buffer = malloc(strlen(new)+1);\n</code></pre>\n\n<p><code>malloc</code> is undeclared. Missing <code>#include &lt;stdlib.h&gt;</code>. Also, you should check for allocation failure here.</p>\n\n<p><code>strlen(new)</code> is a type error. <code>strlen</code> takes a <code>char *</code> but <code>new</code> is (or rather evaluates to) a <code>char **</code>.</p>\n\n<pre><code>    for (int i=0; i&lt;strlen(*str); i++){\n</code></pre>\n\n<p><code>strlen(*str)</code> is a type error. <code>strlen</code> takes a <code>char *</code> but <code>*str</code> is a <code>char</code> (i.e. a single character).</p>\n\n<p><code>i&lt;strlen(...)</code> is questionable. <code>strlen</code> returns <code>size_t</code> (an unsigned type) whereas <code>i</code> is an <code>int</code> (signed, and possibly too small).</p>\n\n<p>Calling <code>strlen</code> in a loop is inefficient because it has to walk the whole string to find the end.</p>\n\n<pre><code>        if(buffer!=NULL){\n</code></pre>\n\n<p>This is a weird place to check for allocation failure. Also, you don't use <code>buffer</code> anywhere, so why create/check it at all?</p>\n\n<pre><code>            if(str[i]!=\" \"){\n</code></pre>\n\n<p><code>str[i]!=\" \"</code> is a type error. <code>str[i]</code> is a <code>char</code> whereas <code>\" \"</code> is (or rather evaluates to) a <code>char *</code>.</p>\n\n<pre><code>                strcat(new,str[i]); //Segmentation fault\n</code></pre>\n\n<p>This is a type error. <code>strcat</code> takes two strings (<code>char *</code>), but <code>new</code> is a <code>char **</code> and <code>str[i]</code> is a <code>char</code>. Also, the first argument to <code>strcat</code> must be a valid string but <code>new</code> is uninitialized.</p>\n\n<pre><code>            }\n        }\n    }\n    free(buffer);\n    return new;\n</code></pre>\n\n<p><code>new</code> is a local array in this function. You're returning the address of its first element, which makes no sense: As soon as the function returns, all of its local variables are gone. You're returning an invalid pointer here.</p>\n\n<p>Also, this is a type error: <code>deblank</code> is declared to return a <code>char *</code> but actually returns a <code>char **</code>.</p>\n\n<pre><code>}\n\nint main(void){\n    char str[] = \"This has spaces in it.\";\n    char new[strlen(str)];\n    *new = deblank(str);\n</code></pre>\n\n<p>This is a type error: <code>*new</code> is a <code>char</code> but <code>deblank</code> returns a <code>char *</code>.</p>\n\n<pre><code>    puts(new);\n</code></pre>\n\n<p><code>puts</code> takes a string, but <code>new</code> is essentially garbage at this point.</p>\n\n<pre><code>}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1501003711, "post_id": 45309526, "comment_id": 77582066, "body": "&quot;<i>In this case it is desirable at first to count the number of blanks in the source array that to allocated the destination array with the appropriate size.</i>&quot; not always, this is a runtime vs memory consumption tradeoff. +1 for the most exhaustive answer possible ;)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1501002004, "creation_date": 1501002004, "answer_id": 45309526, "question_id": 45307971, "link": "https://stackoverflow.com/questions/45307971/segmentation-fault-on-strcat/45309526#45309526", "title": "Segmentation fault on strcat", "body": "<p>There can be three approaches to the task.</p>\n\n<p>The first one is to update the string \"in place\". In this case the function can look something like the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;iso646.h&gt;\n\nchar * deblank( char s[] )\n{\n    size_t i = 0;\n\n    while ( s[i] and not isblank( s[i] ) ) ++i;\n\n    if ( s[i] )\n    {\n        size_t j = i++;\n        do\n        {\n            if ( not isblank( s[i] ) ) s[j++] = s[i];\n        } while( s[i++] );\n    }\n\n    return s;\n}\n\nint main(void) \n{\n    char s[] = \"This has spaces in it.\";\n\n    puts( s );\n\n    puts( deblank( s ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>This has spaces in it.\nThishasspacesinit.\n</code></pre>\n\n<p>Another approach is to copy the source string in a destination character array skipping blanks.</p>\n\n<p>In this case the function will have two parameters: the source array and the destination array. And the size of the destination array must be equal to the size of the source array because in general the source array can not have blanks.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;iso646.h&gt;\n\nchar * deblank( char *s1, const char *s2 )\n{\n    char *t = s1;\n\n    do \n    {\n        if ( not isblank( *s2 ) ) *t++ = *s2;\n    } while ( *s2++ );\n\n    return s1;\n}\n\nint main(void) \n{\n    char s1[] = \"This has spaces in it.\";\n    char s2[sizeof( s1 )];\n\n    puts( s1 );\n\n    puts( deblank( s2, s1 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output will be the same as shown above.</p>\n\n<p>Pay attention to this declaration</p>\n\n<pre><code>char s2[sizeof( s1 )];\n</code></pre>\n\n<p>The size of the destination string in general should be not less than the size of the source string.</p>\n\n<p>And at last the third approach is when inside the function there is created dynamically an array and pointer to the first element of the array is returned from the function.</p>\n\n<p>In this case it is desirable at first to count the number of blanks in the source array that to allocated the destination array with the appropriate size.</p>\n\n<p>To use the functions <code>malloc</code> and <code>free</code> you need to include the following header</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>The function can be implemented as it is shown in the demonstrative program.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iso646.h&gt;\n\n\nchar * deblank( const char *s )\n{\n    size_t n = 1;   /* one byte reserved for the terminating zero character */\n\n    for ( const char *t = s; *t; ++t )\n    {\n        if ( not isblank( *t ) ) ++n;\n    }\n\n    char *s2 = malloc( n );\n\n    if ( s2 != NULL )\n    {\n        char *t = s2;       \n        do \n        {\n            if ( not isblank( *s ) ) *t++ = *s;\n        } while ( *s++ );\n    }\n\n    return s2;\n}\n\nint main(void) \n{\n    char s1[] = \"This has spaces in it.\";\n    char *s2 = deblank( s1 );\n\n    puts( s1 );\n    if ( s2 ) puts( s2 );\n\n    free( s2 );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is the same as for the two previous programs.</p>\n\n<p>As for the standard C function <code>strcat</code> then it cats two strings.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\n    char s1[12] = \"Hello \";\n    char *s2 = \"World\";\n\n    puts( strcat( s1, s2 ) );\n\n    return 0;\n}\n</code></pre>\n\n<p>The destination array (in this case <code>s1</code>) must have enough space to be able to append a string.</p>\n\n<p>There is another C function <code>strncat</code> in the C Standard that allows to append a single character to a string. For example the above program can be rewritten the following way</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void) \n{\n    char s1[12] = \"Hello \";\n    char *s2 = \"World\";\n\n    for ( size_t i = 0; s2[i] != '\\0'; i++ )\n    {\n        strncat( s1, &amp;s2[i], 1 );\n    }\n\n    puts( s1 );\n\n    return 0;\n}\n</code></pre>\n\n<p>But it is not efficient to use such an approach for your original task because each time when the function is called it has to find the terminating zero in the source string that to append a character.</p>\n"}, {"comments": [{"owner": {"reputation": 919, "user_id": 2565246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad97245affee1d5f38a619b853d8f45?s=128&d=identicon&r=PG", "display_name": "n3wb", "link": "https://stackoverflow.com/users/2565246/n3wb"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501013194, "post_id": 45310907, "comment_id": 77587627, "body": "@chux ty, fixed it"}], "tags": [], "owner": {"reputation": 919, "user_id": 2565246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dad97245affee1d5f38a619b853d8f45?s=128&d=identicon&r=PG", "display_name": "n3wb", "link": "https://stackoverflow.com/users/2565246/n3wb"}, "is_accepted": false, "score": 1, "last_activity_date": 1501013171, "last_edit_date": 1501013171, "creation_date": 1501006803, "answer_id": 45310907, "question_id": 45307971, "link": "https://stackoverflow.com/questions/45307971/segmentation-fault-on-strcat/45310907#45310907", "title": "Segmentation fault on strcat", "body": "<p>you can try recursively</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid deblank(const char* str, char *dest) {\n    if (!*str) {*dest = '\\0';return;}\n\n    // when we encounter a space we skip\n    if (*str == ' ') {\n      deblank(str+1, dest);\n      return;\n    }\n\n    *dest = *str;\n    deblank(str+1, dest+1);\n}\n\nint main(void) {\n    const char *str = \"This has spaces in it.\";\n    char *output    = malloc(strlen(str)+1);\n    deblank(str, output);\n    puts(output);\n    free(output);\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5609836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wq1BGP4K34w/AAAAAAAAAAI/AAAAAAAAA3I/AL3WC-kdyto/photo.jpg?sz=128", "display_name": "Brin Brody", "link": "https://stackoverflow.com/users/5609836/brin-brody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1322, "favorite_count": 0, "accepted_answer_id": 45308477, "answer_count": 6, "score": 0, "last_activity_date": 1501013171, "creation_date": 1500997336, "last_edit_date": 1500998211, "question_id": 45307971, "link": "https://stackoverflow.com/questions/45307971/segmentation-fault-on-strcat", "title": "Segmentation fault on strcat", "body": "<p>I have recently begun working on learning the C language and have repeatedly run into an error in which calling the strcat function from the <code>&lt;string.h&gt;</code> module results in a segmentation fault.  I've searched for the answers online, including on <a href=\"https://stackoverflow.com/questions/8269199/segmentation-fault-using-strcat\">this stackoverflow post</a>, without success.  I thought this community might have a more personal insight into the problem, as the general solutions don't seem to be working.  Might be user error, might be a personal issue with the code.  Take a look.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar * deblank(const char str[]){\n    char *new[strlen(str)];\n    char *buffer = malloc(strlen(new)+1);\n    for (int i=0; i&lt;strlen(*str); i++){\n        if(buffer!=NULL){\n            if(str[i]!=\" \"){\n                strcat(new,str[i]); //Segmentation fault\n            }\n        }\n    }\n    free(buffer);\n    return new;\n}\n\nint main(void){\n    char str[] = \"This has spaces in it.\";\n    char new[strlen(str)];\n    *new = deblank(str);\n    puts(new);\n}\n</code></pre>\n\n<p>I've placed a comment on the line I've traced the segmentation fault back to.  The following is some Java to make some sense out of this C code.</p>\n\n<pre><code>public class deblank {\n    public static void main(String[]args){\n        String str = \"This has space in it.\";\n        System.out.println(removeBlanks(str));\n    }\n\n    public static String removeBlanks(String str){\n        String updated = \"\";\n        for(int i=0; i&lt;str.length(); i++){\n            if(str.charAt(i)!=' '){\n                updated+=str.charAt(i);\n            }\n        }\n        return updated;\n    }\n}\n</code></pre>\n\n<p>Any insights into this error will be much appreciated.  Please point out typos as well... I've been known to make them.  Thanks.</p>\n"}, {"tags": ["c", "endianness"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1500996465, "post_id": 45307516, "comment_id": 77577086, "body": "Because <code>char</code> values are promoted to <code>int</code> before arithmetic is done. Note: should be using <code>unsigned char *</code> and <code>uint32_t</code>."}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1500996803, "post_id": 45307516, "comment_id": 77577359, "body": "Your code is independent from endianess, it will print <code>66051</code> on little and big endian machines. <code>value</code> is stored in the endianess of the machine, not always in little endian."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1500997134, "post_id": 45307516, "comment_id": 77577614, "body": "The <code>&amp; 0xFF</code> is only necessary for signed values, to strip off the extra bits when a negative <code>char</code> value is sign-extended to <code>int</code>. One reason to use <code>unsigned</code>, as well as dubious shifting into the sign bit."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1500997842, "post_id": 45307516, "comment_id": 77578183, "body": "On x86 you can use ntohl."}, {"owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1501010107, "post_id": 45307516, "comment_id": 77585867, "body": "@WeatherVane: Using signed char and signed integers is indeed not beautiful, but does not change anything of the functionality of this swapping procedure."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "edited": false, "score": 0, "creation_date": 1501010334, "post_id": 45307516, "comment_id": 77585974, "body": "@TomKuschel as I mentioned, shifting bits into the sign bit of a signed <code>int</code> is bad. Specifically, where the bit to be shifted into the sign bit, is different from the sign bit."}], "answers": [{"tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 2, "last_activity_date": 1500996742, "creation_date": 1500996742, "answer_id": 45307736, "question_id": 45307516, "link": "https://stackoverflow.com/questions/45307516/c-c-code-to-convert-big-endian-to-little-endian/45307736#45307736", "title": "C/C++ code to convert big endian to little endian", "body": "<p>This code is constructing the value, one byte at a time.</p>\n\n<p>First it captures the lowest byte</p>\n\n<pre><code> (*ptr) &amp; 0xFF\n</code></pre>\n\n<p>And then shifts it to the highest byte</p>\n\n<pre><code> ((*ptr) &amp; 0xFF) &lt;&lt; 24\n</code></pre>\n\n<p>And then assigns it to the previously 0 initialized value.</p>\n\n<pre><code> value =((*ptr) &amp; 0xFF) &lt;&lt; 24\n</code></pre>\n\n<p>Now the \"magic\" comes into play.  Since the <code>ptr</code> value was declared as a <code>char*</code> adding one to it advances the pointer by one character.</p>\n\n<pre><code> (ptr + 1) /* the next character address */\n *(ptr + 1) /* the next character */\n</code></pre>\n\n<p>After you see that they are using pointer math to update the relative starting address, the rest of the operations are the same as the ones already described, except that to preserve the partially shifted values, they <code>or</code> the values into the existing <code>value</code> variable</p>\n\n<pre><code> value |= ((*(ptr + 1)) &amp; 0xFF) &lt;&lt; 16\n</code></pre>\n\n<p>Note that pointer math is why you can do things like</p>\n\n<pre><code> char* ptr = ... some value ...\n\n while (*ptr != 0) {\n     ... do something ...\n     ptr++;\n }\n</code></pre>\n\n<p>but it comes at a price of possibly really messing up your pointer addresses, greatly increasing your risk of a SEGFAULT violation.  Some languages saw this as such a problem, that they removed the ability to do pointer math.  An almost-pointer that you cannot do pointer math on is typically called a reference.</p>\n"}, {"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": false, "score": 1, "last_activity_date": 1501017830, "last_edit_date": 1501017830, "creation_date": 1500997987, "answer_id": 45308184, "question_id": 45307516, "link": "https://stackoverflow.com/questions/45307516/c-c-code-to-convert-big-endian-to-little-endian/45308184#45308184", "title": "C/C++ code to convert big endian to little endian", "body": "<p>A code you might use is based on the idea that numbers on the network shall be sent in BIG ENDIAN mode.</p>\n\n<p>The functions <code>htonl()</code> and <code>htons()</code> convert 32 bit integer and 16 bit integer in BIG ENDIAN where your system uses LITTLE ENDIAN and they leave the numbers in BIG ENDIAN otherwise.</p>\n\n<p>Here the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main(void)\n{\n    uint32_t x,y;\n    uint16_t s,z;\n\n    x=0xFF567890;\n\n    y=htonl(x);\n\n    printf(\"LE=%08X BE=%08X\\n\",x,y);\n\n    s=0x7891;\n\n    z=htons(s);\n\n    printf(\"LE=%04X BE=%04X\\n\",s,z);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>This code is written to convert from LE to BE on a LE machine.</p>\n\n<p>You might use the opposite functions <code>ntohl()</code> and <code>ntohs()</code> to convert from BE to LE, these functions convert the integers from BE to LE on the LE machines and don't convert on BE machines.</p>\n"}, {"comments": [{"owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "edited": false, "score": 0, "creation_date": 1501008349, "post_id": 45309867, "comment_id": 77584853, "body": "As I know, default endianness of ARM is little endian. Most are used in little endian, but you may switch to big endian (never saw that in any project). The ARM and also Intel since x486 provide native support swapping instructions. See here: <a href=\"http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0210c/Cihceeec.html\" rel=\"nofollow noreferrer\">infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0210&zwnj;&#8203;c/&hellip;</a>"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1501058226, "post_id": 45309867, "comment_id": 77605081, "body": "This answer is only correct <i>for code running on a little-endian host</i>.  For code running on a big-endian host (HP-UX springs to mind), then <code>htonl()</code> and friends are all no-ops."}, {"owner": {"reputation": 416, "user_id": 5591561, "user_type": "registered", "accept_rate": 44, "profile_image": "https://lh4.googleusercontent.com/-g8CzQmaKmUs/AAAAAAAAAAI/AAAAAAAABO4/By500JiQu4g/photo.jpg?sz=128", "display_name": "neoexpert", "link": "https://stackoverflow.com/users/5591561/neoexpert"}, "edited": false, "score": 0, "creation_date": 1552140679, "post_id": 45309867, "comment_id": 96902711, "body": "Why is there no integer equalent?"}], "tags": [], "owner": {"reputation": 1, "user_id": 1625676, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3648fca9670adcc70c21d23feb7e5cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Milad", "link": "https://stackoverflow.com/users/1625676/milad"}, "is_accepted": false, "score": 1, "last_activity_date": 1501003174, "creation_date": 1501003174, "answer_id": 45309867, "question_id": 45307516, "link": "https://stackoverflow.com/questions/45307516/c-c-code-to-convert-big-endian-to-little-endian/45309867#45309867", "title": "C/C++ code to convert big endian to little endian", "body": "<p>If you want to convert little endian represantion to big endian you can use htonl, htons, ntohl, ntohs. these functions convert values between host and network byte order. Big endian also used in arm based platform. see here: <a href=\"https://linux.die.net/man/3/endian\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/endian</a></p>\n"}, {"tags": [], "owner": {"reputation": 625, "user_id": 3140754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qceIh.jpg?s=128&g=1", "display_name": "Tom Kuschel", "link": "https://stackoverflow.com/users/3140754/tom-kuschel"}, "is_accepted": false, "score": 0, "last_activity_date": 1501009034, "creation_date": 1501009034, "answer_id": 45311505, "question_id": 45307516, "link": "https://stackoverflow.com/questions/45307516/c-c-code-to-convert-big-endian-to-little-endian/45311505#45311505", "title": "C/C++ code to convert big endian to little endian", "body": "<blockquote>\n  <p>I'm confused why ((*ptr) &amp; 0xFF) &lt;&lt; X wouldn't just evaluate to 0 for any X >= 8. </p>\n</blockquote>\n\n<p>I think you misinterpret the shift functionality.</p>\n\n<pre><code>value = ((*ptr) &amp; 0xFF) &lt;&lt; 24;\n</code></pre>\n\n<p>means a masking of the value at ptr with 0xff (the byte) and afterwards a shift by 24 BITS (not bytes). That is a shift by 24/8 bytes (3 bytes) to the highest byte.</p>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 3867884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9f7f03940f62d434c8f6a3a937deba5?s=128&d=identicon&r=PG&f=1", "display_name": "Steen", "link": "https://stackoverflow.com/users/3867884/steen"}, "is_accepted": false, "score": 0, "last_activity_date": 1501019050, "creation_date": 1501019050, "answer_id": 45314018, "question_id": 45307516, "link": "https://stackoverflow.com/questions/45307516/c-c-code-to-convert-big-endian-to-little-endian/45314018#45314018", "title": "C/C++ code to convert big endian to little endian", "body": "<p>One of the keypoints to understanding the evaluation of  <code>((*ptr) &amp; 0xFF) &lt;&lt; X</code></p>\n\n<p>Is <a href=\"https://stackoverflow.com/questions/11203015/integer-promotion-with-the-operator\">Integer Promotion</a>. The Value <code>(*ptr) &amp; 0xff</code> is promoted to an <code>Integer</code> before being shifted.</p>\n"}, {"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": false, "score": 0, "last_activity_date": 1501071109, "last_edit_date": 1501071109, "creation_date": 1501064322, "answer_id": 45324088, "question_id": 45307516, "link": "https://stackoverflow.com/questions/45307516/c-c-code-to-convert-big-endian-to-little-endian/45324088#45324088", "title": "C/C++ code to convert big endian to little endian", "body": "<p>I've written the code below. This code contains two functions <code>swapmem()</code> and <code>swap64()</code>. </p>\n\n<ul>\n<li><p><code>swapmem()</code> swaps the bytes of a memory area of an arbitrary dimension.</p></li>\n<li><p><code>swap64()</code> swaps the bytes of a 64 bits integer.</p></li>\n</ul>\n\n<p>At the end of this reply I indicate you an idea to solve your problem with the buffer of byte.</p>\n\n<p>Here the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;malloc.h&gt;\n\nvoid * swapmem(void *x, size_t len, int retnew);\nuint64_t swap64(uint64_t k);\n\n/**\n    brief swapmem\n\n         This function swaps the byte into a memory buffer.\n\n    param x\n         pointer to the buffer to be swapped\n\n    param len\n         lenght to the buffer to be swapped\n\n    param retnew\n         If this parameter is 1 the buffer is swapped in a new\n         buffer. The new buffer shall be deallocated by using\n         free() when it's no longer useful.\n\n         If this parameter is 0 the buffer is swapped in its\n         memory area.\n\n    return\n        The pointer to the memory area where the bytes has been\n        swapped or NULL if an error occurs.\n*/\nvoid * swapmem(void *x, size_t len, int retnew)\n{\n    char *b = NULL, app;\n    size_t i;\n\n    if (x != NULL) {\n        if (retnew) {\n            b = malloc(len);\n            if (b!=NULL) {\n                for(i=0;i&lt;len;i++) {\n                    b[i]=*((char *)x+len-1-i);\n                }\n            }\n        } else {\n            b=(char *)x;\n            for(i=0;i&lt;len/2;i++) {\n                app=b[i];\n                b[i]=b[len-1-i];\n                b[len-1-i]=app;\n            }\n        }\n    }\n    return b;\n}\n\nuint64_t swap64(uint64_t k)\n{\n    return ((k &lt;&lt; 56) |\n            ((k &amp; 0x000000000000FF00) &lt;&lt; 40) |\n            ((k &amp; 0x0000000000FF0000) &lt;&lt; 24) |\n            ((k &amp; 0x00000000FF000000) &lt;&lt; 8) |\n            ((k &amp; 0x000000FF00000000) &gt;&gt; 8) |\n            ((k &amp; 0x0000FF0000000000) &gt;&gt; 24)|\n            ((k &amp; 0x00FF000000000000) &gt;&gt; 40)|\n            (k &gt;&gt; 56)\n           );\n}\n\nint main(void)\n{\n    uint32_t x,*y;\n    uint16_t s,z;\n    uint64_t k,t;\n\n    x=0xFF567890;\n\n    /* Dynamic allocation is used to avoid to change the contents of x */\n    y=(uint32_t *)swapmem(&amp;x,sizeof(x),1);\n    if (y!=NULL) {\n        printf(\"LE=%08X BE=%08X\\n\",x,*y);\n        free(y);\n    }\n\n    /* Dynamic allocation is not used. The contents of z and k will change */\n    z=s=0x7891;\n    swapmem(&amp;z,sizeof(z),0);\n    printf(\"LE=%04X BE=%04X\\n\",s,z);\n\n    k=t=0x1120324351657389;\n    swapmem(&amp;k,sizeof(k),0);\n    printf(\"LE=%16\"PRIX64\" BE=%16\"PRIX64\"\\n\",t,k);\n\n    /* LE64 to BE64 (or viceversa) using shift */\n    k=swap64(t);\n    printf(\"LE=%16\"PRIX64\" BE=%16\"PRIX64\"\\n\",t,k);\n\n    return 0;\n}\n</code></pre>\n\n<p>After the program was compiled I had the curiosity to see the assembly code gcc generated. I discovered that the function swap64 is generated as indicated below. </p>\n\n<pre><code>00000000004007a0 &lt;swap64&gt;:\n  4007a0:       48 89 f8                mov    %rdi,%rax\n  4007a3:       48 0f c8                bswap  %rax\n  4007a6:       c3                      retq\n</code></pre>\n\n<p>This result is obtained compiling the code, on a PC with Intel I3 CPU, with the gcc options: -Ofast, or -O3, or -O2, or -Os.</p>\n\n<p>You may solve your problem using something like the <code>swap64()</code> function. A function like the following I've named <code>swap32()</code>:</p>\n\n<pre><code>uint32_t swap32(uint32_t k)\n{\n    return ((k &lt;&lt; 24) |\n            ((k &amp; 0x0000FF00) &lt;&lt; 8) |\n            ((k &amp; 0x00FF0000) &gt;&gt; 8) |\n            (k &gt;&gt; 24)\n           );\n}\n</code></pre>\n\n<p>You may use it as:</p>\n\n<pre><code>uint32_t j=swap32(*(uint32_t *)ptr);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6276868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e515bb0da9fda5da8211687a928034d?s=128&d=identicon&r=PG&f=1", "display_name": "Jayang", "link": "https://stackoverflow.com/users/6276868/jayang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10638, "favorite_count": 2, "answer_count": 6, "score": 1, "last_activity_date": 1501071109, "creation_date": 1500996156, "question_id": 45307516, "link": "https://stackoverflow.com/questions/45307516/c-c-code-to-convert-big-endian-to-little-endian", "title": "C/C++ code to convert big endian to little endian", "body": "<p>I've seen several different examples of code that converts big endian to little endian and vice versa, but I've come across a piece of code someone wrote that <em>seems</em> to work, but I'm stumped as to why it does.  </p>\n\n<p>Basically, there's a char buffer that, at a certain position, contains a 4-byte int stored as big-endian.  The code would extract the integer and store it as native little endian.  Here's a brief example:</p>\n\n<pre><code>char test[8] = { 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07};\nchar *ptr = test;\nint32_t value = 0;\nvalue =  ((*ptr) &amp; 0xFF)       &lt;&lt; 24;\nvalue |= ((*(ptr + 1)) &amp; 0xFF) &lt;&lt; 16;\nvalue |= ((*(ptr + 2)) &amp; 0xFF) &lt;&lt; 8;\nvalue |= (*(ptr + 3)) &amp; 0xFF;\nprintf(\"value: %d\\n\", value);\n</code></pre>\n\n<p>value: 66051</p>\n\n<p>The above code takes the first four bytes, stores it as little endian, and prints the result. Can anyone explain step by step how this works?  I'm confused why ((*ptr) &amp; 0xFF) &lt;&lt; X wouldn't just evaluate to 0 for any X >= 8.  </p>\n"}, {"tags": ["c", "floating-point", "precision", "biginteger", "floating-accuracy"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1501004227, "post_id": 45307459, "comment_id": 77582460, "body": "Why do you need more than 24 bits of precision?  If you need exact math, then you should be doing fixed-point arithmetic."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1501013983, "post_id": 45307459, "comment_id": 77588052, "body": "maybe you need a big number library like <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">gmplib.org</a>"}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "edited": false, "score": 0, "creation_date": 1501014902, "post_id": 45307459, "comment_id": 77588551, "body": "Algorithm I want to implement is third-degree polynomial. I think fixed point arithmetic requires some assumptions about the largest size in the algorithm. In my case it can go upto (range of uint16) ^ 6 ( ). Correct me if i am wrong. But thanks for tossing that method here, Always good to know yet another programming technique."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1501014981, "post_id": 45307459, "comment_id": 77588589, "body": "@pm100, i have limitations on code size and also on the use of open-source libraries. Thanks for the suggestions though."}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1501015297, "post_id": 45307459, "comment_id": 77588773, "body": "Single-precision goes up to 3.4e38 in magnitude. Also, consider using <a href=\"https://en.wikipedia.org/wiki/Horner%27s_method#Description_of_the_algorithm\" rel=\"nofollow noreferrer\">Horner&#39;s method</a> and <a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">Kahan summation</a>. It would help if you put in your question how ill-conditioned your polynomials are and the range of your inputs."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501124399, "post_id": 45307459, "comment_id": 77642962, "body": "Note: A 32-bit <code>double</code> is not compliant with the C spec."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501124604, "post_id": 45307459, "comment_id": 77643024, "body": "I recommend to implement your code using <code>double</code> and then point out its deficiencies -else this is unclear/too broad.  As it stands, what you need and what C offers through its standard FP type are likely sufficient when employed in the correct fashion.  Show what you have tried."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501189586, "post_id": 45307459, "comment_id": 77683339, "body": "@chux, I am not sure with the double&#39;s compliance in C. I am using sizeof(double) to get the size and it is 4. I am using an older compiler version from TI V4.0.0, that might explain it. I will put up the code once I have something presentable, mostly by tonight or morning tomorrow. Thanks for extending a helping hand."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501189962, "post_id": 45307459, "comment_id": 77683502, "body": "I too have used platforms that use a  non-compliant <code>double</code> obliging code to attempt a pair of <code>float</code> or the like. IMO,detailing the higher level goal may be a better approach.  Not only what are the largest values, but what precision is needed?  I would not be surprised to find <code>float</code> will work for you."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501249576, "post_id": 45307459, "comment_id": 77711487, "body": "@chux, please see the code added to the question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501250026, "post_id": 45307459, "comment_id": 77711815, "body": "1) This may be better at <a href=\"https://codereview.stackexchange.com/\">code review</a> than here. Check its guidelines.  2) <code>twoSum()</code>has a problem in that a compiler is allowed to defeat the separation of calculation intended.  Using <code>volatile float</code> is one way to work around that.  3) The iterative loop in <code>calculate_power()</code> is weak. Only log2(power) iterations needed and that has better precision too. 4) <code>TComp_Polynomial()</code> is weak .  Consider <code>(((a*x + b)*x + c)*x +d)*x + e</code> model instead."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501250428, "post_id": 45307459, "comment_id": 77712126, "body": "Why 4097 instead of 4096?   Scaling by 4097 immediately introduces rounding (error) wheres as *4096 could be exact."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501252062, "post_id": 45307459, "comment_id": 77713432, "body": "@chux: 4097, I am using it directly from the paper (page 5) I have referenced at the bottom of this question. Working on other suggestions and if you could elaborate more on point 2. Thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501253027, "post_id": 45307459, "comment_id": 77714151, "body": "With <code>float s = a + b;     float v = s - a;</code> , code relies on the subtraction using the <i>true</i> value of <code>s</code>.  C is allowed to perform math at a higher precision than <code>float</code>  (See <code>FLT_EVAL_METHOD</code>) so the sum may be retained in a <code>double</code> FP internal variable and it is that variable that is used in the subsequent subtraction, not the stored <code>float</code> one.  This optimization defeats the code&#39;s intent.  Although this may not happen on your target machine, it may happen on a reference machine and be the source of inconsistent results.  Using <code>volatile float s = a + b;</code> is one way to avoid this."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501253057, "post_id": 45307459, "comment_id": 77714181, "body": "@chux: <a href=\"https://codereview.stackexchange.com/questions/171423/calculating-polynomial-computing-very-large-numbers-emulating-double-using-2-fl\" title=\"calculating polynomial computing very large numbers emulating double using 2 fl\">codereview.stackexchange.com/questions/171423/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501253147, "post_id": 45307459, "comment_id": 77714244, "body": "@RishitArvindBorad I shall look at <a href=\"https://codereview.stackexchange.com/questions/171423/calculating-polynomial-computing-very-large-numbers-emulating-double-using-2-fl\">it</a> when time permits a quality review."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501254612, "post_id": 45307459, "comment_id": 77715264, "body": "@chux: you are right, i dont see FLT_EAL_METHOD on the target compiler (TI&#39;s V4.0.0.0 B1) and its there on the reference compiler. As a safe option I&#39;ve edited the code. Thanks. And whenever you are ready to review the code, by the time i can work on other suggestions and options."}, {"owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501855647, "post_id": 45307459, "comment_id": 77978823, "body": "@chux: Your first comment &quot;As it stands, what you need and what C offers through its standard FP type are likely sufficient when employed in the correct fashion.&quot; Worked for me. Its working in single precision FP. I will post the solution shortly.Thanks."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1501856139, "post_id": 45307459, "comment_id": 77979206, "body": "@RishitArvindBorad I did peruse the <a href=\"http://hal.archives-ouvertes.fr/docs/00/06/33/56/PDF/float-float.pdf\" rel=\"nofollow noreferrer\">ref</a> and your <a href=\"https://codereview.stackexchange.com/q/171423/29485\">code review post</a> yet did not find time for a quality response.  Good you are deriving a solution."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "is_accepted": true, "score": 0, "last_activity_date": 1502136487, "creation_date": 1502136487, "answer_id": 45554919, "question_id": 45307459, "link": "https://stackoverflow.com/questions/45307459/simple-c-example-of-add-sub-mul-div-operations-in-double-precision-floating-poin/45554919#45554919", "title": "Simple C example of add/sub/mul/div operations in double-precision floating-points using a single-precision Floating-point system", "body": "<p>I was able to implement this code without using double precision as the calculations were in the range of Float. \nHere's my implementation, let me know if I can optimize it better.</p>\n\n<pre><code>typedef struct\n{   int64_t tc0;\n    int64_t tc1;\n    int64_t tc2;\n    int64_t tc3;\n    int64_t tc4;\n}POLYNOMIALS;\n\nPOLYNOMIALS polynomials = {0,0,0,0,0};\nint16_t TempCompIndex;\nint64_t x[TC_TABLE_SIZE];\nint64_t y[TC_TABLE_SIZE];\n\nfloat matrix[POLYNOMIAL_ORDER+1][POLYNOMIAL_ORDER+1] = {0};\nfloat average[POLYNOMIAL_ORDER+1] = {0};\n\nvoid TComp_Polynomial()\n{\n    int i;\n    int j;\n    int k;\n    int size;\n    float temp;\n    float sum = 0;\n    float powr = 0;\n    float prod;\n\n    int64_t x[TC_TABLE_SIZE];\n    int64_t y[TC_TABLE_SIZE];\n\n    for(i = 0; i &lt; TC_TABLE_SIZE; i++)\n    {\n        x[i] = (int64_t) TCtable[i].Temp;\n        y[i] = (int64_t) TCtable[i].Comp&lt;&lt;PRECISION;\n        printf(\"x: %lld, y:%lld\\n\",x[i],y[i]);\n    }\n\n    size = i;\n\n    for(i = 0; i &lt;= POLYNOMIAL_ORDER; i++)\n    {\n        for(j = 0; j &lt;= POLYNOMIAL_ORDER; j++)\n        {\n            sum = 0;\n            powr = 0;\n            for(k = 0; k &lt; size; k++)\n            {       \n                //printf(\"x[%d]: %ld, i: %d ,j: %d \", k, x[k],i,j);\n                powr = pow(x[k],i+j);\n                //printf(\"Power: %f, sum: %f\\n \",powr,sum);\n                sum +=  powr;\n                //printf(\"%f\\r\\n\",powr);\n                //printf(\"sum: %lf\\n\",sum );\n            }\n\n            matrix[i][j] = sum;\n            printf(\"sum: %g\\n\",sum);\n        }\n    }\n\n    for(i = 0; i &lt;= POLYNOMIAL_ORDER; i++)\n    {\n        sum = 0;\n        powr = 0;\n\n        for(j = 0; j &lt; size; j++)\n        {\n            //sum += y[j] * pow(x[j],i)\n            //printf(\"sum: %lf, y[%d]: %lf, x[%d]: %lf^%d  \",sum,j,y[j], i, x[j],i);\n            //printf(\"x[%d]:%lld ^ %d\\t\",j,x[j],i);\n            powr = (float) pow(x[j],i);\n            printf(\"powr: %f\\t\",powr);\n\n            prod = (float) y[j] * powr;\n            printf(\"prod:%f \\t %lld \\t\", prod,y[j]);\n\n            sum += (float) prod;\n            printf(\"sum: %f \\n\",sum);\n        }\n\n        average[i] = sum;\n        //printf(\"#Avg: %f\\n\",average[i]);\n    }\n    printf(\"\\n\\n\");\n\n    for(i = 0; i &lt;= POLYNOMIAL_ORDER; i++)\n    {\n        for(j = 0; j &lt;= POLYNOMIAL_ORDER; j++)\n        {\n            if(j != i)\n            {   \n                if(matrix[i][i]!= 0)\n                {\n                    //printf(\"matrix%d%d: %g / matrix%d%d: %g =\\t \",j,i,matrix[j][i],i,i,matrix[i][i]);\n                    temp = matrix[j][i]/matrix[i][i];\n                    //printf(\"Temp: %g\\n\",temp);\n                }   \n\n                for(k = i; k &lt; POLYNOMIAL_ORDER; k++)\n                {   \n                    matrix[j][k] -= temp*matrix[i][k];\n                    //printf(\"matrix[%d][%d]:%g, %g, matrix[%d][%d]:%g\\n\",j,k,matrix[j][k], temp,i,k,matrix[i][k]);\n                }\n                //printf(\"\\n\\n\");\n                //print_matrix();\n                printf(\"\\n\\n\");\n\n                //printf(\"avg%d: %g\\ttemp: %g\\tavg%d: %g\\n\\n\",j,average[j],temp,i,average[i]);\n                average[j] -= temp*average[i];\n                printf(\"#Avg%d:%g\\n\",j,average[j]);\n                //print_average();\n            }\n        }\n    }\n\n    print_matrix();\n    print_average();\n\n\n\n\n/* Calculate polynomial Coefficients (n+1) based on the POLYNOMIAL_ORDER (n) */\n#ifndef POLYNOMIAL_ORDER\n\n#elif POLYNOMIAL_ORDER == 0\n    if(matrix[0][0] != 0)\n    {\n        polynomials.tc0 = (int64_t) (average[0]/matrix[0][0]);\n    }\n#elif POLYNOMIAL_ORDER == 1\n    if(matrix[1][1] != 0)\n    {\n        polynomials.tc0 = (int64_t) (average[0]/matrix[0][0]);\n        polynomials.tc1 = (int64_t) (average[1]/matrix[1][1]);\n    }\n#elif POLYNOMIAL_ORDER == 2\n    if(matrix[2][2] != 0)\n    {\n        polynomials.tc0 = (int64_t) (average[0]/matrix[0][0]);\n        polynomials.tc1 = (int64_t) (average[1]/matrix[1][1]);\n        polynomials.tc2 = (int64_t) (average[2]/matrix[2][2]);\n    }\n#elif POLYNOMIAL_ORDER == 3\n    if(matrix[3][3] != 0)\n    {\n        polynomials.tc0 = (int64_t) (average[0]/matrix[0][0]);\n        polynomials.tc1 = (int64_t) (average[1]/matrix[1][1]);\n        polynomials.tc2 = (int64_t) (average[2]/matrix[2][2]);\n        polynomials.tc3 = (int64_t) (average[3]/matrix[3][3]);\n    }\n#elif POLYNOMIAL_ORDER == 4\n    if(matrix[4][4] != 0)\n    {\n        polynomials.tc0 = (int64_t) (average[0]/matrix[0][0]);\n        polynomials.tc1 = (int64_t) (average[1]/matrix[1][1]);\n        polynomials.tc2 = (int64_t) (average[2]/matrix[2][2]);\n        polynomials.tc3 = (int64_t) (average[3]/matrix[3][3]);\n        polynomials.tc4 = (int64_t) (average[4]/matrix[4][4]);\n    }\n#endif\n\n    }\n\n\n\n int16_t calculate_equation(uint16_t TEMP)\n{\n    int64_t Y = 0;\n    int16_t TempComp = 0;\n\n#ifndef POLYNOMIAL_ORDER\n#elif POLYNOMIAL_ORDER == 0\n        Y = polynomials.tc0;\n#elif POLYNOMIAL_ORDER == 1\n        Y = polynomials.tc1* ((int64_t)TEMP) + polynomials.tc0;\n#elif POLYNOMIAL_ORDER == 2\n        Y = (polynomials.tc2 * ((int64_t)TEMP) + polynomials.tc1)*(int64_t)TEMP + polynomials.tc0;\n#elif POLYNOMIAL_ORDER == 3\n        Y = ((polynomials.tc3 * ((int64_t)TEMP) + polynomials.tc2)*((int64_t)TEMP) + polynomials.tc1)*((int64_t)TEMP) + polynomials.tc0;\n#elif POLYNOMIAL_ORDER == 4\n        Y = (((polynomials.tc4 * (int64_t)TEMP + polynomials.tc3)*(int64_t)TEMP + polynomials.tc2)*(int64_t)TEMP + polynomials.tc1)*(int64_t)TEMP + polynomials.tc0;\n#endif\n    TempComp = (int16_t) (Y&gt;&gt;PRECISION_BITS);\n\n    return TempComp;\n}\n\nvoid main(){\nint16_t TempComp = 0;\nTempCompValue = (int16_t) calculate_equation(Mon_Temp);\n}\n</code></pre>\n\n<p>Note: Calculate_Equation() is being called once a second and it is required to not use float in order to avoid floating point arithmetic, hence I am using non-float variables in that function. </p>\n\n<p>It is working right for me and haven't discovered any bug after initial testing. \nThanks every one for taking interest in my post, if not the answer, got to learn some new techniques. And thanks @chux. </p>\n"}], "owner": {"reputation": 13, "user_id": 2208600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a141dcca6e412648379e9c8f305ff?s=128&d=identicon&r=PG", "display_name": "Rishit", "link": "https://stackoverflow.com/users/2208600/rishit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 45554919, "answer_count": 1, "score": 0, "last_activity_date": 1502136487, "creation_date": 1500996003, "last_edit_date": 1501509540, "question_id": 45307459, "link": "https://stackoverflow.com/questions/45307459/simple-c-example-of-add-sub-mul-div-operations-in-double-precision-floating-poin", "title": "Simple C example of add/sub/mul/div operations in double-precision floating-points using a single-precision Floating-point system", "body": "<p>I am working on an algorithm which requires calculations in large numbers, upto e+30. I am using a 32 bit system with compiler support of 32 bits for long/float/double. So far, by searching online, I've learned that single-precision floating points (FPs) can be used for Double-precision FPs. </p>\n\n<p>From this question asked by someone earlier (<a href=\"https://stackoverflow.com/questions/6769881/emulate-double-using-2-floats\">Emulate \u201cdouble\u201d using 2 \u201cfloat\u201ds</a>) I found this paper which has the algorithm to work with Double-precision FPs in GPUs. It is too confusing for me to implement in C. I just need four basic mathematical operations. Is there any way I could find an example for this which will help me understand it better?</p>\n\n<p>Thanks in advance.</p>\n\n<p>Here is the Code I am working on. It might have errors i can not see, any suggestions would be appreciated to rectify error but that is preety much what I am trying to implement. In the algorithm, POLYNOMIAL_ORDER should be able to go up to forth order (can settle at Third order if the standard deviation is smaller). Few things I am not sure about are 1) Procedures make_float() and make_float() are correct or not, 2) Use of make_float() in the program. </p>\n\n<pre><code>#define POLYNOMIAL_ORDER    (3)\n#define TC_TABLE_SIZE   (14)\n\ntypedef struct vector_float2{\nfloat x;\nfloat y;\n}float2;\n\ntypedef struct\n{\n    float tc0;\n    float tc1;\n    float tc2;\n    float tc3;\n}POLYNOMIALS;\n\ntypedef struct  {\n    int16_t Temp;\n    int16_t Comp;   \n} TempCompPair;\n\nvolatile TempCompPair TCtable[TC_TABLE_SIZE] = {{22452,1651},\n                                                {25318,1444},\n                                                {28268,1133},\n                                                {31120,822},\n                                                {34027,511},\n                                                {36932,185},\n                                                {39770,-81},\n                                                {42685,-288},\n                                                {45531,-407},\n                                                {48425,-632},\n                                                {51401,-703},\n                                                {54460,-1143},\n                                                {57202,-1420},\n                                                {60027,-1652}};\n\nPOLYNOMIALS polynomials;\nfloat matrix[TC_TABLE_SIZE][TC_TABLE_SIZE] = {0};\nfloat average[TC_TABLE_SIZE] = {0};\n\nfloat make_float(float x, float y)\n{\n    return x+y;\n}\n\nfloat2 make_float2(float a, float b)\n{\n    float2 f2 = {a,b};\n    return f2;\n}\n\nfloat2 quickTwoSum(float a, float b)\n{\n    float s = a+b;\n    float e = b - (s - a);\n\n    float2 result = {s, e};\n    return result;\n}\n\nfloat2 twoSum(float a, float b)\n{\n    volatile float s = a + b;\n    float v = s - a;\n    float e = (a - (s - v)) + (b - v);\n    float2 result = {s , e};\n    return result;\n}\n\nfloat2 df64_add(float2 a, float2 b)\n{\n    float2 s,t;\n    s = twoSum(a.x, b.x);\n    t = twoSum(a.y, b.y);\n    s.y += t.x;\n    s = quickTwoSum(s.x, s.y);\n    s.y += t.y;\n    s = quickTwoSum(s.x, s.y);\n    return s;\n}\n\nfloat2 split(float a)\n{\n    const float split = 4097;       //(1&lt;&lt;12) + 1\n    float t = a *split;\n    float a_hi = t - (t - a);\n    float a_lo = a - a_hi;\n    float2 result = {a_hi, a_lo};\n    return result;\n}\n\nfloat2 twoProd(float a, float b)\n{\n    float p = a*b;\n    float2 aS = split(a);\n    float2 bS = split(b);\n    float err = ((aS.x * bS.x - p)\n                + aS.x * bS.y + aS.y * bS.x)\n                + aS.y * bS.y;\n\n    float2 result = {p, err};\n    return result;\n}\n\nfloat2 df64_mult(float2 a, float2 b)\n{\n    float2 p;\n\n    p = twoProd(a.x,b.x);\n    p.y += a.x * b.y;\n    p.y += a.y * b.x;\n    p = quickTwoSum(p.x,p.y);\n\n    return p;\n}\n\nfloat2 calculate_power(float base, int pow)\n{\n    int i = 0;\n\n    float2 base_f2 = make_float2(base,0);\n    float2 result_f2 = {1,0};\n\n    if(pow == 0)\n    {\n        return result_f2;\n    }\n\n    if(pow &gt; 0)\n    {\n        if(pow == 1)\n        {\n            return base_f2;\n        }\n        else\n        {\n            for(i = 0; i &lt; pow; i++)\n            {\n                result_f2 = df64_mult(result_f2,base_f2);\n            }\n            return result_f2;\n        }\n    }\n    else\n    {\n        return result_f2;\n        //Mechanism for negative powers\n    }\n\n}\n\nvoid TComp_Polynomial()\n{\n    int i;\n    int j;\n    int k;\n    int size;\n    float temp;\n    float2 sum = {0,0};\n    float2 result0 = {0,0};\n    float2 result1 = {0,0};\n\n    float x[TC_TABLE_SIZE];\n    float y[TC_TABLE_SIZE];\n\n    for(i = 0; i &lt; TC_TABLE_SIZE; i++)\n    {\n        x[i] = (float) TCtable[i].Temp;\n        y[i] = (float) TCtable[i].Comp;\n    }\n\n    size = i;\n\n    for(i = 0; i &lt;= POLYNOMIAL_ORDER; i++)\n    {\n        for(j = 0; j &lt;= POLYNOMIAL_ORDER; j++)\n        {\n            sum.x = 0;\n            sum.y = 0;\n\n            for(k = 0; k &lt; size; k++)\n            {\n                // Expression simplified below:  **sum += pow(x[k],i+j)** \n                result0 = calculate_power(x[k], i+j);\n                sum = df64_add(result0,sum);\n            }\n\n            matrix[i][j] = make_float(sum.x,sum.y);\n        }\n    }\n\n    for(i = 0; i &lt;= POLYNOMIAL_ORDER; i++)\n    {\n        sum.x = 0;\n        sum.y = 0;\n\n        for(j = 0; j &lt; size; j++)\n        {\n            // Expression simplified below: **sum += y[j] * pow(x[j],i)**\n            result0 = calculate_power(x[j], i);\n            result1 = df64_mult( result0 , make_float2(y[j],0) );\n            sum = df64_add(result1,sum);\n        }\n\n        average[i] = make_float(sum.x,sum.y);\n    }\n\n    for(i = 0; i &lt;= POLYNOMIAL_ORDER; i++)\n    {\n        for(j = 0; j &lt;= POLYNOMIAL_ORDER; j++)\n        {\n            if(j != i)\n            {\n                if(matrix[i][i]!= 0)\n                {\n                    temp = matrix[j][i]/matrix[i][i];\n                }\n\n                for(k = i; k &lt; POLYNOMIAL_ORDER; k++)\n                {\n                    matrix[j][k] -= temp*matrix[i][k];\n                }\n                average[j] -= temp*average[i];\n\n            }\n        }\n    }\n\n    if(matrix[0][0] != 0)\n    {\n        polynomials.tc0 = average[0]/matrix[0][0];\n    }\n    if(matrix[1][1] != 0)\n    {\n        polynomials.tc1 = average[1]/matrix[1][1];\n    }\n\n    if(matrix[2][2] != 0)\n    {\n        polynomials.tc2 = average[2]/matrix[2][2];\n    }\n\n    if(matrix[3][3] != 0)\n    {\n        polynomials.tc3 = average[3]/matrix[3][3];\n    }\n}\n</code></pre>\n\n<p>and then use the struct polynomials.tc0/1/2/3 in below expression</p>\n\n<pre><code>// Y = T^3 * X3 + T^2 * X2 + T^1 * X1 + X0 ;\n\ndouble calculate_equation(uint16_t TEMP)\n{\n    double Y;\n\n    if(POLYNOMIAL_ORDER == 1)\n    {\n        Y = polynomials.tc1*(double)TEMP + polynomials.tc0; \n    }\n    else if(POLYNOMIAL_ORDER == 2)\n    {\n        Y = (polynomials.tc2 * (double)TEMP + polynomials.tc1)*(double)TEMP + polynomials.tc0;  \n    }\n    else if(POLYNOMIAL_ORDER == 3)\n    {\n        Y = ((polynomials.tc3 * (double)TEMP + polynomials.tc2)*(double)TEMP + polynomials.tc1)*(double)TEMP + polynomials.tc0; \n    }\n    else if(POLYNOMIAL_ORDER == 4)\n    {\n        Y = (((polynomials.tc4 * (double)TEMP + polynomials.tc3)*(double)TEMP + polynomials.tc2)*(double)TEMP + polynomials.tc1)*(double)TEMP + polynomials.tc0;    \n    }\n\n    return Y;\n}\n</code></pre>\n\n<p>And standard Deviation is calculated is as follows:</p>\n\n<pre><code>//sqrt(sigma(error^2))\nfor(i = 0; i &lt; TC_TABLE_SIZE; i++)\n    {\n        actual_comp[i] =(int) calculate_equation(TCtable[i].Temp);\n        error[i] = TCtable[i].Comp - actual_comp[i] ;\n        error_sqr += error[i]*error[i];\n\n        printf(\"%u\\t%d\\t\\t%e\\n\", TCtable[i].Temp, TCtable[i].Comp, actual_comp[i] );\n    }\n    error_sqrt = sqrt(error_sqr);\n</code></pre>\n\n<p>Reference:\n<a href=\"http://hal.archives-ouvertes.fr/docs/00/06/33/56/PDF/float-float.pdf\" rel=\"nofollow noreferrer\">http://hal.archives-ouvertes.fr/docs/00/06/33/56/PDF/float-float.pdf</a> Guillaume Da Gra\u00e7a, David Defour Implementation of float-float operators on graphics hardware, 7th conference on Real Numbers and Computers, RNC7.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2015", "mariadb"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1500994571, "post_id": 45306850, "comment_id": 77575633, "body": "There is no language C/C++. Only the two different languages C and C++. Pick one!"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1500995580, "post_id": 45306850, "comment_id": 77576376, "body": "Looks like a CMake project. So compile it with CMake."}, {"owner": {"reputation": 187, "user_id": 7595822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23df3ffb3d53626b653a779d74ad1ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7595822/ian"}, "edited": false, "score": 0, "creation_date": 1500995851, "post_id": 45306850, "comment_id": 77576593, "body": "You&#39;ll have to forgive me for my lack of understanding about this, but what do I compile with cmake?  I can&#39;t compile a folder, don&#39;t I still need some kind of project file?"}, {"owner": {"reputation": 3353, "user_id": 7169191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2308e9d8125905e247e62bb3f2017e84?s=128&d=identicon&r=PG&f=1", "display_name": "elenst", "link": "https://stackoverflow.com/users/7169191/elenst"}, "edited": false, "score": 0, "creation_date": 1501004648, "post_id": 45306850, "comment_id": 77582729, "body": "Here is the <a href=\"http://buildbot.askmonty.org/buildbot/builders/win-connector_c_3/builds/132/steps/build_package32/logs/stdio\" rel=\"nofollow noreferrer\">full log</a> of how the CI system builds it from the git clone, hopefully you&#39;ll find there what you&#39;re looking for."}, {"owner": {"reputation": 187, "user_id": 7595822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23df3ffb3d53626b653a779d74ad1ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7595822/ian"}, "edited": false, "score": 0, "creation_date": 1501016008, "post_id": 45306850, "comment_id": 77589154, "body": "This appears to be building that mariadb_connector_c.sln file that I described in the question...again, I don&#39;t have that anywhere, and I cannot locate it anywhere"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1501038126, "post_id": 45306850, "comment_id": 77595630, "body": "Can you explain how you &quot;run the source through cmake&quot; so that this question helps others?"}], "answers": [{"tags": [], "owner": {"reputation": 4774, "user_id": 547065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca7b22b90c1506277b6f7ead24eb21c?s=128&d=identicon&r=PG", "display_name": "Vladislav Vaintroub", "link": "https://stackoverflow.com/users/547065/vladislav-vaintroub"}, "is_accepted": true, "score": 0, "last_activity_date": 1501106507, "creation_date": 1501106507, "answer_id": 45338166, "question_id": 45306850, "link": "https://stackoverflow.com/questions/45306850/compiling-mariadb-c-c-connector-on-windows/45338166#45338166", "title": "Compiling MariaDB C/C++ Connector on Windows", "body": "<p>The answer is a generic answer for any cmake project</p>\n\n<ul>\n<li><p>Install CMake. make sure cmake.exe is in PATH (Windows installer offers this option). Install Visual Studio, and make sure C/C++ compiler is installed</p></li>\n<li><p>start command line prompt</p></li>\n<li><p>Execute \"cmake . &amp;&amp;  cmake --build .\" in the command line prompt.</p></li>\n</ul>\n\n<p>That#s it.</p>\n"}], "owner": {"reputation": 187, "user_id": 7595822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23df3ffb3d53626b653a779d74ad1ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/7595822/ian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "accepted_answer_id": 45338166, "answer_count": 1, "score": -1, "last_activity_date": 1501106507, "creation_date": 1500994422, "last_edit_date": 1501017021, "question_id": 45306850, "link": "https://stackoverflow.com/questions/45306850/compiling-mariadb-c-c-connector-on-windows", "title": "Compiling MariaDB C/C++ Connector on Windows", "body": "<p>I am trying to use MariaDB in my visual studio project, so after looking at the documentation, I installed MariaDB and downloaded the source code for the C/C++ connector.</p>\n\n<p>I got the include folder linked to the project, so I am able to make calls to the functions there, but it won't build because the linker fails to find the function definitions (obviously).  I have looked all over and cannot find any solid directions on building the .lib files I need.  I have found two sources that say that I need to just build the mariadb_connector_c.sln, but that file does not exist in the source code that I got, nor does it exist on their Git repo: <a href=\"https://github.com/MariaDB/mariadb-connector-c\" rel=\"nofollow noreferrer\">https://github.com/MariaDB/mariadb-connector-c</a></p>\n\n<p>The closest thing that I have found is the appveyor.yml file they provided, which contains the following: <a href=\"https://i.stack.imgur.com/3LQ7L.png\" rel=\"nofollow noreferrer\">Contents of YML File</a></p>\n\n<p>Is there anybody out there who has done this before?  I can't find anything online or in the files they provided pertaining to this.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I found the answer thanks to some of the replies.  I needed to run the source code through cmake in order to get the .sln that I could then build to get the .lib files I need to link to the project.</p>\n"}, {"tags": ["c", "freeglut"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500994598, "post_id": 45306662, "comment_id": 77575649, "body": "I can&#39;t immediately tell if it is actually the problem, but the symptom you describe (values unexpectedly changing) sound like there&#39;s a problem with over-writing the storage used for the values that change. This could be because you are writing outside the bounds of an allocated block of memory, or because you return a pointer to a local variable from some function, and the space pointed at is reused by other functions. Two common reasons for numbers changing unexpectedly. Identifying the lines with the problem will be harder; you could try using <a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">Valgrind</a>, for example."}, {"owner": {"reputation": 423, "user_id": 8200379, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2734f34c12e5286d352df1ee9b1a3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ankomm", "link": "https://stackoverflow.com/users/8200379/ankomm"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1500994873, "post_id": 45306662, "comment_id": 77575865, "body": "I just ask on of my teacher the solution of this problem, he said he had the same problem a long time ago but don&#39;t remember. He just know there&#39;s misplaced or missing functions. I will try Valgrind tomorrow anyway, tanks for your comment !"}], "answers": [{"tags": [], "owner": {"reputation": 3393, "user_id": 214143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61025b3df4700620a5d9099293f23a5d?s=128&d=identicon&r=PG", "display_name": "Jason Aller", "link": "https://stackoverflow.com/users/214143/jason-aller"}, "is_accepted": false, "score": 0, "last_activity_date": 1597786758, "creation_date": 1597786758, "answer_id": 63477002, "question_id": 45306662, "link": "https://stackoverflow.com/questions/45306662/glut-objects-moving-without-telling/63477002#63477002", "title": "Glut object&#39;s moving without telling", "body": "<p>This is the solution posted by Ankomm in an edit to their question:</p>\n<p>I found the problem with one of my teachers. The functions which are listening for Keyboard and Mouse events are listening ALL keys and buttons even they're not set in the functions, and refresh with the redisplay (which call the display function [here : <code>renderscene()</code>]). The <code>renderscene()</code> calls the function which increments and decrements global variables which have been set when the program was compiled. The solution is to set the variables values at the beginning of the function like this:</p>\n<pre><code>\nvoid addLego(int depth, int height, int width) {\n\n   posLegoX = 0.0f; \n   posLegoZ = -50.0f;//set the values here so when the function will be \n                    //called, the position of the first Lego will be always \n                    //the same\n\n   int i = 0;\n   int j = 0;\n\n   for(i=0 ; i&lt;depth ; i++) { //multiply basic Lego to get the right depth\n\n       posLegoX += 7.8f; //incrementing global variable which changes the \n                         //basic position of the current Lego in the above \n                         //function\n       setLego(height); //creating the current basic Lego\n   }\n\n    for(j=0 ; j&lt;width ; j++) { //multiply basic Lego to get the right depth\n\n       posLegoZ -= 7.8; //decrementing global variable which change the \n                         //basic position of the current Lego in the above \n                        //function\n        setLego(height); //creating the current basic Lego\n    }\n}\n</code></pre>\n<p>And it works!</p>\n"}], "owner": {"reputation": 423, "user_id": 8200379, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a2734f34c12e5286d352df1ee9b1a3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Ankomm", "link": "https://stackoverflow.com/users/8200379/ankomm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1597787017, "creation_date": 1500993940, "last_edit_date": 1597787017, "question_id": 45306662, "link": "https://stackoverflow.com/questions/45306662/glut-objects-moving-without-telling", "title": "Glut object&#39;s moving without telling", "body": "<p>I'm working with Glut and C, my purpose is to screen a 3D Lego and two Kaplas with dynamic width, height and depth. There's a few keyboard listeners that move the camera, and rotate the Kaplas.</p>\n<p>My problem is: when I press any touch of the keyboard or the mouse (which are not dealt with in my code) my Lego get its X and Z positions greatly increased!</p>\n<p>Here's my code and details:</p>\n<pre><code>int main(int argc, char **argv) {\n\n   // init GLUT and create Window\n   glutInit(&amp;argc, argv);\n   glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);\n   glutInitWindowPosition(100,100);\n   glutInitWindowSize(800,800);\n   glutCreateWindow(&quot;Lighthouse3D- GLUT Tutorial&quot;);\n\n   glClearColor(0.5f, 0.5f, 0.5f, 0.5f);\n\n   glutDisplayFunc(renderScene); //my display function\n   glutReshapeFunc(resize); //my reshape function\n\n   glutKeyboardFunc(key); //basic keyboard listener function\n   glutSpecialFunc(specialKey); //special keyboard listener function\n\n   glEnable(GL_DEPTH_TEST);\n\n   glEnable(GL_NORMALIZE);\n   glEnable(GL_COLOR_MATERIAL);\n   glEnable(GL_LIGHTING);\n   glEnable(GL_LIGHT0);\n\n   glLightiv(GL_LIGHT0, GL_POSITION, light_position);\n\n   glutMainLoop();\n\n   return 1;\n}\n</code></pre>\n<p>The code below is my reshape function:</p>\n<pre><code>static void resize(int width, int height) {\n   if(height == 0)\n       height = 1;\n\n   const float ar = (float) width / (float) height;\n\n   glMatrixMode(GL_PROJECTION);\n   glLoadIdentity();\n   glViewport(0, 0, width, height);\n   gluPerspective(90, ar, 1, 10000);\n   glMatrixMode(GL_MODELVIEW);\n   glLoadIdentity();\n}\n</code></pre>\n<p>Next functions are creating a Kapla and a Lego:</p>\n<pre><code>void setKapla() {\n\n   glColor3f(0.76f, 0.42f, 0.0f);\n\n   float rX = xRot; //moved by keyboard's 'x' key\n   float rY = yRot; //moved by keyboard's 'y' key\n   float rZ = zRot; //moved by keyboard's 'z' key\n\n   float pX = xPos; //not dynamic, equal to 0.0f\n   float pY = yPos; //not dynamic, equal to 0.0f\n   float pZ = zPos; //not dynamic, equal to -30.0f\n\n   glPushMatrix();\n       glTranslatef(pX, pY, pZ); //place origin point to static coords\n       glRotatef(angleRot, rX, rY, rZ); //rotate the object following \n                                        //dynamic coords\n       glScalef(1.0f, 3.0f, 15.0f); //multiplying the following cube by this \n                                    //proportions\n       glutSolidCube(2.0f); //base cube\n   glPopMatrix();\n}\n</code></pre>\n<p>Now the Lego:</p>\n<pre><code>void setLego(int zHeight) {\n\n   GLUquadricObj* quadric = gluNewQuadric(); //creatin my quadric object\n\n   gluQuadricDrawStyle(quadric, GLU_FILL); \n\n   glColor3f(0.72f, 0.72f, 0.05f);\n\n   glPushMatrix();\n\n       glTranslatef(posLegoX, posLegoY, posLegoZ); //setting lego\n                                                   //position to \n                                                   //dynamic coords, set \n                                                   //in the function in the \n                                                   //next bloc of code\n       glRotatef(-90, 1, 0, 0); //rotation for the next cylinder\n       gluCylinder(quadric, 2.4, 2.4, 1.7, 10, 10); //cylinder in the top of \n                                                    //the cube\n       gluDisk(quadric, 0.0, 2.4, 10, 10); //closing the bottom of the \n                                           //cylinder\n       glTranslatef(0.0f, 0.0f, 1.7f); //translated to the top of the \n                                       //cylinder\n       gluDisk(quadric, 0.0, 2.4, 10, 10); //closing the top of the cylinder\n\n       glTranslatef(0.0f, 0.0f, ((-3.2f * zHeight) / 2.0f) - 1.7f); \n       //setting Lego's basic cube position\n       glScalef(7.8f, 7.8f, 3.2f * zHeight); //setting Lego's basic cube \n                                             //size to the function param\n       glutSolidCube(1.0f); //creating the cube\n\n   glPopMatrix();\n\n   gluDeleteQuadric(quadric);\n}\n</code></pre>\n<p>Instead of the Kapla, the lego is not immediately created in the display function, before that the following function is called to multiply basic Lego's to make a complete Lego (following params):</p>\n<pre><code>void addLego(int depth, int height, int width) {\n\n   int i = 0;\n   int j = 0;\n\n   for(i=0 ; i&lt;depth ; i++) { //multiply basic Lego to get the right depth\n\n       posLegoX += 7.8f; //incrementing global variable which change the \n                         //basic position of the current Lego in the above \n                         //function\n       setLego(height); //creating the current basic Lego\n   }\n\n   for(j=0 ; j&lt;width ; j++) { //multiply basic Lego to get the right depth\n\n       posLegoZ -= 7.8; //decrementing global variable which change the \n                        //basic position of the current Lego in the above \n                        //function\n       setLego(height); //creating the current basic Lego\n   }\n}\n</code></pre>\n<p>And finally my display function:</p>\n<pre><code>void renderScene(void) {\n\n   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n   printf(&quot;   xCam : %f | yCam : %f\\n&quot;, xCam, yCam);\n\n   glPushMatrix();\n       gluLookAt(xCam, yCam, zCam,\n                 xCenter, yCenter, zCenter,\n                 xVec, yVec, zVec); //move the camera with keyboard's arrow \n                                    //touches\n\n       xPos = -10.0f; //x position of the first Kapla\n       yPos = -10.0f; //y position of the first Kapla\n       setKapla(); //set the first Kapla\n\n       xPos = 10.0f; //x position of the second Kapla\n       yPos = 10.0f; //y position of the second Kapla\n       setKapla(); //set the second Kapla\n\n       addLego(2, 5, 3); //creating a complete Lego with 2 basic Legos in \n                         //depth, 5 Legos in height and 3 Legos in width\n\n   glPopMatrix();\n\n   glutSwapBuffers();\n}\n</code></pre>\n<p>My basic and special keyboard functions are only using the keys : q, a, z, x, y, space, +, -, GLUT_KEY_LEFT, GLUT_KEY_RIGHT, GLUT_KEY_UP, GLUT_KEY_DOWN.</p>\n<p>When I pressed ANY key of my mouse or my keyboard, <code>posLegoX</code> and <code>posLegoZ</code> are each incrementing and decrementing following the code in the <code>addLego()</code> function, but there's no event in my code which controls it.</p>\n<p>The result is my complete Lego run away from the camera when I press any key, but NOT the Kapla!</p>\n<p>IMPORTANT!\nI made a lot of tests, and the problem is located in my <code>addLego()</code> function, i tried to put in it <code>glPushMatrix()</code> and <code>glPopMatrix()</code> in different lines, tried also to put a <code>glFlush()</code> and a <code>glLoadIdentity()</code> but nothing worked...</p>\n<p>How can I stop this?</p>\n"}, {"tags": ["c", "arm"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1500992940, "post_id": 45306220, "comment_id": 77574362, "body": "Arduino and Linux are using <i>very</i> different paradigms.  I doubt you will achieve your goal blindly translating line by line."}, {"owner": {"reputation": 6233, "user_id": 5741073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1uZeL.jpg?s=128&g=1", "display_name": "TomServo", "link": "https://stackoverflow.com/users/5741073/tomservo"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500993249, "post_id": 45306220, "comment_id": 77574609, "body": "@EugeneSh. is right, but see my answer below for general guidelines."}, {"owner": {"reputation": 31, "user_id": 6579980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916e082c6111ae0d83e09ef3f152dc2a?s=128&d=identicon&r=PG&f=1", "display_name": "Lauraaaaaaaaa", "link": "https://stackoverflow.com/users/6579980/lauraaaaaaaaa"}, "edited": false, "score": 0, "creation_date": 1500993340, "post_id": 45306220, "comment_id": 77574672, "body": "The goal is not to translate line by line, but to take the tools that interest me to recreate my function."}], "answers": [{"comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1501008586, "post_id": 45306364, "comment_id": 77585016, "body": "It&#39;s has to increment a <code>volatile unsigned long</code> to be arduino compatible."}], "tags": [], "owner": {"reputation": 6233, "user_id": 5741073, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1uZeL.jpg?s=128&g=1", "display_name": "TomServo", "link": "https://stackoverflow.com/users/5741073/tomservo"}, "is_accepted": false, "score": 2, "last_activity_date": 1501009020, "last_edit_date": 1501009020, "creation_date": 1500993113, "answer_id": 45306364, "question_id": 45306220, "link": "https://stackoverflow.com/questions/45306220/equivalent-to-arduino-millis/45306364#45306364", "title": "Equivalent to Arduino millis()", "body": "<p>Arduino <code>millis()</code> is based on a timer that trips an overflow interrupt at very close to 1 KHz, or 1 millisecond.  To achieve the same thing, I suggest you setup a timer on the ARM platform and update a <code>volatile unsigned long</code> variable with a counter.  That will be the equivalent of millis().</p>\n\n<p>Here is what millis() is doing behind the scenes:</p>\n\n<pre><code>SIGNAL(TIMER0_OVF_vect)\n{\n    // copy these to local variables so they can be stored in registers\n    // (volatile variables must be read from memory on every access)\n    unsigned long m = timer0_millis;\n    unsigned char f = timer0_fract;\n\n    m += MILLIS_INC;\n    f += FRACT_INC;\n    if (f &gt;= FRACT_MAX) {\n        f -= FRACT_MAX;\n        m += 1;\n    }\n\n    timer0_fract = f;\n    timer0_millis = m;\n    timer0_overflow_count++;\n}\n\nunsigned long millis()\n{\n    unsigned long m;\n    uint8_t oldSREG = SREG;\n\n    // disable interrupts while we read timer0_millis or we might get an\n    // inconsistent value (e.g. in the middle of a write to timer0_millis)\n    cli();\n    m = timer0_millis;\n    SREG = oldSREG;\n\n    return m;\n}\n</code></pre>\n\n<p>Coming from the embedded world, arguably the first thing you should do when starting a project on a new platform is establish clocks and get a timer interrupt going at a prescribed rate.  That is the \"Hello World\" of embedded systems.  ;)   If you choose to do this at 1 KHz, you're most of the way there.</p>\n"}], "owner": {"reputation": 31, "user_id": 6579980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/916e082c6111ae0d83e09ef3f152dc2a?s=128&d=identicon&r=PG&f=1", "display_name": "Lauraaaaaaaaa", "link": "https://stackoverflow.com/users/6579980/lauraaaaaaaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3721, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1501009020, "creation_date": 1500992785, "last_edit_date": 1500994612, "question_id": 45306220, "link": "https://stackoverflow.com/questions/45306220/equivalent-to-arduino-millis", "title": "Equivalent to Arduino millis()", "body": "<p>I am currently working on the integration of a \"shunt\" type sensor on an electronic board. My choice was on a Linear (LTC2947), unfortunately it only has an Arduino driver. I have to translate everything in C under Linux to be compatible with my microprocessor (APQ8009 ARM Cortex-A7). I have a small question about one of the functions:</p>\n\n<pre><code>int16_t LTC2947_wake_up() //Wake up LTC2947 from shutdown mode and measure the wakeup time\n{\n   byte data[1];\n   unsigned long wakeupStart = millis(), wakeupTime;\n   LTC2947_WR_BYTE(LTC2947_REG_OPCTL, 0);\n   do\n   {\n      delay(1);\n      LTC2947_RD_BYTE(LTC2947_REG_OPCTL, data); \n      wakeupTime = millis() - wakeupStart;\n      if (data[0] == 0) //! check if we are in idle mode\n      {\n         return wakeupTime;\n      }\n     if (wakeupTime &gt; 200)\n     {\n  //! failed to wake up due to timeout, return -1\n        return -1;\n     }\n   }\n   while (true);\n}\n</code></pre>\n\n<p>After finding usleep() as equivalent for delay(), I can not find it for millis() in C. Can you help me translate this function please?</p>\n"}, {"tags": ["c", "linux", "performance", "timer", "linux-kernel"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1500992857, "post_id": 45306201, "comment_id": 77574296, "body": "Latency between what and what?"}, {"owner": {"reputation": 329, "user_id": 4894197, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100001460422200/picture?type=large", "display_name": "Ramana Reddy", "link": "https://stackoverflow.com/users/4894197/ramana-reddy"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1500993378, "post_id": 45306201, "comment_id": 77574705, "body": "@EugeneSh. Updated the question"}, {"owner": {"reputation": 40834, "user_id": 297323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97e8a3c4945a8a898cbf216ce912fd46?s=128&d=identicon&r=PG", "display_name": "Fredrik Pihl", "link": "https://stackoverflow.com/users/297323/fredrik-pihl"}, "edited": false, "score": 1, "creation_date": 1500993530, "post_id": 45306201, "comment_id": 77574816, "body": "<code>perf</code> is a wonderful tool. See e.g. <a href=\"https://perf.wiki.kernel.org/index.php/Main_Page\" rel=\"nofollow noreferrer\">perf.wiki.kernel.org/index.php/Main_Page</a>"}, {"owner": {"reputation": 2283, "user_id": 3994228, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/CKWtf.jpg?s=128&g=1", "display_name": "Milind Deore", "link": "https://stackoverflow.com/users/3994228/milind-deore"}, "edited": false, "score": 0, "creation_date": 1500994092, "post_id": 45306201, "comment_id": 77575234, "body": "valgrind is quite a well-know linux profiler"}, {"owner": {"reputation": 1056, "user_id": 4319483, "user_type": "registered", "profile_image": "https://graph.facebook.com/668992100/picture?type=large", "display_name": "Bjorn A.", "link": "https://stackoverflow.com/users/4319483/bjorn-a"}, "edited": false, "score": 0, "creation_date": 1500996125, "post_id": 45306201, "comment_id": 77576794, "body": "perf and valgrind are excellent tools, as others have mentioned already. strace -T may help too."}], "answers": [{"tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1501062830, "creation_date": 1501062830, "answer_id": 45323460, "question_id": 45306201, "link": "https://stackoverflow.com/questions/45306201/what-are-the-best-to-ways-measure-latencies-from-user-space-to-kernel-space/45323460#45323460", "title": "What are the best to ways measure latencies from user space to kernel space?", "body": "<p>To measure just a single context switch from user- to kernel-space, try to use TSC (Time Stamp Counter). It is available on x86 and ARMs, user- and kernel-space.</p>\n\n<p>More info about TSC on Wikipedia: <a href=\"https://en.wikipedia.org/wiki/Time_Stamp_Counter\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Time_Stamp_Counter</a></p>\n\n<p>BSD-licensed implementation for x86 <a href=\"http://dpdk.org/browse/dpdk/tree/lib/librte_eal/common/include/arch/x86/rte_cycles.h\" rel=\"nofollow noreferrer\">could be found here</a>\nand <a href=\"http://dpdk.org/browse/dpdk/tree/lib/librte_eal/common/include/arch/arm/rte_cycles_64.h\" rel=\"nofollow noreferrer\">for 64-bit ARM here.</a></p>\n\n<p>Also, as comments suggested, consider to use any standard tool available to measure a round-trip latency, i.e. use-to-kernel and back.</p>\n"}, {"tags": [], "owner": {"reputation": 653, "user_id": 8306489, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e52cea2296c4a35ebcc0e110ac913d7e?s=128&d=identicon&r=PG&f=1", "display_name": "Forward", "link": "https://stackoverflow.com/users/8306489/forward"}, "is_accepted": false, "score": 0, "last_activity_date": 1501210483, "creation_date": 1501210483, "answer_id": 45364106, "question_id": 45306201, "link": "https://stackoverflow.com/questions/45306201/what-are-the-best-to-ways-measure-latencies-from-user-space-to-kernel-space/45364106#45364106", "title": "What are the best to ways measure latencies from user space to kernel space?", "body": "<p>If I do this, I would use ftrace\uff0c which is a performance tool provided by linux kernel.</p>\n\n<p>It can trace almost all the function in the kernel.</p>\n\n<p>It firstly log the information into a ring buffer in the memory, so it coast very little.</p>\n\n<p>There is a very good document in linux kernel source code \"Documentation/trace/ftrace.txt\", you also can find it <a href=\"https://www.kernel.org/doc/Documentation/trace/ftrace.txt\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>1.prepare the environment, configure ftrace.\n2.run the application.\n3.0.In the application, bind cpu, and give the application priority\u3002\n3.1.In the application, write something to the trace_marker, \n3.2.In the application, call the function which you want to test.\n4.get the log from the ring buffer.\n5.calculate the latency.\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 4894197, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100001460422200/picture?type=large", "display_name": "Ramana Reddy", "link": "https://stackoverflow.com/users/4894197/ramana-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1501210483, "creation_date": 1500992741, "last_edit_date": 1501125646, "question_id": 45306201, "link": "https://stackoverflow.com/questions/45306201/what-are-the-best-to-ways-measure-latencies-from-user-space-to-kernel-space", "title": "What are the best to ways measure latencies from user space to kernel space?", "body": "<p>I have to measure the latency between a user space program to the driver it interacts with. I basically send a packet through this application. The latecny is between <code>write</code> in the user space to corresponding <code>write</code> function in the kernel</p>\n\n<p>I used <code>clock_gettime</code> with <code>CLOCK_MONOTONIC</code> in the user space and\n <code>getrawmonotonic</code> in the kernel (driver) and when I see the difference, it is huge (around 4ms). So I am definitely using the wrong approach.</p>\n\n<p>So, what are the best ways to do this?</p>\n"}, {"tags": ["c", "string", "time-complexity", "reverse"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 7908897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d2d40f42a8832c9f4dc83e493c10c6?s=128&d=identicon&r=PG&f=1", "display_name": "praveen", "link": "https://stackoverflow.com/users/7908897/praveen"}, "is_accepted": false, "score": 0, "last_activity_date": 1501070674, "last_edit_date": 1501070674, "creation_date": 1501070039, "answer_id": 45326213, "question_id": 45305871, "link": "https://stackoverflow.com/questions/45305871/what-is-the-time-complexity-of-my-codes-reversing-words-in-a-string-should-i-a/45326213#45326213", "title": "What is the time complexity of my codes: reversing words in a string? Should I account for asymmetrical spacing?", "body": "<p>Solution1 is <strong>O(N)</strong> time complexity. where as,<br>\nSolution2 is <strong>O(kN)</strong> where k is the number of words in the string, in the worst case all the words single characters <strong>O(N^2)</strong>. and you are moving word by word towards the end and swapping other words towards the front, so it is <strong>O(kN).</strong>  </p>\n"}], "owner": {"reputation": 51, "user_id": 5515896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/f96b01421a3c1597a065556aede30e40?s=128&d=identicon&r=PG&f=1", "display_name": "ritika_13", "link": "https://stackoverflow.com/users/5515896/ritika-13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1501070674, "creation_date": 1500991926, "question_id": 45305871, "link": "https://stackoverflow.com/questions/45305871/what-is-the-time-complexity-of-my-codes-reversing-words-in-a-string-should-i-a", "title": "What is the time complexity of my codes: reversing words in a string? Should I account for asymmetrical spacing?", "body": "<p><strong>Problem Statement</strong>: Write a function of the declaration <code>void str_words_in_rev(char *input, int length)</code> that reverses the words in a string of word/(s). I've implemented two different solutions for it, one of which is extremely complicated. </p>\n\n<p><strong>Solution 1:</strong> I reverse the entire string using <code>void reverse(char* string, int start, int end)</code> function which takes the index of the first and last letter of the string or substring you want to reverse. After that, I reverse <em>each word</em> in the string using the same reverse function. </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nvoid swapChar(char *a, char *b) {\n  char temp = *a;\n  *a = *b;\n  *b = temp;\n}\n\nint length(char *string) {\n  if(string == NULL)\n     return -1;\n  int i=0;\n  for(;string[i++];);\n  return i;\n}\n\nvoid reverse(char* string, int start, int end) {\n  int mid = start + (end - start + 1)/2;\n  for(int i=start,j=end;i&lt;mid;)\n    swapChar(&amp;string[i++], &amp;string[j--]);\n}\n\nint main() {\n  char str[] = \"abc def ghij klmn\";\n  int i=0, j=0, len = length(str), flag = 0;\n\n  if(str == NULL || !(*str))\n     return 0;\n  for(;str[j]!='\\0';++j) {\n     if(str[j] == ' ') {\n       flag = 1;\n       reverse(str,i,j-1);\n       i = j+1;\n     }\n  }\n  if(flag == 1) {\n  reverse(str, i, j-1);\n  reverse(str,0,len-2);\n  }\n  printf(\"%s\\n\", str);\n  return 0;\n}\n</code></pre>\n\n<p><strong>Solution 2:</strong> I shift every word and following space character (after rearranging it) towards the end by using the pushToEnd function and <em>then shift the end before the end word which was pushed</em>. There are printf statements which can be commented out to really understand what's happening, if my explanation is inadequate (which I apologise for).  </p>\n\n<pre><code>        int pushToEnd(char *str, int length) {\n\n        int len = 0;\n        int i = 0, j = 0, k = 0, n = 0;\n        for (i = 0; str[i++] != ' ' &amp;&amp; i &lt;= length;)\n            ++len;\n        if (len == length)\n            return len;\n        //printf(\"Length of first word:\");\n        //printf(\"%d\\n\", len);\n        for (j = i - 1; j&gt;0; --j)\n            swapChar(&amp;str[j], &amp;str[j - 1]);\n        ++len;\n        //printf(\"After rearranging first word:\");\n        //printf(\"%s\\n\", str);\n        //printf(\"Pushing first word toward the end\\n\");\n        for (; k + 2 * len &lt;= length; k = k + len) {\n            for (int l = k; l&lt;k + len; ++l) {\n                swapChar(&amp;str[l], &amp;str[l + len]);\n            }\n            //printf(\"---%s---\\n\", str);\n        }\n        //printf(\"As blocks:\");\n        //printf(\"%s\\n\", str);\n        //printf(\"K VALUE: %d\\n\", k);\n        for (; k + len&lt;length; ++k) {\n            for (n = k + len; n&gt;k; --n) {\n                //printf(\"N VALUE: %d\\n\", n);\n                swapChar(&amp;str[n], &amp;str[n - 1]);\n            }\n        }\n        //printf(\"One by one:\");\n        //printf(\"%s\\n\", str);\n        return len;\n    }\n\n    void str_words_in_rev1(char *input, int length){\n    int len = 0;\n    for (int end = length; end&gt;0; end = end - len) {\n        //printf(\"End:%d\\n\", end);\n        len = pushToEnd(input, end);\n    }\n}\n</code></pre>\n\n<p>Once you've understood the problem statement and the solutions I've implemented, here are my questions: </p>\n\n<p>what is the time complexity of my solutions? I think the first solution has O(n) complexity and the second one is probably O(n^2) but I'm not sure. </p>\n\n<p>Neither solutions account for asymmetrical spacing. The words are reversed and spacing is reversed as well. It's imperceptible in cases where there is symmetrical spacing/multi-symmetrical spacing. The problem statement was unclear on this, but I'd like your views on whether it should be accounted for. </p>\n"}]