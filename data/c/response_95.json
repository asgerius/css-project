[{"tags": ["c++", "c", "visual-studio", "visual-studio-2010"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 5, "creation_date": 1478129121, "post_id": 40391444, "comment_id": 68034583, "body": "If it creates a .dll but not a .lib, that <i>usually</i> means that you haven&#39;t exported anything from your dll."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1478166372, "post_id": 40391444, "comment_id": 68046596, "body": "You will <i>always</i> get .obj files, the compiler needs to create them.  Then they get linked to produce the final .dll file.  If you don&#39;t see a .lib file at all then you forgot to export anything.  Use <code>__declspec(dllexport)</code> or a .def file."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1478187482, "post_id": 40391444, "comment_id": 68061425, "body": "@HansPassant I need to export the entire project. I&#39;m trying to create a library that can be used by another application. Does Visual Studio have an option to export the whole thing?"}], "answers": [{"tags": [], "owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1478130364, "creation_date": 1478130364, "answer_id": 40391656, "question_id": 40391444, "link": "https://stackoverflow.com/questions/40391444/visual-studio-outputs-obj-but-not-lib/40391656#40391656", "title": "Visual Studio outputs .obj but not .lib", "body": "<p>Does your dll have any actual exports? If there are no , the linker will not generate an import library .lib file.</p>\n"}], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478188048, "creation_date": 1478129034, "last_edit_date": 1495540415, "question_id": 40391444, "link": "https://stackoverflow.com/questions/40391444/visual-studio-outputs-obj-but-not-lib", "title": "Visual Studio outputs .obj but not .lib", "body": "<p>I have a large Visual Studio project with C and C++ code. The Target Extension is .dll and the Configuration Type is Dynamic Link Library. It builds the .dll just fine and outputs tons of .obj files. How do I get Visual Studio to give me one .lib (object library) file instead of tons of .obj files?</p>\n\n<p>I've tried <a href=\"https://stackoverflow.com/a/584066/1241782\">entering a value for the Import Library option</a> but it doesn't change anything. I need the .lib because when I create a new test program referencing my .dll I get tons of <code>error LNK2001: unresolved external symbol</code> errors, which indicates that I need the object library.</p>\n\n<p>Close vote: this question is <strong>well within</strong> <a href=\"https://stackoverflow.com/help/on-topic\">What topics can I ask here?</a></p>\n"}, {"tags": ["c", "recursion", "queue"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1478129508, "post_id": 40391421, "comment_id": 68034680, "body": "What is it supposed to do? If it&#39;s supposed to make coffee, then no it will not do that."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1478129634, "post_id": 40391421, "comment_id": 68034712, "body": "@immibis it recursively walks to the last node of a forward-linked list, sets the pointer that points to said-node to NULL, then frees the null pointer and leaks memory. In short, it is an exercise in recursion and pointer-to-pointer usage to perform a task in arguably the <i>least</i> efficient way possible. It is also guaranteed to invoke undefined behavior when executed on an empty (null pointer) queue."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1478129725, "post_id": 40391421, "comment_id": 68034742, "body": "@WhozCraig That is not what I asked. Re-read my comment."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1478129755, "post_id": 40391421, "comment_id": 68034749, "body": "@immibis gotcha. And here I thought the answer to that was in the title of the question. My bad."}, {"owner": {"reputation": 135, "user_id": 5786544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf4fafe56ad0c8b913995c3e8c0b6ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Denolth", "link": "https://stackoverflow.com/users/5786544/denolth"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1478130099, "post_id": 40391421, "comment_id": 68034833, "body": "@immibis I&#39;m not sure I understand your question. It&#39;s supposed to do what any non-recursive function for removing a queue element would, like WhozCraig said. If you mean in details, than mostly I&#39;m curious why you set something to NULL and then free it. This was given by the professor, but I can&#39;t figure out if he made a mistake there or what. Pretty much, what I&#39;m asking is if this function removes the last element like it&#39;s supposed to, or if the pointer surgery is performed incorrectly."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1478130166, "post_id": 40391421, "comment_id": 68034852, "body": "@Denolth There are many non-recursive functions for removing queue elements, and some of them act like this one, and some don&#39;t."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1478130195, "post_id": 40391421, "comment_id": 68034859, "body": "@Denolth was it given as a &quot;what&#39;s wrong with this dreadful code?&quot; question? Eg: Find everything wrong with this and make it work correctly kinda-thing? I sincerely hope so, or I pray you course text is better than your professor&#39;s code."}, {"owner": {"reputation": 135, "user_id": 5786544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf4fafe56ad0c8b913995c3e8c0b6ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Denolth", "link": "https://stackoverflow.com/users/5786544/denolth"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1478130749, "post_id": 40391421, "comment_id": 68034983, "body": "@WhozCraig It wasn&#39;t =X This is the supposedly working code"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1478131049, "post_id": 40391421, "comment_id": 68035066, "body": "@Denolth I&#39;m sure it <i>appears</i> to work in terms of the list management, but in reality there is a blatant memory leak as immibis&#39; answer shows. Also, unless you&#39;re using some sentinel-node construct (which I&#39;ve never liked, as NULL is a damn-fine &quot;sentinel&quot; for &quot;this thing is empty&quot; imho), the opening deference (not the <code>*</code>, rather the <code>-&gt;</code>) will invoke undefined behavior if <code>*A</code> does not contain a valid, non-null pointer. The former of these can be fixed by swapping the order of the two final lines in the if-block. The latter requires a test of <code>*A</code> before doing anything else in the function."}], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1478132099, "post_id": 40391639, "comment_id": 68035302, "body": "You might provide the answer to <i>how to fix it</i>"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 2, "last_activity_date": 1478130258, "creation_date": 1478130258, "answer_id": 40391639, "question_id": 40391421, "link": "https://stackoverflow.com/questions/40391421/removing-from-linked-queue-recursively-in-c/40391639#40391639", "title": "Removing from Linked Queue Recursively in C", "body": "<p>This function does remove the last element. Note that at the last step of recursion, <code>A</code> will point to either the list head pointer, or the second-to-last element's <code>next</code> pointer.</p>\n\n<p>It will then set this pointer to NULL, unlinking the last element from the list.</p>\n\n<p>However, it will not free the last element because <code>free(NULL)</code> does nothing.</p>\n"}], "owner": {"reputation": 135, "user_id": 5786544, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf4fafe56ad0c8b913995c3e8c0b6ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Denolth", "link": "https://stackoverflow.com/users/5786544/denolth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 40391639, "answer_count": 1, "score": -1, "last_activity_date": 1478130258, "creation_date": 1478128836, "question_id": 40391421, "link": "https://stackoverflow.com/questions/40391421/removing-from-linked-queue-recursively-in-c", "title": "Removing from Linked Queue Recursively in C", "body": "<p>I've been given this linked queue code for removing an element from a linked queue structure in C. Normally I'd implement this differently, but this code is using recursion. Will it do what it's supposed to do, and why? And if it doesn't, is there a way to fix it so that it does? I'm really new to this recursion thing. Thanks!</p>\n\n<pre><code>typedef struct telement T;\nstruct telement{\n    int value;\n    T* next;\n};\n\nvoid Out (T **A){\n    if ((*A)-&gt;next == NULL){\n        printf(\"\\n --I'm removing element with value %d.---\", (*A)-&gt;value);\n        (*A) = NULL;\n        free(*A);\n    }\n    else{\n        Out(&amp;(*A)-&gt;next);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "winapi", "screensaver"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1478129136, "post_id": 40391378, "comment_id": 68034589, "body": "you can&#39;t really put the system into an idle state manually, only user activity manages that. But, you can invoke the user&#39;s screensaver by sending a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646360.aspx\" rel=\"nofollow noreferrer\"><code>WM_SYSCOMMAND</code></a>(<code>SC_SCREENSAVE</code>) message to the foreground window."}], "answers": [{"tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": false, "score": 0, "last_activity_date": 1478768870, "last_edit_date": 1478768870, "creation_date": 1478767958, "answer_id": 40523395, "question_id": 40391378, "link": "https://stackoverflow.com/questions/40391378/how-to-activate-system-idle-state-of-windows/40523395#40523395", "title": "How to activate system idle state of Windows?", "body": "<p>Maybe <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa373201(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SetSuspendState</code></a> or <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa373206(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>SetSystemPowerState</code></a> are what you are looking for.</p>\n"}], "owner": {"reputation": 846, "user_id": 7107236, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/78c19dc77fb2c97693fa26cd1b8b4e55?s=128&d=identicon&r=PG&f=1", "display_name": "303", "link": "https://stackoverflow.com/users/7107236/303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478768870, "creation_date": 1478128570, "last_edit_date": 1478141045, "question_id": 40391378, "link": "https://stackoverflow.com/questions/40391378/how-to-activate-system-idle-state-of-windows", "title": "How to activate system idle state of Windows?", "body": "<p>I am working on a C application which runs in the background without any Windows control.</p>\n\n<p>I want to put Windows in a system idle state as if the screen saver is enabled and the ScreenSaveTimeOut value is reached.</p>\n\n<p>I can simulate the desired behaviour to some extent by using SystemParametersInfo with SPI_SETSCREENSAVERACTIVE and SPI_SETSCREENSAVETIMEOUT=1 parameters.</p>\n\n<p>Unfortunately, this requires me to use a screen saver.</p>\n\n<p>Are there any APIs available which I could use in order to put Windows directly in an idle state?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "loops", "command", "printf"], "comments": [{"owner": {"reputation": 2307, "user_id": 1264727, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a1fbb1447f3c3c2bc500e2b744ee6c9?s=128&d=identicon&r=PG", "display_name": "DUman", "link": "https://stackoverflow.com/users/1264727/duman"}, "edited": false, "score": 1, "creation_date": 1478126626, "post_id": 40391009, "comment_id": 68033804, "body": "<code>&#47;etc&#47;passwd</code> is a string, it shouldn&#39;t be assigned to an <code>int</code>. An assignment like <code>char* passwd = &quot;&#47;etc&#47;passwd&quot;;</code> needs to be used."}, {"owner": {"reputation": 26, "user_id": 7106941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc4340f42211f85bcc88441739b9110?s=128&d=identicon&r=PG&f=1", "display_name": "Freshnuts", "link": "https://stackoverflow.com/users/7106941/freshnuts"}, "reply_to_user": {"reputation": 2307, "user_id": 1264727, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4a1fbb1447f3c3c2bc500e2b744ee6c9?s=128&d=identicon&r=PG", "display_name": "DUman", "link": "https://stackoverflow.com/users/1264727/duman"}, "edited": false, "score": 0, "creation_date": 1478127017, "post_id": 40391009, "comment_id": 68033931, "body": "@DUman thank for the heads up man, I changed it and noted it down."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1478127905, "post_id": 40391009, "comment_id": 68034221, "body": "<code>line</code> will have a \\n at the end of it."}, {"owner": {"reputation": 26, "user_id": 7106941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc4340f42211f85bcc88441739b9110?s=128&d=identicon&r=PG&f=1", "display_name": "Freshnuts", "link": "https://stackoverflow.com/users/7106941/freshnuts"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1478151521, "post_id": 40391009, "comment_id": 68039903, "body": "@immibis thanks, I see what you&#39;re saying. I&#39;m working on removing the newline escape sequence character."}, {"owner": {"reputation": 26, "user_id": 7106941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc4340f42211f85bcc88441739b9110?s=128&d=identicon&r=PG&f=1", "display_name": "Freshnuts", "link": "https://stackoverflow.com/users/7106941/freshnuts"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1478295832, "post_id": 40391009, "comment_id": 68112724, "body": "@immibis I was able to line -1 and the output is clean. Except, I cannot get the output of grep root to display."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 7106941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc4340f42211f85bcc88441739b9110?s=128&d=identicon&r=PG&f=1", "display_name": "Freshnuts", "link": "https://stackoverflow.com/users/7106941/freshnuts"}, "is_accepted": true, "score": 0, "last_activity_date": 1478297520, "creation_date": 1478297520, "answer_id": 40432432, "question_id": 40391009, "link": "https://stackoverflow.com/questions/40391009/c-programming-element-array-into-sprintf/40432432#40432432", "title": "C Programming Element array into sprintf()", "body": "<p>The reason line-1 wasn't working in..</p>\n\n<pre><code>sprintf(url,\"/usr/bin/curl %s%s %s\\n\", argv[1], line-1, root);\n</code></pre>\n\n<p>was due to line(/etc/passwd\\n) from file was being cut by 1 and \nit didn't allow char *root variable to be implemented into string format.</p>\n\n<p>The function strtok() breaks line into a series of tokens using a delimiter. I was then able to parse \"/etc/passwd\\n\" to \"/etc/passwd\" BEFORE sprintf().</p>\n\n<p>Thanks  DUman &amp; immibis</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char * argv[])\n{\n  printf(\"\\nlfi_check searches for system files on a vulnerable URL\\n\");\n  printf(\"&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;\\n\\n\");\n\n  if (argc != 2)\n  {\n    printf(\"\\nusage ./lfi_check http://target.php?page= \\n\");\n  }\n  else\n  {\n    char url[4096];\n    int i;\n    FILE *fp;\n    char line[200];\n    char *root = \" | grep root\";\n\n    fp = fopen(\"/root/freshnuts/pentest/lfi_rfi/lfi_test\",\"r+\");\n\n    for (i=0; i &lt;= 2; i++)\n    {\n      fgets(line,sizeof(line), fp);\n      strtok(line, \"\\n\");\n      sprintf(url,\"/usr/bin/curl %s%s %s\\n\", argv[1], line,root);\n      system(url);\n    }\n\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 26, "user_id": 7106941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bc4340f42211f85bcc88441739b9110?s=128&d=identicon&r=PG&f=1", "display_name": "Freshnuts", "link": "https://stackoverflow.com/users/7106941/freshnuts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 40432432, "answer_count": 1, "score": 1, "last_activity_date": 1478297520, "creation_date": 1478126391, "last_edit_date": 1478295774, "question_id": 40391009, "link": "https://stackoverflow.com/questions/40391009/c-programming-element-array-into-sprintf", "title": "C Programming Element array into sprintf()", "body": "<p>This is a pentesting laboratory environment called \"Mutillidae\".</p>\n\n<p>This program grabs argv[1] and places into command \"curl &lt;[argv[1]>\",\nthen it grabs a line from lfi_test file and places it into second\n%s in sprintf(). This program executes %100, I am just having issues with the format( | grep root). Instead, the entire source code is revealed including the entire /etc/passwd file.</p>\n\n<p>If I uncomment line #20:</p>\n\n<pre><code>int passwd = \"/etc/passwd\";\n</code></pre>\n\n<p>and change line #27 to </p>\n\n<pre><code>sprintf(url,\"/usr/bin/curl %s%s\", argv[1], passwd);\n</code></pre>\n\n<p>I am able to get the formatted result I want.\nIf anyone can help me out, thank you in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char * argv[])\n{\n  printf(\"\\nlfi_check searches for system files on a vulnerable URL\\n\");\n  printf(\"&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;\\n\\n\");\n\n  if (argc != 2)\n  {\n    printf(\"\\nusage ./lfi_check http://target.php?page= \\n\");\n  }\n  else\n  {\n    char url[200];\n    int i;\n    FILE *fp;\n    char line[200];\n    char *root = \"| grep root\"\n//    char *passwd = \"/etc/passwd\";\n\n    fp = fopen(\"/home/freshnuts/pentest/lfi_rfi/lfi_test\",\"r+\");\n\n    for (i=0; i &lt;= 1; i++)\n    {\n      fgets(line,sizeof(line), fp);\n      sprintf(url,\"/usr/bin/curl %s%s %s\", argv[1], line-1, root);\n//      printf(\"%s\", line);\n      system(url);\n    }\n\n  }\n}\n</code></pre>\n"}, {"tags": ["c", "cobol", "mainframe"], "comments": [{"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 1, "creation_date": 1478129728, "post_id": 40390918, "comment_id": 68034743, "body": "What abend? What displacement in what program? Why <code>BY VALUE</code> for everything, I would have thought for comparison-type only, the others BY REFERENCE? Are you aware of what that does? Forget <code>SYNCHRONIZED</code>. Why WS- prefix for your LINKAGE SECTION items? Strictly you should always set WS-RETURN to something before GOBACK. Which version of Enterprise COBOL? Is the the call from the C coming from a DLL? Have you asked the vendor (you license includes support)."}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 2, "creation_date": 1478129837, "post_id": 40390918, "comment_id": 68034771, "body": "23 views in an hour, and two upvotes. That&#39;s a Wow! for a COBOL question. Probably means more C than COBOL people reading, and more non-Mainframe than Mainframe :-)"}, {"owner": {"reputation": 10985, "user_id": 2664350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267fd556e7bd18db2e3923939cd3dd6b?s=128&d=identicon&r=PG", "display_name": "piet.t", "link": "https://stackoverflow.com/users/2664350/piet-t"}, "edited": false, "score": 0, "creation_date": 1478162627, "post_id": 40390918, "comment_id": 68044408, "body": "What is your <code>PROGRAM-ID</code>? Is the exit meant to be statically linked or is the vendor-routine <code>fetch</code>ing your cobol-dll?"}, {"owner": {"reputation": 99, "user_id": 7107018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfb28055194a31868a282c057636541?s=128&d=identicon&r=PG&f=1", "display_name": "David Doyle", "link": "https://stackoverflow.com/users/7107018/david-doyle"}, "edited": false, "score": 0, "creation_date": 1478178191, "post_id": 40390918, "comment_id": 68054428, "body": "I&#39;ve updated the original question to answer some of the clarifications  posed by Bill &amp; Piet."}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 1, "creation_date": 1478180006, "post_id": 40390918, "comment_id": 68055794, "body": "Thanks. <code>From entry point main</code> indicates that the abend has come from a C (or C++) program, as Enterprise COBOL does not have &quot;main&quot; - if it was an abend in your program, it would say SomeExit at that point. It is a User Abend, with a code of 16. User Abends are specific to an application. The product you are running has generated the Abend. It means that it has identified something as incorrect, and the incorrectness was terminal. Check the any spool files (from number three onwards) as there may (or may not) be additional messages."}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "reply_to_user": {"reputation": 10985, "user_id": 2664350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267fd556e7bd18db2e3923939cd3dd6b?s=128&d=identicon&r=PG", "display_name": "piet.t", "link": "https://stackoverflow.com/users/2664350/piet-t"}, "edited": false, "score": 1, "creation_date": 1478180402, "post_id": 40390918, "comment_id": 68056066, "body": "Since without your module present at all you get a failure (although which Abend code for that? S806?) @piet.t&#39;s point about whether the exit is supposed to be statically linked or not is worth confirming in the documentation for the exit. For the POINTER items, use BY REFERENCE. For the other, you can use BY VALUE. I think you are OK leaving the RETURNING item as it is. I can&#39;t imagine a way that any changes there would affect the abend. Do you know if the vendor code is 64-bit? If yes, forget using a COBOL program for it.#"}, {"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 0, "creation_date": 1478180610, "post_id": 40390918, "comment_id": 68056213, "body": "You have to ask the vendor what a U16 is in that code. You may be able to get a module name by matching up the address, or if not it depends what you can &quot;see&quot; in the dump. You are close to the end of what you can do with this."}, {"owner": {"reputation": 99, "user_id": 7107018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfb28055194a31868a282c057636541?s=128&d=identicon&r=PG&f=1", "display_name": "David Doyle", "link": "https://stackoverflow.com/users/7107018/david-doyle"}, "edited": false, "score": 0, "creation_date": 1478194684, "post_id": 40390918, "comment_id": 68065903, "body": "I&#39;ve made progress enough that the exit is being called.  I&#39;ll post the solution  later once I&#39;ve verified."}], "answers": [{"comments": [{"owner": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 1, "creation_date": 1478215656, "post_id": 40412387, "comment_id": 68075868, "body": "Thanks for posting the solution. I didn&#39;t notice the ... before. If you had code there using the parameters, you would have clobbered something somewhere. Did you just not see the output from the DISPLAY (no SYSOUT DD?)? Or did the compile/linkedit/binder options fix the abend? Anyway, good work."}, {"owner": {"reputation": 99, "user_id": 7107018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfb28055194a31868a282c057636541?s=128&d=identicon&r=PG&f=1", "display_name": "David Doyle", "link": "https://stackoverflow.com/users/7107018/david-doyle"}, "reply_to_user": {"reputation": 12672, "user_id": 1927206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434140a485dca639d56237db0fbeef54?s=128&d=identicon&r=PG", "display_name": "Bill Woodger", "link": "https://stackoverflow.com/users/1927206/bill-woodger"}, "edited": false, "score": 1, "creation_date": 1478557893, "post_id": 40412387, "comment_id": 68196319, "body": "@BillWoodger yes the ... referenced logic that read the parameters (but didn&#39;t update them), not relevant to the issue I was having though. Until I made the change it wasn&#39;t getting to the display statement."}], "tags": [], "owner": {"reputation": 99, "user_id": 7107018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfb28055194a31868a282c057636541?s=128&d=identicon&r=PG&f=1", "display_name": "David Doyle", "link": "https://stackoverflow.com/users/7107018/david-doyle"}, "is_accepted": true, "score": 4, "last_activity_date": 1478212605, "creation_date": 1478212605, "answer_id": 40412387, "question_id": 40390918, "link": "https://stackoverflow.com/questions/40390918/c-cobol-interlanguage-communication-on-mainframe/40412387#40412387", "title": "C -&gt; COBOL interlanguage communication on mainframe", "body": "<p>Thanks to the comments I was able to determine a solution based on better understanding of the calling structure per Bills suggestion.  Given this C prototype:</p>\n\n<pre><code>extern int SomeExit (void * Parameters,\n                     void * Record1,\n                     void * Record2,\n                     char ComparisonType,\n                     char * RankString,\n                     void * NotUsed1,\n                     int * NotUsed2)\n</code></pre>\n\n<p>The solution:</p>\n\n<pre><code>IDENTIFICATION DIVISION.     \nPROGRAM-ID.    \"SomeExit\".   \n...\nLINKAGE SECTION.      \n01  WS-PARAMETERS        PIC X(10).    \n01  SORT-PASS-RECORD1    PIC X(50).    \n01  SORT-PASS-RECORD2    PIC X(50).    \n01  WS-COMPARISON-TYPE   PIC X.\n01  WS-RANK-STRING       PIC X(6).                  \n01  WS-NOT-USED1         PIC X.                     \n01  WS-NOT-USED2         PIC X.                     \n01  WS-RETURN            PIC S9(9) USAGE IS BINARY.\n... \nPROCEDURE DIVISION USING                     \n        BY REFERENCE WS-PARAMETERS       \n        BY REFERENCE SORT-PASS-RECORD1   \n        BY REFERENCE SORT-PASS-RECORD2   \n        BY VALUE     WS-COMPARISON-TYPE  \n        BY REFERENCE WS-RANK-STRING      \n        BY REFERENCE WS-NOT-USED1        \n        BY REFERENCE WS-NOT-USED2        \n           RETURNING WS-RETURN.          \n    DISPLAY 'IN EXIT'.\n    ... \n    MOVE 0 TO WS-RETURN.\n    GOBACK.\n</code></pre>\n\n<p>With the above the user exit was successfully called and returned a value to the vendor logic.  I used the following parameters for compilation <code>RENT, TRUNC(BIN), DLL,EXPORTALL</code> and for linking <code>DYNAM(DLL),RENT</code>.  Not needed for my application but if the calling program is expecting a mixed case routine name in the called program as used in the above example solution then <code>PGMNAME(LONGMIXED)</code> would have been needed also.</p>\n\n<p>Thanks to all the commenters for pointing me in the right direction.</p>\n"}], "owner": {"reputation": 99, "user_id": 7107018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfb28055194a31868a282c057636541?s=128&d=identicon&r=PG&f=1", "display_name": "David Doyle", "link": "https://stackoverflow.com/users/7107018/david-doyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 40412387, "answer_count": 1, "score": 5, "last_activity_date": 1478212605, "creation_date": 1478125847, "last_edit_date": 1478180113, "question_id": 40390918, "link": "https://stackoverflow.com/questions/40390918/c-cobol-interlanguage-communication-on-mainframe", "title": "C -&gt; COBOL interlanguage communication on mainframe", "body": "<p>A vendor package written in C on the mainframe offers the option to override a portion of it's functionality via a user exit.  The provided C function prototype is:</p>\n\n<pre><code>extern int SomeExit (void * Parameters,\n                     void * Record1,\n                     void * Record2,\n                     char ComparisonType,\n                     char * RankString,\n                     void * NotUsed1,\n                     int * NotUsed2)\n</code></pre>\n\n<p>As we are primarily a COBOL shop I defined an Enterprise COBOL 4.2 program (as a DLL) to implement the exit trying to follow the conventions given in the IBM ILC guide (<a href=\"https://www.ibm.com/support/knowledgecenter/en/SSLTBW_1.13.0/com.ibm.zos.r13.ceea400/clcccb5.htm#clcccb5\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/en/SSLTBW_1.13.0/com.ibm.zos.r13.ceea400/clcccb5.htm#clcccb5</a>) and the examples in this old SHARE presentation: <a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg27003846&amp;aid=1\" rel=\"nofollow noreferrer\">http://www-01.ibm.com/support/docview.wss?uid=swg27003846&amp;aid=1</a> but the resulting program is abending as it calls the exit and prior to my <code>DISPLAY</code> message.  My assumption is that I have not declared the receiving data structures correctly.  Below is a snippet of my current test code (ignore my naming conventions - this is a prototype to prove out the interface and will be rewritten to our in-house standards once I have the basic call working).  </p>\n\n<pre><code>IDENTIFICATION DIVISION.   \nPROGRAM-ID.    \"SomeExit\". \n...\nLINKAGE SECTION.                                               \n01  WS-PARAMETERS-POINTER       USAGE IS POINTER SYNCHRONIZED. \n01  SORT-PASS-RECORD1-POINTER   USAGE IS POINTER SYNCHRONIZED. \n01  SORT-PASS-RECORD2-POINTER   USAGE IS POINTER SYNCHRONIZED. \n01  WS-COMPARISION-TYPE         PIC X.\n01  WS-RANK-STRING-POINTER      USAGE IS POINTER SYNCHRONIZED. \n01  WS-NOT-USED1-POINTER        USAGE IS POINTER SYNCHRONIZED. \n01  WS-NOT-USED2-POINTER        USAGE IS POINTER SYNCHRONIZED. \n01  WS-RETURN                   PIC S9(9) USAGE IS BINARY.\n...\nPROCEDURE DIVISION USING BY VALUE WS-PARAMETERS-POINTER     \n                     SORT-PASS-RECORD1-POINTER          \n                     SORT-PASS-RECORD2-POINTER          \n                     WS-COMPARISION-TYPE                \n                     WS-RANK-STRING-POINTER             \n                     WS-NOT-USED1-POINTER               \n                     WS-NOT-USED2-POINTER               \n               RETURNING WS-RETURN.                     \n\nDISPLAY 'IN EXIT'.\n... \nMOVE 0 TO WS-RETURN.\nGOBACK.\n</code></pre>\n\n<p>The abend is:</p>\n\n<pre><code>CEE3250C The system or user abend U 016 R=00000000 was issued.                                                     \n     From entry point main at compile unit offset +00000192 at entry offset +00000192 at address 28500ECA.     \n</code></pre>\n\n<p>The vendor code calls the DLL dynamically.  When I delete the DLL I get a message that the exit cannot be found and so it seems like the C code is attempting to call it.</p>\n\n<p>I have tried variations on the <code>PROCEDURE DIVISION USING</code> including dropping the <code>BY VALUE</code>, using <code>BY REFERENCE</code> (though I understand that is the default) and replacing the <code>POINTERs</code> with the actual structure definitions.  Have I misunderstood the manual on how to structure the parameters passed to the COBOL routine?</p>\n\n<p>Edit: I do have a support ticket open with the vendor but they have not responded with anything useful yet.</p>\n\n<p>Thanks, David</p>\n"}, {"tags": ["c++", "c", "gcc", "assembly"], "answers": [{"comments": [{"owner": {"reputation": 2640, "user_id": 802302, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/053d7640a7c3364e34c4b9a1a7a84406?s=128&d=identicon&r=PG", "display_name": "csteifel", "link": "https://stackoverflow.com/users/802302/csteifel"}, "edited": false, "score": 0, "creation_date": 1478125614, "post_id": 40390760, "comment_id": 68033425, "body": "So the documentation saying that the second part of it should be a long is just legacy from when bool&#39;s weren&#39;t first class citizens? Cause then it wouldn&#39;t make sense for the second arg to be anything other than 1 or 0 no?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2640, "user_id": 802302, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/053d7640a7c3364e34c4b9a1a7a84406?s=128&d=identicon&r=PG", "display_name": "csteifel", "link": "https://stackoverflow.com/users/802302/csteifel"}, "edited": false, "score": 0, "creation_date": 1478125780, "post_id": 40390760, "comment_id": 68033494, "body": "@legion Note that this is also a C builtin. But yeah, it doesn&#39;t make much sense to pass a value other than 0 or 1."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1478132396, "post_id": 40390760, "comment_id": 68035353, "body": "I&#39;m pretty sure the macros are supposed to be <code>#define likely(expr)   __builtin_expect(!!(expr), 1)</code> and <code>#define unlikely(expr) __builtin_expect(!!(expr), 0)</code>, which allows the idiomatic was of writing <code>if (likely(expr))</code> even if <code>expr</code> is not exclusively zero or one."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1478134398, "post_id": 40390760, "comment_id": 68035814, "body": "@Barry: At least not in an if statement. In a switch, on the other hand, other values may be useful."}, {"owner": {"reputation": 9192, "user_id": 2040040, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FD6QD.png?s=128&g=1", "display_name": "johnchen902", "link": "https://stackoverflow.com/users/2040040/johnchen902"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1478137804, "post_id": 40390760, "comment_id": 68036590, "body": "@EOF Is <code>(bool)</code> better than <code>!!</code>?"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "reply_to_user": {"reputation": 9192, "user_id": 2040040, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/FD6QD.png?s=128&g=1", "display_name": "johnchen902", "link": "https://stackoverflow.com/users/2040040/johnchen902"}, "edited": false, "score": 0, "creation_date": 1478177856, "post_id": 40390760, "comment_id": 68054195, "body": "@johnchen902: <code>!!</code> is shorter. The compiler should consider them same in terms of final machine code produced."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1478194766, "post_id": 40390760, "comment_id": 68065946, "body": "@KerrekSB: The problem is that <code>__builtin_expect()</code> returns an <code>int</code>, not whatever type the expression had. It&#39;s a terrible design choice that makes it far less useful than it could be. For example, if it returned the original type, you could tell the compiler how many iterations you expect a loop to run, which could be useful to make choices about unrolling/vectorizing. But if you do the sane thing and use <code>size_t</code> for your iterator, you get <code>signed&#47;unsigned</code> ickyness."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1478204375, "post_id": 40390760, "comment_id": 68071183, "body": "@EOF: According to <a href=\"https://gcc.gnu.org/onlinedocs/gcc-6.1.0/gcc/Other-Builtins.html\" rel=\"nofollow noreferrer\">the GCC documentation</a>, the return type is <code>long</code>. And indeed it&#39;s not meant for the kind of thing you&#39;d like to do. (And in general you should be doing FDO, not annotating source code.)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1478125102, "creation_date": 1478125102, "answer_id": 40390760, "question_id": 40390583, "link": "https://stackoverflow.com/questions/40390583/gccs-builtin-expect-assembly-dump-seems-to-always-go-down-branch/40390760#40390760", "title": "GCC&#39;s __builtin_expect assembly dump seems to always go down branch", "body": "<p>From <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.0.2/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fexpect-2284\" rel=\"nofollow noreferrer\">the docs</a>:</p>\n\n<blockquote>\n  <p>The return value is the value of <em>exp</em>, which should be an integral expression.</p>\n</blockquote>\n\n<p>So the logical semantics of:</p>\n\n<pre><code>if(__builtin_expect(num,4)) { ... }\n</code></pre>\n\n<p>are:</p>\n\n<pre><code>if (num) { ... }\n</code></pre>\n\n<p>which is different than what you say you want. If you want to write that you expect that <code>num == 4</code> to be very likely, you want:</p>\n\n<pre><code>if (__builtin_expect(num == 4, 1)) { ... }\n</code></pre>\n\n<p>Commonly, you'd just wrap these in macros:</p>\n\n<pre><code>#define likely(expr)   __builtin_expect((expr), 1)\n#define unlikely(expr) __builtin_expect((expr), 0)\n</code></pre>\n\n<p>and then the usage becomes more natural:</p>\n\n<pre><code>if (likely(num == 4)) { ... }\n</code></pre>\n"}], "owner": {"reputation": 2640, "user_id": 802302, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/053d7640a7c3364e34c4b9a1a7a84406?s=128&d=identicon&r=PG", "display_name": "csteifel", "link": "https://stackoverflow.com/users/802302/csteifel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 40390760, "answer_count": 1, "score": 3, "last_activity_date": 1478125106, "creation_date": 1478124145, "last_edit_date": 1478125106, "question_id": 40390583, "link": "https://stackoverflow.com/questions/40390583/gccs-builtin-expect-assembly-dump-seems-to-always-go-down-branch", "title": "GCC&#39;s __builtin_expect assembly dump seems to always go down branch", "body": "<p>Ok so I have been playing around with __builtin_expect a bit and I just created a simple test program that I put through godbolt.org to get the assembly output (<a href=\"https://godbolt.org/g/FZo5fP\" rel=\"nofollow noreferrer\">https://godbolt.org/g/FZo5fP</a>)</p>\n\n<pre><code>int main(){\n  volatile int num = 4;\n  //if(num == 4){\n  if(__builtin_expect(num,4)){\n    return num*800;\n  }else{\n    return num*500;\n  }\n}\n</code></pre>\n\n<p>When compiled with -O1 or greater produces:</p>\n\n<pre><code>main:\n        mov     DWORD PTR [rsp-4], 4\n        mov     eax, DWORD PTR [rsp-4]\n        test    eax, eax\n        mov     eax, DWORD PTR [rsp-4]\n        je      .L2\n        imul    eax, eax, 800\n        ret\n.L2:\n        imul    eax, eax, 500\n        ret\n</code></pre>\n\n<p>It seems as though the part that says <code>test eax,eax</code> would always set zero flag to 0 unless <code>num</code> was equal to 0. So it seems as though if <code>num</code> is not set to 0 it will always multiply by 800 instead of only when <code>num=4</code>. My understanding of __builtin_expect is that while it will  optimize to assume that it will go to that branch it should still be comparing to ensure that it should use that branch.</p>\n\n<p>If I switch __builtin_expect to just == it produces </p>\n\n<pre><code>main:\n        mov     DWORD PTR [rsp-4], 2\n        mov     eax, DWORD PTR [rsp-4]\n        cmp     eax, 4\n        mov     eax, DWORD PTR [rsp-4]\n        je      .L5\n        imul    eax, eax, 500\n        ret\n.L5:\n        imul    eax, eax, 800\n        ret\n</code></pre>\n\n<p>Which makes much more sense to me in that it actually compares against 4. Is my understanding of __builtin_expect wrong? Does __builtin_expect actually only work with 0 or 1 even though it specifies that it takes a long?</p>\n"}, {"tags": ["c", "arrays", "file", "pointers", "scanf"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1478124326, "post_id": 40390556, "comment_id": 68032926, "body": "Take a look to <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1432, "user_id": 5036612, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/bf1ceca4bda9dba7776ffa4917e537c1?s=128&d=identicon&r=PG&f=1", "display_name": "Adalcar", "link": "https://stackoverflow.com/users/5036612/adalcar"}, "is_accepted": false, "score": 1, "last_activity_date": 1478125650, "creation_date": 1478125650, "answer_id": 40390873, "question_id": 40390556, "link": "https://stackoverflow.com/questions/40390556/how-to-use-fscanf-to-put-strings-into-an-array/40390873#40390873", "title": "How to use fscanf to put strings into an array?", "body": "<p>you can use a marker to set the \"current character\":</p>\n\n<pre><code>char *p2 = str;\nsize_t k = 0;\nsize_t pos = 0;\n//scan the strings of the file into str array at position pos\nwhile((k = fscanf(fp, \"%s\", p2 + pos)) != EOF){\n    // update pos\n    pos += k;\n    p2++;\n}//while loop 2\n</code></pre>\n\n<p>This will enable to store the whole file in your string \nPROVIDED IT IS LESS THAN 1000 CHARACTERS!\notherwise just add a safeguard in the while loop.</p>\n"}, {"tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 2, "last_activity_date": 1478131592, "last_edit_date": 1478131592, "creation_date": 1478130924, "answer_id": 40391731, "question_id": 40390556, "link": "https://stackoverflow.com/questions/40390556/how-to-use-fscanf-to-put-strings-into-an-array/40391731#40391731", "title": "How to use fscanf to put strings into an array?", "body": "<pre><code>char *p;\np = str;\nint j;\nfor (j = 0; j &lt; strlen(str); j++) \n{\n    printf(\"%s\\n\", p);\n    p++;\n}\n</code></pre>\n\n<p>You have one string, example <code>\"abcd\"</code>, you can just print it as <code>printf(\"%s\\n\", str);</code> Instead you are printing the same string starting at different offsets. Result is as follows:</p>\n\n<pre><code>abcd\nbcd\ncd\nd\n</code></pre>\n\n<p>Perhaps you are confused between \"character array\" and \"array of strings\"</p>\n\n<pre><code>//This will reserve 100 character arrays, or 100 strings\nchar *arr[100];\n\nint count = 0;\nwhile (fscanf(fp, \"%999s\", str) == 1)\n{\n    arr[count] = malloc(strlen(str) + 1);\n    strcpy(arr[count], str);\n    count++;\n    if (count == 100)\n        break;\n}\n\nint i;\nfor (i = 0; i &lt; count; i++) \n    printf(\"%s\\n\", arr[i]);\n</code></pre>\n\n<p>In real world application you use <code>malloc</code> and <code>realloc</code> to allocate array of strings large enough to read the file.</p>\n"}], "owner": {"reputation": 123, "user_id": 7066862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1d70972b971aef9aab1a5351bbeb7a75?s=128&d=identicon&r=PG&f=1", "display_name": "David Andvett", "link": "https://stackoverflow.com/users/7066862/david-andvett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1988, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478131592, "creation_date": 1478124040, "last_edit_date": 1478131365, "question_id": 40390556, "link": "https://stackoverflow.com/questions/40390556/how-to-use-fscanf-to-put-strings-into-an-array", "title": "How to use fscanf to put strings into an array?", "body": "<p>So I am using <code>fscanf</code> to read from a file, and I am trying put those strings into an array.  It seems to work but I'm only getting the last string into my array.  When i try to print it, I'm only print the characters of my last string.  I didn't include my method because it doesn't effect what <code>fscanf</code> does in case anyone got confused.  Also, my CMDLINE file has the following strings <code>foo barr tar 526-4567 456-8792</code>.</p>\n\n<p>output is :</p>\n\n<pre><code>456-8792\n56-8792\n6-8792\n</code></pre>\n\n<p>etc...</p>\n\n<pre><code>2\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>int main (int argC, char *argV[]) {\n    FILE *fp;\n    int index;\n    int ret;\n    char str[1000];\n\n    //Need at least 2 files to begin program\n    if (argC &lt; 3) {\n        fprintf(stderr, \"Usage: %s file\\n\", argV[0]);\n        exit(1);\n    }//if statemtn\n\n    //check to see if the CMDLINE file is in the arguements\n    ret = scanC(argC, argV);\n\n    //if no CMDLINE file is found, print error and exit\n    if (ret == 1) {\n        fprintf(stderr, \"you must provide a CMDLINE file\\n\");\n        exit(1);\n    }\n\n    //iterate and open CMDLINE file and read from it\n    for (index = 0; index &lt; argC; index++) {\n        if (strcmp(argV[index], \"CMDLINE\") == 0) {\n            fp = fopen(argV[index], \"r\");\n            //error check\n            if (fp == NULL) {\n                fprintf(stderr, \"Counld not open file %s\\n\", argV[index]);\n                exit(1);\n            }//if statment\n\n            //read from fscanf and put it's arguements into an array\n            while (!feof(fp)) {\n                char *p2 = str;\n                //scan the strings of the file into str array\n                while (fscanf(fp, \"%s\", p2) != EOF) {\n                    p2++;\n                }//while loop 2\n            }//while lop 1\n\n            //close the file for it is not needed to be open anymore\n            fclose(fp);\n        }//if statement\n    }//for looop\n\n    char *p;\n    p = str;\n    int j;\n    for (j = 0; j &lt; strlen(str); j++) {\n        printf(\"%s\\n\", p);\n        p++;\n    }\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c", "unix", "getaddrinfo"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 3459738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fe1e35d3189700e6c61a3e561b1a6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/3459738/jon"}, "is_accepted": false, "score": 0, "last_activity_date": 1478626531, "creation_date": 1478626531, "answer_id": 40493144, "question_id": 40390547, "link": "https://stackoverflow.com/questions/40390547/getaddrinfo-results-differ-for-numeric-vs-named-service/40493144#40493144", "title": "getaddrinfo - results differ for numeric vs. named service", "body": "<p>Apparently there is a lot of code that assumes protocol = 0 and type = SOCK_STREAM <strong>means</strong> TCP. If getaddrinfo() returns addrinfo structures with IPPROTO_SCTP, this code breaks. The compromise solution (at least for FreeBSD and linux), has been to continue to have getaddrinfo() return only IPPROTO_TCP addrinfo structures for protocol = 0 and type = SOCK_STREAM. Anyone wanting getaddrinfo() to return addrinfo structures with IPPROTO_SCTP should specify ai_protocol = IPPROTO_SCTP in the hints. This only applies when the service arg is specified as a number; services specified as a name will cause getaddrinfo() to consult the /etc/services database and the protocol specified in the results will be based on what was found there.</p>\n"}], "owner": {"reputation": 53, "user_id": 3459738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fe1e35d3189700e6c61a3e561b1a6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/3459738/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478626531, "creation_date": 1478123997, "last_edit_date": 1478549785, "question_id": 40390547, "link": "https://stackoverflow.com/questions/40390547/getaddrinfo-results-differ-for-numeric-vs-named-service", "title": "getaddrinfo - results differ for numeric vs. named service", "body": "<p>I have a question about the behavior of getaddrinfo(), which seems to depend on how the service argument is specified. Specifying the service as a name causes getaddrinfo() to use getservbyname() to query the /etc/services database, but specifying the service numerically apparently results in no such query, and this can lead to differences in the results.</p>\n\n<p>For example, specifying service = \"5672\" (the port for amqp), returns a list of addrinfo structures for the protocols IPPROTO_TCP, IPPROTO_UDP, and IPPROTO_IP, while specifying service = \"amqp\", returns a list of addrinfo structures for the protocols IPPROTO_TCP, IPPROTO_UDP, and IPPROTO_SCTP.</p>\n\n<p>Why doesn't getaddrinfo() query the /etc/services database when the service is specified numerically? Thanks for any help.</p>\n\n<p>Update:<br>\nTurns out that this is simply how getaddrinfo() is designed to handle the service parameter. If you know the port number, great. If you only know the service name getaddrinfo() will look up the port number for you.</p>\n\n<p>The real issue for me then is that, even though SCTP is installed on my system (Ubuntu 16.04), getaddrinfo() does not return addrinfo structures with IPPROTO_SCTP. Looking at the source for getaddrinfo() it looks like it returns addrinfo structures for all the protocols it knew about <strong>at the time it was built</strong> rather that at the time is was called.</p>\n\n<p>I think I may need to rebuild glibc to get a version of getaddrinfo() that supports SCTP. Can anyone confirm or correct my understanding?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27069, "user_id": 2307070, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/l8ha6.jpg?s=128&g=1", "display_name": "Thomas Ayoub", "link": "https://stackoverflow.com/users/2307070/thomas-ayoub"}, "edited": false, "score": 3, "creation_date": 1478123048, "post_id": 40390306, "comment_id": 68032364, "body": "<code>it does not work</code> =&gt; what do you mean?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 5, "creation_date": 1478123118, "post_id": 40390306, "comment_id": 68032391, "body": "You are using <code>n3</code> uninitialized in <code>while(n3&lt;received)</code>, this is undefined behaviour"}, {"owner": {"reputation": 400, "user_id": 5999939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gh4yL.jpg?s=128&g=1", "display_name": "Arash Younesi", "link": "https://stackoverflow.com/users/5999939/arash-younesi"}, "edited": false, "score": 0, "creation_date": 1478123268, "post_id": 40390306, "comment_id": 68032462, "body": "reset the amount of variables in lines 9,10,11 . i can see that variables have their pervious amount."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1478123323, "post_id": 40390306, "comment_id": 68032486, "body": "@ARASH Put that info in the question not in comments. &quot;It doesn&#39;t work&quot; by itself is not useful."}, {"owner": {"reputation": 400, "user_id": 5999939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gh4yL.jpg?s=128&g=1", "display_name": "Arash Younesi", "link": "https://stackoverflow.com/users/5999939/arash-younesi"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1478123555, "post_id": 40390306, "comment_id": 68032586, "body": "@Keine Lust thank you so much i did not attach n3 any amount it works very well thanks again."}], "answers": [{"comments": [{"owner": {"reputation": 6743, "user_id": 6919895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-qqkN_JOgCvM/AAAAAAAAAAI/AAAAAAAAABE/m4r_i_2yiy8/photo.jpg?sz=128", "display_name": "Treycos", "link": "https://stackoverflow.com/users/6919895/treycos"}, "edited": false, "score": 0, "creation_date": 1478124119, "post_id": 40390426, "comment_id": 68032830, "body": "Make sure your code is correctly edited and give a bit more explanations :)"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1478162555, "post_id": 40390426, "comment_id": 68044376, "body": "You still invoke undefined behavior if the user enters <code>0</code> the first time as <code>n3</code> is uninitialized in the <code>if(n1==received || n2==received || n3==received)</code> test.  <code>n3</code> must be initialized in all cases."}], "tags": [], "owner": {"reputation": 7, "user_id": 6844051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53daa16c4d2b295e641ede659511aeeb?s=128&d=identicon&r=PG&f=1", "display_name": "user6844051", "link": "https://stackoverflow.com/users/6844051/user6844051"}, "is_accepted": false, "score": -2, "last_activity_date": 1478123545, "creation_date": 1478123545, "answer_id": 40390426, "question_id": 40390306, "link": "https://stackoverflow.com/questions/40390306/reset-the-amount-of-a-variable-in-c/40390426#40390426", "title": "reset the amount of a variable in c", "body": "<p>I think you meant the i\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\nmain()\n{\nint received,n1,n2,n3,i;\ndo\n{\nprintf(\"Please enter a number to evaluate : \");\nn1=1;\nn2=1;\ni=0;    \nscanf(\"%d\",&amp;received);\n while(i&lt;received)\n {\n    if (i==1)\n {   \n     n1=1;\n  }else\n {\n n3=n1+n2;\n n1=n2;\n n2=n3;\n }\n i++;\n printf(\"%4d \\n\",n1) ;\n }\n if(n1==received || n2==received || n3==received)\n {\n    printf(\"True ! The number is in Fibonacci series \\n\");\n }else\n {\n    printf(\"False ! The number is not in Fibonacci series \\n\");\n }   \n }while(received&gt;0);\nprintf(\"Error occured !!!!!!!!!!!!!!!!!!!!!\");\ngetch();    \n }*\n</code></pre>\n\n<p>if not then u need to initialize n3</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1478163096, "creation_date": 1478163096, "answer_id": 40397174, "question_id": 40390306, "link": "https://stackoverflow.com/questions/40390306/reset-the-amount-of-a-variable-in-c/40397174#40397174", "title": "reset the amount of a variable in c", "body": "<p>Variable <code>n3</code> is uninitialized.  The test <code>while (i &lt; received)</code> invokes undefined behavior the first time, how the program behaves after that is not important.</p>\n\n<p>You can correct and simplify the code by making <code>n3</code> the current Fibonacci number, starting at <code>1</code>, and stepping through subsequent numbers with you formula.  An initial value of <code>0</code> for <code>n1</code> and <code>n2</code> gives the correct sequence.</p>\n\n<p>Also note that you should check the return value of <code>scanf</code> and you should exit the loop when the use enters <code>0</code>.</p>\n\n<p>Here is the corrected code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nint main(void) {\n    int received, n1, n2, n3;\n    for (;;) {\n        printf(\"Please enter a number to evaluate : \");\n        if (scanf(\"%d\", &amp;received) != 1)\n            break;\n        if (received &lt;= 0)\n            break;\n        n1 = 0;\n        n2 = 0;\n        n3 = 1;    \n        while (n3 &lt; received) {\n            n1 = n2;\n            n2 = n3;\n            n3 = n1 + n2;\n            printf(\"%4d\\n\", n3);\n        }\n        if (n3 == received) {\n            printf(\"True! The number is in Fibonacci series\\n\");\n        } else {\n            printf(\"False! The number is not in Fibonacci series\\n\");\n        }\n    }\n    getch();    \n}\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 5999939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gh4yL.jpg?s=128&g=1", "display_name": "Arash Younesi", "link": "https://stackoverflow.com/users/5999939/arash-younesi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1478636995, "answer_count": 2, "score": -2, "last_activity_date": 1478183377, "creation_date": 1478122944, "last_edit_date": 1478123816, "question_id": 40390306, "link": "https://stackoverflow.com/questions/40390306/reset-the-amount-of-a-variable-in-c", "closed_reason": "Not suitable for this site", "title": "reset the amount of a variable in c", "body": "<p>Hello i'm trying to write a program that can evaluate if a number is in Fibonacci series:</p>\n\n<blockquote>\n  <p>(1 1 2 3 5 8 13 21 ..... )</p>\n</blockquote>\n\n<p>Here is my code: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\nmain() {\n    int received,n1,n2,n3,i;\n    do {\n        printf(\"Please enter a number to evaluate : \");\n        n1=1;\n        n2=1;\n        i=0;    \n        scanf(\"%d\",&amp;received);\n        while(n3&lt;received) {\n            if (i==1) { \n                n1=1;\n            }\n            else {\n                n3=n1+n2;\n                n1=n2;\n                n2=n3;\n            }\n            i++;\n            printf(\"%4d \\n\",n1);\n        }\n        if(n1==received || n2==received || n3==received) {\n            printf(\"True ! The number is in Fibonacci series \\n\");\n        }\n        else {\n            printf(\"False ! The number is not in Fibonacci series \\n\");\n        }\n    }while(received&gt;0);\n\n    printf(\"Error occured !!!!!!!!!!!!!!!!!!!!!\");\n    getch();    \n}\n</code></pre>\n\n<p>But when I want to reset the amount of the variables it does not work:</p>\n\n<pre><code>n1=1;\nn2=1;\ni=0;\n</code></pre>\n"}, {"tags": ["c", "if-statement", "optimization"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478121991, "post_id": 40390078, "comment_id": 68031904, "body": "Optimize what? Speed? Binary size?  Code size? Readability?"}, {"owner": {"reputation": 1804, "user_id": 3158709, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1656460252/picture?type=large", "display_name": "balajimc55", "link": "https://stackoverflow.com/users/3158709/balajimc55"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478122119, "post_id": 40390078, "comment_id": 68031953, "body": "@EugeneSh. optimize code size"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1478123595, "post_id": 40390078, "comment_id": 68032606, "body": "Looks like you might want <i>unsigned saturation</i>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478123606, "post_id": 40390078, "comment_id": 68032610, "body": "Ever heared about functions? &quot;I do not want to use array.&quot; - You can&#39;t eat the cake and have it!"}], "answers": [{"comments": [{"owner": {"reputation": 1804, "user_id": 3158709, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1656460252/picture?type=large", "display_name": "balajimc55", "link": "https://stackoverflow.com/users/3158709/balajimc55"}, "edited": false, "score": 0, "creation_date": 1478123018, "post_id": 40390204, "comment_id": 68032347, "body": "macro is the ideal solution for me here! Thanks a lot! :)"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 1804, "user_id": 3158709, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1656460252/picture?type=large", "display_name": "balajimc55", "link": "https://stackoverflow.com/users/3158709/balajimc55"}, "edited": false, "score": 0, "creation_date": 1478123215, "post_id": 40390204, "comment_id": 68032440, "body": "Macros are useful but be aware of <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Macro-Pitfalls.html\" rel=\"nofollow noreferrer\">their pitfalls</a> too!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1478123699, "post_id": 40390204, "comment_id": 68032646, "body": "Never use a macro where a function will do!"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1478124445, "post_id": 40390204, "comment_id": 68032973, "body": "The compiler&#39;s optimizer may automatically inline such a simple function. If not, <code>inline</code> [or <code>static inline</code>, if necessary] can be added to its definition. Then, it will make it just as fast/compact as the macro, but with the extra safety of the function. The function approach has the advantage that arguments are evaluated <i>once</i>. This helps in the general case of <code>COM(a1,calc())</code> where <code>calc</code> does heavy calculation or has side effects."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1478164441, "post_id": 40390204, "comment_id": 68045399, "body": "I have answered with the option to use a function as well and warned OP about the pitfalls of macros in my comment. Macros themselves are not bad; rather using it in complex expressions or using it with side effects is the problem. So, downvoting this seems excessive to me."}, {"owner": {"reputation": 1804, "user_id": 3158709, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1656460252/picture?type=large", "display_name": "balajimc55", "link": "https://stackoverflow.com/users/3158709/balajimc55"}, "edited": false, "score": 0, "creation_date": 1478199465, "post_id": 40390204, "comment_id": 68068594, "body": "Thank you for your answer @usr. I understand the pitfalls of using macro and as Craig-esty pointed out, functions are a safer solution. For the specific issue I am dealing, macro is best-suited. It may not be the same for someone else!"}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 3, "last_activity_date": 1478122424, "creation_date": 1478122424, "answer_id": 40390204, "question_id": 40390078, "link": "https://stackoverflow.com/questions/40390078/c-optimizing-repetitive-if-else/40390204#40390204", "title": "c - optimizing repetitive if else", "body": "<p>You can use a macro like:</p>\n\n<pre><code>#define COM(x,y) ((x&lt;y)?0:(x-y))\n\n...\na3 = COM(a1,a2);\nb3 = COM(b1,b2);\nc3 = COM(c1,c2);\n</code></pre>\n\n<p>or use a function instead.</p>\n\n<pre><code>int func(int x, int y)\n{\n   return (x&lt;y)?0:(x-y);\n}\n\na3 = func(a1,a2);\nb3 = func(b1,b2);\nc3 = func(c1,c2);\n</code></pre>\n\n<p>If you can use an array (for storing a, b, and c etc) for storing these values, then you can use a simple loop instead of repeating the macro/function call.</p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 6844051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53daa16c4d2b295e641ede659511aeeb?s=128&d=identicon&r=PG&f=1", "display_name": "user6844051", "link": "https://stackoverflow.com/users/6844051/user6844051"}, "is_accepted": false, "score": 1, "last_activity_date": 1478122475, "creation_date": 1478122475, "answer_id": 40390217, "question_id": 40390078, "link": "https://stackoverflow.com/questions/40390078/c-optimizing-repetitive-if-else/40390217#40390217", "title": "c - optimizing repetitive if else", "body": "<p>you can start off by initializing the variables first then just use if statements if needed. For example. </p>\n\n<pre><code>a3=a1-a2;\nb3=b1-b2;\nc3=c1-c2;\n\nif(a1&lt;a2)\n  a3=0;\n\nif(b1&lt;b2)\n  b3=0;\n\nif(c1&lt;c2)\n  c3=0;\n</code></pre>\n"}], "owner": {"reputation": 1804, "user_id": 3158709, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1656460252/picture?type=large", "display_name": "balajimc55", "link": "https://stackoverflow.com/users/3158709/balajimc55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "closed_date": 1478155711, "accepted_answer_id": 40390204, "answer_count": 2, "score": 1, "last_activity_date": 1478122475, "creation_date": 1478121897, "last_edit_date": 1478122084, "question_id": 40390078, "link": "https://stackoverflow.com/questions/40390078/c-optimizing-repetitive-if-else", "closed_reason": "Needs more focus", "title": "c - optimizing repetitive if else", "body": "<p>I have the following code:</p>\n\n<pre><code>if (a1 &lt; a2)\n   a3=0;\nelse\n   a3=a1-a2;\n\nif (b1 &lt; b2)\n   b3=0;\nelse\n   b3=b1-b2;\n\nif (c1 &lt; c2)\n   c3=0;\nelse\n   c3=c1-c2;\n</code></pre>\n\n<p>The code is quite repetitive. Any suggestions on optimize code size? I do not want to use array.</p>\n"}, {"tags": ["c", "compilation", "open-source"], "comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1478121235, "post_id": 40389852, "comment_id": 68031514, "body": "real projects have quite a bit more code than <code>main</code> and <code>foo</code>, and more than one person working on them simultaneously"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478121411, "post_id": 40389852, "comment_id": 68031608, "body": "Try it with a project of a medium size and see how many troubles you will get.. Not speaking of precompiled libraries and objects..."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1478121487, "post_id": 40389852, "comment_id": 68031644, "body": "One definition rule?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478122032, "post_id": 40389852, "comment_id": 68031920, "body": "How do you <code>#include</code> a binary library?"}, {"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478122709, "post_id": 40389852, "comment_id": 68032204, "body": "@Olaf I put the last line, because I know that sometimes it&#39;s the only option, but I was talking about when it is possible."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478123233, "post_id": 40389852, "comment_id": 68032448, "body": "That has nothing to do with closed source."}, {"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1478123582, "post_id": 40389852, "comment_id": 68032600, "body": "Well, if I have a binary library, it is may be a standard C library, in which case I can #include it normally, or I have its source code, in which case I could #include its source code, or it is closed-source, right?"}, {"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1478123695, "post_id": 40389852, "comment_id": 68032644, "body": "@Kerrek SB I have defined everithing only once."}], "answers": [{"comments": [{"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1478122484, "post_id": 40389927, "comment_id": 68032120, "body": "So, for small programs (50-100 functions) the #include would be fine?"}, {"owner": {"reputation": 14317, "user_id": 182402, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de96aa2f424a48b2510a7d29c65a8ace?s=128&d=identicon&r=PG", "display_name": "Wander Nauta", "link": "https://stackoverflow.com/users/182402/wander-nauta"}, "reply_to_user": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1478122608, "post_id": 40389927, "comment_id": 68032177, "body": "For really, really small utilities, I would just put it in one ordinary file (<code>myprogram.c</code>, no <code>foo.c</code> or anything). For anything larger than that, I would use a build system. I don&#39;t think I would use your approach - but in the end, it&#39;s up to you, of course."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 1, "creation_date": 1478123472, "post_id": 40389927, "comment_id": 68032548, "body": "@CacahueteFrito: Don&#39;t you even think about it! Having definitions in header files (except for <code>inline</code> functions) is a strict <b>don&#39;t</b>. Every senior knowing his job will get a heart-attack first and give you one once back from the clinic. Learn about &quot;information hiding&quot;, &quot;namespace pollution&quot;, etc. Let apart compile-time aspects."}], "tags": [], "owner": {"reputation": 14317, "user_id": 182402, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/de96aa2f424a48b2510a7d29c65a8ace?s=128&d=identicon&r=PG", "display_name": "Wander Nauta", "link": "https://stackoverflow.com/users/182402/wander-nauta"}, "is_accepted": false, "score": 4, "last_activity_date": 1478123143, "last_edit_date": 1478123143, "creation_date": 1478121324, "answer_id": 40389927, "question_id": 40389852, "link": "https://stackoverflow.com/questions/40389852/why-ever-link-files-instead-of-include-them/40389927#40389927", "title": "Why ever link files instead of #include them?", "body": "<p>One of the (many) reasons is compilation speed: if you put all your code into one file, like your approach does, you have to recompile the entire project every time you change something.</p>\n\n<p>If your project is split into multiple files (objects), you only have to recompile the parts corresponding to the files that have changed, then redo the linking step. This is usually done using a <em>build system</em> (the classic example is <code>make</code>) which looks at all your source files, all your object files, and updates the ones that are out of date.</p>\n\n<p>Compilation speed isn't a big issue for small projects, but on larger ones it certainly is, especially with C++: building from scratch can take hours or sometimes days, so you want to be able to reuse as many object files as possible.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 7024561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa00f6c01fe6fe4ba213804208c52749?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Nealon", "link": "https://stackoverflow.com/users/7024561/michael-nealon"}, "is_accepted": false, "score": 1, "last_activity_date": 1478121451, "creation_date": 1478121451, "answer_id": 40389956, "question_id": 40389852, "link": "https://stackoverflow.com/questions/40389852/why-ever-link-files-instead-of-include-them/40389956#40389956", "title": "Why ever link files instead of #include them?", "body": "<p>What if a lot of different applications use the same resources?</p>\n\n<p>Is it best to statically compile the same code into different applications? Objects can be shared and linked dynamically at runtime.</p>\n"}, {"comments": [{"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1478123024, "post_id": 40390057, "comment_id": 68032350, "body": "For your first line: You could call foo.c foo2.h or foo.foo of whatever you wanted, that was not the point, and for the second, while a good reason, is only true for builds that spend more than a few seconds."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1478124043, "post_id": 40390057, "comment_id": 68032794, "body": "@CacahueteFrito You&#39;re not calling files whatever you want on my project. Declarations/prototypes go in <code>.h</code> files, function definitions/source code go in <code>.c</code> files. There are no hard and strict universal rules I&#39;m aware of for organizing code. You organize code into different files the same way you organize code in a single file into functions; it&#39;s grouped according functionality, reuse, and ease of maintenance. I have plenty of &quot;dixie-cup&quot; utilities I&#39;ve written that are a few functions in <code>main.c</code>. It depends on the best fit for the situation."}, {"owner": {"reputation": 14789, "user_id": 425738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58622287beb9cbbd6a1faff38c1c6ab3?s=128&d=identicon&r=PG", "display_name": "ldav1s", "link": "https://stackoverflow.com/users/425738/ldav1s"}, "edited": false, "score": 0, "creation_date": 1478124049, "post_id": 40390057, "comment_id": 68032799, "body": "No, it <i>is</i> the point -- linguistic conventions matter, for your question as it stands now.  Builds that &quot;spend more than a few seconds&quot; encompasses a lot of software, arguably most software.  Why bother splitting up a translation unit at all if it&#39;s so small?"}, {"owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "edited": false, "score": 0, "creation_date": 1478124598, "post_id": 40390057, "comment_id": 68033035, "body": "I have edited the question :)"}], "tags": [], "owner": {"reputation": 14789, "user_id": 425738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58622287beb9cbbd6a1faff38c1c6ab3?s=128&d=identicon&r=PG", "display_name": "ldav1s", "link": "https://stackoverflow.com/users/425738/ldav1s"}, "is_accepted": true, "score": 1, "last_activity_date": 1478126039, "last_edit_date": 1478126039, "creation_date": 1478121793, "answer_id": 40390057, "question_id": 40389852, "link": "https://stackoverflow.com/questions/40389852/why-ever-link-files-instead-of-include-them/40390057#40390057", "title": "Why ever link files instead of #include them?", "body": "<blockquote>\n  <p>1.- Is there any reason to not do the following?</p>\n</blockquote>\n\n<p>Avoid <code>#include</code>ing <code>.c</code> files.  Developers (and software tools) tend to treat <code>.c</code> files as translation units.</p>\n\n<p>The object files that <code>.c</code> files create can be left alone once compiled, unless it changes or one of their dependencies (like a header file) changes resulting in a faster build.  If everything is <code>#included</code> into a file with <code>main</code>, that would have to be rebuilt with every change to every file.</p>\n\n<p>EDIT: after <code>foo.c</code> was renamed to <code>foo.foo</code></p>\n\n<p>I would also avoid calling C conventional files with some unique extension, as C programmers (and development tools) don't know how to deal with them either.</p>\n\n<blockquote>\n  <p>2.- If so, when would it be preferable to do the following, and when not?</p>\n</blockquote>\n\n<p>Never IMO.  Huge <code>static</code> tables might be acceptable, but I'd still put them in a <code>.h</code> file.</p>\n\n<p>If the program is as simple as described in the comments below, I'd probably keep it as one translation unit, as you have in your first code sample.</p>\n"}], "owner": {"reputation": 2823, "user_id": 6872717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UCuzs.png?s=128&g=1", "display_name": "alx", "link": "https://stackoverflow.com/users/6872717/alx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1478155778, "accepted_answer_id": 40390057, "answer_count": 3, "score": -1, "last_activity_date": 1478126039, "creation_date": 1478121047, "last_edit_date": 1478124533, "question_id": 40389852, "link": "https://stackoverflow.com/questions/40389852/why-ever-link-files-instead-of-include-them", "closed_reason": "Needs more focus", "title": "Why ever link files instead of #include them?", "body": "<p>Why should one ever compile various source code files into various object files and then link?</p>\n\n<p>Wouldn't it be much easier to <code>#include</code> them in main.c and then just compile main.c?</p>\n\n<p>Example:</p>\n\n<p>A program that has one function foo and main:</p>\n\n<pre><code>void foo(void);\n\nint main() {\n        foo();\n        return 0;\n}\n\nvoid foo(void)\n{\n        // do things.\n}\n</code></pre>\n\n<p>The normal approach would be to sepparate this into 3 files:</p>\n\n<p>foo.h</p>\n\n<pre><code>void foo(void);\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include \"foo.h\"\n\nint main() {\n        foo();\n        return 0;\n}\n</code></pre>\n\n<p>foo.c</p>\n\n<pre><code>#include \"foo.h\"\n\nvoid foo(void) {\n        // do things.\n}\n</code></pre>\n\n<p>Then one would compile them and link the .o generated.</p>\n\n<p>The questions are:</p>\n\n<p>1.- Is there any reason to not do the following?</p>\n\n<p>2.- If so, when would it be preferable to do the following, and when not?</p>\n\n<p>My approach:</p>\n\n<p>foo.h</p>\n\n<pre><code>void foo(void);\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include \"foo.h\"\n\nint main() {\n        foo();\n        return 0;\n}\n\n#include \"foo.foo\"\n</code></pre>\n\n<p>EDIT: foo.foo</p>\n\n<pre><code>void foo(void) {\n        // do things.\n}\n</code></pre>\n\n<p>This way I would just care about compiling main.c</p>\n\n<p>This looks to me more natural, as everithing goes \"copy pasted\" into main.</p>\n\n<p>I already know that if the program is closed-source, you want to provide the compiled file with the headers, but I put the open-source tag because of that.</p>\n"}, {"tags": ["c", "tree", "expression"], "comments": [{"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1478122709, "post_id": 40389749, "comment_id": 68032205, "body": "@OmidCompSCI, he probably means building an AST out of an expression."}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "reply_to_user": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "edited": false, "score": 0, "creation_date": 1478124139, "post_id": 40389749, "comment_id": 68032839, "body": "@bipll ah that&#39;ll make a bit more sense."}], "answers": [{"tags": [], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "is_accepted": false, "score": 11, "last_activity_date": 1478123626, "last_edit_date": 1478123626, "creation_date": 1478121378, "answer_id": 40389942, "question_id": 40389749, "link": "https://stackoverflow.com/questions/40389749/infix-expression-to-binary-tree-in-c/40389942#40389942", "title": "Infix expression to Binary Tree in C", "body": "<p>Your task is not so hard, firstly you should acquaint yourself with <a href=\"https://www.tutorialspoint.com/data_structures_algorithms/expression_parsing.htm\" rel=\"noreferrer\">notation types</a> and then with expression parsing.</p>\n\n<p>In general, to parse and evaluate an (infix) expression, you need to:</p>\n\n<ul>\n<li><p>read and tokenize it, i.e. classify each symbol as: operand, operation, etc.</p></li>\n<li><p>convert from infix to binary expression tree: this is usually done with algorithms such as <a href=\"https://en.wikipedia.org/wiki/Shunting-yard_algorithm\" rel=\"noreferrer\">Shunting yard algorithm</a>.</p></li>\n<li><p>create a grammar that defines operation precedence and allows strict<sup>1</sup> order of expression evaluation.</p></li>\n</ul>\n\n<p>Expressions written in infix notation are slightly more difficult to parse, that is why usually they are converted to more <em>\"machine friendly\"</em> versions, like (reverse) <a href=\"https://en.wikipedia.org/wiki/Polish_notation\" rel=\"noreferrer\">Polish notation</a> which provides some advantages among which is the elimination of the need of parenthesses.</p>\n\n<p>So, as you can see this is roughly the big picture and your task is a part of it. Here is a visualisation of binary expression tree for: <code>2 * 3 / ( 2 \u2013 1 ) + 5 * ( 4 \u2013 1 )</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/TrHR0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TrHR0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is more on the topic and an example <a href=\"http://cplusplus.kurttest.com/notes/stack.html#binary-expression-tree\" rel=\"noreferrer\">implementation in C++</a>.</p>\n\n<hr>\n\n<p><sup>1. In your case obeying the rules of Algebra.</sup></p>\n"}], "owner": {"reputation": 105, "user_id": 5937195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc5df5213c5875af4507f20d7ab1a80?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob ", "link": "https://stackoverflow.com/users/5937195/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15464, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1478123626, "creation_date": 1478120607, "last_edit_date": 1478122750, "question_id": 40389749, "link": "https://stackoverflow.com/questions/40389749/infix-expression-to-binary-tree-in-c", "title": "Infix expression to Binary Tree in C", "body": "<p>I have to parse an infix expression into a binary tree.</p>\n\n<p>The expression is:</p>\n\n<pre><code> (((x1 + 5.12) \u2217 (x2 \u2212 7.68))/x3) \n</code></pre>\n\n<p>I don't really have a clue on how to interpret the expression. Does someone has a clue on how to process this?</p>\n"}, {"tags": ["c", "swap", "singly-linked-list"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 4, "creation_date": 1478120240, "post_id": 40389577, "comment_id": 68030965, "body": "You have four pointers to update: the head, the next pointer in the first item, the next pointer in the second-to-last item, and the next pointer in the last item."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1478120377, "post_id": 40389577, "comment_id": 68031045, "body": "Have you considered the straight forward swapping of the data, instead of the nodes? Or is this a school exercise which requires it?"}, {"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478120752, "post_id": 40389577, "comment_id": 68031256, "body": "@WeatherVane Unfortunately, I want to swap the nodes and not just the data."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478123132, "post_id": 40390094, "comment_id": 68032396, "body": "Hmm, your code is working and it solves my problem. But i can&#39;t really understand what you are doing exactly. Can you elaborate more? Because i need to do the same on a doubly linked list and on a circular linked list."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478123327, "post_id": 40390094, "comment_id": 68032488, "body": "Honestly, I can&#39;t. I wrote a small novel in the code comments and the post already. Between that and taking the initiative to do what I described in the last sentence of the post (single stepping in a debugger and examining variables to see <i>exactly</i> what is going on), there should be enough to understand the algorithm. If not, you may need to refamiliarize yourself with pointers, and as you can see in the code, pointers to pointers."}, {"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478170721, "post_id": 40390094, "comment_id": 68049423, "body": "And what would the time complexity of that function be? Is it the same as a doubly linked list and a circular linked list?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478184431, "post_id": 40390094, "comment_id": 68059130, "body": "@user3120283 swapping first/last in a single-linked single-entrance (no tail pointer, only head pointer) is O(n); sequential scan is required (as shown here). A double linked list with dual-entrance (both head and tail pointers) is O(1), as no sequential scan is required. A circular linked list has no first/last, so the question is somewhat meaningless in that context. However they <i>usually</i> are implemented as double-linked lists, and as such, given a head pointer, the previous pointed-to-node is swappable in O(1) as well."}], "tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": true, "score": 4, "last_activity_date": 1478121990, "creation_date": 1478121990, "answer_id": 40390094, "question_id": 40389577, "link": "https://stackoverflow.com/questions/40389577/c-swap-first-and-last-element-in-singly-linked-list/40390094#40390094", "title": "C - Swap first and last element in singly linked list", "body": "<p>This is clearly wrong:</p>\n\n<pre><code>*head = (*head)-&gt;next;\n*head = temp;\n</code></pre>\n\n<p>That just overwrites the previous value with the value of <code>temp</code>. The first statement may as well not even be there.</p>\n\n<p>You fundamentally need two swaps (technically one plus an assignment and termination)</p>\n\n<ul>\n<li>The pointers pointing to the two nodes</li>\n<li>The two nodes <code>next</code> pointers</li>\n</ul>\n\n<p>The latter of these isn't technically needed, but a direct assignment <em>is</em> needed, and the new tail needs to have it's <code>next</code> set to null to terminate the new list.</p>\n\n<p>A full example is shown below, liberally commented to hopefully give expose the algorithm of what is going on.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct node\n{\n    int data;\n    struct node *next;\n};\n\nvoid swapFirstAndLast(struct node **head)\n{\n    // don't bother unless we have a list of at least two nodes\n    if (!*head || !(*head)-&gt;next)\n        return;\n\n    // start with the head's next pointer (the second node in the list)\n    struct node **pp = &amp;(*head)-&gt;next;\n\n    // walk the pointer-to-pointer down the list, each time grasping\n    //  the next node's \"next\" pointer address until we reach a node\n    //  whose 'next' is NULL. When that happens, `pp` will hold the\n    //  address of the pointer pointing to the last node in the list\n    while (*pp &amp;&amp; (*pp)-&gt;next)\n        pp = &amp;(*pp)-&gt;next;\n\n    // swap the pointer held in *head with *pp\n    struct node *tmp = *head;\n    *head = *pp;\n    *pp = tmp;\n\n    // save new head's next pointer to be the old head's next\n    (*head)-&gt;next = (*pp)-&gt;next;\n\n    // and finally, terminate the list.\n    (*pp)-&gt;next = NULL;\n}\n\nvoid print_list(const struct node *head)\n{\n    while (head)\n    {\n        printf(\"%d \", head-&gt;data);\n        head = head-&gt;next;\n    }\n    fputc('\\n', stdout);\n}\n\nint main()\n{\n    struct node *head = NULL, **pp = &amp;head;\n    for (int i=1; i&lt;=5; ++i)\n    {\n        *pp = malloc(sizeof **pp);\n        (*pp)-&gt;data = i;\n        pp = &amp;(*pp)-&gt;next;\n    }\n    *pp = NULL;\n\n    print_list(head);\n\n    swapFirstAndLast(&amp;head);\n\n    print_list(head);\n}\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>1 2 3 4 5 \n5 2 3 4 1 \n</code></pre>\n\n<p>I've left the list cleanup for you (no doubt you have such an algorithm already coded). The crux of this is how to use pointers to pointers to manipulate the linked list's pointers; not just a bunch of temp pointers. I strongly encourage you to single-step through the exchange function in a debugger, watching what is happening with each step along the way.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478171341, "post_id": 40390459, "comment_id": 68049832, "body": "Can you provide me with a visual representation of the above? That would be extremely helpful. Now i&#39;m trying to do the same for a doubly linked list and a circular linked list but i have no success so far. <a href=\"http://ideone.com/aVnwEu\" rel=\"nofollow noreferrer\">This</a> is what i got for the doubly linked list but i get an error."}, {"owner": {"reputation": 188, "user_id": 6759414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CupJXHUKMVc/AAAAAAAAAAI/AAAAAAAAAAo/ZRc8Ux7BvpA/photo.jpg?sz=128", "display_name": "Matheus Rotta", "link": "https://stackoverflow.com/users/6759414/matheus-rotta"}, "reply_to_user": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478181194, "post_id": 40390459, "comment_id": 68056666, "body": "Hello! Here you go, I have made a visual representation of each command. Here is the <a href=\"https://postimg.org/image/3x5mnpswz/\" rel=\"nofollow noreferrer\">link</a>."}, {"owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "edited": false, "score": 0, "creation_date": 1478267932, "post_id": 40390459, "comment_id": 68097235, "body": "Hmm, the visual presentation really helps,but i still can&#39;t figure out how to do the same thing with a doubly linked list or a circular linked list. Can you help? <a href=\"http://ideone.com/00gEGb\" rel=\"nofollow noreferrer\">This</a> is what i have."}], "tags": [], "owner": {"reputation": 188, "user_id": 6759414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CupJXHUKMVc/AAAAAAAAAAI/AAAAAAAAAAo/ZRc8Ux7BvpA/photo.jpg?sz=128", "display_name": "Matheus Rotta", "link": "https://stackoverflow.com/users/6759414/matheus-rotta"}, "is_accepted": false, "score": 1, "last_activity_date": 1478123627, "creation_date": 1478123627, "answer_id": 40390459, "question_id": 40389577, "link": "https://stackoverflow.com/questions/40389577/c-swap-first-and-last-element-in-singly-linked-list/40390459#40390459", "title": "C - Swap first and last element in singly linked list", "body": "<p>WhozCraig's answer is already perfect, but perhaps you may want to see your own code with some adjustments. Basically, what I did was to stop your search for the last element one iteration earlier, so that temp would stop at 5 and current at 6. Also, you have to make four changes with pointers, like WhozCraig did.\nHere is your code, modified slightly:</p>\n\n<pre><code>void swapElements1(struct node **head) //(not working)Function to swap first and last element of the list\n{\n    struct node *current, *temp;\n    current = temp = *head;\n\n    while(current-&gt;next != NULL)\n    {\n        temp = current;\n        current = current -&gt; next;\n    }\n    temp-&gt;next = *head;\n    current-&gt;next = (*head)-&gt;next;\n    (*head)-&gt;next = NULL;\n    *head = current;\n}\n</code></pre>\n\n<p>That worked on my machine. I changed your while loop condition from current to current->next and made the correct \"pointer changes\". These pointer changes are hard to explain, usually I make them on paper first and then write them in code.</p>\n"}], "owner": {"reputation": 65, "user_id": 3120283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d3d14635a19b417dd0bec26c0e8bc9a?s=128&d=identicon&r=PG&f=1", "display_name": "user3120283", "link": "https://stackoverflow.com/users/3120283/user3120283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4988, "favorite_count": 1, "accepted_answer_id": 40390094, "answer_count": 2, "score": 1, "last_activity_date": 1609932932, "creation_date": 1478119934, "question_id": 40389577, "link": "https://stackoverflow.com/questions/40389577/c-swap-first-and-last-element-in-singly-linked-list", "title": "C - Swap first and last element in singly linked list", "body": "<p>What i'm trying to do, is swap the first and last elements of a singly linked list. So far i have the following code, where i create a list and add some numbers to it. My problem is at the swapElements1 function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nstruct node\n{\n    int number;\n    struct node *next;\n};\n\nvoid addNodeSingle(struct node **head, int num, int thesi) //Function to insert new node at the beginning or the end of the list, depending on the value of \"thesi\"\n{\n    if (*head == NULL)\n    {\n        struct node *current;\n        current = (struct node*) malloc (1*sizeof(struct node));\n        current -&gt; number = num;\n        current -&gt; next = NULL;\n        *head = current;\n    }\n\n    else\n    {\n        if (thesi == 0)\n        {\n            struct node *current;\n            current = (struct node*) malloc (1*sizeof(struct node));\n            current -&gt; number = num;\n            current -&gt; next = *head;\n            *head = current;\n        }\n\n        else\n        {\n            struct node *current, *temp;\n            current = (struct node*) malloc (1*sizeof(struct node));\n            current -&gt; number = num;\n            temp = *head;\n            while (temp -&gt; next != NULL)\n                temp = temp -&gt; next;\n\n            temp -&gt; next = current;\n            current -&gt; next = NULL;\n        }\n    }\n}\n\nvoid displayList(struct node **head) //Function to display the list\n{\n    struct node *current;\n    if(*head == NULL)\n        printf(\"I lista einai adeia!\\n\");\n\n    else\n    {\n    current= *head ;\n        while(current != NULL)\n        {\n            printf(\"%d \",current -&gt; number);\n            current = current -&gt; next;\n        }\n    }\n}\n\nvoid swapElements1(struct node **head) //(not working)Function to swap first and last element of the list\n{\n    struct node *current, *temp;\n    current = temp = *head;\n\n    while(current != NULL)\n    {\n        temp = current;\n        current = current -&gt; next;\n    }\n\n    *head = (*head)-&gt;next;\n    *head = temp;\n    current = NULL;\n}\n\nint main()\n{\n    struct node *head;\n    head = NULL;\n\n    addNodeSingle(&amp;head,5,1);\n    addNodeSingle(&amp;head,6,1);\n    addNodeSingle(&amp;head,2,0);\n    addNodeSingle(&amp;head,7,0);\n    addNodeSingle(&amp;head,8,0);\n\n    printf(\"List is: \");\n    displayList(&amp;head);\n    swapElements1(&amp;head);\n    printf(\"\\nNew list is: \");\n    displayList(&amp;head);\n}\n</code></pre>\n\n<p>The output i get is:</p>\n\n<p>List is: 8 7 2 5 6 </p>\n\n<p>New list is: 6 </p>\n\n<p>What i need is:</p>\n\n<p>List is: 8 7 2 5 6</p>\n\n<p>New list is: 6 7 2 5 8</p>\n\n<p>Here's a <a href=\"http://ideone.com/ztzJ4h\" rel=\"nofollow noreferrer\">demo</a></p>\n"}, {"tags": ["c", "data-structures", "queue"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1478120172, "post_id": 40389554, "comment_id": 68030936, "body": "the problem is probably in the pushing part. For instance, if you don&#39;t set the <code>next</code> field to NULL when pushing. Can you <a href=\"https://stackoverflow.com/posts/40389554/edit\">edit</a> your post so we can see it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478120712, "post_id": 40389554, "comment_id": 68031235, "body": "I don&#39;t know if this is the solution, hence a comment. You are using the dreaded <code>feof</code> incorrectly. It does not tell you are at end-of-file. Please see <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>. If you had made essential check of the return value from <code>fscanf</code> this error would have been trapped. <code>if(fscanf(processesFile, &quot;%d %d %d&quot;, &amp;id, &amp;at, &amp;bt) != 3) { &#47;* trap error *&#47; };</code>. The idiomatic way to write the loop is <code>while(fscanf(processesFile, &quot;%d %d %d&quot;, &amp;id, &amp;at, &amp;bt) == 3) { &#47;* process *&#47; }</code>"}, {"owner": {"reputation": 1696, "user_id": 4966317, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1282ba271ee8c8adc93c4e0b84b79933?s=128&d=identicon&r=PG&f=1", "display_name": "Ambitions", "link": "https://stackoverflow.com/users/4966317/ambitions"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478154123, "post_id": 40389554, "comment_id": 68040724, "body": "@Jean-Fran&#231;oisFabre I forgot to set &quot;next&quot; to NULL in of the cases. Thank you."}, {"owner": {"reputation": 701, "user_id": 3983756, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/966fffbafc3c218b194488772be93d6c?s=128&d=identicon&r=PG", "display_name": "ThunderWiring", "link": "https://stackoverflow.com/users/3983756/thunderwiring"}, "edited": false, "score": 0, "creation_date": 1478169200, "post_id": 40389554, "comment_id": 68048440, "body": "add to the question the function that does <code>push</code>"}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 7045778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O2D8aUiiCO4/AAAAAAAAAAI/AAAAAAAAAEY/_dOwZgx1zNo/photo.jpg?sz=128", "display_name": "Darshan b", "link": "https://stackoverflow.com/users/7045778/darshan-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1478171192, "creation_date": 1478171192, "answer_id": 40399939, "question_id": 40389554, "link": "https://stackoverflow.com/questions/40389554/segmentation-fault-in-c-while-popping-from-a-queue/40399939#40399939", "title": "Segmentation fault in C while popping from a queue", "body": "<p>I dont see the definition for push(&amp;queues[0], id, at, bt);. \nfscanf(processesFile, \"%d %d %d\", &amp;id, &amp;at, &amp;bt); here the variables id,at and bt are used but they are not actually accessed as structure variables.  </p>\n"}], "owner": {"reputation": 1696, "user_id": 4966317, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1282ba271ee8c8adc93c4e0b84b79933?s=128&d=identicon&r=PG&f=1", "display_name": "Ambitions", "link": "https://stackoverflow.com/users/4966317/ambitions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478171192, "creation_date": 1478119834, "question_id": 40389554, "link": "https://stackoverflow.com/questions/40389554/segmentation-fault-in-c-while-popping-from-a-queue", "title": "Segmentation fault in C while popping from a queue", "body": "<p>I am facing a problem and I tried to debug it but I couldn't find anything</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct Process {\n    int id;\n    int at;\n    int bt;\n    int rt;\n    struct Process *next;\n} *tmp;\n\nstruct Queue {\n    struct Process *head, *tail;\n};\n\nstruct Process *pop(struct Queue *queue) {\n    if (queue-&gt;head == NULL) {\n        return NULL;\n    }\n    tmp = queue-&gt;head;\n    queue-&gt;head = queue-&gt;head-&gt;next;\n    return tmp;\n}\n\nint main() {\n    struct Queue queues[3];\n    struct Process *working;\n    for (int i = 0; i &lt; 3; i++) {\n        queues[i].head = NULL;\n    }\n    FILE *processesFile = fopen(\"processes.txt\", \"r\");\n    while (!feof(processesFile)) {\n        fscanf(processesFile, \"%d %d %d\", &amp;id, &amp;at, &amp;bt);\n        push(&amp;queues[0], id, at, bt);\n    }\n    working = pop(&amp;queues[0]); // HERE IS THE PROBLEM, It is removing the first element but causing segmentation error\n    return 0;\n}\n</code></pre>\n\n<p>I removed the pushing part, I could successfully push 5 values and print the whole queue without any problems</p>\n"}, {"tags": ["c", "xcode"], "answers": [{"tags": [], "owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "is_accepted": false, "score": 1, "last_activity_date": 1478119577, "creation_date": 1478119577, "answer_id": 40389478, "question_id": 40389333, "link": "https://stackoverflow.com/questions/40389333/seeing-output-of-c-code-in-xcode-on-mac/40389478#40389478", "title": "seeing output of C code in Xcode on mac", "body": "<p>Add new target and select the source file which you need and assign to this target and run.</p>\n"}], "owner": {"reputation": 1142, "user_id": 5863693, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/101741963312f7ee577a74925672d234?s=128&d=identicon&r=PG&f=1", "display_name": "Yos", "link": "https://stackoverflow.com/users/5863693/yos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478119577, "creation_date": 1478118982, "question_id": 40389333, "link": "https://stackoverflow.com/questions/40389333/seeing-output-of-c-code-in-xcode-on-mac", "title": "seeing output of C code in Xcode on mac", "body": "<p>I'm using Xcode to write C code. Firstly, it took me for ages to figure out that I need to go to Product->Edit Scheme->Select Executable in order to run C executables.</p>\n\n<p>I have a lot of source files and each one has a main so is there any way to run C source files by just selecting them from left-hand pane and pressing Run? Is there a simpler workflow?</p>\n"}, {"tags": ["c", "brute-force"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1478119015, "post_id": 40389271, "comment_id": 68030343, "body": "You do not show the size definitions etc, but usually a loop such as <code>for (j = 0; j &lt;= ALPHABET_SIZE; j++)</code> followed by <code>pwd[1] = alphabet[j];</code> is over by 1, a recipe for disaster."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478119278, "post_id": 40389271, "comment_id": 68030482, "body": "Too broad. And don&#39;t post images of text."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478119615, "post_id": 40389271, "comment_id": 68030645, "body": "Well, they help improve your question to follow site rules. Which in terms increases the chance of your question to get an answer. I&#39;d say they are very well constructive."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1478119975, "post_id": 40389271, "comment_id": 68030811, "body": "When I see 6 inner loops there is something  wrong In the design"}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1478120497, "post_id": 40389271, "comment_id": 68031125, "body": "@EdHeal I sat down and tried to code it recursively but I couldn&#39;t figure it out... please help me !"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1478537711, "post_id": 40389271, "comment_id": 68185197, "body": "Most likely it should be <code>j &lt; ALPHABET_SIZE</code> otherwise this is basically the correct approach, it&#39;s how brute force is done with many loops. There are minor improvements to make, but most of the work is done by <code>crypt_r</code> which will slow down the program."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1478537852, "post_id": 40389271, "comment_id": 68185279, "body": "<a href=\"http://stackoverflow.com/q/605845/995714\">don&#39;t cast the result of malloc in C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "edited": false, "score": 0, "creation_date": 1478199657, "post_id": 40407560, "comment_id": 68068703, "body": "This is great ! I integrated this within a pthread in order to brute force  a password and it works like a charm. It slows down as we approach 6 chars. So what I did was ask at the start of the program how many threads we want to execute. Based on that, I chop up the alphabet (divided by the number of threads). That way each thread can work on a certain range.   Would you know where in this code I could set my start and end points for the character generation?  Here&#39;s a link to the full code : <a href=\"https://github.com/warisp/pw_cracker\" rel=\"nofollow noreferrer\">Github link</a>"}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "edited": false, "score": 0, "creation_date": 1478533533, "post_id": 40407560, "comment_id": 68182507, "body": "I use this function to print up to a lenght of 3 for just char * characters = [a,b,c]; and once it gets to cc it never tries aaa,aab,aac. Instead it jumps straight to aba, abb, abc."}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "edited": false, "score": 0, "creation_date": 1478547424, "post_id": 40407560, "comment_id": 68190803, "body": "This one is good but there is no need to define SIZE to one more than desired as in your first while condition you do (SIZE - 1). By removing this we can define SIZE to the actual size desired."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1478565924, "post_id": 40407560, "comment_id": 68198864, "body": "change the last 2 lines to <code>memset(pw, characters[0], used);</code> and <code>pw[used]=&#39;\\0&#39;;</code>"}], "tags": [], "owner": {"reputation": 6975, "user_id": 3121023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f52448806175b9aa66c86d40cf0829f1?s=128&d=identicon&r=PG&f=1", "display_name": "user3121023", "link": "https://stackoverflow.com/users/3121023/user3121023"}, "is_accepted": true, "score": 2, "last_activity_date": 1478537330, "last_edit_date": 1478537330, "creation_date": 1478193335, "answer_id": 40407560, "question_id": 40389271, "link": "https://stackoverflow.com/questions/40389271/how-can-i-get-this-brute-force-algorithm-to-check-letters-incrementally/40407560#40407560", "title": "How can I get this brute force algorithm to check letters incrementally", "body": "<p>Pointers can be used to accomplish this. <code>ppw</code> will point to somewhere in the <code>pw</code> array. <code>pch</code> will point to somewhere in the <code>characters</code> array. Incrementing(++) and decrementing(--) the pointers moves the pointers within the elements of their respective arrays. Dereferencing(*) gives access to the values that the pointers point to. <code>used</code> is the number of elements in <code>pw</code> that have been used. It starts at 0 for the first element and increases toward <code>SIZE</code>. <code>characters</code> may be modified to include the valid letters, numbers and symbols. Just be careful that there are no duplicates. If, for example, the letter <code>u</code> appears more than once, the program will get in an infinite loop.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define SIZE 5\n\nint main( void)\n{\n    char pw[SIZE + 1] = \"\";\n    char *ppw = NULL;\n    char *pch = NULL;\n    char characters[] = \"abcdefghijklmnopqrstuvwxyz\";\n    int used = 0;\n    int out = 1;\n    int last = strlen ( characters) - 1;\n\n    //set pw\n    pw[used] = characters[0];\n    pw[used + 1] = '\\0';\n\n    while ( used &lt; SIZE) {//loop until all elements of pw have been used\n        ppw = &amp;pw[used];//set ppw to point to last used element of pw\n        while ( ppw &gt;= pw) {//so ppw always points to an element of pw\n            if ( ( pch = strchr ( characters, *ppw)) != NULL) {//get pointer into characters for current value that ppw point to\n                if ( out) {//print when appropriate\n                    printf ( \"%s\\n\", pw);\n                }\n                if ( pch &lt; &amp;characters[last]) {//pch does not point to last element of characters\n                    ++pch;//pch points to next element of characters\n                    *ppw = *pch;//set what ppw points to to be the same as what pch points to\n                    if ( ppw != &amp;pw[used]) {//ppw is not pointing to last element of pw\n                        ppw = &amp;pw[used];\n                    }\n                    out = 1;//allow printing\n                }\n                else {//pch is pointing to last element of characters\n                    *ppw = characters[0];//set what ppw points to to be the first element of characters\n                    ppw--;//ppw points to next lower element of pw. ex from pw[n] to pw[n-1]\n                    out = 0;//disable printing\n                }\n            }\n        }//exit loop when ppw points to address less than pw\n        used++;//increase elements in use\n        memset ( pw, characters[0], used);//reset all elements to first element of characters\n        pw[used + 1] = '\\0';//just in case, terminate\n    }//exit loop when all elements have been used\n\n    exit ( 0);\n}\n</code></pre>\n\n<p>This seems to be working. Added two lines to set <code>out</code> to 1 and added <code>used + 1</code> to the call to memset.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n// one more than the desired size\n#define SIZE 4\n\nint main( void)\n{\n    char pw[SIZE] = \"\";\n    char *ppw = NULL;\n    char *pch = NULL;\n    char characters[] = \"abc\";\n    int used = 0;\n    int out = 1;\n    int last = strlen ( characters) - 1;\n\n    //set pw as character[0]\n    pw[used] = characters[0];\n    pw[used + 1] = '\\0';\n\n    while ( used &lt; SIZE - 1) {//loop until all elements of pw have been used\n        ppw = &amp;pw[used];//set ppw to point to last used element of pw\n        out = 1;\n        while ( ppw &gt;= pw) {//so ppw always points to an element of pw\n            if ( ( pch = strchr ( characters, *ppw)) != NULL) {//get pointer into characters for current value that ppw point to\n                if ( out) {//print when appropriate\n                    printf ( \"%s\\n\", pw);\n                }\n                out = 1;\n                if ( pch &lt; &amp;characters[last]) {//pch does not point to last element of characters\n                    ++pch;//pch points to next element of characters\n                    *ppw = *pch;//set what ppw points to to be the same as what pch points to\n                    if ( ppw != &amp;pw[used]) {//ppw is not pointing to last element of pw\n                        ppw = &amp;pw[used];\n                    }\n                }\n                else {//pch is pointing to last element of characters\n                    *ppw = characters[0];//set what ppw points to to be the first element of characters\n                    ppw--;//ppw points to next lower element of pw. ex from pw[n] to pw[n-1]\n                    out = 0;//disable printing\n                }\n            }\n        }//exit loop when ppw points to address less than pw\n        used++;//increase elements in use\n        memset ( pw, characters[0], used + 1);//reset all elements to first element of characters\n        pw[used + 1] = '\\0';//just in case, terminate\n    }//exit loop when all elements have been used\n\n    exit ( 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 0, "accepted_answer_id": 40407560, "answer_count": 1, "score": 0, "last_activity_date": 1478537330, "creation_date": 1478118768, "last_edit_date": 1478119612, "question_id": 40389271, "link": "https://stackoverflow.com/questions/40389271/how-can-i-get-this-brute-force-algorithm-to-check-letters-incrementally", "title": "How can I get this brute force algorithm to check letters incrementally", "body": "<p>For this assignment I have to use pthreads in C to make a brute force password cracker. </p>\n\n<p>The code below uses for loops to generate a 6 letter password (ideally 8 letters long) and then I use crypt_r to hash it and compare it with a hash and salt that I give the program at execution. </p>\n\n<p>The hash and salt are taken in at the start, stored in a struct called dataStr which then feeds it to pthreadCreate. </p>\n\n<p>It seems pretty straight forward but even when I memset the array to a null terminating char, at execution the program still sets the whole thing to 'aaaaaa'. The problem with this is that it ignores passwords that are 1-4 chars long. </p>\n\n<p><strong>Here is the data structure I'm using:</strong> </p>\n\n<pre><code>typedef struct {\n\n    char * hash;            //hashed code given in argv[1]\n    char * salt;            //salt for hashed code given in argv[2]\n\n    int start;              //starting char in alphabet for first letter\n    int end;                //ending char in alphabet for first letter\n\n    int id;                 //thread id\n\n} dataStruct;\n</code></pre>\n\n<p>Size definitions :</p>\n\n<pre><code>//Definitions\n#define PW_SIZE 8\n#define ALPHABET_SIZE 66\n#define HASH_MAX_SIZE 128\n</code></pre>\n\n<p><strong>and here is the code itself</strong> </p>\n\n<pre><code>void * thread(void * arg) {\n\n    struct timespec start, finish;          //Data structure for time.h library\n    clock_gettime(CLOCK_MONOTONIC, &amp;start); //Start chronometer\n    double elapsed;\n\n    struct crypt_data* cdata = (struct crypt_data *)malloc(sizeof(struct crypt_data));\n    cdata-&gt;initialized = 0;\n\n    dataStruct dataStr = *((dataStruct*)(arg)); //receive structure in arguement\n\n    const char * alphabet = get_alphabet();     //create alphabet\n\n    bool pw_found = false;                      //boolean used for \n    int retDone = 1;\n\n    char * pwd = malloc(PW_SIZE * sizeof(char));\n    memset(pwd, '\\0', PW_SIZE);\n\n    int i,j,k,l,m,n;\n\n    for (i = dataStr.start; i &lt;= dataStr.end; i++) {            \n        for (j = 0; j &lt;= ALPHABET_SIZE; j++) {\n            for (k = 0; k &lt;= ALPHABET_SIZE; k++) {\n                for (l = 0; l &lt;= ALPHABET_SIZE; l++) {\n                    for (m = 0; m &lt;= ALPHABET_SIZE; m++) {\n                        for (n = 0; n &lt;= ALPHABET_SIZE; n++) {\n\n                            if (pw_found) {\n                                clock_gettime(CLOCK_MONOTONIC, &amp;finish);        \n                                elapsed = finish.tv_sec - start.tv_sec;\n                                elapsed += (finish.tv_nsec - start.tv_nsec) / 1000000000.0; \n                                printf(\"Time elapsed : %f sec(s) \\n\\n\", elapsed);   //Time\n\n                                pthread_exit(&amp;retDone);                                 \n                            }                           \n\n                            pwd[0] = alphabet[i];   \n                            pwd[1] = alphabet[j];   \n                            pwd[2] = alphabet[k];\n                            pwd[3] = alphabet[l];\n                            pwd[4] = alphabet[m];\n                            pwd[5] = alphabet[n];\n\n                            printf(\"%s\\n\", pwd);\n\n                            char * hash = crypt_r(pwd, dataStr.salt, cdata);\n\n                            if (strcmp(hash, dataStr.hash) == 0) {\n                                printf(\"\\nPassword     : %s\\n\", pwd);\n                                pw_found = true;\n                            }\n                        }\n                    }\n                }\n            }\n        }                       \n    }\n\n    pthread_exit(&amp;retDone); \n}\n</code></pre>\n\n<p>Here's what it produces at execution: </p>\n\n<p><a href=\"https://i.stack.imgur.com/SgRoH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SgRoH.png\" alt=\"enter image description here\"></a></p>\n\n<p>I'd like to learn how I can change the 6 loops somehow in order to get the program to first only search in 1 letter chars, then 2, then 3 and increment from there.</p>\n\n<p>Any help is appreciated. Thanks a lot !</p>\n\n<p>PS - I don't mind emailing someone the code for a global view.</p>\n"}, {"tags": ["c", "switch-statement", "command", "line", "execution"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 1, "creation_date": 1478118836, "post_id": 40389248, "comment_id": 68030251, "body": "Try <code>switch(argv[1][0] - &#39;0&#39;)</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1478118876, "post_id": 40389248, "comment_id": 68030270, "body": "Or more like <code>switch (atoi(argv[1]))</code>"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478118962, "post_id": 40389248, "comment_id": 68030312, "body": "Both work. However, neither of this is optimal as <code>argv</code> is command line arguments yet you&#39;re asking for input which <code>argv</code> is not."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478118998, "post_id": 40389248, "comment_id": 68030335, "body": "You probably want something along the lines of <code>switch(getchar() - &#39;0&#39;)</code>"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478119028, "post_id": 40389248, "comment_id": 68030350, "body": "Also, you want <code>default:</code> not <code>default;</code> and you don&#39;t need <code>break;</code> in your default case."}, {"owner": {"reputation": 29, "user_id": 7106518, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139957386082875/picture?type=large", "display_name": "Miko\u0142aj Kuci\u0144ski", "link": "https://stackoverflow.com/users/7106518/miko%c5%82aj-kuci%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1478119713, "post_id": 40389248, "comment_id": 68030688, "body": "Well, switching to getchar indeed helped, but now i have diffrent problem. When i try to execute the program in command line by typing pp2.exe &lt; myfile.txt, it doesnt work at all. Its prints all possible cases from switch and command line shuts immediately. What can i do about that?"}], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 1562759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7e7ed679a9483984e1ae7a2ad5849e66?s=128&d=identicon&r=PG", "display_name": "John Holly", "link": "https://stackoverflow.com/users/1562759/john-holly"}, "is_accepted": false, "score": 0, "last_activity_date": 1478119464, "last_edit_date": 1478119464, "creation_date": 1478118834, "answer_id": 40389287, "question_id": 40389248, "link": "https://stackoverflow.com/questions/40389248/switch-command-doesnt-work/40389287#40389287", "title": "Switch command doesn&#39;t work", "body": "<p>You don't need to dereference the indexed argument, indexing it dereferences the string. <code>*argv[1]</code> should be <code>argv[1]</code> - but before you can switch it, you need to convert that string to an integer.</p>\n"}], "owner": {"reputation": 29, "user_id": 7106518, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139957386082875/picture?type=large", "display_name": "Miko\u0142aj Kuci\u0144ski", "link": "https://stackoverflow.com/users/7106518/miko%c5%82aj-kuci%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478121873, "creation_date": 1478118673, "last_edit_date": 1478121873, "question_id": 40389248, "link": "https://stackoverflow.com/questions/40389248/switch-command-doesnt-work", "title": "Switch command doesn&#39;t work", "body": "<p>I have to do an assignment for tommorow connected with filters. I've created the functions that I need but I have a problem with my main function which looks like this:</p>\n\n<pre><code>int main (int argc, char *argv[])\n{\n  printf (\"Select program: \\n1-makeLower \\n2-makeUpper \\n3-makeChange\");\n  switch(*argv[1])\n  {\n  case 1:\n    makeLower();\n    break;\n  case 2:\n    makeUpper();\n    break;\n  case 3;\n    makechange();\n    break;\n  default;\n    printf (\"Error\");\n    break;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>When I try to compile it, an error appears \"pp2.exe has stopped working\". Could you guys help me solve this problem. Also, I need to use this program from the command line in order to filter some data. Did I use the <code>switch</code> command correctly? Will I be able to switch beetwen functions while working in command line?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 112977, "user_id": 390278, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84715fec547362389d02f5be0ed12814?s=128&d=identicon&r=PG", "display_name": "Jeff Mercado", "link": "https://stackoverflow.com/users/390278/jeff-mercado"}, "edited": false, "score": 6, "creation_date": 1478118664, "post_id": 40389220, "comment_id": 68030148, "body": "The arrays are never initialized..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478118744, "post_id": 40389220, "comment_id": 68030191, "body": "..specifically <code>x</code> from which you read before it has any valid data."}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1478118768, "post_id": 40389220, "comment_id": 68030206, "body": "what happens if name is greater than 19 characters plus nul terminator <code>\\0</code>. <code>NULL</code> and nul are two completely different beasts."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478119658, "post_id": 40389220, "comment_id": 68030671, "body": "You can initialise <code>x</code> simply with <code>char x[5][20] = {{0}};</code> You only need to initialise the first element and the compiler will ensure the rest will be <code>0</code>. (If you initiliase the first array element to <code>1</code>, the rest will still be initialised to <code>0</code>). Otherwise, local variables are not initiliased unless you do it explicity."}], "answers": [{"tags": [], "owner": {"reputation": 188, "user_id": 6759414, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CupJXHUKMVc/AAAAAAAAAAI/AAAAAAAAAAo/ZRc8Ux7BvpA/photo.jpg?sz=128", "display_name": "Matheus Rotta", "link": "https://stackoverflow.com/users/6759414/matheus-rotta"}, "is_accepted": true, "score": 0, "last_activity_date": 1478130192, "last_edit_date": 1495541956, "creation_date": 1478119166, "answer_id": 40389395, "question_id": 40389220, "link": "https://stackoverflow.com/questions/40389220/problems-with-0-in-2d-array/40389395#40389395", "title": "Problems with &#39;\\0&#39; in 2d array", "body": "<p><a href=\"https://stackoverflow.com/questions/40389220/problems-with-0-in-2d-array/40389395#comment68030148_40389220\">Jeff Mercado</a> is correct, op. You will have undefined behavior if you don't initialize those arrays. I suggest you insert the nul character '\\0' on every first position, to make it coherent with the code you had already done. You could do that on your main function: </p>\n\n<pre><code>for (i = 0; i &lt; 5; i++) x[i][0] = '\\0';\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7106348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d56db254adefc689125aa54709fb33?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Kertson", "link": "https://stackoverflow.com/users/7106348/dylan-kertson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40389395, "answer_count": 1, "score": -1, "last_activity_date": 1478130192, "creation_date": 1478118563, "question_id": 40389220, "link": "https://stackoverflow.com/questions/40389220/problems-with-0-in-2d-array", "title": "Problems with &#39;\\0&#39; in 2d array", "body": "<p>For some reason, when I execute case 1, I am assigned the time 4pm, so it doesn't find the \\0 in the first 3 instances of i, but finds it on the fourth.  I am just a little confused on how the null character works with a 2d array, is it stored by default in every row, does it need to be added?  I am trying to have a 5x20 array with 5 different slots for names.  Thanks in advance</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n    int i;\n    int j;\n    int total=0;\n    int opt;\n    int time;\n    char x[5][20];\n    char name[20];\n\n    printf(\"----MAIN MENU----\\n\");\n    printf(\"1: Request a lesson\\n\");\n    printf(\"2: Cancel a lesson\\n\");\n    printf(\"3: See available lessons\\n\");\n    printf(\"4: List all names starting with a letter\\n\"); \n    printf(\"9: Quit\\n\");\n\n\n    for(;;)\n    {\n        scanf(\"%d\",&amp;opt);\n        switch(opt)\n        {\n            case 1:\n                printf(\"please enter your name\\n\");\n                scanf(\"%s\",name);\n\n                //if schedule is full\n                if(total==5)\n                {   \n                    printf(\"Sorry, the teacher is too busy, try again tomorrow.\\n\");\n                }\n\n\n                //opening in schedule\n                else\n                    for(i=0;i&lt;5;i++)\n                        if (x[i][0]=='\\0')\n                        {\n                            strcpy(x[i], name);\n                            total++;\n                            printf(\"You have been assigned the time %dpm\\n\",i+1);\n                            break;\n                        }\n\n                break;\n</code></pre>\n"}, {"tags": ["c", "list", "struct", "readfile", "void-pointers"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478118761, "post_id": 40389196, "comment_id": 68030203, "body": "<code>sizeof(aux-&gt;data)</code> in <code>saveToFile()</code> is the size of a <code>void</code> pointer.  You need to be writing the actual data.  You need to look up &#39;serialization&#39;, I think."}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1478120140, "post_id": 40389196, "comment_id": 68030918, "body": "The syntax of <code>fread()</code> is not correct. It should be <code>nread = fread(&amp;buffer,sizeof(struct &lt;telfList&#47;calendar&gt;),1,file);</code>. Before, the buffer shall be allocated or defined as <code>struct &lt;telfList&#47;calendar&gt; buffer</code>."}, {"owner": {"reputation": 1655, "user_id": 6945651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WXXfN.jpg?s=128&g=1", "display_name": "J. Piquard", "link": "https://stackoverflow.com/users/6945651/j-piquard"}, "edited": false, "score": 0, "creation_date": 1478120475, "post_id": 40389196, "comment_id": 68031113, "body": "Could you provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> in order to detect all errors ?"}], "answers": [{"tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": true, "score": 0, "last_activity_date": 1478119167, "creation_date": 1478119167, "answer_id": 40389396, "question_id": 40389196, "link": "https://stackoverflow.com/questions/40389196/c-reading-from-binary-file-into-any-struct/40389396#40389396", "title": "C - Reading from binary file into any struct", "body": "<p>Serialization structs into the binary (or any other form) is a separate task for a separate library. Don't mix it with your List library.</p>\n\n<p>For serialization I suggest to use some 3rd party library like <a href=\"https://github.com/protobuf-c/protobuf-c\" rel=\"nofollow noreferrer\"><code>protobuf-c</code></a>. Even if you cannot use it in your project check it to understand the basic concepts of data serialization.</p>\n"}], "owner": {"reputation": 3, "user_id": 7106528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13e5d4c90be7ac795e5ef74575b263fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Poveda", "link": "https://stackoverflow.com/users/7106528/luis-poveda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 40389396, "answer_count": 1, "score": 0, "last_activity_date": 1478193066, "creation_date": 1478118458, "last_edit_date": 1478193066, "question_id": 40389196, "link": "https://stackoverflow.com/questions/40389196/c-reading-from-binary-file-into-any-struct", "title": "C - Reading from binary file into any struct", "body": "<p>I've been looking a lot but couldn't find any answer to my problem.</p>\n\n<p>I'm building my own list library on C. My idea is to work with all posible type of data so I'm using void pointers.</p>\n\n<p>First of all, this is my List.</p>\n\n<p>File - node.h</p>\n\n<pre><code>struct Node{\n    void *data;\n    Node *next;\n};\n</code></pre>\n\n<p>I have created some random structures for testing my methods such as add, delete, write, and more and are working fine.</p>\n\n<p>File - test.cpp</p>\n\n<pre><code>struct telfList{\n    int telf;\n    char name;\n};\nstruct calendar{\n    char month[5];\n};\n</code></pre>\n\n<p>Here is where I write the struct to file.</p>\n\n<pre><code>bool saveToFile(struct Node *list, char *fileName){\n    FILE *file = fopen(fileName, \"wb\");\n    if(file == NULL){\n        return false;\n    }\n    struct Node *aux = list;    \n    while(aux != NULL){\n        fwrite(&amp;(aux-&gt;data), 1, sizeof(aux-&gt;data), file);\n        aux = aux-&gt;next;\n    }    \n    fclose(file);\n    return true;\n}\n</code></pre>\n\n<p>My problem comes here.\nI want to read that file again and store the info back to the list and it has to work with every type of structs because in this test there are telfList and calendar but maybe in the future are enemies, players or whatever.\nI don't know how to pass the type of data to the function by param or how to pass the fread by void pointer.</p>\n\n<p>I know that function is wrong, is how I have it now, I proved all I know, I've read like hundred Questions here en stackoverflow but no one has this doubt/problem</p>\n\n<p>In this example I'm trying to read the file and fill the telfList's struct with the data.</p>\n\n<pre><code>bool loadFromFile(struct Node **list, void* data, char *fileName){\n    FILE *file = fopen(fileName, \"rb\");\n    struct Node *aux = *list;\n    if(file == NULL){\n        return false;\n    }\n    data = fread(fileName, sizeof(*data), 1, file);\n    createNewList(list, data);\n    fclose(file);\n    return true;\n}\n</code></pre>\n\n<p>This is how I create the list.</p>\n\n<pre><code>void createNewList(struct Node **list, void* data){\n    (*list) = createNode(data);\n}\nstruct Node* createNode(void* data){\n    struct Node *newNode = (struct Node*)malloc(sizeof(struct Node));\n    newNode-&gt;data = data;\n    newNode-&gt;next = NULL;\n    return newNode;\n}\n</code></pre>\n\n<p>I tried to explain it in detail but if need more code parts just say me.\nThank you.</p>\n\n<p>EDIT: Thx to everyone for answering, I've been researching about serialization and your tips were very helpfull.</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 30477, "user_id": 6052290, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x39xkstNSw0/AAAAAAAAAAI/AAAAAAAAAMg/bmCsYWjeKsc/photo.jpg?sz=128", "display_name": "Brynden Bielefeld", "link": "https://stackoverflow.com/users/6052290/brynden-bielefeld"}, "edited": false, "score": 1, "creation_date": 1478118322, "post_id": 40389123, "comment_id": 68029948, "body": "<i>&quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>.&quot;</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478118333, "post_id": 40389123, "comment_id": 68029957, "body": "One pile of warnings is because <code>int8_t *arr[]</code> is an array of pointers, not an array of (small) integers.  Drop the <code>*</code>.  The variable <code>min_ptr</code> is unused and should be removed.  You should probably not use both <code>sizeof(arr)&#47;sizeof(arr[0])</code> and 4 for the size of the array; the expression is better than number."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1478118412, "post_id": 40389123, "comment_id": 68030011, "body": "Why do you compute the size of the array to call <code>array_mod</code>, but hard-code it to print it?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1478118412, "post_id": 40389123, "comment_id": 68030013, "body": "The errors and warnings are <i>telling you</i> what&#39;s going wrong. Try reading them! (Also, when developing new code, always compile with all warnings enabled \u2014 add <code>-Wall -pedantic</code> to the command line.)"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478118526, "post_id": 40389123, "comment_id": 68030075, "body": "And <code>0xC4</code> exceds the range of <code>int8_t</code> (typicaly -128 ... 127)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478118607, "post_id": 40389123, "comment_id": 68030120, "body": "@KeineLust: &quot;<b>typicaly</b> 0 ... 127&quot;?? - <b>exactly</b> -128..127 and nothing else!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478118975, "post_id": 40389123, "comment_id": 68030320, "body": "@KeineLust: Still incorrect after the edit!"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478119281, "post_id": 40389123, "comment_id": 68030484, "body": "@Olaf Yes, I was thinking in <code>unsigned char</code>, <code>uint8_t</code> is <i>always</i> in the range -128 ... 127, thank you"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478119422, "post_id": 40389123, "comment_id": 68030550, "body": "@KeineLust: Before we get the discussion warning: You might want to read about the valid ranges for the standard integer types as well as the extended integer types. Your asumption for <code>uinsigned char</code> is wrong, too. Just in case you have &quot;Lust&quot;."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478121035, "post_id": 40389123, "comment_id": 68031409, "body": "@Olaf, are you sure? if I remember well, in one&#39;s complement encoding the range of <code>signed char</code> was -127 ... 127 (there were + 0 and -0 in different values) , anyway you are right, <code>int8_t</code> must be encoded as a two&#39;s complement signed integer, the range is always -128 ... 127"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478121931, "post_id": 40389123, "comment_id": 68031868, "body": "@KeineLust: You wrote about <b><code>unsigned</code></b> <code>char</code>! And please read the standard about fixed width types."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478122294, "post_id": 40389123, "comment_id": 68032017, "body": "@Olaf, ooops, I am totally dyslexic :)"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478118743, "post_id": 40389232, "comment_id": 68030190, "body": "&quot;on most modern system sizeof(int) returns 4&quot; - wrong and dangerous to state to an obvious beginner. There are many modern 16 bit systems and some systems with e.g. 16 or 32 bits/byte. A pointer is <b>not</b> an <code>int</code>! It is not even an <i>integer</i>. Not sure what you mean with that extra variable. The <code>sizeof</code>? expression is the best part of that code."}, {"owner": {"reputation": 478, "user_id": 5446815, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2a57abf3b2d1ba10b18f2557afe339a2?s=128&d=identicon&r=PG&f=1", "display_name": "Matrefeytontias", "link": "https://stackoverflow.com/users/5446815/matrefeytontias"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478118823, "post_id": 40389232, "comment_id": 68030242, "body": "Right, I should change that. Also, it seems I&#39;m double wrong since I tested and <code>sizeof(arr)</code> does yield the correct result. Don&#39;t know where I&#39;ve got that from, I&#39;m sorry ..."}], "tags": [], "owner": {"reputation": 478, "user_id": 5446815, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2a57abf3b2d1ba10b18f2557afe339a2?s=128&d=identicon&r=PG&f=1", "display_name": "Matrefeytontias", "link": "https://stackoverflow.com/users/5446815/matrefeytontias"}, "is_accepted": false, "score": -2, "last_activity_date": 1478118893, "last_edit_date": 1478118893, "creation_date": 1478118617, "answer_id": 40389232, "question_id": 40389123, "link": "https://stackoverflow.com/questions/40389123/c-program-to-increment-each-element-of-an-array-passed/40389232#40389232", "title": "C program to increment each element of an array passed", "body": "<p>First of all, it would be best to include said list of warnings and errors, but with such a small program it's mostly alright.</p>\n\n<p>Into the matter, you declared your array wrong ; it should be <code>int8_t arr[]</code> (you included an extra *). You want an array of integers, not a pointer to an array of integers nor an array of pointers to integers (you can't initialise the former like that anyway).</p>\n\n<p> <code>sizeof</code> doesn't work like you think it does. It returns the number of bytes taken up by the variable or type in memory. For example, on most modern system <code>sizeof(int)</code> returns 4, as would something like <code>int a = 1; sizeof(a)</code>, and just like <code>sizeof(arr)</code> in your case. <code>arr</code> is not an array, it's a pointer to an array, so it's technically an int (thus 4 bytes). You would have to create an additional variable and manually hold the array's size if it were to change. </p>\n\n<p>EDIT : tried it, seems to work. I remember that it doesn't but apparently it does ...</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 1, "last_activity_date": 1478130529, "creation_date": 1478130529, "answer_id": 40391687, "question_id": 40389123, "link": "https://stackoverflow.com/questions/40389123/c-program-to-increment-each-element-of-an-array-passed/40391687#40391687", "title": "C program to increment each element of an array passed", "body": "<p>Multiple problems indeed:</p>\n\n<ul>\n<li><p>Incorrect type in declaration <code>int8_t *arr[] = {0xAB, 0xCB, 0xC4, 0x84};</code>: you should remove the <code>*</code> as <code>arr</code> is an array of numbers, not an array of pointers.  Furthermore, the values are larger than 127 which is the maximum value for type <code>int8_t</code>, you should use <code>uint8_t</code> or a larger type.</p></li>\n<li><p>Missing <code>)</code> at the end of <code>array_incr(arr, sizeof(arr)/sizeof(arr[0]);</code></p></li>\n<li><p>There is no <code>\\n</code> in the <code>printf(\"%d\", arr[i]);</code> output statement.  The values will come out in a single sequence of digits (and negative signs, since the values are actually negative for type <code>int8_t</code>).</p></li>\n</ul>\n\n<p>Here is a corrected version:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nvoid array_incr(uint8_t *, uint8_t);\n\nint main(void) {\n    uint8_t arr[] = { 0xAB, 0xCB, 0xC4, 0x84 };\n    array_incr(arr, sizeof(arr) / sizeof(arr[0]));\n    int i;\n    for (i = 0; i &lt; 4; i++)\n        printf(\"%d\\n\", arr[i]);\n}\n\nvoid array_incr(uint8_t *arr, uint8_t len) {\n    int i;\n    for (i = 0; i &lt; len; i++)\n        arr[i]++;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4775256, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a4af29801507dda9b5b90d3458fc3168?s=128&d=identicon&r=PG&f=1", "display_name": "abruzzi26", "link": "https://stackoverflow.com/users/4775256/abruzzi26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "accepted_answer_id": 40391687, "answer_count": 2, "score": -3, "last_activity_date": 1478130529, "creation_date": 1478118221, "last_edit_date": 1478119063, "question_id": 40389123, "link": "https://stackoverflow.com/questions/40389123/c-program-to-increment-each-element-of-an-array-passed", "title": "C program to increment each element of an array passed", "body": "<p>C novice here.<br>\nI am trying to write a program containing function that takes in an array pointer, and each element of the array passed in the main function is incremented by 1. This is what I have tried:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nvoid array_incr(int8_t *, uint8_t);\n\nint main (void){\n    int8_t *arr[] = {0xAB, 0xCB, 0xC4, 0x84};\n    array_incr(arr, sizeof(arr)/sizeof(arr[0]);\n    int i;\n    for (i = 0; i &lt; 4; i++)\n        printf(\"%d\", arr[i]);\n}\n\nvoid array_incr(int8_t *arr, uint8_t len){\n    int i;\n    for(i=0; i&lt;len; i++)\n        arr[i]++;\n\n}\n</code></pre>\n\n<p>This is compiling with a lot of warnings and errors. Could someone please tell me where I am going wrong, while maintaining the same format of implementation? </p>\n"}, {"tags": ["c", "bash"], "comments": [{"owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "edited": false, "score": 0, "creation_date": 1478119450, "post_id": 40388858, "comment_id": 68030563, "body": "If you&#39;re on Linux, just read from <code>&#47;proc</code>: <a href=\"http://stackoverflow.com/q/16726779/8446\">stackoverflow.com/q/16726779/8446</a>"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 2306078, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d758b489d1e8d3f2fddba799be3c3e9c?s=128&d=identicon&r=PG", "display_name": "bhargava_sg", "link": "https://stackoverflow.com/users/2306078/bhargava-sg"}, "edited": false, "score": 0, "creation_date": 1478118589, "post_id": 40388907, "comment_id": 68030108, "body": "Oh I think you are right, the process state says S when I printed the whole line in top command from within the system. Thank you!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 123, "user_id": 2306078, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d758b489d1e8d3f2fddba799be3c3e9c?s=128&d=identicon&r=PG", "display_name": "bhargava_sg", "link": "https://stackoverflow.com/users/2306078/bhargava-sg"}, "edited": false, "score": 0, "creation_date": 1478119426, "post_id": 40388907, "comment_id": 68030553, "body": "thanks for a very good question. Now read <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}, {"owner": {"reputation": 123, "user_id": 2306078, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d758b489d1e8d3f2fddba799be3c3e9c?s=128&d=identicon&r=PG", "display_name": "bhargava_sg", "link": "https://stackoverflow.com/users/2306078/bhargava-sg"}, "edited": false, "score": 0, "creation_date": 1478119588, "post_id": 40388907, "comment_id": 68030633, "body": "I used popen() instead of system and now it works! Thanks a lot. The answer was spot on!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 123, "user_id": 2306078, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d758b489d1e8d3f2fddba799be3c3e9c?s=128&d=identicon&r=PG", "display_name": "bhargava_sg", "link": "https://stackoverflow.com/users/2306078/bhargava-sg"}, "edited": false, "score": 0, "creation_date": 1478119704, "post_id": 40388907, "comment_id": 68030684, "body": "<code>popen()</code>! nice hack to avoid using <code>fork</code> and threads. I&#39;ll keep that in mind."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 9, "last_activity_date": 1478117445, "creation_date": 1478117445, "answer_id": 40388907, "question_id": 40388858, "link": "https://stackoverflow.com/questions/40388858/top-command-returns-0-cpu-usage-when-i-check-my-processs-cpu-usage-from-within/40388907#40388907", "title": "top command returns 0% CPU usage when I check my process&#39;s CPU usage from within the process", "body": "<p>When you're running your <code>system</code> command, the current process is suspended (not sure if it is the proper term, but not running at any rate), waiting for the command you ran to end.</p>\n\n<p>While it's suspended, its CPU usage is 0%, which is expected.</p>\n\n<p>To get the correct information, you have to run your <code>system</code> command in a separate thread or process, so your program can keep running.</p>\n"}], "owner": {"reputation": 123, "user_id": 2306078, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d758b489d1e8d3f2fddba799be3c3e9c?s=128&d=identicon&r=PG", "display_name": "bhargava_sg", "link": "https://stackoverflow.com/users/2306078/bhargava-sg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1061, "favorite_count": 2, "accepted_answer_id": 40388907, "answer_count": 1, "score": 7, "last_activity_date": 1478117445, "creation_date": 1478117298, "question_id": 40388858, "link": "https://stackoverflow.com/questions/40388858/top-command-returns-0-cpu-usage-when-i-check-my-processs-cpu-usage-from-within", "title": "top command returns 0% CPU usage when I check my process&#39;s CPU usage from within the process", "body": "<p>I have written a C program which needs to get its own CPU and memory usage. So I have written something like this:</p>\n\n<pre><code>        system(\"prs_pid=`ps | grep prs-m1 | awk '{print $1}'` \\n top -n1 | grep -m1 $prs_pid | \\\n                    awk '{print \\\"prs_cpu:\\\" $7 \\\"\\\\nprs_mem:\\\" $6}' &gt;&gt; /stats\");\n</code></pre>\n\n<p>My application name is prs and I do a PS and get the pid of my process and then want to get CPU usage from running TOP. The program reports it is using 2% memory and 0% CPU. But, running the same command manually on the cmd returns the same memry usage but a valid non-zero CPU that I can verify by running top. What I don't understand is why is the cpu usage always 0% when tried from inside the system?</p>\n"}, {"tags": ["c", "assignment-operator", "conditional-operator", "lvalue"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1478116873, "post_id": 40388689, "comment_id": 68029169, "body": "operator precedence perhaps?"}, {"owner": {"reputation": 32760, "user_id": 206367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/121b360a4d7d20be6e220dcdb555649f?s=128&d=identicon&r=PG", "display_name": "t0mm13b", "link": "https://stackoverflow.com/users/206367/t0mm13b"}, "edited": false, "score": 0, "creation_date": 1478116901, "post_id": 40388689, "comment_id": 68029181, "body": "That is a ternary operator, <code>?</code> (some_condition) <code>:</code> (other_condition)."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1478117038, "post_id": 40388689, "comment_id": 68029252, "body": "If you want a side-effect in <code>x</code>, with that value assigned to <code>b</code> you need parentheses around <i>both</i> the alternate expressions. <code>b = 3 &lt; 2 ? (x=12) : (x=34);</code> Try adding <code>printf(&quot;%d %d\\n&quot;, b, x);</code> after that ternary operator."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478117181, "post_id": 40388689, "comment_id": 68029333, "body": "&quot;short type of if-else&quot; - It can be <b>miss</b>used as that, yes. But don&#39;t even think about! And use spaces around such operators. What is your code supposed to do? Looks like you have not really understood what the conditional operator does."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1478117309, "post_id": 40388689, "comment_id": 68029410, "body": "still, I answered but deleted since operator precendence is not the reason here: &quot;The expression in the middle of the conditional operator (between ? and :) is parsed as if parenthesized: its precedence relative to ?: is ignored&quot;. So if it&#39;s parsed as if parenthesized why does it need parentheses (I agree that the construct is not very good, this is not an if else but ternary operator)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1478117664, "post_id": 40388689, "comment_id": 68029585, "body": "It would probably be clearer written as: <code>b = x = (3 &lt; 2) ? 12 : 34;</code>."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1478117723, "post_id": 40388689, "comment_id": 68029619, "body": "Just do one thing at a time"}, {"owner": {"reputation": 115, "user_id": 5700956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00af9fb353e57e0ac073dc4fe6380053?s=128&d=identicon&r=PG&f=1", "display_name": "F. Eser", "link": "https://stackoverflow.com/users/5700956/f-eser"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478117755, "post_id": 40388689, "comment_id": 68029637, "body": "@Olaf I don&#39;t know what the code is for but it was my exam question. I tried it with gcc and saw the result."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478117861, "post_id": 40388689, "comment_id": 68029696, "body": "You first should understand what your code is <b>supposed</b> to do. Without that it is pointless asking how to fix an error. As given, the code is nonsense and no sane programmer would write such code."}, {"owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "edited": false, "score": 2, "creation_date": 1478117898, "post_id": 40388689, "comment_id": 68029728, "body": "Could the compiler be evaluating as <code>b = (3&lt;2?x=12:x)  = 34;</code> That would explain the &quot;lvalue required&quot; error."}, {"owner": {"reputation": 115, "user_id": 5700956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00af9fb353e57e0ac073dc4fe6380053?s=128&d=identicon&r=PG&f=1", "display_name": "F. Eser", "link": "https://stackoverflow.com/users/5700956/f-eser"}, "reply_to_user": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "edited": false, "score": 0, "creation_date": 1478118105, "post_id": 40388689, "comment_id": 68029823, "body": "@JohnD uhh finally understand. Thank you..."}, {"owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "edited": false, "score": 0, "creation_date": 1478118181, "post_id": 40388689, "comment_id": 68029857, "body": "That was a guess on my part - can anyone confirm it?"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1478122726, "post_id": 40389972, "comment_id": 68032216, "body": "ideone suppresses a lot of error message, so it&#39;s not a great tool for &quot;verification&quot;. Suggest using gcc.godbolt.org"}], "tags": [], "owner": {"reputation": 1324, "user_id": 6212666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6979ce8911c0f0e6c27f93bb6b39f09?s=128&d=identicon&r=PG", "display_name": "John D", "link": "https://stackoverflow.com/users/6212666/john-d"}, "is_accepted": true, "score": 3, "last_activity_date": 1478121483, "last_edit_date": 1495542716, "creation_date": 1478121483, "answer_id": 40389972, "question_id": 40388689, "link": "https://stackoverflow.com/questions/40388689/error-lvalue-required-as-left-operand-of-assignment-in-conditional-operator/40389972#40389972", "title": "&quot;error: lvalue required as left operand of assignment&quot; in conditional operator", "body": "<p>+1 for interesting question - it highlights two differences between C++ and C.</p>\n\n<p>(1) The evaluation rules for ternary expressions are different in C and C++</p>\n\n<p>C++ parses as follows</p>\n\n<pre><code>logical-OR-expression ? expression : assignment-expression\n</code></pre>\n\n<p>It is therefore parsing your statement by matching <code>assignment-expression</code> to <code>x=34</code></p>\n\n<pre><code>b = 3&lt;2 ? x = 12 : (x = 34);\n</code></pre>\n\n<p>But C parses like this</p>\n\n<pre><code>logical-OR-expression ? expression : conditional-expression \n</code></pre>\n\n<p><code>x = 34</code> is not a <code>conditional-expression</code> so your statement gets parsed like</p>\n\n<pre><code>b = (3&lt;2 ? x = 12 : x) = 34;\n</code></pre>\n\n<p>(2) The conditional operator in C++ can return an <code>lvalue</code>, whereas C cannot. Hence, the following is legal in C++ but not in C:</p>\n\n<pre><code>b = (3&lt;2 ? x = 12 : x) = 34;\n</code></pre>\n\n<p>Verified on ideone.com for C and C++ compilers. \nSee also these links\n<a href=\"https://stackoverflow.com/questions/26448611/errors-using-ternary-operator-in-c\">Errors using ternary operator in c</a>    for diff between C and C++ ternary operator\n<a href=\"https://stackoverflow.com/questions/1082655/conditional-operator-differences-between-c-and-c\">Conditional operator differences between C and C++</a>    for diff in lvalue rules</p>\n"}], "owner": {"reputation": 115, "user_id": 5700956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00af9fb353e57e0ac073dc4fe6380053?s=128&d=identicon&r=PG&f=1", "display_name": "F. Eser", "link": "https://stackoverflow.com/users/5700956/f-eser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "accepted_answer_id": 40389972, "answer_count": 1, "score": 4, "last_activity_date": 1478122790, "creation_date": 1478116645, "last_edit_date": 1478122790, "question_id": 40388689, "link": "https://stackoverflow.com/questions/40388689/error-lvalue-required-as-left-operand-of-assignment-in-conditional-operator", "title": "&quot;error: lvalue required as left operand of assignment&quot; in conditional operator", "body": "<p>I'm new to C and today I learnt \"?\" operator which is the short type of if-else statement. However, when I execute this code:</p>\n\n<pre><code>int b;\nint x;\nb=3&lt;2?x=12:x=34;\n</code></pre>\n\n<p>I get an error \"error: lvalue required as left operand of assignment\". I don't understand why it happens. Process in my mind is that the program first assigns 34 to x, then it assigns value of x,which is 34, to b. \nOn the other hand, I can use the statement as</p>\n\n<pre><code>int b;\nint x;\nb=3&lt;2?x=12:(x=34);\n</code></pre>\n\n<p>without any errors. I looked to my book but nothing helped. Why can't I use the first statement? What is my computer trying to do?\nThanks...</p>\n"}, {"tags": ["c", "makefile", "gnu-make"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478116622, "post_id": 40388653, "comment_id": 68029036, "body": "Why don&#39;t you try without including them as dependencies and see what happens. The best way to learn, in my experience, is by trying."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478116625, "post_id": 40388653, "comment_id": 68029037, "body": "The best practice is to include <i>all</i> of the <i>direct</i> dependencies. Even if you know some of them are including each other."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478117686, "post_id": 40388653, "comment_id": 68029598, "body": "Generate such dependencies automatically. There are sample makefile which provide this. If you are not bound to make, consider a modern build tool which has this feature built-in, e.g. SCons."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1478119114, "last_edit_date": 1478119114, "creation_date": 1478117495, "answer_id": 40388925, "question_id": 40388653, "link": "https://stackoverflow.com/questions/40388653/do-i-need-to-include-header-files-included-in-other-header-file-in-the-dependenc/40388925#40388925", "title": "do I need to include header files included in other header file in the dependencies list for a make file?", "body": "<p>You should include all non-system headers, direct and indirect, in the rule for a given source file.</p>\n\n<p>Suppose you have the following:</p>\n\n<p>b.h:</p>\n\n<pre><code>#ifndef B_H\n#define B_H\n\nstruct s1 {\n    int f1;\n};\n\nvoid f1(int p1);\n\n#endif\n</code></pre>\n\n<p>a.h:</p>\n\n<pre><code>#ifndef A_H\n#define A_H\n\n#include \"b.h\"\n\nvoid f2(struct s1 *p1);\n\n#endif\n</code></pre>\n\n<p>a.c</p>\n\n<pre><code>#include \"a.h\"\n\nvoid f3()\n{\n    struct s1 my_s1;\n    my_s1.f1 = 1;\n    my_s1.f2 = 2;\n    f2(&amp;my_s1);\n}\n</code></pre>\n\n<p>Suppose the definition of <code>struct s1</code> in b.h changes to remove the field <code>f2</code>.  If b.h is not included in the dependency list for a.c, a.c won't be recompiled.  Then you end up linking the existing object file with another with conflicting definitions for <code>struct s1</code>.  You then end up with <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>So you need to fugure out all dependencies.  Luckily, <a href=\"https://linux.die.net/man/1/gcc\" rel=\"nofollow noreferrer\">gcc</a> has an option to generate the dependency rules for you:</p>\n\n<pre><code>gcc -MM a.c\n</code></pre>\n\n<p>This will output a rule suitable for make that has all non-system include files listed, both direct and indirect.</p>\n\n<pre><code>a.o: a.c a.h b.h\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6759796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c730d674c2aa89ea53af23ccab1f51d?s=128&d=identicon&r=PG&f=1", "display_name": "kkr", "link": "https://stackoverflow.com/users/6759796/kkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "closed_date": 1478118268, "answer_count": 1, "score": 2, "last_activity_date": 1478119114, "creation_date": 1478116520, "question_id": 40388653, "link": "https://stackoverflow.com/questions/40388653/do-i-need-to-include-header-files-included-in-other-header-file-in-the-dependenc", "closed_reason": "Duplicate", "title": "do I need to include header files included in other header file in the dependencies list for a make file?", "body": "<p>For example if I have A.h that includes B.h. And I have the source file A.c for A.h. Do i need to include B.h in the dependency list of every sample.c (that calls functions in A.c) while creating makefile ?</p>\n"}, {"tags": ["c", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1478116072, "post_id": 40388481, "comment_id": 68028744, "body": "&quot;I thought that given I am passing a pointer, it will change the original&quot;. C does not have pass by reference. It&#39;s all pass by value. In this case you are passing the pointer by value. Any changes to the pointer value itself have no effect on the caller. Only changes to what the pointer points to will be seen by the caller. A simplified rule of thumb: Assignments that have an address/pointer deref on the LHS will be seen by the caller. Other assignments will not."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1478116306, "post_id": 40388481, "comment_id": 68028871, "body": "You need this: <code>void removeEntry(struct entry **pList) { *pList = (*pList)-&gt;next; }</code> and call it with <code>removeEntry(&amp;listPointer);</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478116400, "post_id": 40388481, "comment_id": 68028923, "body": "If you want to remove the <i>following</i> item first check there <i>is</i> a following item. Remember its pointer. Copy <i>that</i> node&#39;s <code>next</code> pointer to the current node&#39;s <code>next</code> pointer. Then <code>free</code> the pointer that you remembered (the next node)."}, {"owner": {"reputation": 21, "user_id": 6267757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d903e68ebee0241adee09d21df01e68b?s=128&d=identicon&r=PG&f=1", "display_name": "CHV", "link": "https://stackoverflow.com/users/6267757/chv"}, "edited": false, "score": 0, "creation_date": 1478116441, "post_id": 40388481, "comment_id": 68028938, "body": "Thank you kaylum, that&#39;s amazing! But why did I need a double pointer? Sorry, I clearly need to learn more about pointers (hopefully I will after this chapter!)"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1478117412, "post_id": 40388481, "comment_id": 68029462, "body": "If you want to change an int you need a pointer to an int. If you want to change a char you need a pointer to a char. If you want to change a pointer you need a pointer to a pointer. I hope that pattern is obvious :-)  ANd yes, please do review the text book."}, {"owner": {"reputation": 21, "user_id": 6267757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d903e68ebee0241adee09d21df01e68b?s=128&d=identicon&r=PG&f=1", "display_name": "CHV", "link": "https://stackoverflow.com/users/6267757/chv"}, "edited": false, "score": 0, "creation_date": 1478117920, "post_id": 40388481, "comment_id": 68029735, "body": "Thank you, you&#39;ve been really helpful (and yes, now that you say it it seems obvious....) :-)"}, {"owner": {"reputation": 1051, "user_id": 2093195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3c2c0866e1e1d5935b70f59fcf7fbc?s=128&d=identicon&r=PG", "display_name": "Heyji", "link": "https://stackoverflow.com/users/2093195/heyji"}, "edited": false, "score": 0, "creation_date": 1478119470, "post_id": 40388481, "comment_id": 68030576, "body": "There is no need for a double pointer in this case."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6267757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d903e68ebee0241adee09d21df01e68b?s=128&d=identicon&r=PG&f=1", "display_name": "CHV", "link": "https://stackoverflow.com/users/6267757/chv"}, "edited": false, "score": 0, "creation_date": 1478120681, "post_id": 40389434, "comment_id": 68031220, "body": "Thanks, I realised that it wasn&#39;t quite right after re-reading the question (it does after all ask for a pointer to the list as an argument, and not a pointer to a pointer). I was so exited to have something that worked, that I missed the fact that I was removing the wrong item! (On the upside, I now know that you can have pointers to pointers...:-) I am now back to struggling to figure out how to access the entry I want to remove (as I only have one argument, I don&#39;t know how to get n2.next into pList-&gt;next). Hrmpf...."}, {"owner": {"reputation": 1051, "user_id": 2093195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3c2c0866e1e1d5935b70f59fcf7fbc?s=128&d=identicon&r=PG", "display_name": "Heyji", "link": "https://stackoverflow.com/users/2093195/heyji"}, "reply_to_user": {"reputation": 21, "user_id": 6267757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d903e68ebee0241adee09d21df01e68b?s=128&d=identicon&r=PG&f=1", "display_name": "CHV", "link": "https://stackoverflow.com/users/6267757/chv"}, "edited": false, "score": 0, "creation_date": 1478122127, "post_id": 40389434, "comment_id": 68031958, "body": "If you have a pointer to an entry, then you can access its members. As one of the member points to its next element, you can access to the next element too...and so on."}], "tags": [], "owner": {"reputation": 1051, "user_id": 2093195, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3c2c0866e1e1d5935b70f59fcf7fbc?s=128&d=identicon&r=PG", "display_name": "Heyji", "link": "https://stackoverflow.com/users/2093195/heyji"}, "is_accepted": false, "score": 0, "last_activity_date": 1478122005, "last_edit_date": 1478122005, "creation_date": 1478119342, "answer_id": 40389434, "question_id": 40388481, "link": "https://stackoverflow.com/questions/40388481/function-to-remove-entry-from-linked-list-in-c/40389434#40389434", "title": "Function to remove entry from linked list in c", "body": "<p>There are three misunderstanding in your code: </p>\n\n<p>First as mentioned by kaylum in his comment, function arguments are passed by value in C. It means that whenever you pass an argument to a function, a copy of the argument is used within the function. And when the function returns, this copy is lost. So you won't be able to change <code>pList</code>'s value within <code>removeEntry()</code> as you inteded.</p>\n\n<p>The second issue (which is somehow linked) is that your function <code>removeEntry()</code> is supposed to remove the entry just after the one pointed to by the function argument. So if <code>pList</code> points to an entry, you should remove the entry pointed by pList->next. If you do so, you will solve your first issue at the same time...</p>\n\n<p>The third issue, is that you should check whether the element you want to remove does exists before removing it. Eventually, free the memory corresponding to the element you remove, but in your case this does not apply as you do not allocate entries dynamically. </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6267757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d903e68ebee0241adee09d21df01e68b?s=128&d=identicon&r=PG&f=1", "display_name": "CHV", "link": "https://stackoverflow.com/users/6267757/chv"}, "is_accepted": false, "score": 0, "last_activity_date": 1478335675, "creation_date": 1478335675, "answer_id": 40436363, "question_id": 40388481, "link": "https://stackoverflow.com/questions/40388481/function-to-remove-entry-from-linked-list-in-c/40436363#40436363", "title": "Function to remove entry from linked list in c", "body": "<p>Yay! Thanks to kaylum and Heyji I finally managed this! Thank you both!</p>\n\n<p>Always funny with C how a problem seems so difficult, and when you figure it out you wonder how you could ever have struggled with something so simple.... </p>\n\n<pre><code>void removeEntry(struct entry *pList)\n{\n    struct entry *pTemp = pList-&gt;next;\n    //  &lt;-------&amp;n3\n    pList-&gt;next = pTemp-&gt;next;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6267757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d903e68ebee0241adee09d21df01e68b?s=128&d=identicon&r=PG&f=1", "display_name": "CHV", "link": "https://stackoverflow.com/users/6267757/chv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478335675, "creation_date": 1478115875, "last_edit_date": 1478115968, "question_id": 40388481, "link": "https://stackoverflow.com/questions/40388481/function-to-remove-entry-from-linked-list-in-c", "title": "Function to remove entry from linked list in c", "body": "<p>I'm struggling with exercise 4 in chapter 10 of the Programming in C book by Kochan. </p>\n\n<p>The task is the following:</p>\n\n<blockquote>\n  <p>Write a function called <code>removeEntry()</code> to remove an entry from a\n  linked list. The sole argument to the procedure should be a pointer to\n  the list. Have the function remove the entry after the one pointed to\n  by the argument.</p>\n</blockquote>\n\n<p>For some reason the function doesn't work. If I do a <code>printf()</code> inside it, it seems to work, but it doesn't work in <code>main()</code>. I thought that given I am passing a pointer, it will change the original (as opposed to passing by value). But clearly I'm not doing it right. Could anyone please help me see where I'm going wrong?</p>\n\n<pre><code>// Function to remove an entry from a linked list\n\n#include &lt;stdio.h&gt;\n\nstruct entry\n{\n    int value;\n    struct entry *next;\n};\n\nint main(void)\n{\n    struct entry n1, n2, n3; // Original list\n\n    struct entry *listPointer = &amp;n1; // List pointer set up for iterating list\n\n    void removeEntry(struct entry *pList);\n\n    //listHead.next = &amp;n1;  set list head to point to original beginning of list\n\n    n1.value = 100;\n    n1.next = &amp;n2;\n\n    n2.value = 200;\n    n2.next = &amp;n3;\n\n    n3.value = 300;\n    n3.next = (struct entry *) 0; // marks end of list\n\n\n    // Print out values before removing entry\n    printf(\"Before removing entry:\\n\");\n\n    while (listPointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", listPointer-&gt;value);\n        listPointer = listPointer-&gt;next;\n    }\n\n    // reset listPointer to point to n1\n    listPointer = &amp;n1;\n\n    // run function (DOES NOT WORK)\n    removeEntry(listPointer);\n\n    // print out values after (supposedly) removing entry\n    printf(\"\\n\\nAfter removing entry:\\n\");\n\n    while (listPointer != (struct entry *) 0)\n    {\n        printf(\"%i\\n\", listPointer-&gt;value);\n        listPointer = listPointer-&gt;next;\n    }\n\n    return 0;\n}\n\n/********************* REMOVE ENTRY ********************************/\n\nvoid removeEntry(struct entry *pList)\n{\n    //  &lt;-------&amp;n2\n    pList = pList-&gt;next;\n\n}\n</code></pre>\n"}, {"tags": ["c", "parsing"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1478115173, "post_id": 40388241, "comment_id": 68028231, "body": "Because <code>strcat</code> wants a NUL terminated string, but in this case (as a global variable)  it is initialized to {0}"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1478115247, "post_id": 40388241, "comment_id": 68028266, "body": "Try entering two lines of input."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1478115296, "post_id": 40388241, "comment_id": 68028294, "body": "@KeineLust it has static storage duration so it is automatically zero-initialized."}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478115430, "post_id": 40388241, "comment_id": 68028384, "body": "The man page says: <code>The  strcat()  function  appends  the src string to the dest string,        overwriting the terminating null byte (&#39;\\0&#39;) at the end of dest, and        then adds a terminating null byte</code>  Doesn&#39;t it mean that it does handle it without we explicitly specifying it.  Btw: sorry for my silly questions. =)"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478115578, "post_id": 40388341, "comment_id": 68028472, "body": "I see, but why would it initialize the first char to <code>\\0</code>, wouldn&#39;t something alike: <code>strcat(out, &quot;abc&quot;);</code> make out look like <code>out = {&#39;\\0&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;}</code>?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478115655, "post_id": 40388341, "comment_id": 68028511, "body": "@dud3 No, <code>&#39;\\0&#39;</code> is considered <i>null terminator</i>, so a string with <code>&#39;\\0&#39;</code> as its initial character behaves like an empty string, no matter what characters come after &#39;&#39;\\0&#39;`."}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478115723, "post_id": 40388341, "comment_id": 68028556, "body": "Ah now I see, couldn&#39;t we simply initialize it to <code>out[0] = &#39; &#39;</code> instead?"}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 1, "creation_date": 1478115740, "post_id": 40388341, "comment_id": 68028565, "body": "But then it would have an extra space."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478115825, "post_id": 40388341, "comment_id": 68028612, "body": "@dud3 Without default initialization setting <code>out[0] = &#39; &#39;</code> would require also setting <code>out[1] = &#39;\\0&#39;</code>, otherwise it would be unterminated."}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478116053, "post_id": 40388341, "comment_id": 68028734, "body": "I see, so the <code>\\0</code> would always go at the end of the array  when we <code>strcat</code> the <code>out</code> afterwards?"}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478116216, "post_id": 40388341, "comment_id": 68028820, "body": "Just great, now I clearly understand it, thanks a lot guys. =)"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1478115587, "last_edit_date": 1495541369, "creation_date": 1478115427, "answer_id": 40388341, "question_id": 40388241, "link": "https://stackoverflow.com/questions/40388241/kr-recursive-descent-parser-strcat/40388341#40388341", "title": "K&amp;R - Recursive descent parser - strcat", "body": "<p>You need <code>out[0]</code> to be zero in order for <code>strcat</code> to work.</p>\n\n<p>While this line</p>\n\n<pre><code>out[0] = '\\0';\n</code></pre>\n\n<p>was required prior to the introduction of static initialization rules, it is no longer required, because static arrays, such as <code>out[]</code>, are initialized to all zeros.</p>\n\n<p>According to <a href=\"https://stackoverflow.com/a/13251173/335858\">initialization rules of C99</a>,</p>\n\n<ul>\n<li>...</li>\n<li>if it has arithmetic type, it is initialized to (positive or unsigned) zero.</li>\n<li>if it is an aggregate, every member is initialized (recursively) according to these rules.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 5956174, "user_type": "registered", "profile_image": "https://graph.facebook.com/980733415344276/picture?type=large", "display_name": "Zaif Senpai", "link": "https://stackoverflow.com/users/5956174/zaif-senpai"}, "is_accepted": false, "score": 1, "last_activity_date": 1478115674, "creation_date": 1478115674, "answer_id": 40388419, "question_id": 40388241, "link": "https://stackoverflow.com/questions/40388241/kr-recursive-descent-parser-strcat/40388419#40388419", "title": "K&amp;R - Recursive descent parser - strcat", "body": "<p>It is resetting the char array (aka string) to empty array. (removing junk values)\nlike we use:</p>\n\n<pre><code>int i = 0;\n</code></pre>\n\n<p>before doing something like:</p>\n\n<pre><code>i += 1;\n</code></pre>\n\n<p>so that junk value don't add</p>\n\n<p>So just '\\0' in 0 index of array tells that array is completely empty and the strcat function starts appending value from 0 index, over writing the junk values in other indexes of array.</p>\n\n<p>If program is working without resetting array then it means your IDE tool is doing that for you, but it is good practice to reset it.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478129533, "post_id": 40389407, "comment_id": 68034687, "body": "Yes that did clarify a lot."}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478129617, "post_id": 40389407, "comment_id": 68034707, "body": "I was unsure since the <code>man page</code> of <code>strcat</code> says: <code>The  strcat()  function  appends  the src string to the dest string,        overwriting the terminating null byte (&#39;\\0&#39;) at the end of dest, and        then adds a terminating null byte</code>, which I thought it would already handle this for us."}, {"owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "reply_to_user": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478179420, "post_id": 40389407, "comment_id": 68055378, "body": "When you have two strings, say &quot;Home\\0&quot; and &quot;work\\0&quot; (Where \\0 is the <code>0</code> I talked about before), and you just append one to the other, you would get &quot;Home\\0work&quot;. C thinks a string ends at a \\0, so this would be the same as \\0. So that&#39;s not how strcat could work. What it instead does is delete the first \\0 and then append the rest, so you get the expected &quot;Homework&quot;. Then it appends another &quot;\\0&quot; so you can tell that the string really ends after &quot;work&quot;. However, the first \\0 still needs to be there for strcat to know how long &quot;Home&quot; is."}, {"owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "reply_to_user": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478179465, "post_id": 40389407, "comment_id": 68055409, "body": "When the first word comes into your program, what you waant to do is, instead of using <code>strcat</code>, you would just write that first word into <code>out</code> right at the beginning (e.g. using <code>strcpy</code>). But you can get the same effect by just making <code>out</code> start out empty. Because &quot;&quot; and &quot;Home&quot; concatenated is the same as just &quot;Home&quot;. That help in any way?"}, {"owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "reply_to_user": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478179683, "post_id": 40389407, "comment_id": 68055557, "body": "The &quot;terminating null byte at the end of dest&quot; that the docs mention is exactly the &#39;\\0&#39; the code adds. It won&#39;t work without that, because strcat wouldn&#39;t know where the string ends, so it wouldn&#39;t know where to append the second string."}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478188306, "post_id": 40389407, "comment_id": 68061999, "body": "Ah now I see, the first time <code>strcat</code> doesn&#39;t know where the string ends that&#39;s why we initialize <code>out[0] = &#39;\\0&#39;</code>, otherwise it would pick up a random string from the memory if it wasn&#39;t set as a global variable?"}, {"owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "reply_to_user": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478188410, "post_id": 40389407, "comment_id": 68062070, "body": "Exactly the case! :-)"}, {"owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "edited": false, "score": 0, "creation_date": 1478188660, "post_id": 40389407, "comment_id": 68062252, "body": "Yay, this was a great lesson. Much appreciated."}], "tags": [], "owner": {"reputation": 7798, "user_id": 242278, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f9e908d2ee5680c0fd2f5536ede7cb9c?s=128&d=identicon&r=PG", "display_name": "uliwitness", "link": "https://stackoverflow.com/users/242278/uliwitness"}, "is_accepted": false, "score": 1, "last_activity_date": 1478119210, "creation_date": 1478119210, "answer_id": 40389407, "question_id": 40388241, "link": "https://stackoverflow.com/questions/40388241/kr-recursive-descent-parser-strcat/40389407#40389407", "title": "K&amp;R - Recursive descent parser - strcat", "body": "<p>In short: In this particular case it's not strictly necessary, but in many other cases that look suspiciously similar, it is, so most people do it as \"good style\". So why would it be necessary?</p>\n\n<p>There is no such thing as \"empty\" memory. There is no such thing as a \"length\". Unless you explicitly keep track of it, or define your own.</p>\n\n<p>Memory is just bytes, which are numbers from 0 to 255. Since 0 is just as valid a number as 255, there is no way to tell whether a byte is used or not. You can \"add up\" several bytes if you need larger numbers, but everything is built out of bytes, in the end. Text is simply mapped to a number. A couple decades ago it was decided which number represents which character. So if you see a byte with the value 32, it could be a 32. Or it could be the 32nd letter in the computer's alphabet (which is the space character).</p>\n\n<p>When you receive a string and you don't know how much text you will be dealing with, what you usually do is you reserve a large block of bytes. This is what <code>char out[1000];</code> above does. But how do you tell where the text ends? How much of the 1000 bytes you've already used?</p>\n\n<p>Well, in the old days, some people would just declare another variable, say, <code>int length;</code> and keep track of how many bytes they've used so far. The designers of C went a different route. They decided to pick a very rare character and use that as a marker. They picked the character with the value 0 for that (That is not the character '0'. The character '0' actually is the 48th letter of a computer's alphabet).</p>\n\n<p>So you can just look at all the bytes in your string from the start, and if a character is > 0, you know it is used. If you reach a 0 character, you know this is the end of your string. There are various advantages to either approach. An <code>int</code> uses 4 bytes, an additional 0-character only 1. On the other hand, if you use an int, a string can also contain a 0-character, it's just another character, nobody cares.</p>\n\n<p>Whenever you write <code>\"foo\"</code> in C, what C actually does is reserve room for 4 bytes, for <code>'f'</code>, <code>'o'</code>, <code>'o'</code> and for the <code>0</code> to indicate the end. When you write <code>\"\"</code> in C, what it does is reserve room for a single byte, the <code>0</code>. So that you can tell that the string is empty.</p>\n\n<p>So, what is memory filled with before you put something into it at startup? Well, in most cases, it is just garbage. Whatever was in that memory the last time it was used (after all, you have limited RAM, so when you quit one application on your computer, its memory can get re-used for the next app you launch after that). These will be random numbers, often outside of the range of common characters.</p>\n\n<p>So, if you want <code>strcat</code> to see <code>out</code> as an empty string, you need to give it a block of memory that starts with this <code>0</code> value character. If you just leave memory like it is, there might be some random characters in it. Your buffer might contain \"jbhasugaudq7e1723876123798dbkda<code>0</code>skno\u00a7\u00a7^^%$#-9H<code>0</code>HWDZmwus<code>0</code>/usr/local/bin\"\nor whatever was in that memory before. If you now appended some text to it, it would think the stuff before the first <code>0</code> (which is just randomly in this place) was a valid string, and append it to <em>that</em>. It will only know that this string is supposed to be empty, if you put a <code>0</code> right at the start.</p>\n\n<p>So why did I say it is \"not strictly necessary\"? Well, because in your case, <code>out</code> is a global variable, and global variables are special because they automatically get cleared to 0 when your application starts up (or assigned any value that you assign them when you declare them).</p>\n\n<p>However, this is only true for global variables (both regular globals and <code>static</code> globals). So many programmers make it a habit to always initialize their blocks of bytes. That way, if someone later decides to change a global into a local variable, or copy-and-pastes the code to another spot to use with a local variable, they do not have to worry about forgetting to add this statement.</p>\n\n<p>This is especially useful as random memory often contains <code>0</code> characters. So depending on what program you previously used, you might not notice you forgot the initial <code>0</code> because there happened to be one already in there. And only later, when one of your users runs this application, they get garbage at the start of their string.</p>\n\n<p>Does that clarify things a bit?</p>\n"}], "owner": {"reputation": 301, "user_id": 1763641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aef142b79f69fb0b1025b477c7b9f14?s=128&d=identicon&r=PG", "display_name": "dud3", "link": "https://stackoverflow.com/users/1763641/dud3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 40388341, "answer_count": 3, "score": 1, "last_activity_date": 1478119210, "creation_date": 1478115054, "last_edit_date": 1478115736, "question_id": 40388241, "link": "https://stackoverflow.com/questions/40388241/kr-recursive-descent-parser-strcat", "title": "K&amp;R - Recursive descent parser - strcat", "body": "<p>What would be the reason for <code>out[0] = '\\0';</code> on the <code>main()</code> function?</p>\n\n<p>It does seem to be working without it.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\n#define MAXTOKEN 100\nenum { NAME, PARENS, BRACKETS };\n\nint tokentype;\nchar token[MAXTOKEN]; /*last token string */\nchar name[MAXTOKEN]; /*identifier name */\nchar datatype[MAXTOKEN]; /*data type = char, int, etc. */\nchar out[1000];\n\nvoid dcl(void);\nvoid dirdcl(void);\nint gettoken(void);\n\n/*\nGrammar:\n\n    dcl:            optional * direct-dcl\n    direct-dcl:     name\n                    (dcl)\n                    direct-dcl()\n                    direct-dcl[optional size]\n*/\n\nint main() /* convert declaration to words */\n{\n    while (gettoken() != EOF) {    /* 1st token on line */\n\n        /* 1. gettoken() gets the datatype from the token  */\n        strcpy(datatype, token);\n\n        /* 2. Init out to end of the line? */\n        /* out[0] = '\\0'; */\n\n         /* parse rest of line */\n        dcl();\n\n        if (tokentype != '\\n')\n            printf(\"syntax error\\n\");\n\n        printf(\"%s: %s %s\\n\", name, out, datatype);\n    }\n\n    return 0;\n}\n\nint gettoken(void) /* return next token */\n{\n    int c, getch(void);\n    void ungetch(int);\n    char *p = token;\n\n    /* Skip blank spaces and tabs */\n    while ((c = getch()) == ' ' || c == '\\t')\n        ;\n\n    if (c == '(') {\n\n        if ((c = getch()) == ')') {\n\n            strcpy(token, \"()\");\n            return tokentype = PARENS;\n\n        } else {\n            ungetch(c);\n            return tokentype = '(';\n        }\n\n    } else if (c == '[') {\n\n        for (*p++ = c; (*p++ = getch()) != ']'; )\n            ;\n\n        *p = '\\0';\n        return tokentype = BRACKETS;\n\n    } else if (isalpha(c)) {\n\n        /* Reads the next character of input */\n        for (*p++ = c; isalnum(c = getch()); ) {\n            *p++ = c;\n        }\n\n        *p = '\\0';\n        ungetch(c); /* Get back the space, tab */\n\n        return tokentype = NAME;\n\n    } else\n        return tokentype = c;\n}\n\n/* dcl: parse a declarator */\nvoid dcl(void)\n{\n    int ns;\n\n    for (ns = 0; gettoken() == '*'; ) /* count *'s */\n        ns++;\n\n    dirdcl();\n\n    while (ns-- &gt; 0)\n        strcat(out, \" pointer to\");\n}\n\n/* dirdcl: parse a direct declarator */\nvoid dirdcl(void)\n{\n    int type;\n\n    if (tokentype == '(') {\n\n        dcl();\n\n        if (tokentype != ')')\n            printf(\"error: missing )\\n\");\n\n    }\n    else if (tokentype == NAME) /* variable name */ {\n        strcpy(name, token);\n        printf(\"token: %s\\n\", token);\n    }\n    else\n        printf(\"error: expected name or (dcl)\\n\");\n\n    while ((type = gettoken()) == PARENS || type == BRACKETS) {\n\n        if (type == PARENS)\n            strcat(out, \" function returning\");\n        else {\n            strcat(out, \" array\");\n            strcat(out, token);\n            strcat(out, \" of\");\n        }\n\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "inline"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1478114079, "post_id": 40387932, "comment_id": 68027642, "body": "I can reproduce your problem, but there&#39;s others. Be sure to first clean up all the other warnings (set <code>-Wall</code>). That&#39;s not now you use <code>printf</code>."}, {"owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1478114081, "post_id": 40387932, "comment_id": 68027643, "body": "Show us whole code, this one is invalid and will not compile."}, {"owner": {"reputation": 17954, "user_id": 1248008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Z3JaL.png?s=128&g=1", "display_name": "Jonas Sch&#228;fer", "link": "https://stackoverflow.com/users/1248008/jonas-sch%c3%a4fer"}, "reply_to_user": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1478114198, "post_id": 40387932, "comment_id": 68027695, "body": "@Micha\u0142Walenciak Well, it <i>does compile</i> with gcc by default, but it also emits some warnings (-Wimplicit-function-declaration and -Wint-conversion)."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1478114322, "post_id": 40387932, "comment_id": 68027745, "body": "This is a c99 feature (<code>extern inline</code>). This documentation from clang has a good explanation on it. Other compilers should have something similar, too. <a href=\"http://clang.llvm.org/compatibility.html#inline\" rel=\"nofollow noreferrer\">clang.llvm.org/compatibility.html#inline</a>"}, {"owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "reply_to_user": {"reputation": 17954, "user_id": 1248008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Z3JaL.png?s=128&g=1", "display_name": "Jonas Sch&#228;fer", "link": "https://stackoverflow.com/users/1248008/jonas-sch%c3%a4fer"}, "edited": false, "score": 0, "creation_date": 1478115719, "post_id": 40387932, "comment_id": 68028552, "body": "@JonasWielicki: that&#39;s weird: printf should not accept int as an argument. As long as it is not some kind of extension..."}, {"owner": {"reputation": 17954, "user_id": 1248008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Z3JaL.png?s=128&g=1", "display_name": "Jonas Sch&#228;fer", "link": "https://stackoverflow.com/users/1248008/jonas-sch%c3%a4fer"}, "reply_to_user": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1478116141, "post_id": 40387932, "comment_id": 68028783, "body": "@Micha\u0142Walenciak It\u2019s an implicit cast from int to const char*, hence the -Wint-conversion warning."}], "owner": {"reputation": 11, "user_id": 4513995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564243618fa85b8e4f40f815c817e3c7?s=128&d=identicon&r=PG&f=1", "display_name": "loorke", "link": "https://stackoverflow.com/users/4513995/loorke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "closed_date": 1478114888, "answer_count": 0, "score": 0, "last_activity_date": 1478113874, "creation_date": 1478113874, "question_id": 40387932, "link": "https://stackoverflow.com/questions/40387932/inline-directive-doesnt-work-pure-c", "closed_reason": "Duplicate", "title": "&quot;inline&quot; directive doesn&#39;t work (Pure C)", "body": "<p>I have this:</p>\n\n<pre><code>inline void ololo(int a) {\n    printf(a);\n}\n\nint main() {\n    int b = 100;\n    ololo(b);\n}\n</code></pre>\n\n<p>When I try to build program with <code>gcc filename.c</code>, I get this error message:</p>\n\n<pre><code>/tmp/ccJovQFR.o: In function `main':\ntrololo.c:(.text+0x3b): undefined reference to `ololo'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n"}, {"tags": ["c", "char", "uart", "c-strings", "blackfin"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478113993, "post_id": 40387917, "comment_id": 68027595, "body": "<code>char trunc_str[str_length];</code> --&gt; <code>char trunc_str[str_length + 1];</code> followed by <code>strcpy</code>. Also note that the return value from <code>sprintf</code> saves you wasting resources calling <code>strlen</code>."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478114525, "post_id": 40387917, "comment_id": 68027851, "body": "There&#39;s no reason for <code>trunc_str</code>. Just <code>adi_uart_Write(ghUART, accel_string, str_length);</code> And as already mentioned, the return value from <code>sprintf</code> <i>is</i> the correct value for <code>str_length</code>."}, {"owner": {"reputation": 347, "user_id": 1402139, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cef30aefea73e6e1d8334cd8d29956aa?s=128&d=identicon&r=PG", "display_name": "bretcj7", "link": "https://stackoverflow.com/users/1402139/bretcj7"}, "edited": false, "score": 0, "creation_date": 1478124412, "post_id": 40387917, "comment_id": 68032961, "body": "Still getting the odd character after trying both suggestions.  I wonder if it is a specific issue with the Analog DSP board i am using. B:779|A:15065&#255;"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1478125251, "post_id": 40387917, "comment_id": 68033277, "body": "Hmm, what happens if you change the format string in the <code>sprintf</code> to <code>&quot;B:%d|A:%d|hello\\n&quot;</code>"}, {"owner": {"reputation": 347, "user_id": 1402139, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cef30aefea73e6e1d8334cd8d29956aa?s=128&d=identicon&r=PG", "display_name": "bretcj7", "link": "https://stackoverflow.com/users/1402139/bretcj7"}, "edited": false, "score": 0, "creation_date": 1478125674, "post_id": 40387917, "comment_id": 68033449, "body": "Updated post with screenshot of putty results, same deal."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1478127580, "post_id": 40387917, "comment_id": 68034119, "body": "How do you &quot;see&quot; what is in the char array?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1478127645, "post_id": 40387917, "comment_id": 68034142, "body": "anyway, add extra debugging or whatever to confirm the contents of the array immediately before the call to <code>adi_uart_Write</code>. If it is correct at that point then you can blame the serial comms (could be either end)."}, {"owner": {"reputation": 347, "user_id": 1402139, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cef30aefea73e6e1d8334cd8d29956aa?s=128&d=identicon&r=PG", "display_name": "bretcj7", "link": "https://stackoverflow.com/users/1402139/bretcj7"}, "edited": false, "score": 0, "creation_date": 1478268071, "post_id": 40387917, "comment_id": 68097346, "body": "I think it is the serial com library I am using.  I will update once I hear back from the dsp company and can mark this complete if so."}], "owner": {"reputation": 347, "user_id": 1402139, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cef30aefea73e6e1d8334cd8d29956aa?s=128&d=identicon&r=PG", "display_name": "bretcj7", "link": "https://stackoverflow.com/users/1402139/bretcj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478268216, "creation_date": 1478113807, "last_edit_date": 1478268216, "question_id": 40387917, "link": "https://stackoverflow.com/questions/40387917/c-char-array-copy-and-concat-with-formatting-leaves-off-n-and-replaces-with-%c3%bf", "title": "c char array copy and concat with formatting leaves off \\n and replaces with &#255;", "body": "<p>I have a small c program to copy input from an algorithm into a final char array that is then sent over serial (UART) to a raspberry pi.  The problem is the last character in the char array is always a latin-1 character of the \u00ff (\\xff).</p>\n\n<p>The sprintf formatting works great but when i create a new char buffer to limit the size of the array and only copy the contents it seems to strip off the \\n and append the \\xff or \u00ff depending upon what encoding you are using in the pi for the serial reader.</p>\n\n<pre><code>char accel_string[50] = \"\";\nsprintf(accel_string, \"B:%d|A:%d\\n\", dataB, dataA)\n// I can see \"B:123|A:123\\n\\0\" in the char array now\n\nint str_length = strlen(accel_string);\nchar trunc_str[str_length];\n\nstrncpy(trunc_str, accel_string, str_length);\n// Now it sets trunc_str to \"B:123|A:123\\xff\n\n// Blocking TX right now - write over serial\neResult = adi_uart_Write(ghUART, trunc_str, sizeof(trunc_str));\n</code></pre>\n\n<p>trunc_str keeps ending with the \u00ff when I would expect it to end in the \"\\n\"</p>\n\n<p>Help me where I went wrong.</p>\n\n<p><strong><em>Update</em></strong> based on comments with putty results\n<a href=\"https://i.stack.imgur.com/Adfok.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Adfok.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong><em>Update #2</em></strong>\nI have verified that a '\\n' anywhere in the char array gets removed and replace with the \u00ff.  I looked at the watch variable on the char array and when its sent to the uart_write the \\n exists.  After the buffer is coverted to a unit8_t in the uart code it seems to strip off the \\n.  I have even tried a unit8_t with a '\\n' and it strips out after calling the uart_write code.  I have reached out to analog.com and will update this post once there is a resolution.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2015", "compiler-errors", "coding-style"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1478113844, "post_id": 40387870, "comment_id": 68027532, "body": "<i>and since c and c++ are compatible that&#39;s awesome for me</i>, bad news: this is false :("}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1478114346, "post_id": 40387870, "comment_id": 68027759, "body": "Build everything using the same compiler. Sometimes even a service pack difference will not work with precompiled headers."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1478114503, "post_id": 40387870, "comment_id": 68027840, "body": "<b><i>Wouldn&#39;t it just precompile it again ?</i></b> You can have it do that if you delete the old <code>.pch</code> files."}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 7042812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f6cf86ff676392540d88fc168299c77e?s=128&d=identicon&r=PG&f=1", "display_name": "user7042812", "link": "https://stackoverflow.com/users/7042812/user7042812"}, "is_accepted": true, "score": 2, "last_activity_date": 1478685075, "creation_date": 1478685075, "answer_id": 40504009, "question_id": 40387870, "link": "https://stackoverflow.com/questions/40387870/precompiled-header-is-from-previous-version-of-compiler/40504009#40504009", "title": "Precompiled header is from previous version of compiler", "body": "<p>Fixed this by following steps:</p>\n\n<ol>\n<li>Turned off precompiled headers</li>\n<li>Deleted .pch file</li>\n</ol>\n\n<p>Since this was not fixing the error I did some few more things:</p>\n\n<ol start=\"3\">\n<li>Changed extension of <strong>send.c to send.cpp</strong></li>\n<li>Properties->C/C++->Advanced-><strong>Compile As C Code (/TC)</strong></li>\n<li>Properties->General-> character set changed to <strong>Use Multi-Byte Character Set</strong></li>\n</ol>\n\n<p>And this fixed my problem :)</p>\n"}], "owner": {"reputation": 63, "user_id": 7042812, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f6cf86ff676392540d88fc168299c77e?s=128&d=identicon&r=PG&f=1", "display_name": "user7042812", "link": "https://stackoverflow.com/users/7042812/user7042812"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5053, "favorite_count": 0, "accepted_answer_id": 40504009, "answer_count": 1, "score": 1, "last_activity_date": 1478685075, "creation_date": 1478113592, "question_id": 40387870, "link": "https://stackoverflow.com/questions/40387870/precompiled-header-is-from-previous-version-of-compiler", "title": "Precompiled header is from previous version of compiler", "body": "<p>How do I use c library in large C++ codebase?</p>\n\n<p>I have found some good <a href=\"https://github.com/Azure/azure-event-hubs\" rel=\"nofollow noreferrer\">c library</a>, and since c and c++ are compatible that's awesome for me. I have this big codebase with many projects, and i want to use that library inside one of projects.</p>\n\n<p>So I built library on C drive, and after that I just placed it into folder with the project i want to use it with, changed references in project properties to target that library etc.</p>\n\n<p>After that I have called from one of cpp files function in my send.c file which included some library files, and got error during building </p>\n\n<pre><code>Precompiled header is from previous version of compiler \n</code></pre>\n\n<p>So I wanted to ask:</p>\n\n<ol>\n<li>Should I build separately library or is it ok to do this way as I did ?</li>\n<li>How should i fix these errors ? (I tried changing from .c into .cpp but library than has many errors)</li>\n<li>Where should i put library ? Are there any good conventions ? Since now it is just there pasted next to the project</li>\n<li>How can if it can, previous compiling have impact on new build ?! Wouldn't it just precompile it again ?</li>\n<li>In this large codebase i don't see that many libraries so autonomous like this one. Can i turn it somehow into one .lib file and somehow use it easier by just importing it? Since I wont be changing it, it will always be used just for message sending. And like this there is a bunch of things that need to be configured in each project that would use it maybe in the future</li>\n</ol>\n\n<p>Thanks !</p>\n\n<p><strong>Note 1:</strong> \n  I am using Visual Studio 2015 on Windows Server 2012 R2.</p>\n"}, {"tags": ["c", "debugging", "visual-c++", "visual-studio-2015", "clang"], "comments": [{"owner": {"reputation": 5606, "user_id": 6601554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d8e70907365c8fce9135ffe1e5868f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Zhai-MSFT", "link": "https://stackoverflow.com/users/6601554/jack-zhai-msft"}, "edited": false, "score": 0, "creation_date": 1478160168, "post_id": 40387696, "comment_id": 68043266, "body": "Can you share a screen shot about the result in your side? Do you use the &quot;step Into&quot; after the breakpoint was hit? I could view the X variable or in debug watch window and the temp(0x00D2F8CC) shows normally in memory window, could you reset your VS settings? and then debug it again. I just use the default settings in my VS2015."}, {"owner": {"reputation": 5606, "user_id": 6601554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d8e70907365c8fce9135ffe1e5868f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Zhai-MSFT", "link": "https://stackoverflow.com/users/6601554/jack-zhai-msft"}, "edited": false, "score": 0, "creation_date": 1478425752, "post_id": 40387696, "comment_id": 68141766, "body": "How about the result? fowlball1010."}], "owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478112934, "creation_date": 1478112934, "question_id": 40387696, "link": "https://stackoverflow.com/questions/40387696/visual-studio-2015-clang-debugging", "title": "Visual Studio 2015 Clang Debugging", "body": "<p>I'm using Visual Studio 2015 Update 3 with the clang compiler (Platform Toolset: Visual Studio 2015 - Clang with Microsoft CodeGen (v140_clang_c2)) to compile a simple program as shown below:</p>\n\n<pre><code>struct IUnknown; // Only included for clang compiler error with Update 3\n\n#include &lt;Windows.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char* argv[])\n{\n    int x = 5;\n    char temp[] = \"Test\";\n    x += 10;\n    printf(\"Hello world\");\n\n    return 0;\n}\n</code></pre>\n\n<p>When setting a breakpoint at the beginning of the program and stepping through, I'm not able to hover over x and see the value like I would expect as part of the debugging in the IDE. Additionally, typing the variable \"temp\" into the memory window yields \"unable to evaluate expression\". If I leave the code the same and change the compiler to MSVC (Platform Toolset: Visual Studio 2015 (v140)) and I step through the debugger I am able to hover and see the values and use the variable \"temp\" in the memory window. Is this something to do with Clang with Visual Studio IDE? Am I missing a setting?</p>\n"}, {"tags": ["c", "linux", "memory", "memory-management", "kernel"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1478113501, "post_id": 40387487, "comment_id": 68027343, "body": "With some juggling you could make the process read from a named pipe (and let the <i>producer</i> write to that pipe) <code>What is a filename?</code> It is a directory entry containing a <i>pointer to</i>  an inode. (its number)"}, {"owner": {"reputation": 363, "user_id": 1986913, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dab7a8600679d99e7a50d30819c8bc4b?s=128&d=identicon&r=PG", "display_name": "GP92", "link": "https://stackoverflow.com/users/1986913/gp92"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1478114389, "post_id": 40387487, "comment_id": 68027781, "body": "Hi, actually I can only supply the filename argument and I can not hack it as it&#39;s a binary file"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1478115057, "post_id": 40387487, "comment_id": 68028165, "body": "Since: (1) you can&#39;t change the command [binary blob]. (2) don&#39;t care about the output file (3) can&#39;t stop the command from writing to the output (4) only want the command to read the input files. Try: <code>cmd -f &#47;dev&#47;null f1 f2 f3 f4 f5</code>. That is about as fast as it gets. Any reason why that wouldn&#39;t work?"}, {"owner": {"reputation": 363, "user_id": 1986913, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dab7a8600679d99e7a50d30819c8bc4b?s=128&d=identicon&r=PG", "display_name": "GP92", "link": "https://stackoverflow.com/users/1986913/gp92"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1478117104, "post_id": 40387487, "comment_id": 68029292, "body": "@CraigEstey I do not understand why you have mentioned /dev/null. However, I tried it didn&#39;t work. The command takes only one file as argument. For now, I have created a condition to check for /dev/shm and create the combined file there if it exists, else to create in /tmp/. I am curious if someone can answer this with programming approach."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1478118798, "post_id": 40387487, "comment_id": 68030228, "body": "My named pipe solution is very real (and it actually works!). But I am afraid you didn&#39;t understand it. (BTW <i>binary file</i> : you mean the executable, or the actual data file whose name is supposed to be supplied as an argument to the executable?)"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1478123105, "post_id": 40387487, "comment_id": 68032385, "body": "My bad, I hadn&#39;t had my coffee, yet :-) I assumed that <code>-f</code> specified an <i>output</i> file. The named pipe approach wildplasser mentioned is the correct one. To consolidate: <code>mkfifo wtf ; cat f1 f2 f3 f4 f5 &gt; wtf &amp; ; cmd -f wtf ; rm wtf</code>. This works just as well as if you could specify: <code>cat f1 f2 f3 f4 f5 | cmd -f -</code> if <code>cmd</code> understood that <code>-</code> meant <code>stdin</code>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478189761, "post_id": 40387487, "comment_id": 68062966, "body": "what do you mean with <b>combine</b> files? are you appending, xor-ing, adding byte by byte... substracting... ???? you have been let to explain clearly, but you haven&#39;t done at all."}, {"owner": {"reputation": 363, "user_id": 1986913, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dab7a8600679d99e7a50d30819c8bc4b?s=128&d=identicon&r=PG", "display_name": "GP92", "link": "https://stackoverflow.com/users/1986913/gp92"}, "edited": false, "score": 0, "creation_date": 1478190408, "post_id": 40387487, "comment_id": 68063405, "body": "Hi, I meant appending. I haven&#39;t tried the mkfifo yet. I have heard about the concept. But may be it should work in this case. I will try it now."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478259363, "post_id": 40387487, "comment_id": 68091748, "body": "If you mean appending, why didn&#39;t you say it at first?  have you tried the <code>cat(1)</code> command anyway.  It&#39;s there from ancient times of unix, and nobody has developed an alternate way to concatenate files since then.  You sould use <code>cat f1 f2 f3 f4 f5 &gt; combined_file.txt</code> and that&#39;s all!"}, {"owner": {"reputation": 363, "user_id": 1986913, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dab7a8600679d99e7a50d30819c8bc4b?s=128&d=identicon&r=PG", "display_name": "GP92", "link": "https://stackoverflow.com/users/1986913/gp92"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478259459, "post_id": 40387487, "comment_id": 68091796, "body": "@LuisColorado Hmm..It seems you have not read my entire question :)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478503545, "post_id": 40387487, "comment_id": 68164659, "body": "@JeevanPatnaik, not, I haven&#39;t, You begun telling you where to explain clearly something and neither explain at all what you mean with combining files nor clear explanation of what you expect, and no code at all, so explain it better and i&#39;ll be able to answer it, instead of debating in the comments."}, {"owner": {"reputation": 363, "user_id": 1986913, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dab7a8600679d99e7a50d30819c8bc4b?s=128&d=identicon&r=PG", "display_name": "GP92", "link": "https://stackoverflow.com/users/1986913/gp92"}, "edited": false, "score": 0, "creation_date": 1478514599, "post_id": 40387487, "comment_id": 68170520, "body": "Whatever type of combining files, it should be done. However, I have my answer"}, {"owner": {"reputation": 363, "user_id": 1986913, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dab7a8600679d99e7a50d30819c8bc4b?s=128&d=identicon&r=PG", "display_name": "GP92", "link": "https://stackoverflow.com/users/1986913/gp92"}, "edited": false, "score": 0, "creation_date": 1478514632, "post_id": 40387487, "comment_id": 68170538, "body": "I need to check a few things before that and will update"}], "answers": [{"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478190013, "post_id": 40389452, "comment_id": 68063126, "body": "why do you think combining means concatenating files? why not merging them somehow? or adding byte by byte mod 256? how many ways of combining files there are in the universe?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 1, "creation_date": 1478200012, "post_id": 40389452, "comment_id": 68068887, "body": "@LuisColorado it is just a <i>minimal</i> example. And since combining the five files is done in a separate process, it could be <i>any</i> process. Besides: the OP was not very clear about how to combine the five files."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478259251, "post_id": 40389452, "comment_id": 68091680, "body": "@wildplasser, <i>was not very clear</i> ??? I would add <i>was not clear at all</i>"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1478121244, "last_edit_date": 1478121244, "creation_date": 1478119438, "answer_id": 40389452, "question_id": 40387487, "link": "https://stackoverflow.com/questions/40387487/how-to-create-a-virtual-file-with-inode-that-has-references-to-storage-in-memory/40389452#40389452", "title": "How to create a virtual file with inode that has references to storage in memory", "body": "<p>Create a fifo (named pipe) and provide its name as an argument to your program. The process that combines the five input files <em>writes</em> to this fifo</p>\n\n<ul>\n<li><code>mkfifo wtf</code></li>\n<li><code>cat file1 file2 file3 file4 file5 &gt; wtf</code> # this will block...</li>\n<li>[from another terminal] <code>cp wtf omg</code></li>\n</ul>\n\n<hr>\n\n<p>Here I used <code>cp</code> as your program, and <code>cat</code> as the program combining the five files. You will see that <code>omg</code> will contain the output of your program (here: <code>cp</code>) and that the first terminal will <em>unblock</em> after the program is done.</p>\n\n<hr>\n\n<p>Your program (here:<code>cp</code>) is not even aware that its 1st argument <code>wtf</code> refers to a fifo; it just opens it and reads from it like it would do with an ordinary file. (this will fail if the program attempts to seek in the file; seek() is not implemented for pipes and fifos)</p>\n"}], "owner": {"reputation": 363, "user_id": 1986913, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dab7a8600679d99e7a50d30819c8bc4b?s=128&d=identicon&r=PG", "display_name": "GP92", "link": "https://stackoverflow.com/users/1986913/gp92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478190568, "creation_date": 1478112166, "last_edit_date": 1478190568, "question_id": 40387487, "link": "https://stackoverflow.com/questions/40387487/how-to-create-a-virtual-file-with-inode-that-has-references-to-storage-in-memory", "title": "How to create a virtual file with inode that has references to storage in memory", "body": "<p>Let me explain clearly. </p>\n\n<p>The following is my requirement:</p>\n\n<ul>\n<li>Let's say there is a command which has an option specified as '-f' that takes a filename as argument. </li>\n<li>Now I have 5 files and I want to create a new file merging those 5 files and give the new filename as argument for the above command.</li>\n<li><p>But there is a difference between </p>\n\n<ol>\n<li>reading a single file and </li>\n<li>merging all files &amp; reading the merged file. </li>\n</ol></li>\n<li><p>There is more IO (read from 5 files + write to the merged file + any IO our command does with the given file) generated in the second case than IO (any IO our command does with the given file) generated in the first case.</p></li>\n</ul>\n\n<p><strong><em>Can we reduce this unwanted IO?</em></strong> </p>\n\n<p>In the end, I really don't want the merged file at all. I only create this merged file just to let the command read the merged files content.</p>\n\n<p>And to say, I also don't want this implementation. The file sizes are not so big and it is okay to have that extra negligible IO. But, I am just curious to know if this can be done.</p>\n\n<p>So in order to implement this, I have following understanding/questions:</p>\n\n<ul>\n<li>Generally what all the commands (that takes the filename argument) does is it reads the file. </li>\n<li>In our case, the filename(filepath) is not ready, it's just an virtual/imaginary filename that exists (as the mergation of all files).</li>\n<li><strong><em>So, can we create such virtual filename?</em></strong></li>\n<li><strong><em>What is a filename?</em></strong> It's an indirect inode entry for a storage location.</li>\n<li>In our case, the individual files have different inode entries and all inode entries have different storage locations. And our virtual/imaginary file has in fact no inode and even if we could create an imaginary inode, that can only point to a storage in memory (as there is no reference to the storage location of another file from a storage location of one file in disk)</li>\n<li>But, let's say using advanced programming, we are able to create an imaginary filepath with imaginary inode, that points to a storage in memory. </li>\n<li>Now, when we give that imaginary filename as argument and when the command tries to open that imaginary file, it finds that it's inode entry is referring to a storage in memory. But the actual content is there in disk and not in the memory. So, the data is not loaded into memory yet, unless we read it explicitly. Hence, again we would need to read the data first. </li>\n</ul>\n\n<p><strong><em>Simply saying, as there is no continuity or references at storage in disk to the next file data, the merged data needs to be loaded to memory first.</em></strong></p>\n\n<p>So, with my deduction, it seems we would at least need to put the data in memory. However, as the command itself would need the file to be read (if not the whole file, at least a part of it until the commands's operation is done - let it be parsing or whatever). So, using this method, we could save some significant IO, if it's really a big file. </p>\n\n<p>So, how can we create that virtual file?</p>\n\n<ul>\n<li>My first answer is to write the merged file to tmpfs and refer to that file. But is it the only option or can we actually point to a storage location in memory, other than tmpfs? tmpfs is not option because, my script can be run from any server and we need to have a solution that work from all servers. If I mention to create merged file at /dev/shm in my script, it may fail in the server where it doesn't have /dev/shm. So I should be able to load to memory directly. But I think normal user will not have access to memory and so, it seems can not be done without shm.</li>\n</ul>\n\n<p>Please let me know your comments and also kindly correct me if my understanding anywhere is wrong. Even if it is complicated for my level, kindly post your answer. At least, I might understand it after few months.</p>\n"}, {"tags": ["c", "geometry"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478112122, "post_id": 40387342, "comment_id": 68026617, "body": "It&#39;s a classical <i>minimization problem</i>. You should learn about it."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1478112389, "post_id": 40387342, "comment_id": 68026762, "body": "Start by finding the rectangle that encloses all of the points. That gives you an approximate search range for X and Y."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1478112686, "post_id": 40387342, "comment_id": 68026917, "body": "@user3386109 This rectangle won&#39;t necessarily even contain any part of the line."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478113019, "post_id": 40387342, "comment_id": 68027099, "body": "@EugeneSh. Yup, that&#39;s true. My hint was to ignore to line for the moment and think about what useful properties the collection of points may have."}, {"owner": {"reputation": 85, "user_id": 6236885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f2a6d933b52033eb3aea9b800cfdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Upadhyay", "link": "https://stackoverflow.com/users/6236885/piyush-upadhyay"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478283421, "post_id": 40387342, "comment_id": 68107094, "body": "@EugeneSh. I have rotated the line clockwise by its slope. So now all the points have also changed to (cos(-theta),sin(-theta)) multiplied by their original value. Then I took all the <i>changed x coordinates</i> and took their mean. I am considering that point to be optimum point. Calculating distance from that point. and rotating anticlockwise with <b>theta</b> angle again to get the original coordinate values on the line."}], "answers": [{"comments": [{"owner": {"reputation": 3365, "user_id": 2564696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfecfacff3f61943083d01444ade243?s=128&d=identicon&r=PG", "display_name": "dmuir", "link": "https://stackoverflow.com/users/2564696/dmuir"}, "edited": false, "score": 2, "creation_date": 1478372498, "post_id": 40388020, "comment_id": 68130784, "body": "As long as none of the given points are on the line, using Newton-Raphson on this seems to work well. However if some of the points are on the line then the objective is not differentiable (at these points) and things are not so nice."}], "tags": [], "owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "is_accepted": false, "score": 5, "last_activity_date": 1478114254, "creation_date": 1478114254, "answer_id": 40388020, "question_id": 40387342, "link": "https://stackoverflow.com/questions/40387342/how-to-find-an-optimum-location-point-on-a-line/40388020#40388020", "title": "How to find an optimum location point on a line?", "body": "<p>Without  loss of generality, the line is the X axis (otherwise rotate the whole geometry). Then you want to minimize</p>\n\n<pre><code>Sum \u221a[(X - Xk)\u00b2 + Yk\u00b2]\n</code></pre>\n\n<p>which you can do by canceling the first derivative</p>\n\n<pre><code>Sum (X - Xk)/\u221a[(X - Xk)\u00b2 + Yk\u00b2] = 0\n</code></pre>\n\n<p>Unfortunately, this is a nonlinear equation that will require numerical methods.</p>\n\n<p>As a starting approximation, you can use the minimizer of the sum of the squared distances,</p>\n\n<pre><code>Sum [(X - Xk)\u00b2 + Yk\u00b2]\n</code></pre>\n\n<p>by solving</p>\n\n<pre><code>Sum (X - Xk) = 0\n</code></pre>\n\n<p>which simply gives the point <code>(X*, 0)</code> where <code>X*</code> is the average abscissa.</p>\n"}], "owner": {"reputation": 85, "user_id": 6236885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f2a6d933b52033eb3aea9b800cfdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Upadhyay", "link": "https://stackoverflow.com/users/6236885/piyush-upadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "closed_date": 1478142714, "answer_count": 1, "score": -7, "last_activity_date": 1478114254, "creation_date": 1478111688, "question_id": 40387342, "link": "https://stackoverflow.com/questions/40387342/how-to-find-an-optimum-location-point-on-a-line", "closed_reason": "Needs more focus", "title": "How to find an optimum location point on a line?", "body": "<p>A line is given and a bunch of points are given. I have to find a point on line for which sum of distances from given points is minimum. <strong>I could't find any algorithm to implement in c</strong>. Please help, thanks in advance.</p>\n"}, {"tags": ["c", "system-calls", "ls", "calloc", "ptrace"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1478116156, "post_id": 40387270, "comment_id": 68028792, "body": "If anything, <code>str = calloc(params[2] + 1, sizeof (char));</code> but <code>sizeof (char)</code> is always 1 so you could inline that."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1478123478, "post_id": 40387270, "comment_id": 68032550, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/40355632/ptrace-with-ptrace-peekdata-in-ubuntu\">ptrace with PTRACE_PEEKDATA in Ubuntu</a>"}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1478128442, "post_id": 40387270, "comment_id": 68034376, "body": "@melpomene right yes! That would make more sense. I will leave the sizeof() there, maybe with a comment about inlining the value in certain circumstances, as this is my tutorial file."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1478128584, "post_id": 40387270, "comment_id": 68034422, "body": "However, it hasn&#39;t fixed the error... @MarkPlotnick you might be right, this may will be a duplicate of that. I have read through that, and the other question linked in that questions answer, but I&#39;m still not entirely clear. Are they saying that on x64 you need to replace eax, ebx, ecx and edx with rdi, rsi, rdx, r10, r8 and r9?"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1478129877, "post_id": 40387270, "comment_id": 68034780, "body": "Yes, in x86-32, system call params are in ebx, ecx, edx, esi, edi, and ebp. In x86-64, they&#39;re in rdi, rsi, rdx, r10, r8 and r9."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1478130813, "post_id": 40387270, "comment_id": 68035001, "body": "Ah! Ok. So do I leave RAX as is?"}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1478130922, "post_id": 40387270, "comment_id": 68035029, "body": "That&#39;s fixed it btw, thanks alot both of you!"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 1, "creation_date": 1478136713, "post_id": 40387270, "comment_id": 68036337, "body": "Yes, system call number is in eax on x86-32, rax on x86-64."}], "answers": [{"tags": [], "owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "is_accepted": true, "score": 0, "last_activity_date": 1478131922, "creation_date": 1478131922, "answer_id": 40391844, "question_id": 40387270, "link": "https://stackoverflow.com/questions/40387270/using-ptrace-to-reverse-ls-readout-doesnt-seem-to-work/40391844#40391844", "title": "Using ptrace to reverse ls readout doesn&#39;t seem to work", "body": "<p>So thanks to @melpmene and @MarkPlotnick for the answers. I have struggled to figure out some of the other answers covering the same topic, and another resource I found that suggested how to convert the x32 code to x64 code wasn't entirely accurate (at least for my system), so here is what I needed to do:</p>\n\n<p>1)</p>\n\n<pre><code>str = (char *)calloc(params[2] + 1 * sizeof (char))\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>str = (char *)calloc(params[2] + 1, sizeof (char))\n</code></pre>\n\n<p>2)</p>\n\n<p>EBX, ECX and EDX should be replaced by RDI, RSI and RDX</p>\n"}], "owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 40391844, "answer_count": 1, "score": 0, "last_activity_date": 1478131922, "creation_date": 1478111429, "last_edit_date": 1478113065, "question_id": 40387270, "link": "https://stackoverflow.com/questions/40387270/using-ptrace-to-reverse-ls-readout-doesnt-seem-to-work", "title": "Using ptrace to reverse ls readout doesn&#39;t seem to work", "body": "<p>I've been following some instructions on how to use ptrace that are found <a href=\"http://www.linuxjournal.com/article/6100?page=0,2\" rel=\"nofollow noreferrer\">here</a>. I am on ubuntu 14.04, x64, and I have been altering bits of the example code to work with my x64 machine, such as eax to rax, and changing 4s to 8s where appropriate. The forth example is supposed to reverse the output of ls, but it does not. I get this:</p>\n\n<pre><code>bin       Debugger.depend  dummy1.s       main_tut2.cpp  main_tut4.cpp  obj\nDebugger.cbp  Debugger.layout  main_tut1.cpp  main_tut3.cpp  main_tut5.cpp\nbin       Debugger.depend  dummy1.s       main_tut2.cpp  main_tut4.cpp  obj\nDebugger.cbp  Debugger.layout  main_tut1.cpp  main_tut3.cpp  main_tut5.cpp\n</code></pre>\n\n<p>And I believe I should be getting it reversed if my code works correctly, something like this:</p>\n\n<pre><code>jbo ppc.4tut_niam ppc.2tut_niam s.1ymmud dneped.reggubeD nib\nppc.5tut_niam ppc.3tut_niam ppc.1tut_niam tuoyal.reggubeD pbc.reggubeD\njbo ppc.4tut_niam ppc.2tut_niam s.1ymmud dneped.reggubeD nib\nppc.5tut_niam ppc.3tut_niam ppc.1tut_niam tuoyal.reggubeD pbc.reggubeD\n</code></pre>\n\n<p>I have found an error in the code printed in the page I linked above (<a href=\"http://www.linuxjournal.com/article/6100?page=0,2\" rel=\"nofollow noreferrer\">here</a>) which is 20 lines up from the bottom in my code, but I think I have corrected that. This is the incorrect line:</p>\n\n<pre><code>                str = (char *)calloc((params[2] + 1) * sizeof(char));\n</code></pre>\n\n<p>It has one arguement but needs two. I believe it should be:</p>\n\n<pre><code>                str = (char *)calloc(params[2] + 1, (params[2] + 1) * sizeof(char));\n</code></pre>\n\n<p>But if I have that wrong, I would be happy to be corrected. I also tried:</p>\n\n<pre><code>                str = (char *)calloc(1, (params[2] + 1) * sizeof(char));\n</code></pre>\n\n<p>I'm still not sure which would be correct, if either...</p>\n\n<p>Is this the reason why it's not working? Or is it something else, maybe another problem relating to being on x64 that I haven't accounted for? Bonus points for anyone who can tell me what calloc is doing in this instance and why the second arguement is as it is.</p>\n\n<p>EDIT:</p>\n\n<p>I have just tried printing str both before and after the reversal... it's just a bunch of question marks. When I debug, it seems the entire contents of str is -1s. This further suggests that something is wrong with my call to calloc()...</p>\n\n<p>Anyway, here is my version of the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sys/ptrace.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;         // For fork()\n//#include &lt;linux/user.h&gt;   // For constants ORIG_EAX for 32bit etc\n#include &lt;sys/user.h&gt;       // For constants ORIG_RAX for 64bit etc\n#include &lt;sys/reg.h&gt;\n#include &lt;sys/syscall.h&gt;    // For SYS_write etc\n#include &lt;cstring&gt;          // For strlen()\n\n/** ptrace(enum __ptrace_request,   // behaviour of ptrace\n           pid_t pid,               // Process ID\n           void *addr,              // Address to read in user area\n           void *data);             //\n**/\n\n/**\nPTRACE_TRACEME,   PTRACE_PEEKTEXT, PTRACE_PEEKDATA, PTRACE_PEEKUSER,   PTRACE_POKETEXT,\nPTRACE_POKEDATA,  PTRACE_POKEUSER, PTRACE_GETREGS,  PTRACE_GETFPREGS,  PTRACE_SETREGS,\nPTRACE_SETFPREGS, PTRACE_CONT,     PTRACE_SYSCALL,  PTRACE_SINGLESTEP, PTRACE_DETACH\n**/\n\nconst int long_size = sizeof(long);\n\nvoid reverse(char *str) {\n\n    int i, j;\n    char temp;\n\n    for (i = 0, j = strlen(str) - 2; i &lt;= j; i++, j--) {\n        temp = str[i];\n        str[i] = str[j];\n        str[j] = temp;\n    }\n}\n\nvoid getData(pid_t child, long addr, char *str, int len) {\n\n    char *laddr;\n    int i, j;\n    union u {\n        long val;\n        char chars[long_size];\n    } data;\n\n    i = 0;\n    j = len / long_size;\n    laddr = str;\n\n    while(i &lt; j) {\n        data.val = ptrace(PTRACE_PEEKDATA, child, addr + i * 8, NULL);\n        memcpy(laddr, data.chars, long_size);\n        i++;\n        laddr += long_size;\n    }\n\n    j = len % long_size;\n\n    if (j != 0) {\n        data.val = ptrace(PTRACE_PEEKDATA, child, addr + i * 8, NULL);\n        memcpy(laddr, data.chars, j);\n    }\n\n    str[len] = '\\0';\n}\n\nvoid putData(pid_t child, long addr, char *str, int len) {\n\n    char *laddr;\n    int i, j;\n    union u {\n        long val;\n        char chars[long_size];\n    } data;\n\n    i = 0;\n    j = len / long_size;\n    laddr = str;\n\n    while(i &lt; j) {\n        memcpy(data.chars, laddr, long_size);\n        ptrace(PTRACE_POKEDATA, child, addr + i * 8, data.val);\n        i++;\n        laddr += long_size;\n    }\n\n    j = len % long_size;\n\n    if (j != 0) {\n        memcpy(data.chars, laddr, j);\n        ptrace(PTRACE_POKEDATA, child, addr + i * 8, data.val);\n    }\n}\n\nint main()\n{\n    pid_t child;\n    child = fork();\n\n    if (child == 0) {\n\n        ptrace(PTRACE_TRACEME, 0, NULL, NULL);\n        execl(\"/bin/ls\", \"ls\", NULL);\n\n    } else {\n\n        long orig_rax;\n        long params[3];\n        int status;\n        char *str, *laddr;\n        int toggle = 0;\n\n        while(1) {\n\n            wait(&amp;status);\n            if (WIFEXITED(status))\n                break;\n\n            orig_rax = ptrace(PTRACE_PEEKUSER, child, 8 * ORIG_RAX, NULL);\n\n            if (orig_rax == SYS_write) {\n\n                if (toggle == 0) {\n\n                    toggle = 1;\n                    params[0] = ptrace(PTRACE_PEEKUSER, child, 8 * RBX, NULL);\n                    params[1] = ptrace(PTRACE_PEEKUSER, child, 8 * RCX, NULL);\n                    params[2] = ptrace(PTRACE_PEEKUSER, child, 8 * RDX, NULL);\n                    str = (char *)calloc(params[2] + 1, (params[2] + 1) * sizeof(char));\n\n                    getData(child, params[1], str, params[2]);\n                    reverse(str);\n                    putData(child, params[1], str, params[2]);\n\n                } else {\n\n                    toggle = 0;\n                }\n            }\n\n            ptrace(PTRACE_SYSCALL, child, NULL, NULL);\n        }\n    }\n\n    execl(\"/bin/ls\", \"ls\", NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>Any assistance would be greatly appreciated!</p>\n"}, {"tags": ["c", "multithreading", "x86", "cpu-registers", "xv6"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478110687, "post_id": 40386744, "comment_id": 68025829, "body": "<code>clone()</code> is Linux- (and apparently xv6-) specific.  If xv6 has pthreads then I would strongly recommend using that interface instead."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478116967, "post_id": 40386956, "comment_id": 68029214, "body": "I know how to use this system call clone() but I am confused about the register pointer in this function, and I want to know why they can be set like this"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478127265, "post_id": 40386956, "comment_id": 68034021, "body": "I don&#39;t understand your question then -- clone sets up the thread&#39;s registers for the new thread based on the arguments you give it.  It needs to set up the thread&#39;s registers so that your function will be called when the scheduler switches to the new thread."}, {"owner": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478132227, "post_id": 40386956, "comment_id": 68035324, "body": "For example I don&#39;t know why the np-&gt;tf-&gt;eax is equal to 0, I think it should be equal to the ebb"}, {"owner": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478132361, "post_id": 40386956, "comment_id": 68035349, "body": "typo: ebp not ebb"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478134164, "post_id": 40386956, "comment_id": 68035758, "body": "eax is ignored on calling a function in the normal x86/C calling convertions, so it doesn&#39;t really matter what it is set to."}, {"owner": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478134298, "post_id": 40386956, "comment_id": 68035789, "body": "what about the other pointers, why they are assigned like this? I try to revise the value assigned to these pointers, it turn out to be some error during test."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478134454, "post_id": 40386956, "comment_id": 68035826, "body": "esp needs to point at the stack, where the function can find its argument (at esp+4), and allocate space for locals and call other functions.  eip needs to point at the first instruction in the function, which is what a C function pointer normally points at (this is somewhat compiler dependent, but pretty much all x86 C compilers are the same).  Other registers don&#39;t really matter to the C calling conventions."}, {"owner": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478134811, "post_id": 40386956, "comment_id": 68035905, "body": "so why the ESP need to minus sizeof(void*)? I think it is just equal to stack+PGSIZE which points the beginning of the stack"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478135237, "post_id": 40386956, "comment_id": 68036006, "body": "So that the argument <code>arg</code> is at <code>dword ptr [esp + 4]</code>.  It also needs free space below esp, as the stack grows downwards on x86."}, {"owner": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 0, "creation_date": 1478135775, "post_id": 40386956, "comment_id": 68036118, "body": "thanks for your answer, it helps a lot, the last question, what is the 0xffffffff, the manual says it is a fake return PC, why it is placed next to the arg?"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "edited": false, "score": 1, "creation_date": 1480135909, "post_id": 40386956, "comment_id": 68850058, "body": "@ZhengYuan, the pc needs a place to jump to when it is done executing the last instruction in the function. So <code>0xffffffff</code> is the dummy instruction to execute. In reality you should call exit inside the function to properly exit the thread otherwise executing instruction <code>0xffffffff</code>, leads to some issues"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 1, "last_activity_date": 1478110397, "creation_date": 1478110397, "answer_id": 40386956, "question_id": 40386744, "link": "https://stackoverflow.com/questions/40386744/register-pointer-in-creating-threads-in-xv6/40386956#40386956", "title": "Register pointer in creating threads in xv6", "body": "<p>You don't set these registers -- clone sets them for you.  You need to provide a function (which clone uses to initialize ip) and a stack (which clone uses to initialize sp).</p>\n\n<p>The function pointer is pretty straight-forward (its just a C function pointer), but the stack is trickier.  For the <code>clone</code> implementation you show, you need to allocate some memory and provide a pointer <code>PGSIZE</code> below the <em>end</em> of that block.  Linux's clone call is similar, but slightly different (you need to provide a pointer to the end of the block).  If you want to catch stack overflows, you'll need to do more work (probably allocating a read/write protected guard page below the stack).</p>\n"}, {"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 1, "last_activity_date": 1480136791, "creation_date": 1480136791, "answer_id": 40815129, "question_id": 40386744, "link": "https://stackoverflow.com/questions/40386744/register-pointer-in-creating-threads-in-xv6/40815129#40815129", "title": "Register pointer in creating threads in xv6", "body": "<p>Of all the register values you set, the only useful ones are:</p>\n\n<p><strong>eip</strong> - Tells the thread where to start executing from when it returns to userspace</p>\n\n<p><strong>esp</strong> - This is points to the top of the stack. This means that if you did this right, 4 bytes stored at the top of the stack should contain your return address</p>\n\n<hr>\n\n<p><strong>eax</strong> is not really useful here seeing as the thread jumps to a new context and not the one where it was created. Otherwise, <em>eax</em> will store the return value of the last system call. See the implementation of <code>fork</code> if you are still confused about this one.</p>\n\n<p><strong>ebp</strong> is not manipulated by you, but rather by the x86 function call conventions and is usually set to the value of <em>esp</em> when the function is called. As such you will usually see this sort of thing in the disassembly of most function calls</p>\n\n<pre><code>push ebp      ; Preserve current frame pointer\nmov ebp, esp  ; Create new frame pointer pointing to current stack top\n</code></pre>\n\n<p><em>ebp</em> is also useful for stack tracing because it stores the top of the previous function's stack before it is then changed to point to the current stack top</p>\n\n<hr>\n\n<p>You don't need this <code>*(ustack - 2) = 0xffffffff;</code></p>\n"}], "owner": {"reputation": 63, "user_id": 6777079, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/053c76a7ed80fbb3a804c02ca6097f17?s=128&d=identicon&r=PG&f=1", "display_name": "zyz", "link": "https://stackoverflow.com/users/6777079/zyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "accepted_answer_id": 40386956, "answer_count": 2, "score": 1, "last_activity_date": 1480136941, "creation_date": 1478109671, "last_edit_date": 1480136941, "question_id": 40386744, "link": "https://stackoverflow.com/questions/40386744/register-pointer-in-creating-threads-in-xv6", "title": "Register pointer in creating threads in xv6", "body": "<p>I want to create a thread in xv6 by using a system call \"clone()\", but I am confused about the stack creation, since if I want to create a thread, I need to create the corresponding register pointer such like ebp, esp, eip. But I don't know how to set the value of these register pointer.</p>\n\n<p>Here is a code of clone() in xv6, I don't know why we need to set the value of the register pointer like this.......</p>\n\n<pre><code>int clone(void(*fcn)(void*), void *arg, void*stack){\n\n  int i, pid;\n  struct proc *np;\n  int *ustack = stack + PGSIZE - sizeof(void*);\n  //allocate process.\n  if((np=allocproc()) == 0)\n    return -1;\n\n  //copy process state from p\n  np-&gt;pgdir = proc-&gt;pgdir;\n  np-&gt;sz = proc-&gt;sz;\n  np-&gt;parent = 0;\n  np-&gt;pthread = proc;\n  *np-&gt;tf = *proc-&gt;tf;\n  np-&gt;ustack = stack;\n\n  //initialize stack variables \n  //void *stackArg, *stackRet;\n  //stackRet = stack + PGSIZE -2*sizeof(void*);\n  //*(uint *)stackRet = 0xffffffff;\n\n  //stackArg = stack + PGSIZE -sizeof(void*);\n  //*(uint *)stackArg = (uint)arg;\n  *ustack = (int) arg;\n  *(ustack - 1) = 0xffffffff;\n  *(ustack - 2) = 0xffffffff;\n\n\n  //Set stack pinter register\n  np-&gt;tf-&gt;eax = 0;\n  np-&gt;tf-&gt;esp = (int) ustack - sizeof(void*);\n  np-&gt;tf-&gt;ebp = np-&gt;tf-&gt;esp;\n  np-&gt;tf-&gt;eip = (int)fcn;\n\n  for(i = 0; i &lt; NOFILE; i++) {\n    if(proc-&gt;ofile[i])\n      np-&gt;ofile[i] = filedup(proc-&gt;ofile[i]);\n  }\n\n  np-&gt;cwd = idup(proc-&gt;cwd);\n  np-&gt;state = RUNNABLE;\n  safestrcpy(np-&gt;name, proc-&gt;name, sizeof(proc-&gt;name));\n  pid = np-&gt;pid;\n  return pid;\n\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 3, "creation_date": 1478108562, "post_id": 40386374, "comment_id": 68024531, "body": "In C you can not ommit the <code>struct</code> keyword, <code>matrix a[MAX][MAX]</code> should be <code>struct  matrix a[MAX][MAX]</code> (or use a <code>typedef</code>)"}, {"owner": {"reputation": 527, "user_id": 5243770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/J1YS7.png?s=128&g=1", "display_name": "germanfr", "link": "https://stackoverflow.com/users/5243770/germanfr"}, "edited": false, "score": 0, "creation_date": 1478108647, "post_id": 40386374, "comment_id": 68024585, "body": "Here is explained: <a href=\"http://stackoverflow.com/questions/1675351/typedef-struct-vs-struct-definitions\" title=\"typedef struct vs struct definitions\">stackoverflow.com/questions/1675351/&hellip;</a>"}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 0, "creation_date": 1478108661, "post_id": 40386374, "comment_id": 68024590, "body": "Or the definition should be <code>typedef struct matrix{     int Val, Next; } matrix;</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1478108716, "post_id": 40386374, "comment_id": 68024617, "body": "You should not put function implementations in C header files, only their prototypes.  Including the implementation as well tends to produce duplicate definitions, which are not allowed."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 4658132, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/874631382603210/picture?type=large", "display_name": "Armen Yeganyan", "link": "https://stackoverflow.com/users/4658132/armen-yeganyan"}, "is_accepted": false, "score": 1, "last_activity_date": 1520937399, "last_edit_date": 1520937399, "creation_date": 1478108695, "answer_id": 40386426, "question_id": 40386374, "link": "https://stackoverflow.com/questions/40386374/error-unknown-type-name-struct/40386426#40386426", "title": "error: unknown type name struct", "body": "<p>Typedef on struct declaration its \"new name\".</p>\n\n<pre><code>typedef struct matrix{\n    int Val, Next;\n} matrix;\n</code></pre>\n\n<p>Or specify on new instance creation explictly that it is struct:</p>\n\n<pre><code>struct matrix a[MAX][MAX];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9511, "user_id": 7023590, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/82052fbf0815ce82c4eded8fd941be14?s=128&d=identicon&r=PG&f=1", "display_name": "MarianD", "link": "https://stackoverflow.com/users/7023590/mariand"}, "is_accepted": false, "score": 0, "last_activity_date": 1478109103, "creation_date": 1478109103, "answer_id": 40386575, "question_id": 40386374, "link": "https://stackoverflow.com/questions/40386374/error-unknown-type-name-struct/40386575#40386575", "title": "error: unknown type name struct", "body": "<p>Instead of</p>\n\n<pre><code>    void intro_date(int nr_elem, matrix a[MAX][MAX]){\n</code></pre>\n\n<p>use</p>\n\n<pre><code>    void intro_date(int nr_elem, struct matrix a[MAX][MAX]){\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 6, "last_activity_date": 1478109900, "creation_date": 1478109900, "answer_id": 40386816, "question_id": 40386374, "link": "https://stackoverflow.com/questions/40386374/error-unknown-type-name-struct/40386816#40386816", "title": "error: unknown type name struct", "body": "<p>You defined a structure called <code>struct matrix</code>.  This is not the same as <code>matrix</code>, as struct definitions must be preceeded by the <code>struct</code> keyword.</p>\n\n<p>Change your function definition to:</p>\n\n<pre><code>void intro_date(int nr_elem, struct matrix a[MAX][MAX])\n</code></pre>\n\n<p>Also, you should not put code into a header file.  Only type definitions and declarations belong there.  If more than one source file were to include this header, the object file created for each will contain a copy of the function <code>intro_date()</code>.  Upon attempting to link those files, you'll get an error stating <code>intro_date()</code> was redefined.</p>\n\n<p>The definition of <code>intro_date</code> should exist in exactly one source file.  Then the header would contain just the declaration.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14991661, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiewUpKFrHHdEnj3crmBPVZRV9bOyR6Lltp6DAw=k-s128", "display_name": "Gurpreet Singh", "link": "https://stackoverflow.com/users/14991661/gurpreet-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1610463281, "creation_date": 1610463281, "answer_id": 65686375, "question_id": 40386374, "link": "https://stackoverflow.com/questions/40386374/error-unknown-type-name-struct/65686375#65686375", "title": "error: unknown type name struct", "body": "<p>Use Struct Keyword before that.</p>\n<p>For C compilers, you have to user struct keyword whereas In C++, the struct keyword is optional.\nFor Ease in C, you can typedef it.</p>\n<pre><code>typedef struct _matrix{\n    int Val, Next;\n}matrix;\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 7105973, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4hG72.jpg?s=128&g=1", "display_name": "theSongbird", "link": "https://stackoverflow.com/users/7105973/thesongbird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11650, "favorite_count": 0, "accepted_answer_id": 40386816, "answer_count": 4, "score": 1, "last_activity_date": 1610463281, "creation_date": 1478108484, "last_edit_date": 1478108614, "question_id": 40386374, "link": "https://stackoverflow.com/questions/40386374/error-unknown-type-name-struct", "title": "error: unknown type name struct", "body": "<p>I'm trying to solve Conway's Game of Life in C. I have written a .h file containing all my functions, yet I receive the following error within the header file:\nerror: unknown type name \"matrix\"</p>\n\n<p>This is the beginning of the header file, which contains my struct declaration and the 1st function:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#define MAX 1000\nstruct matrix{\n    int Val, Next;\n};\nvoid intro_date(int nr_elem, matrix a[MAX][MAX]){\n    int x,y;\n    printf(\"Enter the line and the column of the element which you wish to read within the matrix: \\n\");\n    while(nr_elem){\n        scanf(\"%d%d\",&amp;x,&amp;y);\n        a[x][y].Val=1;\n        --nr_elem;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "type-conversion"], "comments": [{"owner": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 1, "creation_date": 1478108362, "post_id": 40386196, "comment_id": 68024423, "body": "The error message doesn&#39;t match the program. Please post the program you&#39;re actually using - the one in your question doesn&#39;t have any casts in :-)"}, {"owner": {"reputation": 541, "user_id": 3306294, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Cwwj1.jpg?s=128&g=1", "display_name": "R B", "link": "https://stackoverflow.com/users/3306294/r-b"}, "reply_to_user": {"reputation": 21412, "user_id": 333698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca080b4ef1c6cb4df9bc123d3b3af61?s=128&d=identicon&r=PG", "display_name": "psmears", "link": "https://stackoverflow.com/users/333698/psmears"}, "edited": false, "score": 0, "creation_date": 1478108746, "post_id": 40386196, "comment_id": 68024641, "body": "@psmears - see print screen above. ( I had a casting originally, but the problem remains without it)."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1515901228, "post_id": 40386196, "comment_id": 83475671, "body": "copy the code and output text and paste here, not in an image"}], "answers": [{"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1478108023, "post_id": 40386222, "comment_id": 68024207, "body": "Higher priority, so it happens first, no?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1478108062, "post_id": 40386222, "comment_id": 68024226, "body": "I used confusing terminology (where a lower precedence number means that it happens first). The idea is that it happens first, yes."}, {"owner": {"reputation": 541, "user_id": 3306294, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Cwwj1.jpg?s=128&g=1", "display_name": "R B", "link": "https://stackoverflow.com/users/3306294/r-b"}, "edited": false, "score": 0, "creation_date": 1478178119, "post_id": 40386222, "comment_id": 68054372, "body": "When I don&#39;t explicitly write <code>(int)</code> (see above print screen) the problem remains, do you think it&#39;s because of the same reason?"}, {"owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "reply_to_user": {"reputation": 541, "user_id": 3306294, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Cwwj1.jpg?s=128&g=1", "display_name": "R B", "link": "https://stackoverflow.com/users/3306294/r-b"}, "edited": false, "score": 0, "creation_date": 1478186512, "post_id": 40386222, "comment_id": 68060745, "body": "@RB, printf arguments are not type-checked or coerced and you are responsible to ensure that the parameter types match the first string. When you don&#39;t write (int), the result is passed in as a double but printf expects an integer, which causes undefined behaviour."}], "tags": [], "owner": {"reputation": 123967, "user_id": 251153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4b25144c09555e7d5b5e288469e011ef?s=128&d=identicon&r=PG", "display_name": "zneak", "link": "https://stackoverflow.com/users/251153/zneak"}, "is_accepted": false, "score": 3, "last_activity_date": 1478108026, "last_edit_date": 1478108026, "creation_date": 1478107946, "answer_id": 40386222, "question_id": 40386196, "link": "https://stackoverflow.com/questions/40386196/casting-double-to-int-using-gcc-yields-weird-results/40386222#40386222", "title": "Casting double to int using gcc yields weird results", "body": "<p>The cast operator has <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">more precedence</a> than the division. You're doing <code>((int)1)/p</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1478110197, "post_id": 40386233, "comment_id": 68025523, "body": "...also, we should warn the OP that even after he fixes this problem, he shouldn&#39;t be surprized if <code>(int)(1&#47;0.1)</code> does not equal <code>10</code>."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": false, "score": 5, "last_activity_date": 1478107995, "creation_date": 1478107995, "answer_id": 40386233, "question_id": 40386196, "link": "https://stackoverflow.com/questions/40386196/casting-double-to-int-using-gcc-yields-weird-results/40386233#40386233", "title": "Casting double to int using gcc yields weird results", "body": "<p>Operator precedence.</p>\n\n<p>Cast is a higher priority operator than division, meaning it happens first. So this:</p>\n\n<pre><code>(int) 1/p\n</code></pre>\n\n<p>Is equivalent to this:</p>\n\n<pre><code>((int) 1) / p\n</code></pre>\n\n<p>which results in a <code>double</code>.</p>\n\n<p>You want this:</p>\n\n<pre><code> (int)(1/p)\n</code></pre>\n\n<p>And leave those warnings enabled! 99.9999% of the time, the compiler is smater than you!</p>\n"}], "owner": {"reputation": 541, "user_id": 3306294, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Cwwj1.jpg?s=128&g=1", "display_name": "R B", "link": "https://stackoverflow.com/users/3306294/r-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478108624, "creation_date": 1478107897, "last_edit_date": 1478108624, "question_id": 40386196, "link": "https://stackoverflow.com/questions/40386196/casting-double-to-int-using-gcc-yields-weird-results", "title": "Casting double to int using gcc yields weird results", "body": "<p>I have the following program (koko.c):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(){\n    double p = 0.1;\n    printf(\"%lf, %d\\n\", 1/p, 1/p);\n    return 0;\n}\n</code></pre>\n\n<p>If I try to compile it using <code>gcc koko.c -o koko</code> I get the error:</p>\n\n<blockquote>\n  <p>koko.c:4:2: warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 3 has type \u2018double\u2019 [-Wformat=]\n    printf(\"%lf, %d\\n\", 1/p, (int) 1/p);</p>\n</blockquote>\n\n<p>If I try to disable Wformat (i.e., <code>gcc koko.c -Wformat=0 -o koko</code>), it compiles, but when I run it I get the unexpected output:\n<code>10.000000, -915298312</code>.</p>\n\n<p>Any thoughts as to why this happens?</p>\n\n<p><a href=\"https://i.stack.imgur.com/u82wk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u82wk.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "perl", "aix", "xlc"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478107206, "post_id": 40385970, "comment_id": 68023758, "body": "Why the C tag??"}, {"owner": {"reputation": 23, "user_id": 5220999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa28bdc68fdcaf69b562e92f71da80b3?s=128&d=identicon&r=PG&f=1", "display_name": "MojiBake", "link": "https://stackoverflow.com/users/5220999/mojibake"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478107278, "post_id": 40385970, "comment_id": 68023796, "body": "You use a C compiler, XLC rv7. It may be a problem with the compiler I&#39;m using."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1478117468, "post_id": 40385970, "comment_id": 68029489, "body": "According to OpenSSL&#39;s <a href=\"https://github.com/openssl/openssl/blob/master/NOTES.PERL\" rel=\"nofollow noreferrer\"><code>NOTES.PERL</code></a>: <i>&quot;You MUST have at least Perl version 5.10.0 installed.  This minimum requirement is due to our use of regexp backslash sequence \\R among other features that didn&#39;t exist in core Perl before that version.&quot;</i> Later in the docs it says: <i>&quot;We require the minimum version [of <code>Test::More</code>] to be 0.96, which appeared in Perl 5.13.4, because that version was the first to have all the features we&#39;re using.&quot;</i>"}], "answers": [{"tags": [], "owner": {"reputation": 1875, "user_id": 341980, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0ce4db5e1083663c575158643313852c?s=128&d=identicon&r=PG", "display_name": "pedz", "link": "https://stackoverflow.com/users/341980/pedz"}, "is_accepted": false, "score": 0, "last_activity_date": 1491091647, "creation_date": 1491091647, "answer_id": 43163298, "question_id": 40385970, "link": "https://stackoverflow.com/questions/40385970/compiling-perl-5-10-on-aix-version-5-3/43163298#43163298", "title": "Compiling perl &gt;5.10 on AIX version 5.3", "body": "<p>I pull down and compile openssh and openssl frequently.  I use gcc and no real magic that I can recall. </p>\n\n<p>Here is my script to build it.  I don't know which perl is native to AIX but it seems to work for me.</p>\n\n<p><a href=\"https://github.com/pedz/aix-build-scripts/blob/master/build-scripts/build-openssl\" rel=\"nofollow noreferrer\">https://github.com/pedz/aix-build-scripts/blob/master/build-scripts/build-openssl</a></p>\n"}], "owner": {"reputation": 23, "user_id": 5220999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa28bdc68fdcaf69b562e92f71da80b3?s=128&d=identicon&r=PG&f=1", "display_name": "MojiBake", "link": "https://stackoverflow.com/users/5220999/mojibake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491091647, "creation_date": 1478107113, "last_edit_date": 1478116687, "question_id": 40385970, "link": "https://stackoverflow.com/questions/40385970/compiling-perl-5-10-on-aix-version-5-3", "title": "Compiling perl &gt;5.10 on AIX version 5.3", "body": "<p>I've been compiling OpenSSL (and thus Perl >5.10, as it is a dependency) on multiple platforms. I've managed to get 1.1.0b compiled on every single platform except AIX, which I can't even compile Perl. I've tried several versions and looked at <a href=\"http://perldoc.perl.org/perlaix.html\" rel=\"nofollow noreferrer\">the documentation Perl provides online</a>. From what I can tell, it suggests version 5.12.2.</p>\n\n<p>When I attempt to compile version 5.12.2,</p>\n\n<p>I take the following from the documentation, and fill in a few local system variables, such as using XLC rv7.</p>\n\n<pre><code> export OBJECT_MODE=64\n\n ./Configure \\\n  -d \\\n  -Dcc=/usr/vac/bin/xlc_r7 \\\n  -Duseshrplib \\\n  -Duse64bitall \\\n  -Dprefix=`pwd`/../PERL\n</code></pre>\n\n<p>Then I attempt to make as prompted, and get the following error:</p>\n\n<pre><code>        /usr/vac/bin/xlc_r7 -q64 -o miniperl -brtl -bdynamic -L/usr/local/lib -b64    gv.o toke.o perly.o pad.o regcomp.o dump.o util.o mg.o reentr.o mro.o hv.o av.o run.o pp_hot.o sv.o pp.o scope.o pp_ctl.o pp_sys.o doop.o doio.o regexec.o utf8.o taint.o deb.o universal.o globals.o perlio.o perlapi.o numeric.o mathoms.o locale.o pp_pack.o pp_sort.o    miniperlmain.o opmini.o perlmini.o -lbind -lnsl -ldl -lld -lm -lcrypt -lc\n        LIBPATH=.../perl-5.12.2  ./miniperl -w -Ilib -MExporter -e '&lt;?&gt;' || make minitest\n        LIBPATH=.../perl-5.12.2  ./miniperl -Ilib autodoc.pl\n        /usr/bin/ln -s perl5122delta.pod pod/perldelta.pod\n        LIBPATH=.../perl-5.12.2  ./miniperl -Ilib -Icpan/Cwd -Icpan/Cwd/lib pod/perlmodlib.PL -q\nreaddir(./../../../../..): Bad file number at lib/FindBin.pm line 116\nstat(/pod/): No such file or directory at lib/FindBin.pm line 197\nstat(/pod/): No such file or directory at lib/FindBin.pm line 200\nUse of chdir('') or chdir(undef) as chdir() is deprecated at pod/perlmodlib.PL line 9.\nNo such file or directory at pod/perlmodlib.PL line 19.\nmake: The error code from the last command is 2.\n</code></pre>\n\n<p>Taking a look at pod/perlmodlib.PL, we see the following:</p>\n\n<pre><code># MANIFEST itself is Unix style filenames, so we have to assume that Unix style\n# filenames will work.\n\nopen (MANIFEST, \"../MANIFEST\") or die $!;\n</code></pre>\n\n<p>In my desperation I tried to hack it up and avoid writing to the manifest, but then I get this issue:</p>\n\n<pre><code>Creating Makefile.PL in cpan/Archive-Extract for Archive::Extract\n\nRunning Makefile.PL in cpan/Archive-Extract\n../../miniperl Makefile.PL INSTALLDIRS=perl INSTALLMAN1DIR=none INSTALLMAN3DIR=none PERL_CORE=1 LIBPERL_A=libperl.a\nreaddir(./../../../../../../..): No such file or directory at ../../lib/File/Find.pm line 610\nUse of chdir('') or chdir(undef) as chdir() is deprecated at ../../lib/File/Find.pm line 773.\nreaddir(./../../..): No such file or directory at ../../cpan/Cwd/lib/File/Spec/Unix.pm line 483\nCould not open 'lib/Archive/Extract.pm': No such file or directory at ../../cpan/ExtUtils-MakeMaker/lib/ExtUtils/MM_Unix.pm line 2588.\n512 from cpan/Archive-Extract's Makefile.PL at make_ext.pl line 390.\nWarning: No Makefile!\nmake: Cannot find a rule to create target config from dependencies.\nStop.\n make config PERL_CORE=1 LIBPERL_A=libperl.a failed, continuing anyway...\nMaking all in cpan/Archive-Extract\n make all PERL_CORE=1 LIBPERL_A=libperl.a\nmake: Cannot find a rule to create target all from dependencies.\nStop.\nUnsuccessful make(cpan/Archive-Extract): code=512 at make_ext.pl line 449.\nmake: The error code from the last command is 2.\n</code></pre>\n\n<p>The frequency of errors makes me feel like perhaps I don't have something configured right...</p>\n\n<p>My next thought was to try the most updated version, which at the time of writing is 5.24. Using the same configuration and attempting to make I get the following issue:</p>\n\n<pre><code>Can't locate strict.pm in @INC (you may need to install the strict module) (@INC contains: /cpan/AutoLoader/lib /dist/Carp/lib /dist/PathTools /dist/PathTools/lib /cpan/ExtUtils-Install/lib /cpan/ExtUtils-MakeMaker/lib /cpan/ExtUtils-Manifest/lib /cpan/File-Path/lib /ext/re /dist/Term-ReadLine/lib /dist/Exporter/lib /ext/File-Find/lib /cpan/Text-Tabs/lib /dist/constant/lib /cpan/version/lib /lib .) at autodoc.pl line 25.\nBEGIN failed--compilation aborted at autodoc.pl line 25.\nmake: The error code from the last command is 2.\n</code></pre>\n\n<p>Which I know from other compilations means I need to edit the PERL5LIB variable.</p>\n\n<p>If I keep adding all the modules to the path:</p>\n\n<pre><code>export PERL5LIB=`pwd`/dist/Exporter/lib:$PERL5LIB\nexport PERL5LIB=`pwd`/cpan/Text-Tabs/lib:$PERL5LIB\nexport PERL5LIB=`pwd`/ext/re:$PERL5LIB\nexport PERL5LIB=`pwd`/dist/constant/lib:$PERL5LIB\nexport PERL5LIB=`pwd`/cpan/ExtUtils-MakeMaker/lib:$PERL5LIB\nexport PERL5LIB=`pwd`/dist/Carp/lib:$PERL5LIB\nexport PERL5LIB=`pwd`/cpan/File-Path/lib:$PERL5LIB\nexport PERL5LIB=`pwd`/dist/PathTools:$PERL5LIB\nexport PERL5LIB=`pwd`/dist/PathTools/lib:$PERL5LIB\nexport PERL5LIB=`pwd`/ext/File-Find/lib:$PERL5LIB\n</code></pre>\n\n<p>Even so, I'll still get an error for a module that isn't even present in the 5.24.0 source!</p>\n\n<pre><code>Can't locate ExtUtils/MakeMaker/version/vpp.pm in @INC (you may need to install the ExtUtils::MakeMaker::version::vpp module) (@INC contains: &lt;removed from post&gt;) at (eval 2) line 2.\nBEGIN failed--compilation aborted at (eval 2) line 2.\nCompilation failed in require at .../perl-5.24.0/cpan/ExtUtils-MakeMaker/lib/ExtUtils/MakeMaker.pm line 10.\nBEGIN failed--compilation aborted at .../perl-5.24.0/cpan/ExtUtils-MakeMaker/lib/ExtUtils/MakeMaker.pm line 10.\nCompilation failed in require at Makefile.PL line 7.\nBEGIN failed--compilation aborted at Makefile.PL line 7.\nUnsuccessful Makefile.PL(cpan/Archive-Tar): code=512 at make_ext.pl line 517.\nmake: The error code from the last command is 2.\n</code></pre>\n\n<p>I have MakeMaker, but the 5.24 version does not contain vpp.pm! Again, in desperation I attempted to put it in there from a different source, and I get this error:</p>\n\n<pre><code>        LIBPATH=.../perl-5.24.0 ./miniperl -Ilib make_ext.pl cpan/Archive-Tar/pm_to_blib  MAKE=\"make\" LIBPERL_A=libperl.a\nreaddir(./../../../../../../..): No such file or directory at .../perl-5.24.0/ext/File-Find/lib/File/Find.pm line 142.\nCan't cd to : No such file or directory\nUnsuccessful Makefile.PL(cpan/Archive-Tar): code=512 at make_ext.pl line 517.\nmake: The error code from the last command is 2.\n</code></pre>\n\n<p>All of this makes me feel like perhaps I'm not configuring something right... Can anyone with some experience help me out with some cut and dry installation instructions for Perl on AIX? I'd be super grateful. Thanks!</p>\n\n<p>Below is some information about my system:</p>\n\n<pre><code>&gt; prtconf\nSystem Model: IBM,8231-E1D\nMachine Serial Number: Not Available\nProcessor Type: Not Available\nProcessor Implementation Mode: POWER 7\nProcessor Version: PV_7_Compat\nNumber Of Processors: 0\nProcessor Clock Speed: Not Available\nCPU Type: 64-bit\nKernel Type: 64-bit\nMemory Size: 10240 MB\nGood Memory Size: Not Available\nPlatform Firmware level: Not Available\nFirmware Version: IBM,AL770_092\nConsole Login: disable\nAuto Restart: true\nFull Core: false\n</code></pre>\n"}, {"tags": ["c", "ipc"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 1, "creation_date": 1478106979, "post_id": 40385737, "comment_id": 68023619, "body": "why are you scanf then getchar()? Look into using fgets?"}, {"owner": {"reputation": 196, "user_id": 6850808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dd4c1f4e8a4910c3d1e3c919513b129d?s=128&d=identicon&r=PG&f=1", "display_name": "ColdSpike", "link": "https://stackoverflow.com/users/6850808/coldspike"}, "reply_to_user": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1478108351, "post_id": 40385737, "comment_id": 68024413, "body": "but that should not be a problem i guess. I tried copy pasting and running the code at    <a href=\"http://simplestcodings.blogspot.in/2010/08/ipc-message-queue-implementation-in-c.html\" rel=\"nofollow noreferrer\">simplestcodings.blogspot.in/2010/08/&hellip;</a>     this works properly. But my program does not work?"}], "answers": [{"comments": [{"owner": {"reputation": 196, "user_id": 6850808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dd4c1f4e8a4910c3d1e3c919513b129d?s=128&d=identicon&r=PG&f=1", "display_name": "ColdSpike", "link": "https://stackoverflow.com/users/6850808/coldspike"}, "edited": false, "score": 0, "creation_date": 1478112533, "post_id": 40386946, "comment_id": 68026828, "body": "it says &quot;invalid argument&quot; . i searched for the solution but i do not have that kind of problem. Like my size is good...message i enterd is less than 1024. my mtype = 1 which is positive. And the sizeof(snd.mtext) is also not wrong.  Now what is the problem?"}, {"owner": {"reputation": 196, "user_id": 6850808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dd4c1f4e8a4910c3d1e3c919513b129d?s=128&d=identicon&r=PG&f=1", "display_name": "ColdSpike", "link": "https://stackoverflow.com/users/6850808/coldspike"}, "edited": false, "score": 0, "creation_date": 1478112703, "post_id": 40386946, "comment_id": 68026930, "body": "The problem that i am facing is when i try to run a similar program it works. but this program is not working. This program works fine when i run it <a href=\"http://simplestcodings.blogspot.in/2010/08/ipc-message-queue-implementation-in-c.html\" rel=\"nofollow noreferrer\">simplestcodings.blogspot.in/2010/08/&hellip;</a>  and another program which i wrote myself is also working. Why not this one?"}], "tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": true, "score": 0, "last_activity_date": 1478116061, "last_edit_date": 1478116061, "creation_date": 1478110367, "answer_id": 40386946, "question_id": 40385737, "link": "https://stackoverflow.com/questions/40385737/ipc-queue-msgsnd-error/40386946#40386946", "title": "IPC Queue msgsnd error", "body": "<blockquote>\n  <p>What have i done wrong?</p>\n</blockquote>\n\n<p>You check the return code of <code>msgsnd</code>, which is good, and this means, you're already ahead of many programmers. But you haven't read the whole manual of <a href=\"http://man7.org/linux/man-pages/man2/msgsnd.2.html\" rel=\"nofollow noreferrer\"><code>msgsnd</code></a>, which states</p>\n\n<blockquote>\n  <p><strong>RETURN VALUE</strong><br>\n  On failure both functions return -1 with <em>errno</em> indicating the error,</p>\n</blockquote>\n\n<p>where <a href=\"http://man7.org/linux/man-pages/man3/errno.3.html\" rel=\"nofollow noreferrer\"><code>errno</code></a> is the important part.</p>\n\n<p>When you look further, there's also a section named ERRORS, which shows what might go wrong</p>\n\n<blockquote>\n  <p><strong>ERRORS</strong><br>\n         When msgsnd() fails, errno will be set to one among the following\n         values:  </p>\n\n<pre><code>  EACCES The calling process does not have write permission on the\n          message queue, and does not have the CAP_IPC_OWNER capability.  \n\n  EAGAIN The message can't be sent due to the msg_qbytes limit for the\n          queue and IPC_NOWAIT was specified in msgflg.\n</code></pre>\n  \n  <p>...</p>\n</blockquote>\n\n<p>And still further down, you will find an example section</p>\n\n<blockquote>\n  <p><strong>EXAMPLE</strong>  </p>\n\n<pre><code>  The program below demonstrates the use of msgsnd() and msgrcv().  \n</code></pre>\n  \n  <p>...</p>\n</blockquote>\n\n<p>Where the usage of <code>msgsnd</code> shows an important idiom: when an error occurs and the specific error is reported in <code>errno</code>, this error may be printed by <a href=\"http://man7.org/linux/man-pages/man3/perror.3.html\" rel=\"nofollow noreferrer\"><code>perror</code></a></p>\n\n<pre><code>if (msgsnd(qid, (void *) &amp;msg, sizeof(msg.mtext),\n           IPC_NOWAIT) == -1) {\n    perror(\"msgsnd error\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p><code>perror</code> will show a message detailing what went wrong with the call to <code>msgsnd</code>. This can also be used with any other system call.</p>\n\n<hr>\n\n<p>According to the manual \"Invalid argument\" (<code>EINVAL</code>) means one of </p>\n\n<blockquote>\n  <p>EINVAL msqid was invalid, or msgsz was less than 0.<br>\n  EINVAL (since Linux 3.14) msgflg specified MSG_COPY, but not IPC_NOWAIT.<br>\n  EINVAL (since Linux 3.14) msgflg specified both MSG_COPY and MSG_EXCEPT.</p>\n</blockquote>\n\n<p>Since you don't specify <code>MSG_COPY</code>, the error must be the first one.</p>\n\n<ul>\n<li><code>msgsz</code> is definitely greater than 0</li>\n<li>So it must be an invalid msqid!</li>\n</ul>\n\n<p>When you look at </p>\n\n<pre><code>if(id = msgget(1234, IPC_CREAT | 0666) &lt; 0)\n</code></pre>\n\n<p>you see the missing parentheses around <code>(id = msgget(...))</code>. Most likely <code>msgget</code> returns a value > 0, so <code>msgget(...) &lt; 0</code> is false, id will become 0 (false), and the else branch is taken.</p>\n\n<p>As a consequence, calling <code>msgsnd(0, ...)</code> is most likely the culprit and source of the error.</p>\n\n<hr>\n\n<p>To fix this, be explicit</p>\n\n<pre><code>id = msgget(1234, IPC_CREAT | 0666);\nif (id &lt; 0) {\n...\n} else {\n...\n}\n</code></pre>\n\n<p>or put at least parentheses around the assignment</p>\n\n<pre><code>if ((id = msgget(1234, IPC_CREAT | 0666)) &lt; 0) {\n</code></pre>\n"}], "owner": {"reputation": 196, "user_id": 6850808, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dd4c1f4e8a4910c3d1e3c919513b129d?s=128&d=identicon&r=PG&f=1", "display_name": "ColdSpike", "link": "https://stackoverflow.com/users/6850808/coldspike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2220, "favorite_count": 0, "accepted_answer_id": 40386946, "answer_count": 1, "score": 1, "last_activity_date": 1478116061, "creation_date": 1478106442, "question_id": 40385737, "link": "https://stackoverflow.com/questions/40385737/ipc-queue-msgsnd-error", "title": "IPC Queue msgsnd error", "body": "<p>This is a simple program to send msg to queue but it gives \"snd error\" as the output.\nthe queue is created. I checked with ipcs -q.\nWhat have i done wrong?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/ipc.h&gt;\n#include&lt;sys/msg.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;stdlib.h&gt;\nstruct msg{\nint mtype;\nchar mtext[1024];\n\n}snd;\nvoid main()\n{\nint id;\nif(id=msgget(1234,IPC_CREAT|0666)&lt;0)\n{\n    printf(\"ipc error\");\n}\nelse{\n    snd.mtype=1;\n    scanf(\"%[^\\n]\",snd.mtext);\n    getchar();\n\n    if(msgsnd(id,&amp;snd,sizeof(snd.mtext),IPC_NOWAIT)&lt;0){\n            printf(\"snd error\");\n    }\n    else {\n        printf(\"msg snd\");\n    }\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "memory"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 5, "creation_date": 1478105331, "post_id": 40385270, "comment_id": 68022557, "body": "Don&#39;t confuse the size of a pointer to something with the size of that something. (I&#39;m certain that the address of your home \u2013 a few dozen characters, possibly \u2013 is much smaller than your home.)"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106087, "post_id": 40385270, "comment_id": 68023054, "body": "Note that assuming a pointer-to-anything fits into an <code>unsigned int</code> is not a conforming assumption. If you have to store a pointer into an integer, use <code>intptr_t</code> or <code>uintptr_t</code>. And even that is strictly valid only for <code>void *</code>..."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1478106658, "post_id": 40385270, "comment_id": 68023401, "body": "addresses don&#39;t have to be 32 bits. It can be 8, 16, 20, 24, 48 or 64 bits"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1478110526, "post_id": 40385270, "comment_id": 68025729, "body": "...though if you have 8-bit pointers, you have only 256 memory locations, and you probably shouldn&#39;t be using C. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1478105309, "creation_date": 1478105309, "answer_id": 40385364, "question_id": 40385270, "link": "https://stackoverflow.com/questions/40385270/c-program-can-uint8-t-point-to-an-address-of-size-32-bit/40385364#40385364", "title": "c program can `uint8_t` point to an address of size 32 bit", "body": "<p>It returns a pointer <em>to</em> a value of type <code>uint8_t</code>; this says nothing about the <em>size</em> of the pointer itself.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 2, "last_activity_date": 1478106384, "last_edit_date": 1478106384, "creation_date": 1478105830, "answer_id": 40385545, "question_id": 40385270, "link": "https://stackoverflow.com/questions/40385270/c-program-can-uint8-t-point-to-an-address-of-size-32-bit/40385545#40385545", "title": "c program can `uint8_t` point to an address of size 32 bit", "body": "<p>An <code>uint8_t</code> cannot point anywhere, because it's not a pointer. But an <code>uint_8*</code> (pointer to <code>uint8_t</code>) can.</p>\n\n<p>You probably want this:</p>\n\n<pre><code>uint8_t* get_pic(int *piclen);\n\nmain() {\n  uint8_t *address;\n  int value;\n\n  address = get_pic(&amp;value);\n}\n</code></pre>\n\n<p><code>get_pic</code> returns a <code>uint8_t *</code>, that is a <em>pointer</em> to <code>uint8_t</code>), therefore the type of <code>address</code> should <code>uint8_t *</code>.</p>\n\n<p>The parameter passed to <code>getpic</code> is of type pointer to <code>int</code> (<code>int*</code>), therefore <code>value</code> should be of type <code>int*</code> too.</p>\n"}, {"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106158, "post_id": 40385639, "comment_id": 68023089, "body": "<code>sizeof</code> is a compile-time operator, and <code>$anything</code> looks... strange... in a C context."}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106221, "post_id": 40385639, "comment_id": 68023131, "body": "I know, I still like to write <code>sizeof(stuff)</code> instead of <code>sizeof stuff</code>."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106263, "post_id": 40385639, "comment_id": 68023156, "body": "More as in, how do you figure a compile-time operator could have a non-constant result?"}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106272, "post_id": 40385639, "comment_id": 68023164, "body": "That is meta speaking and makes clear, that anything may belong there."}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106361, "post_id": 40385639, "comment_id": 68023214, "body": "Where do I state or suggest, <code>sizeof</code> may return run time variable results? BTW: It can: <code>int dynamic[num]; size_t num_dependant = sizeof dynamic;</code>"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106454, "post_id": 40385639, "comment_id": 68023276, "body": "How do you figure <code>get_pic()</code> returns a pointer to <code>uint32_t</code> data when it is <i>declared</i> to return <code>uint8_t *</code>? How do you figure it&#39;s safe to cast the latter to the former? Sorry, this answer is all over the place..."}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478106748, "post_id": 40385639, "comment_id": 68023469, "body": "What part of &quot;If that data is uint32_t&quot; didn&#39;t you understand? uint32_t is defined to be 32 bit unsigned without padding, uint8_t is defined to be 8 bit unsigned without padding, so casting between them is well defined."}, {"owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1478107305, "post_id": 40385639, "comment_id": 68023811, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/127204/discussion-between-bodo-thiesen-and-devsolar\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2333, "user_id": 2179300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0e07c421cc157c2187549c5f0154226d?s=128&d=identicon&r=PG", "display_name": "Bodo Thiesen", "link": "https://stackoverflow.com/users/2179300/bodo-thiesen"}, "is_accepted": false, "score": -1, "last_activity_date": 1478107272, "last_edit_date": 1478107272, "creation_date": 1478106123, "answer_id": 40385639, "question_id": 40385270, "link": "https://stackoverflow.com/questions/40385270/c-program-can-uint8-t-point-to-an-address-of-size-32-bit/40385639#40385639", "title": "c program can `uint8_t` point to an address of size 32 bit", "body": "<p>The size of the pointer has nothing to do with the size of the object, it points to. So, in fact, for most (aka. almost all) implementations, <code>sizeof($anything *)</code> is constant (for any <code>$anything</code> not being a function).</p>\n\n<p>So <code>sizeof(uint8_t _*) == sizeof(uint32_t *) == sizeof(unsigned int *) == sizeof(struct foo *)</code>.</p>\n\n<pre><code>uint8_t * get_pic(int * piclen);\n</code></pre>\n\n<p>This returns a pointer to some data. If that data is <code>uint32_t</code>, then it's save to assign it to a <code>uint32_t *</code>, no cast needed in C (but compilers may warn):</p>\n\n<pre><code>int len;\nuint32_t * address = get_pic(&amp;len);\n</code></pre>\n\n<p>and then, you can access it using standard syntax.</p>\n\n<p>Also note Michael Walzs answer, he wrote in parallel to me ;)</p>\n"}], "owner": {"reputation": 81, "user_id": 6931518, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/8f541966eda1278f7eeed043c243b7ce?s=128&d=identicon&r=PG&f=1", "display_name": "logitech mouse", "link": "https://stackoverflow.com/users/6931518/logitech-mouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1669, "favorite_count": 0, "accepted_answer_id": 40385545, "answer_count": 3, "score": 1, "last_activity_date": 1478107272, "creation_date": 1478104973, "last_edit_date": 1478105839, "question_id": 40385270, "link": "https://stackoverflow.com/questions/40385270/c-program-can-uint8-t-point-to-an-address-of-size-32-bit", "title": "c program can `uint8_t` point to an address of size 32 bit", "body": "<p>In the code below <code>get_pic()</code> returns a pointer of <code>uint8_t type</code>.</p>\n\n<p>Then in <code>main()</code>, <code>get_pic()</code> is called and its return value is cast to the variable <code>address</code> which is an <code>unsigned int</code>.</p>\n\n<p>The pointer that <code>get_pic()</code> returns is to a global array which turns out to be at address <code>a8000f80</code>.</p>\n\n<p>My question is that address <code>a8000f80</code> is a 32 bit number. Therefore, how can the pointer returned by <code>get_pic()</code> point at this address as it is of type <code>uint8_t</code> which is only 8 bits?  </p>\n\n<pre><code>//Function declaration\nuint8_t* get_pic(int *piclen);\n\nmain() {\n\n  unsigned int address, value;\n  address = (unsigned int) get_pic((int*)&amp; value);\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "pipe", "piping"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478103986, "post_id": 40384915, "comment_id": 68021752, "body": "These are terminal control characters. Do you know what <code>-e</code> option does? Why are you using it at all?"}, {"owner": {"reputation": 29, "user_id": 6864789, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210803011975462/picture?type=large", "display_name": "Zethir", "link": "https://stackoverflow.com/users/6864789/zethir"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1478104108, "post_id": 40384915, "comment_id": 68021833, "body": "I&#39;m writing my shell with c. ^^ And yes, I know what cat -e does, the problem doesn&#39;t from the command cat -e but when I&#39;m writing in the pipe."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478104111, "post_id": 40384915, "comment_id": 68021837, "body": "Please ignore my previous comment. I misread this post."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1478104123, "post_id": 40384915, "comment_id": 68021849, "body": "I rolled back the change."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1478104150, "post_id": 40384915, "comment_id": 68021873, "body": "Maybe your shell has nothing to do with it. Have you tried to run these commands in a standard shell?"}, {"owner": {"reputation": 29, "user_id": 6864789, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210803011975462/picture?type=large", "display_name": "Zethir", "link": "https://stackoverflow.com/users/6864789/zethir"}, "edited": false, "score": 0, "creation_date": 1478104376, "post_id": 40384915, "comment_id": 68021997, "body": "Yes, I tried and it doesn&#39;t do that. And tried with the shells of my friends and it doesn&#39;t do that to their shell either. I tried on zsh, sh, bash, csh. I&#39;m just writing special character in the pipe at the beginning and I don&#39;t know why."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1478104593, "post_id": 40384915, "comment_id": 68022118, "body": "Probably you will have to show your code"}, {"owner": {"reputation": 29, "user_id": 6864789, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210803011975462/picture?type=large", "display_name": "Zethir", "link": "https://stackoverflow.com/users/6864789/zethir"}, "edited": false, "score": 0, "creation_date": 1478104998, "post_id": 40384915, "comment_id": 68022362, "body": "I edited my post, tell me if you need more explanations."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1478105046, "post_id": 40384915, "comment_id": 68022395, "body": "<code>ls</code> is hazardous: it has numerous options that could throw off your behavior; if you had environment variables enabling <code>--color-always</code> or similar. See <a href=\"http://mywiki.wooledge.org/ParsingLs\" rel=\"nofollow noreferrer\">ParsingLs</a>, and use <code>printf &#39;%s\\n&#39; * | cat -e</code> instead of <code>ls | cat -e</code> to have more reliable results."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1478105235, "post_id": 40384915, "comment_id": 68022490, "body": "BTW, the &quot;shell&quot; tag here is generally for questions about POSIX sh and shells derivative of same. Knowledge of such shells -- even their implementation -- is of no use or import to this question; thus, you might consider tagging more restrictively."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1478105337, "post_id": 40384915, "comment_id": 68022566, "body": "(I&#39;d suggest using <code>strace</code> or <code>sysdig</code> to trace execution and look at exactly which process is writing the content you don&#39;t want; if it happens before the <code>execv</code>-family call that switches the active process over to your own code to <code>ls</code>, for instance, then that would put it squarely on your head; whereas if it&#39;s written by <code>ls</code>, then that provides a place to focus)."}, {"owner": {"reputation": 29, "user_id": 6864789, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210803011975462/picture?type=large", "display_name": "Zethir", "link": "https://stackoverflow.com/users/6864789/zethir"}, "edited": false, "score": 0, "creation_date": 1478105685, "post_id": 40384915, "comment_id": 68022766, "body": "I know It comes from ls. I redirected the output on a file, exited my shell and did a cat -e, on zsh, of the file and the result is the same (weird character popping). But I think you must close to the truth about ls and the colors. It musts print the colors of the binary (because 42sh is the binary of my shell) in the pipe. Thank you for your answer !"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1478105878, "post_id": 40384915, "comment_id": 68022910, "body": "This is printed by ls, or by your shell, or by some other code being executed by the shell (like a prompt command). There is no other possibility. The code means &quot;make cursor visibility normal&quot;. ls normally shouldn&#39;t print it, unless it is set up in some way I&#39;m not familiar with, so you should debug your shell. If it plays with ncurses or terminfo, look at code which is doing that."}, {"owner": {"reputation": 29, "user_id": 6864789, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210803011975462/picture?type=large", "display_name": "Zethir", "link": "https://stackoverflow.com/users/6864789/zethir"}, "edited": false, "score": 0, "creation_date": 1478106051, "post_id": 40384915, "comment_id": 68023021, "body": "Oh n.m you might have resolved my problem. I use termcaps and I hide the cursor and create my own cursor because reasons."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1478106611, "post_id": 40384915, "comment_id": 68023369, "body": "This also probably means you are not doing redirects correctly. The pipe should see what ls is writing, not what your shell is writing. Don&#39;t do redirect-fork-exec-redirectback, do fork-redirect-exec."}, {"owner": {"reputation": 29, "user_id": 6864789, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210803011975462/picture?type=large", "display_name": "Zethir", "link": "https://stackoverflow.com/users/6864789/zethir"}, "edited": false, "score": 0, "creation_date": 1478107446, "post_id": 40384915, "comment_id": 68023897, "body": "Thank you all for your answers, n.m you were right the problem came from the termcaps and the cursor. I fixed it, and it&#39;s all good and beautiful !"}], "owner": {"reputation": 29, "user_id": 6864789, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210803011975462/picture?type=large", "display_name": "Zethir", "link": "https://stackoverflow.com/users/6864789/zethir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478104903, "creation_date": 1478103861, "last_edit_date": 1478104903, "question_id": 40384915, "link": "https://stackoverflow.com/questions/40384915/writing-weird-character-in-pipe-when-executing-a-command-in-it", "title": "Writing weird character in pipe when executing a command in it", "body": "<p>So my title might not make sense, but here's my problem:</p>\n\n<p>I'm writing a shell and I have to deal the pipe of course. They work, the multi piping is good, there is no overflow, but there is one problem, when I execute a command in the writing extremity of the pipe, it always writes weird character in it that I can only see when I read it with \"cat -e\".</p>\n\n<p>Here's the command line I type:</p>\n\n<pre><code>$&gt; ls | cat -e\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>^[[?12l^[[?25h42sh$\n42sh.dSYM$\nMakefile$\nauteur$\ninclude$\nlibft$\nsrc$\n</code></pre>\n\n<p>And here's the output without the option -e:</p>\n\n<pre><code>42sh$\n42sh.dSYM$\nMakefile$\nauteur$\ninclude$\nlibft$\nsrc$\n</code></pre>\n\n<p>Anyone has any idea where that could come from?</p>\n\n<p>Thanks</p>\n\n<p>EDIT: here's the function where I pipe:</p>\n\n<pre><code>static void     launch_process(t_shell *sh, t_job *job)\n{\n    t_process   *process;\n    int         iofile[2];\n    int         pipefd[2];\n    int         i;\n\n    process = job-&gt;process;\n    iofile[0] = 0;\n    i = get_num_process(job-&gt;process);\n    while (job-&gt;process)\n    {\n        if (job-&gt;process-&gt;next)\n        {\n            pipe(pipefd);\n            iofile[1] = pipefd[1];\n        }\n        else\n            iofile[1] = 1;\n        exec_process(sh, job, iofile);\n        iofile[0] = pipefd[0];\n        job-&gt;process = job-&gt;process-&gt;next;\n    }\n    job-&gt;process = process;\n    wait_for_job(job, i);\n}\n</code></pre>\n\n<p>So basically, I have my list of process, which are in this case ls and cat, that I execute on after an other.</p>\n"}, {"tags": ["c", "recursion"], "answers": [{"comments": [{"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 2, "creation_date": 1478103398, "post_id": 40384687, "comment_id": 68021387, "body": "As an addition to the good answer, just to note that <i>&quot;The last base-10 digit of x&quot;</i> is also called the <i>&quot;least significant digit&quot;</i>."}, {"owner": {"reputation": 143, "user_id": 4431371, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/abc3368c1386266fb5e477c3fb9ae3ac?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Wendel", "link": "https://stackoverflow.com/users/4431371/michael-wendel"}, "edited": false, "score": 0, "creation_date": 1478104339, "post_id": 40384687, "comment_id": 68021979, "body": "Thank you for the hint.  That&#39;s the method my partners and I have thought of, we just can&#39;t seem to convert it into code."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 143, "user_id": 4431371, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/abc3368c1386266fb5e477c3fb9ae3ac?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Wendel", "link": "https://stackoverflow.com/users/4431371/michael-wendel"}, "edited": false, "score": 0, "creation_date": 1478109443, "post_id": 40384687, "comment_id": 68025048, "body": "@MichaelWendel: OK, I&#39;ve posted a more explicit solution.  Can you see how to do the rest now?"}, {"owner": {"reputation": 143, "user_id": 4431371, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/abc3368c1386266fb5e477c3fb9ae3ac?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Wendel", "link": "https://stackoverflow.com/users/4431371/michael-wendel"}, "edited": false, "score": 0, "creation_date": 1478112437, "post_id": 40384687, "comment_id": 68026785, "body": "That makes so much sense.  Thank you!"}], "tags": [], "owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "is_accepted": true, "score": 4, "last_activity_date": 1478109223, "last_edit_date": 1478109223, "creation_date": 1478103213, "answer_id": 40384687, "question_id": 40384582, "link": "https://stackoverflow.com/questions/40384582/how-to-check-for-digits-that-are-the-same-in-an-integer-without-using-arrays/40384687#40384687", "title": "How to check for digits that are the same in an integer without using arrays?", "body": "<p>Since this is an assignment that you're presumably meant to solve on your own, let me just give a hint to get you on the right track:</p>\n\n<ul>\n<li>If <code>x</code> is an integer variable, then:\n\n<ul>\n<li><code>x % 10</code> gives you the last base-10 digit of <code>x</code>, and</li>\n<li><code>x = x / 10</code> chops off the last digit of <code>x</code>.</li>\n</ul></li>\n</ul>\n\n<p>Also note that you can save the last digit of <code>x</code> in another variable before you chop it off. In fact, you can easily save the two (or more!) most recently chopped-off digits this way, just by having one variable for each of them.</p>\n\n<p>If that's not a sufficient hint, let me know where you're still stuck and I'll try to give a bit more help.</p>\n\n<hr>\n\n<p>OK, since you say you're still stuck, let me show you how I'd solve the problem:</p>\n\n<pre><code>int pairs = 0, triples = 0;\nint digit1 = -1, digit2 = -1, digit3 = -1;  // no actual digit can be -1\n\nwhile (x &gt; 0) {\n    // keep track of the last three digits chopped off\n    digit3 = digit2;\n    digit2 = digit1;\n    digit1 = x % 10;\n\n    // chop off the last digit of x\n    x /= 10;\n\n    // check whether we've just chopped off a pair or a triple\n    if (digit1 == digit2) {\n        pairs++;\n        if (digit2 == digit3) {\n            triples++;\n        }\n    }\n\n    // uncomment these lines for debugging output:\n    // fprintf(stderr, \"x = %d, digit(1-3) = %d, %d, %d; %d pairs and %d triples seen\\n\",\n    //         x, digit1, digit2, digit3, pairs, triples);\n}\n</code></pre>\n\n<p>As an exercise, you may want to run this code for various values of <code>x</code>, and either step through the loop in a debugger (recommended!) or uncomment the <code>fprintf()</code> call to see how the variables change on each iteration.</p>\n\n<p>Once you've done that, I believe you should be able to easily fill in the rest of the assignment.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 5493710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bc033327e1c67ae70f8078c706c06a8?s=128&d=identicon&r=PG", "display_name": "Paul Mira", "link": "https://stackoverflow.com/users/5493710/paul-mira"}, "is_accepted": false, "score": 0, "last_activity_date": 1478131723, "creation_date": 1478131723, "answer_id": 40391828, "question_id": 40384582, "link": "https://stackoverflow.com/questions/40384582/how-to-check-for-digits-that-are-the-same-in-an-integer-without-using-arrays/40391828#40391828", "title": "How to check for digits that are the same in an integer without using arrays?", "body": "<p>For what it's worth, the following method will return 1(true) if the user-given integer has exactly 1 pair of same adjacent digits, 0(false) otherwise : </p>\n\n<pre><code> public int checkSame(int startValue)\n {\n    int sameAdjacent = 0;\n    int last,pre_last;\n    while(startValue &gt; 0)\n    {\n        last = startValue % 10;\n        pre_last = (startValue / 10) % 10;\n        if(last == pre_last)\n            sameAdjacent++;\n        startValue/=10;\n    }\n    return sameAdjacent == 1 ? 1 : 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 4431371, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/abc3368c1386266fb5e477c3fb9ae3ac?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Wendel", "link": "https://stackoverflow.com/users/4431371/michael-wendel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 40384687, "answer_count": 2, "score": 1, "last_activity_date": 1478131723, "creation_date": 1478102899, "question_id": 40384582, "link": "https://stackoverflow.com/questions/40384582/how-to-check-for-digits-that-are-the-same-in-an-integer-without-using-arrays", "title": "How to check for digits that are the same in an integer without using arrays?", "body": "<p>I'm trying to write a simple C program that generates 1 of 3 cases:</p>\n\n<ol>\n<li>An integer with no adjacent digits the same.</li>\n<li>An integer with a single pair of same adjacent digits.</li>\n<li>An integer with a single trio of same adjacent digits.  </li>\n</ol>\n\n<p>After the integer value does not meet the requirements of any one of the cases, the integer will be incremented by 1 and then checked again.  </p>\n\n<p>Conditions: The user with enter an option between 1-3, the starting integer value is a non-negative integer, and the generated value is larger than the starting integer value entered by the user.  </p>\n\n<p>NOTE: I may not use a method involving an array or string.  Recursion is allowed however my professor discourages its use.  </p>\n\n<p>My current issue is determining how to compare the digits in the entered integer value without creating a new variable for each one.  Here's what I have so far:</p>\n\n<pre><code>int getOption()  //retrieves the option entered by the user\n{\n  int option;\n  do\n  {\n    printf(\"\\nEnter desired option: \");\n    scanf(\"%d\", &amp;option);\n    if (option &lt;= 0 || option &gt; 3)\n    {\n      printf(\"\\nError! Invalid option selected!!\\n\");\n    }\n  }while(option &lt;= 0 || option &gt; 3);\n  return(option);\n}\n\nint getStart() //retrieves the starting integer value entered by the user\n{\n  int startValue;\n  do\n  {\n    printf(\"\\nEnter starting integer: \");\n    scanf(\"%d\", &amp;startValue);\n    if (startValue &lt;= 0)\n    {\n      printf(\"\\nError! Non-negative values only!!\\n\");\n    }\n  }while(startValue &lt;= 0);\n  return(startValue);\n}\n\nint checkSame(int startValue);  //checks if the user-given integer has any pairs of same adjecent digits.\n{\n int counter;\n int sameAdjacent = 0;\n while (sameAdjacent &lt; 1)\n {\n   while(startValue &gt; 0)\n   {\n     startValue = startValue % 10;\n     counter++;\n   }\n   for(startValue; startValue &gt; 0; startValue / 10)\n   {\n     //?????\n\n   }\n\n\n  }\n }\n</code></pre>\n\n<p>Here's some examples of what a proper execution looks like:</p>\n\n<pre><code>1. No adjacent digits the same.\n2. A single pair of adjacent digits the same.\n3. A single trio of adjacent digits the same.\nEnter desired option: 1\nEnter starting integer: 1222\nNext larger value with no two adjacent digits the same is 1230.\n\n1. No adjacent digits the same.\n2. A single pair of adjacent digits the same.\n3. A single trio of adjacent digits the same.\nEnter desired option: 2\nEnter starting integer: 133300\nNext larger value with only a single pair of digits the same is 133401.\n\n1. No adjacent digits the same.\n2. A single pair of adjacent digits the same.\n3. A single trio of adjacent digits the same.\nEnter desired option: 3\nEnter starting integer: 123456\nNext larger value with only a single trio of digits the same is 123555.\n</code></pre>\n\n<p>Any help is appreciated.  Thank you!  </p>\n"}, {"tags": ["c", "stdout", "stdin", "stderr"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1478102655, "post_id": 40384481, "comment_id": 68020947, "body": "So which part of this macro are you having trouble understanding?"}, {"owner": {"reputation": 103, "user_id": 6023976, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7e3f9e74beb842ef13e92ab8ab51893e?s=128&d=identicon&r=PG&f=1", "display_name": "hegendroffer", "link": "https://stackoverflow.com/users/6023976/hegendroffer"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1478102849, "post_id": 40384481, "comment_id": 68021059, "body": "all the macro I do not understand. I am very novice in C. I do not know what is ERR, then the next part (perror(source.... ) then I do not know why there is backslash, then <b>FILE</b>,<b>LINE</b> is hard for me to understand"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1478102948, "post_id": 40384481, "comment_id": 68021121, "body": "<code>ERR</code> is the name of the macro (this is what the code is defining), <code>perror</code>, <code>fprintf</code> and all the other things are part of the C standard libraries, you can find their definitions online. And the backslash simply means the macro definition continues on the next line (so you don&#39;t have to cramp everything into a single line)"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1478103544, "post_id": 40384481, "comment_id": 68021484, "body": "@hegendroffer: <code>__FILE__</code> and <code>__LINE__</code> are macro&#39;s that will expand to the current file/translation unit, and the current line number. As a quick <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html\" rel=\"nofollow noreferrer\">goolge search would&#39;ve told you</a>"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6023976, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7e3f9e74beb842ef13e92ab8ab51893e?s=128&d=identicon&r=PG&f=1", "display_name": "hegendroffer", "link": "https://stackoverflow.com/users/6023976/hegendroffer"}, "edited": false, "score": 0, "creation_date": 1478105808, "post_id": 40384648, "comment_id": 68022869, "body": "Thank you, I understood everything :)"}], "tags": [], "owner": {"reputation": 30796, "user_id": 1145666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rXvMA.jpg?s=128&g=1", "display_name": "Bart Friederichs", "link": "https://stackoverflow.com/users/1145666/bart-friederichs"}, "is_accepted": true, "score": 3, "last_activity_date": 1478103106, "creation_date": 1478103106, "answer_id": 40384648, "question_id": 40384481, "link": "https://stackoverflow.com/questions/40384481/a-complicated-syntax-over-preprocessor-in-c/40384648#40384648", "title": "A complicated syntax over preprocessor in C", "body": "<p>The backslash in the macro means you can read the next line as if it is one line, so it boils down to this:</p>\n\n<pre><code> #define ERR(source) (perror(source), fprintf(stderr,\"s:%d\\n\",__FILE__,__LINE__), exit(EXIT_FAILURE))\n</code></pre>\n\n<p>A <code>#define</code> preprocessor statement is used to replace code with other code, for example</p>\n\n<pre><code>#define SOMECONSTANT 5\n</code></pre>\n\n<p>will replace <code>SOMECONSTANT</code> in your code with <code>5</code>, before compiling the code. The preprocessor also understands function-like syntax, which is what you have here.</p>\n\n<p>Your macro results in the following main body:</p>\n\n<pre><code>int main(int argc, char** argv) {\n    char name[22];\n    scanf(\"%21s\",name);\n    if(strlen(name)&gt;20) (perror(\"Name too long\"), fprintf(stderr,\"s:%d\\n\",__FILE__,__LINE__), exit(EXIT_FAILURE));\n    printf(\"Hello %s\\n\",name);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>The macro in your case uses the comma-operator to put a few statements together, so you can use it as one statement. Usually, your code would be written as:</p>\n\n<pre><code>int main(int argc, char** argv) {\n    char name[22];\n    scanf(\"%21s\",name);\n    if(strlen(name)&gt;20) {\n          perror(\"Name too long\");\n          fprintf(stderr,\"s:%d\\n\",__FILE__,__LINE__);\n          exit(EXIT_FAILURE);\n    }\n    printf(\"Hello %s\\n\",name);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Hopefully you understand what is going on now.</p>\n"}], "owner": {"reputation": 103, "user_id": 6023976, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7e3f9e74beb842ef13e92ab8ab51893e?s=128&d=identicon&r=PG&f=1", "display_name": "hegendroffer", "link": "https://stackoverflow.com/users/6023976/hegendroffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 40384648, "answer_count": 1, "score": 1, "last_activity_date": 1478103106, "creation_date": 1478102580, "question_id": 40384481, "link": "https://stackoverflow.com/questions/40384481/a-complicated-syntax-over-preprocessor-in-c", "title": "A complicated syntax over preprocessor in C", "body": "<p>I am trying to figure out code in C and I am stuck at trying to understand what the part of preprocessor actually does. The part of code I do not understand is following:</p>\n\n<pre><code>#define ERR(source) (perror(source),\\\n         fprintf(stderr,\"%s:%d\\n\",__FILE__,__LINE__),\\\n         exit(EXIT_FAILURE))\n</code></pre>\n\n<p>whole code is very short, and looks as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define ERR(source) (perror(source),\\\n             fprintf(stderr,\"%s:%d\\n\",__FILE__,__LINE__),\\\n             exit(EXIT_FAILURE))\n\nint main(int argc, char** argv) {\n    char name[22];\n    scanf(\"%21s\",name);\n    if(strlen(name)&gt;20) ERR(\"Name too long\");\n    printf(\"Hello %s\\n\",name);\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c", "linux-kernel", "embedded-linux", "cat", "spi"], "comments": [{"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 1, "creation_date": 1478102011, "post_id": 40384219, "comment_id": 68020493, "body": "You can see cat&#39;s source code, if that will be any help. Or at least the version of GNU cat available here - <a href=\"http://git.savannah.gnu.org/cgit/coreutils.git/plain/src/cat.c\" rel=\"nofollow noreferrer\">git.savannah.gnu.org/cgit/coreutils.git/plain/src/cat.c</a>. Of course, it would be best if you could examine the source of the specific version of <code>cat</code> for your linux version. Note they use <code>fdadvise (input_desc, 0, 0, FADVISE_SEQUENTIAL);</code>, maybe that is significant."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 6, "creation_date": 1478102322, "post_id": 40384219, "comment_id": 68020738, "body": "In case you are able to lock the entire kernel using your code, my guess is you are looking at the problem from the wrong side: You don&#39;t need to fix the application to work like <code>cat</code>, but rather your driver to not lock the machine."}, {"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1478102578, "post_id": 40384219, "comment_id": 68020901, "body": "Without knowing how your code is reading, and what the driver might be doing (as in handling for open, read, poll, etc.), it&#39;ll be difficult to help. and as @tofro said, userland programs shouldn&#39;t be able to lock up the kernel."}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1478103706, "post_id": 40384219, "comment_id": 68021593, "body": "Which <code>cat</code> are you comparing it to? There&#39;s many implementations. <a href=\"https://gist.github.com/pete/665971\" rel=\"nofollow noreferrer\">here&#39;s a couple</a>"}, {"owner": {"reputation": 85, "user_id": 3421124, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d35bbeee35b9d500bfe8252528af6565?s=128&d=identicon&r=PG&f=1", "display_name": "radiofreemyourenji", "link": "https://stackoverflow.com/users/3421124/radiofreemyourenji"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1478105988, "post_id": 40384219, "comment_id": 68022984, "body": "@tofro (and Hasturkun) - thanks, that&#39;s actually a very reasonable suggestion that I ovelooked. I&#39;d assumed that somehow what I was doing in userland was pushing the kernel into an undefined state, but that raises the question of why I let such a state exist to begin with. I&#39;ll start re-examining the kernel before looking too much more at cat."}, {"owner": {"reputation": 85, "user_id": 3421124, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d35bbeee35b9d500bfe8252528af6565?s=128&d=identicon&r=PG&f=1", "display_name": "radiofreemyourenji", "link": "https://stackoverflow.com/users/3421124/radiofreemyourenji"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1478106053, "post_id": 40384219, "comment_id": 68023024, "body": "@EliasVanOotegem - d&#39;oh, I foolishly assumed cat was monolithic. It&#39;s the BusyBox implementation. Thanks for the pointer!"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1478122609, "post_id": 40384219, "comment_id": 68032178, "body": "Wrt your second possibility: what magic language do you think <code>cat</code> is written in which unlocks features not available in C? :-) (As evident from the links, most <code>cat</code>s are C.)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478184715, "post_id": 40384219, "comment_id": 68059360, "body": "Well, <code>cat(1)</code> is actually written in C, so your assumption must be wrong.  And the major part of the kernel is also written in C, so it&#39;s difficult to imagine something hidden that cannot be made in C, but <code>cat(1)</code> solves quite elegantly."}, {"owner": {"reputation": 85, "user_id": 3421124, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d35bbeee35b9d500bfe8252528af6565?s=128&d=identicon&r=PG&f=1", "display_name": "radiofreemyourenji", "link": "https://stackoverflow.com/users/3421124/radiofreemyourenji"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1478264859, "post_id": 40384219, "comment_id": 68095166, "body": "@rici - Yeah I was pretty sure that cat was written in c, which is what was making the different behaviors so confusing. Like the previous commenters said, though, I probably want to write a driver that doesn&#39;t lock at all, rather than one that doesn&#39;t lock if I do something cat-like (whatever cat-like means)"}], "answers": [{"comments": [{"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478189041, "post_id": 40384658, "comment_id": 68062492, "body": "shouldn&#39;t it be better to look at the actual <code>cat(1)</code> source code?"}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "reply_to_user": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478704538, "post_id": 40384658, "comment_id": 68262413, "body": "If you look at the source code to <code>cat</code> you will see stuff lots of code that may not actually execute.  You&#39;ll have to sort through the decisions that that code makes to find out what it actually does.  Using <code>strace</code> you get to see just what actually happens without worrying about how <code>cat</code> decided that it would happen.  After viewing <code>strace</code> you might see some things that are puzzling and lead you to investigate the code, though."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478875313, "post_id": 40384658, "comment_id": 68338974, "body": "... but don&#39;t look at the gnu cat, which probably is far too complicated.  Look at the BSD cat, which probably is clearer.  FreeBSD cat is only one source file 362 lines long."}], "tags": [], "owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "is_accepted": false, "score": 0, "last_activity_date": 1478704583, "last_edit_date": 1478704583, "creation_date": 1478103132, "answer_id": 40384658, "question_id": 40384219, "link": "https://stackoverflow.com/questions/40384219/cat-vs-opening-a-readonly-file/40384658#40384658", "title": "cat vs. opening a readonly file", "body": "<p>You should try writing your own <code>cat</code>-like program to test out your open, read, and close code.  Then add the other processing to that program until something breaks.</p>\n\n<p>If you find that your <code>cat</code>-like program doesn't work then </p>\n\n<p>From a command line type:</p>\n\n<pre><code>strace -o spi_cat_trace.txt cat /dev/spidev1.0\nless spi_cat_trace.txt\n</code></pre>\n\n<p>and then try to work out how your <code>cat</code>-like program differs from what <code>cat</code> does in reading the file.</p>\n"}], "owner": {"reputation": 85, "user_id": 3421124, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d35bbeee35b9d500bfe8252528af6565?s=128&d=identicon&r=PG&f=1", "display_name": "radiofreemyourenji", "link": "https://stackoverflow.com/users/3421124/radiofreemyourenji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1478704583, "creation_date": 1478101843, "last_edit_date": 1478102039, "question_id": 40384219, "link": "https://stackoverflow.com/questions/40384219/cat-vs-opening-a-readonly-file", "title": "cat vs. opening a readonly file", "body": "<p>tl;dr - when I'm doing a cat of an infinitely long file, everything's great, but when I use C's \"open\" even without reading of the same file, everything fails. Why might that happen? How can I make it not happen?</p>\n\n<hr>\n\n<p>I'm developing on the Digi ME9210, which stars a small embedded linux O/S but has other useful things like an SPI driver.</p>\n\n<p>What I would like to do, ultimately, is to read an SPI device at a consistently-spaced 10k samples per second. The example SPI driver that came with the device offers the ability to do an SPI read from userland by use of the ioctl function. Unfortunately, when looking at the timing, the reads weren't consistent at all - usleep and other delay functions gave inconsistent results, and even if I just used a tight loop like <code>while (true) { sample_spi(); }</code>, the spacing was inconsistent. </p>\n\n<p>I decided to look into editing the kernel driver. I'm able to get a very reliable periodic interrupt by editing the proper registers, and I'm able to set up a routine so I get that sweet SPI reading on every interrupt. Great. For debugging purposes, I said \"I'll also just see if it can even run at 1kHz, rather than expecting the full 10kHZ\"</p>\n\n<p>In the shell, to check my timing, I ran</p>\n\n<p><code>cat /dev/spidev1.0</code></p>\n\n<p>which does an infinite read. The SPI reads come out looking mostly periodic, with an occasional slip (three or five ms rather than 1 ms). I assumed this was something to do with how the cat utility has to periodically dump to stream. So I wrote a small C program that looks like this:</p>\n\n<p><code>int f = open(\"/dev/spidev1.0\", O_RDONLY);\n// some time-wasting logic here\nclose(f);</code></p>\n\n<p>When I run that, I get maybe ten SPI reads, and then the whole Linux machine stops responding until I do a reset. </p>\n\n<p>What's up with this? Why does <code>cat</code>ting a file work when opening it leads to a freeze state? What is cat doing differently? I'd have assumed that cat looked a lot like \"open the file, read it, print it, and close it\". The C code is doing 50% of that, and not even the hard 50%. </p>\n\n<p>Things I've looked at</p>\n\n<ol>\n<li><strong>Maybe your interrupt isn't actually sustainable</strong> - if I just update a counter instead of performing an SPI read, the interrupt goes on forever very cheerfully.</li>\n<li><strong>Maybe C will just never work like cat</strong> - if I drop my interrupt speed to 20Hz, the C code and cat work just the same as each other.</li>\n<li><strong>Maybe cat is just perfect</strong> - if I boost my interrupt speed to 10kHz, cat will read for about 5ms before it freezes. The c code will do a few reads, with wildly different spacing, before freezing.</li>\n</ol>\n"}, {"tags": ["c", "compiler-errors", "syntax-error", "function-calls"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 3, "creation_date": 1478101343, "post_id": 40384026, "comment_id": 68019998, "body": "You don&#39;t need to pass the type of the parameter, <code>separate_digits (long int n);</code> --&gt; <code>separate_digits (n);</code>"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1478102470, "post_id": 40384026, "comment_id": 68020829, "body": "your <code>main</code> function is missing a return statement, and <code>int main()</code> is bad form, use <code>int main(void)</code> or <code>int main(int argc, char **argv)</code> instead"}], "answers": [{"tags": [], "owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "is_accepted": false, "score": 1, "last_activity_date": 1478101392, "creation_date": 1478101392, "answer_id": 40384064, "question_id": 40384026, "link": "https://stackoverflow.com/questions/40384026/c-i-keep-getting-errors-that-say-error-expected-expression/40384064#40384064", "title": "C: I keep getting errors that say error: expected expression", "body": "<p>You shouldn't be prepending your variables with a type name when you actually pass them to a function. </p>\n\n<p>That's only required in the <em>declarations</em> for those functions, as you've done near the top of the code.</p>\n"}, {"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1478101405, "creation_date": 1478101405, "answer_id": 40384069, "question_id": 40384026, "link": "https://stackoverflow.com/questions/40384026/c-i-keep-getting-errors-that-say-error-expected-expression/40384069#40384069", "title": "C: I keep getting errors that say error: expected expression", "body": "<p><code>separate_digits (long int n);</code> is not syntactically correct. This is confusing the compiler.</p>\n\n<p>Drop the <code>long int</code> to give <code>separate_digits (n);</code></p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1478101933, "last_edit_date": 1478101933, "creation_date": 1478101480, "answer_id": 40384093, "question_id": 40384026, "link": "https://stackoverflow.com/questions/40384026/c-i-keep-getting-errors-that-say-error-expected-expression/40384093#40384093", "title": "C: I keep getting errors that say error: expected expression", "body": "<p>The function call syntax only takes the variable name, not the type.</p>\n\n<pre><code>separate_digits (long int n);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>separate_digits (n);\n</code></pre>\n\n<p>Also, <code>print_array ( int a[10] );</code> is wrong, you only need to pass the array name to pass the array, like</p>\n\n<pre><code>  print_array ( a );\n</code></pre>\n\n<p>and so on.</p>\n\n<p>Related, quoting <code>C11</code>, chapter \u00a76.5.2.1, <em>Postfix operators</em>, function call syntax</p>\n\n<blockquote>\n  <p><em>postfix-expression ( argument-expression-list<sub>opt</sub> )</em></p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p><em>argument-expression-list:</em><br>\n  <em>assignment-expression</em><br>\n  <em>argument-expression-list , assignment-expression</em></p>\n</blockquote>\n\n<p>there, the <em>\"type\"</em> is not to be mentioned in argument list, it is</p>\n\n<blockquote>\n  <p>An argument may be an expression of any complete object type.</p>\n</blockquote>\n\n<p>In other words, each element in the <em>argument-expression-list</em> need to have a type which is not to be <em>written</em>. </p>\n"}], "owner": {"reputation": 3, "user_id": 7105469, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6b54f7ff1d395552894068c9972c4451?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah H.", "link": "https://stackoverflow.com/users/7105469/sarah-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1478102043, "creation_date": 1478101277, "last_edit_date": 1478102043, "question_id": 40384026, "link": "https://stackoverflow.com/questions/40384026/c-i-keep-getting-errors-that-say-error-expected-expression", "title": "C: I keep getting errors that say error: expected expression", "body": "<p>I keep getting five errors in my code that say error: expected expression when talking about the variables in my function. I have looked on this site and other places but I can't find what's wrong.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TRUE 1\n#define FALSE 0\n\nvoid separate_digits (long int n);\nvoid print_array ( int a[10] );\nint digits_different ( int a[10] );\nint divisible ( int a[10], int n );\n\nint main ()\n{\n    long int n;\n\nprintf(\"Enter a positive integer or 0 (zero) to end:\");\nscanf(\"%ld\\n\", &amp;n);\n\nwhile ( n != 0)\n{\n    if (n &lt; 0)\n    {\n        printf(\"Wrong input\\n\");\n    }\n\n    else\n    {\n        separate_digits (long int n);\n    }\n\n    printf(\"Enter a positive integer or 0 (zero) to end:\");\n    scanf(\"%ld\\n\", &amp;n);\n}\n\nprintf(\"*** Program Terminated ***\\n\");\n\n}\n\nvoid separate_digits (long int n)\n{\n    int a[10] = {0};\n    int digit;\n    int num = n;\n\nwhile ( num &gt; 0)\n{\n    digit = num % 10;\n\n    ++a[digit];\n\n    num = num / 10;\n}\n\nprint_array ( int a[10] );\n\nif ( a[0] != 0 )\n{\n    printf(\"Wrong input for the second part.\\n\");\n    printf(\"Input should not contain zero.\\n\");\n}\n\nelse if ( digits_different ( int a[10] ) == FALSE )\n{\n    printf(\"Wrong input for the second part.\\n\");\n    printf(\"Input should not contain each digit more than once.\\n\");\n}\n\nelse if ( divisible ( int a[10], int n ) == FALSE )\n{\n    printf(\"%1ld is not divisible by its digits.\\n\", n);\n}\n\nelse\n{\n    printf(\"%1ld is divisible by its digits.\\n\", n);\n   }\n}\n\nvoid print_array ( int a[10] )\n{\nint i;\n\nprintf(\"\\n\\n\\n\");\nprintf(\"Digits:         0   1   2   3   4   5   6   7   8   9\\n\");\nprintf(\"Occurrences:    \");\n\nfor (i = 0; i &lt; 10; i++)\n{\n    printf(\"a[i]   \");\n}\n}\n\n int digits_different ( int a[10] )\n{\nint i;\n\nfor (i = 0; i &lt; 10; i++)\n{\n    if (a[i] &gt; 1)\n        return FALSE;\n\n    else\n        return TRUE;\n}\n}\n\nint divisible ( int a[10], int n )\n{\nint i;\nint num;\n\nfor (i = 0; i &lt; 10; i++)\n{\n    if (a[i] == 0)\n        continue;\n    else if (num % i != 0)\n        return FALSE;\n}\n\nreturn TRUE;\n}\n</code></pre>\n\n<p>Here's the errors I keep getting:</p>\n\n<pre><code>Lab_Assignment_6_Sarah_H.c:27:21: error: expected expression\n         separate_digits (long int n);\n                                     ^\nLab_Assignment_6_Sarah_H.c:53:16: error: expected expression\n         print_array ( int a[10] );\n                  ^\nLab_Assignment_6_Sarah_H.c:61:31: error: expected expression\n        else if ( digits_different ( int a[10] ) == FALSE )\n                                 ^\nLab_Assignment_6_Sarah_H.c:67:24: error: expected expression\n        else if ( divisible ( int a[10], int n ) == FALSE )\n                          ^\nLab_Assignment_6_Sarah_H.c:67:35: error: expected expression\n        else if ( divisible ( int a[10], int n ) == FALSE )\n</code></pre>\n"}, {"tags": ["c", "recursion", "brute-force"], "comments": [{"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 1, "creation_date": 1478100778, "post_id": 40383863, "comment_id": 68019574, "body": "What exactly is your question?"}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "reply_to_user": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1478100808, "post_id": 40383863, "comment_id": 68019596, "body": "@skrrgwasme my question is what am I doing wrong in the function?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478100990, "post_id": 40383863, "comment_id": 68019741, "body": "Why don;t use ASCII values representations and operate on them?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478101039, "post_id": 40383863, "comment_id": 68019784, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. How do you call <code>generator</code>?"}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478101160, "post_id": 40383863, "comment_id": 68019869, "body": "@SouravGhosh as in : for (char c = &#39;a&#39;; c &lt;= &#39;z&#39;; c++) ? Something like that?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478101212, "post_id": 40383863, "comment_id": 68019910, "body": "@JohnLivingston Right you are, saves you the headache of writing and maintaining the whole <i>array initalizer</i>."}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478101227, "post_id": 40383863, "comment_id": 68019919, "body": "@MichaelWalz I call it like so: generator(pwd, 0); and pwd is : char* pwd = malloc(PW_SIZE * sizeof(char));"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478101242, "post_id": 40383863, "comment_id": 68019926, "body": "@JohnLivingston put that into the question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478101333, "post_id": 40383863, "comment_id": 68019991, "body": "@JohnLivingston the algorithm is just plain wrong. It&#39;s time now to learn how to use a debugger."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1478101337, "post_id": 40383863, "comment_id": 68019994, "body": "what goes wrong? Did u try stepping through using a debugger"}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478101426, "post_id": 40383863, "comment_id": 68020052, "body": "@MichaelWalz I edited the question. What debugger do you suggest? Im currently coding in gedit and compiling in terminal..."}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1478101586, "post_id": 40383863, "comment_id": 68020159, "body": "@pm100 well it only prints out the letter &#39;h&#39; infinitely. I&#39;d like for it to reach the end of the alphabet, then move to the next cell and do the same for a, then b and so on.."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 2, "creation_date": 1478101614, "post_id": 40383863, "comment_id": 68020183, "body": "@JohnLivingston Use GDB (possibly with the -tui flag). In the meantime, you need to give us more information. What goes wrong? What happens when you execute this code? Does it compile? Errors? Segfaults? You haven&#39;t told us anything about what goes wrong. You should edit your description of the behavior into the question itself, and describe how it differs from what you expected."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478101712, "post_id": 40383863, "comment_id": 68020266, "body": "@JohnLivingston hint: dont bother using threads before <code>generator</code> doesn&#39;t work properly."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 3, "creation_date": 1478102069, "post_id": 40383863, "comment_id": 68020545, "body": "that while loop will never exit, its local copy of index never varies"}, {"owner": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478102070, "post_id": 40383863, "comment_id": 68020546, "body": "@SouravGhosh, using an array is better IMO. Some websites have a limited set of characters that they allow for password. So, having a whitelist makes things faster and easier to maintain in such cases. e.g. If a website has password only made up of numbers, you can speed up the code by reducing the whitelist array to just numbers. In that case, only configurable parameter becomes the array. The code logic stays the same."}, {"owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "edited": false, "score": 0, "creation_date": 1478102118, "post_id": 40383863, "comment_id": 68020582, "body": "I&#39;m compiling it with -Wall at the moment and no errors at compilation. The problem I&#39;m having is that it either only prints out &quot;AAAAAA&quot; or it infinitely prints out only 1 letter without moving to the next one in the dictionary. I didn&#39;t think it would be so difficult but I just can&#39;t wrap my head around it. Sorry if the question wasn&#39;t very clear."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 17600, "user_id": 793796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mk3lA.jpg?s=128&g=1", "display_name": "anishsane", "link": "https://stackoverflow.com/users/793796/anishsane"}, "edited": false, "score": 0, "creation_date": 1478102179, "post_id": 40383863, "comment_id": 68020624, "body": "@anishsane while that is a very welcome solution, I&#39;d love to stick to different functions for uppercase, lowercase, numeric and remaining-alpha to have a easy mix up of all possible combinations. Just saying&#39;. :)"}, {"owner": {"reputation": 1014, "user_id": 6047952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56a0a74a9848b8796170a9bce83e9fa?s=128&d=identicon&r=PG", "display_name": "infixed", "link": "https://stackoverflow.com/users/6047952/infixed"}, "edited": false, "score": 0, "creation_date": 1478102981, "post_id": 40383863, "comment_id": 68021143, "body": "Perhaps re-visualizing the problem might help.  Think of the possible passwords as a tree, with each node have N lower levels, with N being the number of characters in your alphabet.  (so the root represents an empty password, and its children are N single character passwords, etc) Then get some basic concepts from <a href=\"https://en.wikipedia.org/wiki/Tree_traversal\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Tree_traversal</a>.  Most likely you&#39;d like to traverse the tree by level"}], "owner": {"reputation": 43, "user_id": 6759475, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-WPXuv-UrmxQ/AAAAAAAAAAI/AAAAAAAAAVo/-qPOHcVNogQ/photo.jpg?sz=128", "display_name": "John Livingston", "link": "https://stackoverflow.com/users/6759475/john-livingston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1536667110, "creation_date": 1478100726, "last_edit_date": 1536667110, "question_id": 40383863, "link": "https://stackoverflow.com/questions/40383863/recursively-increment-char-string-value-in-c", "title": "Recursively increment char string value in C", "body": "<p>I'd like to implement a brute force password cracker using pthreads. In order to generate a password, I'd like to generate a string like so:</p>\n\n<pre><code>a\nb\nc\n..\nz\naa\nab\n..\nzz\n..\naaa\naab\n...\nzzz\n</code></pre>\n\n<p>My idea is to use a recursive function that will generate a char one by one like in the example above. Heres what I've coded so far for the function: </p>\n\n<p><strong>Generator :</strong> </p>\n\n<pre><code>void generator(char * pwd, int index) {\n\n    char alphabet[] =  \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVXYZ0123456789!~*\";\n\n\n    while(index &lt; PW_SIZE) {\n\n        pwd[0] = alphabet[index];\n        printf(\"%s\\n\",pwd);\n\n        generator(pwd, index+1);\n\n    }\n\n    if(index == PW_SIZE)\n        return;\n}\n</code></pre>\n\n<p><strong>In pthread, I call generator like this :</strong></p>\n\n<pre><code>char* pwd = malloc(PW_SIZE * sizeof(char));\n//memset(pwd, 'a', PW_SIZE);\ngenerator(pwd, 0);\n</code></pre>\n\n<p>I know that I shouldn't put pwd[0] otherwise it'll only change the first cell but this was just for testing. The pwd in the @params comes from a char * pwd that I declared in the pthread. (malloc sizeof password lenght).</p>\n\n<p>I know that it isnt a good idea to declare the alphabet in the generator function, ill move that to the thread as well once this is sorted out.</p>\n\n<p>Any help will be appreciated. </p>\n"}, {"tags": ["c", "ruby", "linux", "gcc"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478100887, "post_id": 40383751, "comment_id": 68019655, "body": "Would you mind to post your .c file, please?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105050, "post_id": 40383751, "comment_id": 68022398, "body": "Really strange! Il try to reproduce the error here before telling you something."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105659, "post_id": 40383751, "comment_id": 68022748, "body": "I repeated exactlly the same here and it compiled correctly. I mus assume there is something wrong with your installation. Do you have all the build tools installed?"}, {"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105717, "post_id": 40383751, "comment_id": 68022788, "body": "It does work in the interactive bash/sh. So everything seems to be installed."}, {"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105912, "post_id": 40383751, "comment_id": 68022940, "body": "@EddeAlmeida Do you want to see the script in Ruby, too?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478105975, "post_id": 40383751, "comment_id": 68022971, "body": "Sure! Maybe there is some hint there about why it is not working."}, {"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478106951, "post_id": 40383751, "comment_id": 68023595, "body": "@EddeAlmeida Alright, it&#39;s there."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1478108654, "post_id": 40383751, "comment_id": 68024588, "body": "Once more it worked fine here! With your code, not my simulation!"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "edited": false, "score": 0, "creation_date": 1478109003, "post_id": 40386470, "comment_id": 68024773, "body": "OK! Just one more question: Would <code>File.open(&quot;#{filename}.c&quot;,&quot;w&quot;).write(ostr).close</code> also be valid?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "edited": false, "score": 0, "creation_date": 1478109701, "post_id": 40386470, "comment_id": 68025189, "body": "No, write returns the number of bytes read so you&#39;ll get a <code>NoMethodError</code>. Also see my edit."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1478109680, "last_edit_date": 1478109680, "creation_date": 1478108818, "answer_id": 40386470, "question_id": 40383751, "link": "https://stackoverflow.com/questions/40383751/gcc-doesnt-compile-when-called-by-system-in-ruby/40386470#40386470", "title": "GCC doesn&#39;t compile when called by system() in Ruby", "body": "<p>Writing to a file stream is buffered, you need to flush the buffer before compiling the C file. Change this</p>\n\n<pre><code>File.open(\"#{filename}.c\",\"w\").write(ostr)\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>File.open(\"#{filename}.c\",\"w\") { |f| f.write(ostr) }\n</code></pre>\n\n<p>The block form automatically closes the file stream, flushing the write.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>A nicer way to do this is to write the code directly to gcc without saving it to an intermediate file.</p>\n\n<pre><code>IO.popen(\"gcc -Wall -o ./#{filename} -xc -\", 'w') { |io| io.write(ostr) }\n</code></pre>\n\n<p>If you want more control over the subprocess check out <a href=\"https://ruby-doc.org/stdlib/libdoc/open3/rdoc/index.html\" rel=\"nofollow noreferrer\">open3</a>.</p>\n"}], "owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 40386470, "answer_count": 1, "score": 2, "last_activity_date": 1478109680, "creation_date": 1478100385, "last_edit_date": 1478106919, "question_id": 40383751, "link": "https://stackoverflow.com/questions/40383751/gcc-doesnt-compile-when-called-by-system-in-ruby", "title": "GCC doesn&#39;t compile when called by system() in Ruby", "body": "<p>GCC compiles my C script when it's called on the command line by using \n<code>gcc main.c -o bfcout</code>. I wrote a script in Ruby where line 36 says <code>system(\"gcc main.c -o bfcout\")</code>. I also tried <code>bash -c #{Shellwords.escape(\"gcc -Wall #{filename}.c -o bfcompoutput\")}</code>.</p>\n\n<p>But I get an error: <code>/usr/lib/gcc/x86_64-pc-linux-gnu/6.2.1/../../../../lib/crt1.o: In function '_start':\n(.text+0x20): undefined reference to 'main'</code></p>\n\n<p>There IS a main() function, and as I said, compiling on the command line works! What is wrong here?</p>\n\n<p>EDIT: \nC file looks like this. It is generated by the script. And yes, it's a reference to Brainf***. Sorry for the many lines(and the bad formatting).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nunsigned char _c[30000]={};\nint ptr=0;\nint main(){\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nwhile (_c[ptr]) {\n    ++ptr;\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++ptr;\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++ptr;\n    ++_c[ptr];\n    ++_c[ptr];\n    ++_c[ptr];\n    ++ptr;\n    ++_c[ptr];\n    --ptr;\n    --ptr;\n    --ptr;\n    --ptr;\n    --_c[ptr];\n}\n++ptr;\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\n++_c[ptr];\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n--ptr;\n--ptr;\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\nputchar(_c[ptr]);\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\n--_c[ptr];\nputchar(_c[ptr]);\n++ptr;\n++_c[ptr];\nputchar(_c[ptr]);\n++ptr;\nputchar(_c[ptr]);\n++_c[ptr];\n++_c[ptr];\n++_c[ptr];\nputchar(_c[ptr]);\nreturn 0;\n}\n</code></pre>\n\n<p>Script in Ruby:</p>\n\n<pre><code>require 'shellwords'\n\ncode = \"\"\n\nloop do\n    x = gets.chomp\n    break if x==\"__END__\"\n    code &lt;&lt; x\nend\n\ncode_arr = []\n\ncode.split(\"\").each {|ch|\n    case ch\n    when \"&gt;\";code_arr &lt;&lt; \"++ptr;\"\n    when \"&lt;\";code_arr &lt;&lt; \"--ptr;\"\n    when \"+\";code_arr &lt;&lt; \"++_c[ptr];\"\n    when \"-\";code_arr &lt;&lt; \"--_c[ptr];\"\n    when \".\";code_arr &lt;&lt; \"putchar(_c[ptr]);\"\n    when \",\";code_arr &lt;&lt; \"_c[ptr] = getchar();\"\n    when \"[\";code_arr &lt;&lt; \"while (_c[ptr]) {\"\n    when \"]\";code_arr &lt;&lt; \"}\"\n    end\n}\n\nfilename = \"main\"\n\nsp = \"\"\n\nostr = \"#include &lt;stdio.h&gt;\\nunsigned char _c[30000]={};#{sp}int ptr=0;#{sp}int main(){#{code_arr.join(sp)+sp}return 0;#{sp}}\"\nFile.open(\"#{filename}.c\",\"w\").write(ostr)\nputs ostr\nresult = system(\"gcc -Wall #{filename}.c -o ./#{filename}\")\nputs \"Process exited with code #{result}\"\n</code></pre>\n"}, {"tags": ["c++", "c", "ros", "catkin"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1478100241, "post_id": 40383446, "comment_id": 68019180, "body": "A .h file is not a library, but a header file. The library has an extension like .lib, .a, .so or .dll, and you have to link to it, not #include it."}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1478103350, "post_id": 40383446, "comment_id": 68021352, "body": "Post your linker line!"}, {"owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "edited": false, "score": 0, "creation_date": 1478162511, "post_id": 40383446, "comment_id": 68044354, "body": "I put both the library and the header in the same folder, but, as far as i know, i have to write #include in the ROS language. I searched for it and i supposed to be right. Am i wrong? Do i have to link the library in the CMakeLists.txt??"}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1478164646, "post_id": 40383446, "comment_id": 68045512, "body": "A header file (.h) generally contains a description of a library, and is usually accompanied with a library file (.lib) that actually contains the code.  The compiler will generate code, but then a linker will be used to pull in all the required libraries and create the executable.  For example, printf is declared (without any actual code) in the .h file stdio.h, but there will also be a library file that actually contains the code for printf.  Do you have a makefile that you can post?"}, {"owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "edited": false, "score": 0, "creation_date": 1478165431, "post_id": 40383446, "comment_id": 68045966, "body": "yes, i have it? but it&#39;s very big because it&#39;s full of comments that teach you how to write the things. Should i post it as an answer?"}, {"owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "edited": false, "score": 0, "creation_date": 1478166612, "post_id": 40383446, "comment_id": 68046738, "body": "yes, i have it without ? of course ;)"}, {"owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "edited": false, "score": 0, "creation_date": 1478183146, "post_id": 40383446, "comment_id": 68058097, "body": "I found the problem! In the CMakeLists.txt i used the correct name of my library (libwfdb). But, it seems that&#39;s the ROS logic, the compiler/linker put  the suffix lib at every library file when it does the linking. In my case, since the &quot;lib prefix&quot; was already present because it&#39;s a part of the library name, the linking resulted in liblibwfdb, causing my errors! I simply deleted lib in my CMakeLists and all went fine! Thank you all for all your help! :)"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "edited": false, "score": 0, "creation_date": 1478162555, "post_id": 40383668, "comment_id": 68044377, "body": "Do you mean in the CMakeLists.txt?"}, {"owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "edited": false, "score": 0, "creation_date": 1478183101, "post_id": 40383668, "comment_id": 68058062, "body": "It was a kind of this problem! Thank you!"}], "tags": [], "owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "is_accepted": false, "score": -1, "last_activity_date": 1478100154, "creation_date": 1478100154, "answer_id": 40383668, "question_id": 40383446, "link": "https://stackoverflow.com/questions/40383446/i-want-to-use-some-pieces-of-c-code-in-ros-that-uses-c-language/40383668#40383668", "title": "I want to use some pieces of C code in ROS, that uses C++ language", "body": "<p>This sounds like a linker problem, not a compiler problem.  Have you included the .lib on your linker line?</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "edited": false, "score": 0, "creation_date": 1478162687, "post_id": 40383893, "comment_id": 68044439, "body": "Thank you, but i don&#39;t understand so well your example. Maybe i have to follow the instructions of the other users? They said that maybe is a linking problem."}], "tags": [], "owner": {"reputation": 488, "user_id": 6344366, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8EB8C.jpg?s=128&g=1", "display_name": "Cherkesgiller", "link": "https://stackoverflow.com/users/6344366/cherkesgiller"}, "is_accepted": false, "score": 2, "last_activity_date": 1478100798, "creation_date": 1478100798, "answer_id": 40383893, "question_id": 40383446, "link": "https://stackoverflow.com/questions/40383446/i-want-to-use-some-pieces-of-c-code-in-ros-that-uses-c-language/40383893#40383893", "title": "I want to use some pieces of C code in ROS, that uses C++ language", "body": "<p>You should look to here get more information about code mixing : \n<a href=\"https://isocpp.org/wiki/faq/mixing-c-and-cpp\" rel=\"nofollow noreferrer\">https://isocpp.org/wiki/faq/mixing-c-and-cpp</a></p>\n\n<pre><code>   // C++ code\nextern \"C\" void f(int); // one way\nextern \"C\" {    // another way\n    int g(double);\n    double h();\n};\nvoid code(int i, double d)\n{\n    f(i);\n    int ii = g(d);\n    double dd = h();\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6859348, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac4e48191d238afcdd2fa3f0468fd1b3?s=128&d=identicon&r=PG&f=1", "display_name": "Marcofon", "link": "https://stackoverflow.com/users/6859348/marcofon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 977, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478100798, "creation_date": 1478099576, "last_edit_date": 1478100033, "question_id": 40383446, "link": "https://stackoverflow.com/questions/40383446/i-want-to-use-some-pieces-of-c-code-in-ros-that-uses-c-language", "title": "I want to use some pieces of C code in ROS, that uses C++ language", "body": "<p>as the title says, I'm trying to use some C code in a .cpp file that i want to use in a ROS package.\nHere is the code that i wrote for now:</p>\n\n<pre><code>#include \"ros/ros.h\"\n#include \"std_msgs/String.h\"\n#include \"../include/heart_rate_monitor/wfdb.h\"\n#include &lt;stdio.h&gt;\n#include &lt;sstream&gt;\n\n\nint main(int argc, char **argv)\n{\n    ros::init(argc, argv, \"heart\");\n    ros::NodeHandle n;\n\n    int i;\n    WFDB_Sample v[2];\n    WFDB_Siginfo s[2];\n\n    if (isigopen(\"100s\", s, 2) &lt; 2)\n        exit(1);\n\n    for (i = 0; i &lt; 10; i++) {\n        if (getvec(v) &lt; 0)\n            break;\n        printf(\"%d\\t%d\\n\", v[0], v[1]);\n\n    }\n    exit(0);\n    return 0;\n}\n</code></pre>\n\n<p>When i try to use catkin_make, i can see in the terminal some errors like</p>\n\n<pre><code>\"heart.cpp:(.text+0xf4): reference not defined on \"isigopen\".\n</code></pre>\n\n<p>Because, clearly, the system cannot see the wfdb.h C library, although is placed in the include folder of the package.\nMaybe i have to use some code like <code>#ifdef __cplusplus</code> and <code>extern C</code> or something?</p>\n\n<p>If so, i really don't know how to use it, since I'm a super noob in coding!\nIs there something else that i haven't considered?</p>\n\n<p>Thank you in advance!</p>\n\n<p>Marco</p>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1478099049, "post_id": 40383207, "comment_id": 68018250, "body": "Which bit are you having trouble with?  Please <a href=\"https://stackoverflow.com/posts/40383207/edit\">edit</a> your post to have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and a clearer description of your problem.  What you have now is far from minimal - a minimal example doesn&#39;t normally read input, for example (unless the question is about reading input, in which case the example doesn&#39;t do anything else!)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1478099071, "post_id": 40383207, "comment_id": 68018271, "body": "1) Don&#39;t post images of text! 2) Don&#39;t post images of text! 3) Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and follow the advice."}, {"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1478099175, "post_id": 40383207, "comment_id": 68018346, "body": "It&#39;s your <code>free</code> calls. You only malloc() ONE of those values, depending on the exact code path, but you <code>free</code> every single one of them. You cannot <code>free</code> a pointer which was never malloc&#39;d in the first place."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1478099264, "post_id": 40383207, "comment_id": 68018426, "body": "...or initialize all pointers to NULL first"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1478099338, "post_id": 40383207, "comment_id": 68018473, "body": "Your question shows no correlation to <code>putenv()</code> or <code>setenv()</code>. Why the header?"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1478099403, "post_id": 40383207, "comment_id": 68018534, "body": "copy text from the terminal and paste here would be far faster and lighter, and would make it searchable and copyable to others"}, {"owner": {"reputation": 167, "user_id": 1320095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OhHs1.jpg?s=128&g=1", "display_name": "vlada", "link": "https://stackoverflow.com/users/1320095/vlada"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1478099430, "post_id": 40383207, "comment_id": 68018554, "body": "@TobySpeight Yes, this example just reads input and split string like for example &quot;set USER = john&quot; to 3 parts. First part is set (obviously command), second part is USER (variable name) and thisrd part is value. What I am asking is how to use these 3 values to execute command putenv() or setenv() - whatever is correct."}, {"owner": {"reputation": 167, "user_id": 1320095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OhHs1.jpg?s=128&g=1", "display_name": "vlada", "link": "https://stackoverflow.com/users/1320095/vlada"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1478099568, "post_id": 40383207, "comment_id": 68018663, "body": "@tofro How to use these 3 values stored in variables (command, varName and varValue) to execute command putenv() or setenv()."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1478100254, "post_id": 40383207, "comment_id": 68019191, "body": "Your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> should look something like  <code>#include &lt;stdlib.h&gt;  int main() {     const char *name = &quot;USER&quot;;     const char *value = &quot;John&quot;;     setenv(name, value, 1); } </code>"}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1478104744, "creation_date": 1478104744, "answer_id": 40385208, "question_id": 40383207, "link": "https://stackoverflow.com/questions/40383207/putenv-and-setenv-on-unix/40385208#40385208", "title": "putenv() and setenv() on Unix", "body": "<p>The crash is caused by your loops <code>while (!isspace(s[index]))</code> for <code>cmdNo</code> 1 and 2 -- if there is no third (or second) word on the input line, they'll run past the NUL terminator in the string and (probably) crash.  You need a check for NUL in these loops as you check in <code>cmdNo</code> 3 case.</p>\n\n<p>You also have a problem if you have more than 3 words on the input line -- you'll go into an infinite loop on the 4th word.</p>\n\n<p>Rather than duplicating the code for the word in <code>if</code>/<code>else if</code>/<code>else if</code> as you have done, its much better to put the words in an array.  You could even use <code>strtok_r</code> or <code>strsep</code> rather than manually parsing out the characters.</p>\n"}], "owner": {"reputation": 167, "user_id": 1320095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OhHs1.jpg?s=128&g=1", "display_name": "vlada", "link": "https://stackoverflow.com/users/1320095/vlada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478104744, "creation_date": 1478098899, "last_edit_date": 1478099361, "question_id": 40383207, "link": "https://stackoverflow.com/questions/40383207/putenv-and-setenv-on-unix", "title": "putenv() and setenv() on Unix", "body": "<p>I need to get input from user and deal with variables. I need to have next features:</p>\n\n<ul>\n<li><code>set varname = somevalue</code>: set the value of the environment variable named <code>varname</code> to the value specified by <code>somevalue</code>.</li>\n<li><code>delete varname</code>: remove the named environment variable.</li>\n<li><code>print varname</code>: prints out the current value of the named environment variable.</li>\n</ul>\n\n<p>What I have till now is this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;readline/readline.h&gt;\n#include &lt;readline/history.h&gt;\n\nint main(int argc, char **argv) {\n\nchar * s;\nchar * command;\nchar * varName;\nchar * varValue;\n\nwhile (s = readline(\"prompt&gt; \")) {\n    /* Initialise char* variables */\n    command = NULL;\n    varName = NULL;\n    varValue = NULL;\n\n    add_history(s); /* adds the line to the readline history buffer */\n\n    printf(\"&gt; %s\\n\", s); //print &gt; sign\n\n    int cmdNo = 1;\n    int i;\n\n    // parse through entire string\n    for (i = 0; i &lt; strlen(s); i++)\n    {\n        // check for space or = and jump over it\n        while ((isspace(s[i]) || s[i] == '=') &amp;&amp; (i &lt; strlen(s)))\n        {\n            i++;           \n        }\n        // check if i is greater than string size \n        if (i &gt;= strlen(s))\n        {\n            printf(\"Bad command format!\\n\");\n            break;\n        }\n        // if cmdNo == 1, get the command\n        if (cmdNo == 1)\n        {\n            int commandSize = 0;\n\n            int index = i;\n\n            // point index to space\n            while (!isspace(s[index]))\n            {\n                commandSize++;\n                index++;\n            }\n\n            // get command \n            command = (char*)malloc(commandSize + 1);\n\n            int destIndex = 0;\n\n            // copy command into command array \n            while (i&lt;index)\n            {\n                command[destIndex] = s[i];\n                destIndex++;\n                i++;\n            }\n\n            // adding terminate character \n            command[destIndex] = '\\0';\n            // increase command number by 1\n            cmdNo++;\n\n        }\n        // if cmdNo == 2 we deal with variable name\n        else if (cmdNo == 2)\n        {\n            // variable name size\n            int varNameSize = 0;\n            int index = i;\n            // point index to space\n            while (!isspace(s[index]))\n            {\n                varNameSize++;\n                index++;\n            }\n\n            // get var name \n            varName = (char*)malloc(varNameSize + 1);\n\n            int index2 = 0;\n            while (i&lt;index)\n            {\n                varName[index2] = s[i];\n                index2++;\n                i++;\n            }\n            // add terminate char\n            varName[index2] = '\\0';\n            // increment cmdNo by 1\n            cmdNo++;\n        }\n        // if cmdNo == 3 we deal with variable value\n        else if (cmdNo == 3)\n        {\n            int valueSize = 0;\n            int index = i;\n            // point index to space\n            while (!isspace(s[index]) &amp;&amp; s[index] != '\\0')\n            {\n                valueSize++;\n                index++;\n            }\n\n            // get variable value\n            varValue = (char*)malloc(valueSize + 1);\n            int index2 = 0;\n            while (i&lt;index)\n            {\n                varValue[index2] = s[i];\n                index2++;\n                i++;\n            }\n            // add terminate char\n            varValue[index2] = '\\0';\n        }\n    }\n    // print command, variable name and value\n    if (command != NULL)\n    {\n        printf(\"%s\", command);\n    }\n    if (varName != NULL)\n    {\n        printf(\" %s\", varName);\n    }\n    if (varValue != NULL)\n    {\n        printf(\" %s\\n\", varValue);\n    }\n\n    /* clean up! */\n    free(s);\n    free(command);\n    free(varName);\n    free(varValue);\n    }\n    return(0);\n}\n</code></pre>\n\n<p>Obviously, I had to put somewhere <code>putenv()</code>, <code>setenv()</code> or <code>clearenv()</code>. I don't have much experience with these commands. </p>\n\n<p>Also, there is some error (Segmentation fault). This is response of system\n<a href=\"https://i.stack.imgur.com/U8IRe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U8IRe.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "fwrite", "fread"], "comments": [{"owner": {"reputation": 36301, "user_id": 50447, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8c8779a33adeec01e05d5a480c7cd3c3?s=128&d=identicon&r=PG", "display_name": "Rowland Shaw", "link": "https://stackoverflow.com/users/50447/rowland-shaw"}, "edited": false, "score": 0, "creation_date": 1478098298, "post_id": 40382941, "comment_id": 68017699, "body": "What&#39;s not working about it? What is written to the file?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1478098317, "post_id": 40382941, "comment_id": 68017712, "body": "Is this the actual code you are trying? You have opened one file <code>f</code> for reading. Which you then write to. Close between reading and reopening? Make sure you open for writing to begin with"}, {"owner": {"reputation": 97, "user_id": 5866466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bba8b450bca84ed864bbfb30351e7970?s=128&d=identicon&r=PG&f=1", "display_name": "David Frickert", "link": "https://stackoverflow.com/users/5866466/david-frickert"}, "edited": false, "score": 0, "creation_date": 1478098399, "post_id": 40382941, "comment_id": 68017779, "body": "Well, I manage to read all 50 Users but the reading of the int id returns 0 (not read)."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 1, "creation_date": 1478098415, "post_id": 40382941, "comment_id": 68017786, "body": "The second <code>while</code> will read some of the id and get to the end of the file..."}, {"owner": {"reputation": 97, "user_id": 5866466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bba8b450bca84ed864bbfb30351e7970?s=128&d=identicon&r=PG&f=1", "display_name": "David Frickert", "link": "https://stackoverflow.com/users/5866466/david-frickert"}, "reply_to_user": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1478098426, "post_id": 40382941, "comment_id": 68017801, "body": "Nope @doctorlove, I edited a bit, in the original code I am opening and closing like I should."}, {"owner": {"reputation": 97, "user_id": 5866466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bba8b450bca84ed864bbfb30351e7970?s=128&d=identicon&r=PG&f=1", "display_name": "David Frickert", "link": "https://stackoverflow.com/users/5866466/david-frickert"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1478098440, "post_id": 40382941, "comment_id": 68017808, "body": "@mch damn. let me edit"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5866466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bba8b450bca84ed864bbfb30351e7970?s=128&d=identicon&r=PG&f=1", "display_name": "David Frickert", "link": "https://stackoverflow.com/users/5866466/david-frickert"}, "edited": false, "score": 0, "creation_date": 1478098587, "post_id": 40383063, "comment_id": 68017911, "body": "so, by order:  1 - save array length 2 - save all users 3 - save id right?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "reply_to_user": {"reputation": 97, "user_id": 5866466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bba8b450bca84ed864bbfb30351e7970?s=128&d=identicon&r=PG&f=1", "display_name": "David Frickert", "link": "https://stackoverflow.com/users/5866466/david-frickert"}, "edited": false, "score": 0, "creation_date": 1478098763, "post_id": 40383063, "comment_id": 68018039, "body": "Indeed. Unless the 50 is always going to be 50."}], "tags": [], "owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "is_accepted": true, "score": 2, "last_activity_date": 1478098502, "creation_date": 1478098502, "answer_id": 40383063, "question_id": 40382941, "link": "https://stackoverflow.com/questions/40382941/how-can-i-read-two-different-data-types-from-binary-file-in-c/40383063#40383063", "title": "How can I read two different data types from binary file in C?", "body": "<p>Your second loop</p>\n\n<pre><code>while(fread(&amp;aux, sizeof(aux), 1, f))\n</code></pre>\n\n<p>will read the id - moving to the end of the file, so the following read will fail.</p>\n\n<p>If you save to the file how many user record to read back and loop for that number you can get it to work.</p>\n"}], "owner": {"reputation": 97, "user_id": 5866466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bba8b450bca84ed864bbfb30351e7970?s=128&d=identicon&r=PG&f=1", "display_name": "David Frickert", "link": "https://stackoverflow.com/users/5866466/david-frickert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 626, "favorite_count": 0, "accepted_answer_id": 40383063, "answer_count": 1, "score": 0, "last_activity_date": 1478098502, "creation_date": 1478098198, "last_edit_date": 1478098457, "question_id": 40382941, "link": "https://stackoverflow.com/questions/40382941/how-can-i-read-two-different-data-types-from-binary-file-in-c", "title": "How can I read two different data types from binary file in C?", "body": "<p>I have the following code:</p>\n\n<pre><code>typedef struct{\n    int user_id;\n    char username[100];\n    char password[25];\n} User;\nint id = 10001;\nUser array[50];\n\n...\n</code></pre>\n\n<p>And then the important part that's failing (writing and reading):</p>\n\n<pre><code>FILE *f = fopen(\"users.dat\", \"w\");\nUser aux;\nint j = 0;\n\n\nfor(int i = 0; i &lt; 50; i++){\n                fwrite(&amp;array[i],sizeof(array[i]),1 , f);   \n            }\n            fwrite(&amp;id, sizeof(id), 1, f);  \nfclose(f);\nf = fopen(\"users.dat,\"r\");\nwhile(fread(&amp;aux, sizeof(aux), 1, f)){\n        array[j++] = aux;\n    }\n    fread(&amp;id, sizeof(id),1 ,f);\n</code></pre>\n\n<p>Can someone explain me why this doesn't work? AKA why it's reading all the User but it doesn't read the id. I've tried having an int counting the number of users and only printing those but it didn't work as well.\nThanks for the help and i'll post more code if needed.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1478097730, "post_id": 40382568, "comment_id": 68017257, "body": "Hm. What is he problem, exactly? Reset the counter when seeing a zero."}], "answers": [{"comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1478099187, "post_id": 40382854, "comment_id": 68018357, "body": "Now you could try a solution without repeating the last <i>if</i> .."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1478100234, "post_id": 40382854, "comment_id": 68019174, "body": "You don&#39;t need the last if statement in this code."}, {"owner": {"reputation": 842, "user_id": 6868584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-N3nZLuk31y4/AAAAAAAAAAI/AAAAAAAABvU/opOgVOgkjoo/photo.jpg?sz=128", "display_name": "Aidin", "link": "https://stackoverflow.com/users/6868584/aidin"}, "edited": false, "score": 0, "creation_date": 1478100749, "post_id": 40382854, "comment_id": 68019557, "body": "Something is needed for when ending on a 1"}, {"owner": {"reputation": 842, "user_id": 6868584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-N3nZLuk31y4/AAAAAAAAAAI/AAAAAAAABvU/opOgVOgkjoo/photo.jpg?sz=128", "display_name": "Aidin", "link": "https://stackoverflow.com/users/6868584/aidin"}, "edited": false, "score": 0, "creation_date": 1478101011, "post_id": 40382854, "comment_id": 68019766, "body": "I could remove the last <code>if</code> and instead move the <code>if</code> in the <code>else</code> to be right after else instead. But I don&#39;t think that is better since in every iteration there will be an additional <code>if</code>to evaluate"}], "tags": [], "owner": {"reputation": 842, "user_id": 6868584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-N3nZLuk31y4/AAAAAAAAAAI/AAAAAAAABvU/opOgVOgkjoo/photo.jpg?sz=128", "display_name": "Aidin", "link": "https://stackoverflow.com/users/6868584/aidin"}, "is_accepted": true, "score": 1, "last_activity_date": 1478593628, "last_edit_date": 1478593628, "creation_date": 1478097973, "answer_id": 40382854, "question_id": 40382568, "link": "https://stackoverflow.com/questions/40382568/keep-track-of-successive-repeatnace-of-a-digit-in-c/40382854#40382854", "title": "keep track of successive repeatnace of a digit in C", "body": "<p>Each time you encounter a 0 you need to reset the counter. Before resetting however you need to check if the value is greater than the previous value you had for your counter.</p>\n\n<p>I don't quite remember C syntax 100%, but something like this:</p>\n\n<pre><code>int size = sizeof(yourArray) / sizeof(int);\nint largest = 0;\nint counter = 0;\n\nfor(int i = 0; i &lt; size; i++) {\n    if(yourArray[i] == 1) {\n        counter++;\n        if(counter &gt; largest) {\n            largest = counter;\n        }       \n    } else {\n        counter = 0;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5542315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PuwoLVEGzkQ/AAAAAAAAAAI/AAAAAAAAAL0/f6P-0hsX9Dg/photo.jpg?sz=128", "display_name": "Rajeev Menon", "link": "https://stackoverflow.com/users/5542315/rajeev-menon"}, "is_accepted": false, "score": 0, "last_activity_date": 1478098141, "creation_date": 1478098141, "answer_id": 40382917, "question_id": 40382568, "link": "https://stackoverflow.com/questions/40382568/keep-track-of-successive-repeatnace-of-a-digit-in-c/40382917#40382917", "title": "keep track of successive repeatnace of a digit in C", "body": "<p>This should work I guess</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid main ()\n{\n    int a[10] = { 1, 1, 1, 1, 1, 1, 0, 1, 1, 1};\n\n    int count = 0;\n    int temp = 0;\n    for (int i = 0; i &lt; 10; i++)\n    {\n        if (a[i] == 1)\n            temp++;\n        else\n        {\n            if (count &lt; temp)                                                                                                                         \n            {\n                count = temp;\n                temp = 0;\n            }\n        }\n\n    }\n    if (count &lt; temp)\n    {\n        count = temp;\n        temp = 0;\n    }\n    printf (\" Total %d\", count);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1478100710, "creation_date": 1478100710, "answer_id": 40383856, "question_id": 40382568, "link": "https://stackoverflow.com/questions/40382568/keep-track-of-successive-repeatnace-of-a-digit-in-c/40383856#40383856", "title": "keep track of successive repeatnace of a digit in C", "body": "<p>Just use simple backtracking:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint\nmain(int argc, char const *argv[]) {\n    int array[] = {0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1};\n    int size, i, maxSoFar = 0, maxEndingHere = 0;\n\n    size = sizeof(array) / sizeof(*array);\n\n    for (i = 0; i &lt; size; i++) {\n        if (array[i] == 1) {\n            maxEndingHere++;\n        } else {\n            maxEndingHere = 0;\n        }\n        if (maxEndingHere &gt; maxSoFar) {\n            maxSoFar = maxEndingHere;\n        }\n    }\n\n    printf(\"%d\", maxSoFar);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4580592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606e6687de3e7f8e453c29da7951b855?s=128&d=identicon&r=PG&f=1", "display_name": "Md Soman Khan", "link": "https://stackoverflow.com/users/4580592/md-soman-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1478103485, "accepted_answer_id": 40382854, "answer_count": 3, "score": -2, "last_activity_date": 1478593628, "creation_date": 1478097185, "question_id": 40382568, "link": "https://stackoverflow.com/questions/40382568/keep-track-of-successive-repeatnace-of-a-digit-in-c", "closed_reason": "Needs more focus", "title": "keep track of successive repeatnace of a digit in C", "body": "<p>I have an array with some 0's and 1's.Now I want to find how much time 1 comes successively(the largest value). Like I have an array of 0 1 1 1 0 0 1 1 1 1 0 1.Then my result will be 4. I can count the total occurrence of 1 but can't keep the successive occurrence. How can I keep the result of successive occurance.I am beginner</p>\n"}, {"tags": ["c", "factorial"], "comments": [{"owner": {"reputation": 3206, "user_id": 3000589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5f9QJ.png?s=128&g=1", "display_name": "martijnn2008", "link": "https://stackoverflow.com/users/3000589/martijnn2008"}, "edited": false, "score": 0, "creation_date": 1478098469, "post_id": 40382341, "comment_id": 68017833, "body": "<code>int factorial = 1;</code> and then <code>factorial *= i;</code> inside the loop. But I think you should have stated what your problem is. You could have for example looked on the internet for an implementation and force yourself to look for differences and understand why there are differences."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478311309, "post_id": 40382341, "comment_id": 68116470, "body": "check the returned value (not the parameter value from the call to <code>scanf()</code> to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478311396, "post_id": 40382341, "comment_id": 68116484, "body": "should check that the user entered value is &gt; 0 ."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6421422, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xwnfoSeXKyA/AAAAAAAAAAI/AAAAAAAAAjc/xSniMxhtOz4/photo.jpg?sz=128", "display_name": "&#214;mer &#199;iftci", "link": "https://stackoverflow.com/users/6421422/%c3%96mer-%c3%87iftci"}, "edited": false, "score": 0, "creation_date": 1478116339, "post_id": 40382498, "comment_id": 68028890, "body": "I will try it. Thank you your feedback :)"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1478247435, "post_id": 40382498, "comment_id": 68085042, "body": "I don&#39;t see why modifying <code>a</code> would lead to undefined behaviour. Note that the term undefined behaviour is used in the C specification for operations where anything may happen. In this case the result is defined, although it is not the intended one."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1478248288, "last_edit_date": 1478248288, "creation_date": 1478097008, "answer_id": 40382498, "question_id": 40382341, "link": "https://stackoverflow.com/questions/40382341/i-cant-write-this-factorial-codes/40382498#40382498", "title": "I cant write this factorial codes", "body": "<p>You are modifying the input <code>a</code> rather than <code>factorial</code> and also wrong (undefined behaviour) because you are using <code>factorial</code> uninitialized. You simply need to use the <code>factorial</code> variable you declared.</p>\n\n<pre><code>int factorial = 1;\n...\n\nfor (int i = 1; i&lt;=a; i++) {\n  factorial = i*factorial;\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Also, be aware that C's <code>int</code> can only hold limited values. So, beyond a certain number (roughly after 13! if sizeof(int) is 4 bytes), you'll cause <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">integer overflow</a>.\nYou may want to look at <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">GNU bugnum library</a> for handling large factorial values.</p>\n"}, {"tags": [], "owner": {"reputation": 60, "user_id": 7020598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e53bffbe765450970d4429edcd7f7b80?s=128&d=identicon&r=PG&f=1", "display_name": "danielku97", "link": "https://stackoverflow.com/users/7020598/danielku97"}, "is_accepted": false, "score": 1, "last_activity_date": 1478097071, "creation_date": 1478097071, "answer_id": 40382524, "question_id": 40382341, "link": "https://stackoverflow.com/questions/40382341/i-cant-write-this-factorial-codes/40382524#40382524", "title": "I cant write this factorial codes", "body": "<p>Your for loop is using your variable 'a' instead of the factorial variable and i, try something like this</p>\n\n<pre><code>factorial = 1;\nfor (int i = 1; i&lt;=a; i++) \n{\n    factorial *= i;\n}\n</code></pre>\n\n<p>You must initialize your factorial to 1, and then the for loop will keep multiplying it by 'i' until 'i' is greater than 'a'.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 6421422, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xwnfoSeXKyA/AAAAAAAAAAI/AAAAAAAAAjc/xSniMxhtOz4/photo.jpg?sz=128", "display_name": "&#214;mer &#199;iftci", "link": "https://stackoverflow.com/users/6421422/%c3%96mer-%c3%87iftci"}, "edited": false, "score": 0, "creation_date": 1478116302, "post_id": 40383397, "comment_id": 68028866, "body": "thank you so much. I am always confused about for loop. This answer very helpful for me. Thank you again :)"}], "tags": [], "owner": {"reputation": 256, "user_id": 6895884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eHvmo.jpg?s=128&g=1", "display_name": "Eisa", "link": "https://stackoverflow.com/users/6895884/eisa"}, "is_accepted": true, "score": 1, "last_activity_date": 1478099444, "creation_date": 1478099444, "answer_id": 40383397, "question_id": 40382341, "link": "https://stackoverflow.com/questions/40382341/i-cant-write-this-factorial-codes/40383397#40383397", "title": "I cant write this factorial codes", "body": "<p>Well in your code line <code>a = (a - 1)*a;</code> you actually changed your input for getting the factorial. It also will blow your loop. See your for loop will continue as long as your <code>i</code> is less than <code>a</code>, lets say you choose <code>a=3</code> after first iteration the <code>a</code> itself will become <code>6</code>, so the for loop will continue until it reach the integer limit and you will get overflow error.</p>\n\n<p><strong>What you should do?</strong></p>\n\n<p>First of all you should use a second variable to store the factorial result, you introduced it as <code>factorial</code>, the way that @danielku97 said is a good way to write a factorial since if you present 0 as input it will also give the correct result of 1. so a good code is:</p>\n\n<pre><code>factorial = 1;\nfor (int i = 1; i&lt;=a; i++) \n{\n    factorial *= i;\n}\n</code></pre>\n\n<p>But lets say you insist of subtraction, the way you just tried to use, then you need to change the code like:</p>\n\n<pre><code>scanf(\"%d\", &amp;a);\nif (a==1 || a==0){\n    printf(\"1\");\n    return 0;\n}\n\nfactorial = a;\nfor (int i = 1; i&lt;a; i++) \n{\nfactorial *= (a - i)*factorial;\n}\n</code></pre>\n\n<p>You can see that the code just got unnecessarily longer. An if included to correct the results for <code>1</code> and <code>0</code>. Also you need to make sure that <code>i</code> never become like <code>i =a</code> since in that case <code>a-i</code> will be equal to zero and will make the factorial result equal to zero.</p>\n\n<p>I hope the explanations can help you on learning C and Algorithm faster.</p>\n"}], "owner": {"reputation": 41, "user_id": 6421422, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xwnfoSeXKyA/AAAAAAAAAAI/AAAAAAAAAjc/xSniMxhtOz4/photo.jpg?sz=128", "display_name": "&#214;mer &#199;iftci", "link": "https://stackoverflow.com/users/6421422/%c3%96mer-%c3%87iftci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 40383397, "answer_count": 3, "score": 0, "last_activity_date": 1478248288, "creation_date": 1478096619, "last_edit_date": 1478096755, "question_id": 40382341, "link": "https://stackoverflow.com/questions/40382341/i-cant-write-this-factorial-codes", "title": "I cant write this factorial codes", "body": "<p>I have some problem with that. I am trying to learn C programming. Please help me </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n\nint main()\n{\n    int a, factorial;\n\n    printf(\"Please enter a value :\" );\n\n    scanf(\"%d\", &amp;a);\n\n\n    for (int i = 1; i&lt;=a; i++) \n    {\n        a = (a - 1)*a;\n    }\n    printf(\"%d\", factorial);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "express", "xcode5"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478096739, "post_id": 40382271, "comment_id": 68016572, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1478098249, "post_id": 40382271, "comment_id": 68017653, "body": "You&#39;re saying you want a pointer to a structure from the kernel, then you try to <i>cast that pointer</i> to the structure without dereferencing it. This cannot work."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1478099844, "post_id": 40382271, "comment_id": 68018887, "body": "The thing is called <code>struct dyld_all_image_infos</code>, not <code>dyld_all_image_infos</code>."}, {"owner": {"reputation": 1, "user_id": 7097525, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qYlHrEaT7Is/AAAAAAAAAAI/AAAAAAAAAY0/rt_DNvlOgEk/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/7097525/alex"}, "edited": false, "score": 0, "creation_date": 1478108571, "post_id": 40382271, "comment_id": 68024540, "body": "Thanks&#39;s a lot for the responses! Ill be sure to change this!"}], "owner": {"reputation": 1, "user_id": 7097525, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qYlHrEaT7Is/AAAAAAAAAAI/AAAAAAAAAY0/rt_DNvlOgEk/photo.jpg?sz=128", "display_name": "Alex ", "link": "https://stackoverflow.com/users/7097525/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478096500, "creation_date": 1478096418, "last_edit_date": 1478096500, "question_id": 40382271, "link": "https://stackoverflow.com/questions/40382271/xcode5-expected-expression-error", "title": "xcode5 &#39;Expected Expression&#39; error", "body": "<p>I almost finished to build a project when this code gave me an error:</p>\n\n<pre><code>    struct dyld_all_image_infos *dyldaii;\nmach_msg_type_number_t size = sizeof(dyld_all_image_infos);\nvm_offset_t readMem;\nkern_return_t kr = vm_read(task, address, size, &amp;readMem, &amp;size);\nif (kr != KERN_SUCCESS)\n{\n    return;\n}\n\n***dyldaii = (dyld_all_image_infos) readMem;***\nint imageCount = dyldaii-&gt;infoArrayCount;\nmach_msg_type_number_t dataCnt = imageCount * 24;\nstruct dyld_image_info *g_dii = NULL;\n</code></pre>\n\n<p>The line <code>dyldaii = (dyld_all_image_infos) readMem;</code> is giving me an error \"expected expression\". What would be needed to complete or fix this phrase?</p>\n"}, {"tags": ["c", "multithreading", "variables"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 6, "creation_date": 1478096353, "post_id": 40382188, "comment_id": 68016274, "body": "<code>*x_ptr++;</code> increments the pointer. Also you do not wait for the threads."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1478096378, "post_id": 40382188, "comment_id": 68016294, "body": "How do you know they aren&#39;t incremented? It is a multi-threaded program, you can&#39;t know if <code>printf(&quot;%d , %d&quot; , x,y);</code> in main will execute before or after the threads."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1478096465, "post_id": 40382188, "comment_id": 68016367, "body": "And if you fix the pointer incrementation (see mch). You increment the value twice in one loop iteration"}], "answers": [{"tags": [], "owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "is_accepted": true, "score": 5, "last_activity_date": 1478097338, "last_edit_date": 1478097338, "creation_date": 1478096363, "answer_id": 40382249, "question_id": 40382188, "link": "https://stackoverflow.com/questions/40382188/incrementing-variables-value-with-multithreading/40382249#40382249", "title": "Incrementing variable&#39;s value with multithreading", "body": "<p>There is no synchronization happening. In particular, you did not <code>pthread_join()</code> the threads.</p>\n\n<p>What this means is that in all likelihood, the threads did not even run when you are trying to print out the results. They might have run, but you have no way of being sure.</p>\n\n<p>Also, see comment by @mch above: You're indeed not incrementing the counter at all, to add to the previous. So even if the threads <em>did run</em>, the result wouldn't be what you want.</p>\n\n<p>For correct operation, in general, you should either signal a condition variable (and wait on it on the consuming thread) to be sure a result is ready, or join threads prior to accessing the result. Signalling a condition variable is less heavyweight, so that's what you will want to do with repeated tasks rather than spawning/joining thousands of threads.  </p>\n\n<p>(In some cases, one can successfully share data between threads use atomic operations, but this is way too advanced for a beginner in threading. Too easy to make your life quite unhappy with that, stay with cond vars for now.)</p>\n\n<p>You will normally <em>also</em> want to be sure that no \"forgotten\" threads are still running when the program exits, which is another good reason to call <code>pthread_join</code> even if you are not much interested in synchronization otherwise.</p>\n\n<p>You may be inclined to think it doesn't matter much because the program exits anyway, and sometimes that's even true. But in general, this assumption is not valid. You may e.g. very well have garbage in files being written to, or half-written files, as threads are suddenly killed mid-operation.<br>\nOr you might have a worker thread segfault while the operating system suddenly pulls away the memory pages that it's still accessing from under its feet. Which \"looks\" perfectly normal, except when it doesn't.</p>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 2599910, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8f219ec4de6ac7c78f24915e79677dba?s=128&d=identicon&r=PG", "display_name": "Pandey Amit", "link": "https://stackoverflow.com/users/2599910/pandey-amit"}, "is_accepted": false, "score": 1, "last_activity_date": 1478097902, "last_edit_date": 1478097902, "creation_date": 1478097320, "answer_id": 40382607, "question_id": 40382188, "link": "https://stackoverflow.com/questions/40382188/incrementing-variables-value-with-multithreading/40382607#40382607", "title": "Incrementing variable&#39;s value with multithreading", "body": "<p>use following in main before checking reflected values of x and y:</p>\n\n<pre><code>    pthread_join(inc_x_thread, NULL);\n    pthread_join(inc_y_thread, NULL);\n</code></pre>\n\n<p>and </p>\n\n<p>use like this in both functions while incrementing : (*y_ptr)++;  </p>\n\n<pre><code>    void *inc_y(void *y_void_ptr){\n    int *y_ptr = (int *)y_void_ptr;\n    while (++(*y_ptr)&lt;100) {\n    printf(\"y increment to %d \\n\",*y_ptr);\n    (*y_ptr)++;  // correction here\n    }\n    return NULL;\n    }\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 5121373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/682a61eacb08098831bb8a0e1bdbd9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tu\u1ea5n Ph\u1ea1m", "link": "https://stackoverflow.com/users/5121373/tu%e1%ba%a5n-ph%e1%ba%a1m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 40382249, "answer_count": 2, "score": 1, "last_activity_date": 1478097902, "creation_date": 1478096192, "last_edit_date": 1478096460, "question_id": 40382188, "link": "https://stackoverflow.com/questions/40382188/incrementing-variables-value-with-multithreading", "title": "Incrementing variable&#39;s value with multithreading", "body": "<p>I tried to write a Code with 2 threads, which should increment the 2 numbers x y to 100, everytime an increment happens, it should be printed out.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid *inc_x(void *x_void_ptr){\n   int *x_ptr = (int *)x_void_ptr;\n   while (++(*x_ptr)&lt;100) {\n      printf(\"x increment to %d \\n\",*x_ptr);\n      *x_ptr++;\n   }\n   return NULL;\n\n}\n\nvoid *inc_y(void *y_void_ptr){\n   int *y_ptr = (int *)y_void_ptr;\n   while (++(*y_ptr)&lt;100) {\n       printf(\"y increment to %d \\n\",*y_ptr);\n       *y_ptr++;\n   }\n   return NULL;\n}\n\nint main()\n{\n    int x = 0;\n    int y = 0;\n    printf(\"x: 0 , y : 0\\n\");\n    pthread_t inc_x_thread, inc_y_thread;\n    if (pthread_create(&amp;inc_x_thread, NULL, inc_x, &amp;x)) {\n        fprintf(stderr, \"Error creating thread \\n\");\n        return 1;\n    }\n    if (pthread_create(&amp;inc_y_thread, NULL, inc_y, &amp;y)) {\n        fprintf(stderr, \"Error creating thread \\n\");\n        return 2;\n     }\n    printf(\"%d , %d\" , x,y);\n\n    return 0;\n}\n</code></pre>\n\n<p>but my x,y values were not incremented. Can someone tell me why ? Thanks (I am new to C by the way).</p>\n"}, {"tags": ["c", "language-lawyer", "c11"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1478094844, "post_id": 40381560, "comment_id": 68015221, "body": "If both pointers are (or have been converted to) <code>void *</code> (whether qualified or unqualified), both operands are compatible types."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1478095480, "post_id": 40381560, "comment_id": 68015665, "body": "Huh? You exactly cite the third case of the constraints. So constraints fulfilled, everythig is fine. The contraints apply before any later conversions."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478098254, "post_id": 40381613, "comment_id": 68017660, "body": "Two <code>void *</code> cannot be compatible types per se. Thus they are explicitly listed in the constraints."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478100566, "post_id": 40381613, "comment_id": 68019403, "body": "@Olaf Sir, i&#39;m confused. Considering <code>void</code> as an object type, why two pointers to <code>void</code> are not compatible type pointers? Sorry, if this is silly, but I am not getting it right now."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478100763, "post_id": 40381613, "comment_id": 68019567, "body": "Also, if you don&#39;t mind (<i>I am pretty sure You would not :)</i>), is that the reason for DV? Otherwise, I&#39;d like to have an explanation from whoever is the DV&#39;r, , because a silent DV on a language-lawyer post is dangerous, it might be a sign of a serious misconception which needs to be rectified. :("}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478101400, "post_id": 40381613, "comment_id": 68020041, "body": "@Olaf also, why this happens specifically for <code>void</code>? Two pointers to <code>int</code> qualifies for the second bullet in 6.5.9.2, right? Then why don&#39;t two pointers to <code>void</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478114121, "post_id": 40381613, "comment_id": 68027662, "body": "Question is: are incomplete types compatible to each other? Resp. pointers to incomplete types. Sorry, I just had time to check the standard now and I did not find proof for my assumption (was very sure about that though). Still have a feeling they are not (that would automatically imply you cannot subtract two <code>void *</code> or compare otherwise than for equality), but without proof, I will dummy-edit the text to remove the DV."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1478114126, "last_edit_date": 1478114126, "creation_date": 1478094621, "answer_id": 40381613, "question_id": 40381560, "link": "https://stackoverflow.com/questions/40381560/how-to-understand-the-conversion-rule-when-a-pointer-to-an-object-type-compare/40381613#40381613", "title": "How to understand the conversion rule when a &quot;pointer to an object type&quot; compares for eqality with a &quot;pointer to a void&quot;?", "body": "<p>I never thought from this angle, but my understanding is, two <code>void *</code>s are (after the conversion, as per the equality operator property) compatible type.</p>\n\n<p>My reference is to </p>\n\n<blockquote>\n  <p>\"- both operands are pointers to qualified or unqualified versions of compatible types;\"</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1478095670, "post_id": 40381828, "comment_id": 68015797, "body": "Can you give an example of a &quot;pointer to a non-object type&quot;? Because I thought (and as pointed out by you, was wrong) that the only such type is <code>void*</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1478095715, "post_id": 40381828, "comment_id": 68015819, "body": "No need to get that far actually. The constraints must be fullfilled <b>before</b> any conversion for the actual comparison. Bullet 3 of the constraints is exactly OPs starting point."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1478095722, "post_id": 40381828, "comment_id": 68015824, "body": "@user3528438, the distinction is between object pointers and function pointers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1478095815, "post_id": 40381828, "comment_id": 68015868, "body": "@user3528438: As the answer clearly states: <code>void</code> <b>is</b> an object type, too. Being incomplete, you just cannot define variables of this type. Maybe you should read the definition of &quot;object&quot; in the C standard. It is not the same as for typical OOPL."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1478096134, "post_id": 40381828, "comment_id": 68016086, "body": "@JohnBollinger That&#39;s where I&#39;m mistaking. Thanks!"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1478095569, "last_edit_date": 1478095569, "creation_date": 1478095188, "answer_id": 40381828, "question_id": 40381560, "link": "https://stackoverflow.com/questions/40381560/how-to-understand-the-conversion-rule-when-a-pointer-to-an-object-type-compare/40381828#40381828", "title": "How to understand the conversion rule when a &quot;pointer to an object type&quot; compares for eqality with a &quot;pointer to a void&quot;?", "body": "<blockquote>\n  <p>If \"former\" is \"latter\" are \"pointer to object type\" and \"pointer to a void\", then it means, after the conversion, the compare happens on two <code>void*</code>s,</p>\n</blockquote>\n\n<p>Yes, that's certainly how I read it.</p>\n\n<blockquote>\n  <p>which according to 6.5.9.2, is undefined:</p>\n</blockquote>\n\n<p>No.  You quote section 6.5.9.2 of the standard, apparently in the belief that the case you are asking about is not covered by that section's enumerated list of alternatives, but you are mistaken.  This alternative covers the case:</p>\n\n<blockquote>\n  <p>one operand is a pointer to an object type and the other is a pointer to a qualified or unqualified version of void;</p>\n</blockquote>\n\n<p>It is important here to understand that a pointer to <code>void</code> <em>is</em> a pointer to an object type, for</p>\n\n<blockquote>\n  <p>The <code>void</code> type  comprises  an  empty  set  of  values;  <strong><em>it  is  an  incomplete  object  type</em></strong>  that cannot be completed.</p>\n</blockquote>\n\n<p>(6.2.5/19; emphasis added)</p>\n\n<p>6.5.9.2 should not be interpreted to suggest that <code>void</code> is not an object type; rather it says that <code>void *</code> is comparable to <em>all</em> object pointer types, including, of course, itself.</p>\n\n<p>As @SouravGhosh observed first, this alternative also covers the case in question:</p>\n\n<blockquote>\n  <p>both operands are pointers to qualified or unqualified versions of compatible types</p>\n</blockquote>\n\n<p>for every type is compatible with itself (6.2.7/1).</p>\n"}], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 40381828, "answer_count": 2, "score": -4, "last_activity_date": 1478114126, "creation_date": 1478094432, "last_edit_date": 1478094839, "question_id": 40381560, "link": "https://stackoverflow.com/questions/40381560/how-to-understand-the-conversion-rule-when-a-pointer-to-an-object-type-compare", "title": "How to understand the conversion rule when a &quot;pointer to an object type&quot; compares for eqality with a &quot;pointer to a void&quot;?", "body": "<p><a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.9\" rel=\"nofollow noreferrer\">n1570 6.5.9.5 (Equality operators)</a> says:</p>\n\n<blockquote>\n  <p>5 ......If one operand is a pointer to an object type and the other is a pointer to a qualified or unqualified version of void, the former is converted to the type of the latter. </p>\n</blockquote>\n\n<p>If \"former\" is \"latter\" are \"pointer to object type\" and \"pointer to a void\", then it means, after the conversion, the compare happens on two <code>void*</code>s, which according to 6.5.9.2, is undefined:</p>\n\n<blockquote>\n  <p>2.One of the following shall hold:</p>\n  \n  <p>both operands have arithmetic type;</p>\n  \n  <p>both operands are pointers to qualified or unqualified versions of compatible types;</p>\n  \n  <p>one operand is a pointer to an object type and the other is a pointer to a qualified or unqualified version of void; or</p>\n  \n  <p>one operand is a pointer and the other is a null pointer constant.</p>\n</blockquote>\n\n<p>Is this an language defect in N1570?</p>\n"}, {"tags": ["c", "pipe", "named-pipes"], "comments": [{"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1478096016, "post_id": 40381500, "comment_id": 68016002, "body": "@moooeeeep  Not relevant but already visited links. Infact the definition in my query is from those links. Check slide 32 <a href=\"https://www.youtube.com/watch?v=2DrjQBL5FMU\" rel=\"nofollow noreferrer\">here</a>. In file types, Pipe is different from character/block device file. <code>ls -l MYFIFO</code> does not give major/minor number"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1478096233, "post_id": 40381500, "comment_id": 68016187, "body": "The mere fact that the device type for a FIFO (named pipe) is different from a block device or character device doesn&#39;t mean that there isn&#39;t a device driver for it \u2014 at least, not if you interpret &#39;device driver&#39; as &#39;code in the kernel that ensures the correct behaviour of the device being accessed&#39;.  Regular files are different from block and character devices too, but there are definitely device drivers (and file system management code) in the kernel to make them work as expected.  Regular files don&#39;t expose major/minor numbers either."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478096451, "post_id": 40381500, "comment_id": 68016353, "body": "@JonathanLeffler If there is a device driver for named pipe, then why don&#39;t I see the major/minor number on <code>ls -l MYFIFO</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478096486, "post_id": 40381500, "comment_id": 68016383, "body": "Because it isn&#39;t a device driver accessed via major/minor."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478097371, "post_id": 40381500, "comment_id": 68016997, "body": "@JonathanLeffler  So, File types, &quot;RegularFile/Directory/SymbolicLink&quot; does not have corresponding device driver. File types, &quot;Character/Block device file, Pipe and Socket&quot; have corresponding device driver with device file as interface. Is that correct?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478097743, "post_id": 40381500, "comment_id": 68017265, "body": "I already noted that regular files could be said to have device drivers \u2014 at least, they have code that handles the file type.  ditto sockets, doors, directories, symlinks, ...   In fact,when it comes down to it, all file types are handled by the kernel via code that handles that file type..  Computers don&#39;t handle physical paper files because no-one&#39;s worked out how to write a device driver for the job."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1478097798, "post_id": 40381500, "comment_id": 68017301, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/127190/discussion-between-overexchange-and-jonathan-leffler\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1478101562, "post_id": 40383452, "comment_id": 68020148, "body": "<a href=\"http://tldp.org/LDP/lpg/node16.html#SECTION00731000000000000000\" rel=\"nofollow noreferrer\">Here</a> it says, named pipes exists as device files in filesystem. Does that not mean, there is corresponding device driver? or Is this device file just for IPC and nothing more than that?"}, {"owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "reply_to_user": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1478144153, "post_id": 40383452, "comment_id": 68038094, "body": "@overexchange: It means that there is no corresponding device driver (and &quot;device file&quot; is just used to mark it as special in some way and doesn&#39;t imply there&#39;s a driver); and that there is a &quot;named pipe driver&quot;; and that whatever is on the other end of the named pipe is a &quot;driver&quot; (even if it&#39;s a user-space thing). It means all these mutually exclusive things at the same time (where someone who defines &quot;device driver&quot; like I do thinks one thing, and other people that define &quot;device driver&quot; in different ways think different things, and nobody is right/wrong because there&#39;s no consensus)."}], "tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 1, "last_activity_date": 1478099603, "creation_date": 1478099603, "answer_id": 40383452, "question_id": 40381500, "link": "https://stackoverflow.com/questions/40381500/does-named-pipe-have-corresponding-device-driver/40383452#40383452", "title": "Does Named pipe have corresponding device driver?", "body": "<p>Lets define \"kernel\" as 2 categories of things - the \"core services\" (like physical memory management, scheduler, etc), and then \"non-core services\" (things that aren't always present, like device drivers, file systems, etc - e.g. like ext2 might not be present because you're using RieserFS instead). <em>Note that this is already limited to specific type of kernel (e.g. monolithic kernels and not micro-kernel).</em></p>\n\n<p>Lets define \"device driver\" as a piece of code intended sit between one abstraction (the kernel's device driver API, as determined by the OS/kernel designer) and another abstraction (the hardware interface provided by the corresponding device, as determined by hardware designer/manufacturer).</p>\n\n<p>For almost all kernels, one of the \"core services\" is IPC (Inter-Process Communication) - some way for processes to communicate. For lots of kernels there are multiple different forms of IPC (shared memory, messages, signals, etc). Pipes are just another form of IPC.</p>\n\n<p>Most pipes don't have a name - you just get some sort of opaque handle (e.g. a file descriptor). A named pipe is the same as a normal pipe; except that you associate a name to the pipe so that other processes can find the opaque handle from a \"known\" name.</p>\n\n<p>Based on all of the above; named pipes do not have a device driver (and are a \"core service\" and therefore aren't even in the same category as device drivers).</p>\n\n<p>However, \"based on all of the above\" means \"based on my definitions that I made up\". The real problem here is that there's no real consensus for how any of the terminology is defined. This is why good books (and good OS documentation) will explicitly define these things. This is also why about half of the people that read this answer will disagree (because they define things like \"device driver\" differently).</p>\n"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478099603, "creation_date": 1478094263, "last_edit_date": 1478096254, "question_id": 40381500, "link": "https://stackoverflow.com/questions/40381500/does-named-pipe-have-corresponding-device-driver", "title": "Does Named pipe have corresponding device driver?", "body": "<blockquote>\n  <p>Definition:\n  The device file is the <strong>interface</strong> between programs and the device driver. The <strong>device driver</strong> is in the kernel; the programs (applications) are in user space. The way a program can access the driver in the kernel is via the appropriate device special file.</p>\n</blockquote>\n\n<p>Named pipe exist as a device special file in the file system.</p>\n\n<p>My question:</p>\n\n<p>I the case of named pipe, if it is a device special file, then(by definition) device file is an interface to some device driver in kernel space. Does corresponding <em>device driver</em> exist in kernel space?</p>\n\n<p>Because, I do not see major/minor number below</p>\n\n<pre><code>$ ls -l MYFIFO\n        prw-r--r--   1 root     root            0 Dec 14 22:15 MYFIFO|\n</code></pre>\n"}, {"tags": ["c", "file", "directory"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478094647, "post_id": 40381461, "comment_id": 68015059, "body": "It&#39;s time to learn how to use a debugger."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1478095982, "post_id": 40381461, "comment_id": 68015979, "body": "It&#39;s actually past time."}], "answers": [{"comments": [{"owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 0, "creation_date": 1478094347, "post_id": 40381505, "comment_id": 68014829, "body": "Thank you. Do you have any suggestions on how I should go about this?"}, {"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "reply_to_user": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "edited": false, "score": 2, "creation_date": 1478094484, "post_id": 40381505, "comment_id": 68014928, "body": "use strcmp() with the name of the directory to make sure the name is neither &quot;.&quot; nor &quot;..&quot;"}], "tags": [], "owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "is_accepted": true, "score": 4, "last_activity_date": 1478094403, "last_edit_date": 1478094403, "creation_date": 1478094274, "answer_id": 40381505, "question_id": 40381461, "link": "https://stackoverflow.com/questions/40381461/printing-all-files-within-a-directory-and-its-subdirectories/40381505#40381505", "title": "Printing all files within a directory and its subdirectories", "body": "<p>Every directory contains an entry \".\" that points to itself.\nYou must make sure to skip this entry (and also the \"..\" entry that points to the parent directory).</p>\n\n<p>So for your example, add an extra condition to the line</p>\n\n<pre><code>if (S_ISDIR(statInfo.st_mode))\n</code></pre>\n"}], "owner": {"reputation": 1562, "user_id": 6828329, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/cb5516b7f44760e32dcceabb543a0ebc?s=128&d=identicon&r=PG&f=1", "display_name": "The Pointer", "link": "https://stackoverflow.com/users/6828329/the-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 40381505, "answer_count": 1, "score": 1, "last_activity_date": 1478129145, "creation_date": 1478094144, "last_edit_date": 1478108603, "question_id": 40381461, "link": "https://stackoverflow.com/questions/40381461/printing-all-files-within-a-directory-and-its-subdirectories", "title": "Printing all files within a directory and its subdirectories", "body": "<p>My goal is to print all files within a directory and its subdirectories. If the path is a file, I print out the path. However, if the path is a directory, then I recursively call <code>pathInfo(pathnm)</code>, where <code>pathnm</code> is the path. My reasoning for this is that eventually it will reach the last directory, in which case it will print all of the files in that directory. As it progresses towards the last directory, it will successively print out the files it encounters. Eventually, all of the files in a given path directory and its subdirectories will be printed. </p>\n\n<p>The problem is that at runtime, the program fails to print file names. Instead, it prints continuous lines of rubbish, such as <code>/Users/User1//././././././././././././</code>. This occurs until the program exits with the error <code>progname: Too many open files</code>.</p>\n\n<p>I would appreciate input on what I am doing incorrectly and how I can fix it so that the program behaves in the way I have described. Please  structure your answers in a way that is clear to someone new to programming.</p>\n\n<p>Thank you.</p>\n\n<p><strong>pathInfo function</strong></p>\n\n<pre><code>#include \"cfind.h\"\n\nvoid getInfo(char *pathnm, char *argv[]) \n{\n    DIR *dirStream; // pointer to a directory stream\n    struct dirent *dp; // pointer to a dirent structure\n    char *dirContent = NULL; // the contents of the directory\n    dirStream = opendir(pathnm); // assign to dirStream the address of pathnm\n    if (dirStream == NULL)\n    {\n        perror(argv[0]);\n        exit(EXIT_FAILURE);\n    }\n    while ((dp = readdir(dirStream)) != NULL) // while readdir() has not reached the end of the directory stream\n    {\n        struct stat statInfo; // variable to contain information about the path\n        asprintf(&amp;dirContent, \"%s/%s\", pathnm, dp-&gt;d_name); // writes the content of the directory to dirContent // asprintf() dynamically allocates memory\n        fprintf(stdout, \"%s\\n\", dirContent);\n        if (stat(dirContent, &amp;statInfo) != 0) // if getting file or directory information failed\n        {\n            perror(pathnm);\n            exit(EXIT_FAILURE);\n        }\n        else if (aflag == true) // if the option -a was given\n        {\n            if (S_ISDIR(statInfo.st_mode)) // if the path is a directory, recursively call getInfo()  \n            {\n                getInfo(dirContent, &amp;argv[0]);\n            }\n            else if(S_ISREG(statInfo.st_mode)) // if the path is a file, print all contents\n            {\n                fprintf(stdout, \"%s\\n\", dirContent);\n            }\n            else continue;\n        }\n        free(dirContent);\n    }\n    closedir(dirStream);\n}\n</code></pre>\n"}, {"tags": ["c", "vba", "excel"], "comments": [{"owner": {"reputation": 20828, "user_id": 4088852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41cfu.png?s=128&g=1", "display_name": "Comintern", "link": "https://stackoverflow.com/users/4088852/comintern"}, "edited": false, "score": 1, "creation_date": 1478093897, "post_id": 40381291, "comment_id": 68014495, "body": "<a href=\"http://stackoverflow.com/q/31409006/4088852\">Possibly relevant.</a>"}, {"owner": {"reputation": 20828, "user_id": 4088852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/41cfu.png?s=128&g=1", "display_name": "Comintern", "link": "https://stackoverflow.com/users/4088852/comintern"}, "edited": false, "score": 1, "creation_date": 1478093989, "post_id": 40381291, "comment_id": 68014575, "body": "Also <a href=\"http://stackoverflow.com/q/6134666/4088852\">this</a>."}], "owner": {"reputation": 838, "user_id": 5391191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-U8c9fH2K_MQ/AAAAAAAAAAI/AAAAAAAAAEo/uSAxoPsAvvs/photo.jpg?sz=128", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/5391191/jacob-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478093642, "creation_date": 1478093642, "question_id": 40381291, "link": "https://stackoverflow.com/questions/40381291/unexpected-results-when-returing-bstr-from-dll-to-microsoft-excel-vba-applicatio", "title": "Unexpected Results When Returing BSTR from DLL to Microsoft Excel VBA Application", "body": "<p>I am writing a VBA extension in C, from what I have read VBA uses BSTR, which is just a WCHAR* with a length prefix. I have a function:</p>\n\n<pre><code>__declspec(dllexport) VB_STRING _stdcall getStr()\n{\n    return SysAllocString(L\"This is a string.\");\n}\n</code></pre>\n\n<p>Which I call in VBA using:</p>\n\n<pre><code>Private Declare Function getStr Lib \"main.dll\" () As String\n\nSub do_stuff()\n    Range(\"A1\").value = getStr()\nEnd Sub\n</code></pre>\n\n<p>However, the cell A1 will only contain 'T' rather than the entire string. Could anyone give any advice or show me where I am going wrong?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1478093732, "post_id": 40381285, "comment_id": 68014395, "body": "simple math. <code>1+2*3+4</code> is 11. Defines are not functions, they&#39;re simple text-replacement."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478096240, "post_id": 40381285, "comment_id": 68016194, "body": "Every half-decent C book will have an example like this, with an explanation why it isn&#39;t working and how to fix it with parenthesis."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1478099436, "post_id": 40381285, "comment_id": 68018558, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20182897/why-do-i-get-different-results-when-using-a-function-versus-a-macro\">Why do I get different results when using a function versus a macro?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1478093758, "creation_date": 1478093758, "answer_id": 40381330, "question_id": 40381285, "link": "https://stackoverflow.com/questions/40381285/macro-and-similar-function-return-different-results/40381330#40381330", "title": "Macro and similar function return different results", "body": "<p>According to your macro, <code>prod(1+2,3+4)</code> is expanded to <code>1+2*3+4</code> which equals to <code>11</code>. Use parens to fix it:</p>\n\n<pre><code>#define prod(x, y) ((x)*(y))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 2, "last_activity_date": 1478094572, "last_edit_date": 1478094572, "creation_date": 1478093887, "answer_id": 40381370, "question_id": 40381285, "link": "https://stackoverflow.com/questions/40381285/macro-and-similar-function-return-different-results/40381370#40381370", "title": "Macro and similar function return different results", "body": "<p>Operator precedence is biting you. </p>\n\n<p>With</p>\n\n<pre><code>#define prod(x,y) x*y\n</code></pre>\n\n<p>the line </p>\n\n<pre><code>printf(\"%d\",prod(1+2,3+4));\n</code></pre>\n\n<p>gets expanded to</p>\n\n<pre><code>printf(\"%d\",1+2*3+4);\n</code></pre>\n\n<p>Note that <code>*</code> has higher precedence than <code>+</code>, so this is evaluated as <code>1 + (2 * 3) + 4</code> or <code>11</code>.</p>\n\n<p><strong>Solution:</strong></p>\n\n<p>Surrround the parameters with parenthesis in your <code>#define</code>:</p>\n\n<pre><code>#define prod(x,y) ((x)*(y))\n</code></pre>\n\n<p>The line will now be expanded to:</p>\n\n<pre><code>printf(\"%d\",((1+2)*(3+4)));\n</code></pre>\n\n<p>The purpose of the extra set of parenthesis around the entire expression is to make the expression work as you want when used in conjunction with an operator where evaluation order matters.</p>\n\n<p><code>prod(4,3)/prod(1,2))</code> gets expanded to <code>((4)*(3))/((1)*(2))</code> or <code>6</code>. Without the outer parenthesis the expansion would be <code>(4)*(3)/(1)*(2)</code> or <code>24</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "is_accepted": false, "score": 1, "last_activity_date": 1478095057, "creation_date": 1478095057, "answer_id": 40381778, "question_id": 40381285, "link": "https://stackoverflow.com/questions/40381285/macro-and-similar-function-return-different-results/40381778#40381778", "title": "Macro and similar function return different results", "body": "<p>With your definition of</p>\n\n<pre><code>#define prod(x,y) x*y\n</code></pre>\n\n<p>The line </p>\n\n<pre><code>printf(\"%d\",prod(1+2,3+4));\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>printf(\"%d\",1+2*3+4);\n</code></pre>\n\n<p>which will evaluate to </p>\n\n<pre><code>printf(\"%d\",1+6+4);\n</code></pre>\n\n<p>yielding</p>\n\n<pre><code>11\n</code></pre>\n\n<p>A function evaluates things differently.  With the function</p>\n\n<pre><code>int prod(int x, int y) { return x*y; }\n</code></pre>\n\n<p>the call</p>\n\n<pre><code>printf(\"%d\",prod(1+2,3+4));\n</code></pre>\n\n<p>will have to collapse (evaluate) the parameters before they can be passed.  This is because C is \"pass by value\" in it's parameter handling style.  Even pointers, which are technically references are turned into values representing the reference and those values are passed.  So the call reduces to</p>\n\n<pre><code>printf(\"%d\",prod(3,7));\n</code></pre>\n\n<p>which inside the function becomes</p>\n\n<pre><code>return 3*7;\n</code></pre>\n\n<p>or\n    return 21</p>\n\n<p>There's a valueable lesson here.  <strong>Macros don't understand the language.</strong>  They are just text substitutions, and they will not honor types, operator precedence, or any other language element you've taken the time to learn.  Basically the macro language is a different-than-C language, and a much more primitive one than C.</p>\n"}], "owner": {"reputation": 101, "user_id": 6823025, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd52bbfc63349da6a5c34343efe3a729?s=128&d=identicon&r=PG&f=1", "display_name": "Trung \u0110\u1eb7ng", "link": "https://stackoverflow.com/users/6823025/trung-%c4%90%e1%ba%b7ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 40381370, "answer_count": 3, "score": 1, "last_activity_date": 1478095057, "creation_date": 1478093631, "last_edit_date": 1478093996, "question_id": 40381285, "link": "https://stackoverflow.com/questions/40381285/macro-and-similar-function-return-different-results", "title": "Macro and similar function return different results", "body": "<p>I'm quite confusing about this:</p>\n\n<pre><code>    #define prod(x,y) x*y\n</code></pre>\n\n<p>The following function call prints <code>11</code> in the console:</p>\n\n<pre><code>    printf(\"%d\",prod(1+2,3+4));\n</code></pre>\n\n<p>But when I use <code>prod(x,y)</code> as a function returning <code>x*y</code>, it returns 21.\nWhy the results are different? I thought <code>#define</code> should give <code>prod(x,y) = x*y</code>.</p>\n"}, {"tags": ["c", "function", "pointers"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 2, "creation_date": 1478093178, "post_id": 40381094, "comment_id": 68014027, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  &quot;It does not return what it&#39;s supposed to.&quot;  Which is what, exactly?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478093327, "post_id": 40381094, "comment_id": 68014129, "body": "You write <i>It does not return what it&#39;s supposed to</i>. But then <b>what</b> ist it supposed to return ?"}, {"owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "edited": false, "score": 0, "creation_date": 1478093376, "post_id": 40381094, "comment_id": 68014164, "body": "There is an array Arv. The function should get the biggest and smallest number from the array Arv and put them to array[0] and array[1] respectively."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478093407, "post_id": 40381094, "comment_id": 68014180, "body": "@KarlJoonasVolke please edit your qauestion and make that clear <i>there</i>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478190182, "post_id": 40381094, "comment_id": 68063261, "body": "your sample code does not compile, so it cannot be tested anyway.  You don&#39;t explain what you expect from that code, so what can we do with your question?"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 1, "last_activity_date": 1478093793, "last_edit_date": 1478093793, "creation_date": 1478093289, "answer_id": 40381183, "question_id": 40381094, "link": "https://stackoverflow.com/questions/40381094/two-or-more-values-from-function-in-c/40381183#40381183", "title": "Two or more values from function in C", "body": "<p>Your approach <em>is</em> a valid way of returning more than one value back from a function. <strong>But</strong>:</p>\n\n<p>For your maximum, you are merely returning the element of the array with the greatest index that is larger than the first element. (<code>temp</code> does not change once set). That's an algorithmic failure: e.g. your_max(1, 3, 2, 0) would return 2.</p>\n\n<p>You don't actually need <code>temp</code>: you can compare <code>arv[i] &gt; array[0]</code>, having initialised <code>array[0]</code> to <code>arv[0]</code>.</p>\n\n<p>Ditto for the the computation of the minimum.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1478094101, "post_id": 40381417, "comment_id": 68014660, "body": "Yup. I have a feeling the OP knows that. The <i>real</i> issue is the algorithm; which you have not addressed."}, {"owner": {"reputation": 14233, "user_id": 916000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/eumU0.png?s=128&g=1", "display_name": "Taha Paksu", "link": "https://stackoverflow.com/users/916000/taha-paksu"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1478094187, "post_id": 40381417, "comment_id": 68014718, "body": "I&#39;ve only read <i>return two values out of function</i>. And this is one way to do this. &quot;Algorithm&quot; is not related with this I guess."}, {"owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "edited": false, "score": 0, "creation_date": 1478094189, "post_id": 40381417, "comment_id": 68014720, "body": "Thanks for the input, but this uses structures, which i said I didnt want."}, {"owner": {"reputation": 14233, "user_id": 916000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/eumU0.png?s=128&g=1", "display_name": "Taha Paksu", "link": "https://stackoverflow.com/users/916000/taha-paksu"}, "edited": false, "score": 0, "creation_date": 1478094242, "post_id": 40381417, "comment_id": 68014766, "body": "Yep, I missed that.I&#39;ll leave this for someone who&#39;s looking to solve this with structures then."}, {"owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "edited": false, "score": 0, "creation_date": 1478094381, "post_id": 40381417, "comment_id": 68014860, "body": "Maybe soon I will learn using structures. This will come handy then, thanks."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1478190289, "post_id": 40381417, "comment_id": 68063328, "body": "the real issue is the op has not stated actual, verifiable, code sample, and has not stated also what&#39;s the expected output, so all you are doing is to speculate about what he could think."}, {"owner": {"reputation": 14233, "user_id": 916000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/eumU0.png?s=128&g=1", "display_name": "Taha Paksu", "link": "https://stackoverflow.com/users/916000/taha-paksu"}, "edited": false, "score": 0, "creation_date": 1478203111, "post_id": 40381417, "comment_id": 68070500, "body": "80% of the questions of SO is like that. Should we all argue about the philosophy or grammar of the questions, or shall we try helping?"}], "tags": [], "owner": {"reputation": 14233, "user_id": 916000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/eumU0.png?s=128&g=1", "display_name": "Taha Paksu", "link": "https://stackoverflow.com/users/916000/taha-paksu"}, "is_accepted": false, "score": 1, "last_activity_date": 1478094021, "creation_date": 1478094021, "answer_id": 40381417, "question_id": 40381094, "link": "https://stackoverflow.com/questions/40381094/two-or-more-values-from-function-in-c/40381417#40381417", "title": "Two or more values from function in C", "body": "<p>One way to do this is to create a structure:</p>\n\n<pre><code>typedef struct {\n   double minVal;\n   double maxVal;\n} MIN_MAX_VALS;\n\nMIN_MAX_VALS suurim(double arv[], int x, double *array)\n{ \n    MIN_MAX_VALS xValues;\n    int i; \n    double temp; \n    temp = arv[0]; \n    for(i = 1; i &lt; x; i++) // biggest \n    {\n        if (arv[i] &gt; temp)\n        {\n            array[0] = arv[i];\n        }\n    }\n    for(i = 1; i &lt; x; i++) // smallest\n    {\n        if (arv[i] &lt; temp)\n        {\n            array[1] = arv[i];\n        }\n    }\n    xValues.minVal = array[0];\n    xValues.maxVal = array[1];\n    return xValues;\n}\n\nMIN_MAX_VALS result = suurim(arv, mituArvu, array);\nprintf(\"min:%0.1lf\\n\", result.minVal);\nprintf(\"max:%0.1lf\\n\", result.maxVal);\n</code></pre>\n\n<p>Just a way to do this. Might be optimised with pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 501, "user_id": 5349798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eea4b944c489813694d8ce3da3720e2?s=128&d=identicon&r=PG&f=1", "display_name": "renonsz", "link": "https://stackoverflow.com/users/5349798/renonsz"}, "is_accepted": false, "score": 0, "last_activity_date": 1478095697, "last_edit_date": 1478095697, "creation_date": 1478094557, "answer_id": 40381587, "question_id": 40381094, "link": "https://stackoverflow.com/questions/40381094/two-or-more-values-from-function-in-c/40381587#40381587", "title": "Two or more values from function in C", "body": "<p>Your <code>temp</code> variable is not updated properly.</p>\n\n<p>As for returning an array of parameters:</p>\n\n<p>You have to pass a pointer as a reference to a previously allocated object. You do not have to return with the pointer. Values would be updated when you call the function. It is customary to pass the array size among arguments.</p>\n\n<pre><code>void fun( double * ret_val, int size )\n{\n    int idx;\n    for( idx = 0; idx &lt; size; ++idx )\n    {\n       ret_val[idx] = idx;\n    }\n}\n\n/* invocation: */\n\n{\n     double arr[] = { -.2, .3 };\n     int size = sizeof( arr ) / sizeof( arr[0] );\n     fun( arr, size );\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 6915599, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10206955695960115/picture?type=large", "display_name": "Karl", "link": "https://stackoverflow.com/users/6915599/karl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 40381183, "answer_count": 3, "score": 1, "last_activity_date": 1478095697, "creation_date": 1478093043, "last_edit_date": 1478093546, "question_id": 40381094, "link": "https://stackoverflow.com/questions/40381094/two-or-more-values-from-function-in-c", "title": "Two or more values from function in C", "body": "<p>Im trying to get 2 values from a function. I've googled the problem, but I seem to mess up the code myself.</p>\n\n<pre><code>double* suurim(double arv[], int x, double *array)\n{ \n    int i; \n    double temp; \n    temp = arv[0]; \n    for(i = 1; i &lt; x; i++) // biggest \n    {\n        if (arv[i] &gt; temp)\n        {\n            array[0] = arv[i];\n        }\n    }\n    for(i = 1; i &lt; x; i++) // smallest\n    {\n        if (arv[i] &lt; temp)\n        {\n            array[1] = arv[i];\n        }\n    }\n    return array;\n}\n\nsuurim(arv, mituArvu, array);\nprintf(\"%0.1lf\\n\", array[0]);\n</code></pre>\n\n<p>It does not return what it's supposed to. What is going on here? </p>\n\n<p>There is an array Arv. The function should get the biggest and smallest number from the array Arv and put them to array[0] and array[1] respectively.</p>\n\n<p><br>\n<strong>edit</strong> This i probably a duplicate, but other questions answers contain structures, which I don't want.</p>\n"}, {"tags": ["c", "multithreading", "gtk3"], "comments": [{"owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "edited": false, "score": 0, "creation_date": 1478137254, "post_id": 40381087, "comment_id": 68036439, "body": "If this was the answer, you can also post it as such. Self-answering is suggested if you found the answer or an answer to your question. Welcome!"}], "answers": [{"tags": [], "owner": {"reputation": 1444, "user_id": 6062567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e87060f0ce67ed68a097ac5186027c5?s=128&d=identicon&r=PG&f=1", "display_name": "oldtechaa", "link": "https://stackoverflow.com/users/6062567/oldtechaa"}, "is_accepted": false, "score": 0, "last_activity_date": 1478698687, "creation_date": 1478698687, "answer_id": 40508358, "question_id": 40381087, "link": "https://stackoverflow.com/questions/40381087/with-gtk3-how-can-i-wait-for-user-input-in-a-secondary-thread/40508358#40508358", "title": "With Gtk3, how can I wait for user input in a secondary thread?", "body": "<p>Use:</p>\n\n<pre><code>GThread *g_thread_new (const gchar *name,\n          GThreadFunc func,\n          gpointer data);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>guint gdk_threads_add_idle (GSourceFunc function,\n          gpointer data);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7104771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2820f1c08b31ce4fbc2442442ebceb?s=128&d=identicon&r=PG&f=1", "display_name": "qaco", "link": "https://stackoverflow.com/users/7104771/qaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478700659, "creation_date": 1478093032, "last_edit_date": 1478700659, "question_id": 40381087, "link": "https://stackoverflow.com/questions/40381087/with-gtk3-how-can-i-wait-for-user-input-in-a-secondary-thread", "title": "With Gtk3, how can I wait for user input in a secondary thread?", "body": "<p>I've an issue with multithreading on gtk3 (C language).</p>\n\n<p>I'm implementing a turn-by-turn game, with one human and several bots.\nThere is a loop (which is a thread) where bots play one by one, until it's the human's turn.\nThen, the loop stops and waits for a correct input from the human (ie from a callback in the main loop).\nBut when the loop stops, it freezes the main loop to : no displaying, and no callbacks.\nIf I don't call my own loop before the main loop, the main loop works fine.</p>\n\n<p>Here is the loop and the callback.</p>\n\n<pre><code>static Player* human ;\nstatic GCond data_cond ;\nstatic GMutex data_mutex ;\n\nvoid my_loop(Player** players, int how_many_players) {\n\n  for(int i = 0 ; ; i++) {\n\n    if (*(players + i) != human)\n      /* a bot's turn */\n    else {\n      g_mutex_lock(&amp;data_mutex) ;\n      g_cond_wait(&amp;data_cond, &amp;data_mutex) ;\n      g_mutex_unlock(&amp;data_mutex) ;\n    }\n    if (i == how_many_players)\n      i = 0 ;\n  }\n}\n\ngboolean cb_human_input (GtkWidget *event_box,\n                         GdkEvent  *event,\n                         gpointer data) {\n  if (right_input(event_box, event, data)) {\n    do_input (event_box, event, data) ;  \n    g_cond_signal(&amp;data_cond) ;\n    return TRUE ;\n  }\n  else\n    return FALSE ;\n}\n</code></pre>\n\n<p>And here is how I call the loop in main.</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n\n  gtk_init(&amp;argc,&amp;argv);\n\n  /* Initializations and signals-connecting.\n     ...\n  */\n\n  // Here I run my loop ; if I don't, the main loop works fine\n  gdk_threads_add_idle(my_loop, joueurs) ;\n\n  gtk_main();\n}\n</code></pre>\n"}, {"tags": ["c", "microcontroller", "stm32"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1478093560, "post_id": 40380972, "comment_id": 68014290, "body": "When one switch closes, set a flag. When the other switch closes, clear the flag. Count the number of times the flag is cleared. I don&#39;t see what the problem is here."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478093836, "post_id": 40380972, "comment_id": 68014455, "body": "Could you draw a timing diagram of the state of two switches ? Your explanation is hard to understand."}, {"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1478097288, "post_id": 40380972, "comment_id": 68016938, "body": "It is not clear. Are you interested in how to configure the hardware to read the switches or you can read the switches already and interested in an algorithm to process the data?"}, {"owner": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1478097420, "post_id": 40380972, "comment_id": 68017030, "body": "STM32L what? L0, L1 or L4 it matters. Also add a link to the datasheet of the watermeter."}, {"owner": {"reputation": 1, "user_id": 6194586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6615b186f92687231b1418d730c4e065?s=128&d=identicon&r=PG&f=1", "display_name": "Haloma", "link": "https://stackoverflow.com/users/6194586/haloma"}, "reply_to_user": {"reputation": 6260, "user_id": 3820025, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zXOn4.png?s=128&g=1", "display_name": "Bence Kaulics", "link": "https://stackoverflow.com/users/3820025/bence-kaulics"}, "edited": false, "score": 0, "creation_date": 1479308042, "post_id": 40380972, "comment_id": 68502629, "body": "@Bence Kaulics- here is the link to the data sheet of the water meter <a href=\"https://drive.google.com/file/d/0B-sgrw61IOvCYlNZdDdXMnZZWDg/view\" rel=\"nofollow noreferrer\">drive.google.com/file/d/0B-sgrw61IOvCYlNZdDdXMnZZWDg/view</a>           I can read either of the switches separately. Am only having issue combining the two outputs to make a round/cycle. Am using STM32L100RBT6"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478118222, "post_id": 40384963, "comment_id": 68029885, "body": "Surely the point is you don&#39;t need to debounce with this system. It is like a mechanical clock escapement. You cannot count another A pulse until you have had a B pulse. A and B will never both be made at the same time. So from the point of view of an algorithm, debounce is irrelevant. When you get an A pulse, you wait for a B pulse. When you get a B pulse, you log another 100L and wait for an A pulse."}, {"owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478705086, "post_id": 40384963, "comment_id": 68262772, "body": "@WeatherVane:If a unit of flow occurs that turns the magnet near the reed the reed may flip, but then the magnet could go backwards a tiny amount (there is no 100% perfect ratchet).  This would be a pulse that shouldn&#39;t be counted because it&#39;s too short to be a real transition.  Also, if using interrupts to detect transitions then debouncing would consist of determining if a legal state of the switch had actually been reached."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1478710352, "post_id": 40384963, "comment_id": 68266100, "body": "it should not matter how many pulses you get off one reed switch, if the other switch is 180 degrees away and has no chance of a false make. I would have thought that is the whole <i>point</i> of having two switches, rather than one - to remove the need to debounce."}], "tags": [], "owner": {"reputation": 11342, "user_id": 299301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9d84c403343c5d7cb9d6abdb26a9a81?s=128&d=identicon&r=PG", "display_name": "nategoose", "link": "https://stackoverflow.com/users/299301/nategoose"}, "is_accepted": false, "score": 0, "last_activity_date": 1478104028, "creation_date": 1478104028, "answer_id": 40384963, "question_id": 40380972, "link": "https://stackoverflow.com/questions/40380972/counting-pulses-from-a-mechanical-water-meter-with-two-inputs/40384963#40384963", "title": "counting pulses from a Mechanical water meter with Two inputs", "body": "<p>I'm not sure what you're actually asking because what you seem to be asking is so simple whether you poll or use edge triggered interrupts.  The main issue is debouncing the switch signals.  For debouncing you should determine the maximum flow rate of your meter, which you don't really care about directly, but it will let you calculate the maximum switch period.  Use some significant portion of the minimum on or off time to perform your debounce.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1478712981, "creation_date": 1478712981, "answer_id": 40512880, "question_id": 40380972, "link": "https://stackoverflow.com/questions/40380972/counting-pulses-from-a-mechanical-water-meter-with-two-inputs/40512880#40512880", "title": "counting pulses from a Mechanical water meter with Two inputs", "body": "<p>The point of having two switches 180 degree apart, such that only one switch can be made at a time, is that no switch debouncing is needed.</p>\n\n<p>In practice the code would need to be more sophisticated, but the basic algorithm can be represented by this:</p>\n\n<pre><code>while(1) {\n    while(switchA() == 0);          // wait for switch A to be made\n    litres += 100;                  // clock up unit volume\n    display(litres);                // tell the user\n    while(switchB() == 0);          // wait for switch B to be made\n}\n</code></pre>\n\n<p>It does not matter how many pulses come from a reed switch, when it is near the magnet - all but the first pulse will be ignored, because the algorithm is then looking at the other switch.</p>\n"}], "owner": {"reputation": 1, "user_id": 6194586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6615b186f92687231b1418d730c4e065?s=128&d=identicon&r=PG&f=1", "display_name": "Haloma", "link": "https://stackoverflow.com/users/6194586/haloma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478712981, "creation_date": 1478092724, "last_edit_date": 1478101674, "question_id": 40380972, "link": "https://stackoverflow.com/questions/40380972/counting-pulses-from-a-mechanical-water-meter-with-two-inputs", "title": "counting pulses from a Mechanical water meter with Two inputs", "body": "<p>I want to count the number of pulses from a mechanical water meter using an STM32L Microcontroller. The outputs of the water meter are from TWO REED switches.</p>\n\n<p>The operation of the Switches is explained as follows:</p>\n\n<ul>\n<li>the two Reed switches would be operated \"ON\" OR \"OFF\" respectively by the magnet fitted to the pointer or gear during its running on the register, but never \"ON\" at the same time.</li>\n<li>The two Reed switches operate two \"ON\" and two \"OFF\" in one round of the pointer/the gear means one signal output.</li>\n</ul>\n\n<p>How can I read in the two inputs and be able to count the number of pulses in C? Note: 1 pulse = 100 liters.</p>\n"}, {"tags": ["c", "bison", "yacc", "lex"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1478091025, "post_id": 40380330, "comment_id": 68012502, "body": "If you are using bison, why is this tagged <code>yacc</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478091101, "post_id": 40380330, "comment_id": 68012557, "body": "Just a small question, unrelated to your problem, but why do you create nodes for things that doesn&#39;t need it? Like instead of creating a new node for <code>conditioal</code> why not just simply set <code>$$</code> to <code>$1</code>? That will simplify your tree a little, and lead to way fewer nodes in it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1478091163, "post_id": 40380330, "comment_id": 68012601, "body": "@ScottHunter The <code>flex</code> tag is for <a href=\"http://flex.apache.org/\" rel=\"nofollow noreferrer\">Apache Flex</a> not the GNU lex clone, so I removed it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478092022, "post_id": 40380330, "comment_id": 68013163, "body": "As for your problem, you probably should read about <a href=\"https://www.gnu.org/software/bison/manual/html_node/Union-Decl.html#Union-Decl\" rel=\"nofollow noreferrer\">the <code>%union</code> directive</a> and <a href=\"https://www.gnu.org/software/bison/manual/html_node/Token-Decl.html\" rel=\"nofollow noreferrer\">token type names</a>. There are <i>many</i> example on how to use these if you just search a little."}, {"owner": {"reputation": 105, "user_id": 1250593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2hRX2.jpg?s=128&g=1", "display_name": "luisforque", "link": "https://stackoverflow.com/users/1250593/luisforque"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478092159, "post_id": 40380330, "comment_id": 68013267, "body": "@Someprogrammerdude You are correct, but since this is for educational purposes, one of the things the teacher can check is how many nodes for a particular element, for example. BTW thank you for editing it."}, {"owner": {"reputation": 105, "user_id": 1250593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2hRX2.jpg?s=128&g=1", "display_name": "luisforque", "link": "https://stackoverflow.com/users/1250593/luisforque"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478092269, "post_id": 40380330, "comment_id": 68013332, "body": "@Someprogrammerdude by using the %union directive, I would need to specify the type for each one, correct?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478092551, "post_id": 40380330, "comment_id": 68013553, "body": "Unfortunately yes. But if you want to use different types for some for terminals and non-terminals then you unfortunately have no other way. Unless you want the <i>lexer</i> to create the leaf nodes, and initialize the <code>string</code> member (which I assume the text from the lexer would be in)?"}, {"owner": {"reputation": 105, "user_id": 1250593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2hRX2.jpg?s=128&g=1", "display_name": "luisforque", "link": "https://stackoverflow.com/users/1250593/luisforque"}, "edited": false, "score": 0, "creation_date": 1478093376, "post_id": 40380330, "comment_id": 68014162, "body": "Thank you. I&#39;ll try it! I&#39;ll also follow your suggestion and see if I can clean up the tree / the parser a bit."}, {"owner": {"reputation": 105, "user_id": 1250593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2hRX2.jpg?s=128&g=1", "display_name": "luisforque", "link": "https://stackoverflow.com/users/1250593/luisforque"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478105084, "post_id": 40380330, "comment_id": 68022413, "body": "@Someprogrammerdude I&#39;ve made the changes, but its still not working. I&#39;ve edited the question, can you please help?"}], "answers": [{"tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": true, "score": 0, "last_activity_date": 1478116833, "creation_date": 1478116833, "answer_id": 40388732, "question_id": 40380330, "link": "https://stackoverflow.com/questions/40380330/access-identifier-content-when-using-a-custom-type-in-bison/40388732#40388732", "title": "Access identifier content when using a custom type in Bison", "body": "<p>If your tokens have a type set for them, the lexer needs to set <code>yylval</code> to the type in question.  Something like:</p>\n\n<pre><code>[a-zA-Z][a-z0-9A-Z]*        { yylval.string = strdup(yytext); return IDENTIFIER; }\n[0-9]+                      { yylval.string = strdup(yytext); return INTEGER; }\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 1250593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2hRX2.jpg?s=128&g=1", "display_name": "luisforque", "link": "https://stackoverflow.com/users/1250593/luisforque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 40388732, "answer_count": 1, "score": 0, "last_activity_date": 1478116833, "creation_date": 1478090806, "last_edit_date": 1478105066, "question_id": 40380330, "link": "https://stackoverflow.com/questions/40380330/access-identifier-content-when-using-a-custom-type-in-bison", "title": "Access identifier content when using a custom type in Bison", "body": "<p>I have scanner and parser ready, using flex and bison.</p>\n\n<p>The parser is building a tree directly in the actions, and to do so I created a struct called STreeNode and I am using </p>\n\n<pre><code>#define YYSTYPE_IS_DECLARED\ntypedef STreeNode* YYSTYPE;\n</code></pre>\n\n<p>The struct is:</p>\n\n<pre><code>typedef struct tagSTreeNode\n{\n    EOperationType type;\n    int count;\n    struct tagSTreeNode **children;\n    char *string;\n} STreeNode;\n</code></pre>\n\n<p>There are like 40 tokens, and for every rule I have something like </p>\n\n<pre><code>unlabeled_statement:\n        assignment                                                          {$$ = createNode(eUNLABELED_STATEMENT, 1, $1);}\n        | function_call_statement                                           {$$ = createNode(eUNLABELED_STATEMENT, 1, $1);}\n        | goto                                                              {$$ = createNode(eUNLABELED_STATEMENT, 1, $1);}\n        | return                                                            {$$ = createNode(eUNLABELED_STATEMENT, 1, $1);}\n        | conditional                                                       {$$ = createNode(eUNLABELED_STATEMENT, 1, $1);}\n        | repetitive                                                        {$$ = createNode(eUNLABELED_STATEMENT, 1, $1);}\n        | empty_statement                                                   {$$ = createNode(eUNLABELED_STATEMENT, 1, $1);}\n        ;\n</code></pre>\n\n<p>The signature for the createNode function is </p>\n\n<pre><code>STreeNode *createNode(EOperationType type, int count, ...) {\n</code></pre>\n\n<p>The tree is working fine. The problem is accessing the real value for variable names, function names, etc. Since YYSTYPE is a struct, $x does not have the string value I want to save on the char * string element in the struct.</p>\n\n<p>I have a %token called IDENTIFIER and another called INTEGER, and those should receive the values I want.</p>\n\n<p>Researching, I discovered that I could try and use a union { } to have every token of a specific type. Maybe that could help? And if so, I would necessarily need to specify the type every single token? How can that be implemented?</p>\n\n<p>What about yytext? Couldn't that be used to achieve this goal?</p>\n\n<p>Thank you!</p>\n\n<p>--- <strong>EDIT</strong> --</p>\n\n<p>So I've created </p>\n\n<pre><code>%union {\n    char *string;\n    STreeNode *node;\n}\n</code></pre>\n\n<p>and specified every terminal and non terminal type to be one of those. The nodes are still working, but the strings using ($1 for example) are returning null.</p>\n\n<p>Do I need to change anything in the scanner as well? My scanner has:</p>\n\n<pre><code>[a-zA-Z][a-z0-9A-Z]*        { return IDENTIFIER; }\n[0-9]+                      { return INTEGER; }\n</code></pre>\n\n<p>Thanks again.</p>\n"}, {"tags": ["c", "shared-memory"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1478104026, "post_id": 40380327, "comment_id": 68021780, "body": "It sets the permissions for the newly created shared memory segment to <code>S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH</code> (read-write permissions for everyone) if it does not already exist."}, {"owner": {"reputation": 761, "user_id": 4168998, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh5.googleusercontent.com/-nRIUo3fQyP0/AAAAAAAAAAI/AAAAAAAAB_Y/UfgoI_a9N68/photo.jpg?sz=128", "display_name": "v1shva", "link": "https://stackoverflow.com/users/4168998/v1shva"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1478106299, "post_id": 40380327, "comment_id": 68023179, "body": "so what could be the octal value set i can use after IPC_CREAT | .... , and if I set it to IPC_CREAT | 0600, does this mean only the program creating the shared memory segment have access to it? or does it mean it have access to anyone with the key?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1478107027, "post_id": 40380327, "comment_id": 68023649, "body": "If the segment was created with permissions 0600, only the user that created it has access to it. (Well, the superuser can access it too.) The permissions and ownership can be changed with <code>shmctl()</code>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1536696506, "post_id": 40380327, "comment_id": 91515155, "body": "Did you consider reading <a href=\"http://man7.org/linux/man-pages/man2/shmget.2.html\" rel=\"nofollow noreferrer\">the documentation</a>?  Or <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/shmget.html\" rel=\"nofollow noreferrer\">the other documentation</a>?  Or any of the documentation surrounding those?"}], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1552460159, "post_id": 49718138, "comment_id": 97012471, "body": "IPC_CREAT is defined to be 0x01000 which corresponds to 4096. If it was 512, it would correspond to 0x200, meaning IPC_CREAT | 0666 = 0666, and IPC_CREAT would be redundant in this equation"}, {"owner": {"reputation": 81, "user_id": 2640333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f5f765def15e682ae5b86db64e33467?s=128&d=identicon&r=PG", "display_name": "lamplet", "link": "https://stackoverflow.com/users/2640333/lamplet"}, "reply_to_user": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 2, "creation_date": 1592643308, "post_id": 49718138, "comment_id": 110502346, "body": "@Adhamzhon Shukurov No, it&#39;s 01000 in octal, not 0x01000 in hex. 01000(oct) == 512 (dec). 0666 is octal too, so it&#39;s not redundant. <a href=\"https://github.com/torvalds/linux/blob/master/include/uapi/linux/ipc.h\" rel=\"nofollow noreferrer\">github.com/torvalds/linux/blob/master/include/uapi/linux/ipc&zwnj;&#8203;.h</a>"}], "tags": [], "owner": {"reputation": 195, "user_id": 8383366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jpc143uYd4Y/AAAAAAAAAAI/AAAAAAAAAFE/lRfTOqa2ZQ8/photo.jpg?sz=128", "display_name": "Arka Pal", "link": "https://stackoverflow.com/users/8383366/arka-pal"}, "is_accepted": false, "score": 4, "last_activity_date": 1536695653, "last_edit_date": 1536695653, "creation_date": 1523192650, "answer_id": 49718138, "question_id": 40380327, "link": "https://stackoverflow.com/questions/40380327/what-is-the-use-of-ipc-creat-0666-flag-in-shmget-function-in-c/49718138#49718138", "title": "What is the use of IPC_CREAT | 0666 flag in shmget() function in C", "body": "<p>0666 is the usual access permision in linux in rwx octal format and having the sequence(owner-group-user). IPC_CREAT has the value of 512 in decimal as defined in the sys/ipc.h header file.</p>\n\n<p>IPC_CREAT|0666 basically performs bitwise or of the two to set the flag in <code>shmget</code>, and both of them simply perform their usual functions.\n0666 sets the access permissions of the memory segment while\nIPC_CREAT tells the system to create a new memory segment for the shared memory.</p>\n\n<p>If this flag is not used then <code>shmget()</code> will find the segment associated with key and check to see if the user has permission to access the segment.</p>\n"}], "owner": {"reputation": 761, "user_id": 4168998, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh5.googleusercontent.com/-nRIUo3fQyP0/AAAAAAAAAAI/AAAAAAAAB_Y/UfgoI_a9N68/photo.jpg?sz=128", "display_name": "v1shva", "link": "https://stackoverflow.com/users/4168998/v1shva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16153, "favorite_count": 6, "answer_count": 1, "score": 3, "last_activity_date": 1536695653, "creation_date": 1478090778, "last_edit_date": 1495535253, "question_id": 40380327, "link": "https://stackoverflow.com/questions/40380327/what-is-the-use-of-ipc-creat-0666-flag-in-shmget-function-in-c", "title": "What is the use of IPC_CREAT | 0666 flag in shmget() function in C", "body": "<p><a href=\"https://stackoverflow.com/questions/26500476/shmget-for-ipc-in-linux\">shmget for IPC in linux</a></p>\n\n<p>Can someone explain what does the IPC_CREAT |0666 really do in shmget() unix system call in the above code, i know that 0666 is octal value here, but changing it does not have any effect at all.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1478090469, "post_id": 40380157, "comment_id": 68012158, "body": "<code>%d</code> reads an <code>int</code> while <code>%1d</code> reads a single digit"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478090754, "post_id": 40380157, "comment_id": 68012353, "body": "Please read the man page. Please do effort to search the man page in google, too."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1478092702, "post_id": 40380157, "comment_id": 68013653, "body": "Although it gives the wrong answer, I cannot see why it would give a SIGSEGV unless <code>n</code> or <code>m</code> is greater than 10."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1478091860, "last_edit_date": 1478091860, "creation_date": 1478090450, "answer_id": 40380224, "question_id": 40380157, "link": "https://stackoverflow.com/questions/40380157/what-difference-does-it-make-to-use-1d-instead-of-d-only-in-scanf-statemen/40380224#40380224", "title": "What difference does it make to use &quot;%1d&quot; instead of &quot;%d&quot; only in scanf statement?", "body": "<p>Without the width specifier, <code>scanf()</code> reads all the digits, rather than stopping after a single one. The following <code>scanf()</code>s for the same row will fail, leaving undefined/garbage data in the matrix.</p>\n\n<p>So for the first row from the linked page:</p>\n\n<pre><code>111\n</code></pre>\n\n<p>That will be treated as the integer 111, followed by nothing, rather than three ones. This is devious from the CodeChef side, of course. :)</p>\n\n<p>It's super overkill to use <code>scanf()</code> to just read single characters, you could do something simpler.</p>\n\n<p>Also, if you do use <code>scanf()</code>, <em>always</em> check its return value: it's I/O and it <em>can fail</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1478098225, "creation_date": 1478098225, "answer_id": 40382953, "question_id": 40380157, "link": "https://stackoverflow.com/questions/40380157/what-difference-does-it-make-to-use-1d-instead-of-d-only-in-scanf-statemen/40382953#40382953", "title": "What difference does it make to use &quot;%1d&quot; instead of &quot;%d&quot; only in scanf statement?", "body": "<p>The 1 in <code>\"%1d\"</code> is the <em>width</em> limit.  It is the maximum number of <em>characters</em> (not only digits), after leading white-space that are scanned.</p>\n\n<p><code>\"%d\"</code> is not limited as to the maximum number of characters it will scan.</p>\n\n<pre><code>int main() {\n  int i;\n  i = 42; sscanf(\"  123\", \"%1d\", &amp;i); printf(\"%d\\n\", i);\n  i = 42; sscanf(\"123\", \"%1d\", &amp;i); printf(\"%d\\n\", i);\n  i = 42; sscanf(\"-123\", \"%1d\", &amp;i); printf(\"%d\\n\", i);\n  i = 42; sscanf(\"+123\", \"%1d\", &amp;i); printf(\"%d\\n\", i);\n  i = 42; sscanf(\"  -123\", \"%1d\", &amp;i); printf(\"%d\\n\", i);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>1\n1\n42  // Nothing saved into `i`\n42  //       \"\n42  //       \"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5988903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b9de9de79c010da457354ca786a3d6c?s=128&d=identicon&r=PG&f=1", "display_name": "APX100", "link": "https://stackoverflow.com/users/5988903/apx100"}, "is_accepted": false, "score": 0, "last_activity_date": 1505685902, "last_edit_date": 1505685902, "creation_date": 1505497399, "answer_id": 46245040, "question_id": 40380157, "link": "https://stackoverflow.com/questions/40380157/what-difference-does-it-make-to-use-1d-instead-of-d-only-in-scanf-statemen/46245040#46245040", "title": "What difference does it make to use &quot;%1d&quot; instead of &quot;%d&quot; only in scanf statement?", "body": "<p>So, let's say I want to scan a text file and that file contains a matrix of binary digit without any space between them. The conversion specification %d have no extra field (field width and precision fields) defined. While scanning, %d looks for a white space to determine the ending of an integer. </p>\n\n<p>But in our case we have defined a binary matrix without any space thus, the program will throw a garbage value. What we can do is we can define field width 1 in %d, such as %1d. These will not add any extra space while printing output but that way scanf now knows that each integer is a digit with an extra empty field (in our case a space). Now even you don't put space between two digits it will scan it as separate digits. </p>\n\n<p>For example, 1001010 will be scanned as different digit as 1 and 0 separately rather than scanning 1001010 as an entire digit. Here is a simple code example.</p>\n\n<pre><code>int main()\n    {\n        FILE *ptr;\n\n        int i,j,count_0=0,count_1=0;\n        int a[row][col];\n\n        ptr=fopen(\"bin.txt\",\"r\");\n\n        for(i=0;i&lt;3;i++)\n        {\n            for(j=0;j&lt;3;j++)\n            {\n                fscanf(ptr,\"%1d\",&amp;a[i][j]);\n\n            }\n        }\n\n        for(i=0;i&lt;3;i++)\n        {\n           for(j=0;j&lt;3;j++)\n           {\n              printf(\"%1d\",a[i][j]);\n           }\n           printf(\"\\n\");\n        }\n\n     return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6488203, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b42f5df712454dad7567d611347c1441?s=128&d=identicon&r=PG&f=1", "display_name": "underdog_eagle", "link": "https://stackoverflow.com/users/6488203/underdog-eagle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9445, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1505685902, "creation_date": 1478090280, "question_id": 40380157, "link": "https://stackoverflow.com/questions/40380157/what-difference-does-it-make-to-use-1d-instead-of-d-only-in-scanf-statemen", "title": "What difference does it make to use &quot;%1d&quot; instead of &quot;%d&quot; only in scanf statement?", "body": "<p><a href=\"https://www.codechef.com/problems/LCOLLIS\" rel=\"nofollow noreferrer\">https://www.codechef.com/problems/LCOLLIS</a></p>\n\n<p>I was solving the above problem on codechef and I wrote the below code for it but it gave me runtime error (SIGSEVG).</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\nint t, n, m;\nscanf(\"%d\", &amp;t);\n\nwhile(t--)\n{\n    scanf(\"%d %d\", &amp;n, &amp;m);\n\n    int a[10][10], i, j, sum, ans;\n\n    for(i = 0; i &lt; n; i++)\n    {\n        for(j = 0; j &lt; m; j++)\n            scanf(\"%d\", &amp;a[i][j]);\n    }\n\n    ans = 0;\n    for(i = 0; i &lt; m; i++)\n    {\n        sum = 0;\n        for(j = 0; j &lt; n; j++)\n        {\n            if(a[j][i] == 1)\n                sum++;\n        }\n\n\n        if(sum &gt; 1)\n            ans = ans + ( sum * (sum - 1) ) / 2;\n    }\n\n    printf(\"%d\\n\", ans);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>And I saw one of the solutions that was exactly same as mine just with a little difference and it was accepted. The code is the following :</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\nint t, n, m;\nscanf(\"%d\", &amp;t);\n\nwhile(t--)\n{\n    scanf(\"%d %d\", &amp;n, &amp;m);\n\n    int a[10][10], i, j, sum, ans;\n\n    for(i = 0; i &lt; n; i++)\n    {\n        for(j = 0; j &lt; m; j++)\n            scanf(\"%1d\", &amp;a[i][j]); // SEE RIGHT HERE ITS JUST A 1 BEFORE d\n    }\n\n    ans = 0;\n    for(i = 0; i &lt; m; i++)\n    {\n        sum = 0;\n        for(j = 0; j &lt; n; j++)\n        {\n            if(a[j][i] == 1)\n                sum++;\n        }\n\n\n        if(sum &gt; 1)\n            ans = ans + ( sum * (sum - 1) ) / 2;\n    }\n\n    printf(\"%d\\n\", ans);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>Now I couldn't understand how that 1 makes all the difference.\nPlease someone help me out.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 24181, "user_id": 20047, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c20d6b15f04ed89dfcaf5366ffca6cee?s=128&d=identicon&r=PG", "display_name": "jeroenh", "link": "https://stackoverflow.com/users/20047/jeroenh"}, "edited": false, "score": 2, "creation_date": 1478090110, "post_id": 40380060, "comment_id": 68011947, "body": "you don&#39;t actually use the variable; you only assign it a value. Exactly as the error message says..."}, {"owner": {"reputation": 576, "user_id": 6648034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e100071b1105de5f4ca2e0ad4ddd2aee?s=128&d=identicon&r=PG&f=1", "display_name": "k_kaz", "link": "https://stackoverflow.com/users/6648034/k-kaz"}, "edited": false, "score": 1, "creation_date": 1478090211, "post_id": 40380060, "comment_id": 68012013, "body": "Also how do you compile the program?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478090301, "post_id": 40380060, "comment_id": 68012054, "body": "How do your compile and wich compiler do you use ?  Normally this should be just a warning."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1478090434, "post_id": 40380060, "comment_id": 68012140, "body": "Not directly related to your problem, but casting the return value of <code>get_pic</code> to <code>uint8_t</code> is fishy. You probably want <code>uint8_t *addresspic; ... addresspic = get_pic((int*)&amp; value);</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3402040"}, "edited": false, "score": 0, "creation_date": 1493509377, "post_id": 40380060, "comment_id": 74447963, "body": "With Codelite is a hard warning, and you can&#39;t compile it"}], "answers": [{"tags": [], "owner": {"reputation": 32602, "user_id": 7050130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efd06b6898f66b91234471a40cffae45?s=128&d=identicon&r=PG", "display_name": "Mark Adelsberger", "link": "https://stackoverflow.com/users/7050130/mark-adelsberger"}, "is_accepted": false, "score": 1, "last_activity_date": 1478090217, "creation_date": 1478090217, "answer_id": 40380141, "question_id": 40380060, "link": "https://stackoverflow.com/questions/40380060/c-program-error-variable-set-but-not-used/40380141#40380141", "title": "c program - error: variable set but not used", "body": "<p>I guess the message isn't the most clear, but what it's telling you is that nothing reads the value form addresspic; so you assign to it (value set) but nothing depends on the value you set it to (not used).</p>\n"}], "owner": {"reputation": 81, "user_id": 6931518, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/8f541966eda1278f7eeed043c243b7ce?s=128&d=identicon&r=PG&f=1", "display_name": "logitech mouse", "link": "https://stackoverflow.com/users/6931518/logitech-mouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1968, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478090217, "creation_date": 1478089992, "question_id": 40380060, "link": "https://stackoverflow.com/questions/40380060/c-program-error-variable-set-but-not-used", "title": "c program - error: variable set but not used", "body": "<p>I keep getting the error <code>error: variable 'addresspic' set but not used</code> in the code below but I clearly use it. </p>\n\n<p>Could somebody tell me if I am doing something wrong please?</p>\n\n<p>I know that I should really be creating a pointer for <code>addresspic</code> instead of casting the return value of <code>get_pic()</code> but for now I can't understand why it is saying that the variable is not used.</p>\n\n<pre><code>//Function declaration\nuint8_t* get_pic(int *piclen)\n\nmain() {\n\nuint8_t addresspic;\nunsigned int value;\n\naddresspic = (uint8_t)get_pic((int*)&amp; value);\n}\n</code></pre>\n"}, {"tags": ["c", "getch"], "comments": [{"owner": {"reputation": 3572, "user_id": 412044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WZZOJ.png?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/412044/martin"}, "edited": false, "score": 1, "creation_date": 1478088517, "post_id": 40379535, "comment_id": 68011004, "body": "Did you check what is returned by <code>_getch()</code> when you provide &quot;enter&quot;?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1478088675, "post_id": 40379535, "comment_id": 68011107, "body": "In Windows, you issue &quot;\\r\\n&quot; for a new line."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1478090211, "post_id": 40379535, "comment_id": 68012011, "body": "@JohnnyMopp The C standard requires <code>printf(&quot;\\n&quot;)</code> to DTRT, regardless of whether the OS line terminator is a single character.  (Specifically, both input and output on FILE objects open in text mode are required to convert between <code>\\n</code> and whatever the OS&#39;s line terminator is.)  <code>_getch</code> is not part of the C standard so it isn&#39;t subject to this rule."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 4, "last_activity_date": 1478088576, "creation_date": 1478088576, "answer_id": 40379625, "question_id": 40379535, "link": "https://stackoverflow.com/questions/40379535/why-printf-n-doesnt-go-to-the-next-line/40379625#40379625", "title": "Why printf(&quot;\\n&quot;) doesn&#39;t go to the next line?", "body": "<p>Because hitting \"enter\" issues a carriage return char (<code>\\r</code>), not a linefeed one.</p>\n\n<p>I noticed it when the cursor jumped back at the start of the line when I pressed \"enter\".</p>\n\n<p>Fix your code like this (factorize the <code>case</code> statements too):</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#define STOP '#'\nint main()\n\n{\n\n    char ch;\n    while ((ch = (_getch())) != STOP) {\n        switch (ch) {\n         case ' ':\n         case '\\t':\n         case '\\r':   // what was missing\n            printf(\"\\n\");\n            break;\n        default:\n            putchar(ch);\n        }\n\n    }\n\n    printf(\"\\nEND\");\n    _getch();\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1478088769, "creation_date": 1478088769, "answer_id": 40379674, "question_id": 40379535, "link": "https://stackoverflow.com/questions/40379535/why-printf-n-doesnt-go-to-the-next-line/40379674#40379674", "title": "Why printf(&quot;\\n&quot;) doesn&#39;t go to the next line?", "body": "<p>You probably get a carriage return (<code>'\\r'</code>) which is what <kbd>Return</kbd> typically generates.</p>\n\n<p>So you need to check for that, too. Your code can be simplified:</p>\n\n<pre><code>int main(void)\n{\n  while((ch = _getch()) != STOP)\n  {\n    if(ch == ' ' || ch == '\\n' || ch == '\\r' || ch == '\\t')\n      ch = '\\n';\n    putchar(ch);\n  }\n}\n</code></pre>\n\n<p>Since we're always printing exactly one character per iteration, no need to use multiple printing functions. Also, using <code>printf()</code> to print a single constant character is overkill.</p>\n"}], "owner": {"reputation": 705, "user_id": 4437044, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f4ef761590498c405d63f6f2e87dad38?s=128&d=identicon&r=PG&f=1", "display_name": "shurrok", "link": "https://stackoverflow.com/users/4437044/shurrok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5515, "favorite_count": 0, "accepted_answer_id": 40379625, "answer_count": 2, "score": 1, "last_activity_date": 1478088769, "creation_date": 1478088299, "question_id": 40379535, "link": "https://stackoverflow.com/questions/40379535/why-printf-n-doesnt-go-to-the-next-line", "title": "Why printf(&quot;\\n&quot;) doesn&#39;t go to the next line?", "body": "<p>I'm trying to write a short program that puts each word on a new line. The new line can be confirmed by tabulator, space or enter. The end of program is putting \"#\" in console.  I have the problem that when I put \"enter\" to the console it writes next characters in the same line.</p>\n\n<p>The second idea is to make all of this in a table, so I can put formatted text all together in the end. I can't figure this out either.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#define STOP '#'\nint main()\n\n{\n\n    char ch;\n    while ((ch = (_getch())) != STOP) {\n        switch (ch) {\n        case '\\n':\n            printf(\"\\n\");\n            break;\n        case '\\t':\n            printf(\"\\n\");\n            break;\n        case ' ':\n            printf(\"\\n\");\n            break;\n        default:\n            putchar(ch);\n        }\n\n    }\n\n    printf(\"\\nEND\");\n    _getch();\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "math"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1478088546, "post_id": 40379524, "comment_id": 68011027, "body": "Have you stepped through your code with a debugger during execution?"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1478088785, "post_id": 40379524, "comment_id": 68011171, "body": "Is 1 a prime? Is 0 a prime?"}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 1, "creation_date": 1478088820, "post_id": 40379524, "comment_id": 68011189, "body": "How often do you call the sqrt function?"}, {"owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1478088903, "post_id": 40379524, "comment_id": 68011227, "body": "@CoryKramer I have actually but of course for relatively small numbers , since it can take quite while tracing it for big integers. And surprisingly enough , I haven&#39;t encountered an issue yet."}, {"owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "reply_to_user": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1478088951, "post_id": 40379524, "comment_id": 68011253, "body": "@gnasher729 Well 1 and 0 are definitely not primes. And also , I&#39;ve used the sqrt function just once , in the IsPrime function I&#39;ve myself have created."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1478089577, "post_id": 40379524, "comment_id": 68011622, "body": "Wrong, you are not using the sqrt function &quot;just once&quot;. The <code>sqrt()</code> function gets called <b><i>on every iteration of the loop</i></b>. You cannot rely on the C++ compiler optimizing it out. Every time the loop iterates, the loop condition is checked, and the loop expression gets evaluated. That&#39;s how C++ works."}, {"owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 1, "creation_date": 1478089584, "post_id": 40379524, "comment_id": 68011632, "body": "Use <code>j*j &lt;= n</code> instead of <code>j &lt;= sqrt(n)</code>."}, {"owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1478089926, "post_id": 40379524, "comment_id": 68011853, "body": "@SamVarshavchik Ahhh , I see ,so any reason why I&#39;m getting &quot;Wrong&quot; instead of &quot;Time Limit Exceeded&quot; ?"}, {"owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "reply_to_user": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "edited": false, "score": 0, "creation_date": 1478089943, "post_id": 40379524, "comment_id": 68011860, "body": "@SauravSahu Much obliged! Though I&#39;m still getting the same results"}, {"owner": {"reputation": 1888, "user_id": 6325994, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/SAdLl.jpg?s=128&g=1", "display_name": "Abdennacer Lachiheb", "link": "https://stackoverflow.com/users/6325994/abdennacer-lachiheb"}, "edited": false, "score": 0, "creation_date": 1478090619, "post_id": 40379524, "comment_id": 68012252, "body": "What is max value for n ?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1478092002, "post_id": 40379524, "comment_id": 68013147, "body": "I think you can hardcode prime numbers up to let&#39;s say 1000 into an array and calculate bigger if necessary using it. That could speed up your code significantly"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478308448, "post_id": 40379524, "comment_id": 68116054, "body": "the question talks about a C++ code, but the posted code is C.  Please clarify"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478308582, "post_id": 40379524, "comment_id": 68116072, "body": "with <code>C</code> code, need to have the statement: <code>#include &lt;stdbool.h&gt;</code>  for the definition of <code>bool</code> etc."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478308763, "post_id": 40379524, "comment_id": 68116104, "body": "for ease of readability and understanding, 1) separate code blocks (for, if, else, while, do...while, switch, case, default) via a blank line 2) follow the axiom: <i>only one statement per line and (at most) one variable declaration per statement.</i>"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "edited": false, "score": 0, "creation_date": 1478093480, "post_id": 40380181, "comment_id": 68014240, "body": "Thanks ! I guess this&#39;ll have to do."}], "tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1478090655, "last_edit_date": 1495541960, "creation_date": 1478090350, "answer_id": 40380181, "question_id": 40379524, "link": "https://stackoverflow.com/questions/40379524/how-to-factorize-a-number/40380181#40380181", "title": "How to factorize a number?", "body": "<p>You need to perform some fine optimisations. Do not invoke <code>isPrime()</code> method for each value, instead consider a different approach so that irrelevant values can be ignored altogether at the very beginning.</p>\n\n<ol>\n<li>Get the list of relevant primes numbers that comes under <code>n</code>, using <a href=\"https://stackoverflow.com/a/39554244/1465553\">Sieve of Eratosthenes</a> concepts.</li>\n<li><p>Start from the lowest prime value from the list, divide <code>n</code> to get <em>intermediate values</em> as </p>\n\n<p><code>n / lowest_prime_that_perfectly_divide_n</code>.  </p>\n\n<p>Continue doing this by checking with next higher prime value till <code>n</code> becomes <code>1</code>. This way you would have <em>count</em> of each dividing factors.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1478158393, "post_id": 40381757, "comment_id": 68042448, "body": "This will increase <code>k</code> up to the largest prime factor of the initial <code>n</code>. One could stop much earlier (i.e. when k*k &gt; n)."}, {"owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "reply_to_user": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1478158738, "post_id": 40381757, "comment_id": 68042588, "body": "But then you have to treat the possibly remaining large prime factor separately. Done."}, {"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1478159105, "post_id": 40381757, "comment_id": 68042758, "body": "Yes, but it&#39;s worth it. The worst case runtime goes from O(n) to O(sqrt(n)). ;-)"}], "tags": [], "owner": {"reputation": 21073, "user_id": 3088138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114f33fdece969de35d41038fb0eeb46?s=128&d=identicon&r=PG&f=1", "display_name": "Lutz Lehmann", "link": "https://stackoverflow.com/users/3088138/lutz-lehmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1478158643, "last_edit_date": 1478158643, "creation_date": 1478094991, "answer_id": 40381757, "question_id": 40379524, "link": "https://stackoverflow.com/questions/40379524/how-to-factorize-a-number/40381757#40381757", "title": "How to factorize a number?", "body": "<p>You do not need prime tests, and lists of primes or prime wheels are only needed for acceleration. A simple program listing all prime factors is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt; \n\nint main(void)\n{\n    long long n_orig,n,k;\n    scanf(\"%lld\", &amp;n_orig);\n    n = n_orig;\n    k=2;\n    while(k*k&lt;=n) {\n        while(0==n%k) {\n            n = n/k;\n            printf(\"%lld \",k);\n        }\n        k++;\n    }\n    if(n&gt;1) printf(\"%lld \",n);\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>This does not generate the required output format, but that can easily added to it.</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "edited": false, "score": 0, "creation_date": 1478105772, "post_id": 40382908, "comment_id": 68022836, "body": "Thanks! This one seems to be working. Two questions though , would you please explain how PrintFactorization works, and also I would like to know what seems to be wrong with my program , as mine and yours seem to be working alike, at least for a few test cases."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "edited": false, "score": 0, "creation_date": 1478156899, "post_id": 40382908, "comment_id": 68041794, "body": "@FuriousMathematician: I added a note above the line which you might find difficult to understand."}, {"owner": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1478158025, "post_id": 40382908, "comment_id": 68042299, "body": "I guess <code>add = 4-add</code> should actually be <code>add = 6-add</code>."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 40344, "user_id": 1796579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b14d3685f0765c738fd90c7ec71fa9ba?s=128&d=identicon&r=PG", "display_name": "Henry", "link": "https://stackoverflow.com/users/1796579/henry"}, "edited": false, "score": 0, "creation_date": 1478158502, "post_id": 40382908, "comment_id": 68042487, "body": "@Henry: Yes, good catch! Will speed things up a bit. Thanks for pointing that out!!!"}, {"owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "edited": false, "score": 0, "creation_date": 1478175369, "post_id": 40382908, "comment_id": 68052374, "body": "@barakmanos uhh , I&#39;m kinda sure I&#39;m starting to look like an idiot but I still can&#39;t quite figure out the algorithm you&#39;re using. What does &quot;factors that are adjacent to 6&quot; have to with anything?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "edited": false, "score": 0, "creation_date": 1478175752, "post_id": 40382908, "comment_id": 68052651, "body": "@FuriousMathematician: [5,7],[11,13],[17,19],[23,25],... All the numbers that are not divisible neither by 2 nor by 3. There is no point in checking all the rest, since that are obviously not prime. This reduces the number of tested factors by a magnitude of 3 (i.e., we are left with only one third of the original amount of factors to be tested)."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "edited": false, "score": 0, "creation_date": 1478275687, "post_id": 40382908, "comment_id": 68102812, "body": "@FuriousMathematician: Please note that I&#39;ve fixed <code>add = 4-add</code> to <code>add = 6-add</code>, thanks to Henry&#39;s comment (in case you&#39;re using this code anywhere)..."}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": true, "score": 1, "last_activity_date": 1478158530, "last_edit_date": 1478158530, "creation_date": 1478098110, "answer_id": 40382908, "question_id": 40379524, "link": "https://stackoverflow.com/questions/40379524/how-to-factorize-a-number/40382908#40382908", "title": "How to factorize a number?", "body": "<p>Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\nunsigned long long PrintMultiplicity(unsigned long long n,unsigned long long factor)\n{\n    unsigned int count = 0;\n\n    while (n%factor == 0)\n    {\n        count++;\n        n /= factor;\n    }\n\n    if (count &gt; 0)\n    {\n        printf(\"%llu^%u\",factor,count);\n        if (n &gt; 1)\n            printf(\"*\");\n    }\n\n    return n;\n}\n\nvoid PrintFactorization(unsigned long long n)\n{\n    unsigned long long factor;\n    unsigned int add;\n\n    printf(\"%llu = \",n);\n\n    n = PrintMultiplicity(n,2);\n    n = PrintMultiplicity(n,3);\n\n    // Check only factors that are adjacent to multiples of 6\n    for (factor = 5, add = 2; factor &lt;= sqrt(n); factor += add, add = 6-add)\n        n = PrintMultiplicity(n,factor);\n\n    if (n &gt; 1)\n        printf(\"%llu^1\",n);\n\n    printf(\"\\n\");\n}\n\nint main()\n{\n    unsigned long long n;\n    scanf(\"%llu\",&amp;n);\n    PrintFactorization(n);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 4309058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cf1d369a5a4cc027ebe0e91f56ab8e2?s=128&d=identicon&r=PG&f=1", "display_name": "FuriousMathematician", "link": "https://stackoverflow.com/users/4309058/furiousmathematician"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 40382908, "answer_count": 3, "score": 0, "last_activity_date": 1478158643, "creation_date": 1478088256, "last_edit_date": 1478092154, "question_id": 40379524, "link": "https://stackoverflow.com/questions/40379524/how-to-factorize-a-number", "title": "How to factorize a number?", "body": "<p>I've been asked to factorize a number and show it in a specific way .</p>\n\n<p>e.g: 100 = 2^2*5^2</p>\n\n<p>This is the C++ code I've used so far with no dice , unfortunately:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt; \n\n//IsPrime indicates whether a given number is or is not prime.\nbool IsPrime(long long n)\n{   \n    int j = 3;\n    if (n == 2)\n    {\n        return true;\n    }\n    else if (n % 2 == 0)\n    {\n        return false;\n    }\n    else\n    {\n        for (j = 3; j &lt;= sqrt(n); j += 2)\n        {\n            if (n%j == 0)\n            {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\nint main(void)\n{\n    long long n_orig,n, i=3 , primecount=0;\n    scanf(\"%lld\", &amp;n_orig);\n    n = n_orig;\n    if (n == 1)\n    {\n        printf(\"1\");\n        return 0;\n    }\n    if (IsPrime(n))\n    {\n        printf(\"%lld\", n);\n        return 0;\n    }\n    if (n % 2 == 0)\n    {\n        while (n &gt;= 2 &amp;&amp; n % 2 == 0)\n        {\n            primecount++;\n            n = n / 2;\n        }\n        if (primecount == 1)\n        {\n            printf(\"2*\");\n        }\n        else\n        {\n            printf(\"2^%lld*\", primecount);\n        }\n    }\n    primecount = 0;\n    n = n_orig;\n    while (i &lt;= n/2)\n    {\n        if (IsPrime(i))\n        {\n            while (n &gt;= i &amp;&amp; n % i == 0)\n            {\n                primecount++;\n                n = n / i;\n            }\n        }\n        n = n_orig;\n        if (primecount == 0)\n        {\n            i++;\n            continue;\n        }\n        if (primecount == 1)\n        {\n            printf(\"%lld*\", i);\n        }\n        else\n        {\n            printf(\"%lld^%lld*\", i, primecount);\n        }\n        primecount = 0;\n        i+=2;\n    }\n    printf(\"\\b\");\n    return 0;\n}\n</code></pre>\n\n<p>Using this code I was able to generate a few test cases, though when I uploaded my answer to the website where the codes are presumably evaluated , out of 7 test cases (which I cannot know what they exactly are) , <em>I pass 3</em> , <strong>fail 3</strong> and <em>exceed time limit (the one that hasn't even been declared in the question) in one case</em>. I'd really appreciate some help , and please be noob-friendly!</p>\n\n<p>Also , I don't really wanna know if my answer could be improved in some way , <strong>my top priority right now is understanding why MY own code doesn't work as intended.</strong></p>\n\n<p>P.S : Usage of <em>iostream</em> and <em>array</em>s is not allowed.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1478088411, "post_id": 40379504, "comment_id": 68010945, "body": "A 32-bit int isn&#39;t large enough to hold a number greater than 2**31-1. Use a long long int, or just print out the digits directly from <code>x[]</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478088931, "post_id": 40379504, "comment_id": 68011246, "body": "Unrelated to your problem, but you can drop <code>int x[]={0,1,2,3,4,5,6};</code>and the <code>for</code> loop and write directly <code>char buff[] = &quot;0123456&quot;;</code>"}, {"owner": {"reputation": 53, "user_id": 3648937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/948c298372f1bc05523fc70c3de820bb?s=128&d=identicon&r=PG&f=1", "display_name": "DeoChandra", "link": "https://stackoverflow.com/users/3648937/deochandra"}, "reply_to_user": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1478089789, "post_id": 40379504, "comment_id": 68011776, "body": "@squeamish ossifrage  I want to keep all 32 bits in a single variable then how can i do this. I can print all numbers from the array but i want to process it further hence want them in a single variable."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1478090326, "post_id": 40379504, "comment_id": 68012072, "body": "Can you clarify this: <code>Actually i have an array of binary numbers of 32 entries.</code> ? Perhaps an example. Does it mean that each entry holds either <code>0</code> or <code>1</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 0, "last_activity_date": 1478090268, "creation_date": 1478090268, "answer_id": 40380153, "question_id": 40379504, "link": "https://stackoverflow.com/questions/40379504/convert-a-very-large-array-of-integers-into-single-integer/40380153#40380153", "title": "convert a very large array of integers into single integer", "body": "<p>Simply do the equivalent for base 2. </p>\n\n<pre><code>int main(int argc, char ** argv){\n    int n;\n    int i;\n    char buff[100];\n    int x[]={0,1,0,1,1,0,1,1,\n             0,0,0,1,0,0,1,1,\n             1,1,1,1,1,0,0,0,\n             1,0,0,0,0,1,0,0};\n\n    n = 0;\n    for (i=0; i&lt;32; i++) {\n        n = n &lt;&lt; 1 + x[i];\n    }\n\n    printf(\"The number is %d in decimal\\n\", n);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 3648937, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/948c298372f1bc05523fc70c3de820bb?s=128&d=identicon&r=PG&f=1", "display_name": "DeoChandra", "link": "https://stackoverflow.com/users/3648937/deochandra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478090268, "creation_date": 1478088224, "question_id": 40379504, "link": "https://stackoverflow.com/questions/40379504/convert-a-very-large-array-of-integers-into-single-integer", "title": "convert a very large array of integers into single integer", "body": "<p>I found following code on stack exchange blog which converts an array of integers into a single integer. But when my input integer array is more than 10 entries then it fails. Actually i have an array of binary numbers of 32 entries. I want to convert this array into a single binary number. I was trying to use below code but it fails for more than 10 entries. Please suggest a method to accomplish this.</p>\n\n<pre><code>int main(int argc, char ** argv){\n    int n;\n    int i;\n    char buff[100];\n    int x[]={0,1,2,3,4,5,6};\n    for (i=0; i&lt;7; i++) {\n        sprintf(&amp;buff[i],\"%d\",x[i]);\n    }\n    n = atoi(buff);\n\n    printf(\"the number is %d\",n);\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "loops", "for-loop"], "comments": [{"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1478089443, "post_id": 40379482, "comment_id": 68011535, "body": "draw the action of the for loop on a piece of paper. Go through each iteration carefully to track what is happening in the program. It shouldn&#39;t take you long to understand this basic program."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478089668, "post_id": 40379482, "comment_id": 68011689, "body": "and that is why, a debugger (for stepping trough the stages) is the best friend. :)"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6869850, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/e64mT.jpg?s=128&g=1", "display_name": "Kawsar_Ahmed", "link": "https://stackoverflow.com/users/6869850/kawsar-ahmed"}, "edited": false, "score": 0, "creation_date": 1478170570, "post_id": 40379813, "comment_id": 68049318, "body": "Thanks Mr. Sourav it&#39;s really helping me."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1478089625, "last_edit_date": 1478089625, "creation_date": 1478089201, "answer_id": 40379813, "question_id": 40379482, "link": "https://stackoverflow.com/questions/40379482/how-the-array-work-in-c/40379813#40379813", "title": "How the array work in c?", "body": "<p>Please note, the third <code>for</code> loop is nested inside the second loop. So, for each value of <code>j</code> in the other loop body like 0, 1, 2, the inner loop will execute for each time.</p>\n\n<p>If you're bothered that after the first loop, <code>j</code> will be <code>10</code>, then don't worry, the <em>statement-1</em> in the second <code>for</code> loop (<code>for(j=0;...</code> part) will re-assign the value to <code>0</code>, so the second loop will start with a value of <code>0</code> for <code>j</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 6869850, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/e64mT.jpg?s=128&g=1", "display_name": "Kawsar_Ahmed", "link": "https://stackoverflow.com/users/6869850/kawsar-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 40379813, "answer_count": 1, "score": -4, "last_activity_date": 1478089715, "creation_date": 1478088147, "last_edit_date": 1478089715, "question_id": 40379482, "link": "https://stackoverflow.com/questions/40379482/how-the-array-work-in-c", "title": "How the array work in c?", "body": "<p>This is a simple code. But I don't understand this. In this code I would like to enter ten numbers by user and reports if any of them match. First enter 10 numbers that assign in <code>i[j]</code>. But variable match carry only 1 number.How could carry 10 numbers. Then if I enter first number 10 then <code>i[j]</code> would be first 10.How could third for loop run if enter 10 first.Because <code>10+1=11</code>, that greater than 10.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\nint i[10], j, k, match;\n\nprintf(\"Enter 10 numbers:\\n\");\nfor(j=0; j&lt;10; j++) scanf(\"%d\", &amp;i[j]);\n\nfor(j=0; j&lt;10; j++){\n    match = i[j];\n\n    for(k=j+1; k&lt;10; k++)\n        if(match == i[k])\n        printf(\"%d is duplicated\\n\", match);\n}\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "openmp", "collapse"], "comments": [{"owner": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1478093284, "post_id": 40379445, "comment_id": 68014091, "body": "<i>with collpase, 0.75sec, and without collapse, 25sec</i>  On the face of it that is a remarkable difference in performance.  Are those numbers correct ?"}, {"owner": {"reputation": 849, "user_id": 2051246, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/97dfa1a634026e556858de98a8c93fbd?s=128&d=identicon&r=PG", "display_name": "Jeungwoo Yoo", "link": "https://stackoverflow.com/users/2051246/jeungwoo-yoo"}, "reply_to_user": {"reputation": 73919, "user_id": 44309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iL4TW.png?s=128&g=1", "display_name": "High Performance Mark", "link": "https://stackoverflow.com/users/44309/high-performance-mark"}, "edited": false, "score": 0, "creation_date": 1478094166, "post_id": 40379445, "comment_id": 68014703, "body": "Yes it is true. That i did again after your comment"}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1478170266, "post_id": 40379445, "comment_id": 68049114, "body": "&quot;I&#39;m trying to implement matrix multiplication with OpenMP.&quot; Why? Matrix multiplication looks easy, but getting optimal performance is extremely not-trivial. Your time would be better spent finding out how to use a BLAS to do this for you. (Intel MKL <a href=\"https://software.intel.com/en-us/intel-mkl\" rel=\"nofollow noreferrer\">software.intel.com/en-us/intel-mkl</a> is now gratis and will run in parallel internally where appropriate). (FWIW I work for intel, but not on MKL)."}, {"owner": {"reputation": 849, "user_id": 2051246, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/97dfa1a634026e556858de98a8c93fbd?s=128&d=identicon&r=PG", "display_name": "Jeungwoo Yoo", "link": "https://stackoverflow.com/users/2051246/jeungwoo-yoo"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1478172941, "post_id": 40379445, "comment_id": 68050801, "body": "@JimCownie Thank you for your comment. First, i also have implemented with MKL already. What iam trying is to figure out is finding the situation that openmp is faster than MKL"}], "owner": {"reputation": 849, "user_id": 2051246, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/97dfa1a634026e556858de98a8c93fbd?s=128&d=identicon&r=PG", "display_name": "Jeungwoo Yoo", "link": "https://stackoverflow.com/users/2051246/jeungwoo-yoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 357, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478088470, "creation_date": 1478088032, "last_edit_date": 1478088470, "question_id": 40379445, "link": "https://stackoverflow.com/questions/40379445/openmp-nested-for-loop-without-collapse-directive", "title": "OpenMP nested for loop without collapse directive", "body": "<p>I'm trying to implement matrix multiplication with OpenMP.</p>\n\n<p>As i found that usually collapse directive is used in nested for loop.</p>\n\n<p>So i also used collapse as below. (this code is belong to feedforward in neural network)</p>\n\n<pre><code>for (i = 0; i &lt; net-&gt;num_layer-1; i++) {\n    #pragma omp parallel for num_threads(thread) private(j) collapse(2)\n    for (j = 0; j &lt; net-&gt;mini_batch_size; j++) {\n        for (k = 0; k &lt; net-&gt;layer_size[i+1]; k++) {\n            #pragma omp simd reduction(+:sum)\n            for (l = 0; l &lt; net-&gt;layer_size[i]; l++) {\n                sum = sum + NEURON(net, i, j, l) * WEIGHT(net, i, l, k); \n            }   \n\n            ZS(net, i+1, j, k) = sum + BIAS(net, i+1, k); \n            NEURON(net, i+1, j, k) = sigmoid(ZS(net, i+1, j, k));\n            sum = 0.0;\n        }   \n    }   \n} \n</code></pre>\n\n<p>But What i want to know is is there any way to implement parallelize without collapse? I also tried like below but the performance is under my expectation.</p>\n\n<pre><code>omp_set_nested(1);\nfor (i = 0; i &lt; net-&gt;num_layer-1; i++) {\n    #pragma omp parallel for num_threads(net-&gt;mini_batch_size) private(j)\n    for (j = 0; j &lt; net-&gt;mini_batch_size; j++) {\n        #pragma omp parallel for num_threads(net-&gt;layer_size[i+1]) private(j, k)\n        for (k = 0; k &lt; net-&gt;layer_size[i+1]; k++) {\n            #pragma omp simd reduction(+:sum)\n            for (l = 0; l &lt; net-&gt;layer_size[i]; l++) {\n                sum = sum + NEURON(net, i, j, l) * WEIGHT(net, i, l, k);\n            }\n\n            ZS(net, i+1, j, k) = sum + BIAS(net, i+1, k);\n            NEURON(net, i+1, j, k) = sigmoid(ZS(net, i+1, j, k));\n            sum = 0.0;\n        }\n    }\n}\n</code></pre>\n\n<p>In the thread variable is 100 constant. it would be optimized later but i fixed it now. And also, the result of performance is that with collpase, 0.75sec, and without collapse, 25sec.</p>\n\n<p>So, anyway please let me know is there any way to implement nested loop without collpase which results better performance than collapse.</p>\n"}, {"tags": ["php", "c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478087500, "post_id": 40379210, "comment_id": 68010366, "body": "This seems like a variant of the <a href=\"https://en.wikipedia.org/wiki/Change-making_problem\" rel=\"nofollow noreferrer\">change-making problem</a>."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1478087563, "post_id": 40379210, "comment_id": 68010416, "body": "Please don&#39;t spam language tags. Use only one tag which is relevant to your problem."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7104366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee26941354031ccaf9f4ff99d7ba423c?s=128&d=identicon&r=PG&f=1", "display_name": "Mandil Sharma", "link": "https://stackoverflow.com/users/7104366/mandil-sharma"}, "edited": false, "score": 0, "creation_date": 1478091880, "post_id": 40380581, "comment_id": 68013053, "body": "i cant see solution??"}], "tags": [], "owner": {"reputation": 33, "user_id": 7103731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rGsWc.png?s=128&g=1", "display_name": "Tick Tac Joe", "link": "https://stackoverflow.com/users/7103731/tick-tac-joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1478091548, "creation_date": 1478091548, "answer_id": 40380581, "question_id": 40379210, "link": "https://stackoverflow.com/questions/40379210/how-to-distribute-a-number-into-pre-defined-set-of-numbers-in-php/40380581#40380581", "title": "How to distribute a number into pre-defined set of numbers in PHP", "body": "<p>Yes I is possible. For sure.\nUse two maps, a for loop and modulo.</p>\n\n<p>Let me know if you need help.</p>\n\n<p><em>Meanwhile: I coded the solution also.</em></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7104366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee26941354031ccaf9f4ff99d7ba423c?s=128&d=identicon&r=PG&f=1", "display_name": "Mandil Sharma", "link": "https://stackoverflow.com/users/7104366/mandil-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1478204377, "creation_date": 1478204377, "answer_id": 40410540, "question_id": 40379210, "link": "https://stackoverflow.com/questions/40379210/how-to-distribute-a-number-into-pre-defined-set-of-numbers-in-php/40410540#40410540", "title": "How to distribute a number into pre-defined set of numbers in PHP", "body": "<p>Finally I got it working using Change making Problem using Greedy algorithm. </p>\n\n<pre><code>&lt;form method=\"post\" action=\"coin.php\"&gt;\nEnter numbers : &lt;input type=\"text\" name=\"amount\"/&gt;&lt;input type=\"submit\" value=\"Click here to Distribute Numbers into available pricing units\"&gt;\n&lt;/form&gt;\n&lt;?php\n\nfunction makeChange($amount) {\n    $c = array(100, 50, 10, 1);\n    $sol = array();\n    $sum = 0;\n    $i = 0;\n    $ele = $c['0'];\n    while ($sum != $amount) {\n        $sum = $sum + $ele;\n        if ($sum &gt; $amount) {\n            $sum = $sum - $ele;\n            $i++;\n            $ele = $c[$i];\n            continue;\n        }\n        $sol[] = $ele;\n    }\n    return $sol;\n}\nif(isset($_POST['amount']))\n{\n$amount = $_POST['amount'];\n$sol = makeChange($amount);\nforeach ($sol as $val) {\n    echo \"&lt;b&gt;$val&lt;/B&gt;&lt;br/&gt; \";\n}\n}\n\n?&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7104366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee26941354031ccaf9f4ff99d7ba423c?s=128&d=identicon&r=PG&f=1", "display_name": "Mandil Sharma", "link": "https://stackoverflow.com/users/7104366/mandil-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1478204377, "creation_date": 1478087269, "question_id": 40379210, "link": "https://stackoverflow.com/questions/40379210/how-to-distribute-a-number-into-pre-defined-set-of-numbers-in-php", "title": "How to distribute a number into pre-defined set of numbers in PHP", "body": "<p>I am new in PHP but got a consignment from college to write a script to do following :-</p>\n\n<pre><code>$num1=0.1;\n$num10=0.2;\n$num50=0.3;\n$num100=0.4;\n</code></pre>\n\n<p>If user type number <strong>22</strong> then result will be <code>$num10+$num10+$num1+num1</code></p>\n\n<p>If user type number <strong>62</strong> then result will be <code>$num50+$num10+$num1+num1</code></p>\n\n<p>If user type number <strong>3</strong> then result will be <code>$num1+$num1+num1</code></p>\n\n<p>I am not getting how to program this in PHP or C. Please help me if you think it's possible.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "c99", "goto"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1478087257, "post_id": 40379107, "comment_id": 68010220, "body": "late is uninitialized. The call to free will cause undefined behavior."}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1478088775, "post_id": 40379107, "comment_id": 68011168, "body": "Thx, I found the duplicate but wasn&#39;t sure if it was just initialization or declaration that caused problems."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1478088918, "post_id": 40379107, "comment_id": 68011242, "body": "Just initialization, the lifetime of late is the entire function. You could define and initialize it to NULL before any call to goto at the top of the function. Then the behavior would be defined."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1478094663, "post_id": 40379107, "comment_id": 68015072, "body": "There will be space for the &#39;late&#39; variable because it is in scope. It may or may not be on the stack. The compiler may decide to keep it in a register."}], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1478087418, "answer_count": 0, "score": 0, "last_activity_date": 1478086939, "creation_date": 1478086939, "question_id": 40379107, "link": "https://stackoverflow.com/questions/40379107/interaction-of-late-declared-variables-and-goto-in-c", "closed_reason": "Duplicate", "title": "Interaction of late declared variables and goto in C", "body": "<p>So, assuming you have a reason for using a goto... just to avoid the inevitable arguments about why they should/shouldn't be used.</p>\n\n<p>What happens when you declare a variable mid function, say a pointer to some memory that has to be free'd, and the flow control jumps past the variable altogether?</p>\n\n<pre><code>int foo(char* bar)\n{\n    if (NULL == bar)\n    {\n        printf(\"ERR1\\n\");\n        goto out;\n    }\n\n    char* late = malloc(10 * (*bar));\n    if (NULL == late)\n    {\n        printf(\"ERR2\\n\");\n        goto out;\n    }\n\n    // More logic here\n    if (1)\n    {\n        printf(\"ERR3\\n\");\n        goto out;\n    }\n\n    // etc\n\nout:\n    free(late);\n    return 0;\n}\n</code></pre>\n\n<p>There are cases where in 'out:', you definitely want to free the memory allocated to variable 'late'(eg it fell through or came from 'ERR3').   There are also cases early in the function where late hasn't even been created yet and you jump past them.</p>\n\n<p>Normally, when you declare a local variable like this, in assembly, there are some stack operations to move the stack pointer to have space to hold the new variable.   I'd expect goto to act like an unconditional branch operation to a label.  At the end of the function, all the locals gets left on the stack as the stack pointer is adjusted so control can return to the caller.</p>\n\n<p>So, what happens with the 'late' variable when we hit 'ERR1'?   Is space for it ever created on the stack?   How does the 'free' call work just after the 'out' label?</p>\n"}, {"tags": ["c", "multithreading", "pthreads", "posix"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478086954, "post_id": 40379039, "comment_id": 68010011, "body": "I&#39;m not sure what you mean by a &quot;principle&quot;.  It is certainly possible to put an integer into a message, send that message to a mq, and let another thread or process dequeue the message and extract the integer."}, {"owner": {"reputation": 435, "user_id": 4262781, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/484be159f371e00494505a0301a0d32b?s=128&d=identicon&r=PG&f=1", "display_name": "Mvz", "link": "https://stackoverflow.com/users/4262781/mvz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478091955, "post_id": 40379039, "comment_id": 68013110, "body": "@JohnBollinger Yes thats what i mean. Like for example the posix pipe you have pipe(); read(); write(); But i want something similar for posix message queue"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1478091971, "post_id": 40379039, "comment_id": 68013120, "body": "It&#39;s still a bit unclear to me what you&#39;re asking, but it seems that either it is much too broad for SO, or it belies a disappointing lack research.  The Linux manual contains <a href=\"http://man7.org/linux/man-pages/man7/mq_overview.7.html\" rel=\"nofollow noreferrer\">a message queue overview</a> that I think covers POSIX message queues pretty well.  That is, it presents the general usage model and enumerates the standard mq functions; these aspects are not Linux-specific."}], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 0, "last_activity_date": 1478091970, "creation_date": 1478091970, "answer_id": 40380733, "question_id": 40379039, "link": "https://stackoverflow.com/questions/40379039/is-there-a-reader-and-writer-principle-for-the-posix-message-queue/40380733#40380733", "title": "Is there a reader and writer principle for the (posix) message queue?", "body": "<p>Yes, sending from one thread and receiving in another is safe.  Similar to using pipes or sockets etc.</p>\n"}], "owner": {"reputation": 435, "user_id": 4262781, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/484be159f371e00494505a0301a0d32b?s=128&d=identicon&r=PG&f=1", "display_name": "Mvz", "link": "https://stackoverflow.com/users/4262781/mvz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478091970, "creation_date": 1478086755, "last_edit_date": 1478091644, "question_id": 40379039, "link": "https://stackoverflow.com/questions/40379039/is-there-a-reader-and-writer-principle-for-the-posix-message-queue", "title": "Is there a reader and writer principle for the (posix) message queue?", "body": "<p>Is there a reader and writer principle for the (posix) message queue? \nI want to send integers from thread A (writer) to thread B (reader).</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478086442, "post_id": 40378826, "comment_id": 68009690, "body": "@KeineLust it works for global why not local ? I had thought all these days that extern should be able to find variable in the same or the other files"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478086802, "post_id": 40378826, "comment_id": 68009930, "body": "@KeineLust That is not what extern means. It can very well find a declaration in the current unit."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478087134, "post_id": 40378826, "comment_id": 68010137, "body": "Why would you even <i>want</i> to do this?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1478087192, "post_id": 40378826, "comment_id": 68010177, "body": "@2501, you are right, sorry, I mean not in the current block ..."}, {"owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478087199, "post_id": 40378826, "comment_id": 68010184, "body": "@toby turned out to be an interview question ."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478087255, "post_id": 40378826, "comment_id": 68010218, "body": "@SantoshPai Then the short answer is no, the C standard does not allow this"}, {"owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478087324, "post_id": 40378826, "comment_id": 68010267, "body": "@Toby thanks somehow i couldnt say this and lost my chances to get the job."}], "answers": [{"comments": [{"owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "edited": false, "score": 1, "creation_date": 1478087061, "post_id": 40378935, "comment_id": 68010084, "body": "But if we declare int i as global and followed by extern then it compiles ok .Why ?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "edited": false, "score": 0, "creation_date": 1478087146, "post_id": 40378935, "comment_id": 68010142, "body": "@SanthoshPai It doesn&#39;t, if you do it in the same block."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "edited": false, "score": 0, "creation_date": 1478088654, "post_id": 40378935, "comment_id": 68011095, "body": "@SanthoshPai because a global definition has external linkage by default, so the following declaration is consistent with it. Inside the function, the definition has no linkage, so the <code>extern</code> declaration is inconsistent. See my answer."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 2, "last_activity_date": 1478086485, "creation_date": 1478086485, "answer_id": 40378935, "question_id": 40378826, "link": "https://stackoverflow.com/questions/40378826/extern-inside-function/40378935#40378935", "title": "Extern inside function", "body": "<p>You can't declare two variables with the same name in the same block, and that's what you are trying. And the compiler is telling you that. What could be the reason for the error? The C language says so it's not allowed, and the compiler implements the C language. </p>\n\n<p>The compiler found the first \"i\" in the block just fine, that's why it complained. </p>\n\n<p>What would you expect if this was accepted and you used i in the block? How is the compiler to know which of two i's you mean? </p>\n"}, {"comments": [{"owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "edited": false, "score": 0, "creation_date": 1478088764, "post_id": 40379303, "comment_id": 68011163, "body": "Now its clear ,thanks for the detailed answer @davmac"}, {"owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "edited": false, "score": 0, "creation_date": 1478150405, "post_id": 40379303, "comment_id": 68039632, "body": "Thumbs up for the static example @davmac"}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": true, "score": 3, "last_activity_date": 1478090074, "last_edit_date": 1478090074, "creation_date": 1478087574, "answer_id": 40379303, "question_id": 40378826, "link": "https://stackoverflow.com/questions/40378826/extern-inside-function/40379303#40379303", "title": "Extern inside function", "body": "<pre><code>int i = 10;\nextern int i ;\n</code></pre>\n\n<p>The first, because it is function scope, means \"declare and define a variable <code>i</code> which is local to the function\". The variable shall have no linkage because it is function local; specifically (C11 6.2.2 paragraph 6):</p>\n\n<blockquote>\n  <p>The following identifiers have no linkage: [ ... ]; a block scope identifier for an object declared without the storage-class specifier extern.</p>\n</blockquote>\n\n<p>The second statement on the other hand says \"declare a variable <code>i</code> which has external linkage\".</p>\n\n<p>It is allowed, within certain limitations, to re-declare a variable, but in general the declarations must be consistent; the two statements above contradict. Furthermore, an identifier with no linkage cannot be re-declared - from C11 6.7 paragraph 3:</p>\n\n<blockquote>\n  <p>If an identifier has no linkage, there shall be no more than one\n  declaration of the identifier (in a declarator or type specifier) with\n  the same scope and in the same name space</p>\n</blockquote>\n\n<p>(after which some exceptions are listed, but they are not relevant here).</p>\n\n<p>If the statements were <em>outside</em> the function (at file scope level) then the <code>int i = 10;</code> declaration would indicate external linkage, so the following declaration is consistent - and in fact, it doesn't even need to be consistent, since 6.2.2 paragraph 4 applies:</p>\n\n<blockquote>\n  <p>For an identifier declared with the storage-class specifier <code>extern</code> in a scope in which a prior declaration of that identifier is visible, <sup>31)</sup> if the prior declaration specifies internal or external linkage, the linkage of the identifier at the later declaration is the same as the linkage specified at the prior declaration. If no prior declaration is visible, or if the prior\n  declaration specifies no linkage, then the identifier has external linkage.</p>\n</blockquote>\n\n<p>(So, it is perfectly legal at file scope to declare <code>static int i = 0; extern int i;</code> - even though the declarations are inconsistent, the second is allowed by the above rule, though I don't know the rationale for this. You cannot however have those statements in the opposite order).</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5562834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a628fa8fd0c82dab4bf0cc1480b6d67?s=128&d=identicon&r=PG&f=1", "display_name": "sanfranciscan", "link": "https://stackoverflow.com/users/5562834/sanfranciscan"}, "is_accepted": false, "score": 0, "last_activity_date": 1487894639, "creation_date": 1487894639, "answer_id": 42428496, "question_id": 40378826, "link": "https://stackoverflow.com/questions/40378826/extern-inside-function/42428496#42428496", "title": "Extern inside function", "body": "<p>Here is my quick test to same problem. Three ways to use extern. Not to beauty contest but got toy program just working. Using: g++ -std=c++11 -Wall -pedantic test1.cpp test2.cpp test3.cpp -o test. There is room for improvement.</p>\n\n<pre><code>//to save space: ifndefs and std libs removed...!\nk.h:\nextern int k; //declaration...\n-----------------------------------------\ntest1.h:\n#include \"k.h\"...\n-----------------------------------------\ntest1.cpp:\n#include \"test1.h\"\n#include \"test2.h\"\n#include \"test3.h\"...\n-----------------------------------------\nusing namespace std;\nint var = 10;       //defined here\nint k = 1000;       //declared in k.h, defined here\nint main(){\n    extern int var2;//declaration here\n    k = 200;//declared k.h, defined value 1000 at test1, change value here\n    mytest2();  //test2\n    std::cout &lt;&lt; \"at test1 var2:\"&lt;&lt; var2 &lt;&lt; endl;\n    cout &lt;&lt; \"Let us see out:\" &lt;&lt; endl;\n    out();      //test2\n    cout &lt;&lt; \"Let us see check:\" &lt;&lt; endl;\n    check();    //test3\n}\n------------------------------------------\ntest2.h:...\n#include \"k.h\"\nvoid mytest2();\nvoid out();...\n-------------------------------------------\ntest2.cpp:\n#include \"test2.h\"\n\nusing namespace std;\nint var2 = 11111;   //declared in test1, defined here\nextern int var;     //declared here, defined in test1\nvoid mytest2(){\n    cout &lt;&lt; \"at test2 var2: \" &lt;&lt; var2 &lt;&lt; endl;\n    var2 *= 2;      //change value here\n}\nvoid out(){\n    cout &lt;&lt; \"at test2 var \" &lt;&lt; var &lt;&lt; endl;\n    cout &lt;&lt; \"at test2 k \" &lt;&lt; k &lt;&lt; endl;\n}\n-------------------------------------------\ntest3.h:...\n#include \"k.h\"\nvoid check(void);...\n-------------------------------------------\ntest3.cpp:\n#include \"test3.h\"\nusing namespace std;\nextern int var;     //declared here, \nextern int var2;    //declared here\n\nvoid check(){\n    cout &lt;&lt; \"at test3 now var: \" &lt;&lt; var &lt;&lt; endl;\n    cout &lt;&lt; \"at test3 now var2: \" &lt;&lt; var2 &lt;&lt; endl;\n    cout &lt;&lt; \"at test3 now k: \" &lt;&lt; k &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 2385, "user_id": 2276753, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/nW8RH.jpg?s=128&g=1", "display_name": "Santhosh Pai", "link": "https://stackoverflow.com/users/2276753/santhosh-pai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 40379303, "answer_count": 3, "score": 0, "last_activity_date": 1487894639, "creation_date": 1478086148, "last_edit_date": 1478087827, "question_id": 40378826, "link": "https://stackoverflow.com/questions/40378826/extern-inside-function", "title": "Extern inside function", "body": "<p>I know this is an basic question , not sure the c standard allows it to do or not .I was given a code snippet in an interview and was asked to give the output.</p>\n\n<p>I have declared an extern and an local variable with the same name inside a function it throws a re declaration error ( just like global) what could be the reason ? since i is declared in the same block, extern should be able to find it rite ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n\n\nint i = 10;\nextern int i ;\n\n\nprintf(\"%d \\n\",i);\n\n}\n\nError : 1.c: In function \u2018main\u2019:\n1.c:13: error: extern declaration of \u2018i\u2019 follows declaration with no linkage\n1.c:12: note: previous definition of \u2018i\u2019 was here\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 4, "last_activity_date": 1478086541, "creation_date": 1478086541, "answer_id": 40378963, "question_id": 40378794, "link": "https://stackoverflow.com/questions/40378794/passing-value-through-pointer-to-void/40378963#40378963", "title": "passing value through pointer to void", "body": "<p>It works, because (on your system!) the <code>void*</code> pointer itself contains enough bits to hold all bits of a <code>long</code> value. This is not portable.</p>\n\n<p>You're right that you'd normally cast a <code>long*</code> to <code>void*</code> and back. That is portable.</p>\n"}, {"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1478088204, "post_id": 40379031, "comment_id": 68010803, "body": "That is not correct way to print value of <code>foo</code>. Either use <code>printf(&quot;%p&quot;, (void*)foo); &#47;* better *&#47;</code> or <code>printf(&quot;%ld&quot;, (long)foo); &#47;* worse *&#47;</code>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1478088434, "post_id": 40379031, "comment_id": 68010954, "body": "Pointers are not &quot;just numbers&quot;. Famously, 8086 &quot;far&quot; pointers are <i>two</i> numbers. (Segment/offset)"}], "tags": [], "owner": {"reputation": 9227, "user_id": 2277815, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b02dba4479ba90129bd366dac7858959?s=128&d=identicon&r=PG", "display_name": "Hannu", "link": "https://stackoverflow.com/users/2277815/hannu"}, "is_accepted": false, "score": 1, "last_activity_date": 1478086732, "creation_date": 1478086732, "answer_id": 40379031, "question_id": 40378794, "link": "https://stackoverflow.com/questions/40378794/passing-value-through-pointer-to-void/40379031#40379031", "title": "passing value through pointer to void", "body": "<p>It works because pointers are just numbers.  </p>\n\n<p>Your test function \"thinks\" it received a pointer to memory location 5, and you can of course print this address. You wouldn't be able to assign anything to this location, so *myid = 42 would cause a segmentation fault. Casting a number to a pointer is syntactically correct so your compiler won't moan but it doesn't make any sense.  Run this code and see how a pointer looks when printed (ignore the warning from your compiler). </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid test(void *id, long *foo) {\n    long myid;\n    myid = (long) id;\n    printf(\"my id is %ld, %ld\\n\", myid, foo);\n}\n\nint main() {\n    long id = 5;\n    long foo;\n    foo = 42;\n    test( (void *)id, &amp;foo);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 1, "last_activity_date": 1478086937, "creation_date": 1478086937, "answer_id": 40379106, "question_id": 40378794, "link": "https://stackoverflow.com/questions/40378794/passing-value-through-pointer-to-void/40379106#40379106", "title": "passing value through pointer to void", "body": "<blockquote>\n  <p>I am confused as to why it works: why can you cast the long to void* and cast it back with a long.</p>\n</blockquote>\n\n<pre><code>long id = 5;\ntest( (void *)id);\n</code></pre>\n\n<p>This is actually valid. You basically mean to pass a <code>void</code> pointer to function <code>test</code>, that pointer holds the address of <code>5</code>.</p>\n\n<p>In <code>void test(void * id)</code>, you cast that pointer back to <code>long</code> which is also valid.</p>\n\n<p>Note in your code you never deference the pointer so things work. If you do dereference the pointer <code>id</code> in <code>test</code>, that would usually lead to segfault due to bad memory access.</p>\n"}], "owner": {"reputation": 1449, "user_id": 2366592, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/1bf70d44a23f7ab72aa97965ea0750dd?s=128&d=identicon&r=PG", "display_name": "python152", "link": "https://stackoverflow.com/users/2366592/python152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 40378963, "answer_count": 3, "score": 0, "last_activity_date": 1478086937, "creation_date": 1478086080, "question_id": 40378794, "link": "https://stackoverflow.com/questions/40378794/passing-value-through-pointer-to-void", "title": "passing value through pointer to void", "body": "<p>The snippet passes the value of <code>id</code> to a routine that takes a general <code>void *</code> structure.  I am confused as to <em>why</em> it works: why can you cast the <code>long</code> to <code>void*</code> and cast it back with a <code>long</code>.</p>\n\n<p>In particular, I was thinking if you want to pass by pointer, then you should pass the address of the variable such as <code>&amp;id</code> to the <code>test()</code> function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid test(void * id) {\n    long myid;\n    myid = (long) id;\n    printf(\"my id is %ld\\n\", myid);\n}\n\nint main() {\n    long id = 5;\n    test( (void *)id);\n}\n</code></pre>\n"}, {"tags": ["c", "winapi", "menu", "ownerdrawn"], "comments": [{"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 1, "creation_date": 1478100610, "post_id": 40378438, "comment_id": 68019439, "body": "You need to handle WM_NCPAINT and WM_NCHITTEST to draw into the non-client area. However, this means that you&#39;ll need to draw the entire menu bar with the menu items yourself (WM_DRAWITEM will be bypassed)."}], "owner": {"reputation": 421, "user_id": 3449558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf78e60ff28a6119c16d03ce9412b56?s=128&d=identicon&r=PG&f=1", "display_name": "user3449558", "link": "https://stackoverflow.com/users/3449558/user3449558"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1478084888, "creation_date": 1478084888, "question_id": 40378438, "link": "https://stackoverflow.com/questions/40378438/winapi-how-to-set-the-background-of-the-menu-stripe-of-an-ownerdrawn-window-men", "title": "WinApi: How to set the background of the menu stripe of an ownerdrawn window menu?", "body": "<p>I use an ownerdrawn menu with colored background of the menu items. The default window procedure does a kind of erase background and then asks\nfor WM_DRAWITEM of the menu items. So the result are colored items in the stripe, but the remaining area is white (default menu background). Is there a\nway to hook in, like WM_ERASEBKGRND of the client area or to set the brush for the erasing?</p>\n\n<p>Thanks</p>\n\n<p><a href=\"https://i.stack.imgur.com/gwtgQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gwtgQ.jpg\" alt=\"Sample of described menu\"></a></p>\n"}, {"tags": ["c", "arrays", "literals"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 3, "creation_date": 1478084685, "post_id": 40378342, "comment_id": 68008666, "body": "Honestly, the non-macro version is more readable. I suggest you stick to it."}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "edited": false, "score": 1, "creation_date": 1478094151, "post_id": 40378444, "comment_id": 68014693, "body": "It works. But anyway: I think using such macro is too dangerous since A could also be a pointer, in which case we get nonsense for num_bytes."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "edited": false, "score": 0, "creation_date": 1478095056, "post_id": 40378444, "comment_id": 68015384, "body": "I agree, we should avoid these kind of constructions in real world."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 0, "last_activity_date": 1478084903, "creation_date": 1478084903, "answer_id": 40378444, "question_id": 40378342, "link": "https://stackoverflow.com/questions/40378342/usage-of-literal-arrays-or-compounds/40378444#40378444", "title": "Usage of Literal arrays or compounds", "body": "<blockquote>\n  <p>This seems to work, but I think that the \"internal\" array ,\n  representing the passed literal is created twice in memory (the macro\n  evaluates it twice).</p>\n</blockquote>\n\n<p>From the C99 standard:</p>\n\n<blockquote>\n  <p>6.5.3.4/2</p>\n  \n  <p>The sizeof operator yields the size (in bytes) of its operand, which\n  may be an expression or the parenthesized name of a type. The size is\n  determined from the type of the operand. The result is an integer. If\n  the type of the operand is a variable length array type, the operand\n  is evaluated; otherwise, <strong>the operand is not evaluated</strong> and the result\n  is an integer constant.</p>\n</blockquote>\n\n<p>So <code>A</code> is evaluated only once in your macro:</p>\n\n<pre><code>#define CREATE_BYTES(A) &amp;((BYTES_T ){.bytes_p = ((A)), .num_bytes = sizeof((A))})\n</code></pre>\n"}], "owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 40378444, "answer_count": 1, "score": -1, "last_activity_date": 1478084945, "creation_date": 1478084546, "last_edit_date": 1478084945, "question_id": 40378342, "link": "https://stackoverflow.com/questions/40378342/usage-of-literal-arrays-or-compounds", "title": "Usage of Literal arrays or compounds", "body": "<p>I have a struct</p>\n\n<pre><code>typedef struct\n{\n    int num_bytes;   // number of relevant bytes\n    void * bytes_p;  // pointer to bytes\n} BYTES_T;\n</code></pre>\n\n<p>which is passed as parameter to a lot of functions on many places.</p>\n\n<p>Usually I use it as follows:</p>\n\n<pre><code>uint8_t my_array[] = {0x01, 0x03, 0xff} ; // example array\nBYTES_T my_bytes;\nmy_bytes.bytes_p = my_array;\nmy_bytes.num_bytes= sizeof(my_array);\n\n...\n\nfoo(&amp;my_bytes); // call a function\n</code></pre>\n\n<p>To make parts of my code more readable I would like to avoid simultaneous creation of both the array AND the struct within the same context. </p>\n\n<p>So as a first trial I played around with a macro, using compound literals:</p>\n\n<pre><code>#define ARRAYINFO(A) &amp;((BYTES_T ){.bytes_p = ((A)), .num_bytes = sizeof(((A)))})\n</code></pre>\n\n<p>and use it like </p>\n\n<pre><code>foo(ARRAYINFO(my_array));\n</code></pre>\n\n<p>This works - when an array is passed. But when I pass the pointer to an array, it will - of course - produce nonsense:</p>\n\n<pre><code>uint8_t * array_pointer = my_array; // this is allowed\nfoo(ARRAYINFO(array_pointer ));     // nonsense for num_bytes because sizeof()\n</code></pre>\n\n<p>Therefore, this is dangerous and not an option. </p>\n\n<p>NextI thought about a construct to create the struct without creating the array explicitly:</p>\n\n<pre><code>#define CREATE_BYTES(A) &amp;((BYTES_T ){.bytes_p = ((A)), .num_bytes = sizeof((A))})\n\nBYTES_T my_bytes = CREATE_BYTES(((uint8_t []){1,2,3,4,5}));\n</code></pre>\n\n<p>This seems to work, but I think that the \"internal\" array , representing the passed literal is created twice in memory (the macro evaluates it twice).</p>\n\n<p>Is there a solution for such idea?</p>\n"}, {"tags": ["c", "truncate", "misra", "coverity", "negation"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1478083102, "post_id": 40377804, "comment_id": 68007662, "body": "you can just use <code>var = 0;</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478083109, "post_id": 40377804, "comment_id": 68007665, "body": "In your actual code, do you really have <code>~0xffff</code>? You know that <code>~0xffff</code> is equal to <code>0</code>?"}, {"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 0, "creation_date": 1478083193, "post_id": 40377804, "comment_id": 68007719, "body": "Thanks guys but the value 0xFFFF is just an example. In the actual code, the value is a variable which can take whatever value (but 16 bits)."}, {"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 0, "creation_date": 1478083318, "post_id": 40377804, "comment_id": 68007783, "body": "I think something like special casting operations, or masks. But I do not find it."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1478083348, "post_id": 40377804, "comment_id": 68007802, "body": "Could you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1478083604, "post_id": 40377804, "comment_id": 68007957, "body": "With <code>var = ~0xFFFF;</code> I get a warning, but with <code>var = ~(uint16_t)0xffff;</code> I don&#39;t."}, {"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 1, "creation_date": 1478083814, "post_id": 40377804, "comment_id": 68008100, "body": "Thanks. But I get the MISRA warning from a static analysis tool (Coverity). My compiler does not raise the warning neither, but Coverity does."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1478085013, "post_id": 40377804, "comment_id": 68008867, "body": "@Ben9000RPM Please find which version is it, and check the rule on explicit conversions."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1478087797, "post_id": 40377804, "comment_id": 68010558, "body": "What is the intended purpose of the <code>~0xFFFF</code> assignment? To assign zero? Or to assign the number with the largest possible magnitude?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478087976, "post_id": 40377804, "comment_id": 68010676, "body": "Which MISRA version? Neither MISRA-C:2004 12.4 nor MISRA-C:2012 12.4 seem to be relevant to this code. This isn&#39;t an unsigned integer wrap-around of a constant expression."}, {"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478089059, "post_id": 40377804, "comment_id": 68011316, "body": "@Lundin, Coverity is configured to follow MISRA 2012."}, {"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 0, "creation_date": 1478089092, "post_id": 40377804, "comment_id": 68011338, "body": "@ Toby, 0xFFFF is an example as mentioned in the question."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478090350, "post_id": 40377804, "comment_id": 68012088, "body": "@Ben9000RPM Please file a bug report with a link to this post."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 1, "creation_date": 1478089128, "post_id": 40378750, "comment_id": 68011366, "body": "My system is 16 bits. But maybe Coverity does not see it and extends it to 32 bits, I do not know."}, {"owner": {"reputation": 2336, "user_id": 31152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BozWc.jpg?s=128&g=1", "display_name": "Malkocoglu", "link": "https://stackoverflow.com/users/31152/malkocoglu"}, "reply_to_user": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 1, "creation_date": 1478099126, "post_id": 40378750, "comment_id": 68018312, "body": "@Ben9000RPM: Your first comment made sense but the second suggests something wrong (maybe configuration problem) with the analyser..."}, {"owner": {"reputation": 1113, "user_id": 5590551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myyec.gif?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/5590551/caleb"}, "reply_to_user": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 0, "creation_date": 1478106024, "post_id": 40378750, "comment_id": 68023005, "body": "@Ben9000RPM Out of curiosity, what does the --type_sizes switch say from your build log? Coverity auto-detects type sizes. Usually ints are 32-bit, but that could be different. If ints are 16-bit as well, it&#39;d explain why your 32-bit example also complains - and would suggest a bug in the MISRA checker where it&#39;s assuming integers are 32-bits."}, {"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "reply_to_user": {"reputation": 1113, "user_id": 5590551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myyec.gif?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/5590551/caleb"}, "edited": false, "score": 0, "creation_date": 1478159965, "post_id": 40378750, "comment_id": 68043178, "body": "@Caleb, after some investigations, Coverity takes into account that integer is 16 bit. A question has been raised to them. I&#39;ll keep you informed."}], "tags": [], "owner": {"reputation": 2336, "user_id": 31152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BozWc.jpg?s=128&g=1", "display_name": "Malkocoglu", "link": "https://stackoverflow.com/users/31152/malkocoglu"}, "is_accepted": false, "score": 0, "last_activity_date": 1478085950, "creation_date": 1478085950, "answer_id": 40378750, "question_id": 40377804, "link": "https://stackoverflow.com/questions/40377804/misra-warning-12-4-integer-conversion-resulted-in-truncation-negation-operatio/40378750#40378750", "title": "MISRA warning 12.4: integer conversion resulted in truncation (negation operation)", "body": "<p>When the compiler looks at the right side, first it sees the literal 0xFFFF. It is automatically promoted to an integer which is (obvious from the warning) 32-bit in your system. Now we can imagine that value as 0x0000FFFF (whole 32-bit). When the compiler does the ~ operation on it, it becomes 0xFFFF0000 (whole 32-bit). When you write <code>var = ~0xFFFF;</code> the compiler in fact sees <code>var = 0xFFFF0000;</code> just before the assign operation. And of course a truncation happens during this assignment...</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 0, "creation_date": 1478090487, "post_id": 40380083, "comment_id": 68012170, "body": "Thanks for this development. Unfortunately, var = (uint16_t)~(uint16_t)0xFFFFu; still raises the warning. Furthermore, I do not get any other warning than 12.4."}, {"owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 0, "creation_date": 1478090592, "post_id": 40380083, "comment_id": 68012233, "body": "I have tried then to use 32bits value and the result is the same with the following code:  typedef unsigned int  uint32_t;   uint32_t var;  var = (uint32_t)(~(uint32_t)(0xFFFF0000u));"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "edited": false, "score": 1, "creation_date": 1478090659, "post_id": 40380083, "comment_id": 68012282, "body": "@Ben9000RPM Seems like a tool bug. Which is no surprise, 95% of all MISRA checkers on the market are broken beyond repair. Don&#39;t obfuscate your code, simply write <code>var = (uint16_t)~0xFFFFu;</code> which is perfectly safe, and ignore the tool."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1478090485, "last_edit_date": 1478090485, "creation_date": 1478090044, "answer_id": 40380083, "question_id": 40377804, "link": "https://stackoverflow.com/questions/40377804/misra-warning-12-4-integer-conversion-resulted-in-truncation-negation-operatio/40380083#40380083", "title": "MISRA warning 12.4: integer conversion resulted in truncation (negation operation)", "body": "<p>Summary:</p>\n\n<p>Assuming you are using a static analyser for MISRA-C:2012, you should have gotten warnings for violations against rule 10.3 and 7.2. </p>\n\n<p>Rule 12.4 is only concerned with wrap-around of unsigned integer constants, which can only occur with the binary + and - operators. It seems irrelevant here.</p>\n\n<hr>\n\n<p>The warning text doesn't seem to make sense for neither MISRA-C:2004 12.4 nor MISRA-C:2012 12.4. Possibly, the tool is displaying the wrong warning.</p>\n\n<p>There is however a MISRA:2012 rule 10.3 that forbids to assign a value to a variable that is of a smaller type than intended in the expression. </p>\n\n<p>To use MISRA terms, the <em>essential type</em> of <code>~0xFFFF</code> is unsigned, because the hex literal is of type <code>unsigned int</code>. On your system, <code>unsigned int</code> is apparently larger than <code>uint16_t</code> (int is a \"greater ranked\" integer type than short in the standard 6.3.1.1, even if they are of the same size). That is, <code>uint16_t</code> is of a narrower essential type than <code>unsigned int</code>, so your code does not conform to rule 10.3. This is what your tool should have reported.</p>\n\n<p>The actual technical issue, which is hidden behind the MISRA terms, is that the <code>~</code> operator is dangerous because it comes with an implicit integer promotion. Which in turn causes code like for example </p>\n\n<pre><code>uint8_t x=0xFF; \n~x &lt;&lt; n; // BAD, always a bug\n</code></pre>\n\n<p>to invoke undefined behavior when the value 0xFFFFFF00 is left shifted.</p>\n\n<p>It is therefore always good practice to cast the result of the <code>~</code> operator to the correct, intended type. There was even an explicit rule about this in MISRA 2004, which has now merged into the \"essential type\" rules.</p>\n\n<p>In addition, MISRA (7.2) states that all integer constants should have an <code>u</code> or <code>U</code> suffix. </p>\n\n<p>MISRA-C:2012 compliant code would look like this:</p>\n\n<pre><code>uint16_t var;\nvar = (uint16_t)~0xFFFFu;\n</code></pre>\n\n<p>or overly pedantic:</p>\n\n<pre><code>var = (uint16_t)~(uint16_t)0xFFFFu;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 6234117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b112dabb975c8644cf6a8464b56e8688?s=128&d=identicon&r=PG&f=1", "display_name": "Ben9000RPM", "link": "https://stackoverflow.com/users/6234117/ben9000rpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1478090733, "creation_date": 1478083003, "last_edit_date": 1478090733, "question_id": 40377804, "link": "https://stackoverflow.com/questions/40377804/misra-warning-12-4-integer-conversion-resulted-in-truncation-negation-operatio", "title": "MISRA warning 12.4: integer conversion resulted in truncation (negation operation)", "body": "<p>In a huge macro I have in a program aimed for a 16-bit processor, the following code (simplified) appears several times:</p>\n\n<pre><code>typedef unsigned short int  uint16_t;\nuint16_t var;\nvar = ~0xFFFF;\n</code></pre>\n\n<p>MISRA complains with the warning 12.4: integer conversion resulted in truncation. The tool used to get this is Coverity.</p>\n\n<p>I have checked the forum but I really need a solution (instead of changing the negation by the actual value) as this line is inside a macro with varying parameters.</p>\n\n<p>I have tried many things and here is the final attempt which fails also:</p>\n\n<pre><code>var = (uint16_t)((~(uint16_t)(0xFFFFu))&amp;(uint16_t)0xFFFFu);\n</code></pre>\n\n<p>(the value 0xFFFF is just an example. In the actual code, the value is a variable which can take whatever value (but 16 bits))</p>\n\n<p>Do you have any other idea please? Thanks.</p>\n\n<p>EDIT:</p>\n\n<p>I have tried then to use 32bits value and the result is the same with the following code: </p>\n\n<pre><code>typedef unsigned int uint32_t; \nuint32_t var; \nvar = (uint32_t)(~(uint32_t)(0xFFFF0000u));\n</code></pre>\n"}, {"tags": ["c", "arrays", "function", "matrix", "malloc"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1478082183, "post_id": 40377415, "comment_id": 68007086, "body": "Do you understand how to get a 1D array to work?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478082316, "post_id": 40377415, "comment_id": 68007177, "body": "<code>alloc_star_notation</code> leak memory allocated by <code>alloc_subscript_notation</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478082660, "post_id": 40377415, "comment_id": 68007388, "body": "BTW using your code you are using a pointer to pointer, that isn&#39;t a 2D array..."}, {"owner": {"reputation": 3496, "user_id": 4541492, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh5.googleusercontent.com/-cOlHMb569P8/AAAAAAAAAAI/AAAAAAAADvQ/wlBHgpWKq7w/photo.jpg?sz=128", "display_name": "Vince Varga", "link": "https://stackoverflow.com/users/4541492/vince-varga"}, "edited": false, "score": 0, "creation_date": 1478082941, "post_id": 40377415, "comment_id": 68007570, "body": "how would I fix the leaked memory in <code>alloc_star_notation</code>?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478083126, "post_id": 40377415, "comment_id": 68007681, "body": "By freeing the &quot;matrix&quot; before to <code>malloc</code> new memory. Or using <code>realloc</code>."}, {"owner": {"reputation": 701, "user_id": 3983756, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/966fffbafc3c218b194488772be93d6c?s=128&d=identicon&r=PG", "display_name": "ThunderWiring", "link": "https://stackoverflow.com/users/3983756/thunderwiring"}, "edited": false, "score": 0, "creation_date": 1478085886, "post_id": 40377415, "comment_id": 68009346, "body": "This is not Matlab! there is no 2D array while every row is of a different size, since such a thing is achievable in C, you need to define it by <code>struct</code>"}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1478082315, "post_id": 40377527, "comment_id": 68007176, "body": "What you say is true, but you might want to explain the significance of the difference."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1478082369, "post_id": 40377527, "comment_id": 68007204, "body": "@Peter We&#39;ll have to see how OP responds."}, {"owner": {"reputation": 3496, "user_id": 4541492, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh5.googleusercontent.com/-cOlHMb569P8/AAAAAAAAAAI/AAAAAAAADvQ/wlBHgpWKq7w/photo.jpg?sz=128", "display_name": "Vince Varga", "link": "https://stackoverflow.com/users/4541492/vince-varga"}, "edited": false, "score": 0, "creation_date": 1478083231, "post_id": 40377527, "comment_id": 68007737, "body": "Oh, it&#39;s an (including but not necessarily limited to :)) <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a> issue"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 3496, "user_id": 4541492, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh5.googleusercontent.com/-cOlHMb569P8/AAAAAAAAAAI/AAAAAAAADvQ/wlBHgpWKq7w/photo.jpg?sz=128", "display_name": "Vince Varga", "link": "https://stackoverflow.com/users/4541492/vince-varga"}, "edited": false, "score": 0, "creation_date": 1478083788, "post_id": 40377527, "comment_id": 68008077, "body": "@VinceVarga Yes [] has precedence over *."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 2, "last_activity_date": 1478082189, "creation_date": 1478082189, "answer_id": 40377527, "question_id": 40377415, "link": "https://stackoverflow.com/questions/40377415/allocate-space-for-2d-array-in-a-function-in-c/40377527#40377527", "title": "Allocate space for 2D array, in a function in C?", "body": "<p>No, <code>*matrix[i][j]</code> and <code>matrix[0][i][j]</code> are not the same. </p>\n\n<p>The former is identical to <code>*(matrix[i][j])</code>, whereas the latter is identical to <code>(*matrix)[i][j]</code>.</p>\n\n<p>Since you're trying to access the pointer which was passed to the function using the address operator, you have to use the latter version.</p>\n"}, {"tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 2, "last_activity_date": 1478082441, "creation_date": 1478082441, "answer_id": 40377610, "question_id": 40377415, "link": "https://stackoverflow.com/questions/40377415/allocate-space-for-2d-array-in-a-function-in-c/40377610#40377610", "title": "Allocate space for 2D array, in a function in C?", "body": "<blockquote>\n  <p>I couldn't get it to work, however matrix[0][i][j] worked and I just can't get my head around it. Aren't the two notions the same?</p>\n</blockquote>\n\n<p>No, <code>*matrix[i][j]</code> and <code>matrix[0][i][j]</code> are different things.</p>\n\n<p>Given <code>int *** matrix</code>, then <code>matrix[i][j]</code> is pointer to <code>int</code>, and <code>*matrix[i][j]</code> is actually <code>matrix[i][j][0]</code></p>\n"}, {"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 0, "last_activity_date": 1478083243, "creation_date": 1478083243, "answer_id": 40377915, "question_id": 40377415, "link": "https://stackoverflow.com/questions/40377415/allocate-space-for-2d-array-in-a-function-in-c/40377915#40377915", "title": "Allocate space for 2D array, in a function in C?", "body": "<p>I'd suggest you to use a contiguous block of memory to simplify tour code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid alloc_subscript_notation(int number_of_rows, int number_of_cols, int **matrix)\n{\n    *matrix = malloc(number_of_rows * number_of_rows * sizeof(int));\n\n    if (*matrix != NULL)\n    {\n       for (int i=0; i&lt;number_of_rows; i++)\n       {\n           for (int j=0; j&lt;number_of_cols; j++)\n           {\n              (*matrix)[(i*number_of_cols)+j] = (i*number_of_cols)+j;\n           }\n       }\n    }\n}\n\n\nint main (void) {\n    int *matrix;\n    int number_of_rows = 3;  // it's dynamic in my program, but I use it this hard-coded value for clarity\n    int number_of_cols = 3;  // it's dynamic in my program, but I use it this hard-coded value for clarity\n    // I want to be able to access matrix elements here\n    // All good here.\n    alloc_subscript_notation(number_of_rows, number_of_cols, &amp;matrix);\n\n    if (matrix != NULL)\n    {\n       printf(\"subscript_notation ready. main: \"\n              \" %d, %d, %d, modified: %d\\n\",\n              matrix[(0*number_of_cols)+2], matrix[(1*number_of_cols)+1], matrix[(2*number_of_cols)+0], matrix[(0*number_of_cols)+1]);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1478083870, "creation_date": 1478083870, "answer_id": 40378114, "question_id": 40377415, "link": "https://stackoverflow.com/questions/40377415/allocate-space-for-2d-array-in-a-function-in-c/40378114#40378114", "title": "Allocate space for 2D array, in a function in C?", "body": "<p>Just to expand the answer of @artm, you are not (strictly speaking) reserving space for a 2D array, the correct way to reserve space (without segmentation) for a 2D array in C is using a <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic void func(size_t dim, int (**matrix)[dim])\n{\n    *matrix = malloc(sizeof(int[dim]) * dim);\n}\n\nint main(void)\n{\n    size_t dim = 3;\n    int (*matrix)[dim]; /* A pointer to an array of n elements */\n\n    func(dim, &amp;matrix);\n    free(matrix);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3496, "user_id": 4541492, "user_type": "registered", "accept_rate": 35, "profile_image": "https://lh5.googleusercontent.com/-cOlHMb569P8/AAAAAAAAAAI/AAAAAAAADvQ/wlBHgpWKq7w/photo.jpg?sz=128", "display_name": "Vince Varga", "link": "https://stackoverflow.com/users/4541492/vince-varga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 40377527, "answer_count": 4, "score": 0, "last_activity_date": 1478083870, "creation_date": 1478081907, "last_edit_date": 1495541235, "question_id": 40377415, "link": "https://stackoverflow.com/questions/40377415/allocate-space-for-2d-array-in-a-function-in-c", "title": "Allocate space for 2D array, in a function in C?", "body": "<p>I am working on some computational physics problems in C and I face some confusion regarding my code. I spent the last weeks reading about C but I'm still new to this language.</p>\n\n<p>I need to work on a two dimensional array. The length of each row may vary, so for example, I might want to use: create and modify a \"triangle\" matrix: <code>[[0,1,2][1,2][2]]</code>.</p>\n\n<p>In order to structure my code in a way that is maintainable, easy to read and modify, I wanted to move parts of the logic to a function. However, it appears to be more difficult than I expected.</p>\n\n<p>I started with an approach where I create a <code>int **matrix</code> variable and pass it to a function, prefixing it with an <a href=\"https://stackoverflow.com/questions/2838038/c-programming-malloc-inside-another-function\">ampersand</a> and accept a three-star int: <code>int ***</code>, and work with the matrix as <code>*matrix[i][j]</code>. I couldn't get it to work, however <code>matrix[0][i][j]</code> worked and <strong>I just can't get my head around it. Aren't the two notions the same?</strong></p>\n\n<p>Here is my code:</p>\n\n<pre><code>void alloc_subscript_notation(int number_of_rows, int *** matrix) {\n    matrix[0] = malloc(number_of_rows * sizeof(int *));\n    for (int i = 0; i &lt; number_of_rows; i++)\n        matrix[0][i] = calloc((number_of_rows-i), sizeof(int));\n\n}\n\nvoid modify_subscript(int number_of_rows, int *** matrix) {\n    matrix[0][0][1] = 8;  // just set a value of an element to 8, as a proof of concept\n}\n\nvoid subscript_notation (int number_of_rows, int *** matrix) {\n    alloc_subscript_notation(number_of_rows, matrix);\n    modify_subscript(number_of_rows, matrix);  // I can even modify it\n}\n\n\nvoid alloc_star_notation(int number_of_rows, int *** matrix) {\n    *matrix = malloc(number_of_rows * sizeof(int *));\n\n    for (int i = 0; i &lt; number_of_rows; i++)\n        *matrix[i] = calloc((number_of_rows-i), sizeof(int));\n\n    printf(\"alloc_subscript_notation: zeros: %d, %d, %d\\n\",  // just a few examples\n           *matrix[0][2], *matrix[1][1], *matrix[2][0]);\n}\n\nvoid star_notation (int number_of_rows, int *** matrix) {\n    // SEGMENTATION FAULT!!!\n    alloc_star_notation(number_of_rows, matrix);\n}\n\nint main (void) {\n    int ** matrix;\n    int number_of_rows = 3;  // it's dynamic in my program, but I use it this hard-coded value for clarity\n    // I want to be able to access matrix elements here\n    // All good here.\n    subscript_notation(number_of_rows, &amp;matrix);\n    printf(\"subscript_notation ready. main: \"\n           \" %d, %d, %d, modified: %d\\n\",\n           matrix[0][2], matrix[1][1], matrix[2][0], matrix[0][1]);\n\n    // Segmentation Fault\n    star_notation(number_of_rows, &amp;matrix);\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 2, "creation_date": 1478081651, "post_id": 40377322, "comment_id": 68006757, "body": "don&#39;t compare a pointer with an integer"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1478081682, "post_id": 40377322, "comment_id": 68006783, "body": "what type <code>fread()</code> returns?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478081695, "post_id": 40377322, "comment_id": 68006789, "body": "Welcome to Stack Overflow! Please show your research/debugging effort so far. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> page first."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1478081703, "post_id": 40377322, "comment_id": 68006795, "body": "Please read e.g. <a href=\"http://en.cppreference.com/w/c/io/fread\" rel=\"nofollow noreferrer\">this <code>fread</code> reference</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1478081805, "post_id": 40377322, "comment_id": 68006863, "body": "Don&#39;t compare an integer with a pointer, like the compiler tells you. <a href=\"https://linux.die.net/man/3/fread\" rel=\"nofollow noreferrer\">rtfm fread</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1478082754, "post_id": 40377347, "comment_id": 68007442, "body": "The definition of <code>NULL</code> is implementation defined. <code>(void*)0</code> is just one widely used implementation. And C standard 6.3.2.3.3 (N1570) explicitly allow <code>NULL</code> (&quot;null pointer constant&quot;) to be &quot;an integer constant expression&quot;, so <code>NULL</code> is not necessarily of a pointer type."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1478082864, "post_id": 40377347, "comment_id": 68007519, "body": "@user3528438: Hum. Learn something new every day. I thought that was the C++ rule, and the C one was tighter. In response to your comment, I&#39;ve loosened the answer."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 5, "last_activity_date": 1478082832, "last_edit_date": 1478082832, "creation_date": 1478081709, "answer_id": 40377347, "question_id": 40377322, "link": "https://stackoverflow.com/questions/40377322/i-get-the-warning-comparison-between-pointer-and-integer/40377347#40377347", "title": "I get the Warning: comparison between pointer and integer", "body": "<p><code>fread</code> returns a <code>size_t</code> value which is an unsigned integral type. Your platform is defining <code>NULL</code> as <code>(void*)0</code> which is a pointer type.</p>\n\n<p>Your compiler issues a warning since you're comparing these unrelated types.</p>\n\n<p>The solution is to drop the <code>!= NULL</code> in your condition:</p>\n\n<pre><code>while (fread(&amp;searchrecord,sizeof(record),1,fl))\n</code></pre>\n\n<p>which is clearer anyway.</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1478081857, "creation_date": 1478081857, "answer_id": 40377398, "question_id": 40377322, "link": "https://stackoverflow.com/questions/40377322/i-get-the-warning-comparison-between-pointer-and-integer/40377398#40377398", "title": "I get the Warning: comparison between pointer and integer", "body": "<p><code>fread</code> returns the number of items successfully read from the stream. You should compare that to the actual number you passed:</p>\n\n<pre><code>while (fread(&amp;searchrecord, sizeof(record), 1, fl) == 1)\n</code></pre>\n\n<p>If you try and read more than one item, you should store the return value and compare that to <code>0</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 7103981, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VaQaY4zH06Q/AAAAAAAAAAI/AAAAAAAAdJ0/EvwMLQ4lprI/photo.jpg?sz=128", "display_name": "danny suen", "link": "https://stackoverflow.com/users/7103981/danny-suen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1478082832, "creation_date": 1478081605, "last_edit_date": 1478081921, "question_id": 40377322, "link": "https://stackoverflow.com/questions/40377322/i-get-the-warning-comparison-between-pointer-and-integer", "title": "I get the Warning: comparison between pointer and integer", "body": "<p>I am confused as to why I get this warning[Warning] comparison between pointer and integer</p>\n\n<pre><code>while (fread(&amp;searchrecord, sizeof(record), 1, fl) != NULL)\n</code></pre>\n\n<p>How I fix it?</p>\n"}, {"tags": ["c", "gcc", "gnu"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478081392, "post_id": 40377246, "comment_id": 68006596, "body": "ohh.. please fix the syntax."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1478081560, "post_id": 40377246, "comment_id": 68006700, "body": "Your code implement only one of the 5 functions defined and called by <code>main</code>. Where are <code>int two_variable(){}</code> <code>int three_variable(){}</code> <code>int quadratic(){}</code> <code>int trigonometric(){}</code> ?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1478081611, "post_id": 40377246, "comment_id": 68006735, "body": "Please try to create a <a href=\"http://stackoverflow.com/help/mcve\"><b><i>Minimal</i></b>, Complete, and Verifiable Example</a> to show us. And  please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. And include the actual errors you get, in full, complete and unedited."}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 3953693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397c0cf2bb470b47adae9afa27d31cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Dheeraj Kumar", "link": "https://stackoverflow.com/users/3953693/dheeraj-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1478081819, "creation_date": 1478081819, "answer_id": 40377380, "question_id": 40377246, "link": "https://stackoverflow.com/questions/40377246/undefined-reference-to-function-in-c-whilst-the-function-is-already-defined/40377380#40377380", "title": "Undefined reference to &#39;function&#39; in c whilst the function is already defined", "body": "<p>you are using below functions in your program </p>\n\n<pre><code>arithmetic();\ntrigonometric();\nquadratic(); \ntwo_variable();\nthree_variable()\n</code></pre>\n\n<p>But you have implemented just arithmetic() function not the other ones. Implement those and error will go away. </p>\n"}], "owner": {"reputation": 1, "user_id": 6678861, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3h19o2CJEis/AAAAAAAAAAI/AAAAAAAAAJY/JejGaAwbr9Q/photo.jpg?sz=128", "display_name": "Yash J. Doshi", "link": "https://stackoverflow.com/users/6678861/yash-j-doshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478333701, "creation_date": 1478081374, "last_edit_date": 1478333701, "question_id": 40377246, "link": "https://stackoverflow.com/questions/40377246/undefined-reference-to-function-in-c-whilst-the-function-is-already-defined", "title": "Undefined reference to &#39;function&#39; in c whilst the function is already defined", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\nint arithmetic();\nint two_variable();\nint three_variable();\nint quadratic();\nint trigonometric();\n\n//declaring all the main functions\nint main(void){\n    char j;\n    int select;\n    printf(\"Enter mode\\n 1. Arithmetic \\t 2.Trigonometric \\n 3.Quadratic\\t 4.Two Variable\\n \\t 5.Three Variable \\n\");\n    scanf(\"%d\",&amp;select);\n    switch(select){\n        case 1: ; arithmetic(); break;\n        case 2: ; trigonometric();break;\n        case 3: ; quadratic(); break;\n        case 4: ; two_variable();break;\n        case 5: ; three_variable();break;\n    default: printf(\"ERROR\");\n        }\n    printf(\"Continue? y/n\");\n    scanf(\"%c\",j);\n    if(j == 'y'){\n        int main();\n    }\n\nreturn 0;\n\n}\n\nint arithmetic(){ \n     int temp1,i,a,n,c = 0; //c is for count the no. of times function was called \n     float num[n]; \n    float ans = 0;\n    printf(\"enter number of inputs:\\0.2t\");\n    scanf(\"%d\",&amp;n);\n    printf(\"enter numbers\");\n    for(i=0;i&lt;=n;i++){\n        scanf(\"%f\",&amp;num[i]);\n    }\n    printf(\" 1.+ \\t 2.- \\n 3.* \\t 4./t /n 5.^ /t 6.log \");\n    scanf(\"%d\",a);\n    switch(a){\n    case 1://addition\n        for(i=0;i&lt;n;i++){\n          ans += num[i];\n            }\n            break;\n    case 2://subtraction\n        for(i=0;i&lt;n;i++){\n            ans -= num[i];\n        }\n            break;\n    case 3://multiplication\n        for(i=0;i&lt;n;i++){\n            ans = 1;\n            ans *= num[i];\n        }\n            break;\n    case 4://division\n        ans = 1;\n        for(i=0;i&lt;n;i++){\n        ans = ans/num[i];\n        }\n            break;\n    case 5: //power\n        ans = pow(num[0],num[1]);\n        break;\n    case 6 : //log\n        if(c&gt;1){\n        ans = log(temp1); }\n        else{\n        ans = log(num[0]);  }\n        break;\n    default :printf(\"ERROR\");\n    }\n    temp1 == ans;\n    printf(\"ans = %f\",ans);\n    char j;\n    printf(\"Continue? y/n\");\n    scanf(\"%c\",j);\n    if(j == 'y'){\n        int arithmetic();\n    }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "shell", "gcc", "travis-ci", "gnu"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1478081209, "post_id": 40377121, "comment_id": 68006490, "body": "The only question is, do you care about these being gcc extensions? (In case you do not know what that means: this code will not compile with another compiler.)"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1478081395, "post_id": 40377121, "comment_id": 68006598, "body": "The code might lack some <code>#include &lt;stdint.h&gt;</code>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1479292971, "post_id": 40377121, "comment_id": 68492743, "body": "If you think that any answer has solved your problem, please consider accepting it (the green checkmark to the left of the answer). This will indicate to the community that the question has been answered and will give some reputation to you and the answerer."}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "edited": false, "score": 0, "creation_date": 1478081708, "post_id": 40377218, "comment_id": 68006802, "body": "I cannot change the flag it is set in the cmake file of library I am dependent on. What I cant understand is why the same code does not fire this warning on a different machine."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "edited": false, "score": 0, "creation_date": 1478081743, "post_id": 40377218, "comment_id": 68006824, "body": "@Westy10101 Maybe a different gcc version? If you can&#39;t change anything then you&#39;re gonna have to ignore the warnings it seems."}, {"owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "edited": false, "score": 0, "creation_date": 1478081871, "post_id": 40377218, "comment_id": 68006898, "body": "I checked the gcc versions and they seem to match. I am completely lost. It doesnt actually cause me any issues its just one of those things I would rather not be there. Thanks"}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 4, "last_activity_date": 1478081304, "creation_date": 1478081304, "answer_id": 40377218, "question_id": 40377121, "link": "https://stackoverflow.com/questions/40377121/trying-to-build-library-and-getting-the-following-warning-warning-type-of-bit/40377218#40377218", "title": "Trying to build library and getting the following warning: warning: type of bit-field \u2018type\u2019 is a GCC extension [-Wpedantic] uint8_t type:1;", "body": "<p>C supports only int, unsigned int, and _Bool as types for bit-fields. Other types are implementation defined.</p>\n\n<p>Using the flag -Wpedantic the compiler will follow the standard strictly and will try to warn you if you use certain implementation-defined features or extensions.</p>\n\n<p>Remove the flag -Wpedantic. </p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 0, "last_activity_date": 1478081872, "creation_date": 1478081872, "answer_id": 40377403, "question_id": 40377121, "link": "https://stackoverflow.com/questions/40377121/trying-to-build-library-and-getting-the-following-warning-warning-type-of-bit/40377403#40377403", "title": "Trying to build library and getting the following warning: warning: type of bit-field \u2018type\u2019 is a GCC extension [-Wpedantic] uint8_t type:1;", "body": "<p>Bit fields are signed integers, unsigned integers, or bools as per the standard</p>\n\n<p>C11 6.7.2.1 - Secton 5</p>\n\n<blockquote>\n  <p>A bit-\ufb01eld shall have a type that is a quali\ufb01ed or unquali\ufb01ed version of _Bool, signed int, unsigned int, or some other implementation-de\ufb01ned type. It is implementation-de\ufb01ned whether atomic types are permitted.</p>\n</blockquote>\n"}], "owner": {"reputation": 621, "user_id": 2294667, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/9a834b6b0c63e84c6e4f473161eec983?s=128&d=identicon&r=PG", "display_name": "Westy10101", "link": "https://stackoverflow.com/users/2294667/westy10101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478081872, "creation_date": 1478081032, "question_id": 40377121, "link": "https://stackoverflow.com/questions/40377121/trying-to-build-library-and-getting-the-following-warning-warning-type-of-bit", "title": "Trying to build library and getting the following warning: warning: type of bit-field \u2018type\u2019 is a GCC extension [-Wpedantic] uint8_t type:1;", "body": "<p>I am trying to build sysrepo library <a href=\"https://github.com/sysrepo/sysrepo\" rel=\"nofollow noreferrer\">https://github.com/sysrepo/sysrepo</a> as a dependency on travis ci and am getting an issue with bit fields. I do not get this issue when I do an install on an ubuntu vm in either 14.04 or 16.04 and am quite confused why it appears when using travis ci. My build script that installs everything is below:</p>\n\n<pre><code>#!/bin/bash\nset -e\n#this script installs sysrepo and all of its dependencies.\nINSTALL_PREFIX_DIR=$HOME/local\nexport PKG_CONFIG_PATH=$INSTALL_PREFIX_DIR/lib/pkgconfig:$PKG_CONFIG_PATH\nexport CC=gcc\n\nsudo apt-get update -qq\nsudo apt-get install -y cmake libev-dev libavl-dev\nsudo apt-get install -y build-essential\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$INSTALL_PREFIX_DIR/lib\n\nGODIR=$PWD\ncd $HOME\n\nif [ ! -d \"$INSTALL_PREFIX_DIR/lib\" ]; then\n\n  # libyang\n  git clone https://github.com/CESNET/libyang.git\n  cd libyang ; mkdir build ; cd build\n  cmake -DCMAKE_INSTALL_PREFIX=$INSTALL_PREFIX_DIR  -DCMAKE_BUILD_TYPE=Debug -DENABLE_BUILD_TESTS=OFF ..\n  make -j2 &amp;&amp; sudo make install\n  cd ../..\n\n  # protobuf\n  git clone https://github.com/google/protobuf.git\n  cd protobuf\n  ./autogen.sh &amp;&amp; ./configure --prefix=$INSTALL_PREFIX_DIR\n  sudo make -j2\n  sudo make install\n  cd ..\n\n  # protobuf-c\n  git clone https://github.com/protobuf-c/protobuf-c.git\n  cd protobuf-c\n  ./autogen.sh &amp;&amp; ./configure --prefix=$INSTALL_PREFIX_DIR\n  sudo make -j2\n  sudo make install\n  cd ..\n\nelse\n    echo \"Using cached libraries from $INSTALL_PREFIX_DIR\"\nfi\n\necho \"$INSTALL_PREFIX_DIR/lib\" | sudo tee /etc/ld.so.conf.d/sysrepolibs.conf\nsudo ldconfig\n\n#sysrepo\ngit clone https://github.com/sysrepo/sysrepo.git\ncd sysrepo\nmkdir build ; cd build ;\ncmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX:PATH=$HOME/local ..\nmake\nsudo make install\ncd ../..\n\nsudo ldconfig\n\n#start sysrepo\nsudo sysrepod -d -l4 &amp;&gt; sysrepod.log &amp;\n\ncd $GODIR\n</code></pre>\n\n<p>This is called in a before_script on travis and everything works except I get these warnings:</p>\n\n<pre><code> [  3%] Building C object src/CMakeFiles/COMMON.dir/common/sysrepo.pb-c.c.o\n    [  5%] Building C object src/CMakeFiles/COMMON.dir/common/sr_common.c.o\n    In file included from /home/travis/local/include/libyang/libyang.h:20:0,\n                     from /home/travis/sysrepo/src/common/sr_utils.h:36,\n                     from /home/travis/sysrepo/src/common/sr_common.h:44,\n                     from /home/travis/sysrepo/src/common/sr_common.c:28:\n    /home/travis/local/include/libyang/tree_schema.h:241:5: warning: type of bit-field \u2018type\u2019 is a GCC extension [-Wpedantic]\n         uint8_t type:1;                  /**&lt; 0 - structure type used to distinguish structure from ::lys_submodule */\n         ^\n    /home/travis/local/include/libyang/tree_schema.h:242:5: warning: type of bit-field \u2018version\u2019 is a GCC extension [-Wpedantic]\n         uint8_t version:4;               /**&lt; yang-version:\n         ^\n    /home/travis/local/include/libyang/tree_schema.h:246:5: warning: type of bit-field \u2018deviated\u2019 is a GCC extension [-Wpedantic]\n         uint8_t deviated:2;  \n</code></pre>\n\n<p>I am no expert at building C projects but any help would be greatly appreciated?</p>\n"}, {"tags": ["c", "arm", "embedded", "keil"], "comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1478080957, "post_id": 40377019, "comment_id": 68006320, "body": "<i>&quot;this implementation does not cater the wraparound of that value&quot;</i> - are you sure about that? Try working through the maths for the wraparound case, bearing in mind two&#39;s complement arithmetic."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1478152480, "post_id": 40377019, "comment_id": 68040163, "body": "@Muhammad - To complicate matters, you also have to worry about the optimizer taking the optimization and/or removing the undefined behavior shown above. They could have avoided a lot of the additional troubles by using a <code>uint32_t</code>. Also see Ian Lance Taylor&#39;s blog on <a href=\"http://www.airs.com/blog/archives/120\" rel=\"nofollow noreferrer\">Signed Overflow</a>. And keep in mind <i>signed integer overflow</i> is undefined behavior, while <i>unsigned integer wrap</i> is well defined behavior."}, {"owner": {"reputation": 6079, "user_id": 34989, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8f16eae47ba215ccc1fe3f05f1750adc?s=128&d=identicon&r=PG", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/34989/gerhard"}, "edited": false, "score": 0, "creation_date": 1478180372, "post_id": 40377019, "comment_id": 68056054, "body": "The function prototype is <code>uint32_t osKernelSysTick(void )</code> It returns a unsigned value. Variable <code>ticks</code> type should be changed."}], "answers": [{"comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1478125929, "post_id": 40384630, "comment_id": 68033546, "body": "What&#39;s wrong with a bit of implementation-defined (<i>not</i> undefined) behaviour? Sure, perhaps it&#39;s a bit sloppy from a language-lawyer point of view, but &quot;portable embedded code&quot; is an oxymoron if ever there was one. <a href=\"http://www.keil.com/support/man/docs/armcc/armcc_chr1359125009767.htm\" rel=\"nofollow noreferrer\">The implementation this code is written for</a> guarantees two&#39;s complement (as would any other implementation for the target platform), so the initial assignment of something greater than <code>INT_MAX</code> to <code>tick</code> is predictable, then everything subsequent falls out in the wash..."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1478125952, "post_id": 40384630, "comment_id": 68033557, "body": "There&#39;s certainly no need for an explicit intermediate variable, because either everything&#39;s representable as <code>int</code> already, or it all gets automatically promoted to unsigned via the usual arithmetic conversions."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1478126031, "post_id": 40384630, "comment_id": 68033586, "body": "@Notlikethat the separation prevents any confusion between the arithmetic overflow and the comparison. And as I already explained, <code>int</code> is the wrong type, since overflow is undefined."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1478126633, "post_id": 40384630, "comment_id": 68033805, "body": "It is <i>not</i> undefined. It is implementation-defined, and the implementation defines it in the sensible way. C99 6.3.1.3: &quot;Otherwise,  the  new type  is  signed  and  the  value  cannot  be  represented  in  it;  either  the result is implementation-defined or an implementation-defined signal is raised.&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1478126750, "post_id": 40384630, "comment_id": 68033836, "body": "@Notlikethat using <code>signed</code> integers, even <i>without</i> arithmetic overflow in the comparison, <code>-2147483500 - 100</code>, for example, can be less than the target interval, because it is negative (stretching the numbers to prove a point)."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1478127010, "post_id": 40384630, "comment_id": 68033927, "body": "But that could never happen, because <a href=\"http://www.keil.com/pack/doc/cmsis/RTOS/html/group___c_m_s_i_s___r_t_o_s___kernel_ctrl.html#gad0262e4688e95d1e9038afd9bcc16001\" rel=\"nofollow noreferrer\"><code>osKernelSysTick()</code> returns a <code>uint32_t</code></a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1478127046, "post_id": 40384630, "comment_id": 68033946, "body": "@Notlikethat look at the code posted. It uses <code>int32_t</code> which as I said, is wrong. And read my answer properly, where I said what you just did."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1478127801, "post_id": 40384630, "comment_id": 68034193, "body": "@Notlikethat the reason I posted this answer is because I have been there and fallen into the trap where <i>occasionally</i> the loop fails. Not with this compiler, which may generate code that does not fail, but in the general case, my simple solution is <i>guaranteed</i> to work. Just because not all code is portable on embedded devices is no excuse for the sloppiness where you started, when it is <b><i>easy</i></b> to make it bullet proof, without waiting to see if there is a rare failure, so hard to catch, that messes the program, and might only come to light once the product has gone to market."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1478129321, "post_id": 40384630, "comment_id": 68034635, "body": "I&#39;m not actually in disagreement with your overall point, only the use of &quot;incorrect&quot;, &quot;undefined&quot;, &quot;wrong&quot;, etc. because they&#39;re simply not true, and I refuse to stand for misinformation. The irrefutable answer to &quot;is this a bug or am I missing something?&quot; would be &quot;no - here&#39;s the horribly subtle reason why it does actually work, but here&#39;s also the sensible way you <i>should</i> do it&quot;, but for covering the most valuable latter aspect, and my further silence on the matter, have an upvote ;)"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 3, "last_activity_date": 1478104384, "last_edit_date": 1478104384, "creation_date": 1478103059, "answer_id": 40384630, "question_id": 40377019, "link": "https://stackoverflow.com/questions/40377019/check-required-for-wraparound-of-oskernalsystick/40384630#40384630", "title": "Check required for wraparound of osKernalSysTick()?", "body": "<p>The implementation you show does not cater for the wraparound because of the way the arithmetic is done.</p>\n\n<pre><code>do { // Delay for 100 microseconds \n} while ((osKernelSysTick() - tick) &lt; delayPeriod); \n</code></pre>\n\n<p>This can cause arithmetic overflow when the timer wraps.</p>\n\n<p>If you use an <code>unsigned</code> variable and compute the elasped time <em>before</em> comparing it with the required period, you will avoid this. Unsigned variables are guaranteed by the C standard to wrap.</p>\n\n<pre><code>uint32_t tick, delayPeriod, elapsed;            // unsigned\ntick = osKernelSysTick();\ndelayPeriod = osKernelTickMicroSec(100));\n\ndo {\n    elapsed = osKernelSysTick() - tick;         // separate arithmetic wraps cleanly\n} while (elapsed &lt; delayPeriod); \n</code></pre>\n\n<p>Note the function is defined as <code>uint32_t osKernelSysTick</code> anyway, so the original example is incorrect in using signed types.</p>\n"}], "owner": {"reputation": 37, "user_id": 4384259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e26821baa70d90db9a68670e858df7c?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Awais Arshad", "link": "https://stackoverflow.com/users/4384259/muhammad-awais-arshad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478153325, "creation_date": 1478080711, "last_edit_date": 1478153325, "question_id": 40377019, "link": "https://stackoverflow.com/questions/40377019/check-required-for-wraparound-of-oskernalsystick", "title": "Check required for wraparound of osKernalSysTick()?", "body": "<p>I am following Keil's <a href=\"https://www.keil.com/pack/doc/CMSIS/RTX/CMSIS_RTOS_Tutorial.pdf\" rel=\"nofollow noreferrer\">CMSIS-RTOS Tutorial</a>. It provides the following method to put sub-millisecond delays :</p>\n\n<blockquote>\n  <p><strong><em>Section: Sub millisecond delays</em></strong></p>\n\n<pre><code>int32_t tick,delayPeriod;\ntick = osKernelSysTick(); // get start value of the Kernel system tick\n// Then we can scale a period in microseconds to a SysTick count value\ndelayPeriod = osKernelTickMicroSec(100));\n// This then allows us to create a delay for the the required period.\ndo { // Delay for 100 microseconds \n} while ((osKernelSysTick() - tick) &lt; delayPeriod); \n</code></pre>\n</blockquote>\n\n<p>The osKernelSysTick() returns the value of a rolling 32 bit counter; this implementation does not cater for the wraparound of that value.</p>\n\n<p>If wraparound happens, then the intended delay would not be achieved. Is this a bug in official Keil documentation or am I missing something?  </p>\n"}, {"tags": ["c++", "c", "syntax", "petsc"], "comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 3, "creation_date": 1478080291, "post_id": 40376788, "comment_id": 68005873, "body": "If you think <code>PetscInt i,n = 10,col[3],its;</code> is as <code>(PetscInt i,n) = (10,col[3],its);</code>, then it&#39;s wrong. It is actually <code>PetscInt i,(n = 10),col[3],its;</code>. <code>= 10</code> is used to initialize <code>n</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "edited": false, "score": 0, "creation_date": 1478080812, "post_id": 40376803, "comment_id": 68006223, "body": "Oops...I actually used that syntax many times, but didn&#39;t see it in the statement because I confused it with Python&#39;s tuple assignment due to the layout. They&#39;d better write <code>PetscInt i,  n=10,  col[3],  its;</code>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1478081025, "post_id": 40376803, "comment_id": 68006376, "body": "It&#39;s also worth mentioning that it can be a common source of error, when someone does something like  <code>int a, b=5;</code>  and then misreads thinking a=5."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1478081051, "post_id": 40376803, "comment_id": 68006389, "body": "Unfortunately they don&#39;t share the type, they share a type specifier.  If they did have the same type, such declarations wouldn&#39;t be error prone when declaring multiple pointers and/or arrays."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1478081266, "post_id": 40376803, "comment_id": 68006527, "body": "@2501 I tried to add the other viewpoint and also make it clear that this is subjective."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 12, "last_activity_date": 1478081224, "last_edit_date": 1478081224, "creation_date": 1478080092, "answer_id": 40376803, "question_id": 40376788, "link": "https://stackoverflow.com/questions/40376788/what-is-the-role-of-the-comma-in-below-statements/40376803#40376803", "title": "what is the role of the comma in below statements?", "body": "<p>That's just declaring multiple variables of the same types.</p>\n\n<p>It's like</p>\n\n<pre><code>int a, b;\n</code></pre>\n\n<p>The first line declares four variables of the type <code>PetscInt</code>, called <code>i</code>, <code>n</code> (which is initialized to <code>10</code>), the array <code>col[3]</code> and finally <code>its</code>. The second line declares three variables of the type <code>PetscScalar</code>.</p>\n\n<p>So this:</p>\n\n<pre><code>PetscInt i,n = 10,col[3],its;\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>PetscInt i;\nPetscInt n = 10;\nPetscInt col[3];\nPetscInt its;\n</code></pre>\n\n<p>Some find the original way shorter, easier to type, and also nice since it shows that the variables share (part of) the same type. Some find it confusing and/or error-prone, this is subjective of course but I felt I should mention it to kind of motivate why you often find code like this.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478080293, "post_id": 40376824, "comment_id": 68005875, "body": "It is worth pointing out that this style should always be used. Declaring multiple variables on the same line is a well-known source for severe bugs, particularly when pointers are involved. At the same time, the code turns easier to read."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478080543, "post_id": 40376824, "comment_id": 68006037, "body": "@Lundin I do agree with you sir, but the problem is, previously I was accused of &quot;shoving&quot; my personal opinion onto others for doing the same [ :( ], so I refrained from &quot;suggesting&quot; this time. Hope that does not affect the post in a negative way, right?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478080725, "post_id": 40376824, "comment_id": 68006165, "body": "@Lundin However, I have expanded a bit more, trying to keep &quot;opinon-based&quot; content minimal, is this any good?"}, {"owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "edited": false, "score": 0, "creation_date": 1478080939, "post_id": 40376824, "comment_id": 68006312, "body": "I think it&#39;s perfectly fine to point out the dangers of the syntax. If that&#39;s too much opinion-based, then Stack Overflow definitely went crazy ;-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478081050, "post_id": 40376824, "comment_id": 68006388, "body": "I think the answer was fine to begin with, I just left the comment as recommended practice to anyone reading this."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478081104, "post_id": 40376824, "comment_id": 68006424, "body": "@Lundin thanks for that and according to me, that comment is too valuable to be sitting in &quot;comment&quot;s section, so thought of &quot;repairing&quot; the answer a bit. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1478081206, "last_edit_date": 1478081206, "creation_date": 1478080161, "answer_id": 40376824, "question_id": 40376788, "link": "https://stackoverflow.com/questions/40376788/what-is-the-role-of-the-comma-in-below-statements/40376824#40376824", "title": "what is the role of the comma in below statements?", "body": "<p>The commas here are just to declare multiple variables <strong>of the same type</strong> in a single line statement. You may very well break them into one individual line, each, like</p>\n\n<pre><code>PetscInt i;\nPetscInt n = 10;\nPetscInt col[3];\nPetscInt its;\n</code></pre>\n\n<p><strong>While both are valid and correct syntax</strong>, some of us prefer to use the broad version anyways, as it gives a better readability (IMHO) and avoid any possible confusion while having a pointer type or storage-class specifier associated with the type. </p>\n\n<p>For example, for the shorthand</p>\n\n<pre><code>int * p, q;\n</code></pre>\n\n<p>is the same as </p>\n\n<pre><code>int *p;\nint q;   //not int *q\n</code></pre>\n\n<p><code>q</code> is <strong>not</strong> a pointer type there.</p>\n"}], "owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 40376803, "answer_count": 2, "score": 2, "last_activity_date": 1478081348, "creation_date": 1478080048, "last_edit_date": 1478081348, "question_id": 40376788, "link": "https://stackoverflow.com/questions/40376788/what-is-the-role-of-the-comma-in-below-statements", "title": "what is the role of the comma in below statements?", "body": "<p>Currently reading into PETSc when I came up to this syntax in C/C++:</p>\n\n<pre><code>PetscInt i, n = 10, col[3], its;\nPetscScalar neg_one = -1.0, one = 1.0, value[3];\n</code></pre>\n\n<p>I do not understand the meaning of the commas here. Has it to do with tuples? Or is there something overloaded?</p>\n"}, {"tags": ["c", "multithreading", "pointers"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 6, "creation_date": 1478079778, "post_id": 40376676, "comment_id": 68005572, "body": "Nothing you are doing is safe in any way. Look up what race conditions are. You have undefined behavior everywhere."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 1, "creation_date": 1478079860, "post_id": 40376676, "comment_id": 68005608, "body": "You need to protect all accesses to <code>array</code>. A mutex could be used for this."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1478079996, "post_id": 40376676, "comment_id": 68005690, "body": "@UnholySheep, I think c++ pops up in suggested tags when you post a question. Those who don&#39;t know any better think it&#39;s relevant to c."}, {"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1478080173, "post_id": 40376676, "comment_id": 68005799, "body": "@nwp You mean it is not safe to share a global array between threads or to free an element in array? I got the answer for first argument here: <a href=\"http://stackoverflow.com/questions/5316379/can-threads-write-to-different-elements-of-same-array-of-structures-without-lock\" title=\"can threads write to different elements of same array of structures without lock\">stackoverflow.com/questions/5316379/&hellip;</a>"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1478080356, "post_id": 40376676, "comment_id": 68005922, "body": "@JeyhunKarimov That question doesn&#39;t apply because your threads access the same elements, in that question they do not. <a href=\"http://stackoverflow.com/a/34550/3484570\">Read this</a>."}, {"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1478080458, "post_id": 40376676, "comment_id": 68005981, "body": "@nwp In my case you can assume that writer is faster than reader and therefore they dont access the same elements."}, {"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1478080553, "post_id": 40376676, "comment_id": 68006044, "body": "@nwp Moreover, while reading I check if array&#39;s i&#39;th element is NULL, then it means that writer hasn&#39;t wrote yet. So, I try to pull again. But you can assume that this condition never happens."}, {"owner": {"reputation": 576, "user_id": 6648034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e100071b1105de5f4ca2e0ad4ddd2aee?s=128&d=identicon&r=PG&f=1", "display_name": "k_kaz", "link": "https://stackoverflow.com/users/6648034/k-kaz"}, "edited": false, "score": 0, "creation_date": 1478080650, "post_id": 40376676, "comment_id": 68006118, "body": "What is the writer supposed to do? He allocates an array with malloc and then assigns another array to array[i]?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1478080698, "post_id": 40376676, "comment_id": 68006147, "body": "<i>You can assume that reading is slower than writing.</i>  No, you can&#39;t assume that."}, {"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "reply_to_user": {"reputation": 576, "user_id": 6648034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e100071b1105de5f4ca2e0ad4ddd2aee?s=128&d=identicon&r=PG&f=1", "display_name": "k_kaz", "link": "https://stackoverflow.com/users/6648034/k-kaz"}, "edited": false, "score": 0, "creation_date": 1478080762, "post_id": 40376676, "comment_id": 68006194, "body": "@k_kaz yes. Basically <code>array</code> is char **. and writer assigns char * to every element of <code>array</code>"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1478080820, "post_id": 40376676, "comment_id": 68006229, "body": "If <code>array[i]</code> has not been written yet it contains garbage, not <code>NULL</code>, therefore your check is useless. It doesn&#39;t matter if the writer is faster, if you crank up optimization the compiler may assume that reader is an infinite loop, because <code>array</code> cannot change, because that would be undefined behavior. You can try to rely on undefined behavior and hope that it does exactly what you want, but you will be disappointed. Learn how to do multithreading properly and safe yourself a lot of time and broken code."}, {"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "edited": false, "score": 0, "creation_date": 1478081279, "post_id": 40376676, "comment_id": 68006532, "body": "1. In my usecase writer is always faster than reader. 2. I didn&#39;t use locks because of performance issues. So if I know that 2 threads will never modify the same element of an array, then no need to use locks IMO."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1478082276, "post_id": 40376676, "comment_id": 68007154, "body": "@JeyhunKarimov <i>In my usecase writer is always faster than reader.</i> And how did you <b>measure</b> that?  <i>I didn&#39;t use locks because of performance issues.</i>  Did you <b>measure</b> the performance cost of any locking code?  <i>So if I know that 2 threads will never modify the same element of an array, then no need to use locks IMO.</i>  In the code you&#39;ve provided, <code>reader()</code> can be complete and <code>free()</code> the entire array <b>before <code>writer()</code> even gets started.</b>"}, {"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1478082599, "post_id": 40376676, "comment_id": 68007346, "body": "@AndrewHenle My question is: assuming writer is faster than reader always, is the code I provided is safe? In mu usecase it is always faster."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1478082778, "post_id": 40376676, "comment_id": 68007455, "body": "@JeyhunKarimov <i>My question is: assuming writer is faster than reader always, is the code I provided is safe?</i>  No, because you <b>CAN&#39;T</b> assume that.  How did you <b>measure</b> that the <code>writer()</code> is faster?  How many times did you run your test?  How do you even know that your <code>reader()</code> doesn&#39;t finish before <code>writer()</code> even gets started?  The code you posted doesn&#39;t provide <i>any</i> of that information.  You simply can not make that assumption.  You might as well ask &quot;Assuming the world is flat, what happens when I sail off the edge of the Earth?&quot;"}, {"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1478083076, "post_id": 40376676, "comment_id": 68007647, "body": "@AndrewHenle for example, reader is a socket and it is pull based and client pulls once an hour. So this is my usecase and I am sure that writer is faster. BTW, thanks for your examples :)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1478086171, "post_id": 40376676, "comment_id": 68009528, "body": "@JeyhunKarimov <i>reader is a socket and it is pull based and client pulls once an hour. So this is my usecase and I am sure that writer is faster.</i>  If it&#39;s that slow, you don&#39;t have any excuse for not using locking since performance is irrelevant."}], "answers": [{"comments": [{"owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "edited": false, "score": 0, "creation_date": 1478084038, "post_id": 40377618, "comment_id": 68008244, "body": "Thanks for answer.  Is is safe in your implementation, to free <code>array[i]</code> after reading it? Can this cause some trouble to writer?"}, {"owner": {"reputation": 46, "user_id": 7038776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a9ba94379f5ed1ac675682088d2802?s=128&d=identicon&r=PG", "display_name": "Trevor Barnwell", "link": "https://stackoverflow.com/users/7038776/trevor-barnwell"}, "reply_to_user": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "edited": false, "score": 1, "creation_date": 1478084538, "post_id": 40377618, "comment_id": 68008576, "body": "You&#39;re welcome. Yes it is thread safe to free array[i]. Of course no other thread can be using it. This should not cause trouble for the writer because &lt;code&gt;malloc&lt;/code&gt; and &lt;code&gt;free&lt;/code&gt; are thread safe. (<a href=\"http://man7.org/linux/man-pages/man3/malloc.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/malloc.3.html</a>, attributes section)."}, {"owner": {"reputation": 46, "user_id": 7038776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a9ba94379f5ed1ac675682088d2802?s=128&d=identicon&r=PG", "display_name": "Trevor Barnwell", "link": "https://stackoverflow.com/users/7038776/trevor-barnwell"}, "edited": false, "score": 1, "creation_date": 1478085516, "post_id": 40377618, "comment_id": 68009154, "body": "Thanks for the tip. I realized I messed up (a few minutes ago) but can&#39;t edit the comment now."}], "tags": [], "owner": {"reputation": 46, "user_id": 7038776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70a9ba94379f5ed1ac675682088d2802?s=128&d=identicon&r=PG", "display_name": "Trevor Barnwell", "link": "https://stackoverflow.com/users/7038776/trevor-barnwell"}, "is_accepted": true, "score": 3, "last_activity_date": 1478082465, "creation_date": 1478082465, "answer_id": 40377618, "question_id": 40376676, "link": "https://stackoverflow.com/questions/40376676/c-concurrent-array-allocation-and-free/40377618#40377618", "title": "C concurrent array allocation and free", "body": "<p>No it is not safe if you read during a write without a special instruction the result is undefined. You could get any value, though it is unlikely that you will see any other than NULL or the one you had assigned.</p>\n\n<p>As others have mentioned in the comments the un-initialized array may contain anything (it is undefined) though it is likely zeroed before the kernel gave it to you.</p>\n\n<p>If you want safety you need a locking mechanism such as a semaphore (<a href=\"http://man7.org/linux/man-pages/man3/sem_init.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/sem_init.3.html</a>). </p>\n\n<pre><code>char ** array;\n// Allows access while non zero\nsem_t sem;\n\nvoid writer(void){\n    for (unsigned long i = 0; i &lt; maxArraySize; i++){\n     array[i] = malloc(someSize);\n     array[i] = someCharArray;\n     // Increment semaphore.\n     sem_post(&amp;sem);\n}\n\nvoid reader(void){\n    for (unsigned long i = 0; i &lt; maxArraySize; i++){\n     // Will return -1 if the semaphore is not at zero\n     // Will return 0 if semaphore is greater than zero and decrement it.\n     if(sem_trywait(&amp;sem)){ // in case reader is faster\n      i--;\n      continue;\n    }\n    useData(array[i]);\n    free(array[i]);      // HERE IS MY QUESTION..\n}\n\n\nmain(){\n    // Initialize semaphore to zero\n    sem_init(&amp;sem, 0 , 0);\n    // Initialize array to have maxArraySize elements.\n    array  = malloc(maxArraySize * sizeof(*array));   \n    pthread_t reader, writer;\n    pthread_create( &amp;reader, NULL, reader, NULL);\n    pthread_create( &amp;writer, NULL, writer, NULL);\n}\n</code></pre>\n\n<p>This should be fast but will spin your cpu doing a lot of nothing at the <code>sem_trywait</code>. Use <code>sem_wait</code> if you can wait a little longer and do not need the spinning.</p>\n\n<p>I also corrected the bug in your malloc statement because it was not allocating enough space for <code>maxArraySize</code> <code>char *</code> items.</p>\n"}], "owner": {"reputation": 1165, "user_id": 991607, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e83e18523c171adcc19e69bfed6e3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "Jeyhun Karimov", "link": "https://stackoverflow.com/users/991607/jeyhun-karimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 40377618, "answer_count": 1, "score": -1, "last_activity_date": 1478082465, "creation_date": 1478079653, "last_edit_date": 1478080381, "question_id": 40376676, "link": "https://stackoverflow.com/questions/40376676/c-concurrent-array-allocation-and-free", "title": "C concurrent array allocation and free", "body": "<p>I am using <code>array</code> with 2 threads. One is writing to it and another reading. You can assume that reading is slower than writing. The reader and writer are separate <code>pthreads</code>. As far as I know sharing an  <code>array</code> as a global variable between those threads is safe. \nSo overall picture is like: </p>\n\n<pre><code>char ** array;\n\nvoid writer(void){\n    for (unsigned long i = 0; i &lt; maxArraySize; i++){\n     array[i] = malloc(someSize);\n     array[i] = someCharArray;\n}\n\nvoid reader(void){\n    for (unsigned long i = 0; i &lt; maxArraySize; i++){\n     if(array[i] == NULL){ // in case reader is faster\n      i--;\n      continue;\n    }\n     useData(array[i]);\n    free(array[i]);      // HERE IS MY QUESTION..\n}\n\n\nmain(){\n    array  = malloc(maxArraySize);   \n    pthread_t reader, writer;\n    pthread_create( &amp;reader, NULL, reader, NULL);\n    pthread_create( &amp;writer, NULL, writer, NULL);\n}\n</code></pre>\n\n<p>My question is related with line where I free i'th element of array. Is it safe to do it? Because when I free i'th element, at the same time, write is writing to array. So can there be a case that writer gets wrong address as it can lose the head pointer?</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478079681, "post_id": 40376632, "comment_id": 68005517, "body": "The variable <code>name_t</code> is a single character. It can&#39;t hold a string. In this case its (<i>indeterminate</i>) value is converted into a pointer which is used by <code>scanf</code> as the destination for the string, leading to <i>undefined behavior</i>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478079748, "post_id": 40376632, "comment_id": 68005548, "body": "And unrelated to your problem, your naming of the variables is, well, <i>unusual</i>. :) Usually the <code>_t</code> suffix is used for <i>types</i>, like <code>time_t</code> or <code>size_t</code> or <code>uint32_t</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478305728, "post_id": 40376632, "comment_id": 68115512, "body": "when calling any of the heap memory allocation functions, do not cast the result, that just clutters the code.  The returned type is <code>void*</code> so can be assigned to any other pointer   NOTE:  Always check (!=NULL) the returned value to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478305897, "post_id": 40376632, "comment_id": 68115556, "body": "when calling any of the <code>scanf()</code> family of functions, 1) always check the returned value (not the parameter values) to assure the operation was successful.  2) when using the <code>%s</code> format specifier, always include a &#39;max characters&#39; modifier (that is one less than the length of the input buffer) to assure that the user will not overrun the input buffer (which would result in undefined behavior and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478306183, "post_id": 40376632, "comment_id": 68115624, "body": "in the posted code, the fields: <code>name_t</code> and <code>transaction_t</code> are only one byte and the <code>%s</code> always appends a NUL byte tot he input, AND the parameters to the call to <code>scanf()</code> will treat the (ininitialized) contents of thsoe fields as address values, This results in undefined behavour and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1478306472, "post_id": 40376632, "comment_id": 68115688, "body": "to avoid some massive headaches while debugging, when writing a comparison with <code>==</code>, always place the literal on the left, so the compiler will catch any error, like using <code>=</code> rather than <code>==</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7025949"}, "edited": false, "score": 0, "creation_date": 1479307184, "post_id": 40376632, "comment_id": 68502043, "body": "Thanks guys ! I had solve it using strcpy, but still thanks a lot for all the advise and methods! :)"}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 1, "last_activity_date": 1478080129, "last_edit_date": 1478080129, "creation_date": 1478079788, "answer_id": 40376718, "question_id": 40376632, "link": "https://stackoverflow.com/questions/40376632/run-time-check-failure-3-the-variable-name-t-is-being-used-without-being-in/40376718#40376718", "title": "Run-Time Check Failure #3 - The variable &#39;name_t&#39; is being used without being initialized", "body": "<pre><code>scanf(\"%s\", name_t);\n</code></pre>\n\n<p><code>scanf</code> is expecting a string, but you are passing a plain <code>char</code> (with not enough room to store a string)</p>\n\n<p>I suggest <code>fgets</code> in order to avoid buffer overflows:</p>\n\n<pre><code>char name[100]; /* name_t is not a good name for a variable */\nchar *ptr;\n\nif (fgets(name, sizeof name, stdin)) {\n    /* strip the trailing newline */\n    ptr = strchr(name, '\\n');\n    if (ptr != NULL) {\n        *ptr = '\\0';\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7025949"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 40376718, "answer_count": 1, "score": 2, "last_activity_date": 1478080129, "creation_date": 1478079523, "last_edit_date": 1478079862, "question_id": 40376632, "link": "https://stackoverflow.com/questions/40376632/run-time-check-failure-3-the-variable-name-t-is-being-used-without-being-in", "title": "Run-Time Check Failure #3 - The variable &#39;name_t&#39; is being used without being initialized", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n</code></pre>\n\n<p>This is the structure i declared</p>\n\n<p>Just right after entered the student number and the moment i hit enter key and it give me the error \"Run-Time Check Failure #3 - The variable 'name_t' is being used without being initialized.\"</p>\n\n<pre><code>struct node\n{\n    int data;\n    int number;\n    char name, transaction;\n    struct node *next;\n\n}*newNode, *list, *temp;\n\nvoid insertNode();\nvoid displayNode();\nvoid deleteNode();\n</code></pre>\n\n<p>Below is the insert function i wrote</p>\n\n<pre><code>void insertNode()\n{\n    int number_t;\n    char name_t, transaction_t;\n\n    newNode = (struct node*) malloc(sizeof(struct node));\n\n    printf(\"Enter Student number: \");\n    scanf(\"%d\", &amp;number_t);\n\n    newNode-&gt;number = number_t;\n    newNode-&gt;next = NULL;\n\n    printf(\"Enter Student name: \");\n    scanf(\"%s\", name_t);\n\n    newNode-&gt;name = name_t;\n    newNode-&gt;next = NULL;\n\n    printf(\"Enter Transcation Desciption: \");\n    scanf(\"%s\", transaction_t);\n\n    newNode-&gt;transaction = transaction_t;\n    newNode-&gt;next = NULL;\n\n\n    if (list == NULL)\n        list = newNode;\n    else\n    {\n        temp = list;\n        while (temp-&gt;next != NULL)\n        {\n            temp = temp-&gt;next;\n        }\n        temp-&gt;next = newNode;\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "lte", "3gp", "ims"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1478584047, "post_id": 40376542, "comment_id": 68203652, "body": "Does this have anything to do with c code?"}, {"owner": {"reputation": 417, "user_id": 1369864, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/a09hK.jpg?s=128&g=1", "display_name": "Pushpendra", "link": "https://stackoverflow.com/users/1369864/pushpendra"}, "edited": false, "score": 0, "creation_date": 1479697270, "post_id": 40376542, "comment_id": 68652221, "body": "In the second image you have attached i can see that there is some IPV6 address: &#39;&#39;FC00:1234:2::10&quot; . I think your C program trying to use this address to bind, which is not the address of any interface on your system that&#39;s why it&#39;s unable to assign. Can you please replace this address with some correct IPV6 address here and try again. Please let me know if you did not get your problem correctly."}], "owner": {"reputation": 111, "user_id": 6755237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0937b72a325283d04aa54fa54dd872f?s=128&d=identicon&r=PG&f=1", "display_name": "Kushal", "link": "https://stackoverflow.com/users/6755237/kushal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478581995, "creation_date": 1478079261, "last_edit_date": 1478581995, "question_id": 40376542, "link": "https://stackoverflow.com/questions/40376542/ipv6-address-assigned-to-only-one-of-the-interfaces-of-an-epcevolved-packet-cor", "title": "IPV6 address assigned to only one of the interfaces of an EPC(Evolved Packet Core) module not to other interfaces", "body": "<p>When I am assigning IP addresses to the interfaces mgmt, net_a &amp; net_b of an EPC(Evolved Packet Core) modules like sgw or pgw. It assigns IPV6 address i.e. inet6 addr only to one of the net_a interface &amp; not to other interfaces. In the screen shot here its clearly visible that inet6 or IPV6 address is only assigned to the net_a interface and not to net_b or mgmt interface.</p>\n\n<p><img src=\"https://i.stack.imgur.com/gr2Ax.png\" alt=\"enter image description here\"></p>\n\n<p>Here in the screenshot its visible that when I run the script of one of the modules of EPC it cannot bind IPV6 socket &amp; is unable to assign the requested address due to which after 30 attempts of IP binding it throws Segmentation fault error. Is this because some of the interfaces are not assigned IPV6 addresses?</p>\n\n<p><img src=\"https://i.stack.imgur.com/dqvjc.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["c", "arrays", "pointers", "struct"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478078812, "post_id": 40376355, "comment_id": 68005036, "body": "Take a look at <a href=\"https://linux.die.net/man/3/strncpy\" rel=\"nofollow noreferrer\">strncpy</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478080082, "post_id": 40376355, "comment_id": 68005739, "body": "@LPs You probably mean <code>strcpy</code>. <code>strncpy</code> should be avoided, see <a href=\"http://stackoverflow.com/questions/2114896/why-are-strlcpy-and-strlcat-considered-insecure\">this</a> and <a href=\"https://randomascii.wordpress.com/2013/04/03/stop-using-strncpy-already/\" rel=\"nofollow noreferrer\">this</a> etc etc."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 2881903, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/550ceb7182c7cfffc3f8ab37d40ac99f?s=128&d=identicon&r=PG", "display_name": "Masutatsu", "link": "https://stackoverflow.com/users/2881903/masutatsu"}, "edited": false, "score": 0, "creation_date": 1478080620, "post_id": 40376482, "comment_id": 68006093, "body": "This worked as intended, but now I get a &quot;array type has incomplete element type&quot; when declaring the struct (e.g. struct Person people[HOW_MANY];). This is surprising, since I put this after the struct declaration, where have I stumbled?"}, {"owner": {"reputation": 13, "user_id": 7098831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a7c9be5e3803098d3782a148e0e4b7?s=128&d=identicon&r=PG&f=1", "display_name": "uran235", "link": "https://stackoverflow.com/users/7098831/uran235"}, "reply_to_user": {"reputation": 431, "user_id": 2881903, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/550ceb7182c7cfffc3f8ab37d40ac99f?s=128&d=identicon&r=PG", "display_name": "Masutatsu", "link": "https://stackoverflow.com/users/2881903/masutatsu"}, "edited": false, "score": 0, "creation_date": 1478092347, "post_id": 40376482, "comment_id": 68013403, "body": "You are using typedef in order to define new type Person. Then you should use it exactly (e.g. Person people[HOW_MANY];)"}], "tags": [], "owner": {"reputation": 13, "user_id": 7098831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20a7c9be5e3803098d3782a148e0e4b7?s=128&d=identicon&r=PG&f=1", "display_name": "uran235", "link": "https://stackoverflow.com/users/7098831/uran235"}, "is_accepted": false, "score": 1, "last_activity_date": 1478079102, "creation_date": 1478079102, "answer_id": 40376482, "question_id": 40376355, "link": "https://stackoverflow.com/questions/40376355/referring-to-struct-types-in-a-function-declaration/40376482#40376482", "title": "Referring to Struct types in a function declaration?", "body": "<p>Just use</p>\n\n<pre><code>snprintf(people[nextfreeplace].name, 50, \"%s\", name);\n</code></pre>\n\n<p>to copy string. In this case it also checks buffer size.</p>\n"}], "owner": {"reputation": 431, "user_id": 2881903, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/550ceb7182c7cfffc3f8ab37d40ac99f?s=128&d=identicon&r=PG", "display_name": "Masutatsu", "link": "https://stackoverflow.com/users/2881903/masutatsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478079102, "creation_date": 1478078701, "question_id": 40376355, "link": "https://stackoverflow.com/questions/40376355/referring-to-struct-types-in-a-function-declaration", "title": "Referring to Struct types in a function declaration?", "body": "<p>If I declare a simple structure like below:    </p>\n\n<pre><code>typedef struct {    \n  char name[50];    \n  int age;    \n} Person;    \n\nstruct Person people[7];\n</code></pre>\n\n<p>And then refer to it below for insertion of data:    </p>\n\n<pre><code>static void insert(Person people[HOW_MANY], char *name, int age)    \n{    \n  static int nextfreeplace = 0;    \n\n  people[nextfreeplace].name = &amp;name;    \n  people[nextfreeplace].age = age;     \n\n  nextfreeplace += 1;    \n}    \n</code></pre>\n\n<p>I a get a incompatible type error:</p>\n\n<pre><code>error: incompatible types when assigning to type 'char[50]' from type 'char **' people[nextfreeplace].name = &amp;name;\n</code></pre>\n\n<p>Have I declared my struct wrong? Or have I messed up my pointers?</p>\n"}, {"tags": ["c", "visual-studio", "visual-c++", "visual-studio-2015", "side-effects"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478078200, "post_id": 40376187, "comment_id": 68004670, "body": "The question is if the line <code>if (var)</code> generates a read instruction or not. If not, the compiler is hopelessly broken and non-conforming. Which everyone already knows is the case with VS."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1478078295, "post_id": 40376187, "comment_id": 68004726, "body": "Are you sure it is at all possible to set breakpoints in release builds?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1478078380, "post_id": 40376187, "comment_id": 68004776, "body": "if possible, disassemble the code. Only way to tell."}, {"owner": {"reputation": 3699, "user_id": 474173, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/18331a42eeb0683a21fe3af6722c04cc?s=128&d=identicon&r=PG", "display_name": "Swanand", "link": "https://stackoverflow.com/users/474173/swanand"}, "edited": false, "score": 0, "creation_date": 1478078968, "post_id": 40376187, "comment_id": 68005126, "body": "Strange! In Disassemby, Code is generated for function <code>f()</code> in debug mode but in release mode, No code at all!"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1478079228, "post_id": 40376187, "comment_id": 68005282, "body": "From my experience, MS compiler doesn&#39;t remove <code>volatile</code> accesses like that for global and <code>static</code> variables. So, for a workaround, just add <code>static</code> to the definition of <code>var</code>."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 3, "creation_date": 1478079269, "post_id": 40376187, "comment_id": 68005307, "body": "<code>var</code> is volatile but doesn&#39;t have external linkage and the address is never taken. Standards-compliant or not I don&#39;t know, but in the Windows ABI the compiler is correct to deduce that the value can never change."}, {"owner": {"reputation": 8871, "user_id": 1132871, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/IO6V2.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1132871/alex"}, "reply_to_user": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1478081527, "post_id": 40376187, "comment_id": 68006674, "body": "@Ben In accordance to disassembly variable is not optimized so the issue doesn&#39;t seem to be in generated code."}], "owner": {"reputation": 8871, "user_id": 1132871, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/IO6V2.jpg?s=128&g=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1132871/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478079485, "creation_date": 1478078077, "last_edit_date": 1478079485, "question_id": 40376187, "link": "https://stackoverflow.com/questions/40376187/msvc-2015-optimizes-out-volatile-variables", "title": "MSVC 2015 optimizes out volatile variables?", "body": "<p>I have the following code compiled in MSVS2015 in release mode:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"stdio.h\"\n\nvoid f()\n{\n    for (int i = 0; i &lt; 10; i++)\n    {\n        volatile int var = 10;\n        if (var) // Breakpoint can't be set\n        {\n            printf(\"Test\\n\"); // Breakpoint can't be set\n        }\n    }\n}\n\nint main()\n{\n    f();\n    return 0; // Second breakpoint\n}\n</code></pre>\n\n<p>I was thinking that <code>volatile</code> keyword doesn't allow the compiler to optimize variable, but since I can't set breakpoint I can't check the variable's value and it looks like totally optimized.</p>\n\n<p>Do I have incorrect understanding of <code>volatile</code> and side effects?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>MSVS Version : 14.0.25431.01 Update 3\n</code></pre>\n\n<p>Disassembly (Release):</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"stdio.h\"\n\n\nvoid f()\n{\n    for (int i = 0; i &lt; 10; i++)\n    {\n        volatile int var = 10;\n        if (var)\n        {\n            printf(\"Test\\n\");\n        }\n    }\n}\n\n\nint main()\n{\n00FE1040  push        ebp  \n00FE1041  mov         ebp,esp  \n00FE1043  push        ecx  \n00FE1044  push        esi  \n    f();\n00FE1045  mov         esi,0Ah  \n00FE104A  nop         word ptr [eax+eax]  \n00FE1050  mov         dword ptr [ebp-4],0Ah  \n00FE1057  cmp         dword ptr [ebp-4],0  \n00FE105B  je          main+2Ah (0FE106Ah)  \n00FE105D  push        offset string \"Test\\n\" (0FE20F8h)  \n00FE1062  call        printf (0FE1010h)  \n00FE1067  add         esp,4  \n00FE106A  sub         esi,1  \n00FE106D  jne         main+10h (0FE1050h)  \n    return 0;\n00FE106F  xor         eax,eax  \n00FE1071  pop         esi  \n}\n00FE1072  mov         esp,ebp  \n00FE1074  pop         ebp  \n00FE1075  ret  \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478077907, "post_id": 40376066, "comment_id": 68004485, "body": "your array is sized by 100, but you&#39;re looping up to 1000 in some function..."}, {"owner": {"reputation": 11, "user_id": 7051359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634e04f38a8f7d92e67d8804f91ac160?s=128&d=identicon&r=PG", "display_name": "Sashurocks", "link": "https://stackoverflow.com/users/7051359/sashurocks"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1478078005, "post_id": 40376066, "comment_id": 68004542, "body": "That should be fine since 2^1000 is less than 100 digits"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1478078019, "post_id": 40376066, "comment_id": 68004548, "body": "2^1000 has 302 decimal digits. And the last valid index of an array with K elements is K - 1. (<code>arr[100] = { 0 };</code> assigns zero to the non-existing hundredth element, it does not fill the array with zero.)"}, {"owner": {"reputation": 11, "user_id": 7051359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634e04f38a8f7d92e67d8804f91ac160?s=128&d=identicon&r=PG", "display_name": "Sashurocks", "link": "https://stackoverflow.com/users/7051359/sashurocks"}, "edited": false, "score": 0, "creation_date": 1478078773, "post_id": 40376066, "comment_id": 68005017, "body": "<a href=\"http://stackoverflow.com/questions/201101/how-to-initialize-all-members-of-an-array-to-the-same-value\" title=\"how to initialize all members of an array to the same value\">stackoverflow.com/questions/201101/&hellip;</a> i followed what was written in the link, even after changing to 1000 i get an error"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1478079348, "post_id": 40376066, "comment_id": 68005344, "body": "@Sashurocks That question is about <i>initialization</i>. <code>arr[100] = {0};</code> is not an array initialization, it&#39;s an assignment. It&#39;s exactly equivalent to <code>arr[100] = 0;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1478079830, "post_id": 40376178, "comment_id": 68005598, "body": "because you haven&#39;t initialized the array"}], "tags": [], "owner": {"reputation": 329, "user_id": 3953693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/397c0cf2bb470b47adae9afa27d31cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Dheeraj Kumar", "link": "https://stackoverflow.com/users/3953693/dheeraj-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1478078063, "creation_date": 1478078063, "answer_id": 40376178, "question_id": 40376066, "link": "https://stackoverflow.com/questions/40376066/access-violation-in-c-program-involving-pointer-variable/40376178#40376178", "title": "Access Violation in C program involving pointer variable?", "body": "<p>Array is of 100 Bytes but you are looping for 1000. Also in function Finder() , you do not have a limit on variable j so your array size is going beyond 100 bytes.</p>\n\n<p>Also use memset to assign array variables to 0. </p>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 0, "last_activity_date": 1478080077, "creation_date": 1478080077, "answer_id": 40376799, "question_id": 40376066, "link": "https://stackoverflow.com/questions/40376066/access-violation-in-c-program-involving-pointer-variable/40376799#40376799", "title": "Access Violation in C program involving pointer variable?", "body": "<p>As said in the comments, 2^1000 has <em>302</em> decimal digits.<br>\nYou're going far outside your array.</p>\n\n<p>But your code is very complicated because you store the digits with the most significant one first.<br>\nSince you're only interested in the digits and not the order in which they would be written, you can store the number \"in reverse\", with the least significant digit first.<br>\nThis makes the code much simpler, as you can loop \"forwards\" and no longer need to shuffle array elements around. </p>\n\n<p>Using <code>-1</code> as \"end of number\" marker, it might look like this:</p>\n\n<pre><code>void twice(int* digits)\n{\n    int i = 0;\n    int carry = 0;\n    while (digits[i] &gt;= 0)\n    {\n        digits[i] *= 2;\n        digits[i] += carry;\n        if (digits[i] &gt;= 10)\n        {\n            carry = 1;\n            digits[i] -= 10;\n        }\n        else\n        {\n            carry = 0;\n        }\n        i++;\n    }\n    if (carry)\n    {\n        digits[i] = 1;\n        digits[i+1] = -1;\n    }\n}\n\nint main()\n{\n    int digits[302] = {1, -1}; /* Start with 1 */\n    twice(digits);           /* digits is now { 2, -1 } */\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7051359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634e04f38a8f7d92e67d8804f91ac160?s=128&d=identicon&r=PG", "display_name": "Sashurocks", "link": "https://stackoverflow.com/users/7051359/sashurocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1478258782, "creation_date": 1478077717, "last_edit_date": 1478258782, "question_id": 40376066, "link": "https://stackoverflow.com/questions/40376066/access-violation-in-c-program-involving-pointer-variable", "title": "Access Violation in C program involving pointer variable?", "body": "<p>I was trying to solve <em>Project Euler</em> question 16 using c. I did not use bignnum libraries. The question asks <em>2^1000</em>. I decided to store every digit of that number in an array.</p>\n\n<p>For Example: <code>45 means arr[0]=4, arr[1]=5;</code></p>\n\n<p>The problem is definitely i the function int multi.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\n#include&lt;conio.h&gt;\nint multi(int *base, int k);// does the multiplication of array term by 2\nvoid switcher();//switches every term when the fore mostvalue is &gt;10\nint finder();// finds the array address of last value\nint arr[1000];\nint summer();//sums all values of the array    \n\nint main()\n{\n    arr[1000] = { 0 };\n    arr[0] = 1;\n\n    int i, j, sum, k, p;\n\n    for (i = 0; i &lt; 1000; i++)\n    {\n        j = 0;\n        k = finder();\n        p = multi(arr + k, j);\n    }\n    sum = summer();\n    printf(\"sum of digits of 2^1000 is %d\", sum);\n    _getch();    \n}\nint multi(int *base, int k)\n{       \n    int p;\n    if (base == arr)\n    {\n        *base = *base - 1;\n        *base = *base + k;\n        if (*base &gt; 10)\n        {\n            *base = *base - 10;\n            switcher();\n        }\n        return 0;\n    }\n    *base = *base * 2;\n    *base = *base + k;\n    if (*base &gt; 10)\n    {\n        *base = *base - 10;\n        p = multi(base - 1, 1);\n    }\n    else\n    {\n        p = multi(base - 1, 0);\n    }    \n}\nvoid switcher()\n{\n    int j;\n\n    for (j = 0;; j++)\n    {\n        if (arr[j] == 0)\n        {\n            break;\n        }   \n    }\n    j--;\n    for (; j &gt; 0; j--)\n    {\n        arr[j + 1] = arr[j];\n    }\n    arr[0] = 1;\n}\nint finder()\n{\n    int j;\n    for (j = 0;; j++)\n    {\n        if (arr[j] == 0)\n        {\n            break;\n        }\n    }\n    return --j;\n}    \n\nint summer()\n{\n    int summ, i;\n    summ = 0;\n    for (i = 0; i&lt;1000; i++)\n    {\n        summ = summ + arr[i];\n        if (arr[i] == 0)\n            break;\n    }\n    return summ;    \n}\n</code></pre>\n\n<p>It compiles but during runtime it shows Access Write Violation, base was ......</p>\n\n<p>Please explain this error and how to resolve it ?</p>\n"}, {"tags": ["android", "c++", "c", "libpcap"], "comments": [{"owner": {"reputation": 1315, "user_id": 1741893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVWQF.jpg?s=128&g=1", "display_name": "kaitoy", "link": "https://stackoverflow.com/users/1741893/kaitoy"}, "edited": false, "score": 0, "creation_date": 1478156396, "post_id": 40375635, "comment_id": 68041611, "body": "Did you research and try anything so far? Please share the results."}, {"owner": {"reputation": 21, "user_id": 7103457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841d02c789cc75f8ee3e716916018949?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7103457/jack"}, "reply_to_user": {"reputation": 1315, "user_id": 1741893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVWQF.jpg?s=128&g=1", "display_name": "kaitoy", "link": "https://stackoverflow.com/users/1741893/kaitoy"}, "edited": false, "score": 0, "creation_date": 1478163658, "post_id": 40375635, "comment_id": 68044950, "body": "Yed I did , but all of my result doesn&#39;t good work on android sutiod , some people suggestion to me to use jnetpcap but unfortunately I didn&#39;t know how i can use this library , I can call all the calsses and mothods after import org.jnetpcap but I don&#39;t know how i can use this class , Do you know Dear friend?"}, {"owner": {"reputation": 21, "user_id": 7103457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841d02c789cc75f8ee3e716916018949?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7103457/jack"}, "reply_to_user": {"reputation": 1315, "user_id": 1741893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVWQF.jpg?s=128&g=1", "display_name": "kaitoy", "link": "https://stackoverflow.com/users/1741893/kaitoy"}, "edited": false, "score": 0, "creation_date": 1478172507, "post_id": 40375635, "comment_id": 68050525, "body": "I found some sample about jnetpcap but it trhows ExceptionInInitializerError on android studio, when I use JPacket class , Do you know why?"}, {"owner": {"reputation": 1315, "user_id": 1741893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IVWQF.jpg?s=128&g=1", "display_name": "kaitoy", "link": "https://stackoverflow.com/users/1741893/kaitoy"}, "edited": false, "score": 0, "creation_date": 1478184800, "post_id": 40375635, "comment_id": 68059429, "body": "I&#39;m not familiar with jnetpcap. I believe you should make another question and ask for the specific error with showing your code. I&#39;m the owner of pcap4j so I can help you if you face problems in use of pcap4j, though. (But pcap4j doesn&#39;t support android and IEEE802.11 well yet, so it might not be enough.)"}], "owner": {"reputation": 21, "user_id": 7103457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841d02c789cc75f8ee3e716916018949?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/7103457/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478076351, "creation_date": 1478076351, "question_id": 40375635, "link": "https://stackoverflow.com/questions/40375635/using-libpcap-on-android", "title": "using libpcap on android", "body": "<p>I want use libpcap on android studio , but I don't know how I can use this library.\nI want to cerate a frame and send to network on layer of 2 on the network , for creating frame should I use libpcap? can't I use Java Code?\nAnd then I want know that how many devices connect to the access point.\nHow can I add thsi library to android studio?\nHow can I use this library , I am beginer to this kind of project.\nIs there any complete tutorial about this?\nIs there any one can help me , step by step?\nThis is very very important for me and I neet to our help.\nThanks for your help.</p>\n"}, {"tags": ["c", "arrays", "file-io", "reverse"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478074978, "post_id": 40375253, "comment_id": 68003085, "body": "There are two things that you forget: The first is that <a href=\"http://en.cppreference.com/w/c/io/fgets\" rel=\"nofollow noreferrer\"><code>fgets</code></a> adds the newline at the end. The second thing is that strings in C is a sequence of characters ended <i>with a terminator</i>. So a string of length four (like <code>&quot;ABCD&quot;</code>) is actually <i>five</i> characters including the terminator. You forget this last thing, about the terminator, <i>twice</i>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478075318, "post_id": 40375253, "comment_id": 68003232, "body": "There are some other problems in your <code>reverse</code> function too. Use a debugger to step through the code line by line to find out what and why."}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 2, "last_activity_date": 1478077090, "last_edit_date": 1495542838, "creation_date": 1478074990, "answer_id": 40375304, "question_id": 40375253, "link": "https://stackoverflow.com/questions/40375253/trouble-with-reversing-an-array-while-reading-input-from-a-file-in-c/40375304#40375304", "title": "Trouble with reversing an array while reading input from a file in C", "body": "<pre><code>stringLength = strlen(buffer); //Storing the length of the readed input\n\nchar reverse[stringLength];   //Creating array for reversed comparision(comparision not implemented yet)\n</code></pre>\n\n<p>You don't have enough space to store the trailing <code>\\0</code></p>\n\n<pre><code>char reverse[stringLength]; \n</code></pre>\n\n<p>should be</p>\n\n<pre><code>char reverse[stringLength + 1]; \n</code></pre>\n\n<p>And don't forget to add this traling <code>\\0</code> at the very end in your reverse function:</p>\n\n<pre><code>reverse[stringLength] = '\\0';\n</code></pre>\n\n<p>But notice that (in this case) you don't need a temporary to reverse the string, just pass the original one and swap until the <code>NUL</code> character is reached, take a look to <a href=\"https://stackoverflow.com/q/198199/1606345\">How do you reverse a string in place in C or C++?</a></p>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1478079212, "creation_date": 1478079212, "answer_id": 40376528, "question_id": 40375253, "link": "https://stackoverflow.com/questions/40375253/trouble-with-reversing-an-array-while-reading-input-from-a-file-in-c/40376528#40376528", "title": "Trouble with reversing an array while reading input from a file in C", "body": "<p>If you are looking for a really simple solution, you can use <a href=\"http://fresh2refresh.com/c-programming/c-strings/c-strrev-function/\" rel=\"nofollow noreferrer\"><code>strrev</code></a> from the <code>string.h</code> library. It reverses the string for you, which means you don't have to make your own string reversing function. You can just call it instead. </p>\n\n<p>Something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define BUFFSIZE 64\n\nint\nmain(void) {\n    FILE *filename;\n    char buffer[BUFFSIZE];\n    int length;\n\n    filename = fopen(\"test.txt\", \"r\");\n\n    if (filename == NULL) {\n        fprintf(stderr, \"%s\\n\", \"Error Reading File!\");\n        exit(EXIT_FAILURE);\n    }\n\n    while (fgets(buffer, BUFFSIZE, filename) != NULL) {\n        length = strlen(buffer)-1;\n\n        if (buffer[length] == '\\n') {\n            buffer[length] = '\\0';\n        }\n\n        printf(\"Normal String: %s\\n\", buffer);\n        printf(\"Reversed String: %s\\n\", strrev(buffer));\n    }\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 6806539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/asGzD.jpg?s=128&g=1", "display_name": "TurtleMan", "link": "https://stackoverflow.com/users/6806539/turtleman"}, "edited": false, "score": 0, "creation_date": 1478108832, "post_id": 40377092, "comment_id": 68024680, "body": "Thank you for your response. Soon as I started reading the answers and seen that I was forgetting about the <code>&#39;\\0&#39;</code>. I did a face to palm jester. As for dealing with the <code>fgets</code> carrying the <code>&#39;\\n&#39;</code> I just shifted the contents of the array over by one. Adding this code to my <code>reversing function</code>.                                                                                                      <code>i = 0 while(i &lt; stringLength) { reverse[i] = reverse[ i +1]; i++; }</code>"}], "tags": [], "owner": {"reputation": 218, "user_id": 5624940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a64af18c50dc31749efbe06a5e50648?s=128&d=identicon&r=PG&f=1", "display_name": "PhantomWhiskers", "link": "https://stackoverflow.com/users/5624940/phantomwhiskers"}, "is_accepted": true, "score": 0, "last_activity_date": 1478080953, "creation_date": 1478080953, "answer_id": 40377092, "question_id": 40375253, "link": "https://stackoverflow.com/questions/40375253/trouble-with-reversing-an-array-while-reading-input-from-a-file-in-c/40377092#40377092", "title": "Trouble with reversing an array while reading input from a file in C", "body": "<p>Your problem lies in the line <code>while (i &lt; j)</code> in your reversing function. <code>i</code> will end up being less than <code>j</code> when only half of your array will be reversed. Instead, it should be <code>while (i &lt; stringLength)</code></p>\n\n<p>You should also change your character array <code>char reverse[stringLength]</code> to <code>char reverse[stringLength + 1]</code> so you have space for the <code>'\\0'</code> terminating character, which you should add to the array at the end of your reversing function.</p>\n\n<p>It should look like this:</p>\n\n<pre><code>void reversing(char buffer[], char reverse[], int stringLength)\n{\n    int i = 0;\n    int j = stringLength - 1;\n\n    while(i &lt; stringLength)\n    {\n        reverse[j] = buffer[i];\n        i++;\n        j--;\n    }\n    reverse[i] = '\\0';\n}\n</code></pre>\n\n<p>Also note that the read function for the file is also reading in a newline character and the reversing function is placing it at the beginning of your reversed string, so output looks like this:</p>\n\n<pre><code>Normal String: A\nString length: 2\nReversed String: \nA\n\nNormal String: AB\nString length: 3\nReversed String: \nBA\n\nNormal String: ABC\nString length: 4\nReversed String: \nCBA\n\nNormal String: ABCD\nString length: 5\nReversed String: \nDCBA\n\nNormal String: ABCDE\nString length: 6\nReversed String: \nEDCBA\n\n\nEND OF FILE Reached!\n</code></pre>\n\n<p>I'll leave it up to you to figure out removing the newline character before sending it to the reversing function. If you can't figure it out, just comment it under this answer and I'll edit the answer.</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 6806539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/asGzD.jpg?s=128&g=1", "display_name": "TurtleMan", "link": "https://stackoverflow.com/users/6806539/turtleman"}, "is_accepted": false, "score": 0, "last_activity_date": 1478111722, "last_edit_date": 1478111722, "creation_date": 1478111097, "answer_id": 40387171, "question_id": 40375253, "link": "https://stackoverflow.com/questions/40375253/trouble-with-reversing-an-array-while-reading-input-from-a-file-in-c/40387171#40387171", "title": "Trouble with reversing an array while reading input from a file in C", "body": "<p>In order to solve my problems reversing the array and forgetting about the <code>'\\0'</code>, not allowing enough space for the <code>'\\0'</code>, and dealing with <code>fgets</code> adding a newline. Here is my current code that runs correctly.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\n    void reversing(char buffer[], char reverse[], int stringLength);\n\n    int main(int argc, char const *argv[])\n    {\n      int stringLength = 0;\n      FILE *fp;         //Declaring a FILE type pointer calling it fp\n      char buffer[64];  //Declaring a char array the size of 64 named buffer\n      fp = fopen(\"./test.txt\", \"r\");\n\n      if (fp == NULL)\n      {\n        printf(\"File did not open\\n\");\n        return 0;\n      }\n      else\n      {\n        while(fgets(buffer, 64, (FILE*)fp) != NULL)\n        {\n          printf(\"\\nNormal String:   %s\", buffer); //Print content in buffer(original array)\n          stringLength = strlen(buffer);           //Storing the length of read input\n\n          char reverse[stringLength + 1];\n\n          reversing(buffer, reverse, stringLength);\n          printf(\"Reversed String: %s\\n\", reverse);//Print content in reverse(Reverse array)\n        }\n\n      printf(\"\\nEND OF FILE Reached!\\n\");\n     }\n     fclose(fp);\n     return 0;\n   }\n\n  void reversing(char buffer[], char reverse[], int stringLength)\n  {\n    int i = 0;\n    int j = stringLength - 1;\n    while(i &lt; stringLength)\n    {\n      reverse[j] = buffer[i]; //Swap elements\n      i++;\n      j--;\n    }\n    reverse[i] = '\\0'; //Add null terminating \n\n    i = 0;\n    if(reverse[0] == '\\n') //If first element is '\\n' swift elements\n    {\n       while(i &lt; stringLength)\n       {\n        reverse[i] = reverse[i + 1];\n        i++;\n       }\n    }\n  }\n</code></pre>\n\n<p>It now prints to the screen</p>\n\n<pre><code>    Normal String:   A\n    Reversed String: A\n\n    Normal String:   AB\n    Reversed String: BA\n\n    Normal String:   ABC\n    Reversed String: CBA\n\n    Normal String:   ABCD\n    Reversed String: DCBA\n\n    Normal String:   ABCDE\n    Reversed String: EDCBA\n\n    END OF FILE Reached!\n</code></pre>\n\n<p>Thank you @PhantomWhiskers and everyone that commented and provided possible solutions to my original question.</p>\n"}], "owner": {"reputation": 155, "user_id": 6806539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/asGzD.jpg?s=128&g=1", "display_name": "TurtleMan", "link": "https://stackoverflow.com/users/6806539/turtleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 40377092, "answer_count": 4, "score": 0, "last_activity_date": 1478111722, "creation_date": 1478074764, "question_id": 40375253, "link": "https://stackoverflow.com/questions/40375253/trouble-with-reversing-an-array-while-reading-input-from-a-file-in-c", "title": "Trouble with reversing an array while reading input from a file in C", "body": "<p>I am currently trying to work on a program that will read in a file line by line and place the content in an array. Then trying to reverse the original array into a second array so I can later compare the two arrays. My current code is</p>\n\n<pre><code>     #include &lt;stdio.h&gt;\n     #include &lt;string.h&gt;\n\n     void reversing(char buffer[], char reverse[], int stringLength);\n\n     int main(int argc, char const *argv[])\n     {\n        int stringLength = 0;\n        FILE *fp;   //Declaring a FILE type pointer calling it fp\n        char buffer[64]; //Declaring a char array the size of 64 named buffer\n\n        fp = fopen(\"./test.txt\", \"r\"); \n        if(fp == NULL)\n        {\n          printf(\"File did not open!\\n\");\n        }\n        else\n        {\n              while(fgets(buffer, 64, (FILE*)fp) != NULL)\n              {\n                 printf(\"\\nNormal String: %s\", buffer); //Print content in buffer(original array)\n                 stringLength = strlen(buffer);        //Storing the length of the readed input\n\n                 char reverse[stringLength];  //Creating array for reversed comparision(comparision not implemented yet)\n\n                 printf(\"String length: %d\\n\", stringLength); //Print string length(for debugging)\n                 reversing(buffer, reverse, stringLength);\n                 printf(\"Reversed String: %s\\n\", reverse);//Print content in reverse(Reverse array)\n             }\n\n             printf(\"\\n\\nEND OF FILE Reached!\\n\");\n\n             fclose(fp);\n       }    \n        return 0;\n    }\n\n    void reversing(char buffer[], char reverse[], int stringLength)\n    {\n       int i = 0;\n       int j = stringLength - 1;\n\n       while(i &lt; j)\n       {\n       reverse[j] = buffer[i];\n       i++;\n       j--;\n       }\n    }\n</code></pre>\n\n<p>My test file is simply</p>\n\n<pre><code>    A\n    AB\n    ABC\n    ABCD\n    ABCDE\n</code></pre>\n\n<p>It should print to the screen</p>\n\n<pre><code>   Normal String:   A\n   Reversed String: A \n   Normal String:   AB \n   Reversed String: BA\n   Normal String:   ABC \n   Reversed String: CBA\n   Normal String:   ABCD \n   Reversed String: DCBA\n   Normal String:   ABCDE \n   Reversed String: EDCBA\n</code></pre>\n\n<p>When I run the program through a debugger it shows that once inside the reversing function the letters are being swap correctly; however, once it exits the function and the call to print the reversed array is made it is printing garbage, but inside the garbage are the first two elements swap correctly. Any help of suggestion would be greatly appreciated.</p>\n\n<p><code>As a side note</code> I am trying to make this as simple as possible since the true objective or this program is to take it and implement it in assembly on a ci20 machine.</p>\n"}, {"tags": ["c", "visual-studio-2010", "gcc", "machine-learning", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478074882, "post_id": 40375207, "comment_id": 68003055, "body": "Have you ever heard something about <a href=\"https://en.wikipedia.org/wiki/Debugging\" rel=\"nofollow noreferrer\">debugging</a>?"}, {"owner": {"reputation": 1, "user_id": 7103394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41e2e41fa83f195b883f0f55f00f5be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu-Feng Qin", "link": "https://stackoverflow.com/users/7103394/yu-feng-qin"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478075763, "post_id": 40375207, "comment_id": 68003438, "body": "@LPs  thanks for your help.i tried several IDE ,some can build correctly,some IDEs give different error which confuses me so much. I&#39;m not good at debugging and i&#39;m not a programmer ,I just wanna use this data generator to create some artificial data to use."}, {"owner": {"reputation": 1, "user_id": 7103394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41e2e41fa83f195b883f0f55f00f5be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu-Feng Qin", "link": "https://stackoverflow.com/users/7103394/yu-feng-qin"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478085845, "post_id": 40375207, "comment_id": 68009327, "body": "@LPs excuse me, i have tried <b>valgrind</b>, i wonder it&#39;s log suggests me there are some <code>invalid write and read</code>, could you tell me what i can do next? i have no idea why can cause these <code>invalid write and read</code>. <b>Thanks a lot !</b>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478157236, "post_id": 40375207, "comment_id": 68041950, "body": "Try modifying  <code>#define Xof(i,j) *(X+(i-1)*VectLen+j-1)</code> to <code>X[(VectLen*(i-1))+(j-1)];</code>"}, {"owner": {"reputation": 1, "user_id": 7103394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41e2e41fa83f195b883f0f55f00f5be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu-Feng Qin", "link": "https://stackoverflow.com/users/7103394/yu-feng-qin"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478174918, "post_id": 40375207, "comment_id": 68052068, "body": "@LPs don&#39;t work . thanks for you kind help"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478175460, "post_id": 40375207, "comment_id": 68052439, "body": "That is one of many problems. You should try trim your code and isolate problems. So post different questions."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7103394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41e2e41fa83f195b883f0f55f00f5be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu-Feng Qin", "link": "https://stackoverflow.com/users/7103394/yu-feng-qin"}, "edited": false, "score": 0, "creation_date": 1478230476, "post_id": 40409406, "comment_id": 68079590, "body": "After change the line 214, it can correctly work in gcc 4.8.4 (ubuntu 4.8.4-2ubuntu1~14 .04.3), This is <b>bash on ubuntu on windows</b>. But it can&#39;t work in windows10 using gcc 4.9.2(tdm-1). And i change the compiler to cygwin which has gcc 4.9.2,not the tdm-1 version. wired, it works! So i think the complier also has some bug."}, {"owner": {"reputation": 1, "user_id": 7103394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41e2e41fa83f195b883f0f55f00f5be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu-Feng Qin", "link": "https://stackoverflow.com/users/7103394/yu-feng-qin"}, "edited": false, "score": 0, "creation_date": 1478231872, "post_id": 40409406, "comment_id": 68079897, "body": "Sorry, it&#39;s <b>Weird</b>, not <b>wired</b>."}], "tags": [], "owner": {"reputation": 61, "user_id": 7111751, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-68AZZMdeV_8/AAAAAAAAAAI/AAAAAAAAAg4/TSV8iagSIgo/photo.jpg?sz=128", "display_name": "David Woodruff", "link": "https://stackoverflow.com/users/7111751/david-woodruff"}, "is_accepted": false, "score": 1, "last_activity_date": 1478200020, "creation_date": 1478200020, "answer_id": 40409406, "question_id": 40375207, "link": "https://stackoverflow.com/questions/40375207/mulcross-data-generator-runs-wrongly-freeinvalid-next-size/40409406#40409406", "title": "mulcross data generator runs wrongly: free():invalid next size", "body": "<p>On line 214, change the word\nfloat\nto be\ndouble</p>\n"}], "owner": {"reputation": 1, "user_id": 7103394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41e2e41fa83f195b883f0f55f00f5be?s=128&d=identicon&r=PG&f=1", "display_name": "Yu-Feng Qin", "link": "https://stackoverflow.com/users/7103394/yu-feng-qin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478200020, "creation_date": 1478074559, "last_edit_date": 1478139843, "question_id": 40375207, "link": "https://stackoverflow.com/questions/40375207/mulcross-data-generator-runs-wrongly-freeinvalid-next-size", "title": "mulcross data generator runs wrongly: free():invalid next size", "body": "<p>I run both the newest version of windows 10 and ubuntu 16.04, 8 GB memory. I have tried different compiler <strong>GCC 4.8.4, clang 3.5, and VS2010</strong> on the two systems\uff0cneither are work.</p>\n\n<p><strong>That is strange!</strong> <em>Because</em> the program is well-used in many research articles, which suggest it has  <strong>no bug</strong>. but i have tried different compiler and IDEs, which suggest it has  <strong>bug</strong>. </p>\n\n<p><strong>so i ask for anyone if you can correctly run this <code>mulcross.c</code>file which is at the end of this question, please tell me your system setting such as which compiler you use. Any lead would be appreciate!</strong></p>\n\n<p>It requires two input files \"GEN.PRM\" AND \"SEED.DAT\" to run the <code>executable file</code>built from <code>mulcross.c</code>, <strong>NOT</strong> the <code>multout.3.03.c</code> all these file can obtain from  <a href=\"http://lib.stat.cmu.edu/jasasoftware/rocke\" rel=\"nofollow noreferrer\">the link</a>.</p>\n\n<p>I have tried <strong>valgrind</strong> tool\uff0chere is what valgrind prints. But i am new to the program world, so i have no idea the meaning of these prints.</p>\n\n<pre><code>==180== Memcheck, a memory error detector\n==180== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==180== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\n==180== Command: ./mulcross2\n==180== Parent PID: 2\n==180== \n==180== Invalid write of size 8\n==180==    at 0x401343: Pollute (mulcross.c:221)\n==180==    by 0x403197: main (mulcross.c:567)\n==180==  Address 0x550e958 is 40 bytes inside a block of size 44 alloc'd\n==180==    at 0x4C2ABE3: malloc (vg_replace_malloc.c:299)\n==180==    by 0x401237: Pollute (mulcross.c:214)\n==180==    by 0x403197: main (mulcross.c:567)\n==180== \n==180== Invalid write of size 8\n==180==    at 0x401320: Pollute (mulcross.c:221)\n==180==    by 0x403197: main (mulcross.c:567)\n==180==  Address 0x550e960 is 4 bytes after a block of size 44 alloc'd\n==180==    at 0x4C2ABE3: malloc (vg_replace_malloc.c:299)\n==180==    by 0x401237: Pollute (mulcross.c:214)\n==180==    by 0x403197: main (mulcross.c:567)\n==180== \n==180== Invalid read of size 8\n==180==    at 0x4013C2: Pollute (mulcross.c:224)\n==180==    by 0x403197: main (mulcross.c:567)\n==180==  Address 0x550e960 is 4 bytes after a block of size 44 alloc'd\n==180==    at 0x4C2ABE3: malloc (vg_replace_malloc.c:299)\n==180==    by 0x401237: Pollute (mulcross.c:214)\n==180==    by 0x403197: main (mulcross.c:567)\n</code></pre>\n\n<p>The program attempts to find a robust estimate of shape, location and\nMahalanobis distances in high dimension. The dimension and number of\ndata points are limited only by computer memory. \n<a href=\"http://lib.stat.cmu.edu/jasasoftware/rocke\" rel=\"nofollow noreferrer\">this is the program</a>.</p>\n\n<p>it's a shell archive. I run the command \"sh file \" to extract files.\ni build the file \"mulcross.c\" by using the command  \"gcc mulcross.c -o mulcross -lm\", it create a file called \"mulcross\",then i run the \"mulcross\" file by \"./mulcross\" , it reads the original file \"GEN.PRM\" and \"SEED.DAT\", unfortunately the bash shell give me an error which is</p>\n\n<p><code>error in ./mulcross: free():invalid next size (normal):0x000000000012f45c0</code></p>\n\n<p>But if i change the parameters in file \"GEN.PRM\",e.g. from \"10 200 0.25 2 1\"(original) to \"2 200 0.25 2 1\"(modified), it means only change the first parameters which behalfs the dimension, the script \"mulcross\" can run correctly. I find that only setting the dimension parameter smaller than 3 can run the script correctly.</p>\n\n<hr>\n\n<p>Here is the <code>mulcross.c</code></p>\n\n<pre><code>/* MULCROSS.C */  /* 5/3/93 */                       \n/* generate test data sets for outlier and cluster detection */\n/* copyright 1993,94,96 by David L. Woodruff and David M. Rocke */\n/* 3/9/93 contam some number of sqrt(chi^2(p;0.001)/p) on each dim */\n/* converted from gencross to create multiple clusters */\n/* independant N(0,1) entries */\n/* pollute with with N[PollMean, y] data entries */\n/* where y is set to be at the \"crossover\" point */\n/* This software may be freely distributed for non-commercial use */\n\n/* Compilation Notes: */\n/* 1. This is a single file C program using only standard libraries */\n/* 2. you will need the -lm linker switch on most Unix and related systems */\n\n/* Other Notes: */\n/* 1. see the function Give_Info() for usage instructions */\n/* 2. see the appendix of the paper */\n/*    \"Idenfication of Outliers in Multivariate Data\" */\n/*    by Rocke and Woodruff for detailed explanations */\n/* 3. the program relpart.c can analyze the test data generated */\n/* 4. send questions to dlwoodruff@ucdavis.edu; (916)752-0515 */\n\n#include &lt;stdio.h&gt;       /* magical incantations */\n#include &lt;stdlib.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;math.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;memory.h&gt;\n\n#define BANNER \"mulcross version 1.00\\nCopyright 1993,94,96 by David L. Woodruff and David M. Rocke\\n\"\n\n#define DATAFILE \"MULCROSS.DAT\"   /* data output file */\n#define STATSFILE \"MULCROSS.STT\"    /* statistics */\n#define PARMSFILE \"GEN.PRM\"   /* problem parameters */\n#define SEEDFILE \"SEED.DAT\"   /* random number seed */\n/*----------------------------------------------------------------------------*/\nvoid Give_Info()\n{\n  printf(\"This program reads parameters from a file named exactly %s\\n\",PARMSFILE);\n  printf(\"It reads a integer random number seed with 1 to 5 digits from %s\\n\",SEEDFILE);\n  printf(\"This seed file is overwritten with a psuedo-random seed by the program\\n\");\n  printf(\"Data is output to %s and statistics to %s\\n\",DATAFILE, STATSFILE);\n  printf(\"The parameters file (%s) should contain P N A D\\n\",PARMSFILE);\n  printf(\"Where P is the dimension, N is the number of points\\n\");\n  printf(\"A is the fraction of bad data and D controls its distance\\n\");\n  printf(\"See Rocke and Woodruff: Identification of Outliers in Multivariate Data\\n\");\n  printf(\"Sample parameters file: 10 100 0.2 2\\n\");\n}\n\n#define ALLCHK(x) if (x == NULL) {printf (\"allocation error\\n\"); assert(x);}\n\n/* global data */\nint VectLen;        /* number of attributes */\nint XCnt;       /* number of observations */\nint PollCnt;        /* number to pollute */\ndouble PollFrac;      /* fraction to pollute */\ndouble NumUnits;      /* location of polluted means */\nint NumClusters;      /* number of outliers clusters */\ndouble *X;        /* The observations */\n#define Xof(i,j) *(X+(i-1)*VectLen+j-1) /* X[i,j] */\nint *JBits;                       /* indicators for J set (squander bits) */\ndouble *XBarJ;                    /* x bar values for the J set */\n#define XBarJof(i) *(XBarJ+i-1)   /* XBarJ[i] */\ndouble *XJ;                       /* data matrix corresp. to J set */\n#define XJof(i,j) *(XJ+(i-1)*VectLen+j-1) /* XJ[i,j] */\n\n/* covariance matrix, rectangular space to facilitate GJ inversion */\n/* the inverse is going to be in the right half of the C matrix, so */\n/* space is not allocated, just a macro to get at the data */\ndouble *C;                        /* COLUMN MAJOR covariance matrix */\n#define Cof(i,j) (*(C+(i-1)+(j-1)*VectLen))  /* C[i,j] */\n#define C_1of(i,j) *(C+VectLen*VectLen+(i-1)+(j-1)*VectLen)     /* C-1[i,j] */\ndouble *Chol;                     /* COLUMN MAJOR \"left\" cholesky factor */\n#define Cholof(i,j) (*(Chol+(i-1)+(j-1)*VectLen))  /* Chol[i,j] */\ndouble *SqResiduals;   /* squared distances, zero based */\ndouble *XSave;         /* scratch space */\n#   define XSaveof(i,j) *(XSave+(i-1)*VectLen+j-1) /* col major...*/\n\nlong seed;      /* URan seed */\ndouble Lambda;              /* covariance matrix multiplier */\n\n/*----------------------------------------------------------------------------*/\ndouble URan( long *seed)\n/*return a uniform 0,1 rv using and returning the seed*/\n{\n#define c (long)2147483647\n   do *seed = ((long)16807 * *seed) % c; while (*seed == 0);\n   return((double)*seed / (double)c);\n#undef c\n}\n\n/*--------------------------------------------------------------------------*/\ndouble Norm(double mu, double sd, long *z)\n/* return a normal deviate with mean mu and std dev sd,\n   use seed z */\n/* just waste a deviate... */\n\n{\ndouble v1,v2,r;\n\n   do {\n     v1 = 2.0 * URan(z) - 1.;\n     v2 = 2.0 * URan(z) - 1.;\n     r = v1*v1 + v2*v2;\n   } while (r &gt;= 1.0);\n   return(mu + sd * (v1 * sqrt(-2.0 * log(r)/r)));\n}\n\n/*---------------------------------------------------------------------------*/\ndouble Chi2_At_Pt001(int v)\n/* return the v deg. of freed. 0.001 point of a chi square*/\n/* note that  in this case 0.001 means just that in Bowker and Liberman\n   or Bickel and Doksum */\n{\n    switch (v) {\n  case 1: return(10.8);\n  case 2: return(13.8);\n  case 3: return(16.3);\n  case 4: return(18.5);\n  case 5: return(20.5);\n  case 6: return(22.5);\n  case 7: return(24.3);\n  case 8: return(26.1);\n  case 9: return(27.9);\n  case 10: return(29.6);\n  case 11: return(31.3);\n  case 12: return(32.9);\n  case 13: return(34.5);\n  case 14: return(36.1);\n  case 15: return(37.7);\n  case 16: return(39.3);\n  case 17: return(40.8);\n  case 18: return(43.3);\n  case 19: return(43.8);\n  case 20: return(45.3);\n  case 25: return(52.6);\n  case 50: return(86.7);\n  case 100: return(149.4);\n  default: return(v *\n       pow(1-(double)2/(double)(9*v)+0.6745*sqrt(2./(9.*(double)v)),3));\n       /* Bowker and Liberman pp 601-602 */\n   }\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Load_Parms()\n/* read in the parameters */\n{\n    FILE *f;      /* stream record pointer */\n\n  if ((f = fopen(PARMSFILE,\"r\")) == NULL) {\n    Give_Info();\n    printf(\"mulcross could not open paramaters file %s for read\\n\",PARMSFILE);\n    exit(1);\n  }\n  NumClusters = 0;  // to facilitate gencross input files\n  fscanf(f,\"%d %d %lf %lf %d\",&amp;VectLen, &amp;XCnt, &amp;PollFrac, &amp;NumUnits, &amp;NumClusters);\n  fclose(f);\n  if (!NumClusters) NumClusters = 1;\n  PollCnt = (int)(PollFrac * (double)XCnt + 0.5);\n  if (XCnt &lt;= VectLen) {\n    printf(\"For vectors of length %d, there must be at least %d points\\n\",\n      VectLen, VectLen+1);\n    exit(1);\n  }\n  if (PollCnt &gt; XCnt / 2) {\n    printf(\"You have %d data points, so you cannot pollute %d\\n\",\n      XCnt, PollCnt);\n    exit(1);\n  }\n  if (PollCnt &lt;=0 ) {\n    printf(\"You must have at least one bad point (see PollFrac in %s)\\n\",\n           PARMSFILE);\n    exit(1);\n  }\n  if ((f = fopen(SEEDFILE,\"r\")) == NULL) {\n    Give_Info();\n    printf(\"Could not open seed file %s for read\\n\",SEEDFILE);\n    exit(1);\n  }\n  Lambda = (1. - PollFrac) * (PollFrac * (double)VectLen - (1. - PollFrac)) /\n           (PollFrac * ((1.-PollFrac)*(double)VectLen - PollFrac));\n  if (Lambda &lt; 0.01) {\n     Lambda = 0.01;\n     printf(\"warning: setting lambda to %lf\\n\",Lambda);\n   }\n\n  fscanf(f,\"%ld\",&amp;seed);\n  fclose(f);\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Generate_Data()\n/* generate the data (see comments at top of file) */\n{\n    int row, col;       /* to loop */\n\n  for (row = 1; row &lt;= XCnt; row++)\n   for (col = 1; col &lt;= VectLen; col++)\n    Xof(row,col) =  Norm((double)0.,(double)1.,&amp;seed);\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Pollute()\n/* find the sample number of the computed sample closest to 0 */\n/* no longer write the sample number to the file NEARFILE */\n{\n  int Samp;     /* sample number, not zero based */\n  int i;      /* loop index for distance computation */\n  double PollDist;            /* how far out on each dimension */\n  double *DirVect;            /* direction vector */\n  int SampStart;              /* first polluted sample index */\n\n  DirVect = malloc((VectLen+1)*sizeof(float)); ALLCHK(DirVect)               \n  PollDist = NumUnits * sqrt(Chi2_At_Pt001(VectLen) / VectLen);\n  SampStart = XCnt - PollCnt + 1;\n  for (Samp = SampStart; Samp &lt;=XCnt; Samp++) {\n    /* make sure you get enough bad points, even if clusters have differing sizes */\n    if (!((Samp-SampStart) % (PollCnt / NumClusters))) {\n      for (i=1; i&lt;=VectLen; i++) \n        if (URan(&amp;seed) &gt; 0.5) DirVect[i] = -1.; else DirVect[i] = 1.;\n    }\n    for (i=1; i&lt;=VectLen; i++) {\n        Xof(Samp, i) = Norm(PollDist*DirVect[i], sqrt(Lambda), &amp;seed);\n    }\n  }\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Write_Data()\n/* output the X Array */\n{\n  FILE *f;        /* input file stream record */\n  int row,col;      /* to loop */\n\n  if ((f = fopen(DATAFILE,\"w\")) == NULL) {\n    Give_Info();\n    printf(\"Could not open %s for write\\n\",DATAFILE);\n    exit(1);\n  }\n  fprintf(f,\"%d %d\\n\",VectLen, XCnt);\n\n  for (row = 1; row &lt;= XCnt; row++) {\n    for (col = 1; col &lt;= VectLen; col++) fprintf(f,\" %14.11lf\",Xof(row,col));\n    fprintf(f,\"\\n\");\n  }\n  fclose(f);\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Dump_Data(char *msg)\n/* dump the X array */\n{\n  int row, col;\n\n  printf(\"Dump of X data array %s\\n\",msg);\n  for (row=1; row&lt;=XCnt; row++) {\n    for (col=1; col&lt;=VectLen; col++) printf(\"%7.5lf \",Xof(row,col));\n    printf(\"\\n\");\n  }\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Make_Room()\n/* allocate space for global data structures */\n{\n  X = malloc(VectLen*XCnt*sizeof(double)); ALLCHK(X)\n  JBits = malloc((XCnt)*sizeof(int)); ALLCHK(JBits)\n  XBarJ = malloc(VectLen*sizeof(double)); ALLCHK(XBarJ)\n  XJ = malloc((XCnt)*VectLen*sizeof(double)); ALLCHK(XJ)\n  C = malloc(VectLen*VectLen*2*sizeof(double)); ALLCHK(C)\n  Chol = malloc(VectLen*VectLen*sizeof(double)); ALLCHK(Chol)\n  XSave = malloc(VectLen*XCnt*sizeof(double)); ALLCHK(XSave)\n  SqResiduals = malloc((XCnt)*sizeof(double)); ALLCHK(SqResiduals)\n}\n/*-------------------------------------------------------------------------*/\nvoid InvertC(double *C, int VectLen, double *Determinant)\n/* things are getting a bit hacked up here..... */\n/* assume C is VectLen by VectLen */\n/* C must have room for another square on the right */\n/* do Gauss-Jordon Elimination on C*x(j) = e(j); Strang 29 */\n/* see also page 38 (no use exchanging rows since PDS) */\n/* keep a running product of the pivots as the determinant of C */\n/* (later, try to do something more efficient (e.g. use Symm)) */\n/* COLUMN MAJOR arrays, look out... */\n/* pivots are left in original C space, result is on ``right'' side */\n\n{\n  /* \"locals\" */\n  int pivotrow, row, col;     /* to loop */\n  double Pivot;               /* C[pivotrow, pivotrow]        */\n  double m;                   /* multiplier */\n\n  /* put I in the right half */\n  for (row=1; row &lt;= VectLen; row++)\n    for (col = VectLen+1; col &lt;= 2*VectLen; col++)\n      if (col == row+VectLen) Cof(row,col) = 1.; else Cof(row,col) = 0.;\n\n  /* forward elimination */\n  *Determinant = 1;   /* running product */\n  for (pivotrow = 1; pivotrow &lt; VectLen; pivotrow++) {\n    if (!Cof(pivotrow,pivotrow)) {\n      /* printf(\"zero pivot at row %d, you lose\\n\",pivotrow); */\n      *Determinant = 0.;\n      return;\n    } else {\n      /* non-zero pivot in C[row,row] */\n      Pivot = Cof(pivotrow, pivotrow);   /* two uses for pivot */\n      for (row = pivotrow+1; row &lt;= VectLen; row++) {\n        m = Cof(row, pivotrow) / Pivot;\n        for (col = pivotrow; col &lt;= VectLen+pivotrow; col++) { /* assumes no zero pivots shuffles!!!*/\n          Cof(row,col) = Cof(row,col) - m * Cof(pivotrow,col);\n        }\n      }\n    }\n    *Determinant = *Determinant * Pivot;\n\n  }\n  *Determinant = *Determinant * Cof(VectLen, VectLen);\n  if (!*Determinant) {return;}\n\n  /* back substitution, pivots are non-zero, so use them */\n  for (pivotrow = 2; pivotrow &lt;=VectLen; pivotrow++){\n    Pivot = Cof(pivotrow, pivotrow);\n    for (row = 1; row &lt; pivotrow; row++) {\n      if (Cof(row,pivotrow)) {\n        m = Cof(row,pivotrow) / Pivot;\n          for (col = pivotrow; col &lt;= VectLen+pivotrow; col++) {\n            Cof(row,col) = Cof(row,col) - m*Cof(pivotrow, col);\n          }\n      }\n    }\n  }\n\n  /* finally, divide the rows in the inverse by the pivots */\n  for (row = 1; row &lt;= VectLen; row++)\n    for (col = VectLen+1; col &lt;= 2*VectLen; col++)\n      Cof(row, col) = Cof(row,col) / Cof(row,row);\n}\n\n/*-------------------------------------------------------------------------*/\nvoid SqrtC(double *C, double *Chol)\n/* cholesky factorization */\n/* assume C is VectLen by VectLen */\n/* do Gauss-Jordon; Strang 241, 29 */\n/* see also page 38 (no use exchanging rows since PDS) */\n/* we need L root D (not U) for random deviates so transpose */\n/* COLUMN MAJOR arrays, look out... */\n/* pivots are left in original C space, result is on ``right'' side */\n\n{\n  /* \"locals\" */\n  int pivotrow, row, col;     /* to loop */\n  double Pivot;               /* C[pivotrow, pivotrow]        */\n  double m;                   /* multiplier */\n\n  for (row=1; row &lt;= VectLen; row++) for (col=1; col &lt;= VectLen; col++)\n    Cholof(row,col) = Cof(row,col);\n\n  /* forward elimination to produce U and also mult by pivot matrix */\n  for (pivotrow = 1; pivotrow &lt; VectLen; pivotrow++) {\n    if (!Cholof(pivotrow,pivotrow)) {\n      printf(\"zero pivot at row %d, you lose\\n\",pivotrow);\n      exit(1);\n    } else {\n      /* non-zero pivot in C[row,row] */\n      Pivot = Cholof(pivotrow, pivotrow);   /* two uses for pivot */\n      for (row = pivotrow+1; row &lt;= VectLen; row++) {\n        m = Cholof(row, pivotrow) / Pivot;\n        for (col = pivotrow+1; col &lt;= VectLen; col++) { \n          Cholof(row,col) = Cholof(row,col) - m*Cholof(pivotrow,col);\n        }\n      }\n      Cholof(pivotrow, pivotrow) = sqrt(Pivot);\n      for (col = pivotrow+1; col &lt;=VectLen; col++)\n       Cholof(pivotrow,col) = Cholof(pivotrow,col) * sqrt(Pivot) / Pivot;\n    }\n  }\n  Cholof(VectLen, VectLen) = sqrt(Cholof(VectLen, VectLen));\n  /* do the transpose */\n  /* (have upper, want lower) */\n  for (row=1; row&lt;=VectLen;row++) {\n    for (col=row+1; col&lt;=VectLen;col++) {\n      Cholof(col,row) = Cholof(row,col);\n      Cholof(row,col) = 0.;\n    }\n  }\n}\n\n/*---------------------------------------------------------------------------*/\nvoid Standardize_X()\n/* transform X so that it has unit mean and covariance I */\n/* (ab)use various and sundry global data structures */\n/* in other words, call this only early in the program */\n/* for now, just throw away the transform vector and matrix */\n{\n  int i,j,k;        /* to loop */\n  double Det;       /* to throw away determinant */\n\n  for (j = 1; j &lt;= VectLen; j++) {\n    XBarJof(j) = 0;\n    for (i = 1; i &lt;= XCnt; i++) XBarJof(j) += Xof(i,j);\n    XBarJof(j) /= XCnt;\n  }\n  for (i = 1; i &lt;= XCnt; i++)\n    for (j = 1; j &lt;= VectLen; j++) Xof(i,j) -= XBarJof(j);\n\n  /* now find the appropriate rotation (sqrt(XXt)^-1) */\n  /* put XXt into C (but this is XtX in this program... )*/\n  for (i=1; i&lt;=VectLen; i++) {\n    for (j=1; j&lt;=VectLen; j++) {\n      Cof(i,j) = 0;\n      for (k=1; k&lt;=XCnt; k++) {\n        Cof(i,j) += Xof(k,i) * Xof(k,j);\n      }\n    }\n  }\n  InvertC(C, VectLen, &amp;Det);\n  if (Det &lt;= 0.0) {printf(\"Unexpected singularity in mulcross\\n\"); exit(1);}\n  for (i=1; i&lt;=VectLen;i++) for (j=1; j&lt;=VectLen;j++) Cof(i,j) = C_1of(i,j);\n  SqrtC(C, Chol);\n  /* put sqrt times X (or X times sqrtt here) into XSave then move it to X */\n  /* becuase X here is really Xt */\n  /* but the sqrt is transposed above .... */\n  for (i=1; i&lt;=XCnt; i++) {\n    for (j=1; j&lt;=VectLen; j++) {\n      XSaveof(i,j) = 0;\n      for (k=1; k&lt;=VectLen; k++) {\n        XSaveof(i,j) += Xof(i,k) * Cholof(k,j);\n      }\n    }\n  }\n  for (i=1; i&lt;=XCnt; i++) for (j=1; j&lt;=VectLen; j++) \n  Xof(i,j) = XSaveof(i,j) * sqrt((double)(XCnt-1)); /* make C near I (est = I)*/\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Form_XJ()\n/* put rows in XJ corresponding to the J set indexes */\n/* note that the indicator set is zero based; also note row data vectors*/\n{\n  int Xrow, XJrow, col;                /* to loop */\n\n  XJrow = 1;\n  for (Xrow = 1; Xrow &lt;= XCnt; Xrow++) {\n    if (*(JBits+Xrow-1)) {\n      for (col = 1; col &lt;= VectLen; col++)\n        XJof(XJrow, col) = Xof(Xrow, col);\n      /* the row index is in the J set */\n      XJrow++;\n    }\n  }\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Compute_XBarJ(const int JCnt)\n/* compute XBarJ values (observations are \"row\" vectors) */\n/* JCnt is the size of the sub-sample */\n/* very simple */\n{\n  int row, col;                   /* to loop */\n# define XBCOL *(XBarJ+col-1)   /* typing aid */\n\n  for (col=1; col&lt;=VectLen; col++) {\n    XBCOL = XJof(1,col);\n    for (row=2; row&lt;=JCnt; row++) XBCOL += XJof(row,col);\n    XBCOL = XBCOL / (JCnt);\n  }\n#undef XBCOL\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Dump_XBarJ(char *msg)\n/* display the estimate of the center */\n{\n    int col;                /* to loop */\n\n    printf(\"Dump of Mean for current J set: %s\\n\",msg);\n    for (col=1; col &lt;= VectLen; col++) printf(\"  %E\\n\", XBarJof(col));\n}\n\n/*-------------------------------------------------------------------------*/\nvoid Form_C(const int JCnt)\n/* form the covariance matrix for XJ */\n/* JCnt is the size of the sub-sample */\n\n{\n  int i, j;                  /* current cell in C */\n  int k;                     /* to loop through samples */\n\n  for (i=1; i&lt;=VectLen; i++) {\n    for (j=1; j&lt;=i; j++) {\n      Cof(i,j) = 0;\n      for (k=1; k&lt;=JCnt; k++) {\n        Cof(i,j) += (XJof(k,i) - XBarJof(i))\n        * (XJof(k,j) - XBarJof(j));\n      }\n      Cof(i,j) = Cof(i,j) / (double)(JCnt - 1);\n    }\n  }\n  for (i=1; i&lt;=VectLen;i++) for (j=i+1; j&lt;=VectLen;j++) Cof(i,j) = Cof(j,i);\n}\n\n\n/*--------------------------------------------------------------------------*/\nvoid Compute_Distance_Vector()\n/* compute a squared distance vector (called SqResiduals) for the current C_1\n and sub-sample\n*/\n{\n  double rowsum;            /* to accumulate rightmost mult first */\n  int i;                    /* index into vector being formed */\n  int row, col;             /* indexes for vector matrix mult. */\n            /* (row and col refer to c-1) */\n\n  for (i=1; i&lt;=XCnt; i++) {\n    *(SqResiduals+i-1) = 0.;\n    for (row = 1; row &lt;= VectLen; row++) {\n     rowsum = 0;\n     for (col = 1; col &lt;= VectLen; col++) {\n       rowsum += (Xof(i,col) - XBarJof(col)) * C_1of(row,col);\n     }\n     *(SqResiduals+i-1) += rowsum * (Xof(i,row) - XBarJof(row));\n    }\n  }\n}\n\n/*------------------------------------------------------------------*/\nvoid Generate_Permutation(int N, int *p)\n/* generate permutation of length N in p */\n/* p is zero based, but the permutation is not */\n{\n  int i,j;         /* to loop */\n  int lspot;         /* offset in l */\n  int *FullList;       /* unpermuted */\n  int *l;          /* left to be used */\n\n  FullList = malloc(N * sizeof(int));\n  ALLCHK(FullList)\n  for (i=0; i&lt;N; i++) *(FullList+i) = i+1;\n  l = malloc(N * sizeof(int));\n  ALLCHK(l)\n\n  memcpy(l, FullList, sizeof(int)*N);\n  for (i=0; i &lt; N; i++) {\n    lspot = (int)(URan(&amp;seed) * (N - i));\n    *(p+i) = *(l+lspot);\n    for (j=lspot; j&lt;N-i; j++) *(l+j) = *(l+j+1);\n  }\n  free(l); free(FullList);\n}\n\n/**************************************************************************/\nvoid main()\n{\n  FILE *f;           /* to update seed file */\n  int i,j,k, row, col; /* loop indexes (cannablized code)*/\n  int *Permutation;\n  int JCnt;   /* number in basis */\n  double Det; /* to ignore the determinant...*/\n\n  printf(BANNER);\n  Load_Parms();\n  Make_Room();\n  Permutation = malloc(XCnt * sizeof(int)); ALLCHK(Permutation)\n  Generate_Data();\n  Pollute();      \n  Standardize_X();\n  JCnt = XCnt-PollCnt;\n  for (i=0; i&lt;JCnt; i++) *(JBits+i) = 1;\n  for (i=JCnt; i&lt;XCnt; i++) *(JBits+i) = 0;\n  Form_XJ();\n  Compute_XBarJ(JCnt);\n  Form_C(JCnt);\n  InvertC(C, VectLen, &amp;Det);\n\n  memcpy(XSave, X, XCnt * VectLen * sizeof(double));\n  /* randomize the rows of X to make X working */\n  /* column major is a pain....*/\n  Generate_Permutation(XCnt, Permutation);\n  for (j=1; j&lt;=XCnt; j++) for (k=1; k&lt;=VectLen; k++) \n      Xof(j,k) = XSaveof((*(Permutation+j-1)),k);\n  Compute_Distance_Vector();\n  Write_Data();\n  if (!(f=fopen(STATSFILE,\"w\"))) {\n    Give_Info();\n    printf(\"Could not open %s for write\\n\",STATSFILE);\n    exit(1);\n  }\n  fprintf(f,BANNER);\n  fprintf(f,\"Robust Mean:\\n\");                                         \n  for (col=1; col &lt;= VectLen; col++) fprintf(f,\"  %E\\n\", XBarJof(col));\n  fprintf(f,\"Robust Mahalonobis distances\\n\");\n  for (row=0; row&lt;XCnt; row++)\n     fprintf(f,\"point %4d: %.4E\\n\", row+1, *(SqResiduals+row));\n  fclose(f);\n  if ((f = fopen(SEEDFILE,\"w\")) == NULL) {\n      printf(\"Could not open %s for write\\n\",SEEDFILE);\n      exit(1);\n  }\n  fprintf(f,\"%ld\\n\",seed);\n  fclose(f);\n  printf(\"done.\\n\");\n  printf(\"Parameters read from %s; seed file, %s, read and updated\\n\",\n           PARMSFILE, SEEDFILE);\n  printf(\"Data is in %s, statistics are in %s\\n\",DATAFILE, STATSFILE);\n}\n</code></pre>\n\n<hr>\n\n<p>Here is the <code>GEN.PRM</code>.</p>\n\n<pre><code>10 200 0.25 2 1\n</code></pre>\n\n<hr>\n\n<p>Here is the  <code>SEED.DAT</code>.</p>\n\n<hr>\n\n<pre><code>1103854129\n</code></pre>\n\n<p><strong>Any lead would be appreciate!</strong></p>\n"}, {"tags": ["c", "pointers", "syntax", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478074511, "post_id": 40375188, "comment_id": 68002876, "body": "Welcome to Stack Overflow! <a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478074634, "post_id": 40375188, "comment_id": 68002926, "body": "The first is an assignment to <code>p</code>. The second is an initialization of <code>p</code>. The end result is the same, but there is a semantic difference."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1478075147, "post_id": 40375188, "comment_id": 68003168, "body": "You did understand that this question is unrelated to <code>malloc</code>."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1478075320, "post_id": 40375188, "comment_id": 68003235, "body": "You can write <code>int *p = malloc(sizeof(*p))</code> instead, to avoid using <code>sizeof(int)</code> and typecast <code>(int*)</code>.However, in response to your actual question, there is no significant difference between those two statements. You can use either."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1478076294, "post_id": 40375188, "comment_id": 68003677, "body": "@RoadRunner Since <code>sizeof</code> is not a function, the parentheses can be dropped whenever the argument is not a type name. So, it can be <code>int *p = malloc(sizeof *p);</code>."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1478079651, "post_id": 40375188, "comment_id": 68005503, "body": "Yeah that is true @unwind. Probably the best way to do it."}], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478077853, "post_id": 40375224, "comment_id": 68004453, "body": "I don&#39;t get this: <i>in case using the first style, consider initializing the pointer to NULL to prevent accidental use of the pointer before the assignment</i>, OP is not using <code>realloc</code> (there is no problem using <code>malloc</code> with an uninitialized pointer)."}, {"owner": {"reputation": 62488, "user_id": 45249, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/81039d357ce18bee9dd8fac6c1c56290?s=128&d=identicon&r=PG", "display_name": "mouviciel", "link": "https://stackoverflow.com/users/45249/mouviciel"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 2, "creation_date": 1478078211, "post_id": 40375224, "comment_id": 68004675, "body": "@KeineLust: This is a general coding guideline. Usually programs involving pointers and malloc() are more complex and mistakes may arise."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478080083, "post_id": 40375224, "comment_id": 68005740, "body": "@KeineLust just to clear up, by saying <i>use</i>, i meant <i>defererence</i>. Any better?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478080641, "post_id": 40375224, "comment_id": 68006114, "body": "@SouravGhosh, no, is fine, I&#39;ve misreaded the answer, sorry :("}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 4, "last_activity_date": 1478075479, "last_edit_date": 1495535387, "creation_date": 1478074627, "answer_id": 40375224, "question_id": 40375188, "link": "https://stackoverflow.com/questions/40375188/use-of-malloc-in-c-programing/40375224#40375224", "title": "Use of malloc in C programing", "body": "<ul>\n<li><p>The first snippet is two-step, defining a pointer and then, <a href=\"https://en.wikipedia.org/wiki/Assignment_(computer_science)\" rel=\"nofollow noreferrer\"><strong>assigning</strong></a> a <em>valid<sup>**</sup></em> value to the pointer.</p></li>\n<li><p>The second snippet declares and <a href=\"https://en.wikipedia.org/wiki/Initialization_(programming)\" rel=\"nofollow noreferrer\"><strong>initializes</strong></a> the pointer via the call to <code>malloc()</code> in a single step.</p></li>\n</ul>\n\n<p>In effect, end results of both the snippet are same. It's more about coding standard guidelines for which one to use. </p>\n\n<p>One suggestion though, in case using the first style, consider initializing the pointer to <code>NULL</code> to prevent accidental use of the pointer <em>before</em> the assignment.</p>\n\n<p>That said, <a href=\"https://stackoverflow.com/q/605845/2173917\">please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>.</p>\n\n<hr>\n\n<p>** [Note]: provided, <code>malloc()</code> success.</p>\n"}], "owner": {"reputation": 7, "user_id": 7103404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aff2290cddc923427c8698c5e530e4ea?s=128&d=identicon&r=PG&f=1", "display_name": "rdx1994", "link": "https://stackoverflow.com/users/7103404/rdx1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478075479, "creation_date": 1478074481, "last_edit_date": 1478075220, "question_id": 40375188, "link": "https://stackoverflow.com/questions/40375188/use-of-malloc-in-c-programing", "title": "Use of malloc in C programing", "body": "<p>What is the difference between following snippets of code?</p>\n\n<pre><code>int main()\n{\n int *p;\n p= (int*)malloc(sizeof(int));\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>int main()\n{ \n int *p = (int*)malloc(sizeof(int));\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478074413, "post_id": 40375096, "comment_id": 68002833, "body": "You could use <code>fopen</code> instead of <code>open</code> + <code>fdopen</code>. Also <code>clang</code> gave me a bunch of warnings about how you&#39;re using <code>open</code>."}, {"owner": {"reputation": 893, "user_id": 3893016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6F0u.jpg?s=128&g=1", "display_name": "Insane", "link": "https://stackoverflow.com/users/3893016/insane"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478074488, "post_id": 40375096, "comment_id": 68002867, "body": "@Schwern School assignment requirement. Haven&#39;t got far into it though thanks to me messing up operator precedence!"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478074674, "post_id": 40375096, "comment_id": 68002947, "body": "Also, you&#39;re not running with warnings, they have to be turned on: <code>cc -Wall</code>. If your prof didn&#39;t tell you this, shame on them. And I&#39;d recommend using <code>-std=c99</code>, the C99 standard, and avoid getting too used to GNU extensions. And my final piece of advice is to learn <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\">valgrind</a> now."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1478074981, "post_id": 40375096, "comment_id": 68003090, "body": "@Insane as you can imagine, there are <i>hundreds</i> of duplicates of this on this site, but each of them is under such a wide array of usages and divergent titles, it&#39;s difficult to find such duplicates by searching, as you may have found out."}], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478074502, "post_id": 40375166, "comment_id": 68002875, "body": "For this reason it&#39;s best to do the open on one line and the check on another."}, {"owner": {"reputation": 893, "user_id": 3893016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6F0u.jpg?s=128&g=1", "display_name": "Insane", "link": "https://stackoverflow.com/users/3893016/insane"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1478074569, "post_id": 40375166, "comment_id": 68002902, "body": "@Schwern This is what I get for trying to be fancy"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6754053"}, "reply_to_user": {"reputation": 893, "user_id": 3893016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6F0u.jpg?s=128&g=1", "display_name": "Insane", "link": "https://stackoverflow.com/users/3893016/insane"}, "edited": false, "score": 0, "creation_date": 1479913108, "post_id": 40375166, "comment_id": 68759457, "body": "@Insane just always use parantheses"}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 13, "last_activity_date": 1478075130, "last_edit_date": 1478075130, "creation_date": 1478074400, "answer_id": 40375166, "question_id": 40375096, "link": "https://stackoverflow.com/questions/40375096/program-hangs-after-opening-file-with-open-and-fdopen/40375166#40375166", "title": "Program hangs after opening file with open and fdopen", "body": "<p>The expression</p>\n\n<pre><code>file_descriptor = open(argv[1], O_RDWR) == -1\n</code></pre>\n\n<p>does not work as you expect it to, because the equality operator <code>==</code> have higher <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\"><em>precedence</em></a> than the assignment operator. That means the expression is more like</p>\n\n<pre><code>file_descriptor = (open(argv[1], O_RDWR) == -1)\n</code></pre>\n\n<p>which means your <code>file_descriptor</code> will be either <code>0</code> or <code>1</code> depending on how the comparison went.</p>\n\n<p>You need to use parentheses for the assignment:</p>\n\n<pre><code>(file_descriptor = open(argv[1], O_RDWR)) == -1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 893, "user_id": 3893016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6F0u.jpg?s=128&g=1", "display_name": "Insane", "link": "https://stackoverflow.com/users/3893016/insane"}, "edited": false, "score": 0, "creation_date": 1478074752, "post_id": 40375242, "comment_id": 68002987, "body": "This is really good to know too."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 2, "creation_date": 1478074764, "post_id": 40375242, "comment_id": 68002996, "body": "Please consider this answer as a comment because it is not a solution or enhancement to the already posted answer."}], "tags": [], "owner": {"reputation": 2463, "user_id": 293494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74d8cee09990f8002c7b372c639e28bb?s=128&d=identicon&r=PG", "display_name": "mkj", "link": "https://stackoverflow.com/users/293494/mkj"}, "is_accepted": false, "score": 6, "last_activity_date": 1478074714, "creation_date": 1478074714, "answer_id": 40375242, "question_id": 40375096, "link": "https://stackoverflow.com/questions/40375096/program-hangs-after-opening-file-with-open-and-fdopen/40375242#40375242", "title": "Program hangs after opening file with open and fdopen", "body": "<p>To add to the other answer. It's \"hanging\" because the bug causes it actually to read standard input (file descriptor 0). Try typing something and it will read it.</p>\n"}], "owner": {"reputation": 893, "user_id": 3893016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6F0u.jpg?s=128&g=1", "display_name": "Insane", "link": "https://stackoverflow.com/users/3893016/insane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1198, "favorite_count": 0, "closed_date": 1510785111, "accepted_answer_id": 40375166, "answer_count": 2, "score": 4, "last_activity_date": 1478075130, "creation_date": 1478074172, "question_id": 40375096, "link": "https://stackoverflow.com/questions/40375096/program-hangs-after-opening-file-with-open-and-fdopen", "closed_reason": "Duplicate", "title": "Program hangs after opening file with open and fdopen", "body": "<p>I'm using <code>open()</code> with <code>O_RDWR</code> and then using the descriptor in <code>fdopen()</code> with <code>\"r+\"</code>. I check that the file exists first with <code>access()</code>, and check for <code>open()</code> returning -1 then check that the <code>FILE *fp</code> set from <code>fdopen()</code> isn't <code>NULL</code>.</p>\n\n<p>Now whenever I use any function such as <code>fgets()</code> or <code>fgetc()</code> with <code>fp</code> the program hangs in my terminal. I get no compiler warnings. Any ideas?</p>\n\n<p><img src=\"https://i.stack.imgur.com/oZIiG.gif\" alt=\"\"></p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char **argv) {\n    char buffer[512];\n    int file_descriptor;\n    FILE *file;\n\n    if (argc != 2) {\n        puts(\"ERROR: Missing argument\");\n        exit(0);\n    }\n    else if (access(argv[1], F_OK) == -1) { // Check if file exists\n        puts(\"ERROR: File does not exist\");\n        exit(0);\n    } else if (file_descriptor = open(argv[1], O_RDWR) == -1) { // Check for open() failure\n        puts(\"ERROR: Unable to open file using open()\");\n        exit(0);\n    }\n\n    file = fdopen(file_descriptor, \"r+\"); // Use descriptor\n\n    if (file == NULL) {\n        puts(\"ERROR: Unable to open file using fdopen()\");\n        fclose(file);\n        exit(0);\n    }\n\n    // fscanf(file, \"%c\", stdout); // Hangs\n    // fgets(buffer, sizeof(buffer), file); // Hangs\n    printf(\"%c\", fgetc(file)); // Hangs\n\n    fclose(file);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1478072890, "post_id": 40374782, "comment_id": 68002200, "body": "<a href=\"http://stackoverflow.com/q/605845/2173917\">Please see this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 3, "creation_date": 1478072901, "post_id": 40374782, "comment_id": 68002209, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 4, "creation_date": 1478072912, "post_id": 40374782, "comment_id": 68002214, "body": "Read about <a href=\"http://en.cppreference.com/w/c/string/byte/strcmp\" rel=\"nofollow noreferrer\">strcmp</a>"}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 2, "last_activity_date": 1478073701, "creation_date": 1478073701, "answer_id": 40374977, "question_id": 40374782, "link": "https://stackoverflow.com/questions/40374782/how-to-compare-two-strings-whichboth-of-them-are-stored-in-char-double-pointe/40374977#40374977", "title": "How to compare two strings, which(both of them) are stored in char double pointer?", "body": "<p>You can use <code>strcmp</code> in a loop:</p>\n\n<pre><code>for (i = 0; i &lt; n; i++) {\n    if (strcmp(magazine[i], ransom[i]) == 0) {\n        ...\n    }\n}\n</code></pre>\n\n<p>But if (as the title suggests) <code>ransom</code> is declared as a pointer to pointer to <code>char</code>:</p>\n\n<pre><code>char **ransom;\n</code></pre>\n\n<p>you don't want the dereference operator <code>*</code></p>\n\n<pre><code>*ransom = malloc(sizeof(char*) * n);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>ransom = malloc(sizeof(char*) * n);\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6236885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f2a6d933b52033eb3aea9b800cfdaf?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Upadhyay", "link": "https://stackoverflow.com/users/6236885/piyush-upadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1478074058, "creation_date": 1478072803, "last_edit_date": 1478074058, "question_id": 40374782, "link": "https://stackoverflow.com/questions/40374782/how-to-compare-two-strings-whichboth-of-them-are-stored-in-char-double-pointe", "title": "How to compare two strings, which(both of them) are stored in char double pointer?", "body": "<pre><code>char ** magazine;\nchar ** ransom;\n*magazine = malloc(sizeof(char*) * m);\nfor(int magazine_i = 0; magazine_i &lt; m; magazine_i++){\n   magazine[magazine_i] = (char *)malloc(10240 * sizeof(char));\n   scanf(\"%s\",magazine[magazine_i]);\n}\n*ransom = malloc(sizeof(char*) * n);\nfor(int ransom_i = 0; ransom_i &lt; n; ransom_i++){\n   ransom[ransom_i] = (char *)malloc(10240 * sizeof(char));\n   scanf(\"%s\",ransom[ransom_i]);\n}\n</code></pre>\n\n<p>Now I want to compare the string stored in ransom to magazine. How it can be done? Please help</p>\n"}, {"tags": ["c", "linux-kernel", "printk"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1478073188, "post_id": 40374685, "comment_id": 68002324, "body": "I can&#39;t see any <code>modprobe</code> that load the compiled module...."}, {"owner": {"reputation": 11, "user_id": 5982936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc06ea583a2755ebd493deed42af66b6?s=128&d=identicon&r=PG&f=1", "display_name": "arioglu", "link": "https://stackoverflow.com/users/5982936/arioglu"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478079287, "post_id": 40374685, "comment_id": 68005316, "body": "I have edited the output. I added <code>sudo modprobe modpcb</code> to my Makefile. That return with error and then I used <code>insmod</code> instead still cannot load module."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1478079374, "post_id": 40374685, "comment_id": 68005357, "body": "Well, so your module is not loaded and nothing can be seen into <code>dsmeg</code>. What&#39;s the error?"}, {"owner": {"reputation": 11, "user_id": 5982936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc06ea583a2755ebd493deed42af66b6?s=128&d=identicon&r=PG&f=1", "display_name": "arioglu", "link": "https://stackoverflow.com/users/5982936/arioglu"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478079959, "post_id": 40374685, "comment_id": 68005667, "body": "Actually I don&#39;t know if it is an error. I expected to see what I have written in <code>printk</code>. You can see the latest output."}, {"owner": {"reputation": 1588, "user_id": 3143086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be427f04d51318a211a8946c9101dba?s=128&d=identicon&r=PG&f=1", "display_name": "ruthafjord", "link": "https://stackoverflow.com/users/3143086/ruthafjord"}, "edited": false, "score": 0, "creation_date": 1478237005, "post_id": 40374685, "comment_id": 68081095, "body": "Did you drop the log level so info logs are visible?"}, {"owner": {"reputation": 11, "user_id": 5982936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc06ea583a2755ebd493deed42af66b6?s=128&d=identicon&r=PG&f=1", "display_name": "arioglu", "link": "https://stackoverflow.com/users/5982936/arioglu"}, "edited": false, "score": 0, "creation_date": 1478433765, "post_id": 40374685, "comment_id": 68143759, "body": "I didn&#39;t change anything related with it."}], "owner": {"reputation": 11, "user_id": 5982936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc06ea583a2755ebd493deed42af66b6?s=128&d=identicon&r=PG&f=1", "display_name": "arioglu", "link": "https://stackoverflow.com/users/5982936/arioglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 944, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478079954, "creation_date": 1478072441, "last_edit_date": 1478079954, "question_id": 40374685, "link": "https://stackoverflow.com/questions/40374685/printk-process-information", "title": "Printk process information", "body": "<p>I have the following module which I tried to print PCB information. However I couldn't figure out the output. It was supposed to print process related data. I appreciate any help.</p>\n\n<p>modpcb.c</p>\n\n<pre><code>#include &lt;linux/errno.h&gt;\n#include &lt;linux/sched.h&gt;\n#include &lt;linux/fs_struct.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/init.h&gt;\n\nvoid retrieve(struct task_struct *task) {\n\n    struct task_struct *ts = current;\n     struct list_head *list;\n\n    if(task-&gt;state == 1)\n        printk(KERN_INFO \"Process Name%s\", ts-&gt;comm);\n        printk(KERN_INFO \"Process Name%lu\", ts-&gt;min_flt);\n        printk(KERN_INFO \"Process Name%lu\", ts-&gt;maj_flt);\n        printk(KERN_INFO \"Process Name%li\", ts-&gt;utime);\n        printk(KERN_INFO \"Process Name%li\", ts-&gt;stime);\n        printk(KERN_INFO \"Process Name%d\", ts-&gt;pid);\n        printk(KERN_INFO \"Process Name%u\", ts-&gt;flags);\n        printk(KERN_INFO \"Process Name%u\", ts-&gt;start_time);\n        printk(KERN_INFO \"Process Name%ld\", ts-&gt;state);\n\n    list_for_each(list, &amp;current-&gt;children) {\n        ts = list_entry(list, struct task_struct, sibling);\n        retrieve(ts);\n    }\n\n}\n\nstatic int __init pcbinfo_init(void)\n{\n    struct task_struct *node = current;\n\n    printk(KERN_INFO \"Starting module...\\n\");\n    for(;node-&gt;pid != 1; node = node-&gt;parent)\n\n    retrieve(node);\n    return 0;\n}\n\nstatic void __exit pcbinfo_cleanup(void)\n{\n    printk(KERN_INFO \"Cleaning module...\\n\");\n}\nmodule_init(pcbinfo_init);\nmodule_exit(pcbinfo_cleanup);\n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"arioglu\");\nMODULE_DESCRIPTION(\"Prints PCB info\");\n</code></pre>\n\n<p>Makefile</p>\n\n<pre><code>  obj-m += modpcb.o\n  all:\n      make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\n      dmesg | tail\n      sudo insmod modpcb.ko\n  clean:\n      make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n</code></pre>\n\n<p>EDIT:Output. Error is gone by updating Makefile with insmod.</p>\n\n<pre><code>make -C /lib/modules/4.4.0-45-generic/build M=/home/emre-ubuntu/Desktop/21202135/finalB modules\nmake[1]: Entering directory '/usr/src/linux-headers-4.4.0-45-generic'\n  Building modules, stage 2.\n  MODPOST 1 modules\nmake[1]: Leaving directory '/usr/src/linux-headers-4.4.0-45-generic'\ndmesg | tail\n[  926.839624] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)\n[  926.839626] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)\n[  926.839628] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (N/A)\n[  926.839631] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)\n[  926.839633] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)\n[  926.839635] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)\n[  926.839637] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)\n[  926.840351] wlo1: associate with 04:18:d6:19:b7:61 (try 1/3)\n[  926.843708] wlo1: RX AssocResp from 04:18:d6:19:b7:61 (capab=0x421 status=0 aid=21)\n[  926.863483] wlo1: associated\nsudo insmod modpcb.ko\n</code></pre>\n"}, {"tags": ["c", "struct", "types", "polipo"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1478069586, "post_id": 40373971, "comment_id": 68000843, "body": "You need to search through the .h files. A grep tool is useful in such situations. Many IDE&#39;s offer this feature."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1478069653, "post_id": 40373971, "comment_id": 68000870, "body": "It depends on your system and environment. If you&#39;re using an IDE it usually have functionality to find definitions built-in. If you&#39;re using the command-line then there are commands that can be used to find text in a set of files (the name of the command depends on the operating system you use)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1478070507, "post_id": 40373971, "comment_id": 68001192, "body": "Compile with <code>-D_Atom=123</code> and see where the first error is"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 4269040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/896622723b1d88b183ee1e2e4191deee?s=128&d=identicon&r=PG&f=1", "display_name": "tuhin panda", "link": "https://stackoverflow.com/users/4269040/tuhin-panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1478069848, "creation_date": 1478069848, "answer_id": 40374060, "question_id": 40373971, "link": "https://stackoverflow.com/questions/40373971/how-to-find-out-where-a-c-struct-is-declared/40374060#40374060", "title": "How to find out where a C struct is declared?", "body": "<p>If you are working on Linux, then grep the <em>struct</em> keyword in the current directory to see the definition of it in the file.</p>\n"}, {"tags": [], "owner": {"reputation": 13431, "user_id": 7051394, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/035a36a4ffaec4c1c1efd85e34181ace?s=128&d=identicon&r=PG&f=1", "display_name": "Right leg", "link": "https://stackoverflow.com/users/7051394/right-leg"}, "is_accepted": false, "score": 1, "last_activity_date": 1478070730, "last_edit_date": 1478070730, "creation_date": 1478070213, "answer_id": 40374146, "question_id": 40373971, "link": "https://stackoverflow.com/questions/40373971/how-to-find-out-where-a-c-struct-is-declared/40374146#40374146", "title": "How to find out where a C struct is declared?", "body": "<p>Unfortunately, as far as I know, you cannot do this <em>from the source code</em> in C.<br/>\nIf you are working on Linux, and if your sources are all in the <code>src/</code> directory:</p>\n\n<pre><code>$ find src/ -name \".*\\.h\" | xargs grep -e \"struct _Atom\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 6034019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874b7fc397327fa55d2a913ef29be3c0?s=128&d=identicon&r=PG&f=1", "display_name": "saygins", "link": "https://stackoverflow.com/users/6034019/saygins"}, "is_accepted": true, "score": 2, "last_activity_date": 1478072251, "creation_date": 1478072251, "answer_id": 40374634, "question_id": 40373971, "link": "https://stackoverflow.com/questions/40373971/how-to-find-out-where-a-c-struct-is-declared/40374634#40374634", "title": "How to find out where a C struct is declared?", "body": "<p>you can search <strong>AtomPtr</strong> like <a href=\"https://github.com/jech/polipo/search?utf8=%E2%9C%93&amp;q=atomptr\" rel=\"nofollow noreferrer\">this</a> and see where AtomPtr is defined</p>\n\n<pre><code>typedef struct _Atom {\n    unsigned int refcount;\n    struct _Atom *next;\n    unsigned short length;\n    char string[1];\n} AtomRec, *AtomPtr;\n</code></pre>\n"}], "owner": {"reputation": 2477, "user_id": 1561108, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f8a4712a459f3b9dc9ee2538309ae03d?s=128&d=identicon&r=PG", "display_name": "user1561108", "link": "https://stackoverflow.com/users/1561108/user1561108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 1, "accepted_answer_id": 40374634, "answer_count": 3, "score": 0, "last_activity_date": 1478072251, "creation_date": 1478069402, "question_id": 40373971, "link": "https://stackoverflow.com/questions/40373971/how-to-find-out-where-a-c-struct-is-declared", "title": "How to find out where a C struct is declared?", "body": "<p>I am trying to add logging to the web proxy Polipo and as part of this need to log the url request in the following function <a href=\"https://github.com/jech/polipo/blob/ab52932c20638491f696e256020ad6a20aad7939/client.c#L707\" rel=\"nofollow noreferrer\">following line</a>:</p>\n\n<pre><code>httpClientRequest(HTTPRequestPtr request, AtomPtr url)\n</code></pre>\n\n<p>From compilation I see that AtomPtr is a struct of type <code>_Atom</code> but I cannot find where this is defined so that I can reference the text of the url in a log statement. What is the canonical method of looking up struct definitions in C code?</p>\n"}, {"tags": ["c", "unix", "fork"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1478069187, "post_id": 40373895, "comment_id": 68000668, "body": "Because you keep forking in both the parent <i>and</i> the child processes. Should maybe the child process <i>exit</i> when it&#39;s done?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1478069270, "post_id": 40373895, "comment_id": 68000701, "body": "Also you really should <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html\" rel=\"nofollow noreferrer\"><code>wait</code></a> for the child processes, or you will have zombie processes that gets orphaned when the parent process exits."}, {"owner": {"reputation": 11, "user_id": 7103081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa4c0da3968b418f2996093241fb7fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jeans", "link": "https://stackoverflow.com/users/7103081/jeans"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478070890, "post_id": 40373895, "comment_id": 68001337, "body": "@Someprogrammerdude thanks for the quick reply, but now i&#39;m having trouble finding out where the wait and exit should be placed.. sorry this is pretty new to me."}, {"owner": {"reputation": 11, "user_id": 7103081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa4c0da3968b418f2996093241fb7fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jeans", "link": "https://stackoverflow.com/users/7103081/jeans"}, "reply_to_user": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 0, "creation_date": 1478072238, "post_id": 40373895, "comment_id": 68001931, "body": "and the exit() at the end of the block after? @Karthikeyan.R.S"}, {"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 0, "creation_date": 1478072389, "post_id": 40373895, "comment_id": 68001991, "body": "Apologize @Jeans , You should add the <code>exit</code> in else if block and <code>wait</code> before or after <code>usleep</code>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1478072838, "post_id": 40373895, "comment_id": 68002178, "body": "Read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\">advancedlinuxprogramming.com</a>"}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1478099415, "post_id": 40373895, "comment_id": 68018541, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/11132868/fork-branches-more-than-expected\">fork() branches more than expected?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1478072868, "last_edit_date": 1478072868, "creation_date": 1478072524, "answer_id": 40374708, "question_id": 40373895, "link": "https://stackoverflow.com/questions/40373895/why-does-my-forking-program-double-in-size-after-each-fork/40374708#40374708", "title": "Why does my forking program double in size after each fork?", "body": "<p>A <code>fork</code> is generally of this form.</p>\n\n<pre><code>    int pid = fork();\n\n    if( pid == -1 ) { /* error */\n        fprintf(stderr, \"Error forking: %s\", strerror(errno));\n        exit(1);\n    }\n    else if( pid == 0 ) { /* child */\n        puts(\"Child\");\n        exit(0);\n    }\n\n    /* Parent */\n    printf(\"Forked %d\\n\", pid);\n</code></pre>\n\n<p>Note that the child has to exit else it will continue executing the rest of the program. Usually you have the child process run a function and exit.</p>\n\n<p>The other part is the main program should <a href=\"http://www.tutorialspoint.com/unix_system_calls/wait.htm\" rel=\"nofollow noreferrer\"><code>wait</code></a> until all child processes are complete, else you get <a href=\"https://en.wikipedia.org/wiki/Zombie_process\" rel=\"nofollow noreferrer\">zombies</a>. Usually a loop calling <code>wait()</code> until there's no more children.</p>\n\n<pre><code>int wpid;\nint wstatus;\nwhile( (wpid = wait(&amp;wstatus)) != -1 ) {\n    printf(\"Child %d exited with status %d\\n\", wpid, wstatus);\n}\n</code></pre>\n\n<p>Put it all together and here's how you fork and wait for 5 child processes.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main() {\n    int max_children = 5;\n\n    for( int i = 0; i &lt; max_children; i++ ) {\n        int pid = fork();\n\n        if( pid == -1 ) { /* error */\n            fprintf(stderr, \"Error forking: %s\", strerror(errno));\n        }\n        else if( pid == 0 ) { /* child */\n            puts(\"Child\");\n            exit(0);\n        }\n\n        /* Parent */\n        printf(\"Forked %d\\n\", pid);\n    }\n\n    int wpid;\n    int wstatus;\n    while( (wpid = wait(&amp;wstatus)) != -1 ) {\n        printf(\"Child %d exited with status %d\\n\", wpid, wstatus);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7103081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa4c0da3968b418f2996093241fb7fe?s=128&d=identicon&r=PG&f=1", "display_name": "Jeans", "link": "https://stackoverflow.com/users/7103081/jeans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478072868, "creation_date": 1478069061, "last_edit_date": 1478069299, "question_id": 40373895, "link": "https://stackoverflow.com/questions/40373895/why-does-my-forking-program-double-in-size-after-each-fork", "title": "Why does my forking program double in size after each fork?", "body": "<p>So i just want to create a simple forking program that forks 5 children at the rate of 1 per every half second and then displays the date and time when each fork is complete.. so this is the jist of the code</p>\n\n<pre><code>int count = 1;\nwhile(count &lt;= 5){\n    int kid = fork();\n\n    if(kid == -1){\n        perror(\"error in fork\");\n        exit(0);\n    } else if(!kid){\n        numbytes = read(sockfd, buf, sizeof(buf)-1);\n        buf[numbytes] = '\\0';\n        printf(\"%s\\n\",buf);\n    }\n    count++;\n    usleep(500000); //create per every half second, 500000 = 0.5sec\n    close(sockfd);\n\n}\n\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>which I thought should be simple enough, but instead of forking 5 times it doubles after each fork.. so it forks 1 time, then 2, then 4, 8.. etc.</p>\n\n<p>Help?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478068748, "post_id": 40373806, "comment_id": 68000498, "body": "unchecked scanf return value... I smell danger...."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1478068802, "post_id": 40373806, "comment_id": 68000509, "body": "Please don;t break the formatting. Read the posting guides."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478068895, "post_id": 40373806, "comment_id": 68000546, "body": "Are you supposed to enter <i>numbers</i> for the &quot;name&quot;? Why do you need to enter name and prices three times? Why aren&#39;t you telling the user that he or she needs to enter three names and prices?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1478069016, "post_id": 40373806, "comment_id": 68000605, "body": "Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Just saying &quot;is not working&quot; is not enough. <b><i>How</i></b> is it &quot;not working&quot;? Have you checked what <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> returns? Have you used a debugger to step through the code? That information should be in the question body."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1478074481, "post_id": 40373806, "comment_id": 68002865, "body": "I don&#39;t understand what this code is trying to do. Please clarify what you want to achieve with a sample output."}], "answers": [{"comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478071205, "post_id": 40374306, "comment_id": 68001474, "body": "Why not? Can you elaborate this?"}, {"owner": {"reputation": 1, "user_id": 7103065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10c1ace5efc4fea1b4eaba717967b98?s=128&d=identicon&r=PG&f=1", "display_name": "anam", "link": "https://stackoverflow.com/users/7103065/anam"}, "edited": false, "score": 0, "creation_date": 1478071691, "post_id": 40374306, "comment_id": 68001700, "body": "just ignore what input is being provided. I wanted to ask that if first if statement gets true then why it dont go to scanf after if block"}, {"owner": {"reputation": 1049, "user_id": 6633483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rWKTg.jpg?s=128&g=1", "display_name": "Vijay S B", "link": "https://stackoverflow.com/users/6633483/vijay-s-b"}, "edited": false, "score": 0, "creation_date": 1478073152, "post_id": 40374306, "comment_id": 68002310, "body": "There are two if blocks. which one you are saying?"}, {"owner": {"reputation": 1049, "user_id": 6633483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rWKTg.jpg?s=128&g=1", "display_name": "Vijay S B", "link": "https://stackoverflow.com/users/6633483/vijay-s-b"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1478075323, "post_id": 40374306, "comment_id": 68003238, "body": "@Keine <a href=\"http://stackoverflow.com/questions/15740024/scanf-asking-twice-for-input-while-i-expect-it-to-ask-only-one\">link</a>"}], "tags": [], "owner": {"reputation": 1049, "user_id": 6633483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rWKTg.jpg?s=128&g=1", "display_name": "Vijay S B", "link": "https://stackoverflow.com/users/6633483/vijay-s-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1478071004, "creation_date": 1478071004, "answer_id": 40374306, "question_id": 40373806, "link": "https://stackoverflow.com/questions/40373806/why-scanf-after-the-if-block-do-not-work-it-just-displays-press-1-to-enter-agai/40374306#40374306", "title": "Why scanf after the if block do not work it just displays &quot;press 1 to enter again:&quot; and do not take input again", "body": "<pre><code>scanf(\"%d %d\\n %d %d\\n %d %d\\n\",&amp;name1,&amp;price1,&amp;name2,&amp;price2,&amp;name3,&amp;price3);\n</code></pre>\n\n<p>Don't use escape characters in scanf function call. </p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7075440, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9Wym4af3J8/AAAAAAAAAAI/AAAAAAAAABg/YvnfBkksokE/photo.jpg?sz=128", "display_name": "guoqiang Wei", "link": "https://stackoverflow.com/users/7075440/guoqiang-wei"}, "edited": false, "score": 0, "creation_date": 1478074007, "post_id": 40375018, "comment_id": 68002663, "body": "as for why?&lt;\\p&gt;"}, {"owner": {"reputation": 73, "user_id": 7075440, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9Wym4af3J8/AAAAAAAAAAI/AAAAAAAAABg/YvnfBkksokE/photo.jpg?sz=128", "display_name": "guoqiang Wei", "link": "https://stackoverflow.com/users/7075440/guoqiang-wei"}, "edited": false, "score": 0, "creation_date": 1478074115, "post_id": 40375018, "comment_id": 68002708, "body": "this is because in scanf function ,the \\n and space and the tabs ARE seen as blank symbols."}, {"owner": {"reputation": 73, "user_id": 7075440, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9Wym4af3J8/AAAAAAAAAAI/AAAAAAAAABg/YvnfBkksokE/photo.jpg?sz=128", "display_name": "guoqiang Wei", "link": "https://stackoverflow.com/users/7075440/guoqiang-wei"}, "edited": false, "score": 0, "creation_date": 1478074260, "post_id": 40375018, "comment_id": 68002779, "body": "so if you have a \\n in scanf , when you have entered 6 int, it wait for one another symbol to match the space blank causded by the \\n."}, {"owner": {"reputation": 73, "user_id": 7075440, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9Wym4af3J8/AAAAAAAAAAI/AAAAAAAAABg/YvnfBkksokE/photo.jpg?sz=128", "display_name": "guoqiang Wei", "link": "https://stackoverflow.com/users/7075440/guoqiang-wei"}, "edited": false, "score": 0, "creation_date": 1478074435, "post_id": 40375018, "comment_id": 68002844, "body": "and in the input buffer  when the scanf function finish ,there are also a extra symbol, when it runs to another scanf ,the scanf first scan the input buffer ,so cause the error!"}], "tags": [], "owner": {"reputation": 73, "user_id": 7075440, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t9Wym4af3J8/AAAAAAAAAAI/AAAAAAAAABg/YvnfBkksokE/photo.jpg?sz=128", "display_name": "guoqiang Wei", "link": "https://stackoverflow.com/users/7075440/guoqiang-wei"}, "is_accepted": false, "score": 0, "last_activity_date": 1478073883, "creation_date": 1478073883, "answer_id": 40375018, "question_id": 40373806, "link": "https://stackoverflow.com/questions/40373806/why-scanf-after-the-if-block-do-not-work-it-just-displays-press-1-to-enter-agai/40375018#40375018", "title": "Why scanf after the if block do not work it just displays &quot;press 1 to enter again:&quot; and do not take input again", "body": "<p>just delete the last \\n in your scanf \nthe result is :\n<a href=\"https://i.stack.imgur.com/a40lR.png\" rel=\"nofollow noreferrer\">result</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7103065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e10c1ace5efc4fea1b4eaba717967b98?s=128&d=identicon&r=PG&f=1", "display_name": "anam", "link": "https://stackoverflow.com/users/7103065/anam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1478073883, "creation_date": 1478068652, "last_edit_date": 1478068782, "question_id": 40373806, "link": "https://stackoverflow.com/questions/40373806/why-scanf-after-the-if-block-do-not-work-it-just-displays-press-1-to-enter-agai", "title": "Why scanf after the if block do not work it just displays &quot;press 1 to enter again:&quot; and do not take input again", "body": "<p><code>scanf</code> statement after if block is not working can somebody help me please      </p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    main()\n    {\n\n        int input,itemno,input2;\n        int name1,price1,name2,price2,name3,price3;\n        printf(\"enter input:\\n\");\n        scanf(\"%d\", &amp;input);\n        if(input==1)\n        {\n            printf(\"enter number of items:\\n\");\n            scanf(\"%d\",&amp;itemno);\n            if(itemno&lt;=3)\n            {\n                printf(\"enter name and age:\\n\");\n                scanf(\"%d %d\\n %d %d\\n %d %d\\n\",&amp;name1,&amp;price1,&amp;name2,&amp;price2,&amp;name3,&amp;price3);\n            }\n         else\n            printf(\"you can only enter 3 students\");\n     }\n        printf(\"press 1 to enter again: \\n\");\n        scanf(\"%d\",&amp;input2);\n        if(input2==1)\n        {\n            printf(\"hey\");\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "embedded", "distributed", "i2c"], "comments": [{"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 6, "creation_date": 1478068350, "post_id": 40373722, "comment_id": 68000329, "body": "Maybe you tell us what your real problem is so we can help you better."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 2, "creation_date": 1478068906, "post_id": 40373722, "comment_id": 68000550, "body": "&quot;wild idea&quot; is one way to put it. There&#39;s absolutely no way that the benefits of doing this would outweigh the costs."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 2, "creation_date": 1478071019, "post_id": 40373722, "comment_id": 68001392, "body": "Why do you want to do this?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478071167, "post_id": 40373722, "comment_id": 68001456, "body": "Google for &quot;I2C muti master protocol&quot; and look at <a href=\"http://electronics.stackexchange.com/questions/115577/how-does-multimaster-i2c-work-and-its-significance\">this post</a>."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1478071517, "post_id": 40373722, "comment_id": 68001625, "body": "Or another simple way, I can imagine,  is to build up a token ring between 2 MCUs that give the access to the shared resource as <i>time-sharing-if-no needed</i>."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 5, "creation_date": 1478084906, "post_id": 40373722, "comment_id": 68008815, "body": "I guess you don&#39;t know much about I2C. Here&#39;s an analogy to what you&#39;re asking. Cars are usually steered by two front wheels, controlled from a single steering wheel held by a single driver. Your question is like saying you have this wild idea to make the two front wheels each controlled by its own steering wheel, and have two drivers one at each wheel. Now, you want to know, what&#39;s the best way of getting this vehicle to work? is it to add some extra communication channel between the two drivers? How should I do that? I2C is designed to be (relatively) simple - why try to complicate it?"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478092968, "post_id": 40373722, "comment_id": 68013855, "body": "@barny Like your analogy so much I&#39;d rather give a +2, if I could. SDA and SDL have extremely close timing dependencies (clock stretching, collision detection in multi-master operations,...) that I would even consider it impossible to implement properly - Just like your steering... Also, the benefits are similar ;)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1478126918, "post_id": 40373722, "comment_id": 68033890, "body": "So, how do you synchronise the two controllers?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478127015, "post_id": 40373722, "comment_id": 68033930, "body": "@barny: Good analogy. But isn&#39;t making simple things complicated exactly what our industry is heading towards? ;-}"}], "answers": [{"comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1478097937, "post_id": 40381448, "comment_id": 68017413, "body": "But I2C clock stretching means the clock can&#39;t be &#39;free-running&#39; - when SCL is released to float high by the master, the master has to wait for it to actually go high before continuing."}], "tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 0, "last_activity_date": 1479135786, "last_edit_date": 1479135786, "creation_date": 1478094101, "answer_id": 40381448, "question_id": 40373722, "link": "https://stackoverflow.com/questions/40373722/anyone-ever-split-i2c-across-two-microcontrollers/40381448#40381448", "title": "Anyone ever split I2C across two microcontrollers?", "body": "<p>Assuming you have a reason why to do this even, if it is \"for fun\" or \"just because it is there\" (why climb over the mountain when you can go around).</p>\n\n<p>Look at how I2C works.  Both would have to be watching each others signals (or some other method to keep in sync), if you had SDA (The owner of that signal) watching SCL and vice versa.  Look at the waveform requirements, if both start high then SDA drops, the SCL owner sees that and drops SCL, the sda owner sees that and asserts the first bit.  Now we are already in trouble.  If the first bit is a zero the SCL owner doesnt know if SDA has set the bit yet so it cant raise SCL to clock it in.  There would have to be more information.  The SDA and SCL owners would have to agree on some rules, when SCL goes low the SDA owner has to agree to change its state if it is going to, within some window.  SCL has to agree to not change its state until after that window.  Then SDA can see SCL go high then low.  And repeat.  Or go with SCL cannot exceed the max rate for I2C or for this peripheral and SDA lives within that.  SDA can be happy with changing bits up until the ACK, if SCL is within spec for this peripheral and/or I2C then its okay (which is true even without this two owner scheme).  Your real problem comes when you want to stop, how does SCL know that SDA has done what it needed to do and go high and stay high?  So SDA can go high and stay high, and SCL goes back into the mode of waiting for SDA to initiate a start.  You need at least another signal between them that is not part of i2c, and you need this other agreement that SCL goes no faster than X and SDA meets that (cant arbitrarily state SCL goes at the max rate, because maybe SDA cant always keep up with that, maybe the peripheral can but maybe SDA cant, so your system design has to cover that).</p>\n\n<p>Far far, easier just to do it with one owner of both signals.  Technically though it is possible, it doesnt gain you anything other than an interesting system design.  Folks that can scale rock faces have experience over those that just go around the mountain.  </p>\n\n<p>Arguably without a third signal you could have SDA change state twice fast, faster than the I2C clock speed agreed upon.  SCL could see this as the indication that you want to do a stop.  SCL then goes high stays high until it sees SDA go high then go low indicating another start.</p>\n\n<p>Im trying to decide if SCL even has to stay there, can you just use a free running clock for SCL and SDA is the only thing that makes decisions?  Go low, wait for SCL to go high (SDA still has to watch SCL) then go high creating a STOP.  Stay high and you neither create a stop nor a start.  Wait for SCL high then go low, you create a start, watch scl to drive sda through the transaction, create the stop at the right time, I think it would work so long as it doesnt confuse the peripheral's design.  Maybe the spec says something about this, but that is only marginally relevant as with I2C and SPI, often the spec is ignored by the peripherals.  The peripheral in question dominates as that is who you really want to talk to.  So I think the SCL owner can be as dumb as being just a clock source with no other logic behind it.</p>\n"}], "owner": {"reputation": 11, "user_id": 1359730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9108de3093695b6e2311daa2fa0374f2?s=128&d=identicon&r=PG&f=1", "display_name": "hefner", "link": "https://stackoverflow.com/users/1359730/hefner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1479135786, "creation_date": 1478068175, "last_edit_date": 1478072011, "question_id": 40373722, "link": "https://stackoverflow.com/questions/40373722/anyone-ever-split-i2c-across-two-microcontrollers", "title": "Anyone ever split I2C across two microcontrollers?", "body": "<p>So I've got this wild idea to try and split an I2C controller implementation across two microcontrollers. That is, one uC controls the SDA and one uC controls the SCL, and communicate as one I2C device on the bus, master or slave. I'm not trying to just do basic I2C communications here, I want two physically separate controllers to work together as one I2C interface.</p>\n\n<p>Anyone here ever do anything like this who could suggest how I might go about doing it? </p>\n\n<p>I'm assuming my separate SDA and SCL controllers would have to be bit-banged, for starters, but I'm not sure about the rest. What kind of interprocessor communication would you use? SPI at a <em>much</em> higher rate seems like a place to start. How likely is this to work, and what kind of performance could one possibly expect out of such a system? Is it only possible at a few hundred Hz, maybe?</p>\n\n<p>Are there any applications where this sort of thing is commonplace? Different protocols or whatever; the thing I'm wondering about is a hardware communications interface distributed across multiple controllers.</p>\n"}]