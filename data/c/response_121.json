[{"tags": ["c", "fwrite", "scanf"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1493855254, "post_id": 43771730, "comment_id": 74584780, "body": "What are you expecting a non-text file to look like when opened with a text editor? For comparison try opening your program or object files with a text editor."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1493855477, "post_id": 43771730, "comment_id": 74584843, "body": "You&#39;re writing a binary file, not a text file. You&#39;re seeing what the binary representation of numbers looks like when interpreted as text."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 1, "creation_date": 1493860190, "post_id": 43771730, "comment_id": 74585690, "body": "If you want to write the numbers in text, use <code>fprintf()</code>. Writing to files using <code>fwrite()</code> dumps the content of the buffer."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1493869276, "post_id": 43771730, "comment_id": 74587960, "body": "check return value of <code>fscanf</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493880629, "post_id": 43771730, "comment_id": 74592326, "body": "this line: <code>typedef char String[20];</code>  means that every time that the code says &#39;char&#39; it will be replaced with &#39;String[20]`   That is NOT what you want."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493880932, "post_id": 43771730, "comment_id": 74592538, "body": "when calling any of the <code>scanf()</code> family of functions: 1) always check the returned value ( not the parameter values) to assure the operation was successful.  2) when using the &quot;%s&quot; input/format specifier, always include a MAX CHARACTERS modifier that is 1 less than the length of the input buffer so the user cannot overflow the buffer.  Such overflow results in undefined behavior and can lead to a seg fault event."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493881211, "post_id": 43771730, "comment_id": 74592707, "body": "when outputting an error message, it should be output to <code>stderr</code>, not <code>stdout</code>.   When the error indication came from a system, function, also output the message from the system as to why it thinks the error occurred.  The easiest way to do that is: <code>perror( &quot;fopen for read of file failed&quot; );</code>   and generally, that should be followed by the statement: <code>exit( EXIT_FAILURE );</code>   Note: <code>exit()</code> and <code>EXIT_FAILURE</code> are defined in the <code>stdlib.h</code> header filel"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493881584, "post_id": 43771730, "comment_id": 74592974, "body": "since you are writing the students sequentially to the output file, no need to be re-positioning the file pointer, so the call to <code>fseek()</code> is not needed.   The posted code not reading that file so the <code>+</code> is not needed in the call to <code>fopen()</code> mode parameter"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493881836, "post_id": 43771730, "comment_id": 74593111, "body": "when calling <code>fscanf()</code>, always check the returned value (not the parameter values) to assure the operation was successful.  If not successful, be sure to call <code>fclose()</code> on the output file"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493881939, "post_id": 43771730, "comment_id": 74593162, "body": "when calling the function: <code>fscanf()</code> it would be better to have the format string (second parameter) be: <code>&quot;%14s %19s %2d %1d %2lf %1d %19s %5lf %19s %19s&quot;</code> so the function handles any &#39;white space&#39; before any input field"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493882040, "post_id": 43771730, "comment_id": 74593229, "body": "when declaring the struct student, there is no need to initialize the fields as every field is updated every time via the call to <code>fscanf()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493882090, "post_id": 43771730, "comment_id": 74593255, "body": "this line: <code>typedef struct student Student;</code> is not needed as the name <code>Student</code> is not used anywhere in the posted code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493882263, "post_id": 43771730, "comment_id": 74593376, "body": "when calling <code>fwrite()</code>, always check the returned value to assure the operation was successful.  The returned value should be the same as the 3rd parameter, other wise some problem has occurred."}, {"owner": {"reputation": 1, "user_id": 4396391, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rsSyGHnbSb4/AAAAAAAAAAI/AAAAAAAAAIQ/4jWaMJ4I-AY/photo.jpg?sz=128", "display_name": "Samson Afolabi", "link": "https://stackoverflow.com/users/4396391/samson-afolabi"}, "edited": false, "score": 0, "creation_date": 1493922751, "post_id": 43771730, "comment_id": 74621240, "body": "I was writing a binary file instead of a text file, so thank you for clarifying that. I know what to do now"}], "owner": {"reputation": 1, "user_id": 4396391, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rsSyGHnbSb4/AAAAAAAAAAI/AAAAAAAAAIQ/4jWaMJ4I-AY/photo.jpg?sz=128", "display_name": "Samson Afolabi", "link": "https://stackoverflow.com/users/4396391/samson-afolabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493855195, "creation_date": 1493855195, "question_id": 43771730, "link": "https://stackoverflow.com/questions/43771730/fscanf-decimal-output-giving-strange-values", "title": "fscanf decimal output giving strange values", "body": "<p>I am writing a C program to read in details of a student to a structure and then write it to a file. This is the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef char String[20];\n\nstruct student {\n    char firstName[15];\n    char lastName[20];\n    int age;\n    int gradeLevel;\n    double GPA;\n    int noClasses;\n    char classes[20];\n    double grades;\n    char enrollDate[20];\n    char gradDate[20];\n};\n\ntypedef struct student Student;\n\nint main() {\n\n    FILE *sfPtr;\n    char fileName[256];\n    int i, studentSize;\n    struct student collegeStudents = {\"\", \"\", 0, 0, 0,\n            1, \"\", 0, \"\", \"\"};\n\n    puts(\"Enter File Name:\");\n    scanf(\"%s\", fileName);\n\n    if ((sfPtr = fopen(fileName, \"rb+\")) == NULL) {\n        puts(\"File could not be opened.\");\n    } else {\n        puts(\"Enter number of students:\");\n        scanf(\"%d\", &amp;studentSize);\n\n        for (i = 0; i &lt; studentSize; i++) {\n             fscanf(stdin, \"%14s%19s%2d%1d%2lf%1d%19s%5lf%19s%19s\",\n                    collegeStudents.firstName,\n                    collegeStudents.lastName,\n                    &amp;collegeStudents.age,\n                    &amp;collegeStudents.gradeLevel,\n                    &amp;collegeStudents.GPA,\n                    &amp;collegeStudents.noClasses,\n                    collegeStudents.classes,\n                    &amp;collegeStudents.grades,\n                    collegeStudents.enrollDate,\n                    collegeStudents.gradDate);\n\n            fseek(sfPtr, i * sizeof(struct student), SEEK_SET);\n\n            fwrite(&amp;collegeStudents, sizeof(struct student), 1, sfPtr);\n        }\n        fclose(sfPtr);\n    }\n}\n</code></pre>\n\n<p>When I run it and enter 's' for the strings and 1 for the ints and doubles, it gives weird values for the ints and doubles. Here is the file result:</p>\n\n<blockquote>\n  <p>s              s                                    \u00f0?   s<br>\n  \u00f0?s                   s</p>\n</blockquote>\n\n<p>Am I missing something? Thanks in advanced.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493854785, "post_id": 43771661, "comment_id": 74584650, "body": "Don&#39;t spam tags! C++ is not C is not C++. And format this mess properly."}, {"owner": {"reputation": 1, "user_id": 7960189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15487692eee1a98e197bfcd4e96ee19c?s=128&d=identicon&r=PG&f=1", "display_name": "Scrowba", "link": "https://stackoverflow.com/users/7960189/scrowba"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493854895, "post_id": 43771661, "comment_id": 74584672, "body": "I used suggested tags, sorry"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493854944, "post_id": 43771661, "comment_id": 74584697, "body": "<code>sum = sum + a;</code> move into inside for-loop. <code>printf(&quot;The total is %i&quot;,a);</code> --&gt; <code>printf(&quot;The total is %i&quot;, sum);</code>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1493854979, "post_id": 43771661, "comment_id": 74584707, "body": "<code>a = a + 1</code> -&gt; <code>++a</code> - saves on the typing"}, {"owner": {"reputation": 1, "user_id": 7960189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15487692eee1a98e197bfcd4e96ee19c?s=128&d=identicon&r=PG&f=1", "display_name": "Scrowba", "link": "https://stackoverflow.com/users/7960189/scrowba"}, "edited": false, "score": 0, "creation_date": 1493855723, "post_id": 43771661, "comment_id": 74584904, "body": "I&#39;m pretty new to coding so sorry if the format is terrible."}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1493855985, "post_id": 43771661, "comment_id": 74584967, "body": "@Scrowba copy all the code you just posted in your post and press <code>Ctrl</code> + <code>k</code>"}], "answers": [{"tags": [], "owner": {"reputation": 322, "user_id": 5166679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf0659879284cb2abb822f70af655e1c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcoderguy", "link": "https://stackoverflow.com/users/5166679/gwcoderguy"}, "is_accepted": true, "score": 2, "last_activity_date": 1493857921, "last_edit_date": 1493857921, "creation_date": 1493855135, "answer_id": 43771721, "question_id": 43771661, "link": "https://stackoverflow.com/questions/43771661/i-need-help-adding-the-outputs-of-a-for-loop-in-c/43771721#43771721", "title": "I need help adding the outputs of a for loop in C", "body": "<p>The problem is that your summation is outside of the for-loop here:</p>\n\n<pre><code>   for( a = 1; a &lt;= i; a++ ) {\n        printf(\"%i\\n\", a);\n    }\n    sum += a;\n    printf(\"The total is %i\",a);\n</code></pre>\n\n<p>What this does is print that statement multiple times, then do the sum once.</p>\n\n<p>What you want is this:</p>\n\n<pre><code>    for( a = 1; a &lt;= i; a++ ) {\n        printf(\"%i\\n\", a);\n        sum += a;\n    }\n</code></pre>\n\n<p>Also, if you'd like to print the sum, you want <code>printf(\"The total is %i\\n\", sum);</code>\nrather than <code>printf(\"The total is %i\", a);</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7960189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15487692eee1a98e197bfcd4e96ee19c?s=128&d=identicon&r=PG&f=1", "display_name": "Scrowba", "link": "https://stackoverflow.com/users/7960189/scrowba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 43771721, "answer_count": 1, "score": -3, "last_activity_date": 1493887929, "creation_date": 1493854723, "last_edit_date": 1493887929, "question_id": 43771661, "link": "https://stackoverflow.com/questions/43771661/i-need-help-adding-the-outputs-of-a-for-loop-in-c", "title": "I need help adding the outputs of a for loop in C", "body": "<p>I'm making a code that takes an integer, counts up to the integer, then adds all of the numbers counting up to the integer.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main () {\n\n    int i = 0;\n    int a = 0;\n    int sum = 0;\n    printf(\"Please enter a number:\");\n    scanf(\"%i\", &amp;i);\n    for( a = 1; a &lt;= i; a = a + 1 ) {\n        printf(\"%i\\n\", a);\n    }\n        sum = sum + a;\n        printf(\"The total is %i\",a);\n\n   return 0;\n}\n</code></pre>\n\n<p>It seems to be adding 1 to whatever the input is.</p>\n\n<p>I want it to add all of the numbers that are produced not just the first</p>\n\n<p>Thanks!</p>\n\n<p>EDIT</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main () {\n\n    int i = 0;\n    int a = 0;\n    int sum = 0;\n    printf(\"Please enter a number:\");\n    scanf(\"%i\", &amp;i);\n    for( a = 1; a &lt;= i; ++a ) {\n        printf(\"%i\\n\", a);\n        sum = sum + a;\n    }\n    printf(\"The total is %i\",sum);\n   return 0;\n}\n</code></pre>\n\n<p>Thanks! That is exactly what I wanted to do. I didn't understand that \"sum\" needed to be part of the for loop to change correctly.</p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1493854529, "post_id": 43771618, "comment_id": 74584577, "body": "How do you know the original list is always being returned?"}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1493854618, "post_id": 43771618, "comment_id": 74584600, "body": "@immibis I&#39;ve added my test case to the post"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493854623, "post_id": 43771618, "comment_id": 74584605, "body": "Do you call like <code>xs = intlist_prepend(xs, value);</code> ?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1493854641, "post_id": 43771618, "comment_id": 74584611, "body": "You do not need to cast <code>malloc</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1493854793, "post_id": 43771618, "comment_id": 74584652, "body": "You threw away the value returned."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1493854891, "post_id": 43771618, "comment_id": 74584671, "body": "@JerseyFonseca Your test program ignores the value returned and prints the original list, how do you know what was returned?"}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493854966, "post_id": 43771618, "comment_id": 74584704, "body": "@BLUEPIXY This worked, thank you. But this was not the case in my append test functions:  my append function has the type: intlist* intlist_append(intlist* xs, int val)   so why don&#39;t I have to do this for append?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493855138, "post_id": 43771618, "comment_id": 74584745, "body": "I don&#39;t get you."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1493855362, "post_id": 43771618, "comment_id": 74584813, "body": "@JerseyFonseca I think you can work out the answer yourself, if you understand pointers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1493855475, "post_id": 43771618, "comment_id": 74584842, "body": "@JerseyFonseca The original <code>xs</code> is returned in <code>intlist_append</code>, right? That is, you&#39;re always returning the head of the list. An append operation can never replace the head of the list because it always adds an item at the end of the list, meaning the item added is never returned (an exception is an empty/NULL list). A prepend operation replaces the head of the list because it always adds an item at the beginning, meaning the item added is always returned. Think about it for a moment, and you&#39;ll understand why you should be able to realize this yourself."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1493858576, "post_id": 43771772, "comment_id": 74585309, "body": "Your <code>malloc</code> is perfectly fine, but using the dereferenced variable itself will always insure proper allocation, e.g. <code>intlist *prepend = malloc (sizeof *prepend);</code> Additionally, the <code>&#39;*&#39;</code> in pointer declarations should be attached to the <i>variable</i> and not the <i>type</i> to insure there is no confusion, e.g. <code>int* a, b, c;</code> (<code>b</code> &amp; <code>c</code> are certainly not integer pointers...) <code>int *a, b, c;</code> makes that clearer."}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1493861080, "post_id": 43771772, "comment_id": 74585909, "body": "Good points and I completely agree. I partly blame it on my copy/paste which I know is not a good reason."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1493866103, "post_id": 43771772, "comment_id": 74587184, "body": "Yep, no worries, I figured as much and gave you the vote. I always try to remember when answering questions, that I step into the role of teacher and try and make sure to address all the issues I see (not always successful at catching them all, but we try...)"}, {"owner": {"reputation": 1041, "user_id": 4233629, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-afuW4zm4V5Q/AAAAAAAAAAI/AAAAAAAAHR4/K4nGzVl8rsM/photo.jpg?sz=128", "display_name": "Sush", "link": "https://stackoverflow.com/users/4233629/sush"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1493867595, "post_id": 43771772, "comment_id": 74587519, "body": "@DavidC.Rankin Question about your statement <code>intlist *prepend = malloc (sizeof *prepend); &#47;&#47; Must this be sizeof prepend?</code> I ask this because sizeof prepend will return the number of bytes required to store the pointer variable &#39;prepend&#39;: Isnt that what we require here?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1493868005, "post_id": 43771772, "comment_id": 74587635, "body": "No, recall you declared <code>prepend</code> as a pointer. You want to allocate adequate space for whatever the pointer points to, rather than just <code>sizeof (a pointer)</code>, so you dereference <code>prepend</code> to get the <code>sizeof (the object)</code>. (e.g. <code>int *a;</code>, <code>sizeof a;</code> is <code>sizeof (a pointer to int)</code>, <code>sizeof *a;</code> is <code>sizeof (an int)</code>."}], "tags": [], "owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "is_accepted": false, "score": 3, "last_activity_date": 1493855477, "creation_date": 1493855477, "answer_id": 43771772, "question_id": 43771618, "link": "https://stackoverflow.com/questions/43771618/c-prepending-node-to-a-linked-list/43771772#43771772", "title": "C prepending node to a linked list", "body": "<p>When you are prepending, you need to update the head of the list. So the return value from the <code>intlist_prepend()</code> becomes the new head.</p>\n\n<pre><code>intlist* prepend = malloc(sizeof(intlist*));\nprepend-&gt;val = 5;\nprepend-&gt;next = NULL;\n\nprintf(\"\\n*** testing intlist_prepend\\n\\n\");\nprintf(\"expecting 6 5: \");\nprepend = intlist_prepend(prepend, 6);\nintlist_show(prepend);\nprintf(\"\\nexpecting 7 6 5: \");\nprepend = intlist_prepend(prepend, 7);\nintlist_show(prepend);\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493855477, "creation_date": 1493854403, "last_edit_date": 1493854692, "question_id": 43771618, "link": "https://stackoverflow.com/questions/43771618/c-prepending-node-to-a-linked-list", "title": "C prepending node to a linked list", "body": "<p>I am trying to prepend an element to a linked list made up of value and next, but the original list is always being returned, any thoughts?</p>\n\n<p>Note: I cannot change the signature.</p>\n\n<pre><code>intlist* intlist_prepend(intlist* xs, int val) \n{\n    intlist* ys = (intlist*)malloc(sizeof(intlist));\n    ys-&gt;val = val;\n    ys-&gt;next = xs;\n    return ys;\n}\n</code></pre>\n\n<p>Here is my test case:</p>\n\n<pre><code>intlist* prepend = malloc(sizeof(intlist*));\n    prepend-&gt;val = 5;\n    prepend-&gt;next = NULL;\n\n    printf(\"\\n*** testing intlist_prepend\\n\\n\");\n    printf(\"expecting 6 5: \");\n    intlist_prepend(prepend, 6);\n    intlist_show(prepend);\n    printf(\"\\nexpecting 7 6 5: \");\n    intlist_prepend(prepend, 7);\n    intlist_show(prepend);\n</code></pre>\n\n<p>But 5 is only being returned.</p>\n"}, {"tags": ["c", "multithreading", "memory-management", "valgrind"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493858338, "post_id": 43771540, "comment_id": 74585254, "body": "Which is line 169 in your <code>mySPMDMain()</code> function?  Valgrind is sure that you&#39;re accessing before and after the array of <code>NUM_THREADS-1</code> elements, so identifying that line may allow us to help you.  We shouldn&#39;t have to copy your code to find out which line it is.  Besides, you might have edited something.  Have you really reduced this to an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)?  There&#39;s not a line of code in what you&#39;ve shown that can be removed without removing the problem?"}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493859745, "post_id": 43771540, "comment_id": 74585586, "body": "@JonathanLeffler I&#39;ve added the line"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493882607, "post_id": 43771540, "comment_id": 74593594, "body": "the posted code includes a home grown header file: <code>myutils.h</code>  Without the contents of that file, how are we to reproduce the problem?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493882777, "post_id": 43771540, "comment_id": 74593714, "body": "when calling any of the heap memory allocation functions (malloc, calloc, realloc): 1) the returned type is <code>void*</code> which can be assigned to any other pointer.  Casting the returned type just clutters the code, making it much more difficult to understand, debug, etc.  2) always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493883098, "post_id": 43771540, "comment_id": 74593918, "body": "this line: <code>int allChunkSize = N&#47;NUM_THREADS;</code> is an <code>int</code> divide.  So any fraction will be discarded.  This means the total &#39;allChunkSize *NUM_THREADS` has a VERY high probability of being too small.  Strongly suggest rounding the result up by <code>N</code> so AT LEAST the needed amount of memory will be allocated via this line: <code>myTCB[i].Chunk = (long int*) malloc(sizeof(long int)*allChunkSize);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493883283, "post_id": 43771540, "comment_id": 74594036, "body": "the posted code is missing the statement: <code>#include &lt;stdio.h&gt;</code> for <code>fprintf()</code>, etc   The posted code is missing the statement: <code>#include &lt;stdlib.h&gt;</code> for <code>calloc()</code>, <code>malloc()</code>, and <code>free()</code>, exit(), EXIT_FAILURE"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493883413, "post_id": 43771540, "comment_id": 74594123, "body": "the returned value from <code>pthread_create()</code> needs to be checked to assure the thread creation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493884280, "post_id": 43771540, "comment_id": 74594621, "body": "the function: <code>sumTotal()</code> is not defined within the scope of the posted code. the function: <code>multimerge()</code> not defined within the scope of the posted code.  The function: <code>binarySearch()</code> not defined within the scope of the posted code.  The function: <code>cmpfunc()</code> not defined within the scope of the posted code.  The function: <code>isSorted()</code> not defined within the scope of the posted code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493884349, "post_id": 43771540, "comment_id": 74594659, "body": "this line: <code>myTCB[i].offSet = N&#47;(NUM_THREADS * NUM_THREADS);</code> is a integer divide, so there is a very high probability that the field &#39;offSet&#39; will contain a very small (perhaps even 0) value,  Probably not what you want."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493911306, "post_id": 43771540, "comment_id": 74614271, "body": "@user3629249 you can assume that the headers and functions are included and defined in <code>myutil.h</code>"}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493912159, "post_id": 43771540, "comment_id": 74614901, "body": "@user3629249 The answer to this question is correct. Since <code>N</code> is very large number (at least 80 million when I test), and <code>NUM_THREADS</code> is limited by machine settings. (at most 16 if tested locally on my machine) I should never worry about the issue that you are pointing."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493918652, "post_id": 43771540, "comment_id": 74618944, "body": "C style note: the dot <code>.</code> and arrow <code>-&gt;</code> operators bind very tightly indeed and should not have spaces on either side.  This is for human readability and following normal conventions, not because the compiler cares."}], "answers": [{"comments": [{"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1493911778, "post_id": 43779559, "comment_id": 74614626, "body": "Yes, I should set a condition for that too. I think why the program still works is the invalid reading of the memory is also <code>0</code>."}], "tags": [], "owner": {"reputation": 1203, "user_id": 5872193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9839edfacb5837e124d10164cdc0c558?s=128&d=identicon&r=PG&f=1", "display_name": "Honza Reme\u0161", "link": "https://stackoverflow.com/users/5872193/honza-reme%c5%a1"}, "is_accepted": true, "score": 2, "last_activity_date": 1493891615, "creation_date": 1493891615, "answer_id": 43779559, "question_id": 43771540, "link": "https://stackoverflow.com/questions/43771540/invalid-read-of-size-4-when-separating-thread/43779559#43779559", "title": "Invalid read of size 4 when separating thread", "body": "<p>Your line 169 is inside a for loop iterating with <code>i</code> from 0 up, but you are accessing element <code>sampleIndex[i-1]</code>. In the first iteration, this access is out of bounds.</p>\n"}, {"tags": [], "owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "is_accepted": false, "score": 1, "last_activity_date": 1493918843, "last_edit_date": 1493918843, "creation_date": 1493913877, "answer_id": 43787862, "question_id": 43771540, "link": "https://stackoverflow.com/questions/43771540/invalid-read-of-size-4-when-separating-thread/43787862#43787862", "title": "Invalid read of size 4 when separating thread", "body": "<p>@Honza is correct, take a look at these lines:</p>\n\n<pre><code> for (int i = 0; i&lt;localTCB-&gt;num_threads; ++i)\n {\n     if (i == 0) localTCB-&gt;passLength[i] = localTCB-&gt;sampleIndex[i];\n     localTCB-&gt;passLength[i] = localTCB-&gt;sampleIndex[i] - localTCB-&gt;sampleIndex[i-1];\n     if (i == (localTCB-&gt;num_threads)-1) localTCB-&gt;passLength[i] = localTCB-&gt;ChunkSize - localTCB-&gt;sampleIndex[i-1];\n }\n</code></pre>\n\n<p>The branching here is not safe. when <code>i == 0</code>, for sure it will execute the line under <code>if (i ==0)</code> condition. BUT this loop will always execute the middle line! Then <code>localTCB-&gt;sampleIndex[i-1]</code> will read the <code>int</code> from <code>localTCB-&gt;sampleIndex[-1]</code> which is the int byte before the entire <code>sampleIndex</code> memory. Since this byte is also <code>0</code> (not used or populated), the result of the program is still correct, but obviously the \"wrong way\" for correct result. <code>valgrind</code> is strict and it will complain. And when <code>i == (localTCB-&gt;num_threads)-1</code>, the middle line will get the wrong value (<code>0</code>) too, but the final result will be corrected by the last condition. It means the branching is neither correct and efficient. How to change it? Simple, regulate each of the condition should be fine:</p>\n\n<pre><code>for (int i = 0; i&lt;localTCB-&gt;num_threads; ++i)\n{\n    if (i == 0) localTCB-&gt;passLength[i] = localTCB-&gt;sampleIndex[i];\n    else if (i &gt; 0 &amp;&amp; i&lt;(localTCB-&gt;num_threads)-1) localTCB-&gt;passLength[i] = localTCB-&gt;sampleIndex[i] - localTCB-&gt;sampleIndex[i-1];\n    else if (i == (localTCB-&gt;num_threads)-1) localTCB-&gt;passLength[i] = localTCB-&gt;ChunkSize - localTCB-&gt;sampleIndex[i-1];\n}\n</code></pre>\n"}], "owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 0, "accepted_answer_id": 43779559, "answer_count": 2, "score": 0, "last_activity_date": 1499484872, "creation_date": 1493854021, "last_edit_date": 1499484872, "question_id": 43771540, "link": "https://stackoverflow.com/questions/43771540/invalid-read-of-size-4-when-separating-thread", "title": "Invalid read of size 4 when separating thread", "body": "<p>I'm helping my friend to optimize his memory for this program:</p>\n\n<pre><code>#define _GNU_SOURCE\n#include \"myutils.h\"\n#include &lt;pthread.h&gt;\n\nvoid * mySPMDMain(void *);\npthread_barrier_t mybarrier;\n\nint main (int argc, char ** argv) {\n    /* Initialize global data here */\n    /* Start threads*/\n\n    int i;\n\n    if (argc != 3)\n    {\n        fprintf(stderr, \"usage: ./psrs &lt;Number of Keys&gt; &lt;Number of threads&gt;\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    struct timeval start;\n    struct timeval end;\n\n    int N = atoi(argv[1]);\n    int NUM_THREADS = atoi(argv[2]);\n    int allChunkSize = N/NUM_THREADS;\n    pthread_t ThreadID[NUM_THREADS];\n    pthread_barrier_init(&amp;mybarrier, NULL, NUM_THREADS);\n\n    long int * originArray = (long int *) malloc(sizeof(long int)*N);\n\n    for (i = 0; i&lt;N; ++i)\n    {\n        originArray[i] = random() % 100000;\n    }\n\n    /*Initialize the Data Space*/\n    TCB *myTCB = (TCB *) malloc(sizeof(TCB) *NUM_THREADS); \n    for (i = 0; i&lt;NUM_THREADS; ++i)\n    {\n        myTCB[i].Chunk = (long int*) malloc(sizeof(long int)*allChunkSize);\n        myTCB[i].passLength = (int*) malloc(sizeof(int)*NUM_THREADS);\n        myTCB[i].samples = (long int*) malloc(sizeof(long int)*NUM_THREADS);\n        myTCB[i].tmpMergeSpace = (long int**) malloc(sizeof(long int *)*NUM_THREADS);\n        myTCB[i].pivotArray = (long int *) malloc(sizeof(long int)*NUM_THREADS*NUM_THREADS);\n        myTCB[i].selectedPivot = (long int*) malloc(sizeof(long int)*(NUM_THREADS-1));\n        myTCB[i].eachStartIndex = (int*) malloc(sizeof(int)*NUM_THREADS);\n        myTCB[i].mergeLength = (int *) malloc(sizeof(int)*NUM_THREADS);\n        myTCB[i].sampleIndex = calloc((NUM_THREADS-1), sizeof(int));\n        memcpy(myTCB[i].Chunk, &amp;originArray[i*allChunkSize],allChunkSize*sizeof(long int));\n        myTCB[i].N = N;\n        myTCB[i].num_threads = NUM_THREADS;\n        myTCB[i].ChunkSize = allChunkSize;\n        myTCB[i].offSet = N/(NUM_THREADS * NUM_THREADS);\n    }\n\n    gettimeofday(&amp;start, NULL);\n\n    for (i = 1; i &lt; NUM_THREADS; ++i)\n    {\n        myTCB[i].pid = i; \n        pthread_create(&amp;(ThreadID[i]),NULL, mySPMDMain, (void*) &amp;(myTCB[i]));\n    }\n    myTCB[0].pid = 0;\n    mySPMDMain((void *) &amp;(myTCB[0]));\n\n    for (i = 1; i&lt;NUM_THREADS; ++i)\n    {\n        pthread_join(ThreadID[i], NULL);\n    }\n\n    gettimeofday(&amp;end, NULL);\n    double time_spent = (double)(end.tv_sec - start.tv_sec) * 1.0e6 + (double) (end.tv_usec - start.tv_usec);\n    time_spent = time_spent /1000000;\n    //printf(\"time spent: %f\\n\", time_spent);\n\n    memset(originArray, 0, N*sizeof(long int));\n    int cursor = 0;\n    for (i = 0; i&lt;NUM_THREADS; ++i)\n    {\n        memcpy(&amp;originArray[cursor], myTCB[i].resultArr, sumTotal(myTCB[i].mergeLength, NUM_THREADS) * sizeof(long int));\n        cursor = cursor+sumTotal(myTCB[i].mergeLength, NUM_THREADS);\n    }\n    /* Clean up and exit*/\n    pthread_barrier_destroy(&amp;mybarrier);\n    assert(isSorted(originArray,N) == 1);\n    for (i = 0; i&lt;NUM_THREADS; ++i)\n    {\n        free(myTCB[i].mergeLength);\n        free(myTCB[i].eachStartIndex);\n        free(myTCB[i].sampleIndex);\n        free(myTCB[i].selectedPivot);\n        free(myTCB[i].pivotArray);\n        free(myTCB[i].samples);\n        free(myTCB[i].passLength);\n        free(myTCB[i].Chunk);\n        free(myTCB[i].resultArr);\n        for(int j = 0; j&lt; NUM_THREADS; j++)\n        {\n            free(myTCB[i].tmpMergeSpace[j]);\n        }\n        free(myTCB[i].tmpMergeSpace);\n    }\n    free(myTCB);\n    free(originArray);\n    return 0;\n}\n\n#define MASTER if(localId == 0)\n#define BARRIER pthread_barrier_wait(&amp;mybarrier)\n\nvoid * mySPMDMain(void *arg)\n{\n    TCB * localTCB;\n    int localId;\n\n    /* Actual parameter */\n    localTCB = (TCB *)arg;\n\n    /* Other parameters passed in via global */\n    localId = localTCB -&gt; pid;\n\n    /* Parallel array to TCB */\n    qsort(localTCB -&gt; Chunk, localTCB -&gt; ChunkSize, sizeof(long int), cmpfunc);\n    BARRIER;\n\n    // Timing\n\n    /* Phase 1 */\n    for (int i = 0; i&lt; localTCB -&gt; num_threads; ++i)\n    {\n        long int sample = localTCB-&gt;Chunk[i*localTCB -&gt; offSet];\n        localTCB-&gt;samples[i]=sample;\n    }\n    BARRIER;\n\n\n    /* Phase 2 */\n    MASTER {\n        for (int i = 0; i &lt; localTCB -&gt; num_threads; ++i)\n        {\n            memcpy(&amp;(localTCB-&gt;pivotArray[i*localTCB -&gt; num_threads]),localTCB[i].samples, localTCB -&gt; num_threads*sizeof(long int));\n        }\n        qsort(localTCB -&gt; pivotArray, localTCB -&gt; num_threads*localTCB -&gt; num_threads, sizeof(long int), cmpfunc);\n        for (int i = 0; i&lt;(localTCB -&gt; num_threads)-1; ++i)\n        {   \n            localTCB-&gt; selectedPivot[i] = localTCB-&gt; pivotArray[(i+1)*localTCB -&gt; num_threads];\n        }\n        for (int i = 1; i&lt;localTCB -&gt; num_threads; ++i)\n        {\n            memcpy(localTCB[i].selectedPivot,localTCB[0].selectedPivot,((localTCB -&gt; num_threads)-1)*sizeof(long int));\n        }\n    }\n    BARRIER;\n\n\n    /* Phase 3 */\n    for (int i = 0; i&lt;(localTCB -&gt; num_threads)-1; ++i)\n    {\n        localTCB -&gt; sampleIndex[i] = binarySearch(localTCB-&gt;Chunk,0,localTCB-&gt;ChunkSize -1, localTCB-&gt;selectedPivot[i]);\n    }\n    for (int i = 0; i&lt;localTCB -&gt; num_threads; ++i)\n    {\n        if(i == 0) localTCB -&gt; eachStartIndex[i] = 0;\n        else localTCB -&gt; eachStartIndex[i] = localTCB -&gt; sampleIndex[i-1];\n    }\n    for (int i = 0; i&lt;localTCB -&gt; num_threads; ++i)\n    {\n        if (i == 0) localTCB -&gt; passLength[i] = localTCB -&gt; sampleIndex[i];\n        localTCB -&gt; passLength[i] = localTCB -&gt; sampleIndex[i] - localTCB -&gt; sampleIndex[i-1];\n        if (i == (localTCB -&gt; num_threads)-1) localTCB -&gt; passLength[i] = localTCB -&gt; ChunkSize - localTCB -&gt; sampleIndex[i-1];\n    }\n    BARRIER;\n\n\n    /* Phase 4 */\n    MASTER {\n        for (int i = 0; i&lt;localTCB -&gt; num_threads; ++i)\n        {\n            for (int j = 0; j&lt;localTCB -&gt; num_threads; ++j)\n            {\n                // each temp merge space  = localTCB[i].tmpMergeSpace[j]\n                // each cpy start = localTCB[j].Chunk[localTCB[j].eachStartIndex[i]]\n                // each cpy length = localTCB[j].passLength[i] * sizeof(long int)\n                localTCB[i].tmpMergeSpace[j] = (long int*) malloc(sizeof(long int)*localTCB[j].passLength[i]);\n                localTCB[i].mergeLength[j] = localTCB[j].passLength[i];\n                memcpy(localTCB[i].tmpMergeSpace[j], &amp;(localTCB[j].Chunk[localTCB[j].eachStartIndex[i]]), (localTCB[j].passLength[i]) * sizeof(long int));\n            }\n            localTCB[i].resultArr = (long int *) malloc(sizeof(long int)*sumTotal(localTCB[i].mergeLength, localTCB -&gt; num_threads));\n        }\n    }\n    BARRIER;\n    multimerge(localTCB-&gt;tmpMergeSpace,localTCB-&gt;mergeLength,localTCB -&gt; num_threads,localTCB-&gt;resultArr);\n    BARRIER;\n    //Timing\n\n\n    return NULL;\n\n} /* mySPMDMain*/\n</code></pre>\n\n<p>and the TCB struct is this:</p>\n\n<pre><code>typedef struct ThreadControlBlock {\n    long int *Chunk;\n    int *passLength;\n    int *sampleIndex;\n    int *eachStartIndex;\n    long int **tmpMergeSpace;\n    long int *pivotArray;\n    long int *selectedPivot;\n    long int *samples;\n    int *mergeLength;\n    long int * resultArr;\n    int pid;\n    int N;\n    int num_threads;\n    int ChunkSize;\n    int offSet;\n} TCB;\n</code></pre>\n\n<p>I used <code>valgrind</code> to check if there's any memory leak. <code>valgrind</code> returns that this program freed memory after execution but has a invalid read of size 4 when executing thread function on the main thread (with <code>pid==0</code>):</p>\n\n<pre><code>==6150== Memcheck, a memory error detector\n==6150== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==6150== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==6150== Command: ./psrs 8000000 8\n==6150== \n==6150== Thread 8:\n==6150== Invalid read of size 4\n==6150==    at 0x400DC2: mySPMDMain (psrs.c:169)\n==6150==    by 0x4E3ADC4: start_thread (in /usr/lib64/libpthread-2.17.so)\n==6150==    by 0x514673C: clone (in /usr/lib64/libc-2.17.so)\n==6150==  Address 0x911cd5c is 4 bytes before a block of size 28 alloc'd\n==6150==    at 0x4C29975: calloc (vg_replace_malloc.c:711)\n==6150==    by 0x401188: main (psrs.c:48)\n==6150== \n==6150== Invalid read of size 4\n==6150==    at 0x400DBE: mySPMDMain (psrs.c:169)\n==6150==    by 0x4E3ADC4: start_thread (in /usr/lib64/libpthread-2.17.so)\n==6150==    by 0x514673C: clone (in /usr/lib64/libc-2.17.so)\n==6150==  Address 0x911cd7c is 0 bytes after a block of size 28 alloc'd\n==6150==    at 0x4C29975: calloc (vg_replace_malloc.c:711)\n==6150==    by 0x401188: main (psrs.c:48)\n==6150== \n==6150== Thread 1:\n==6150== Invalid read of size 4\n==6150==    at 0x400DC2: mySPMDMain (psrs.c:169)\n==6150==    by 0x401266: main (psrs.c:64)\n==6150==  Address 0x911a89c is 4 bytes before a block of size 28 alloc'd\n==6150==    at 0x4C29975: calloc (vg_replace_malloc.c:711)\n==6150==    by 0x401188: main (psrs.c:48)\n==6150== \n==6150== Invalid read of size 4\n==6150==    at 0x400DBE: mySPMDMain (psrs.c:169)\n==6150==    by 0x401266: main (psrs.c:64)\n==6150==  Address 0x911a8bc is 0 bytes after a block of size 28 alloc'd\n==6150==    at 0x4C29975: calloc (vg_replace_malloc.c:711)\n==6150==    by 0x401188: main (psrs.c:48)\n==6150== \n==6150== \n==6150== HEAP SUMMARY:\n==6150==     in use at exit: 0 bytes in 0 blocks\n==6150==   total heap usage: 174 allocs, 174 frees, 320,014,664 bytes allocated\n==6150== \n==6150== All heap blocks were freed -- no leaks are possible\n==6150== \n==6150== For counts of detected and suppressed errors, rerun with: -v\n==6150== ERROR SUMMARY: 16 errors from 4 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>line 169: <code>localTCB -&gt; passLength[i] = localTCB -&gt; sampleIndex[i] - localTCB -&gt; sampleIndex[i-1];</code></p>\n\n<p>line 63: <code>myTCB[0].pid = 0;</code></p>\n\n<p>line 48: <code>myTCB[i].sampleIndex = calloc((NUM_THREADS-1), sizeof(int));</code></p>\n\n<p>In this test run, <code>NUM_THREADS</code> is <code>8</code>. If read correctly, <code>myTCB[i].sampleIndex = calloc((NUM_THREADS-1), sizeof(int));</code> should read a memory of 4 * (8-1) = 28 bytes, I don't quite get where should this 4 bytes invalid read before this 28 bytes block.</p>\n"}, {"tags": ["c", "sdl", "sdl-2"], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 0, "last_activity_date": 1493852437, "creation_date": 1493852437, "answer_id": 43771326, "question_id": 43771325, "link": "https://stackoverflow.com/questions/43771325/match-sdl-1-2s-default-palette-with-sdl-creatergbsurface/43771326#43771326", "title": "Match SDL 1.2&#39;s default palette with SDL_CreateRGBSurface()?", "body": "<p><code>SDL_SetPaletteColors()</code> and tables derived from SDL 1.2's <code>SDL_SetVideoMode()</code> output give me this snippet:</p>\n\n<pre><code>surface = SDL_CreateRGBSurface(0, 100, 100, 8, 0, 0, 0, 0);\nUint8 r[8] = { 0, 36, 73, 109, 146, 182, 219, 255 };\nUint8 g[8] = { 0, 36, 73, 109, 146, 182, 219, 255 };\nUint8 b[4] = { 0, 85, 170, 255 };\nint curColor = 0;\nfor( unsigned int i = 0; i &lt; 8; ++i )\nfor( unsigned int j = 0; j &lt; 8; ++j )\nfor( unsigned int k = 0; k &lt; 4; ++k )\n{\n    SDL_Color color = { r[i], g[j], b[k], 255 };\n    SDL_SetPaletteColors( surface-&gt;format-&gt;palette, &amp;color, curColor, 1 );\n    curColor++;\n}\n</code></pre>\n"}], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 43771326, "answer_count": 1, "score": 0, "last_activity_date": 1515422027, "creation_date": 1493852437, "last_edit_date": 1515422027, "question_id": 43771325, "link": "https://stackoverflow.com/questions/43771325/match-sdl-1-2s-default-palette-with-sdl-creatergbsurface", "title": "Match SDL 1.2&#39;s default palette with SDL_CreateRGBSurface()?", "body": "<p>I'm porting <a href=\"https://web.archive.org/web/20171007163225/http://adam.ierymenko.name/nanopond.shtml\" rel=\"nofollow noreferrer\">a SDL 1.2 program</a> (<a href=\"https://github.com/adamierymenko/nanopond\" rel=\"nofollow noreferrer\">repository</a>) that uses 8-bit indexed color surfaces to SDL2.</p>\n\n<p>Unfortunately <code>SDL_CreateRGBSurface()</code> sets an all-white, 256-entry palette by default for 8 bpp surfaces instead of the RGB884 palette that <code>SDL_SetVideoMode()</code> sets in SDL 1.2.</p>\n\n<p>How can I get set a palette that matches the default palette from a SDL 1.2 <code>SDL_SetVideoMode(..., ..., 8, SDL_SWSURFACE)</code> call?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493852457, "post_id": 43771254, "comment_id": 74583981, "body": "This isn&#39;t an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), which means it is a nuisance \u2014 we can&#39;t run the code without doing work to write a <code>main()</code> and provide the headers, etc.  You&#39;ll get answers quicker if you provide an MCVE \u2014 with instructions on how to run it if it isn&#39;t as simple as <code>.&#47;program</code>.  You might also show the output you get. I don&#39;t trust debug printing where the output doesn&#39;t end with a newline. That means <code>printf(&quot;\\nI am %d&quot;, prime);</code> is wrong as far as I&#39;m concerned; it should be <code>printf(&quot;I am %d\\n&quot;, prime);</code> or perhaps <code>printf(&quot;\\nI am %d\\n&quot;, prime);</code> \u2014 the key is the output ends with a newline."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7960157, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750738628275339/picture?type=large", "display_name": "Kevin Postlethwait", "link": "https://stackoverflow.com/users/7960157/kevin-postlethwait"}, "edited": false, "score": 0, "creation_date": 1493854344, "post_id": 43771516, "comment_id": 74584527, "body": "Thank you, that makes a lot of sense.  Do you by any chance know why it was so consistent?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "reply_to_user": {"reputation": 1, "user_id": 7960157, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750738628275339/picture?type=large", "display_name": "Kevin Postlethwait", "link": "https://stackoverflow.com/users/7960157/kevin-postlethwait"}, "edited": false, "score": 0, "creation_date": 1493855044, "post_id": 43771516, "comment_id": 74584718, "body": "@KevinPostlethwait Because it is timing dependent and the chances are each time you execute, the timing is relatively similar. But that is by no means a guarantee. The behaviour can change when there is higher load, or you compile with a different compiler or run on a different system, or any unrelated changes to the environment or code. This is the very definition of Undefined Behaviour in C."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": false, "score": 1, "last_activity_date": 1493853851, "creation_date": 1493853851, "answer_id": 43771516, "question_id": 43771254, "link": "https://stackoverflow.com/questions/43771254/first-thread-not-running-with-given-argument/43771516#43771516", "title": "First thread not running with given argument", "body": "<p>You are passing the same <em>curr</em> pointer to all the threads. You are lucky that it even works as well as you have observed as that is a huge race condition. Instead, the code needs to pass a seperate arg buffer to each thread. Here is one example:</p>\n\n<pre><code>/* doesn't really need to be dynamic memory in this simple example */\nargs curr[4];\n\nfor(i = 0; i &lt; 4; i++) {\n  curr[i].prime = current_primes[i];\n  curr[i].max = end;\n  curr[i].ary = ary_of_all;\n  pthread_create(&amp;threads[i], NULL, thread_runner, &amp;curr[i]);\n}\n\n/* join all threads */\nfor(i = 0; i &lt; 4; i++) {\n  pthread_join(threads[i], NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7960157, "user_type": "registered", "profile_image": "https://graph.facebook.com/1750738628275339/picture?type=large", "display_name": "Kevin Postlethwait", "link": "https://stackoverflow.com/users/7960157/kevin-postlethwait"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493854046, "creation_date": 1493852030, "last_edit_date": 1493854046, "question_id": 43771254, "link": "https://stackoverflow.com/questions/43771254/first-thread-not-running-with-given-argument", "title": "First thread not running with given argument", "body": "<pre><code>int run_me(unsigned long prime, unsigned long max, int *ary) {\n  unsigned long i;\n  printf(\"\\nI am %d\", prime);\n\n  if(prime &gt; sqrt(max)) {\n    return 1; /* do no run */\n  }\n\n  for(i = 3; i*prime &lt; max; i+=2) {\n    ary[i*prime - 1] = 1;\n  }\n\n  return 0;\n}\n\ntypedef struct Args {\n  unsigned long max, prime;\n  int *ary;\n} args;\n\nvoid *thread_runner(void *all_args) {\n  args *my_args = all_args;\n  run_me(my_args-&gt;prime, my_args-&gt;max, my_args-&gt;ary);\n  return 0;\n}\n\nunsigned long *sieve_of_eratosthenes(unsigned long begin, unsigned long end) {\n  unsigned long i, j, arylen, *ary_to_ret;\n  unsigned long current_primes[4] = {3, 5, 7, 11}; /* holds primes being used by threads*/\n  int *ary_of_all;\n  pthread_t threads[4];\n  args *curr;\n\n  curr = malloc(sizeof(args));\n\n  ary_of_all = calloc(end, sizeof(int));\n  arylen = end - begin + 2;\n  ary_to_ret = calloc(arylen, sizeof(unsigned long));\n  ary_of_all[0] = 1;\n\n  /*mark all even numbers*/\n  for(i = 1; 2 * i &lt; end; i++) {\n    ary_of_all[2*i - 1] = 1;\n  }\n\n  while(current_primes[3] &lt; sqrt(end)) {\n      /*run threads with current primes*/\n    for(i = 0; i &lt; 4; i++) {\n      curr-&gt;prime = current_primes[i];\n      curr-&gt;max = end;\n      curr-&gt;ary = ary_of_all;\n      pthread_create(&amp;threads[i], NULL, thread_runner, curr);\n    }\n    /* join all threads */\n    for(i = 0; i &lt; 4; i++) {\n      pthread_join(threads[i], NULL);\n    }\n\n    j = 0; /* number of primes found */\n\n    /*find new primes*/\n    for(i = current_primes[3] + 2; i &lt; end &amp;&amp; j &lt; 4; i+=2) {\n      if(ary_of_all[i - 1] == 0) {\n        current_primes[j] = i;\n        j++;\n      }\n    }\n\n  }\n\n  /*run threads one more time*/\n  if(current_primes[0] &lt;= sqrt(end)) {\n    for(i = 0; i &lt; 4; i++) {\n      curr-&gt;prime = current_primes[i];\n      curr-&gt;max = end;\n      curr-&gt;ary = ary_of_all;\n      pthread_create(&amp;threads[i], NULL, thread_runner, curr);\n    }\n    /* join all threads */\n    for(i = 0; i &lt; 4; i++) {\n      pthread_join(threads[i], NULL);\n    }\n  }\n\n  /*create the array to be returned*/\n  j = 0; /*pos in *ary_to_ret*/\n  for(i = begin; i &lt;= end; i++) {\n    if(ary_of_all[i-1] == 0) {\n      ary_to_ret[j] = i;\n      j++;\n    }\n\n  }\n\n  ary_to_ret[j] = 0; /* null terminate */\n  ary_to_ret = realloc(ary_to_ret, (j+1) * sizeof(unsigned long));\n  return ary_to_ret;\n}\n</code></pre>\n\n<p>I am running the above code in order to get a list of primes given a high and low value using the Sieve of Eratosthenes.  I have the code mostly working, however when I run this code the thread which I create using the first element in my curr_primes array is never used and instead runs 5, 7, 11, 11. It does this every time it runs through the array and repopulates it. I was wondering if someone could explain to me why it runs in this way.</p>\n"}, {"tags": ["c", "json", "json-c"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 2, "creation_date": 1493849295, "post_id": 43770672, "comment_id": 74582989, "body": "Does <code>json_type_array</code> support <code>json_object_object_foreach</code> with both a <code>key</code> and a <code>val</code>? ... I would think not. Maybe check with <code>json_object_is_type</code> and consider the <code>json_object_array_length</code> and <code>json_object_get_array</code> functions. <a href=\"http://json-c.github.io/json-c/json-c-0.12.1/doc/html/index.html\" rel=\"nofollow noreferrer\">Read the docs</a>, I might be wrong."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1493850717, "creation_date": 1493850717, "answer_id": 43771046, "question_id": 43770672, "link": "https://stackoverflow.com/questions/43770672/parse-json-file-using-json-c/43771046#43771046", "title": "Parse json file using json-c", "body": "<p>It's a bit funny that you ask about json-c, which I just picked up for my own purposes a short time ago.  Anyway, the problem is certainly what @Myst described in comments.</p>\n\n<p>I was able to duplicate the problem you describe, and running the program under a debugger immediately showed that the segfault occurs during the iteration, not the parse.</p>\n\n<p>Looking a bit more closely at the code, then, in light of the package's naming conventions, the function (macro, actually) <code>json_object_object_foreach()</code> is designated for use with objects representing JSON objects, not JSON arrays.  That's the significance of the second \"object\" in the name.  You must not apply that macros to an object representing a JSON array, as you try to do when the top-level JSON structure in your input is an array.  It follows that you must test what type of object you have before determining how to examine it.</p>\n\n<p>You can determine the type of object you have via <code>json_object_get_type()</code> or <code>json_object_is_type()</code>.  For a top-level array, you can get the array length via <code>json_object_array_length()</code>, and use an ordinary <code>for</code> loop to iterate over the index range, retrieving elements via <code>json_object_array_get_idx()</code>.  I don't presently see any better alternative, but perhaps someone more experienced with the library will have one to offer.</p>\n"}], "owner": {"reputation": 335, "user_id": 5151559, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0004195da11fb0300f7f0b028997aca7?s=128&d=identicon&r=PG&f=1", "display_name": "homeGrown", "link": "https://stackoverflow.com/users/5151559/homegrown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6197, "favorite_count": 0, "accepted_answer_id": 43771046, "answer_count": 1, "score": 1, "last_activity_date": 1493852369, "creation_date": 1493848684, "last_edit_date": 1493852369, "question_id": 43770672, "link": "https://stackoverflow.com/questions/43770672/parse-json-file-using-json-c", "title": "Parse json file using json-c", "body": "<p>I am using the json-c library. I am encountering two issues when trying to parse a json file in C. </p>\n\n<p>If I try and parse the file as it is I get a segmentation fault at <code>json_object_object_foreach()</code>. </p>\n\n<p>But if I remove the square bracket at the beginning and end of the json file it works but only parses the first object. I want to parse the whole json file.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int ParseJson(const char *file)                                                                                                                                                             \n{                                                                               \n            char *json;                                                                 \n            int fd;                                                                     \n            struct json_object *obj;                                                    \n            struct stat st;                                                             \n\n            fd = open(file, O_RDONLY);                                                  \n            json = mmap(NULL, st.st_size, PROT_READ, MAP_PRIVATE, fd, 0);               \n            close(fd);                                                                  \n\n            obj = json_tokener_parse(json);                                             \n\n            json_object_object_foreach(obj, key, val) {                                 \n                printf(\"key = %s value = %s\\n\",key, json_object_get_string(val));       \n            }                                                                           \n\n            return 0;                                                                       \n}\n</code></pre>\n\n<p>And here is my json file:</p>\n\n<pre><code>[{\n        \"test_1\": \"min\",\n        \"test_2\": \"max\",\n        \"test_3\": \"val\",\n        \"test_4\": \"res\",\n        \"test_5\": \"var\",\n        \"test_6\": \"hal\"\n    }, {\n        \"fetch_1\": 300.00,\n        \"fetch_2\": 100.000,\n        \"fetch_3\": 0.000000,\n        \"fetch_4\": 0.000000,\n        \"fetch_5\": 20.00\n    }, {\n        \"fetch_1\": 250.00,\n        \"fetch_2\": 310.000,\n        \"fetch_3\": 3.000000,\n        \"fetch_4\": 7.000000,\n        \"fetch_5\": 18.00\n    }, {\n        \"fetch_1\": 450.00,\n        \"fetch_2\": 678.000,\n        \"fetch_3\": 3.000000,\n        \"fetch_4\": 3.000000,\n        \"fetch_5\": 89.00\n    }, {\n        \"fetch_1\": 300.00,\n        \"fetch_2\": 100.000,\n        \"fetch_3\": 7.000000,\n        \"fetch_4\": 67.000000,\n        \"fetch_5\": 50.00\n    }, {\n        \"fetch_1\": 900.00,\n        \"fetch_2\": 800.000,\n        \"fetch_3\": 6.000000,\n        \"fetch_4\": 5.000000,\n        \"fetch_5\": 30.00\n}]\n</code></pre>\n"}, {"tags": ["c", "linked-list", "segmentation-fault", "singly-linked-list"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1493848618, "post_id": 43770634, "comment_id": 74582728, "body": "<code>sizeof(intlist*)</code> --&gt; <code>sizeof(intlist)</code> or <code>sizeof(*new)</code>, Also <code>free(new);</code> remove this."}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493848661, "post_id": 43770634, "comment_id": 74582746, "body": "hm, I suppose I don&#39;t understand how the asterisks work here. Can you give me a quick explanation? Also, thank you."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493848734, "post_id": 43770634, "comment_id": 74582770, "body": "<code>intlist*</code> is pointer. You need size of <code>intlist</code>, not pointer size."}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493848743, "post_id": 43770634, "comment_id": 74582775, "body": "@BLUEPIXY I am still getting the same error. Any thoughts?"}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493848785, "post_id": 43770634, "comment_id": 74582786, "body": "@BLUEPIXY But aren&#39;t I making a pointer?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493848895, "post_id": 43770634, "comment_id": 74582826, "body": "<i>still getting the same error.</i> It seems that there is a problem with other parts of the code. E.g <code>xs</code> is <code>NULL</code>. etc."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1493849208, "post_id": 43770634, "comment_id": 74582952, "body": "Did you get rid of the line: <code>free(new)</code>?"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493849296, "post_id": 43770634, "comment_id": 74582990, "body": "Why are you returning xs?  It is sent as a reference.  There is no need to return xs."}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1493849449, "post_id": 43770634, "comment_id": 74583048, "body": "@bruceg Yes, but shouldn&#39;t you free everything you malloc after it has been used?"}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493849481, "post_id": 43770634, "comment_id": 74583060, "body": "@Nguaial the function returns a pointer to an intlist. What else should I return?"}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1493850026, "post_id": 43770634, "comment_id": 74583264, "body": "@JerseyFonseca you should free the memory when you are done with it, but in this case you&#39;re not done with it.  You just assigned the memory that <code>new</code> points at into the <code>ys-next</code> pointer.  So, they both point to the same memory location.  So, if you freed <code>new</code> then <code>ys-&gt;next</code> points to unallocated memory."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493854140, "post_id": 43770634, "comment_id": 74584481, "body": "@JerseyFonseca - It should be void.  The changes are already taken place at the memory level since xs is sent in as an address. There is no need for the function to return."}], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493854268, "post_id": 43770941, "comment_id": 74584510, "body": "I don&#39;t think the function  needs to return anything.  The changes are taken place at the memory level."}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493859306, "post_id": 43770941, "comment_id": 74585477, "body": "@Nguaial In this case the function will be wrong when the head is changed because the parameter is a local variable of the function."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1493850548, "last_edit_date": 1493850548, "creation_date": 1493850119, "answer_id": 43770941, "question_id": 43770634, "link": "https://stackoverflow.com/questions/43770634/linked-list-segmentation-fault-in-terminal-but-not-in-debugger/43770941#43770941", "title": "Linked list segmentation fault in terminal, but not in debugger", "body": "<p>This part of the function</p>\n\n<pre><code>    // ...\n    intlist* ys = xs;\n    while(ys-&gt;next) \n    {\n        ys = ys-&gt;next;\n    }\n    ys-&gt;next = new;\n    free(new);\n    return xs;\n}\n</code></pre>\n\n<p>is wrong. First of all <code>xs</code> can be equal to <code>NULL</code>. In this case using the expression <code>ys-&gt;next</code> results in undefined behavior.</p>\n\n<p>Secondly you shall not free the node <code>new</code>. Otherwise the function does not make sense.</p>\n\n<p>Thirdly, the head stored in the local variable <code>ys</code> can be changed. However the value of <code>xs</code> will not be changed. In this case the function returns the unchanged value of the variable <code>xs</code>.</p>\n\n<p>Also the first statement of the function is also wrong</p>\n\n<pre><code>intlist* new = (intlist*)malloc(sizeof(intlist*));\n                                       ^^^^^^^^\n</code></pre>\n\n<p>There shall be</p>\n\n<pre><code>intlist* new = (intlist*)malloc(sizeof(intlist));\n                                       ^^^^^^^\n</code></pre>\n\n<p>The function can be defined the following way</p>\n\n<pre><code>intlist * intlist_append( intlist *xs, int val ) \n{\n    intlist *new_node = malloc( sizeof( intlist ) );\n\n    if ( new_node != NULL )\n    {\n        new_node-&gt;val  = val;\n        new_node-&gt;next = NULL;\n\n        intlist **current = &amp;xs;\n\n        while ( *current ) current = &amp;( *current )-&gt;next; \n\n        *current = new_node;\n    }\n\n    return xs;\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493850628, "creation_date": 1493848501, "last_edit_date": 1493850628, "question_id": 43770634, "link": "https://stackoverflow.com/questions/43770634/linked-list-segmentation-fault-in-terminal-but-not-in-debugger", "title": "Linked list segmentation fault in terminal, but not in debugger", "body": "<p>I wrote a function that appends a value to the end of a linked list made up of val and next. However, I keep getting the error: Segmentation Fault 11: core dumped. When I run this on gdb, though, I do not get any errors. Any thoughts?</p>\n\n<pre><code>intlist* intlist_append(intlist* xs, int val) \n{\n    intlist* new = (intlist*)malloc(sizeof(intlist*));\n    new-&gt;val = val;\n    new-&gt;next = NULL;\n    intlist* ys = xs;\n    while(ys-&gt;next) \n    {\n        ys = ys-&gt;next;\n    }\n    ys-&gt;next = new;\n    free(new);\n    return xs;\n}\n</code></pre>\n"}, {"tags": ["c", "if-statement", "response", "generator"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 6, "creation_date": 1493848517, "post_id": 43770632, "comment_id": 74582690, "body": "<code>response</code> is uninitialized."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1493848536, "post_id": 43770632, "comment_id": 74582696, "body": "Something is wrong with <code>scanf</code> but not limited to...Unallocated <code>response</code>. Comparison with string literal."}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 4, "creation_date": 1493848592, "post_id": 43770632, "comment_id": 74582715, "body": "you cannot use <code>==</code> to compare strings in c, actually you don&#39;t have string, you have uninitialized pointer to char"}, {"owner": {"reputation": 1, "user_id": 7323234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c89f0f4a33e1dec423f2b025537b63d?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorKC", "link": "https://stackoverflow.com/users/7323234/connorkc"}, "edited": false, "score": 0, "creation_date": 1493848914, "post_id": 43770632, "comment_id": 74582830, "body": "i added scanf(&quot;%s&quot;, &amp;response); to my code and i got the sam e response"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1493848983, "post_id": 43770632, "comment_id": 74582858, "body": "that&#39;s not the only issue. You <i>cannot</i> compare strings using <code>==</code> operator."}, {"owner": {"reputation": 329, "user_id": 610605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52676a7f64a6723d917d6cc7be176ec8?s=128&d=identicon&r=PG", "display_name": "Paul Bentley", "link": "https://stackoverflow.com/users/610605/paul-bentley"}, "edited": false, "score": 0, "creation_date": 1493849188, "post_id": 43770632, "comment_id": 74582943, "body": "This is how buffer-overrun vulnerabilities happen"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493849220, "post_id": 43770632, "comment_id": 74582956, "body": "What did you do exactly when you &quot;checked all syntax&quot; ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493849225, "post_id": 43770632, "comment_id": 74582958, "body": "Do you see any compiler warnings? You should to."}, {"owner": {"reputation": 1, "user_id": 7323234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c89f0f4a33e1dec423f2b025537b63d?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorKC", "link": "https://stackoverflow.com/users/7323234/connorkc"}, "edited": false, "score": 0, "creation_date": 1493849743, "post_id": 43770632, "comment_id": 74583150, "body": "#include &lt;stdlib.h&gt;     #include &lt;stdio.h&gt;     #include &lt;string.h&gt;     int main(){       char * response;       int anger = 0;       int correct = 0;       printf(&quot;type Dice&quot;);       scanf(&quot;%s&quot;, &amp;response);       int compare = strncmp(response, &quot;Dice&quot;, 20);       if (compare == 0)         printf(&quot;Good Job!&quot;);       return 0;     }"}, {"owner": {"reputation": 1, "user_id": 7323234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c89f0f4a33e1dec423f2b025537b63d?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorKC", "link": "https://stackoverflow.com/users/7323234/connorkc"}, "edited": false, "score": 0, "creation_date": 1493849937, "post_id": 43770632, "comment_id": 74583226, "body": "I did not see any compiler warnings i just didn&#39;t work and by check all syaax  meant I checked to see is I had the if statement&#39;s structure correct and well as the scans"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493850327, "post_id": 43770632, "comment_id": 74583353, "body": "@ConnorKC Make sure you use <code>-Wall</code> when you compile, to get all warnings."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493850507, "post_id": 43770632, "comment_id": 74583415, "body": "There are two main problems \u2014 not making <code>response</code> point to anything useful, and then not comparing the strings properly.  I duplicated this to the &#39;compare strings&#39; problem, but there&#39;s likely also a plausible duplicate for &#39;make sure your pointers point somewhere valid&#39;."}, {"owner": {"reputation": 1, "user_id": 7323234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c89f0f4a33e1dec423f2b025537b63d?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorKC", "link": "https://stackoverflow.com/users/7323234/connorkc"}, "edited": false, "score": 0, "creation_date": 1493850561, "post_id": 43770632, "comment_id": 74583435, "body": "how do I use -Wall?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493850965, "post_id": 43770632, "comment_id": 74583555, "body": "Don&#39;t vandalise your questions or edit them leaving answers without context!"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493849278, "post_id": 43770775, "comment_id": 74582978, "body": "Have you even read the comments?"}, {"owner": {"reputation": 1974, "user_id": 694286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2799043909f51ad0f159c6b0a13f5db1?s=128&d=identicon&r=PG", "display_name": "nageeb", "link": "https://stackoverflow.com/users/694286/nageeb"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493849416, "post_id": 43770775, "comment_id": 74583033, "body": "Not endorsing the rest of the code, but this was the problem that was preventing it from compiling."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493849484, "post_id": 43770775, "comment_id": 74583063, "body": "I don&#39;t think it was preventing the compiling. It should have given a bunch of warnings, yes."}, {"owner": {"reputation": 1, "user_id": 7323234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c89f0f4a33e1dec423f2b025537b63d?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorKC", "link": "https://stackoverflow.com/users/7323234/connorkc"}, "edited": false, "score": 0, "creation_date": 1493850154, "post_id": 43770775, "comment_id": 74583296, "body": "weird thing is it didn&#39;t give me any warnings?"}, {"owner": {"reputation": 1, "user_id": 7323234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c89f0f4a33e1dec423f2b025537b63d?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorKC", "link": "https://stackoverflow.com/users/7323234/connorkc"}, "edited": false, "score": 0, "creation_date": 1493850246, "post_id": 43770775, "comment_id": 74583326, "body": "Also I put in the strain cap and I gave me non zero status here is my code#include &lt;stdlib.h&gt; #include &lt;stdio.h&gt; #include &lt;string.h&gt; int main(){   char * response;   int anger = 0;   int correct = 0;   printf(&quot;type Dice&quot;);   scanf(&quot;%s&quot;, &amp;response);   int compare = strncmp(response, &quot;Dice&quot;, 20);   if (compare == 0)     printf(&quot;Good Job!&quot;);   return 0; }"}], "tags": [], "owner": {"reputation": 1974, "user_id": 694286, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2799043909f51ad0f159c6b0a13f5db1?s=128&d=identicon&r=PG", "display_name": "nageeb", "link": "https://stackoverflow.com/users/694286/nageeb"}, "is_accepted": false, "score": 1, "last_activity_date": 1493849283, "last_edit_date": 1493849283, "creation_date": 1493849206, "answer_id": 43770775, "question_id": 43770632, "link": "https://stackoverflow.com/questions/43770632/why-is-this-if-statement-not-executing-the-code/43770775#43770775", "title": "Why is this If statement not executing the code?", "body": "<p>You can't use == to compare strings. Use strcmp() instead.  If it returns 0, they're identical.</p>\n\n<pre><code>if (strcmp(response,\"Dice\")==0){\n   ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1493849867, "post_id": 43770874, "comment_id": 74583194, "body": "The funny thing that the last example can actually evaluate to <code>true</code>, since <code>str1</code> and <code>str2</code> are pointing to equal string literals and the compiler might very well to decide not to duplicate them and have only one <code>&quot;Hello&quot;</code> allocated."}, {"owner": {"reputation": 505, "user_id": 7906473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PB84L.jpg?s=128&g=1", "display_name": "Parth K", "link": "https://stackoverflow.com/users/7906473/parth-k"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493849895, "post_id": 43770874, "comment_id": 74583207, "body": "You must have got a string literal comparison warning. DO NOT IGNORE THE COMPILER WARNINGS. They are there for a reason"}, {"owner": {"reputation": 505, "user_id": 7906473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PB84L.jpg?s=128&g=1", "display_name": "Parth K", "link": "https://stackoverflow.com/users/7906473/parth-k"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493849971, "post_id": 43770874, "comment_id": 74583242, "body": "@EugeneSh.  Not sure the compiler would do that since compiler would want to leave scope for change later on in the code"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493850025, "post_id": 43770874, "comment_id": 74583263, "body": "Yes it will: <a href=\"https://ideone.com/EbivBo\" rel=\"nofollow noreferrer\">ideone.com/EbivBo</a> .BTW, these should be pointers (fixed it for you..). Compiler doesn&#39;t care about future changes. It is optimizing here and now."}, {"owner": {"reputation": 505, "user_id": 7906473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PB84L.jpg?s=128&g=1", "display_name": "Parth K", "link": "https://stackoverflow.com/users/7906473/parth-k"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493850368, "post_id": 43770874, "comment_id": 74583370, "body": "Well in the program down the flow we are attempting to change any of the two strings. The compiler can possibly make <code>str1</code> and <code>str2</code> point to same location as otherwise change in one string will change the other"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493850393, "post_id": 43770874, "comment_id": 74583379, "body": "No! String literals are read only. Attempting to change them is undefined behavior"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493851244, "post_id": 43770874, "comment_id": 74583641, "body": "&quot;now arr points to the first member of the array&quot; - Definitively <b>not</b>. <code>arr</code> is an array, not a pointer! You might want to find out why <code>arr + 0</code> actually <b>does</b>."}], "tags": [], "owner": {"reputation": 505, "user_id": 7906473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PB84L.jpg?s=128&g=1", "display_name": "Parth K", "link": "https://stackoverflow.com/users/7906473/parth-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1493850064, "last_edit_date": 1493850064, "creation_date": 1493849701, "answer_id": 43770874, "question_id": 43770632, "link": "https://stackoverflow.com/questions/43770632/why-is-this-if-statement-not-executing-the-code/43770874#43770874", "title": "Why is this If statement not executing the code?", "body": "<p>You did <code>char * response</code>. This makes a pointer variable to a character. Right now it is not pointing to any memory(it is some garbage value). <code>scanf</code> stores user input in consecutive memory addresses starting from the one pointed by <code>response</code>. as <code>response</code> is uninitialised, the input may not necessarily be stored on the stack(Don't want that).</p>\n\n<p>Now when you do<code>response==\"Dice\"</code> it doesn't mean anything at all.</p>\n\n<hr>\n\n<p>Some pretty basic stuff on arrays and pointers and their comparison.</p>\n\n<pre><code>int arr[10];\n</code></pre>\n\n<p>now <code>arr</code> points to the first member of the array, <code>arr+1</code> points to second, <code>arr+2</code> to third and so on. <code>arr[i]</code> is a shorthand way of saying <code>*(arr+i)</code>.</p>\n\n<hr>\n\n<p>String is also an array of characters.</p>\n\n<pre><code>char *str1=\"Hello\";\nchar *str2=\"Hello\";\nif(str1==str2){...}\n</code></pre>\n\n<p>What the if statement in line three here does is, it compares to pointers, ie it checks whether they both point to the same location. Since this is not true, execution won't go into the if block. What you want to do is compare the strings character by character. There is an inbuilt function in <code>string.h</code> called <code>strcmp()</code> which does that. </p>\n"}], "owner": {"reputation": 1, "user_id": 7323234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c89f0f4a33e1dec423f2b025537b63d?s=128&d=identicon&r=PG&f=1", "display_name": "ConnorKC", "link": "https://stackoverflow.com/users/7323234/connorkc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1493850399, "accepted_answer_id": 43770874, "answer_count": 2, "score": -7, "last_activity_date": 1493886299, "creation_date": 1493848489, "last_edit_date": 1493886299, "question_id": 43770632, "link": "https://stackoverflow.com/questions/43770632/why-is-this-if-statement-not-executing-the-code", "closed_reason": "Duplicate", "title": "Why is this If statement not executing the code?", "body": "<p>I've checked all syntax.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n  char * response;\n  int anger = 0;\n  int correct = 0;\n  printf(\"type Dice\");\n  scanf(\"%s\", response);\n  if (response == \"Dice\"){\n    printf(\"Good Job!\");\n    correct = 1;\n  }\n}\n</code></pre>\n\n<p>I an trying to make a response generator and the is statement isn't working. I tried setting the variable response to the correct answer and the if statement worked so I was thinking that maybe something was wrong with my scanf. I'm a beginner in C.</p>\n"}, {"tags": ["c", "raspberry-pi", "raspbian", "adc", "wiringpi"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493882816, "post_id": 43770506, "comment_id": 74593744, "body": "Be a LOT more specific - what does &quot;won&#39;t read&quot; mean? What values do you get? Any errors? Have you confirmed that the mcp3004 is connected correctly, that it will read an analog voltage at all (use a variable resistor to try it),..."}, {"owner": {"reputation": 1, "user_id": 5727937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ba6daff7e69dd7648a2a688f3ec90a8?s=128&d=identicon&r=PG&f=1", "display_name": "paulaxa1", "link": "https://stackoverflow.com/users/5727937/paulaxa1"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493902806, "post_id": 43770506, "comment_id": 74607536, "body": "Sorry. No errors it will just print out eight zero&#39;s even with a flame near my fire sensor. I don&#39;t have a potentiometer but still the flame sensor has VCC (power up), ground, analog output (which is what i want) and digital output which only outputs 0 or 1.  The mcp3004 is connected correctly i have checked one hundred times. I just don&#39;t get why my code won&#39;t work."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493913739, "post_id": 43770506, "comment_id": 74616105, "body": "Have you confirmed that the SPI is actually enabled in raspi-config? Have you tried applying a non-zero voltage to one of the ADC input pins? Could be any sort of problem: wiring, the ADC chip being broken, configuration/code, ... Are you sure your flame detector is outputting a non-zero voltage?"}, {"owner": {"reputation": 1, "user_id": 5727937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ba6daff7e69dd7648a2a688f3ec90a8?s=128&d=identicon&r=PG&f=1", "display_name": "paulaxa1", "link": "https://stackoverflow.com/users/5727937/paulaxa1"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1494178316, "post_id": 43770506, "comment_id": 74705745, "body": "sorry for late reply i just had to check everything. Everything works i did it with a python program and it works fine. So the problem is my C code one hundred percent. Any ideas? My program still outputs 0s."}], "owner": {"reputation": 1, "user_id": 5727937, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ba6daff7e69dd7648a2a688f3ec90a8?s=128&d=identicon&r=PG&f=1", "display_name": "paulaxa1", "link": "https://stackoverflow.com/users/5727937/paulaxa1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1494358005, "creation_date": 1493847913, "last_edit_date": 1494358005, "question_id": 43770506, "link": "https://stackoverflow.com/questions/43770506/cant-find-out-why-my-program-wont-read-analog-values", "title": "Can&#39;t find out why my program won&#39;t read analog values", "body": "<p>I am using wiringPi and C. I have a flame sensor and a MCP3004 ADC. Here is the program that I wrote, but I can't figure out why it won't read the analog values from the flame sensor.</p>\n\n<pre><code>#include &lt;wiringPi.h&gt;\n#include &lt;mcp3004.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define BASE 200\n#define SPI_CHAN 0\n\nint main(void) {\n\n    int channel;\n    int x;\n\n    if (wiringPiSetup () == -1)\n        exit(1);\n\n    mcp3004Setup(BASE, SPI_CHAN);\n    for (channel = 0; channel&lt;8; ++channel) {\n        x=analogRead(BASE+channel);\n        printf(\"%d\\n\",x);\n        delay(1000);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>My program runs but it just outputs 0s. The wiring is correct and the sensors and MCP3004 work fine, I tested it with a python program and it gets the job done.</p>\n\n<p>So the only problem is in my C code.</p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493848245, "post_id": 43770498, "comment_id": 74582588, "body": "malloc(strlen(strings[3])*sizeof(char *)); =&gt; malloc(strlen(strings[3])*sizeof(char));   Get rid of * on every char * in malloc statements.  You need to allocate memory for characters, not char pointer."}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1493848446, "post_id": 43770498, "comment_id": 74582659, "body": "So may bugs, so little time..."}, {"owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "edited": false, "score": 0, "creation_date": 1493848869, "post_id": 43770498, "comment_id": 74582820, "body": "Removing the * throws me a core dumped !"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493849361, "post_id": 43770498, "comment_id": 74583007, "body": "Please learn C (and forget your Java courses)"}, {"owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "edited": false, "score": 0, "creation_date": 1493849937, "post_id": 43770498, "comment_id": 74583227, "body": "Learning starts by doing mistakes :)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493850164, "post_id": 43770498, "comment_id": 74583302, "body": "On second thought: your code looks reasonable, except for the tokeniser. You should learn how to handle characters an strings in C. The stdlib string functions could help you."}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "edited": false, "score": 0, "creation_date": 1493849082, "post_id": 43770708, "comment_id": 74582908, "body": "Tried your solution but I have still a lot of entry that comes out as weird symbols... Maybe it is the assignation in the hashtable that cause the problem , since if I print the data outside of the hashtable , everything comes fine .  Line is always filled as I am using an fgets to retrieve every line from stdin in the main .  Which string array are you referring to ?"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "edited": false, "score": 0, "creation_date": 1493849243, "post_id": 43770708, "comment_id": 74582967, "body": "@tarzan212:  Unless you post a complete program including the hashtable implementation and usage, issues outside the posted function cannot be investigated."}, {"owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "edited": false, "score": 0, "creation_date": 1493849536, "post_id": 43770708, "comment_id": 74583085, "body": "Just added the full code (except the main) to the main post !"}, {"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "reply_to_user": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "edited": false, "score": 0, "creation_date": 1493850448, "post_id": 43770708, "comment_id": 74583396, "body": "@tarzan212: A complete program needs a <code>main()</code> function."}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1493849157, "last_edit_date": 1493849157, "creation_date": 1493848814, "answer_id": 43770708, "question_id": 43770498, "link": "https://stackoverflow.com/questions/43770498/cannot-retrieve-all-the-data-from-hashtable/43770708#43770708", "title": "Cannot retrieve all the data from Hashtable", "body": "<p>There are many problems in your code.</p>\n\n<ul>\n<li><p>If <code>line</code> does not contain a newline or if a double quote is missing, the behavior is undefined.</p></li>\n<li><p>You do not initialize the string array: if the description has missing fields, the behavior is undefined.</p></li>\n<li><p>In the part where you save the structure fields, your allocation code is incorrect: you must allocate one more character than the length of the string, <code>strlen(string[0]) + 1</code> instead of <code>strlen(string[0]) * sizeof(char*)</code>.</p></li>\n</ul>\n\n<p>It would be much simpler to use the POSIX function <code>strdup()</code>:</p>\n\n<pre><code>// Assigning the values:\n\noeuvre.id = atoi(strings[0]);\noeuvre.accession_number = strdup(strings[1]);\noeuvre.artiste.nomArtiste = strdup(strings[2]);\noeuvre.artiste.artistRole = strdup(strings[3]);\noeuvre.artiste.artistId = atoi(strings[4]);\noeuvre.titre = strdup(strings[5]);\noeuvre.url = strdup(strings[CHAMPS_OEUVRE]));\noeuvre.year = atoi(strings[9]);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "is_accepted": true, "score": 0, "last_activity_date": 1494008168, "creation_date": 1494008168, "answer_id": 43811416, "question_id": 43770498, "link": "https://stackoverflow.com/questions/43770498/cannot-retrieve-all-the-data-from-hashtable/43811416#43811416", "title": "Cannot retrieve all the data from Hashtable", "body": "<p>Solved my issue by declaring the Oeuvre structure like this</p>\n\n<pre><code>typedef struct oeuvre {\nunsigned int id;\nchar accession_number[MAX_CHARS];\nArtiste artiste;\nchar titre[MAX_CHARS];\nint year;\nchar url[MAX_CHARS];\n } Oeuvre;\n</code></pre>\n\n<p>with MAX_CHARS referring to a large number. \nSo I believe I was not properly allocating the strings before using them, which made them to point to random adresses , resulting in those weird outputs but no error. I also believe that another way of solving this would be to dynamically allocate the chars for each Oeuvre in my function. </p>\n"}], "owner": {"reputation": 339, "user_id": 5932364, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fsWM7.png?s=128&g=1", "display_name": "naifmeh", "link": "https://stackoverflow.com/users/5932364/naifmeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 43811416, "answer_count": 2, "score": 2, "last_activity_date": 1494008168, "creation_date": 1493847866, "last_edit_date": 1493850635, "question_id": 43770498, "link": "https://stackoverflow.com/questions/43770498/cannot-retrieve-all-the-data-from-hashtable", "title": "Cannot retrieve all the data from Hashtable", "body": "<p>I am trying to code an algorithm in C that reads a huge file ( more than 750.000 lines) , separates each line by some specified delimiters , and saves the data into a structure , which is then saved into a <code>Hashtable</code>. Everything goes fine until I want to print one specific data for each row of the <code>Hashtable</code>: the output is good for some rows , but the console is just printing some random symbols for others (which means memory leaks maybe? ).</p>\n\n<p>I am trying to figure what can cause this problem. If I isolate the code that separate the line and saves it into the structure, and execute it for each line separately, it works fine, everything is printed as expected.</p>\n\n<p>I have also tried to do it without dynamic allocation but it works a bit better with it as I was getting the infamous \"Segmentation fault\"</p>\n\n<p>Here is the code that splits the line and saves it:</p>\n\n<pre><code>unsigned int hash(unsigned int id) {\n    unsigned int hashage = 5381; //Valeur arbitraire\n    unsigned int mdop = 10; //faire un modulo obtenir l'unite\n    int idtmp = id;\n    while (mdop &lt; id) {\n        idtmp = id%mdop;\n        hashage = ((hashage &lt;&lt; 6) + hashage) + idtmp;\n        mdop *= 10;\n    }\n\n    return hashage % NB_CASES_HASH;\n}\n\nvoid initiate_hashtable(Hashtable hashtable) {\n    int i = 0;\n    for (; i &lt; NB_CASES_HASH; i++) {\n        hashtable[i] = NULL;\n    }\n}\n\nvoid ajout_entete(Liste *liste, Oeuvre *oeuvre) {\n    Liste p = malloc(sizeof(Cellule));\n    if (!p) exit(EXIT_FAILURE);\n\n    p-&gt;oeuvre = *oeuvre;\n    p-&gt;suiv = *liste;\n    //Si on imprime ici , tout va bien , les donn\u00e9es sont correctes\n    *liste = p;\n}\n\nvoid ajout_annee(Liste *liste, Oeuvre *oeuvre) { //ajout tri\u00e9 par ann\u00e9e pour   recherche plus rapide\n    if (!(*liste) || oeuvre-&gt;year &lt;= (*liste)-&gt;oeuvre.year)\n        ajout_entete(liste,oeuvre);\n    else {\n        if (oeuvre-&gt;year &gt;= (*liste)-&gt;oeuvre.year)\n            ajout_annee(&amp;(*liste)-&gt;suiv, &amp;oeuvre);\n    }\n}\n\nOeuvre peuple_oeuvre(char line[MAX_CHARS_LINE]) {\n    int i = 0, j = 1, cmpt = 0;\n    char strings[CHAMPS_OEUVRE][MAX_SIZE];\n    char carac = *(line);\n    char mot[MAX_SIZE];\n    mot[0] = carac;\n    bool isSuivi = false;\n    Oeuvre oeuvre;\n\n    while (carac != '\\n') {\n        if (carac == ',') {\n            if(isSuivi) {\n                mot[j - 1] = '\\\"';\n                mot[j] = '\\0';\n                isSuivi = false;\n            } else\n                mot[j - 1] = '\\0';\n\n            strcpy(strings[i], mot);\n            j = 0;\n            i++;\n        } else\n        if (carac == '\\\"') {\n            cmpt++;\n            carac = *(line + cmpt);\n            while (carac != '\\\"') {\n                mot[j] = carac;\n                j++;\n                cmpt++;\n                carac = *(line + cmpt);\n            }\n            isSuivi = true;\n        }\n        cmpt++;\n        carac = *(line + cmpt);\n        mot[j] = carac;\n        j++;\n    }\n    mot[j] = '\\0';\n    strcpy(strings[i], mot);\n\n    //Assignation des valeurs :\n\n    oeuvre.id = atoi(strings[0]);\n    oeuvre.accession_number = strdup(strings[1]);\n    oeuvre.artiste.nomArtiste = strdup(strings[2]);\n    oeuvre.artiste.artistRole = strdup(strings[3]);\n    oeuvre.artiste.artistId = atoi(strings[4]);\n    oeuvre.titre = strdup(strings[5]);\n    oeuvre.url = strdup(strings[CHAMPS_OEUVRE]);\n    oeuvre.year = atoi(strings[9]);\n\n    return oeuvre;\n}\n\nvoid peuple_hashtable(Hashtable hashtable) { // Peuplement par redirection\n    char ligne[MAX_CHARS_LINE];\n    fgets(ligne, MAX_CHARS_LINE, stdin);\n    Oeuvre *oeuvre = malloc(sizeof(Oeuvre));\n    int hashNum;\n    while (fgets(ligne, MAX_CHARS_LINE, stdin)) {\n        *oeuvre = peuple_oeuvre(ligne);\n        hashNum = hash(oeuvre-&gt;artiste.artistId);\n        ajout_annee(&amp;hashtable[hashNum], oeuvre);\n    }\n}\n\nint main() {\n    Hashtable hashtable;\n    initiate_hashtable(hashtable);\n    peuple_hashtable(hashtable);\n    return 0; \n}\n</code></pre>\n\n<p>And the Oeuvre structure looks like this :</p>\n\n<pre><code>typedef struct oeuvre {\n    unsigned int id;\n    char *accession_number;\n    Artiste artiste;\n    char *titre;\n    int year;\n    char *url;\n} Oeuvre;\n\ntypedef Liste Hashtable[NB_CASES_HASH];\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "strtok"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 8, "creation_date": 1493846384, "post_id": 43770168, "comment_id": 74581838, "body": "<code>const char s[1] = &quot;,&quot;;</code> --&gt; <code>const char s[2] = &quot;,&quot;;</code> or <code>const char s[] = &quot;,&quot;;</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1493846516, "post_id": 43770168, "comment_id": 74581891, "body": "You will only get results from the last line in the file. Previous line data will be overwritten."}, {"owner": {"reputation": 951, "user_id": 6176069, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10154102924093064/picture?type=large", "display_name": "Hassan Abbas", "link": "https://stackoverflow.com/users/6176069/hassan-abbas"}, "edited": false, "score": 0, "creation_date": 1493846889, "post_id": 43770168, "comment_id": 74582044, "body": "Well i acknowledge that thing already."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493926126, "post_id": 43770168, "comment_id": 74623130, "body": "a few comments on the posted code.  1) does not compile, does not even contain any function 2) is missing the needed <code>#include</code> statements, 3) missing check for errors on calls to <code>malloc()</code>, <code>fopen()</code>, <code>strtok()</code>.  Note: <code>perror()</code> must be called immediately after a function the returned an error indication.  This is because it depends on the value of <code>errno</code> which gets updated with each new system function call"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493926255, "post_id": 43770168, "comment_id": 74623198, "body": "this statement: <code>for(int i = 0; i&lt;3; i++)</code> would be much better written as: <code>for(int i = 0; i&lt;3 &amp;&amp; pch; i++)</code>"}, {"owner": {"reputation": 951, "user_id": 6176069, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10154102924093064/picture?type=large", "display_name": "Hassan Abbas", "link": "https://stackoverflow.com/users/6176069/hassan-abbas"}, "edited": false, "score": 0, "creation_date": 1493926730, "post_id": 43770168, "comment_id": 74623493, "body": "I know that it does not compile since that was trivial to mention over here since i wanted to ask the main problem(its just a snippet to make the problem understandable to others), but thanks anyways for pointing that out. I will try to post the whole  code from the next time. :)"}], "answers": [{"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 6, "last_activity_date": 1495358118, "last_edit_date": 1495358118, "creation_date": 1493846511, "answer_id": 43770232, "question_id": 43770168, "link": "https://stackoverflow.com/questions/43770168/how-to-copy-the-returned-token-by-strtok-in-c/43770232#43770232", "title": "How to copy the returned token by strtok in c", "body": "<p><code>s</code> is not a proper C string: <code>const char s[1] = \",\";</code> defines it to have a size of 1, without a null terminator.</p>\n\n<p>Use this instead:</p>\n\n<pre><code>const char *s = \",\";\n</code></pre>\n\n<p>Note that a line with fewer than 2 commas will cause the program to have undefined behavior as you do not check that <code>strtok()</code> returns a non NULL pointer.  Here is an alternative using <code>sscanf()</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    FILE *fp = fopen(\"somefile\", \"r\");\n    char temp[3][20];\n    if (fp != NULL) {\n        char line[1024];\n        while (fgets(line, sizeof line, fp) != NULL)  {\n            if (sscanf(line, \"%19[^,],%19[^,],%19[^\\n]\", temp[0], temp[1], temp[2]) == 3) {\n                printf(\"%s\\n%s\\n%s\\n\\n\", temp[0], temp[1], temp[2]);\n            }\n        }\n        fclose(fp);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Note however that the above code will fail to parse lines with empty fields such as <code>,,</code> because <code>sscanf()</code> requires a non empty string for the <code>%[^,]</code> conversion specifier.</p>\n\n<p>Note also that <code>strtok()</code> would be inappropriate for such parsing too as it treats sequences of separators as a single separator, which is OK for white space but probably incorrect for <code>,</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1493928239, "creation_date": 1493928239, "answer_id": 43791892, "question_id": 43770168, "link": "https://stackoverflow.com/questions/43770168/how-to-copy-the-returned-token-by-strtok-in-c/43791892#43791892", "title": "How to copy the returned token by strtok in c", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>cleanly compiles</li>\n<li>is consistently indented</li>\n<li>is appropriately horizontally and vertically spaced</li>\n<li>corrects all the known problems in the posted code</li>\n<li>properly checks for and handles errors</li>\n<li>properly displays the parameters from all the lines in the file</li>\n<li>eliminates unneeded variables</li>\n</ol>\n\n<p>and now the code</p>\n\n<pre><code>#include &lt;stdio.h&gt;   // fopen(), fclose(), fgets(), perror()\n#include &lt;stdlib.h&gt;  // exit(), EXIT_FAILURE\n#include &lt;string.h&gt;  // strtok(), strcpy()\n\n#define MAX_LENGTH     20\n#define MAX_PARAMETERS 3\n\nint main( void )\n{\n    FILE *f = fopen( \"somefile\", \"r\" );\n    if( !f )\n    {\n        perror( \"fopen to read somefile failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    // implied else, fopen successful\n\n    char *temp[ MAX_PARAMETERS ];\n\n    if( NULL == ( temp[0] = malloc( MAX_LENGTH ) ) )\n    {\n        perror( \"malloc failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    if( NULL == ( temp[1] = malloc( MAX_LENGTH ) ) )\n    {\n        perror( \"malloc failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    if( NULL == ( temp[2] = malloc( MAX_LENGTH ) ) )\n    {\n        perror( \"malloc failed\" );\n        exit( EXIT_FAILURE );\n    }\n\n    char line[1024];\n    while( fgets(line, sizeof line, f) )\n    {\n        int i;\n        char *pch = strtok( line, \",\" );\n\n        for( i = 0; i&lt;3 &amp;&amp; pch; i++ )\n        {\n            strcpy( temp[i], pch );\n            pch = strtok ( NULL, \",\" );\n        }\n\n        if( MAX_PARAMETERS != i )\n        {\n            printf( \"failed to extract all parameters from line: %s\\n\", line );\n        }\n\n        else\n        {\n            for( int j = 0; j&lt;MAX_PARAMETERS; j++ )\n            {\n                printf( \"%s\\n\", temp[j] );\n            }\n        }\n    }\n\n    fclose( f );\n} // end function: main\n</code></pre>\n"}], "owner": {"reputation": 951, "user_id": 6176069, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10154102924093064/picture?type=large", "display_name": "Hassan Abbas", "link": "https://stackoverflow.com/users/6176069/hassan-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "accepted_answer_id": 43770232, "answer_count": 2, "score": 2, "last_activity_date": 1495358118, "creation_date": 1493846268, "last_edit_date": 1493857340, "question_id": 43770168, "link": "https://stackoverflow.com/questions/43770168/how-to-copy-the-returned-token-by-strtok-in-c", "title": "How to copy the returned token by strtok in c", "body": "<p>When I try to copy the strtok through strcpy as suggested by the other answers on this forum. I don't get the respective number. File format is something like this 43,789,127.0.0.1 on each particular line. However I get 127 in the temp[2] location which should be 127.0.0.1 . What am I missing over here?</p>\n\n<pre><code>FILE *f = fopen(\"somefile\", \"r\");\nchar *temp[3];\ntemp[0] = malloc(20);\ntemp[1] = malloc(20);\ntemp[2] = malloc(20);\nconst char s[1] = \",\";\nchar *pch;\nif(f != NULL)\n{\n  char line[1024];\n  while(fgets(line, sizeof line, f) != NULL)\n  {\n    pch = strtok(line, s);\n    for(int i = 0; i&lt;3; i++)\n    {\n      strcpy(temp[i],pch);\n      pch = strtok (NULL, s);\n    }\n  }\n  fclose(f);\n} else \n{\n  perror(\"somefile\");\n}\nfor(int i = 0; i&lt;3; i++)\n{\n  printf (\"%s\\n\",temp[i]);  \n}\n</code></pre>\n"}, {"tags": ["c", "flash", "memory", "8051", "flash-memory"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493847425, "post_id": 43770137, "comment_id": 74582233, "body": "Timing diagram shows 12V on Vpp not 8V per your comment. Does your Vpp circuitry really raise the Vpp voltage to 12V or 8V in less than a microsecond? Not obvious how you are outputting the address to the flash."}, {"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1493847549, "post_id": 43770137, "comment_id": 74582295, "body": "Can you see the assembly?  Is there a chance that your empty loops are being optimized out?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493847623, "post_id": 43770137, "comment_id": 74582328, "body": "What is the point of <code>while(write_read!=data_byte)</code> as neither value changes in the loop?  Is <code>RFLAG</code> <code>volatile</code>?"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493847723, "post_id": 43770137, "comment_id": 74582378, "body": "@chux Write_read is read from p5 just above that line. However that also leaves OEn at 0 which doesn&#39;t seem correct, should reassert it to 1"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493847813, "post_id": 43770137, "comment_id": 74582405, "body": "@barny Neither <code>write_read</code> nor <code>data_byte</code> change  in <code>while(write_read!=data_byte)     {         if(RFLAG==1){break;}         goto WRITE_LOOP;     }</code>"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493847877, "post_id": 43770137, "comment_id": 74582430, "body": "The goto WRITE_LOOP makes the code loop back and modify write_read. Horrible."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493847922, "post_id": 43770137, "comment_id": 74582450, "body": "@barny Ah yes, a <code>goto</code>...  Still looks like weird that <code>while(write_read!=data_byte)</code> loop"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493848101, "post_id": 43770137, "comment_id": 74582523, "body": "Nasty code organisation - suggest getting rid of WRITE_LOOP label and the corresponding goto, make WRITE_LOOP into a while (true) and break out if the data reads back correct or RFLAG is 1. And you <i>MUST</i> set OEn and CSn back to 1 after reading P5. How hard can it be, given you have a picture as well as the code?"}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493848289, "post_id": 43770137, "comment_id": 74582598, "body": "@barny I have talked to one of the design engineers and they modified the chip in order to recognize <code>8V</code> as a sufficient supply. Since the posting of the question I have taken out the <code>goto</code> statement. Originally I had it in there in order to keep checking <code>P5</code> until it matched the value in the <code>data_byte</code> variable but I agree. The placement of the <code>goto</code> loop could be improved if were to put it back in the code."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493848362, "post_id": 43770137, "comment_id": 74582627, "body": "Yes just get rid of the goto, not needed at all. And get a scope on the Vpp line, make sure it is actually rising to whatever voltage the chip needs to tell it to program just as quickly as you are expecting. If in doubt make the delays a lot longer, doesn&#39;t do any harm"}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493848400, "post_id": 43770137, "comment_id": 74582640, "body": "@barny also, I did set them back to 1. After the <code>while loop</code> which I took out now."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493848443, "post_id": 43770137, "comment_id": 74582656, "body": "Well clearly update your question, then. No crystal balls."}, {"owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "edited": false, "score": 0, "creation_date": 1493848503, "post_id": 43770137, "comment_id": 74582684, "body": "Thank you all for the comments! One last thought, I am about 6 months new to coding so any organizational tips would be appreciated as well."}], "owner": {"reputation": 77, "user_id": 6906043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1MD9D.jpg?s=128&g=1", "display_name": "Jaime Perez", "link": "https://stackoverflow.com/users/6906043/jaime-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493848692, "creation_date": 1493846107, "last_edit_date": 1493848692, "question_id": 43770137, "link": "https://stackoverflow.com/questions/43770137/8051-flash-memory-not-writing-to-chip", "title": "8051 Flash Memory not Writing to chip", "body": "<p>I am using the 8051 microcontroller to read, write, and erase from flash memory.\nAttached are the waveform for programming operations<a href=\"https://i.stack.imgur.com/V2NV7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V2NV7.png\" alt=\"Waveform for Programming operations\"></a></p>\n\n<p>And below is the code that I have written in order to recreate the waveform in order to write data into the chip:</p>\n\n<pre><code>void quick_write_op(void)\n{\n    unsigned char i;\n\n    char SFRPAGE_SAVE=SFRPAGE;\n    SFRPAGE=CONFIG_PAGE;\n\n    //test=1;\n    Vpp_en=0; //8 volts is supplied to the board. Read/Write operations allowed\n\n    //Wait at least 1us between Vpp high and CSn low\n    for(i=0;i&lt;2;i++){}\n\n    //Set-Up program command\n    P5=0x40;CSn=0;WEn=0;WEn=1;CSn=1;\n\n    //Program Command (Latch Address &amp; Data)\n    P5=data_byte;CSn=0;WEn=0;WEn=1;CSn=1;\n\n    //Wait at least 10us for programming\n    for(i=0;i&lt;23;i++){}\n\n    //Program Verify Command\n    P5=0xC0;CSn=0;WEn=0;WEn=1;CSn=1;\n\n    //Wait at least 6us for program verify\n    for(i=0;i&lt;17;i++){}\n\n    //Program Verification\n    P5MDOUT=0x00; //Configured pins to open-drain\n    CSn=0;OEn=0;\n    OEn=1;CSn=1;\n\n    //Resets the command register \n    P5MDOUT=0xFF;\n    P5=0x00;CSn=0;WEn=0;WEn=1;CSn=1;\n\n    Vpp_en=1; //8 volts is now removed\n    //test=0;\n\n    SFRPAGE=SFRPAGE_SAVE;\n}\n</code></pre>\n\n<p>I am going to assume that this code is fairly simple to follow seeing that there is a picture to go along with it detailing what I should do. If for some reason that it is hard to follow, then please let me know and I will clarify by adding code, images, etc.</p>\n\n<p>I don't believe that there is a timing issue anywhere as I have checked that with a logic analyzer. When I invoke the write command, I want to write a <code>0x55</code> to address <code>0x00000</code>, I should expect to see a <code>0x55</code> at address <code>0x00000</code>. Instead, I am reading back an empty address, <code>0xFF</code>. Therefore being forever stuck in the <code>WRITE_LOOP</code> until the right data is read in. Of course I may be blinded by my own bias so if I could get extra pairs of eyes on this and advice then I would greatly appreciate it. Thank you all.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 5, "creation_date": 1493845683, "post_id": 43770011, "comment_id": 74581515, "body": "<code>while (valueStr != NULL &amp;&amp; sscanf(valueStr, &quot;%d&quot;, values[ctr++]) != EOF);</code> : Remove last <code>;</code>"}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 1, "creation_date": 1493845863, "post_id": 43770011, "comment_id": 74581595, "body": "What does the debugger show you?  If you&#39;re not using it then you should.  You&#39;d have solved it yourself in minutes."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1493845932, "post_id": 43770011, "comment_id": 74581627, "body": "<code>sscanf(valueStr, &quot;%d&quot;, values[ctr++])</code> --&gt; <code>sscanf(valueStr, &quot;%d&quot;, &amp;values[ctr++])</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1493846102, "post_id": 43770011, "comment_id": 74581700, "body": "There are multiple things wrong. Read these comments carefully."}, {"owner": {"reputation": 235, "user_id": 1410668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4debb905a43192c6379c63839c5c335d?s=128&d=identicon&r=PG", "display_name": "user1410668", "link": "https://stackoverflow.com/users/1410668/user1410668"}, "edited": false, "score": 0, "creation_date": 1493846148, "post_id": 43770011, "comment_id": 74581726, "body": "The big mistake was forgetting the &amp; in the scanf. Anyway it works now. Thanks everyone."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1493846198, "post_id": 43770011, "comment_id": 74581747, "body": "Note that <code>sscanf(valueStr, &quot;%d&quot;, values[ctr++]) != EOF</code> will increment <code>ctr</code> even if there is a bad read. Anyway <code>sscanf</code> result should be tested with <code>1</code> not <code>EOF</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493850688, "post_id": 43770011, "comment_id": 74583473, "body": "Note <a href=\"http://stackoverflow.com/questions/3975236/how-to-use-sscanf-in-loops\">Using <code>sscanf()</code> in loops</a>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1493851830, "post_id": 43770011, "comment_id": 74583812, "body": "... and the need for a <code>-1</code> in  <code>printf(&quot;Got value %d\\n&quot;, values[ctr - 1]);</code> reinforces my previous comment. Increment <code>ctr</code> when all is good."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493918465, "post_id": 43770011, "comment_id": 74618846, "body": "When compiling, always enable the warnings, then fix those warnings (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic</code>  I also use <code>-Wconversion -std=gnu11</code> )   This will expose several problems with the posted code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493918545, "post_id": 43770011, "comment_id": 74618893, "body": "The posted code does not compile!  it is missing the needed <code>#include</code> statements.  Do you expect us to guess as to what header files your code actually included?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493918810, "post_id": 43770011, "comment_id": 74619032, "body": "after adding the missing <code>#include</code> statements for <code>stdio.h</code> and <code>string.h</code> and the parameter to <code>sscanf()</code> is corrected, there is still the problem that the parameters to the function: <code>main()</code> are not being used.  When the parameters are not being used, use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493919114, "post_id": 43770011, "comment_id": 74619213, "body": "regarding this expression: <code>sscanf(valueStr, &quot;%d&quot;, &amp;values[ctr++]) != EOF);</code> the EOF is not the correct comparison.  Rather use: <code>sscanf(valueStr, &quot;%d&quot;, &amp;values[ctr++]) == 1);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493919310, "post_id": 43770011, "comment_id": 74619314, "body": "the <code>while()</code> statement should also be checking the value of <code>ctr</code> to assure that the array <code>values[]</code> is not being overflowed.   Suggest: <code>while (valueStr != NULL              &amp;&amp; ctr &lt; 100              &amp;&amp; sscanf(valueStr, &quot;%d&quot;, &amp;values[ctr++]) == 1);</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1493919440, "post_id": 43770011, "comment_id": 74619398, "body": "The posted code contains some &#39;magic&#39; numbers.  &#39;magic&#39; numbers are numbers with no basis.  I.E. 100.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using a <code>enum</code> statement or <code>#define</code> statement to give those numbers meaningful names, then use those meaningful names throughout the code."}], "owner": {"reputation": 235, "user_id": 1410668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4debb905a43192c6379c63839c5c335d?s=128&d=identicon&r=PG", "display_name": "user1410668", "link": "https://stackoverflow.com/users/1410668/user1410668"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493845558, "creation_date": 1493845558, "question_id": 43770011, "link": "https://stackoverflow.com/questions/43770011/strtok-failing-with-segmentation-fault-in-this-code-why", "title": "strtok() failing with segmentation fault in this code.. Why?", "body": "<pre><code>int main(int argc, char *arv[])\n{\n   printf(\"Enter sequence of numbers seperated by comma\\n\");\n   char input[200];\n   char *valueStr = NULL;\n   int total = 0;\n   int values[100];\n   int ctr = 0, i = 0;\n   if (fgets(input, sizeof(input), stdin) != NULL)\n   {  // split using comma \n      printf(\"printing %s\", input);\n      valueStr = strtok(input, \",\");\n      printf(\"printing %s\", valueStr);\n      while (valueStr != NULL &amp;&amp; sscanf(valueStr, \"%d\", values[ctr++]) != EOF);\n      {\n         printf(\"Got value %d\\n\", values[ctr - 1]);\n         valueStr = strtok(NULL, \",\");\n      }\n      for (i = 0; i &lt; ctr; i++)\n         total +=values[i];\n      if (total == 0)\n         printf(\"Equals to 0\\n\");\n      else\n         printf(\"Doesn't equal to 0\\n\");\n   }\n}\n</code></pre>\n\n<p>Seems very simple to me... What am I doing wrong? Currently the output is the following:</p>\n\n<pre><code>bash-4.2$ ./subset \nEnter sequence of numbers seperated by comma\n-5,-3,-1,2,4,6\nprinting -5,-3,-1,2,4,6\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>It never gets passed strtok() and I don't see why.. I'm not passing a string literal into the function!</p>\n"}, {"tags": ["c", "gcc", "cmake", "linker"], "comments": [{"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493881782, "post_id": 43769842, "comment_id": 74593080, "body": "It&#39;s not saying it can&#39;t find <code>Unit_Test.map</code>. It wants to <i>write</i> the map file and apparently can&#39;t because the directory in which it is being told to write it doesn&#39;t exist. To get an explanation of what it wrong with the linkage command you&#39;ll need to show us the linkage command and the output that follows from it, which you&#39;ll get by running <code>make VERBOSE=</code> instead of <code>make</code>. The made-up <code>CMakeLists.txt</code> by itself is not useful."}, {"owner": {"reputation": 127, "user_id": 5745601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29aaf4910b49d24d021bb2de663a3f6?s=128&d=identicon&r=PG&f=1", "display_name": "S_Balb", "link": "https://stackoverflow.com/users/5745601/s-balb"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493921119, "post_id": 43769842, "comment_id": 74620367, "body": "@MikeKinghan, I will post the build console output for further analysis. I&#39;m not sure where Cmake wants me to explicitly state where the .map and .hex files need to go. Within this build, a main_app and a ble_app are successfully created and I couldn&#39;t find where the command exists to write their respective .map and .hex files."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493921220, "post_id": 43769842, "comment_id": 74620423, "body": "Typo in previous comment: should be <code>make VERBOSE=1</code>"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493924534, "post_id": 43769842, "comment_id": 74622212, "body": "What is the output of the command <code>ls &#47;Users&#47;sami&#47;dev&#47;Github&#47;target_debug_eclipse_files&#47;apps&#47;stim_&zwnj;&#8203;module_unit_test</code>"}, {"owner": {"reputation": 127, "user_id": 5745601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29aaf4910b49d24d021bb2de663a3f6?s=128&d=identicon&r=PG&f=1", "display_name": "S_Balb", "link": "https://stackoverflow.com/users/5745601/s-balb"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493925447, "post_id": 43769842, "comment_id": 74622746, "body": "@MikeKinghan The output of <b>/Users/sami/dev/Github/target_debug_eclipse_files/apps/unit_&zwnj;&#8203;tests</b> is: &quot;CMakeFiles&quot;, &quot;Makefile&quot;, &quot;cmake_install.cmake&quot;, and &quot;stimulation_module&quot;. An &#39;ls&#39; of &quot;stimulation_module&quot; yields: &quot;CMakeFiles&quot;, &quot;Makefile&quot;, and &quot;cmake_install.cmake&quot;."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493925818, "post_id": 43769842, "comment_id": 74622955, "body": "You haven&#39;t done that right. It cannot be the case that the directory listing of <code>&#47;Users&#47;sami&#47;dev&#47;Github&#47;target_debug_eclipse_files&#47;apps&#47;stim_&zwnj;&#8203;module_unit_test</code> is <code>&#47;Users&#47;sami&#47;dev&#47;Github&#47;target_debug_eclipse_file\u200c\u200bs&#47;apps&#47;uni&zwnj;&#8203;t_tests</code>."}, {"owner": {"reputation": 127, "user_id": 5745601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29aaf4910b49d24d021bb2de663a3f6?s=128&d=identicon&r=PG&f=1", "display_name": "S_Balb", "link": "https://stackoverflow.com/users/5745601/s-balb"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493926259, "post_id": 43769842, "comment_id": 74623205, "body": "@MikeKinghan, after you posed the question, I realized that the name of my application &quot;stim_module_unit_test&quot; must match the directory. I was able to solve the problem with your help. Thank you. My application now builds a .map file and a .hex file accordingly."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1493926434, "post_id": 43769842, "comment_id": 74623303, "body": "Yes. Your linkage option <code>-Map=&#47;Users&#47;sami&#47;dev&#47;Github&#47;target_debug_eclipse_files&#47;apps&#47;&zwnj;&#8203;stim_module_unit_tes&zwnj;&#8203;t&#47;stim_module_unit_t&zwnj;&#8203;est.map</code> asks for the map file to be written in <code>Users&#47;sami&#47;dev&#47;Github&#47;target_debug_eclipse_files&#47;apps&#47;stim_m&zwnj;&#8203;odule_unit_test&#47;</code>, which does not exist."}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 8729023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78144babed12f0b8508b71128d84278?s=128&d=identicon&r=PG&f=1", "display_name": "Marc Dirven", "link": "https://stackoverflow.com/users/8729023/marc-dirven"}, "is_accepted": false, "score": 0, "last_activity_date": 1574408721, "creation_date": 1574408721, "answer_id": 58989670, "question_id": 43769842, "link": "https://stackoverflow.com/questions/43769842/cmake-ld-cannot-open-map-file-unit-test-map-no-such-file-or-directory/58989670#58989670", "title": "Cmake: ld cannot open map file Unit_Test.map: No such file or directory", "body": "<p>In my case I had to add <code>\\\" \\\"</code>. CMake does not autoamtically add <code>\"</code> to your path. If your path (in my case) contains any spaces, you'll need to add an escape sequence with <code>\"</code> accordingly. That is for e.g. </p>\n\n<pre><code>\"${CMAKE_EXE_LINKER_FLAGS} -Wl,-Map=\\\"${PROJECT_BINARY_DIR}/${PROJECT_NAME}.map\\\"\"\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 5745601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29aaf4910b49d24d021bb2de663a3f6?s=128&d=identicon&r=PG&f=1", "display_name": "S_Balb", "link": "https://stackoverflow.com/users/5745601/s-balb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1034, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574408721, "creation_date": 1493844845, "last_edit_date": 1493921463, "question_id": 43769842, "link": "https://stackoverflow.com/questions/43769842/cmake-ld-cannot-open-map-file-unit-test-map-no-such-file-or-directory", "title": "Cmake: ld cannot open map file Unit_Test.map: No such file or directory", "body": "<p>I'm working on an embedded C project in Eclipse, cross-compiling to an M4 Cortex target. We are using Cmake (version 3.7.x) to recurse through all of the project files and build them accordingly. We have a \"Main_App\" and \"Unit_test\". The unit test depends on multiple libraries and source files from \"Main_App.\" When I go to build the \"Unit_Test\", the linker complains saying that it cannot find \"Unit_Test.map\".</p>\n\n<p>\"Cmake: ld cannot open map file Unit_Test.map: No such file or directory\"</p>\n\n<p>My CMakeLists.txt file looks as follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0.0)\n\nfile(GLOB LD_FILE *gcc_nrf52.ld)\n\ncreate_application(\n    NAME\n        \"Unit_Test\"\nPLATFORM\n        target\nINCLUDE_DIRS\n    inc\n        ../../../apps/Main_App\n        ../../../apps/Main_App/stuff\n        ../../../apps/Main_App/more_stuff\nLINKER_SCRIPT\n    ${LD_FILE}\nSOURCES\n    main.c\nLIBRARIES\n    someLib1\n    someLib2\n    someLib3\n)\n</code></pre>\n\n<p>1) Why is there no map file being created?\n2) Is my CMakeLists.txt file incorrect?\n3) Is there anything else that I'm missing in the \"Unit_Test\" directory?</p>\n\n<p>Build Console Output:</p>\n\n<pre><code>\"cd /Users/sami/dev/Github/target_debug_eclipse_files/apps/unit_tests/stimulation_module &amp;&amp; /usr/local/Cellar/cmake/3.7.1/bin/cmake -E cmake_link_script CMakeFiles/stim_module_unit_test.elf.dir/link.txt --verbose=1\n/usr/local/bin/arm-none-eabi-gcc   -mcpu=cortex-m4 -mthumb -mabi=aapcs -mfloat-abi=hard -mfpu=fpv4-sp-d16 -fno-builtin --std=gnu99 -Wall -Werror -ffunction-sections -fdata-sections -fno-strict-aliasing -fshort-enums --specs=nosys.specs -g -O1 -g   -Wl,--gc-sections -Wl,--static -Wl,--cref -mthumb -mabi=aapcs -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16 --specs=nano.specs -lc  -L/Users/sami/dev/Github/CalaTWO-NRF52832/submodules/nrf52_sdk/components/toolchain/gcc/  -Wl,-T,/Users/sami/dev/Github/CalaTWO-NRF52832/apps/unit_tests/stimulation_module/unit_tests_gcc_nrf52.ld -Xlinker -Map=/Users/sami/dev/Github/target_debug_eclipse_files/apps/stim_module_unit_test/stim_module_unit_test.map CMakeFiles/stim_module_unit_test.elf.dir/main.c.obj  -o stim_module_unit_test.elf ../../../CalaDrivers/libCalaDrivers.a ../../../MTKeystone/libMTKeystone.a ../../../submodules/nrf52_sdk/bsp/libbsp.a ../../../submodules/nrf52_sdk/components/toolchain/libtoolchain.a ../../../submodules/nrf52_sdk/components/drivers_nrf/timer/libnrf_drv_timer.a ../../../submodules/nrf52_sdk/components/libraries/scheduler/libscheduler.a ../../../submodules/nrf52_sdk/components/softdevice/libsoftdevice.a ../../../submodules/nrf52_sdk/components/ble/libble.a ../../../submodules/nrf52_sdk/components/libraries/sensorsim/libsensorsim.a ../../../submodules/nrf52_sdk/components/drivers_nrf/rng/libnrf_drv_rng.a ../../../submodules/nrf52_sdk/components/drivers_nrf/twi_master/libtwi_master.a ../../../submodules/nrf52_sdk/components/drivers_nrf/spi_master/libspi_master.a ../../../submodules/nrf52_sdk/components/drivers_nrf/pwm/libnrf_drv_pwm.a ../../../submodules/nrf52_sdk/components/libraries/fds/libfds.a ../../../submodules/nrf52_sdk/components/libraries/fstorage/libfstorage.a ../../../submodules/nrf52_sdk/components/libraries/trace/libtrace.a ../../../submodules/nrf52_sdk/components/drivers_nrf/ble_flash/libble_flash.a ../../../submodules/nrf52_sdk/components/drivers_nrf/pstorage/libpstorage.a ../../../submodules/nrf52_sdk/bsp/libbsp.a ../../../submodules/nrf52_sdk/components/libraries/scheduler/libscheduler.a ../../../submodules/nrf52_sdk/components/softdevice/libsoftdevice.a ../../../submodules/nrf52_sdk/components/libraries/button/libbutton.a ../../../submodules/nrf52_sdk/components/drivers_nrf/hal/libhal.a ../../../submodules/nrf52_sdk/components/libraries/timer/libtimer.a ../../../submodules/nrf52_sdk/components/libraries/util/libutil.a ../../../submodules/nrf52_sdk/components/drivers_nrf/common/libcommon.a ../../../submodules/nrf52_sdk/components/drivers_nrf/clock/libclock.a ../../../submodules/nrf52_sdk/components/drivers_nrf/gpiote/libnrf_drv_gpiote.a ../../../submodules/nrf52_sdk/components/drivers_nrf/delay/libdelay.a ../../../submodules/nrf52_sdk/components/libraries/uart/libuart.a ../../../submodules/nrf52_sdk/components/libraries/fifo/libfifo.a ../../../submodules/nrf52_sdk/components/drivers_nrf/uart/libnrf_drv_uart.a ../../../submodules/nrf52_sdk/bsp/libbsp.a ../../../submodules/nrf52_sdk/components/libraries/scheduler/libscheduler.a ../../../submodules/nrf52_sdk/components/softdevice/libsoftdevice.a ../../../submodules/nrf52_sdk/components/libraries/button/libbutton.a ../../../submodules/nrf52_sdk/components/drivers_nrf/hal/libhal.a ../../../submodules/nrf52_sdk/components/libraries/timer/libtimer.a ../../../submodules/nrf52_sdk/components/libraries/util/libutil.a ../../../submodules/nrf52_sdk/components/drivers_nrf/common/libcommon.a ../../../submodules/nrf52_sdk/components/drivers_nrf/clock/libclock.a ../../../submodules/nrf52_sdk/components/drivers_nrf/gpiote/libnrf_drv_gpiote.a ../../../submodules/nrf52_sdk/components/drivers_nrf/delay/libdelay.a ../../../submodules/nrf52_sdk/components/libraries/uart/libuart.a ../../../submodules/nrf52_sdk/components/libraries/fifo/libfifo.a ../../../submodules/nrf52_sdk/components/drivers_nrf/uart/libnrf_drv_uart.a ../../../submodules/nrf52_sdk/components/toolchain/libtoolchain.a ../../../submodules/nrf52_sdk/components/toolchain/libtoolchain.a \n**/usr/local/Caskroom/gcc-arm-embedded/5_4-2016q3,20160926/gcc-arm-none-eabi-5_4-2016q3/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/bin/ld: cannot open map file /Users/sami/dev/Github/target_debug_eclipse_files/apps/stim_module_unit_test/stim_module_unit_test.map: No such file or directory\ncollect2: error: ld returned 1 exit status**\nmake[2]: *** [apps/unit_tests/stimulation_module/stim_module_unit_test.elf] Error 1\nmake[1]: *** [apps/unit_tests/stimulation_module/CMakeFiles/stim_module_unit_test.elf.dir/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\n[ 89%] Built target i2s\n[ 90%] Linking C executable cala_stim_therapy.elf\ncd /Users/sami/dev/Github/target_debug_eclipse_files/apps/cala_stim_therapy &amp;&amp; /usr/local/Cellar/cmake/3.7.1/bin/cmake -E cmake_link_script CMakeFiles/cala_stim_therapy.elf.dir/link.txt --verbose=1\n/usr/local/bin/arm-none-eabi-gcc   -mcpu=cortex-m4 -mthumb -mabi=aapcs -mfloat-abi=hard -mfpu=fpv4-sp-d16 -fno-builtin --std=gnu99 -Wall -Werror -ffunction-sections -fdata-sections -fno-strict-aliasing -fshort-enums --specs=nosys.specs -g -O1 -g   -Wl,--gc-sections -Wl,--static -Wl,--cref -mthumb -mabi=aapcs -mcpu=cortex-m4 -mfloat-abi=hard -mfpu=fpv4-sp-d16 --specs=nano.specs -lc  -L/Users/sami/dev/Github/CalaTWO-NRF52832/submodules/nrf52_sdk/components/toolchain/gcc/  -Wl,-T,/Users/sami/dev/Github/CalaTWO-NRF52832/apps/cala_stim_therapy/cala_stim_therapy_gcc_nrf52.ld -Xlinker -Map=/Users/sami/dev/Github/target_debug_eclipse_files/apps/cala_stim_therapy/cala_stim_therapy.map CMakeFiles/cala_stim_therapy.elf.dir/ble/ble_test.c.obj CMakeFiles/cala_stim_therapy.elf.dir/console/RetargetSerial.c.obj CMakeFiles/cala_stim_therapy.elf.dir/console/Commands.c.obj CMakeFiles/cala_stim_therapy.elf.dir/resources/glyphs.c.obj CMakeFiles/cala_stim_therapy.elf.dir/resources/GlyphsLibrary.c.obj CMakeFiles/cala_stim_therapy.elf.dir/modules/TopStateMachine.c.obj CMakeFiles/cala_stim_therapy.elf.dir/modules/Power.c.obj CMakeFiles/cala_stim_therapy.elf.dir/modules/UserInterface.c.obj CMakeFiles/cala_stim_therapy.elf.dir/modules/Band.c.obj CMakeFiles/cala_stim_therapy.elf.dir/modules/Stim.c.obj CMakeFiles/cala_stim_therapy.elf.dir/modules/SystemMonitor.c.obj CMakeFiles/cala_stim_therapy.elf.dir/pharmacy/Pharmacy.c.obj CMakeFiles/cala_stim_therapy.elf.dir/main.c.obj  -o cala_stim_therapy.elf ../../CalaDrivers/libCalaDrivers.a ../../MTKeystone/libMTKeystone.a ../../submodules/nrf52_sdk/bsp/libbsp.a ../../submodules/nrf52_sdk/components/toolchain/libtoolchain.a ../../submodules/nrf52_sdk/components/drivers_nrf/timer/libnrf_drv_timer.a ../../submodules/nrf52_sdk/components/libraries/scheduler/libscheduler.a ../../submodules/nrf52_sdk/components/softdevice/libsoftdevice.a ../../submodules/nrf52_sdk/components/ble/libble.a ../../submodules/nrf52_sdk/components/libraries/sensorsim/libsensorsim.a ../../submodules/nrf52_sdk/components/drivers_nrf/rng/libnrf_drv_rng.a ../../submodules/nrf52_sdk/components/drivers_nrf/twi_master/libtwi_master.a ../../submodules/nrf52_sdk/components/drivers_nrf/spi_master/libspi_master.a ../../submodules/nrf52_sdk/components/drivers_nrf/pwm/libnrf_drv_pwm.a ../../submodules/nrf52_sdk/components/libraries/fds/libfds.a ../../submodules/nrf52_sdk/components/libraries/fstorage/libfstorage.a ../../submodules/nrf52_sdk/components/libraries/trace/libtrace.a ../../submodules/nrf52_sdk/components/drivers_nrf/ble_flash/libble_flash.a ../../submodules/nrf52_sdk/components/drivers_nrf/pstorage/libpstorage.a ../../submodules/nrf52_sdk/bsp/libbsp.a ../../submodules/nrf52_sdk/components/libraries/scheduler/libscheduler.a ../../submodules/nrf52_sdk/components/softdevice/libsoftdevice.a ../../submodules/nrf52_sdk/components/libraries/button/libbutton.a ../../submodules/nrf52_sdk/components/drivers_nrf/hal/libhal.a ../../submodules/nrf52_sdk/components/libraries/timer/libtimer.a ../../submodules/nrf52_sdk/components/libraries/util/libutil.a ../../submodules/nrf52_sdk/components/drivers_nrf/common/libcommon.a ../../submodules/nrf52_sdk/components/drivers_nrf/clock/libclock.a ../../submodules/nrf52_sdk/components/drivers_nrf/gpiote/libnrf_drv_gpiote.a ../../submodules/nrf52_sdk/components/drivers_nrf/delay/libdelay.a ../../submodules/nrf52_sdk/components/libraries/uart/libuart.a ../../submodules/nrf52_sdk/components/libraries/fifo/libfifo.a ../../submodules/nrf52_sdk/components/drivers_nrf/uart/libnrf_drv_uart.a ../../submodules/nrf52_sdk/bsp/libbsp.a ../../submodules/nrf52_sdk/components/libraries/scheduler/libscheduler.a ../../submodules/nrf52_sdk/components/softdevice/libsoftdevice.a ../../submodules/nrf52_sdk/components/libraries/button/libbutton.a ../../submodules/nrf52_sdk/components/drivers_nrf/hal/libhal.a ../../submodules/nrf52_sdk/components/libraries/timer/libtimer.a ../../submodules/nrf52_sdk/components/libraries/util/libutil.a ../../submodules/nrf52_sdk/components/drivers_nrf/common/libcommon.a ../../submodules/nrf52_sdk/components/drivers_nrf/clock/libclock.a ../../submodules/nrf52_sdk/components/drivers_nrf/gpiote/libnrf_drv_gpiote.a ../../submodules/nrf52_sdk/components/drivers_nrf/delay/libdelay.a ../../submodules/nrf52_sdk/components/libraries/uart/libuart.a ../../submodules/nrf52_sdk/components/libraries/fifo/libfifo.a ../../submodules/nrf52_sdk/components/drivers_nrf/uart/libnrf_drv_uart.a ../../submodules/nrf52_sdk/components/toolchain/libtoolchain.a ../../submodules/nrf52_sdk/components/toolchain/libtoolchain.a \n[ 91%] Built target led_softblink\n[ 97%] Built target cala_stim_therapy.elf\nmake: *** [all] Error 2 \"\n</code></pre>\n"}, {"tags": ["c", "file"], "comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493845033, "post_id": 43769787, "comment_id": 74581141, "body": "Are you reading from a file or stdin?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1493845048, "post_id": 43769787, "comment_id": 74581148, "body": "You have <code>char c;</code> \u2014 if plain <code>char</code> is an unsigned type, you never get the comparison with EOF true.  See: <a href=\"http://stackoverflow.com/questions/13694394/while-c-getcfile-eof-loop-wont-stop-executing/\"><code>while ((c = getc(fp)) != EOF)</code> won&#39;t stop executing</a>.  Use <code>int c;</code> \u2014 always.  However, as @BLUEPIXY points out, your <code>getLine()</code> function is reading from standard input, not the file stream you opened.  You need to revise the code to pass the file stream to the <code>getLine()</code> function and then use it to read characters.  Then you might run into the problem I diagnosed."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493845051, "post_id": 43769787, "comment_id": 74581150, "body": "You use <code>fgetc</code> instead of <code>getchar</code> with file pointer <code>pFile</code>."}, {"owner": {"reputation": 57, "user_id": 5609887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e540974db313925f996ad6ff0809e52?s=128&d=identicon&r=PG&f=1", "display_name": "wait_wut", "link": "https://stackoverflow.com/users/5609887/wait-wut"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493860467, "post_id": 43769787, "comment_id": 74585749, "body": "I&#39;ve edited my code and followed what @JonathanLeffler said, but I&#39;m still getting the same behavior. Please check the edit."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493860609, "post_id": 43769787, "comment_id": 74585785, "body": "Open the file once in the main program as before. Pass the file pointer as a third argument to <code>getLine()</code>.  Compare with <code>fgets()</code>."}, {"owner": {"reputation": 57, "user_id": 5609887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e540974db313925f996ad6ff0809e52?s=128&d=identicon&r=PG&f=1", "display_name": "wait_wut", "link": "https://stackoverflow.com/users/5609887/wait-wut"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493861105, "post_id": 43769787, "comment_id": 74585915, "body": "@JonathanLeffler that worked perfectly. Thank you. Could you please explain why the file needs to opened in main?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493863614, "post_id": 43769787, "comment_id": 74586586, "body": "Mainly because by opening and closing the file each time in the function, you keep on rereading the first line of the file."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1493971644, "post_id": 43769787, "comment_id": 74639148, "body": "What should your program do with the following snippet: <code>f(a[)];</code>  Should it be correctly passed as good?  both kinds of parens are balanced, but incorrectly."}], "owner": {"reputation": 57, "user_id": 5609887, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e540974db313925f996ad6ff0809e52?s=128&d=identicon&r=PG&f=1", "display_name": "wait_wut", "link": "https://stackoverflow.com/users/5609887/wait-wut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493860075, "creation_date": 1493844666, "last_edit_date": 1493860075, "question_id": 43769787, "link": "https://stackoverflow.com/questions/43769787/program-is-not-reading-c-file", "title": "Program is not reading .c file", "body": "<p>I've been following some examples from the K&amp;R book to improve my programming skills. This happens to be example 1-24.</p>\n\n<p>I've written a program that checks a C program for syntax errors like unmatched parentheses, brackets, comments, etc. My problem is that when I run the program, it seems to get stuck in an infinite loop and I'm not entirely sure why. I believe it has to do with 'EOF', which is suppose to get a character until the end of the file is reached.</p>\n\n<pre><code>(c = getchar()) != EOF\n</code></pre>\n\n<p>The idea is to either increment or decrement a variable depending which character is in the array.</p>\n\n<p>I'm not entirely sure if I'm opening the .c file correctly either. The .c file is located in the same directory as the program to make sure it knows where it's located.</p>\n\n<p>getLine() was written by K&amp;R, but I've written everything else myself.</p>\n\n<p>My code:</p>\n\n<pre><code>/* Includes ------------------------------------------------------------------*/\n#include &lt;stdio.h&gt;\n\n/* Typedef -------------------------------------------------------------------*/\n/* Define Contant-------------------------------------------------------------*/\n#define MAX     1000\n\n/* Macro ---------------------------------------------------------------------*/\n/* Global variables ----------------------------------------------------------*/\n/* Function prototypes -------------------------------------------------------*/\nint getLine(char str[], int lim);\nvoid printErrors(int parentheses, int braces, int brackets, \n                        int singleQ, int doubleQ, int comments);\n\n//Checks for the following:\n// () {} [] \"\" ' ' /* */\n\nint main(void) \n{\n    char line[MAX];\n    int i, parentheses, braces, brackets, singleQ, doubleQ, comments;\n    parentheses = braces = brackets = singleQ = doubleQ = comments = 0;\n\n    //Open the file\n    FILE *pFile = fopen(\"test.c\", \"r\");\n\n    while( getLine(line, MAX) &gt; 0)\n    {\n        for(i = 0; line[i] != '\\0'; ++i)\n        {\n        //check for syntax balance\n            if( line[i] == '(' )\n                ++parentheses;\n            else if( line[i] == ')' )\n                --parentheses;\n            else if( line[i] == '{' )\n                ++braces;\n            else if( line[i] == '}' )\n                --braces;\n            else if( line[i] == '[' )\n                ++brackets;\n            else if( line[i] == ']' )\n                --brackets;\n            else if( line[i] == '\\'' )\n            {\n                if( !singleQ )\n                    ++singleQ;\n                else\n                    --singleQ;\n            }\n            else if( line[i] == '\"' )\n            {\n                if( !doubleQ )\n                    ++doubleQ;\n                else\n                    --doubleQ;\n            }\n            else if( (line[i] == '/') &amp;&amp; (line[i+1] == '*') )\n                ++comments;\n            else if( (line[i] == '*') &amp;&amp; (line[i+1] == '/') )\n                --comments;\n\n        }\n    }\n\n    fclose(pFile);\n\n    printErrors(parentheses, braces, brackets, singleQ, doubleQ, comments);\n\n    return 0;\n}\nvoid printErrors(int parentheses, int braces, int brackets, \n                        int singleQ, int doubleQ, int comments) \n{\n    printf(\"\\n\\nPositive interger indicates an extra opening bracket\\n\");\n    printf(\"\\nNegative interger indicates an extra closing bracket\\n\\n\");\n\n    printf(\"Parenthesis Errors: %d\\n\", parentheses);\n    printf(\"Brace Errors: %d\\n\", braces);\n    printf(\"Bracket Errors: %d\\n\", brackets);\n    printf(\"Single Quote Errors: %d\\n\", singleQ);\n    printf(\"Double Quote Errors: %d\\n\", doubleQ);\n    printf(\"Comment Errors: %d\\n\", comments);\n}\n\n\nint getLine(char str[], int lim)\n{\n\n    char c;\n    int i = 0;\n\n    while( (i &lt; lim -1) &amp;&amp; ((c = getchar()) != EOF) &amp;&amp; (c != '\\n') ) \n    {\n        str[i] = c;\n        ++i;\n    }\n\n    if( c == '\\n' ) \n    {\n        str[i] = '\\n';\n        ++i;\n    }\n    str[i] = '\\0';\n    return i;\n}\n</code></pre>\n\n<p>EDIT: I've changed <code>char c</code> to <code>int c</code>, I also used <code>fgetc()</code>, and have moved opening/closing the .c file inside function <code>getLine</code>, but it still has the same behavior. Any other suggestions are greatly appreciated. </p>\n\n<pre><code>int getLine(char str[], int lim)\n{\n\n    int c;\n    int i = 0;\n\n    //Open the file\n    FILE *pFile = fopen(\"test.c\", \"r\");\n\n    while( (i &lt; lim -1) &amp;&amp; ((c = fgetc(pFile)) != EOF) &amp;&amp; (c != '\\n') ) \n    {\n        str[i] = c;\n        ++i;\n    }\n\n    if( c == '\\n' ) \n    {\n        str[i] = '\\n';\n        ++i;\n    }\n    str[i] = '\\0';\n    fclose(pFile);\n\n    return i;\n}\n</code></pre>\n"}, {"tags": ["c", "conways-game-of-life"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1493881147, "post_id": 43769559, "comment_id": 74592665, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/143359/discussion-on-question-by-a-hunter-conways-game-of-life-segfault-11\">moved to chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493845681, "post_id": 43770003, "comment_id": 74581512, "body": "While it is good advice and correct about 2D arrays, it does not answer the question. It is mostly what I write in my comments already."}, {"owner": {"reputation": 11, "user_id": 7959774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6ae9acadd7e71b233598c5a68da810?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hunter", "link": "https://stackoverflow.com/users/7959774/a-hunter"}, "edited": false, "score": 0, "creation_date": 1493846339, "post_id": 43770003, "comment_id": 74581817, "body": "updated above, still can&#39;t put my finger on what&#39;s wrong."}], "tags": [], "owner": {"reputation": 318, "user_id": 1203371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a85501fd76c1f04754349f6b0ce651?s=128&d=identicon&r=PG", "display_name": "Jeff D.", "link": "https://stackoverflow.com/users/1203371/jeff-d"}, "is_accepted": false, "score": -1, "last_activity_date": 1493845493, "last_edit_date": 1495541886, "creation_date": 1493845493, "answer_id": 43770003, "question_id": 43769559, "link": "https://stackoverflow.com/questions/43769559/conways-game-of-life-segfault-11/43770003#43770003", "title": "Conway&#39;s Game of Life, Segfault 11", "body": "<p>You are not declaring a two-dimensional array with that syntax, so the memory is not aligned the way you think, thus a segmentation fault.  Declaring a pointer int** does not make it a 2-D array. (Surely you don't think int *** would get you a data cube ?).  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/10116368/heap-allocate-a-2d-array-not-array-of-pointers\">Heap allocate a 2D array (not array of pointers)</a></p>\n\n<p>One of the comments above gives the other problem, the zero parameter to a C program argv[0] is the name of the program, not the first parameter on the command line, that is argv[1].</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7959774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6ae9acadd7e71b233598c5a68da810?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hunter", "link": "https://stackoverflow.com/users/7959774/a-hunter"}, "edited": false, "score": 0, "creation_date": 1493846678, "post_id": 43770239, "comment_id": 74581958, "body": "I think there&#39;s more than one, because when I took that code out entirely and just passed constants I still had problems"}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "reply_to_user": {"reputation": 11, "user_id": 7959774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6ae9acadd7e71b233598c5a68da810?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hunter", "link": "https://stackoverflow.com/users/7959774/a-hunter"}, "edited": false, "score": 1, "creation_date": 1493846718, "post_id": 43770239, "comment_id": 74581973, "body": "Debugger is your friend then ;-)"}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "reply_to_user": {"reputation": 11, "user_id": 7959774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6ae9acadd7e71b233598c5a68da810?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hunter", "link": "https://stackoverflow.com/users/7959774/a-hunter"}, "edited": false, "score": 0, "creation_date": 1493849797, "post_id": 43770239, "comment_id": 74583168, "body": "May I suggest you use a graphical IDE? Like the free MS Visual Studio (on Windows). A debugger is integrated in there and is quite easy to use."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493852730, "post_id": 43770239, "comment_id": 74584074, "body": "@YePhIcK: An IDE is not required for debugging. gdb works fine on the console."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 11, "user_id": 7959774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6ae9acadd7e71b233598c5a68da810?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hunter", "link": "https://stackoverflow.com/users/7959774/a-hunter"}, "edited": false, "score": 1, "creation_date": 1493852892, "post_id": 43770239, "comment_id": 74584122, "body": "@A.Hunter: YOu have to compile with debug support enabled. No offence, but you really should do some tutorials on the fundamentals before you start such a project. That should have been part of your class actually beforehand."}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493853106, "post_id": 43770239, "comment_id": 74584195, "body": "@Olaf of course and IDE is not <i>required</i>. Was just trying to suggest something &quot;easy&quot; for the situation"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493853260, "post_id": 43770239, "comment_id": 74584247, "body": "@YePhIcK A full-gorwn IDE is definitively not &quot;something easy&quot; to start with. A first approach might be <code>printf</code> debugging. Anyway, that whole question is messed up too much anyway. I just suggested OP to delete it and first process all the comments. Quite a lot for a beginner to comprehend already."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493853415, "post_id": 43770239, "comment_id": 74584295, "body": "@YePhIcK: Note that if he can use VLAs, he is not using MSVC. And as this is not standard compliant and does not support VLAs, I strongly discourage using it anyway. A modern compiler like gcc or clang would be free, too and compliant."}, {"owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "edited": false, "score": 0, "creation_date": 1493853442, "post_id": 43770239, "comment_id": 74584302, "body": "A learning curve for a graphical IDE is much smoother than for a command-line environment, IMHO. But I agree with the suggestion to OP to get some basics covered before proceeding further."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493853509, "post_id": 43770239, "comment_id": 74584321, "body": "Smoother != faster."}, {"owner": {"reputation": 11, "user_id": 7959774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6ae9acadd7e71b233598c5a68da810?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hunter", "link": "https://stackoverflow.com/users/7959774/a-hunter"}, "edited": false, "score": 0, "creation_date": 1493934723, "post_id": 43770239, "comment_id": 74627383, "body": "I&#39;m compiling with clang and I put -g in the Makefile. I don&#39;t understand why you&#39;re all being condescending, I know how to use a debugger but in this particular situation it isn&#39;t giving me useful information and if you all think that I&#39;m being too dense you can leave the thread."}], "tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": false, "score": 0, "last_activity_date": 1493846694, "last_edit_date": 1493846694, "creation_date": 1493846548, "answer_id": 43770239, "question_id": 43769559, "link": "https://stackoverflow.com/questions/43769559/conways-game-of-life-segfault-11/43770239#43770239", "title": "Conway&#39;s Game of Life, Segfault 11", "body": "<p>I just copied your entire code and tried to run the program. The memory access violation (at least for me) is in this line:</p>\n\n<pre><code>int sidex = atoi(argv[0]);\nint sidey = atoi(argv[1]);    &lt;-- memory access violation\n</code></pre>\n\n<p>The reason is (in my case at least) that I just ran the program with no arguments.</p>\n\n<p>Now, even if I did provide the arguments on the command line the indexing is still off. The first argument <code>argv[0]</code> is the <strong>name of the executable</strong>, not the first argument after the name.</p>\n\n<p>So, a few things to note for your code:</p>\n\n<ol>\n<li>It is not guaranteed that there <em>will</em> be arguments. You should always check the <code>argc</code> to make sure you can index into <code>argv</code></li>\n<li>Those arguments are not guaranteed to be integer numbers either - you better check for that too, before you use them as your dimensions</li>\n</ol>\n\n<p>Of course with the indexing shift you should adjust for your \"array reading\" code accordingly as well. But once you fix the indexing this should be an easy one for you</p>\n"}], "owner": {"reputation": 11, "user_id": 7959774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa6ae9acadd7e71b233598c5a68da810?s=128&d=identicon&r=PG&f=1", "display_name": "A. Hunter", "link": "https://stackoverflow.com/users/7959774/a-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1493852949, "creation_date": 1493843855, "last_edit_date": 1493852949, "question_id": 43769559, "link": "https://stackoverflow.com/questions/43769559/conways-game-of-life-segfault-11", "title": "Conway&#39;s Game of Life, Segfault 11", "body": "<p>I'm trying to write Conway's game of life in C. This is what I have so far. I'm using pointers to refer to the arrays, which has never caused me problems before, but the function place_cell is causing a segfault. </p>\n\n<p>Here's what I've tried so far:\n - I tried making the grid with constants, 100 x 100, and 10 x 10. Modifying\n   values inside of those constant grids still gives me a segfault.\n - I tried using constants for place_cell, still got a segfault.</p>\n\n<pre><code>int** make_grid(int x, int y) {\n    int** is = (int**)malloc(sizeof(int*) * y);\n    if(! is) {\n        fprintf(stderr, \"make_grid: malloc failed\");\n        exit(1);\n    }\n    int j;\n    for(j = 0; j &lt; y; j++) {\n        is[j] = (int*)malloc(sizeof(int) * x);\n        if(!is[j]) {\n            fprintf(stderr, \"make_grid: malloc failed\");\n            exit(1);\n        }\n    }\n    return is;\n}\n\n/* takes two integers and places a cell at those coords */\nvoid place_cell(int** is, int sidex, int sidey, int x, int y) {\n    if(x &gt;= sidex || y &gt;= sidey) {\n        fprintf(stderr, \"place_cell: out of grid range\\n\");\n        exit(1);\n    }\n    is[y][x] = 1;\n}\n\nint check_surroundings(int** is, int sidex,\n                       int sidey, int x, int y) {\n    int y_less = y - 1;\n    if(y == 0) {\n        y_less = sidey - 1;\n    }\n    int y_more = y + 1;\n    if(y == sidey - 1) {\n        y_more = 0;\n    }\n    int x_less = x - 1;\n    if(x == 0) {\n        x_less = sidex - 1;\n    }\n    int x_more = x + 1;\n    if(x == sidex - 1) {\n        x_more = 0;\n    }\n    int p = is[y_less][x_less] +\n        is[y_less][x] +\n        is[y_less][x_more] +\n        is[y][x_less] +\n        is[y][x_more] +\n        is[y_more][x_less] +\n        is[y_more][x_less] +\n        is[y_more][x_more];\n    return p;\n}\n\nvoid change_condition(int** is,\n                      int sidex, int sidey, int x, int y) {\n    int* state = &amp;is[y][x];\n    int surr = check_surroundings(is, sidex, sidey, x, y);\n    if(surr &gt; 3) {\n        *state = 0;\n    } else if(surr == 3 || surr == 2) {\n        *state = 1;\n    } else {\n        *state = 0;\n    }\n}\n\nvoid print_grid(int** is, int sidex, int sidey) {\n    int i, j;\n    for(i = 0; i &lt; sidey; i++) {\n        for(j = 0; j &lt; sidex; j++) {\n            if(is[i][j] == 1) {\n                printf(\"*\");\n            } else {\n                printf(\" \");\n            }\n        }\n        printf(\"\\n\");\n    }\n}\n\nvoid new_generation(int** is, int sidex, int sidey) {\n    int i, j;\n    for(i = 0; i &lt; sidey; i++) {\n        for(j = 0; j &lt; sidex; j++) {\n            change_condition(is, sidex, sidey, j, i);\n        }\n    }\n}\n\nvoid play(int** is, int sidex, int sidey) {\n    int i = 0;\n    while(i &lt; 100) {\n        new_generation(is, sidex, sidey);\n        print_grid(is, sidex, sidey);\n        i++;\n    }\n}\n</code></pre>\n\n<p>here's my main:</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n\n    int sidex = atoi(argv[0]);\n    int sidey = atoi(argv[1]);\n    int** is = make_grid(10, 10);\n    int i;\n    for(i = 2; i &lt; argc; i += 2) {\n        place_cell(is, sidex, sidey,\n                   atoi(argv[i]), atoi(argv[i + 1]));\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>edit: </p>\n\n<pre><code>int** make_grid(int x, int y) {\n    int (*is)[x] = (int*)malloc(sizeof(int) * y * x);\n    if(! is) {\n        fprintf(stderr, \"make_grid: malloc failed\");\n        exit(1);\n    }\n    int j;\n    for(j = 0; j &lt; y; j++) {\n        is[j] = (int*)malloc(sizeof(int) * x);\n        if(!is[j]) {\n            fprintf(stderr, \"make_grid: malloc failed\");\n            exit(1);\n        }\n    }\n    return is;\n}\n</code></pre>\n\n<p>This isn't right at all but I can't put my finger on why. Can someone explain to me what to change like I'm five? (a five year-old who knows C, I guess)  </p>\n"}, {"tags": ["c", "mpi"], "comments": [{"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 3, "creation_date": 1493846184, "post_id": 43769522, "comment_id": 74581741, "body": "A solution with RMA will be complicated (and possibly more overhead). It can be done much simpler with a non-blocking wildcard receive( <code>MPI_Irecv</code> with <code>MPI_ANY_SOURCE</code>) and an <code>MPI_Test</code> once in every iteration of your application&#39;s loop."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "reply_to_user": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1529071783, "post_id": 43769522, "comment_id": 88756482, "body": "@Arash using MPI_Ibarrier is more efficient if you want all the other processes to detect termination."}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1529466383, "post_id": 43769522, "comment_id": 88877734, "body": "@Jeff If a process enters a barrier, how can it still make progress toward solving the problem? Please see the question one more time.... He wants to detect termination while still working..."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1529467379, "post_id": 43769522, "comment_id": 88877943, "body": "MPI_Ibarrier is nonblocking. Please look it up. Torsten Hoefler has a paper showing how to use it for asynchronous termination detection."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1529467641, "post_id": 43769522, "comment_id": 88878005, "body": "<a href=\"http://htor.inf.ethz.ch/publications/index.php?pub=99\" rel=\"nofollow noreferrer\">htor.inf.ethz.ch/publications/index.php?pub=99</a>"}, {"owner": {"reputation": 1700, "user_id": 3517823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ead39c453c59e5666b801a3a17919d?s=128&d=identicon&r=PG&f=1", "display_name": "Arash", "link": "https://stackoverflow.com/users/3517823/arash"}, "edited": false, "score": 0, "creation_date": 1529530905, "post_id": 43769522, "comment_id": 88912297, "body": "Oops. I missed the I in MPI_Ibarrier... yep you are right."}], "owner": {"reputation": 11, "user_id": 7959782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f74664ee814d48d1de4965d03afbf4d?s=128&d=identicon&r=PG&f=1", "display_name": "Levente Szabo", "link": "https://stackoverflow.com/users/7959782/levente-szabo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493843682, "creation_date": 1493843682, "question_id": 43769522, "link": "https://stackoverflow.com/questions/43769522/mpi-rma-communication", "title": "MPI RMA communication", "body": "<p>Currently I am trying to solve an identical problem with different initial conditions on multiple processors. The set up is currently with MPI and C. I want the first processor who finds a solution to signal to all the others to stop and suppress output. </p>\n\n<p>How does one solve this with RMA, would I need to create a locking structure?  </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493843660, "post_id": 43769437, "comment_id": 74580440, "body": "Where is your code?  Smallest type size is a byte which is char type."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1493843777, "post_id": 43769437, "comment_id": 74580496, "body": "The absolute most compact way is sorting the entire collection by this state and keeping a pointer to the beginning of each section. You could also treat the sequence of states as a large base-3 integer and convert it to base-256 for storage. Both of those are impractical for a lot of cases, though \u2013 what\u2019s yours? There are lots of halfways to the first one, too: compress the sequence of 2-bit values, just heapify it, \u2026 and halfways to the second: convert to base-3 for chunks of n items, \u2026."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493843920, "post_id": 43769437, "comment_id": 74580572, "body": "Data can be compressed in various forms with trade-off of access time.  &quot; large number of items:&quot; is vague, 1, 1M 1T, what?"}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493844416, "post_id": 43769437, "comment_id": 74580816, "body": "@Nguaial: I added some quick sample code; I&#39;m not 100% sure if it&#39;ll work perfectly, but I think it gives an idea of what I&#39;m asking about."}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1493844456, "post_id": 43769437, "comment_id": 74580833, "body": "@Ryan: I&#39;ve updated the question with more information to answer my use case."}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493844462, "post_id": 43769437, "comment_id": 74580840, "body": "@chux: I&#39;ve updated the question with more information to answer my use case."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493845110, "post_id": 43769437, "comment_id": 74581189, "body": "@tonysdg With a base 3 implementation (as with 3+ answers) , the space needed will be 3/4 of what you have posted with modest access times.  If the 3 states occur in consistent proportions like max 10%, max 50%, max 50%, then hamming codes can be used.  Data can be compressed, even typical binary data is reduced 50% - yet that takes time.  So unless you have more time than memory, the base 3 solution are your best shot.  Else, you need to supply more info describing the use case.   Further, what is wrong/weak with your solution?  Looks sufficient."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1493855329, "post_id": 43769437, "comment_id": 74584802, "body": "I&#39;d use four states anyway: free/clear, valid/in use, invalid/garbage, and damaged/reserved for other use."}], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 0, "creation_date": 1493844533, "post_id": 43769532, "comment_id": 74580885, "body": "At the risk of sounding like an idiot, how would I implement this on a binary system?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1493845907, "post_id": 43769532, "comment_id": 74581616, "body": "<code>flags%3</code> to get the first value, <code>(flags&#47;3)%3</code> to get the second, etc. It might be easier if you first think about it in base 10 - you&#39;re just extracting digits."}, {"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1493875087, "post_id": 43769532, "comment_id": 74589622, "body": "That&#39;s really and completelly elegant. Just perfect."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 3, "last_activity_date": 1493843738, "creation_date": 1493843738, "answer_id": 43769532, "question_id": 43769437, "link": "https://stackoverflow.com/questions/43769437/whats-the-most-compact-way-to-store-a-ternary-value/43769532#43769532", "title": "What&#39;s the most compact way to store a ternary value?", "body": "<p>Base 3</p>\n\n<pre><code>0, 1, 2\n10, 11, 12, /* 3, 4, 5 in base 10 */\n20, 21, 22 /* 6, 7, 8 */\n100, 101, 102 /* 9, 10, 11 */\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "is_accepted": false, "score": 1, "last_activity_date": 1493843961, "creation_date": 1493843961, "answer_id": 43769589, "question_id": 43769437, "link": "https://stackoverflow.com/questions/43769437/whats-the-most-compact-way-to-store-a-ternary-value/43769589#43769589", "title": "What&#39;s the most compact way to store a ternary value?", "body": "<p>If performance is not a concern, you could fit five ternary values per 8-bit char. the first ternary value is stored as <code>x</code>, the second is stored as <code>x*3</code>, the third is stored as <code>x*3*3</code>, the fourth as <code>x*3*3*3</code>... etc.</p>\n\n<p>To get the zeroth ternary value from the <code>char</code>, which let's call <code>y</code>, you'd take <code>y % 3</code>. To get the second ternary value, take <code>(y/3) % 3</code>, <code>(y/(3*3)) % 3</code> for the third... etc.</p>\n\n<p>This will result in much more divisions than if you settled for storing 4 ternary values per char, but you can squeeze in an extra value through this method.</p>\n"}, {"comments": [{"owner": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 0, "creation_date": 1493875404, "post_id": 43769594, "comment_id": 74589743, "body": "I see, that&#39;s really smart, good... really nice. I&#39;m not sure if in every architecture 1 byte is really one byte, I read in this quora art (<a href=\"https://www.quora.com/Why-does-a-character-in-C-need-only-1-byte\" rel=\"nofollow noreferrer\">quora.com/Why-does-a-character-in-C-need-only-1-byte</a>) that it&#39;s depends on some factors."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 14537, "user_id": 7128034, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/T8aRg.jpg?s=128&g=1", "display_name": "Dami&#225;n Rafael Lattenero", "link": "https://stackoverflow.com/users/7128034/dami%c3%a1n-rafael-lattenero"}, "edited": false, "score": 1, "creation_date": 1493875756, "post_id": 43769594, "comment_id": 74589885, "body": "All POSIX systems have 8-bit bytes. Read more here <a href=\"http://stackoverflow.com/questions/2098149/what-platforms-have-something-other-than-8-bit-char\" title=\"what platforms have something other than 8 bit char\">stackoverflow.com/questions/2098149/&hellip;</a>"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1493843977, "creation_date": 1493843977, "answer_id": 43769594, "question_id": 43769437, "link": "https://stackoverflow.com/questions/43769437/whats-the-most-compact-way-to-store-a-ternary-value/43769594#43769594", "title": "What&#39;s the most compact way to store a ternary value?", "body": "<p>(Almost) the best you can do without compressing is to pack 5 ternary values (trits) in one byte. Enumerate every possible combination of five consecutive trits: </p>\n\n<pre><code>FFFFF (0)\nFFFFI (1)\nFFFFV (2)\nFFFIF (4) \n...\nVVVVV (242)\n</code></pre>\n\n<p>There are 243 such combinations, therefore, an 8-bit byte (2**8=256) is sufficient to store any of them. Likewise, you can store 10 trits in 2 bytes, 15 trits in 3 bytes, etc.</p>\n"}], "owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 43769532, "answer_count": 3, "score": 4, "last_activity_date": 1564460481, "creation_date": 1493843365, "last_edit_date": 1493844387, "question_id": 43769437, "link": "https://stackoverflow.com/questions/43769437/whats-the-most-compact-way-to-store-a-ternary-value", "title": "What&#39;s the most compact way to store a ternary value?", "body": "<p>I'm working on writing a simple flash file system, and I need to store one of three states for each page in the flash device:</p>\n\n<pre><code>FREE\nINVALID (ready to be freed)\nVALID\n</code></pre>\n\n<p>If it were only two possible states, I'd use a bitmap for sure (memory is a concern). But what's the most compact way of holding these values in this case? </p>\n\n<p>The only thing I can think of are packing four 2-bit values into a <code>char</code> and using bitmasks to operate on each value.</p>\n\n<p>For example (wrote this quickly, so there's no guarantee it works perfectly):</p>\n\n<pre><code>#define FREE       0x0 // 0b00\n#define INVALID    0x1 // 0b01\n#define VALID      0x2 // 0b10\n\nchar state[NUM_ITEMS/4];\n\nvoid set_state(int item_num, int state) {\n    int idx;\n    char tmp;\n\n    idx = item_num / 4;\n    tmp = state[idx];\n\n    tmp &amp;= ~(0x3 &lt;&lt; (item_num % 4));\n    tmp |= (state &lt;&lt; (item_num % 4));\n\n    state[idx] = tmp;\n}\n\nint main(void) {\n    //...\n    set_state(6, INVALID);\n    //...\n    return 0;\n}\n</code></pre>\n\n<p>Is there another option I'm unaware of? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 3, "creation_date": 1493842725, "post_id": 43769246, "comment_id": 74579938, "body": "You forgot the <code>()</code> after <code>main</code>"}, {"owner": {"reputation": 3, "user_id": 4037144, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mkfskqx16yk/AAAAAAAAAAI/AAAAAAAAADo/kOJXbNCiI5U/photo.jpg?sz=128", "display_name": "Aditya Dev", "link": "https://stackoverflow.com/users/4037144/aditya-dev"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1493842825, "post_id": 43769246, "comment_id": 74579996, "body": "Oh. Thank you! Totally forgot that"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 1, "creation_date": 1493843315, "post_id": 43769246, "comment_id": 74580259, "body": "@litelite: That would better be <code>(void)</code>; an empty parameter-list is an obsolecence feature; don&#39;t use it anymore!"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1493843396, "post_id": 43769293, "comment_id": 74580299, "body": "The recommended signature for a function witrhout arguments is to use prototype syntax, i.e. <code>int main(void)</code>. An empty parameter list is an obsolecence feature and to be removed in a future version of the standard."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": 1, "last_activity_date": 1493842819, "creation_date": 1493842819, "answer_id": 43769293, "question_id": 43769246, "link": "https://stackoverflow.com/questions/43769246/main-c39-error-expected-asm-or-attribute-before-t/43769293#43769293", "title": "Main.c:3:9: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018{\u2019 token", "body": "<p>Because you left off the <code>()</code> when declaring <code>main</code>, the compiler thinks you are declaring a variable, hence the confusion expressed in the error message.</p>\n"}], "owner": {"reputation": 3, "user_id": 4037144, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mkfskqx16yk/AAAAAAAAAAI/AAAAAAAAADo/kOJXbNCiI5U/photo.jpg?sz=128", "display_name": "Aditya Dev", "link": "https://stackoverflow.com/users/4037144/aditya-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "closed_date": 1494901515, "accepted_answer_id": 43769293, "answer_count": 1, "score": -3, "last_activity_date": 1493842819, "creation_date": 1493842694, "question_id": 43769246, "link": "https://stackoverflow.com/questions/43769246/main-c39-error-expected-asm-or-attribute-before-t", "closed_reason": "Not suitable for this site", "title": "Main.c:3:9: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018__attribute__\u2019 before \u2018{\u2019 token", "body": "<p>In this simple program to find whether a number is even or odd it keeps howing the error Main.c:3:9: error: expected \u2018=\u2019, \u2018,\u2019, \u2018;\u2019, \u2018asm\u2019 or \u2018<strong>attribute</strong>\u2019 before \u2018{\u2019 token. Please help.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint main{\nint n;\n  scanf(\"%d\",&amp;n);\n\n  if(n%2==0)\n    printf(\"%d is an even number\",n);\n\n  else\n    printf(\"%d is an odd number\",n);\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "windows-console", "win64"], "comments": [{"owner": {"reputation": 1962, "user_id": 902766, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8842581083f0ab1b2343891d3e1e550e?s=128&d=identicon&r=PG", "display_name": "Peanut", "link": "https://stackoverflow.com/users/902766/peanut"}, "edited": false, "score": 0, "creation_date": 1493845334, "post_id": 43768749, "comment_id": 74581342, "body": "Have you debugged it? Where is it crashing?"}, {"owner": {"reputation": 1962, "user_id": 902766, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8842581083f0ab1b2343891d3e1e550e?s=128&d=identicon&r=PG", "display_name": "Peanut", "link": "https://stackoverflow.com/users/902766/peanut"}, "edited": false, "score": 0, "creation_date": 1493845802, "post_id": 43768749, "comment_id": 74581562, "body": "It runs for me compiling in Visual Studio 2017. You should also be checking return values from functions."}, {"owner": {"reputation": 197, "user_id": 6102594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-fFsQCcmEZVs/AAAAAAAAAAI/AAAAAAAAFMk/NN7Pp_2HWR8/photo.jpg?sz=128", "display_name": "LGB G&#225;bor L&#233;n&#225;rt", "link": "https://stackoverflow.com/users/6102594/lgb-g%c3%a1bor-l%c3%a9n%c3%a1rt"}, "reply_to_user": {"reputation": 1962, "user_id": 902766, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8842581083f0ab1b2343891d3e1e550e?s=128&d=identicon&r=PG", "display_name": "Peanut", "link": "https://stackoverflow.com/users/902766/peanut"}, "edited": false, "score": 0, "creation_date": 1493850168, "post_id": 43768749, "comment_id": 74583304, "body": "Actually I can&#39;t debug, since I can&#39;t even try, I have no windows, just asked somebody to try it. It was compiled on Linux with Mingw cross compiler targeting windows. The 32 bit exe seems to be OK, only for 64 bit is the problem. Surely it&#39;s not so nice that I have problem I cannot debug too much, but most of my project is platform-independent anyway (win32/win64/OSX/Linux/etc), just small things like this is problematic."}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1493873861, "post_id": 43773102, "comment_id": 74589211, "body": "Generally that&#39;s true. A <code>HANDLE</code> could be a pointer (e.g. an <code>HMODULE</code> is the base address of the module) or a special value like <code>INVALID_HANDLE_VALUE</code> or <code>(HANDLE)-1</code> returned by <code>GetCurrentProcess</code>. In these cases truncation would be bad. But regular kernel handles and window handles are guaranteed to fit in a 32-bit <code>long</code>. Also for casting a handle passed to <code>_open_osfhandle</code>, it&#39;s more idiomatic to use <code>intptr_t</code> instead of a Windows typedef."}, {"owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1493891665, "post_id": 43773102, "comment_id": 74599533, "body": "@eryksun A console handle is not always a normal kernel handle, it is a pseudo handle in some cases and you cannot assume anything about the bits. HWNDs fit in 32 bits because 32-bit apps need to be able to operate on HWNDs in 64-bit apps but the same is not true for HANDLEs."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1493892981, "post_id": 43773102, "comment_id": 74600418, "body": "Console handles in versions prior to Windows 8 are indeed pseudo-handles managed by the console itself, but in practice we know they&#39;re not the problem in this case regardless of what we can <i>legitimately</i> assume about them, because the console (conhost.exe in Windows 7, or csrss.exe in really old versions) starts with the base set 3, 7, 11 and increments from there when duplicating handles and creating handles for new screen buffers."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1493893033, "post_id": 43773102, "comment_id": 74600455, "body": "As to your statement about HANDLEs in general, we&#39;re working with <code>File</code> handles, which are kernel handles and must be 32-bit except for the point you raise about pseudo-handles used for the console in old versions of Windows."}, {"owner": {"reputation": 197, "user_id": 6102594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-fFsQCcmEZVs/AAAAAAAAAAI/AAAAAAAAFMk/NN7Pp_2HWR8/photo.jpg?sz=128", "display_name": "LGB G&#225;bor L&#233;n&#225;rt", "link": "https://stackoverflow.com/users/6102594/lgb-g%c3%a1bor-l%c3%a9n%c3%a1rt"}, "edited": false, "score": 0, "creation_date": 1493915325, "post_id": 43773102, "comment_id": 74617092, "body": "Nice, with the modification lStdHandle being HANDLE instead of long, and use casting to INT_PTR at every _open_osfhandle() call, now it compiles for both of 32 and 64 bit exes without a warning on Linux with mingw and also seems to work on Windows now! That was exactly my problem that I no idea what &quot;HANDLE&quot; type is for real, and what _open_ofshandle() does exactly with what kind of type as its parameter. Now it seems to be quite OK! Thanks!"}], "tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": true, "score": 3, "last_activity_date": 1493866586, "creation_date": 1493866586, "answer_id": 43773102, "question_id": 43768749, "link": "https://stackoverflow.com/questions/43768749/opening-windows-console-for-stdin-stdout-stderr-for-both-of-win32-and-win64-in-c/43773102#43773102", "title": "Opening Windows console for stdin/stdout/stderr for both of win32 and win64 in C", "body": "<p>It is a handle so you should use the <code>HANDLE</code> type. Cast to <code>INT_PTR</code> (or <code>SIZE_T</code> if your SDK is really outdated) when you call <code>_open_osfhandle</code>, using <code>long</code> can truncate the value!</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 6102594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-fFsQCcmEZVs/AAAAAAAAAAI/AAAAAAAAFMk/NN7Pp_2HWR8/photo.jpg?sz=128", "display_name": "LGB G&#225;bor L&#233;n&#225;rt", "link": "https://stackoverflow.com/users/6102594/lgb-g%c3%a1bor-l%c3%a9n%c3%a1rt"}, "edited": false, "score": 0, "creation_date": 1493915576, "post_id": 43776088, "comment_id": 74617237, "body": "Thanks a lot! It seems the problem is solved with using HANDLE type and casting to INT_PTR. It helped to my problem with my existing solution. However please do not misunderstand me, maybe your solution would be even better than my proposed one (actually not my work, but what I could guess and put together from the Net ...), however I&#39;m currently happy that at least with some lines modified only it works well :)"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 197, "user_id": 6102594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-fFsQCcmEZVs/AAAAAAAAAAI/AAAAAAAAFMk/NN7Pp_2HWR8/photo.jpg?sz=128", "display_name": "LGB G&#225;bor L&#233;n&#225;rt", "link": "https://stackoverflow.com/users/6102594/lgb-g%c3%a1bor-l%c3%a9n%c3%a1rt"}, "edited": false, "score": 1, "creation_date": 1493918330, "post_id": 43776088, "comment_id": 74618771, "body": "@LGBG&#225;borL&#233;n&#225;rt, your code just plain will not work when building with VS 2015+ for the new CRT, and you should fix it to be portable rather than relying on internal implementation details of <code>FILE</code> pointers, which are meant to be opaque in C. Even if you&#39;re not directly accessing the fields, assuming that you can do <code>*stdin = *fp</code> is every bit as wrong."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 197, "user_id": 6102594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-fFsQCcmEZVs/AAAAAAAAAAI/AAAAAAAAFMk/NN7Pp_2HWR8/photo.jpg?sz=128", "display_name": "LGB G&#225;bor L&#233;n&#225;rt", "link": "https://stackoverflow.com/users/6102594/lgb-g%c3%a1bor-l%c3%a9n%c3%a1rt"}, "edited": false, "score": 0, "creation_date": 1493918663, "post_id": 43776088, "comment_id": 74618949, "body": "As to the <code>HANDLE</code> issue, the solution isn&#39;t making sense to me. All of the handles in this case fit in a <code>long</code>. I wouldn&#39;t write it the way you did in the first place, but I think it should work. I&#39;ll try it with MSVC and try to reason out where it could be going wrong. If this were my own problem, I wouldn&#39;t be satisfied until I could diagnose exactly where it&#39;s going wrong in a debugger."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 197, "user_id": 6102594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-fFsQCcmEZVs/AAAAAAAAAAI/AAAAAAAAFMk/NN7Pp_2HWR8/photo.jpg?sz=128", "display_name": "LGB G&#225;bor L&#233;n&#225;rt", "link": "https://stackoverflow.com/users/6102594/lgb-g%c3%a1bor-l%c3%a9n%c3%a1rt"}, "edited": false, "score": 0, "creation_date": 1493919321, "post_id": 43776088, "comment_id": 74619320, "body": "I can&#39;t reproduce any problem with using a <code>long</code> for the standard handles in a 64-bit build. I switched <code>hStd</code> to a <code>long</code> and cast the result from <code>GetStdHandle</code>. Of course there was no problem in both the console and non-console builds. Why would there be? The handle values are less than a hundred."}], "tags": [], "owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "is_accepted": false, "score": 3, "last_activity_date": 1493881903, "last_edit_date": 1493881903, "creation_date": 1493881552, "answer_id": 43776088, "question_id": 43768749, "link": "https://stackoverflow.com/questions/43768749/opening-windows-console-for-stdin-stdout-stderr-for-both-of-win32-and-win64-in-c/43776088#43776088", "title": "Opening Windows console for stdin/stdout/stderr for both of win32 and win64 in C", "body": "<p>I don't know exactly what the problem is. I'm not set up to build using MinGW on Linux. It could be related to an invalid file descriptor if you aren't building a console application. In this case the CRT initializes the file-descriptor to handle mapping as an invalid handle value, and also the standard <code>FILE</code> streams will be initialized to a -1 <code>fileno</code>. But I don't see a problem with that in your code.</p>\n\n<p>However, your <code>*stdin = *fp</code> hack is not portable C. It works in older versions of MSVC, and probably also with msvcrt.dll (somewhat dubiously used by MinGW for lack of a better choice). However, it doesn't work with the new Universal CRT. A <code>FILE</code> in the new CRT is defined as follows:</p>\n\n<pre><code>typedef struct _iobuf\n{\n    void* _Placeholder;\n} FILE; \n</code></pre>\n\n<p>So assigning to <code>*stdin</code> just overwrites this <code>_Placeholder</code> pointer. The internal structure is actually as follows:</p>\n\n<pre><code>struct __crt_stdio_stream_data\n{\n    union\n    {\n        FILE  _public_file;\n        char* _ptr;\n    };\n\n    char*            _base;\n    int              _cnt;\n    long             _flags;\n    long             _file;\n    int              _charbuf;\n    int              _bufsiz;\n    char*            _tmpfname;\n    CRITICAL_SECTION _lock;\n};\n</code></pre>\n\n<p>So all you're really overwriting is its buffer <code>_ptr</code>.</p>\n\n<p>The way to portably re-open a standard stream is via <code>freopen</code>. So what I do, which works but maybe someone else has a better solution, is to <code>freopen</code> the <code>NUL</code> device, which resets the stream to a valid file descriptor if it's a non-console application. Then use <code>_dup2</code> to redirect the underlying file descriptor. For example:</p>\n\n<pre><code>#include &lt;io.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;Windows.h&gt;\n\nint wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,\n             LPWSTR lpCmdLine, int nCmdShow)\n//int wmain(int argc, wchar_t **argv)\n{\n    int fdStd;\n    HANDLE hStd;\n    CONSOLE_SCREEN_BUFFER_INFO coninfo;\n\n    printf(\"Goodbye, World!\\n\");\n\n    /* ensure references to current console are flushed and closed\n     * before freeing the console. To get things set up in case we're\n     * not a console application, first re-open the std streams to\n     * NUL with no buffering, and close invalid file descriptors\n     * 0, 1, and 2. The std streams will be redirected to the console\n     * once it's created. */\n\n    if (_get_osfhandle(0) &lt; 0)\n        _close(0);\n    freopen(\"//./NUL\", \"r\", stdin);\n    setvbuf(stdin, NULL, _IONBF, 0);\n    if (_get_osfhandle(1) &lt; 0)\n        _close(1);\n    freopen(\"//./NUL\", \"w\", stdout);\n    setvbuf(stdout, NULL, _IONBF, 0);\n    if (_get_osfhandle(2) &lt; 0)\n        _close(2);\n    freopen(\"//./NUL\", \"w\", stderr);\n    setvbuf(stderr, NULL, _IONBF, 0);\n\n    FreeConsole();\n\n    if (!AllocConsole()) {\n        //ERROR_WINDOW(\"Cannot allocate windows console!\");\n        return 1;\n    }\n    SetConsoleTitle(\"My Nice Console\");\n\n    // set the screen buffer to be big enough to let us scroll text\n    GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &amp;coninfo);\n    coninfo.dwSize.Y = 1024;\n    //coninfo.dwSize.X = 100;\n    SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), coninfo.dwSize);\n\n    // redirect unbuffered STDIN to the console\n    hStd = GetStdHandle(STD_INPUT_HANDLE);\n    fdStd = _open_osfhandle((intptr_t)hStd, _O_TEXT);\n    _dup2(fdStd, fileno(stdin));\n    SetStdHandle(STD_INPUT_HANDLE, (HANDLE)_get_osfhandle(fileno(stdin)));\n    _close(fdStd);\n\n    // redirect unbuffered STDOUT to the console\n    hStd = GetStdHandle(STD_OUTPUT_HANDLE);\n    fdStd = _open_osfhandle((intptr_t)hStd, _O_TEXT);\n    _dup2(fdStd, fileno(stdout));\n    SetStdHandle(STD_OUTPUT_HANDLE, (HANDLE)_get_osfhandle(fileno(stdout)));\n    _close(fdStd);\n\n    // redirect unbuffered STDERR to the console\n    hStd = GetStdHandle(STD_ERROR_HANDLE);\n    fdStd = _open_osfhandle((intptr_t)hStd, _O_TEXT);\n    _dup2(fdStd, fileno(stderr));\n    SetStdHandle(STD_ERROR_HANDLE, (HANDLE)_get_osfhandle(fileno(stderr)));\n    _close(fdStd);\n\n    // Set Con Attributes\n    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE),\n        FOREGROUND_GREEN | FOREGROUND_INTENSITY);\n    SetConsoleMode(GetStdHandle(STD_OUTPUT_HANDLE),\n        ENABLE_PROCESSED_OUTPUT | ENABLE_WRAP_AT_EOL_OUTPUT);\n    SetConsoleMode(GetStdHandle(STD_INPUT_HANDLE),\n        ENABLE_ECHO_INPUT | ENABLE_LINE_INPUT);\n\n    printf(\"Hello, World!\\n\");\n\n    Sleep(10000);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 6102594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-fFsQCcmEZVs/AAAAAAAAAAI/AAAAAAAAFMk/NN7Pp_2HWR8/photo.jpg?sz=128", "display_name": "LGB G&#225;bor L&#233;n&#225;rt", "link": "https://stackoverflow.com/users/6102594/lgb-g%c3%a1bor-l%c3%a9n%c3%a1rt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1666, "favorite_count": 0, "accepted_answer_id": 43773102, "answer_count": 2, "score": -1, "last_activity_date": 1493881903, "creation_date": 1493840855, "question_id": 43768749, "link": "https://stackoverflow.com/questions/43768749/opening-windows-console-for-stdin-stdout-stderr-for-both-of-win32-and-win64-in-c", "title": "Opening Windows console for stdin/stdout/stderr for both of win32 and win64 in C", "body": "<p>First of all, I'm not a Windows programmer (not even a Windows user), I use cross-compiler on Linux to build also for Win32 and Win64. After digging the Net (and even asking a question here) I've managed to put a code fragment together which can open a windows console, and use it for stdin/stdout/stderr. It works well with Win32, but the program crashes on Win64. I guess the problem is the different long integer data type size, gcc even warns about this. However since I don't know the exact purpose and size of some windows API types, so I can't figure out what I should change. Surely, the best would be some win32/win64 independent solution. I also tried to use the \"HANDLE\" type for lStdHandle but then it even does not compile. Can anyone help about this?</p>\n\n<pre><code>    int hConHandle;\n    long lStdHandle;\n    //HANDLE lStdHandle;\n    CONSOLE_SCREEN_BUFFER_INFO coninfo;\n    FILE *fp;\n    FreeConsole(); // be sure to release possible already allocated console\n    if (!AllocConsole()) {\n            ERROR_WINDOW(\"Cannot allocate windows console!\");\n            return;\n    }\n    SetConsoleTitle(\"My Nice Console\");\n    // set the screen buffer to be big enough to let us scroll text\n    GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &amp;coninfo);\n    coninfo.dwSize.Y = 1024;\n    //coninfo.dwSize.X = 100;\n    SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), coninfo.dwSize);\n    // redirect unbuffered STDOUT to the console\n    lStdHandle = (long)GetStdHandle(STD_OUTPUT_HANDLE);\n    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);\n    fp = _fdopen( hConHandle, \"w\" );\n    *stdout = *fp;\n    setvbuf( stdout, NULL, _IONBF, 0 );\n    // redirect unbuffered STDIN to the console\n    lStdHandle = (long)GetStdHandle(STD_INPUT_HANDLE);\n    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);\n    fp = _fdopen( hConHandle, \"r\" );\n    *stdin = *fp;\n    setvbuf( stdin, NULL, _IONBF, 0 );\n    // redirect unbuffered STDERR to the console\n    lStdHandle = (long)GetStdHandle(STD_ERROR_HANDLE);\n    hConHandle = _open_osfhandle(lStdHandle, _O_TEXT);\n    fp = _fdopen( hConHandle, \"w\" );\n    *stderr = *fp;\n    setvbuf( stderr, NULL, _IONBF, 0 );\n    // Set Con Attributes\n    //SetConsoleTextAttribute(GetStdHandle(STD_ERROR_HANDLE), FOREGROUND_RED | FOREGROUND_INTENSITY);\n    SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), FOREGROUND_GREEN | FOREGROUND_INTENSITY);\n    SetConsoleMode(GetStdHandle(STD_OUTPUT_HANDLE), ENABLE_PROCESSED_OUTPUT | ENABLE_WRAP_AT_EOL_OUTPUT);\n    SetConsoleMode(GetStdHandle(STD_INPUT_HANDLE), ENABLE_ECHO_INPUT | ENABLE_LINE_INPUT);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1493840981, "post_id": 43768747, "comment_id": 74578987, "body": "<code>%*</code>: I think that ignores the field, so <code>first_line</code> isn&#39;t set by <code>scanf</code>"}, {"owner": {"reputation": 4831, "user_id": 1336087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UtRb6.png?s=128&g=1", "display_name": "ani627", "link": "https://stackoverflow.com/users/1336087/ani627"}, "edited": false, "score": 2, "creation_date": 1493841087, "post_id": 43768747, "comment_id": 74579031, "body": "Why not use <code>fgets</code>? It is more safe than <code>scanf</code>."}, {"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 0, "creation_date": 1493841133, "post_id": 43768747, "comment_id": 74579061, "body": "Can you be more precise about the error you get?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1493841199, "post_id": 43768747, "comment_id": 74579113, "body": "If you&#39;re really using <code>C++</code> (you tagged this as <code>C++</code>), why use <code>scanf</code> when there are far easier ways to read a string with a space?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1493841296, "post_id": 43768747, "comment_id": 74579170, "body": "<code>scanf (&quot;%*[^\\n]&quot;, first_line);</code> should have raised a compiler warning.  Save time and enable all warnings."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493841480, "post_id": 43768747, "comment_id": 74579257, "body": "Note: C library defines a <i>line</i> as &quot;each line consisting of zero or more characters plus a terminating new-line character.&quot; .  <code>scanf (&quot;%*[^\\n]&quot;, first_line);</code> might scan most of a line, but not a final <code>&#39;\\n</code>&#39;."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493841770, "post_id": 43768747, "comment_id": 74579425, "body": "Tip: Avoid down-votes.  Rather than &quot;But it doesnt work!!!&quot; post input used, output seen and expected output."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1493963786, "post_id": 43768747, "comment_id": 74635139, "body": "What do you mean with <i>It doesn&#39;t work</i>? What output did you expect and what output did you get?  How is <code>first_line</code> declared?  the <code>%*[^\\n]</code> format n my opinion lacks some format characters and it&#39;s not valid."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1493845714, "post_id": 43768855, "comment_id": 74581527, "body": "@chqrlie good job. I still have a lot to learn about those scanf subtleties. C isn&#39;t the easiest language to deal with text files."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 5, "last_activity_date": 1493845613, "last_edit_date": 1493845613, "creation_date": 1493841225, "answer_id": 43768855, "question_id": 43768747, "link": "https://stackoverflow.com/questions/43768747/how-to-print-a-string-which-was-scanned-by-scanf-n-str/43768855#43768855", "title": "How to print a string which was scanned by scanf (&quot;%*[^\\n]&quot;, str);", "body": "<p>The <code>*</code> in <code>scanf (\"%*[^\\n]\", first_line);</code> tells <code>scanf</code> to scan but not store the scanned string.</p>\n\n<p>In your case, you only have one argument, which is not set because of this.</p>\n\n<p>Note that <code>-Wall</code> (or <code>-Wformat-extra-args</code>) issues a warning on \"recent\" <code>gcc</code> compilers:</p>\n\n<pre><code>test.c: In function 'main':\ntest.c:6:8: warning: too many arguments for format [-Wformat-extra-args]\n scanf (\"%*[^\\n]\", first_line);\n        ^~~~~~~~~\n</code></pre>\n\n<p>That works fine:</p>\n\n<pre><code> scanf (\"%[^\\n]\", first_line);\n printf(\"%s\\n\",first_line);\n</code></pre>\n\n<p>and you can even limit the size to read (making <code>scanf</code> safer) like this:</p>\n\n<pre><code>char first_line[10] = {0};\nscanf (\"%9[^\\n]\", first_line);\n</code></pre>\n\n<p>so even if user enters more than 9 characters, you don't overflow your buffer</p>\n\n<p>Note however that if no characters are present on the line before the <code>\\n</code>, <code>scanf()</code> will fail to match the <code>%[^\\n]</code> conversion specification and return <code>0</code> without consuming any byte from standard input.  For this reason, it is much more advisable to use <code>fgets()</code> for your purpose:</p>\n\n<pre><code>char line[100];\n\nif (fgets(line, sizeof line, stdin)) {\n    /* a line was read from standard input */\n    /* you can strip the newline character with this simple one liner */\n    line[strcspn(line, \"\\n\")] = '\\0';\n    printf(\"%s\\n\", line);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4831, "user_id": 1336087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UtRb6.png?s=128&g=1", "display_name": "ani627", "link": "https://stackoverflow.com/users/1336087/ani627"}, "edited": false, "score": 0, "creation_date": 1493842348, "post_id": 43768868, "comment_id": 74579736, "body": "Dear downvoter I would really appreciate if you could provide a reason for the downvote. This way I can improve my post and learn something new. Thanks!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493843614, "post_id": 43768868, "comment_id": 74580421, "body": "not the downvoter, but you didn&#39;t explain why the OP code didn&#39;t work, and just proposed another way to do it, discouraging him/her to use <code>scanf</code>, which is still useful when used properly. It gives the impression of an off-topic answer. Then, (this is probably minor) <code>fgets</code> isn&#39;t strictly equivalent since it consumes the \\n"}, {"owner": {"reputation": 4831, "user_id": 1336087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UtRb6.png?s=128&g=1", "display_name": "ani627", "link": "https://stackoverflow.com/users/1336087/ani627"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493844619, "post_id": 43768868, "comment_id": 74580932, "body": "Thanks for the input @Jean-Fran&#231;oisFabre."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493845140, "post_id": 43768868, "comment_id": 74581211, "body": "at least you improved your post. +1"}], "tags": [], "owner": {"reputation": 4831, "user_id": 1336087, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/UtRb6.png?s=128&g=1", "display_name": "ani627", "link": "https://stackoverflow.com/users/1336087/ani627"}, "is_accepted": false, "score": 2, "last_activity_date": 1493844596, "last_edit_date": 1493844596, "creation_date": 1493841274, "answer_id": 43768868, "question_id": 43768747, "link": "https://stackoverflow.com/questions/43768747/how-to-print-a-string-which-was-scanned-by-scanf-n-str/43768868#43768868", "title": "How to print a string which was scanned by scanf (&quot;%*[^\\n]&quot;, str);", "body": "<pre><code> scanf (\"%*[^\\n]\", first_line);\n</code></pre>\n\n<p>This code will discard all the characters until <code>\\n</code> is encountered. So you are not storing any value in your <code>first_line</code> variable.</p>\n\n<p>Don't use <code>scanf</code> for reading character array or strings. Instead you can use <code>fgets</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2430303/disadvantages-of-scanf\">Disadvantages of scanf</a></p>\n\n<pre><code>char first_line[80];\nwhile(fgets(first_line, 80, stdin)) {\n    printf(\"%s\",first_line);\n}\n</code></pre>\n\n<p>Where 80 is size of your <code>first_line</code> character array.</p>\n"}], "owner": {"reputation": 81, "user_id": 7959621, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ff93281ce02184ab42253e1069a388e?s=128&d=identicon&r=PG&f=1", "display_name": "Tonmoy Mohajan", "link": "https://stackoverflow.com/users/7959621/tonmoy-mohajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "accepted_answer_id": 43768855, "answer_count": 2, "score": 0, "last_activity_date": 1493845613, "creation_date": 1493840853, "last_edit_date": 1493841332, "question_id": 43768747, "link": "https://stackoverflow.com/questions/43768747/how-to-print-a-string-which-was-scanned-by-scanf-n-str", "title": "How to print a string which was scanned by scanf (&quot;%*[^\\n]&quot;, str);", "body": "<p>I used this lines to scan a string with space </p>\n\n<pre><code>scanf (\"%*[^\\n]\", first_line);\n printf(\"%s\\n\",first_line);\n</code></pre>\n\n<p>But it doesnt work!!! What to do?</p>\n"}, {"tags": ["c", "stack", "stack-frame"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1493839210, "post_id": 43768307, "comment_id": 74578093, "body": "Padding. Google it."}, {"owner": {"reputation": 864, "user_id": 3808312, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7ee45486866d7dcc28c9acc10b0ef8f0?s=128&d=identicon&r=PG&f=1", "display_name": "w0f", "link": "https://stackoverflow.com/users/3808312/w0f"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1493839243, "post_id": 43768307, "comment_id": 74578108, "body": "I&#39;m not understanding why it pads to 8 instead of 4 though"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1493839484, "post_id": 43768307, "comment_id": 74578227, "body": "How did you determine this?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1493839693, "post_id": 43768307, "comment_id": 74578349, "body": "How do you determine that the size  of these variables are 0x24 ? doubles might need 8 byte alignment and a stack frame might need more space than just the sum of its local variables ,e.g.  to store saved registers, return address and so on."}, {"owner": {"reputation": 864, "user_id": 3808312, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7ee45486866d7dcc28c9acc10b0ef8f0?s=128&d=identicon&r=PG&f=1", "display_name": "w0f", "link": "https://stackoverflow.com/users/3808312/w0f"}, "edited": false, "score": 1, "creation_date": 1493839814, "post_id": 43768307, "comment_id": 74578410, "body": "It&#39;s a quiz from my architecture class. The question states that sp is 0x7810 when the function is called and sp is 0x77e8 when it is initalized, making the frame size 0x28. Since fp is popped to the stack, we can subtract 0x4 from that value to get 0x24. From there, I know that ints are 0x4 and doubles are 0x8, so subtracting those leaves 0x8 for just the char."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1493839914, "post_id": 43768307, "comment_id": 74578451, "body": "Or it&#39;s just for alignment"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1493840040, "post_id": 43768307, "comment_id": 74578523, "body": "There is no stack in the C language. On ARM, none of the variables exist on the stack, but are stored in registers, unless you take their address. More: if you enable optimisation, they don&#39;t even exist, because you don&#39;t use them. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and a clear problem description."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1493840936, "post_id": 43768307, "comment_id": 74578965, "body": "... and even if they exist on the stack, any compiler would probably rearrange for a better stack layout (=first 8 byte-aligned double, then 4-byte aligned ints, finally the <code>char</code>, then 3 bytes of padding to keep the stack aligned)."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1493840951, "post_id": 43768307, "comment_id": 74578972, "body": "This is a great read. <a href=\"http://www.catb.org/esr/structure-packing/\" rel=\"nofollow noreferrer\">catb.org/esr/structure-packing</a>"}, {"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1493840959, "post_id": 43768307, "comment_id": 74578975, "body": "struct member alignment is something you can configure in your compiler.  Some default to 8 byte alignment."}, {"owner": {"reputation": 1344, "user_id": 2777778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E7Vlx.jpg?s=128&g=1", "display_name": "pburka", "link": "https://stackoverflow.com/users/2777778/pburka"}, "edited": false, "score": 0, "creation_date": 1493843071, "post_id": 43768307, "comment_id": 74580110, "body": "This is really an ARM assembly question, rather than a C question.  The stack frame includes more than just your local variables. It also includes space for any unnamed temporary variables the compiler needs, space to save values from registers if the calling convention requires it, and space to record the return address.  To answer this question fully, we need a more complete example (including disassembly) and we need to know what operating system you&#39;re using."}], "owner": {"reputation": 864, "user_id": 3808312, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7ee45486866d7dcc28c9acc10b0ef8f0?s=128&d=identicon&r=PG&f=1", "display_name": "w0f", "link": "https://stackoverflow.com/users/3808312/w0f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 679, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493840424, "creation_date": 1493839177, "last_edit_date": 1493840424, "question_id": 43768307, "link": "https://stackoverflow.com/questions/43768307/why-is-char-size-8-bytes-in-the-assembly-of-this-function", "title": "Why is char size 8 bytes in the assembly of this function?", "body": "<p>I am using ARM (32-bit). Assume the following function uses a stack frame to store the variables locally.</p>\n\n<pre><code>void func() {\n   char ch;     //0x8? Shouldn't this be 0x4 with padding?\n   int a, b, c; //each are 0x4\n   double m, n; //each are 0x8\n}\n</code></pre>\n\n<p>The size of all of these local variables is 0x24. When I subtract the three <code>int</code>s (0xC) and the two <code>double</code>s (0x10), I am left with 0x8, meaning that the char is taking up 8 bytes. I understand that padding helps with alignment, but if char is of size 1 and it was supposed to align, wouldn't it pad to 0x4?</p>\n"}, {"tags": ["c", "function", "linked-list"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493839028, "post_id": 43768210, "comment_id": 74578000, "body": "Hmmm,  type-defining a point like <code>typedef struct book * Node;</code> is un-favored practice amongst some coding styles."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493839113, "post_id": 43768210, "comment_id": 74578044, "body": "<code>typedef struct Node List;</code> is this even valid?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493839149, "post_id": 43768210, "comment_id": 74578065, "body": "@AjayBrahmakshatriya Sure, <code>typedef struct Node List;</code> compiles."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493839213, "post_id": 43768210, "comment_id": 74578097, "body": "@chux But isn&#39;t Node the same as <code>struct book *</code>. What is <code>struct Node</code>? Unless <code>struct Node</code> is some completely other struct?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493839480, "post_id": 43768210, "comment_id": 74578223, "body": "@chux I think <code>typedef struct Node List</code> is creating an incomplete type <code>struct Node</code> and typedefing it to List. It has nothing to do with the Node in the previous line."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493839481, "post_id": 43768210, "comment_id": 74578225, "body": "@AjayBrahmakshatriya <code>Node</code> is the same as <code>struct book *</code> as per your comment.  <code>struct Node</code> is not defined yet.  Agree it has nothing to do with <code>Node</code> in the previous line  yet your question was <code>typedef struct Node List;</code> is this even valid?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493839612, "post_id": 43768210, "comment_id": 74578304, "body": "Anyway <code>List</code> type is not used anywhere. It is just creating confusion."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493839822, "post_id": 43768210, "comment_id": 74578412, "body": "<code>fgets(current-&gt;title, sizeof(line), fp)       &amp;&amp; fgets(current-&gt;author, sizeof(line), fp)       &amp;&amp; fgets(current-&gt;year, sizeof(line), fp));</code> is bad code.  Should use sizeof target buffer, not <code>sizeof line</code>."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1493839904, "post_id": 43768210, "comment_id": 74578446, "body": "I forgot to get rid of typedef struct Node List. It&#39;s useless. Sorry for the confusion!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493840050, "post_id": 43768210, "comment_id": 74578531, "body": "@KingSutter Consider <a href=\"http://stackoverflow.com/q/750178/2410359\">Is it a good idea to typedef pointers?</a>"}, {"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493840061, "post_id": 43768210, "comment_id": 74578535, "body": "@chux You are right, I got confused by the <code>while</code> and <code>for</code> afterwards."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493840492, "post_id": 43768210, "comment_id": 74578735, "body": "I was considering not using typedef, myself, but I thought it would make my code more readable/easier to write but I&#39;m actually second guessing that now, @chux . Either way, I don&#39;t see that as being a way to solve the issue of not being able to pass a linked list from function to function. Honestly I think the more I try to, the more I get confused. :-/"}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1493840602, "post_id": 43768210, "comment_id": 74578799, "body": "Is there any hope for this code? I&#39;m getting the vibe that I&#39;m using bad coding practices all around here. I might have to draw my plan out and just start from scratch then"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493840678, "post_id": 43768210, "comment_id": 74578828, "body": "@KingSutter The more difficult code is to read, the more difficult it is to debug.  Consider a recipe for cooking with many mis-spelled words.  The spelling does not <i>directly</i> affect the meal, but it adds unneeded challenges.  Concerning this style issue: Best to code per your group&#39;s coding standard."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493840716, "post_id": 43768210, "comment_id": 74578843, "body": "@king Did you try fixing your code per this <a href=\"http://stackoverflow.com/questions/43768210/how-to-pass-a-linked-list-to-a-function-in-c?noredirect=1#comment74578412_43768210\">comment</a>?"}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1493840720, "post_id": 43768210, "comment_id": 74578846, "body": "What if I passed the linked list from function to function by having the functions return Node or something like that? That way I can define BookList or something and set to equal that function. And then when I want to use Print, I just pass BookList to it."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493840894, "post_id": 43768210, "comment_id": 74578943, "body": "@chux I&#39;ll see what I can do, I actually had that messy while statement in a different format before posting my code here, but my professor suggested earlier today that I use the while statement that way for some reason.  Wait, where is target buffer defined?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493840969, "post_id": 43768210, "comment_id": 74578979, "body": "@KingSutter the problem is not the <code>while</code>.  The problem is <code>sizeof(line)</code> is the wrong size."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493841792, "post_id": 43768210, "comment_id": 74579440, "body": "@chux the target buffer is honestly undefined to an extent. I see what you are getting at, but I don&#39;t know the exact amount of characters of what fget will read per line. I thought fgets reads until it encounters a new line, which is what I want it to do. The maximum characters to read shouldn&#39;t matter as long as it isn&#39;t set too low. That being said, I will get rid of the sizeof() part and change it to TSIZE. Which is the max size I set the title and author character arrays in the book structure to be anyways."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493841896, "post_id": 43768210, "comment_id": 74579490, "body": "@KingSutter <code>TSIZE</code> is the wrong value too.  <code>fgets(current-&gt;year,sizeof(line),fp)</code> has only room for 6 characters.  Use <code>fgets(current-&gt;year, sizeof current-&gt;year, fp)</code>  Like-wise for the other <code>fgets()</code>.  <code>fgets()</code> reads until 1) <code>&#39;\\n&#39;</code> read 2) buffer full or 3) end-of-file or 4) rare input error."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493842095, "post_id": 43768210, "comment_id": 74579592, "body": "@chux I changed that for the year one, too. It is 6. But i can change it again per your suggestion, as well. That makes sense, thank you for elaborating :) I&#39;m slow today, I guess"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493841114, "post_id": 43768793, "comment_id": 74579050, "body": "This answer does not take into account <code>fgets(current-&gt;title, sizeof(line),...</code> as commented <a href=\"http://stackoverflow.com/questions/43768210/how-to-pass-a-linked-list-to-a-function-in-c?noredirect=1#comment74578412_43768210\">here</a> and so continues potential undefined behavior (UB)."}, {"owner": {"reputation": 84, "user_id": 3477538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRMAF.png?s=128&g=1", "display_name": "NK_loco", "link": "https://stackoverflow.com/users/3477538/nk-loco"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493841156, "post_id": 43768793, "comment_id": 74579074, "body": "I said there were many other errors and bugs, but he asked about the problem of him sending the linked list."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493842333, "post_id": 43768793, "comment_id": 74579729, "body": "<code>*List = (Node)malloc(sizeof(struct book));</code> is a good important improvement over OP&#39;s code."}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1493843558, "post_id": 43768793, "comment_id": 74580391, "body": "That did it! Thank you, @NK_loco and chux! I am currently doing a lot of fixes to make it more readable and bug fixes. I just couldn&#39;t see a way past the function passing issue so I mainly needed that cleared up. I apologize if that was a mouthful of crappy code to look through, so thank you for bearing with me on that one."}, {"owner": {"reputation": 84, "user_id": 3477538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRMAF.png?s=128&g=1", "display_name": "NK_loco", "link": "https://stackoverflow.com/users/3477538/nk-loco"}, "edited": false, "score": 1, "creation_date": 1493843831, "post_id": 43768793, "comment_id": 74580525, "body": "np ^.^ Pointers could be tricky at times, just make sure you understand what points to what and what assigns to what. changing things localy with pointers is very common, but you&#39;ll get it with enough practice ;)"}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1493843942, "post_id": 43768793, "comment_id": 74580582, "body": "One quick question, would it be important to also replace the &quot;current&quot; variables with &quot;*Lcurrent&quot; inside of each function? Or does it not matter?"}, {"owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "edited": false, "score": 0, "creation_date": 1493844008, "post_id": 43768793, "comment_id": 74580612, "body": "Yeah pointers lose me quickly and then learning about these linked lists on top of having to make it modular melted my brain haha"}], "tags": [], "owner": {"reputation": 84, "user_id": 3477538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LRMAF.png?s=128&g=1", "display_name": "NK_loco", "link": "https://stackoverflow.com/users/3477538/nk-loco"}, "is_accepted": true, "score": 1, "last_activity_date": 1493841265, "last_edit_date": 1493841265, "creation_date": 1493841001, "answer_id": 43768793, "question_id": 43768210, "link": "https://stackoverflow.com/questions/43768210/how-to-pass-a-linked-list-to-a-function-in-c/43768793#43768793", "title": "How to pass a linked list to a function in C", "body": "<p>It seems like most of the people are focusing the lack of organization (it bother me a lot too) instead of your actual issue.</p>\n\n<p>Seems like the source of your issue is where you assign the variable head.\nwhen you define \"Node head = *List\" and List is NULL, as it's first initialized, it loses the connection it had to the original list you sent from main, and you just create a linked list with a local reference only.</p>\n\n<p>I just changed the uses of \"head\" to \"*List\" within the Append and Print functions and it seems to sort it out.</p>\n\n<p>This is your code after my changes:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;      /* has the malloc prototype      */\n#define TSIZE 100        /* size of array to hold title   */\nstruct book {\n    char title[TSIZE], author[TSIZE], year[6];\n    struct book * next;  /* points to next struct in list */\n};\n//typedef struct book ITEM;\ntypedef struct book * Node;     // struct book *\nvoid Append(Node *List, Node *Lcurrent, char filename[]);\nint Print(Node *List, Node *Lcurrent);\nvoid ClearGarbage(void);\nint main(void) {\n    Node head = NULL;\n    Node current;\n    current = head;\n    char fname[] = \"HW15Data.txt\";\n    char op;\n    do {\n        puts(\"Select operation from the following list:\");\n        puts(\"a. Append    p. Print q. quit\");\n        op = getchar();\n        ClearGarbage();\n        if (op == 'a') {\n            /* Gather  and store information          */\n            Append(&amp;head, &amp;current, fname);\n        }\n        else if (op == 'p') {\n            /*Print book record of user's choice*/\n            Print(&amp;head, &amp;current);\n        }\n        else if (op == 'q') {\n            /* User quit, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n                free(current);\n                current = current-&gt;next;\n            }\n            printf(\"Bye!\\n\");\n            return 0;\n        }\n        else {\n            /* Program done, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n                free(current);\n                current = current-&gt;next;\n            }\n            printf(\"Invalid characted entered. Bye!\\n\");\n            return 0;\n        }\n    } while (op != 'q');\n    return 0;\n}\nvoid Append(Node *List, Node * Lcurrent, char filename[TSIZE]) {\n    FILE * fp;\n    Node head = *List;\n    Node current = *Lcurrent;\n    int loops = 0;\n    char line[256];\n    fp = fopen(filename, \"r\");\n    if (*List == NULL) {\n        *List = (Node)malloc(sizeof(struct book));\n        current = *List;\n        current-&gt;next = NULL;\n    }\n    do {\n        current-&gt;next = (Node)malloc(sizeof(struct book));\n        current = current-&gt;next;\n        loops++;\n    } while (fgets(current-&gt;title, sizeof(line), fp) &amp;&amp; fgets(current-&gt;author, sizeof(line), fp) &amp;&amp; fgets(current-&gt;year, sizeof(line), fp));\n    free(current);\n    printf(\"Number of records written: %d\\n\", loops);\n}\nint Print(Node *List, Node *Lcurrent) {\n    int num;\n    int i = 0;\n    Node head = *List;\n    Node current = *Lcurrent;\n    if (*List == NULL) {\n        printf(\"No data entered.\\n\");\n        return -1;\n    }\n    printf(\"Enter record # to print: \");\n    scanf(\"%d\", &amp;num);\n    ClearGarbage();\n    num = num + 1;\n    current = *List;\n    while (current != NULL &amp;&amp; i&lt;num)\n    {\n        for (i = 0; i&lt;num; i++) {\n            current = current-&gt;next;\n        }\n        printf(\"Book: %sAuthor: %sYear: %s\\n\",\n            current-&gt;title, current-&gt;author, current-&gt;year);\n    }\n    return 0;\n}\nvoid ClearGarbage(void) {\n    while (getchar() != '\\n');\n}\n</code></pre>\n\n<p>There are still many logical errors, and some bugs, but it fixes the problem you asked help for.</p>\n"}], "owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "accepted_answer_id": 43768793, "answer_count": 1, "score": -1, "last_activity_date": 1493842977, "creation_date": 1493838764, "last_edit_date": 1493842977, "question_id": 43768210, "link": "https://stackoverflow.com/questions/43768210/how-to-pass-a-linked-list-to-a-function-in-c", "title": "How to pass a linked list to a function in C", "body": "<p>So I have made a working program for getting data from a file and printing out the file according to which part of the file you want all within main. But my goal is to make this modular, by creating a user interface and either appending to the linked list from the file or printing out a part of that linked list (if any) as requested. \nThere's just one problem: I can't seem to figure out a way to successfully pass a linked list to the function so that when you create new nodes in the function (Append), it will also work in main and then back again in (Print). </p>\n\n<p>Here's the working code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;      /* has the malloc prototype      */\n#define TSIZE 100        /* size of array to hold title   */\nstruct book {\n    char title[TSIZE], author[TSIZE],year[6];\n    struct book * next;  /* points to next struct in list */\n};\n//typedef struct book ITEM;\ntypedef struct book * Node;     // struct book *\nvoid Append(Node *List, Node *Lcurrent,char filename[]);\nvoid ClearGarbage(void);\nint main(void){\n    Node head=NULL;\n    Node current;\n    current=head;\n    char fname[]=\"HW15Data.txt\";\n    char op;\n    do{\n        puts(\"Select operation from the following list:\");\n        puts(\"a. Append    p. Print q. quit\");\n        op = getchar();\n        ClearGarbage();\n        if (op=='a'){\n            /* Gather  and store information          */\n            Append(&amp;head,&amp;current,fname);\n        }\n        else if (op=='q'){\n            /* User quit, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n                free(current);\n                current = current-&gt;next;\n            }\n            printf(\"Bye!\\n\");\n            return 0;\n        }\n        else{\n            /* Program done, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n            free(current);\n            current = current-&gt;next;\n            }\n            printf(\"Invalid characted entered. Bye!\\n\");\n            return 0;\n        }\n    } while (op!='q');\n    return 0;\n}\nvoid Append(Node *List, Node * Lcurrent,char filename[TSIZE]){\n    FILE * fp;\n    Node head=*List;\n    Node current=*Lcurrent;\n    int loops=0;\n    fp=fopen(filename,\"r\");\n    if (head==NULL){\n        head=(Node) malloc(sizeof(struct book));\n        current=head;\n        current-&gt;next=NULL;\n    }\n    do{\n        current-&gt;next = (Node) malloc(sizeof(struct book));\n        current=current-&gt;next;\n        loops++;\n    } while(fgets(current-&gt;title,sizeof(current-&gt;title),fp) &amp;&amp; fgets(current-&gt;author,sizeof(current-&gt;title),fp) &amp;&amp; fgets(current-&gt;year,sizeof(current-&gt;year),fp));;\n    free(current);\n    printf(\"Number of records written: %d\\n\",loops);\n//Same as Print function in the nonworking code\n    int num;\n    int i=0;\n    if (head == NULL){\n        printf(\"No data entered. \");\n    }\n    else{\n        printf(\"Enter record # to print: \");\n        scanf(\"%d\",&amp;num);\n        ClearGarbage();\n        num=num+1;\n        current = head;\n        while (current != NULL &amp;&amp; i&lt;num)\n        {\n            for (i=0;i&lt;num;i++)\n                current = current-&gt;next;\n            printf(\"Book: %sAuthor: %sYear: %s\\n\",\n            current-&gt;title, current-&gt;author, current-&gt;year);\n            }\n    }\n}\nvoid ClearGarbage(void){\n    while (getchar()!='\\n');\n}\n</code></pre>\n\n<p>Okay cool that works, but my guess is that as soon as Append is done, the nodes made in Append are useless in main because they are now gone. So when I try to make a Print function in the following code, there's nothing to print.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;      /* has the malloc prototype      */\n#define TSIZE 100        /* size of array to hold title   */\nstruct book {\n    char title[TSIZE], author[TSIZE],year[6];\n    struct book * next;  /* points to next struct in list */\n};\n//typedef struct book ITEM;\ntypedef struct book * Node;     // struct book *\nvoid Append(Node *List, Node *Lcurrent,char filename[]);\nint Print(Node *List,Node *Lcurrent);\nvoid ClearGarbage(void);\nint main(void){\n    Node head=NULL;\n    Node current;\n    current=head;\n    char fname[]=\"HW15Data.txt\";\n    char op;\n    do{\n        puts(\"Select operation from the following list:\");\n        puts(\"a. Append    p. Print q. quit\");\n        op = getchar();\n        ClearGarbage();\n        if (op=='a'){\n            /* Gather  and store information          */\n            Append(&amp;head,&amp;current,fname);\n        }\n        else if (op=='p'){\n            /*Print book record of user's choice*/\n            Print(&amp;head,&amp;current);\n        }\n        else if (op=='q'){\n            /* User quit, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n                free(current);\n            current = current-&gt;next;\n            }\n            printf(\"Bye!\\n\");\n            return 0;\n        }\n        else{\n            /* Program done, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n            free(current);\n            current = current-&gt;next;\n            }\n            printf(\"Invalid characted entered. Bye!\\n\");\n            return 0;\n        }\n    } while (op!='q');\n    return 0;\n}\nvoid Append(Node *List, Node * Lcurrent,char filename[TSIZE]){\n    FILE * fp;\n    Node head=*List;\n    Node current=*Lcurrent;\n    int loops=0;\n    fp=fopen(filename,\"r\");\n    if (head==NULL){\n        head=(Node) malloc(sizeof(struct book));\n        current=head;\n        current-&gt;next=NULL;\n    }\n    do{\n        current-&gt;next = (Node) malloc(sizeof(struct book));\n        current=current-&gt;next;\n        loops++;\n    } while(fgets(current-&gt;title,sizeof(current-&gt;title),fp) &amp;&amp; fgets(current-&gt;author,sizeof(current-&gt;title),fp) &amp;&amp; fgets(current-&gt;year,sizeof(current-&gt;year),fp));\n    free(current);\n    printf(\"Number of records written: %d\\n\",loops);\n}\nint Print(Node *List,Node *Lcurrent){\n    int num;\n    int i=0;\n    Node head=*List;\n    Node current=*Lcurrent;\n    if (head == NULL){\n        printf(\"No data entered.\\n\");\n        return -1;\n    }\n    printf(\"Enter record # to print: \");\n    scanf(\"%d\",&amp;num);\n    ClearGarbage();\n    num=num+1;\n    current = head;\n    while (current != NULL &amp;&amp; i&lt;num)\n    {\n        for (i=0;i&lt;num;i++){\n            current = current-&gt;next;\n        }\n        printf(\"Book: %sAuthor: %sYear: %s\\n\",\n        current-&gt;title, current-&gt;author, current-&gt;year);\n        }\n    return 0;\n}\nvoid ClearGarbage(void){\n    while (getchar()!='\\n');\n}\n</code></pre>\n\n<p>Thanks anyone for any help!</p>\n\n<p>EDIT: Got rid of an unused typedef for clarity</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1493836972, "post_id": 43767727, "comment_id": 74576889, "body": "it&#39;s not the same char as <code>|</code>. Re-type it."}, {"owner": {"reputation": 846, "user_id": 1137102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HOdwV.png?s=128&g=1", "display_name": "RoiHatam", "link": "https://stackoverflow.com/users/1137102/roihatam"}, "edited": false, "score": 1, "creation_date": 1493837077, "post_id": 43767727, "comment_id": 74576941, "body": "You should use the pipe <code>|</code> character."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1493837964, "post_id": 43767727, "comment_id": 74577474, "body": "Please cut and paste any error messages directly into your question, rather than link images of your terminal."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493839600, "post_id": 43767727, "comment_id": 74578293, "body": "There is no such operator in the C language."}], "answers": [{"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1493838613, "post_id": 43767879, "comment_id": 74577787, "body": "I&#39;d also change the header to <code>&lt;stdio.h&gt;</code>, and remove <code>main()</code> parameters (since they&#39;re not used)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1493839557, "post_id": 43767879, "comment_id": 74578264, "body": "@pmg: The signature of <code>main</code> is fine. Note that an empty argument list is an obsolecence feature. If no arguments are used, <code>int main(void)</code> should be used."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1493841168, "post_id": 43767879, "comment_id": 74579085, "body": "Adding void as parameter list is what I meant to say."}, {"owner": {"reputation": 11, "user_id": 7082930, "user_type": "registered", "profile_image": "https://graph.facebook.com/1523377784644382/picture?type=large", "display_name": "Strahinja Mitric", "link": "https://stackoverflow.com/users/7082930/strahinja-mitric"}, "edited": false, "score": 0, "creation_date": 1494001799, "post_id": 43767879, "comment_id": 74658690, "body": "I focused on question (which char to use)... Of course, your comments are appreciated. :)"}], "tags": [], "owner": {"reputation": 11, "user_id": 7082930, "user_type": "registered", "profile_image": "https://graph.facebook.com/1523377784644382/picture?type=large", "display_name": "Strahinja Mitric", "link": "https://stackoverflow.com/users/7082930/strahinja-mitric"}, "is_accepted": false, "score": 1, "last_activity_date": 1493837418, "creation_date": 1493837418, "answer_id": 43767879, "question_id": 43767727, "link": "https://stackoverflow.com/questions/43767727/how-to-use-broken-bar-in-gcc/43767879#43767879", "title": "How to use broken bar (&#166;) in gcc?", "body": "<p>You are using the wrong character. \nYou should use:     <code>|</code></p>\n\n<p>So, your code should look like this: </p>\n\n<pre><code>#include \"stdio.h\" \n\nint main(int argc, char const *argv[])\n{ \n     int x, y, z; \n     x = 0xffff; \n     y = 0x8888; \n     z = x | y; \n     printf(\"0x%u \\n\", z); \n     return 0; \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 948, "user_id": 7306868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ikAld.png?s=128&g=1", "display_name": "GeekSambhu", "link": "https://stackoverflow.com/users/7306868/geeksambhu"}, "is_accepted": true, "score": 3, "last_activity_date": 1493839123, "last_edit_date": 1493839123, "creation_date": 1493837910, "answer_id": 43768013, "question_id": 43767727, "link": "https://stackoverflow.com/questions/43767727/how-to-use-broken-bar-in-gcc/43768013#43768013", "title": "How to use broken bar (&#166;) in gcc?", "body": "<p>The character <code>\u00a6</code> is not correct bitwise or operator. Search for this <code>|</code>  in your keyboard.\nThis code compiles well in my machine with <code>|</code>.</p>\n\n<pre><code>#include \"stdio.h\"\nint main(int argc, char const *argv[]) {\n    int x, y , z;\n    x = 0xffff;\n    y = 0x8888;\n    z = x | y;\n    printf(\"0x%u \\n\",z );\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493839297, "post_id": 43768107, "comment_id": 74578133, "body": "Trigraphs are a desperation measure, not least because you have to explicitly enable them with GCC using <code>-trigraphs</code> (and you might need <code>-Wno-trigraphs</code> too)."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493841069, "post_id": 43768107, "comment_id": 74579025, "body": "@JonathanLeffler: my GCC (version 4.9.2) compiles cleanly with <code>-std=c89 -pedantic</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493841713, "post_id": 43768107, "comment_id": 74579392, "body": "If you add <code>-Wall</code>, I believe you&#39;ll get a warning.  Using GCC 7.1.0: <code>gcc -std=c11 -pedantic -Wall -Werror -c cox.c</code> yields: <code>cox.c:3:1: error: trigraph ??= converted to # [-Werror=trigraphs]</code> and <code>??=include &lt;stdio.h&gt;</code> identifying the line with the trigraph.  So do versions 5.2.0 and 6.1.0.  Without the <code>-Wall</code>, they aren&#39;t worried about the trigraphs.  (I don&#39;t happen to have a GCC 4.x on this machine.)  I don&#39;t compile without <code>-Wall</code> (or <code>-Werror</code> or <code>-Wextra</code>)."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1493838261, "creation_date": 1493838261, "answer_id": 43768107, "question_id": 43767727, "link": "https://stackoverflow.com/questions/43767727/how-to-use-broken-bar-in-gcc/43768107#43768107", "title": "How to use broken bar (&#166;) in gcc?", "body": "<p>If you can't find the proper character (<code>|</code> vs <code>\u00a6</code>), use the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#5.2.1.1\" rel=\"nofollow noreferrer\">trigraph</a> <code>??!</code>.</p>\n\n<p>Your line would look like this</p>\n\n<pre><code>z = x ??! y;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7959073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c7c547d319a5c017e388b9b80a9344?s=128&d=identicon&r=PG&f=1", "display_name": "sami", "link": "https://stackoverflow.com/users/7959073/sami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 43768013, "answer_count": 3, "score": 0, "last_activity_date": 1493841162, "creation_date": 1493836827, "last_edit_date": 1493841162, "question_id": 43767727, "link": "https://stackoverflow.com/questions/43767727/how-to-use-broken-bar-in-gcc", "title": "How to use broken bar (&#166;) in gcc?", "body": "<p>I'm trying to code in C with the bit operator 'or' (<code>\u00a6</code>) (quite simple, I know).\nHowever, when I compile it in gcc, I get:</p>\n\n<pre><code>error: stray \\302 and stray \\246\n</code></pre>\n\n<p>I tried to look for a solution to this problem, and all that I saw was that this error happens when the compiler doesn't recognize the symbol.\nWhat can I do to make it work?</p>\n\n<p>My code is:</p>\n\n<pre><code>#include \"stdio.h\"\n\nint main(int argc, char const *argv[]) {\n  int x, y , z;\n  x = 0xffff;\n  y = 0x8888;\n  z = x \u00a6 y;\n  printf(\"0x%u \\n\", z);\n  return 0;\n}\n</code></pre>\n\n<p>here is the error on the terminal: </p>\n\n<pre><code>ex_8_4.c: In function \u2018main\u2019:\nex_8_4.c:19:3: error: stray \u2018\\302\u2019 in program\n   z = x \u00a6 y;\n   ^\nex_8_4.c:19:3: error: stray \u2018\\246\u2019 in program\nex_8_4.c:19:12: error: expected \u2018;\u2019 before \u2018y\u2019\n   z = x \u00a6 y;\n            ^\n</code></pre>\n\n<p>apparently i used the wrong symbol (\u00a6 instead of |) (for some reason that's how it's appear in the book) so new it's working. thank u all.</p>\n"}, {"tags": ["c", "windows", "driver"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1493881282, "post_id": 43767323, "comment_id": 74592755, "body": "<i>ControlService</i> fails with error code of Invalid Handle - so <code>The specified handle was not obtained using CreateService or OpenService, or the handle is no longer valid.</code> - what is here unclear ? you use <i>hService</i> as global variable which already very ugly and not professional for this code. how you obtaining this handle, are it not changed or closed - not visible - you not paste related code"}, {"owner": {"reputation": 43, "user_id": 7153828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5d397085d04f8ca6844469cdd5ed609?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel Mar", "link": "https://stackoverflow.com/users/7153828/marcel-mar"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1493915511, "post_id": 43767323, "comment_id": 74617203, "body": "@RbMm As I wrote, I&#39;m obtaining the handle with CreateServiceA. And it works for loading and IOCTL with the Driver. For Unloading however it becomes unvalid? I could try to get it again with OpenService, but I don&#39;t see why the handle would be different."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1493917802, "post_id": 43767323, "comment_id": 74618474, "body": "but error code say by self. from another side you can direct call <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff567117(v=vs.85).aspx\" rel=\"nofollow noreferrer\">ZwUnloadDriver</a> - which <i>NTSTATUS</i> it return and what result ? and why your <i>hService</i> is global variable ?!?"}, {"owner": {"reputation": 43, "user_id": 7153828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5d397085d04f8ca6844469cdd5ed609?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel Mar", "link": "https://stackoverflow.com/users/7153828/marcel-mar"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1493923664, "post_id": 43767323, "comment_id": 74621734, "body": "Well, I have 2 different cpp&#39;s, one with all the functions themselves, Loading Driver, Unloading Driver, Enable DSE.... and then I have the cpp which calls all of the functions in the correct order. I don&#39;t actually know why it would be a disadvantage to have the variables global, I&#39;d like to know though :)"}, {"owner": {"reputation": 43, "user_id": 7153828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5d397085d04f8ca6844469cdd5ed609?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel Mar", "link": "https://stackoverflow.com/users/7153828/marcel-mar"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1493925937, "post_id": 43767323, "comment_id": 74623019, "body": "And I just tryed ZmUnloadDriver, literally the same result. Once again Invalid Handle. What kind of confuses me is that if I try &#39;OpenServiceA(hSCManager, Driver, SC_MANAGER_ALL_ACCESS);&#39;, the returned Handle is invalid.. but I don&#39;t know why, because my Driver is running."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1493928058, "post_id": 43767323, "comment_id": 74624282, "body": "<code>ZwUnloadDriver</code> return <i>STATUS_INVALID_HANDLE</i> ?! which <b>exactly</b> code returned ? and may be you delete driver registry key ?"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7153828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5d397085d04f8ca6844469cdd5ed609?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel Mar", "link": "https://stackoverflow.com/users/7153828/marcel-mar"}, "is_accepted": true, "score": 0, "last_activity_date": 1493997813, "creation_date": 1493997813, "answer_id": 43808619, "question_id": 43767323, "link": "https://stackoverflow.com/questions/43767323/c-windows-unable-to-unload-driver/43808619#43808619", "title": "(C/Windows) Unable to unload driver", "body": "<p>Alright, as RbMm mentioned, I overlooked the removal of the Registry key... Well, but after I moved that code, I was still not able to unload my driver.</p>\n\n<p>So I figured out that the SC_HANDLE obtained by CreateService is invalid. Eventhough it says on MSDN that the handle can be used from CreateService, it didn't work for me (might be DSE). You should instead just create a new SCManager and a new SCService and you should be good to go. Now ControlService is returning true for me :)</p>\n"}], "owner": {"reputation": 43, "user_id": 7153828, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5d397085d04f8ca6844469cdd5ed609?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel Mar", "link": "https://stackoverflow.com/users/7153828/marcel-mar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 43808619, "answer_count": 1, "score": 1, "last_activity_date": 1493997813, "creation_date": 1493835378, "last_edit_date": 1493835701, "question_id": 43767323, "link": "https://stackoverflow.com/questions/43767323/c-windows-unable-to-unload-driver", "title": "(C/Windows) Unable to unload driver", "body": "<p>My OP is Windows 7 64bit. I'm loading a driver with DSEfix (Bypasses the Driver Sign Enforcement from Windows) and that works just fine. IOCTL Requests get executed they way they should, but whenever I try to unload my driver it fails on: <code>ControlService(hService, SERVICE_CONTROL_STOP, &amp;ss</code> with error code of Invalid Handle.</p>\n\n<p>Here is my Driver Entry:</p>\n\n<pre><code>NTSTATUS DriverEntry(PDRIVER_OBJECT Object, PUNICODE_STRING RegistryPath) {\n\nUNICODE_STRING dNUS = { 0 };\nRtlInitUnicodeString(&amp;dNUS, L\"\\\\Device\\\\testdriver\");\n\nUNICODE_STRING dSLU = { 0 };\nRtlInitUnicodeString(&amp;dSLU, L\"\\\\DosDevices\\\\testdriver\");\n\nIoCreateDevice(Object, 0, &amp;dNUS, FILE_DEVICE_UNKNOWN, FILE_DEVICE_SECURE_OPEN, FALSE, &amp;deviceObj);\nIoCreateSymbolicLink(&amp;dSLU, &amp;dNUS);\n\nObject-&gt;MajorFunction[IRP_MJ_CREATE] = CCreate;\nObject-&gt;MajorFunction[IRP_MJ_CLOSE] = CClose;\nObject-&gt;MajorFunction[IRP_MJ_DEVICE_CONTROL] = IOCTL;\nObject-&gt;DriverUnload = Unload;\n\nreturn(STATUS_SUCCESS);\n</code></pre>\n\n<p>and the Unload function:</p>\n\n<pre><code>NTSTATUS Unload(PDRIVER_OBJECT Object) {\nUNICODE_STRING symLink;\nRtlInitUnicodeString(&amp;symLink, L\"\\\\DosDevices\\\\testdriver\");\n\nif (Object-&gt;DeviceObject != NULL)\n{\n    IoDeleteSymbolicLink(&amp;symLink);\n    IoDeleteDevice(Object-&gt;DeviceObject);\n}\n</code></pre>\n\n<p>On the usermode side of things I get the hSCManager from <code>OpenSCManagerA(NULL, NULL, SC_MANAGER_CREATE_SERVICE)</code> when loading the driver and hService from <code>CreateServiceA</code>. Both are valid and work for loading the driver just fine.</p>\n\n<p>And here is my unload driver function in usermode:</p>\n\n<pre><code>bool UnloadDriver()\n{\nif (!hSCManager) return false;\nif (!hService) return false;\n\ncout &lt;&lt; \"STOPPING DRIVER\" &lt;&lt; endl;\n\nSERVICE_STATUS ss;\nif (ControlService(hService, SERVICE_CONTROL_STOP, &amp;ss))\n{\n    if (ss.dwCurrentState == SERVICE_STOPPED)\n    {\n        DeleteService(hService);\n        CloseServiceHandle(hSCManager);\n        CloseServiceHandle(hService);\n        cout &lt;&lt; \"DRIVER UNLOADED\" &lt;&lt; endl;\n        return true;\n    }\n    else\n    {\n        cout &lt;&lt; \"SERVICE NOT STOPPED IN TIME\" &lt;&lt; endl;\n        CloseServiceHandle(hSCManager);\n        CloseServiceHandle(hService);\n        return false;\n    }\n}\nelse\n{\n    cout &lt;&lt; \"SERVICE_CONTROL_STOP FAILED\" &lt;&lt; endl;\n    CloseServiceHandle(hSCManager);\n    CloseServiceHandle(hService);\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "function", "char"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493835657, "post_id": 43767208, "comment_id": 74576097, "body": "Why is that <code>while</code> loop even there? You are not using <code>counter</code> anywhere."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493836371, "post_id": 43767208, "comment_id": 74576548, "body": "&quot;advice how i could improve my code to make it more professional and cheaper?&quot; --&gt; Consider <a href=\"https://codereview.stackexchange.com\">codereview.stackexchange.com</a> - a better site choice.  (This assumes it functions correctly)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493836950, "post_id": 43767208, "comment_id": 74576874, "body": "I see at least 4 improvements to <code>countingCharacters()</code>,  Post working code at <a href=\"https://codereview.stackexchange.com/\">codereview</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493838057, "post_id": 43767208, "comment_id": 74577515, "body": "To really improve your code: step 1: Clearly separate out the <i>code</i> from the <i>test code</i>.  Are you concerned only about <code>countingCharacters()</code> or everything after <code>char myString[] = &quot;Hello World!&quot;;</code> or what?"}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493836428, "post_id": 43767460, "comment_id": 74576575, "body": "<code>\\0</code> conveys the meaning better."}, {"owner": {"reputation": 505, "user_id": 7906473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PB84L.jpg?s=128&g=1", "display_name": "Parth K", "link": "https://stackoverflow.com/users/7906473/parth-k"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493836675, "post_id": 43767460, "comment_id": 74576733, "body": "True that. It&#39;s just that <code>0</code> is easier on the fingers. :P"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493837841, "post_id": 43767460, "comment_id": 74577416, "body": "<code>while (myString[i] != &#39;\\0&#39;)</code> is easy on the eyes of code reviews and maintainers, a higher cost than developing should you agree with <a href=\"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3610582/\" rel=\"nofollow noreferrer\">this</a>.  <code>while (myString[i])</code> is the terse alternative."}], "tags": [], "owner": {"reputation": 505, "user_id": 7906473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PB84L.jpg?s=128&g=1", "display_name": "Parth K", "link": "https://stackoverflow.com/users/7906473/parth-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1493839726, "last_edit_date": 1493839726, "creation_date": 1493835892, "answer_id": 43767460, "question_id": 43767208, "link": "https://stackoverflow.com/questions/43767208/count-characters-using-function-frequency/43767460#43767460", "title": "Count characters using function (frequency)", "body": "<p>You are doing the whole thing twice.\nfirst in main with the loop.</p>\n\n<pre><code>while (myString[i]!='\\0'){...}\n</code></pre>\n\n<p>And the again with <code>countingCharacters</code>. Wasting a lot of resources.</p>\n\n<p>Additionally, if you are using <code>strlen</code> don't do <code>while (myString[i]!='\\0)</code>. Replace that with <code>for (i=0;i&lt;size;i++)</code>. You are investing to find <code>size</code> and then not using it. Alternatively don't use <code>strlen</code> and just do <code>while (myString[i]!='\\0')</code></p>\n\n<p>FYI: You can use <code>'\\0'</code>and <code>0</code> equivalently (the integer value of <code>\\0</code> is <code>0</code>).</p>\n"}], "owner": {"reputation": 55, "user_id": 7856051, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/e83368418503d98d2d7c25a5b5c276aa?s=128&d=identicon&r=PG&f=1", "display_name": "Cutik", "link": "https://stackoverflow.com/users/7856051/cutik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493839726, "creation_date": 1493835007, "question_id": 43767208, "link": "https://stackoverflow.com/questions/43767208/count-characters-using-function-frequency", "title": "Count characters using function (frequency)", "body": "<p>Trying to count characters and improve my code i made a few changes instead of using while loop for example. Curious if anyone got any advice how i could improve my code to make it more professional and cheaper?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n\nint countingCharacters(char *message, int size, char charsToBeCounted);\n\nint main()\n{\n    char myString[] = \"Hello World!\";\n\n    int size = strlen(myString);\n\n    char charToBeCounted = 'a';\n    int i = 0;\n    int counter = 0;\n\n\n    while (myString[i] != '\\0')\n    {\n        if (myString[i] == charToBeCounted)\n        {\n            counter++;\n        }\n        ++i;\n    }\n\n    for (int i = 'a'; i &lt;= 'z'; i++)\n    {\n        printf(\"%c: %d\\n\", charToBeCounted, countingCharacters(myString, size, charToBeCounted));\n        charToBeCounted++;\n    }\n    getchar();\n\n    return 0;\n}\n\nint countingCharacters(char *message, int size, char charsToBeCounted)\n{\n    int counter = 0;\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        if (message[i] == charsToBeCounted)\n        counter++;\n    }\n\n    return counter;\n}\n</code></pre>\n"}, {"tags": ["c", "arduino", "avr", "uart", "atmega"], "comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1493834687, "post_id": 43766757, "comment_id": 74575529, "body": "would you paste the output what you get?, is last two bytes are garbage value?"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1493834767, "post_id": 43766757, "comment_id": 74575579, "body": "The output I get is in the screenshot on the right (the serial terminal)"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "edited": false, "score": 0, "creation_date": 1493834840, "post_id": 43766757, "comment_id": 74575619, "body": "I think I don&#39;t get it. Where do you mena?"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "reply_to_user": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1493834895, "post_id": 43766757, "comment_id": 74575666, "body": "changed the lines in transmitByte() but did not have any effect"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493834932, "post_id": 43766757, "comment_id": 74575688, "body": "Yeah, realized it is not the problem"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493834993, "post_id": 43766757, "comment_id": 74575726, "body": "Could be the case your stop bits are different size on the transmitting and the receiving side. Make sure all of the settings are synchronized"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "edited": false, "score": 0, "creation_date": 1493835624, "post_id": 43766757, "comment_id": 74576077, "body": "Hmmm unfortunately not"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493835856, "post_id": 43766757, "comment_id": 74576218, "body": "Do you have <code>F_CPU</code> defined(properly)? <a href=\"http://www.atmel.com/webdoc/avrlibcreferencemanual/group__util__delay_1gad22e7a36b80e2f917324dc43a425e9d3.html\" rel=\"nofollow noreferrer\">atmel.com/webdoc/avrlibcreferencemanual/&hellip;</a>"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "edited": false, "score": 0, "creation_date": 1493835914, "post_id": 43766757, "comment_id": 74576252, "body": "yep I set it to #define F_CPU 1000000"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493836006, "post_id": 43766757, "comment_id": 74576315, "body": "Is it the true frequency? 1MHz?"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "edited": false, "score": 0, "creation_date": 1493836036, "post_id": 43766757, "comment_id": 74576338, "body": "Yep the default frequency of my ATMEGA"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493836064, "post_id": 43766757, "comment_id": 74576357, "body": "<i>The maximal possible delay is 262.14 ms / F_CPU in MHz.</i>. So your maximum delay is 262ms"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "edited": false, "score": 0, "creation_date": 1493836167, "post_id": 43766757, "comment_id": 74576420, "body": "hm... I am a bit surprised, I cannot set the delay to a time I want to?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493836203, "post_id": 43766757, "comment_id": 74576448, "body": "This is what documentation tells."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1493836460, "post_id": 43766757, "comment_id": 74576597, "body": "But you forgot to read further in the documentation of _delay_ms, where it says:  &quot;If the avr-gcc toolchain has __builtin_avr_delay_cycles(unsigned long) support, maximal possible delay is 4294967.295 ms/ F_CPU in MHz. For values greater than the maximal possible delay, overflows results in no delay i.e., 0ms.&quot;"}, {"owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "edited": false, "score": 0, "creation_date": 1493836547, "post_id": 43766757, "comment_id": 74576660, "body": "How does the Arduino handles this.. i remember when I used Serial.Read that output appeared around every second on the terminal"}, {"owner": {"reputation": 5310, "user_id": 1790864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/u8BJF.png?s=128&g=1", "display_name": "Rev", "link": "https://stackoverflow.com/users/1790864/rev"}, "edited": false, "score": 0, "creation_date": 1493879748, "post_id": 43766757, "comment_id": 74591744, "body": "According to <a href=\"http://www.atmel.com/webdoc/avrlibcreferencemanual/group__util__delay_1gad22e7a36b80e2f917324dc43a425e9d3.html\" rel=\"nofollow noreferrer\">this</a>, _delay_ms() should work up to 6.5535 seconds. However, starting with delays higher than 262.14 ms, the resolution is decreased to 1/10ms. And you could always wrap _delay_ms() in another function that loops it multiples of 100ms for example to get higher any delay of your choice."}], "owner": {"reputation": 2867, "user_id": 2328541, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/2YZpc.png?s=128&g=1", "display_name": "sesc360", "link": "https://stackoverflow.com/users/2328541/sesc360"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493837046, "creation_date": 1493833390, "last_edit_date": 1493837046, "question_id": 43766757, "link": "https://stackoverflow.com/questions/43766757/serial-connection-atmega328p", "title": "Serial Connection ATMEGA328p", "body": "<p>I wrote up a function to connect via UART and print a string for debugging purposes. But my logic does not add up somehow... I see the line \"Random Number\" printed in the console but blazingly fast... no matter what I add for a _delay_ms value, it is not usable. Did I miss out on anything?</p>\n\n<p>Why is my delay function not having any influence on the output on the serial terminal?</p>\n\n<pre><code>void initUSART(void) {\n\n    #define BAUDRATE ((F_CPU) / (BAUD * 8UL)-1) // Set Baud Rate Value for UBRR\n\n    // Set register\n    UBRR0H = (BAUDRATE &gt;&gt; 8);\n    UBRR0L = BAUDRATE;\n    UCSR0A |= (1 &lt;&lt; U2X0);  \n    // Enable USART transmitter and receiver\n    UCSR0B = (1 &lt;&lt; TXEN0) | (1 &lt;&lt; RXEN0);\n    // Set 8 data bits and 1 stop bit\n    UCSR0C = (1 &lt;&lt; UCSZ01) | (1 &lt;&lt; UCSZ00);\n}\n\nvoid transmitByte(uint8_t data) {\n    // Wait for empty transmit buffer\n    loop_until_bit_is_set(UCSR0A, UDRE0);\n    UDR0 = data;\n}\n\nvoid printString(const char myString[]) {\n    uint8_t i = 0;\n    while (myString[i]) {\n        transmitByte(myString[i]);\n        i++;\n    }\n}\n\nint main(void)\n{\n    setup();    \n    randomSeed(adcRead(0));\n\n    while (1) \n    {   \n        printString(\"Random Number:\\n\");\n        _delay_ms(100000);\n    }\n\n    return (0);\n}\n</code></pre>\n\n<p>When I use <code>\\r\\n</code>at the end of the string, the output gets really strange:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fySZH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fySZH.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I try this test code everything works as expected, the LED blinks every second. I really don't see where the difference is, as it is the same function.</p>\n\n<pre><code>                                                       /* Blinker Demo */\n\n// ------- Preamble -------- //\n#include &lt;avr/io.h&gt;                        /* Defines pins, ports, etc */\n#include &lt;util/delay.h&gt;                     /* Functions to waste time */\n\n\nint main(void) {\n\n  // -------- Inits --------- //\n  DDRB |= 0b00000001;            /* Data Direction Register B:\n                                   writing a one to the bit\n                                   enables output. */\n\n  // ------ Event loop ------ //\n  while (1) {\n\n    PORTB = 0b00000001;          /* Turn on first LED bit/pin in PORTB */\n    _delay_ms(1000);                                           /* wait */\n\n    PORTB = 0b00000000;          /* Turn off all B pins, including LED */\n    _delay_ms(1000);                                           /* wait */\n\n  }                                                  /* End event loop */\n  return 0;                            /* This line is never reached */\n}\n</code></pre>\n"}, {"tags": ["c", "macros", "bitwise-operators", "bitwise-or"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1493832833, "post_id": 43766599, "comment_id": 74574444, "body": "What does the preprocessed code say?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493832856, "post_id": 43766599, "comment_id": 74574459, "body": "<code>|</code> is bitwise OR, if that helps."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1493832900, "post_id": 43766599, "comment_id": 74574486, "body": "Expand the macro. Look at the operators precedence table. Understand. Be enlightened."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 1, "creation_date": 1493833060, "post_id": 43766599, "comment_id": 74574567, "body": "I know you&#39;re learning. It&#39;s good to learn this stuff... but don&#39;t use it for real in the future."}, {"owner": {"reputation": 11, "user_id": 5476964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vbjIE.jpg?s=128&g=1", "display_name": "VoidOfLimbo", "link": "https://stackoverflow.com/users/5476964/voidoflimbo"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1493833297, "post_id": 43766599, "comment_id": 74574705, "body": "@pmg why is it so ?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1493833361, "post_id": 43766599, "comment_id": 74574754, "body": "Macros are replaced with the defined content during compilation. Try it on paper and check what will be compiled. I doubt that &quot;and so on...&quot; is true."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1493833383, "post_id": 43766599, "comment_id": 74574763, "body": "@VoidLimbo Cryptic and confusing code is good good only for c00L h4xx0r competitions."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493834099, "post_id": 43766599, "comment_id": 74575187, "body": "<code>#define x 1.0e100</code> will likely also satisfy <code>x==x+2</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1493834432, "post_id": 43766599, "comment_id": 74575384, "body": "OP seems to be talking about <a href=\"https://codegolf.stackexchange.com/a/7166/744\">this answer to a challenge on CodeGolf</a>."}, {"owner": {"reputation": 11, "user_id": 5476964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vbjIE.jpg?s=128&g=1", "display_name": "VoidOfLimbo", "link": "https://stackoverflow.com/users/5476964/voidoflimbo"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1493834783, "post_id": 43766599, "comment_id": 74575584, "body": "@Paul here is where i found it <a href=\"http://www.developerinsider.in/x-x-2-make-it-equal-for-x-programming-puzzles/?utm_campaign=turbocpp\" rel=\"nofollow noreferrer\">(x == x+2) make it equal for x - Programming Puzzles</a>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1493834882, "post_id": 43766599, "comment_id": 74575649, "body": "@VoidLimbo: yes, it looks like they plagiarised that content from the <a href=\"https://codegolf.stackexchange.com/questions/7165/when-does-x-x2/7166#7166\">CodeGolf challenge that I linked to above</a> - they even stole <a href=\"https://codegolf.stackexchange.com/a/7182/744\">my answer</a> !"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1493835295, "post_id": 43766599, "comment_id": 74575904, "body": "@PaulR Great minds think alike  (they also think differently).  Perhaps <code>#define x 0&gt;&gt;1</code>?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493835410, "post_id": 43766599, "comment_id": 74575968, "body": "@chux: you can see it&#39;s been plagiarised wholesale because the solutions are copied <i>verbatim</i> (even the comments!)."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1493835802, "post_id": 43766599, "comment_id": 74576179, "body": "@paul I thought &quot;stole my answer&quot; was referring the similarity to my <a href=\"http://stackoverflow.com/questions/43766599/define-x-20-in-c#comment74575187_43766599\">comment</a> and your <a href=\"https://codegolf.stackexchange.com/a/7182/744\">answer</a>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493835915, "post_id": 43766599, "comment_id": 74576254, "body": "@chux: oh I see - no, I was referring to the fact that they had stolen numerous answers from the CodeGolf challenge, including mine."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5476964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vbjIE.jpg?s=128&g=1", "display_name": "VoidOfLimbo", "link": "https://stackoverflow.com/users/5476964/voidoflimbo"}, "edited": false, "score": 0, "creation_date": 1493833787, "post_id": 43766752, "comment_id": 74575007, "body": "Thank you @Sourav i got it now."}, {"owner": {"reputation": 11, "user_id": 5476964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vbjIE.jpg?s=128&g=1", "display_name": "VoidOfLimbo", "link": "https://stackoverflow.com/users/5476964/voidoflimbo"}, "edited": false, "score": 0, "creation_date": 1493834080, "post_id": 43766752, "comment_id": 74575177, "body": "I will keep your advice in mind as well. I don`t use macros that much i was just wondering how it was working. Now i got to know more about macros. Thanks to you @Sourav"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1493834081, "last_edit_date": 1493834081, "creation_date": 1493833352, "answer_id": 43766752, "question_id": 43766599, "link": "https://stackoverflow.com/questions/43766599/define-x-20-in-c/43766752#43766752", "title": "#define x 2|0 in C", "body": "<p><strong>TL;DR;</strong> Read about <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">operator precedence</a>.</p>\n\n<p><code>+</code> binds higher than <code>==</code> which binds higher than <code>|</code>.</p>\n\n<p>After preprocessing, your <code>printf()</code> statement looks like</p>\n\n<pre><code> printf(\"%d\",2|0==2|0+2);\n</code></pre>\n\n<p>which is the same as </p>\n\n<pre><code> printf(\"%d\",2|(0==2)|(0+2));\n</code></pre>\n\n<p>which is</p>\n\n<pre><code>printf(\"%d\",2|0|2);\n</code></pre>\n\n<hr>\n\n<p><strong><em>Word of advice:</em></strong> Do not write this type of code in real scenario. With minimal level of compiler warning enabled, your code produces</p>\n\n<blockquote>\n<pre><code>source_file.c: In function \u2018main\u2019:\nsource_file.c:4:12: warning: suggest parentheses around comparison in operand of \u2018|\u2019 [-Wparentheses]\n #define x 2|0\n            ^\nsource_file.c:8:21: note: in expansion of macro \u2018x\u2019\n     printf(\"%d\\n\\n\",x==x+2); \n                     ^\nsource_file.c:4:12: warning: suggest parentheses around arithmetic in operand of \u2018|\u2019 [-Wparentheses]\n #define x 2|0\n            ^\nsource_file.c:8:24: note: in expansion of macro \u2018x\u2019\n     printf(\"%d\\n\\n\",x==x+2);\n</code></pre>\n</blockquote>\n\n<p>So, the moment you change the MACRO definition to something <em>sane</em>, like</p>\n\n<pre><code>#define x (2|0)\n</code></pre>\n\n<p>the result will also change, as the explicit precedence then will be guaranteed by the parenthesis.</p>\n"}, {"tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1493833667, "last_edit_date": 1493833667, "creation_date": 1493833360, "answer_id": 43766754, "question_id": 43766599, "link": "https://stackoverflow.com/questions/43766599/define-x-20-in-c/43766754#43766754", "title": "#define x 2|0 in C", "body": "<p>After running the preprocessor, <code>gcc -E main.c</code> you will get:</p>\n\n<pre><code>int main()\n{\n    printf(\"%d\",2|0==2|0 +2);\n    return 0;\n}\n</code></pre>\n\n<p>Since <code>(0==2)</code> is 0, <code>2|0|2</code> </p>\n"}], "owner": {"reputation": 11, "user_id": 5476964, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vbjIE.jpg?s=128&g=1", "display_name": "VoidOfLimbo", "link": "https://stackoverflow.com/users/5476964/voidoflimbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 43766752, "answer_count": 2, "score": 0, "last_activity_date": 1493834081, "creation_date": 1493832774, "last_edit_date": 1493833946, "question_id": 43766599, "link": "https://stackoverflow.com/questions/43766599/define-x-20-in-c", "title": "#define x 2|0 in C", "body": "<p>The below given code is written to satisfy the condition <strong>(x == x+2)</strong> to be returning true in C.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define x 2|0\n\nint main()  \n{\n    printf(\"%d\",x==x+2); \n    return 0;\n}\n</code></pre>\n\n<p>In the above code why the <code>printf()</code> is printing <code>2</code> ( if I write <code>x+3</code> I get <code>3</code> and so on ). </p>\n\n<p>Can someone explain how the given macro is working.</p>\n\n<p>What is the use of <code>|</code> operator in C and what does the macro </p>\n\n<pre><code>#define x 2|0\n</code></pre>\n\n<p>mean? I read about macros in other questions but no question explained similar kind of example.</p>\n"}, {"tags": ["python", "c", "linux"], "owner": {"reputation": 12137, "user_id": 451007, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3d3a48b34dda00ca0a5745a5c285068c?s=128&d=identicon&r=PG", "display_name": "010110110101", "link": "https://stackoverflow.com/users/451007/010110110101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493831946, "creation_date": 1493831946, "question_id": 43766355, "link": "https://stackoverflow.com/questions/43766355/strange-rpath-issues-with-a-python3-extension", "title": "Strange rpath issues with a python3 extension", "body": "<p>I'm trying to create an extension module in Python. It's a wrapper for an existing C library (.so file)  I'm having rpath issues.  </p>\n\n<p>When I do this:</p>\n\n<pre><code>rm -rf build\npython3 setup.py build_ext --rpath=$ORIGIN\nldd build/lib.linux-x86_64-3.5/mymodule.cpython-35m-x86_64-linux-gnu.so \n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>linux-vdso.so.1 (0x00007ffc5aab7000)\nlibmylibrary.so =&gt; not found\nlibpython3.5m.so.1.0 =&gt; /lib64/libpython3.5m.so.1.0 (0x00007f38a0a6b000)\nlibpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f38a084d000)\nlibc.so.6 =&gt; /lib64/libc.so.6 (0x00007f38a0487000)\nlibdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f38a0283000)\nlibutil.so.1 =&gt; /lib64/libutil.so.1 (0x00007f38a007e000)\nlibm.so.6 =&gt; /lib64/libm.so.6 (0x00007f389fd75000)\n/lib64/ld-linux-x86-64.so.2 (0x0000560d8fb8f000)\n</code></pre>\n\n<p>See how libmylibrary.so is not found?</p>\n\n<p>But when I do it like this:</p>\n\n<pre><code>rm -rf build\npython3 setup.py build_ext\nldd build/lib.linux-x86_64-3.5/mymodule.cpython-35m-x86_64-linux-gnu.so \n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>linux-vdso.so.1 (0x00007ffc5aab7000)\nlibpython3.5m.so.1.0 =&gt; /lib64/libpython3.5m.so.1.0 (0x00007f38a0a6b000)\nlibpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f38a084d000)\nlibc.so.6 =&gt; /lib64/libc.so.6 (0x00007f38a0487000)\nlibdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f38a0283000)\nlibutil.so.1 =&gt; /lib64/libutil.so.1 (0x00007f38a007e000)\nlibm.so.6 =&gt; /lib64/libm.so.6 (0x00007f389fd75000)\n/lib64/ld-linux-x86-64.so.2 (0x0000560d8fb8f000)\n</code></pre>\n\n<p>See how libmylibrary.so is missing?</p>\n\n<p>In Python, in either case, cannot locate the 1 wrapped function in libmylibrary.so</p>\n\n<p>It says:</p>\n\n<pre><code>$ python3\nPython 3.5.3 (default, Apr 24 2017, 13:32:13) \n[GCC 6.3.1 20161221 (Red Hat 6.3.1-1)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import mylibrary\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: /home/me/projectx/venv/lib/python3.5/site-packages/mylibrary.cpython-35m-x86_64-linux-gnu.so: undefined symbol: my_special_function\n</code></pre>\n"}, {"tags": ["c", "visual-studio", "visual-studio-2015", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "is_accepted": true, "score": 0, "last_activity_date": 1493888390, "creation_date": 1493888390, "answer_id": 43778296, "question_id": 43766297, "link": "https://stackoverflow.com/questions/43766297/unable-to-compile-or-run-sqlite3-using-visual-studio-2015/43778296#43778296", "title": "Unable to compile or run sqlite3 using Visual Studio 2015", "body": "<p>In case someone else should have this problem, I have found the solution.  There were 2 lines that specified the define of SQLITE_API.  I added the export to the define like this: <code># define SQLITE_API __declspec(dllexport)</code>.  Apparently there were no exports, so that was why the .lib file was never created.  With the change, the .lib and .exp files were created and then the program didn't get the 0c000007b error.</p>\n"}], "owner": {"reputation": 147, "user_id": 5635287, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/hZnAj.jpg?s=128&g=1", "display_name": "J. Toran", "link": "https://stackoverflow.com/users/5635287/j-toran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 43778296, "answer_count": 1, "score": 0, "last_activity_date": 1493888390, "creation_date": 1493831740, "last_edit_date": 1495540030, "question_id": 43766297, "link": "https://stackoverflow.com/questions/43766297/unable-to-compile-or-run-sqlite3-using-visual-studio-2015", "title": "Unable to compile or run sqlite3 using Visual Studio 2015", "body": "<p>I'm trying to compile the source of sqlite3.c and shell.c I downloaded from the SQLite website using Visual Studio 2015.  I created DLL project sqlite3 and put the sqlite3.c source into it.  Then I created project sqlite3shell and put shell.c source into it.  I added <code>include \"stdafx.h\"</code> into both.  When I compiled both projects the DLL did not produce a .lib file, so the compile of sqlite3shell got the error <code>LNK1104 cannot open sqlite3.lib</code>.</p>\n\n<p>I manually created a .lib file using <a href=\"https://stackoverflow.com/questions/15440220/integrating-sqlite3-with-mfc-vs2012/17072228#17072228\">this solution</a>.  Then the sqlite3shell program compiled successfully.  But when I went to run the program, I got the error <code>The application was unable to start correctly (0xc000007b).</code>  Looking into this error is seems one reason it could be caused is by trying to access a 64-bit program from a 32-bit program.  But everything was created using the x86 configuration.</p>\n\n<p>Is there some way to have the DLL compile produce the correct .lib file?  Or if that won't fix the problem, is there something I can do to prevent the 0xc000007b error?</p>\n"}, {"tags": ["c", "arrays", "padding", "memory-alignment", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493831438, "post_id": 43766161, "comment_id": 74573669, "body": "why would there be some padding? when you <code>malloc(nmemb * sizeof(some_type))</code> you don&#39;t have padding."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1493831453, "post_id": 43766161, "comment_id": 74573683, "body": "Where is array here?"}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493831468, "post_id": 43766161, "comment_id": 74573693, "body": "@Jean-Fran&#231;oisFabre I dunno. But I prefer to ask rather than run into UB."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493831610, "post_id": 43766161, "comment_id": 74573774, "body": "Nope , my error.  I was considering <code>some_type*</code> as the type and not <code>some_type</code>.  No problem with this."}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 2, "creation_date": 1493831719, "post_id": 43766161, "comment_id": 74573833, "body": "<code>((some_type*)arr)++</code> You can&#39;t post-increment an rvalue."}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493831819, "post_id": 43766161, "comment_id": 74573888, "body": "@Jean-Fran&#231;oisFabre So I suppose I could as well ask if <code>malloc(nmemb * sizeof(some_type))</code> is equivalent to <code>calloc(nmemb, sizeof(some_type))</code> and thus an appropriate way to allocate spce for an array."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1493831837, "post_id": 43766161, "comment_id": 74573897, "body": "When you use pointer variables, arr[i] is the same as *(arr + i)."}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "edited": false, "score": 0, "creation_date": 1493831860, "post_id": 43766161, "comment_id": 74573914, "body": "@ephemient Sure thing, fixed, thank you."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1493831993, "post_id": 43766161, "comment_id": 74573983, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1066681/can-c-arrays-contain-padding-in-between-elements\">Can C arrays contain padding in between elements?</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1493832066, "post_id": 43766161, "comment_id": 74574016, "body": "Actually this is a good question, since the it&#39;s tricky to find a proper standard reference."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1493832241, "post_id": 43766161, "comment_id": 74574108, "body": "Asking again, <b>where is the array here</b>?"}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493832506, "post_id": 43766161, "comment_id": 74574256, "body": "@SouravGhosh I intend <code>arr</code> to be the array, which would normally be declared as <code>some_type *arr = calloc(nmemb, sizeof(some_type))</code>, but must be declared as <code>void*</code> instead, if the \u201ccontainer\u201d is to be type-agnostic. But tbh when I saw your comment for the first time, I though you were trying to tell me I was simply doing some senseless shit\u2026 Sorry if I misinterpreted this."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1493832558, "post_id": 43766161, "comment_id": 74574280, "body": "@gaazkam a pointer is not an array, be aware. :)"}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493832638, "post_id": 43766161, "comment_id": 74574330, "body": "@SouravGhosh Right, strictly speaking you\u2019re of course right :)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493836304, "post_id": 43766161, "comment_id": 74576509, "body": "Padding or not you can get the address of any element by doing <code>&amp;(arr[i])</code>. While saying this I do not want to imply that there <i>can</i> be padding. There is <b>no</b> padding between array elements."}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493837537, "post_id": 43766161, "comment_id": 74577209, "body": "@AjayBrahmakshatriya <code>you can get the address of any element by doing &amp;(arr[i])</code> AFAIK I can do this only if <code>arr</code> is of correct pointer type, if it\u2019s <code>void*</code>, then I can\u2019t get the addres of the third element of type <code>some_type</code> by writing <code>&amp;(arr[2])</code>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493837731, "post_id": 43766161, "comment_id": 74577348, "body": "@gaazkam, assuming you know the type of the contained element (I read you are implementing a container), you can cast <code>void*</code> to <code>T*</code> and then do the above mentioned. Anyway you have to cast the <code>void*</code> to something (usually char*) before adding anything. Since pointer arithmetic on <code>void*</code> is UB."}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493838063, "post_id": 43766161, "comment_id": 74577519, "body": "@AjayBrahmakshatriya Thank you for your remark. The container code does not know the type, only the <code>sizeof()</code> of the type. Only the code using the container knows the type."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493838246, "post_id": 43766161, "comment_id": 74577606, "body": "@gaazkam in that case, casting to <code>unsigned char*</code> and adding multiples of sizeof is your only option."}, {"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493838356, "post_id": 43766161, "comment_id": 74577663, "body": "@AjayBrahmakshatriya Many thanks. However, why did you mention <code>unsigned char*</code> and not <code>char*</code>? Why does it matter?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493838982, "post_id": 43766161, "comment_id": 74577978, "body": "@gaazkam No particular reason. Both are valid."}], "answers": [{"comments": [{"owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "edited": false, "score": 1, "creation_date": 1493832809, "post_id": 43766403, "comment_id": 74574435, "body": "What is this syntax: <code>unsigned char : 8;</code> ? I\u2019ve never seen such a syntax before."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493832961, "post_id": 43766403, "comment_id": 74574521, "body": "What is <code>BYTE_ALIGNMENT</code>? Bytes are mever aligned to anything else than bytes, i.e. <code>1</code>. And there is not necessarily padding between a <code>short</code> and an unsigned char` - typically there is none."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "edited": false, "score": 0, "creation_date": 1493833314, "post_id": 43766403, "comment_id": 74574718, "body": "@gaazkam This is a <a href=\"http://www.tutorialspoint.com/cprogramming/c_bit_fields.htm\" rel=\"nofollow noreferrer\">bit-field</a>. I used it to be able to add anonymous bytes..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493833525, "post_id": 43766403, "comment_id": 74574852, "body": "@Olaf Well, see my comment: &quot;this is just for illustration WHERE byte padding would occur&quot; -- the macro does not exist, of course, it shall represent the compiler settings, and the unsigned char bit fields were thought to <i>represent</i> the padding bytes. Wasn&#39;t that obvious?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493836128, "post_id": 43766403, "comment_id": 74576399, "body": "@Aconcagua: Padding bytes can occur after <b>any</b> field in a structure. There is no guarantee for a specific layout. It depends on the implementation and ABI of the target platform. Also note that C99 is <b>not the C standard</b>. It has been canceled 6 years ago with the release of C11."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493847536, "post_id": 43766403, "comment_id": 74582287, "body": "@Olaf Above was just one single example, and the important point was only that padding occurs <i>within</i> the struct. Question was actually not about how alignment is realised in struct layout anyway. -- Standard is easy, though, just exchanging the ciphers (paragraph and text exactly the same in both...)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493847685, "post_id": 43766403, "comment_id": 74582362, "body": "@Olaf Admitted - correct alignment <i>could</i> be realised, too, by inserting the padding bytes in between n and s members (in this case). Never saw a compiler doing this, though..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493847913, "post_id": 43766403, "comment_id": 74582446, "body": "@Aconcagua: Because it does not make sense and would complicate the compiler without any benefit (and because ABIs state different). But that&#39;s not the point of the question."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 7, "last_activity_date": 1494494484, "last_edit_date": 1494494484, "creation_date": 1493832117, "answer_id": 43766403, "question_id": 43766161, "link": "https://stackoverflow.com/questions/43766161/is-it-guaranteed-that-array-elements-in-c-will-be-stored-consecutively-with-no/43766403#43766403", "title": "Is it guaranteed that array elements in C will be stored consecutively, with no padding?", "body": "<p>Yes, it is guaranteed. <em>If</em> padding bytes are added, they are added <em>within</em> <code>struct some_type</code>, but not in between two array elements.</p>\n\n<p>E. g.:</p>\n\n<pre><code>struct S\n{\n    int n;\n    short s;\n\n// this is just for illustration WHERE byte padding (typically) would occur!!!\n#if BYTE_ALIGNMENT &gt;= 4\n    unsigned char : 0;\n    unsigned char : 0;\n#endif\n};\nstruct S s[2];\nsize_t d = (char*)(s + 1) - (char*)s;\n</code></pre>\n\n<p>With byte alignment adjusted to 4 or 8 (or even larger powers of 2), this struct will have size of 8 and d will be equally 8, with byte alignment set to 1 or 2, the struct will have size of 6 just as will be d...</p>\n\n<p>Note: This is not the only place where padding bytes can occur: If you switched members <code>n</code> and <code>s</code>, padding bytes would be needed in between <code>s</code> and <code>n</code> to get <code>n</code> correctly aligned. On the other hand, no padding bytes would be necessary after n any more as the structure size would assure correct alignment already.</p>\n\n<p>Referring to the standard: C11, 6.2.5.20:</p>\n\n<blockquote>\n  <p>An array type describes a <strong>contiguously allocated</strong> nonempty set of objects with a particular member object type, called the element type. 36) Array types are characterized by their element type and by the number of elements in the array. [...]</p>\n</blockquote>\n\n<p>(Highlighting by me!).</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1493965630, "last_edit_date": 1493965630, "creation_date": 1493964987, "answer_id": 43797780, "question_id": 43766161, "link": "https://stackoverflow.com/questions/43766161/is-it-guaranteed-that-array-elements-in-c-will-be-stored-consecutively-with-no/43797780#43797780", "title": "Is it guaranteed that array elements in C will be stored consecutively, with no padding?", "body": "<p>Data alignment is a complex matter, as illustrated by the following example (that you can even draw to make your own experiments):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nstruct A {  /* no padding */\n    char a[3];\n};\nstruct B {\n    int  a;\n    char b[3];\n    /* one byte of padding (in 32bit arch) added here */\n};\nstruct C {  /* no padding again */\n    char a[4];\n    char b[3];\n};\n\nstruct D {\n    char a[3];\n    /* one byte of padding to ensure alignment of next field */\n    int  b;\n    char c[3];\n    /* one byte of padding to ensure alignment of whole struct in arrays */\n}\n\n#define P(X) printf(\"sizeof struct %s == %ld\\n\", #X, sizeof (struct X))\nint main()\n{\n    P(A);\n    P(B);\n    P(C);\n    P(D);\n} /* main */\n</code></pre>\n\n<p>As you see, the required alignment (1 byte) of the <code>struct A</code> type is allowing to place it anywhere in memory and determines that no padding bytes are necessary to determine the <code>sizeof</code> value.</p>\n\n<p>In the second example, we introduced an <code>int</code> value, which forces the whole <code>struct</code> to be word aligned (so an int is accessible in a properly aligned memory address) so this time, the compiler has padded (at the end of the structure) for extra bytes, so any array type of the specified type gets correctly aligned, and its <code>int</code> field is accessed at a valid address.</p>\n\n<p>In the third example, I illustrate that the effect of the padding in the second example is due to the <code>int</code> field present in the struct, as the third example has a same size field, but this time a non requiring alignment field, so no padding has been inserted, as all the individual data types inside need alignment of 1.</p>\n\n<p>The output (on my system, a MAC OSX system) is:</p>\n\n<pre><code>sizeof struct A == 3\nsizeof struct B == 8\nsizeof struct C == 7\nsizeof struct D == 12\n</code></pre>\n"}], "owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 43766403, "answer_count": 2, "score": 3, "last_activity_date": 1494494484, "creation_date": 1493831269, "last_edit_date": 1493831836, "question_id": 43766161, "link": "https://stackoverflow.com/questions/43766161/is-it-guaranteed-that-array-elements-in-c-will-be-stored-consecutively-with-no", "title": "Is it guaranteed that array elements in C will be stored consecutively, with no padding?", "body": "<p>In other words: is it guaranteed that if I have an array allocated this way:</p>\n\n<pre><code>void *arr = calloc(nmemb, sizeof(some_type))\n</code></pre>\n\n<p>Then <code>elta</code>, <code>eltb</code>, <code>eltc</code> will all point to the same location in memory, which will be the second element of type <code>some_type</code> of this array?</p>\n\n<pre><code>some_type *elta = &amp;((some_type*)arr)[1];\nsome_type *eltb = ((some_type*)arr)+1;\nsome_type *eltc = (char*)arr+sizeof(some_type);\n</code></pre>\n\n<p>The reason I\u2019m asking this is because I\u2019m trying to do a \u201ccontainer\u201d in C, and if this doesn\u2019t hold then I\u2019m out of ideas how to return a pointer to any other element than the first one.</p>\n"}, {"tags": ["c", "debugging", "gdb", "disassembly"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "edited": false, "score": 0, "creation_date": 1493831459, "post_id": 43766128, "comment_id": 74573688, "body": "It seems you debug optimized C++ code."}, {"owner": {"reputation": 951, "user_id": 6339395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93045a766ed5527e61c165a271cb4622?s=128&d=identicon&r=PG&f=1", "display_name": "The Philomath", "link": "https://stackoverflow.com/users/6339395/the-philomath"}, "edited": false, "score": 0, "creation_date": 1493833852, "post_id": 43766128, "comment_id": 74575050, "body": "may be code is not compatible with the binary you are running. Old binary new code."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1493847332, "post_id": 43766128, "comment_id": 74582203, "body": "Is the assembly language function that the debugger stumbles into always __libc_start_main, or is it sometimes something else?"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1493848167, "post_id": 43766128, "comment_id": 74582553, "body": "Can you switch to the gdb interaction window in your IDE and see if either of the following two commands  print <code>on</code>? <code>show backtrace past-main</code> and <code>show backtrace past-entry</code> ."}, {"owner": {"reputation": 13, "user_id": 7958843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535fad4c4087d00254c9c07580aabe07?s=128&d=identicon&r=PG&f=1", "display_name": "blazej24", "link": "https://stackoverflow.com/users/7958843/blazej24"}, "edited": false, "score": 0, "creation_date": 1493907344, "post_id": 43766128, "comment_id": 74611165, "body": "@SergeiKurenkov : i&#39;m compiling only with -d flag, and neither -O2 nor -O3."}, {"owner": {"reputation": 13, "user_id": 7958843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535fad4c4087d00254c9c07580aabe07?s=128&d=identicon&r=PG&f=1", "display_name": "blazej24", "link": "https://stackoverflow.com/users/7958843/blazej24"}, "reply_to_user": {"reputation": 951, "user_id": 6339395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93045a766ed5527e61c165a271cb4622?s=128&d=identicon&r=PG&f=1", "display_name": "The Philomath", "link": "https://stackoverflow.com/users/6339395/the-philomath"}, "edited": false, "score": 0, "creation_date": 1493907417, "post_id": 43766128, "comment_id": 74611211, "body": "@ThePhilomath I&#39;m building the binary just before debugging - so it&#39;s compatible for sure."}, {"owner": {"reputation": 13, "user_id": 7958843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535fad4c4087d00254c9c07580aabe07?s=128&d=identicon&r=PG&f=1", "display_name": "blazej24", "link": "https://stackoverflow.com/users/7958843/blazej24"}, "reply_to_user": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1493907555, "post_id": 43766128, "comment_id": 74611321, "body": "@MarkPlotnick : it used to stumble into my own function too. I can&#39;t find a possibility to use gdb commands in NetBeans."}, {"owner": {"reputation": 13, "user_id": 7958843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535fad4c4087d00254c9c07580aabe07?s=128&d=identicon&r=PG&f=1", "display_name": "blazej24", "link": "https://stackoverflow.com/users/7958843/blazej24"}, "edited": false, "score": 0, "creation_date": 1493908084, "post_id": 43766128, "comment_id": 74611758, "body": "See my edit, because the problem suddenly almost dissappeared.."}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1493911355, "post_id": 43766128, "comment_id": 74614308, "body": "Now that I see the highlighted line in __libc_start_main, it looks like you&#39;re just stepping through your program after the point at which <code>main</code> has returned, So what that window shows is that the C startup code is about to call <code>exit</code> for you."}], "owner": {"reputation": 13, "user_id": 7958843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/535fad4c4087d00254c9c07580aabe07?s=128&d=identicon&r=PG&f=1", "display_name": "blazej24", "link": "https://stackoverflow.com/users/7958843/blazej24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 444, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493916252, "creation_date": 1493831169, "last_edit_date": 1493916252, "question_id": 43766128, "link": "https://stackoverflow.com/questions/43766128/every-ide-falls-into-disassembly-mode-during-debugging", "title": "Every IDE falls into disassembly mode during debugging", "body": "<p>I have installed Linux (Ubuntu 16.04) recently, then QtCreator. Every time when I try to debug my C program in it, it falls into disassembly mode, it means when I try to step into, or even step over, it opens a file \"Disassasembly(...)\" and navigates in this file. It happens not only for standard functions like malloc (which source code I don't have), but also for my own functions. I thought it's because of the IDE, and installed NetBeans - and I have exactly the same problem in it. </p>\n\n<p>Some example:</p>\n\n<p>[it is shown after stepping over my function, and this function is just the beginning of my program, but the program ends after this screen] - edit: sorry I had to remove this file, because I can post only 2 links..</p>\n\n<p>Another problem is when even for a short moment it navigates on my code (not on disassembly), it executes lines which contains documentation, and gets out to the body of another fuction, which isn't called by me at all(!) It looks like a mess...</p>\n\n<p>So, I think it might be some problem with GDB, but I have no idea how to solve it. Could you help me?</p>\n\n<p>GDB v. 7.11.1\ngcc v. 5.4.0\nNetBeans v. 8.2</p>\n\n<p>EDIT: It became really weird. Today, when I tried to debug it once again, without any changes in code nor settings, the debugger started to behave <em>almost</em> normally, it means, that it steps through my code correctly now. The only moment, when it falls into dissasembly mode, is the end of my program, when last instruction has executed and it should end. This screens should help:</p>\n\n<p><a href=\"https://i.stack.imgur.com/l5zw6.png\" rel=\"nofollow noreferrer\">(1)</a>\n<a href=\"https://i.stack.imgur.com/3Z2PZ.png\" rel=\"nofollow noreferrer\">(2)</a></p>\n\n<p>EDIT2: Ok, maybe it is quite normal now. But I still have no idea, what was wrong, and what solved the problem. I hope that it won't come back :) </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3940, "user_id": 2830116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SnjA4.jpg?s=128&g=1", "display_name": "Rohan Kumar", "link": "https://stackoverflow.com/users/2830116/rohan-kumar"}, "edited": false, "score": 1, "creation_date": 1493825604, "post_id": 43764335, "comment_id": 74570089, "body": "<code>scanf(&quot;%d&quot;, &amp;n)</code> . I wonder how can compiler ignore it."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493825900, "post_id": 43764335, "comment_id": 74570313, "body": "It&#39;s not the first time I see a question with <code>&amp;d</code> instead of <code>%d</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 3940, "user_id": 2830116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SnjA4.jpg?s=128&g=1", "display_name": "Rohan Kumar", "link": "https://stackoverflow.com/users/2830116/rohan-kumar"}, "edited": false, "score": 1, "creation_date": 1493825949, "post_id": 43764335, "comment_id": 74570347, "body": "@RohanKumar: <code>printf(He has to distribute %f kg cake to each of his %d friends&quot;, &amp;cake, &amp;m);</code> it doesn&#39;t even compile (missing quote at start)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1493826028, "post_id": 43764335, "comment_id": 74570390, "body": "Please indent your code."}, {"owner": {"reputation": 3940, "user_id": 2830116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SnjA4.jpg?s=128&g=1", "display_name": "Rohan Kumar", "link": "https://stackoverflow.com/users/2830116/rohan-kumar"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493826886, "post_id": 43764335, "comment_id": 74570977, "body": "@Jean-Fran&#231;oisFabre: Nice catch! The other printf/scanf problems can be caught  by compiling with <code>-Wall</code> flag in gcc."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493830480, "post_id": 43764335, "comment_id": 74573101, "body": "That <code>cake = m&#47;n;</code> is not going to give the expected result."}], "answers": [{"tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 4, "last_activity_date": 1493825500, "creation_date": 1493825500, "answer_id": 43764353, "question_id": 43764335, "link": "https://stackoverflow.com/questions/43764335/c-program-output-error/43764353#43764353", "title": "C program Output Error", "body": "<pre><code>scanf(\"&amp;d\", &amp;n);\n\nscanf(\"&amp;d\", &amp;m);\n</code></pre>\n\n<p>You need to change it to</p>\n\n<pre><code>scanf(\"%d\", &amp;n);\n\nscanf(\"%d\", &amp;m);\n</code></pre>\n\n<p>Additionally in printf function you should not pass address of variables</p>\n"}, {"tags": [], "owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "is_accepted": false, "score": 1, "last_activity_date": 1493825704, "creation_date": 1493825704, "answer_id": 43764439, "question_id": 43764335, "link": "https://stackoverflow.com/questions/43764335/c-program-output-error/43764439#43764439", "title": "C program Output Error", "body": "<p>There are several problems in your code. First your <code>scanf()</code> should be like this: </p>\n\n<pre><code>scanf(\"%d\", &amp;var);\n</code></pre>\n\n<p>Next off is in your <code>printf</code> statement. In the var section, you did <code>&amp;cake</code> and <code>&amp;m</code> which is wrong due to the fact you are gonna print the address of the variable. To fix that, remove the <code>&amp;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493832699, "post_id": 43764532, "comment_id": 74574376, "body": "Detail, with <code>scanf()</code>, <code>&quot;%d&quot;</code> does not a need matching <i>integer variable</i>, it needs a <i>pointer</i>, such as <code>&amp;n</code> which is an <code>int *</code>."}], "tags": [], "owner": {"reputation": 948, "user_id": 7306868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ikAld.png?s=128&g=1", "display_name": "GeekSambhu", "link": "https://stackoverflow.com/users/7306868/geeksambhu"}, "is_accepted": false, "score": 3, "last_activity_date": 1493825955, "creation_date": 1493825955, "answer_id": 43764532, "question_id": 43764335, "link": "https://stackoverflow.com/questions/43764335/c-program-output-error/43764532#43764532", "title": "C program Output Error", "body": "<p>The \"&amp;d\" holds the address of the particular variable. So, you need to change the \n    <code>scanf(\"&amp;d\",&amp;m)</code> to <code>scanf(\"%d\",&amp;m)</code> and <code>scanf(\"&amp;d\",&amp;n)</code> to <code>scanf(\"%d\",&amp;n)</code>. Here <code>%d</code> is the placeholder for integer variables.\nSimilarly, in the final print statement the ampersand <code>&amp;</code> prints the address not the value, so remove <code>&amp;</code> in final printf statement</p>\n"}], "owner": {"reputation": 1, "user_id": 7943804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5d1b8f2202fc4bf3ce68bf8fddbc3c?s=128&d=identicon&r=PG&f=1", "display_name": "user7943804", "link": "https://stackoverflow.com/users/7943804/user7943804"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1520344037, "creation_date": 1493825421, "last_edit_date": 1520344037, "question_id": 43764335, "link": "https://stackoverflow.com/questions/43764335/c-program-output-error", "title": "C program Output Error", "body": "<pre><code>#include&lt;stdio.h&gt;\n\nint main() {\n  int m,n;\n  float cake;\n\n  printf(\"Enter total kgs of cake:\");\n  scanf(\"&amp;d\", &amp;n);\n\n  printf(\"Enter the number of friends:\");\n  scanf(\"&amp;d\", &amp;m);\n\n  cake  = m/n;\n  printf(He has to distribute %f kg cake to each of his %d friends\", \n         &amp;cake, &amp;m);\n\n}\n</code></pre>\n\n<p>When I run this program in codeblocks, it asks me for only to enter total kgs of cake, when I enter it and click on enter, the program just prints everything else in the printf functions below instead of asking me to enter the number of friends.</p>\n"}, {"tags": ["c", "linux", "multidimensional-array", "shared-memory"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493824967, "post_id": 43764143, "comment_id": 74569629, "body": "You never initialized <code>buf1Ptr</code> before you assigned to <code>buf1Ptr[3]</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493825582, "post_id": 43764143, "comment_id": 74570080, "body": "There is no 2D array and no pointer to one (or a 1D array, which is the idenomatic way). <code>int *</code> is a pointer to <code>int</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7424011"}, "edited": false, "score": 0, "creation_date": 1493825789, "post_id": 43764334, "comment_id": 74570242, "body": "Can you explain it further, please? Why did you use int buf1Ptr[2]?"}, {"owner": {"reputation": 29, "user_id": 5499269, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203018946912927/picture?type=large", "display_name": "Bruno Vieira Costa", "link": "https://stackoverflow.com/users/5499269/bruno-vieira-costa"}, "edited": false, "score": 0, "creation_date": 1493829804, "post_id": 43764334, "comment_id": 74572694, "body": "It was an mistake, i wanted to use [4] I used buf1Ptr[4] because you wanted use the fourth position in memory. So it need to be an array with greater than or equal 4 positions"}], "tags": [], "owner": {"reputation": 29, "user_id": 5499269, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203018946912927/picture?type=large", "display_name": "Bruno Vieira Costa", "link": "https://stackoverflow.com/users/5499269/bruno-vieira-costa"}, "is_accepted": false, "score": -1, "last_activity_date": 1493829820, "last_edit_date": 1493829820, "creation_date": 1493825420, "answer_id": 43764334, "question_id": 43764143, "link": "https://stackoverflow.com/questions/43764143/creating-a-2d-array-in-the-shared-memory/43764334#43764334", "title": "Creating a 2D array in the shared memory", "body": "<p>you forgot allocate memory:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n\n\n\nkey_t key;\nint shmBuf1id;\nint *buf1Ptr;\n\nint main(int argc, char *argv[])\n{\n    createBuf1();\n\n}\n\ncreateBuf1()\n{\n  key = ftok(\".\",'b');\n  shmBuf1id = shmget(key,sizeof(int[9][9]),IPC_CREAT|0666);\n\n  if(shmBuf1id == -1 )\n  {\n    perror(\"shmget\");\n    exit(1);\n  }\n\n  else\n  {\n    printf(\"Creating new Sahred memory sement\\n\");\n    int buf1Ptr[4];\n    buf1Ptr[3] = shmat(shmBuf1id,0,0);\n    if(buf1Ptr == -1 )\n    {\n      perror(\"shmat\");\n      exit(1);\n    }\n\n\n  }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7424011"}, "edited": false, "score": 0, "creation_date": 1493862017, "post_id": 43772046, "comment_id": 74586181, "body": "Can you please tell me why did you use int (*buf1Ptr)[9] to initialize the 2d array? Shouldn&#39;t it be int (*buf1Ptr)[9][9] ? (Since it&#39;s 2d)"}, {"owner": {"reputation": 329, "user_id": 3106531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a4a089a86f815752131f0a469d37c5?s=128&d=identicon&r=PG&f=1", "display_name": "fernan", "link": "https://stackoverflow.com/users/3106531/fernan"}, "edited": false, "score": 0, "creation_date": 1493862957, "post_id": 43772046, "comment_id": 74586413, "body": "It allows you to use code like buf1Ptr[0][0] to access the cells instead of (*buf1Ptr)[0][0]. It works because an array and a pointer is more or less the same thing in C, so the pointer itself is the first dimension."}], "tags": [], "owner": {"reputation": 329, "user_id": 3106531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a4a089a86f815752131f0a469d37c5?s=128&d=identicon&r=PG&f=1", "display_name": "fernan", "link": "https://stackoverflow.com/users/3106531/fernan"}, "is_accepted": true, "score": 2, "last_activity_date": 1493858966, "last_edit_date": 1493858966, "creation_date": 1493858337, "answer_id": 43772046, "question_id": 43764143, "link": "https://stackoverflow.com/questions/43764143/creating-a-2d-array-in-the-shared-memory/43772046#43772046", "title": "Creating a 2D array in the shared memory", "body": "<p>First, <code>int *buf1Ptr</code> is a pointer to int. In your case you want a pointer to a 2-dimensional array of integers, so you should declare it as:</p>\n\n<pre><code>int (*buf1Ptr)[9];\n</code></pre>\n\n<p>Then you need to initialize the pointer itself:</p>\n\n<pre><code>buf1Ptr = shmat(shmBuf1id,0,0);\n</code></pre>\n\n<p>Now you can access your array through buf1Ptr (ie. <code>buf1Ptr[0][0] = 1</code>). Here's a complete working version of your program:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n\nkey_t key;\nint shmBuf1id;\nint (*buf1Ptr)[9];\n\nvoid\ncreateBuf1()\n{\n  key = ftok(\".\",'b');\n  shmBuf1id = shmget(key,sizeof(int[9][9]),IPC_CREAT|0666);\n\n  if(shmBuf1id == -1 )\n  {  \n    perror(\"shmget\");\n    exit(1);\n  }\n  else\n  {  \n    printf(\"Creating new Sahred memory sement\\n\");\n    buf1Ptr = shmat(shmBuf1id,0,0);\n    if(buf1Ptr == (void*) -1 )\n    {  \n      perror(\"shmat\");\n      exit(1);\n    }\n  }  \n}\n\nint\nmain(int argc, int *argv[])\n{\n    createBuf1();\n    return 0; \n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7424011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3356, "favorite_count": 0, "accepted_answer_id": 43772046, "answer_count": 2, "score": 0, "last_activity_date": 1493858966, "creation_date": 1493824883, "question_id": 43764143, "link": "https://stackoverflow.com/questions/43764143/creating-a-2d-array-in-the-shared-memory", "title": "Creating a 2D array in the shared memory", "body": "<p>I want to create a program to store data in a 2D array. This 2D array should be created in the shared memory.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n\n\n\nkey_t key;\nint shmBuf1id;\nint *buf1Ptr;\n\nmain(int argc, int *argv[])\n{\n    createBuf1();\n\n}\n\ncreateBuf1()\n{\n  key = ftok(\".\",'b');\n  shmBuf1id = shmget(key,sizeof(int[9][9]),IPC_CREAT|0666);\n\n  if(shmBuf1id == -1 )\n  {\n    perror(\"shmget\");\n    exit(1);\n  }\n\n  else\n  {\n    printf(\"Creating new Sahred memory sement\\n\");\n    buf1Ptr[3] = shmat(shmBuf1id,0,0);\n    if(buf1Ptr == -1 )\n    {\n      perror(\"shmat\");\n      exit(1);\n    }\n\n\n  }\n\n}\n</code></pre>\n\n<p>But when I run this program it gives a segmentation fault(Core dumped) error. Have I created the 2D array in the shared memory correctly?</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1493825138, "post_id": 43764141, "comment_id": 74569756, "body": "<a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">don&#39;t cast malloc</a>"}, {"owner": {"reputation": 1, "user_id": 7339453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e2277e47b5299aef9c92bc49ac55f9?s=128&d=identicon&r=PG&f=1", "display_name": "S w", "link": "https://stackoverflow.com/users/7339453/s-w"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493825354, "post_id": 43764141, "comment_id": 74569913, "body": "what do you mean? i don&#39;t understand"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493825493, "post_id": 43764141, "comment_id": 74570014, "body": "You should write <code>int **child_map = malloc(sizeof(int*) * 6);</code> without <code>(int **)</code> before <code>malloc</code>. Click on the link to learn why."}, {"owner": {"reputation": 1, "user_id": 7339453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e2277e47b5299aef9c92bc49ac55f9?s=128&d=identicon&r=PG&f=1", "display_name": "S w", "link": "https://stackoverflow.com/users/7339453/s-w"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493825598, "post_id": 43764141, "comment_id": 74570086, "body": "oh i checked it. i will trynit now."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493825630, "post_id": 43764141, "comment_id": 74570108, "body": "<code>int **</code> is no 2D array, nor can it point to one. If you need a 2D array, <b>use one</b>!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493826460, "post_id": 43764141, "comment_id": 74570706, "body": "&quot;Does not work&quot; is not a <b>specific</b> problem statement as required by site-rules. Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and all required information."}, {"owner": {"reputation": 1, "user_id": 7339453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e2277e47b5299aef9c92bc49ac55f9?s=128&d=identicon&r=PG&f=1", "display_name": "S w", "link": "https://stackoverflow.com/users/7339453/s-w"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493826873, "post_id": 43764141, "comment_id": 74570971, "body": "@Olaf i made it ! thanks !"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493828178, "post_id": 43764141, "comment_id": 74571803, "body": "And why don&#39;t you <code>malloc</code> a 2D array and just <code>memcpy</code> it? That`s just two function calls. Why simple if we can do it complicated? As a sidenote: don&#39;t use magic numbers! Pass teh lengths of each dimension as arguments or use constant-like macros."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1493825467, "post_id": 43764285, "comment_id": 74569997, "body": "This is surprisingly difficult to spot..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493825675, "post_id": 43764285, "comment_id": 74570146, "body": "OP wants a 2D array, so why not allocate and return one?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493825828, "post_id": 43764285, "comment_id": 74570273, "body": "@Olaf Dynamically allocating a 2D array is tricky. You can do it with <code>malloc(rows*cols*sizeof(int))</code>, but you can&#39;t access this with <code>array[i][j]</code>, you need to do the conversion from 2D to linear addressing yourself."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493826073, "post_id": 43764285, "comment_id": 74570415, "body": "@Barmar: Ehm, no! Use a pointer to a 1D VLA! <code>int (*int_alloc2D(size_t rows, size_t cols))[cols];</code>. Use normal index-operator. Note the index-operator anyway does not operate on arrays, but pointers <b>only</b>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1493826247, "post_id": 43764285, "comment_id": 74570549, "body": "If you have a better answer, post it."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493826392, "post_id": 43764285, "comment_id": 74570655, "body": "I wait until it is clear what OP actually wants/needs. The question is not clear if that is a debug request or a &quot;how to do&quot; question. For example: Since when has an array  scalar &quot;value&quot;?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1493825311, "creation_date": 1493825311, "answer_id": 43764285, "question_id": 43764141, "link": "https://stackoverflow.com/questions/43764141/c-in-function-malloc-two-dimensional-array-and-duplicatating-array-of-argumen/43764285#43764285", "title": "C : In function, malloc two dimensional array and duplicatating array of argument does not work", "body": "<p><code>child_map</code> is an array of pointers. The declaration <code>int map[][7]</code> is for a 2-dimensional array of <code>int</code>, not an array of pointers. You need to change <code>asd</code> to:</p>\n\n<pre><code>int **asd(int **map)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7339453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06e2277e47b5299aef9c92bc49ac55f9?s=128&d=identicon&r=PG&f=1", "display_name": "S w", "link": "https://stackoverflow.com/users/7339453/s-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "closed_date": 1493839355, "answer_count": 1, "score": -3, "last_activity_date": 1493825311, "creation_date": 1493824877, "question_id": 43764141, "link": "https://stackoverflow.com/questions/43764141/c-in-function-malloc-two-dimensional-array-and-duplicatating-array-of-argumen", "closed_reason": "Not suitable for this site", "title": "C : In function, malloc two dimensional array and duplicatating array of argument does not work", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint** asd(int map[][7]);\n\nint main(void)\n{\n    int **child_map = (int**)malloc(sizeof(int*) * 6);\n    int i, k;\n    for (i = 0; i &lt; 6; i++)\n        child_map[i] = (int*)malloc(sizeof(int) * 7);\n\n\n    for (i = 0; i &lt; 6; i++)\n    {\n        for (k = 0; k &lt; 7; k++)\n        {\n            child_map[i][k] = 10;\n        }\n    }\n\n    for (i = 0; i &lt; 6; i++)\n    {\n        for (k = 0; k &lt; 7; k++)\n        {\n            printf(\"%3d\", child_map[i][k]);\n        }\n        printf(\"\\n\");\n    }\n\n    int **map = NULL;\n    map = asd(child_map);\n\n    for (i = 0; i &lt; 6; i++)\n    {\n        for (k = 0; k &lt; 7; k++)\n        {\n            printf(\"%3d\", map[i][k]);\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n\nint** asd(int map[][7])\n{\n    int **a = (int**)malloc(sizeof(int*) * 6);\n    int i, k;\n    for (i = 0; i &lt; 6; i++)\n        a[i] = (int*)malloc(sizeof(int) * 7);\n\n\n    for (i = 0; i &lt; 6; i++)\n    {\n        for (k = 0; k &lt; 7; k++)\n        {\n            a[i][k] = map[i][k];\n        }\n    }\n    return a;\n}\n</code></pre>\n\n<p>In function, a[i][k] and map[i][k] are not mapped. Value of array a is very strange like 99882978. Why doesn't it work?<br>\nI have been made tree of game like go and each tree node has copy of parent's map. So i made function malloc two dimesional array , copies map of parent and return pointer of copy map. But it do not work... \nI'm very stuck here...</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1493823960, "post_id": 43763783, "comment_id": 74568809, "body": "See <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\"><code>while (!feof(file))</code> is always wrong</a>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1493824029, "post_id": 43763783, "comment_id": 74568864, "body": "<code>&quot;%s&quot;</code> skips all white space; you&#39;ll have to output white space when you want it to see it in the output.  You need to think about when you want blanks and when you want newlines."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493826078, "post_id": 43763783, "comment_id": 74570417, "body": "@JonathanLeffler - Is there a shorter version? (oo)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1493826213, "post_id": 43763783, "comment_id": 74570524, "body": "@Nguaial : Is there a shorter version of what?"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493826491, "post_id": 43763783, "comment_id": 74570729, "body": "@JonathanLeffler- The link you sent was a really a long read.  But thanks for the link.  All this time, I used while(!feof(file)){}, I didn&#39;t get any ill effects in my application. But I realize how important to know the difference."}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1493831343, "post_id": 43763783, "comment_id": 74573602, "body": "Should the second <code>if</code> clause be inside the first <code>if</code> clause? That is what the original indentation suggested (I have fixed the indentation according to how the compiler sees it). If that is the case, where was the else part intended to belong to?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 2, "creation_date": 1493836384, "post_id": 43763783, "comment_id": 74576555, "body": "@nguai: the shorter version of the link is the title \u2014 don&#39;t use <code>while (!feof(fp))</code>."}], "owner": {"user_type": "does_not_exist", "display_name": "user7639165"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493831191, "creation_date": 1493823891, "last_edit_date": 1493831191, "question_id": 43763783, "link": "https://stackoverflow.com/questions/43763783/how-to-replace-an-exact-word-in-a-text-file", "title": "How to replace an exact word in a text file", "body": "<p>When I open the temporary file I see that the word is replaced. The string in the main file is printed in the temporary file without any spaces.</p>\n\n<p>How can I fix this?</p>\n\n<pre><code>while (!feof(ptr2))\n{\n    strcpy(string, \"\\0\");\n    fscanf(ptr2, \"%s\", string);\n    if (!strcmp(string, word)) // If match found\n        num++;\n\n    if (strstr(string, word))\n    {\n        r2 = string;\n        while (r1 = strstr(r2, word))\n        {\n            while (r2 != r1)\n            {\n                fputc(*r2, temp);\n                r2++;\n            }\n            r1 = r1 + strlen(word);\n            fprintf(temp, \"%s\", word1);\n            r2 = r1;\n        }\n        while (*r2 != '\\0') {\n            fputc(*r2, temp);\n            r2++;\n        }\n    }\n    else {\n        fputs(string, temp);\n    }\n</code></pre>\n"}, {"tags": ["c", "mouseevent", "gtk3", "cairo"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1493825366, "post_id": 43763685, "comment_id": 74569919, "body": "With the first link you should be able to implement your steps 1 and 3. If that is not sufficient, please provide <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> that shows your problem."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1493825499, "post_id": 43763685, "comment_id": 74570021, "body": "For step 2 you need to save where you pressed the button and then handle <code>&quot;motion-notify-event&quot;</code> for any movement of the mouse."}], "answers": [{"tags": [], "owner": {"reputation": 4937, "user_id": 1545014, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/d3a08ae3ab7ee246d592730f0dd2c923?s=128&d=identicon&r=PG", "display_name": "jcoppens", "link": "https://stackoverflow.com/users/1545014/jcoppens"}, "is_accepted": true, "score": 2, "last_activity_date": 1493873138, "creation_date": 1493873138, "answer_id": 43774077, "question_id": 43763685, "link": "https://stackoverflow.com/questions/43763685/how-to-handle-mouse-motion-events-in-gtk3/43774077#43774077", "title": "How to handle mouse motion events in GTK3?", "body": "<p>Did you see <a href=\"https://developer.gnome.org/gtk-tutorial/stable/x2470.html\" rel=\"nofollow noreferrer\">this GtkDrawingArea demo</a> from the Gtk people? This one is written in C, but <a href=\"http://pygtk.org/pygtk2tutorial/examples/drawingarea.py\" rel=\"nofollow noreferrer\">there is a Python version</a> of the same program. A pity it's not very nicely formatted though.</p>\n\n<p>Anyway, in the constructor (<code>__init__</code>), calls are connected to the <code>motion_notify_event</code>.</p>\n\n<p>You also need to connect to the <code>button_press_event</code> and the <code>button_release_event</code>.</p>\n\n<p>Then, on button press, you save the coordinates of the start point. (and save it to the end point too, which are the same for now).</p>\n\n<p>On each motion_notify_event, you delete the previous line (by overwriting), and redraw it to the new end point.</p>\n\n<p>Finally, when the button is released, the line is final.</p>\n\n<p>It's <em>much</em> easier if you use a canvas widget, for example <a href=\"https://wiki.gnome.org/action/show/Projects/GooCanvas?action=show&amp;redirect=GooCanvas\" rel=\"nofollow noreferrer\">GooCanvas,</a> which takes care of most of the updating. You can just update the coordinates of the line object, and it will move itself. Also you can easily remove lines. The 'algorithm' is similar as above:</p>\n\n<ul>\n<li>Connect <code>button_press_event</code>, <code>button_release_event</code>, and <code>motion_notifyevent</code> to the canvas,</li>\n<li>When a button press occurs, create a <code>GooCanvas.polyline</code> object, and set begin and endpoint,</li>\n<li>Update the endpoint on each <code>motion_notify_event</code></li>\n<li>Finalize with a <code>button_release_event</code>.</li>\n</ul>\n"}], "owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2093, "favorite_count": 0, "accepted_answer_id": 43774077, "answer_count": 1, "score": 1, "last_activity_date": 1493944309, "creation_date": 1493823663, "last_edit_date": 1495542871, "question_id": 43763685, "link": "https://stackoverflow.com/questions/43763685/how-to-handle-mouse-motion-events-in-gtk3", "title": "How to handle mouse motion events in GTK3?", "body": "<p>I am trying to implement the following feature using C/GTK3/Cairo:</p>\n\n<p>-Left click on an <strong>GtkDrawingArea</strong> Widget and printf the coordinates Xo and Yo.</p>\n\n<p>-While keeping the left button down, move the mouse and draw a line conecting (Xo,Yo) to the current mouse position. </p>\n\n<p>-Release the left mouse button and printf(\"something\")</p>\n\n<p>How do I do this? Anyone knows of a good tutorial showing how to handle mouse clicl-move events? </p>\n\n<p>So far, the best I found was this zetcode <a href=\"http://zetcode.com/gfx/cairo/basicdrawing/\" rel=\"nofollow noreferrer\">lines</a> (which shows how to handle mouse click events but not button-down/move/button-up and <a href=\"https://stackoverflow.com/questions/43712704/how-do-i-set-the-mouse-cursor-to-cross-hair-over-a-gtkdrawingarea\">this</a> , which explains how to change the mouse cursor when hovering over a Widget.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "input", "scanf"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 1, "creation_date": 1493822656, "post_id": 43763280, "comment_id": 74567818, "body": "Read the whole line as a string, and parse the string,"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1493822680, "post_id": 43763280, "comment_id": 74567835, "body": "Read one value at a time in a loop until input is exhausted."}, {"owner": {"reputation": 2676, "user_id": 4187541, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bef02774dcdbacad792e3b7850710bcc?s=128&d=identicon&r=PG", "display_name": "peterchaula", "link": "https://stackoverflow.com/users/4187541/peterchaula"}, "edited": false, "score": 1, "creation_date": 1493822830, "post_id": 43763280, "comment_id": 74567960, "body": "<a href=\"http://stackoverflow.com/questions/15291523/accepting-any-number-of-inputs-from-scanf-function\" title=\"accepting any number of inputs from scanf function\">stackoverflow.com/questions/15291523/&hellip;</a>"}, {"owner": {"reputation": 417, "user_id": 7159879, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a2c00a33a360b1adf5d7b87e2df3759f?s=128&d=identicon&r=PG&f=1", "display_name": "user7159879", "link": "https://stackoverflow.com/users/7159879/user7159879"}, "edited": false, "score": 0, "creation_date": 1493822850, "post_id": 43763280, "comment_id": 74567978, "body": "{%d} is possible to read as a string, the variable arguments are not string"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1493823140, "post_id": 43763280, "comment_id": 74568216, "body": "Note that <code>scanf()</code> won&#39;t care if the three values are all on one line or on three separate lines, or if there&#39;s a thousand blank lines between each number.  If you want line-based input, don&#39;t use <code>scanf()</code>; it doesn&#39;t care about lines."}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 7159879, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a2c00a33a360b1adf5d7b87e2df3759f?s=128&d=identicon&r=PG&f=1", "display_name": "user7159879", "link": "https://stackoverflow.com/users/7159879/user7159879"}, "edited": false, "score": 0, "creation_date": 1493825877, "post_id": 43763442, "comment_id": 74570298, "body": "If I enter 1 2 3 4 5, these numbers are in standard input buffer. so, does scanf read input from this buffer although I just enter one line?? That&#39;s why these instructions works??"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 5, "last_activity_date": 1493823066, "creation_date": 1493823066, "answer_id": 43763442, "question_id": 43763280, "link": "https://stackoverflow.com/questions/43763280/how-to-get-multiple-number-from-one-line-in-c/43763442#43763442", "title": "how to get multiple number from one line in C?", "body": "<p>Since <code>scanf</code> returns the amount of variables filled you can loop until <code>scanf</code> has no more value to read or the count is matched:</p>\n\n<pre><code>int count = 0;\nprintf(\"how many do you want to enter: \");\nscanf(\"%d\", &amp;count);\nint val = 0;\nint sum = 0;\nint i = 0;\nwhile(scanf(\"%d \", &amp;val) == 1 &amp;&amp; i++ &lt; count)\n  sum += val;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1493824421, "last_edit_date": 1493824421, "creation_date": 1493823629, "answer_id": 43763666, "question_id": 43763280, "link": "https://stackoverflow.com/questions/43763280/how-to-get-multiple-number-from-one-line-in-c/43763666#43763666", "title": "how to get multiple number from one line in C?", "body": "<p>As you don't know the size of inputs previously it's better to create a dynamic array based on the input size provided by the user. Input the size of the array and create an array of that size. Then you can easily loop through the array and do whatever you want with it.</p>\n\n<pre><code>int count = 0, sum = 0;\nprintf(\"how many do you want to enter: \");\nscanf(\"%d\", &amp;count);\n\nint *num = malloc(sizeof(int)*count);\n\nfor(int i = 0; i &lt; count; i++) {\n    scanf(\"%d \", &amp;num[i]);\n    //sum += num[i];\n}\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 7159879, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a2c00a33a360b1adf5d7b87e2df3759f?s=128&d=identicon&r=PG&f=1", "display_name": "user7159879", "link": "https://stackoverflow.com/users/7159879/user7159879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5694, "favorite_count": 1, "closed_date": 1493824096, "accepted_answer_id": 43763442, "answer_count": 2, "score": 3, "last_activity_date": 1493824421, "creation_date": 1493822609, "last_edit_date": 1493822775, "question_id": 43763280, "link": "https://stackoverflow.com/questions/43763280/how-to-get-multiple-number-from-one-line-in-c", "closed_reason": "Duplicate", "title": "how to get multiple number from one line in C?", "body": "<p>If I want to get input 3 numbers, I can write code like this:</p>\n\n<pre><code>scanf(\"%d %d %d\", &amp;a, &amp;b, &amp;c);\n</code></pre>\n\n<p>but <strong>how can I dynamically get the number of inputs from one line?</strong></p>\n\n<p>For example, if user enters <em>N</em>(number), then I have to get <em>N</em> integer number inputs from one line like above.</p>\n\n<p>The input and output should be :</p>\n\n<pre><code>how many do you want to enter: 5\n1 2 3 4 5\nsum: 15\n</code></pre>\n"}, {"tags": ["java", "c", "performance", "java-native-interface", "time-complexity"], "comments": [{"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 2, "creation_date": 1493822918, "post_id": 43763129, "comment_id": 74568034, "body": "You could pass a direct bytebuffer, which acts more or less like a pointer. But I doubt you&#39;d gain much from using JNI. Oracle&#39;s JVM has a JIT, which emits highly optimized native code. And if there were any performance benefit, it would probably not amortize the cost of interop. JNI is mostly useful for when you have something that you can do in C, but can&#39;t do in Java, for instance OpenGL."}, {"owner": {"reputation": 3257, "user_id": 2572994, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kT0R5.jpg?s=128&g=1", "display_name": "Ivaylo Toskov", "link": "https://stackoverflow.com/users/2572994/ivaylo-toskov"}, "reply_to_user": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "edited": false, "score": 0, "creation_date": 1493823383, "post_id": 43763129, "comment_id": 74568387, "body": "Thanks for your comment!  Would you mind sharing more about bytebuffers? (a link would suffice)  Moreover, does your comment imply that <code>GetIntArrayElements</code> is always linear?"}], "answers": [{"comments": [{"owner": {"reputation": 3257, "user_id": 2572994, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kT0R5.jpg?s=128&g=1", "display_name": "Ivaylo Toskov", "link": "https://stackoverflow.com/users/2572994/ivaylo-toskov"}, "edited": false, "score": 0, "creation_date": 1493826150, "post_id": 43763874, "comment_id": 74570477, "body": "Thanks a lot for your answer. The <code>isCopy</code> part alone answers my original question.  New question out of curiosity: Can you modify stuff in the native <code>C</code> implementation that will be visible in <code>Java</code> using the <code>ByteBuffer</code> approach?"}, {"owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "reply_to_user": {"reputation": 3257, "user_id": 2572994, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kT0R5.jpg?s=128&g=1", "display_name": "Ivaylo Toskov", "link": "https://stackoverflow.com/users/2572994/ivaylo-toskov"}, "edited": false, "score": 1, "creation_date": 1493826444, "post_id": 43763874, "comment_id": 74570694, "body": "@IvayloToskov It should work (that&#39;s the whole idea), and I just tried it, and yes!. :)"}], "tags": [], "owner": {"reputation": 26542, "user_id": 3699139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pYdt3.jpg?s=128&g=1", "display_name": "Jorn Vernee", "link": "https://stackoverflow.com/users/3699139/jorn-vernee"}, "is_accepted": true, "score": 1, "last_activity_date": 1493824162, "creation_date": 1493824162, "answer_id": 43763874, "question_id": 43763129, "link": "https://stackoverflow.com/questions/43763129/jni-is-getintarrayelements-always-linear-in-time/43763874#43763874", "title": "JNI: Is GetIntArrayElements always linear in time?", "body": "<p><a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#Get_PrimitiveType_ArrayElements_routines\" rel=\"nofollow noreferrer\"><code>GetIntArrayElements</code></a> has an optional by-reference parameter called <code>isCopy</code>. When the VM makes a copy of the data for you to use, this parameter will be set to <code>JNI_TRUE</code>. The idea is that different VM implementations might have different memory representations of an array, also one that is not compatible with the memory layout that C expects.</p>\n\n<p>Usually the fastest way of sharing memory between Java and native code is by using direct <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/ByteBuffer.html\" rel=\"nofollow noreferrer\"><code>ByteBuffer</code></a>s (ones that are created with <code>allocateDirect</code>). These buffers use an underlying block of memory that is directly usable from C/C++.</p>\n\n<p>In Java you create a buffer and fill it with some data:</p>\n\n<pre><code>public static void main(String[] args) {\n    byte[] ba = \"Hello Wolrd!\".getBytes(StandardCharsets.US_ASCII);\n    ByteBuffer bb = ByteBuffer.allocateDirect(ba.length + 1); // for terminator\n    bb.put(ba);\n    callCPP(bb);\n}\n\nprivate static native void callCPP(ByteBuffer bytes);\n</code></pre>\n\n<p>And then from C/C++ you can get the address of the underlying block of bytes with <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#GetDirectBufferAddress\" rel=\"nofollow noreferrer\"><code>GetDirectBufferAddress</code></a> (this is in C++):</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_Main_callCPP(JNIEnv *env, jclass, jobject buff) {\n    const char* str = (char*) env-&gt;GetDirectBufferAddress(buff);\n    printf(str); // Hello World!\n}\n</code></pre>\n\n<p>The downside of using a <code>ByteBuffer</code> is that there is no data abstraction, like a class' field has a specific type, a position in the byte buffer does not.</p>\n"}], "owner": {"reputation": 3257, "user_id": 2572994, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kT0R5.jpg?s=128&g=1", "display_name": "Ivaylo Toskov", "link": "https://stackoverflow.com/users/2572994/ivaylo-toskov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 43763874, "answer_count": 1, "score": 1, "last_activity_date": 1493824162, "creation_date": 1493822238, "question_id": 43763129, "link": "https://stackoverflow.com/questions/43763129/jni-is-getintarrayelements-always-linear-in-time", "title": "JNI: Is GetIntArrayElements always linear in time?", "body": "<p>Since I want to know whether it is worth it to use <code>JNI</code> to improve the performance of my application, I wanted to know what the complexity of <code>GetIntArrayElements</code> is. Does it always allocate a new primitive array in <code>C</code> and copy all the elements from the original <code>Java</code> array, or it somehow manages to pass a pointer?</p>\n\n<p>I want to find out if it's worth it to use <code>JNI</code> for algorithms that are linear, e.g. pointwise multiplication of two vectors. In case <code>GetIntArrayElements</code> is linear, I guess the potential performance boost from using <code>C/C++</code> would be lost if we need to copy the vectors first.</p>\n"}, {"tags": ["c", "struct", "initialization", "compound-literals"], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493823954, "post_id": 43763058, "comment_id": 74568804, "body": "Qualify the &quot;initialiser&quot; <code>struct</code> <code>const</code>, otherwise you might end up with two copies, depending on how good the compiler optimises. Despite it&#39;s name, a <i>compound literal</i> is not a constant."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493836564, "post_id": 43763058, "comment_id": 74576671, "body": "Just adding that this is still not an initialization but an assignment."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493841193, "post_id": 43763058, "comment_id": 74579109, "body": "@AjayBrahmakshatriya right, we&#39;re trying to make the assignment work there. :)"}, {"owner": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "edited": false, "score": 0, "creation_date": 1589294943, "post_id": 43763058, "comment_id": 109232807, "body": "I&#39;m a little confused (partially by the comments). Assume I do this in a function, then return <code>s</code> from the function. Will I run into a segfault, because the assigned struct will be destroyed at the end of the function?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "edited": false, "score": 0, "creation_date": 1589365628, "post_id": 43763058, "comment_id": 109262534, "body": "@domsson not really, as long as the allocated memory for <code>s</code> remains valid, the values of the members of <code>s</code> will also be valid. The values of the compound literal is stored into the members of <code>s</code>."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 6, "last_activity_date": 1493822055, "creation_date": 1493822055, "answer_id": 43763058, "question_id": 43763007, "link": "https://stackoverflow.com/questions/43763007/any-way-to-initialize-a-dynamically-allocated-structure/43763058#43763058", "title": "Any way to initialize a dynamically allocated structure?", "body": "<p>In your code</p>\n\n<pre><code> *s = {.some = 5, .value = 'a'};\n</code></pre>\n\n<p>is <strong>not</strong> an <a href=\"https://en.wikipedia.org/wiki/Initialization\" rel=\"noreferrer\">initialization</a>, it's an <a href=\"https://en.wikipedia.org/wiki/Assignment_(computer_science)\" rel=\"noreferrer\">assignment</a>.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/C_syntax#Initialization\" rel=\"noreferrer\">Brace enclosed initializer</a> can only be used during initialization. </p>\n\n<p>You can use a <strong><em><a href=\"https://en.wikipedia.org/wiki/C_syntax#Compound_literals\" rel=\"noreferrer\">compound literal</a></em></strong>, though. Something like</p>\n\n<pre><code>*s = (struct some_struct){.some = 5, .value = 'a'};\n</code></pre>\n\n<p>will do the job.</p>\n"}], "owner": {"reputation": 6365, "user_id": 4385532, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0573709d0b88e4b50af0e28c3e96873b?s=128&d=identicon&r=PG&f=1", "display_name": "gaazkam", "link": "https://stackoverflow.com/users/4385532/gaazkam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2174, "favorite_count": 0, "closed_date": 1493822114, "accepted_answer_id": 43763058, "answer_count": 1, "score": 0, "last_activity_date": 1493822486, "creation_date": 1493821912, "last_edit_date": 1493822486, "question_id": 43763007, "link": "https://stackoverflow.com/questions/43763007/any-way-to-initialize-a-dynamically-allocated-structure", "closed_reason": "Duplicate", "title": "Any way to initialize a dynamically allocated structure?", "body": "<p>C11 gives us a neat struct initialization syntax:</p>\n\n<pre><code>struct some_struct {int some; char value;};\nstruct some_struct s = {.some = 5, .value = 'a'};\nprintf(\"some = %d, value = %c\\n\", s.some, s.value);\n</code></pre>\n\n<p><a href=\"http://ideone.com/zZxTc4\" rel=\"nofollow noreferrer\">http://ideone.com/zZxTc4</a></p>\n\n<p>However, it doesn\u2019t seem to work when the struct has to be dynamically allocated:</p>\n\n<pre><code>struct some_struct {int some; char value;};\nstruct some_struct *s = malloc(sizeof(struct some_struct));\n*s = {.some = 5, .value = 'a'};\nprintf(\"some = %d, value = %c\\n\", s-&gt;some, s-&gt;value);\n</code></pre>\n\n<p>This code yields:</p>\n\n<pre><code>error: expected expression before \u2018{\u2019 token\n  *s = {.some = 5, .value = 'a'};\n       ^\n</code></pre>\n\n<p><a href=\"http://ideone.com/nBiorw\" rel=\"nofollow noreferrer\">http://ideone.com/nBiorw</a></p>\n\n<pre><code>struct some_struct {int some; char value;};\nstruct some_struct *s = malloc(sizeof(struct some_struct));\n*s = struct some_struct {.some = 5, .value = 'a'};\nprintf(\"some = %d, value = %c\\n\", s-&gt;some, s-&gt;value);\n</code></pre>\n\n<p>And this code yields:</p>\n\n<pre><code>error: expected expression before \u2018struct\u2019\n  *s = struct some_struct {.some = 5, .value = 'a'};\n       ^~~~~~\n</code></pre>\n\n<p><a href=\"http://ideone.com/SpBX1E\" rel=\"nofollow noreferrer\">http://ideone.com/SpBX1E</a></p>\n\n<p>Is there any way in C to initialize a dynamically allocated struct that nicely or do I rather have to write something like that:</p>\n\n<pre><code>struct some_struct {int some; char value;};\nstruct some_struct *s = malloc(sizeof(struct some_struct));\ns-&gt;some = 5;\ns-&gt;value = 'a';\nprintf(\"some = %d, value = %c\\n\", s-&gt;some, s-&gt;value);\n</code></pre>\n\n<p><a href=\"http://ideone.com/1XAiQS\" rel=\"nofollow noreferrer\">http://ideone.com/1XAiQS</a></p>\n\n<p>Which is slightly more inconvenient because (a) it means each member of the struct has to occupy its own line since people tend to frown when they see a <code>;</code> sign not being the last sign of its line in a source code, and (b) I\u2019m not able to rely on unspecified values being initialized to <code>0</code> as happens in normal struct initialization.</p>\n"}, {"tags": ["java", "c", "bit-manipulation", "bit-shift"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 4, "creation_date": 1493822174, "post_id": 43762977, "comment_id": 74567422, "body": "The time complexity depends on the capabilities of the underlying hardware. If the alu implements barrel shifters, the operation is performed in a single cycle. Otherwise, n cycles can be necessary for n bits shifted."}, {"owner": {"reputation": 177, "user_id": 6273378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03c3fe3c859fecc5c954e5ba6efa3b?s=128&d=identicon&r=PG&f=1", "display_name": "ytoamn", "link": "https://stackoverflow.com/users/6273378/ytoamn"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1493822250, "post_id": 43762977, "comment_id": 74567487, "body": "@Ctx nice, thats enlightening"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 6273378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03c3fe3c859fecc5c954e5ba6efa3b?s=128&d=identicon&r=PG&f=1", "display_name": "ytoamn", "link": "https://stackoverflow.com/users/6273378/ytoamn"}, "edited": false, "score": 0, "creation_date": 1493912429, "post_id": 43764571, "comment_id": 74615087, "body": "Thanks a lot, it would be nice if you could enlighten me about C as well, if possible"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 177, "user_id": 6273378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03c3fe3c859fecc5c954e5ba6efa3b?s=128&d=identicon&r=PG&f=1", "display_name": "ytoamn", "link": "https://stackoverflow.com/users/6273378/ytoamn"}, "edited": false, "score": 0, "creation_date": 1493912763, "post_id": 43764571, "comment_id": 74615350, "body": "@ytoamn C is pretty much the same as Java except for the lack of a standard arbitrary sized integer and some C compilers support built in integer types up to 128 bits.."}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": true, "score": 2, "last_activity_date": 1493827547, "last_edit_date": 1493827547, "creation_date": 1493826107, "answer_id": 43764571, "question_id": 43762977, "link": "https://stackoverflow.com/questions/43762977/bitshift-time-complexity/43764571#43764571", "title": "Bitshift time complexity", "body": "<p>In Java the primitive integer types are of fixed width i.e. 64, 32,  16 bits. Shifts over the number of bits are modulo the number of bits. Therefore, for practical purposes, you can assume a bit shift is constant time, even if for <code>1L &lt;&lt; 63</code> you have to do 63 separate shifts.</p>\n\n<p>The same will apply to any language/CPU combination where the language types are mappable to machine types.</p>\n\n<p>Java also has a BigInteger type and other languages also have arbitrarily sized integer types where the number can have a practically arbitrary number of bits. My guess is that a shift in such a case is O(n) where n is the number of bits in the BigInteger. </p>\n"}], "owner": {"reputation": 177, "user_id": 6273378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc03c3fe3c859fecc5c954e5ba6efa3b?s=128&d=identicon&r=PG&f=1", "display_name": "ytoamn", "link": "https://stackoverflow.com/users/6273378/ytoamn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 992, "favorite_count": 0, "accepted_answer_id": 43764571, "answer_count": 1, "score": 1, "last_activity_date": 1493912612, "creation_date": 1493821834, "last_edit_date": 1493912612, "question_id": 43762977, "link": "https://stackoverflow.com/questions/43762977/bitshift-time-complexity", "title": "Bitshift time complexity", "body": "<p>I want to know what is the time-complexity of right bitshift operator >>, preferably in java and if possible other languages like C, Python ... etc too.  Is it O(n) or O(1), where 'n' is the number of bits shifted. I am not looking for a general answer as I know implementation details will differ from each. I want to know which are constant take time O(1), and which take O(n) time.</p>\n"}, {"tags": ["c", "linux-kernel", "embedded-linux", "kernel-module", "beagleboneblack"], "comments": [{"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 1, "creation_date": 1493821689, "post_id": 43762871, "comment_id": 74567005, "body": "You ask for help, yet you don&#39;t give the Makefile itself (assumption about it being correct is <i>probably</i> wrong) and there&#39;s also no code (which probably isn&#39;t too bad, as the fault lies in the Makefile)."}, {"owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1493822092, "post_id": 43762871, "comment_id": 74567344, "body": "@tambre I have cross checked my makefile many times. I am sure there is no fault in it. For your convenience, I have attached code. Go through it."}, {"owner": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 3, "creation_date": 1493822226, "post_id": 43762871, "comment_id": 74567467, "body": "Better. Always a good idea to attach it even if you think no fault is in it -  it could be useful for understanding what&#39;s going on. Now, does the <code>&#47;lib&#47;modules&#47;3.8.13-bone70&#47;build</code> directory exist?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1493825029, "post_id": 43762871, "comment_id": 74569662, "body": "&quot;Modification time in the future&quot; messages from Make are usually caused by storing files on a network filesystem that&#39;s not properly time-synchronized with your build machine.  Ask the administrators of both machines to make sure that their NTP clients are working correctly."}, {"owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "reply_to_user": {"reputation": 3577, "user_id": 2176813, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Nv7lK.jpg?s=128&g=1", "display_name": "tambre", "link": "https://stackoverflow.com/users/2176813/tambre"}, "edited": false, "score": 0, "creation_date": 1493825185, "post_id": 43762871, "comment_id": 74569792, "body": "@tambre No it doesn&#39;t exist. I tried finding solutions from other sources. All they are saying is to install package. But, to install that package all I need is internet connection. So as far as now is concern, I don&#39;t know how to configure internet on beaglebone using ethernet i.e, how and which changes to make. Apart from that, I am using &#39;PuTTy&#39; to access beaglebone."}, {"owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1493825288, "post_id": 43762871, "comment_id": 74569863, "body": "@Toby Can you please elaborate? What is NTP client?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1493825395, "post_id": 43762871, "comment_id": 74569941, "body": "That&#39;s the Network Time Protocol, that both machines need to be using, if you want them to share a consistent idea of file timestamps.  As I say, ask your system administrator(s), who will know immediately what to look at."}, {"owner": {"reputation": 5177, "user_id": 95674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e606b10c31dd8d9eecd1034789653e44?s=128&d=identicon&r=PG", "display_name": "Barett", "link": "https://stackoverflow.com/users/95674/barett"}, "edited": false, "score": 0, "creation_date": 1493833932, "post_id": 43762871, "comment_id": 74575090, "body": "Since the mod time is only 220 seconds in the future, if the admins are not able to fix the system times, you could also wait 4 minutes and try again."}, {"owner": {"reputation": 2744, "user_id": 2610019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5koUj.png?s=128&g=1", "display_name": "Mali", "link": "https://stackoverflow.com/users/2610019/mali"}, "edited": false, "score": 1, "creation_date": 1493883348, "post_id": 43762871, "comment_id": 74594072, "body": "you say &#39;Though I referred some websites. But, all they are asking me to install packages. As I am a newbie. I don&#39;t even know how to configure and start internet connection on Beaglebone using ethernet.&#39; Please start by the beginning and learn how to before trying kernel hacking .."}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "edited": false, "score": 0, "creation_date": 1493826079, "post_id": 43764443, "comment_id": 74570418, "body": "Unfortunately I can&#39;t see &#39;linux-headers-xxx&#39; folder inside /usr/src. Now to resolve this all I need is to install &#39;linux headers&#39;. But I can&#39;t do it without internet connection. Is there any workaround ?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "edited": false, "score": 0, "creation_date": 1493826997, "post_id": 43764443, "comment_id": 74571040, "body": "You&#39;ll need to know where the headers are located, for the version you want to build against.  There&#39;s not much we can do to find them for you now."}, {"owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "edited": false, "score": 0, "creation_date": 1493827493, "post_id": 43764443, "comment_id": 74571365, "body": "Any command to find headers? I am stuck. I can&#39;t go on further."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 3, "last_activity_date": 1493826929, "last_edit_date": 1493826929, "creation_date": 1493825716, "answer_id": 43764443, "question_id": 43762871, "link": "https://stackoverflow.com/questions/43762871/compilation-error-for-linux-kernel-module-programming/43764443#43764443", "title": "Compilation error for Linux kernel module programming", "body": "<p>It appears that you're trying to build your module for a kernel version that you haven't installed the headers for.</p>\n\n<p>Instead of calling <code>uname</code> directly in your rules, it's helpful to put that into a variable you can override:</p>\n\n<pre><code>obj-m+=Hello.o\n\nKSRC := /lib/modules/$(shell uname -r)/build\n\nall:\n        make -C $(KSRC) M=$(PWD) modules\n        $(CC) Hello.c -o test\nclean:\n        make -C $(KSRC) M=$(PWD) clean\n        rm test\n</code></pre>\n\n<p>Now, you can override with the actual location of your kernel headers:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>make KSRC=/usr/src/linux-headers-4.9.2 all\n</code></pre>\n\n<p>You can simplify the Makefile further with a catch-all rule:</p>\n\n<pre><code>obj-m+=Hello.o\n\nKSRC := /lib/modules/$(shell uname -r)/build\n\nall: modules\n        $(CC) Hello.c -o test\n\n%:\n        make -C $(KSRC) M=$(PWD) $@\n\nclean::\n        make -C $(KSRC) M=$(PWD) clean\n        $(RM) test\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493826929, "creation_date": 1493821586, "last_edit_date": 1493822032, "question_id": 43762871, "link": "https://stackoverflow.com/questions/43762871/compilation-error-for-linux-kernel-module-programming", "title": "Compilation error for Linux kernel module programming", "body": "<p>I am learning Linux kernel module programming. I am using Beaglebone black for that. I have made simple 'Hello World' application and makefile. I have checked my makefile it's proper. But when I command 'make', it gives me following error:</p>\n\n<pre><code>root@beaglebone:/home/sonu# make\nmake: Warning: File `Makefile' has modification time 2.2e+02 s in the future\nmake -C /lib/modules/3.8.13-bone70/build M=/home/sonu modules\nmake: *** /lib/modules/3.8.13-bone70/build: No such file or directory.  Stop.\nmake: *** [all] Error 2\n</code></pre>\n\n<p>Though I referred some websites. But, all they are asking me to install packages. As I am a newbie. I don't even know how to configure and start internet connection on Beaglebone using ethernet. Please help me I am stuck. Thanks in advance.</p>\n\n<p><strong>Code is:</strong></p>\n\n<pre><code>#include&lt;linux/module.h&gt;\n#include&lt;linux/kernel.h&gt;\n#include&lt;linux/init.h&gt;\n\nstatic int __init hello(void)\n{\n   printk(KERN_INFO \"Hello World!\");\n   return 0;\n}\n\nstatic void __exit hello_cleanup(void)\n{\n   printk(KERN_INFO \"Bye\");\n}\n\nmodule_init(hello);\nmodule_exit(hello_cleanup);\n</code></pre>\n\n<p><strong>Makefile is:</strong></p>\n\n<pre><code>obj-m+=Hello.o\n\nall:\n        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules\n        $(CC) Hello.c -o test\nclean:\n        make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean\n        rm test\n</code></pre>\n"}, {"tags": ["c", "pointers", "free"], "comments": [{"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1493821495, "post_id": 43762789, "comment_id": 74566864, "body": "Please do not tag <code>C++</code> if you aren&#39;t explicitly writing C++ code, this code is purely C."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1493821570, "post_id": 43762789, "comment_id": 74566923, "body": "@CoryKramer: If it&#39;s being passed through a C++ compiler, it&#39;s C++. Only the OP can tell us which is right."}, {"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1493821571, "post_id": 43762789, "comment_id": 74566924, "body": "use <code>strcpy()</code>  ."}, {"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1493821590, "post_id": 43762789, "comment_id": 74566940, "body": "If you wanted to copy that string literal to your newly allocated memory you can use <a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strcpy.htm\" rel=\"nofollow noreferrer\"><code>strcpy</code></a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1493821660, "post_id": 43762789, "comment_id": 74566987, "body": "@CoryKramer: Ew! No! <code>strncpy</code>, please..."}, {"owner": {"reputation": 96886, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493821840, "post_id": 43762789, "comment_id": 74567116, "body": "@BoundaryImposition Well I&#39;d say forget both and use <code>std::string</code> assignment, but C.... :)"}, {"owner": {"reputation": 724, "user_id": 7438356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a3b94d667c9db8baa2b9ab57502b4a82?s=128&d=identicon&r=PG&f=1", "display_name": "RomMer", "link": "https://stackoverflow.com/users/7438356/rommer"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493822225, "post_id": 43762789, "comment_id": 74567465, "body": "@BoundaryImposition both works well if you know how to use it"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 724, "user_id": 7438356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a3b94d667c9db8baa2b9ab57502b4a82?s=128&d=identicon&r=PG&f=1", "display_name": "RomMer", "link": "https://stackoverflow.com/users/7438356/rommer"}, "edited": false, "score": 0, "creation_date": 1493822312, "post_id": 43762789, "comment_id": 74567541, "body": "@RomMer: Yes, if you never make any mistakes, <code>strcpy</code> is just fine. So, you should also never assign <code>0</code> to your freed pointers, and you should never comment your code."}, {"owner": {"reputation": 724, "user_id": 7438356, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a3b94d667c9db8baa2b9ab57502b4a82?s=128&d=identicon&r=PG&f=1", "display_name": "RomMer", "link": "https://stackoverflow.com/users/7438356/rommer"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493822397, "post_id": 43762789, "comment_id": 74567603, "body": "@BoundaryImposition or just understand what you&#39;re doing when you&#39;re programming ?"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493821849, "post_id": 43762842, "comment_id": 74567127, "body": "Don&#39;t use <code>strncpy</code>. From your linked man page: &quot;Notes. Some programmers consider strncpy() to be inefficient and error prone.&quot;  <a href=\"http://stackoverflow.com/questions/2114896/why-are-strlcpy-and-strlcat-considered-insecure\">Why are strlcpy and strlcat considered insecure?</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493822109, "post_id": 43762842, "comment_id": 74567356, "body": "@Lundin: What a load of nonsense."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493822345, "post_id": 43762842, "comment_id": 74567568, "body": "Umm no. Among veteran C programmers, <code>strncpy</code> is widely known to be dangerous, for the reason that people always use it incorrectly and screw up null termination. It was never intended as a bounds-checking version of <code>strcpy</code>, we nowadays have <code>strcpy_s</code> for that purpose (introduced with C11). There&#39;s a lot of brainwashed dogma around blindly replacing <code>strcpy</code> with <code>strncpy</code>. What one should do instead is of course to check the bounds before using <code>strcpy</code>, or alternatively use <code>memcpy</code> or <code>strcpy_s</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493822420, "post_id": 43762842, "comment_id": 74567629, "body": "@Lundin: We will just have to agree to (very, very strongly) disagree. It would also be nice if you would present your arguments without doing so in the form of insinuating (a) I&#39;m not a veteran, just because I disagree with you, or (b) I&#39;m brainwashed, or (c) I follow &quot;dogma&quot;. Thanks."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493822601, "post_id": 43762842, "comment_id": 74567775, "body": "If you wanted a respectful comment, you should probably not reply with &quot;What a load of nonsense&quot; with no counter arguments. Here&#39;s some arguments www.google.com then type <code>strncpy is dangerous</code>. The 5-10 first hits all look quite relevant. As for brainwashing, Microsoft has done a lot of that with VS false positive warning for the use of <code>strcpy</code>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493822741, "post_id": 43762842, "comment_id": 74567888, "body": "<a href=\"http://stackoverflow.com/questions/869883/why-is-strncpy-insecure\">Why is strncpy insecure?</a>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1493823098, "post_id": 43762842, "comment_id": 74568186, "body": "As for veteran C programmers, they have already gone through all of these phases: 1) lets use <code>strcpy</code> 2) lets not use <code>strcpy</code>, random Microsoft dummies say its dangerous! Use <code>strncpy</code>. 3) Hmm <code>strncpy</code> kind of sucks I think. It is really hard to get the null termination right. 4) <code>strncpy</code> definitely sucks, why is this? Oh wow it wasn&#39;t intended to be used in the way I&#39;ve been using it for years. Turns out it&#39;s a 1970s remain from UNIX that got included in the standard C library mostly by accident. 5) lets use <code>strcpy</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1493825810, "post_id": 43762842, "comment_id": 74570255, "body": "Personally, I advocate the use of <code>strdup</code>, which would s available on all the platforms which interest me and is easily implemented if necessary. <code>xyz-&gt;abc = strdup(&quot;abcdedghi&quot;);</code> would have avoided all problems."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1493825875, "post_id": 43762842, "comment_id": 74570297, "body": "@rici: Much better - I&#39;m going to steal that for my answer; thanks!"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 7, "last_activity_date": 1493825898, "last_edit_date": 1493825898, "creation_date": 1493821521, "answer_id": 43762842, "question_id": 43762789, "link": "https://stackoverflow.com/questions/43762789/how-can-i-free-a-char-within-a-struct/43762842#43762842", "title": "How can I free a char* within a struct?", "body": "<p>You allocated 10 bytes, and stored a pointer to those bytes (<code>xyz-&gt;abc</code>) then you immediately replaced that pointer with a pointer to a string literal (<code>\"abcdefghi\\0\"</code>).</p>\n\n<p>There are several problems with your program:</p>\n\n<ol>\n<li>Ten leaked bytes</li>\n<li>Excess <code>\\0</code> in string literal &mdash; why?</li>\n<li><code>free</code>-ing something you didn't <code>malloc</code> (the replaced pointer)</li>\n<li>Using <code>malloc</code>/<code>free</code> in the first place (assuming the <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> tag isn't spurious)</li>\n</ol>\n\n<p>In C, use <a href=\"http://man7.org/linux/man-pages/man3/strdup.3.html\" rel=\"nofollow noreferrer\"><code>strdup</code></a> to emplace <code>abcdefghi</code> into your dynamically-allocated buffer.</p>\n\n<p>In C++, forget this and switch to <a href=\"http://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1493821692, "post_id": 43762860, "comment_id": 74567006, "body": "<code>s&#47;don&#39;t need to&#47;must not&#47;</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493821835, "post_id": 43762860, "comment_id": 74567109, "body": "@BoundaryImposition Added a bit of clarification. Hope that&#39;s better."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1493821701, "last_edit_date": 1493821701, "creation_date": 1493821559, "answer_id": 43762860, "question_id": 43762789, "link": "https://stackoverflow.com/questions/43762789/how-can-i-free-a-char-within-a-struct/43762860#43762860", "title": "How can I free a char* within a struct?", "body": "<p>In your code, <code>xyz-&gt;abc</code> <em>finally</em> does not hold a pointer returned by memory allocator function, it holds the pointer to the first element of the array containing the string literal <code>\"abcdefghi\\0\"</code>. You don't need to <code>free()</code> it.</p>\n\n<p>Rather, passing <code>xyz-&gt;abc</code> to <code>free()</code> in current scenario causes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>, so the answer boils down to, you <strong>must not</strong> attempt to pass a pointer to <code>free()</code> which is not returned by earlier <code>malloc()</code> and family or <code>NULL</code>.</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a77.22.3.3</p>\n\n<blockquote>\n  <p>[....] Otherwise, if\n  the argument does not match a pointer earlier returned by a memory management\n  function, or if the space has been deallocated by a call to <code>free</code> or <code>realloc</code>, the\n  behavior is undefined.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493821757, "post_id": 43762926, "comment_id": 74567044, "body": "No, this will cause UB by modifying a string literal. Further modifications are necessary."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493821793, "post_id": 43762926, "comment_id": 74567078, "body": "Furthermore, <code>strcpy</code> is <b>dangerous</b> and should be avoided at all times."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493821835, "post_id": 43762926, "comment_id": 74567110, "body": "@BoundaryImposition I agree, but <code>malloc(10)</code> (constant) is another wrong decision. With <code>strcpy</code> the exact example will work."}, {"owner": {"reputation": 846, "user_id": 1137102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HOdwV.png?s=128&g=1", "display_name": "RoiHatam", "link": "https://stackoverflow.com/users/1137102/roihatam"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1493821872, "post_id": 43762926, "comment_id": 74567144, "body": "@BoundaryImposition What is UB? why <code>strcpy</code> is dangerous?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1493822053, "post_id": 43762926, "comment_id": 74567311, "body": "@BoundaryImposition Unlike <code>strncpy</code>, <a href=\"http://stackoverflow.com/a/23490019/584518\">strcpy() is perfectly safe</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 846, "user_id": 1137102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HOdwV.png?s=128&g=1", "display_name": "RoiHatam", "link": "https://stackoverflow.com/users/1137102/roihatam"}, "edited": false, "score": 0, "creation_date": 1493822110, "post_id": 43762926, "comment_id": 74567360, "body": "@RoiHatam It is not dangerous, that&#39;s a wide-spread, incorrect myth. <code>strncpy</code> is however intrinsically dangerous and should never be used for any purpose."}, {"owner": {"reputation": 1329, "user_id": 1280414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ab3fd0499936f30bceb77e053520dd6?s=128&d=identicon&r=PG", "display_name": "Sergej Christoforov", "link": "https://stackoverflow.com/users/1280414/sergej-christoforov"}, "edited": false, "score": 0, "creation_date": 1493823290, "post_id": 43762926, "comment_id": 74568322, "body": "Since <code>container.abc</code> is never used (in given code snippet) as a null-terminated string, it&#39;s perfectly valid to use <code>strncpy</code>. But it&#39;s essential to remember that <code>strncpy</code> should <i>never</i> be used with null-terminated strings."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1493823534, "post_id": 43762926, "comment_id": 74568498, "body": "This question is looking for an <i>explanation</i>, not simply for working code.  Your answer provides no insight for the questioner, and may be deleted.  Please <a href=\"https://stackoverflow.com/posts/43762926/edit\">edit</a> to explain what causes the observed symptoms."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1493835353, "post_id": 43762926, "comment_id": 74575935, "body": "@TobySpeight The questioner can think what is the difference. Otherwise there is no good perspective to become programmer."}], "tags": [], "owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 1, "last_activity_date": 1493835437, "last_edit_date": 1493835437, "creation_date": 1493821703, "answer_id": 43762926, "question_id": 43762789, "link": "https://stackoverflow.com/questions/43762789/how-can-i-free-a-char-within-a-struct/43762926#43762926", "title": "How can I free a char* within a struct?", "body": "<p>Put <code>strcpy( xyz-&gt;abc, \"abcdefghi\" );</code> at line 11.</p>\n\n<p>With <code>xyz-&gt;abc = \"abcdefghi\\0\";</code> you redirect <code>xyz-&gt;abc</code> pointer to static string and lose the allocated memory address. Then <code>free</code> will work with wrong address and will not free the dynamically allocated block. <code>\\0</code> is not necessary as mentioned above by @BoundaryImposition - every double quote enclosed string is null terminated and you add extra 0.</p>\n"}, {"tags": [], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "is_accepted": false, "score": 0, "last_activity_date": 1493823934, "creation_date": 1493823934, "answer_id": 43763801, "question_id": 43762789, "link": "https://stackoverflow.com/questions/43762789/how-can-i-free-a-char-within-a-struct/43763801#43763801", "title": "How can I free a char* within a struct?", "body": "<p>The value passed to <code>free()</code> must be a value returned by something like <code>malloc()</code> or <code>realloc()</code>. Any other value passed to <code>free()</code> is invalid.</p>\n\n<p>Your code allocates memory using <code>malloc()</code> and assigns the result to <code>xyz-&gt;abc</code>. But the next line then assigns the address of <code>\"abcdefghi\\0\"</code> to <code>xyz-&gt;abc</code>.</p>\n\n<p>So at this point, <code>xyz-&gt;abc</code> <em>no longer holds the value returned by <code>malloc()</code>.</em></p>\n\n<p>And when you pass this value to <code>free()</code>, that is not valid, and no memory is freed. That is your leak.</p>\n"}], "owner": {"reputation": 101, "user_id": 7958066, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/598ca067e476868e877c1caf909a443c?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Pokharel", "link": "https://stackoverflow.com/users/7958066/aditya-pokharel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1493835437, "creation_date": 1493821430, "last_edit_date": 1493821898, "question_id": 43762789, "link": "https://stackoverflow.com/questions/43762789/how-can-i-free-a-char-within-a-struct", "title": "How can I free a char* within a struct?", "body": "<pre><code> 1| typedef struct container{\n 2|     char* abc;\n 3| }container;\n 4|\n 5|\n 6| int main(void){\n 7|\n 8|     container* xyz = malloc(sizeof(container));\n 9| \n10|     xyz-&gt;abc = malloc(10);\n11|     xyz-&gt;abc = \"abcdefghi\\0\";\n12| \n13|     free(xyz-&gt;abc);\n14|     free(xyz);\n15| }\n</code></pre>\n\n<p>According to Valgrind there's a leak on line 10. which means free(xyz->abc) isn't working. How can I free this?</p>\n"}, {"tags": ["mysql", "c"], "comments": [{"owner": {"reputation": 169, "user_id": 7950680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-msaD0Aw2Y-Y/AAAAAAAAAAI/AAAAAAAAABM/4KUk9LqaBII/photo.jpg?sz=128", "display_name": "Tiago Cunha", "link": "https://stackoverflow.com/users/7950680/tiago-cunha"}, "edited": false, "score": 0, "creation_date": 1493820988, "post_id": 43762456, "comment_id": 74566451, "body": "Did you install mysql or are you just using the header?"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1493821050, "post_id": 43762456, "comment_id": 74566496, "body": "Headers are not enough as they normally only provide <i>declarations</i> of functions, not their actual implementations."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1493821349, "post_id": 43762456, "comment_id": 74566745, "body": "have you tried to link to its library using -l flag?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1493821417, "post_id": 43762456, "comment_id": 74566798, "body": "It smells like you are linking a library for a different platform."}, {"owner": {"reputation": 11, "user_id": 6445483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5904510c861f622999cd7f349d9fc3c4?s=128&d=identicon&r=PG&f=1", "display_name": "Shuta", "link": "https://stackoverflow.com/users/6445483/shuta"}, "edited": false, "score": 0, "creation_date": 1493822110, "post_id": 43762456, "comment_id": 74567357, "body": "&gt;Tiago Cunha  I installed mysql and I want to use that function for database program.  &gt;ForceBru  So what should I do?I installed mysql and connecter and its function is in local file.  &gt;Nguai al Yes, but it doesn&#39;t work.  &gt; LPs different platform? Is that mean there are many mysql.h exist and I linked from wrong directory?"}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 7906655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba759bed6d17f704d40bc4fd96198298?s=128&d=identicon&r=PG&f=1", "display_name": "mangupt", "link": "https://stackoverflow.com/users/7906655/mangupt"}, "is_accepted": true, "score": 0, "last_activity_date": 1493827057, "creation_date": 1493827057, "answer_id": 43764898, "question_id": 43762456, "link": "https://stackoverflow.com/questions/43762456/linker-error-with-mysql-h-in-c-programming/43764898#43764898", "title": "Linker error with mysql.h in c programming", "body": "<p>please check the format in which you have included the header file.</p>\n\n<pre><code>#include &lt;/usr/local/include/mysql.h&gt;\n</code></pre>\n\n<p>should be </p>\n\n<pre><code>#include \"/usr/local/include/mysql.h\"\n</code></pre>\n\n<p>the \"&lt;>\" is used to include system header files. please use double quotes (\"\") to include user header files.</p>\n"}], "owner": {"reputation": 11, "user_id": 6445483, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5904510c861f622999cd7f349d9fc3c4?s=128&d=identicon&r=PG&f=1", "display_name": "Shuta", "link": "https://stackoverflow.com/users/6445483/shuta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 43764898, "answer_count": 1, "score": 0, "last_activity_date": 1493827057, "creation_date": 1493820583, "last_edit_date": 1493820919, "question_id": 43762456, "link": "https://stackoverflow.com/questions/43762456/linker-error-with-mysql-h-in-c-programming", "title": "Linker error with mysql.h in c programming", "body": "<p>Hi I would like to solve how I can fix with linker error.\nWhat I wanted to do is to include header file which is mysql.h from /usr/local/include.(I'm using mac book)</p>\n\n<p>But when compiling the header file which is below, compiler says \"Undefined symbols for architecture\"</p>\n\n<pre><code>#include &lt;/usr/local/include/mysql.h&gt;\n</code></pre>\n\n<p>I obviously installed mysql and connecter-c.</p>\n\n<p>Please teach me how to fix it and why mysql.h is not included.</p>\n\n<p>Best regards,</p>\n"}, {"tags": ["c", "function", "gcc"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493819865, "post_id": 43762148, "comment_id": 74565548, "body": "Indentation................"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493819871, "post_id": 43762148, "comment_id": 74565554, "body": "<code>int main(c,v) </code> =&gt; <code>int main(argc,argv) </code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493819921, "post_id": 43762148, "comment_id": 74565597, "body": "plus you&#39;re mixing ANSI and non-ANSI styles. K &amp; R: this ship has sailed. Please use ANSI"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1493820019, "post_id": 43762148, "comment_id": 74565676, "body": "The code you posted contains only 29 lines."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493820272, "post_id": 43762148, "comment_id": 74565880, "body": "@Jean-Fran&#231;oisFabre there&#39;s no requirement to name the arguments to main <code>argc</code> and <code>argv</code>. <code>int main(int c, char*v[])</code> is perfectly legal, although I admit it looks a bit weird."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493820321, "post_id": 43762148, "comment_id": 74565922, "body": "I agree, but if there are no protos for the args, they must match <code>argv</code> and <code>argc</code> defined in the code."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493820471, "post_id": 43762148, "comment_id": 74566044, "body": "@Jean-Fran&#231;ois Fabre:  That would be <code>int main(c,v) int c; char **v; { ...</code> in K&amp;R. <code>int c</code> can be omitted. The names do not matter, of course, but the parameter declarations should precede the first <code>{</code>. Declaring them locally, as in OP&#39;s code, will not work."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1493820574, "post_id": 43762148, "comment_id": 74566113, "body": "@AnT indeed. I admit my K&amp;R is a bit rusty, I don&#39;t have fond memories of that time :)"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493820644, "post_id": 43762148, "comment_id": 74566167, "body": "@Jean-Fran&#231;oisFabre No they don&#39;t. The <code>argc</code> and <code>argv</code> in the code are automatic variables, not parameter declarations (they are inside the function body). He has, in fact omitted declarations for the parameters altogether, so both are assumed to be int."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493820708, "post_id": 43762148, "comment_id": 74566220, "body": "indeed! OP&#39;s K&amp;R is rusty as hell too ... well, never mind, let&#39;s just <i>not</i> use that"}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493820869, "post_id": 43762148, "comment_id": 74566371, "body": "@Jean-Fran&#231;oisFabre +100000, there&#39;s a reason why nobody uses K&amp;R anymore!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493821013, "post_id": 43762148, "comment_id": 74566465, "body": "K&amp;R is outdated since 28 years. Get a modern compiler and use modern C. If that is something from your school, tell the teacher you will not get a job learing prehistoric C!"}, {"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1493821060, "post_id": 43762148, "comment_id": 74566506, "body": "You are checking argc for &lt; or &gt; 3, but I don&#39;t see it being set to anything (checking uninitialized variable).  If you are expecting a user to pass parameters to main(), add the types to your variables in the declaration and use them.  Also, argv is uninitialized so maybe that is what Usage() is complaining about."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493821363, "post_id": 43762148, "comment_id": 74566760, "body": "Knowing pre-ANSI C could be a valuable skill in the field of software archaeology. Are you asking how to use K&amp;R C, or how to enable modern C on your HP? These are two totally different career choices."}, {"owner": {"reputation": 386, "user_id": 7928083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/usoNq.png?s=128&g=1", "display_name": "Justin J.", "link": "https://stackoverflow.com/users/7928083/justin-j"}, "edited": false, "score": 0, "creation_date": 1493821790, "post_id": 43762148, "comment_id": 74567074, "body": "Put      void Usage(char *filename);  above main."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493822288, "post_id": 43762148, "comment_id": 74567517, "body": "The default (K&amp;R) compiler on HP-UX is only suposed to be used to compile the kernel for reconfiguring it.  It is not intended for software development.  HP has a perfectly good modern C compiler; it just isn&#39;t shipped by default (I assume you have to pay for it).  It used to be possible to build GCC with the default compiler; since it now requires a C++ compiler, that&#39;s no longer true.  Or, at least, you&#39;d have to install GCC 4.x, and then compile GCC 7.x (7.1 released 2017-05-02, yesterday as I type) with that."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1493822457, "post_id": 43762148, "comment_id": 74567657, "body": "Incidentally, the <code>int errno;</code> needs to be <code>extern int errno;</code> \u2014 or better, <code>#include &lt;errno.h&gt;</code>.  But even that is fraught; it is most often a macro that wraps a function call."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493820660, "post_id": 43762452, "comment_id": 74566186, "body": "20 years ago I was using HPUX and I never had to use K&amp;R. I believe there&#39;s a --ansi flag to the cc HP compiler."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1493820783, "post_id": 43762452, "comment_id": 74566280, "body": "The &quot;leave everything else the same&quot; comment in <code>main</code> is incorrect. He needs to remove the declarations of argc and argv in the function body."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1493820851, "post_id": 43762452, "comment_id": 74566355, "body": "@JeremyP: Edited to make that clear."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1493821041, "post_id": 43762452, "comment_id": 74566487, "body": "Have an upvote. By the way, you are correct that K&amp;R had no <code>void</code> type."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493821050, "post_id": 43762452, "comment_id": 74566495, "body": "@Jean-Fran&#231;oisFabre: Yeah, that&#39;s a small part of why I hated working on HP-UX in the &#39;90s.  Every other compiler, whether <code>gcc</code> or the platform&#39;s bundled C compiler, was defaulting to C89/90.  But not UP-CHUX, no, they were <i>special</i>."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1493821352, "post_id": 43762452, "comment_id": 74566749, "body": "Back in the 90&#39;s, I worked for a company that had a cross platform product and the coding standards insisted we used some crazy macros to declare function prototypes so that the code would compile in both ANSI and K&amp;R C. At the time we compiled everything for whatever platform with <code>gcc</code> so it was just an annoying waste of time."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1493822271, "post_id": 43762452, "comment_id": 74567501, "body": "the only good way to fix the HPUX problem is with a can of gasoline and a lighter and try to get the insurance check"}, {"owner": {"reputation": 143, "user_id": 6406128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076b551c9d8b612729ab2c0d0dd5fca2?s=128&d=identicon&r=PG&f=1", "display_name": "Driven", "link": "https://stackoverflow.com/users/6406128/driven"}, "edited": false, "score": 0, "creation_date": 1493823862, "post_id": 43762452, "comment_id": 74568741, "body": "thank you guys for your input the sever I&#39;m working on only has cc. planning to install gcc will see if that will solve some of my issues. in the main time when I made the change for usage function I got Redeclaration of &quot;filename&quot; hides formal parameter"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 143, "user_id": 6406128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076b551c9d8b612729ab2c0d0dd5fca2?s=128&d=identicon&r=PG&f=1", "display_name": "Driven", "link": "https://stackoverflow.com/users/6406128/driven"}, "edited": false, "score": 0, "creation_date": 1493828457, "post_id": 43762452, "comment_id": 74571968, "body": "@Driven: make sure the full declaration of the parameter comes before the opening <code>{</code> of the function body, as in my example above."}, {"owner": {"reputation": 143, "user_id": 6406128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076b551c9d8b612729ab2c0d0dd5fca2?s=128&d=identicon&r=PG&f=1", "display_name": "Driven", "link": "https://stackoverflow.com/users/6406128/driven"}, "edited": false, "score": 0, "creation_date": 1493830850, "post_id": 43762452, "comment_id": 74573305, "body": "thanks for your help it worked"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 3, "last_activity_date": 1493821389, "last_edit_date": 1493821389, "creation_date": 1493820578, "answer_id": 43762452, "question_id": 43762148, "link": "https://stackoverflow.com/questions/43762148/k-r-function-declaration/43762452#43762452", "title": "K &amp; R function declaration", "body": "<p>Good Lord, the HP-UX C compiler <em>still</em> defaults to K&amp;R?!  That was sort of excusable 20 years ago, now not so much.</p>\n\n<p>To make this compile as K&amp;R (pre-ANSI) C, change your function definitions as follows:</p>\n\n<pre><code>int main( argc, argv )\n  int argc;            /* move declaration of argc and argv from the */\n  char **argv;         /* body of main to here */\n{      \n  /* leave everything else the same */\n}\n\nint Usage( filename ) /* void was introduced in C89, don't think it existed in K&amp;R */\n  char *filename;\n{\n  /* leave the same */\n}\n</code></pre>\n\n<p>Having said that, the <em>right</em> answer is to use proper function prototypes and to find the command-line option that puts the compiler in C90 (or later) mode, or use <code>gcc</code>.  <strong>Nobody</strong> should be using K&amp;R-style function definitions in new code.  </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Note that, under K&amp;R and C89/90, if the compiler sees a function <em>call</em> before it sees a declaration for that function, it will assume the function returns <code>int</code>.  Since I've declared <code>Usage</code> to return <code>int</code> above (as there was no <code>void</code> type in K&amp;R), this code will compile under K&amp;R.</p>\n\n<p>If I had defined <code>Usage</code> to return any type other than <code>int</code>, the compiler would complain about a type mismatch between the <em>implied</em> declaration and the function definition.  </p>\n\n<p>As of C99, implicit <code>int</code> typing is no longer allowed, so all functions must be explicitly declared or defined before use.  </p>\n"}], "owner": {"reputation": 143, "user_id": 6406128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/076b551c9d8b612729ab2c0d0dd5fca2?s=128&d=identicon&r=PG&f=1", "display_name": "Driven", "link": "https://stackoverflow.com/users/6406128/driven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "closed_date": 1493833872, "accepted_answer_id": 43762452, "answer_count": 1, "score": -5, "last_activity_date": 1514866130, "creation_date": 1493819787, "last_edit_date": 1514866130, "question_id": 43762148, "link": "https://stackoverflow.com/questions/43762148/k-r-function-declaration", "closed_reason": "Not suitable for this site", "title": "K &amp; R function declaration", "body": "<p>C expert  I'm trying to learn c and the compiler on my hp-ux uses K &amp; R </p>\n\n<p>I keep having </p>\n\n<ol>\n<li>line 32: error 1584: Inconsistent type declaration: \"Usage\"</li>\n<li>line 33: error 1705: Function prototypes are an ANSI feature</li>\n<li>warning 419: Zero-length storage allocated for array argv</li>\n</ol>\n\n<pre class=\"lang-c prettyprint-override\"><code>int main(c,v) \n{\n    int result; \n    int errno;\n    int argc; \n    char *argv[];\n\n    if(argc &lt; 3 || argc &gt; 3) {\n        Usage(argv[0]);\n        exit(1);\n    }\n\n    system(\"clear\");\n    result = Search_in_File(argv[1], argv[2]);\n    if(result == -1) {\n        perror(\"Error\");\n        printf(\"Error number = %d\\n\", errno);\n        exit(1);\n    }\n    return(0);\n}\n\nvoid Usage(char *filename) \n{\n    printf(\"Usage: %s &lt;file&gt; &lt;string&gt;\\n\", filename);\n    printf(\"%s version 1.0 \\nCopyright(c) CodingUnit.com\\n\", filename);\n}\n</code></pre>\n\n<p>thanks in advance for any input </p>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1493818637, "post_id": 43761613, "comment_id": 74564496, "body": "<a href=\"http://160592857366.free.fr/joe/ebooks/ShareData/Design%20of%20the%20Unix%20Operating%20System%20By%20Maurice%20Bach.pdf\" rel=\"nofollow noreferrer\">You are reading something wrote in 1986........</a>You should buy recent books that, at least, support c99"}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "edited": false, "score": 0, "creation_date": 1493818650, "post_id": 43761613, "comment_id": 74564510, "body": "In older versions of C, there was a concept of &quot;default type&quot; - if the return type of function or the type of a variable was not specified, it was assumed to be <code>int</code>."}, {"owner": {"reputation": 1028, "user_id": 2334787, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/JYVGB.jpg?s=128&g=1", "display_name": "Nullpointer", "link": "https://stackoverflow.com/users/2334787/nullpointer"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1493818800, "post_id": 43761613, "comment_id": 74564649, "body": "@LPs I understand that this a very old book but I just want to know what it means. @kfx How is that related to <code>extern</code> of <code>cather()</code> or <code>char *</code> of <code>sbrk()</code>"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1493818912, "post_id": 43761613, "comment_id": 74564751, "body": "the <code>extern</code> is used to avoid declaring a prototype at the top of the file, I guess. <b>It is useless as the book where the code is written.</b>"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1493818913, "post_id": 43761613, "comment_id": 74564755, "body": "The <code>extern</code> is there because you need <i>something</i> to make it a function declaration rather than a function call. In this case, if default function return types are supported, it is equivalent to <code>int catcher();</code>."}, {"owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "edited": false, "score": 0, "creation_date": 1493818914, "post_id": 43761613, "comment_id": 74564757, "body": "It appears as it is just decalring these functions before they are called, may be thats what older compilers expected"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1493819086, "post_id": 43761613, "comment_id": 74564892, "body": "The syntax of the <code>catcher</code> function is wrong. The <code>int signo;</code> should be <i>before</i> the opening <code>{</code>. This is an old-style function definition without a prototype."}, {"owner": {"reputation": 1028, "user_id": 2334787, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/JYVGB.jpg?s=128&g=1", "display_name": "Nullpointer", "link": "https://stackoverflow.com/users/2334787/nullpointer"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1493819198, "post_id": 43761613, "comment_id": 74564977, "body": "@IanAbbott You are correct! While copying I made a mistake (I tried to put it through <code>gcc</code> and modified it to remove errors)"}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "edited": false, "score": 0, "creation_date": 1493819223, "post_id": 43761613, "comment_id": 74565000, "body": "@Nullpointer it has <code>extern</code> in front of it because otherwise that would be a function call, not a function declaration."}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "edited": false, "score": 1, "creation_date": 1493819292, "post_id": 43761613, "comment_id": 74565061, "body": "And <code>sbrk()</code> has the return type specified instead of <code>extern</code> because the return type of that one is not <code>int</code>. Writing <code>extern char *sbrk()</code> would give the same effect."}, {"owner": {"reputation": 1028, "user_id": 2334787, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/JYVGB.jpg?s=128&g=1", "display_name": "Nullpointer", "link": "https://stackoverflow.com/users/2334787/nullpointer"}, "reply_to_user": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "edited": false, "score": 0, "creation_date": 1493819379, "post_id": 43761613, "comment_id": 74565135, "body": "@kfx Thanks for the explanation. I have also edited my question to add that this code compiles correctly in Mac but gives error on Ubuntu. Why is this happening? Lastly, I don&#39;t think that the book is useless. It is an amazing book if you really want to learn about Unix concepts!"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1493819757, "post_id": 43761613, "comment_id": 74565459, "body": "The program is invalid according to the current C standard. It was OK back when (30 years ago). Perhaps the Mac OS people need to catch up with the program, or something. If you really want have a go at the corpse of pre-ANSI C, your best bet is probably the <i>first edition</i> of K&amp;R."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493820749, "post_id": 43762389, "comment_id": 74566250, "body": "If you want to give a valid program, make <code>catcher</code> return <code>void</code>, include <code>&lt;stdio.h&gt;</code>, and use <code>%p</code> format for printing pointers. You may also need to define <code>_BSD_SOURCE</code> or a similar macro in order to enable <code>sbrk</code> and friends."}, {"owner": {"reputation": 6567, "user_id": 2435820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/J6uQT.png?s=128&g=1", "display_name": "kfx", "link": "https://stackoverflow.com/users/2435820/kfx"}, "edited": false, "score": 0, "creation_date": 1493821933, "post_id": 43762389, "comment_id": 74567197, "body": "<code>int catcher();</code> -&gt; <code>void catcher();</code>"}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493821981, "post_id": 43762389, "comment_id": 74567242, "body": "@n.m. and kfx.  Thanks for helping to improve the answer."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1493830461, "post_id": 43762389, "comment_id": 74573092, "body": "<code>sbrk</code> is legacy SUSv2 function, not only BSD."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1493880307, "post_id": 43762389, "comment_id": 74592120, "body": "@Jean-BaptisteYun&#232;s Added for completeness."}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": true, "score": 5, "last_activity_date": 1493880162, "last_edit_date": 1495542858, "creation_date": 1493820421, "answer_id": 43762389, "question_id": 43761613, "link": "https://stackoverflow.com/questions/43761613/extern-with-function-call-inside-main/43762389#43762389", "title": "extern with function call inside main", "body": "<pre><code>char *sbrk();\nextern catcher();\n</code></pre>\n\n<p>These are function declarations, not function calls. The code you are reading is old style (pre-ANSI), and in subsequent (c99 or newer) C standards they are no longer valid. </p>\n\n<p>You should add an explicit return type to the declaration of <code>catcher()</code>. The current implicit declaration means it has an <code>int</code> return type. However, the correct signature for a signal handler specifies no return value. When we add an explicit return type, the <code>extern</code> keyword is no longer needed and it can be removed.  </p>\n\n<p><code>sbrk</code> is actually declared in a regular header, so remove the declaration and <code>#include &lt;unistd.h&gt;</code>. However, <code>sbrk</code> is BSD (and part of SUSv2) and not a standard C function, so you need to activate the declaration with <code>#define _BSD_SOURCE</code> or <code>#define _XOPEN_SOURCE=500</code> before you include <code>unistd.h</code>.</p>\n\n<p><code>Printf</code> is declared in <code>stdio.h</code>, so let's include it. <code>%u</code> is used to print <code>unsigned int</code>. Pointers should be printed with the <code>%p</code> format specifier.</p>\n\n<p>So, after some modernisation of the code:</p>\n\n<pre><code>#define _BSD_SOURCE\n#include &lt;stdio.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n\nvoid catcher();\n\nchar *cp;\nint callno;\n\nint main(void) {\n    signal(SIGSEGV, catcher);\n    cp = sbrk(O);  // You sure this should be an O and not a 0?\n    printf(\"original brk value %u\\n\", cp);\n    for (;;)\n        *cp++ = 1; \n}\n\n\nvoid catcher(int signo) {\n    callno++;\n    printf(\"caught sig %d %dth call at addr %p\\n\", signo, callno, cp);\n    sbrk(256);\n    signal(SIGSEGV, catcher); \n}\n</code></pre>\n\n<p>Please note that you should avoid calling <code>printf</code> from within a signal handler. See for example <a href=\"https://stackoverflow.com/questions/16891019/how-to-avoid-using-printf-in-a-signal-handler\">How to avoid using printf in a signal handler</a> or <a href=\"https://docs.oracle.com/cd/E19455-01/806-5257/gen-26/index.html\" rel=\"nofollow noreferrer\">Signal Handlers and Async-Signal Safety</a></p>\n"}, {"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 0, "last_activity_date": 1493823530, "last_edit_date": 1495541886, "creation_date": 1493823530, "answer_id": 43763629, "question_id": 43761613, "link": "https://stackoverflow.com/questions/43761613/extern-with-function-call-inside-main/43763629#43763629", "title": "extern with function call inside main", "body": "<p>In addition to @Klas Lindb\u00e4ck's answer, there are other problems with this code under the current C and POSIX standards:</p>\n\n<pre><code>#include &lt; signal.h&gt;\nchar *cp;\nint callno;\n\nmain() {\n    char *sbrk();\n    extern catcher();\n\n    signal(SIGSEGV, catcher);\n    cp = sbrk(O);\n    printf(\"original brk value %u\\n\", cp);\n    for (;;)\n    *cp++ = 1; \n}\n\n\ncatcher(signo) {\n    int signo;\n    callno++;\n    printf(\"caught sig %d %dth call at addr %u\\n\", signo, callno, cp);\n    sbrk(256);\n    signal(SIGSEGV, catcher); \n}\n</code></pre>\n\n<p><strong>Don't use <code>sbrk()</code></strong></p>\n\n<p><code>sbrk()</code> has been removed from the POSIX standard.  It's no longer safe to use directly.  From <a href=\"http://man7.org/linux/man-pages/man2/brk.2.html\" rel=\"nofollow noreferrer\">the Linux man page</a>:</p>\n\n<blockquote>\n  <p>Avoid using <code>brk()</code> and <code>sbrk()</code>: the <code>malloc(3)</code> memory allocation package\n  is the portable and comfortable way of allocating memory.</p>\n</blockquote>\n\n<p>Why?  Because numerous C library functions often use <code>malloc()</code>/<code>calloc()</code>/<code>realloc()</code>/... internally, and <a href=\"https://www.google.com/search?q=mixing%20sbrk%20and%20malloc\" rel=\"nofollow noreferrer\">mixing <code>malloc()</code> and <code>brk()</code>/<code>sbrk()</code> calls in the same process is unsafe</a>.  <code>malloc()</code> implementations often use <code>brk()</code>/<code>sbrk()</code> internally, so using <code>sbrk()</code> in your own code might very well corrupt your heap.</p>\n\n<p><strong>Don't use <code>signal()</code></strong></p>\n\n<p><a href=\"https://stackoverflow.com/a/232711/4756299\"><code>signal()</code> has significant issues</a>. It's not consistent at all. Use <code>sigaction()</code> instead.</p>\n"}], "owner": {"reputation": 1028, "user_id": 2334787, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/JYVGB.jpg?s=128&g=1", "display_name": "Nullpointer", "link": "https://stackoverflow.com/users/2334787/nullpointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 43762389, "answer_count": 2, "score": 1, "last_activity_date": 1493880162, "creation_date": 1493818421, "last_edit_date": 1592644375, "question_id": 43761613, "link": "https://stackoverflow.com/questions/43761613/extern-with-function-call-inside-main", "title": "extern with function call inside main", "body": "<p>While reading <strong>Unix System Design</strong> by Maurice Bach I came across below code snippet.</p>\n<pre><code>#include &lt; signal.h&gt;\nchar *cp;\nint callno;\n\nmain() {\n    char *sbrk();\n    extern catcher();\n\n    signal(SIGSEGV, catcher);\n    cp = sbrk(O);\n    printf(&quot;original brk value %u\\n&quot;, cp);\n    for (;;)\n    *cp++ = 1; \n}\n\n\ncatcher(signo) {\n    int signo;\n    callno++;\n    printf(&quot;caught sig %d %dth call at addr %u\\n&quot;, signo, callno, cp);\n    sbrk(256);\n    signal(SIGSEGV, catcher); \n}\n</code></pre>\n<p>I got confused with two statements within main method</p>\n<blockquote>\n<p>char *sbrk();</p>\n<p>extern catcher();</p>\n</blockquote>\n<p>I understand how <code>extern</code> works and I also know what <code>sbrk()</code> does but I couldn't understand why have they written <code>extern</code> before <code>catcher()</code> and also why is <code>char*</code> written before <code>sbrk()</code> call?</p>\n<p>I got compilation error on gcc-4.8.4 on Ubuntu when compiling this code but code compiles without any errors in Mac. Why is this happening?</p>\n"}, {"tags": ["c", "linux", "stack"], "comments": [{"owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "edited": false, "score": 1, "creation_date": 1493815568, "post_id": 43760261, "comment_id": 74562017, "body": "Are you doing the <code>printf()</code> and the <code>backtrace</code> calls in the same program execution?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1493815640, "post_id": 43760261, "comment_id": 74562077, "body": "Why would a function&#39;s executable code be located on the stack for the currently-running thread?"}, {"owner": {"reputation": 34, "user_id": 6124731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bbl6W.png?s=128&g=1", "display_name": "joni", "link": "https://stackoverflow.com/users/6124731/joni"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493815820, "post_id": 43760261, "comment_id": 74562213, "body": "Both calls (&#39;printf()&#39; and  &#39;backtrace&#39;) done in same program execution. @AndrewHenle - Do you mean that the address printed by stacktrac is the data segment address?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 1, "creation_date": 1493817657, "post_id": 43760261, "comment_id": 74563702, "body": "@joni backtrace is printing return addresses stored <i>in</i> the stack. Your <code>printf</code> is printing a pointer to a stack location. They are completely separate."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1493818896, "post_id": 43760261, "comment_id": 74564736, "body": "<b>undefined behaviour</b>: %p requires a ptr-to-void, but you pass a <code>char *</code>."}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 6124731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bbl6W.png?s=128&g=1", "display_name": "joni", "link": "https://stackoverflow.com/users/6124731/joni"}, "is_accepted": false, "score": 0, "last_activity_date": 1493820390, "creation_date": 1493820390, "answer_id": 43762378, "question_id": 43760261, "link": "https://stackoverflow.com/questions/43760261/print-stack-pointer-vs-backtrace-printout/43762378#43762378", "title": "Print stack pointer vs backtrace() printout", "body": "<p>As mentioned in the comments (By Andrew Henle and Ian Abbott). The printf output is the address of stack location in memory,  while backtrace prints the return address of the called functions stored in the stack.\nThanks</p>\n"}], "owner": {"reputation": 34, "user_id": 6124731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bbl6W.png?s=128&g=1", "display_name": "joni", "link": "https://stackoverflow.com/users/6124731/joni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493820390, "creation_date": 1493815092, "last_edit_date": 1495540480, "question_id": 43760261, "link": "https://stackoverflow.com/questions/43760261/print-stack-pointer-vs-backtrace-printout", "title": "Print stack pointer vs backtrace() printout", "body": "<p>I printed the current stack pointer as describe in <a href=\"https://stackoverflow.com/questions/20059673/print-out-value-of-stack-pointer\">this post</a> </p>\n\n<pre><code>void myFunc1(void)\n{\n    char *p;\n    char b=0x11;\n    p = &amp;b;\n    printf(\"printStack(1) [%p]=%d\\n\",p,*p);\n    myfunc2();\n\n}\n</code></pre>\n\n<p>outout: </p>\n\n<pre><code>printStack(1) [0x7ec8a72f]=17\n</code></pre>\n\n<p>while the printout when using the snipped code from <a href=\"http://man7.org/linux/man-pages/man3/backtrace.3.html\" rel=\"nofollow noreferrer\">backtrace example</a> :</p>\n\n<pre><code>backtrace() returned 4 addresses\n/home/lib/libmy1.so(myfunc3+0x14) [0x2aba4378]\n/home/lib/libmy1.so(myFunc1+0x220) [0x2aba5d74]\n/home/my_demon() [0x1b0b8]\n/home/my_demon(main+0x8b8) [0x19668]\n/lib/libc.so.6(__libc_start_main+0x118) [0x2ac554c4]\n</code></pre>\n\n<p>I expect that the addresses in both printout would be in the same space address.\nSo why there is diffrence in the address 0x7ec8a72f vs 0x2aba4378?</p>\n\n<p>Arch: ARM</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "binary-tree"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493815051, "post_id": 43760190, "comment_id": 74561612, "body": "Debugger.............."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1493815087, "post_id": 43760190, "comment_id": 74561639, "body": "You need to debug this and use a very important tool: a pencil and a piece of paper."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1493815197, "post_id": 43760190, "comment_id": 74561736, "body": "And please read this; <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 2, "creation_date": 1493815260, "post_id": 43760190, "comment_id": 74561786, "body": "You have <code>void delete_node()</code> and <code>tr-&gt;lchild = delete_node()</code>; so this is all a bunch of nonsense."}, {"owner": {"reputation": 46142, "user_id": 773113, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/FKKLW.jpg?s=128&g=1", "display_name": "Mike Nakis", "link": "https://stackoverflow.com/users/773113/mike-nakis"}, "edited": false, "score": 1, "creation_date": 1493815334, "post_id": 43760190, "comment_id": 74561834, "body": "<b><i>Enable all compiler warnings before Ever. Attempting. To write any code.</i></b>"}], "answers": [{"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 4, "last_activity_date": 1493815348, "creation_date": 1493815348, "answer_id": 43760367, "question_id": 43760190, "link": "https://stackoverflow.com/questions/43760190/deleting-from-a-binary-tree/43760367#43760367", "title": "Deleting from a binary tree", "body": "<p>You can't simply delete a node of a binary tree. You can delete a leaf easily enough, just set the parent's lchild or rchild partner to null. But you can't delete an internal node without also deleting all its children. What you can do is rotate the node so that the left child (or right child) becomes the root of the sub-tree, and the root becomes a child. The reattach the new sub-tree root to the tree. Repeat until finally the node you wish to delete becomes a leaf, and remove it.</p>\n"}], "owner": {"reputation": 1, "user_id": 7957157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14e51cb912c75b4f383121d23541458?s=128&d=identicon&r=PG&f=1", "display_name": "jujik", "link": "https://stackoverflow.com/users/7957157/jujik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493815348, "creation_date": 1493814912, "question_id": 43760190, "link": "https://stackoverflow.com/questions/43760190/deleting-from-a-binary-tree", "title": "Deleting from a binary tree", "body": "<p>I have a problem with a binary tree. In my code i'm planing to implement functions like adding, deleting and printing. While Adding and printing works fine, im having troubles with deleting. My thoughts - problem is in pointers. I'm adding through 2 pointers and deleting with 1, but i cant figure out how to get it to work. Please help.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"bintree.h\"\n\nvoid paste_node(Tree ** tr, int x)\n{\n    Tree *tree_bin;\n    if ((*tr) == NULL) {\n        tree_bin = (Tree *) malloc(sizeof(Tree));\n        tree_bin-&gt;item = x;\n        tree_bin-&gt;lchild = tree_bin-&gt;rchild = NULL;\n        *tr = tree_bin;\n        return;\n    }\n\n    if (x &lt; (*tr)-&gt;item) {\n        paste_node(&amp;((*tr)-&gt;lchild), x);\n    } else {\n        paste_node(&amp;((*tr)-&gt;rchild), x);\n    }\n}\n\nTree * minimum(Tree *tr)\n{\n    if (tr-&gt;lchild == NULL) return tr;\n    return minimum(tr-&gt;lchild);\n}\n\nvoid delete_node(Tree ** tr, int num)\n{ \n    if (tr == NULL) return;\n\n    if (num &lt; tr-&gt;item)\n        tr-&gt;lchild = delete_node(tr-&gt;lchild, num);\n    else if (num &gt; tr-&gt;item)\n        tr-&gt;rchild = delete_node(tr-&gt;rchild, num);\n    else {\n        if (tr-&gt;lchild == NULL) {\n            Tree *tree_bin = tr-&gt;rchild;\n            free(tr);\n            return;\n        }\n        else if (tr-&gt;rchild == NULL) {\n            Tree *tree_bin = tr-&gt;lchild;\n            free(tr);\n            return;\n        }\n\n        Tree *tree_bin = minimum(tr-&gt;rchild);\n        tr-&gt;item = tree_bin-&gt;item;\n        tr-&gt;rchild = delete_node(tr-&gt;rchild, tree_bin-&gt;item);\n    }\n\n    return;\n}\n\nvoid print_tree(Tree *tr, int depth)\n{\n    if (tr != NULL) {\n        print_tree(tr-&gt;lchild, depth + 1);\n        for(int i = 0; i &lt; depth; ++i) printf(\"   \");\n        printf(\"%d&lt;\\n\", tr-&gt;item);\n        print_tree(tr-&gt;rchild, depth + 1);\n    }\n}\n\nint check_node(Tree **tr, int x) {\n    if ((*tr) == NULL) {\n        return 1;\n    }\n\n    if (x &lt; (*tr)-&gt;item) {\n        check_node(&amp;((*tr)-&gt;lchild), x);\n    } else if (x == (*tr)-&gt;item) {\n        return -1;\n    } else {\n        check_node(&amp;((*tr)-&gt;rchild), x);\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "bit-manipulation"], "comments": [{"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 1, "creation_date": 1493813297, "post_id": 43759499, "comment_id": 74560299, "body": "<code>1100101010000000</code>  if you are using <code>and (&amp;)</code> for extraction"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 2, "creation_date": 1493813347, "post_id": 43759499, "comment_id": 74560338, "body": "The second, but you can easily print result of <code>Register &amp; mask</code>....."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1493813427, "post_id": 43759499, "comment_id": 74560396, "body": "Show your code. If you are asking this question, then you <i>do have</i>  a problem extracting the bits."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493813532, "post_id": 43759499, "comment_id": 74560483, "body": "You want to read how the bit-operators work. That has nothing to do with a register, MCU, etc. It is not even C-specific, but programming basics."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1493813642, "post_id": 43759681, "comment_id": 74560560, "body": "The cast to <code>unsigned short</code> is irrelevant and missleading. If anything, you should cast to <code>unsigned int</code> to avoid implemention defined shifting of the sign-bit."}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493814048, "post_id": 43759681, "comment_id": 74560867, "body": "@Olaf: that&#39;s not correct. Casting to unsigned int will copy the sign bit, producing 1111111110010101 (if the register is defined <code>short</code>)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493814288, "post_id": 43759681, "comment_id": 74561035, "body": "An <code>unsigned int</code> has not sign bit! Which type has your <code>reg</code>? Hardware peripheral register should always be unsigned integers, so the cast will not produce any eiher. Let apart the conversion from signed to unsigned <code>int</code> is well defined."}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493815509, "post_id": 43759681, "comment_id": 74561972, "body": "Yes, conversion from signed short to unsigned int is well defined (going from short -&gt; int -&gt; unsigned int) and it replicates the 15th bit to bit positions 16..31."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493815626, "post_id": 43759681, "comment_id": 74562063, "body": "Read my comment carefully <b>again</b>. And why do you assume <code>unsigned int</code> has 32 bits?"}, {"owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "edited": false, "score": 0, "creation_date": 1493818081, "post_id": 43759681, "comment_id": 74564070, "body": "Casting a signed short to unsigned int would copy the sign bit all over the top bits of the destination variable. It would be possible to pre-mask (reg &amp; 0xffff) &gt;&gt; 7, or post-mask (reg &gt;&gt; 7) &amp; 0x1ff. Casting <code>short</code> to <code>unsigned short</code> effectively implements this pre-masking. And yes, I&#39;m assuming that int <i>can</i> be wider than short. There are plenty of unknowns in the question and I&#39;m trying to assume the worst."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493818386, "post_id": 43759681, "comment_id": 74564301, "body": "@chux if <code>short</code> is 16-bit and <code>int</code> 32-bit, and <code>reg</code> signed 16-bit, then those two casts are very different (and the <code>unsigned short</code> cast probably gives the desired behaviour of right-shifting with zero-fill)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493823420, "post_id": 43759681, "comment_id": 74568420, "body": "@M.M  Agreed.  Of course that is correct.  Comment removed."}], "tags": [], "owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "is_accepted": true, "score": 0, "last_activity_date": 1493813782, "last_edit_date": 1493813782, "creation_date": 1493813426, "answer_id": 43759681, "question_id": 43759499, "link": "https://stackoverflow.com/questions/43759499/when-extracting-specific-bits-from-a-register-does-the-extracted-value-have-to-h/43759681#43759681", "title": "When extracting specific bits from a register does the extracted value have to have the same size as the register?", "body": "<p>Both are easily achieved.</p>\n\n<pre><code>(unsigned short)reg &gt;&gt; (16-9) == 405, // where as\nreg &amp; bitmask == 51840\n</code></pre>\n\n<p>Some \"controllers\", such as x86 with BMI2 extension support however bit extraction with the bitmask <code>PEXT reg, bitmask</code> would give 405.</p>\n\n<p>The specific answer the question in the title is no; the output variable has to contain just enough bits.</p>\n\n<pre><code>unsigned char eight_bits = reg &gt;&gt; 8;  // get's top 8 bits\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7956985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d948a0705e58e97fccf694da278c5fe0?s=128&d=identicon&r=PG&f=1", "display_name": "T. Engin", "link": "https://stackoverflow.com/users/7956985/t-engin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 43759681, "answer_count": 1, "score": -1, "last_activity_date": 1493813782, "creation_date": 1493812893, "last_edit_date": 1493813471, "question_id": 43759499, "link": "https://stackoverflow.com/questions/43759499/when-extracting-specific-bits-from-a-register-does-the-extracted-value-have-to-h", "title": "When extracting specific bits from a register does the extracted value have to have the same size as the register?", "body": "<p>I am currently extracting 9 bits (the last 9) from a 16 bit register. I don't have a problem with extracting the bits, however when I extract the bits is my extracted value going to have 7 '0's at the end? A representation:</p>\n\n<p>Register:              1100101011110011</p>\n\n<p>Bit mask:              1111111110000000</p>\n\n<p>Is my extracted value: 110010101 (405) </p>\n\n<p>or is it:              1100101010000000 (51840)</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "linux", "gcc"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493811871, "post_id": 43759069, "comment_id": 74559282, "body": "you want to change the source code using <code>sed</code>? Is it related to C at all? don&#39;t you want to pass <code>-DSIZE=30</code> to change it using compilation switches?"}, {"owner": {"reputation": 2233, "user_id": 2669128, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/430a24425fb593f00def23e45c454c39?s=128&d=identicon&r=PG", "display_name": "thurizas", "link": "https://stackoverflow.com/users/2669128/thurizas"}, "edited": false, "score": 0, "creation_date": 1493812134, "post_id": 43759069, "comment_id": 74559446, "body": "as i understand it, you want to change the value of <code>SIZE</code> from 10 to say 20 at run time?  if so the answer is no.  Preprocessor commands (of which <code>#define</code> is one) are handled early in the compilation process.  What happens with a <code>#define</code> is that every occurrence of the string <code>SIZE</code> is replaced by 10 even before the code is parsed.  What you could do is have a variable (say <code>size</code>) that is initialized by default to 10, and then process the command line arguments and modify the variable as needed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493815845, "post_id": 43759069, "comment_id": 74562237, "body": "The best way to do this is to put all such constant in separate headers, then edit/generate those headers as needed. Using GCC features to generate pre-processor constants is a bad idea, strive for portability and standard C."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6940468, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea71082f1f1c5a1a44434e5385d0e611?s=128&d=identicon&r=PG&f=1", "display_name": "MasterGL", "link": "https://stackoverflow.com/users/6940468/mastergl"}, "edited": false, "score": 0, "creation_date": 1493813782, "post_id": 43759357, "comment_id": 74560666, "body": "Thank you! I would like to know more about -DSIZE for GCC. What would you recommend that I search on Google to find out more about this?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 111, "user_id": 6940468, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea71082f1f1c5a1a44434e5385d0e611?s=128&d=identicon&r=PG&f=1", "display_name": "MasterGL", "link": "https://stackoverflow.com/users/6940468/mastergl"}, "edited": false, "score": 0, "creation_date": 1493814265, "post_id": 43759357, "comment_id": 74561015, "body": "@MasterGL It&#39;s in the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#Preprocessor-Options\" rel=\"nofollow noreferrer\">&quot;Controlling the Preprocessor&quot;</a> section. I Googled &quot;gcc command line&quot;, then used the index on that page."}, {"owner": {"reputation": 111, "user_id": 6940468, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea71082f1f1c5a1a44434e5385d0e611?s=128&d=identicon&r=PG&f=1", "display_name": "MasterGL", "link": "https://stackoverflow.com/users/6940468/mastergl"}, "edited": false, "score": 0, "creation_date": 1493814715, "post_id": 43759357, "comment_id": 74561371, "body": "Thank you. I really appreciate every one of your help :)"}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 2, "last_activity_date": 1493812530, "creation_date": 1493812530, "answer_id": 43759357, "question_id": 43759069, "link": "https://stackoverflow.com/questions/43759069/how-do-i-redefine-a-defined-value/43759357#43759357", "title": "How do I redefine a #defined value?", "body": "<p>If you pass <code>-DSIZE=30</code> to GCC when compiling the program, then <code>SIZE</code> will be defined as <code>30</code> right from the start. Then, since the code shown in the question checks if it's already defined, it won't be defined as <code>10</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 6940468, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ea71082f1f1c5a1a44434e5385d0e611?s=128&d=identicon&r=PG&f=1", "display_name": "MasterGL", "link": "https://stackoverflow.com/users/6940468/mastergl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 43759357, "answer_count": 1, "score": 0, "last_activity_date": 1493812530, "creation_date": 1493811733, "question_id": 43759069, "link": "https://stackoverflow.com/questions/43759069/how-do-i-redefine-a-defined-value", "title": "How do I redefine a #defined value?", "body": "<p>I'm trying to create a bash script that will change the value of the following to the value I input to the command-line:</p>\n\n<pre><code>#ifndef SIZE\n#define SIZE 10\n#endif\n</code></pre>\n\n<p>Is there any way I can change the value of SIZE? </p>\n"}, {"tags": ["c", "linux", "ubuntu", "popen"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493811699, "post_id": 43758977, "comment_id": 74559127, "body": "<code>outputCurrentSize += READ_CHUNK;</code> this increment might be too large."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493811749, "post_id": 43758977, "comment_id": 74559166, "body": "aside: <code>if (!tmpOutputStrArr) {             free(tmpOutputStrArr);</code> : you don&#39;t need that <code>free</code>."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 1, "creation_date": 1493811765, "post_id": 43758977, "comment_id": 74559181, "body": "What are <code>READ_CHUNK</code> and <code>READ_INITIAL_SIZE</code>? You always add the maximum size of a line regardlessof the real size. Maybe you are better off using <code>fread</code> instead of <code>fgets</code> here."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1493811792, "post_id": 43758977, "comment_id": 74559208, "body": "I suggest using <code>const</code> in your function: <code>char *runShellReadCmd(const char *command)</code>."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493811801, "post_id": 43758977, "comment_id": 74559215, "body": "can you <code>printf</code> the command before sending it to <code>popen</code>. What is corrupt? the command or the output? if it&#39;s the command, it&#39;s in some code that isn&#39;t here."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1493811842, "post_id": 43758977, "comment_id": 74559255, "body": "READ_CHUNK = 100 and the initial size (READ_INITIAL_SIZE) = 1000."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "reply_to_user": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1493812112, "post_id": 43758977, "comment_id": 74559427, "body": "@pmg, I tried to initialize the command char* as const but the bug still occurs."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493812239, "post_id": 43758977, "comment_id": 74559537, "body": "@Jean-Fran&#231;oisFabre, printf (before popen) prints the command as it should be (/sbin/iwlist wlp2s0 scan), its something inside popen that changes the command and executes it after its changed."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 3, "creation_date": 1493812288, "post_id": 43758977, "comment_id": 74559575, "body": "maybe your command buffer is undersized and overwritten by the subsequent <code>malloc</code> &amp; <code>realloc</code> that you&#39;re using for your output. I doubt very much that <code>popen</code> has such a bug. Show us the code that calls your routine."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493812868, "post_id": 43758977, "comment_id": 74559985, "body": "@Jean-Fran&#231;oisFabre I have edited the question and added the rest of the code."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1493812870, "post_id": 43758977, "comment_id": 74559988, "body": "Try <code>valgrind</code>, it will highlight the issue"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 3, "creation_date": 1493813061, "post_id": 43758977, "comment_id": 74560136, "body": "When you piece together <code>command</code>, your <code>length</code> needs an extra byte for the null terminator. It may be worth considering <code>asprintf</code> instead of repeated <code>strcat</code>s plus handish allocation."}, {"owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "edited": false, "score": 0, "creation_date": 1493814102, "post_id": 43758977, "comment_id": 74560911, "body": "Thank you, that was indeed the problem."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493819132, "post_id": 43758977, "comment_id": 74564933, "body": "Note: you can avoid all this string handling by using getc(). All your chunksizes will become one, and you wont strlen() anymore."}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1493813202, "post_id": 43759557, "comment_id": 74560230, "body": "You mean &quot;string termination&quot;, not &quot;line termination&quot;, right?"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 3, "last_activity_date": 1493813313, "last_edit_date": 1493813313, "creation_date": 1493813077, "answer_id": 43759557, "question_id": 43758977, "link": "https://stackoverflow.com/questions/43758977/c-popen-changes-the-string/43759557#43759557", "title": "C popen() changes the string", "body": "<pre><code>length = strlen(\"/sbin/iwlist \") + strlen(device) + strlen(\" scan\");\ncommand = (char*) calloc(length, sizeof(char));\n</code></pre>\n\n<p>As suspected, your <code>command</code> buffer is too small (<code>length++</code> would be an improvement). You're missing the string termination. So the string termination is overwritten at some point when allocating some more memory in your <code>popen</code> loop and your command \"leaks\" since the null char char isn't where it should be anymore.</p>\n\n<p>the fact that it works on some other machine is just luck. The memory allocation is different. But your code is still incorrect. That's why it's called <em>undefined behaviour</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1493822186, "post_id": 43762166, "comment_id": 74567432, "body": "Doesn&#39;t need <code>used+1</code> for size check. The ternary should use the <code>?</code> as in <code>size = size ? 2*size : 100</code>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1493822852, "post_id": 43762166, "comment_id": 74567980, "body": "Yes, it does. For the final &#39;\\0&#39;, which will <i>always</i> be needed. Note: I updated the order a bit."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1493823369, "post_id": 43762166, "comment_id": 74568375, "body": "On second thought (and after having edited) : you are right. The <code>+1</code> was not needed, one character is added to the buffer for every character read (if you consider EOF to be a character)"}], "tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 0, "last_activity_date": 1493824088, "last_edit_date": 1493824088, "creation_date": 1493819829, "answer_id": 43762166, "question_id": 43758977, "link": "https://stackoverflow.com/questions/43758977/c-popen-changes-the-string/43762166#43762166", "title": "C popen() changes the string", "body": "<p>Note: you can avoid all this string handling by using <code>getc()</code> in stead of <code>fgets()</code> . All your chunksizes will become one, and you wont need <code>strlen()</code> anymore:</p>\n\n<pre><code>char* runShellReadCmd(char* command) {\nFILE *fp;\nsize_t size, used;\nchar *data = NULL;\nint ch;\n\nfp = popen(command, \"r\");\nif (!fp) return NULL;\n\nfor(size=used=0; ;) {\n        if (used &gt;= size) {\n                size = size ? 2*size : 100;\n                data = realloc(data, size); // TODO : check return\n                }\n        ch = getc(fp) ;\n        if (ch == EOF) break;\n        data[used++] = ch;\n    }\ndata[used] = 0;\n\npclose(fp);\n\n// maybe a final resize here:\n// data = realloc(data, used+1);\nreturn data;\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5236053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10153548537934269/picture?type=large", "display_name": "Django Freeman", "link": "https://stackoverflow.com/users/5236053/django-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 43759557, "answer_count": 2, "score": 0, "last_activity_date": 1544382129, "creation_date": 1493811480, "last_edit_date": 1544382129, "question_id": 43758977, "link": "https://stackoverflow.com/questions/43758977/c-popen-changes-the-string", "title": "C popen() changes the string", "body": "<p>I'm using <code>popen()</code> to run a shell command in my Ubuntu machine (16.04 LTS) and for some reason, <code>popen</code> changes the command string and then it runs the changed command string, resulting in an error, because there's no such command (it adds <code>/021/001</code> to the end of the string).</p>\n\n<p>I run the same code on an equivalent machine with a different Ubuntu version (14.04 LTS) and <code>popen</code> doesn't change the command string and runs perfectly.</p>\n\n<p>Any idea why this happens?</p>\n\n<p>The code I'm running:</p>\n\n<pre><code>char* runShellReadCmd(char* command) {\nFILE *fp;\nint outputCurrentSize = 0, outputArrSize = READ_INITIAL_SIZE;\nchar readChunk[READ_CHUNK], *tmpOutputStrArr = NULL, *data = NULL;\nfp = popen(command, \"r\");\ndata = (char*)calloc(READ_INITIAL_SIZE, sizeof(char));\nwhile (fgets(readChunk, READ_CHUNK, fp) != NULL)\n{\n    //  If string size equals to the array size, need to expand the array.\n    if (outputCurrentSize &gt;= outputArrSize) {\n        outputArrSize *= 2;\n        //  Re allocate array, save it in a temporary array.\n        tmpOutputStrArr = realloc(data, outputArrSize * sizeof(char));\n        //  If re-allocationg failed, stop and return NULL to indicate that a problem has occured.\n        if (!tmpOutputStrArr) {\n            free(tmpOutputStrArr);\n            free(data);\n            return NULL;\n        }\n        data = tmpOutputStrArr;\n    }\n    //  Concatenate the recently read 100 chars to the data arr.\n    strcat(data, readChunk);\n    //  Save current string length.\n    outputCurrentSize += READ_CHUNK;\n}\npclose(fp);\nreturn data;\n}\n</code></pre>\n\n<p>The command:</p>\n\n<pre><code>\"/sbin/iwlist wlp2s0 scan\"\n</code></pre>\n\n<p>funcs.c:</p>\n\n<pre><code>//  Runs a shell command using given command string and returns the output.\nchar* runShellReadCmd(char* command) {\nFILE *fp;\nint outputCurrentSize = 0, outputArrSize = READ_INITIAL_SIZE, elementsRead = 0;\nchar readChunk[READ_CHUNK], *tmpOutputStrArr = NULL, *data = NULL;\nprintf(\"%s\", command);\nfflush(stdout);\nfp = popen(command, \"r\");\ndata = (char*)calloc(READ_INITIAL_SIZE, sizeof(char));\n// while (fgets(readChunk, READ_CHUNK, fp) != NULL)\nwhile (elementsRead = fread(readChunk, sizeof(char), READ_CHUNK, fp) != READ_CHUNK)\n{\n    //  If string size equals to the array size, need to expand the array.\n    if (outputCurrentSize &gt;= outputArrSize) {\n        outputArrSize *= 2;\n        //  Re allocate array, save it in a temporary array.\n        tmpOutputStrArr = realloc(data, outputArrSize * sizeof(char));\n        //  If re-allocationg failed, stop and return NULL to indicate that a problem has occured.\n        if (!tmpOutputStrArr) {\n            free(tmpOutputStrArr);\n            free(data);\n            return NULL;\n        }\n        data = tmpOutputStrArr;\n    }\n    //  Concatenate the recently read 100 chars to the data arr.\n    strcat(data, readChunk);\n    //  Save current string length.\n    outputCurrentSize += READ_CHUNK;\n}\npclose(fp);\nreturn data;\n}\n\n//  Returns the number of times the given substring appears in the given string.\nint getNumOfMatches(char* string, char* substring) {\nint count = 0;\nchar* temp = string;\nwhile ((temp = strstr(temp, substring))) {\n    count++;\n    temp++;\n}\nreturn count;\n}\n\n//  Returns the first wlan device name thats available in the system.\nchar* getWlanDeviceName() {\nint size = 0, i;\nchar* device, *tmpPointer, *deviceNameStartPointer;\nchar* str = runShellReadCmd(\"/sbin/ifconfig\");\ndeviceNameStartPointer = strstr(str, WIFI_DEVICE_PREFIX);\ntmpPointer = deviceNameStartPointer;\nwhile (*tmpPointer != ' ') {\n    size++;\n    tmpPointer++;\n}\ndevice = (char*)calloc(size, sizeof(char));\ntmpPointer = deviceNameStartPointer;\nfor(i = 0; i &lt; size; i++) {\n    device[i] = *tmpPointer;\n    tmpPointer++;\n}\nfree(str);\nreturn device;\n}\n</code></pre>\n\n<p>test_funcs.c:</p>\n\n<pre><code>//  Tests whether the wifi device can find wifi networks (at least 1).\nint testWifi() {\nint testOk = 0, length;\nchar* command, *output, *device = getWlanDeviceName();\nlength = strlen(\"/sbin/iwlist \") + strlen(device) + strlen(\" scan\");\ncommand = (char*) calloc(length, sizeof(char));\nstrncpy(command, \"/sbin/iwlist \", strlen(\"/sbin/iwlist \"));\n//strcat(command, \"/sbin/iwlist \");\nstrcat(command, device);\nstrcat(command, \" scan\");\noutput = runShellReadCmd(command);\nprintf(\"%s\\n\", output);\ntestOk = getNumOfMatches(output, WIFI_NETWORK_START_STR) &gt; 0;\n//printf(\"%d\", getNumOfMatches(WIFI_NETWORK_START_STR, output));\nfree(device);\nreturn testOk;\n}\n</code></pre>\n"}, {"tags": ["python", "c", "python-c-api"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1493811404, "post_id": 43758805, "comment_id": 74558908, "body": "You mean you want to know how to pass in <code>params</code> as separate arguments from C code, like <code>*</code> would?  Does <a href=\"//stackoverflow.com/q/205529\">Passing variable number of arguments around</a> apply here?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1493822417, "post_id": 43758805, "comment_id": 74567621, "body": "<a href=\"https://docs.python.org/3/c-api/object.html#c.PyObject_Call\" rel=\"nofollow noreferrer\"><code>PyObject_Call</code></a>?"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1494169066, "post_id": 43758805, "comment_id": 74702616, "body": "Please clarify how you want to call the function. Do you just want the equivalent of <code>myfunc(*params)</code>?"}], "owner": {"reputation": 9, "user_id": 7957154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb0bb646fd0b3865dbc2d1c29653ab2?s=128&d=identicon&r=PG&f=1", "display_name": "Perfect99", "link": "https://stackoverflow.com/users/7957154/perfect99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493811029, "creation_date": 1493810974, "last_edit_date": 1493811029, "question_id": 43758805, "link": "https://stackoverflow.com/questions/43758805/c-python-arbitrary-argument", "title": "C Python arbitrary argument", "body": "<p>in plain python (2.7) one can write variadic function like so:</p>\n\n<pre><code>&gt;&gt; def myfunc(a, b, *args):\n    print a,b,args\n\n&gt;&gt; params = (1,2,\"3\", \"abc\")\n\n&gt;&gt; myfunc(*params)\n# Will print \"1 2 ('3', 'abc')\"\n\n&gt;&gt; myfunc(params)\n# Will fail with 'myfunc() takes at least 2 arguments (1 given)'\n</code></pre>\n\n<p>When writing a Python extension in C, I can pass a tuple of PyObjects (like params in the example) easily, but how can I pass params with the <code>*</code>-operator with function such as <code>PyObject_CallMethodObjArgs</code> and the likes.</p>\n"}, {"tags": ["c", "cython"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1493810628, "post_id": 43758404, "comment_id": 74558352, "body": "Cython doesn&#39;t mangle the names of anything specified in a <code>cdef extern from ...</code> block - it just includes the header file. Your problem is caused by something else."}, {"owner": {"reputation": 890, "user_id": 5501815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0b9c93b5d747f3fe91ba62c21c02fa?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiaan", "link": "https://stackoverflow.com/users/5501815/sebastiaan"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1493811144, "post_id": 43758404, "comment_id": 74558704, "body": "In that case, can you comment on why the thrown error references the line in <code>jdmath.h</code> that defines <code>c_pow</code>, stating that <code>_Py_c_pow</code> is redefined there? -EDIT- I found a macro in <code>complexobject.h</code> that does the redefinition. The problem persists though."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1493813429, "post_id": 43758404, "comment_id": 74560398, "body": "Ah yes - that makes more sense... (Dunno how to fix it immediately though)"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1493813815, "post_id": 43758404, "comment_id": 74560701, "body": "One thing to know is that this is specifically a Python 2 bug. Python 3 looks to just define <code>_Py_c_pow</code>"}, {"owner": {"reputation": 890, "user_id": 5501815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0b9c93b5d747f3fe91ba62c21c02fa?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiaan", "link": "https://stackoverflow.com/users/5501815/sebastiaan"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1493814573, "post_id": 43758404, "comment_id": 74561264, "body": "Thank you for verifying that, I will definitely (once more) nudge management towards an upgrade."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1493814652, "post_id": 43758404, "comment_id": 74561317, "body": "I think I have an (OKish) solution... I&#39;m just writing it now"}], "answers": [{"tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 1, "last_activity_date": 1493815187, "creation_date": 1493815187, "answer_id": 43760306, "question_id": 43758404, "link": "https://stackoverflow.com/questions/43758404/wrap-a-c-library-in-cython-which-includes-a-python-internal-c-symbol/43760306#43760306", "title": "wrap a c library in cython which includes a python internal c symbol", "body": "<p>As you've found, this is caused by <a href=\"https://github.com/python/cpython/blob/2.7/Include/complexobject.h#L21\" rel=\"nofollow noreferrer\">macros defined by Python 2</a> causing the renaming. They aren't defined in Python 3, so one option is to upgrade.</p>\n\n<p>Assuming you don't want to upgrade (which is probably reasonable...) then it's trickier. The easiest thing to try is just to add</p>\n\n<pre><code>#undef c_pow\n#undef c_abs\n</code></pre>\n\n<p>to the top of jdmath.h. (Alternatively, if you can't modify jdmath.h then create a new header, that undefines the macros and includes jdmath.h then use that new header from Cython).</p>\n\n<p>Hopefully this will work fine. It's possible however that this will break something in Cython (you'll get an obvious compile error) if it attempts to use the Python defined <code>c_pow</code> and <code>c_abs</code> itself. In this case you want to create a header that creates functions with new names:</p>\n\n<pre><code>// undefine so we can access c_pow and c_abs\n#undef c_pow\n#undef c_abs\n\n#include \"dev/jdmath.h\"\n\ninline void not_c_pow(/* fill in args yourself*/) { c_pow(/*args*/); }\ninline void not_c_abs(/* fill in args yourself*/) { c_abs(/*args*/); }\n\n// redefine to original state\n#define c_pow _Py_c_pow\n#define c_abs _Py_c_abs\n</code></pre>\n\n<p>In Cython you'd use <code>not_c_pow</code> and <code>not_c_abs</code> instead and it should work.</p>\n"}], "owner": {"reputation": 890, "user_id": 5501815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0b9c93b5d747f3fe91ba62c21c02fa?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiaan", "link": "https://stackoverflow.com/users/5501815/sebastiaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 43760306, "answer_count": 1, "score": 1, "last_activity_date": 1493815187, "creation_date": 1493809934, "last_edit_date": 1493811760, "question_id": 43758404, "link": "https://stackoverflow.com/questions/43758404/wrap-a-c-library-in-cython-which-includes-a-python-internal-c-symbol", "title": "wrap a c library in cython which includes a python internal c symbol", "body": "<p>So I'm working on an interface between Ox and Python. The issue is this: Ox defines a function <code>c_pow</code>, which Cython 'mangles' to <code>_Py_c_pow</code>. Unfortunately this function is <a href=\"https://docs.python.org/2/c-api/complex.html#c.Py_complex\" rel=\"nofollow noreferrer\">allready defined</a>. Is there a way to prevent a naming conflict in this situation? Can I specify my own prefix for example?</p>\n\n<pre><code>#\"jdmath.h\"\n...\nvoid   JDCALL c_pow(double xr, double xi, double a, double *yr, double *yi);\n...\n\n#\"oxcy.pxd\"\ncdef extern from r'dev\\jdmath.h':\n    pass\n</code></pre>\n\n<p>Compiler output:</p>\n\n<pre><code>PS D:\\Git\\OxPy\\oxcy&gt; python setup.py build_ext --inplace\nrunning build_ext\ncythoning oxcy.pyx to oxcy.c\nbuilding 'oxcy' extension\n    ~\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\amd64\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG \"-IC:\\Program Files (x86)\\OxMetrics7\\ox\\bin\" \"-IC:\\Program Files (x86)\\OxMetrics7\\ox\\dev\\lib64\" \"-IC:\\Program Files (x86)\\OxMetrics7\\ox\\dev\" -IC:\\Anaconda2\\include -IC:\\Anaconda2\\PC /Tcoxcy.c /Fobuild\\temp.win-amd64-2.7\\Release\\oxcy.obj\noxcy.c\nd:\\git\\oxpy\\oxcy\\dev\\jdmath.h(111) : warning C4031: second formal parameter list longer than the first list\nd:\\git\\oxpy\\oxcy\\dev\\jdmath.h(111) : warning C4028: formal parameter 1 different from declaration\nd:\\git\\oxpy\\oxcy\\dev\\jdmath.h(111) : warning C4273: '_Py_c_abs' : inconsistent dll linkage\n    c:\\anaconda2\\include\\complexobject.h(30) : see previous definition of '_Py_c_abs'\nd:\\git\\oxpy\\oxcy\\dev\\jdmath.h(117) : warning C4031: second formal parameter list longer than the first list\nd:\\git\\oxpy\\oxcy\\dev\\jdmath.h(117) : warning C4028: formal parameter 1 different from declaration\nd:\\git\\oxpy\\oxcy\\dev\\jdmath.h(117) : warning C4028: formal parameter 2 different from declaration\nd:\\git\\oxpy\\oxcy\\dev\\jdmath.h(117) : error C2371: '_Py_c_pow' : redefinition; different basic types\n    c:\\anaconda2\\include\\complexobject.h(29) : see declaration of '_Py_c_pow'\nerror: command '~\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\amd64\\\\cl.exe' failed with exit status 2\n</code></pre>\n\n<h2>Edit</h2>\n\n<p>It turns out that Anaconda defines a macro: <code>#define c_pow _Py_c_pow</code>. So, although Cython is not to blame for the mangling, compilation still fails on a name collision caused by the macro in a Python C header and a header from Ox. How can I circumvent this issue?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1098, "user_id": 3514976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5LkM.png?s=128&g=1", "display_name": "nonzaprej", "link": "https://stackoverflow.com/users/3514976/nonzaprej"}, "edited": false, "score": 1, "creation_date": 1493809039, "post_id": 43758006, "comment_id": 74557317, "body": "See the answer to this question for the problem with <code>^</code>: <a href=\"http://stackoverflow.com/questions/4843304/why-is-my-power-operator-not-working\" title=\"why is my power operator not working\">stackoverflow.com/questions/4843304/&hellip;</a> and for the problem with scanf, try changing it to <code>scanf_s</code> as suggested."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493809061, "post_id": 43758006, "comment_id": 74557329, "body": "<code>^</code> is XOR operater. So <code>a^2</code> replace with <code>a*a</code>."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1493809076, "post_id": 43758006, "comment_id": 74557345, "body": "<code>^</code> is the <i>exclusive-OR</i> operator. There is no exponentiation operator in C."}, {"owner": {"reputation": 109, "user_id": 7568998, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fa72fd770fc1d55119658bf56fdb9bd1?s=128&d=identicon&r=PG&f=1", "display_name": "Mapet", "link": "https://stackoverflow.com/users/7568998/mapet"}, "edited": false, "score": 0, "creation_date": 1493809153, "post_id": 43758006, "comment_id": 74557409, "body": "i wanted to make an exponentiary operator.is there any other solution"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1493809182, "post_id": 43758006, "comment_id": 74557426, "body": "There is a <code>pow</code> function."}, {"owner": {"reputation": 109, "user_id": 7568998, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fa72fd770fc1d55119658bf56fdb9bd1?s=128&d=identicon&r=PG&f=1", "display_name": "Mapet", "link": "https://stackoverflow.com/users/7568998/mapet"}, "edited": false, "score": 0, "creation_date": 1493809302, "post_id": 43758006, "comment_id": 74557491, "body": "thanks,i read it now."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1493810927, "post_id": 43758006, "comment_id": 74558559, "body": "If there was a way to see what the <code>^</code> operator is for ... There really should be something to search the internet for such things. Or maybe a book explaining the C language."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1493811179, "post_id": 43758006, "comment_id": 74558744, "body": "Wht did you learn about exponentation at school? Maybe there is a way to rewrite <code>a ** 2</code> to <code>a * a</code>? (<code>**</code> is <b>not</b> a C operator!)"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1493811860, "post_id": 43758006, "comment_id": 74559275, "body": "Indentation................"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1493823212, "post_id": 43758006, "comment_id": 74568268, "body": "@Ian - <code>pow()</code> is a poor choice for integer powers, and a very poor choice for squaring integers (it is slower, and introduces much more error)."}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493811877, "post_id": 43758429, "comment_id": 74559284, "body": "Indentation..............."}], "tags": [], "owner": {"reputation": 26, "user_id": 7103575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd9152e18f91487f875738708d8b771?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Nabil El-Gawahergy", "link": "https://stackoverflow.com/users/7103575/ahmed-nabil-el-gawahergy"}, "is_accepted": false, "score": -1, "last_activity_date": 1493809996, "creation_date": 1493809996, "answer_id": 43758429, "question_id": 43758006, "link": "https://stackoverflow.com/questions/43758006/c-issue-with-first-calculation-program/43758429#43758429", "title": "C issue with first calculation program", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n\n void main()\n {\nint a, h;\ndouble interres;\ndouble base;\nprintf(\"Input  a: \");\nscanf(\"%d\", &amp;a);\nprintf(\"Input  height h: \");\nscanf(\"%d\", &amp;h);\nbase =(double)((a*a) * sqrt(3))/ 4;//line 13\ninterres =(double) (a *a)  * sqrt(3);//line 14\n\nprintf(\"(%d^2*sqrt(3))/4=(%d^2*%f)/4=(%f*%f)/4=%f/4=%f cm\",a,a,sqrt(3),a*a,sqrt(3),interres,base);\n\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 0, "last_activity_date": 1493823868, "creation_date": 1493823868, "answer_id": 43763774, "question_id": 43758006, "link": "https://stackoverflow.com/questions/43758006/c-issue-with-first-calculation-program/43763774#43763774", "title": "C issue with first calculation program", "body": "<p>Several issues:</p>\n\n<p>In C and C++, <code>main</code> returns <code>int</code>, not <code>void</code>.  Unless your compiler documentation explicitly lists <code>void main()</code> as a valid signature, using it invokes undefined behavior.  <code>main</code> should be defined as </p>\n\n<pre><code>int main( void )\n</code></pre>\n\n<p>if you don't take any command line arguments, or</p>\n\n<pre><code>int main( int argc, char **argv )\n</code></pre>\n\n<p>if you do.</p>\n\n<p>Secondly, the <code>^</code> operator is the bitwise XOR operator, not an exponentiation operator; neither C nor C++ have an exponentiation operator.  You must either use the <code>pow</code> function in the standard library or roll your own.  </p>\n\n<p>Finally, <code>scanf</code> <em>can</em> be unsafe when reading input with either the <code>%s</code> or <code>%[</code> conversion specifiers, which you aren't doing.  Personally, I'd disable the warning as described in the error message.  </p>\n"}], "owner": {"reputation": 109, "user_id": 7568998, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/fa72fd770fc1d55119658bf56fdb9bd1?s=128&d=identicon&r=PG&f=1", "display_name": "Mapet", "link": "https://stackoverflow.com/users/7568998/mapet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "closed_date": 1494901492, "answer_count": 2, "score": -3, "last_activity_date": 1493833509, "creation_date": 1493808840, "last_edit_date": 1493809063, "question_id": 43758006, "link": "https://stackoverflow.com/questions/43758006/c-issue-with-first-calculation-program", "closed_reason": "Duplicate", "title": "C issue with first calculation program", "body": "<p>I am transfering from Java to C and C++ and i am having a problem with easiest tasks like this so please help me if you can:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;math.h&gt;\n\n void main()\n {\nint a, h;\ndouble interres;\ndouble base;\nprintf(\"Input  a: \");\nscanf(\"%d\", &amp;a);\nprintf(\"Input  height h: \");\nscanf(\"%d\", &amp;h);\nbase =(a^2 * sqrt(3))/ 4;//line 13\ninterres = a ^ 2 * sqrt(3);//line 14\n\nprintf(\"(%d^2*sqrt(3))/4=(%d^2*%f)/4=(%f*%f)/4=%f/4=%f cm\",a,a,sqrt(3),a^2,sqrt(3),interres,base);\n\n }\n</code></pre>\n\n<p><strong>And I get constantly errors:</strong></p>\n\n<pre><code>error C2297: '^': illegal, right operand has type 'double' line 13\nerror C2297: '^': illegal, right operand has type 'double' line 14\n warning C4996: 'scanf': This function or variable may be unsafe. Consider using scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS.  warning C4996: 'scanf': This function or variable may be unsafe. Consider using scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.\n</code></pre>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1493806390, "post_id": 43757090, "comment_id": 74555535, "body": "consider <code>double *y  = malloc(sizeof(*y));</code> with <code>double *retVal;</code> ...?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1493806447, "post_id": 43757090, "comment_id": 74555580, "body": "where&#39;s the code that doesn&#39;t work? we can&#39;t tell you what is wrong if we can&#39;t see the problems"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1493806497, "post_id": 43757090, "comment_id": 74555611, "body": "It&#39;s much easier to make the return value a parameter, i.e. use the thread argument (<code>arg</code>) to hold the argument but let the thread overwrite it with the result."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1493807343, "post_id": 43757090, "comment_id": 74556167, "body": "Casting the function is UB. Don&#39;t do that. Use a wrapper function."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1493811146, "post_id": 43757090, "comment_id": 74558706, "body": "Your title doesn&#39;t describe the question to anybody. Please improve it."}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 4, "last_activity_date": 1493812099, "last_edit_date": 1495541399, "creation_date": 1493807146, "answer_id": 43757436, "question_id": 43757090, "link": "https://stackoverflow.com/questions/43757090/c-threads-return-value/43757436#43757436", "title": "C/Threads, return value", "body": "<p>Your change is wrong</p>\n\n<pre><code>printf(\"Sqrt of our argument: %d\\n\", * retVal);\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>printf(\"Sqrt of our argument: %f\\n\", * retVal);\n</code></pre>\n\n<p>I guess your compiler is telling you something like</p>\n\n<pre><code>warning: format \u2018%d\u2019 expects argument of type \u2018int\u2019, but argument 2 has type \u2018double *\u2019 [-Wformat=]\n</code></pre>\n\n<p>BTW your implementation invokes undefined behavior casting function: take a look at <a href=\"https://stackoverflow.com/a/559671/3436922\">this  SO answer</a></p>\n\n<p>As already suggested you can use <code>arg</code> to pass the value back to <code>main</code> instead of return it from task function.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;pthread.h&gt;\n\nvoid* function(void* x)\n{\n    double *y = x;\n\n    *y = sqrt(*y);\n\n    return x;\n}\n\nint main(void)\n{\n    pthread_t thread;\n    double arg = 123;\n    void *retVal = NULL;\n\n    pthread_create(&amp;thread, NULL, function, &amp;arg);\n\n    pthread_join(thread, &amp;retVal);\n    printf(\"Sqrt of our argument using arg   : %f\\n\", arg);\n\n    if (retVal != NULL)\n    {\n        printf(\"Sqrt of our argument using retVal: %f\\n\", *((double *)retVal));\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7956794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6c90429e0876c252d681f69ddccae5?s=128&d=identicon&r=PG&f=1", "display_name": "MaciekB", "link": "https://stackoverflow.com/users/7956794/maciekb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2260, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493812099, "creation_date": 1493806199, "last_edit_date": 1493810808, "question_id": 43757090, "link": "https://stackoverflow.com/questions/43757090/c-threads-return-value", "title": "C/Threads, return value", "body": "<p>I created a thread that should return a sqrt of integer sent to it, it works fine while returning int value, but when i want to return double or float value it returns some crazy numbers, how to change that?</p>\n\n<p>Here's the code that works fine:</p>\n\n<pre><code>int* function(int* x) {\n\nprintf(\"My argument: %d \\n\", *x);\nint *y = malloc(sizeof(int));\n*y=sqrt(*x);\nreturn y;\n}\n\nint main(int argc, char* argv[])\n{\npthread_t thread;\nint arg = 123;\nint *retVal;\n\n\npthread_create(&amp;thread, NULL, (void * ( * ) (void *))function, &amp;arg);\n\npthread_join(thread, (void **) &amp;retVal);\nprintf(\"Sqrt of our argument: %d\\n\", * retVal);\nfree(retVal);\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>But when I change it into:</p>\n\n<pre><code>double* function(int* x) {\n\n\ndouble *y = malloc(sizeof(double));\n*y=sqrt(*x);\nprintf(\"My argument: %d \\n\", *x);\nreturn y;\n}\n\nint main(int argc, char* argv[])\n{\npthread_t thread;\nint arg = 123;\ndouble *retVal;\n\n\npthread_create(&amp;thread, NULL, (void * ( * ) (void *))function, &amp;arg);\n\npthread_join(thread, (void **) &amp;retVal);\nprintf(\"Sqrt of our argument: %d\\n\", * retVal);\nfree(retVal);\nreturn 0;\n}\n</code></pre>\n\n<p>It returns 1076244058</p>\n"}, {"tags": ["c", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1493805956, "post_id": 43756840, "comment_id": 74555201, "body": "Can you not just queue the out-of-order replies until the desired sequence is available?  I can&#39;t see how being able to &#39;peek&#39; at the comms stack buffer would help any.  Just untangle the replies in user space."}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1493805975, "post_id": 43756840, "comment_id": 74555219, "body": "Sounds like you want the API to do your work for you. You can&#39;t change the order that things are received. I&#39;d advise you buffer data received and process it as required."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1493806011, "post_id": 43756840, "comment_id": 74555244, "body": "I would save the extra data in the application somewhere, rather than keep in the kernel&#39;s buffer. The socket buffer is limited... keeping the data unread might block the socket at some point."}, {"owner": {"reputation": 35543, "user_id": 149530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b6c8b04130af49735de5be666d67c00?s=128&d=identicon&r=PG", "display_name": "Michael Foukarakis", "link": "https://stackoverflow.com/users/149530/michael-foukarakis"}, "edited": false, "score": 0, "creation_date": 1493807646, "post_id": 43756840, "comment_id": 74556376, "body": "TCP is a streaming protocol. Either process the requests in-order, or if you want to multiplex them over TCP in an arbitrary order, use sequence numbers."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1493807822, "post_id": 43756840, "comment_id": 74556513, "body": "Or better still, if you really want parallel processing for the same client, which doesn&#39;t seem likely, use separate connections."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493811133, "post_id": 43756840, "comment_id": 74558695, "body": "^^^ that&#39;s what I&#39;d do, (unless the server denies it)."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1493812619, "post_id": 43756840, "comment_id": 74559802, "body": "If you could leave B&#39; in the socket buffer then it wouldn&#39;t help you, because the first thing in the socket buffer would be B&#39;, so you&#39;d never get around to reading A&#39; out of the socket buffer because you&#39;d have to read B&#39; first."}], "answers": [{"comments": [{"owner": {"reputation": 334, "user_id": 7670016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e748c5f3047fd4ec76e56626d00c5017?s=128&d=identicon&r=PG&f=1", "display_name": "code_worker", "link": "https://stackoverflow.com/users/7670016/code-worker"}, "edited": false, "score": 0, "creation_date": 1493861964, "post_id": 43757073, "comment_id": 74586169, "body": "why impossible? In the situation like: client create 3 threads to send msg to server through the same file descriptor"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 334, "user_id": 7670016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e748c5f3047fd4ec76e56626d00c5017?s=128&d=identicon&r=PG&f=1", "display_name": "code_worker", "link": "https://stackoverflow.com/users/7670016/code-worker"}, "edited": false, "score": 0, "creation_date": 1493894152, "post_id": 43757073, "comment_id": 74601242, "body": "It is impossible for TCP to deliver data out of order. The conditions I mentioned are exactly those in your comment. Is there something hard to understand about that?"}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1493806156, "creation_date": 1493806156, "answer_id": 43757073, "question_id": 43756840, "link": "https://stackoverflow.com/questions/43756840/can-i-just-peek-data-of-tcp-socket-buffer-to-check-the-data-is-what-i-want-in-li/43757073#43757073", "title": "Can I just peek data of tcp socket buffer to check the data is what I want in linux", "body": "<blockquote>\n  <p>I expect A got A' and B got B', but now A got B' because server send requests through the same file descriptor.</p>\n</blockquote>\n\n<p>Not possible in TCP, unless the server is handling multiple requests on the same connection in separate threads, in which case the simple answer is: don't.</p>\n"}], "owner": {"reputation": 334, "user_id": 7670016, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e748c5f3047fd4ec76e56626d00c5017?s=128&d=identicon&r=PG&f=1", "display_name": "code_worker", "link": "https://stackoverflow.com/users/7670016/code-worker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493806156, "creation_date": 1493805527, "question_id": 43756840, "link": "https://stackoverflow.com/questions/43756840/can-i-just-peek-data-of-tcp-socket-buffer-to-check-the-data-is-what-i-want-in-li", "title": "Can I just peek data of tcp socket buffer to check the data is what I want in linux", "body": "<p>I write a program to send 3 requests(lets say A, B, C) to the same server <strong>through the same file descriptor</strong> in linux, and then I use <code>recv</code> to wait for the msg(lets say A', B', C') back.</p>\n\n<p>I receive msg back after server send msg back to me after 3 secs, and the server will send A', B', C' back to me not in order. </p>\n\n<p>I expect <strong>A got A'</strong> and <strong>B got B'</strong>, but now A got B' because server send requests through the same file descriptor.</p>\n\n<p>Can A keep waiting when A got B' and don't remove B' from socket buffre by <code>recv</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1493804884, "post_id": 43756437, "comment_id": 74554507, "body": "It is unclear for me as stated at the moment. Could you elaborate a bit, adding <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>?"}, {"owner": {"reputation": 77, "user_id": 4888007, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a5a94ff44502e1c48c906d89e9d1569?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander L&#246;fqvist", "link": "https://stackoverflow.com/users/4888007/alexander-l%c3%b6fqvist"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1493897635, "post_id": 43756437, "comment_id": 74603617, "body": "I can&#39;t add a MCVE as it is classified."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 4888007, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a5a94ff44502e1c48c906d89e9d1569?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander L&#246;fqvist", "link": "https://stackoverflow.com/users/4888007/alexander-l%c3%b6fqvist"}, "edited": false, "score": 0, "creation_date": 1493897714, "post_id": 43756991, "comment_id": 74603665, "body": "My first approach was to write the flag into an extern memory, but i found it slow and ugly, this approach was faster and more suitable. Thx!"}], "tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": true, "score": 1, "last_activity_date": 1493805925, "creation_date": 1493805925, "answer_id": 43756991, "question_id": 43756437, "link": "https://stackoverflow.com/questions/43756437/make-code-run-once-with-multi-processors/43756991#43756991", "title": "Make code run once with multi processors", "body": "<p>You have a race condition. I imagine that the other threads that you kick off hit the <code>if</code> statement before your global variable is set. You need to protect the lock with a mutex. In pseudo code this would be something like</p>\n\n<pre><code>if (dsp_id == 0) {\n    get mutex lock\n    if (!alreadyRun)\n    {\n        //code run only once\n        //irq start all other dsps including dsp_id 0\n        set alreadyRun to true\n    }\n    release mutex lock\n} else {\n    //code run multiple times\n}\n</code></pre>\n\n<p>where <code>alreadyRun</code> is your boolean variable. You cannot, by the way, just write <code>alreadyRun = true</code> because there is no guarantee that other processors will see the change if the cache of the processor setting it has not been flushed back to main memory. Your threading library will have appropriate functions to do the mutex locking and safely set alreadyRun. For example, C11 defines atomic types and operations in <code>stdatomic.h</code> for your flag and mutex functions in <code>threads.h</code></p>\n"}], "owner": {"reputation": 77, "user_id": 4888007, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7a5a94ff44502e1c48c906d89e9d1569?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander L&#246;fqvist", "link": "https://stackoverflow.com/users/4888007/alexander-l%c3%b6fqvist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1493812377, "accepted_answer_id": 43756991, "answer_count": 1, "score": 0, "last_activity_date": 1493805925, "creation_date": 1493804437, "question_id": 43756437, "link": "https://stackoverflow.com/questions/43756437/make-code-run-once-with-multi-processors", "closed_reason": "Needs details or clarity", "title": "Make code run once with multi processors", "body": "<p>pseudo code for what I want to accomplish:</p>\n\n<pre><code>//gets current running digital singal processor\nint dsp_id = get_dsp_id();\nif (dsp_id == 0) {\n //code run only once\n //irq start all other dsps including dsp_id 0\n} else {\n   //code run multiple times\n}\n</code></pre>\n\n<p>problem is when i send start irq to all dsps including id 0 i get in the if statetment over and over, i tried to flag it with a global static bool but that did not work.</p>\n"}, {"tags": ["c", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1493804789, "post_id": 43756324, "comment_id": 74554414, "body": "This question belongs rather here: <a href=\"https://codereview.stackexchange.com\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 2, "creation_date": 1493804865, "post_id": 43756324, "comment_id": 74554484, "body": "sort ar[] array as well."}, {"owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "edited": false, "score": 0, "creation_date": 1493805559, "post_id": 43756324, "comment_id": 74554952, "body": "Did it but still not fast enough"}, {"owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1493805630, "post_id": 43756324, "comment_id": 74554992, "body": "@MichaelWalz do i have to delete it and ask it on codereview or can it be just moved?"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1493806148, "post_id": 43756324, "comment_id": 74555346, "body": "@Timotei: Just sorting isn&#39;t enough, you must make use of the fact that the array is sorted. You can skip most of your inner loop by starting from where you left off before and then finding the next item in the sorted second array for which the product with the current item from the first falls below your threshold. You will traverse each array just once, but the second array will be traversed backwards."}, {"owner": {"reputation": 1786, "user_id": 6028039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Kxv.jpg?s=128&g=1", "display_name": "SHAH MD IMRAN HOSSAIN", "link": "https://stackoverflow.com/users/6028039/shah-md-imran-hossain"}, "edited": false, "score": 0, "creation_date": 1493808220, "post_id": 43756324, "comment_id": 74556775, "body": "what sorting algorithm u used to sort?"}, {"owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "reply_to_user": {"reputation": 1786, "user_id": 6028039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Kxv.jpg?s=128&g=1", "display_name": "SHAH MD IMRAN HOSSAIN", "link": "https://stackoverflow.com/users/6028039/shah-md-imran-hossain"}, "edited": false, "score": 0, "creation_date": 1493832491, "post_id": 43756324, "comment_id": 74574247, "body": "@ImranHossain I do not remember how the name of the algorithm I used but the code is in the question."}], "answers": [{"comments": [{"owner": {"reputation": 7290, "user_id": 4785110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bae5c00f27770d807c943268438bb6?s=128&d=identicon&r=PG&f=1", "display_name": "maraca", "link": "https://stackoverflow.com/users/4785110/maraca"}, "edited": false, "score": 1, "creation_date": 1493817234, "post_id": 43759167, "comment_id": 74563345, "body": "You can skip step 3 and keep the same complexity. Just start walking from top right, go to the left until the product becomes smaller, then go one down and repeat while summing up the distances to the left edge."}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "reply_to_user": {"reputation": 7290, "user_id": 4785110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1bae5c00f27770d807c943268438bb6?s=128&d=identicon&r=PG&f=1", "display_name": "maraca", "link": "https://stackoverflow.com/users/4785110/maraca"}, "edited": false, "score": 0, "creation_date": 1493818664, "post_id": 43759167, "comment_id": 74564522, "body": "@maraca Yes, it was the first variant I wrote, then I just decided to show easy  way to start."}, {"owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "edited": false, "score": 0, "creation_date": 1493872640, "post_id": 43759167, "comment_id": 74588872, "body": "@MBo I think my code is faster because it stops when a value bigger than my &#39;p&#39; is found. I mean it calculates only &quot;asnwer + 1&quot; products."}, {"owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "edited": false, "score": 0, "creation_date": 1493875521, "post_id": 43759167, "comment_id": 74589782, "body": "No, you are wrong. At first, you are using quadratic sorting method. Second - you algorithm checks up to M*N results, while counting problem does not require to find or output them all - just find a number."}], "tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": true, "score": 2, "last_activity_date": 1493812285, "last_edit_date": 1495542868, "creation_date": 1493811970, "answer_id": 43759167, "question_id": 43756324, "link": "https://stackoverflow.com/questions/43756324/need-a-faster-algorithm-to-count-if-a-product-is-smaller-than-a-given-number/43759167#43759167", "title": "Need a faster algorithm to count if a product is smaller than a given number", "body": "<p>I assume that elements are positive.</p>\n\n<ol>\n<li>Sort both arrays using fast sorting method (for example, library qsort()). Time complexity is <code>O(nlogn+mlogm)</code>  </li>\n<li>Imagine that you fill 2D table with results of multiplication. Note that every row and every column is sorted.</li>\n<li>Find a place at the perimeter of that imaginary matrix for <code>given number</code> using binary search (or number itself if exists). <code>O(log(n)+log(m))</code></li>\n<li>Walk through matrix until another edge to separate bigger values from lesser values and count them. <code>O(n+m)</code> </li>\n</ol>\n\n<p>Note that you should not calculate all matrix entries (to avoid quadratic complexity), just needed ones!</p>\n\n<p>This is a kind of algorithm described <a href=\"http://www.geeksforgeeks.org/search-in-row-wise-and-column-wise-sorted-matrix/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://stackoverflow.com/questions/10589975/find-number-in-sorted-matrix-rows-n-columns-in-olog-n\">here</a> (look at the excellent picture)</p>\n"}], "owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 43759167, "answer_count": 1, "score": 0, "last_activity_date": 1493812285, "creation_date": 1493804155, "question_id": 43756324, "link": "https://stackoverflow.com/questions/43756324/need-a-faster-algorithm-to-count-if-a-product-is-smaller-than-a-given-number", "title": "Need a faster algorithm to count if a product is smaller than a given number", "body": "<p>I have the next problem:\nMy program reads two arrays and multiplies each element of the first array with each of the 2nd array. I have to count the number of results smaller than a given number. My code works correctly but i need to find a faster algorithm.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>void sort(int *array, int length)\n{\n    int index, jndex = 0, aux, compElPoz;\n    for(index = 1; index &lt; length; index++)\n    {\n        jndex = index - 1;\n        compElPoz = index;\n        while(array[compElPoz] &lt; array[jndex])\n        {\n            aux = array[compElPoz];\n            array[compElPoz] = array[jndex];\n            array[jndex] = aux;\n            if(jndex &gt; 0)\n                jndex--;\n            compElPoz--;\n        }\n    }\n}\nint main()\n{\n    unsigned int n, in, jn, nr = 0, p, m;\n    scanf(\"%u %u\", &amp;n, &amp;p);\n    int ar[n];//1st array\n    for(in = 0; in &lt; n; in++)\n    {\n        scanf(\"%u\", &amp;ar[in]);//reading the 1st array\n    }\n    scanf(\"%u\", &amp;m);\n    int arr[m];//2nd array\n    for(in = 0; in &lt; m; in++)\n    {\n        scanf(\"%u\", &amp;arr[in]);//reading the 2nd array\n    }\n    sort(arr, m);//sorting the 2nd array\n    for(in = 0; in &lt; n; in++)\n    {\n        for(jn = 0; jn &lt; m; jn++)\n        {\n            if(ar[in] * arr[jn] &lt; p)\n                nr++;\n            else\n                break;\n        }\n    }\n    printf(\"%d\", nr);\n    return 0;\n}\n</code></pre>\n\n<p>So i have to read ar[] and arr[] and p.\nThis is an example:</p>\n\n<pre><code>n = 5\np = 99\nar[5] = {1, 2, 3, 4, 5}\nm = 2\narr[2] = {34, 25}\n</code></pre>\n\n<p>The program will print 5 because 1 * 34 &lt; 99, 1 * 25 &lt; 99, 2 * 34 &lt; 99, 2 * 25 &lt; 99, 3 * 25 &lt; 99. </p>\n"}, {"tags": ["c", "string", "strcpy"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1493804061, "post_id": 43756221, "comment_id": 74553844, "body": "You mean besides the obvious? (I.e. global s&amp;r, then fix everything that is broken). Everyplace that breaks, by definition, needs inspection anyway, so branch your code and see how bad the malaise is."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 5, "creation_date": 1493804128, "post_id": 43756221, "comment_id": 74553892, "body": "<code>strcpy_s()</code> is pointless anyway."}, {"owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 3, "creation_date": 1493804286, "post_id": 43756221, "comment_id": 74554017, "body": "Since the size of <code>dest</code> could be declared anywhere, it seems very hard to do anything in an automated way."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1493804853, "post_id": 43756221, "comment_id": 74554475, "body": "10,000 times! And why is this tagged C++?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1493809730, "post_id": 43756221, "comment_id": 74557758, "body": "@EOF <i>strcpy_s() is pointless anyway.</i> <a href=\"https://en.wikipedia.org/wiki/Vendor_lock-in\" rel=\"nofollow noreferrer\">Vendor lock-in</a>."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493816019, "post_id": 43756221, "comment_id": 74562359, "body": "@AndrewHenle <code>strcpy_s()</code> is nowadays part of the C standard, with the C11 bounds-checking interface."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493818883, "post_id": 43756221, "comment_id": 74564727, "body": "@Lundin Thanks.  I missed that over the years.  So it&#39;s a sane implementation of <code>strncpy()</code> then?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493819065, "post_id": 43756221, "comment_id": 74564871, "body": "@AndrewHenle No, it is a bounds-checking version of <code>strcpy()</code>. <code>strncpy()</code> was never intended to be used for that - it was in fact not originally intended to be used for null-terminated strings."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493819428, "post_id": 43756221, "comment_id": 74565172, "body": "@Lundin <i><code>strncpy()</code> was never intended to be used for that - it was in fact not originally intended to be used for null-terminated strings</i>  So you&#39;re saying it&#39;s the <b>naming</b> of <code>strncpy()</code> that&#39;s insane, given that all the other <code>str*()</code> functions are intended for nul-terminated strings? ;-)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493819738, "post_id": 43756221, "comment_id": 74565440, "body": "@AndrewHenle When they decided what would go into the standard library, they were looking at which functions that already existed in UNIX. Lots of unmentionable substances were smoked and the result was a pretty random, completely inconsistent standard library, with lots of outright bad and broken things in it. As for the specific case of <code>strncpy</code>, here is the history: <a href=\"http://stackoverflow.com/questions/2114896/why-are-strlcpy-and-strlcat-considered-insecure\" title=\"why are strlcpy and strlcat considered insecure\">stackoverflow.com/questions/2114896/&hellip;</a>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1493826121, "post_id": 43756221, "comment_id": 74570451, "body": "Consider <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1967.htm\" rel=\"nofollow noreferrer\">n1967</a> which proposes &quot;... that Annex K be either removed from the next revision of the C standard, or deprecated and then removed.&quot;  Sure you want to switch code to <code>strcpy_s()</code>?  Recommend reading the &quot;Common Mistakes&quot; section to see what you are getting into."}], "answers": [{"comments": [{"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 0, "creation_date": 1493804781, "post_id": 43756416, "comment_id": 74554409, "body": "You&#39;d have to be sure <code>dest</code> was declared an array! Because if <code>dest</code> is pointer this is typically be a code breaking catastrophe."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 6, "creation_date": 1493804854, "post_id": 43756416, "comment_id": 74554477, "body": "To further add confusion, at least one C++ vendor (MS) provides a template wrapper for deducing the <code>size_t</code> argument when using a declared-fixed destination <code>char</code> array (i.e. <code>char dst[N];  strcpy_s(dst, src);</code>). Thusly, depending on the language and vendor, blanket replacement of <code>strcpy</code> with <code>strcpy_s</code> will compile correctly in such use cases, leaving the places where compilation breaks being the actual raw pointers for dest arguments. I never know whether to thank them or curse them for that."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 5, "last_activity_date": 1493804898, "last_edit_date": 1493804898, "creation_date": 1493804380, "answer_id": 43756416, "question_id": 43756221, "link": "https://stackoverflow.com/questions/43756221/how-to-convert-current-strcpy-to-strcpy-s/43756416#43756416", "title": "How to convert current strcpy to strcpy_s?", "body": "<p>You really shouldn't do this without inspecting since the point of tightening up buffer management is lost if it's not done intelligently.</p>\n\n<p>Since the nature of the destination buffer (static or heap allocation, for instance) is very important when it comes to the proper arguments for <code>strcpy_s()</code>, and that information of course is not present in the existing <code>strcpy()</code> call, you <em>must</em> add it in any way. This requires a human.</p>\n\n<p>Often a call like <code>strcpy(dest, src);</code> can be transformed into <code>strcpy_s(dest, sizeof dest, src);</code>, but if <code>dest</code> is heap-allocated this will just be the size of the pointer rather than the pointed-at buffer which of course is wrong.</p>\n"}, {"comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1560592984, "post_id": 43756510, "comment_id": 99793740, "body": "The controlling type thingie has been agreed upon. GCC was right."}], "tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 1, "last_activity_date": 1493807578, "last_edit_date": 1493807578, "creation_date": 1493804619, "answer_id": 43756510, "question_id": 43756221, "link": "https://stackoverflow.com/questions/43756221/how-to-convert-current-strcpy-to-strcpy-s/43756510#43756510", "title": "How to convert current strcpy to strcpy_s?", "body": "<p>Given that you have provide an additional parameter that can't be deduced (<code>size_t destsz</code>) that is required to be accurate to benefit from the change you've got a real problem.</p>\n\n<p>An application with 10,000 uses of <code>strcpy()</code> sounds insane but you are where you are.</p>\n\n<p><strong>First</strong>\nIf your time/resources are limited then all I can suggest is a bit of risk assessment.\nWhich calls are copying external data (from a file, the operating system, the user, a port or socket, etc.). \nFocus on making sure those don't overwrite and you'll be reducing risk more effectively.</p>\n\n<p><strong>Second</strong>\nIf you've got any standard variable names and standard 'max sizes' you might be able to do a bit of global search and replace.</p>\n\n<p>Say if you use <code>filename</code> a lot and filenames are up to 255 characters (plus NUL) on your platform you can replace <code>strcpy(filename,</code> with (say) <code>strcpy_s(filename,FILENAME_MAX_SZ</code>. </p>\n\n<p>If the code is 'all over the place' you've got a lot of work cut out.</p>\n\n<p>Replacing <code>strcpy(v,</code> with <code>strcpy_s(v,SIZE_MAX</code> (use regular expressions) is a superficial bodge that doesn't actually gain you anything except for potentially sneaking under your organisations code quality script. I did not tell you to do this! ;)</p>\n\n<p><strong>Third</strong>\nIf you want to take a stroll in the world of C11 <code>_Generic</code> you can try something like:</p>\n\n<pre><code>#define __STDC_WANT_LIB_EXT1__\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint strcpy_s(char *dest,size_t destsz,const char *src){\n    if(strlen(src)&gt;=destsz){\n        return 1;\n    }\n    strcpy(dest,src);\n    return 0;\n}\n\nchar *d_strcpy(char *dest,const char *src){\n#ifndef NDEBUG\n fprintf(stdout,\"unsafe copy of %s\\n\",src);\n#endif\n    return strcpy(dest,src);\n}\n\n\n#define strcpy(dest,src) _Generic (dest,\\\n    char[100] : strcpy_s(dest,sizeof dest,src),\\\n    char*: d_strcpy(dest,src)\\\n    )\n\nint main(void) {\n    char a[100]={'A','B','\\0'};\n    char *b=malloc(10*sizeof(char));\n\n    strcpy(a,\"XXX\");\n    strcpy(b,\"XYX\");\n\n    printf(\"%s %s\\n\",a,b);\n\n    free(b);\n    return 0;\n}\n</code></pre>\n\n<p>Unfortunately you do need to specify the array size so need to be using probably a limited list of 'max sizes' and while this should work on Clang (untested) it fails on GCC because they don't agree how to resolve the controlling type! See <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1930.htm\" rel=\"nofollow noreferrer\">Document: N1930 (controlling expression of _Generic)</a></p>\n\n<p>Happy hunting.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493816995, "last_edit_date": 1495541398, "creation_date": 1493816995, "answer_id": 43761055, "question_id": 43756221, "link": "https://stackoverflow.com/questions/43756221/how-to-convert-current-strcpy-to-strcpy-s/43761055#43761055", "title": "How to convert current strcpy to strcpy_s?", "body": "<p>Why do you want to replace the strcpy() function? <a href=\"https://stackoverflow.com/a/23490019/584518\">There is nothing wrong with strcpy</a>. Dogmatically changing it to <code>strcpy_s</code> won't fix anything. What you need to do is to consider each and every individual case:</p>\n\n<ul>\n<li>Is the size of the source buffer known and is its contents verified?</li>\n<li>Is the source buffer even of a dynamic nature? Can it vary in size or do you know the maximum size at compile time?</li>\n<li>Is the size of the target buffer large enough? Is it at all pointing at allocated memory?</li>\n</ul>\n\n<p>This isn't something unique to <code>strcpy</code> or even strings, but something that must be considered for every <em>array</em> in your code.</p>\n"}], "owner": {"reputation": 423, "user_id": 4286324, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/84L0s.jpg?s=128&g=1", "display_name": "sonu gupta", "link": "https://stackoverflow.com/users/4286324/sonu-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3450, "favorite_count": 1, "answer_count": 3, "score": 4, "last_activity_date": 1493816995, "creation_date": 1493803899, "last_edit_date": 1493804971, "question_id": 43756221, "link": "https://stackoverflow.com/questions/43756221/how-to-convert-current-strcpy-to-strcpy-s", "title": "How to convert current strcpy to strcpy_s?", "body": "<p>I have large project having <code>strcpy</code> used everywhere. I am thinking to use <code>strcpy_s</code> instead of <code>strcpy</code>. I think almost 10,000 times I have used <code>strcpy</code>. It's so cumbersome to change every <code>strcpy</code>. Is there any efficient way for conversion?</p>\n"}, {"tags": ["c", "loops"], "answers": [{"comments": [{"owner": {"reputation": 3333, "user_id": 1129667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a56d7975ff6832cee73c7c7d862512b?s=128&d=identicon&r=PG", "display_name": "Maurizio Benedetti", "link": "https://stackoverflow.com/users/1129667/maurizio-benedetti"}, "edited": false, "score": 2, "creation_date": 1493803560, "post_id": 43756005, "comment_id": 74553483, "body": "this is the right response. Nothing to add, well done."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 7, "last_activity_date": 1493803344, "creation_date": 1493803344, "answer_id": 43756005, "question_id": 43755962, "link": "https://stackoverflow.com/questions/43755962/using-struct-in-c/43756005#43756005", "title": "Using struct in c", "body": "<p>The problem is with the boundary (overrun).</p>\n\n<p>In your case</p>\n\n<pre><code>  for(i=1; i&lt;=4; i++)\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>  for(i=0; i&lt;4; i++)\n</code></pre>\n\n<p>as C arrays use 0-based indexing. Otherwise, with your code, you're </p>\n\n<ul>\n<li>leaving the element at index 0 unused (lesser problem)</li>\n<li>going <a href=\"https://en.wikipedia.org/wiki/Off-by-one_error\" rel=\"noreferrer\">off-by-one</a>, accessing out of bound memory (bigger issue, causes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\">undefined behavior</a>.)</li>\n</ul>\n\n<p>That said, <code>void main()</code> should be <code>int main(void)</code> for a hosted environment to be standard conforming.</p>\n"}], "owner": {"reputation": 265, "user_id": 7671105, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2a2796613bf1d41c2764cdecb76aee65?s=128&d=identicon&r=PG&f=1", "display_name": "Armaa", "link": "https://stackoverflow.com/users/7671105/armaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 43756005, "answer_count": 1, "score": 1, "last_activity_date": 1493803650, "creation_date": 1493803222, "last_edit_date": 1493803648, "question_id": 43755962, "link": "https://stackoverflow.com/questions/43755962/using-struct-in-c", "title": "Using struct in c", "body": "<pre><code>#include &lt;stdio.h&gt;   \nstruct Bar{\n    int max;\n    int N;\n    int k[4];\n    float g[4];\n};\n\n\ntypedef struct Bar myStruct;\n\n\n\nmyStruct entr(){\n    myStruct result;\n    int i;\n\n    printf(\"max\\n\");\n    scanf(\"%d\", &amp;result.max);\n\n    printf(\"N = \\n\");\n    scanf(\"%d\", &amp;result.N);\n\n    printf(\"\\nEnter k = \");\n    for(i=1; i&lt;=4; i++) scanf(\"%d\", &amp;result.k[i]);\n\n    printf(\"\\ng = \");\n    for(i=1; i&lt;=4; i++) scanf(\"%f\" , &amp;result.g[i]);\n\n    return result;\n}\n\n\nvoid main() {       \n    myStruct entrs=entr();\n}\n</code></pre>\n\n<p>I ran this code in linux (compile with gcc), and every time it has the following error </p>\n\n<blockquote>\n  <p>\"<strong>* stack smashing detected *</strong>: ./a.out terminated\n  Aborted\n  \"</p>\n</blockquote>\n\n<p>How can I resolve this error?**</p>\n"}, {"tags": ["c", "mxnet"], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 2182663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f0f50bbca1bbf9beb99310eb85d00b?s=128&d=identicon&r=PG", "display_name": "dabhand", "link": "https://stackoverflow.com/users/2182663/dabhand"}, "is_accepted": false, "score": 2, "last_activity_date": 1496325178, "creation_date": 1496325178, "answer_id": 44309466, "question_id": 43755868, "link": "https://stackoverflow.com/questions/43755868/mxnet-cannot-loadlegacyjson/44309466#44309466", "title": "mxnet cannot LoadLegacyJSON", "body": "<p>after a lot of heartache and pain the answer was to include</p>\n\n<p><code>-Wl,--whole-archive -lmxnet_predict -Wl,--no-whole-archive</code></p>\n\n<p>as a linker flag</p>\n\n<p>gcc was stripping symbols it didn't think it needed</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12263617, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9lOEEX8VOms/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reIW21X7_Ff2Axs8kzkTELSlQd31Q/photo.jpg?sz=128", "display_name": "Nikita Moiseev", "link": "https://stackoverflow.com/users/12263617/nikita-moiseev"}, "is_accepted": false, "score": 0, "last_activity_date": 1571839818, "creation_date": 1571839818, "answer_id": 58524791, "question_id": 43755868, "link": "https://stackoverflow.com/questions/43755868/mxnet-cannot-loadlegacyjson/58524791#58524791", "title": "mxnet cannot LoadLegacyJSON", "body": "<p>To add to dabhand's answer: on macOS you would do</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>-Wl,-force_load,&lt;path to libmxnet.a&gt;\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 2182663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f0f50bbca1bbf9beb99310eb85d00b?s=128&d=identicon&r=PG", "display_name": "dabhand", "link": "https://stackoverflow.com/users/2182663/dabhand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571839818, "creation_date": 1493802989, "question_id": 43755868, "link": "https://stackoverflow.com/questions/43755868/mxnet-cannot-loadlegacyjson", "title": "mxnet cannot LoadLegacyJSON", "body": "<p>I have been trying to compile the prediction API using the amalgamation but when I try to use the library I get the following error:</p>\n\n<p><strong>mxnet/nnvm/src/core/pass.cc:30: Check failed: reg != nullptr Cannot find pass LoadLegacyJSON in the registry</strong></p>\n\n<p>here is the load code which works against the full libmxnet library</p>\n\n<pre><code>retval = MXPredCreate((const char*) symbol,\n            (const char* ) params,\n            params_fsz,\n            1,\n            0,\n            num_input_nodes,\n            (const char**) input_keys,\n            input_shape_indptr,\n            input_shape_data,\n            &amp;dnn\n    );\n</code></pre>\n\n<p>Is there a compiler flag I'm missing?</p>\n"}, {"tags": ["c", "compilation", "windows-10", "gtk3", "cairo"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 0, "creation_date": 1493803064, "post_id": 43755866, "comment_id": 74553101, "body": "Have you made sure the paths where the compiler looks for includes are correct?"}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1493811064, "post_id": 43755866, "comment_id": 74558647, "body": "The folder C:\\msys64\\mingw64\\include\\cairo does exist. How do I check where the compiler looks for includes?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 0, "creation_date": 1493812705, "post_id": 43755866, "comment_id": 74559880, "body": "<code>gcc -v</code>, I believe. And <code>gcc -I dir&#47;ect&#47;ory</code> to add a directory to search for includes."}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1493828069, "post_id": 43755866, "comment_id": 74571722, "body": "Cannot make sense of the <b>gcc -v</b> output! Do you have a better idea?"}, {"owner": {"reputation": 7642, "user_id": 436275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a72a51d31e40d541a9786e0243678029?s=128&d=identicon&r=PG", "display_name": "Uli Schlachter", "link": "https://stackoverflow.com/users/436275/uli-schlachter"}, "edited": false, "score": 0, "creation_date": 1493970363, "post_id": 43755866, "comment_id": 74638475, "body": "How are you compiling? What are your arguments to the compiler? The standard way to compile a single C file that uses cairo is <code>gcc foo.c $(pkg-config --cflags --libs cairo)</code>. No idea if calling pkg-config inline like this works on Windows 10 with msys64. The idea is: Add the output of <code>pkg-config --cflags --libs cairo</code> to the compiler arguments."}, {"owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "edited": false, "score": 0, "creation_date": 1498471214, "post_id": 43755866, "comment_id": 76495035, "body": "If I run <b>gcc example.c $(pkg-config --cflags --libs cairo)</b> I still get the same ** fatal error: cairo.h: No such file or directory** error"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 8964087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a24ced86767d057d61555b9a553983?s=128&d=identicon&r=PG&f=1", "display_name": "Greg King", "link": "https://stackoverflow.com/users/8964087/greg-king"}, "is_accepted": false, "score": 0, "last_activity_date": 1511041560, "creation_date": 1511041560, "answer_id": 47371392, "question_id": 43755866, "link": "https://stackoverflow.com/questions/43755866/cannot-compile-cairo-c-code-on-windows-10/47371392#47371392", "title": "Cannot compile Cairo C code on Windows 10", "body": "<p>You showed two messages.  Lines two and three came from the compiler.  The first line came from the shell.  That first bug caused the second bug.  It says that the <code>pkg-config</code> command doesn't exist.  You need to install its package.  Use this command (it installs other useful packages, too):</p>\n\n<pre><code>pacboy sync base-devel\n</code></pre>\n\n<p>(You don't need to name <code>cairo</code> in the <code>pkg-config</code> command; <code>gtk+-3.0</code> names the packages that it needs.)</p>\n"}], "owner": {"reputation": 810, "user_id": 6758890, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230924dab4bae855003750ae34a3978a?s=128&d=identicon&r=PG&f=1", "display_name": "PintoDoido", "link": "https://stackoverflow.com/users/6758890/pintodoido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1511041560, "creation_date": 1493802984, "last_edit_date": 1498472454, "question_id": 43755866, "link": "https://stackoverflow.com/questions/43755866/cannot-compile-cairo-c-code-on-windows-10", "title": "Cannot compile Cairo C code on Windows 10", "body": "<p>I am trying to compile the zetcode <a href=\"http://zetcode.com/gfx/cairo/basicdrawing/\" rel=\"nofollow noreferrer\">lines</a> on Windows 10 using <a href=\"https://www.gtk.org/download/windows.php\" rel=\"nofollow noreferrer\">msys64</a>. </p>\n\n<p>I use the following compilation command: </p>\n\n<pre><code>gcc example.c -o example `pkg-config --cflags --libs cairo gtk+-3.0`\n</code></pre>\n\n<p>and get the following error:</p>\n\n<pre><code>-bash: pkg-config: command not found\nexample.c:1:19: fatal error: cairo.h: No such file or directory\n #include &lt;cairo.h&gt;\n</code></pre>\n\n<p>However I did <strong>pacman -S mingw-w64-i686-cairo</strong> before and the installation was successful. When I type **pacman -Ss mingw-w64-i686-cairo\n** I get the following:</p>\n\n<pre><code>mingw32/mingw-w64-i686-cairo 1.15.2-4 [installed]\n    Cairo vector graphics library (mingw-w64)\n</code></pre>\n\n<p>When I run <strong>gcc -v</strong> I get:</p>\n\n<p>Using built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-pc-msys/5.3.0/lto-wrapper.exe\nTarget: x86_64-pc-msys\nConfigured with: /msys_scripts/gcc/src/gcc-5.3.0/configure --build=x86_64-pc-msys --prefix=/usrable-static --enable-version-specific-runtime-libs --with-arch=x86-64 --with-tune=generic --diso --enable-graphite --enable-threads=posix --enable-libatomic --enable-libcilkrts --enable-libg --disable-win32-registry --disable-symvers --with-gnu-ld --with-gnu-as --disable-isl-version-cith-system-zlib --enable-linker-build-id --with-default-libstdcxx-abi=gcc4-compatible\nThread model: posix\ngcc version 5.3.0 (GCC)</p>\n\n<p>Last but not least, If I follow the instruction on this <a href=\"http://www.tarnyko.net/en/?q=node/44\" rel=\"nofollow noreferrer\">website</a> I can compile the <strong>lines</strong> code. However, GTK3 version provided is very old and cannot run newer <a href=\"https://stackoverflow.com/questions/43723638/how-do-i-change-the-mouse-cursor-over-a-gtkdrawingarea-in-gtk3\">code</a>. </p>\n\n<p>The paths to Cairo.h are:</p>\n\n<p>C:\\MinGW\\include\\cairo for the outdated (but working) GTK+3 install</p>\n\n<p>and </p>\n\n<p>C:\\msys64\\mingw32\\include\\cairo </p>\n\n<p>and </p>\n\n<p>C:\\msys64\\mingw64\\include\\cairo for the newer (but not working) GTK3 install using msys64</p>\n\n<p>Which directory is MSYS64 trying to find the Cairo library?</p>\n"}, {"tags": ["c", "scanf", "netbeans-8"], "comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493801664, "post_id": 43755362, "comment_id": 74552118, "body": "This has to with newline char that gets entered.  Try this: char garbage[50];  After each scanf(), enter fgets(garbage, sizeof(garbage), stdin);  Hope this fixes it!!!"}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1493802026, "post_id": 43755362, "comment_id": 74552360, "body": "&quot;It doesn&#39;t work&quot; is a vague description. Please explain what your output is."}, {"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1493802268, "post_id": 43755362, "comment_id": 74552522, "body": "@Nguaial <code>%d</code> already skips leading whitespace characters, so I doubt it is the problem"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1493802957, "post_id": 43755362, "comment_id": 74553029, "body": "I don&#39;t link the linked question, but did you read the <a href=\"http://stackoverflow.com/a/15130185/3436922\">not accepted upvoted answer?</a>"}, {"owner": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "edited": false, "score": 0, "creation_date": 1493803137, "post_id": 43755362, "comment_id": 74553150, "body": "I can&#39;t reproduce your issue with openjdk 1.8 and netbeans 8.2: <a href=\"https://i.stack.imgur.com/ilIUv.gif\" rel=\"nofollow noreferrer\">i.stack.imgur.com/ilIUv.gif</a>"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493803322, "post_id": 43755362, "comment_id": 74553307, "body": "And what does <code>scanf()</code> return?  You&#39;re not bothering to check the return value..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7171623"}, "edited": false, "score": 1, "creation_date": 1493807049, "post_id": 43755362, "comment_id": 74555982, "body": "Include <code>&lt;stdio.h&gt;</code>. Above code compiles and runs perfectly. <b>show your input values</b>, so that someone can help. @Doctor Questions"}], "owner": {"reputation": 1, "user_id": 7803804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d930686739978605cee8f5684a937a?s=128&d=identicon&r=PG&f=1", "display_name": "Doctor Questions", "link": "https://stackoverflow.com/users/7803804/doctor-questions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493803023, "creation_date": 1493801418, "last_edit_date": 1495539195, "question_id": 43755362, "link": "https://stackoverflow.com/questions/43755362/seriously-why-does-this-scanf-not-work-in-netbeans-8-2-for-c", "title": "Seriously, why does this scanf not work in Netbeans 8.2 for C", "body": "<p>Example...</p>\n\n<pre><code>int main()\n{\nint i,j,k;\nprintf(\"Enter two integers: \\n\");\nscanf(\"%d\",&amp;i);\nscanf(\"%d\",&amp;j);\n\nk = i + j;\nprintf(\"Adding %d and %d gives %d.\\n\", i, j, k);\n\nreturn 0;\n}\n</code></pre>\n\n<p>Before someone just links to this... <a href=\"https://stackoverflow.com/questions/9116958/programs-with-the-scanf-not-working-properly-in-netbeans\">Programs with the scanf not working properly in NetBeans</a></p>\n\n<p>Is it seriously not possible to run this code using the internal terminal of Netbeans? I tried searching around and someone said to put a flush statement after that printf. It still didn't work.</p>\n\n<p>Also, I already have a return of 0; which was indicated in that other answer (link above).</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 329, "user_id": 610605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52676a7f64a6723d917d6cc7be176ec8?s=128&d=identicon&r=PG", "display_name": "Paul Bentley", "link": "https://stackoverflow.com/users/610605/paul-bentley"}, "edited": false, "score": 0, "creation_date": 1493801277, "post_id": 43755248, "comment_id": 74551887, "body": "you need to include a newline character - printf(&quot;%c\\n&quot;, aaa[i]);    also, it is a good idea to get into the habit of calling variables, such as arrays, something that describes their purpose.  &#39;aaa&#39; isn&#39;t self-describing."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1493801343, "post_id": 43755248, "comment_id": 74551923, "body": "Replace with <code>printf(&quot;%c  &quot; , aaa[i] ) ;</code> It will add space between array elements and If you need newline use <code>printf(&quot;%c \\n&quot; , aaa[i] ) ;</code>"}, {"owner": {"reputation": 27, "user_id": 7848207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6c0ab1fff4ef7da870dcf529e886b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/7848207/mohammad"}, "edited": false, "score": 0, "creation_date": 1493801590, "post_id": 43755248, "comment_id": 74552076, "body": "I don&#39;t want to print them in a new line. I want to print them in different  places . The thing is , it prints them consecutively . this is the problem"}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1493801833, "post_id": 43755248, "comment_id": 74552221, "body": "@Mohammad What do you mean , you want to print them at diff places?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493801874, "post_id": 43755248, "comment_id": 74552256, "body": "Do you want three spaces between them? Then you can use <code>&quot;%c    &quot;</code> as your format string."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7171623"}, "edited": false, "score": 2, "creation_date": 1493801949, "post_id": 43755248, "comment_id": 74552309, "body": "what is your expected output ??"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493801954, "post_id": 43755248, "comment_id": 74552313, "body": "Can you display how you want # character to be printed?"}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493801973, "post_id": 43755248, "comment_id": 74552327, "body": "@AjayBrahmakshatriya I already mentioned that but apparently this is not what he needed."}, {"owner": {"reputation": 27, "user_id": 7848207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6c0ab1fff4ef7da870dcf529e886b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/7848207/mohammad"}, "edited": false, "score": 0, "creation_date": 1493802029, "post_id": 43755248, "comment_id": 74552363, "body": "yeah , but not with making space . I mean I want to print these array&#39;s cells . aaa[0] then aaa[4] and so on . per 4 cell , one of them should be printed ."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "edited": false, "score": 0, "creation_date": 1493802068, "post_id": 43755248, "comment_id": 74552384, "body": "@rootTraveller No, I think by diff places he means a hash at 0, 4, 8, 12 i.e. with 3 spaces between them. I wrote the format string with 3 spaces after %c. But SO just removed that."}, {"owner": {"reputation": 6288, "user_id": 5167682, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2vexc.jpg?s=128&g=1", "display_name": "roottraveller", "link": "https://stackoverflow.com/users/5167682/roottraveller"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493802184, "post_id": 43755248, "comment_id": 74552466, "body": "@AjayBrahmakshatriya **But SO just removed that. ** :D :D"}, {"owner": {"reputation": 27, "user_id": 7848207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6c0ab1fff4ef7da870dcf529e886b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/7848207/mohammad"}, "edited": false, "score": 0, "creation_date": 1493802300, "post_id": 43755248, "comment_id": 74552545, "body": "Sorry for this bad explanation . Look I&#39;m gonna use counter to to change the places should be printed . Am I obvious ?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493802317, "post_id": 43755248, "comment_id": 74552564, "body": "@Mohammad do you want the strings aaa[0], aaa[4] also to be printed? Can you just show the sample output?"}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 2, "creation_date": 1493802668, "post_id": 43755248, "comment_id": 74552833, "body": "@Mohammed, is your desired output like: &quot;#ell# Wo#ld!#&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7848207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6c0ab1fff4ef7da870dcf529e886b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/7848207/mohammad"}, "edited": false, "score": 0, "creation_date": 1493803348, "post_id": 43755574, "comment_id": 74553327, "body": "Thank you . Yes I wanted this . or something like this . Thank you all ! But there is another tiny problem . I want to clear aaa[0] when I&#39;m printing aaa[4] . But when I use    system(&quot;cls&quot;) , everything start from beginning .what can I do? It&#39;s you kindness to help me with this ."}], "tags": [], "owner": {"reputation": 169, "user_id": 7950680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-msaD0Aw2Y-Y/AAAAAAAAAAI/AAAAAAAAABM/4KUk9LqaBII/photo.jpg?sz=128", "display_name": "Tiago Cunha", "link": "https://stackoverflow.com/users/7950680/tiago-cunha"}, "is_accepted": false, "score": 3, "last_activity_date": 1493802058, "creation_date": 1493802058, "answer_id": 43755574, "question_id": 43755248, "link": "https://stackoverflow.com/questions/43755248/printing-array-partially-in-c/43755574#43755574", "title": "Printing array partially in C", "body": "<p>As you're adding 4 to the i variable in each cycle you're printing the positions 0, 4, 8, 12, 16 of the array consecutively.<br/></p>\n\n<p>If you want to print the vector with # as the 4*nth element you should do something like:</p>\n\n<pre><code>while( i &lt; 18 ) \n{\n  if( i % 4 == 0 )\n  {\n    aaa[i] = '#';\n    printf(\"%c\" ,aaa[i]);\n  }\n  else \n    printf(\" \"); // Assuming you want a space in between prints\n\n  i++;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "is_accepted": false, "score": 4, "last_activity_date": 1493802708, "creation_date": 1493802708, "answer_id": 43755770, "question_id": 43755248, "link": "https://stackoverflow.com/questions/43755248/printing-array-partially-in-c/43755770#43755770", "title": "Printing array partially in C", "body": "<p>I'm assuming you want to eventually print a string and get output like this</p>\n\n<pre><code>\"#   #   #   #   #  \"\n</code></pre>\n\n<p>minus the quotes.</p>\n\n<p>You can do this by filling in a null-terminated string and then <code>printf</code>ing that, like so:</p>\n\n<pre><code>// +1 for space for a null terminator\n// = {0}; fills the array with 0s\nchar aaa[18+1] = {0};\n\n// for loop is more idiomatic for looping over an array of known size\nfor (int i = 0; i &lt; 18; i += 4) {\n    // if the remainder of dividing i by 4 is equal to 0\n    if (i % 4 == 0) {\n        // then put a '#' character in the array at aaa[i]\n        aaa[i] = '#';\n    } else {\n        // otherwise put a ' ' character in the array at aaa[i]\n        aaa[i] = ' ';\n    }\n}\n\nprintf(\"%s\", aaa);\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7848207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef6c0ab1fff4ef7da870dcf529e886b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/7848207/mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493815882, "creation_date": 1493801123, "last_edit_date": 1493815882, "question_id": 43755248, "link": "https://stackoverflow.com/questions/43755248/printing-array-partially-in-c", "title": "Printing array partially in C", "body": "<p>I am a newbie to C and want to print some special elements of an array. </p>\n\n<pre><code>//Partial code here\n    char aaa[18] ;\n    int i = 0;\n    while(i &lt; 18) {\n        aaa[i] = '#' ;\n        printf(\"%c\", aaa[i]) ;\n        i = i + 4 ;    \n   }\n</code></pre>\n\n<p>It's supposed to prints 4 <code>#</code> of aaa[0] ,aaa[4],aaa[8],aaa[12],aaa[16]. But it is not. It is printing them in a row like <code>#####</code>. But I don't want those . </p>\n"}, {"tags": ["c", "linux", "gcc", "makefile", "stack"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493801062, "post_id": 43755174, "comment_id": 74551744, "body": "Sounds suspicious to me.........."}, {"owner": {"reputation": 300, "user_id": 3231087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/19fa1f9d8dbd961b862de3bbd997e886?s=128&d=identicon&r=PG&f=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3231087/shreyas"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493801249, "post_id": 43755174, "comment_id": 74551863, "body": "It really is !! :)"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493802766, "post_id": 43755174, "comment_id": 74552902, "body": "Linker directives can be inside the binary itself. You can look a the section <code>.drectve</code>"}, {"owner": {"reputation": 300, "user_id": 3231087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/19fa1f9d8dbd961b862de3bbd997e886?s=128&d=identicon&r=PG&f=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3231087/shreyas"}, "edited": false, "score": 0, "creation_date": 1493838501, "post_id": 43755174, "comment_id": 74577740, "body": "I could not find any section called <code>.drectve</code>. I checked the sections by  the <code>readelf -S</code> command . . It lists all the sections of the binary. Even the <code>.note.GNU_STACK</code> section was not there. But I have some other object files. And when I run this <code>readelf -S</code> command on the object files, it shows the <code>.note.GNU_STACK</code> section. What I am trying to figure out over here is that from where, the stack execution flag is getting enabled ?"}], "owner": {"reputation": 300, "user_id": 3231087, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/19fa1f9d8dbd961b862de3bbd997e886?s=128&d=identicon&r=PG&f=1", "display_name": "Shreyas", "link": "https://stackoverflow.com/users/3231087/shreyas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493800846, "creation_date": 1493800846, "question_id": 43755174, "link": "https://stackoverflow.com/questions/43755174/linux-execution-of-instructions-on-stack", "title": "Linux - Execution of instructions on stack", "body": "<p>I have a tool, which I compile using the Makefiles. It is a very big tool and has many Makefiles. It generates a shared library (.so file) after compilation. When I checked with <code>execstack -q &lt;file.so&gt;</code>, it shows that the execution of instructions on stack is required for this library. </p>\n\n<p>To enable stack execution for any program we can compile it by giving the option <code>-z execstack</code> to <code>gcc</code>. Now, I am explicitly not providing this option anywhere, but still for the generated shared library this flag gets enabled. </p>\n\n<p>I am linking some libraries for which this flag is enabled. Is that the reason for this flag being enabled for the shared library ?</p>\n\n<p>If No, what else can be the reason ?</p>\n"}, {"tags": ["c", "brute-force", "cs50", "crypt"], "comments": [{"owner": {"reputation": 373, "user_id": 7316122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cL82t.png?s=128&g=1", "display_name": "Y. Tarion", "link": "https://stackoverflow.com/users/7316122/y-tarion"}, "edited": false, "score": 2, "creation_date": 1493800999, "post_id": 43755074, "comment_id": 74551699, "body": "You break only the 4th loop. The others continue"}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1493801055, "post_id": 43755074, "comment_id": 74551741, "body": "It should still end after trying all combinations and not be never ending. Perhaps the question is poorly worded."}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1493801097, "post_id": 43755074, "comment_id": 74551763, "body": "What is the &quot;string&quot; type?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493801115, "post_id": 43755074, "comment_id": 74551777, "body": "<code>hash == password</code> never become true."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1493801148, "post_id": 43755074, "comment_id": 74551805, "body": "<code>if ( hash == password)</code> should be <code>if(!strcmp(hash,password))</code> - but that&#39;s unrelated to why the loops would never end"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6685307, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daf2b39eb559119c99b8957d8fad4be8?s=128&d=identicon&r=PG&f=1", "display_name": "Tripduc", "link": "https://stackoverflow.com/users/6685307/tripduc"}, "edited": false, "score": 0, "creation_date": 1493801835, "post_id": 43755265, "comment_id": 74552224, "body": "Works perfectly, thanks! Just a question, why would hash == password not work? It is still comparing both string no? Do string only compare with a strcmp function?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 31, "user_id": 6685307, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daf2b39eb559119c99b8957d8fad4be8?s=128&d=identicon&r=PG&f=1", "display_name": "Tripduc", "link": "https://stackoverflow.com/users/6685307/tripduc"}, "edited": false, "score": 0, "creation_date": 1493801982, "post_id": 43755265, "comment_id": 74552333, "body": "@Tripduc because the fiend that crafted <code>cs50.h</code> and typdef-ed <code>char*</code> as <code>string</code> did you no favors at all. All <code>hash == password</code> does is C is compare two <code>pointers</code> (i.e. the addresses held within each), not the <i>content</i> to which they point <i>to</i>. Mere words cannot express how much frustration that hidden <code>char*</code> typedef in that header file has caused people new to the language. The proper way to compare terminated strings is C for equivalence is is via a function like <code>strcmp</code>."}], "tags": [], "owner": {"reputation": 2710, "user_id": 4532326, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aeb4dabdec3bf43bba4a71124b0d67f7?s=128&d=identicon&r=PG&f=1", "display_name": "granmirupa", "link": "https://stackoverflow.com/users/4532326/granmirupa"}, "is_accepted": true, "score": 2, "last_activity_date": 1493801557, "last_edit_date": 1493801557, "creation_date": 1493801168, "answer_id": 43755265, "question_id": 43755074, "link": "https://stackoverflow.com/questions/43755074/crypt-brute-force-never-ending-loop/43755265#43755265", "title": "crypt brute force never ending loop", "body": "<p>Change the <code>break</code>  in the if in a <code>return</code> to exit all the loops. </p>\n\n<p>Moreover, as pointed out in the comments:</p>\n\n<p><code>if ( hash == password)</code> \nshould be \n<code>if(!strcmp(hash,password))</code> \nbecause you want to compare two strings in C. </p>\n"}], "owner": {"reputation": 31, "user_id": 6685307, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/daf2b39eb559119c99b8957d8fad4be8?s=128&d=identicon&r=PG&f=1", "display_name": "Tripduc", "link": "https://stackoverflow.com/users/6685307/tripduc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 43755265, "answer_count": 1, "score": -1, "last_activity_date": 1493801557, "creation_date": 1493800519, "question_id": 43755074, "link": "https://stackoverflow.com/questions/43755074/crypt-brute-force-never-ending-loop", "title": "crypt brute force never ending loop", "body": "<p>I have been scratching my head quite a lot here and couldn't find a solution. \nI have written this code in order to crack simple 4 characters passwords (see code below). I can see that the passwords are correctly generated and that every possibility is tested with every combination of letters from A to z but the loop is never ending. Could someone tell me why? </p>\n\n<pre><code>#include &lt;cs50.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;crypt.h&gt;\n\n\nint main(int argc, string argv[])\n{\n//check number of arguments\nif( argc != 2 )\n{\n    printf(\"Usage: ./crack hash\\n\");   \n}\n\nchar str[5];\nchar salt[] = \"..\";\nstrncpy(salt, argv[1], 2);\nstring hash = argv[1];\nstring password = \"....\";\nchar pass[5]; \n\n\n//brute force loop\nfor( int i = 65; i &lt; 123; i++)\n{\n    str[0] = i;\n    for( int j = 65; j &lt; 123; j++)\n    {\n        str[1] = j;\n        for( int k = 65; k &lt; 123; k++)\n        {\n            str[2] = k;\n            for( int l = 65; l &lt; 123; l++)\n            {\n                str[3] = l;\n                str[4] = '\\0';\n\n                strcpy(pass, str);\n\n                password = crypt(pass, salt);\n                if ( hash == password)\n                {\n                    printf(\"%s\\n\", password);\n                    break;\n                }\n\n                printf(\"\\r%s\", pass);\n                fflush(stdout);\n            }   \n        }   \n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "struct"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1493800725, "post_id": 43755045, "comment_id": 74551550, "body": "Your code looks like pure C to me. What the C++ tag?"}, {"owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 1, "creation_date": 1493801144, "post_id": 43755045, "comment_id": 74551799, "body": "What&#39;s <code>strlen(translation[50])</code>?"}, {"owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 0, "creation_date": 1493801235, "post_id": 43755045, "comment_id": 74551854, "body": "<code>input[strlen(input)-1] = &#39;\\0&#39;;</code> this is wrong"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1493801435, "post_id": 43755045, "comment_id": 74551968, "body": "<code>for (int i = 0; i &lt;= strlen(translation[50]); i++)</code> -&gt; <code>for (int i = 0; i &lt; j; i++)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7171623"}, "edited": false, "score": 1, "creation_date": 1493801707, "post_id": 43755045, "comment_id": 74552138, "body": "use <code>break</code>  after <code>j++</code> in <code>for</code> loop for efficiency"}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 1, "creation_date": 1493801874, "post_id": 43755045, "comment_id": 74552255, "body": "Your morse code for &quot;C&quot; has surplus spaces at each end."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 0, "creation_date": 1493802742, "post_id": 43755045, "comment_id": 74552878, "body": "@n.caillou I think that is to eliminate the line feed that is read in, too, with fgets. One should prefer to check, though, if it <i>really</i> is the line feed... Alternative would have been using <code>strtok(..., &quot; \\t\\r\\n&quot;)</code>..."}, {"owner": {"reputation": 3, "user_id": 7836672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zj3tG.jpg?s=128&g=1", "display_name": "L. Hiernickel", "link": "https://stackoverflow.com/users/7836672/l-hiernickel"}, "edited": false, "score": 0, "creation_date": 1494236862, "post_id": 43755045, "comment_id": 74724817, "body": "@Binary_10 good idea, thank you"}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1493801620, "post_id": 43755294, "comment_id": 74552087, "body": "This answer is not quite correct. Rethink it please."}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1493802285, "post_id": 43755294, "comment_id": 74552538, "body": "It would be nice if you would point out exactly which part of this answer is not correct. In truth the original code is so full of bugs that it needs a complete rewrite for a fully correct answer and I don&#39;t have time for that."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1493804423, "post_id": 43755294, "comment_id": 74554123, "body": "You write <i>Instead of: translation[j] = tabelle[i].letter; do: translation[j] = tabelle[i].letter[0];</i>, but this implies that you <b>need also</b> modify what you have described under <i>Or, even better do:</i>."}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1493904362, "post_id": 43755294, "comment_id": 74608718, "body": "@Michael Walz, thanks. It was correct, just a question of unclear text. There was an implicit &quot;instead&quot; in the second option that I have now made explicit."}], "tags": [], "owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "is_accepted": false, "score": 1, "last_activity_date": 1493904303, "last_edit_date": 1493904303, "creation_date": 1493801244, "answer_id": 43755294, "question_id": 43755045, "link": "https://stackoverflow.com/questions/43755045/saving-text-out-of-a-struct-in-a-char-array/43755294#43755294", "title": "Saving text out of a struct in a char array", "body": "<p>Instead of:</p>\n\n<pre><code>translation[j] = tabelle[i].letter;\n</code></pre>\n\n<p>do:</p>\n\n<pre><code>translation[j] = tabelle[i].letter[0];\n</code></pre>\n\n<p>Or instead, and even better, do:</p>\n\n<pre><code>typedef struct { char* code; char letter;} morse_tabelle; \n\nmorse_tabelle tabelle[] = {\n    { \".-\", 'A' },\n    { \"-...\", 'B' },\n    { \" -.-. \", 'C' },\n    { \"-..\", 'D' },\n    etc. etc.\n\nchar translation[50];\n...\nprintf(\"%s\\n\", translation);\n</code></pre>\n\n<p>Or, if you want to print out the translation letter by letter:</p>\n\n<pre><code>for (int i = 0; i &lt; strlen(translation); i++)\n{\n    printf(\"%c\\n\", translation[i]);\n}\n</code></pre>\n\n<p>To add some basic C tuition:</p>\n\n<p><code>char *</code> is a pointer to an array of <code>char</code> types. <code>\"A\"</code> is a <code>char</code> array with two elements and can be written as <code>{ 'A', '\\0' }</code>. Hence assigning <code>\"A\"</code> to a <code>char</code> type is wrong.</p>\n\n<p>If you define <code>letter</code> as a <code>char *</code> and populate the data with a one character string, then you can access the character by indexing the 0th element as <code>letter[0]</code>. However, rather than using character arrays all over the space and wasting memory and over-complicating your code, it is better just to use characters instead.</p>\n"}, {"comments": [{"owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 0, "creation_date": 1493802093, "post_id": 43755541, "comment_id": 74552407, "body": "<code>translation[50]</code> actually asks for the 51th element"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "edited": false, "score": 0, "creation_date": 1493804300, "post_id": 43755541, "comment_id": 74554030, "body": "@n.caillou yes if you start at 1."}, {"owner": {"reputation": 3, "user_id": 7836672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zj3tG.jpg?s=128&g=1", "display_name": "L. Hiernickel", "link": "https://stackoverflow.com/users/7836672/l-hiernickel"}, "edited": false, "score": 0, "creation_date": 1494236743, "post_id": 43755541, "comment_id": 74724752, "body": "this was a good example for me to understand pointers a bit more, thank you."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1493801955, "creation_date": 1493801955, "answer_id": 43755541, "question_id": 43755045, "link": "https://stackoverflow.com/questions/43755045/saving-text-out-of-a-struct-in-a-char-array/43755541#43755541", "title": "Saving text out of a struct in a char array", "body": "<p>Here:</p>\n\n<pre><code>for (int i = 0; i &lt;= strlen(translation[50]); i++) {\n</code></pre>\n\n<p><code>strlen(translation[50]</code> is wrong. <code>translation</code> is an array of 50 pointers to <code>char*</code>. So <code>strlen(translation[50])</code> is the length of the 50th translated character (which BTW only exists if you have typed in 50 morse codes) and not the number of elements you've put into the <code>translation</code> array. You've put <code>j</code> <code>char*</code> pointers into the <code>translation</code> array, therefore the correct code is:</p>\n\n<pre><code>for (int i = 0; i &lt; j); i++) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1493802381, "post_id": 43755552, "comment_id": 74552609, "body": "Same answer as mine but slightly better laid out and includes detail of null termination which I missed since I took it for granted."}, {"owner": {"reputation": 3, "user_id": 7836672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zj3tG.jpg?s=128&g=1", "display_name": "L. Hiernickel", "link": "https://stackoverflow.com/users/7836672/l-hiernickel"}, "edited": false, "score": 0, "creation_date": 1494236605, "post_id": 43755552, "comment_id": 74724662, "body": "i tried it similar before, the biggest problem was that i didnt terminate the translation-array with a 0, so i got a bufferoverload i guess. now with this it works well"}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 3, "last_activity_date": 1493801985, "creation_date": 1493801985, "answer_id": 43755552, "question_id": 43755045, "link": "https://stackoverflow.com/questions/43755045/saving-text-out-of-a-struct-in-a-char-array/43755552#43755552", "title": "Saving text out of a struct in a char array", "body": "<p>What you actually want is this:</p>\n\n<pre><code>char translation[50]; // no string array, char array!\n</code></pre>\n\n<p>Then have the letter as char as you intended:</p>\n\n<pre><code>typedef struct { char* code; char letter;} morse_tabelle;\n</code></pre>\n\n<p>With that, you now can simply do</p>\n\n<pre><code>translation[j] = tabelle[i].letter;\n</code></pre>\n\n<p>again, just as before. Only the data type changed...</p>\n\n<p>However, you need to null-terminate your translated string, else you cannot use it with <code>printf(\"%s\", translation)</code></p>\n\n<pre><code>while(...) { ... }\ntranslation[j] = 0;\n\n// output:\n// no for loop any more!\n\nprintf(\"%s\", translation);\n</code></pre>\n\n<p>An alternative to terminating the null character would be giving the length to the printf format parameter:</p>\n\n<pre><code>while(...) { ... }\n// no termination any more...\n\n// output:\n// no for loop any more!\n\nprintf(\"%.*s\", j, translation);\n</code></pre>\n\n<p>See <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">printf</a> for details (OK, link actually is C++, but documentation is exactly true for C, too...).</p>\n"}], "owner": {"reputation": 3, "user_id": 7836672, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zj3tG.jpg?s=128&g=1", "display_name": "L. Hiernickel", "link": "https://stackoverflow.com/users/7836672/l-hiernickel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 43755552, "answer_count": 3, "score": 0, "last_activity_date": 1493904303, "creation_date": 1493800430, "last_edit_date": 1493802062, "question_id": 43755045, "link": "https://stackoverflow.com/questions/43755045/saving-text-out-of-a-struct-in-a-char-array", "title": "Saving text out of a struct in a char array", "body": "<p>I have a struct with letters inside and <strong>I want to give the letters to an array</strong> so i can use it afterwards. It works if i would just print the letters.</p>\n\n<p>Top (struct):</p>\n\n<pre><code> #include \"stdafx.h\"\n\ntypedef struct { char* code; char* letter;}morse_tabelle; \n\nmorse_tabelle tabelle[] = {\n    { \".-\", \"A\" },\n    { \"-...\", \"B\" },\n    { \" -.-. \", \"C\" },\n    { \"-..\", \"D\" },\n    { \".\", \"E\" },\n    { \"..-.\", \"F\" },\n    { \"--.\", \"G\" },\n    { \"....\", \"H\" },\n    { \"..\", \"I\" },\n    { \".---\", \"J\" },\n    { \"-.-\", \"K\" },\n    { \".-..\", \"L\" },\n    { \"--\", \"M\" },\n    { \"-.\", \"N\" },\n    { \"---\", \"O\" },\n    { \".--.\", \"P\" },\n    { \"--.-\", \"Q\" },\n    { \".-.\", \"R\" },\n    { \"...\", \"S\" },\n    { \"-\", \"T\" },\n    { \"..-\", \"U\" },\n    { \"...-\", \"V\" },\n    { \".--\", \"W\" },\n    { \"-..-\", \"X\" },\n    { \"-.--\", \"Y\" },\n    { \"--..\", \"Z\" },\n    { \"-----\", \"0\" },\n    { \".----\", \"1\" },\n    { \"..---\", \"2\" },\n    { \"...--\", \"3\" },\n    { \"....-\", \"4\" },\n    { \".....\", \"5\" },\n    { \"-....\", \"6\" },\n    { \"--...\", \"7\" },\n    { \"---..\", \"8\" },\n    {\"----.\", \"9\" },\n    { \"/\", \" \" },\n    };\n</code></pre>\n\n<p>For the arraysize:    </p>\n\n<pre><code>#define ARR_SIZE(x) (sizeof(x)/sizeof((x)[0]))\n</code></pre>\n\n<p>Function:    </p>\n\n<pre><code>    void morse_to_text(void)\n    {\n\n\n    char input[100];\n    char* morse_letter;\n\n    int j = 0;\n    char* translation[50];\n\n\n    printf_s(\"\\n\\nput in Morsecode:\\n\\n\");\n    fgets(input, 100, stdin);                                             \n    input[strlen(input)-1] = '\\0';                                       \n\n    morse_letter = strtok(input, \" \");                               \n\n    while (morse_letter)                                                      \n    {\n        for (int i = 0; i &lt; ARR_SIZE(tabelle); i++)                            \n        {\n\n            if (!strcmp(morse_letter, tabelle[i].code))                  \n            {\n                translation[j] = tabelle[i].letter;                    \n                j++;\n                /*printf_s(\"%s\", tabelle[i].letter);*/   //This works              \n            }\n        }\n        morse_letter = strtok(NULL, \" \");                            \n    }\n\n    /*output*/\n    printf_s(\"\\n\\n---------------\\n\\n\");\n    for (int i = 0; i &lt;= strlen(translation[50]); i++){\n            printf(\"%s\", translation[i]);\n    }\n\n};\n</code></pre>\n\n<p>It sort of works if i change the <code>char* letter</code> to <code>char letter</code> inside of the struct. but then i get a buffer overrun.\nThe question again: how can i store strings inside an array. </p>\n"}, {"tags": ["c", "json", "string", "memory"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 4, "creation_date": 1493797298, "post_id": 43753963, "comment_id": 74549483, "body": "Why don&#39;t you use some library? Or is it part of some assignment?"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 4, "creation_date": 1493797933, "post_id": 43753963, "comment_id": 74549875, "body": "<code>malloc((char) sizeof(res) + sizeof(char))</code> looks suspicious. <code>sizeof(res)</code> is the size of the pointer, not string to be contained there. You shall use something like <code>malloc(len-i+1)</code>."}, {"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1493798700, "post_id": 43753963, "comment_id": 74550332, "body": "<i>len</i> contains the size of parameter <i>line</i> which is bigger than <i>res</i> should be. What I want is to add memory for current char iteration by iteration. Also not using library is indeed part of assignment for I have few JSON related code and it seems using one would not be worth."}, {"owner": {"reputation": 8169, "user_id": 759558, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/kz2la.jpg?s=128&g=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/759558/neil"}, "edited": false, "score": 0, "creation_date": 1493799159, "post_id": 43753963, "comment_id": 74550599, "body": "One of the things that JSON is good for is automatic de/serialisation.  High level languages like js, java and C# handle this via reflection (automatically working out class and property names).  Without a whole load of wrapper macros, it will be very ugly to implement in C."}, {"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1493799304, "post_id": 43753963, "comment_id": 74550702, "body": "Well so be it, I don&#39;t have the choice to use something else than C."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 2, "creation_date": 1493799530, "post_id": 43753963, "comment_id": 74550842, "body": "Instead of returning &quot;&quot;, return NULL."}], "answers": [{"comments": [{"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1493800496, "post_id": 43754654, "comment_id": 74551422, "body": "Your solution seem to be working just fine, except that when I modify key and value, I got undefined error half the time, and &quot;Not enough memory&quot; the other half."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1493800569, "post_id": 43754654, "comment_id": 74551466, "body": "What input did you try?"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493800757, "post_id": 43754654, "comment_id": 74551570, "body": "@AjayBrahmakshatriya - realloc() can allocate from current location.  If this is the case, it doesn&#39;t necessarily free the old memory."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493800894, "post_id": 43754654, "comment_id": 74551643, "body": "@Nguaial yes ofcourse. I meant to say that it is freed if it had to be freed and he doesn&#39;t have to worry about freeing. Anyway, this code is very inefficient. I was just trying to fix his program with minimum changes possible."}, {"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1493801031, "post_id": 43754654, "comment_id": 74551728, "body": "<code>printf(&quot;%s&quot;, extractCodeInLine(&quot;\\&quot;xxx\\&quot;:\\&quot;xxxxxxxxxxxxx\\&quot;&quot;));</code> Seems like depending on the length of the string computed, memory goes wild.  Also with further debugging I have three errors :ntdll!RtlpNtEnumerateSubKey(), ntdll!RtlImageRvaToVa() and ntdll!RtlUlonglongByteSwap()"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493801185, "post_id": 43754654, "comment_id": 74551823, "body": "Well, the approach of reallocating again and again is not very effecient and can lead to such bugs. Why don&#39;t your run two loops. The first loop will just calculate the length of value. Then allocate the required space and then start filling it. I can make the edit if you can&#39;t figure out."}, {"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1493801922, "post_id": 43754654, "comment_id": 74552288, "body": "Honestly I realised my code was garbage since the more I failed the more I tried less efficient ways to solve my problem. I think improving garbage instead of just looking for gold is not a viable solution. Thanks anyway for trying to stick to what I have tried to do. I have understood many things about how to deal with memory thanks to you."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1493799218, "creation_date": 1493799218, "answer_id": 43754654, "question_id": 43753963, "link": "https://stackoverflow.com/questions/43753963/extract-string-from-json-in-c/43754654#43754654", "title": "Extract string from JSON in C", "body": "<p>The issues with your code </p>\n\n<ol>\n<li>Missing one } which makes your code return in the first iteration itself.</li>\n<li>You are allocating new space every time. Which makes it lose the previous contents.</li>\n</ol>\n\n<p>The fix would be </p>\n\n<pre><code>char* extractValueInLine(char* line) { \n    int len = strlen( line );\n    char* res = malloc(1);\n    res[0] = '\\0';\n    unsigned quoteCpt = 0;\n    for (unsigned i = 0; i &lt; len; i++){\n        if (line[i] == '\\\"')\n            quoteCpt++;\n        else if (quoteCpt == 3) {\n            res = realloc(res, strlen(res) + sizeof(char) + 1); // Free memory for additional char\n            if (NULL == res)\n                fprintf(stderr, \"Not enough memory.\\n\");\n            else{\n                char toAppend[2];\n                toAppend[1] = '\\0';\n                toAppend[0] = line[i];\n                strcat(res, toAppend);\n            }\n        }\n    }\n    return res;\n}\n</code></pre>\n\n<p>The main change is that I have used <code>realloc</code> instead of <code>malloc</code> which copies the previous contents and frees the old buffer.</p>\n\n<p>You can see the demo at <a href=\"https://ideone.com/T6Lfij\" rel=\"nofollow noreferrer\">Ideone</a></p>\n"}, {"comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1493800297, "post_id": 43754712, "comment_id": 74551305, "body": "I just ran your code and the answere was correct.  Though, I am getting this message: warning: field precision specifier \u2018.*\u2019 expects argument of type \u2018int\u2019, but argument 3 has type \u2018long int\u2019 [-Wformat=].. Can you explain how this work?  q4-q3-1 seems to be length of the value and q3+1 is the memory address of the value.  How does the format specifier handle 2 values?"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1493801123, "post_id": 43754712, "comment_id": 74551783, "body": "Cast the value (code edited) to correct the error (and suppress the warning). As for the <code>.*</code> in the conversion specifier it consumes an<code>int</code> and limits how many characters are copied."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 1, "creation_date": 1493801469, "post_id": 43754712, "comment_id": 74551989, "body": "So this is kind of similar to sprintf(res, &quot;%.3s&quot;, q3+1); But .* conversion specifier allows to consume an integer.  Nice!!!! (00)"}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493801627, "post_id": 43754712, "comment_id": 74552090, "body": "Exactly like that! Glad you understood :-)"}, {"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1493886482, "post_id": 43754712, "comment_id": 74595910, "body": "@pmg How do you initialize <code>res</code> though ? I have tried to <code>res = malloc(q4 - q3 -1)</code> which works most of the time but makes the program to fail in some few cases (particularly when using sprintf on large strings)."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "reply_to_user": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 1, "creation_date": 1493887364, "post_id": 43754712, "comment_id": 74596470, "body": "@Badda: you need <code>q4 - q3</code> (not <code>q4 - q3 - 1</code>) bytes to account for the zero string terminator."}], "tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": true, "score": 2, "last_activity_date": 1493801144, "last_edit_date": 1493801144, "creation_date": 1493799377, "answer_id": 43754712, "question_id": 43753963, "link": "https://stackoverflow.com/questions/43753963/extract-string-from-json-in-c/43754712#43754712", "title": "Extract string from JSON in C", "body": "<p>Use <code>strchr()</code> to find the position of the quotes. Then, with that information extract the value.</p>\n\n<p>Something like</p>\n\n<pre><code>char *q1 = strchr(line, '\\\"'); /* needs error checking */\nchar *q2 = strchr(q1 + 1, '\\\"');\nchar *q3 = strchr(q2 + 1, '\\\"');\nchar *q4 = strchr(q3 + 1, '\\\"');\n\n/* allocate (q4 - q3) bytes for res */\nsprintf(res, \"%.*s\", (int)(q4 - q3 - 1), q3 + 1);\n</code></pre>\n"}], "owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 43754712, "answer_count": 2, "score": 2, "last_activity_date": 1493901974, "creation_date": 1493797060, "last_edit_date": 1493901974, "question_id": 43753963, "link": "https://stackoverflow.com/questions/43753963/extract-string-from-json-in-c", "title": "Extract string from JSON in C", "body": "<p>I have a function which choose and extract a JSON line. This JSON line will be computed in another function which is supposed to extract the value of it.  </p>\n\n<pre><code>\"key\" : \"value\",\n</code></pre>\n\n<p>I wish to extract <em>value</em> without using any library made to manipulate JSON.</p>\n\n<p>My code looks like this so far :</p>\n\n<pre><code>char* extractValueInLine(char* line) { \n  if(!verifyLine(line)) // Checks wether line contains 4 quotes or not\n    return \"\";\n  int len = strlen( line );\n  char* res = NULL;\n  unsigned quoteCpt = 0;\n  for (unsigned i = 0; i &lt; len; i++){\n    if (line[i] == '\\\"')\n        quoteCpt++;\n    if (quoteCpt == 3) // If 3 quotes has been skipped\n    {\n        res = malloc((char) sizeof(res) + sizeof(char)); // Adding memory for one char\n        if (NULL == res)\n            fprintf(stderr, \"Not enough memory.\\n\");\n        else\n        {\n            char toAppend[2];\n            toAppend[1] = '\\0';\n            toAppend[0] = line[i];\n            strcat(res, toAppend); // Append current char \n        }\n    }\n    return res;\n}\n</code></pre>\n\n<p>This is very ugly and not efficient at all since the output is blank instead of being <em>value</em>.\nNevertheless I have tried more and more ways to do this, using string library functions and with sscanf, strtok and stuff but it was either not working or easily breakable.<br>\nA code which could work even if a blank space were added or missing would be perfect.<br>\nIf anyone could advise me or tell me what I am missing here.</p>\n"}, {"tags": ["c", "pointers", "structure"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493797129, "post_id": 43753905, "comment_id": 74549396, "body": "Remove cast from <code>malloc</code>. and If You want hold <code>int</code>, <code>struct graph **admat;</code> --&gt; <code>int **admat;</code>"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493798468, "post_id": 43753905, "comment_id": 74550202, "body": "G is a single pointer but you are typecasting double pointer.  That is not right.  I think you are confused whether G supposed to  be a double pointer or the struct element admat is a double pointer.  That needs to be clarified."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493798550, "post_id": 43753905, "comment_id": 74550246, "body": "Assigning G[x][y] = z is not correct.  G is a structure.  It needs a structure element to store z value."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1493799459, "post_id": 43753905, "comment_id": 74550797, "body": "Note that a <i>pointer to pointer to T</i> is not a 2d array, or a pointer to such. See <a href=\"http://stackoverflow.com/questions/42094465/correctly-allocating-multi-dimensional-arrays\" title=\"correctly allocating multi dimensional arrays\">stackoverflow.com/questions/42094465/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493798838, "post_id": 43753930, "comment_id": 74550415, "body": "<code>G[i]=(struct graph)malloc(G-&gt;v * sizeof(int));</code> --&gt; <code>G-&gt;admat[i]=malloc(G-&gt;v * sizeof(struct graph));</code>, But OP maybe want hold <code>int</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493804553, "post_id": 43753930, "comment_id": 74554225, "body": "<code>G[i] = malloc(G-&gt;v * sizeof(int));</code> occurs out-of-bounds."}], "tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 1, "last_activity_date": 1493808513, "last_edit_date": 1495542863, "creation_date": 1493796934, "answer_id": 43753930, "question_id": 43753905, "link": "https://stackoverflow.com/questions/43753905/create-2d-array-using-pointers-to-a-pointers-in-structure/43753930#43753930", "title": "Create 2d array using pointers to a pointers in structure", "body": "<p>This piece of code is the problem :</p>\n\n<pre><code>struct graph *G=(struct graph **)malloc(sizeof(struct graph));\nprintf(\"\\nenter number of vertices: \");\nscanf(\"%d\",&amp;G-&gt;v);\nprintf(\"\\nenter number of edges: \");\nscanf(\"%d\",&amp;G-&gt;e);\nG-&gt;admat=(struct graph **)malloc(G-&gt;v * sizeof(struct graph *));\nfor(i=0;i&lt;G-&gt;v;i++)\n{\n    G-&gt;admat[i]=(struct graph)malloc(G-&gt;v * sizeof(int));//here is the main error\n}\n</code></pre>\n\n<p>You should change it to :</p>\n\n<pre><code>struct graph *G = malloc(sizeof(struct graph));\nif (G == null)\n    printf(\"Error allocating memory\");\n\nprintf(\"\\nenter number of vertices: \");\nscanf(\"%d\",&amp;G-&gt;v);\nprintf(\"\\nenter number of edges: \");\nscanf(\"%d\",&amp;G-&gt;e);\n\nG-&gt;admat=malloc(G-&gt;v * sizeof(struct graph *));  //  I guess you mean G-&gt;admat=malloc(sizeof(struct graph *));\nif (G-&gt;admat == null)\n    printf(\"Error allocating memory\");\nfor(i = 0; i&lt;G-&gt;v; i++)\n{\n    G[i] = malloc(G-&gt;v * sizeof(int));\n    if (G[i] == null)\n        printf(\"Error allocating memory\");\n}\n</code></pre>\n\n<p>should be removed, as you are trying to allocate <code>int</code>s for <code>G</code>, which is a double pointer to <code>struct graph</code>. It does not make any sense.</p>\n\n<p>Also read <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">this link</a> on why you should not cast the result of <code>malloc</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "is_accepted": false, "score": 0, "last_activity_date": 1493799985, "last_edit_date": 1493799985, "creation_date": 1493799185, "answer_id": 43754637, "question_id": 43753905, "link": "https://stackoverflow.com/questions/43753905/create-2d-array-using-pointers-to-a-pointers-in-structure/43754637#43754637", "title": "Create 2d array using pointers to a pointers in structure", "body": "<p>Assuming that admat contains 2D matrix data, \n  here is the code.  A new variable z is introduced to store the value z.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nstruct graph{\n    int v;\n    int e;\n    int z;\n    struct graph **admat;\n};\n\nvoid main()\n{\n    int x,i,y,z=1,n;\n    struct graph *G= malloc(sizeof(struct graph));\n    printf(\"\\nenter number of vertices: \");\n    scanf(\"%d\",&amp;G-&gt;v);\n    printf(\"\\nenter number of edges: \");\n    scanf(\"%d\",&amp;G-&gt;e);\n\n    G-&gt;admat=malloc(G-&gt;v * sizeof(struct graph *));\n    for(i=0;i&lt;G-&gt;v;i++)\n    {\n        G-&gt;admat[i]=malloc(G-&gt;v * sizeof(struct graph));//here is the main error\n    }\n    for(x=0;x&lt;i;x++)\n    {\n       for(y=0;y&lt;i;y++)\n       {\n          G-&gt;admat[x][y].z=z++;\n       }\n    }\n    for(x=0;x&lt;i;x++)\n    {\n        for(y=0;y&lt;i;y++)\n        {\n           printf(\" %d \",G-&gt;admat[x][y].z);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7956092, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5jdVPug9K2Y/AAAAAAAAAAI/AAAAAAAAB7k/pMI__1HlDhs/photo.jpg?sz=128", "display_name": "Debian95", "link": "https://stackoverflow.com/users/7956092/debian95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1493808513, "creation_date": 1493796854, "last_edit_date": 1493798460, "question_id": 43753905, "link": "https://stackoverflow.com/questions/43753905/create-2d-array-using-pointers-to-a-pointers-in-structure", "title": "Create 2d array using pointers to a pointers in structure", "body": "<p>I just started structures and was interested to implement it to create an adjacency matrix to use in graph related algorithm implementation. So I created a pointer to pointer variable in the graph to use it as the base address for the 2D matrix. But when I tried to assign memory to the array it is showing me an error: </p>\n\n<blockquote>\n  <p>Conversion to non-scalar type requested </p>\n</blockquote>\n\n<p>Can anyone help me? I am posting the whole code in the following:-</p>\n\n<pre><code>struct graph{\n    int v;\n    int e;\n    struct graph **admat;\n};\n\nvoid main()\n{\n    int x,i,y,z=1,n;\n    struct graph *G=(struct graph **)malloc(sizeof(struct graph));\n    printf(\"\\nenter number of vertices: \");\n    scanf(\"%d\",&amp;G-&gt;v);\n    printf(\"\\nenter number of edges: \");\n    scanf(\"%d\",&amp;G-&gt;e);\n    G-&gt;admat=(struct graph **)malloc(G-&gt;v * sizeof(struct graph *));\n    for(i=0;i&lt;G-&gt;v;i++)\n    {\n        G[i]=(struct graph)malloc(G-&gt;v * sizeof(int));//here is the main error\n    }\n    for(x=0;x&lt;i;x++)\n    {\n        for(y=0;y&lt;i;y++)\n        {\n            G[x][y]=z++;\n        }\n    }\n    for(x=0;x&lt;i;x++)\n    {\n        for(y=0;y&lt;i;y++)\n        {\n            printf(\" %d \",G[x][y]);\n        }\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c", "enumeration", "directory-listing"], "comments": [{"owner": {"reputation": 2375, "user_id": 3985859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34af6d164c53c629e625c11a3d11bbcc?s=128&d=identicon&r=PG&f=1", "display_name": "Karsten Koop", "link": "https://stackoverflow.com/users/3985859/karsten-koop"}, "edited": false, "score": 0, "creation_date": 1493797634, "post_id": 43753886, "comment_id": 74549695, "body": "What happens when you pass <code>&quot;c:\\\\&quot;</code> to the function? What are the &quot;many complicated concepts&quot;?"}, {"owner": {"reputation": 46708, "user_id": 179715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e240f1a5bb197450dfb8934dd55d9e3a?s=128&d=identicon&r=PG", "display_name": "jamesdlin", "link": "https://stackoverflow.com/users/179715/jamesdlin"}, "edited": false, "score": 0, "creation_date": 1493797650, "post_id": 43753886, "comment_id": 74549704, "body": "Where is the code that calls this function?"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1493798723, "post_id": 43753886, "comment_id": 74550349, "body": "It is unclear what you are asking in your question. You should edit it so that it has definitive question (e.g. at least one sentence that naturally ends with a question mark). As is your question will likely receive votes to close for being too broad."}, {"owner": {"reputation": 47440, "user_id": 229410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e0014fcc07d184018d3b8185a85a09?s=128&d=identicon&r=PG", "display_name": "Rohan", "link": "https://stackoverflow.com/users/229410/rohan"}, "edited": false, "score": 0, "creation_date": 1493799829, "post_id": 43753886, "comment_id": 74551015, "body": "Look at <code>FindFirst(), FindNext()</code> apis."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1493800101, "post_id": 43753886, "comment_id": 74551176, "body": "@Toby it isn&#39;t unclear what he is asking: he is asking how to get <code>opendir()</code> to open an arbitrary directory rather than the current one. What we are lacking is an MCVE because the problem is clearly not in this code."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1493800194, "post_id": 43753886, "comment_id": 74551242, "body": "You need to show how you are constructing the parameter to <code>list_dir</code> because, unless <code>opendir</code> is broken on Windows, it should open the directory you supply in the parameter."}, {"owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1493800342, "post_id": 43753886, "comment_id": 74551340, "body": "Since you are on Windows, you might want to check out this answer that uses native Windows functions <a href=\"http://stackoverflow.com/a/884888/169346\">stackoverflow.com/a/884888/169346</a>"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1493802310, "post_id": 43753886, "comment_id": 74552551, "body": "<code>opendir()</code> and the other functions from <code>dirent.h</code> are part of POSIX, so unless you are using SUA on pre-window 8 OS or something similar, POSIX functions will not work directly on Windows AFAIK (depending on your compiler, eg MSVS does not have it IIRC), see <a href=\"http://stackoverflow.com/questions/5530933/dirent-h-in-visual-studio-2010-or-2008\" title=\"dirent h in visual studio 2010 or 2008\">stackoverflow.com/questions/5530933/&hellip;</a>"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "edited": false, "score": 0, "creation_date": 1493802585, "post_id": 43753886, "comment_id": 74552781, "body": "@JeremyP, the <i>problem</i> is clear, the asker is attempting to use a function intended for linux use on a windows system (apparently, we don&#39;t actually have the windows info other than the presence of windows path). But the <i>question</i> is not clear &quot;Can&#39;t understand out of the many complicated concepts, which logic to follow for listing out directory content of any desired directory (C:\\ OR D:\\ whatever) and NOT current directory. If I could be clarified as to what is missed in the code. Want the logic, the methodology so I could then code as I go.&quot; is not a question."}, {"owner": {"reputation": 67, "user_id": 7796377, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dffda50598562c97c4b66b955713995c?s=128&d=identicon&r=PG&f=1", "display_name": "rhym1n", "link": "https://stackoverflow.com/users/7796377/rhym1n"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1493803033, "post_id": 43753886, "comment_id": 74553082, "body": "@Toby &quot;Want the logic, the methodology so I could then code as I go&quot; means that I want to understand how the methodology of invoking the core works and how the result is achieved. That was what I intended to convey, shall I explain my problem more now?"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1493805538, "post_id": 43753886, "comment_id": 74554933, "body": "@rhym1n That would be a good edit :)"}], "owner": {"reputation": 67, "user_id": 7796377, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/dffda50598562c97c4b66b955713995c?s=128&d=identicon&r=PG&f=1", "display_name": "rhym1n", "link": "https://stackoverflow.com/users/7796377/rhym1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493797401, "creation_date": 1493796783, "last_edit_date": 1493797401, "question_id": 43753886, "link": "https://stackoverflow.com/questions/43753886/unable-to-list-directory-content-for-all-file-types-in-c-using-c-program", "title": "unable to list directory content for all file types in C:\\ using C program", "body": "<p>This is a C snippet I'm looking at</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;dirent.h&gt;\n#include &lt;types.h&gt;\n\nstatic void list_dir(const char *path)\n{\n    struct dirent *entry;\n    DIR *dir = opendir(path);\n    if (dir == NULL) {\n        return;\n    }\n\n    while ((entry = readdir(dir)) != NULL) {\n        printf(\"%s\\n\",entry-&gt;d_name);\n    }\n\n    closedir(dir);\n}\n</code></pre>\n\n<p>Can't understand out of the many complicated concepts, which logic to follow for listing out directory content of any desired directory (C:\\ OR D:\\ whatever) and NOT current directory.</p>\n\n<p>If I could be clarified as to what is missed in the code. Want the logic, the methodology so I could then code as I go. </p>\n"}, {"tags": ["c", "websocket", "zlib", "deflate"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7212145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a00e02eb97e3998fbf442a704673e34?s=128&d=identicon&r=PG&f=1", "display_name": "Kamlesh Hingwe", "link": "https://stackoverflow.com/users/7212145/kamlesh-hingwe"}, "is_accepted": true, "score": 0, "last_activity_date": 1505797341, "creation_date": 1505797341, "answer_id": 46292167, "question_id": 43753806, "link": "https://stackoverflow.com/questions/43753806/how-to-encode-and-decode-websocket-permessage-deflate-using-zlib-library-in-c/46292167#46292167", "title": "How to Encode and Decode websocket permessage-deflate using zlib library in C?", "body": "<p>The code is correct but <strong>defstream.avail_in</strong> expect exact length, not for the extra null character. If you will provide exact input length it will work properly. Try like this</p>\n\n<pre><code>int l = (uInt)strlen(a);\ndefstream.avail_in = l; // size of input, string + terminator\n</code></pre>\n\n<p>Please try to understand how z_stream is assigning value check the code then you will better understand about this.</p>\n\n<p>I think many people are trying the decode and they are not getting proper value for per-message-deflate.</p>\n\n<p>Check your output </p>\n\n<p>\"<strong>789CAA562AA92C4855B252CA4D2D2E4E4C4F55D2514ACE48CCCB4BCD18A391B98841AB8593A873454B522B4A804221A9C5259979E9BE70D599294A56E6A6E6B5C0000FFFF2E</strong>\"</p>\n\n<p>Here <strong>789C</strong> is header and <strong>0000FFFF or according to your code (00FFFF)</strong> is the trailer of deflate message. here 0 is for 00 because your output is print one '0' instead of '00'. you are getting 5C extra because of extra one size. Thye '2E' will also will be removed when you will try below code</p>\n\n<pre><code>int d = memcmp(msgend, &amp;b[defstream.total_out - 4], 4) ? 0 : 4;\nfor(i=0;i&lt;defstream.total_out - d;i++)\n{\n        printf(\"%2X\",(Bytef)b[i]);\n}\n</code></pre>\n\n<p>So your expected answer is  </p>\n\n<p>\"<strong>AA562AA92C4855B252CA4D2D2E4E4C4F55D2514ACE48CCCB4BCD018A391B98841AB8593A8703454B522B4A804221A9C5259979E9BE70D599294A56E6A6E6B50000</strong>\"</p>\n\n<p>As per your output, 2 bytes are 0 so as per your code it will be '00' and your output follow printing each nibble (half byte).  </p>\n\n<p>Please try this is worked for me and I am now able to decode properly.</p>\n"}], "owner": {"reputation": 43, "user_id": 7212145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a00e02eb97e3998fbf442a704673e34?s=128&d=identicon&r=PG&f=1", "display_name": "Kamlesh Hingwe", "link": "https://stackoverflow.com/users/7212145/kamlesh-hingwe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1786, "favorite_count": 2, "accepted_answer_id": 46292167, "answer_count": 1, "score": 4, "last_activity_date": 1505797341, "creation_date": 1493796576, "question_id": 43753806, "link": "https://stackoverflow.com/questions/43753806/how-to-encode-and-decode-websocket-permessage-deflate-using-zlib-library-in-c", "title": "How to Encode and Decode websocket permessage-deflate using zlib library in C?", "body": "<p>All \nI am trying to encode WebSocket payload using per-message-deflate. I am trying to use some test code but my encoding is not proper can you please help me. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>char a[180] = \"{\\\"type\\\":\\\"message\\\",\\\"channel\\\":\\\"C04U0F9CW\\\",\\\"text\\\":\\\"TestingMessage\\\",\\\"id\\\":757}\";\nchar b[180];\nchar c[180];\nint i;\n// deflate\n// zlib struct\nz_stream defstream;\ndefstream.zalloc = Z_NULL;\ndefstream.zfree = Z_NULL;\ndefstream.opaque = Z_NULL;\ndefstream.avail_in = (uInt)strlen(a)+1; // size of input, string + terminator\ndefstream.next_in = (Bytef *)a; // input char array\ndefstream.avail_out = (uInt)sizeof(b); // size of output\ndefstream.next_out = (Bytef *)b; // output char array\n\n//deflateInit(&amp;defstream, Z_SYNC_FLUSH);\ndeflateInit2(&amp;defstream, Z_DEFAULT_COMPRESSION, Z_DEFLATED, 15, 8, Z_DEFAULT_STRATEGY);\ndeflate(&amp;defstream, Z_SYNC_FLUSH);\ndeflateEnd(&amp;defstream);\nfor(i=0;i&lt;=(char*)defstream.next_out - b;i++)\n{\n        printf(\"%X\",(Bytef)b[i]);\n}\nprintf(\"\\n%s\\n\",(Bytef *)b);\n// This is one way of getting the size of the output\nprintf(\"Deflated size is: %lu\\n\", (char*)defstream.next_out - b);\n</code></pre>\n\n<p>my output is </p>\n\n<pre><code>kml@kml-VirtualBox:~/zlib-1.2.11/test$ gcc test.c -lz &amp;&amp; ./a.out \n789CAA562AA92C4855B252CA4D2D2E4E4C4F55D2514ACE48CCCB4BCD18A391B98841AB8593A873454B522B4A804221A9C5259979E9BE70D599294A56E6A6E6B5C0000FFFF2E\nx\ufffd\ufffdV*\ufffd,HU\ufffdR\ufffdM-.NLOU\ufffdQJ\ufffdH\ufffd\ufffdK\ufffd\ufffd9\ufffd\ufffd\ufffdY:\ufffdEKR+J\ufffdB!\ufffd\ufffd%\ufffdy\ufffd\ufffdp\u0559)JV\ufffd\ufffd\ufffd\ufffd\n\nDeflated size is: 72\nInflate:\n73\n{\"type\":\"message\",\"channel\":\"C04U0F9CW\",\"text\":\"TestingMessage\",\"id\":757}\n</code></pre>\n\n<p>So I am expecting payload will me like this</p>\n\n<pre><code>AA562AA92C4855B252CA4D2D2E4E4C4F55D2514ACE48CCCB4BCD018A391B98841AB8593A8703454B522B4A804221A9C5259979E9BE70D599294A56E6A6E6B50000\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/LfslZ.png\" rel=\"nofollow noreferrer\">This is the fiddler WebSocket traffic capture for that particular message</a></p>\n\n<p>Please help me out to get proper per-message-deflate encoding.</p>\n\n<pre><code>Here is some more upgrade information\nGET https://127.0.0.1/websoc.html HTTP/1.1\nHost: mpmulti-yklu.slack-msgs.com\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate, br\nSec-WebSocket-Version: 13\nSec-WebSocket-Extensions: permessage-deflate\nSec-WebSocket-Key: FriWg0AWhiLhLXXnfJK8kA==\nConnection: keep-alive, Upgrade\nPragma: no-cache\nCache-Control: no-cache\nUpgrade: websocket\n</code></pre>\n\n<p>Response</p>\n\n<pre><code>HTTP/1.1 101 Switching Protocols\nUpgrade: websocket\nConnection: Upgrade\nSec-WebSocket-Accept: S2Q+O/tRM0/mIG//Er2hDdqD0eY=\nSec-Websocket-Extensions: permessage-deflate; server_no_context_takeover; client_no_context_takeover\nX-Via: haproxy-ext90\n</code></pre>\n"}, {"tags": ["c", "linux", "terminal"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "edited": false, "score": 0, "creation_date": 1493796584, "post_id": 43753763, "comment_id": 74549076, "body": "chcp is from Windows. It has no effect on Ubuntu. Can you use UTF-8 locale?"}, {"owner": {"reputation": 158, "user_id": 6127999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ldqO.jpg?s=128&g=1", "display_name": "Danae Vogiatzi", "link": "https://stackoverflow.com/users/6127999/danae-vogiatzi"}, "edited": false, "score": 0, "creation_date": 1493796724, "post_id": 43753763, "comment_id": 74549152, "body": "Yes, I kinda figured that ... Can I use a UTF-8 locale where?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "edited": false, "score": 0, "creation_date": 1493796785, "post_id": 43753763, "comment_id": 74549184, "body": "Can you use UTF-8 locale in your terminal?"}, {"owner": {"reputation": 158, "user_id": 6127999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ldqO.jpg?s=128&g=1", "display_name": "Danae Vogiatzi", "link": "https://stackoverflow.com/users/6127999/danae-vogiatzi"}, "edited": false, "score": 0, "creation_date": 1493796937, "post_id": 43753763, "comment_id": 74549280, "body": "in my locale I see: <code>LANG=el_GR.UTF-8 LANGUAGE=en_US:en </code> and all the LC_ are set to el_GR.UTF-8"}, {"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "edited": false, "score": 0, "creation_date": 1493797523, "post_id": 43753763, "comment_id": 74549635, "body": "It seems you can. Although in my locale utf-8 has a different name: LANG=en_US.utf8. So you can try to create a source file in UTF-8, compile it  and everything might be fine: <code>$ file main.cpp</code>,  <code>main.cpp: C source, UTF-8 Unicode text</code>"}, {"owner": {"reputation": 158, "user_id": 6127999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ldqO.jpg?s=128&g=1", "display_name": "Danae Vogiatzi", "link": "https://stackoverflow.com/users/6127999/danae-vogiatzi"}, "edited": false, "score": 0, "creation_date": 1493797985, "post_id": 43753763, "comment_id": 74549896, "body": "I get this <code>exercise4.c: C source, UTF-8 Unicode text, with CRLF line terminators</code> but still I get the \ufffd\ufffd\ufffd\ufffd\ufffd"}, {"owner": {"user_type": "does_not_exist", "display_name": "user184968"}, "edited": false, "score": 0, "creation_date": 1493798253, "post_id": 43753763, "comment_id": 74550082, "body": "Can you actually print your greek characters in your terminal. I mean when you switch keyboard with Ctrl-Shift or Alt-Shift or whatever you use for switching keyboard?"}, {"owner": {"reputation": 158, "user_id": 6127999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ldqO.jpg?s=128&g=1", "display_name": "Danae Vogiatzi", "link": "https://stackoverflow.com/users/6127999/danae-vogiatzi"}, "edited": false, "score": 0, "creation_date": 1493798479, "post_id": 43753763, "comment_id": 74550206, "body": "well yes, I can type greek in the terminal and I can also see the files with the greek namesfor example."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493798735, "post_id": 43753763, "comment_id": 74550358, "body": "You must call <code>setlocale(LC_ALL,&quot;&quot;)</code> at the beginning of your program."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493799433, "post_id": 43753763, "comment_id": 74550781, "body": "You also have to make sure your source is indeed in UTF-8 (it should normally be the case if you typed it yourself or copied/pasted from the paper). <code>cat yourprogram.c</code> in the terminal should show Greek string literals embedded in the code correctly."}, {"owner": {"reputation": 158, "user_id": 6127999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ldqO.jpg?s=128&g=1", "display_name": "Danae Vogiatzi", "link": "https://stackoverflow.com/users/6127999/danae-vogiatzi"}, "edited": false, "score": 0, "creation_date": 1493800112, "post_id": 43753763, "comment_id": 74551182, "body": "did the setlocale(LC_ALL,&quot;el_GR). Nothing. <code>cat</code> shows \ufffd\ufffd\ufffd\ufffd\ufffd still ."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493801958, "post_id": 43753763, "comment_id": 74552318, "body": "Don&#39;t know how <code>&quot;el_GR)</code> compiles, call <code>setlocale(LC_ALL, &quot;&quot;)</code> (nothing between the quotes). Also, are you using wide character literals? Are you using clang? Post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 158, "user_id": 6127999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ldqO.jpg?s=128&g=1", "display_name": "Danae Vogiatzi", "link": "https://stackoverflow.com/users/6127999/danae-vogiatzi"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493803461, "post_id": 43753763, "comment_id": 74553402, "body": "@n.m. I typed some greek myself and the work just fine with the setlocale(LC_ALL,&quot;&quot;).  it was the code template I suppose that we were given.  Do you mind typing an answer so I can mark it correct and close this post? thanks for your help!"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493803735, "post_id": 43753763, "comment_id": 74553606, "body": "Your template must be in a legacy 8bit encoding rarher than UTF-8."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1493805165, "post_id": 43753763, "comment_id": 74554682, "body": "Answer posted but I don&#39;t really know what was the real reason for question marks. C source encoded as UTF-8 should probably work even without the call to setlocale (it is still recommended to make this call)."}], "answers": [{"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1493805043, "creation_date": 1493805043, "answer_id": 43756671, "question_id": 43753763, "link": "https://stackoverflow.com/questions/43753763/c-printing-greek-letters-in-linux-terminal/43756671#43756671", "title": "C - printing greek letters in linux terminal", "body": "<p>This is supported out of the box in most Linuxes. The only thing one must do is use </p>\n\n<pre><code> setlocale(LC_ALL, \"\");\n</code></pre>\n\n<p>in the beginning of the program. This relies on the fact that UTF-8 is the default choice of encoding for users' locales. The standard says that this call switches to user's current locale. The default is to use the \"C\" locale which may or may not support national characters.</p>\n\n<p>By default gcc interprets the source code as encoded in UTF-8. Compile-time options exist to change that, but it is recommendedd to keep everything in UTF-8 on Linux. Sources that come from Windows are probably not encoded in UTF-8 and need to be recoded. Use the <code>iconv</code> utility for that;l. If the source is associated with a particular legacy code page, try that code page name as the source encoding. </p>\n"}, {"tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": false, "score": 1, "last_activity_date": 1493846697, "creation_date": 1493846697, "answer_id": 43770266, "question_id": 43753763, "link": "https://stackoverflow.com/questions/43753763/c-printing-greek-letters-in-linux-terminal/43770266#43770266", "title": "C - printing greek letters in linux terminal", "body": "<p>A C program (comforming to ISO C99 or later, or POSIX.1 or later) that inputs or outputs non-ASCII text should use wide strings, wide I/O, and localization. </p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;locale.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;wchar.h&gt;\n\nint main(void)\n{\n\n    /* Tell the C library to use the current locale settings. */\n    setlocale(LC_ALL, \"\");\n\n    /* Standard output is used with the wide I/O functions. */\n    fwide(stdout, 1);\n\n    /* Print some Greek text. */\n    wprintf(L\"\u0393\u03b5\u03b9\u03ac \u03c3\u03bf\u03c5 \u039a\u03cc\u03c3\u03bc\u03b5!\\n\");\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>Note that wide string literals are written using <code>L\"...\"</code> whereas normal (ASCII or narrow) string literals as <code>\"...\"</code>. Similarly, wide character constants (of type <code>wint_t</code>) are written with the <code>L</code> prefix; for example, <code>L'\u20ac'</code>.</p>\n\n<hr>\n\n<p>When compiling, you do need to tell the compiler what character set the source code uses. In Linux, GCC uses the locale settings, but also provides an option <code>-finput-charset=windows-1252</code> to change it to Windows Western European, for example.</p>\n\n<p>Rather than fiddle with the flags, I recommend you write a Bash helper script, say <code>to-utf8</code>:</p>\n\n<pre><code>#!/bin/bash\n\nif [ $# -lt 2 ] || [ \":$1\" = \":-h\" ] || [ \":$1\" = \":--help\" ]; then\n    printf '\\n'\n    printf 'Usage: %s [ -h | --help ]\\n' \"$0\"\n    printf '       %s windows-1252 file.c [ ... ]\\n' \"$0\"\n    printf '\\n'\n    exit 0\nfi\n\ncharset=\"$1\"\nshift 1\n\nWork=$(mktemp) || exit 1\ntrap \"rm -f '$Work'\" EXIT\n\nfor src in \"$@\" ; do\n    iconv -f \"$charset//TRANSLIT\" -t UTF-8 \"$src\" &gt; \"$Work\" || exit $?\n    sed -e 's|\\r$||' \"$Work\" &gt; \"$src\" || exit $?\n    printf '%s: Converted successfully.\\n' \"$src\"\ndone\n\nexit 0\n</code></pre>\n\n<p>If you want, you can install that system-wide using</p>\n\n<pre><code>sudo install -o 0 -g 0 -m 0755 to-utf8 /usr/bin/\n</code></pre>\n\n<p>The first command-line parameter is the source character set (use <code>iconv --list</code> to see them all), followed by a list of files to fix.</p>\n\n<p>The script creates an automatically deleted temporary file. The <code>iconv</code> line converts the character set of each file to UTF-8, saving the result into the temporary file. The <code>sed</code> file changes any CRLF (<code>\\r\\n</code>) newlines to LF (<code>\\n</code>), overwriting the contents of the file.</p>\n\n<p>(Rather than use a second temporary file to hold the contents, having <code>sed</code> to direct its output to the original file, means the original file keeps its owner and group intact.)</p>\n"}], "owner": {"reputation": 158, "user_id": 6127999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5ldqO.jpg?s=128&g=1", "display_name": "Danae Vogiatzi", "link": "https://stackoverflow.com/users/6127999/danae-vogiatzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 1, "accepted_answer_id": 43756671, "answer_count": 2, "score": -1, "last_activity_date": 1493846697, "creation_date": 1493796440, "last_edit_date": 1493796572, "question_id": 43753763, "link": "https://stackoverflow.com/questions/43753763/c-printing-greek-letters-in-linux-terminal", "title": "C - printing greek letters in linux terminal", "body": "<p>I have this paper, on C language, which requires some greek sentences to be printed in the terminal. \nIn the code template that is given to us there is this line of code:</p>\n\n<p><code>system(\"chcp 1253&gt;nul\");</code></p>\n\n<p>This is supposed to print the greek characters. \nIn my Ubuntu Terminal I see:</p>\n\n<pre><code>\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\n</code></pre>\n\n<p>So, how can I print greek characters in my terminal? </p>\n"}, {"tags": ["c", "cross-compiling", "autoconf"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1539001551, "post_id": 43753707, "comment_id": 92330982, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/15234959/608639\">Cross-compiling for ARM with Autoconf</a>."}], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "edited": false, "score": 0, "creation_date": 1493801264, "post_id": 43753877, "comment_id": 74551875, "body": "It was able to find the crosscompile toolchains but another error came : error adding symbols: File format not recognized. Please see the edit"}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "edited": false, "score": 1, "creation_date": 1493802513, "post_id": 43753877, "comment_id": 74552726, "body": "The library I am compiling has another library inside . Through autoconf of the parent library , the child library autoconf is also being done. But in that case it is not taking arm crosstool from autocong. it is compiling with cc, not arm gcc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "reply_to_user": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "edited": false, "score": 1, "creation_date": 1493804140, "post_id": 43753877, "comment_id": 74553902, "body": "@ninja.stop That&#39;s something that would be better explored in a different question because additional details are needed (maybe it&#39;s a known issue with the library you&#39;re compiling?), but <a href=\"https://dev.eclipse.org/mhonarc/lists/tinydtls-dev/msg00061.html\" rel=\"nofollow noreferrer\">this mailing list thread</a> might be a good start."}, {"owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "edited": false, "score": 0, "creation_date": 1493876947, "post_id": 43753877, "comment_id": 74590399, "body": "True. It is a problem of that library indeed. Mailed them. As per the authors it is patched. let&#39;s see. BTW, thanks for the help :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "is_accepted": true, "score": 2, "last_activity_date": 1493796755, "creation_date": 1493796755, "answer_id": 43753877, "question_id": 43753707, "link": "https://stackoverflow.com/questions/43753707/cross-compiling-with-autoconf/43753877#43753877", "title": "cross compiling with autoconf", "body": "<p>Ensure the directory containing your toolchain's binaries is in your <code>$PATH</code>:</p>\n\n<pre><code>export OLDPATH=$PATH\nexport PATH=$OLDPATH:/opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin\n</code></pre>\n\n<p>You should only need to do that once, unless you log out or otherwise exit that terminal session.</p>\n\n<p>With that done, you can configure properly:</p>\n\n<pre><code>./configure \\\n    --build=x86_64-linux-gnu \\\n    --host=arm-linux-gnueabihf \\\n    --target=arm-linux-gnueabihf \\\n    --disable-shared \\\n    --disable-documentation\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 3933263, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/478a5e32605c69508b63fc1177353bcc?s=128&d=identicon&r=PG&f=1", "display_name": "ninja.stop", "link": "https://stackoverflow.com/users/3933263/ninja-stop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4635, "favorite_count": 0, "accepted_answer_id": 43753877, "answer_count": 1, "score": 2, "last_activity_date": 1493877047, "creation_date": 1493796250, "last_edit_date": 1495540028, "question_id": 43753707, "link": "https://stackoverflow.com/questions/43753707/cross-compiling-with-autoconf", "title": "cross compiling with autoconf", "body": "<p>I was trying to cross compile with autoconf.\nI had tried from these helps :</p>\n\n<ol>\n<li><p><a href=\"https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Hosts-and-Cross_002dCompilation.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/autoconf/manual/autoconf-2.69/html_node/Hosts-and-Cross_002dCompilation.html</a></p></li>\n<li><p><a href=\"https://www.gnu.org/software/autoconf/manual/autoconf-2.65/html_node/Specifying-Target-Triplets.html\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/autoconf/manual/autoconf-2.65/html_node/Specifying-Target-Triplets.html</a></p></li>\n<li><a href=\"https://github.com/jedisct1/libsodium/issues/274\" rel=\"nofollow noreferrer\">https://github.com/jedisct1/libsodium/issues/274</a></li>\n<li><a href=\"https://stackoverflow.com/questions/15234959/cross-compiling-for-arm-with-autoconf\">Cross Compiling For ARM With Autoconf</a></li>\n</ol>\n\n<p>And did -</p>\n\n<pre><code>./configure --build=x86_64-linux-gnu --host=/opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf --target=/opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf --disable-shared --disable-documentation\n</code></pre>\n\n<p>But after autoconf tool checking for the gcc and other things necessary for compilation it doesn't find these. Although they are already present in the directory.</p>\n\n<p>So the log is :</p>\n\n<pre><code>checking for a BSD-compatible install... /usr/bin/install -c\nchecking whether build environment is sane... yes\nchecking for /opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-strip... no\nchecking for strip... strip\nconfigure: WARNING: using cross tools not prefixed with host triplet\nchecking for a thread-safe mkdir -p... /bin/mkdir -p\nchecking for gawk... gawk\nchecking whether make sets $(MAKE)... yes\nchecking whether make supports nested variables... yes\nchecking for /opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-gcc... no\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... yes\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\nchecking whether gcc understands -c and -o together... yes\nchecking for style of include used by make... GNU\nchecking dependency style of gcc... gcc3\nchecking for /opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-ar... no\nchecking for /opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-lib... no\nchecking for /opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-link... no\nchecking for ar... ar\nchecking the archiver (ar) interface... ar\nchecking build system type... x86_64-pc-linux-gnu\nchecking host system type... Invalid configuration `/opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf': machine `/opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm' not recognized\nconfigure: error: /bin/bash ./config.sub /opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf failed\n</code></pre>\n\n<p>This is the directory for all arm toolchain bin</p>\n\n<pre><code>host@ubuntu:/opt/toolchains/gcc-linaro-5.4.1-2017.01-x86_64_arm-linux-gnueabihf/bin$ ls\narm-linux-gnueabihf-addr2line  arm-linux-gnueabihf-gcc         arm-linux-gnueabihf-gfortran  arm-linux-gnueabihf-readelf\narm-linux-gnueabihf-ar         arm-linux-gnueabihf-gcc-5.4.1   arm-linux-gnueabihf-gprof     arm-linux-gnueabihf-size\narm-linux-gnueabihf-as         arm-linux-gnueabihf-gcc-ar      arm-linux-gnueabihf-ld        arm-linux-gnueabihf-strings\narm-linux-gnueabihf-c++        arm-linux-gnueabihf-gcc-nm      arm-linux-gnueabihf-ld.bfd    arm-linux-gnueabihf-strip\narm-linux-gnueabihf-c++filt    arm-linux-gnueabihf-gcc-ranlib  arm-linux-gnueabihf-nm        gdbserver\narm-linux-gnueabihf-cpp        arm-linux-gnueabihf-gcov        arm-linux-gnueabihf-objcopy   runtest\narm-linux-gnueabihf-elfedit    arm-linux-gnueabihf-gcov-tool   arm-linux-gnueabihf-objdump\narm-linux-gnueabihf-g++        arm-linux-gnueabihf-gdb         arm-linux-gnueabihf-ranlib\n</code></pre>\n\n<p>Any suggestion?</p>\n\n<p><strong>EDIT</strong>\nI tried the solution suggested by Chrono. It was able to find arm toolchain. But another problem arised :</p>\n\n<p>error adding symbols: File format not recognized</p>\n\n<pre><code>libtool: link: arm-linux-gnueabihf-gcc -shared  -fPIC -DPIC  src/.libs/libcoap_1_la-address.o src/.libs/libcoap_1_la-async.o src/.libs/libcoap_1_la-block.o src/.libs/libcoap_1_la-coap_dtls.o src/.libs/libcoap_1_la-coap_event.o src/.libs/libcoap_1_la-coap_keystore.o src/.libs/libcoap_1_la-coap_time.o src/.libs/libcoap_1_la-debug.o src/.libs/libcoap_1_la-encode.o src/.libs/libcoap_1_la-hashkey.o src/.libs/libcoap_1_la-mem.o src/.libs/libcoap_1_la-net.o src/.libs/libcoap_1_la-option.o src/.libs/libcoap_1_la-pdu.o src/.libs/libcoap_1_la-resource.o src/.libs/libcoap_1_la-str.o src/.libs/libcoap_1_la-subscribe.o src/.libs/libcoap_1_la-uri.o src/platform/posix/.libs/libcoap_1_la-coap_io.o src/platform/posix/.libs/libcoap_1_la-prng.o src/platform/posix/.libs/libcoap_1_la-run.o   -L./ext/tinydtls -ltinydtls  -g -O2 -Wl,--version-script=./libcoap-1.map   -Wl,-soname -Wl,libcoap-1.so.0 -o .libs/libcoap-1.so.0.0.0\n</code></pre>\n\n<p>For this line of compilation the error is :</p>\n\n<pre><code>./ext/tinydtls/libtinydtls.a: error adding symbols: File format not recognized\n</code></pre>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>The problem was with the library it is not passing the cross compiler params to the autoconf properly, hence the issue.</p>\n"}, {"tags": ["c", "struct", "language-lawyer", "padding"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1493796486, "post_id": 43753562, "comment_id": 74549005, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/24182472/memory-allocation-for-structures-elements\">memory allocation for structures elements</a>"}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1493796565, "post_id": 43753562, "comment_id": 74549067, "body": "@user694733 <b>I don&#39;t think so.</b> I&#39;m reasoning with the standard, there&#39;s the difference."}], "answers": [{"comments": [{"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1493796160, "post_id": 43753587, "comment_id": 74548806, "body": "Why did the standard <b>only</b> talk about the possible padding at the end...? I&#39;m confused."}, {"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "reply_to_user": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1493796268, "post_id": 43753587, "comment_id": 74548860, "body": "@Il-seobBae: quoting your quote &quot;There may be unnamed padding <b>within a structure</b> object."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 0, "creation_date": 1493796310, "post_id": 43753587, "comment_id": 74548885, "body": "@Kay Well, I thought that\u2014what they mean by &quot;within a structure&quot;\u2014was covered by the second quote."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1493796833, "post_id": 43753587, "comment_id": 74549219, "body": "If we stick to the literal meaning, it seems you&#39;re right. It&#39;s irony. For the portability, I cannot use the most fundamental constructs (including bit-fields) designed for the sake of programmers. Then, I would do the same thing as the assembly language would do."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 1, "creation_date": 1493803505, "post_id": 43753587, "comment_id": 74553440, "body": "@Il-seobBae For portability, you can&#39;t even use raw <code>int</code> values."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493803642, "post_id": 43753587, "comment_id": 74553542, "body": "@AndrewHenle I mean the portability of a source code (not a binary file) for &quot;bit packing&quot;."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 1, "creation_date": 1493803729, "post_id": 43753587, "comment_id": 74553601, "body": "@Il-seobBae <i>I mean portability for &quot;bit packing&quot;.</i> Why would you even expect things like structure layout to be portable in any way?  Different implementations not only have different alignment requirements, they can have different <i>sizes</i> for the same data types.  They can even have a different number of bits per byte."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493803824, "post_id": 43753587, "comment_id": 74553673, "body": "@AndrewHenle It would be great if the language (the standard) supports some constructs for fixed layout. The rest is the compiler&#39;s job."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 1, "creation_date": 1493803934, "post_id": 43753587, "comment_id": 74553762, "body": "@Il-seobBae are you looking for fixed-width data types? They are already there, AFAIK."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1493804318, "post_id": 43753587, "comment_id": 74554046, "body": "@SouravGhosh Of course, I know that. However, even with those types, we need to do bit-wise operations for bit-packing. What I want a (high-level) programming language to be, along with conveniently accessing small bits with a name, the alignment is guaranteed to be fixed. If the standard does that, the compiler has to comply with these requirements."}, {"owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "edited": false, "score": 0, "creation_date": 1493804542, "post_id": 43753587, "comment_id": 74554213, "body": "@SouravGhosh I&#39;m not saying all the objects in a language should get a fixed alignment. It would be nice if the language supports it when the programmer wants it. The portable bit-packing in c is just like an assembly code... Anyway, it&#39;s just my opinion."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493843955, "post_id": 43753587, "comment_id": 74580587, "body": "@AndrewHenle: Structure layouts cannot be presumed to be portable between vastly different architectures, but quality compilers for similar architectures should lay out structures the same way in the absence of a compelling reason to do otherwise.  The Standard defers to implementers&#39; judgments since it makes no effort to define how a <i>quality</i> implementation behave, nor what characteristics would make a compiler suitable or unsuitable for any purpose beyond those that can be effectively served by all architectures, including the most obscure ones."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1493890753, "post_id": 43753587, "comment_id": 74598872, "body": "@supercat &quot;Quality compiler&quot;?  That&#39;s entirely subjective.  How much experience do you have on non-x86 architectures where alignment differences can have significant performance impacts?  Where <i>the same compiler</i> can produce differently-aligned versions of the same structure based nothing more than different optimization options?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493910224, "post_id": 43753587, "comment_id": 74613402, "body": "@AndrewHenle: I said &quot;in the absence of a compelling reason to do otherwise&quot;.  What reasons are compelling would be a matter of implementer&#39;s judgment, but an implementer who is seeking to produce a quality product should seek to exercise good judgment.  If there are four implementations on a platform that all use the same layout rules, a compiler which uses arbitrarily-different rules <i>for no discernible reason</i> should be viewed as lower quality than one which matches the others, but a quality compiler might use different behavior <i>if it documents a compelling reason for the difference</i>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1493910610, "post_id": 43753587, "comment_id": 74613745, "body": "@AndrewHenle: It&#39;s unfortunate that the Standard doesn&#39;t specify any predefined macros that would indicate whether an implementation consistently uses &quot;common&quot; layout rules (place all objects at the first location satisfying alignment (for arrays, the first location satisfying member alignment).  Although other layouts might be more efficient on some platforms, it&#39;s useful to be able to have functions that can e.g. operate upon any structure of the form <code>struct {size_t size; thing_type  items[someNumber];}</code>.  Flexible array members are only useful for objects of heap duration..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1493910959, "post_id": 43753587, "comment_id": 74613995, "body": "...but on the 99% of implementations where the offset of <code>items</code> would be unaffected by its size, it should be easy to have a function operate on structures of that form without the compiler having to know or care about the exact type involved.  Such constructs certainly used to be commonplace and not even remotely controversial and there&#39;s no reason the language should devolve to make them unusable."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 5, "last_activity_date": 1493796287, "last_edit_date": 1493796287, "creation_date": 1493795892, "answer_id": 43753587, "question_id": 43753562, "link": "https://stackoverflow.com/questions/43753562/is-it-safe-to-expect-there-will-be-no-padding-between-members/43753587#43753587", "title": "Is it safe to expect there will be no padding between members?", "body": "<p>No, you cannot conclude that there would be no padding between members.</p>\n\n<p>The first quote says,</p>\n\n<blockquote>\n  <p>... There may be unnamed padding <strong>within a structure object</strong>, but not at its beginning.</p>\n</blockquote>\n\n<p>Which makes clear that there can be padding within the members. It was actually not clear about what happens <em>at the end</em>. So, to clear that up, the second quote says</p>\n\n<blockquote>\n  <p><em>There may be unnamed padding at the end of a structure or union.</em></p>\n</blockquote>\n\n<p>This <strong>does not</strong> say, there cannot be padding between members. It's not <strong>only</strong> at end, it may, or may not be there, based on existing member alignment.</p>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1493972687, "last_edit_date": 1495542374, "creation_date": 1493972347, "answer_id": 43799935, "question_id": 43753562, "link": "https://stackoverflow.com/questions/43753562/is-it-safe-to-expect-there-will-be-no-padding-between-members/43799935#43799935", "title": "Is it safe to expect there will be no padding between members?", "body": "<p>No, you cannot assume there will be no padding between fields of the same structure.  By the way, your example will have most probably some padding between the two fields of your struct:</p>\n\n<pre><code>struct s {\n    char c;\n    /* most probably, you'll get padding here */\n    int a;\n};\n</code></pre>\n\n<p>the reason for that is that you'll need to have the access to the <code>a</code> field aligned with some architecture constraint (for example a  multiple of <code>sizeof int</code> address).  Intel processors are notably not requiring this, but most of other architectures force a misalignment to raise some kind of exception (you'll see <code>SIGBUS</code> signal on unix, tipically) that results in a program error. See <a href=\"https://stackoverflow.com/questions/43766161/is-it-guaranteed-that-array-elements-in-c-will-be-stored-consecutively-with-no/43797780#43797780\">Is it guaranteed that array elements in C will be stored consecutively, with no padding?</a> and you'll get some idea of the problem behind.</p>\n\n<p>Anyway, intel processors solve the problem by doing <em>two</em> external bus requests for each misaligned <code>int</code>, and discarding the unneeded data.  The reason is that for a processor with a wordsize of four bytes (typicall in 32bit architectures) there are no A0 and A1 address lines (they have four bus-slice-enable lines, or nothing at all) and they access the bus to read the whole word and then discard the data they don't need.  A four bytes <code>int</code> value misaligned would have part of the value in one address and the rest in the next/previous address.  Other architectures just fire a trap and allow the operating system to get in charge of this.</p>\n"}], "owner": {"reputation": 2256, "user_id": 5645940, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2449971e95f183f145fb903b00c56b22?s=128&d=identicon&r=PG&f=1", "display_name": "b1sub", "link": "https://stackoverflow.com/users/5645940/b1sub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 43753587, "answer_count": 2, "score": 2, "last_activity_date": 1493972687, "creation_date": 1493795821, "last_edit_date": 1493798005, "question_id": 43753562, "link": "https://stackoverflow.com/questions/43753562/is-it-safe-to-expect-there-will-be-no-padding-between-members", "title": "Is it safe to expect there will be no padding between members?", "body": "<p>As stated by the C11 draft, I can assure these two:</p>\n\n<ol>\n<li><blockquote>\n  <p>... There may be unnamed padding within a structure object, <strong>but not at its beginning</strong>.</p>\n</blockquote></li>\n<li><blockquote>\n  <p>There may be unnamed padding <strong>at the end of a structure or union</strong>.</p>\n</blockquote></li>\n</ol>\n\n<p>However, it's ambiguous to me if a padding between any two members is acceptable. <strong>It's because, by saying the second paragraph, the standard seems to insinuate the padding is only possible at the end of a structure or union.</strong> For example, assuming <code>int</code> occupies 4 bytes here,</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct s {\n    char c;\n    int a;\n};\n\nint main(void) {\n    printf(\"%d\\n\", sizeof(struct s));\n    return 0;\n}\n</code></pre>\n\n<p>am I safe to conclude that there would be no padding between <code>c</code> and <code>a</code>?</p>\n"}, {"tags": ["c++", "c", "gcc", "compilation", "g++"], "comments": [{"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1493796024, "post_id": 43753537, "comment_id": 74548711, "body": "Maybe option <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html\" rel=\"nofollow noreferrer\"><code>-isystem</code></a> can help you."}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "reply_to_user": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1493796097, "post_id": 43753537, "comment_id": 74548767, "body": "Use <code>&lt;header&gt;</code> for system (<i>e.g.</i> standard library <i>and external dependencies not part of your particular project</i>) headers and <code>&quot;header&quot;</code> for non-system (<i>e.g.</i> project) headers. To add system header paths, use <code>-isystem</code> as @piwi mentioned."}, {"owner": {"reputation": 2112, "user_id": 936882, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6476637d98fa2fa33bfdeb528f5e969c?s=128&d=identicon&r=PG", "display_name": "lucaboni", "link": "https://stackoverflow.com/users/936882/lucaboni"}, "edited": false, "score": 0, "creation_date": 1493796787, "post_id": 43753537, "comment_id": 74549186, "body": "That doesn&#39;t work in my case. I have to build unit tests in Cygwin for some drivers of an embedded OS. So the <code>&lt;header&gt;</code> of the embedded OS are seen as the header files of Cygwin, which is wrong and won&#39;t even being found."}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 1, "creation_date": 1493797003, "post_id": 43753537, "comment_id": 74549328, "body": "How does it &quot;not work&quot;? This is exactly what <code>-isystem</code> does, it appends to the <i>system</i> include path. (In addition, should you not be using a cross-compiler, which presumably already has the correct system headers, if you are cross-compiling?)"}, {"owner": {"reputation": 2112, "user_id": 936882, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6476637d98fa2fa33bfdeb528f5e969c?s=128&d=identicon&r=PG", "display_name": "lucaboni", "link": "https://stackoverflow.com/users/936882/lucaboni"}, "edited": false, "score": 0, "creation_date": 1493797440, "post_id": 43753537, "comment_id": 74549586, "body": "The point is that the compiler looks up for header files first in <code>-I</code> directories, then in <code>-isystem</code> and then inside the standard system directories. And according to the GNU GCC documentation, <code>-isystem</code> is valid for <code>#include &quot;file&quot;</code> and <code>#include &lt;file&gt;</code> directives."}, {"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 1, "creation_date": 1493798144, "post_id": 43753537, "comment_id": 74550016, "body": "In that case I&#39;m not sure I understand what your question is. Maybe you could include an example with the <i>expected</i> and <i>actual</i> paths for a few include directives? (Note: there&#39;s also <code>-iquote</code> and <code>-idirafter</code>, but since I can&#39;t understand what you&#39;re after I don&#39;t know if they will help.)"}, {"owner": {"reputation": 4783, "user_id": 948128, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/788ac757a97bd1fa3ca6fd0d3eeffc1b?s=128&d=identicon&r=PG", "display_name": "piwi", "link": "https://stackoverflow.com/users/948128/piwi"}, "edited": false, "score": 0, "creation_date": 1493799988, "post_id": 43753537, "comment_id": 74551113, "body": "Also, how do you compile? Makefile, CMake...?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1493804384, "post_id": 43753537, "comment_id": 74554094, "body": "That&#39;s a strange thing to want to do. Design smell."}], "answers": [{"tags": [], "owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "is_accepted": true, "score": 1, "last_activity_date": 1493805980, "creation_date": 1493805980, "answer_id": 43757012, "question_id": 43753537, "link": "https://stackoverflow.com/questions/43753537/gnu-c-c-compiler-change-includes-search-order/43757012#43757012", "title": "GNU C/C++ Compiler change includes search order", "body": "<p>If you want the eCos system include directory to be searched <em>after</em> the host system include directory, use <code>-idirafter</code>:</p>\n\n<pre><code>TEST_INCLUDE_PATH = -I$(GMOCK_DIR)/include -I$(GMOCK_DIR)/gtest/include -idirafter $(ECOS_INSTALL_DIR)/include\n</code></pre>\n\n<hr>\n\n<p>From <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Invocation.html#Invocation\" rel=\"nofollow noreferrer\">the GCC manual, chapter 12  \u201c<em>Invocation</em>\u201d</a>:</p>\n\n<blockquote>\n  <p>The lookup order is as follows:</p>\n  \n  <ol>\n  <li>For the quote form of the include directive, the directory of the current file is searched first.</li>\n  <li>For the quote form of the include directive, the directories specified by <code>-iquote</code> options are searched in left-to-right order, as they appear on the command line.</li>\n  <li>Directories specified with <code>-I</code> options are scanned in left-to-right order.</li>\n  <li>Directories specified with <code>-isystem</code> options are scanned in left-to-right order.</li>\n  <li>Standard system directories are scanned.</li>\n  <li>Directories specified with <code>-idirafter</code> options are scanned in left-to-right order.</li>\n  </ol>\n</blockquote>\n"}], "owner": {"reputation": 2112, "user_id": 936882, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/6476637d98fa2fa33bfdeb528f5e969c?s=128&d=identicon&r=PG", "display_name": "lucaboni", "link": "https://stackoverflow.com/users/936882/lucaboni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 43757012, "answer_count": 1, "score": 0, "last_activity_date": 1493805980, "creation_date": 1493795745, "last_edit_date": 1493804314, "question_id": 43753537, "link": "https://stackoverflow.com/questions/43753537/gnu-c-c-compiler-change-includes-search-order", "title": "GNU C/C++ Compiler change includes search order", "body": "<p>As default the GNU C/C++ compiler looks up for include first into the directories specified with <code>-I</code> and then inside the standard system directories.</p>\n\n<p>How can I force the compiler to inverse the search order?</p>\n\n<p>At the moment I'm calling the compiler with the option <code>-nostdinc</code> set, which says the compiler to not search for header files inside the standard system directories. Then I'm passing the standard system directories using <code>-I</code> <strong>before</strong> all others includes.</p>\n\n<p>Is there a better way to achieve that? Maybe a compiler option?</p>\n\n<p><br><strong>UPDATE</strong>: <em>as asked by the users, I add here some additional info to make tmy question clearer.</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/Um8sY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Um8sY.png\" alt=\"compilation setup\"></a></p>\n\n<p>I hope that the diagram can help to understand the setup and the reason why I have to inverse the search path order of the compiler.</p>\n\n<p>When I try to compile my unit tests source file</p>\n\n<pre><code>CPPFLAGS          = -c -std=gnu++11 -v -g -O0 -pipe -Wall -MMD -MP -D__STDC_LIMIT_MACROS\nTEST_INCLUDE_PATH = -I$(GMOCK_DIR)/include -I$(GMOCK_DIR)/gtest/include -I$(ECOS_INSTALL_DIR)/include\n</code></pre>\n\n<p>Finally:</p>\n\n<pre><code>gcc $(CPPFLAGS) $(TEST_INCLUDE_PATH)\n</code></pre>\n\n<p>I got a lot of errors. By checking the include order of the compiler I remark that the compiler finds the header files of some system header files inside the wrong directories (in this case in eCos).</p>\n\n<pre><code>#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n ../../../../Common/Implementation/TestLibraries/gmock-1.7.0/include\n ../../../../Common/Implementation/TestLibraries/gmock-1.7.0/gtest/include\n ../../Implementation/Build/eCos_install/include\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include/c++\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include/c++/i686-pc-cygwin\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include/c++/backward\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include\n /usr/include\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/../../../../include/w32api\nEnd of search list.\n</code></pre>\n\n<p>For info, my unit test looks at the moment like that:</p>\n\n<pre><code>#include \"gmock/gmock.h\"\n\nclass TestDummy : public ::testing::Test\n{\n  public:\n    TestDummy() {}\n};\n\nTEST_F(TestDummy, ShouldFail)\n{\n    ASSERT_TRUE(false);\n}\n</code></pre>\n\n<p><br>\nBy inverting the order everything compiles fine:</p>\n\n<pre><code>CPPFLAGS            = -c -std=gnu++11 -v -g -O0 -pipe -Wall -MMD -MP -D__STDC_LIMIT_MACROS -nostdinc\nSYSTEM_INCLUDE_PATH = -I$(GCC_CYGWIN_PATH)/include/c++ ....\nTEST_INCLUDE_PATH = -I$(GMOCK_DIR)/include -I$(GMOCK_DIR)/gtest/include -I$(ECOS_INSTALL_DIR)/include\n</code></pre>\n\n<p>Finally:</p>\n\n<pre><code>gcc $(CPPFLAGS) $(SYSTEM_INCLUDE_PATH) $(TEST_INCLUDE_PATH)\n\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include/c++\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include/c++/i686-pc-cygwin\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include/c++/backward\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/include\n /usr/include\n /usr/lib/gcc/i686-pc-cygwin/5.4.0/../../../../include/w32api\n ../../../../Common/Implementation/TestLibraries/gmock-1.7.0/include\n ../../../../Common/Implementation/TestLibraries/gmock-1.7.0/gtest/include\n ../../Implementation/Build/HostMCU_icb_jtag_install/include\nEnd of search list.\n</code></pre>\n"}, {"tags": ["c", "gtk", "pango"], "comments": [{"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 1, "creation_date": 1493801821, "post_id": 43753260, "comment_id": 74552209, "body": "Please use something like <a href=\"https://developer.gnome.org/glib/stable/glib-File-Utilities.html#g-file-get-contents\" rel=\"nofollow noreferrer\">g_file_get_contents()</a> to read a file -- I don&#39;t think your code is safe, at the very least you write the terminator after the end of buffer."}, {"owner": {"reputation": 4466, "user_id": 6243129, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1d0567e46408b2f3ceeb207a940737f4?s=128&d=identicon&r=PG&f=1", "display_name": "S Andrew", "link": "https://stackoverflow.com/users/6243129/s-andrew"}, "reply_to_user": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1493802618, "post_id": 43753260, "comment_id": 74552801, "body": "@jku I didnt knew about g_file_contents(). I am using it now but the problem remains same as per my edit."}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 1, "creation_date": 1493809052, "post_id": 43753260, "comment_id": 74557323, "body": "there must be some utf8 errors on your file."}, {"owner": {"reputation": 4466, "user_id": 6243129, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1d0567e46408b2f3ceeb207a940737f4?s=128&d=identicon&r=PG&f=1", "display_name": "S Andrew", "link": "https://stackoverflow.com/users/6243129/s-andrew"}, "reply_to_user": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1493809500, "post_id": 43753260, "comment_id": 74557615, "body": "@Jos&#233;Fonte Its not about file. I tried this too <code>char *str = g_strdup_printf (&quot;&lt;span font=\\&quot;20\\&quot; color=\\&quot;white\\&quot;&gt;&quot; &quot;%s&quot;&quot;&lt;&#47;span&gt;&quot;,&quot;Text which I want to display&quot;);</code> it still gives the error"}, {"owner": {"reputation": 3671, "user_id": 7728864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hv4Sl.jpg?s=128&g=1", "display_name": "Jos&#233; Fonte", "link": "https://stackoverflow.com/users/7728864/jos%c3%a9-fonte"}, "edited": false, "score": 0, "creation_date": 1493809716, "post_id": 43753260, "comment_id": 74557746, "body": "You dont use it but gtk uses it, gtk.label is using it so that means there are utf8 erros on your files content"}], "answers": [{"tags": [], "owner": {"reputation": 7536, "user_id": 771066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d207f95c530f2b59f763d7b699f6d81?s=128&d=identicon&r=PG", "display_name": "ebassi", "link": "https://stackoverflow.com/users/771066/ebassi"}, "is_accepted": true, "score": 5, "last_activity_date": 1493817855, "creation_date": 1493817855, "answer_id": 43761379, "question_id": 43753260, "link": "https://stackoverflow.com/questions/43753260/pango-warning-invalid-utf-8-string-passed-to-pango-layout-set-text-in-gtk/43761379#43761379", "title": "Pango-WARNING **: Invalid UTF-8 string passed to pango_layout_set_text() in GTK C", "body": "<p>GTK+ widgets expect UTF-8 encoded text for all the user visible strings.</p>\n\n<p>You must ensure that the contents of the file you are loading are encoded using UTF-8 before loading them into any GTK+ widget. You can use the <a href=\"https://developer.gnome.org/glib/stable/glib-Character-Set-Conversion.html\" rel=\"noreferrer\">character set conversion API</a> provided by GLib, like <code>g_convert()</code> or <code>g_locale_to_utf8()</code>.</p>\n\n<p>I'd also recommend using the GIO API for loading the file contents, i.e. <a href=\"https://developer.gnome.org/gio/stable/GFile.html#g-file-load-contents-async\" rel=\"noreferrer\"><code>g_file_load_contents_async()</code></a>, as it won't block the UI while loading arbitrarily sized files from arbitrarily slow storage.</p>\n"}], "owner": {"reputation": 4466, "user_id": 6243129, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1d0567e46408b2f3ceeb207a940737f4?s=128&d=identicon&r=PG&f=1", "display_name": "S Andrew", "link": "https://stackoverflow.com/users/6243129/s-andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5659, "favorite_count": 0, "accepted_answer_id": 43761379, "answer_count": 1, "score": 3, "last_activity_date": 1493817855, "creation_date": 1493794939, "last_edit_date": 1493802118, "question_id": 43753260, "link": "https://stackoverflow.com/questions/43753260/pango-warning-invalid-utf-8-string-passed-to-pango-layout-set-text-in-gtk", "title": "Pango-WARNING **: Invalid UTF-8 string passed to pango_layout_set_text() in GTK C", "body": "<p>I am getting above mentioned warning in my gtk application. I know this question is already been discussed but the problem with me is that I am not even using this funciton.</p>\n\n<p>All I am doing is reading a text string from a file and then changing its font type and font size using pango and then applying the result in gtk label, Here is the code:</p>\n\n<pre><code> FILE *fp;\n long lSize;\n char *buffer;\n\n fp = fopen ( \"/home/user/file.txt\" , \"rb\" );\n if( !fp ) perror(\"file.txt\"),exit(1);\n\n fseek( fp , 0L , SEEK_END);\n lSize = ftell( fp );\n rewind( fp );\n\n buffer = calloc( 1, lSize+1 );\n if( !buffer ) fclose(fp),fputs(\"memory alloc fails\",stderr),exit(1);\n\n\n if( 1!=fread( buffer , lSize, 1 , fp) )\n   fclose(fp),free(buffer),fputs(\"entire read fails\",stderr),exit(1);\n\n buffer[lSize+2]='\\0';\n\n PangoFontDescription *font = pango_font_description_new ();    //NEW PANGO FONT\n pango_font_description_set_family (font,\"Arial Rounded MT Bold\");          //FONT FAMILY\n pango_font_description_set_size(font,60*PANGO_SCALE);  //FONT SIZE\n gtk_widget_override_font(GTK_WIDGET(label), font);         //APPLYING THE NEW FONT\n\n gtk_label_set_text(GTK_LABEL(label),buffer);\n</code></pre>\n\n<p>How can I remove this error?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I removed the pango code and used gtk_set_markup</p>\n\n<pre><code>char *str = g_strdup_printf (\"&lt;span font=\\\"20\\\" color=\\\"white\\\"&gt;\" \"%s\"\"&lt;/span&gt;\",buffer);\ngtk_label_set_markup (GTK_LABEL (label), str);\n</code></pre>\n\n<p>The problem is if the font size is 20 or low then it displays fine with fullscreen but if I increase the font size to 30 or 40, then it gives same warning and window also resizes like below:\n<a href=\"https://i.stack.imgur.com/l4Leo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l4Leo.png\" alt=\"enter image description here\"></a></p>\n\n<p>In normal with low font size, it looks like below :</p>\n\n<p><a href=\"https://i.stack.imgur.com/uQAjl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uQAjl.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493794834, "post_id": 43753214, "comment_id": 74548059, "body": "This is not a very good question. Too broad....."}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1493794839, "post_id": 43753214, "comment_id": 74548062, "body": "First of all, there is no language called C/C++. Second, test it and see."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1493794937, "post_id": 43753214, "comment_id": 74548101, "body": "the difference is that the first one wont compile"}, {"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "reply_to_user": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1493795591, "post_id": 43753214, "comment_id": 74548438, "body": "@tobi303 Maybe in ANSI C, it does not, but that is quite archaic, right?"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1493795804, "post_id": 43753214, "comment_id": 74548561, "body": "@Zereges the typo is fixed in the mean time, not sure what you mean"}], "answers": [{"comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1493794971, "post_id": 43753247, "comment_id": 74548119, "body": "only after fixing the typo in the first version :P"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1493794903, "creation_date": 1493794903, "answer_id": 43753247, "question_id": 43753214, "link": "https://stackoverflow.com/questions/43753214/code-optimization-in-c-and-c/43753247#43753247", "title": "code optimization in C and C++", "body": "<p>Any sensible compiler would be expected to build essentially identical code for these two cases.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 8, "last_activity_date": 1493794959, "creation_date": 1493794959, "answer_id": 43753265, "question_id": 43753214, "link": "https://stackoverflow.com/questions/43753214/code-optimization-in-c-and-c/43753265#43753265", "title": "code optimization in C and C++", "body": "<p>Both functions will result in identical machine code with any half-decent compiler. Optimizing away local temporary variables is something that compilers have been able to do since the 1980s.</p>\n\n<p>This is why using local variables to improve readability of complex expressions is a good idea. In your case the local variable is just superfluous though.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1493795173, "post_id": 43753297, "comment_id": 74548208, "body": "OK, what did I miss? May I ask for an explanation to the DVs?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1493795320, "post_id": 43753297, "comment_id": 74548281, "body": "I&#39;m curious too. Lack of the explanation of rationale?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1493795524, "post_id": 43753297, "comment_id": 74548396, "body": "@songyuanyao Not sure, but I&#39;m not sure how it is lacking. Both the snippets produce the same assembly, so there&#39;s no difference. What&#39;s the reason for DVs? (+3/-3), i&#39;m actually surprised."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1493795543, "post_id": 43753297, "comment_id": 74548409, "body": "I didn&#39;t DV, but I assume it&#39;s because answer applies only to specific compiler and architecture, and doesn&#39;t assert the fact that on general level this kind of micro-optimization is pointless."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1493795441, "last_edit_date": 1493795441, "creation_date": 1493795050, "answer_id": 43753297, "question_id": 43753214, "link": "https://stackoverflow.com/questions/43753214/code-optimization-in-c-and-c/43753297#43753297", "title": "code optimization in C and C++", "body": "<p>With <code>-O1</code> (or higher) switch enabled, both the snippets produce the same assembly,</p>\n\n<pre><code>func():\n        mov     eax, 10\n        ret\n</code></pre>\n\n<p>so, performance-wise, both snippets are same.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1493796490, "post_id": 43753420, "comment_id": 74549011, "body": "&quot;an atomic type like int&quot; - the atomic type would be <code>std::atomic&lt;int&gt;</code>. There&#39;s no guarantee that plain <code>int</code> is atomic."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1493796666, "post_id": 43753420, "comment_id": 74549120, "body": "@MSalters Fair point. That is confusing terminology. I mean built-in primitive types like <code>int</code> of course. Edited."}], "tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 1, "last_activity_date": 1493796588, "last_edit_date": 1493796588, "creation_date": 1493795391, "answer_id": 43753420, "question_id": 43753214, "link": "https://stackoverflow.com/questions/43753214/code-optimization-in-c-and-c/43753420#43753420", "title": "code optimization in C and C++", "body": "<p>For a simple type like <code>int</code> there is almost certainly no difference of any kind in performance. As others point out the Assembler is the same.</p>\n\n<p>For complex types in C++ the answer is much more nuanced and can depend on copy elision and the use of move semantics. That's worth considering particularly when implementing templates which might be instantiated with almost any type.</p>\n\n<p>Good implementations of (say) <code>std::vector&lt;&gt;</code> are very careful to not create unnecessary copies that need assigning or moving.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "accepted_answer_id": 43753265, "answer_count": 4, "score": -7, "last_activity_date": 1493801937, "creation_date": 1493794771, "last_edit_date": 1493801937, "question_id": 43753214, "link": "https://stackoverflow.com/questions/43753214/code-optimization-in-c-and-c", "title": "code optimization in C and C++", "body": "<p>Is there any optimization between the following two code snippets?</p>\n\n<p><strong>case 1:</strong></p>\n\n<pre><code>int func()\n{\n    int a = 10;\n    return a;\n}\n</code></pre>\n\n<p>The first case assigns a value to a variable in a function and then returns that variable. </p>\n\n<p><strong>case 2:</strong></p>\n\n<pre><code>int func()\n{\n    return 10;\n}\n</code></pre>\n\n<p>The second function just returns the value directly.</p>\n\n<p>Also, Which one is faster?</p>\n"}, {"tags": ["c++", "c", "debugging", "memory", "profiling"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493794790, "post_id": 43753183, "comment_id": 74548027, "body": "<code>valgrind</code> should give you stats on how much memory was allocated."}, {"owner": {"reputation": 2887, "user_id": 2422450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65c899826b7012b67268ee1899b40419?s=128&d=identicon&r=PG", "display_name": "Lanting", "link": "https://stackoverflow.com/users/2422450/lanting"}, "edited": false, "score": 2, "creation_date": 1493795730, "post_id": 43753183, "comment_id": 74548522, "body": "Malloc and free are defined as weak symbols, so you can replace them with with custom versions that provide tracing <a href=\"http://stackoverflow.com/questions/17803456/an-alternative-for-the-deprecated-malloc-hook-functionality-of-glibc\" title=\"an alternative for the deprecated malloc hook functionality of glibc\">stackoverflow.com/questions/17803456/&hellip;</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1493796974, "post_id": 43753183, "comment_id": 74549307, "body": "Just another question where double-tagging wrecks the question. In C++, you can replace <code>operator new</code>. If you&#39;re dealing with C, theoretically you can&#39;t replace <code>malloc</code>. (But in practice, you might)."}, {"owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 0, "creation_date": 1493821362, "post_id": 43753183, "comment_id": 74566759, "body": "And <code>valgrind</code> in <code>callgrind</code> or <code>cachegrind</code> mode can also give exact information of function call stacks (chains - which functions called memcpy) with some information like &quot;profiling&quot; (with in-order 1-cycle cost model of every instruction, unlike real out-of-order cpu model)"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1493831062, "post_id": 43753183, "comment_id": 74573447, "body": "@MSalters: Just so. Though perhaps double-tagging is more appropriate in this instance: the C++ code is interfacing with libraries written in C."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1493840668, "post_id": 43753183, "comment_id": 74578824, "body": "@Richard: Important information. So important in fact that it should be in the question."}], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1493833022, "creation_date": 1493794652, "last_edit_date": 1493833022, "question_id": 43753183, "link": "https://stackoverflow.com/questions/43753183/monitor-memory-requests-of-running-process", "title": "Monitor memory requests of running process", "body": "<p>I have a slow-running process that uses some poorly-documented libraries.</p>\n\n<p>I suspect the libraries are killing performance by continuously copying lots memory (in RAM). This hypothesis is support by the fact that <code>perf record/report</code> tells me that <code>memcpy</code> is using 15% of my time.</p>\n\n<p>But I'd like to catch this red-handed, as it were. I believe I could detect this condition if I could get a sense of the amount of memory per time unit that the program is trying to allocate.</p>\n\n<p>Is there are a tool such as <code>gdb</code> or <code>prof</code> which I can use to attach to a <strong>running process</strong> and get a sense of its malloc/free statistics?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "edited": false, "score": 6, "creation_date": 1493793011, "post_id": 43752641, "comment_id": 74547131, "body": "Why would you skip a parameter?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1493793074, "post_id": 43752641, "comment_id": 74547162, "body": "You avoid missing parameters by providing all necessary parameters. Also <code>void main()</code> should be <code>int main()</code> in C++ or <code>int main(void)</code> in C (which also means you should decide which language you use)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493793080, "post_id": 43752641, "comment_id": 74547168, "body": "Use a compiler that displays a warning."}, {"owner": {"reputation": 6633, "user_id": 2378300, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/852aed09b52c7514ed23f75f2921f6cc?s=128&d=identicon&r=PG", "display_name": "Jonas", "link": "https://stackoverflow.com/users/2378300/jonas"}, "edited": false, "score": 4, "creation_date": 1493793082, "post_id": 43752641, "comment_id": 74547169, "body": "Which compiler and level of warnings?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1493793116, "post_id": 43752641, "comment_id": 74547188, "body": "Are you talking about C or C++? They&#39;re different languages."}, {"owner": {"reputation": 1330, "user_id": 2375142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XMqXW.jpg?s=128&g=1", "display_name": "Laposhas&#250; Acsa", "link": "https://stackoverflow.com/users/2375142/laposhas%c3%ba-acsa"}, "edited": false, "score": 3, "creation_date": 1493793341, "post_id": 43752641, "comment_id": 74547289, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3105114/how-to-get-printf-style-compile-time-warnings-or-errors\">How to get printf style compile-time warnings or errors</a>"}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "edited": false, "score": 1, "creation_date": 1493793585, "post_id": 43752641, "comment_id": 74547401, "body": "@Marievi: You shouldn&#39;t, of course. The question is about catching this programming error at complie time, not at run time. (I don&#39;t know why this snarky comment gets so much approval.)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1493793658, "post_id": 43752641, "comment_id": 74547443, "body": "@MOehm This question isn&#39;t written very clearly."}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1493794508, "post_id": 43752641, "comment_id": 74547870, "body": "Which compiler are you using? This will make a big difference to the warnings that you may get."}, {"owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "reply_to_user": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 0, "creation_date": 1493794569, "post_id": 43752641, "comment_id": 74547908, "body": "@MOehm Not at all snarky. I just did not understand the question and asked to clarify."}, {"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "reply_to_user": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "edited": false, "score": 0, "creation_date": 1493795636, "post_id": 43752641, "comment_id": 74548462, "body": "@Marievi: Fair enough. Sorry about the comment."}], "answers": [{"comments": [{"owner": {"reputation": 26941, "user_id": 2979617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/whfql.png?s=128&g=1", "display_name": "M Oehm", "link": "https://stackoverflow.com/users/2979617/m-oehm"}, "edited": false, "score": 2, "creation_date": 1493793383, "post_id": 43752736, "comment_id": 74547313, "body": "Not my downvote, but the OP is aware that this is an error. The question is how to catch this programming error at complie time."}], "tags": [], "owner": {"reputation": 1, "user_id": 7803750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b85882e1f58f4a3f2b554e7114f147e?s=128&d=identicon&r=PG&f=1", "display_name": "Sahosa", "link": "https://stackoverflow.com/users/7803750/sahosa"}, "is_accepted": false, "score": -6, "last_activity_date": 1493793312, "creation_date": 1493793312, "answer_id": 43752736, "question_id": 43752641, "link": "https://stackoverflow.com/questions/43752641/how-to-can-i-catch-missing-parameters-when-using-printf/43752736#43752736", "title": "How to can I catch missing parameters when using printf?", "body": "<p>The error is because in </p>\n\n<p>printf(\"%d:this is for test:%s\",a);</p>\n\n<p>You need to pass two parameters, one to %d and another to %s.\nSo, now a will be substituted in the place of \"%d\", you are not passing anything to be substituted in the place of %s.</p>\n"}, {"tags": [], "owner": {"reputation": 4177, "user_id": 7953189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CEXB2.jpg?s=128&g=1", "display_name": "tso", "link": "https://stackoverflow.com/users/7953189/tso"}, "is_accepted": false, "score": 2, "last_activity_date": 1493793372, "creation_date": 1493793372, "answer_id": 43752761, "question_id": 43752641, "link": "https://stackoverflow.com/questions/43752641/how-to-can-i-catch-missing-parameters-when-using-printf/43752761#43752761", "title": "How to can I catch missing parameters when using printf?", "body": "<p>compile with <code>gcc -Wall</code><br>\nfor this situation warning be like: <code>warning: format \u2018%s\u2019 expects a matching \u2018char *\u2019 argument [-Wformat=]</code></p>\n"}, {"comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1493793655, "post_id": 43752830, "comment_id": 74547442, "body": "You missed the point of the question: it&#39;s an example of accidentally forgetting to provide an argument for the placeholder. The question is how to catch such accidental omissions in real code."}, {"owner": {"reputation": 127, "user_id": 7286119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c390f41e350c050e41b52a45ef920a3?s=128&d=identicon&r=PG", "display_name": "Burhan", "link": "https://stackoverflow.com/users/7286119/burhan"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1493793914, "post_id": 43752830, "comment_id": 74547571, "body": "It&#39;s undefined if you pass fewer arguments than the format specifiers. Compiler is not required to produce any errors on undefined behaviour.  Although, most compilers would do. GCC, for example, produces the following for your code: &quot;warning: too few arguments for format&quot; when compiled with: &quot;gcc -Wall -Wextra -std=c99 file.c&quot;"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1493793934, "post_id": 43752830, "comment_id": 74547579, "body": "...plus this wont compile, there is a <code>h</code> missing"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1493794005, "post_id": 43752830, "comment_id": 74547609, "body": "your comment could be an answer, though there is already an answer suggesting to use <code>-Wall</code>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1493794006, "post_id": 43752830, "comment_id": 74547610, "body": "@Burhan Which is what your answer should state instead of &quot;you&#39;ve made a mistake.&quot; The OP <b>knows</b> they&#39;ve made it, and ask how to get the compiler to catch it."}], "tags": [], "owner": {"reputation": 127, "user_id": 7286119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c390f41e350c050e41b52a45ef920a3?s=128&d=identicon&r=PG", "display_name": "Burhan", "link": "https://stackoverflow.com/users/7286119/burhan"}, "is_accepted": true, "score": -5, "last_activity_date": 1493794074, "last_edit_date": 1493794074, "creation_date": 1493793602, "answer_id": 43752830, "question_id": 43752641, "link": "https://stackoverflow.com/questions/43752641/how-to-can-i-catch-missing-parameters-when-using-printf/43752830#43752830", "title": "How to can I catch missing parameters when using printf?", "body": "<p>Why you are using \"%s\"? Here no need to use \"%s\" as it is used to print string value.\nFor integer value you only need \"%d\".</p>\n\n<p>Run your code like this.</p>\n\n<pre><code>#include&lt;stdio.&gt;\nint main()\n{\n  int a = 1;\n  printf(\"%d: this is for test\", a);\n}\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>[EDIT]</p>\n\n<p>It's undefined if you pass fewer arguments than the format specifiers. Compiler is not required to produce any errors on undefined behaviour.</p>\n\n<p>Although, most compilers would do. GCC, for example, produces the following for your code:</p>\n\n<pre><code>warning: too few arguments for format\n</code></pre>\n\n<p>when compiled with:</p>\n\n<pre><code>gcc -Wall -Wextra -std=c99 file.c\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7955758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a341bf0eec501ce0122ddf638d8523e4?s=128&d=identicon&r=PG&f=1", "display_name": "merkey", "link": "https://stackoverflow.com/users/7955758/merkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 43752830, "answer_count": 3, "score": -3, "last_activity_date": 1493795891, "creation_date": 1493792964, "last_edit_date": 1493795891, "question_id": 43752641, "link": "https://stackoverflow.com/questions/43752641/how-to-can-i-catch-missing-parameters-when-using-printf", "title": "How to can I catch missing parameters when using printf?", "body": "<p>In the program below, there is a parameter missing in the call to function <code>printf</code>, which will cause undified behaviour at run time, but no warning is given when compiling.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    int a = 1;\n\n    printf(\"%d:this is for test:%s\",a);\n    return 0;\n}\n</code></pre>\n\n<p>How can I catch this error at compile time?</p>\n"}, {"tags": ["c", "windows", "openssl", "mingw"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1493793727, "post_id": 43752633, "comment_id": 74547486, "body": "You tagged with <code>c++</code>. You <b><i>must</i></b> build the library with a C compiler; not a C++ compiler. MinGW was abandoned some time ago. Can you use Cygwin instead? The OpenSSL project has instructions for building with MinGW in <a href=\"https://github.com/openssl/openssl/blob/master/INSTALL\" rel=\"nofollow noreferrer\">INSTALL</a> and <a href=\"https://github.com/openssl/openssl/blob/master/NOTES.WIN\" rel=\"nofollow noreferrer\">NOTES.WIN</a>. Can you use them instead? You may need to define <code>_XOPEN_SOURCE = 600</code>. Also see <a href=\"https://wiki.openssl.org/index.php/Compilation_and_Installation\" rel=\"nofollow noreferrer\">Compilation and Installation</a> on the OpenSSL wiki."}, {"owner": {"reputation": 155, "user_id": 6571729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0189e595b27773aaf16ca9fc9967b88d?s=128&d=identicon&r=PG&f=1", "display_name": "Amit.Desai", "link": "https://stackoverflow.com/users/6571729/amit-desai"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1493797167, "post_id": 43752633, "comment_id": 74549421, "body": "sorry c++ tag,thanks for your response..i gone throw your all suggestion but still i am getting same error.. :(    &#39;./libcrypto.a(o_str.o):o_str.c:(.text+0x5cb): undefined reference to `strerror_r&#39;&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 6571729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0189e595b27773aaf16ca9fc9967b88d?s=128&d=identicon&r=PG&f=1", "display_name": "Amit.Desai", "link": "https://stackoverflow.com/users/6571729/amit-desai"}, "edited": false, "score": 0, "creation_date": 1493816458, "post_id": 43754714, "comment_id": 74562700, "body": "thanks Pras.. it worked after changing to latest version of mingw ..  thanks to all...:)"}], "tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": true, "score": 2, "last_activity_date": 1493799381, "creation_date": 1493799381, "answer_id": 43754714, "question_id": 43752633, "link": "https://stackoverflow.com/questions/43752633/undefined-reference-to-strerror-r-with-openssl-1-1-0e-and-mingw/43754714#43754714", "title": "&quot;undefined reference to strerror_r&quot; with OpenSSL-1.1.0e and MinGW", "body": "<p>strerror_r may not be implemented in mingw, you need  to check minwg latest documentation</p>\n"}], "owner": {"reputation": 155, "user_id": 6571729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0189e595b27773aaf16ca9fc9967b88d?s=128&d=identicon&r=PG&f=1", "display_name": "Amit.Desai", "link": "https://stackoverflow.com/users/6571729/amit-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "accepted_answer_id": 43754714, "answer_count": 1, "score": 1, "last_activity_date": 1493799381, "creation_date": 1493792947, "last_edit_date": 1493797081, "question_id": 43752633, "link": "https://stackoverflow.com/questions/43752633/undefined-reference-to-strerror-r-with-openssl-1-1-0e-and-mingw", "title": "&quot;undefined reference to strerror_r&quot; with OpenSSL-1.1.0e and MinGW", "body": "<p>While building OpenSSL-1.1.0d I am getting below error.</p>\n\n<pre><code>./libcrypto.a(o_str.o):o_str.c:(.text+0x5cb): undefined reference to `strerror_r'\ncollect2.exe: error: ld returned 1 exit status\nmake[2]: *** [Makefile.shared:187: link_app.] Error 1\nmake[2]: Leaving directory '/c/MinGW/openssl-1.1.0d'\nmake[1]: *** [Makefile:5966: apps/openssl.exe] Error 2\nmake[1]: Leaving directory '/c/MinGW/openssl-1.1.0d'\nmake: *** [Makefile:128: all] Error 2\n</code></pre>\n\n<p>I followed the below steps to build it </p>\n\n<ol>\n<li><p><code>tar -xf vv.tar.gz</code></p></li>\n<li><p><code>perl Configure mingw no-shared</code></p></li>\n<li><p><code>make</code></p></li>\n</ol>\n\n<p>The instructions came from <a href=\"http://www.stringcat.com/company_blog/2015/12/07/compiling-openssl-on-windows-mingw32/\" rel=\"nofollow noreferrer\">Compiling OpenSSL on Windows (mingw32)</a>.</p>\n\n<p>Why is the link failing, and how do I fix it?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1493792949, "post_id": 43752563, "comment_id": 74547107, "body": "General documentation cannot specify something that is implementation specific. You know that <code>sys&#47;time.h</code> contains the struct: starting from there you should find the definition of type. Or documentation of your specific platform/sdk should describe type deeply."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1493793131, "post_id": 43752563, "comment_id": 74547195, "body": "You can <a href=\"https://www.google.fi/search?q=suseconds_t&amp;sitesearch=man7.org/linux/man-pages&amp;sa=Search+online+pages&amp;gws_rd=cr&amp;ei=VXgJWYj3Eomv6ASGrpH4Cw\" rel=\"nofollow noreferrer\">use search</a>. From search results I selected <a href=\"http://man7.org/linux/man-pages/man0/sys_types.h.0p.html\" rel=\"nofollow noreferrer\">sys_types header which defines <code>suseconds_t</code></a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1493799419, "post_id": 43752563, "comment_id": 74550773, "body": "Since you know it&#39;s in <code>sys&#47;time.h</code>, you can do this: <code>echo &#39;#include &lt;sys&#47;time.h&gt;&#39; &gt;&#47;tmp&#47;chocofoo.c &amp;&amp; c99 -E &#47;tmp&#47;chocofoo.c | egrep &#39;[[:blank:]]+tv_usec&#39; ; rm &#47;tmp&#47;chocofoo.c</code>; it might differ on some platforms as well, depending on whether you are compiling in 32-bit or 64-bit mode (or even X32 on x86_64 Linux platforms). In any case, my POSIX man page states that &quot;<code>time_t</code> and <code>suseconds_t</code> types will be defined as described in <code>&lt;sys&#47;types.h&gt;</code>. The POSIX man page for that header is linked in user694733&#39;s earlier comment."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1493800334, "post_id": 43752563, "comment_id": 74551337, "body": "Usually. grepping turns up the definition."}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "edited": false, "score": 0, "creation_date": 1493800368, "post_id": 43752563, "comment_id": 74551351, "body": "O/T: If you want to really go insane, look at <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Windows data types</a>. It&#39;s well structured, but it&#39;s that rigid structure coupled with specific types for specific use cases that drives me mad. It&#39;s easy to understand why WinForms, WPF, or whatever is shiny and new these days has become so much more popular on Windows than the Windows API itself. I&#39;m grateful that POSIX requires so few data types in comparison!"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493794371, "post_id": 43752827, "comment_id": 74547797, "body": "Arguably, POSIX is quite a bit on the obscure side. Especially since it hijacked the <code>_t</code> type naming convention that was industry standard long before POSIX existed. Basically the idea behind POSIX was &quot;lets say that UNIX is standard and then show that standard down everyone&#39;s throat&quot;. That&#39;s not how you develop a successful industry standard."}, {"owner": {"reputation": 660, "user_id": 978656, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6446f0a408d33dce83e8f08e1735e01b?s=128&d=identicon&r=PG", "display_name": "gmaster", "link": "https://stackoverflow.com/users/978656/gmaster"}, "edited": false, "score": 0, "creation_date": 1493795971, "post_id": 43752827, "comment_id": 74548677, "body": "Wasn&#39;t trying to be condescending.  I&#39;m not saying the library is obscure, I&#39;m saying the type suseconds_t is.  And I get that the reason is for abstraction, but for example I&#39;m working on something where knowing the underlying type (signed int? unsigned int? long? short?) of suseconds_t would be useful, since I&#39;d like to have some idea of the size of the type.  Yes, this will vary system to system, but I can make some guesses which in this case is all I need.  I can&#39;t find anywhere in the man-pages where this is specified; where would I look up this information?"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1493963349, "post_id": 43752827, "comment_id": 74634978, "body": "Well, just being yesterday may, the fourth, just think on passing to the obscure side and think that types are some way of hidding internal structure to the external users of a type, and make it possible to think about microseconds in a portable way :)"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": false, "score": 2, "last_activity_date": 1493793594, "creation_date": 1493793594, "answer_id": 43752827, "question_id": 43752563, "link": "https://stackoverflow.com/questions/43752563/how-to-determine-obscure-c-types/43752827#43752827", "title": "How to determine obscure c types", "body": "<p><code>suseconds_t</code> is a signed integer type that can fit the number of microseconds in a second. The type is <code>suseconds_t</code>, not anything else. The whole point of those \"obscure\" types is to make you use them instead of thinking \"oh, I'll just use int because that's what I always use\" and then your program becomes non-portable on some other machine or some time in the future.</p>\n\n<p>Your slightly condescending tone in \"C libraries love to...\" is quite misguided. This is not some obscure library doing some obscure little funny thing. This is <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/basedefs/sys/types.h.html#tag_13_67\" rel=\"nofollow noreferrer\">POSIX</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 660, "user_id": 978656, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6446f0a408d33dce83e8f08e1735e01b?s=128&d=identicon&r=PG", "display_name": "gmaster", "link": "https://stackoverflow.com/users/978656/gmaster"}, "edited": false, "score": 0, "creation_date": 1493796165, "post_id": 43753010, "comment_id": 74548810, "body": "I understand the abstraction, I&#39;m mostly just wondering where I can actually look up the underlying data type.  Usually the abstraction is fine, but in this case I was hoping to figure out if the underlying type is long, short, int, etc.  While the exact size of those will also vary system to system, I&#39;m working on something specific enough where just having a sense of the underlying type will be helpful.  Is there somewhere to look up the underlying type of things like susecond?  Because I can&#39;t find any reference to something like that in the man page."}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "reply_to_user": {"reputation": 660, "user_id": 978656, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6446f0a408d33dce83e8f08e1735e01b?s=128&d=identicon&r=PG", "display_name": "gmaster", "link": "https://stackoverflow.com/users/978656/gmaster"}, "edited": false, "score": 0, "creation_date": 1493796562, "post_id": 43753010, "comment_id": 74549063, "body": "@gmaster That depends on your coding environment. If you have a modern IDE you should just hover or right click the symbol in editing mode and it will offer options to see the definition or declaration.  Otherwise it&#39;s searching in files to find that this is defined as that which is defined as something else which in a massive conditional compilation header is eventually defined as a concrete type. Good hunting!"}], "tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1493794115, "creation_date": 1493794115, "answer_id": 43753010, "question_id": 43752563, "link": "https://stackoverflow.com/questions/43752563/how-to-determine-obscure-c-types/43753010#43753010", "title": "How to determine obscure c types", "body": "<p>Most of the time you should code so that the underlying type is irrelevant.\nThat's the idea of portable, future-proofing code. On a different platform or in an upgrade types may change and existing code should just pick that up.</p>\n\n<p>There are potential flaws though. For a scalar type like <code>susecond</code> as provided you may need to output it and the library should provide a <code>PRI</code>-style macro for output and a <code>SCN</code>-style macro for reading. See <code>&lt;inttypes.h&gt;</code>.\nOtherwise you eventually have to come to concrete types.\nThese macros (or equivalent) are rarely defined (in my experience) and you have to deal with the implementation type at some point...</p>\n\n<p>Also where not using generics (which are newish in C) and without C++ overloading you can hit trouble when passing values into other functions.\nYou call a function taking an <code>int</code> and then the library or platform changes and the underlying type of <code>susecond</code> is <code>long</code> and boom you've introduced a quiet truncation error! Always enable all your warnings!</p>\n\n<p>Your IDE might let you hover over and look up the underlying type on the boundaries where you need it. But where possible just declare types to be <code>susecond</code> and let the compiler worry about it.</p>\n\n<p>The reason it's done in this case is because (I guess) on 16-bit platforms <code>int</code> might not do for a value up to 999,999 (microseconds...) and this needs to be <code>long</code> but on 32-bit platforms where <code>int</code> is likely to be 32-bt it's fine.</p>\n\n<p>16-bit? Are you sure Granddad? The library is not new and may well be portable to embedded systems where 16-bit is a perfectly reasonable thing to encounter.</p>\n"}], "owner": {"reputation": 660, "user_id": 978656, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6446f0a408d33dce83e8f08e1735e01b?s=128&d=identicon&r=PG", "display_name": "gmaster", "link": "https://stackoverflow.com/users/978656/gmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493796244, "creation_date": 1493792679, "last_edit_date": 1493796244, "question_id": 43752563, "link": "https://stackoverflow.com/questions/43752563/how-to-determine-obscure-c-types", "title": "How to determine obscure c types", "body": "<p>Alright, this is a dumb question since I've been coding in C for a while but I've never really figured it out.</p>\n\n<p>C libraries love to implement their own obscure data types which generally just seem to be reimplementations of existing types (the library prompting this question was <a href=\"http://man7.org/linux/man-pages/man2/gettimeofday.2.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man2/gettimeofday.2.html</a>).</p>\n\n<p>My question is: how on earth are you supposed to figure out what these one-off datatypes actually are?  They never seem to be defined anywhere in the man pages, so short of digging deep into the source code of a header file I'm at a loss.  For example, from the above mentioned man page, what is a \"suseconds_t\" and how, in the general case, would I figure out what that is in detail?</p>\n"}, {"tags": ["c", "string", "return", "string-literals", "storage-duration"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1493793956, "post_id": 43752291, "comment_id": 74547589, "body": "<a href=\"https://electronics.stackexchange.com/a/237759/6102\">This</a> might be of help for understanding where variables are allocated. It was written with microcontrollers in mind, but applies universally. (Except on a PC you don&#39;t have true ROM.)"}, {"owner": {"reputation": 4519, "user_id": 1185191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8087c4c65ccdf94761ce95c695f8896?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/1185191/james"}, "edited": false, "score": 0, "creation_date": 1494249246, "post_id": 43752291, "comment_id": 74733168, "body": "<code>&quot;VERBOSE\\0&quot;</code> is odd. Just <code>&quot;VERBOSE&quot;</code> is normally sufficient because when the compiler allocates space for strings it includes a NUL termination character. (Unless the caller needs 2 NULs for some crazy reason)."}], "answers": [{"tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": true, "score": 5, "last_activity_date": 1493792043, "last_edit_date": 1592644375, "creation_date": 1493792043, "answer_id": 43752382, "question_id": 43752291, "link": "https://stackoverflow.com/questions/43752291/can-a-static-c-function-return-a-local-char-array/43752382#43752382", "title": "Can a static c function return a local char array?", "body": "<p>You are wrong, the returned pointer is not pointing to a local <code>char array</code>, but to a <code>string literal</code>, that is <code>static</code> for the process.</p>\n<p>From <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"noreferrer\">c-standard</a></p>\n<blockquote>\n<p><strong>6.4.5 String literals</strong></p>\n<p><strong>Sematics</strong></p>\n<p>In translation phase 7, a byte or code of value zero is appended to each multibyte\ncharacter sequence that results from a string literal or literals.78) <strong>The multibyte character\nsequence is then used to initialize an array of static storage duration</strong> and length just\nsufficient to contain the sequence.[...]</p>\n</blockquote>\n<p><sup>Em\u00e8phasis mine </sup></p>\n"}, {"comments": [{"owner": {"reputation": 2129, "user_id": 5208889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/45b68fcd5396fff95dc0c02e37efb276?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/5208889/ozgur"}, "edited": false, "score": 0, "creation_date": 1493794194, "post_id": 43752392, "comment_id": 74547708, "body": "Will not this char pointer be dangling pointer after the function returns? I mean, aren;&#39;t those strings local?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 2129, "user_id": 5208889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/45b68fcd5396fff95dc0c02e37efb276?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/5208889/ozgur"}, "edited": false, "score": 1, "creation_date": 1493794425, "post_id": 43752392, "comment_id": 74547826, "body": "@ozgur 1) they are string &quot;literals&quot; 2) there&#39;s nothing local, literals have static storage duration."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 6, "last_activity_date": 1493796464, "last_edit_date": 1493796464, "creation_date": 1493792085, "answer_id": 43752392, "question_id": 43752291, "link": "https://stackoverflow.com/questions/43752291/can-a-static-c-function-return-a-local-char-array/43752392#43752392", "title": "Can a static c function return a local char array?", "body": "<p>The linkage of the <em>function</em> (here static) doesn't matter at all. Neither is a \"string\" returned; instead what is returned is a pointer to char. It is perfectly legal to return pointers to the first character of string literals - the string literals are guaranteed to exist for the whole duration of the program. <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.5p6\" rel=\"nofollow noreferrer\">C11 6.4.5p6</a> states that the string literals as they're used here are used to initialize *\"an [anonymous] array of <strong>static</strong> storage duration and length just sufficient to contain the sequence\". Static storage duration means that its <em>\"lifetime is the entire execution of the program and its stored value is initialized only once, prior to program startup.\"</em> (<a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.4p3\" rel=\"nofollow noreferrer\">C11 6.2.4p3</a>).</p>\n\n<hr>\n\n<p>The thing that <em>does</em> look odd is the <code>\\0</code> at the end of the string literals, as literal strings are always 0-terminated, so essentially <code>\"VERBOSE\\0\"</code> would be just terminated with 2 zero bytes instead of usual one; <code>strlen</code> for that string would return <code>7</code> just as it would return for <code>\"VERBOSE\"</code>, and so on.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1493794573, "last_edit_date": 1493794573, "creation_date": 1493793503, "answer_id": 43752802, "question_id": 43752291, "link": "https://stackoverflow.com/questions/43752291/can-a-static-c-function-return-a-local-char-array/43752802#43752802", "title": "Can a static c function return a local char array?", "body": "<blockquote>\n  <p><em>Can a static c function return a local char array?</em></p>\n</blockquote>\n\n<p><strong>TL;DR</strong> Irrespective of <code>static</code> or <code>extern</code>, functions should not return a local array because it cannot be used meaningfully.</p>\n\n<hr>\n\n<p>Now, to elaborate the question in hand,</p>\n\n<blockquote>\n  <p><em>....static functions?</em></p>\n</blockquote>\n\n<p>You had it there, the <code>static</code> is associated with the linkage for the \"function\", not the <em>return value or type</em>.</p>\n\n<p>Here, <code>static</code> storage specifier means, the function has internal linkage, i.e., accessible from the translation unit only.</p>\n\n<p>Related <code>C11</code>, chapter \u00a76.2.2</p>\n\n<blockquote>\n  <p>If the declaration of a file scope identifier for an object or a function contains the storage class\n  specifier <code>static</code>, the identifier has internal linkage.</p>\n</blockquote>\n\n<p>OTOH, the <code>return</code> statements like</p>\n\n<pre><code>return \"FATAL\\0\"; \nreturn \"DEBUG\\0\"; ///and so on\n</code></pre>\n\n<p>actually return the pointer to the first element of the <a href=\"https://en.wikipedia.org/wiki/String_literal\" rel=\"nofollow noreferrer\"><strong><em>string literal</em></strong></a>, which are by definition having static storage duration <sup>Note 1</sup>, so the return value is</p>\n\n<ul>\n<li>matched with the return type, <code>char *</code> <sup>Note 2</sup></li>\n<li>valid after the return statement. <sup>Note 3</sup></li>\n</ul>\n\n<hr>\n\n<p>Note 1:</p>\n\n<p>Quoting <code>C11</code>, chapter \u00a76.4.5/ P6</p>\n\n<blockquote>\n  <p>In translation phase 7, a byte or code of value zero is appended to each multibyte\n  character sequence that results from a string literal or literals.<sup>78)</sup> The multibyte character\n  sequence is then used to <strong>initialize an array of static storage duration</strong> and length just\n  sufficient to contain the sequence. For <strong>character string literals, the array elements have\n  type <code>char</code></strong>, and are initialized with the individual bytes of the multibyte character\n  sequence.</p>\n</blockquote>\n\n<p>Note 2: </p>\n\n<p>Quoting chapter \u00a76.3.2.1/P3,</p>\n\n<blockquote>\n  <p>Except when it is the operand of the <code>sizeof</code> operator, the <code>_Alignof</code> operator, or the\n  unary <code>&amp;</code> operator, or is a string literal used to initialize an array, <strong>an expression that has\n  type <em>\u2018\u2018array of type\u2019\u2019</em> is converted to an expression with type <em>\u2018\u2018pointer to type\u2019\u2019</em> that points\n  to the initial element of the array object</strong> and is not an lvalue.</p>\n</blockquote>\n\n<p>Note 3:</p>\n\n<p>Quoting chapter \u00a76.2.4/P3</p>\n\n<blockquote>\n  <p>An object whose identifier is declared without the storage-class specifier\n  _Thread_local, and either with external or internal linkage or <strong>with the storage-class\n  specifier <code>static</code>, has static storage duration. Its lifetime is the entire execution of the\n  program</strong> and its stored value is initialized only once, prior to program startup.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1493793808, "creation_date": 1493793808, "answer_id": 43752911, "question_id": 43752291, "link": "https://stackoverflow.com/questions/43752291/can-a-static-c-function-return-a-local-char-array/43752911#43752911", "title": "Can a static c function return a local char array?", "body": "<ul>\n<li>Can a static c function return a local char array? No, that leads to undefined behavior.</li>\n<li>Does your code return a local char array? No. It returns a pointer to a string literal, which resides in read-only memory. This memory is not local.</li>\n<li>Can you return a pointer to a string literal from any function? Yes.</li>\n<li>Is there a difference between regular functions a internal linkage <code>static</code> ones here? No.</li>\n</ul>\n"}], "owner": {"reputation": 2129, "user_id": 5208889, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/45b68fcd5396fff95dc0c02e37efb276?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/5208889/ozgur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 43752382, "answer_count": 4, "score": 1, "last_activity_date": 1493796464, "creation_date": 1493791743, "last_edit_date": 1493794469, "question_id": 43752291, "link": "https://stackoverflow.com/questions/43752291/can-a-static-c-function-return-a-local-char-array", "title": "Can a static c function return a local char array?", "body": "<p>In zflog library I saw this code</p>\n\n<pre><code>static char* lvl_char(const int lvl)\n{\n    switch (lvl)\n    {\n    case ZF_LOG_VERBOSE:\n        return \"VERBOSE\\0\";\n    case ZF_LOG_DEBUG:\n        return \"DEBUG\\0\";\n    case ZF_LOG_INFO:\n        return \"INFO\\0\";\n    case ZF_LOG_WARN:\n        return \"WARN\\0\";\n    case ZF_LOG_ERROR:\n        return \"ERROR\\0\";\n    case ZF_LOG_FATAL:\n        return \"FATAL\\0\";\n    default:\n        ASSERT_UNREACHABLE(\"Bad log level\");\n        return \"?\\0\";\n    }\n}\n</code></pre>\n\n<p>which seemed odd to me. Can we really return a local c string from static functions?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3940, "user_id": 2830116, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SnjA4.jpg?s=128&g=1", "display_name": "Rohan Kumar", "link": "https://stackoverflow.com/users/2830116/rohan-kumar"}, "edited": false, "score": 0, "creation_date": 1493791630, "post_id": 43752219, "comment_id": 74546493, "body": "You need a <code>getchar()</code> on line 20."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1493791662, "post_id": 43752219, "comment_id": 74546508, "body": "<code>scanf(&quot;%[^\\n]s&quot;, str);</code> --&gt; <code>scanf(&quot; %99[^\\n]&quot;, str);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1493793231, "post_id": 43752290, "comment_id": 74547245, "body": "Question why two white space needed infront of scanf?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1493795474, "post_id": 43752290, "comment_id": 74548362, "body": "<code>s</code>  is quite meaningless."}], "tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 0, "last_activity_date": 1493792367, "last_edit_date": 1493792367, "creation_date": 1493791743, "answer_id": 43752290, "question_id": 43752219, "link": "https://stackoverflow.com/questions/43752219/my-scanf-function-isnt-working-inside-of-the-if-function/43752290#43752290", "title": "My scanf function isn&#39;t working inside of the if function", "body": "<p>Use this:</p>\n\n<pre><code>scanf(\" %[^\\n]s\", str);\n      ^^^\n    Whitespace\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>scanf(\"%[^\\n]s\", str);\n</code></pre>\n\n<p>For more information, refer <a href=\"https://classes.soe.ucsc.edu/cmps012a/Fall98/faq/scanfQ.html\" rel=\"nofollow noreferrer\">this</a> link.</p>\n"}, {"tags": [], "owner": {"reputation": 5543, "user_id": 6372809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O11k5.jpg?s=128&g=1", "display_name": "ilkkachu", "link": "https://stackoverflow.com/users/6372809/ilkkachu"}, "is_accepted": false, "score": 0, "last_activity_date": 1493807870, "creation_date": 1493807870, "answer_id": 43757659, "question_id": 43752219, "link": "https://stackoverflow.com/questions/43752219/my-scanf-function-isnt-working-inside-of-the-if-function/43757659#43757659", "title": "My scanf function isn&#39;t working inside of the if function", "body": "<p>Stop using <code>scanf()</code>. The terminal sends your application a full line at a time, but <code>scanf()</code> only consumes the parts it needs, i.e. one character in the case of <code>%c</code> or just all the digits in case of <code>%d</code>. The rest is left in the input buffer, where the following <code>scanf()</code> get them. That causes the user's input and what the program receives to be somewhat \"out of sync\".</p>\n\n<p>It's better to read full lines at a time, with <code>fgets()</code> or <code>getline()</code>, and then parse whatever you want from them. E.g.:</p>\n\n<pre><code>#define LINELEN 255 \nchar line[LINELEN];\nfgets(line, LINELEN, stdin);\nint num;\nint a = sscanf(line, \"%d\", &amp;num);\n</code></pre>\n\n<p>Use whatever format string you require on the <code>sscanf()</code> and put the whole thing in a function if you like. (<code>LINELEN</code> there is of course an arbitrary\nlimit, but <code>fgets()</code> requires <em>some</em> limit.)</p>\n\n<p>See also: <a href=\"http://c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\">http://c-faq.com/stdio/scanfprobs.html</a> and the <a href=\"http://c-faq.com/stdio/scanfprobs.html\" rel=\"nofollow noreferrer\">longer explanation</a> linked there.</p>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 7424456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18a7caf43d710ebaa55527a221bbd211?s=128&d=identicon&r=PG&f=1", "display_name": "Bidisha Pyne", "link": "https://stackoverflow.com/users/7424456/bidisha-pyne"}, "is_accepted": false, "score": 0, "last_activity_date": 1493810622, "creation_date": 1493810622, "answer_id": 43758667, "question_id": 43752219, "link": "https://stackoverflow.com/questions/43752219/my-scanf-function-isnt-working-inside-of-the-if-function/43758667#43758667", "title": "My scanf function isn&#39;t working inside of the if function", "body": "<p>use scanf like this: <code>scanf(\"%s\", str)</code> </p>\n\n<p>Only scanf statements need to be changed:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint top=-1;\nint word;\n\n\nchar stack_string[100];\nvoid push(char word);\nchar pop(void);\nint main()\n{\nchar input;\nchar str[100];\nint i;\nprintf(\"press [a] for palindrome check, [b] for string reversal:\");\nscanf(\"%c\", &amp;input);\n\nif (input == 'b'){\n    printf(\"Input a string:\\n\");\n    scanf(\"%s\", str);\n    for(i=0;i&lt;strlen(str);i++)\n        push(str[i]);\n    for(i=0;i&lt;strlen(str);i++)\n        str[i]=pop();\n    printf(\"Reversed String is: %s\\n\",str);\n}\nelse if(input == 'a'){\n    char str[100];\n    int count = 0;\n    printf(\"Input a string:\\n\");\n    scanf(\"%s\", str);\n\n    for (i = 0; i &lt; strlen(str); i++)\n    {\n        push(str[i]);\n    }\n for (i = 0; i &lt; strlen(str); i++)\n    {\n        if (str[i]==pop())\n        count++;\n    }\n\n    if (count == strlen(str))\n        printf(\"%s is a palindrome\\n\", str);\n    else\n        printf(\"%s is not a palindrome\\n\", str);\n\n}\n\n    return 0;\n}\n\nvoid push(char word)\n{\n    top=top+1;\n    stack_string[top]=word;\n}\n\n char pop()\n{\n    word = stack_string[top];\n    top=top-1;\n    return word;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7955310, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d99fc03744b3bf83a4e8ee383a8d9c83?s=128&d=identicon&r=PG&f=1", "display_name": "This guy", "link": "https://stackoverflow.com/users/7955310/this-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 506, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493810622, "creation_date": 1493791488, "last_edit_date": 1493800545, "question_id": 43752219, "link": "https://stackoverflow.com/questions/43752219/my-scanf-function-isnt-working-inside-of-the-if-function", "title": "My scanf function isn&#39;t working inside of the if function", "body": "<p>When I try to run the scanf inside of the if function after entering either 'a' or 'b', it immediately runs and exits the program without getting input. Is there a way to fix it so the scanf works inside of the if and else if functions?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint top=-1;\nint word;\n\n\nchar stack_string[100];\nvoid push(char word);\nchar pop(void);\nint main()\n{\n    char input;\n    char str[100];\n    int i;\n    printf(\"press [a] for palindrome check, [b] for string reversal:\");\n    scanf(\"%c\", &amp;input);\n\n    if (input == 'b'){\n        printf(\"Input a string: \");\n        scanf(\"%[^\\n]s\", str);\n        for(i=0;i&lt;strlen(str);i++)\n            push(str[i]);\n        for(i=0;i&lt;strlen(str);i++)\n            str[i]=pop();\n        printf(\"Reversed String is: %s\\n\",str);\n    }\n    else if(input == 'a'){\n        char str[100];\n        int count = 0;\n        printf(\"Input a string: \");\n        scanf(\"%[^\\n]s\", str);\n\n        for (i = 0; i &lt; strlen(str); i++)\n        {\n            push(str[i]);\n        }\n\n        for (i = 0; i &lt; strlen(str); i++)\n        {\n            if (str[i]==pop())\n            count++;\n        }\n\n        if (count == strlen(str))\n            printf(\"%s is a palindrome\\n\", str);\n        else\n            printf(\"%s is not a palindrome\\n\", str);\n\n    }\n\n    return 0;\n}\n\nvoid push(char word)\n{\n    top=top+1;\n    stack_string[top]=word;\n}\n\n char pop()\n{\n    word = stack_string[top];\n    top=top-1;\n    return word;\n}\n</code></pre>\n"}, {"tags": ["c++", "ios", "c", "swift"], "comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 2, "creation_date": 1493791564, "post_id": 43752165, "comment_id": 74546459, "body": "What prevents you from trying it?"}, {"owner": {"reputation": 609, "user_id": 7955643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa94892dffbf340b396dee2cfdc1655f?s=128&d=identicon&r=PG&f=1", "display_name": "Clancy Merrick", "link": "https://stackoverflow.com/users/7955643/clancy-merrick"}, "reply_to_user": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1493795122, "post_id": 43752165, "comment_id": 74548178, "body": "I&#39;m at a &quot;Research&quot; stage. I don&#39;t have access to a Mac or Xcode just now. I am trying to architect a cross-platform software solution so I&#39;m seeking helpful answers to assist in my design choices to minimise the amount of potentially wasted &quot;trial and error&quot;..."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 7955643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa94892dffbf340b396dee2cfdc1655f?s=128&d=identicon&r=PG&f=1", "display_name": "Clancy Merrick", "link": "https://stackoverflow.com/users/7955643/clancy-merrick"}, "edited": false, "score": 0, "creation_date": 1493795267, "post_id": 43752344, "comment_id": 74548255, "body": "Thanks Jasper. I&#39;m more concerned about performance penalties than extra coding effort at this stage so that&#39;s helpful info."}], "tags": [], "owner": {"reputation": 26657, "user_id": 404201, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd9932a584c0d67b5e017cc49305ccb7?s=128&d=identicon&r=PG", "display_name": "Jasper Blues", "link": "https://stackoverflow.com/users/404201/jasper-blues"}, "is_accepted": false, "score": 2, "last_activity_date": 1493791912, "creation_date": 1493791912, "answer_id": 43752344, "question_id": 43752165, "link": "https://stackoverflow.com/questions/43752165/is-calling-c-code-from-swift-more-expensive-or-slower-than-calling-c-code/43752344#43752344", "title": "Is calling C++ code from Swift more &quot;expensive&quot; or slower than calling C code?", "body": "<p>Swift has no C++ interop at present. That means you either have to create a C or Objective-C++ wrapper around your C++ classes in order to bridge them to Swift. </p>\n\n<p>In practice this is very unlikely to have a performance impact - it'll add another method call using VTABLE dispatch that in turn calls the C++ method. It does, however, create a lot more manual work that needs to be done in order to use your C++ code-base in Swift. </p>\n"}], "owner": {"reputation": 609, "user_id": 7955643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa94892dffbf340b396dee2cfdc1655f?s=128&d=identicon&r=PG&f=1", "display_name": "Clancy Merrick", "link": "https://stackoverflow.com/users/7955643/clancy-merrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "closed_date": 1493797081, "answer_count": 1, "score": -1, "last_activity_date": 1493791912, "creation_date": 1493791267, "last_edit_date": 1493791470, "question_id": 43752165, "link": "https://stackoverflow.com/questions/43752165/is-calling-c-code-from-swift-more-expensive-or-slower-than-calling-c-code", "closed_reason": "Needs more focus", "title": "Is calling C++ code from Swift more &quot;expensive&quot; or slower than calling C code?", "body": "<p>I have never tried Swift but my research suggests that callling pure C code is simpler than calling C++ code.</p>\n\n<p>Does this mean that there are associated performance impediments and, if so, how significant are they?</p>\n"}, {"tags": ["c", "pointers", "free", "c-standard-library"], "comments": [{"owner": {"reputation": 959, "user_id": 7902545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03fbc604c9916ba8651236a6087b9355?s=128&d=identicon&r=PG", "display_name": "didiz", "link": "https://stackoverflow.com/users/7902545/didiz"}, "edited": false, "score": 3, "creation_date": 1493791089, "post_id": 43752033, "comment_id": 74546262, "body": "Good design and reading the documentation."}], "answers": [{"tags": [], "owner": {"reputation": 15724, "user_id": 1716339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835fc3719b0118c68c4d202b3e5cbf18?s=128&d=identicon&r=PG", "display_name": "Aki Suihkonen", "link": "https://stackoverflow.com/users/1716339/aki-suihkonen"}, "is_accepted": false, "score": 4, "last_activity_date": 1493791801, "last_edit_date": 1493791801, "creation_date": 1493791316, "answer_id": 43752177, "question_id": 43752033, "link": "https://stackoverflow.com/questions/43752033/how-to-determine-whether-a-return-char-pointer-needs-to-be-free-in-c-standard-li/43752177#43752177", "title": "How to determine whether a return char pointer needs to be free in C standard library functions?", "body": "<p>In gnu/linux enter <a href=\"https://linux.die.net/man/3/strstr\" rel=\"nofollow noreferrer\">man strstr</a>  (or search it with your preferred web search engine).</p>\n\n<p><a href=\"https://linux.die.net/man/3/getenv\" rel=\"nofollow noreferrer\">Manual page for <code>getenv</code></a> also states:</p>\n\n<blockquote>\n  <p>The getenv() function searches the environment list to find the environment variable name, and returns a pointer to the corresponding value string.</p>\n</blockquote>\n\n<p>The design idea here and in <em>C</em> in general is not to make any necessary copies, but to point to already existing data for performance reasons.</p>\n\n<p>A counter example is <a href=\"https://linux.die.net/man/3/strdup\" rel=\"nofollow noreferrer\"><code>strdup</code></a>, which makes a copy of a string using internally <code>malloc</code>, and has to be <code>free()</code>d.</p>\n"}, {"tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": false, "score": 7, "last_activity_date": 1493791397, "creation_date": 1493791397, "answer_id": 43752195, "question_id": 43752033, "link": "https://stackoverflow.com/questions/43752033/how-to-determine-whether-a-return-char-pointer-needs-to-be-free-in-c-standard-li/43752195#43752195", "title": "How to determine whether a return char pointer needs to be free in C standard library functions?", "body": "<p>Each function should note that in its manual page.</p>\n\n<p>E.g. <code>getenv()</code> says nothing about deleting, and it's really not necessary (or would be wrong). <code>vasprintf()</code>, on the other hand, clearly states that the pointer returned must be <code>free()</code>'d.</p>\n"}, {"tags": [], "owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "is_accepted": true, "score": 3, "last_activity_date": 1493792248, "last_edit_date": 1493792248, "creation_date": 1493791519, "answer_id": 43752227, "question_id": 43752033, "link": "https://stackoverflow.com/questions/43752033/how-to-determine-whether-a-return-char-pointer-needs-to-be-free-in-c-standard-li/43752227#43752227", "title": "How to determine whether a return char pointer needs to be free in C standard library functions?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/utility/program/getenv\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/utility/program/getenv</a></p>\n\n<blockquote>\n  <p>Modifying the string returned by getenv invokes undefined behavior. </p>\n</blockquote>\n\n<p>So you shouldn't touch that one.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/string/byte/strstr\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/string/byte/strstr</a></p>\n\n<blockquote>\n  <p>Return value: Pointer to the first character of the found substring in str</p>\n</blockquote>\n\n<p>This returns a pointer to a character within the input c-string. So it's a pointer to memory that already existed, not a newly allocated string, and you shouldn't <code>free</code> it.</p>\n\n<p>p.s. Though it doesn't change the answer, I took the perspective of the C++ tag of the question. For C language documentation see the manual pages or, for this website, <a href=\"http://en.cppreference.com/w/c/program/getenv\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/program/getenv</a> and <a href=\"http://en.cppreference.com/w/c/string/byte/strstr\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/string/byte/strstr</a> (that have essentially the same content as the above)</p>\n"}, {"comments": [{"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1493791618, "post_id": 43752237, "comment_id": 74546488, "body": "I think you are missing an &#39;n&#39; in your answer!"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1493791873, "post_id": 43752237, "comment_id": 74546592, "body": "@Rene Got it ;)"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1493791941, "last_edit_date": 1493791941, "creation_date": 1493791546, "answer_id": 43752237, "question_id": 43752033, "link": "https://stackoverflow.com/questions/43752033/how-to-determine-whether-a-return-char-pointer-needs-to-be-free-in-c-standard-li/43752237#43752237", "title": "How to determine whether a return char pointer needs to be free in C standard library functions?", "body": "<p>For example, looking at <a href=\"http://man7.org/linux/man-pages/man3/getenv.3.html\" rel=\"nofollow noreferrer\">The Man of getenv</a> you can read:</p>\n\n<blockquote>\n  <p><strong>Notes</strong></p>\n  \n  <p>[...]\n  As typically implemented, getenv() returns a pointer to a string within the environment list. <strong>The caller must take care not to modify this string</strong> , since that would change the environment of the process[...]</p>\n</blockquote>\n\n<p><sup>Emphasis mine </sup></p>\n\n<p>And</p>\n\n<blockquote>\n  <p><strong>DESCRIPTION</strong>         </p>\n  \n  <p>The getenv() function searches the environment list to find the\n  environment variable name, and <strong>returns a pointer to the >corresponding\n         value string</strong>.</p>\n</blockquote>\n\n<p><sup>Emphasis mine </sup></p>\n\n<p>In other words, you mustn't free that pointer because is a pointer to a string in process environment, not a string allocated for your job.</p>\n"}, {"comments": [{"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1493815904, "post_id": 43752438, "comment_id": 74562276, "body": "Posted. <a href=\"https://meta.stackoverflow.com/questions/348733/animated-gifs-in-answers\" title=\"animated gifs in answers\">meta.stackoverflow.com/questions/348733/&hellip;</a> It might seem petty but I think it&#39;s important to not try and throttle all the fun out of the site."}], "tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 1, "last_activity_date": 1493842132, "last_edit_date": 1493842132, "creation_date": 1493792239, "answer_id": 43752438, "question_id": 43752033, "link": "https://stackoverflow.com/questions/43752033/how-to-determine-whether-a-return-char-pointer-needs-to-be-free-in-c-standard-li/43752438#43752438", "title": "How to determine whether a return char pointer needs to be free in C standard library functions?", "body": "<p>Always render unto <code>free()</code> what <code>malloc()</code> and family rendered unto thee.</p>\n\n<p>The family are <code>calloc()</code> and <code>realloc()</code>.</p>\n\n<p>Most other standard library functions don't return newly allocated memory and don't need to be <code>free()</code>d. <code>strdup()</code> (if provided) is an exception rather than the rule.</p>\n\n<p>Functions like <code>fopen()</code> return a pointer that does need to be surrendered but by <code>fclose()</code> not <code>free()</code>.</p>\n\n<p>But unfortunately the real answer is 'check the documentation and know your libraries'.</p>\n\n<p>A fact of C coding is you are almost entirely responsible for resource management including knowing exactly what resources to surrender and when.</p>\n\n<p>This is the power and the curse of C. Hurray you're in control! Sh*t! You're in control.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1493794689, "creation_date": 1493794689, "answer_id": 43753192, "question_id": 43752033, "link": "https://stackoverflow.com/questions/43752033/how-to-determine-whether-a-return-char-pointer-needs-to-be-free-in-c-standard-li/43753192#43753192", "title": "How to determine whether a return char pointer needs to be free in C standard library functions?", "body": "<p>Properly designed libraries <em>never</em> return pointers that you have to manually <code>free()</code>. If they use dynamic memory or other resources that need clean-up, they will have a function for that purpose - a destructor if you will, that you must call manually.</p>\n"}], "owner": {"reputation": 665, "user_id": 2279854, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ynl6G.jpg?s=128&g=1", "display_name": "Tony Lin", "link": "https://stackoverflow.com/users/2279854/tony-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1601, "favorite_count": 0, "accepted_answer_id": 43752227, "answer_count": 6, "score": -1, "last_activity_date": 1493842132, "creation_date": 1493790701, "last_edit_date": 1493794725, "question_id": 43752033, "link": "https://stackoverflow.com/questions/43752033/how-to-determine-whether-a-return-char-pointer-needs-to-be-free-in-c-standard-li", "title": "How to determine whether a return char pointer needs to be free in C standard library functions?", "body": "<p>I've little experience in <code>C</code> program developing. As I described in the title, how to determine whether a return char pointer needs to be free in C standard library functions? For examples, do I need to free the return pointer of function <code>getenv</code> in <code>stdlib.h</code> and <code>strstr</code> in string.h? I can't find any description in the document. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "arrays", "sorting"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1493787470, "post_id": 43751264, "comment_id": 74544907, "body": "Perhaps <a href=\"https://www.cs.usfca.edu/~galles/visualization/ComparisonSort.html\" rel=\"nofollow noreferrer\">this visualisation</a> will help you understand"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1493787573, "post_id": 43751264, "comment_id": 74544940, "body": "Best thing to do is add <code>printf</code>s to the code to display the values of <code>c</code> and <code>d</code>. And definitely add a <code>printf</code> to your modified code. You may be surprised to see what <code>c</code> is doing in that code."}, {"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1493787623, "post_id": 43751264, "comment_id": 74544956, "body": "Wow! This visualization is angelic! An animated video is worth a thousand pictures. Thanks so much!"}, {"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1493787652, "post_id": 43751264, "comment_id": 74544968, "body": "That&#39;s great advice!"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1493787738, "post_id": 43751264, "comment_id": 74544996, "body": "You don&#39;t need two for loops with indexes.  <a href=\"https://en.wikipedia.org/wiki/Bubble_sort#Pseudocode_implementation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Bubble_sort#Pseudocode_implementation</a> shows a while loop and a for loop so it would only use one index variable."}], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1493787465, "post_id": 43751372, "comment_id": 74544903, "body": "Thank you! My head aches a lot less now that you explained the true length of &quot;d&quot; to me. Thanks so much!"}, {"owner": {"reputation": 275, "user_id": 4944033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2ooK9.jpg?s=128&g=1", "display_name": "Rohit Mourya", "link": "https://stackoverflow.com/users/4944033/rohit-mourya"}, "reply_to_user": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 1, "creation_date": 1493789033, "post_id": 43751372, "comment_id": 74545447, "body": "@xyz123 Though you got your doubt clear, however you can optimize your bubble sort algorithm by using one boolean variable. Refer my <a href=\"https://mouryarohit.blogspot.in/2017/04/bubble-sort-in-on.html\" rel=\"nofollow noreferrer\">blog</a> for more details. This will reduce time complexity of O(n) for best case. At present your algorithm will run in O(n^2) no matter what input you give."}, {"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 1, "creation_date": 1493789474, "post_id": 43751372, "comment_id": 74545598, "body": "Hmm, you reduced the computational complexity somehow, but your modified function definition still has a similar for --&gt; for --&gt; if structure."}], "tags": [], "owner": {"reputation": 1786, "user_id": 6028039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Kxv.jpg?s=128&g=1", "display_name": "SHAH MD IMRAN HOSSAIN", "link": "https://stackoverflow.com/users/6028039/shah-md-imran-hossain"}, "is_accepted": true, "score": 9, "last_activity_date": 1493787513, "last_edit_date": 1493787513, "creation_date": 1493787350, "answer_id": 43751372, "question_id": 43751264, "link": "https://stackoverflow.com/questions/43751264/in-this-bubble-sort-code-what-do-these-variables-c-d-mean-in-c/43751372#43751372", "title": "In this bubble sort code what do these variables c &amp; d mean in C?", "body": "<p><strong>Here c &amp; d using to traverse and sorting the loop</strong></p>\n\n<p><strong>for c</strong>\nthe whole loop is traversing n times</p>\n\n<p>and <strong>for d</strong></p>\n\n<p>all elements of the array except the <strong>sorted</strong> are being traversed and operated for sorting the array</p>\n\n<p>hope that you understand the fact now</p>\n\n<p><strong>Happy Coding</strong></p>\n"}, {"comments": [{"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1493787786, "post_id": 43751426, "comment_id": 74545019, "body": "Actually makes sense to me!"}], "tags": [], "owner": {"reputation": 732, "user_id": 4036668, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/uXyvB.jpg?s=128&g=1", "display_name": "Anton Savelyev", "link": "https://stackoverflow.com/users/4036668/anton-savelyev"}, "is_accepted": false, "score": 6, "last_activity_date": 1493787819, "last_edit_date": 1493787819, "creation_date": 1493787705, "answer_id": 43751426, "question_id": 43751264, "link": "https://stackoverflow.com/questions/43751264/in-this-bubble-sort-code-what-do-these-variables-c-d-mean-in-c/43751426#43751426", "title": "In this bubble sort code what do these variables c &amp; d mean in C?", "body": "<p>What happens is when C is 0 we traverse the whole array (up to N - C - 1) and the maximum digit gets put at the end. Once we have the biggest digit at the end of the array where it belongs, well, we don't need to worry about it anymore. So after that, C increments, and we sort up N - 1 - 1, which will be the farthest value that D will go up to. </p>\n\n<p>Another way to explain. When C is 0, we bring the maximum digit up to last position in the array. When C is 1, we bring up the 2nd biggest digit up to the last - 1 position in the array. And so on and so forth.</p>\n\n<p>D is the one that actually does the traversing, and think of C as a counter. </p>\n"}], "owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 43751372, "answer_count": 2, "score": 8, "last_activity_date": 1493787819, "creation_date": 1493786773, "last_edit_date": 1493787382, "question_id": 43751264, "link": "https://stackoverflow.com/questions/43751264/in-this-bubble-sort-code-what-do-these-variables-c-d-mean-in-c", "title": "In this bubble sort code what do these variables c &amp; d mean in C?", "body": "<p>So I understand that an ascending order bubble sort checks if index i is greater than index \"i + 1\", and if it is, then it swaps the positions, and then keeps going till it reaches the end of the loop, and then the loop starts over, and keeps switching positions, until every index \"i\" is not greater than \"i + 1\", and then you loop is sorted in ascending order completely. </p>\n\n<p>So I'm looking at this bubble sort code.\nHere is the source: www.programmingsimplified.com/c/source-code/c-program-bubble-sort</p>\n\n<p>Here is the code: </p>\n\n<pre><code>/* Bubble sort code */\n\n#include &lt;stdio.h&gt;\n\nint main()\n{\n  int array[100], n, c, d, swap;\n\n  printf(\"Enter number of elements\\n\");\n  scanf(\"%d\", &amp;n);\n\n  printf(\"Enter %d integers\\n\", n);\n\n  for (c = 0; c &lt; n; c++)\n    scanf(\"%d\", &amp;array[c]);\n\n  for (c = 0 ; c &lt; ( n - 1 ); c++)\n  {\n    for (d = 0 ; d &lt; n - c - 1; d++)\n    {\n      if (array[d] &gt; array[d+1]) /* For decreasing order use &lt; */\n      {\n        swap       = array[d];\n        array[d]   = array[d+1];\n        array[d+1] = swap;\n      }\n    }\n  }\n\n  printf(\"Sorted list in ascending order:\\n\");\n\n  for ( c = 0 ; c &lt; n ; c++ )\n     printf(\"%d\\n\", array[c]);\n\n  return 0;\n}\n</code></pre>\n\n<p>I understand all variables except \"d\". I have no clue what they mean esoterically. So this is the section of code that confuses me: </p>\n\n<pre><code> for (c = 0 ; c &lt; ( n - 1 ); c++)\n      {\n        for (d = 0 ; d &lt; n - c - 1; d++)\n        {\n          if (array[d] &gt; array[d+1]) /* For decreasing order use &lt; */\n          {\n            swap       = array[d];\n            array[d]   = array[d+1];\n            array[d+1] = swap;\n          }\n        }\n      }\n</code></pre>\n\n<p>As I understand it, the first for loop steps through the array of length n - 1 because in C the first index of an array is 0. The length of the second for loop appears to be the length of \"c\" as it steps through the array, but it's not the length of the array (n - 1), so that confuses me. I don't get what d is, so I don't get why \"d\" is used in the swap statements instead of \"c. I totally get what the swap does though, switching the elements of the array as I explained in the intro with swapping the indices.   </p>\n\n<p>So I guess what I don't understand the most is why the second for loop is necessary and the length of the array of d: </p>\n\n<pre><code> for (d = 0 ; d &lt; n - c - 1; d++)\n            {\n               // if comparison switch check.\n            }\n</code></pre>\n\n<p>So the code provided in the website does a bubble sort correctly.\nI tried it with n = 5, and values = {9, 8, 7, 6, 5} </p>\n\n<p>It successfully rearranges them to {5, 6, 7, 8 , 9} in ascending order. </p>\n\n<p>Since I don't understand the second for loop, I thought I would see what would happen if I did not include it, and the result is interesting. I just changed removed the second for loop, and replaced mentions of \"d\" with c. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void)\n{\n\nint array[100], n, c, swap;\n\nprintf(\"Enter number of elements\\n\");\nscanf(\"%d\", &amp;n);\n\n// Tell the user to enter integers in a loop.\nprintf(\"Enter %d integers\\n\", n);\n    for (c = 0; c &lt; n; c++)\n        scanf(\"%d\", &amp;array[c]);\n\n        for(c = 0; c &lt; (n - 1); c++)\n        {\n\n                if(array[c] &gt; array[c + 1])\n                {\n                    swap = array[c];\n                    array[c] = array[c+1];\n                    array[c+1] = swap;\n                }\n\n        }\n\n        printf(\"Sorted list in ascending order:\\n\");\n\n        for(c = 0; c &lt; n; c++)\n            printf(\"%d\\n\", array[c]);\n\n    return (0);\n}\n</code></pre>\n\n<p>If I see what happens with this code when I removed the second for-loop I get this result. I input 5 elements: {9, 8, 7, 6, 5}, and the order I get back is this: {8, 7, 6, 5, 9}. This is clearly not correct ascending order. But it did a bubble sort through the whole set; it just only completed one pass, so that is why this sorted array starts at 8 because it only made one pass. </p>\n\n<p>Again, this incorrect code now can actually correctly sort this 5 element array: {1, 8, 2, 3, 7}. It changes it to {1, 2, 3, 7, 8}. But it only took one pass through the array to correctly complete this bubble sort. </p>\n\n<p>So I have discovered that the second for loop makes sure the array is numerically sorted in increasing order correctly as many number of passes of bubble sorts are required to make the change. </p>\n\n<p>But I still don't understand it, and it's hard to explain how I don't understand it. I very well know that \"c\" is the index that slides through the array from beginning to end. But what kind of index is \"d\" and where does it truly start from, and where does it really end?</p>\n\n<p>Thanks. </p>\n\n<p>If you happen to have simpler code that doesn't require a for-loop inception for a bubble sort, and you can only use one variable, then I would appreciate admiring that code. </p>\n"}, {"tags": ["c++", "c", "gcc", "g++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1493787085, "post_id": 43751203, "comment_id": 74544777, "body": "Note that it&#39;s a bad idea to compile a C file with a C++ compiler or vice versa , they are separate languages and there&#39;s a better way to do whatever you are trying to do"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493787150, "post_id": 43751203, "comment_id": 74544801, "body": "Also you can use the C version for the common headers in C++ (e.g. <code>#include &lt;stdio.h&gt;</code> is fine in C++)"}, {"owner": {"reputation": 317, "user_id": 1015013, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e6b3bcfe07fcf9aefe629a96ede83ff?s=128&d=identicon&r=PG", "display_name": "nndhawan", "link": "https://stackoverflow.com/users/1015013/nndhawan"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493787676, "post_id": 43751203, "comment_id": 74544976, "body": "Thanks for the concern, trust me code is going no where...just practicing some coding problems and trying it out on gcc and g++ compilers to see what works and what doesn&#39;t..."}, {"owner": {"reputation": 317, "user_id": 1015013, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e6b3bcfe07fcf9aefe629a96ede83ff?s=128&d=identicon&r=PG", "display_name": "nndhawan", "link": "https://stackoverflow.com/users/1015013/nndhawan"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1493787891, "post_id": 43751203, "comment_id": 74545045, "body": "Thank you guys &quot;#ifdef __cplusplus&quot; works just fine!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1493797201, "post_id": 43751203, "comment_id": 74549440, "body": "Note that <code>g++</code> <i>is</i> the gcc compiler. It&#39;s just a wrapper that after compiling tells the linker to link the C++ Standard Library."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "is_accepted": false, "score": 5, "last_activity_date": 1493786662, "creation_date": 1493786662, "answer_id": 43751241, "question_id": 43751203, "link": "https://stackoverflow.com/questions/43751203/are-there-preprocessor-defines-to-differentiate-gcc-and-g-code/43751241#43751241", "title": "Are there preprocessor defines to differentiate gcc and g++ code?", "body": "<p>I'm not sure if there are <code>#define</code>s specific to GCC, but the C++ standard defines the symbol <a href=\"http://en.cppreference.com/w/cpp/preprocessor/replace#Predefined_macros\" rel=\"noreferrer\"><code>__cplusplus</code></a>. If that exists, then you are on a C++ compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 3794, "user_id": 7256714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adeb98b0e8995d8576ad5f66c0f982e5?s=128&d=identicon&r=PG&f=1", "display_name": "Pras", "link": "https://stackoverflow.com/users/7256714/pras"}, "is_accepted": false, "score": 10, "last_activity_date": 1493786663, "creation_date": 1493786663, "answer_id": 43751243, "question_id": 43751203, "link": "https://stackoverflow.com/questions/43751203/are-there-preprocessor-defines-to-differentiate-gcc-and-g-code/43751243#43751243", "title": "Are there preprocessor defines to differentiate gcc and g++ code?", "body": "<p>In c++ you can you </p>\n\n<pre><code>#ifdef __cplusplus\n</code></pre>\n\n<p>eg if c++ code you want certain piece of code to be handled by compiler as c code you need to put that block in</p>\n\n<pre><code>#ifdef __cplusplus\n   extern \"C\" {\n#endif\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5315, "user_id": 3527464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MRCc6.jpg?s=128&g=1", "display_name": "Pyves", "link": "https://stackoverflow.com/users/3527464/pyves"}, "is_accepted": false, "score": 0, "last_activity_date": 1493917894, "last_edit_date": 1493917894, "creation_date": 1493834002, "answer_id": 43766911, "question_id": 43751203, "link": "https://stackoverflow.com/questions/43751203/are-there-preprocessor-defines-to-differentiate-gcc-and-g-code/43766911#43766911", "title": "Are there preprocessor defines to differentiate gcc and g++ code?", "body": "<p>As pointed out by the other answers, testing for the definition of the <code>__cplusplus</code> <a href=\"http://en.cppreference.com/w/cpp/preprocessor/replace\" rel=\"nofollow noreferrer\">predefined macro</a> will work:</p>\n\n<blockquote>\n  <p><strong>__cplusplus</strong> denotes the version of C++ standard that is being used, expands to\n  value 199711L (until C++11), 201103L (C++11), 201402L (C++14), or\n  201703L (C++17).</p>\n</blockquote>\n\n<hr>\n\n<p>There is also a GCC specific macro which may be useful to you, <code>__GNUG__</code>. As outlined in the <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html\" rel=\"nofollow noreferrer\">GCC documentation</a>:</p>\n\n<blockquote>\n  <p><strong>__GNUG__</strong></p>\n  \n  <p>The GNU C++ compiler defines this. Testing it is equivalent to testing\n  (__GNUC__ &amp;&amp; __cplusplus).</p>\n</blockquote>\n\n<p>The linked GCC documentation also lists other macros defined by the different GNU compilers.</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 0, "last_activity_date": 1493918737, "creation_date": 1493918737, "answer_id": 43789239, "question_id": 43751203, "link": "https://stackoverflow.com/questions/43751203/are-there-preprocessor-defines-to-differentiate-gcc-and-g-code/43789239#43789239", "title": "Are there preprocessor defines to differentiate gcc and g++ code?", "body": "<p>In <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.10.8\" rel=\"nofollow noreferrer\">6.10.8 Predefined macro names</a> the C11 standard says (emphasis mine)</p>\n\n<blockquote>\n  <p>The implementation <strong>shall not</strong> predefine the macro __cplusplus, nor shall it define it in any standard header.</p>\n</blockquote>\n\n<p>I believe C++ mandates a conforming implementation to define that name, so you can use it to differentiate languages</p>\n\n<pre><code>#ifdef __cplusplus\n/* c++ code */\n#else\n/* c code */\n#endif\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 1015013, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e6b3bcfe07fcf9aefe629a96ede83ff?s=128&d=identicon&r=PG", "display_name": "nndhawan", "link": "https://stackoverflow.com/users/1015013/nndhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1493918737, "creation_date": 1493786481, "last_edit_date": 1493788614, "question_id": 43751203, "link": "https://stackoverflow.com/questions/43751203/are-there-preprocessor-defines-to-differentiate-gcc-and-g-code", "title": "Are there preprocessor defines to differentiate gcc and g++ code?", "body": "<p>Are there preprocessor macros defined in the gcc and g++ compilers so that if I want to make my C code link to the C standard library or the C++ standard library? Something like: </p>\n\n<p>someFile.c</p>\n\n<pre><code>#ifdef __CPP__\n   #include &lt;c++ library include&gt;\n#else\n   #include &lt;c library include&gt;\n</code></pre>\n\n<p>I'm sure there are but a quick Google search didn't point me to right away and I'm sure someone is going to just post duplicate question, but in any case, please point me in the right direction.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 2, "creation_date": 1493786533, "post_id": 43751189, "comment_id": 74544628, "body": "In a simple way - No. If you still intend to do it in a hackish non portable way, you can call <code>ps</code> from the C program and look for the name of the process where the process id == your parent id. Assuming this is Linux. There has to be something similar for Windows"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1493786995, "post_id": 43751189, "comment_id": 74544754, "body": "This might be an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. Perhaps say why you think you need to do that and someone may have a better solution to achieve what you really need to do."}, {"owner": {"reputation": 713, "user_id": 4880288, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OycAQxKvySg/AAAAAAAAAAI/AAAAAAAAEQ0/nM_F7pKQCgQ/photo.jpg?sz=128", "display_name": "mgarey", "link": "https://stackoverflow.com/users/4880288/mgarey"}, "edited": false, "score": 0, "creation_date": 1493787428, "post_id": 43751189, "comment_id": 74544895, "body": "You could always pass the path as one of the arguments to main. However, I agree with kaylum."}], "owner": {"reputation": 1, "user_id": 7955397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0c1cca695912c009264162379441914?s=128&d=identicon&r=PG&f=1", "display_name": "Dumslicer Halo", "link": "https://stackoverflow.com/users/7955397/dumslicer-halo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493786382, "creation_date": 1493786382, "question_id": 43751189, "link": "https://stackoverflow.com/questions/43751189/get-path-of-shell-script-that-calls-a-c-program-from-the-c-program", "title": "Get path of shell script that calls a C program from the C program", "body": "<p>I have a shell script that calls a C program. Can we get the path of this shell script in the C program being called by it?</p>\n"}, {"tags": ["c++", "c", "qt"], "comments": [{"owner": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "edited": false, "score": 0, "creation_date": 1493789377, "post_id": 43751118, "comment_id": 74545567, "body": "Do you have code? I can&#39;t find the possbility to get an QIODevice from QTableView, or does your model?"}, {"owner": {"reputation": 11, "user_id": 7955336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d62a4d707ff5d5e5b086a64ba198f0?s=128&d=identicon&r=PG&f=1", "display_name": "adhityarizi", "link": "https://stackoverflow.com/users/7955336/adhityarizi"}, "reply_to_user": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "edited": false, "score": 0, "creation_date": 1493793843, "post_id": 43751118, "comment_id": 74547540, "body": "Here&#39;s my code to print from QTableView into txt files :  <code>QFile file(&quot;&#47;home&#47;rizi&#47;TableView&#47;tes&quot;);      if(file.open(QIODevice::WriteOnly))     {         QDataStream stream(&amp;file);         qint32 n(model-&gt;rowCount()), m(model-&gt;columnCount());         stream &lt;&lt; n &lt;&lt; m;          for(int i=0; i&lt;n; ++i)             for(int j=0; j&lt;m; j++)                 model-&gt;item(i,j)-&gt;write(stream);         file.close();     }</code>  I am using QStandardItemModel class to initate the model"}, {"owner": {"reputation": 11, "user_id": 7955336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d62a4d707ff5d5e5b086a64ba198f0?s=128&d=identicon&r=PG&f=1", "display_name": "adhityarizi", "link": "https://stackoverflow.com/users/7955336/adhityarizi"}, "reply_to_user": {"reputation": 823, "user_id": 1850429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aeac2c1534ffc9cd94072b3196838b9?s=128&d=identicon&r=PG", "display_name": "Jeroen3", "link": "https://stackoverflow.com/users/1850429/jeroen3"}, "edited": false, "score": 0, "creation_date": 1493794064, "post_id": 43751118, "comment_id": 74547635, "body": "I am just curios how to printout the data from QTableView using QTextStream so that the other user can read data in txt easily"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7955336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d62a4d707ff5d5e5b086a64ba198f0?s=128&d=identicon&r=PG&f=1", "display_name": "adhityarizi", "link": "https://stackoverflow.com/users/7955336/adhityarizi"}, "edited": false, "score": 0, "creation_date": 1493798294, "post_id": 43753960, "comment_id": 74550105, "body": "I&#39;ve tried that before, but it didn&#39;t work so I changed the code to this : . . . <code>stream &lt;&lt; model-&gt;item(i,j)-&gt;write(stream);</code> I dont have any problem when write data from listview to txt, but tableview make me so mad."}, {"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "reply_to_user": {"reputation": 11, "user_id": 7955336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d62a4d707ff5d5e5b086a64ba198f0?s=128&d=identicon&r=PG&f=1", "display_name": "adhityarizi", "link": "https://stackoverflow.com/users/7955336/adhityarizi"}, "edited": false, "score": 0, "creation_date": 1493799278, "post_id": 43753960, "comment_id": 74550686, "body": "stream &lt;&lt; model-&gt;item(i,j)-&gt;write(stream); this is wrong. -&gt;write(stream); part is not necessary"}], "tags": [], "owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "is_accepted": false, "score": 0, "last_activity_date": 1493797056, "creation_date": 1493797056, "answer_id": 43753960, "question_id": 43751118, "link": "https://stackoverflow.com/questions/43751118/how-to-use-qtextstream-instead-of-qdatastream-for-load-save-from-qtableview/43753960#43753960", "title": "How to use QTextStream instead of QDataStream for load-save from QTableView?", "body": "<p>Each item in the model consists of more than a text. That's why write function requires a QDataStream instance. If saving only the text part of the data is ok for you then you can always:</p>\n\n<pre><code>qint32 n(model-&gt;rowCount()), m(model-&gt;columnCount()); \nstream &lt;&lt; n &lt;&lt; m; \nfor(int i=0; i&lt;n; ++i) \nfor(int j=0; j&lt;m; j++) \nstream &lt;&lt; model-&gt;item(i,j)-&gt;text();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7955336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d62a4d707ff5d5e5b086a64ba198f0?s=128&d=identicon&r=PG&f=1", "display_name": "adhityarizi", "link": "https://stackoverflow.com/users/7955336/adhityarizi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493797056, "creation_date": 1493785946, "last_edit_date": 1493789014, "question_id": 43751118, "link": "https://stackoverflow.com/questions/43751118/how-to-use-qtextstream-instead-of-qdatastream-for-load-save-from-qtableview", "title": "How to use QTextStream instead of QDataStream for load-save from QTableView?", "body": "<p>I am newbie on QT, So when I try to load and save data from QTableView into txt files in linux using QDataStream I have a problem like this :</p>\n\n<p>txt files contain data from tableview</p>\n\n<p><img src=\"https://i.stack.imgur.com/UNVs6.png\" alt=\"\"></p>\n\n<p>All I want is the data in txt files easily to read, for example :\ndata1;data2\ndata3;data3</p>\n\n<p>So, how to use QTextStream instead of QDataStream, because when I'm using QTextStream I can write output in txt just like this :</p>\n\n<pre><code>QFile ofile(\"/home/rizi/LearnQT/tes\");\nofile.open(QIODevice::ReadWrite | QIODevice::Text);\nQTextStream out(&amp;ofile);\nout &lt;&lt; line+\"\\n\";\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "strtok"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493786068, "post_id": 43751078, "comment_id": 74544493, "body": "<code>letter[l++] = q;</code> --&gt; <code>letter[l++] = *q;</code>"}, {"owner": {"reputation": 25, "user_id": 7954270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb6df31e43b4b431d7d235ad256d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "fallt_zz", "link": "https://stackoverflow.com/users/7954270/fallt-zz"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493786991, "post_id": 43751078, "comment_id": 74544751, "body": "@BLUEPIXY thank you very much. Still not exactly sure how the logic behind that works, as I mentioned in the answer below, but now my code works so I&#39;m happy."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493787260, "post_id": 43751078, "comment_id": 74544832, "body": "<code>*q</code>  is the character that the pointer points."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7954270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb6df31e43b4b431d7d235ad256d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "fallt_zz", "link": "https://stackoverflow.com/users/7954270/fallt-zz"}, "edited": false, "score": 0, "creation_date": 1493786622, "post_id": 43751130, "comment_id": 74544661, "body": "Okay, thank you for the explanation. This is probably the thousandth time I&#39;ve mixed <code>char*</code> and <code>char</code> up.  EDIT: If you have the time, could you explain why I still had to put <code>*</code> before <code>q</code>? Because I originally defined both as <code>char *letter = . . .</code> and <code>char *q = . . .</code>. and up until now I&#39;ve always thought that if the number of asterisks were the same, the math would work out."}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "reply_to_user": {"reputation": 25, "user_id": 7954270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb6df31e43b4b431d7d235ad256d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "fallt_zz", "link": "https://stackoverflow.com/users/7954270/fallt-zz"}, "edited": false, "score": 0, "creation_date": 1493787742, "post_id": 43751130, "comment_id": 74544997, "body": "One way to think about it, and this is something that lets you have a little fun (and/or annoy other coders), is that <code>array[index]</code> is turned into <code>*(array+index)</code>: you can see that it is being dereferenced there. I.e., while <code>letters</code> is a char*, <code>letters[l++]</code> is a char. The fun you can have (or used to, dunno if it still works), is that <code>index[array]</code>could give the same result as <code>array[index]</code>."}], "tags": [], "owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1493786034, "creation_date": 1493786034, "answer_id": 43751130, "question_id": 43751078, "link": "https://stackoverflow.com/questions/43751078/c-using-strtok-to-split-an-array-of-strings-into-an-array-of-characters/43751130#43751130", "title": "C - Using strtok to split an array of strings into an array of characters", "body": "<p><code>letter</code> is an array of <code>char</code>.<br>\n<code>q</code> is a <code>char*</code>.</p>\n\n<p>Therefore, <code>letter[l++] = q</code> is not going to do what you want, as you're now storing a <code>char*</code> into a <code>char</code>; I would imagine the compiler would spit out some warning about truncation.</p>\n"}], "owner": {"reputation": 25, "user_id": 7954270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fb6df31e43b4b431d7d235ad256d4d7?s=128&d=identicon&r=PG&f=1", "display_name": "fallt_zz", "link": "https://stackoverflow.com/users/7954270/fallt-zz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "accepted_answer_id": 43751130, "answer_count": 1, "score": 0, "last_activity_date": 1493786034, "creation_date": 1493785718, "question_id": 43751078, "link": "https://stackoverflow.com/questions/43751078/c-using-strtok-to-split-an-array-of-strings-into-an-array-of-characters", "title": "C - Using strtok to split an array of strings into an array of characters", "body": "<p>This is a continuation of <a href=\"https://stackoverflow.com/questions/43747630/how-to-set-up-a-c-function-that-splits-user-input-into-multiple-parts-and-also/43747906?noredirect=1#comment74540612_43747906\">my last question</a>.</p>\n\n<p>So far, I've successfully taken user input and stored it into strings. For example, I turned this:</p>\n\n<pre><code>1:E 2:B 2:B 2:B 4:G\n</code></pre>\n\n<p>Into this:\n<code>1:E</code> <code>2:B</code> <code>2:B</code> <code>2:B</code> <code>4:G</code><br>\nWhich is an array of strings.</p>\n\n<p>This is what I want to do next, but it's not working for me:\n<code>1</code> <code>E</code> <code>2</code> <code>B</code> <code>2</code> <code>B</code> <code>2</code> <code>B</code> <code>4</code> <code>G</code><br>\nAnd each of these would be characters stored into an array of characters.</p>\n\n<p>Here's the chunk of code I've got working correctly:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX_INPUT_SIZE ( (sizeof(char)*96) + (sizeof(int)*48) )\n\nint main () {\n\n  char *input = malloc(MAX_INPUT_SIZE);\n\n  printf(\"Example input:  1:E 2:C 2:C 2:C 8:D\\n\");\n  printf(\"Your input:\\n\\n\");\n\n  fgets(input, MAX_INPUT_SIZE, stdin);\n\n  // Removing newline\n  if ( (strlen(input) &gt; 0) &amp;&amp; (input[strlen(input) - 1] == '\\n') )\n      input[strlen(input) - 1] = '\\0';\n\n  int i = 0;\n  char *p = strtok(input, \" \");\n  char *array[MAX_PAIRS];\n\n  while (p != NULL){\n      array[i++] = p;\n      p = strtok(NULL, \" \");\n  }\n\n  // Checking the array\n  int j = 0;\n  for (j=0; j&lt;i; j++) {\n      printf(\"\\n    %s\", array[j]);\n  }\n</code></pre>\n\n<p>And this code works just fine. Next is the code I'm currently working with:</p>\n\n<pre><code>  int k = 0;\n  int l = 0;\n\n  char *letter = malloc( sizeof(char) * (i * 2) );\n\n  for (k=0; k&lt;i; k++) {\n      char *q = strtok(array[k], \":\");\n\n      while (q != NULL) {\n          letter[l++] = q;\n          q = strtok(NULL, \":\");\n\n      }\n  }\n\n  // Checking the array\n  int m = 0;\n  for (m=0; m&lt;l; m++) {\n      printf(\"\\n    %c\", letter[m]);\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>When I go to check the array, it prints a garbage symbol for each character I wanted to print. I don't understand what I did wrong here.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1493785275, "post_id": 43750991, "comment_id": 74544270, "body": "Can you show us what the errors are?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1493785279, "post_id": 43750991, "comment_id": 74544271, "body": "Don&#39;t you think it would make sense to tell us what error you are getting?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493785392, "post_id": 43750991, "comment_id": 74544306, "body": "<code>nuevo=(TLista)malloc(sizeof(nodo));</code> and <code>nuevo-&gt;sub-&gt;sig=NULL;</code> You are not allocating memory for <code>sub</code>. Same for second parameter of <code>fscanf(arch,&quot;%s %d&quot;,(nuevo-&gt;nombre),&amp; (nuevo-&gt;sub-&gt;dato))</code>"}, {"owner": {"reputation": 1, "user_id": 7955308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37b0b34dc3cdb9e911a5adf71d18d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Federico Di Leo", "link": "https://stackoverflow.com/users/7955308/juan-federico-di-leo"}, "edited": false, "score": 0, "creation_date": 1493785492, "post_id": 43750991, "comment_id": 74544337, "body": "how i allocate memory for sub?"}, {"owner": {"reputation": 1, "user_id": 7955308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37b0b34dc3cdb9e911a5adf71d18d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Federico Di Leo", "link": "https://stackoverflow.com/users/7955308/juan-federico-di-leo"}, "edited": false, "score": 0, "creation_date": 1493785612, "post_id": 43750991, "comment_id": 74544368, "body": "sub is inside nodo"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493785629, "post_id": 43750991, "comment_id": 74544376, "body": "@JuanFedericoDiLeo check my answer"}], "answers": [{"comments": [{"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 1, "user_id": 7955308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37b0b34dc3cdb9e911a5adf71d18d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Federico Di Leo", "link": "https://stackoverflow.com/users/7955308/juan-federico-di-leo"}, "edited": false, "score": 0, "creation_date": 1493785938, "post_id": 43751059, "comment_id": 74544458, "body": "Great! Add <code>free(nuevo-&gt;sub);</code> before <code>free(nuevo);</code> too. Else it will lead to memory leak."}], "tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": true, "score": 0, "last_activity_date": 1493785608, "creation_date": 1493785608, "answer_id": 43751059, "question_id": 43750991, "link": "https://stackoverflow.com/questions/43750991/can-i-use-in-c-that-bring-me-an-error/43751059#43751059", "title": "can i use -&gt; in c? that bring me an error", "body": "<p>You allocated memory for <code>nuevo</code> using <code>malloc</code>, but you never allocated memory for <code>sub</code> inside <code>nuevo</code>.</p>\n\n<p>You tried dereferencing it in <code>fscanf</code> and the statement where you set it to <code>NULL</code>.</p>\n\n<p>A simple fix would be to allocate space for <code>sub</code> as</p>\n\n<pre><code>nuevo-&gt;sub = malloc(sizeof(*Sublista));\n</code></pre>\n\n<p>Both your errors should disappear now.\nDo remember to free sub <em>before</em> you free nuevo.</p>\n"}], "owner": {"reputation": 1, "user_id": 7955308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37b0b34dc3cdb9e911a5adf71d18d4e?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Federico Di Leo", "link": "https://stackoverflow.com/users/7955308/juan-federico-di-leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 43751059, "answer_count": 1, "score": -4, "last_activity_date": 1493785774, "creation_date": 1493785151, "last_edit_date": 1493785774, "question_id": 43750991, "link": "https://stackoverflow.com/questions/43750991/can-i-use-in-c-that-bring-me-an-error", "title": "can i use -&gt; in c? that bring me an error", "body": "<p>i wrote this code for the university its an exercise to practice lists and sublists and i can't run it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct nodito{\n    int dato;\n    struct nodito *sig;}nodito;\n\ntypedef struct nodito * Sublista;\n\ntypedef struct nodo{\n    char nombre[10];\n    Sublista sub;\n    struct nodo *sig;}nodo;\n\ntypedef struct nodo *TLista;\n\nvoid cargoL(TLista *L){\n    FILE *arch;\n    TLista nuevo,ant,act;\n    Sublista nuevito;\n    arch=fopen(\"texto.txt\",\"rt\");\n    if (arch==NULL){\n        printf(\"archivo no existe \\n\");\n    }\n    else{\n        while(!feof(arch)){\n            nuevo=(TLista)malloc(sizeof(nodo));\n            fscanf(arch,\"%s %d\",(nuevo-&gt;nombre),&amp; (nuevo-&gt;sub-&gt;dato));\n            if ( *L==NULL || strcmp((*L)-&gt;nombre,nuevo-&gt;nombre)&gt;0){\n                nuevo-&gt;sig=*L;\n                *L=nuevo;\n                nuevo-&gt;sub-&gt;sig=NULL;\n            }\n            else{\n                ant=NULL;\n                act=*L;\n                while ( act!=NULL &amp;&amp; strcmp(act-&gt;nombre,nuevo-&gt;nombre)&lt;=0){\n                    ant=act;\n                    act=act-&gt;sig;\n                }\n                if (act!=NULL &amp;&amp; strcmp(act-&gt;nombre,nuevo-&gt;nombre)==0){\n                    nuevito=(Sublista)malloc(sizeof(nodito));\n                    nuevito-&gt;dato=nuevo-&gt;sub-&gt;dato;\n                    free(nuevo);\n                    nuevito-&gt;sig=act-&gt;sub;\n                    act-&gt;sub=nuevito;\n                }\n                else{\n                    ant-&gt;sig=nuevo;\n                    nuevo-&gt;sig=act;\n                }\n            }\n        }\n    }\n    fclose(arch);\n}\n</code></pre>\n\n<p>the line <code>nuevo-&gt;sub-&gt;sig=NULL</code> bring me an error\nsame for <code>fscanf(arch,\"%s %d\",(nuevo-&gt;nombre),&amp; (nuevo-&gt;sub-&gt;dato))</code></p>\n\n<p>can i use the double ->?\nis that the problem?\ncan anybody help me?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1493784563, "post_id": 43750880, "comment_id": 74544093, "body": "You can&#39;t do <code>input == &#39;b&#39;</code> ie you can&#39;t check a <code>string</code> against a <code>char</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1493784801, "post_id": 43750880, "comment_id": 74544151, "body": "1) <code>scanf(&quot;%s&quot;, input);</code> --&gt; <code>scanf(&quot;%c&quot;, &amp;input);</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1493784842, "post_id": 43750880, "comment_id": 74544158, "body": "2) <code>scanf(&quot;%[^\\n]s&quot;, str);</code> --&gt; <code>scanf(&quot; %99[^\\n]&quot;, str);</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1493786178, "post_id": 43750880, "comment_id": 74544533, "body": "You need a better compiler, or to turn on more compilation warnings, if you compiled the code without errors.  A good compiler would have spotted and reported the problem."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493795714, "post_id": 43750880, "comment_id": 74548507, "body": "fix like <a href=\"http://ideone.com/BG8pfw\" rel=\"nofollow noreferrer\">this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1493784702, "last_edit_date": 1493784702, "creation_date": 1493784556, "answer_id": 43750915, "question_id": 43750880, "link": "https://stackoverflow.com/questions/43750880/if-statement-with-char-is-not-working-in-c/43750915#43750915", "title": "if statement with char is not working in C", "body": "<p>The problem is: you are getting the input with <code>scanf(\"%s\", input);</code></p>\n\n<p>therefore the condition <code>input == 'a'</code> is the same as \"a\" == 'a' which never meets</p>\n\n<p>you need to get the input as a char using </p>\n\n<pre><code>scanf(\"%c\", &amp;input);\n</code></pre>\n\n<p>not </p>\n\n<pre><code>scanf(\"%s\", input);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1493797797, "post_id": 43751648, "comment_id": 74549804, "body": "<code>gets()</code> is both dangerous, and removed from the language (C11). <code>fgets()</code>, or <code>gets_s()</code>, should be used."}], "tags": [], "owner": {"reputation": 1786, "user_id": 6028039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/05Kxv.jpg?s=128&g=1", "display_name": "SHAH MD IMRAN HOSSAIN", "link": "https://stackoverflow.com/users/6028039/shah-md-imran-hossain"}, "is_accepted": false, "score": 6, "last_activity_date": 1493804346, "last_edit_date": 1493804346, "creation_date": 1493788808, "answer_id": 43751648, "question_id": 43750880, "link": "https://stackoverflow.com/questions/43750880/if-statement-with-char-is-not-working-in-c/43751648#43751648", "title": "if statement with char is not working in C", "body": "<p><strong>the main problem is input stream</strong></p>\n\n<p>for <strong>single char input</strong> in <strong>scanf</strong></p>\n\n<p>we use   <code>scanf( \"%c\", &amp;input);</code></p>\n\n<p>but for whole non-space array of characters / string we use</p>\n\n<p><code>scanf( \" %s\", str);</code></p>\n\n<p>for <strong>string contains whitespace except new line</strong></p>\n\n<p><code>gets_s( str, sizeof( str ) ) ;</code></p>\n\n<p><strong>for your case</strong></p>\n\n<p>correct the following code</p>\n\n<pre><code>scanf( \"%s\", input);\n</code></pre>\n\n<p>to</p>\n\n<p><code>scanf( \"%c\", &amp;input);</code></p>\n\n<p><strong>Happy Coding</strong></p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 7031645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ANN1q.jpg?s=128&g=1", "display_name": "Maliha Binte Mamun", "link": "https://stackoverflow.com/users/7031645/maliha-binte-mamun"}, "is_accepted": false, "score": 3, "last_activity_date": 1543422844, "creation_date": 1543422844, "answer_id": 53524103, "question_id": 43750880, "link": "https://stackoverflow.com/questions/43750880/if-statement-with-char-is-not-working-in-c/53524103#53524103", "title": "if statement with char is not working in C", "body": "<p>main problem is you are reading a string but comparing it to a single char</p>\n\n<p>that's why if condition is not working</p>\n\n<p>just convert </p>\n\n<pre><code>scanf( \"%s\", input);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>scanf( \"%c\", &amp;input);\n</code></pre>\n\n<p>that will be enough</p>\n"}], "owner": {"reputation": 31, "user_id": 7955310, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d99fc03744b3bf83a4e8ee383a8d9c83?s=128&d=identicon&r=PG&f=1", "display_name": "This guy", "link": "https://stackoverflow.com/users/7955310/this-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2014, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1543422844, "creation_date": 1493784378, "last_edit_date": 1493792748, "question_id": 43750880, "link": "https://stackoverflow.com/questions/43750880/if-statement-with-char-is-not-working-in-c", "title": "if statement with char is not working in C", "body": "<p>For the most part everything is working and it's able to build error free. However when I try to run it, it seems to crash. To be more specific, whenever I start my code and press 'a' or 'b', the program keeps crashing. Can someone tell me how to fix that?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint top=-1;\nint word;\n\n\nchar stack_string[100];\nvoid push(char word);\nchar pop(void);\nint main()\n{\n    char input;\n    char str[100];\n    int i;\n    printf(\"press [a] for palindrome check, [b] for string reversal:\");\n    scanf(\"%s\", input);\n\n    if (input == 'b'){\n        printf(\"Input a string: \");\n        scanf(\"%[^\\n]s\", str);\n        for(i=0;i&lt;strlen(str);i++)\n            push(str[i]);\n        for(i=0;i&lt;strlen(str);i++)\n            str[i]=pop();\n        printf(\"Reversed String is: %s\\n\",str);\n    }\n    else if(input == 'a'){\n        char str[100];\n        int count = 0;\n        printf(\"Input a string: \");\n        scanf(\"%[^\\n]s\", str);\n\n        for (i = 0; i &lt; strlen(str); i++)\n        {\n            push(str[i]);\n        }\n\n        for (i = 0; i &lt; strlen(str); i++)\n        {\n            if (str[i]==pop())\n            count++;\n        }\n\n        if (count == strlen(str))\n            printf(\"%s is a palindrome\\n\", str);\n        else\n            printf(\"%s is not a palindrome\\n\", str);\n\n    }\n\n    return 0;\n}\n\nvoid push(char word)\n{\n    top=top+1;\n    stack_string[top]=word;\n}\n\n char pop()\n{\n    word = stack_string[top];\n    top=top-1;\n    return word;\n}\n</code></pre>\n"}, {"tags": ["c", "gdb", "glibc", "avx2"], "comments": [{"owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 1, "creation_date": 1493784387, "post_id": 43750603, "comment_id": 74544051, "body": "What version of GLIBC are you using?"}, {"owner": {"reputation": 941, "user_id": 3995687, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/P17ZY.jpg?s=128&g=1", "display_name": "Hal", "link": "https://stackoverflow.com/users/3995687/hal"}, "reply_to_user": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "edited": false, "score": 1, "creation_date": 1493797307, "post_id": 43750603, "comment_id": 74549488, "body": "2.23 as shipped on ubuntu 16.04 amd64 arch. cpu is an i7 xeon that supports avx2"}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 2, "creation_date": 1493803667, "post_id": 43750603, "comment_id": 74553554, "body": "Was already asked here: <a href=\"http://stackoverflow.com/q/42451492/72178\">stackoverflow.com/q/42451492/72178</a>."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1493803713, "post_id": 43750603, "comment_id": 74553586, "body": "Probably build with old GLIBC ?"}, {"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1493848764, "post_id": 43750603, "comment_id": 74582780, "body": "You could try a <a href=\"http://stackoverflow.com/questions/24543874/avx-inside-a-virtualbox-vm\">pre-5.0 version of virtualbox</a>"}, {"owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "edited": false, "score": 0, "creation_date": 1497056700, "post_id": 43750603, "comment_id": 75933565, "body": "Hello. As required, I just documented my kludge in the: stackoverflow.com/q/42451492 as <a href=\"https://stackoverflow.com/a/44468494\">stackoverflow.com/a/44468494</a> (<code>jg</code> bit patched manually into <code>jle</code> to disable all avx2 detection in the <code>ld-linux.so.2</code>)"}, {"owner": {"reputation": 251699, "user_id": 895245, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/jhDFt.png?s=128&g=1", "display_name": "Ciro Santilli\u65b0\u7586\u68c9\u82b1TRUMP BAN BAD", "link": "https://stackoverflow.com/users/895245/ciro-santilli%e6%96%b0%e7%96%86%e6%a3%89%e8%8a%b1trump-ban-bad"}, "edited": false, "score": 0, "creation_date": 1504863512, "post_id": 43750603, "comment_id": 79188879, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42451492/disable-avx-optimized-functions-in-glibc-ld-hwcap-mask-etc-ld-so-nohwcap-for\">Disable AVX-optimized functions in glibc (LD_HWCAP_MASK, /etc/ld.so.nohwcap) for valgrind &amp; gdb record</a>"}, {"owner": {"reputation": 1684, "user_id": 295502, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5f178eff25a93c13aaf6192e587d4db6?s=128&d=identicon&r=PG", "display_name": "Bogi", "link": "https://stackoverflow.com/users/295502/bogi"}, "edited": false, "score": 0, "creation_date": 1591786842, "post_id": 43750603, "comment_id": 110186509, "body": "I compiled with -static and the problem went away for me"}, {"owner": {"reputation": 4673, "user_id": 594456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7ebb047e22fdfa1d3002655d0824079a?s=128&d=identicon&r=PG", "display_name": "Trass3r", "link": "https://stackoverflow.com/users/594456/trass3r"}, "edited": false, "score": 0, "creation_date": 1601301805, "post_id": 43750603, "comment_id": 113357097, "body": "<a href=\"https://stackoverflow.com/a/61048314/594456\">stackoverflow.com/a/61048314/594456</a>"}], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 3995687, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/P17ZY.jpg?s=128&g=1", "display_name": "Hal", "link": "https://stackoverflow.com/users/3995687/hal"}, "edited": false, "score": 0, "creation_date": 1526440299, "post_id": 44468782, "comment_id": 87740202, "body": "If I could award retrospective bounty on an answer this would qualify. Fantastic content, well written and the solution checked out and was used successfully. Cheers."}, {"owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "reply_to_user": {"reputation": 941, "user_id": 3995687, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/P17ZY.jpg?s=128&g=1", "display_name": "Hal", "link": "https://stackoverflow.com/users/3995687/hal"}, "edited": false, "score": 0, "creation_date": 1526445342, "post_id": 44468782, "comment_id": 87741418, "body": "@Hal, There should be &quot;start a bounty&quot; button below the question with reason of &quot;Reward existing answer - One or more of the answers is exemplary and worthy of an additional bounty&quot;. Answer should be checked/updated to 18.04 LTS; and in some linked question there was scripted binary patch (no manual binary editing), probably in <a href=\"https://stackoverflow.com/questions/42451492\">stackoverflow.com/questions/42451492</a> with  <code>re.sub</code> of the python. Another solution: check <a href=\"https://github.com/mozilla/rr\" rel=\"nofollow noreferrer\">github.com/mozilla/rr</a> RR reverse debugging tool from Mozilla for Firefox (thanks to <a href=\"https://stackoverflow.com/questions/42451492#comment79266853_42451492\">stackoverflow.com/questions/42451492#comment79266853_4245149&zwnj;&#8203;2</a>)."}, {"owner": {"reputation": 558, "user_id": 3640643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1Obg.jpg?s=128&g=1", "display_name": "silverscania", "link": "https://stackoverflow.com/users/3640643/silverscania"}, "edited": false, "score": 1, "creation_date": 1556204031, "post_id": 44468782, "comment_id": 98366100, "body": "For some reason this method didn&#39;t work for me on Ubuntu 16.04 as of today (25/04/19). But the Python script in this answer patches something slightly different and did work: <a href=\"https://stackoverflow.com/questions/42451492/disable-avx-optimized-functions-in-glibc-ld-hwcap-mask-etc-ld-so-nohwcap-for?rq=1\" title=\"disable avx optimized functions in glibc ld hwcap mask etc ld so nohwcap for\">stackoverflow.com/questions/42451492/&hellip;</a>"}], "tags": [], "owner": {"reputation": 80303, "user_id": 196561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6836267883ea7234253b2100f222dbbc?s=128&d=identicon&r=PG", "display_name": "osgx", "link": "https://stackoverflow.com/users/196561/osgx"}, "is_accepted": true, "score": 2, "last_activity_date": 1497059560, "creation_date": 1497059560, "answer_id": 44468782, "question_id": 43750603, "link": "https://stackoverflow.com/questions/43750603/gdb-reverse-debugging-avx2/44468782#44468782", "title": "gdb reverse debugging avx2", "body": "<p>For your glibc 2.23 as shipped on ubuntu 16.04 amd64 there is adaptation of <a href=\"https://stackoverflow.com/a/44468494/196561\">my binary kludge (1 bit patch)</a> made exactly for the same reason. Package <code>libc6 (2.23-0ubuntu7)</code> was downloaded from <a href=\"https://packages.ubuntu.com/xenial/amd64/libc6\" rel=\"nofollow noreferrer\">https://packages.ubuntu.com/xenial/amd64/libc6</a> and file ld-2.23.so was edited (keep copy of the original, or save patched into different path and change INTERP section of your own binary to use different path):</p>\n\n<pre><code> 83 3D 5B C9 20 00 06   cmpl $0x6, smth...\n 7E 21                  jle  some_forward_label\n B8 07 00 00 00         mov $0x7, %eax\n 31 C9                  xor %ecx,%ecx\n 0F A2                  cpuid\n</code></pre>\n\n<p>There is code of <a href=\"https://github.com/bminor/glibc/blob/glibc-2.25/sysdeps/x86/cpu-features.c#L45\" rel=\"nofollow noreferrer\">the <code>get_common_indeces</code>: <code>if (cpu_features-&gt;max_cpuid &gt;= 7) __cpuid_count (7, 0, ...</code></a> called from <code>__get_cpu_features</code>. <a href=\"https://en.wikipedia.org/wiki/CPUID#EAX.3D7.2C_ECX.3D0:_Extended_Features\" rel=\"nofollow noreferrer\">EAX=7 leaf of cpuid has all info needed to detect AVX2 support and enable it</a>, so I just skipped fragment with <code>cpuid eax=0x7,ecx=0</code> and saving its results into some parts of memory by changing <a href=\"http://ref.x86asm.net/coder64.html#x7E\" rel=\"nofollow noreferrer\"><code>0x7e 0x21</code> into <code>0x7f 0x21</code></a>.</p>\n\n<p>So, the binary patch is like replacing <code>83 3D xx xx xx xx 06  7E xx  B8 07 00 00 00  31 C9  0F A2</code> (where xx may be any byte) into <code>83 3D xx xx xx xx 06  7F xx  B8 07 00 00 00  31 C9  0F A2</code>. You may do this with any Hex Editor or by some binary diff. In 2.23-0ubuntu7 this code is at 0x0193B0 - 0x0193B9 is 7e to be changed into 7f. </p>\n\n<p>The patch it dumb and don't use patched file globally if your root fs may be started with CPU without eax=7 cpuid leaf support (pre Intel Core CPU) or in virtual machine emulating such pre Intel Core CPU (<a href=\"https://en.wikipedia.org/wiki/CPUID#EAX.3D0:_Highest_Function_Parameter\" rel=\"nofollow noreferrer\">\"Pentium D 8xx/9xx\", Pentium 4, Pentium M - will fail</a>).</p>\n\n<p>You may put patched file at path which name is equal in length or shorter to the original path of <code>/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2</code> (which symlinks into <code>/lib/x86_64-linux-gnu/ld-2.23.so</code> file). For example as <code>/lib_x86_64-linux-gnu_ld-linux-noAVX2.so.2</code>. Then use same hexeditor to replace the string \"/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2\" of your program executable (ELF) into \"/lib_x86_64-linux-gnu_ld-linux-noAVX2.so.2\", or use patchelf tool <a href=\"https://packages.ubuntu.com/xenial/amd64/patchelf/filelist\" rel=\"nofollow noreferrer\">from the <code>patchelf</code> package</a>:</p>\n\n<pre><code>cp /lib/x86_64-linux-gnu/ld-2.23.so /lib_x86_64-linux-gnu_ld-linux-noAVX2.so.2\n\nbless  /lib_x86_64-linux-gnu_ld-linux-noAVX2.so.2\n# or any other hex editor\n\npatchelf --set-interpreter /lib_x86_64-linux-gnu_ld-linux-no-AVX2.so.2 ./my_program\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 3995687, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/P17ZY.jpg?s=128&g=1", "display_name": "Hal", "link": "https://stackoverflow.com/users/3995687/hal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1284, "favorite_count": 2, "accepted_answer_id": 44468782, "answer_count": 1, "score": 6, "last_activity_date": 1497059560, "creation_date": 1493782376, "question_id": 43750603, "link": "https://stackoverflow.com/questions/43750603/gdb-reverse-debugging-avx2", "title": "gdb reverse debugging avx2", "body": "<p>So I have a new fancy cpu that supports avx2 instruction set. \nThis is great, but breaks gdb reverse debugging. When compiling with no optimisations code still uses shared libraries, eg calls memset() which then goes and invokes an avx2 optimised version of memset. This is great but avx2 is not supported by gdb record.</p>\n\n<p>process record does not support instruction 0xc5 at address 0x7ffff690dd80.</p>\n\n<p>0xc5 is the vex prefix here.</p>\n\n<p>reverse debugging works great with a cpu that does not support avx2. How do I get libc etc to not use the avx2 optimised versions of library calls so I can use gdb record, step backwards etc?</p>\n\n<p>I've tried </p>\n\n<pre><code>LD_BIND_NOW=1\nLD_HWCAP_MASK=0\ncompiling with -static\n</code></pre>\n\n<p>And short of debugging on an old machine, I'm out of ideas.</p>\n"}, {"tags": ["c", "linux", "sockets"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "edited": false, "score": 0, "creation_date": 1493782626, "post_id": 43750593, "comment_id": 74543606, "body": "Thanks for your answer, but just to be sure: So when you say that no data is lost, does it also mean that if I have read say 4096 bytes(assume that write occurred before with &gt;4096 bytes written), will I be able to use seek on this socket file descriptor to go back and &quot;re-read&quot; the first 4096 bytes &quot;again&quot;?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "edited": false, "score": 2, "creation_date": 1493782676, "post_id": 43750593, "comment_id": 74543616, "body": "No. <code>seek()</code> only works on files -- you can&#39;t use it on sockets (or other types of streams, like pipes or FIFOs)."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "edited": false, "score": 1, "creation_date": 1493782699, "post_id": 43750593, "comment_id": 74543623, "body": "@Blasttrash No, it doesn&#39;t &#39;also mean&#39; that. You can&#39;t seek on a socket."}, {"owner": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "edited": false, "score": 0, "creation_date": 1493782764, "post_id": 43750593, "comment_id": 74543642, "body": "So when I have read the first 4096 bytes, are they gone from the socket(deleted from the socket I mean) into my local buffer(that I used as the second argument in read call)?"}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "edited": false, "score": 1, "creation_date": 1493782815, "post_id": 43750593, "comment_id": 74543652, "body": "@Blasttrash Right. The part that isn&#39;t lost is any <i>additional</i> data that&#39;s waiting in the buffer, beyond the 4096 bytes that you&#39;ve read."}, {"owner": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "edited": false, "score": 0, "creation_date": 1493782893, "post_id": 43750593, "comment_id": 74543672, "body": "Thanks a lot. That was what I was looking for. This feature ensures that I can pretty much read stuff again without having to worry about the fact that I may re-read my old content(as long as I was able to read the initial content of course)."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "edited": false, "score": 0, "creation_date": 1494129804, "post_id": 43750593, "comment_id": 74692917, "body": "@JohnMike You <i>can&#39;t</i> &#39;read stuff again&#39;, and nobody here has stated otherwise."}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1493782686, "last_edit_date": 1493782686, "creation_date": 1493782307, "answer_id": 43750593, "question_id": 43750515, "link": "https://stackoverflow.com/questions/43750515/what-happens-to-the-data-in-the-socket-when-read-and-write-system-calls-are-used/43750593#43750593", "title": "What happens to the data in the socket when read and write system calls are used?", "body": "<p>If there is more data available on a socket than the amount that you <code>read()</code>, the extra data will be kept in the socket's buffer until you read it. No data is lost during a short read.</p>\n\n<p>Writing works similarly. If you call <code>write()</code> multiple times, each write will append data to the buffer on the remote host. Again, no data is lost.</p>\n\n<p>(Eventually, the buffer on the remote host will fill up. When this happens, <code>write()</code> will block -- the local host will wait for the buffer to empty before sending more data.)</p>\n\n<p>Conceptually, each direction in a socket pair behaves like a pipe between the two peers. The overall stream of data sent will be received in the same order it was sent, regardless of how much data was read/written at a time.</p>\n"}], "owner": {"reputation": 137, "user_id": 6366005, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/936916209751122/picture?type=large", "display_name": "John Mike", "link": "https://stackoverflow.com/users/6366005/john-mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 43750593, "answer_count": 1, "score": 2, "last_activity_date": 1493782686, "creation_date": 1493781725, "question_id": 43750515, "link": "https://stackoverflow.com/questions/43750515/what-happens-to-the-data-in-the-socket-when-read-and-write-system-calls-are-used", "title": "What happens to the data in the socket when read and write system calls are used?", "body": "<p>This refers to C sockets. Say I have written some data into the socket, then I call read, will read system call read <code>buffer size(say 4096 etc)</code> information and delete all the information in the socket? Basically will read just move the seek pointer forward to those many bytes that it read or will it read and just delete all the information from socket, so that next time when read is called, it reads from the 0th index? </p>\n\n<p>Or say I write into the socket without calling read from anywhere else? Will the data be replaced or appended? </p>\n"}, {"tags": ["c", "arrays", "pointers", "dynamic", "mixed"], "comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493783000, "post_id": 43750302, "comment_id": 74543702, "body": "Where is the code?"}, {"owner": {"reputation": 308, "user_id": 7455871, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d96ae22493863fa7c309398794f2aff1?s=128&d=identicon&r=PG&f=1", "display_name": "MadEmperorYuri", "link": "https://stackoverflow.com/users/7455871/mademperoryuri"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493784270, "post_id": 43750302, "comment_id": 74544027, "body": "Completely broken at the moment, and not helpful to post. It&#39;s late here, so I will do a clean rewrite tomorrow morning that has the issue I talked about, and post it."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1493824828, "post_id": 43750302, "comment_id": 74569524, "body": "Please <a href=\"https://stackoverflow.com/posts/43750302/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">the code you have so far</a>.  You should include at least an outline (but preferably a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3728, "user_id": 152043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7fe904771aa932cb3ab37553916c45?s=128&d=identicon&r=PG", "display_name": "Michael Speer", "link": "https://stackoverflow.com/users/152043/michael-speer"}, "is_accepted": false, "score": 1, "last_activity_date": 1493780671, "creation_date": 1493780671, "answer_id": 43750379, "question_id": 43750302, "link": "https://stackoverflow.com/questions/43750302/how-may-i-implement-a-generic-dynamically-growing-array-in-c/43750379#43750379", "title": "How may I implement a generic, dynamically growing array in C?", "body": "<p>You want a pointer to an array of void pointers, not a void pointer;</p>\n\n<pre><code>void ** array_of_pointers_to_actual_elements ;\n</code></pre>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493822383, "post_id": 43753503, "comment_id": 74567598, "body": "How did this get downgraded?"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493822417, "post_id": 43753503, "comment_id": 74567624, "body": "What the heck!!! I get downgraded for trying to help!!!"}, {"owner": {"reputation": 308, "user_id": 7455871, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d96ae22493863fa7c309398794f2aff1?s=128&d=identicon&r=PG&f=1", "display_name": "MadEmperorYuri", "link": "https://stackoverflow.com/users/7455871/mademperoryuri"}, "edited": false, "score": 0, "creation_date": 1493936206, "post_id": 43753503, "comment_id": 74627971, "body": "This did it, thanks Nguai! I&#39;ll post the implementation I made based off yours."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1493959403, "post_id": 43753503, "comment_id": 74633639, "body": "The expansion should be by a <i>factor</i> not by constant."}], "tags": [], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "is_accepted": true, "score": 0, "last_activity_date": 1493795659, "creation_date": 1493795659, "answer_id": 43753503, "question_id": 43750302, "link": "https://stackoverflow.com/questions/43750302/how-may-i-implement-a-generic-dynamically-growing-array-in-c/43753503#43753503", "title": "How may I implement a generic, dynamically growing array in C?", "body": "<p>Here is a code that is trying to give you an idea  what you have described.\nBy no means, this is a solution.\nThis is in a scale of 2, so you can stretch this.</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;stdlib.h&gt;\n\n const size_t stIncrement = 2;\n\n typedef struct\n {\n    size_t space_left;\n    size_t size;\n    void **vptrX;\n }T;\n\n T t;\n\n void\n vStoreData( void *data )\n {\n    void *vptrTemp;\n    size_t stMaxLength;\n\n   if( t.space_left == 0 )\n   {\n       stMaxLength = t.size + stIncrement;\n       vptrTemp = realloc(t.vptrX, stMaxLength * sizeof(void *) );\n       if( vptrTemp == NULL ){\n          printf( \"Failed realloc\");\n         exit(1);\n       }\n       t.space_left = stIncrement;\n       t.vptrX = vptrTemp;\n   }\n\n   t.vptrX[t.size++] = data;\n   t.space_left--;\n}\n\n//This will make the memory efficient.\nvoid\nvFinalizeMemory()\n{\n   t.vptrX = realloc(t.vptrX, t.size * sizeof(void *));\n}\n\nint\nmain(void)\n{\n   int i;\n   char c;\n   float d;\n   char *cp = \"How are you\";\n   i = 10;\n   c ='O';\n\n   d = 40.12345;\n\n   t.vptrX = malloc(stIncrement*sizeof(void *));\n   t.size = 0;\n   t.space_left = 2;\n\n   vStoreData( &amp;i );\n\n   vStoreData( &amp;c );\n\n   vStoreData( cp );\n\n   vStoreData( &amp;d );\n\n   vStoreData( &amp;c );\n\n   vStoreData( cp );\n   vStoreData( &amp;d );\n\n   vFinalizeMemory();\n   printf( \"%d\\n\", *((int *)t.vptrX[0]) );\n   printf( \"%c\\n\", *((char *)t.vptrX[1] ));\n   printf( \"%s\\n\", (char *)t.vptrX[2] );\n   printf( \"%f\\n\", *((float*)t.vptrX[3] ));\n   printf( \"%c\\n\", *((char *)t.vptrX[4] ));\n   printf( \"%s\\n\", (char *)t.vptrX[5] );\n   printf( \"%f\\n\", *((float*)t.vptrX[6] ));\n\n   return 0; \n}\n</code></pre>\n"}], "owner": {"reputation": 308, "user_id": 7455871, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d96ae22493863fa7c309398794f2aff1?s=128&d=identicon&r=PG&f=1", "display_name": "MadEmperorYuri", "link": "https://stackoverflow.com/users/7455871/mademperoryuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "closed_date": 1493833414, "accepted_answer_id": 43753503, "answer_count": 2, "score": 0, "last_activity_date": 1493936430, "creation_date": 1493780147, "last_edit_date": 1493936430, "question_id": 43750302, "link": "https://stackoverflow.com/questions/43750302/how-may-i-implement-a-generic-dynamically-growing-array-in-c", "closed_reason": "Needs more focus", "title": "How may I implement a generic, dynamically growing array in C?", "body": "<p>My requirements:</p>\n\n<ul>\n<li>The data structure must be able to hold an arbitrary number of elements (on the order of hundreds of thousands).</li>\n<li>The data structure must use memory efficiently. In this case, that means adding on an extra hundred thousand items whenever they are needed.</li>\n<li>The data structure must hold items of an unknown but uniform type.</li>\n</ul>\n\n<p>The way I expected to be able to build one was to define a struct which represented the array. The struct contained the length of the array and the number of elements in the array. It also contained a pointer to an array of void pointers, which led to the actual data.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FdK2Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FdK2Y.png\" alt=\"Diagram showing conceptual layout of the data structure\"></a></p>\n\n<p>The pointer was used because the memory was malloc()'d and realloc()'d as the array grew. The array was of void pointers because the type of the elements was unknown. It was the responsibility of the user to create and initialize elements, to pass them to the array implementation, and to keep track what type was being used.</p>\n\n<p>In memory, the struct would exist either on the stack or in the heap (user's choice), the elements themselves would be scattered throughout the heap, and the array of pointers to the elements would exist in the heap.</p>\n\n<p>The problem is that when I went to implement this, I needed to be able to assign a void pointer to a spot in the array of pointers (e.g. when appending an element), and I could not do this because void pointers cannot be assigned (compiler says \"incomplete type 'void' is not assignable\").</p>\n\n<p>Is there a different approach I should be using?</p>\n\n<hr>\n\n<p>Nguai's code helped me get it right! His is below in his answer, and here is the implementation I wrote based on his code:</p>\n\n<pre><code>typedef struct {\n    void **head;\n    size_t used_size;\n    size_t free_size;\n    size_t current_size;\n    size_t size_increment;\n} GrowingArray;\n\nGrowingArray createEmptyGrowingArray(int initial_size, int size_increment) {\n    GrowingArray empty_growing_array;\n    empty_growing_array.head = malloc(initial_size * sizeof(void *));\n    empty_growing_array.used_size = 0;\n    empty_growing_array.free_size = initial_size;\n    empty_growing_array.current_size = initial_size;\n    empty_growing_array.size_increment = size_increment;\n\n    return empty_growing_array;\n}\n\nGrowingArray appendToGrowingArray(GrowingArray growing_array, void *new_element) {\n\n    void *new_head_of_array;\n\n    if (growing_array.free_size == 0) {\n        new_head_of_array = realloc(growing_array.head, (growing_array.current_size + growing_array.size_increment) * sizeof(void*));\n        if (new_head_of_array == NULL) {\n            printf(\"Reallocation failure.\\n\");\n        }\n\n        growing_array.free_size = growing_array.size_increment;\n        growing_array.current_size += growing_array.size_increment;\n        growing_array.head = new_head_of_array;\n    }\n\n    growing_array.head[growing_array.used_size++] = new_element;\n    growing_array.free_size--;\n\n    return growing_array;\n}\n\nvoid finalizeGrowingArrayMemory(GrowingArray growing_array) {\n    growing_array.head = realloc(growing_array.head, growing_array.current_size * sizeof(void *));\n}\n\nvoid freeGrowingArray(GrowingArray growing_array) {\n    free(growing_array.head);\n}\n\nint main(int argc, char* argv[]) {\n    GrowingArray test_array = createEmptyGrowingArray(5, 1);\n\n    int *test_integer = (int *)malloc(1 * sizeof(int));\n    *test_integer = 4;\n\n    int *another_integer = (int *)malloc(1 * sizeof(int));\n    *another_integer = 6;\n\n    int *yet_another_integer = (int *)malloc(sizeof(int));\n    *yet_another_integer = 9;\n\n    test_array = appendToGrowingArray(test_array, test_integer);\n    test_array = appendToGrowingArray(test_array, another_integer);\n    test_array = appendToGrowingArray(test_array, yet_another_integer);\n    finalizeGrowingArrayMemory(test_array);\n\n    printf(\"%x,\", *(int *)test_array.head[0]);\n    printf(\"%x,\", *(int *)test_array.head[1]);\n    printf(\"%x\\n\", *(int *)test_array.head[2]);\n\n    freeGrowingArray(test_array);\n\n    printf(\"Going to free %llx\\n\", (long long int)test_integer);\n    free(test_integer);\n\n    printf(\"Going to free %llx\\n\", (long long int)another_integer);\n    free(another_integer);\n\n    printf(\"Going to free %llx\\n\", (long long int)yet_another_integer);\n    free(yet_another_integer);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 4793, "user_id": 1099230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9d86aa069778820dfc676147d432c2d?s=128&d=identicon&r=PG", "display_name": "luoluo", "link": "https://stackoverflow.com/users/1099230/luoluo"}, "edited": false, "score": 5, "creation_date": 1493777211, "post_id": 43749891, "comment_id": 74542453, "body": "Works as expected on my machine.."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1493777230, "post_id": 43749891, "comment_id": 74542456, "body": "<code>%*[^0123456789]%d</code> may not do what you want. If I am not mistaken, you need to read a single digit."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1493777384, "post_id": 43749891, "comment_id": 74542492, "body": "@sjsam I think he wants to skip anything that <i>isn&#39;t</i> a digit, then read an integer... which is what that does."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 2, "creation_date": 1493777756, "post_id": 43749891, "comment_id": 74542574, "body": "This works like a charm: <a href=\"http://ideone.com/DYOkui\" rel=\"nofollow noreferrer\">demo</a>. The format string can be simplified to <code>&quot;%*[^0-9]%d&quot;</code>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1493781397, "post_id": 43749891, "comment_id": 74543306, "body": "What&#39;s with the &quot;namez&quot; of the variables?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493784148, "post_id": 43749891, "comment_id": 74543998, "body": "When <code>sscanf()</code> fails as expected, what is <code>retaahn</code>?"}, {"owner": {"reputation": 11, "user_id": 7847342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae510e7c35e26145c565b4f4deac205?s=128&d=identicon&r=PG&f=1", "display_name": "astroman", "link": "https://stackoverflow.com/users/7847342/astroman"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493802543, "post_id": 43749891, "comment_id": 74552756, "body": "@chux see this! <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html#RETURN_VALUE\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/scanf.3.html#RETURN_VALUE</a>"}, {"owner": {"reputation": 11, "user_id": 7847342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae510e7c35e26145c565b4f4deac205?s=128&d=identicon&r=PG&f=1", "display_name": "astroman", "link": "https://stackoverflow.com/users/7847342/astroman"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1493803070, "post_id": 43749891, "comment_id": 74553106, "body": "@dasblinkenlight, luoluo Check my edit, the function itself wasnt wrong but it was something else entirely"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493813884, "post_id": 43750176, "comment_id": 74560747, "body": "<code>0-9</code> vs. <code>0123456789</code> is tighter code but less portable.  Using <code>-</code> for a range is implementation defined behavior.  Rarely is this an problem though"}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1493779164, "creation_date": 1493779164, "answer_id": 43750176, "question_id": 43749891, "link": "https://stackoverflow.com/questions/43749891/sscanf-cannot-detect-a-number-c/43750176#43750176", "title": "sscanf cannot detect a number C", "body": "<p>A more restricted version of your <code>sscanf</code> would be</p>\n\n<pre><code>int retaahn = sscanf(pointah,\"%*[^0-9]%d%*[^0-9]\",&amp;numbeh);\n</code></pre>\n\n<p>Note that this doesn't change anything in  your format string. I have just used <code>0-9</code> to mention the range and added a second <code>%*[^0-9]</code> to make things more explicit.</p>\n\n<blockquote>\n  <p>Currently using the above I'm getting garbage values, can someone\n  help?</p>\n</blockquote>\n\n<p>Probably because you're not passing the right arguments to the function. Just do a </p>\n\n<pre><code>printf(\"pointah : %s\\n\",pointah);\n</code></pre>\n\n<p>to see what is passed or set breakpoints and debug your program.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493814012, "post_id": 43755853, "comment_id": 74560837, "body": "The is why I was <a href=\"http://stackoverflow.com/questions/43749891/sscanf-cannot-detect-a-number-c?noredirect=1#comment74543998_43749891\">asking</a> what value was <code>retaahn</code> as that would bring to light the unexpected result."}, {"owner": {"reputation": 11, "user_id": 7847342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae510e7c35e26145c565b4f4deac205?s=128&d=identicon&r=PG&f=1", "display_name": "astroman", "link": "https://stackoverflow.com/users/7847342/astroman"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1493851169, "post_id": 43755853, "comment_id": 74583620, "body": "Although I could not try that out, what would that have entailed? Would it have been something to do with errno?"}], "tags": [], "owner": {"reputation": 11, "user_id": 7847342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae510e7c35e26145c565b4f4deac205?s=128&d=identicon&r=PG&f=1", "display_name": "astroman", "link": "https://stackoverflow.com/users/7847342/astroman"}, "is_accepted": false, "score": 0, "last_activity_date": 1493803283, "last_edit_date": 1493803283, "creation_date": 1493802944, "answer_id": 43755853, "question_id": 43749891, "link": "https://stackoverflow.com/questions/43749891/sscanf-cannot-detect-a-number-c/43755853#43755853", "title": "sscanf cannot detect a number C", "body": "<p>So since my code was never wrong, it turns out my problem was <em>how</em> I was calling this function.</p>\n\n<p>This is how I solved it:</p>\n\n<p>I was calling it as:</p>\n\n<pre><code>parse_charstar(\"1000\");\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>parse_charstar(\" 1000 \"); // added spaces\n</code></pre>\n\n<p>And it worked!</p>\n\n<p>Check my edit above for more!!</p>\n"}], "owner": {"reputation": 11, "user_id": 7847342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae510e7c35e26145c565b4f4deac205?s=128&d=identicon&r=PG&f=1", "display_name": "astroman", "link": "https://stackoverflow.com/users/7847342/astroman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1494128678, "creation_date": 1493776987, "last_edit_date": 1494128678, "question_id": 43749891, "link": "https://stackoverflow.com/questions/43749891/sscanf-cannot-detect-a-number-c", "title": "sscanf cannot detect a number C", "body": "<p>So I wrote this function in C using sscanf:</p>\n\n<pre><code>int parse_charstar(char *pointah)\n{\n    int numbeh;\n    int retaahn = sscanf(pointah,\"%*[^0123456789]%d\",&amp;numbeh);   \n\n    printf(\"\\n prent deeh numbeeh %d \\n\",numbeh);\n\n    return numbeh;\n}\n</code></pre>\n\n<p>I want to get a number out of a string if there, for eg. </p>\n\n<pre><code>\"hello 121\"\nnumber: 121\n</code></pre>\n\n<p>Currently using the above I'm getting garbage values, can someone help?</p>\n\n<p>EDIT:</p>\n\n<p>So I found something interesting today. Apparently, this is what was happening!</p>\n\n<p>My code was never wrong to begin with as pointed out by luoluo and dasblinkenlight.</p>\n\n<p>Problem was <em>how</em> I was calling the program. I'm on linux.</p>\n\n<p>I was calling it as:</p>\n\n<pre><code>parse_charstar(\"1000\");\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>prent deeh numbeeh -1634553883\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>parse_charstar(\" 1000 \"); // added spaces\n</code></pre>\n\n<p>Output?</p>\n\n<pre><code>prent deeh numbeeh 1000\n</code></pre>\n\n<p>Spot on.</p>\n\n<p>Now can someone tell me why this happens?</p>\n\n<p><strong>EDIT!!!</strong></p>\n\n<p>Hell with it guys, use <strong>strtol</strong> , its made for this stuff.</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/cstdlib/strtol/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/cstdlib/strtol/</a></p>\n\n<p>Code copied shamelessly from the above page:</p>\n\n<pre><code>#include &lt;stdio.h&gt;      /* printf */\n#include &lt;stdlib.h&gt;     /* strtol */\n\nint main ()\n{\n  char szNumbers[] = \"2001 60c0c0 -1101110100110100100000 0x6fffff\";\n  char * pEnd;\n  long int li1, li2, li3, li4;\n  li1 = strtol (szNumbers,&amp;pEnd,10);\n  li2 = strtol (pEnd,&amp;pEnd,16);\n  li3 = strtol (pEnd,&amp;pEnd,2);\n  li4 = strtol (pEnd,NULL,0);\n  printf (\"The decimal equivalents are: %ld, %ld, %ld and %ld.\\n\", li1, li2, li3, li4);\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "function", "linked-list"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1493776268, "post_id": 43749644, "comment_id": 74542280, "body": "<code>free(current); current = current-&gt;next;</code> : <code>current</code> can not be used after <code>free</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1493776396, "post_id": 43749644, "comment_id": 74542305, "body": "You forgot use <code>List</code> in <code>Append</code>. Also <code>while(current != NULL){</code> using uninitialize variable at first time."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1493810828, "post_id": 43749644, "comment_id": 74558504, "body": "<code>void Append(Node *List, char filename[TSIZE]){</code> :: You never assign to <code>*List</code> in this function."}], "owner": {"reputation": 61, "user_id": 7469961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mUZ2i.jpg?s=128&g=1", "display_name": "King Sutter", "link": "https://stackoverflow.com/users/7469961/king-sutter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493774902, "creation_date": 1493774902, "question_id": 43749644, "link": "https://stackoverflow.com/questions/43749644/passing-linked-lists-into-structures", "title": "Passing linked lists into structures", "body": "<p>Okay, so this might be my most loaded question yet, as I hate to post large amounts of code for a question, but I simply can't find a way to simplify it for the purpose of this question as I don't really understand linked lists enough to do so. Structures make sense to me, but linked lists really throw me off for some reason. Anyways, I need to make a modular program for doing various tasks as directed by the user. I started out by putting the program in main to keep it simple:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;      /* has the malloc prototype      */\n#define TSIZE 50         /* size of array to hold title   */\nstruct film {\n    char title[TSIZE], author[TSIZE],year[5];\n    struct film * next;  /* points to next struct in list */\n};\ntypedef struct film * Node;\nint main(void)\n{\n    Node head = NULL;\n    Node prev, current;\n    char input[TSIZE];\n    const char fname[]=\"HW15Data.txt\";\n/* Gather  and store information          */\n    FILE * fp;\n    char line[256];\n    int loops=0;\n    fp=fopen(fname,\"r\");\n    while(current != NULL){\n        current = (Node) malloc(sizeof(struct film));\n        if (head == NULL)       /* first structure       */\n            head = current;\n        else                    /* subsequent structures */\n            prev-&gt;next = current;\n        current-&gt;next = NULL;\n        if (fgets(current-&gt;title,sizeof(line),fp)==NULL) break;\n        if (fgets(current-&gt;author,sizeof(line),fp)==NULL) break;\n        if (fgets(current-&gt;year,sizeof(line),fp)==NULL) break;\n        prev = current;\n        loops++;\n    }\n/* Show list of books from file                    */\n    if (head == NULL)\n        printf(\"No data entered. \");\n    else\n        printf (\"Here is the books list:\\n\");\n    current = head;\n    while (current != NULL)\n    {\n        printf(\"Book: %sAuthor: %sYear: %s\\n\",\n        current-&gt;title, current-&gt;author, current-&gt;year);\n        current = current-&gt;next;\n    }\n    printf(\"Number of records wrote: %d\\n\",loops);\n\n\n\n/* Program done, so free allocated memory */\n    current = head;\n    while (current != NULL)\n    {\n        free(current);\n        current = current-&gt;next;\n    }\n    printf(\"Bye!\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>So, somehow, this works the way it is supposed to. Now, I try to make it modular, and from the first function IntializeList I ran into problems. So, for the purpose of making this match up better with my first program, I wrote the rest of what I wanted to do, ignoring the function passing issues. Obviously, the compiler now has thrown a fit of errors at me, and I can't really figure out what to do from here:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;      /* has the malloc prototype      */\n#define TSIZE 50         /* size of array to hold title   */\nstruct book {\n    char title[TSIZE], author[TSIZE],year[5];\n    struct book * next;  /* points to next struct in list */\n};\n//typedef struct book ITEM;\ntypedef struct book * Node;     // struct book *\nvoid InitializeList(Node *List);\nvoid InitializeList(Node *List){\n    *List = NULL;\n    puts(\"Initialization successful.\");\n}   \nvoid Append(Node *List, char filename[TSIZE]);\nvoid Append(Node *List, char filename[TSIZE]){\n    FILE * fp;\n    Node head=NULL;\n    Node prev, current;\n    char line[256];\n    int loops=0;\n    fp=fopen(filename,\"r\");\n    while(current != NULL){\n        current = (Node) malloc(sizeof(struct book));\n        if (head == NULL)       /* first structure       */\n            head = current;\n        else                    /* subsequent structures */\n            prev-&gt;next = current;\n        current-&gt;next = NULL;\n        if (fgets(current-&gt;title,sizeof(line),fp)==NULL) break;\n        if (fgets(current-&gt;author,sizeof(line),fp)==NULL) break;\n        if (fgets(current-&gt;year,sizeof(line),fp)==NULL) break;\n        prev = current;\n        loops++;\n    printf(\"Number of records wrote: %d\\n\",loops);\n    }\n}\nint Print(void);\nint Print(void){\n    int num;\n    int i=0;\n    if (head == NULL){\n        printf(\"No data entered. \");\n        return -1;\n    }\n    printf(\"Enter record # to print: \");\n    scanf(\"%d\",num);\n    current = head;\n    while (current != NULL)\n    {\n        for (i=0;i&lt;num;i++){\n            current = current-&gt;next;\n        }\n        printf(\"Book: %sAuthor: %sYear: %s\\n\",\n        current-&gt;title, current-&gt;author, current-&gt;year);\n    }\n    return 0;\n}\nint WriteBinary(const char * pfname);\nint WriteBinary(const char * pfname){\n    FILE * fp;\n    fp = fopen(pfname,\"wb\");\n    if (head == NULL){\n        printf(\"No data to write. \");\n        return -1;\n    }\n    current = head;\n    while (current != NULL){\n        fwrite(current-&gt;title,sizeof(TSIZE),1,fp);\n        fwrite(current-&gt;author,sizeof(TSIZE),1,fp);\n        fwrite(current-&gt;year,sizeof(TSIZE),1,fp);\n        current = current-&gt;next;\n    }\n    return 0;\n}\nint main(void){\n    Node head;\n    Node prev, current;\n    int books;\n    InitializeList(&amp;head);\n    char input[TSIZE];\n    char fname[]=\"HW15Data.txt\";\n    char op;\n    do{\n        puts(\"Select operation from the following list:\");\n        puts(\"i. Initialize    a. Append    p. Print\");\n        puts(\"w. Write binary file    q. quit\");\n        op = getchar();\n        while (getchar()!='\\n');\n        if (op=='i'){\n            InitializeList(&amp;books);\n        }\n        else if (op=='a'){\n            /* Gather  and store information          */\n            books=Append(&amp;head,fname);\n        }\n        else if (op=='p'){\n            /*Print book record of user's choice*/\n            Print();\n        }\n        else if (op=='w'){\n            /*Write list in binary to a file*/\n            WriteBinary(\"HW15bin\");\n        }\n        else if (op=='q'){\n            /* User quit, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n                free(current);\n                current = current-&gt;next;\n            }\n            printf(\"Bye!\\n\");\n            return 0;\n        }\n        else{\n            /* Program done, so free allocated memory */\n            current = head;\n            while (current != NULL)\n            {\n            free(current);\n            current = current-&gt;next;\n            }\n            printf(\"Invalid characted entered. Bye!\\n\");\n            return 0;\n        }\n    } while (op!='q');\n    return 0;\n}\n</code></pre>\n\n<p>All I really need to do I just clean up how things are passed or not passed to and out of functions and I should be all set! I'm sure this is an extremely loaded question and will likely be my last one for a while, but at this point I don't really know what to do. If anyone does answer this, you're a freaking legend.</p>\n"}, {"tags": ["c", "shell", "fork", "cd"], "comments": [{"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493776174, "post_id": 43749628, "comment_id": 74542266, "body": "As soon as fork() statement, it is important to check if fork() failed.  Insert a statement: if(pid == -1){ printf(&quot;Can&#39;t fork a process.\\n&quot;); return 1; }"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493776316, "post_id": 43749628, "comment_id": 74542291, "body": "waitpid() statement belongs to child bloc of code.  Also check for waitpid() return status: if(waitpid( ... ) == -1 ){ printf(&quot;Error waiting for child process.\\n&quot;); return 1; }   By doing this, you don&#39;t need else bloc of code."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1493777664, "post_id": 43749628, "comment_id": 74542561, "body": "Your usage of strcat() can cause undefined be(havior.  It is safer to use this approach:  char gdir[100];  strcpy(gdir, &quot;\\&quot;); strcat(gdir, argv[1]); chdir(gdir);     strcat(dir, argv[1]) can alter the value of argv[1].  Read upon strcat() function."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1575487760, "post_id": 43749628, "comment_id": 104587375, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/3740504/608639\">Why doesn&#39;t the cd command work in my shell program?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7759338, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046761632094793/picture?type=large", "display_name": "Michael Bueno", "link": "https://stackoverflow.com/users/7759338/michael-bueno"}, "edited": false, "score": 0, "creation_date": 1493814267, "post_id": 43749719, "comment_id": 74561017, "body": "Thanks you so much !"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 1, "last_activity_date": 1493775530, "creation_date": 1493775530, "answer_id": 43749719, "question_id": 43749628, "link": "https://stackoverflow.com/questions/43749628/how-can-i-implement-cd-command-in-my-own-shell-in-c/43749719#43749719", "title": "How can I implement cd command in my own shell in C?", "body": "<p>It's working fine, actually! The only problem is that, after calling <code>chdir()</code>, your code continues to parse the command as an external executable, which fails. You didn't have this problem for <code>exit</code> because that exits the shell before it can do anything else. :)</p>\n\n<p>Moving the code which follows into an <code>else</code> block, or adding <code>continue</code> after <code>chdir()</code>, should fix it.</p>\n\n<p>(As an aside: The <code>getcwd()</code> / <code>strcat()</code> steps preceding <code>chdir()</code> are actually unnecessary. <code>chdir()</code> works with relative path: for example, if the current working directory is <code>/usr</code>, you can call <code>chdir(\"bin\")</code> to enter <code>/usr/bin</code>.)</p>\n"}], "owner": {"reputation": 23, "user_id": 7759338, "user_type": "registered", "profile_image": "https://graph.facebook.com/1046761632094793/picture?type=large", "display_name": "Michael Bueno", "link": "https://stackoverflow.com/users/7759338/michael-bueno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15697, "favorite_count": 2, "closed_date": 1575511508, "accepted_answer_id": 43749719, "answer_count": 1, "score": 2, "last_activity_date": 1493775530, "creation_date": 1493774828, "question_id": 43749628, "link": "https://stackoverflow.com/questions/43749628/how-can-i-implement-cd-command-in-my-own-shell-in-c", "closed_reason": "Duplicate", "title": "How can I implement cd command in my own shell in C?", "body": "<p>this is my code, i'm a Spanish student and I can't explain correctly, but, i need implement cd command in my own shell in C.\nIs for a workclass, if someone can help for realize it.\nWhen I put the if condition on process, cd doesn't work, But when I put the code outside I get the cd to work, however, when putting back cd does not return to the previous directory as the cd command would normally do.</p>\n\n<p>If any can correct the fail. Thanks you so much.</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt; \n#include &lt;unistd.h&gt; \n#include &lt;libgen.h&gt; \n#include &lt;sys/shm.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/wait.h&gt;\n\n#define TAM 1000 \n\nvoid  parseo(char *line, char **argv);\n\nint main(void) {\n\n    char  cad[TAM];             \n    char  *argv[TAM]; \n    char  *gdir;\n    char  *dir;\n    char  *to;\n    char buf[TAM];\n    pid_t pid;\n    int status;\n\n    while (1) {                   \n\n        printf(\"user@PC: \");    \n        fgets(cad, 1000, stdin);\n\n        // Si encontramos un salto de linea (se pulsa enter)\n        if (cad[strlen(cad) - 1] == '\\n')                                                           \n            cad[strlen(cad) - 1] = '\\0';    // lo marcamos como final de sentencia            \n\n        parseo(cad, argv);\n\n\n        // Exit para salir del shell\n        if (!strcmp(argv[0], \"exit\")) exit(0);  \n\n        if (!strcmp(argv[0], \"cd\")){\n\n            gdir = getcwd(buf, sizeof(buf));\n            dir = strcat(gdir, \"/\");\n            to = strcat(dir, argv[1]);\n\n            chdir(to);\n            //printf(\"Acceso a la carpeta realizado\\n\");\n\n        }            \n\n        pid = fork();\n\n        if (pid == 0) {   \n\n            if (execvp(*argv, argv) &lt; 0) {\n                printf(\"%s: no se encontr\u00f3 la orden \\n\", argv[0]);\n                exit(1);\n            }\n        }else {  \n\n            waitpid(pid,&amp;status,0);\n        }   \n\n    }\n    return 0;\n}\n\nvoid  parseo(char *line, char **argv){\n\n    while (*line != '\\0') {       \n        while (*line == ' ' || *line == '\\t' || *line == '\\n')\n\n            *line++ = '\\0';     \n            *argv++ = line; \n\n        while (*line != '\\0' &amp;&amp; *line != ' ' &amp;&amp; *line != '\\t' &amp;&amp; *line != '\\n') \n            line++;             \n    } \n    *argv = '\\0';             // marca de final\n}\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "dynamic-library"], "comments": [{"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1493774864, "post_id": 43749613, "comment_id": 74541984, "body": "How do you &quot;run&quot; your Makefile? Where is <code>lib-selena.so</code>, and what is your <code>LD_LIBRARY_PATH</code> (first, I suppose we should ask for which platform)?"}, {"owner": {"reputation": 23, "user_id": 5991662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac5d2ce77ce0f8341da23397641b970?s=128&d=identicon&r=PG&f=1", "display_name": "Selena", "link": "https://stackoverflow.com/users/5991662/selena"}, "reply_to_user": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1493775024, "post_id": 43749613, "comment_id": 74542018, "body": "Sorry if I used incorrect terminology. Answers to your questions: (1) make -f Makefile4 (2) It&#39;s created when I &#39;run the other makefile, by typing make -f Makefile3 (3) I&#39;m unsure-- how can I find out? (4) what do you mean by platform? I&#39;m doing this on linux - is that what you mean?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1493775116, "post_id": 43749613, "comment_id": 74542026, "body": "Where do you link your executable with <code>lib-selena.so</code>; you only link with the <code>dl</code> library. By the way, <code>lib-selena</code> is a bad name, since library name in the linker command becomes <code>-selena</code>, possibly with escaping the <code>-</code>. <code>libselena.so</code> is a better name."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1493775160, "post_id": 43749613, "comment_id": 74542033, "body": "Also, you may not want to declare <code>main</code> in a a header file. I&#39;ve never seen it done, and perhaps it doesn&#39;t hurt, but it really is very uncommon."}, {"owner": {"reputation": 23, "user_id": 5991662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac5d2ce77ce0f8341da23397641b970?s=128&d=identicon&r=PG&f=1", "display_name": "Selena", "link": "https://stackoverflow.com/users/5991662/selena"}, "edited": false, "score": 0, "creation_date": 1493775210, "post_id": 43749613, "comment_id": 74542046, "body": "oh, so I still need to do that even if I&#39;m using dlopen? That&#39;s what I did for my original makefile but I changed it because I assumed I was doing something wrong. Here is my original makefile:"}, {"owner": {"reputation": 23, "user_id": 5991662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac5d2ce77ce0f8341da23397641b970?s=128&d=identicon&r=PG&f=1", "display_name": "Selena", "link": "https://stackoverflow.com/users/5991662/selena"}, "edited": false, "score": 0, "creation_date": 1493775307, "post_id": 43749613, "comment_id": 74542064, "body": "all: hw11FOUR  COMP = gcc CFLAGS = -fPIC -c -Wall    hw11FOUR: selena-4.o lib-selena.so \tgcc -o hw11FOUR selena-4.o -lm ./lib-selena.so -ldl  selena-4.o: selena-4.c   \t$(COMP) $(CFLAGS) selena-4.c   lib-selena.so: selena-4.o  \tgcc -shared -o lib-selena.so selena-4.o"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1493775337, "post_id": 43749613, "comment_id": 74542071, "body": "Well, I actually don&#39;t know why you use <code>dlopen</code>. Why can&#39;t you just link with the library instead?"}, {"owner": {"reputation": 23, "user_id": 5991662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac5d2ce77ce0f8341da23397641b970?s=128&d=identicon&r=PG&f=1", "display_name": "Selena", "link": "https://stackoverflow.com/users/5991662/selena"}, "edited": false, "score": 0, "creation_date": 1493775428, "post_id": 43749613, "comment_id": 74542089, "body": "this was a homework assignment. so the names of the files and the way we&#39;re supposed to do things were just directions from my professor. I added my original makefile to my main post also so it&#39;s easier to read"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1493775714, "post_id": 43749613, "comment_id": 74542156, "body": "Well, going by the man-page for <code>dlopen</code>, if the filename argument to <code>dlopen</code> does not contain a slash, only the usual list of directories is search. As per Elliot&#39;s comment, make sure your <code>LD_LIBRARY_PATH</code> contains the library. It&#39;s unclear to me whether <code>dlopen</code> needs <code>lib-selena.so</code> or just <code>-selena</code> as its name in this case. Alternatively, use the path option: <code>dlopen(&quot;.&#47;lib-selena.so&quot;, ...)</code> or whatever the path is."}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1493894995, "post_id": 43749613, "comment_id": 74601794, "body": "@OP Note: you have no error-checks in your code after <code>dlopen</code> and <code>dlsym</code> -- that&#39;s unacceptable in a school-projects (or in a real-life project)"}], "owner": {"reputation": 23, "user_id": 5991662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac5d2ce77ce0f8341da23397641b970?s=128&d=identicon&r=PG&f=1", "display_name": "Selena", "link": "https://stackoverflow.com/users/5991662/selena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493775364, "creation_date": 1493774707, "last_edit_date": 1493775364, "question_id": 43749613, "link": "https://stackoverflow.com/questions/43749613/segfault-makefile-for-dynamic-library-in-c", "title": "SEGFAULT : Makefile for Dynamic Library in C", "body": "<p>I'm trying to create a Makefile that will compile and link a main file, selena-4.c, with my shared libary, lib-selena.so. The main file uses dlopen to use the shared library dynamically. </p>\n\n<p>(For context: Our homework assignment was to take a previous homework, in which we had to create a program that created a linked list with the number of nodes the same as a command line entered by the user, and divide it up into different files(with header files) &amp; practice creating shared libraries and static libraries. This is the last step: to create a new main file : selena-4.c &amp; use dlopen to dynamically open the shared library that we created in a previous step.)</p>\n\n<p>(I've already turned in my assignment, by the way, but I want to understand where I went wrong so that I do well on my final, which is tomorrow.)</p>\n\n<p>When I run my makefile, I get this message:\nlib-selena.so:cannot open shared object file: No such file or directory\nSegmentation fault (core dumped) </p>\n\n<p>Here is my main file: </p>\n\n<pre><code>#include \"selena-4.h\"\n#include &lt;dlfcn.h&gt;\n\nint main(int argc, char **argv)\n{\n    void *tempHandle;\n\n    tempHandle = dlopen(\"lib-selena.so\", RTLD_LAZY);\n    if(!tempHandle) printf(\"%s\\n\", dlerror());\n\n    int (*mainOne) (int argc, char **argv); \n    int (*mainTwo) (char **argv);\n    int (*mainThree) (void);\n    int (*mainFour) (void); \n\n    mainOne = dlsym(tempHandle, \"main1\");\n    mainTwo = dlsym(tempHandle, \"main2\");\n    mainThree = dlsym(tempHandle, \"main3\");\n    mainFour = dlsym(tempHandle, \"main4\");\n\n    mainOne(argc, &amp;*argv);\n    mainTwo(&amp;*argv);\n    mainThree();\n    mainFour();\n\n    dlclose(tempHandle);\n    return 0;\n}\n</code></pre>\n\n<p>Here is the header file for my main file: </p>\n\n<pre><code>#define _GNU_SOURCE\n#define _DEFAULT_SOURCE\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\n//This global struct acts as a 'node' with pointers to preceding and following \nnodes, in addition to a unique number (the data field).\nstruct node\n{\n    int data;\n    struct node *next;\n    struct node *prev;\n\n};\n\ntypedef struct node _node; //our node struct will be referred to as '_node' \nfrom now on\n\nextern _node *head;\nextern _node *tail; \nextern _node *trashHead;\nextern _node *trashTail;\n\nint main(int argc, char **argv);\n</code></pre>\n\n<p>Here is my Makefile: </p>\n\n<pre><code>all: hw11FOUR\n\nCOMP = gcc\nCFLAGS = -fPIC -c -Wall \n\n\nhw11FOUR: selena-4.o \n    gcc -o hw11FOUR selena-4.o -ldl\n\nselena-4.o: selena-4.c  \n    $(COMP) $(CFLAGS) selena-4.c \n</code></pre>\n\n<p>Here is the Makefile that I used to create my shared library: </p>\n\n<pre><code>all: hw11THREE\nCOMP = gcc\nCFLAGS = -fPIC -c -Wall \n\n\nhw11THREE: selena-main.o lib-selena.so\n    gcc -o hw11THREE selena-main.o -lm ./lib-selena.so\n\nselena-main.o: selena-main.c  selena-main.h\n    $(COMP) $(CFLAGS) selena-main.c \n\nselena-A.o: selena-A.c selena-A.h\n    $(COMP) $(CFLAGS) selena-A.c\n\nselena-B.o: selena-B.c selena-B.h\n    $(COMP) $(CFLAGS) selena-B.c\n\nselena-C.o: selena-C.c selena-C.h\n    $(COMP) $(CFLAGS) selena-C.c\n\nselena-D.o: selena-D.c selena-D.h\n    $(COMP) $(CFLAGS) selena-D.c\n\nlib-selena.so: selena-A.o selena-B.o selena-C.o selena-D.o \n    gcc -shared -o lib-selena.so selena-A.o selena-B.o selena-C.o selena-D.o\n</code></pre>\n\n<p>I would greatly appreciate any help you guys can offer me! Thank you!</p>\n\n<p>EDIT: ORIGINAL MAKEFILE\n    all: hw11FOUR</p>\n\n<pre><code>COMP = gcc\nCFLAGS = -fPIC -c -Wall \n\n\nhw11FOUR: selena-4.o lib-selena.so\n    gcc -o hw11FOUR selena-4.o -lm ./lib-selena.so -ldl\n\nselena-4.o: selena-4.c  \n    $(COMP) $(CFLAGS) selena-4.c \n\nlib-selena.so: selena-4.o \n    gcc -shared -o lib-selena.so selena-4.o \n</code></pre>\n"}]