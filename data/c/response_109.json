[{"tags": ["c", "struct", "rgb", "ppm"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1486599985, "post_id": 42125850, "comment_id": 71420377, "body": "<code>sizeof(img-&gt;data)</code> is not what you want. That gives you the size of the <i>pointer</i> not the size of the allocated memory. You have magic numbers in your code such as <code>24</code> and <code>3</code> which make it non-obvious what the various sizes represent. So I&#39;m not sure exactly what size you need in the <code>fwrite</code>. But it is definetely not <code>sizeof(img-&gt;data)</code>."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "edited": false, "score": 0, "creation_date": 1486632086, "post_id": 42125850, "comment_id": 71431949, "body": "You should edit this to remove the anti-calum sailor talk, we&#39;re trying to run a respectable joint here."}, {"owner": {"reputation": 53, "user_id": 7537334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1433619619996274/picture?type=large", "display_name": "Sean Turnbull", "link": "https://stackoverflow.com/users/7537334/sean-turnbull"}, "edited": false, "score": 0, "creation_date": 1486658941, "post_id": 42125850, "comment_id": 71450792, "body": "Thanks for the advice forgot that was there :)"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7537334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1433619619996274/picture?type=large", "display_name": "Sean Turnbull", "link": "https://stackoverflow.com/users/7537334/sean-turnbull"}, "edited": false, "score": 0, "creation_date": 1486658769, "post_id": 42132572, "comment_id": 71450652, "body": "Thanks for the help, i would like to change the program to read/write P3 images so that would require changing the reader, how would i go about changing it to the right requirements. Adding in whitespaces for each rgb value?"}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 53, "user_id": 7537334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1433619619996274/picture?type=large", "display_name": "Sean Turnbull", "link": "https://stackoverflow.com/users/7537334/sean-turnbull"}, "edited": false, "score": 0, "creation_date": 1486677037, "post_id": 42132572, "comment_id": 71461495, "body": "When you are reading it in, call <code>fscanf(fp, &quot; %d %d %d &quot;, &amp;red, &amp;green, &amp;blue);</code> inside a loop, until you have read width * height values or reached the end of the file (test using <code>feof(fp)</code>). Read into ints and then set the 8 bit values in your structs. To write it out you can just use fprintf. Note you can only have 70 values on each line. Read the format spec carefully first."}, {"owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "reply_to_user": {"reputation": 53, "user_id": 7537334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1433619619996274/picture?type=large", "display_name": "Sean Turnbull", "link": "https://stackoverflow.com/users/7537334/sean-turnbull"}, "edited": false, "score": 1, "creation_date": 1486677107, "post_id": 42132572, "comment_id": 71461532, "body": "This code handles reading ppm files but might be a bit over-complicated: <a href=\"https://sourceforge.net/p/netpbm/code/HEAD/tree/stable/lib/libppm1.c\" rel=\"nofollow noreferrer\">sourceforge.net/p/netpbm/code/HEAD/tree/stable/lib/libppm1.c</a>"}, {"owner": {"reputation": 53, "user_id": 7537334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1433619619996274/picture?type=large", "display_name": "Sean Turnbull", "link": "https://stackoverflow.com/users/7537334/sean-turnbull"}, "edited": false, "score": 0, "creation_date": 1486755385, "post_id": 42132572, "comment_id": 71499638, "body": "Thanks for the tips and help :)"}], "tags": [], "owner": {"reputation": 22202, "user_id": 696391, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/VrUwT.jpg?s=128&g=1", "display_name": "samgak", "link": "https://stackoverflow.com/users/696391/samgak"}, "is_accepted": true, "score": 1, "last_activity_date": 1486631907, "creation_date": 1486631907, "answer_id": 42132572, "question_id": 42125850, "link": "https://stackoverflow.com/questions/42125850/c-writing-structs-of-rgb-values-to-file-to-create-ppm-image-premature-end-of/42132572#42132572", "title": "C: Writing structs of RGB values to file to create ppm image - premature end of file", "body": "<p>The problem is actually in the code for reading in the PPM, which you have modified in a way that appears to work, but actually doesn't because the file format is different to what you think it is.</p>\n\n<p>The code that you linked to is for reading PPM files in the \"raw\" format. These files start with the \"P6\" code. In these files, each RGB value is stored as either 1 or 2 bytes (depending on whether the RGB component depth is less than 256). So, if the max value is 255, it's 1 bytes per value, so the file size is width * height * 3.</p>\n\n<p>However, you have modified the code to read \"plain\" PPM files, which start with the \"P3\" code, by checking for P3 and reading in more data. These files don't store the RGB values as raw binary data, but as ASCII text specifying the value in decimal format, separated by whitespace. So for example if you had the value 93 in raw format, it would just be 1 byte with a value of 93, but in the \"plain\" format it would be 3 (or more) bytes: one or more bytes with the ASCII value for a space (or tab), then the ASCII value for \"9\" (which is 57) then the ASCII value for \"3\" (which is 51). It's impossible to calculate the size of the file based on the width and height because the whitespace can be variable, and each value could be represented between 1 and 3 digits.</p>\n\n<p>Despite the fact that you are not parsing the data as ASCII-encoded text, your PPM-reading code <em>seems</em> to work because you are just reading in a chunk of data, (optionally) modifying a few random bytes and then writing it out again either totally or mostly unchanged.</p>\n\n<p>So, your possible solutions are:</p>\n\n<ul>\n<li>Change the getPPM code back to what it was and use an actual P6 file.</li>\n<li>Write a PPM reader that parses the data properly as ASCII text containing whitespace-separated decimal numbers (you can write out as either P3 or P6).</li>\n</ul>\n\n<p>More info: <a href=\"http://netpbm.sourceforge.net/doc/ppm.html\" rel=\"nofollow noreferrer\">PPM Format Specification</a></p>\n"}], "owner": {"reputation": 53, "user_id": 7537334, "user_type": "registered", "profile_image": "https://graph.facebook.com/1433619619996274/picture?type=large", "display_name": "Sean Turnbull", "link": "https://stackoverflow.com/users/7537334/sean-turnbull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4733, "favorite_count": 2, "accepted_answer_id": 42132572, "answer_count": 1, "score": 5, "last_activity_date": 1486656547, "creation_date": 1486598223, "last_edit_date": 1495535374, "question_id": 42125850, "link": "https://stackoverflow.com/questions/42125850/c-writing-structs-of-rgb-values-to-file-to-create-ppm-image-premature-end-of", "title": "C: Writing structs of RGB values to file to create ppm image - premature end of file", "body": "<p>The program i am creating a steganography program that hides a secret message inside a .ppm image by changing random red pixel values to ascii characters.\nThe program is based on code that is on stackoverflow for reading and writing ppm images (<a href=\"https://stackoverflow.com/questions/2693631/read-ppm-file-and-store-it-in-an-array-coded-with-c\">read PPM file and store it in an array; coded with C</a>), all other code is my own work. I have completed all the necessary functions to do this such as writing,reading,encoding and decoding the files but i am struggling to grasp the fwrite function. </p>\n\n<p>Currently when the program encodes an image it takes in the .ppm converts it to its rgb values in a struct. Then it hides the secret message by editing the red values to ascii characters. The issue arises when it comes to \"printing\" the image to a file. When the program has completed the image produced is around 90% of what it should be printing. Example show below:\n<a href=\"https://i.stack.imgur.com/UCVvZ.png\" rel=\"nofollow noreferrer\">Example of the unfinished image</a></p>\n\n<p>I have checked it is storing all the values are being stored correctly by printing all the rgb values and it is. (used the showPPM method). Is there not enough memory to write the image? is the image to large for the write function? these are my guesses.</p>\n\n<p>Any information on how i should go about changing the writePPM function so that i correctly print 100% of the image to the file would be great.</p>\n\n<p>Here is the code below:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;math.h&gt;\n#include&lt;string.h&gt;\n#include&lt;time.h&gt;\n\ntypedef struct {\n    unsigned char red,green,blue;\n} PPMPixel;\n\ntypedef struct {\nint x, y;\nPPMPixel *data;\n} PPMImage;\n\nvoid writePPM(PPMImage *img);\n\nstatic PPMImage *getPPM(const char *filename)\n{\n\n    char buff[16];\n     PPMImage *img;\n     FILE *fp;\n     int c, rgb_comp_color;\n     //open PPM file for reading\n     fp = fopen(filename, \"rb\");\n     if (!fp) {\n          fprintf(stderr, \"Unable to open file '%s'\\n\", filename);\n          exit(1);\n     }\n\n     //read image format\n     if (!fgets(buff, sizeof(buff), fp)) {\n          perror(filename);\n          exit(1);\n     }\n\n//check the image format\nif (buff[0] != 'P' || buff[1] != '3') {\n     fprintf(stderr, \"Invalid image format (must be 'P3')\\n\");\n     exit(1);\n}else{\n    printf(\"P3\\n\");\n}\n\n//alloc memory form image\nimg = (PPMImage *)malloc(sizeof(PPMImage));\nif (!img) {\n     fprintf(stderr, \"Unable to allocate memory\\n\");\n     exit(1);\n}\n\n\n   c = getc(fp);\n   while (c == '#') {\n   while (getc(fp) != '\\n') ;\n     c = getc(fp);\n\n}\nungetc(c, fp);\n//read image size information\nif (fscanf(fp, \"%d %d\", &amp;img-&gt;x, &amp;img-&gt;y) != 2) {\n     fprintf(stderr, \"Invalid image size (error loading '%s')\\n\", filename);\n     exit(1);\n}else{\n    printf(\"Height: %d\\n\",img-&gt;x);\n    printf(\"Width: %d\\n\",img-&gt;y);\n\n}\n\n//read rgb component\nif (fscanf(fp, \"%d\", &amp;rgb_comp_color) != 1) {\n     fprintf(stderr, \"Invalid rgb component (error loading '%s')\\n\", filename);\n     exit(1);\n}else{\n    printf(\"%d\\n\",rgb_comp_color );\n}\n\n//check rgb component depth\nif (rgb_comp_color!= 255) {\n     fprintf(stderr, \"'%s' does not have 8-bits components\\n\", filename);\n     exit(1);\n}\n\nwhile (fgetc(fp) != '\\n') ;\n//memory allocation for pixel data\nimg-&gt;data = (PPMPixel*)malloc(24*img-&gt;x * img-&gt;y * sizeof(PPMPixel));\n\nif (!img) {\n     fprintf(stderr, \"Unable to allocate memory\\n\");\n     exit(1);\n}\n\n//read pixel data from file\nif (fread(img-&gt;data, 10*img-&gt;x, img-&gt;y, fp) != img-&gt;y) {\n     fprintf(stderr, \"Error loading image '%s'\\n\", filename);\n     exit(1);\n}\n\nfclose(fp);\nreturn img;\n}\n\n\n\nstruct PPMImage * encode(char * text, PPMImage * img)\n{\n    //convert secret message to ascii code\n\n    int i,ascii,height,width;\n    int total = 0;\n    int rolling = 0;\n    int original = 0;\n    time_t t;\n    srand((unsigned) time(&amp;t));\n    height=img-&gt;y;\n    width=img-&gt;x;\n\n    for(i = 0; text[i]; i++){\n\n        ascii = text[i];\n\n        //create random number between 0 and max the width\n        total = total + rand() % width;\n        original = total;\n        //printf(\"Random Number: %d\\n\",total);\n\n        if(total &gt;= width){\n            rolling = rolling + 1;\n            total = total - width;\n        }\n\n        //printf(\"Before R: %d \\n\",img-&gt;data[0].red );\n        img-&gt;x=rolling;\n        img-&gt;y=total;\n\n        printf(\"X: %d \",rolling );\n        printf(\"Y: %d \",total );\n\n        //set img position\n        //at position random we set the red bit equal to ascii number \n        printf(\"Old R:  %d \",img-&gt;data[i].red );                    \n        img-&gt;data[i].red=ascii; \n        printf(\"New R: %d\\n \",img-&gt;data[i].red );   \n    }\n\n    //take img then print it out\n    //setting the img values again for printing\n    img-&gt;x=width;\n    img-&gt;y=height;\n    writePPM(img);\n\n}\n\nvoid writePPM(PPMImage *img)\n{\nFILE *fp;\n//open file to be written\nfp = fopen(\"encoded.ppm\", \"wb\");\nif (!fp) {\n     fprintf(stderr, \"Unable to open file \\n\");\n     exit(1);\n}\n\n//image format\nfprintf(fp, \"P3\\n\");\n\n//comments\n//need to store comments to be outputted\nfprintf(fp, \"# Created by Sean \\n\");\n\n//image size\nfprintf(fp,\"%d %d\\n\",img-&gt;x,img-&gt;y);\n\n// rgb component depth\nfprintf(fp, \"%d\\n\",255);\n\n//write pixels currently not fully working\nfwrite(img-&gt;data, sizeof(img-&gt;data), 3*img-&gt;y*img-&gt;x, fp);\n\n//close file stream\nfclose(fp);\n}\n\nvoid showPPM(PPMImage *img)\n{\n    int i;\n    if(img){\n\n    for(i=-1;i&lt;img-&gt;x*img-&gt;y;i++){\n        printf(\"Number: %d\\n\",i);\n        printf(\"R: %d \",img-&gt;data[i].red );\n        printf(\"G: %d \",img-&gt;data[i].green );\n        printf(\"B: %d\\n \",img-&gt;data[i].blue );\n\n     }\n}\n}\n\n\nchar * decode(PPMImage * i1,PPMImage * i2){\n\n//compare difference in number of bits in red pixels\n//if there is a different then take the red pixel value from the encrypted image\n//then translate it from ascii to chars then print.\nprintf(\"Decoding......\\n\");\n\nint i;\n     for(i=-1;i&lt;i1-&gt;x*i1-&gt;y;i++){\n            if(i1-&gt;data[i].red != i2-&gt;data[i].red){\n                printf(\"%c\",i1-&gt;data[i].red );\n            }\n     }\n\n//to be able to test and finish this need to write code for encoding\n\n}\n\nint main(int argc, char *argv[]){\n\n//input statements\nif(argc == 3){\n    PPMImage *image;\n    image = getPPM(argv[2]);\n    //uncomment the showPPM to display all rgb values in the encoded files\n    //showPPM(image);\n    if(argv[1] = \"e\"){\n    printf(\"Please enter your secret message to be encoded estimated max characters: %d\\n\",image-&gt;y);   \n\n        //need to add user input\n    encode(\"test output!\",image);\n    }\n}else if(argc == 4){\n    PPMImage *i1;\n    PPMImage *i2;\n    i1 = getPPM(argv[2]);\n    i2 = getPPM(argv[3]);\n\n    if(argv[1] = \"d\"){\n        decode(i1,i2);\n    }\n}else{\n    printf(\"Wrong arguments\");\n}\n}\n</code></pre>\n"}, {"tags": ["c", "xml", "expat-parser"], "answers": [{"comments": [{"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486599334, "post_id": 42125837, "comment_id": 71420191, "body": "Do I understand correctly: every time the <code>start</code> callback is called, I should make note of the <code>name</code> argument. E.g. suppose the start callback was called with <code>name==&quot;foo&quot;</code>, then the foo tag&#39;s value is actually the accumulation of all the strings passed in to the data handler callback, and that accumulation can be terminated when the end callback is called with <code>name==&quot;foo&quot;</code>."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486599502, "post_id": 42125837, "comment_id": 71420240, "body": "I think something&#39;s off about my understanding: the start callback for tag &quot;TITLE&quot; gets called before the end callback for &quot;CATALOG&quot; - so I think this means TITLE&#39;s value is accumulated until a subsequent call to the start callback with a different name...?"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486605669, "post_id": 42125837, "comment_id": 71421880, "body": "<i>the start callback for tag &quot;TITLE&quot; gets called before the end callback for &quot;CATALOG&quot;</i> -- That&#39;s true, the end of the <code>&lt;CATALOG&gt;</code> element has not occurred yet. It won&#39;t occur until the very end of the document, when <code>&lt;&#47;CATALOG&gt;</code> is encountered.  Why are you expecting to see it before the start-<code>&lt;TITLE&gt;</code> event?"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486606970, "post_id": 42125837, "comment_id": 71422190, "body": "It makes sense that start callback for &quot;TITLE&quot; gets called before the end callback for &quot;CATALOG&quot;, but then I don&#39;t understand how to put your original comment into practice: &quot;the CATALOG&#39;s tag&#39;s value is actually the accumulation of all the strings passed in to the data handler callback, and that accumulation can be terminated when the end callback is called with name==&quot;CATALOG&quot;&quot;. But how would the data handler know if the <code>val</code> argument it is passed belong to CATALOG or TITLE if we received the start callback for TITLE but not yet the end callback for CATALOG?"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486607517, "post_id": 42125837, "comment_id": 71422322, "body": "Sorry, I quoted myself instead of you. Your quote I don&#39;t understand how to put into practice: &quot;you must accumulate text over multiple calls and process it when receiving the &quot;end&quot; event for the containing tag&quot;. But same concern: how would the data handler know if the val argument it is passed belong to CATALOG or TITLE if we received the start callback for TITLE but not yet the end callback for CATALOG?"}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486607758, "post_id": 42125837, "comment_id": 71422375, "body": "You know, I think I&#39;m realizing what you mean (still happy to receive your further comment, if any): in the data handler callback, we would need to keep track of which tag&#39;s &quot;context&quot; we&#39;re inside, by doing something along the lines of reference counting between start tag callbacks we get and end tag callbacks we get. If we use that knowledge of &quot;context&quot;, we know which tag the <code>val</code> argument passed to the data handler callback belongs to. Is that sort of the idea?"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486607965, "post_id": 42125837, "comment_id": 71422428, "body": "Think &quot;stack&quot; to track where you are."}, {"owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "edited": false, "score": 0, "creation_date": 1486608008, "post_id": 42125837, "comment_id": 71422440, "body": "Gotcha. I&#39;m with you now. Thanks for the answer and subsequent explanation."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": true, "score": 2, "last_activity_date": 1486598484, "last_edit_date": 1486598484, "creation_date": 1486598163, "answer_id": 42125837, "question_id": 42125772, "link": "https://stackoverflow.com/questions/42125772/xml-characterdatahandler-callback-unpextedly-called-multiple-times/42125837#42125837", "title": "XML CharacterDataHandler callback unpextedly called multiple times", "body": "<p>The <code>expat</code> parser <em>may</em> split text nodes into multiple calls to the character data handler.  To properly handle text nodes you must accumulate text over multiple calls and process it when receiving the \"end\" event for the containing tag.</p>\n\n<p>This is true in general, even across different parsers and different languages -- i.e. the same thing is true in Java.</p>\n\n<p>See for instance <a href=\"http://marcomaggi.github.io/docs/expat.html#using-comm\" rel=\"nofollow noreferrer\">http://marcomaggi.github.io/docs/expat.html#using-comm</a></p>\n\n<blockquote>\n  <p>A common first\u2013time mistake with any of the event\u2013oriented interfaces to an XML parser is to expect all the text contained in an element to be reported by a single call to the character data handler. Expat, like many other XML parsers, reports such data as a sequence of calls; there's no way to know when the end of the sequence is reached until a different callback is made. </p>\n</blockquote>\n\n<p>Also from <a href=\"https://www.xml.com/pub/a/1999/09/expat/reference.html#chardatahandler\" rel=\"nofollow noreferrer\">the expat documentation</a></p>\n\n<blockquote>\n  <p>A single block of contiguous text free of markup may still result in a sequence of calls to this handler. In other words, if you're searching for a pattern in the text, it may be split across calls to this handler. </p>\n</blockquote>\n"}], "owner": {"reputation": 3787, "user_id": 5437543, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ad76496c936d384dac2888bae0126dde?s=128&d=identicon&r=PG&f=1", "display_name": "StoneThrow", "link": "https://stackoverflow.com/users/5437543/stonethrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 42125837, "answer_count": 1, "score": 1, "last_activity_date": 1486598484, "creation_date": 1486597741, "question_id": 42125772, "link": "https://stackoverflow.com/questions/42125772/xml-characterdatahandler-callback-unpextedly-called-multiple-times", "title": "XML CharacterDataHandler callback unpextedly called multiple times", "body": "<p>I'm learning about libexpat. I cobbled together this example for basic familiarity using the API:</p>\n\n<p><strong>The Code</strong>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;expat.h&gt;\n#include &lt;string.h&gt;\n#include &lt;iostream&gt;\n\nvoid start(void* userData, const char* name, const char* argv[])\n{\n  std::cout &lt;&lt; \"name: \" &lt;&lt; name &lt;&lt; std::endl;\n\n  int i = 0;\n\n  while (argv[i])\n  {\n    std::cout &lt;&lt; \"argv[\" &lt;&lt; i &lt;&lt; \"] == \" &lt;&lt; argv[i++] &lt;&lt; std::endl;\n  }\n}\n\nvoid end(void* userData, const char* name)\n{\n}\n\nvoid value(void* userData, const char* val, int len)\n{\n  char str[len+1];\n  strncpy(str, val, len);\n  str[len] = '\\0';\n\n  std::cout &lt;&lt; \"value: \" &lt;&lt; str &lt;&lt; std::endl;\n}\n\nint main(int argc, char* argv[], char* envz[])\n{\n  XML_Parser parser = XML_ParserCreate(NULL);\n  XML_SetElementHandler(parser, start, end);\n  XML_SetCharacterDataHandler(parser, value);\n\n  int bytesRead = 0;\n  char val[1024] = {};\n  FILE* fp = fopen(\"./catalog.xml\", \"r\");\n  std::cout &lt;&lt; \"fp == 0x\" &lt;&lt; (void*)fp &lt;&lt; std::endl;\n\n  do\n  {\n    bytesRead = fread(val, 1, sizeof(val), fp);\n    std::cout &lt;&lt; \"In while loop bytesRead==\" &lt;&lt; bytesRead &lt;&lt; std::endl;\n\n    if (0 == XML_Parse(parser, val, bytesRead, (bytesRead &lt; sizeof(val))))\n    {\n      break;\n    }\n  }\n  while (1);\n\n  XML_ParserFree(parser);\n  std::cout &lt;&lt; __FUNCTION__ &lt;&lt; \" end\" &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>catalog.xml</strong>:</p>\n\n<pre><code>&lt;CATALOG&gt;\n    &lt;CD key1=\"value1\" key2=\"value2\"&gt;\n        &lt;TITLE&gt;Empire Burlesque&lt;/TITLE&gt;\n        &lt;ARTIST&gt;Bob Dylan&lt;/ARTIST&gt;\n        &lt;YEAR&gt;1995&lt;/YEAR&gt;\n    &lt;/CD&gt;\n&lt;/CATALOG&gt;\n</code></pre>\n\n<p><strong>Makefile</strong>:</p>\n\n<pre><code>xml: xml.o\n        g++ xml.o -lexpat -o xml\n\nxml.o: main.cpp Makefile\n        g++ -g -c main.cpp -o xml.o\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>fp == 0x0x22beb50\nIn while loop bytesRead==148\nname: CATALOG\nvalue: \n\nvalue:     \nname: CD\nargv[1] == key1\nargv[2] == value1\nargv[3] == key2\nargv[4] == value2\nvalue: \n\nvalue: \nname: TITLE\nvalue: Empire Burlesque\nvalue: \n\nvalue: \nname: ARTIST\nvalue: Bob Dylan\nvalue: \n\nvalue: \nname: YEAR\nvalue: 1995\nvalue: \n\nvalue:     \nvalue: \n\nIn while loop bytesRead==0\nmain end\n</code></pre>\n\n<p><strong>Question</strong>:</p>\n\n<p>From the output, it appears that the callback I installed with <code>XML_SetCharacterDataHandler()</code> gets called twice for the CATALOG,, CD, TITLE, and ARTIST xml tags, and then multiple times for the YEAR tag - can someone explain this behavior? From the noted <code>catalog.xml</code>, it's not clear to me why there are (or would ever be) multiple values associated with any XML tags.</p>\n\n<p>Thank you.</p>\n\n<p><em>Citation</em>:</p>\n\n<p>Credit to <a href=\"http://techybook.com/c-cpp-xml-parsing-using-expat/\" rel=\"nofollow noreferrer\">this site</a> for the basis of the above sample code.</p>\n"}, {"tags": ["c", "string", "strtok", "strdup"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486597320, "post_id": 42125675, "comment_id": 71419450, "body": "The only problem with your code is style and not checking <code>malloc</code>&#39;s return value."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 1, "creation_date": 1486597357, "post_id": 42125675, "comment_id": 71419466, "body": "Where do you read the line?"}, {"owner": {"reputation": 163, "user_id": 6837783, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1d51b261e04ed8d2b27a2062dcc33129?s=128&d=identicon&r=PG", "display_name": "Atinuke", "link": "https://stackoverflow.com/users/6837783/atinuke"}, "edited": false, "score": 1, "creation_date": 1486597448, "post_id": 42125675, "comment_id": 71419504, "body": "line is read from stdin using getline"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1486597862, "post_id": 42125675, "comment_id": 71419661, "body": "1) <code>char delim[]=&quot;&quot;;</code> --&gt; <code>char delim[]=&quot; \\n&quot;;</code> 2) <code>if(strcmp(token2[0], array[0]) == 0){</code> --&gt; <code>if(strcmp(token2[n], array[0]) == 0){</code> and into loop ?"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1486598614, "post_id": 42125675, "comment_id": 71419953, "body": "Why <code>while(i == 0)</code>? Why not simply <code>while (1)</code>."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1486598879, "post_id": 42125675, "comment_id": 71420042, "body": "Also why are you allocating <code>myline</code>? <code>getline()</code> will do this for you."}, {"owner": {"reputation": 163, "user_id": 6837783, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1d51b261e04ed8d2b27a2062dcc33129?s=128&d=identicon&r=PG", "display_name": "Atinuke", "link": "https://stackoverflow.com/users/6837783/atinuke"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1486599584, "post_id": 42125675, "comment_id": 71420265, "body": "@BLUEPIXY my comparison is between the first token and the array"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1486600079, "post_id": 42125675, "comment_id": 71420404, "body": "<i>the code to compare  token[n] with my variable</i>"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 1, "creation_date": 1486600084, "post_id": 42125675, "comment_id": 71420406, "body": "@Atinuke So you want to compare the first token, <code>token2[0]</code> with each element of the array <code>array[i]</code>?"}, {"owner": {"reputation": 163, "user_id": 6837783, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1d51b261e04ed8d2b27a2062dcc33129?s=128&d=identicon&r=PG", "display_name": "Atinuke", "link": "https://stackoverflow.com/users/6837783/atinuke"}, "reply_to_user": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1486600843, "post_id": 42125675, "comment_id": 71420608, "body": "exactly @RoadRunner .... i made some changes to my code"}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1486600961, "post_id": 42125675, "comment_id": 71420633, "body": "<code>free(tokens[n]); </code>? I think this is a typo. You only have <code>token1</code> and <code>token2</code>. And <code>for(m = 0; m&lt;strlen;m++) </code> is not correct. you can do something like: <code>for(m = 0; m&lt;sizeof(array)&#47;sizeof(array[0]); m++) </code>. There are better ways to do this, maybe you can use a macro instead?"}, {"owner": {"reputation": 163, "user_id": 6837783, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1d51b261e04ed8d2b27a2062dcc33129?s=128&d=identicon&r=PG", "display_name": "Atinuke", "link": "https://stackoverflow.com/users/6837783/atinuke"}, "edited": false, "score": 0, "creation_date": 1486602244, "post_id": 42125675, "comment_id": 71420958, "body": "I still need the comparison to work ..."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1486603198, "post_id": 42125675, "comment_id": 71421182, "body": "@Atinuke Your comparison will never work because <code>getline()</code> adds a newline character at the end of buffer. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1486603483, "post_id": 42126385, "comment_id": 71421273, "body": "This is <code>c++</code>. OP won&#39;t find this useful as question is tagged in <code>c</code>."}], "tags": [], "owner": {"reputation": 17, "user_id": 6880413, "user_type": "registered", "profile_image": "https://graph.facebook.com/1642904306040359/picture?type=large", "display_name": "Mohammad Chand Alam", "link": "https://stackoverflow.com/users/6880413/mohammad-chand-alam"}, "is_accepted": false, "score": 0, "last_activity_date": 1486601698, "creation_date": 1486601698, "answer_id": 42126385, "question_id": 42125675, "link": "https://stackoverflow.com/questions/42125675/how-to-save-a-string-token-save-its-content-to-an-array-then-use-those-conten/42126385#42126385", "title": "how to save a string token , save its content to an array, then use those contents for further comparison", "body": "<p>I think you should try vector of string like  </p>\n\n<p>vector &lt; string > str = { \"ax\",\"bo\",\"cf\" };</p>\n"}, {"comments": [{"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "reply_to_user": {"reputation": 163, "user_id": 6837783, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1d51b261e04ed8d2b27a2062dcc33129?s=128&d=identicon&r=PG", "display_name": "Atinuke", "link": "https://stackoverflow.com/users/6837783/atinuke"}, "edited": false, "score": 0, "creation_date": 1486615749, "post_id": 42126542, "comment_id": 71424362, "body": "@Atinuke These issues should help you debug your code."}], "tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1486603737, "last_edit_date": 1486603737, "creation_date": 1486602712, "answer_id": 42126542, "question_id": 42125675, "link": "https://stackoverflow.com/questions/42125675/how-to-save-a-string-token-save-its-content-to-an-array-then-use-those-conten/42126542#42126542", "title": "how to save a string token , save its content to an array, then use those contents for further comparison", "body": "<p>Their seems to be a few issues in your current code:</p>\n\n<ul>\n<li><p><code>for(m = 0; m&lt;strlen;m++)</code> is not correct. <code>strlen()</code> is a <code>&lt;string.h&gt;</code> function used to obtain the length of a C string. Since you want <code>array[i]</code>, you need to include the size of <code>array</code> in the guard. To find the size of the array, you can use <code>sizeof(array)/sizeof(array[0])</code>. It would be good to include this in a macro:</p>\n\n<pre><code>#define ARRAYSIZE(x) (sizeof x/sizeof x[0])\n</code></pre>\n\n<p>Then your loop can be:</p>\n\n<pre><code>size_t m;\nfor(m = 0; m&lt;ARRAYSIZE(array); m++)\n</code></pre></li>\n<li><p>You need to check return of <code>malloc()</code>, as it can return <code>NULL</code> on failure to allocate spaces. Here is a way to check this:</p>\n\n<pre><code>token2[n] = malloc(strlen(token1)+1);\nif (token2[n] == NULL) {\n    /* handle error */\n</code></pre></li>\n<li><p>It is possible to skip the <code>malloc()</code>/<code>strcpy()</code> step by simply using <a href=\"https://linux.die.net/man/3/strdup\" rel=\"nofollow noreferrer\"><code>strdup</code></a>. </p></li>\n<li><p><code>getline()</code> returns <code>-1</code> on failure to read a line, so its good to check this. It also adds a <code>\\n</code> character at the end of the buffer, so you need to remove this. Otherwise, <code>strcmp</code> will never find equal strings, as you will be comparing <code>strcmp(\"string\\n\", \"string\")</code>. You need to find the <code>\\n</code> character in your buffer, and replace it with a <code>\\0</code> null-terminator. </p>\n\n<p>You can achieve this like:</p>\n\n<pre><code>size_t slen = strlen(myline);\nif (slen &gt; 0 &amp;&amp; myline[slen-1] == '\\n') {\n    myline[slen-1] = '\\0';\n}\n</code></pre></li>\n<li><p>You also need to <code>free()</code> all of the <code>char*</code> pointers in <code>token2[]</code>. </p></li>\n<li><p>Since you are using the same delimeter for <code>strtok()</code>, its better to make this <code>const</code>. So <code>const char *delim = \" \\n\";</code> instead. </p></li>\n</ul>\n\n<p>Alot of the fixes I suggested in the comments, so I didn't post them here, as you seemed to have updated your code with those suggestions. </p>\n"}], "owner": {"reputation": 163, "user_id": 6837783, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1d51b261e04ed8d2b27a2062dcc33129?s=128&d=identicon&r=PG", "display_name": "Atinuke", "link": "https://stackoverflow.com/users/6837783/atinuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486603737, "creation_date": 1486597194, "last_edit_date": 1486601835, "question_id": 42125675, "link": "https://stackoverflow.com/questions/42125675/how-to-save-a-string-token-save-its-content-to-an-array-then-use-those-conten", "title": "how to save a string token , save its content to an array, then use those contents for further comparison", "body": "<p>/*I am unsure if my code for saving the tokens in an array is accurate. \nThis is so because been whenever I run my program, the code to compare \n<code>token[0]</code> with my variable doesn't give an output nor perform assigned function.</p>\n\n<p>Hence I am sure there is something inaccurate about my coding.*/</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    //variable declarations        \n   const char *array[] = {\"ax\",\"bo\",\"cf\"};\n   char delim[]=\" \\n\";\n   char* myline;\n   size_t max = 500;\n   char* token1;\n   char* token2[max];\n   int n = 0;\n\n\n   while(1)    //loop always\n   {      \n      printf(\"Enter an argument\\n\");   //asks for an input\n\n\n      getline (&amp;myline, &amp;max, stdin);     //read the input/line              \n\n      //for loop -- splits up the line into tokens\n      for(token1 = strtok(myline, \" \"); token1 != NULL; token1 = strtok(NULL, delim))\n      {                  \n\n         token2[n] = malloc(strlen(token1)+1);     //allocate some space/memory to token2[n]\n\n         //save the token in an array by copying from token1 to token2\n         strcpy(token2[n],token1);\n\n\n         int m;\n\n         for(m = 0; m&lt;sizeof(array);m++)    //loop through the array elements for comparison\n         { \n            //compare array at index m with token at index 0 --  compare only first token with a specific variable \n\n           if(strcmp(token2[0], array[m]) == 0)\n           {\n               printf(\"equal\");\n           }\n         }\n       }\n\n   free(token2[n]);     //deallocate assigned memory\n   }       \n return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "while-loop", "msp430", "circular-buffer", "code-composer"], "comments": [{"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 1, "creation_date": 1486597339, "post_id": 42125632, "comment_id": 71419459, "body": "Both while sections will &quot;stuck&quot; because event does not change value inside. I guess you meant &quot;if&quot; and not &quot;while&quot; there."}, {"owner": {"reputation": 1, "user_id": 7147416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8590f750947a1f693ca2e6dd98d329d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle G", "link": "https://stackoverflow.com/users/7147416/kyle-g"}, "reply_to_user": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 0, "creation_date": 1486597471, "post_id": 42125632, "comment_id": 71419516, "body": "@Anty I actually tried replacing the whiles with ifs and got the same exact result"}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 0, "creation_date": 1486598054, "post_id": 42125632, "comment_id": 71419744, "body": "You still miss the point - &quot;event&quot; will not change value during display execution. How is display being called and how event is being read?"}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 0, "creation_date": 1486598191, "post_id": 42125632, "comment_id": 71419800, "body": "It seems to me that you want to receive many calls to this function, each with an <code>event</code> value, and compute the average, etc., from those calls. (This is what @Anty is pointing out.) Because you want to receive many calls, you shouldn&#39;t have a while loop in your function - the loop is outside your function somewhere, generating all these calls. Your code should be doing something like &quot;What&#39;s the event? Okay, I&#39;ll update the count and return&quot;"}, {"owner": {"reputation": 1, "user_id": 7147416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8590f750947a1f693ca2e6dd98d329d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle G", "link": "https://stackoverflow.com/users/7147416/kyle-g"}, "reply_to_user": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1486598551, "post_id": 42125632, "comment_id": 71419934, "body": "@AustinHastings I think I understand now.  The while loop that controls the array indices is not being updated.  Instead I should use flags maybe?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7147416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8590f750947a1f693ca2e6dd98d329d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle G", "link": "https://stackoverflow.com/users/7147416/kyle-g"}, "edited": false, "score": 0, "creation_date": 1486659177, "post_id": 42126022, "comment_id": 71450963, "body": "Would the while loop necessary?  Another commenter described that the event calling basically works as the while loop and having another one can cause problems with what I want to happen"}], "tags": [], "owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "is_accepted": false, "score": 1, "last_activity_date": 1486599236, "creation_date": 1486599236, "answer_id": 42126022, "question_id": 42125632, "link": "https://stackoverflow.com/questions/42125632/circular-array-stuck-in-if-statements/42126022#42126022", "title": "Circular Array Stuck in if statements", "body": "<blockquote>\n  <p>*When I comment the arrays inside the if statements, the code works as expected</p>\n</blockquote>\n\n<pre><code>static int size=6;\nstatic int array[6]={0};  //array with number of passes for each n\nstatic int totalnumberoftests[6]={0};\n</code></pre>\n\n<p>and this</p>\n\n<pre><code> while(n&lt;=size)\n</code></pre>\n\n<p>When n=6 you pass the array boundary - max index is 5 not 6 for those (min index = 0).</p>\n\n<pre><code>    array[n]=0;\n    totalnumberoftests[n]=consecfail;\n</code></pre>\n\n<p>That is UB and this may produce invalid behavior.</p>\n\n<p>Change condition in while to n &lt; size.</p>\n\n<p>Anyway this code seems \"weird\" to me.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7147416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8590f750947a1f693ca2e6dd98d329d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle G", "link": "https://stackoverflow.com/users/7147416/kyle-g"}, "edited": false, "score": 0, "creation_date": 1486658711, "post_id": 42129545, "comment_id": 71450611, "body": "I see.  Thank you for the clarification!  The point of the while loop is for the arrays to rewrite data after n&gt;size(of the arrays) and I was using a while loop to set the index of the array.  Can this be done with if statements and flags instead?  I made an edit showing what I did with the code but it&#39;s still not working exactly how I want it to."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 1, "user_id": 7147416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8590f750947a1f693ca2e6dd98d329d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle G", "link": "https://stackoverflow.com/users/7147416/kyle-g"}, "edited": false, "score": 0, "creation_date": 1486677834, "post_id": 42129545, "comment_id": 71461899, "body": "Yes! Your update, with <code>if (n == size) n = 0;</code> is perfect. That manages the &quot;circular&quot; part of the array. I have to admit, however, that the rest of your code is baffling to me. Can you add an update that explains what you are testing, and what kind of statistics you are trying to collect?"}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1486621047, "creation_date": 1486621047, "answer_id": 42129545, "question_id": 42125632, "link": "https://stackoverflow.com/questions/42125632/circular-array-stuck-in-if-statements/42129545#42129545", "title": "Circular Array Stuck in if statements", "body": "<p>To elaborate on my comment, if you are in an event-driven system, I expect there is some code (usually called an \"event loop\") somewhere that looks like this:</p>\n\n<pre><code>event_loop()\n{\n    while (TRUE) \n    {\n        event = get_event_from_someplace(...);\n\n        display(...);\n    }\n}\n</code></pre>\n\n<p>It may be that instead of calling <code>display</code> directly, there was some process where you <em>register</em> the <em>event handler</em>. But the upshot is that there is probably an endless loop in some library code that calls your function over and over and over again. So you don't need the <code>while()</code> in your code.</p>\n\n<p>Your code should be a <em>state machine</em> that keeps track of internal state (using <code>static</code> variables, like you are) and then performs whatever updates are required for each call.</p>\n\n<p>Something like this:</p>\n\n<pre><code>void display(char event, ...)\n{\n    static int consecutive_passes = 0;\n    static int consecutive_fails = 0;\n\n\n    if (event == DETECTED) {\n        ++consecutive_passes;\n    }\n    else if (event == NOT_DETECTED) {\n        ++consecutive_fails;\n    }\n    else {\n        // What else is there?\n    }\n}\n</code></pre>\n\n<p>The idea is that this code gets called every time there is an event, and it just updates whatever set of things need updating. But there is no <code>while</code> loop, because the calls are coming from the event loop, and that's all the <code>while</code> loop you need.</p>\n"}], "owner": {"reputation": 1, "user_id": 7147416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8590f750947a1f693ca2e6dd98d329d9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle G", "link": "https://stackoverflow.com/users/7147416/kyle-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486658844, "creation_date": 1486596990, "last_edit_date": 1486658844, "question_id": 42125632, "link": "https://stackoverflow.com/questions/42125632/circular-array-stuck-in-if-statements", "title": "Circular Array Stuck in if statements", "body": "<p>I am writing firmware for an MSP430 device that uses LEDs and photodiodes to detect specific types on ink.  The device scans at about 155us and the samples under the scanner range from velocities of .1m/s to 3.3m/s.  The goal of the device is to test for ink and measure the ink (pass) to test (not pass) ratio and turn on a green LED when the ratio is between the corresponding value and turn on a red LED when it is not.  I am using static integer arrays to store the values of consecutive passes and test values to the same index number of each array.  After the last index of the array, the index is set back to zero and the old values are written over.  </p>\n\n<p>GREEN_LED_ON; and similar definitions are port definitions for my MCU and are verified to be correct.</p>\n\n<p>event is the test result.  If ink is detected, event=DETECTED and vice versa</p>\n\n<p>test will be the average set by a GUI, but for now it is nothing because I don't have this part of my function working</p>\n\n<p>Normally, I will not have GREEN_LED_ON; etc in the if(event) loops, but I put them there to visual where my code is going wrong.  The code seems to get stuck in which ever loop even starts with.  For example, if I start with the device over no ink, the LED stays red, and when the device is over ink, the device stays green no matter what.  Does anyone have any idea what I am doing wrong and how to fix it?</p>\n\n<p>Notes:<br>\n*I also tried changing the while(event)s to if statements and I get the same result</p>\n\n<p>*When I comment the arrays inside the if statements, the code works as expected</p>\n\n<p>*Top version is the current portion of the code and the bottom is what I started with</p>\n\n<pre><code>void display(char event, char test) {\n\nstatic int size=6;\nstatic int array[6]={0};  //array with number of passes for each n\nstatic int n=0;\nstatic float sum=0;//total number of passes\nstatic float average=0;//average pass rate over n\nstatic int consecpass=0; //consecutive passes\nstatic int consecfail=0; //consecutive fails\nstatic int totalnumberoftests[6]={0}; //total number of tests conducted.  Counts the number of passing or failing tests for the nth value\nstatic float counter=1; //used to count the total number of tests\nstatic int flag=0;\n\n\n    if(n==size) n=0;\n\n    if (event == DETECTED)\n    {\n        if (flag==0)\n        {\n            sum=sum-array[n];\n            counter=counter-totalnumberoftests[n];\n            array[n]=0;\n            totalnumberoftests[n]=consecfail;\n            sum=sum+array[n];\n            counter=counter+totalnumberoftests[n];\n            n++;\n        }\n\n        consecfail=0;\n        consecpass++;\n        //GREEN_LED_ON;\n        //RED_LED_OFF;\n        flag=1;\n\n    } if (event==NOT_DETECTED){\n\n        if(flag==1)\n        {\n            sum=sum-array[n];\n            counter=counter-totalnumberoftests[n];\n            array[n]=consecpass;\n            totalnumberoftests[n]=consecpass;\n            sum=sum+array[n];\n            counter=counter+totalnumberoftests[n];\n            n++;\n        }\n\n        //array[n]=consecpass;\n        //totalnumberoftests[n]=consecpass;\n        consecpass=0;\n        consecfail++;\n        flag=0;\n        //GREEN_LED_OFF;\n        //RED_LED_ON;\n    }\n\n    if (consecpass&gt;8000)\n    {\n        sum=sum-array[n];\n        counter=counter-totalnumberoftests[n];\n        array[n]=consecpass;\n        totalnumberoftests[n]=consecpass;\n        sum=sum+array[n];\n        counter=counter+totalnumberoftests[n];\n        n++;\n    }\n\n    if(consecfail&gt;30000)\n    {\n        sum=sum-array[n];\n        counter=counter-totalnumberoftests[n];\n        array[n]=0;\n        totalnumberoftests[n]=consecfail;\n        sum=sum+array[n];\n        counter=counter+totalnumberoftests[n];\n        n++;\n    }\n\n    average=sum/counter;\n\n    if(average&lt;1 &amp;&amp; average &gt;0 )\n    {\n        GREEN_LED_ON;\n        RED_LED_OFF;\n    }else{\n        GREEN_LED_OFF;\n        RED_LED_ON;\n    }\n\n\n}\n</code></pre>\n\n<p>This was what I originally started with:</p>\n\n<pre><code>void display(char event, char test) {\n\nstatic int size=6;\nstatic int array[6]={0};  //array with number of passes for each n\nstatic int n=0;\nstatic int sum=0;//total number of passes\nstatic double average=0;//average pass rate over n\nstatic int consecpass=0; //consecutive passes\nstatic int consecfail=0; //consecutive fails\nstatic int totalnumberoftests[6]={0}; //total number of tests conducted.  Counts the number of passing or failing tests for the nth value\nstatic float counter=0; //used to count the total number of tests\n\n\n\n while(n&lt;=size)\n    {\n        sum=sum-array[n]; //subtacts the nth value from the total sum of passing tests\n        counter=counter-totalnumberoftests[n];  //subtracts the nth value of the total number of tests run\n\n        if(event == DETECTED)\n        {\n            array[n]=0;\n            totalnumberoftests[n]=consecfail;\n            consecfail=0;\n            consecpass++;\n            GREEN_LED_ON;\n            RED_LED_OFF;\n\n        } if(event==NOT_DETECTED){\n\n            array[n]=consecpass;\n            totalnumberoftests[n]=consecpass;\n            consecpass=0;\n            consecfail++;\n            GREEN_LED_OFF;\n            RED_LED_ON;\n        }\n        sum=sum+array[n];\n        counter=counter+totalnumberoftests[n];\n\n        average=sum/counter;\n\n        /*if(average&lt;1)\n        {\n            GREEN_LED_ON;\n            RED_LED_OFF;\n        }else{\n            GREEN_LED_OFF;\n            RED_LED_ON;\n        }*/\n        n++;\n    }\n    if(n&gt;size) n=0;\n\n\n    }\n</code></pre>\n"}, {"tags": ["c", "command-line", "command"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 8, "creation_date": 1486595882, "post_id": 42125432, "comment_id": 71418992, "body": "Using <code>argv[2]</code> before checking is a bad idea, I guess... Really, can&#39;t you proof-read your own code (not speaking of the crazy formatting)?"}], "answers": [{"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": true, "score": 2, "last_activity_date": 1486600083, "creation_date": 1486600083, "answer_id": 42126160, "question_id": 42125432, "link": "https://stackoverflow.com/questions/42125432/c-command-line-arguments/42126160#42126160", "title": "c command line arguments", "body": "<pre><code>int c = convert(argv[2]);\n</code></pre>\n\n<p>When <code>argc</code> is 2, <code>argv[2]</code> will be <code>NULL</code>. What do you expect this line of code will do, as it's executed first thing when the program runs?</p>\n\n<p>Refactoring so that the conditionals below it form a guard against that condition, here's something closer to what you probably intended:</p>\n\n<pre><code>#include &lt;stddef.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint convert(char *str)\n{\n  int i, number = 0;\n  for (i = 0; str[i] != '\\0'; ++i) {\n    number = number * 10 + str[i] - '0';\n  }\n  return number;\n}\n\nint main(int argc, char *argv[])\n{\n  if (argc != 3) {\n    printf(  argc &lt; 3   ? \"Not Enough Arguments\\n\"\n           /*argc &gt; 3*/ : \"Too Many Arguments\\n\"  );\n    exit(EXIT_FAILURE);\n  }\n\n  int c = convert(argv[2]);\n  for (int j = 0; j &lt; c; j++) {\n    printf(\"Hello, %s!\\n\", argv[1]);\n  }\n  return 0;\n}\n</code></pre>\n\n<p>P.S. As <code>argv[0]</code> is typically the program name rather than an argument, <code>argv[1]</code> and <code>argv[2]</code> will be your arguments, <code>argv[3]</code> will be <code>NULL</code> and if you count them you'll count two arguments, not three; expect <code>argc == 4</code> when three arguments are given.</p>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 2921438, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000887638319/picture?type=large", "display_name": "Hubert Bossy", "link": "https://stackoverflow.com/users/2921438/hubert-bossy"}, "is_accepted": false, "score": 0, "last_activity_date": 1486711166, "last_edit_date": 1486711166, "creation_date": 1486601499, "answer_id": 42126349, "question_id": 42125432, "link": "https://stackoverflow.com/questions/42125432/c-command-line-arguments/42126349#42126349", "title": "c command line arguments", "body": "<p>You may be interested in <a href=\"https://en.wikipedia.org/wiki/Getopt\" rel=\"nofollow noreferrer\">getopt.h library</a>. It handles all the standard features of command line arguments.</p>\n"}], "owner": {"reputation": 199, "user_id": 6869665, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/68e0a1bdb63d3e268240559259a0fa23?s=128&d=identicon&r=PG&f=1", "display_name": "raju", "link": "https://stackoverflow.com/users/6869665/raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 42126160, "answer_count": 2, "score": -1, "last_activity_date": 1486711166, "creation_date": 1486595800, "last_edit_date": 1486596608, "question_id": 42125432, "link": "https://stackoverflow.com/questions/42125432/c-command-line-arguments", "title": "c command line arguments", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint convert(char *str)\n{\n  int i, number = 0;\n  for (i = 0; str[i] != '\\0'; ++i) {\n    number = number * 10 + str[i] - '0';\n\n  }\n  return number;\n}\n\nint main(int argc, char *argv[])\n{\n  int j;\n  int c = convert(argv[2]);\n  if (argc == 3) {\n    for (j = 0; j &lt; c; j++) {\n      printf(\"Hello, %s!\\n\", argv[1]);\n    }\n  } else if (argc &lt; 3) {\n    printf(\"Not Enough Arguments\\n\");\n  } else if (argc &gt; 3) {\n    printf(\"Too Many Arguments\\n\");\n  }\n  return 0;\n}\n</code></pre>\n\n<p>getting segmentation fault when giving less then 3 arguments.\non giving less than 3 arguments it should print \"not enough arguments\" but it gives error segmentation fault. </p>\n\n<p>input:<code>./a raju</code>\nexpected output: <code>not enough arguments</code> </p>\n"}, {"tags": ["c", "header", "signals", "handlers"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 1, "creation_date": 1486595061, "post_id": 42125281, "comment_id": 71418688, "body": "Is it <code>c</code> or <code>c++</code>? Please choose one. What is the question?"}, {"owner": {"reputation": 37, "user_id": 7537224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Qn-NYWCZDY/AAAAAAAAAAI/AAAAAAAAE94/O0lCcyoGU2g/photo.jpg?sz=128", "display_name": "Kevin Gombos", "link": "https://stackoverflow.com/users/7537224/kevin-gombos"}, "edited": false, "score": 0, "creation_date": 1486595198, "post_id": 42125281, "comment_id": 71418745, "body": "This is a C program, my apologies."}, {"owner": {"reputation": 37, "user_id": 7537224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Qn-NYWCZDY/AAAAAAAAAAI/AAAAAAAAE94/O0lCcyoGU2g/photo.jpg?sz=128", "display_name": "Kevin Gombos", "link": "https://stackoverflow.com/users/7537224/kevin-gombos"}, "edited": false, "score": 0, "creation_date": 1486595275, "post_id": 42125281, "comment_id": 71418775, "body": "My question is how do I go about installing these signal handlers that need to be installed.  All I seem to be able to find online as far as examples are standard signal handlers for alarms, or Ctrl^C&#39;ing out of a running program.  Nothing that prints out a particular output based upon a given circumstance like these."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1486596144, "post_id": 42125281, "comment_id": 71419068, "body": "You should not define functions in a header file, except <code>inline</code> functions. And if your task is not clear, your should ask your prof so he can adjust his didactic approach. Not clear what your problem is. Show your code, read the documentation of the required functions."}], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 5514372, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000918847905/picture?type=large", "display_name": "PeCosta", "link": "https://stackoverflow.com/users/5514372/pecosta"}, "is_accepted": false, "score": 0, "last_activity_date": 1486598552, "creation_date": 1486598552, "answer_id": 42125918, "question_id": 42125281, "link": "https://stackoverflow.com/questions/42125281/installing-signal-handlers-for-variables-that-are-defined-in-a-header-file-in-c/42125918#42125918", "title": "Installing signal handlers for variables that are defined in a header file in C", "body": "<p>Not really sure what your aim is but signals according to GNU:</p>\n\n<blockquote>\n  <p>A signal is a software interrupt delivered to a process. The operating system uses signals to report exceptional situations to an executing program. Some signals report errors such as references to invalid memory addresses; others report asynchronous events, such as disconnection of a phone line. </p>\n</blockquote>\n\n<p>If you have a 64 bit OS you should be able to use <code>SIGNUM's</code> from 1 to 64, notice some of this include already managed signals like <code>SIGTERM</code>.\nThe following code manages and raises signal 10(<code>SIGUSR1</code>), that I defined with one of your ID's:</p>\n\n<pre><code>#include &lt;signal.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define TIME_OVER_SIGNAL 28 \n\n\nstatic void catInteractive attention sch_function(int signo) {\n    puts(\"Signal caught.\");\n}\n\nint main(void) {\n    if (signal(TIME_OVER_SIGNAL, catch_function) == SIG_ERR) {\n        fputs(\"An error occurred while setting a signal handler.\\n\", stderr);\n        return EXIT_FAILURE;\n    }\n    puts(\"Raising the interactive attention signal.\");\n    if (raise(TIME_OVER_SIGNAL) != 0) {\n        fputs(\"Error raising the signal.\\n\", stderr);\n        return EXIT_FAILURE;\n    }\n    puts(\"Exiting.\");\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7537224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4Qn-NYWCZDY/AAAAAAAAAAI/AAAAAAAAE94/O0lCcyoGU2g/photo.jpg?sz=128", "display_name": "Kevin Gombos", "link": "https://stackoverflow.com/users/7537224/kevin-gombos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486598552, "creation_date": 1486594859, "last_edit_date": 1486595359, "question_id": 42125281, "link": "https://stackoverflow.com/questions/42125281/installing-signal-handlers-for-variables-that-are-defined-in-a-header-file-in-c", "title": "Installing signal handlers for variables that are defined in a header file in C", "body": "<p>So I am working on this code for a class and I have little experience with signal handlers. I have 95% of my code done, however,  I am struggling with this bit.</p>\n\n<p>This is what the professor is asking for on this assignment.</p>\n\n<p><em>Then, main() should install 4 signal handler:</em><br>\n<em>The handler for TIME_OVER_SIGNAL announces that the time is up and sets shouldRun to 0.</em><br>\n<em>The handler for WIN_SIGNAL announces that the user won and sets shouldRun to 0.</em><br>\n<em>The handler for CORRECT_SIGNAL announces that the user got their last guess correct.</em><br>\n<em>The handler for INCORRECT_SIGNAL announces that the user got their last guess wrong, and should start again from the beginning.</em><br>\n<em>NOTE: Perhaps you can make the same handler handle both CORRECT_SIGNAL and INCORRECT_SIGNAL.</em></p>\n\n<p>I haven't been successful finding any examples online similar to this to steer me in the right direction of what to do. </p>\n\n<p>This is what I basically got out of the explanation and I know for a fact it's probably way off the mark... How do I go about installing these so they output a particular message like is being asked? The only examples I can find online are for generic alarms, sigChld, or to be able to Ctrl^C out of a running program.</p>\n\n<pre><code>void timeOverSignalHandler(int sigINT)  \n{  \n        printf(\"Oh no! The time is up!\");  \n        shouldRun = 0;  \n}\n</code></pre>\n\n<p>I'm confused what arguments should be passed. I'm also confused whether or not I should be doing something different within the handler and when I call the handler within the main I should have the output generate there. </p>\n\n<p>If anybody could be kind enough to guide me in the right direction with this one I would greatly appreciate your help! Any sort of example that would be similar to this would be great, where the handler is used to output a specific phrase to the user. Doesn't have to necessarily be these particular handlers that I need to do for the assignment. <strong>This is a C program!</strong></p>\n"}, {"tags": ["c++", "c", "linux", "include-path", "codelite"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1486594497, "post_id": 42125149, "comment_id": 71418422, "body": "You need to edit makefile(s) and add that directory to include list. How to that in your particular case depends on your makefile"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1486594546, "post_id": 42125149, "comment_id": 71418451, "body": "Best option: install your distribution&#39;s development package for wx instead of building your own local copy.  This will almost certainly solve the problem."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1486594609, "post_id": 42125149, "comment_id": 71418485, "body": "No! Never put crap in your PATH, that&#39;s a recipe for disaster, and it won&#39;t work here anyway. That&#39;s Windows-think. Include paths are for the C compiler, so you have to pass &quot;-I/home/...&quot; to the gcc command line somehow, probably by putting that in your Makefile."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1486594656, "post_id": 42125149, "comment_id": 71418502, "body": "Alternative: pass an <code>-I</code> flag to the compiler indicating where to find the headers (i.e. <code>-I&#47;home&#47;moving2&#47;sdk&#47;wxsqlite3&#47;include</code>).  The compiler does not rely on the path to executables (<code>PATH</code>) to find header files."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1486594674, "post_id": 42125149, "comment_id": 71418513, "body": "Actually CodeLite is cmake based, you need to realize how cmake searches for wx"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1486595686, "creation_date": 1486595686, "answer_id": 42125416, "question_id": 42125149, "link": "https://stackoverflow.com/questions/42125149/include-files-in-linux/42125416#42125416", "title": "include files in Linux", "body": "<p>If you look into <a href=\"https://github.com/eranif/codelite/blob/master/CMakeLists.txt\" rel=\"nofollow noreferrer\">CMakeLists.txt</a> file there is a clue there:</p>\n\n<blockquote>\n  <p>-DWITH_WXPATH=                   // Specify a particular wxWidgets build to use. The format must be /path/to/different_wx-config/directory/</p>\n</blockquote>\n\n<p>so rerun <code>cmake</code> with flags you used before and add <code>-DWITH_WXPATH=/home/moving2/sdk/wxsqlite3</code> then run <code>make</code> again</p>\n"}], "owner": {"reputation": 308, "user_id": 6556913, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1808142782742050/picture?type=large", "display_name": "Kyle Sweet", "link": "https://stackoverflow.com/users/6556913/kyle-sweet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486597808, "creation_date": 1486594242, "question_id": 42125149, "link": "https://stackoverflow.com/questions/42125149/include-files-in-linux", "title": "include files in Linux", "body": "<p>I'm not good in Linux.  I'm trying to build CodeLite from source.  The directions on CodeLite's web site (<a href=\"http://codelite.org/Developers/Linux\" rel=\"nofollow noreferrer\">here</a>) are insufficient for me to perform the build.  I think I am just lacking knowledge of the build system in Linux. The build step I am at is <code>make -j4</code>.  The error I am currently facing is:</p>\n\n<pre><code>fatal error: wx/wxsqlite3.h No such file or directory\n</code></pre>\n\n<p>I have found that file on my system at </p>\n\n<pre><code>/home/moving2/sdk/wxsqlite3/include/wx/wxsqlite3.h\n</code></pre>\n\n<p>The best guess I have is that the include path needs to be added in my environment?  So I have tried adding this to the <code>PATH</code> string in my <code>environment</code> file located in <code>/etc/</code> but I get the same error.  How do I get the compiler to look there for my include file?</p>\n"}, {"tags": ["c", "sockets", "udp", "recvfrom"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5666603, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6f3750c35bca99d2389b712f154c1e7?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5666603/matt"}, "edited": false, "score": 0, "creation_date": 1486595638, "post_id": 42125355, "comment_id": 71418905, "body": "Thanks for the memory allocation tips, but this does not solve my problem."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 83, "user_id": 5666603, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6f3750c35bca99d2389b712f154c1e7?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5666603/matt"}, "edited": false, "score": 1, "creation_date": 1486595689, "post_id": 42125355, "comment_id": 71418923, "body": "@Matt Yes it does. If it doesn&#39;t, you did not fix your code properly and still have some <code>sizeof(fromSockAddrIn)</code> in there."}, {"owner": {"reputation": 83, "user_id": 5666603, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6f3750c35bca99d2389b712f154c1e7?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5666603/matt"}, "edited": false, "score": 0, "creation_date": 1486596242, "post_id": 42125355, "comment_id": 71419100, "body": "Nevermind, I was wrong and you are correct sir.  Thank you very much. I did miss changing one of the sizeof(fromSockAddrIn)."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 2, "last_activity_date": 1486595332, "creation_date": 1486595332, "answer_id": 42125355, "question_id": 42125135, "link": "https://stackoverflow.com/questions/42125135/why-does-recvfrom-store-an-ip-address-of-0-0-0-0-on-udp-message/42125355#42125355", "title": "Why does recvfrom store an ip address of 0.0.0.0 on UDP message?", "body": "<p>Your use of <code>sizeof(fromSockAddrIn)</code> is wrong everywhere in this code</p>\n\n<pre><code>struct sockaddr_in *fromSockAddrIn = calloc(1, sizeof(fromSockAddrIn));\n</code></pre>\n\n<p>This just allocates room for a pointer. You need to get the size of a <code>struct sockardd_in</code>, so do</p>\n\n<pre><code>struct sockaddr_in *fromSockAddrIn = calloc(1, sizeof(*fromSockAddrIn));\n</code></pre>\n\n<p>Similar when you calculate <code>fromLen = sizeof(fromSockAddrIn);</code>, that should be <code>fromLen = sizeof(*fromSockAddrIn);</code> </p>\n\n<p>It seems you shouldn't need to dynamically allocate your <code>fromSockAddrIn</code> variable. If you just declare it as <code>struct sockaddr_in fromSockAddrIn;</code>, you can use <code>sizeof(mySockAddrIn)</code> though.</p>\n"}], "owner": {"reputation": 83, "user_id": 5666603, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a6f3750c35bca99d2389b712f154c1e7?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5666603/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1208, "favorite_count": 0, "accepted_answer_id": 42125355, "answer_count": 1, "score": -2, "last_activity_date": 1486596679, "creation_date": 1486594158, "last_edit_date": 1486596679, "question_id": 42125135, "link": "https://stackoverflow.com/questions/42125135/why-does-recvfrom-store-an-ip-address-of-0-0-0-0-on-udp-message", "title": "Why does recvfrom store an ip address of 0.0.0.0 on UDP message?", "body": "<p>I am reading the stored ip address of 0.0.0.0 in the 'from' argument of recvfrom() and I am not sure why. The message comes through just fine and there is some information stored in 'fromSockAddrIn'.  </p>\n\n<p>code:</p>\n\n<pre><code>int UDPSock = 0;                    //response from creating sock\nint bindRes = 0;                    //response from binding\nuint8_t *errCount = calloc(1, sizeof(uint8_t*));    //allocate memory for counting errors\nsize_t recvBytes = 0;               //n of bytes received from 'recvfrom'\nvoid * buff[MAX_MSG_SIZE] = {0};    //message storage from 'recvfrom'\nsize_t len = sizeof(buff);          //size of buffer\nint afFamily = AF_INET;             \nchar fromIp[INET_ADDRSTRLEN] = {0};\n\nstruct sockaddr_in mySockAddrIn;                //Socket address, internet style\nmemset(&amp;mySockAddrIn, 0, sizeof(mySockAddrIn)); //allocate memory for socket address\nmySockAddrIn.sin_family = afFamily;             //save address family\nmySockAddrIn.sin_port = htons(8004);            //convert numeric port number to network byte-order\n\nstruct sockaddr_in *fromSockAddrIn = calloc(1, sizeof(fromSockAddrIn)); //Socket address, Internet style\nsocklen_t fromLen = sizeof(fromSockAddrIn);                             //get size of socket address\n\n*errCount = 0;\ndo{         //get a descripter referencing the socket while checking for errors\n    UDPSock = socket(afFamily, SOCK_DGRAM, IPPROTO_UDP);\n    Check_Print_Error(UDPSock, __func__, \"socket\", errCount);\n}while(UDPSock == -1);\n\n*errCount = 0;\ndo{         //Bind while checking for errors\n    bindRes = bind(UDPSock, (struct sockaddr *) &amp;mySockAddrIn, sizeof(mySockAddrIn));\n    Check_Print_Error(bindRes, __func__, \"bind\", errCount);\n}while(bindRes == -1);\n\ndo{         //block until a message is received while checking for errors\n    fromLen = sizeof(fromSockAddrIn);\n    recvBytes = recvfrom(UDPSock, buff, len, 0,(struct sockaddr *) fromSockAddrIn, &amp;fromLen);\n    Check_Print_Error(recvBytes, __func__, \"recvfrom\", errCount);\n    printf(\"received %d bytes on UDP: %s \", recvBytes, buff);\n\n    inet_ntop(afFamily, &amp;fromSockAddrIn-&gt;sin_addr, fromIp, sizeof(fromIp));\n    printf(\"from ip: %s \\n\", fromIp);\n}while(recvBytes &gt; 0);\n</code></pre>\n\n<p>Check_Print_Error:</p>\n\n<pre><code>void Check_Print_Error(int errNum, const char *func1, char *func2, uint8_t *errCount){\nif(errNum == -1){\n    errCount += 1;\n    fprintf(stderr, \"%s, %s error: (%d) %s \\n\", func1, func2, errno, strerror(errno));\n}\nif(*errCount &gt;= 10){\n    fprintf(stderr, \"%s tried %s too many times (%u)\\nExiting...\", func1, func2, *errCount);\n    fflush(stdout);\n    fflush(stderr);\n    exit(EXIT_FAILURE);\n}\n\nreturn;\n}\n</code></pre>\n\n<p>python program to send message:</p>\n\n<pre><code>import socket\nimport time\ntoIPAddr = \"192.168.202.128\"\nport = 8004\nmessage = \"ping from python\"\n\nsock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\ntoAddr = (toIPAddr, port)\nprint \"toAddr:\", toAddr\n\nfor x in range(0,6):\n    print \"sending...'\",message,\"' size of\", len(message)\n    sock.sendto(message , toAddr)\n    time.sleep(1)\n</code></pre>\n\n<p>my output:</p>\n\n<pre><code>received 16 bytes on UDP: ping from python from ip: 0.0.0.0 \n</code></pre>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c", "file", "aes", "mmap"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1486593831, "post_id": 42125018, "comment_id": 71418139, "body": "Fyi, You&#39;re <code>iv</code> will probably be updated during the encryption process, or I should say, it <i>would</i> be updated. But you&#39;re force-casting a non-const pointer out of read-only const data. When the encryptor attempts to perform that update, it won&#39;t end well. Casting rarely fixes <i>anything</i>, far more often than not, using it as a &quot;fix&quot; ignores an underlying flaw in the code."}, {"owner": {"reputation": 7022, "user_id": 7659995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZH7M.png?s=128&g=1", "display_name": "MD XF", "link": "https://stackoverflow.com/users/7659995/md-xf"}, "edited": false, "score": 1, "creation_date": 1486593990, "post_id": 42125018, "comment_id": 71418206, "body": "You should look into <a href=\"http://prohackr112.tk/guide/coding/proper-c-formatting#general\" rel=\"nofollow noreferrer\">proper C formatting</a>. Or learn how to <a href=\"//prohackr112.tk/guide/coding/proper-c-obfuscation\" rel=\"nofollow noreferrer\">thoroughly obfuscate your code</a>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1486594000, "post_id": 42125018, "comment_id": 71418211, "body": "<code>fd</code> is opening as read-only, that&#39;s the file you&#39;re <code>mmap</code>ing, then you&#39;re attempting to <code>memcpy</code> into your <code>memblock</code> .. perhaps you have the arguments of <code>memcpy</code> in the wrong order? Don&#39;t believe you can <code>memcpy</code> into a <code>FILE*</code> anyway,, try <code>fwrite</code> instead."}, {"owner": {"reputation": 37, "user_id": 7476469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d419211216b9ada6365e6818a31f48f3?s=128&d=identicon&r=PG&f=1", "display_name": "Amed", "link": "https://stackoverflow.com/users/7476469/amed"}, "edited": false, "score": 0, "creation_date": 1486594647, "post_id": 42125018, "comment_id": 71418499, "body": "iv is only an initialization vector used in the first round by AES, and used only once. I edited the code to replace memcpy by fwrite and still getting segmentation fault, I think the problem comes from the mmap function arguments"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1486594702, "post_id": 42125018, "comment_id": 71418528, "body": "Please add all the necessary includes, there are a lot of them, and in general make it so the code compiles (for example, what is <code>ciphertext</code>?) Turn on warnings, usually <code>-Wall</code>, and fix all of them ESPECIALLY in cryptographic code. Then see if you&#39;re still having a problem."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1486600608, "post_id": 42125018, "comment_id": 71420545, "body": "you&#39;re also not checking return values of any of these system calls, any failures in system calls is also a suspect."}], "answers": [{"tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 1, "last_activity_date": 1486594551, "creation_date": 1486594551, "answer_id": 42125207, "question_id": 42125018, "link": "https://stackoverflow.com/questions/42125018/segmentation-fault-after-mapping-a-file-to-memory/42125207#42125207", "title": "Segmentation fault after mapping a file to memory", "body": "<p>As yano mentioned in the comments, your error is here:</p>\n\n<pre><code> memcpy(outFile, ciphertext, sb.st_size);\n</code></pre>\n\n<p>You're trying to memcpy to a <code>FILE *</code> which is completely wrong. That doesn't do at all what you expect. You're overwriting the private internals of the <code>FILE</code> structure to which <code>outFile</code> points.</p>\n\n<p>You should instead operate on a buffer and use <code>fwrite</code> to write to the file.</p>\n\n<p>I suggest you get familiar with basic file I/O operations using <code>f...</code> functions before digging into <code>mmap</code> and encryption.</p>\n"}], "owner": {"reputation": 37, "user_id": 7476469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d419211216b9ada6365e6818a31f48f3?s=128&d=identicon&r=PG&f=1", "display_name": "Amed", "link": "https://stackoverflow.com/users/7476469/amed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 42125207, "answer_count": 1, "score": -3, "last_activity_date": 1486594551, "creation_date": 1486593631, "last_edit_date": 1486594541, "question_id": 42125018, "link": "https://stackoverflow.com/questions/42125018/segmentation-fault-after-mapping-a-file-to-memory", "title": "Segmentation fault after mapping a file to memory", "body": "<p>I am trying to \"mmap\" a binary file in order to encrypt it using AES then write the encrypted data to another file(outFile) using the following code. I tried to modify the flags for both functions mmap() and open() but I always get segmentation fault when I run the executable.</p>\n\n<pre><code>int main (void)\n{\n    FILE *outFile; //The output file (encrypted)\n\n    /* A 256 bit key */\n    unsigned char *key = (unsigned char *)\"01234567890123456789012345678901\";\n\n    /* A 128 bit IV */\n    unsigned char *iv = (unsigned char *)\"01234567890123456\";\n\n    int fd;\n    struct stat sb;\n    void * memblock;\n\n    fd = open(\"result0.jpg\",O_RDONLY);\n\n    outFile=fopen(\"result0enc.jpg\",\"wb\");\n\n    fstat(fd, &amp;sb);\n    printf(\"Size: %lu\\n\", sb.st_size);\n    unsigned char decryptedtext[sb.st_size];\n\n    int decryptedtext_len, ciphertext_len;\n\n    /* Initialise the library */\n    ERR_load_crypto_strings();\n    OpenSSL_add_all_algorithms();\n    OPENSSL_config(NULL);\n\n    memblock = mmap(NULL, sb.st_size,PROT_READ, MAP_SHARED, fd, 0);\n    if (memblock == MAP_FAILED) {\n        close(fd);\n        perror(\"Error mmapping the file\");\n        exit(EXIT_FAILURE);\n    }\n    ciphertext_len = encrypt((unsigned char *)memblock,     sb.st_size,key,iv,ciphertext);\n   fwrite( ciphertext,1, sb.st_size,outFile);\n\n\n    if (munmap(memblock, sb.st_size) == -1) {\n        perror(\"Error un-mmapping the file\");\n        /* Decide here whether to close(fd) and exit() or not. Depends... */\n    }\n    close(fd);\n    fclose(outFile);\n\n    EVP_cleanup();\n    ERR_free_strings();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "c", "directed-graph", "markov-chains"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486592918, "post_id": 42124704, "comment_id": 71417733, "body": "You avoid infinite loops by blocking a node already visited. Nothing nasty about that at all, whether you are using a recursive solution or something like Dijkstra&#39;s algorithm."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486593161, "post_id": 42124704, "comment_id": 71417846, "body": "@WeatherVane Are you saying that the eight different paths I listed are already the final result? I believe having infinite loops is actually allowed, since it ends up being sort of a geometric series in the loop traversal probability (in simplest case of 1 loop), which converges to a finite number. My trouble is when there are many loops and several intersecting. Then I don&#39;t see how to generalize the geometric series."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486593386, "post_id": 42124704, "comment_id": 71417963, "body": "You asked how to remove cycles."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486593464, "post_id": 42124704, "comment_id": 71417984, "body": "@WeatherVane Yes, I&#39;d like to remove cycles and replace them with altered probabilities at the tree edges."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486593539, "post_id": 42124704, "comment_id": 71418013, "body": "The subgraph without loops is called &quot;spanning tree&quot;. Google from here."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 3, "creation_date": 1486593913, "post_id": 42124704, "comment_id": 71418170, "body": "He doesn&#39;t want simple cycle removal, he wants to evaluate the asymptotic probability of arriving at each end node, given there is an infinite set of cyclic paths through the graph."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1486593950, "post_id": 42124704, "comment_id": 71418187, "body": "@ChristopherOicles Yes! Thank you. That is my question."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1486648576, "post_id": 42124704, "comment_id": 71443322, "body": "You are describing graphs of certain kinds of <a href=\"https://en.wikipedia.org/wiki/Markov_chain\" rel=\"nofollow noreferrer\">Markov chains</a>.  I&#39;ve added SO&#39;s tag for that, which might draw attention from people better-suited to answer than I am."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487134405, "post_id": 42124704, "comment_id": 71640727, "body": "@FauChristian when I asked the question, I already solved the problems you mentioned and were at the stage of dealing with loops (As you can see, the spanning tree paths, as well as the cycles are already found and provided for the example in the question). The probabilistic analysis is summarized in John Bollingers answer. If you find that trivial, then I&#39;m impressed. For me it was not easy, but I got it to work eventually."}], "answers": [{"tags": [], "owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "is_accepted": false, "score": 1, "last_activity_date": 1486655009, "last_edit_date": 1486655009, "creation_date": 1486654311, "answer_id": 42140717, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/42140717#42140717", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>I understand this as the following problem:</p>\n\n<p>Given an initial distribution to be on each node as a vector b and a Matrix A that stores the probability to jump from node i to node j in each time step, somewhat resembling an adjacency matrix.</p>\n\n<p>Then the distribution b_1 after one time step is A x b. The distribution b_2 after two time steps is A x b_1. Likewise, the distribution b_n is A^n x b.</p>\n\n<p>For an approximation of b_infinite, we can do the following:</p>\n\n<pre><code>Vector final_probability(Matrix A, Vector b,\n    Function Vector x Vector -&gt; Scalar distance, Scalar threshold){\n    b_old = b\n    b_current = A x b\n    while(distance(b_old,b_current) &lt; threshold){\n        b_old = b_current\n        b_current = A x b_current\n    }\n    return b_current\n}\n</code></pre>\n\n<p>(I used mathematical variable names for convencience)</p>\n\n<p>In other words, we assume that the sequence of distributions converges nicely after the given threshold. Might not hold true, but will usually work.</p>\n\n<p>You might want to add a maximal amount of iterations to that.</p>\n\n<p>Euclidean distance should work well as distance.</p>\n\n<p>(This uses the concept of a <a href=\"https://en.wikipedia.org/wiki/Markov_chain\" rel=\"nofollow noreferrer\">Markov Chain</a> but is more of a pragmatical solution)</p>\n"}, {"comments": [{"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1486655885, "post_id": 42140741, "comment_id": 71448710, "body": "I believe memorization will make it almost linear (polynomial for sure). You are awesome! Thank you."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 1, "creation_date": 1487194708, "post_id": 42140741, "comment_id": 71678726, "body": "@FauChristian, what the question asks for is &quot;a <b>general algorithm</b> to find the probabilities to arrive at each of the final nodes,&quot; (emphasis added) and this answer provides two.  If you do not consider those to be hints for implementation then hints for implementation are indeed <i>not</i> what the question asks for.  Certainly the OP seems entirely satisfied that this answer responds to the question."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487198637, "post_id": 42140741, "comment_id": 71680666, "body": "This answer completely disassembles the problem. Nothing left to add. Just take it and implement it literally and it will work."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487425302, "post_id": 42140741, "comment_id": 71785332, "body": "@FauChristian, whether or not you accept that the conclusions presented satisfy the definition of an &quot;algorithm&quot;, one of the advantages of developing it in the way I did is that the logical process by which the conclusions are reached is crystal clear.  I assert that the approach accommodates cycle overlap just fine.  If you disagree, then surely you can show where a dependency on non-overlap enters the derivation."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487462838, "post_id": 42140741, "comment_id": 71797537, "body": "@FauChristian, (1) there are no dropped terms in the derivation for which any &quot;correction&quot; would be required.  The infinite series is reduced to a sum of two terms by use of the recurrence relation inherent in it.  (2) The presence or absence of vertex i in S(i,G) is irrelevant because at that point we are computing paths in subgraph X(G,i).  That graph contains all the vertices of G, but no paths from (or through) i to any other vertex.  I described it in terms of removing edges outbound from i, but if you prefer, the Markov property is retained by replacing them all with one self edge."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487466248, "post_id": 42140741, "comment_id": 71798298, "body": "@FauChristian, (1) yes.  The series has form P = p0 + p0 * q + p0 * q^2 + p0 * q^3 + ....  If we subtract p0 from each side and factor out a q, we get P - p0 = q * (p0 + p0 * q + p0 * q^2 + ...).  The infinite series in the parentheses is the <i>same one</i> we started with, so we know its value: P.  Therefore we get P - p0 = q * P.  No terms are dropped.  No correction is required."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487466817, "post_id": 42140741, "comment_id": 71798406, "body": "@FauChristian, (2) to the extent that any further proof is required, it is summed up in the observations that X(G, i) contains no paths from any of the S(i, G) to f that are not also in G; that all paths from i to f in G that do not revisit i consist of the union edge from i to an element of S(i, G) with a path in X(G, i); and that all edges G and X(i, G) have in common have the same probability in each.  It&#39;s just a formalization of looking at all the same paths as we were looking at in G, starting at the immediate successors of i."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487466947, "post_id": 42140741, "comment_id": 71798437, "body": "@FauChristian, in any case, you still have yet to substantiate your claim that this approach fails to handle overlapping cycles."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487530278, "post_id": 42140741, "comment_id": 71815249, "body": "@FauChristian, you having accepted my finite formula for Pr(f|i,G), your remaining objection seems to be to my last formula, giving Pr(Cif(0)|G) as a finite sum.  But this formula follows directly from the definitions of the terms on the left-hand side.  It is as I said, the sum on the right is over <i>all</i> the paths in Cif(0) -- including those that contain cycles.  The point you seem to be stuck on is already accounted for by (earlier) using the recurrence to reduce the infinite sum to a finite one."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487600011, "post_id": 42140741, "comment_id": 71844859, "body": "@FauChristian, I have indeed been reading your comments carefully, but I nevertheless am having difficulty seeing where your objection lodges.  In my view, reducing the problem to one over a subgraph is justified by the fact that the set of paths to be explored in the parent graph and the set of paths to be explored in the subgraph are identical.  It&#39;s simply a reorganization of terms.  I have asserted this already, but you seem to have ignored or rejected it without explanation."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487693168, "post_id": 42140741, "comment_id": 71894165, "body": "@FauChristian There is really no point in a lengthy discussion since, as I already pointed out, a direct implementation of the steps John Bollinger suggests leads to the exact solution. One criterion to verify this is the fact that the resulting overall probabilities to arrive at final nodes properly sum up to 1. This is a highly non-trivial check, considering that various loops with several infinite summations were taken into account. Also, this might interest you: it describes the infinite summations happening here in more detail <a href=\"https://en.wikipedia.org/wiki/Geometric_series\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Geometric_series</a>"}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487705808, "post_id": 42140741, "comment_id": 71901848, "body": "@FauChristian actually, I wrote a script that generates random adjacency matrices <code>M</code> in various sizes (up to 12 nodes) and tested John Bollingers&#39; algorithm on thousands of them. In all cases the asymptotic final node probabilities sum up to 1. Besides, one can check numerically that matrix multiplication <code>M^n</code> for large <code>n</code> makes the component <code>M[1,i]</code> (transition <code>node 1-&gt; some final node i</code>) approach the analytically obtained value. That&#39;s further evidence in each case. It would be great to compare to other treatments. The fact that they can&#39;t be found makes this answer even more valuable!"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "edited": false, "score": 0, "creation_date": 1487779155, "post_id": 42140741, "comment_id": 71939894, "body": "@FauChristian, the problem here is that it was never my intention to provide a rigorous proof, but only an <i>overview</i> of a proof sufficient to explain where the conclusion comes from.  I confess that the primary reason I have continued the discussion is my irritation at what seem to me to be unjustified assertions that the logic presented and therefore the conclusion are <i>incorrect</i>.  Your patronizing tone contributes to that irritation.  I am certainly capable of making mistakes, but at this point, if you still maintain that I have made one here then I ask you to <i>prove</i> it."}, {"owner": {"reputation": 1896, "user_id": 381281, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MfrW3.png?s=128&g=1", "display_name": "hfs", "link": "https://stackoverflow.com/users/381281/hfs"}, "edited": false, "score": 0, "creation_date": 1609232879, "post_id": 42140741, "comment_id": 115782837, "body": "This should be published as paper! I had the same problem and difficulties to find anything in the Markov chain literature or lecture notes, especially when cycles overlap. The solution is derived beautifully and straightforward to implement in a short recursive function."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 5, "last_activity_date": 1487461217, "last_edit_date": 1487461217, "creation_date": 1486654378, "answer_id": 42140741, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/42140741#42140741", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>I'm not expert in the area of Markov chains, and although I think it's likely that algorithms are known for the kind of problem you present, I'm having difficulty finding them.</p>\n\n<p>If no help comes from that direction, then you can consider rolling your own.  I see at least two different approaches here:</p>\n\n<ol>\n<li>Simulation.</li>\n</ol>\n\n<p>Examine how the state of the system evolves over time by starting with the system in state 1 at 100% probability, and performing many iterations in which you apply your transition probabilities to compute the probabilities of the state obtained after taking a step.  If at least one final (\"absorbing\") node can be reached (at non-zero probability) from every node, then over enough steps, the probability that the system is in anything other than a final state will decrease asymptotically toward zero.  You can estimate the probability that the system ends in final state S as the probability that it is in state S after <em>n</em> steps, with an upper bound on the error in that estimate given by the probability that the system is in a non-final state after <em>n</em> steps.</p>\n\n<p>As a practical matter, this is the same is computing <strong>Tr</strong><sup><em>n</em></sup>, where <strong>Tr</strong> is your transition probability matrix, augmented with self-edges at 100% probability for all the final states.</p>\n\n<ol start=\"2\">\n<li>Exact computation.</li>\n</ol>\n\n<p>Consider a graph, G, such as you describe.  Given two vertices <em>i</em> and <em>f</em>, such that there is at least one path from <em>i</em> to <em>f</em>, and <em>f</em> has no outgoing edges other than self-edges, we can partition the paths from <em>i</em> to <em>f</em> into classes characterized by the number of times they revisit <em>i</em> prior to reaching <em>f</em>.  There may be an infinite number of such classes, which I will designate <strong><em>C</strong><sub>if</sub></em>(<em>n</em>), where <em>n</em> represents the number of times the paths in <strong><em>C</strong><sub>if</sub></em>(<em>n</em>) revisit node <em>i</em>.  In particular, <strong><em>C</strong><sub>ii</sub></em>(0) contains all the simple loops in G that contain <em>i</em> (<strong><em>clarification</strong>: as well as other paths</em>).</p>\n\n<p>The total probability of ending at node <em>f</em> given that the system traverses graph G starting at node <em>i</em> is given by</p>\n\n<p>Pr(<em>f</em>|<em>i</em>, G) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>if</sub></em>(1)|G) + Pr(<strong><em>C</strong><sub>if</sub></em>(2)|G) ...</p>\n\n<p>Now observe that if <em>n</em> > 0 then each path in <strong><em>C</strong><sub>if</sub></em>(<em>n</em>) has the form of a union of two paths <strong>c</strong> and <strong>t</strong>, where <strong>c</strong> belongs to <strong><em>C</strong><sub>ii</sub></em>(<em>n</em>-1) and <strong>t</strong> belongs to <strong><em>C</strong><sub>if</sub></em>(0).  That is, <strong>c</strong> is a path that starts at node <em>i</em> and ends at node <em>i</em>, passing through <em>i</em> <em>n</em>-1 times between, and <strong>t</strong> is a path from <em>i</em> to <em>f</em> that does not pass through <em>i</em> again.  We can use that to rewrite our probability formula:</p>\n\n<p>Pr(<em>f</em>|<em>i</em>,G) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G) * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(1)|G) * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + ...</p>\n\n<p>But note that every path in <strong><em>C</strong><sub>ii</sub></em>(<em>n</em>) is a composition of <em>n</em>+1 paths belonging to <strong><em>C</strong><sub>ii</sub></em>(0).  It follows that Pr(<strong><em>C</strong><sub>ii</sub></em>(<em>n</em>)|G) = Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G)<sup><em>n</em>+1</sup>, so we get</p>\n\n<p>Pr(<em>f</em>|<em>i</em>) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G) * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G)<sup>2</sup> * Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) + ...</p>\n\n<p>And now, a little algebra gives us</p>\n\n<p>Pr(<em>f</em>|<em>i</em>,G) - Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) = Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G) * Pr(<em>f</em>|<em>i</em>,G)</p>\n\n<p>, which we can solve for Pr(<em>f</em>|<em>i</em>,G) to get</p>\n\n<p>Pr(<em>f</em>|<em>i</em>,G) = Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) / (1 - Pr(<strong><em>C</strong><sub>ii</sub></em>(0)|G))</p>\n\n<p>We've thus reduced the problem to one in terms of paths that do not return to the starting node, except possibly as their end node.  These do not preclude paths that have loops that don't include the starting node, but we can we nevertheless rewrite this problem in terms of several instances of the original problem, computed on a subgraph of the original graph.</p>\n\n<p>In particular, let <strong>S</strong>(<em>i</em>, G) be the set of successors of vertex <em>i</em> in graph G -- that is, the set of vertices <em>s</em> such that there is an edge from <em>i</em> to <em>s</em> in G, and let X(G,<em>i</em>) be the subgraph of G formed by removing all edges that start at <em>i</em>.  Furthermore, let <em>p<sub>is</sub></em> be the probability associated with edge (<em>i</em>, <em>s</em>) in G.</p>\n\n<p>Pr(<strong><em>C</strong><sub>if</sub></em>(0)|G) = Sum over <em>s</em> in <strong>S</strong>(<em>i</em>, G) of <em>p<sub>is</sub></em> * Pr(<em>f</em>|<em>s</em>,X(G,<em>i</em>))</p>\n\n<p>In other words, the probability of reaching <em>f</em> from <em>i</em> through G without revisiting <em>i</em> in between is the sum over all successors of <em>i</em> of the product of the probability of reaching <em>s</em> from <em>i</em> in one step with the probability of reaching <em>f</em> from <em>s</em> through G without traversing any edges outbound from <em>i</em>.  That applies for all <em>f</em> in G, including <em>i</em>.</p>\n\n<p>Now observe that <strong>S</strong>(<em>i</em>, G) and all the <em>p<sub>is</sub></em> are knowns, and that the problem of computing Pr(<em>f</em>|<em>s</em>,X(G,<em>i</em>)) is a new, strictly smaller instance of the original problem.  Thus, this computation can be performed recursively, and such a recursion is guaranteed to terminate.  It may nevertheless take a long time if your graph is complex, and it looks like a naive implementation of this recursive approach would scale exponentially in the number of nodes.  There are ways you could speed the computation in exchange for higher memory usage (i.e. memoization).</p>\n\n<hr>\n\n<p>There are likely other possibilities as well.  For example, I'm suspicious that there may be a bottom-up dynamic programming approach to a solution, but I haven't been able to convince myself that loops in the graph don't present an insurmountable problem there.</p>\n"}, {"comments": [{"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487133823, "post_id": 42240603, "comment_id": 71640576, "body": "I ended up doing exact resummation for the loop traversals. The recursive algorithm with memorization runs very quickly for sizes of i.e. 10 state systems, even under very low resources. Did you test your code on the example in my question? Maybe we can compare if the final state probabilities we get agree."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487135082, "post_id": 42240603, "comment_id": 71640898, "body": "The <code>&#47;</code> is heuristic for division. Basically, the entries of that matrix are rational numbers. Each row adds up to 1 (so the probability to go to some other state (or stay at the original) is 100%). The rows with all zeros are final states (probability to leave them is 0%). Node id is the row number. (First row: id=0, second row: id=1 etc.) Correspondingly, column number is destination node id. When there is non-zero probability in a column, a transition to that node from the respective row (starting node) is possible."}, {"owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "edited": false, "score": 0, "creation_date": 1487198533, "post_id": 42240603, "comment_id": 71680623, "body": "Thank you! I will take a closer look."}], "tags": [], "owner": {"reputation": 2860, "user_id": 5410835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PCfZO.jpg?s=128&g=1", "display_name": "Douglas Daseeco", "link": "https://stackoverflow.com/users/5410835/douglas-daseeco"}, "is_accepted": false, "score": 6, "last_activity_date": 1487568714, "last_edit_date": 1487568714, "creation_date": 1487131864, "answer_id": 42240603, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/42240603#42240603", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p><strong>Problem Clarification</strong></p>\n\n<p>The input data is a set of m rows of n columns of probabilities, essentially an m by n matrix, where m = n = number of vertices on a directed graph.  Rows are edge origins and columns are edge destinations.  We will, on the bases of the mention of cycles in the question, that the graph is cyclic, that at least one cycle exists in the graph.</p>\n\n<p>Let's define the starting vertex as s.  Let's also define a terminal vertex as a vertex for which there are no exiting edges and the set of them as set T with size z.  Therefore we have z sets of routes from s to a vertex in T, and the set sizes may be infinite due to cycles <sup>1</sup>.  In such a scenario, one cannot conclude that a terminal vertex will be reached in an arbitrarily large number of steps.</p>\n\n<p>In the input data, probabilities for rows that correspond with vertices not in T are normalized to total to 1.0.  We shall assume the Markov property, that the probabilities at each vertex do not vary with time.  This precludes the use of probability to prioritize routes in a graph search <sup>2</sup>.</p>\n\n<p>Finite math texts sometimes name example problems similar to this question as <em>Drunken Random Walks</em> to underscore the fact that the walker forgets the past,\nreferring to the memory-free nature of Markovian chains.</p>\n\n<p><strong>Applying Probability to Routes</strong></p>\n\n<p>The probability of arriving at a terminal vertex can be expressed as an infinite series sum of products.</p>\n\n<blockquote>\n  <p>P<sub>t</sub> = lim <sub>s -> &infin;</sub> &Sigma; &prod; P<sub>i, j</sub>,</p>\n  \n  <p>where s is the step index, t is a terminal vertex index, i &isin; [1 .. m] and j &isin; [1 .. n]</p>\n</blockquote>\n\n<p><strong>Reduction</strong></p>\n\n<p>When two or more cycles intersect (sharing one or more vertices), analysis is complicated by an infinite set of patterns involving them.  It appears, after some analysis and review of <a href=\"http://www.columbia.edu/~ks20/stochastic-I/stochastic-I-MCII.pdf\" rel=\"noreferrer\">relevant academic work</a>, that arriving at an accurate set of terminal vertex arrival probabilities with today's mathematical tools may best be accomplished with a converging algorithm.</p>\n\n<p>A few initial reductions are possible.</p>\n\n<ol>\n<li><p>The first consideration is to enumerate the destination vertex, which is easy since the corresponding rows have probabilities of zero.</p></li>\n<li><p>The next consideration is to differentiate any further reductions from what the academic literature calls irreducible sub-graphs.  The below depth first algorithm remembers which vertices have already been visited while constructing a potential route, so it can be easily retrofitted to identify which vertices are involved in cycles.  However it is recommended to use existing well tested, peer reviewed graph libraries to identify and characterize sub-graphs as irreducible.</p></li>\n</ol>\n\n<p>Mathematical reduction of irreducible portions of the graph may or may not be plausible.  Consider starting vertex A and sole terminating vertex B in the graph represented as {A->C, C->A, A->D, D->A, C->D, D->C, C->B, D->B}.</p>\n\n<p>Although one can reduce the graph to probability relations absent of cycles through vertex A, the vertex A cannot be removed for further reduction without either modifying probabilities of vertices exiting C and D or allowing both totals of probabilities of edges exiting C and D to be less than 1.0.</p>\n\n<p><strong>Convergent Breadth First Traversal</strong></p>\n\n<p>A breadth first traversal that ignores revisiting and allows cycles can iterate step index s, not to some fixed s<sub>max</sub> but to some sufficiently stable and accurate point in a convergent trend.  This approach is especially called for if cycles overlap creating bifurcations in the simpler periodicity caused by a single cycle.</p>\n\n<blockquote>\n  <p>&Sigma; P<sub>s</sub><sup>&Delta; s</sup>.</p>\n</blockquote>\n\n<p>For the establishment of a reasonable convergence as s increases, one must determine the desired accuracy as a criteria for completing convergence algorithm and a metric for measuring accuracy by looking at longer term trends in results at all terminal vertices.  It may be important to provide a criteria where the sum of terminal vertex probabilities is close to unity in conjunction with the trend convergence metric, as both a sanity check and an accuracy criteria.  Practically, four convergence criteria may be necessary <sup>3</sup>.</p>\n\n<ol>\n<li>Per terminal vertex probability trend convergence delta</li>\n<li>Average probability trend convergence delta</li>\n<li>Convergence of total probability on unity</li>\n<li>Total number of steps (to cap depth for practical computing reasons)</li>\n</ol>\n\n<p>Even beyond these four, the program may need to contain a trap for an interrupt that permits the writing and subsequent examination of output after a long wait without the satisfying of all four above criteria.</p>\n\n<p><strong>An Example Cycle Resistant Depth First Algorithm</strong></p>\n\n<p>There are more efficient algorithms than the following one, but it is fairly comprehensible, it compiles without warning with C++ -Wall, and it produces the desired output for all finite and legitimate directed graphs and start and destination vertices possible <sup>4</sup>.  It is easy to load a matrix in the form given in the question using the addEdge method <sup>5</sup>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n\nclass DirectedGraph {\n\n    private:\n        int miNodes;\n        std::list&lt;int&gt; * mnpEdges;\n        bool * mpVisitedFlags;\n\n    private:\n        void initAlreadyVisited() {\n            for (int i = 0; i &lt; miNodes; ++ i)\n                mpVisitedFlags[i] = false;\n        }\n\n        void recurse(int iCurrent, int iDestination,\n               int route[], int index,\n               std::list&lt;std::list&lt;int&gt; *&gt; * pnai) {\n\n            mpVisitedFlags[iCurrent] = true;\n            route[index ++] = iCurrent;\n\n            if (iCurrent == iDestination) {\n                auto pni = new std::list&lt;int&gt;;\n                for (int i = 0; i &lt; index; ++ i)\n                    pni-&gt;push_back(route[i]);\n                pnai-&gt;push_back(pni);\n\n            } else {\n                auto it = mnpEdges[iCurrent].begin();\n                auto itBeyond = mnpEdges[iCurrent].end();\n                while (it != itBeyond) {\n                    if (! mpVisitedFlags[* it])\n                        recurse(* it, iDestination,\n                                route, index, pnai);\n                    ++ it;\n                }\n            }\n\n            -- index;\n            mpVisitedFlags[iCurrent] = false;\n        } \n\n    public:\n        DirectedGraph(int iNodes) {\n            miNodes = iNodes;\n            mnpEdges = new std::list&lt;int&gt;[iNodes];\n            mpVisitedFlags = new bool[iNodes];\n        }\n\n        ~DirectedGraph() {\n            delete mpVisitedFlags;\n        }\n\n        void addEdge(int u, int v) {\n            mnpEdges[u].push_back(v);\n        }\n\n        std::list&lt;std::list&lt;int&gt; *&gt; * findRoutes(int iStart,\n                int iDestination) {\n            initAlreadyVisited();\n            auto route = new int[miNodes];\n            auto pnpi = new std::list&lt;std::list&lt;int&gt; *&gt;();\n            recurse(iStart, iDestination, route, 0, pnpi);\n            delete route;\n            return pnpi;\n        }\n};\n\nint main() {\n\n    DirectedGraph dg(5);\n\n    dg.addEdge(0, 1);\n    dg.addEdge(0, 2);\n    dg.addEdge(0, 3);\n    dg.addEdge(1, 3);\n    dg.addEdge(1, 4);\n    dg.addEdge(2, 0);\n    dg.addEdge(2, 1);\n    dg.addEdge(4, 1);\n    dg.addEdge(4, 3);\n\n    int startingNode = 2;\n    int destinationNode = 3;\n\n    auto pnai = dg.findRoutes(startingNode, destinationNode);\n\n    std::cout\n            &lt;&lt; \"Unique routes from \"\n            &lt;&lt; startingNode\n            &lt;&lt; \" to \"\n            &lt;&lt; destinationNode\n            &lt;&lt; std::endl\n            &lt;&lt; std::endl;\n\n    bool bFirst;\n    std::list&lt;int&gt; * pi;\n    auto it = pnai-&gt;begin();\n    auto itBeyond = pnai-&gt;end();\n    std::list&lt;int&gt;::iterator itInner;\n    std::list&lt;int&gt;::iterator itInnerBeyond;\n    while (it != itBeyond) {\n        bFirst = true;\n        pi = * it ++;\n        itInner = pi-&gt;begin();\n        itInnerBeyond = pi-&gt;end();\n        while (itInner != itInnerBeyond) {\n            if (bFirst)\n                bFirst = false;\n            else\n                std::cout &lt;&lt; ' ';\n            std::cout &lt;&lt; (* itInner ++);\n        }\n        std::cout &lt;&lt; std::endl;\n        delete pi;\n    }\n\n    delete pnai;\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Notes</strong></p>\n\n<p>[1] Improperly handled cycles in a directed graph algorithm will hang in an infinite loop.  (Note the trivial case where the number of routes from A to B for the directed graph represented as {A->B, B->A} is infinity.)</p>\n\n<p>[2] Probabilities are sometimes used to reduce the CPU cycle cost of a search.  Probabilities, in that strategy, are input values for meta rules in a priority queue to reduce the computational challenge very tedious searches (even for a computer).  The early literature in production systems termed the exponential character of unguided large searches Combinatory Explosions.</p>\n\n<p>[3] It may be practically necessary to detect breadth first probability trend at each vertex and specify satisfactory convergence in terms of four criteria</p>\n\n<ol>\n<li>&Delta;(&Sigma;&prod;P)<sub>t</sub> &lt;= &Delta;<sub>max</sub> &forall; t</li>\n<li>&Sigma;<sub>t=0</sub><sup>T</sup> &Delta;(&Sigma;&prod;P)<sub>t</sub> / T &lt;= &Delta;<sub>ave</sub></li>\n<li>|&Sigma; &Sigma;&prod;P - 1| &lt;= u<sub>max</sub>, where u is the maximum allowable deviation from unity for the sum of final probabilities</li>\n<li>s &lt; S<sub>max</sub></li>\n</ol>\n\n<p>[4] Provided there are enough computing resources available to support the data structures and ample time to arrive at an answer for the given computing system speed.</p>\n\n<p>[5] You can load DirectedGraph dg(7) with the input data using two loops nested to iterate through the rows and columns enumerated in the question.  The body of the inner loop would simply be a conditional edge addition.</p>\n\n<pre><code>if (prob != 0) dg.addEdge(i, j);\n</code></pre>\n\n<p>Variable prob is <strong>P</strong> <sub>m,n</sub>. Route existence is only concerned with zero/nonzero status.</p>\n"}, {"tags": [], "owner": {"reputation": 15969, "user_id": 95, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/99fc91f87b0148b12d5a6a68f4b9cb3d?s=128&d=identicon&r=PG", "display_name": "Marek Grzenkowicz", "link": "https://stackoverflow.com/users/95/marek-grzenkowicz"}, "is_accepted": false, "score": 2, "last_activity_date": 1611738217, "last_edit_date": 1611738217, "creation_date": 1611431674, "answer_id": 65863744, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles/65863744#65863744", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>I found this question while researching directed cyclic graphs. The probability of reaching each of the final nodes can be calculated using <strong>absorbing Markov chains</strong>.</p>\n<p>The video <a href=\"https://www.youtube.com/watch?v=bTeKu7WdbT8\" rel=\"nofollow noreferrer\">Markov Chains - Part 7</a> (+ parts 8 and 9) explains absorbing states in Markov chains and the math behind it.</p>\n"}], "owner": {"reputation": 833, "user_id": 4114325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c712968bbf7a34f83ed38fef67a5ca22?s=128&d=identicon&r=PG", "display_name": "Kagaratsch", "link": "https://stackoverflow.com/users/4114325/kagaratsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1967, "favorite_count": 6, "accepted_answer_id": 42140741, "answer_count": 4, "score": 13, "last_activity_date": 1611738217, "creation_date": 1486592336, "last_edit_date": 1487696617, "question_id": 42124704, "link": "https://stackoverflow.com/questions/42124704/directed-probability-graph-algorithm-to-reduce-cycles", "title": "Directed probability graph - algorithm to reduce cycles?", "body": "<p>Consider a directed graph which is traversed from first node <code>1</code> to some final nodes (which have no more outgoing edges). Each edge in the graph has a probability associated with it. Summing up the probabilities to take each possible path towards all possible final nodes returns <code>1</code>. (Which means, we are guaranteed to arrive at one of the final nodes eventually.)</p>\n\n<p>The problem would be simple if loops in the graph would not exist. Unfortunately rather convoluted loops can arise in the graph, which can be traversed an infinite amount of times (probability decreases multiplicatively with each loop traversal, obviously). </p>\n\n<p>Is there a general algorithm to find the probabilities to arrive at each of the final nodes?</p>\n\n<p>A particularly nasty example:</p>\n\n<p>We can represent the edges as a matrix (probability to go from row (node) <code>x</code> to row (node) <code>y</code> is in the entry <code>(x,y)</code>)</p>\n\n<pre><code>{{0, 1/2, 0, 1/14, 1/14, 0, 5/14}, \n {0, 0, 1/9, 1/2, 0, 7/18, 0}, \n {1/8, 7/16, 0, 3/16, 1/8, 0, 1/8}, \n {0, 1, 0, 0, 0, 0, 0}, \n {0, 0, 0, 0, 0, 0, 0}, \n {0, 0, 0, 0, 0, 0, 0}, \n {0, 0, 0, 0, 0, 0, 0}}\n</code></pre>\n\n<p>Or as a directed graph:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gD8ah.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gD8ah.png\" alt=\"enter image description here\"></a></p>\n\n<p>The starting node <code>1</code> is blue, the final nodes <code>5,6,7</code> are green. All edges are labelled by the probability to traverse them when starting from the node where they originate.</p>\n\n<p>This has eight different paths from starting node <code>1</code> to the final nodes:</p>\n\n<pre><code>{{1/14, {1, 5}}, {5/14, {1, 7}}, {7/36, {1, 2, 6}}, \n {1/144, {1, 2, 3, 5}}, {1/144, {1, 2, 3, 7}}, \n {1/36, {1, 4, 2, 6}}, {1/1008, {1, 4, 2, 3, 5}}, {1/1008, {1, 4, 2, 3, 7}}}\n</code></pre>\n\n<p>(The notation for each path is {probability,sequence of nodes visited})</p>\n\n<p>And there are five distinct loops:</p>\n\n<pre><code>{{1/144, {2, 3, 1}}, {7/144, {3, 2}}, {1/2, {4, 2}}, \n{1/48, {3, 4, 2}}, {1/1008, {4, 2, 3, 1}}}\n</code></pre>\n\n<p>(Notation for loops is {probability to traverse loop once,sequence of nodes visited}).</p>\n\n<p>If only these cycles could be resolved to obtain an effectively tree like graph, the problem would be solved.</p>\n\n<p>Any hint on how to tackle this?</p>\n\n<p>I'm familiar with Java, C++ and C, so suggestions in these languages are preferred.</p>\n"}, {"tags": ["c", "valgrind", "mmap"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1486592540, "post_id": 42124680, "comment_id": 71417566, "body": "<code>this can be caused by executables with very large text, data or bss segments</code>. So does any of that apply to your situation or not?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1486592948, "post_id": 42124680, "comment_id": 71417743, "body": "Nothing in that message said <i>anything</i> about the amount of RAM on the box. It refers to your <i>program</i>, specifically it&#39;s text, data, or bss segments, none of which we know <i>anything</i> about, as we know nothing about your program."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1486595291, "post_id": 42124680, "comment_id": 71418785, "body": "500+ GB <i>RAM</i>? What beast of a machine is that? Or does that include virtual memory?"}, {"owner": {"reputation": 41, "user_id": 1050066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6c7656455dfb2995163975ffb904c4e3?s=128&d=identicon&r=PG", "display_name": "Fun with coding", "link": "https://stackoverflow.com/users/1050066/fun-with-coding"}, "edited": false, "score": 1, "creation_date": 1486623370, "post_id": 42124680, "comment_id": 71427261, "body": "Look the accepted answer of following link. <a href=\"http://stackoverflow.com/questions/4230829/valgrind-error-failed-in-ume-with-error-22\" title=\"valgrind error failed in ume with error 22\">stackoverflow.com/questions/4230829/&hellip;</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1486710419, "post_id": 42124680, "comment_id": 71472744, "body": "Roughly 6 GiB of BSS data (that&#39;s all bytes zero).  That probably fits the &#39;very large bss segment&#39; reason.  Can you not dynamically allocate that memory instead \u2014 it will evade the problem."}, {"owner": {"reputation": 81, "user_id": 3125730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f556f66cf7866bca230810283c85855c?s=128&d=identicon&r=PG&f=1", "display_name": "baraaorabi", "link": "https://stackoverflow.com/users/3125730/baraaorabi"}, "edited": false, "score": 0, "creation_date": 1486710565, "post_id": 42124680, "comment_id": 71472806, "body": "That will require some serious restructuring of the program. I mean since I have more than enough memory, shouldn&#39;t that just work? Could this be something with Valgrind only being able to address 4 GB of static memory address?"}, {"owner": {"reputation": 564, "user_id": 8535456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Slgm4.jpg?s=128&g=1", "display_name": "asuka", "link": "https://stackoverflow.com/users/8535456/asuka"}, "edited": false, "score": 0, "creation_date": 1613444845, "post_id": 42124680, "comment_id": 117071130, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/4230829/valgrind-error-failed-in-ume-with-error-22\">Valgrind Error: failed in UME with error 22</a>"}], "owner": {"reputation": 81, "user_id": 3125730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f556f66cf7866bca230810283c85855c?s=128&d=identicon&r=PG&f=1", "display_name": "baraaorabi", "link": "https://stackoverflow.com/users/3125730/baraaorabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4794, "favorite_count": 0, "answer_count": 0, "score": 7, "last_activity_date": 1486710181, "creation_date": 1486592223, "last_edit_date": 1486710181, "question_id": 42124680, "link": "https://stackoverflow.com/questions/42124680/valgrind-mmap-error-22", "title": "Valgrind mmap error 22", "body": "<p>I am trying to run a program on Valgrind. But I am getting this error:</p>\n\n<pre><code>valgrind: mmap(0x67d000, 1978638336) failed in UME with error 22 (Invalid argument).\nvalgrind: this can be caused by executables with very large text, data or bss segments.\n</code></pre>\n\n<p>I am unsure what the issue is. I know that I have plenty of memory (I am running on a server with 500+ GB of ram). Is there a way of making this work?</p>\n\n<p>Edit: Here are my program and machine details:</p>\n\n<p>So my machine (it is a server for research purposes) has this much RAM:</p>\n\n<pre><code>$ free -mt\n         total        used        free      shared  buff/cache   available\nMem:         515995        8750      162704          29      344540      506015\nSwap:        524277         762      523515\nTotal:      1040273        9513      686219\n</code></pre>\n\n<p>And the program (named Tardis) size info:</p>\n\n<pre><code>$ size tardis\n   text    data     bss     dec     hex filename\n509180    2920 6273605188      6274117288      175f76ea8       tardis\n</code></pre>\n"}, {"tags": ["c", "arrays", "file", "fgets", "strtok"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486591543, "post_id": 42124421, "comment_id": 71417098, "body": "Are you really not incrementing <code>i</code> at all or have you just left that out? If <code>i</code> really is 0 then I don&#39;t believe that <code>printf(&quot;%i\\n&quot;, nums[i])</code> will segfault. That is not possible. But the next line will definetely be an issue as it is totally invalid - you can&#39;t just call <code>printf</code> anway you like. Read the man page and check what parameters it takes. Use a debugger to find out exactly which line is segfaulting and examine the variable values."}, {"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 0, "creation_date": 1486591620, "post_id": 42124421, "comment_id": 71417138, "body": "what is the value of <code>i</code> at the bottom when you do: <code>printf(&quot;%i\\n&quot;, nums[i]);</code>?  If it&#39;s over 999 that could be a clue to the seg fault"}, {"owner": {"reputation": 187, "user_id": 6313136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cedecae2e616e9ae0394dea1edb8523e?s=128&d=identicon&r=PG&f=1", "display_name": "user6313136", "link": "https://stackoverflow.com/users/6313136/user6313136"}, "edited": false, "score": 0, "creation_date": 1486592891, "post_id": 42124421, "comment_id": 71417716, "body": "aaah yes i modified the code and accidently left out ++i. I&#39;m still working on figuring out the seg fault. Thanks for pointing that out"}], "answers": [{"tags": [], "owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1486592610, "last_edit_date": 1486592610, "creation_date": 1486592100, "answer_id": 42124651, "question_id": 42124421, "link": "https://stackoverflow.com/questions/42124421/parsing-a-text-file-of-integers-into-an-array/42124651#42124651", "title": "Parsing a text file of integers into an array", "body": "<p>You are not checking <code>argc</code> and derefencing <code>args[1]</code> and <code>args[2]</code>.</p>\n\n<p>You never use <code>number</code>.</p>\n\n<p>Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main( int argc, char * argv[] ) {\n   printf(\"Starting program\\n\");\n   if( argc &lt; 2 ) {\n      return 1;\n   }\n   FILE * fp = fopen( argv[1], \"r\");\n   if( fp == NULL ) {\n      perror( argv[1] );\n      return 1;\n   }\n   char int_array[1000];\n   if( fgets( int_array, 1000, fp )) {\n      int nums[1000];\n      int    i = 0; \n      char * token = strtok(int_array, \" \");\n      while( token ) {\n         nums[i++] = atoi(token);\n         token = strtok(NULL, \" \");\n      }\n      printf(\"0: %i\\n\", nums[0]);\n      printf(\"1: %i\\n\", nums[1]);\n      printf(\"%d: %i\\n\", i-1, nums[i-1]);\n   }\n   return 0;\n}\n</code></pre>\n\n<p>Execution:</p>\n\n<pre><code>aubin@Breizh-Atao ~/Dev/C $ gcc parsing.c -o parsing\naubin@Breizh-Atao ~/Dev/C $ echo 1 2 3 4 5 6 7 8 9 10 11 &gt;parsing.txt\naubin@Breizh-Atao ~/Dev/C $ ./parsing parsing.txt \nStarting program\n0: 1\n1: 2\n10: 11\naubin@Breizh-Atao ~/Dev/C $ \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 187, "user_id": 6313136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cedecae2e616e9ae0394dea1edb8523e?s=128&d=identicon&r=PG&f=1", "display_name": "user6313136", "link": "https://stackoverflow.com/users/6313136/user6313136"}, "edited": false, "score": 0, "creation_date": 1486595100, "post_id": 42124801, "comment_id": 71418703, "body": "Changing the use of token as you mentioned got the seg fault so stop. Thanks a lot. Do you mind explaining what the exact difference is from your implementation and mine?"}], "tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": true, "score": 3, "last_activity_date": 1486594457, "last_edit_date": 1486594457, "creation_date": 1486592774, "answer_id": 42124801, "question_id": 42124421, "link": "https://stackoverflow.com/questions/42124421/parsing-a-text-file-of-integers-into-an-array/42124801#42124801", "title": "Parsing a text file of integers into an array", "body": "<p>There are multiple problems in your code, the main issue is you test <code>token</code> <strong>before</strong> scanning the next token:</p>\n\n<pre><code>while (token != NULL) {\n    token = strtok(NULL, \" \");\n    nums[i] = atoi(token);\n}\n</code></pre>\n\n<p>You should instead do this:</p>\n\n<pre><code>while ((token = strtok(NULL, \" \")) != NULL) {\n    nums[i] = atoi(token);\n}\n</code></pre>\n\n<p>Other issues:</p>\n\n<ul>\n<li>You do not check if <code>argc &gt; 1</code> before accessing <code>argv[1]</code> in <code>strcpy(file_name, args[1]);</code>, potentially invoking undefined behavior.</li>\n<li>You copy the file name into a 100 byte array: if the command line argument is longer than 99 bytes, you are causing a buffer overflow. You do not need to copy the argument, just pass <code>argv[1]</code> to <code>fopen</code> or use a pointer: <code>char *filename = argv[1];</code></li>\n<li>You check if <code>fopen()</code> failed, but do not exit the function... <code>fgets()</code> has undefined behavior for a null stream pointer.</li>\n<li><code>strtok()</code> can return <code>NULL</code> even for the first call. Always check the return value before passing it to <code>atoi()</code>.</li>\n<li>You do not check if <code>i</code> becomes too large. You should stop reading the input file if <code>i</code> reaches <code>1000</code>.</li>\n<li>Passing the <code>nums</code> array to <code>printf</code> is incorrect: <code>printf(nums)</code> should not even compile, or at least generate meaningful warnings.</li>\n</ul>\n\n<p>Note that you do not need to use <code>strtok()</code> at all. <code>strtol()</code> can parse a number and update a pointer to point past the number.</p>\n\n<p>Here is how to use that:</p>\n\n<pre><code>#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]) {\n    printf(\"Starting program\\n\");\n    if (argc &lt; 2) {\n        fprintf(stderr, \"missing command line argument\\n\");\n        return 1;\n    }\n    FILE *fp = fopen(argv[1], \"r\");\n    if (fp == NULL) {\n        fprintf(stderr, \"cannot open %s: %s\\n\", argv[1], strerror(errno));\n        return 1;\n    }\n    char buf[1000];\n    int nums[1000];\n    int i = 0; \n\n    while (fgets(buf, sizeof buf, fp)) {\n        char *p = buf;\n        char *q;\n        for (; i &lt; 1000; i++) {\n            nums[i] = strtol(p, &amp;q, 0);\n            if (q == p) {\n                /* no more numbers */\n                break;\n            }\n            p = q;\n        }\n    }\n    fclose(fp);\n    for (int j = 0; j &lt; i; j++) {\n        printf(\"%d \", nums[j]);\n    }\n    printf(\"\\n\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 6313136, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cedecae2e616e9ae0394dea1edb8523e?s=128&d=identicon&r=PG&f=1", "display_name": "user6313136", "link": "https://stackoverflow.com/users/6313136/user6313136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 42124801, "answer_count": 2, "score": 2, "last_activity_date": 1486594457, "creation_date": 1486591066, "last_edit_date": 1486592695, "question_id": 42124421, "link": "https://stackoverflow.com/questions/42124421/parsing-a-text-file-of-integers-into-an-array", "title": "Parsing a text file of integers into an array", "body": "<p>I'm using <a href=\"http://man7.org/linux/man-pages/man3/strtok.3.html\" rel=\"nofollow noreferrer\">strtok()</a> to parse each integer and place it into <code>int nums[1000]</code>. The file will always follow the format of:</p>\n\n<p>the first line has the numbers for the array, each separated by spaces. No more than 10 numbers will be on the line. Nothing is in the file after the first line.</p>\n\n<pre><code>printf(\"Starting program\\n\");\nchar file_name[100];\nstrcpy(file_name, args[1]);\nchar number[100];\nstrcpy(number, args[2]);\nFILE *fp;\nfp = fopen(file_name, \"r\");\nif (fp == NULL) {\n    printf(\"Error opening file\\n\");\n}\nchar int_array[1000];//\nint nums[1000]; //storing the integers without spaces\nint i = 0; //for indexing the array to save the integers\nwhile (fgets(int_array, 1000, fp) != NULL) {\n    printf(\"%s\\n\", \"test\");\n    puts(int_array); // prints out `1 2 3 4 5...`\n    char *token;\n    token = strtok(int_array, \" \");\n    nums[i] = atoi(token);\n    while (token != NULL) {\n        token = strtok(NULL, \" \");\n        nums[i] = atoi(token);\n        //puts(token); Token gets printed out correctly.\n    }\n}\n\nprintf(\"%i\\n\", nums[i]); // this gives segmentation fault\nprintf(nums) // also gives seg fault\n</code></pre>\n\n<p>I cannot figure out why I am getting seg fault.</p>\n"}, {"tags": ["c", "global", "external", "extern"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1486592267, "post_id": 42124371, "comment_id": 71417442, "body": "Try compiling: <code>int x; int x; int x = 3; extern int x;</code>.  Even with very fussy options set for GCC, it compiles.  Move the <code>extern</code> line to the top and <code>clang -Weverything</code> accepts it.  The first two <code>int x;</code> are tentative definitions.  The <code>int x = 3;</code> is a non-tentative (definitive?) definition.  You couldn&#39;t repeat that, or use a different initializer.  If there was no definitive definition by the end of the file, the <code>int x;</code> would be converted into one."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486592389, "post_id": 42124371, "comment_id": 71417500, "body": "A variable declared at file scope with no storage-class specifier has the same storage class and linkage as one explictly declared <code>extern</code>.  That is, there&#39;s no distinction between the kind of variables you&#39;re calling &quot;extern&quot; and the kind you&#39;re calling &quot;global&quot;.  The presence or absence of <code>extern</code> can make a difference in other ways, though."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1486591501, "post_id": 42124454, "comment_id": 71417086, "body": "more typically the <code>extern</code> is in a header file"}], "tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 2, "last_activity_date": 1486591174, "creation_date": 1486591174, "answer_id": 42124454, "question_id": 42124371, "link": "https://stackoverflow.com/questions/42124371/extern-and-global-variables-with-the-same-name-in-c/42124454#42124454", "title": "extern and global variables with the same name in C", "body": "<p>\"extern\" means:<br> <em>\"this variable will come from some other place. It is not being declared here; this statement just provides notice that it is a valid name.\"</em></p>\n\n<p>So in essence this code is:</p>\n\n<pre><code>extern int x;\n// This is a valid name, but the variable will be defined \"externally\", eg, somewhere else.\n\n[...] \n\nint x=0;\n// OH!  Here is where the definition is.  Now we know where that \"extern\" variable came from.\n// And we know that it starts with value 0.\n</code></pre>\n\n<p>It is somewhat unusual for and <code>extern</code> and definition to appear in the same file.</p>\n\n<p>More typically, the definition is in one <code>.C</code> file, and the <code>extern</code> is in a different <code>.C</code> that will get linked together during the build process.</p>\n"}, {"tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 7, "last_activity_date": 1486591705, "last_edit_date": 1495535377, "creation_date": 1486591176, "answer_id": 42124455, "question_id": 42124371, "link": "https://stackoverflow.com/questions/42124371/extern-and-global-variables-with-the-same-name-in-c/42124455#42124455", "title": "extern and global variables with the same name in C", "body": "<p>They are not \"two\" variables. They are the <em>same</em>.</p>\n\n<pre><code>extern int x;\n</code></pre>\n\n<p>is a declaration of <code>x</code>.</p>\n\n<p>and </p>\n\n<pre><code>int x=0;\n</code></pre>\n\n<p>provides the definition for <code>x</code>. This is perfectly fine and valid.</p>\n\n<hr>\n\n<p>You can have multiple declarations like:</p>\n\n<pre><code>extern int x;\nextern int x;\n</code></pre>\n\n<p>too and it'll compile as well.</p>\n\n<p>Note when you are providing the multiple declarations for the same identifier, the rules are somewhat complex. See: <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.2.2\" rel=\"nofollow noreferrer\">6.2.2 Linkages of identifiers</a> for details.\nSee <a href=\"https://stackoverflow.com/q/17041571/4389800\">static declaration of m follows non-static declaration</a> for an example.</p>\n"}, {"tags": [], "owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "is_accepted": false, "score": 3, "last_activity_date": 1486591556, "last_edit_date": 1486591556, "creation_date": 1486591190, "answer_id": 42124457, "question_id": 42124371, "link": "https://stackoverflow.com/questions/42124371/extern-and-global-variables-with-the-same-name-in-c/42124457#42124457", "title": "extern and global variables with the same name in C", "body": "<p>Perfectly fine. \nThis</p>\n\n<pre><code>extern int x;\n</code></pre>\n\n<p>only declares the variable x of type int and extern explictly says, that it will be defined at an another location.</p>\n\n<p>In your case , a few lines below</p>\n\n<pre><code>int x = 0;\n</code></pre>\n\n<p>Here is a link for more info on extern -> <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/storage_duration</a></p>\n\n<blockquote>\n  <p><strong>The extern specifier is only allowed in the declarations of variables\n  and functions</strong> (except class members or function parameters). It\n  specifies external linkage, and does not technically affect storage\n  duration, but it cannot be used in a definition of an automatic\n  storage duration object, so all extern objects have static or thread\n  durations. <strong>In addition, a variable declaration that uses extern and\n  has no initializer is not a definition</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 778, "user_id": 6392523, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/730951b33b168e3112bae139bc811145?s=128&d=identicon&r=PG&f=1", "display_name": "ChikChak", "link": "https://stackoverflow.com/users/6392523/chikchak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1873, "favorite_count": 0, "accepted_answer_id": 42124455, "answer_count": 3, "score": 4, "last_activity_date": 1486591705, "creation_date": 1486590856, "question_id": 42124371, "link": "https://stackoverflow.com/questions/42124371/extern-and-global-variables-with-the-same-name-in-c", "title": "extern and global variables with the same name in C", "body": "<p>I'm trying to figure out what happens if in some program we'll have like that:</p>\n\n<pre><code>extern int x;\n\nvoid foo(){...}\nvoid bar(){...}\n\nvoid main(){\nfoo();\nbar();\n}\nint x=0;\n</code></pre>\n\n<p>So what is suppose to happen?Why is it allowed to have two such variables with the same name?are they different?</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486590877, "post_id": 42124341, "comment_id": 71416776, "body": "There are two ampersands missing"}, {"owner": {"reputation": 15, "user_id": 5771439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153812036066894/picture?type=large", "display_name": "Burton Feng", "link": "https://stackoverflow.com/users/5771439/burton-feng"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486591116, "post_id": 42124341, "comment_id": 71416888, "body": "@wilfplasser thank you!"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486591229, "post_id": 42124341, "comment_id": 71416946, "body": "<code>the code in a feof while loop</code> Don&#39;t do that. see: <a href=\"http://stackoverflow.com/q/5431941/905902\">stackoverflow.com/q/5431941/905902</a>"}, {"owner": {"reputation": 15, "user_id": 5771439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153812036066894/picture?type=large", "display_name": "Burton Feng", "link": "https://stackoverflow.com/users/5771439/burton-feng"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486591642, "post_id": 42124341, "comment_id": 71417158, "body": "@wildplasser Thanks for the heads up! Will stick to fscanf, was only using feof to try to figure out what was wrong."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5771439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153812036066894/picture?type=large", "display_name": "Burton Feng", "link": "https://stackoverflow.com/users/5771439/burton-feng"}, "edited": false, "score": 0, "creation_date": 1486591087, "post_id": 42124376, "comment_id": 71416875, "body": "Can&#39;t believe I missed that. Thank you!  I am used to java and keep forgetting the syntax. Will accept answer when it allows me to."}, {"owner": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1486591149, "post_id": 42124376, "comment_id": 71416907, "body": "To clarify, the name of a char array is roughly equivalent to the variable that holds the first address of the char array; but the name of an integer or float is roughly equivalent to the value of the integer or float.  This means you must explicitly indicate the address of the name of the integer or float, while you can use the shorthand name of the array without the &quot;address of&quot; operator."}, {"owner": {"reputation": 15, "user_id": 5771439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153812036066894/picture?type=large", "display_name": "Burton Feng", "link": "https://stackoverflow.com/users/5771439/burton-feng"}, "reply_to_user": {"reputation": 64564, "user_id": 302139, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1ea13e6d50c94ba30296c4e5326e1634?s=128&d=identicon&r=PG", "display_name": "Edwin Buck", "link": "https://stackoverflow.com/users/302139/edwin-buck"}, "edited": false, "score": 0, "creation_date": 1486591691, "post_id": 42124376, "comment_id": 71417174, "body": "@EdwinBuck Got it! Keep forgetting to do this, too used to java!"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1486591238, "last_edit_date": 1486591238, "creation_date": 1486590882, "answer_id": 42124376, "question_id": 42124341, "link": "https://stackoverflow.com/questions/42124341/fscanf-giving-a-segmentation-fault/42124376#42124376", "title": "Fscanf giving a segmentation fault", "body": "<p>You have to pass pointers to values instead of values to <code>fscanf</code> (note the <code>&amp;</code>-signs in <code>&amp;temp-&gt;id</code> and <code>&amp;temp-&gt;gpa</code>; the <code>char[]</code>-types <code>lname</code> and <code>fname</code> automatically decay to a pointer):</p>\n\n<pre><code>while(fscanf(file1, \"%s %s %d %f\", temp-&gt;fname, temp-&gt;lname, &amp;temp-&gt;id, &amp;temp-&gt;gpa) != EOF) {\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5771439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153812036066894/picture?type=large", "display_name": "Burton Feng", "link": "https://stackoverflow.com/users/5771439/burton-feng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 42124376, "answer_count": 1, "score": 0, "last_activity_date": 1486591238, "creation_date": 1486590729, "question_id": 42124341, "link": "https://stackoverflow.com/questions/42124341/fscanf-giving-a-segmentation-fault", "title": "Fscanf giving a segmentation fault", "body": "<p>I have spent a couple hours trying to figure out what was wrong with this code. I've tried using putting the code in a feof while loop, as well as taking the fscanf out of the loop so that it only runs once. These changes still provoke the segmentation fault, even though the data in the files are valid.</p>\n\n<pre><code>struct student *temp = (ident*) malloc (sizeof(ident));\nwhile(fscanf(file1, \"%s %s %d %f\", temp-&gt;fname, temp-&gt;lname, temp-&gt;id, temp-&gt;gpa) != EOF) {\n    if(head == NULL)\n        head = temp;\n    else {\n        struct student *traverse = head;\n        while(traverse-&gt;next != NULL)\n            traverse = traverse-&gt;next;\n        traverse-&gt;next = temp;\n        printf(\"added\");\n    }\n}\n</code></pre>\n\n<p>The following is the struct:</p>\n\n<pre><code>struct student{\nchar fname[256];\nchar lname[256];\nunsigned int id;\nfloat gpa;\nstruct student *next;\n};\n</code></pre>\n\n<p>An example of a line on the text file:</p>\n\n<p>john doe 1 3.6</p>\n\n<p>john smith 3 2.4</p>\n"}, {"tags": ["c", "linux", "double"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1486590840, "post_id": 42124233, "comment_id": 71416759, "body": "Put libraries (<code>-lm</code>) after source or object files (<code>toto.c</code>) for reliability.  What happens if you omit the <code>-lm</code> option?  It should fail to link, but...Have you looked at the assembler?  Does the compiler evaluate one of the function calls and leave the other to be evaluated at runtime?"}, {"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 0, "creation_date": 1486591576, "post_id": 42124233, "comment_id": 71417113, "body": "If you use any opt level (01, O2, O3 or Ofast) result will be the same. I have dissasembled it and I see why it does it. Now I&#39;m trying to explain why compiler does so \u2299\ufe4f\u2609"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486593401, "post_id": 42124233, "comment_id": 71417968, "body": "Do you get the same behaviour with <code>#undef cbrt</code> ?"}, {"owner": {"reputation": 3236, "user_id": 4294399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97f2d5c622f069ac28762c6a8250e93?s=128&d=identicon&r=PG", "display_name": "Calculuswhiz", "link": "https://stackoverflow.com/users/4294399/calculuswhiz"}, "edited": false, "score": 0, "creation_date": 1613051762, "post_id": 42124233, "comment_id": 116960530, "body": "Trying this on clang 7.0.1, you do in fact get the right behavior. <a href=\"https://tio.run/##XY3NDoIwEAbvPMUGY1ISIbYKF5Un8dIfCk3KYqBwMb66tYZorHucyTcrc2k5tt5vDEo7qwbOk1NmKLo6iZA1ImY9d92bJAYd9NwgyeCeQDg1zMI2gAIuUFYVO9D98fRrFhqMFKMjKLLV3MaQ0SQNKq9hW9BSXzHdLTT4aMo@U7KS7Pviv8TiEgv@4f1Tasvbyee2fwE\" title=\"C (clang) \u2013 Try It Online\" rel=\"nofollow noreferrer\">Try it online!</a>. Interesting."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486591826, "post_id": 42124546, "comment_id": 71417252, "body": "I confirm the same behavior, including the effect of optimization, on CentOS 7.3 (cc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-11)).  I furthermore found that <code>-fexcess-precision=standard</code> does not affect the results."}, {"owner": {"reputation": 3236, "user_id": 4294399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d97f2d5c622f069ac28762c6a8250e93?s=128&d=identicon&r=PG", "display_name": "Calculuswhiz", "link": "https://stackoverflow.com/users/4294399/calculuswhiz"}, "edited": false, "score": 0, "creation_date": 1615407996, "post_id": 42124546, "comment_id": 117684548, "body": "As of GCC 10.2, this is still not fixed: <a href=\"https://godbolt.org/z/PPvfc6\" rel=\"nofollow noreferrer\">godbolt.org/z/PPvfc6</a>"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1615431887, "post_id": 42124546, "comment_id": 117691031, "body": "I think this is actually a long-standing issue, and there is a well-known bug for it, but I don&#39;t know where it is."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 4, "last_activity_date": 1486591600, "creation_date": 1486591600, "answer_id": 42124546, "question_id": 42124233, "link": "https://stackoverflow.com/questions/42124233/strange-cbrt-result-on-linux-in-c/42124546#42124546", "title": "Strange cbrt() result on linux in C", "body": "<p>Congratulations, this is a compiler bug.  The compiler is optimizing your code by evaluating one of the <code>cbrt</code> calls ahead of time, unfortunately, the compiler's version of <code>cbrt</code> is different from your version in libm.  You will also notice that passing <code>-O2</code> causes the <code>v2</code> result to be \"wrong\" as well (even though it's right, mathematically).</p>\n\n<p>I verified that the bug exists on my system</p>\n\n<blockquote>\n  <p>cc (Debian 6.3.0-5) 6.3.0 20170124</p>\n</blockquote>\n\n<p>This bug should be reported to the compiler developers (<a href=\"https://gcc.gnu.org/bugs/\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugs/</a>), but it's a good idea to search the bug repository first.</p>\n"}], "owner": {"reputation": 51, "user_id": 7536941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d93ff357a199e4a30f1d4aaefea673?s=128&d=identicon&r=PG&f=1", "display_name": "Benjish", "link": "https://stackoverflow.com/users/7536941/benjish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1486591600, "creation_date": 1486590308, "last_edit_date": 1486591575, "question_id": 42124233, "link": "https://stackoverflow.com/questions/42124233/strange-cbrt-result-on-linux-in-c", "title": "Strange cbrt() result on linux in C", "body": "<p>Why these two return value of the <a href=\"http://man7.org/linux/man-pages/man3/cbrt.3.html\" rel=\"nofollow noreferrer\">cbrt()</a> function are different ?</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n\nint main() {\n    double nb = 56623104;\n    double v1 = cbrt(nb);\n    printf(\"v1 -&gt; %.15f\\n\",v1);\n\n    double v2 = cbrt((double) 56623104);\n    printf(\"v2 -&gt; %.15f\\n\",v2);\n}\n</code></pre>\n\n<p>Compilation :<br></p>\n\n<blockquote>\n  <p>gcc toto.c -o toto -lm &amp;&amp; ./toto</p>\n</blockquote>\n\n<p>Result :<br></p>\n\n<blockquote>\n  <p>v1 -> 384.000000000000057<br>\n  v2 -> 384.000000000000000</p>\n</blockquote>\n"}, {"tags": ["c", "pointers", "linked-list", "doubly-linked-list"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1486590339, "post_id": 42124197, "comment_id": 71416509, "body": "This is called Undefined Behaviour. If a variable is uninitialized it can contain any (semi)random value. There is no point trying to understand exactly how it happened. The result is unpredictable and can change depending on the compiler, the compiler options, the surrounding code, the weather, etc."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486590373, "post_id": 42124197, "comment_id": 71416536, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/32132574/does-undefined-behavior-really-permit-anything-to-happen\">Does &quot;Undefined Behavior&quot; really permit *anything* to happen?</a>"}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486594507, "post_id": 42124197, "comment_id": 71418430, "body": "@kaylum, sure i understand that, but clearly it can&#39;t be a coincidence that it happens to point to the head of the list; if it were really random allocation, the probability would be incredibly small. So there must be a good reason why it&#39;s pointing at the head specifically, and I&#39;m sure that reason is traceable."}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486594716, "post_id": 42124197, "comment_id": 71418534, "body": "@kaylum, I think the question you linked as a duplicate is completely different. It&#39;s asking about the general case whereas my question is asking for a very specific case where the reason for the weird behavior should be traceable given how specific it is."}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486594972, "post_id": 42124197, "comment_id": 71418652, "body": "@kaylum, I would really appreciate if you could review your assessment of my question being a duplicate based on what I wrote. I think the questions are completely different and it&#39;s unfair to close mine."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486596416, "post_id": 42124197, "comment_id": 71419162, "body": "So you want us to define something that is Undefined Behaviour? No one can answer your exact question for you based on the info you have provided (besides being fruitless). It depends on what assembly your compiler generated. &quot;it can&#39;t be a coincidence&quot; - why not? Your <code>next</code> pointer is not explicitly set so the memory or register contains a value of what it was last used for - which is coincidentally the head pointer value. Of course if you looked at the assembly you will find out which exact instruction loaded that value. Is that forensic analysis really what you want to spend your time on?"}, {"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486596719, "post_id": 42124197, "comment_id": 71419265, "body": "@kaylum, I guess I was looking for an explanation along the lines of what you last said. It does kind of make sense that given no specific location to point to, the pointer would be initialized with the last memory address used by some register. Sorry for being pushy; I think I&#39;m realizing that this is as you said a lot more context and architecture dependent than I originally assumed. Maybe the reason is not as readily traceable as I thought; I was just dumbfounded when I saw that the newly created pointer was seemingly out of nowhere pointing to the head."}], "answers": [{"comments": [{"owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "edited": false, "score": 0, "creation_date": 1486598990, "post_id": 42125780, "comment_id": 71420079, "body": "Thank you so much for taking the time to write this answer, I really appreciate; there&#39;s a ton of helpful information for me in there. Just one thing I&#39;m not sure I understand: when you declare the Node struct, you repeat <code>Node</code> twice, as in <code>typedef struct Node {......} Node;</code>, but when you declare the LinkedList struct, you only say <code>typedef struct {.......} LinkedList;</code>. Is there a specific reason for that? What&#39;s the difference?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "edited": false, "score": 0, "creation_date": 1486600312, "post_id": 42125780, "comment_id": 71420461, "body": "<code>typedef &lt;type def or type name&gt; &lt;alias&gt;</code>. <code>struct Node</code> is a type name. <code>Node</code> is the alias. Nodes are self-referencial, but the struct definition happens <i>before</i> it&#39;s aliased. We can&#39;t use <code>Node</code> in the struct, it needs a name. <code>struct Node</code> is the name. The <code>LinkedList</code> struct isn&#39;t self-referencial, so there&#39;s no need to give it a name before aliasing it. There&#39;s no real harm in declaring <code>struct LinkedList</code>, but I don&#39;t because if people write <code>struct LinkedList</code> it breaks the encapsulation of <code>LinkedList</code> should there be a radical change to its internals later. Yes, this is practical."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "edited": false, "score": 0, "creation_date": 1486600550, "post_id": 42125780, "comment_id": 71420533, "body": "@jeremyradcliff For example, I could completely hide the actual memory of a <code>LinkedList</code> with <code>typedef int LinkedList</code>. That integer would be an index into where LinkedLists are actually stored. This is, very broadly, what a file descriptor does. By fiercely enforcing encapsulation, I can be sloppy in my implementation (I&#39;m pretty sure I have head and tail backwards), and fix it up and very aggressively improve it later."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1486599500, "last_edit_date": 1486599500, "creation_date": 1486597789, "answer_id": 42125780, "question_id": 42124197, "link": "https://stackoverflow.com/questions/42124197/inject-function-in-doubly-linked-list-arbitrarily-points-back-to-head-element-af/42125780#42125780", "title": "Inject function in doubly linked list arbitrarily points back to head element after call to pop()", "body": "<pre><code>    node* new_node = malloc(sizeof(node));\n    printf(\"pointing to: %p\\n\", new_node-&gt;next);// points to head after pop() call\n</code></pre>\n\n<p><code>new_node-&gt;next</code> will contain whatever garbage <code>malloc</code> wants to put in there. It might <em>happen</em> to point to head, but you never initialized it, so that <code>printf</code> is trying to find meaning in garbage.</p>\n\n<p>Your code scatters memory management all over the place. Rather than try to fix it, let's rewrite it using my stock advice about structs: <strong><em>always</em></strong> write functions to initialize and destroy them. <strong><em>Always</em></strong>, even if it seems silly and trivial. It avoids scattering that code all over the place, doing it slightly differently every time. It allows you to unit test the basic functions of the struct before trying to use it.It lets you focus on the algorithm, not the memory management.</p>\n\n<hr>\n\n<p>First, let's make a tweak to your struct. <code>node</code> is a very bad name for a type. It's likely you (or somebody else) is going to want to call a variable <code>node</code> and cause a conflict. I've called it <code>Node</code>, capitalized to avoid confusion with variables and builtins.</p>\n\n<pre><code>typedef struct Node {\n    int value;      \n    struct Node* next;\n    struct Node* previous;      \n} Node;\n</code></pre>\n\n<p>Now we can write <code>Node_new</code> and <code>Node_destroy</code>.</p>\n\n<pre><code>Node *Node_new() {\n    Node *node = malloc(sizeof(Node));\n    node-&gt;value = 0;\n    node-&gt;next = NULL;\n    node-&gt;previous = NULL;\n\n    return node;\n}\n\nvoid Node_destroy( Node *node ) {\n    free(node);\n}\n</code></pre>\n\n<p><code>Node_destroy</code> might seem silly, but it frees you (or anyone else) from having to remember how to destroy a <code>Node</code>. And it lets you change the internal structure of <code>Node</code> without changing the rest of the code (which happened while writing this).</p>\n\n<hr>\n\n<p>You're using globals. Globals make everything more complicated and restrict what you can do with the code. Instead, wrap things like <code>head</code>, <code>tail</code>, and <code>size</code> into its own structure and pass that around.</p>\n\n<pre><code>typedef struct {\n    Node *head;\n    Node *tail;\n    size_t size;\n} LinkedList;\n</code></pre>\n\n<p>And it needs its own create and destroy functions.</p>\n\n<pre><code>LinkedList *LinkedList_new() {\n    LinkedList *list = malloc(sizeof(LinkedList));\n    list-&gt;head = NULL;\n    list-&gt;tail = NULL;\n    list-&gt;size = 0;\n\n    return list;\n}\n\nvoid LinkedList_destroy( LinkedList *list ) {\n    for( Node *node = list-&gt;head; node != NULL; node = node-&gt;next ) {\n        Node_destroy(list-&gt;head);\n    }\n\n    free(list);\n}\n</code></pre>\n\n<p>Note that <code>LinkedList_destroy</code> takes responsibility for cleaning up all its nodes, its one less thing for the user of LinkedList to worry about and potentially screw up.</p>\n\n<p><code>LinkedList_destroy</code> can call <code>Node_destroy</code> without knowing anything about how <code>Node</code> works. This is how we immediately benefit from the encapsulation and abstraction of <code>Node</code>. But don't use recursion, the list can be arbitrarily long and recursion risks a stack overflow.</p>\n\n<hr>\n\n<p>Now we can write push and pop assured that things are properly created and destroyed. Note that they take a LinkedList rather than using globals.</p>\n\n<pre><code>void LinkedList_push(LinkedList *list, int value)\n{\n    Node *node = Node_new();\n    node-&gt;value = value;\n\n    switch( list-&gt;size ) {\n        /* The list is empty, this is the first node */\n        case 0:\n            list-&gt;head = list-&gt;tail = node;\n            break;\n        default:\n            list-&gt;tail-&gt;next = node;\n            node-&gt;previous = list-&gt;tail;\n            list-&gt;tail = node;\n            break;\n    }\n\n    list-&gt;size++;\n}\n\nint LinkedList_pop( LinkedList *list ) {\n    Node *popped = list-&gt;tail;\n\n    switch( list-&gt;size ) {\n        /* The list is empty, nothing to pop */\n        case 0:\n            fprintf(stderr, \"LinkedList was empty when popped.\\n\");\n            exit(1);\n            break;\n        /* Popped the last node */\n        case 1:\n            list-&gt;head = list-&gt;tail = NULL;\n            break;\n        /* Only one node left, it's both the head and tail */\n        case 2:\n            list-&gt;tail = list-&gt;head;\n            list-&gt;tail-&gt;previous = list-&gt;tail-&gt;next = NULL;\n            break;\n        default: \n            list-&gt;tail = popped-&gt;previous;\n            list-&gt;tail-&gt;next = NULL;\n            break;\n    }\n\n    /* Have to do this at the end because size_t is unsigned\n       it can't go negative */\n    list-&gt;size--;\n\n    int value = popped-&gt;value;\n    Node_destroy(popped);\n\n    return value;\n}\n</code></pre>\n\n<p>I've used a <code>switch</code> so I can clearly demarcate all the special cases.</p>\n\n<p>I'm not saying this is the best implementation of push and pop, or that it's even bug free, but they can be written without worrying about whether the structs have been properly initialized or freed. You can focus on the logic, not the memory management.</p>\n\n<hr>\n\n<p>And then to demonstrate it all works...</p>\n\n<pre><code>void LinkedList_print( LinkedList *list ) {\n    for( Node *node = list-&gt;head; node != NULL; node = node-&gt;next) {\n        printf(\"%d\\n\", node-&gt;value);\n    }\n}\n\nint main() {\n    LinkedList *list = LinkedList_new();\n\n    for( int i = 0; i &lt; 3; i++ ) {\n        LinkedList_push(list, i);\n    }\n\n    while( list-&gt;size != 0 ) {\n        printf(\"list-&gt;size: %zu\\n\", list-&gt;size);\n        LinkedList_print(list);\n        LinkedList_pop(list);\n    }\n\n    LinkedList_destroy(list);\n}\n\n$ ./test\nlist-&gt;size: 3\n0\n1\n2\nlist-&gt;size: 2\n0\n1\nlist-&gt;size: 1\n0\n</code></pre>\n"}], "owner": {"reputation": 812, "user_id": 2812104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/32020ed2a1967e06e2c6a6be71921fd6?s=128&d=identicon&r=PG&f=1", "display_name": "jeremy radcliff", "link": "https://stackoverflow.com/users/2812104/jeremy-radcliff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 42125780, "answer_count": 1, "score": 0, "last_activity_date": 1486599500, "creation_date": 1486590143, "last_edit_date": 1486594645, "question_id": 42124197, "link": "https://stackoverflow.com/questions/42124197/inject-function-in-doubly-linked-list-arbitrarily-points-back-to-head-element-af", "title": "Inject function in doubly linked list arbitrarily points back to head element after call to pop()", "body": "<p><strong>EDIT</strong>: <em>I think my question is completely different from the proposed duplicate. It's asking about the general case whereas my question is asking for a very specific case where the reason for the weird behavior should be traceable given how specific it is.</em></p>\n\n<p>I have some really weird behavior in my doubly LL implementation.\nBasically, if I <code>pop()</code> (from the head) an element and <em>then</em> <code>inject()</code> (add at the tail) some other element, that last tail element now points to the head of the list for seemingly no reason (I guess instead of NULL by default or at least a random address).</p>\n\n<p>I figured out how to fix the problem. When injecting, I wasn't pointing the new node's \"next\" to NULL.</p>\n\n<p>However, I would still like to understand why the injected node would choose to point to the head without specific direction of where to point.</p>\n\n<p>The effect is that if I travel the list starting from the head (but not starting from the tail), I keep looping forever as the last tail element points back to the head of the list. </p>\n\n<p><strong>EDIT:</strong> So I tried printing out the address that the pointer is pointing to just after the call to malloc in <code>inject()</code>, and for some crazy reason the pointer is created already pointing to the head's address; but this only happens if I call <code>pop()</code> before calling <code>inject()</code>. Incredibly weird...</p>\n\n<pre><code>int pop()\n{\n    node* temp = head;\n    int value = temp-&gt;value;    \n    head = temp-&gt;next;\n    free(temp);\n    head-&gt;previous = NULL;\n    size--;\n    return value;\n}\n\nvoid inject(int value)\n{\n    if (tail == NULL)\n    {               \n        tail = malloc(sizeof(node));\n        tail-&gt;value = value;\n        tail-&gt;next = NULL;\n        tail-&gt;previous = NULL;\n        head = tail;\n        size++;\n    }\n    else\n    {\n        node* new_node = malloc(sizeof(node));\n        printf(\"pointing to: %p\\n\", new_node-&gt;next);// points to head after pop() call\n        new_node-&gt;value = value;\n        tail-&gt;next = new_node;\n        new_node-&gt;previous = tail;\n        tail = new_node;\n        //new_node-&gt;next = NULL;\n        size++;\n    }\n}\n</code></pre>\n\n<p>The commented out line in inject() solves the problem but still doesn't explain why the tail would point back to the head if I inject after a pop.</p>\n\n<p>Below is the code before main() in case:</p>\n\n<pre><code>typedef struct node{\n    int value;      \n    struct node* next;\n    struct node* previous;      \n}node;\n\nnode* head = NULL;\nnode* tail = NULL;\n\nint head_value();\nint tail_value();\nvoid push(int);\nint pop();\nvoid inject(int);\nint eject();\n\nint size = 0;\n</code></pre>\n"}, {"tags": ["c", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1486590245, "post_id": 42124155, "comment_id": 71416467, "body": "<code>dequeue(myQueueList, (void*) foo1);</code> --&gt;&gt;  <code>dequeue(myQueueList, &amp;foo1);</code> Also: your *foo1 pointer is pointing nowhere; there is no foo object that it points to, and it is not NULL."}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486590987, "post_id": 42124155, "comment_id": 71416829, "body": "@wildplasser why is NULL needed for foo1 when foo1 gets initialized in dequeue? What I want is foo1 to point to another foo type in heap. Or am I thinking of this the wrong way?  I want the equivalent of:  struct foo* foo1 = queueList-&gt;head-&gt;data;  where data is a void* type."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1486591136, "post_id": 42124155, "comment_id": 71416899, "body": "is <code>queueList-&gt;head-&gt;data</code> a <code>struct foo*</code> type masquerading as a <code>void*</code>?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486591156, "post_id": 42124155, "comment_id": 71416913, "body": "In this case it would not be needed. But the dequeue routine <i>could</i> do things differently (such as deallocate, or not allocate at all) when not NULL. Uninitialised data is (generally) just a bad habit. Ald returning the pointer <b>as a return value</b> would not need any pointer to pointer at all."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1486591335, "post_id": 42124155, "comment_id": 71416997, "body": "<code>data</code> is an uninitialized pointer, so you can&#39;t dereference it. Duh."}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1486591444, "post_id": 42124155, "comment_id": 71417046, "body": "@yano yes. <b>queueList-&gt;head-&gt;data</b> is just a pointer to other <b>struct foo</b> objects.   The thing is calling <b>*data = NULL</b> itself causes a segfault."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1486591463, "post_id": 42124155, "comment_id": 71417064, "body": "@TommySaechao because <code>data</code> is an uninitialized pointer."}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1486591493, "post_id": 42124155, "comment_id": 71417080, "body": "@immibis How would I initialize it in the dequeue function?"}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "edited": false, "score": 0, "creation_date": 1486592012, "post_id": 42124155, "comment_id": 71417332, "body": "It did! But changing it to &amp;foo1 causes compiler warnings for incompatible pointer type."}, {"owner": {"reputation": 591, "user_id": 6149198, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7ef2632eb55cc8c5d0b8123ddd3ebb4d?s=128&d=identicon&r=PG&f=1", "display_name": "chedy najjar", "link": "https://stackoverflow.com/users/6149198/chedy-najjar"}, "edited": false, "score": 0, "creation_date": 1486592061, "post_id": 42124155, "comment_id": 71417355, "body": "which compiler are you using and what&#39;s it&#39;s version?"}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "edited": false, "score": 0, "creation_date": 1486592117, "post_id": 42124155, "comment_id": 71417377, "body": "I&#39;m using  <b>gcc (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609</b>"}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486592299, "post_id": 42124155, "comment_id": 71417458, "body": "casting &amp;foo1 to (void*)&amp;foo1 fixes the warning.   @wildplasser  So why do I have to use &amp;foo1 and not (void*)?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1486592664, "post_id": 42124155, "comment_id": 71417619, "body": "You may want to rethink your whole architecture. Using <code>void*</code> should be avoided as well as casting away compiler warnings. At best you lose compiler type-safety checking, which will inevitably lead to hard-to-track-down bugs later. If your queue holds a list of <code>struct foo*</code> pointers then why go back and forth between <code>struct foo*</code> and <code>void*</code>?"}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1486592918, "post_id": 42124155, "comment_id": 71417734, "body": "@yano I agree with you. Using void* is a really terrible when there is only one type. However, it&#39;s required for this assignment I&#39;m working on for Operating Systems and we had to implement a generic queue data structure."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1486592976, "post_id": 42124155, "comment_id": 71417755, "body": "@TommySaechao They are better way to do this look how linux implement his linked list."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1486593207, "post_id": 42124155, "comment_id": 71417878, "body": "@TommySaechao Well by writing <code>data = &amp;something;</code> of course. But it would make more sense in your program for the caller to pass an initialized pointer."}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "edited": false, "score": 0, "creation_date": 1486593831, "post_id": 42124155, "comment_id": 71418140, "body": "I changed it to initialize to NULL. Would it be better if I used malloc to initialize it? Wouldn&#39;t this cause a memory leak if all dequeue does is change the pointer to point somewhere else?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486593979, "post_id": 42124155, "comment_id": 71418205, "body": "@wildplasser <code>dequeue(myQueueList, &amp;foo1)</code> is a type mismatch (and hiding the error with a cast just leads to silent undefined behaviour instead)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486594095, "post_id": 42124155, "comment_id": 71418247, "body": "Ok, then add the cast : <code>dequeue(myQueueList, (void **) &amp;foo1);</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486594223, "post_id": 42124155, "comment_id": 71418302, "body": "@wildplasser undefined behaviour"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486594310, "post_id": 42124155, "comment_id": 71418340, "body": "See my comment 51 mins ago: use the return value, luke!"}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486594926, "post_id": 42124155, "comment_id": 71418631, "body": "@wildplasser, returning a pointer would not need a void ** indeed. That would have been my preference. But unfortunately for me, we had to write our queue off of his the professor&#39;s file and we cannot modify his header file.  @wildplasser <code>(void**)&amp;foo1</code> compiles fine with no errors. What would be the difference beteween casting <code>foo1</code> as <code>(void**)&amp;foo1</code> vs <code>(void*)&amp;foo1</code>. How will my dequeue function see the argument?"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486595203, "post_id": 42124155, "comment_id": 71418747, "body": "Well: the function <i>expects</i> a <code>void **</code>. So to comply with the function&#39;s signature you&#39;ll need to give it a <code>void **</code>. And, <i>semantically</i>, after dereference, the function expects to get a <code>foo*</code>."}], "answers": [{"comments": [{"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "edited": false, "score": 0, "creation_date": 1486595608, "post_id": 42125201, "comment_id": 71418895, "body": "I see, so I just want to clarify. Passing in <code>(void*) foo1</code> for arg2 is equivalent to passing <code>*foo1</code> if foo1 was a void type?  And when I pass <code>&amp;foo1&#39; I am passing the </code>ADDRESS` of the <code>POINTER</code> which can be de-referenced into a pointer by using <code>*data</code> inside my <code>dequeue</code> function.  And for <code>struct foo *foo1 = vfoo;</code> Why would we not type cast <code>vfoo</code> to (struct foo*)vfoo if we do it this way?   I agree it would be easier to use dequeue if we change the design, but I was provided a header file by my professor, which we are not allowed to change for this assignment."}, {"owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "edited": false, "score": 0, "creation_date": 1486595726, "post_id": 42125201, "comment_id": 71418936, "body": "What kind of undefined behavior would casting <code>foo1</code> to <code>(void*)</code> or <code>(void**)</code> cause? And how does <code>dequeue()</code> see foo1 in <code>(void **)&amp;foo1</code> versus <code>(void*) &amp;foo1</code> when passed for arg2?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "edited": false, "score": 0, "creation_date": 1486596418, "post_id": 42125201, "comment_id": 71419163, "body": "@TommySaechao Re. the second comment, I explain this in my answer. Using the value of an uninitialized pointer causes undefined behaviour. Casting a pointer uses its value.   <code>(void *)&amp;foo1</code> and <code>(void **)&amp;foo1</code> , as function argument, have the same effect since the function prototype ensures that the former is converted to the latter"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "edited": false, "score": 0, "creation_date": 1486596500, "post_id": 42125201, "comment_id": 71419188, "body": "Re. the first comment, <code>(void *)foo1</code> is not equivalent to <code>*foo1</code>.  <code>foo1</code> is a variable. <code>(void *)foo1</code> means to convert the value of the variable to <code>void *</code>.   <code>*foo1</code> would indicate the object which <code>foo1</code> is pointing to.   <code>&amp;foo1</code> is the address of <code>foo1</code>, which is a pointer. You could write <code>(struct foo *)vfoo</code> but it is good practice to avoid redundant casts."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1486594526, "creation_date": 1486594526, "answer_id": 42125201, "question_id": 42124155, "link": "https://stackoverflow.com/questions/42124155/segfault-when-dereferencing-void-arguments/42125201#42125201", "title": "Segfault when dereferencing void ** arguments", "body": "<p>In this code:</p>\n\n<pre><code>struct foo* foo1;\ndequeue(myQueueList, (void*) foo1);\n</code></pre>\n\n<p>the expression <code>(void *)foo1</code> causes undefined behaviour, because you use the value of an uninitialized pointer.</p>\n\n<p>The concept of what you wanted to do was to pass the <em>address of</em> <code>foo1</code> to the function, so that the function can modify <code>foo1</code>.  You need the <code>&amp;</code> operator to find the address of things.</p>\n\n<p>However the function does not know anything about a <code>struct foo *</code>.  <code>void **</code> is not a generic pointer type; it is a pointer to exactly a <code>void *</code> and nothing else.  So to make this code work without changing the definition of <code>dequeue</code>, you need to make a <code>void *</code> variable:</p>\n\n<pre><code>void *vfoo;\ndequeue(myQueueList, &amp;vfoo);\nstruct foo *foo1 = vfoo;\n</code></pre>\n\n<p>It would be easier to use <code>dequeue</code> if you could change its design; in particular, have it return <code>void *</code>. Then you could write <code>struct foo *foo1 = dequeue(myQueueList);</code>.</p>\n\n<p>Note: In comments it was suggested to use <code>dequeue(myQueueList, (void **)&amp;vfoo);</code>, however this will cause undefined behaviour due to a strict aliasing violation. Object of type <code>struct foo *</code> cannot be accessed via an lvalue of type <code>void *</code>.</p>\n"}], "owner": {"reputation": 971, "user_id": 4909889, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/0e55dadcd074d895900a408cba1b258b?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy Saechao", "link": "https://stackoverflow.com/users/4909889/tommy-saechao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486594526, "creation_date": 1486590031, "last_edit_date": 1486592578, "question_id": 42124155, "link": "https://stackoverflow.com/questions/42124155/segfault-when-dereferencing-void-arguments", "title": "Segfault when dereferencing void ** arguments", "body": "<p>I'm lacking understanding of pointers here. <strong>foo1</strong> is a pointer of type <strong>foo</strong>. In dequeue, there are a list of items of type <strong>foo</strong> that are dynamically allocated passed in by queueList. My mission is to get <strong>foo1</strong> to point to the head of the queue, however, accessing the <strong>foo1</strong> pointer that was passed into <strong>dequeue()</strong> with <strong>*data</strong> causes a segfault. Here is where I lack understanding. Is <strong>*data</strong> not referring to the <strong>foo1</strong> pointer?</p>\n\n<pre><code>struct foo\n{\n//Properties Here\n};\n\nint main()\n{\n    struct foo* foo1;\n    dequeue(myQueueList, (void*) foo1);\n}\n\nvoid dequeue(struct queue* queueList, void **data)\n{\n    *data = NULL; //Causes Seg fault if I do this too\n    *data = queueList-&gt;head-&gt;data; //Seg fault if I do this as well\n    return;\n}\n</code></pre>\n\n<p>My queue is defined as:</p>\n\n<pre><code>struct queue\n{\n    node * head;\n    //other stuff\n};\n\nstruct node\n{\n    void * data;\n    //other stuff\n};\n</code></pre>\n\n<p>Edit: foo1 is not initialized in main. I want to initialize it in dequeue by setting it equal to a different struct foo* pointer that's been enqueued. </p>\n\n<p>Edit2: queue holds a list of struct foo* pointers.</p>\n\n<p>Edit3: Thanks to wildplasser, it's fixed with (void*)foo1 -> (void*)&amp;foo1. But why do I have to use &amp;foo1 and not (void*)? </p>\n"}, {"tags": ["c", "logical-operators"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "edited": false, "score": 0, "creation_date": 1486591113, "post_id": 42124208, "comment_id": 71416884, "body": "unfortunately I am using VS2015. I will soon be looking to start using <code>gcc</code>. I am assuming that you would suggest doing so ? I have always used VS since it is recommended for students... (or so I thought)"}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 2, "creation_date": 1486592968, "post_id": 42124208, "comment_id": 71417751, "body": "@Rizzo I think gcc is definitely a great compiler, both in terms of developer convenience and speed of generated code, but use whatever you like. ;)"}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 7, "last_activity_date": 1486591194, "last_edit_date": 1486591194, "creation_date": 1486590190, "answer_id": 42124208, "question_id": 42124119, "link": "https://stackoverflow.com/questions/42124119/logical-expressions-in-c-misunderstanding/42124208#42124208", "title": "Logical Expressions in C misunderstanding", "body": "<p><code>&amp;&amp;</code> has higher precedence than <code>||</code>.\n(See <a href=\"https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B</a> )\nso</p>\n\n<pre><code>++i || ++j &amp;&amp; k\n</code></pre>\n\n<p>is</p>\n\n<pre><code>++i || (++j &amp;&amp; k)\n</code></pre>\n\n<p>and <code>||</code> shortcircuits if the first operator is truthy, as per <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.5.14p4\" rel=\"noreferrer\">6.5.14p4</a> . </p>\n\n<p>If you're on <code>gcc</code> or <code>clang</code> and compile your code with <code>-Wall</code>, the compiler will nudge you to put those parentheses there. It's probably a good idea to heed that advice, as some people get confused by the precedences (I hear).  </p>\n"}, {"tags": [], "owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "is_accepted": false, "score": 2, "last_activity_date": 1486590199, "creation_date": 1486590199, "answer_id": 42124212, "question_id": 42124119, "link": "https://stackoverflow.com/questions/42124119/logical-expressions-in-c-misunderstanding/42124212#42124212", "title": "Logical Expressions in C misunderstanding", "body": "<p><code>++i || ++j &amp;&amp; k</code> is evaluate to 1 (true) because i equals 2 (++1), (++j &amp;&amp; k) isn't evaluated because short circuit.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1486590228, "creation_date": 1486590228, "answer_id": 42124217, "question_id": 42124119, "link": "https://stackoverflow.com/questions/42124119/logical-expressions-in-c-misunderstanding/42124217#42124217", "title": "Logical Expressions in C misunderstanding", "body": "<p>From the C Standard (6.5.14 Logical OR operator)</p>\n\n<blockquote>\n  <p>3 The || operator shall yield 1 if either of its operands compare\n  unequal to 0; otherwise, it yields 0. The result has type int.</p>\n</blockquote>\n\n<p>This expression</p>\n\n<pre><code>++i || ++j &amp;&amp; k\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>++i || ( ++j &amp;&amp; k )\n</code></pre>\n\n<p>and according to the quote from the Standard the expression returns integer value 1 because <code>++i</code> is not equal to zero. The subexpression <code>( ++j &amp;&amp; k )</code> is not evaluated.</p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 1, "last_activity_date": 1486590248, "creation_date": 1486590248, "answer_id": 42124219, "question_id": 42124119, "link": "https://stackoverflow.com/questions/42124119/logical-expressions-in-c-misunderstanding/42124219#42124219", "title": "Logical Expressions in C misunderstanding", "body": "<p>Operators precedence. <code>&amp;&amp;</code> has higher precedence than <code>||</code>. </p>\n\n<p>Your expression is the same as: <code>++i || (++j &amp;&amp; k)</code></p>\n\n<p><code>++i</code> is <code>TRUE</code>, the parenthesis is not evaluated anymore.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7468879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 42124208, "answer_count": 4, "score": 7, "last_activity_date": 1486631009, "creation_date": 1486589909, "last_edit_date": 1486631009, "question_id": 42124119, "link": "https://stackoverflow.com/questions/42124119/logical-expressions-in-c-misunderstanding", "title": "Logical Expressions in C misunderstanding", "body": "<p>So, I was writing some code and I was getting an unexpected output in one part of my program which disrupted the entire system. </p>\n\n<p>I managed to extract and simplify the problem to a basic logical expression. Let's say:</p>\n\n<pre><code>int i = 1, j = 1, k = 0;\n\nprintf(\"%d\\n\", ++i || ++j &amp;&amp; k);\nprintf(\"%d, %d, %d\\n\", i, j, k);\n\nreturn 0;\n</code></pre>\n\n<p>The output for this program is:</p>\n\n<p><code>1</code></p>\n\n<p><code>2</code> <code>1</code> <code>0</code></p>\n\n<p>I am thinking that the value of <code>j</code> was not incremented to <code>2</code> due to the short circuit nature of the <code>||</code> operator. However I am confused how the value of the first <code>\"%d\"</code> is <code>1</code>. Shouldn't the value of <code>k</code> be non-zero for the <code>&amp;&amp;</code> statement to return <code>1</code>? Or isn't this statement executed at all since <code>++i || ++j</code> is not <code>0</code> and thus returns a <code>1</code>?</p>\n\n<ul>\n<li>I know that <code>&amp;&amp;</code> is a logical <em>and</em>, and  <em>expr1</em> &amp;&amp; <em>expr2</em> has the value 1 if values of <em>expr1</em> &amp;&amp; <em>expr2</em> are <strong>both</strong> non-zero.</li>\n</ul>\n\n<p>Any clarifications would be appreciated and please excuse the basic nature of this question.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486588533, "post_id": 42123706, "comment_id": 71415581, "body": "<code>while(option != 0)</code> is an infinite loop unless option <code>0</code> was entered, since you never modify <code>option</code> inside the loop.  Perhaps you should move <code>scanf(&quot;%d&quot;,&amp;option);</code> inside the loop, and also check the return value of scanf."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486588571, "post_id": 42123706, "comment_id": 71415609, "body": "@M.M or when any invalid option was chosen. And when 1 is chosen, it also loops forever."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486588704, "post_id": 42123706, "comment_id": 71415695, "body": "learn to step through your code with a debugger - things like this become obvious"}, {"owner": {"reputation": 22751, "user_id": 2399879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxMS5.jpg?s=128&g=1", "display_name": "Crowman", "link": "https://stackoverflow.com/users/2399879/crowman"}, "edited": false, "score": 0, "creation_date": 1486596818, "post_id": 42123706, "comment_id": 71419292, "body": "<code>scanf(&quot;%d %d&quot;, &amp;M, &amp;N);</code> - there are no variables <code>M</code> or <code>N</code> in this code."}], "answers": [{"tags": [], "owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "is_accepted": false, "score": 2, "last_activity_date": 1486589033, "last_edit_date": 1486589033, "creation_date": 1486588886, "answer_id": 42123830, "question_id": 42123706, "link": "https://stackoverflow.com/questions/42123706/using-several-different-functions-in-c/42123830#42123830", "title": "Using Several Different Functions in C", "body": "<p>Try this:</p>\n\n<pre><code>int main(void) {\n   int option = 1;\n   while (option != 0) {\n      printf(\"If you would like to search ann array, enter 1 \\n: \");\n      printf(\"If you would like to exit, enter 0 \\n: \");\n      scanf(\"%d\", &amp;option); // &lt;&lt; into the loop\n      switch (option) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "edited": false, "score": 0, "creation_date": 1486590352, "post_id": 42124206, "comment_id": 71416524, "body": "Yea i fixed that error, but when I run it now, after I enter values for M and N, it doesn&#39;t terminate, but it literally does nothing."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1486601359, "post_id": 42124206, "comment_id": 71420754, "body": "Welcome to SO! While moving in the right direction, this answer is a little incomplete. Do you mind if I build upon it?"}, {"owner": {"reputation": 295, "user_id": 6211109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/768fb515cbb9e9d803cdf8560d6052aa?s=128&d=identicon&r=PG&f=1", "display_name": "Gautam Sreekumar", "link": "https://stackoverflow.com/users/6211109/gautam-sreekumar"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1486797546, "post_id": 42124206, "comment_id": 71510867, "body": "@Seb yeah, sure. i am a noob in coding actually :P"}, {"owner": {"reputation": 295, "user_id": 6211109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/768fb515cbb9e9d803cdf8560d6052aa?s=128&d=identicon&r=PG&f=1", "display_name": "Gautam Sreekumar", "link": "https://stackoverflow.com/users/6211109/gautam-sreekumar"}, "reply_to_user": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "edited": false, "score": 0, "creation_date": 1486797606, "post_id": 42124206, "comment_id": 71510885, "body": "@ShoaibAhmed what exactly are you getting?"}], "tags": [], "owner": {"reputation": 295, "user_id": 6211109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/768fb515cbb9e9d803cdf8560d6052aa?s=128&d=identicon&r=PG&f=1", "display_name": "Gautam Sreekumar", "link": "https://stackoverflow.com/users/6211109/gautam-sreekumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1486867016, "last_edit_date": 1486867016, "creation_date": 1486590184, "answer_id": 42124206, "question_id": 42123706, "link": "https://stackoverflow.com/questions/42123706/using-several-different-functions-in-c/42124206#42124206", "title": "Using Several Different Functions in C", "body": "<p>There happens to be an infinite loop at <code>while (option != 0)</code>.\nYou need to modify your <code>while</code> loop.</p>\n\n<pre><code>int option = 1; /* initialisation prevents UB, if you're moving the `scanf` into the loop */\nwhile(option != 0)\n{\n    scanf(\"%d\", &amp;option);\n}\n</code></pre>\n\n<p>Noting that <code>scanf</code> returns a value corresponding to success/failure, this could also be placed into the conditional expression of the loop, which would avoid the need for an unnecessary (but nonetheless useful) initialisation:</p>\n\n<pre><code>int option;\nwhile (scanf(\"%d\", &amp;option) == 1 &amp;&amp; option != 0) {\n    switch (option) { ... }\n}\n</code></pre>\n\n<p>If you expect the input to be processed line-by-line, think about what might happen if the user enters something invalid, such as \"invalid\" when they're entering an option.</p>\n\n<p>In the first case, the return value corresponding to input failure is discarded, the input stream will remain unchanged (meaning \"invalid\" is left for future reads) and thus an undesirable infinite loop will occur.</p>\n\n<p>In the second case, the return value corresponding to input failure isn't discarded; in fact, it'll cause the loop to terminate. You might wish to print an error message and re-prompt the user for a valid selection, so here's a third case:</p>\n\n<pre><code>int option;\nfor (int v = scanf(\"%d\", &amp;option); v != EOF &amp;&amp; option != 0; v = scanf(\"%d\", &amp;option)) {\n    if (!v) {\n        puts(\"ERROR! Invalid selection; try again...\");\n        scanf(\"%*[^\\n]\"); /* This discards the junk... */\n        getchar();        /* This discards the newline following the junk,\n                           * which is unnecessary in your situation       */\n        continue;\n    }\n    switch (option) { ... }\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7021861, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be3f3faf9416a24e79a4175663f5e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shoaib Ahmed", "link": "https://stackoverflow.com/users/7021861/shoaib-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1486867016, "creation_date": 1486588383, "last_edit_date": 1486588740, "question_id": 42123706, "link": "https://stackoverflow.com/questions/42123706/using-several-different-functions-in-c", "title": "Using Several Different Functions in C", "body": "<p>I am writing a program that asks the user to enter two numbers M and N. The program then creates a two dimensional array array[M][N].</p>\n\n<p>Four other functions need to be used which include:</p>\n\n<ul>\n<li>PrintArray(): prints elements in an M x N matrix</li>\n<li>PopulateRandom(): Assigns random values to all elements from 1 to M * N</li>\n<li>LinearSearch(): looks to see if any values are repeated</li>\n<li>LeftShift(): Shifts all elements of the array one to the left, First element becomes last element.</li>\n</ul>\n\n<p>The problem with my code is that when I run it, and enter two values, the program keeps printing the default case \"Enter 1 or 0\" an infinite times. Can someone help me out?</p>\n\n<pre><code>#include &lt;stdbool.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nbool LinearSearch(int[][N], int);\nvoid PopulateRandom(int[][N]);\nvoid PrintArray2D(int[][N]);\nvoid LeftShift(int[][N]);\n\n// Prints elements of array in a M x N table\nvoid PrintArray2D(int array[][N]) {\n  int i, j;\n\n  for (i = 0; i &lt; M; i++) {\n    for (j = 0; j &lt; N; j++) {\n      printf(\"%d\", array[i][j]);\n    }\n    printf(\"\\n\");\n  }\n}\n\n// Assigns elements of the array \"array\" random values\nvoid PopulateRandom(int array[][N]) {\n  int i, j, x;\n\n  for (i = 0; i &lt; M; i++) {\n    for (j = 0; j &lt; N; j++) {\n      bool found = 1;\n      while (found == 1) {\n        x = rand() % M * N - 1;\n        found = LinearSearch(array, x);\n      }\n      array[i][j] = x;\n    }\n  }\n}\n\n// functino performs a linear search to see if there are any repeated values\n// in the array.\nbool LinearSearch(int array[][N], int num) {\n  bool p_flag = 0;\n  int i, j;\n\n  for (i = 0; i &lt; M; i++) {\n    for (j = 0; j &lt; N; j++) {\n      if (array[i][j] == num) {\n        p_flag = 1;\n      }\n    }\n  }\n  return p_flag;\n}\n\nvoid LeftShift(int array[][N]) {\n  int i;\n  int j;\n\n  for (i = 0; i &lt; M; i++) {\n    for (j = 0; j &lt; N; j++) {\n      if (j == N - 1) {\n        if (i == M - 1) {\n          array[i][j] = array[0][0];\n        } else {\n          array[i][j] = array[i + 1][0];\n        }\n      } else {\n        array[i][j] = array[i][j + 1];\n      }\n    }\n  }\n}\n\nint main(void) {\n  int option;\n\n  printf(\"If you would like to search ann array, enter 1 \\n: \");\n  printf(\"If you would like to exit, enter 0 \\n: \");\n  scanf(\"%d\", &amp;option);\n\n  while (option != 0) {\n    switch (option) {\n      case 1: {\n        printf(\"Enter two numbers M and N: \");\n        scanf(\"%d %d\", &amp;M, &amp;N);\n        int array[M][N];\n        PopulateRandom(array);\n        PrintArray2D(array);\n        LeftShift(array);\n        PrintArray2D(array);\n        break;\n      }\n      case 0:\n        break;\n      default:\n        printf(\"Enter 1 or 0\");\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "c", "algorithm"], "comments": [{"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486588272, "post_id": 42123653, "comment_id": 71415435, "body": "This is both C# and C?"}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486588313, "post_id": 42123653, "comment_id": 71415460, "body": "@chrisaycock And Java and C++, apparently."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588334, "post_id": 42123653, "comment_id": 71415478, "body": "too bad that we can only stuff 5 language tags in a question. python came to mind too."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1486588353, "post_id": 42123653, "comment_id": 71415487, "body": "Emprically, with a large number of samples."}, {"owner": {"reputation": 43527, "user_id": 98094, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VkdLW.jpg?s=128&g=1", "display_name": "Icemanind", "link": "https://stackoverflow.com/users/98094/icemanind"}, "edited": false, "score": 0, "creation_date": 1486588505, "post_id": 42123653, "comment_id": 71415564, "body": "I think the answer to your question is here: <a href=\"http://stackoverflow.com/questions/109023/how-to-count-the-number-of-set-bits-in-a-32-bit-integer\" title=\"how to count the number of set bits in a 32 bit integer\">stackoverflow.com/questions/109023/&hellip;</a>"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1486588507, "post_id": 42123653, "comment_id": 71415568, "body": "The more common solution is this: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetParallel\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/&hellip;</a>"}, {"owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "edited": false, "score": 0, "creation_date": 1486588570, "post_id": 42123653, "comment_id": 71415607, "body": "I mentioned in my question, that I would like to estimate based on the code which method is faster before performing a test such as calling the functions a  million times (for example)"}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 1, "creation_date": 1486588608, "post_id": 42123653, "comment_id": 71415637, "body": "I might be proven wrong, but I very much doubt you can really eyeball this for a real system. it depends too much on what the compiler does and microarchitectural details."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588615, "post_id": 42123653, "comment_id": 71415641, "body": "in that case you may consider disassembling the compiled code, would be closer to the machine like that."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1486588922, "post_id": 42123653, "comment_id": 71415811, "body": "the answer to this is to benchmark them;."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1486589587, "post_id": 42123653, "comment_id": 71416149, "body": "probably a more elegant version of 2: <a href=\"https://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetKernighan\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/&hellip;</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594063, "post_id": 42123653, "comment_id": 71418234, "body": "Search the web for &quot;bit twiddling counting&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "edited": false, "score": 0, "creation_date": 1486590366, "post_id": 42124062, "comment_id": 71416528, "body": "Please look at the last line in my question.  Yes I know that lookup tables can be faster, but I purposely avoided them for this question."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "edited": false, "score": 0, "creation_date": 1486591968, "post_id": 42124062, "comment_id": 71417311, "body": "@DaveS - The optimal solution is different for various number of bits expected to be set. A table, going through all bytes, might be good if you have -say- 28 bits set on average. If you usually only have one bit, or three, chqrlie&#39;s first code will be much faster (and not use any cache space or the lookup table)."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486593103, "post_id": 42124062, "comment_id": 71417816, "body": "dont see how u can have 28 bits set in a byte. Max gotta be 8. 256 byte lookup table doesnt take a lot of space or cache lines"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1486593829, "post_id": 42124062, "comment_id": 71418137, "body": "@pm100 - He is counting the bits in an <code>unsigned long</code>, so he would have to loop over the bytes (or have the world&#39;s largest lookup table :-). Looking up the numbers byte by byte would need 8 (or 4?) rounds in a loop, while removing one bit at a time could get away with 3 rounds for 3 bits."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486594025, "post_id": 42124062, "comment_id": 71418219, "body": "it would be interesting to do a timing comparison :-)"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 0, "last_activity_date": 1486589725, "creation_date": 1486589725, "answer_id": 42124062, "question_id": 42123653, "link": "https://stackoverflow.com/questions/42123653/how-to-figure-out-which-is-the-fastest-algorithm/42124062#42124062", "title": "How to figure out which is the fastest algorithm", "body": "<p>first, the only way to know how fast things are is to measure them.</p>\n\n<p>Second - to find the number of set bits in some bytes, build a lookup table for the number of set bits in a byte</p>\n\n<pre><code>0-&gt;0\n1-&gt;1\n2-&gt;1\n3-&gt;2\n4-&gt;1\n\netc.\n</code></pre>\n\n<p>This is a common method and very fast</p>\n\n<p>You can code it by hand or create it at startup</p>\n"}, {"tags": [], "owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "is_accepted": false, "score": 2, "last_activity_date": 1486592005, "last_edit_date": 1486592005, "creation_date": 1486590283, "answer_id": 42124228, "question_id": 42123653, "link": "https://stackoverflow.com/questions/42123653/how-to-figure-out-which-is-the-fastest-algorithm/42124228#42124228", "title": "How to figure out which is the fastest algorithm", "body": "<p>The second algorithm can be greatly simplified:</p>\n\n<pre><code>int CountNumSetBitsMethod2(unsigned long n) {\n    unsigned short num_setbits = 0;\n    while (n) {\n        num_setbits++;\n        n &amp;= n - 1;\n    }\n    return num_setbits;\n}\n</code></pre>\n\n<p>There are many more ways to compute the number of bits set in a word:</p>\n\n<ul>\n<li>Using lookup tables for mutiple bits at a time</li>\n<li>Using 64-bit multiplications</li>\n<li>Using parallel addition</li>\n<li>Using extra tricks to shave a few cycles.</li>\n</ul>\n\n<p>Trying to determine empirically which is faster by counting cycles is not so easy because even looking at the assembly output, it is difficult to assess the impact of instruction parallelisation, pipelining, branch prediction, register renaming and contention... Modern CPUs are <strong>very</strong> sophisticated!  Furthermore, the actual code generated depends on the compiler version and configuration and the timings depend on the CPU type and release... Not to mention the variability linked to the particular sets of values used (for algorithms with variable numbers of instructions).</p>\n\n<p>Benchmarking is a necessary tool, but even careful benchmarking may fail to model the actual usage correctly.</p>\n\n<p>Here is a great site for this kind of bit twiddling games:</p>\n\n<p><a href=\"http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive\" rel=\"nofollow noreferrer\">http://graphics.stanford.edu/~seander/bithacks.html#CountBitsSetNaive</a></p>\n\n<p>I suggest you implement the different versions and perform comparative benchmarks on your system.  There is no definite answer, only local optima for specific sets of conditions.</p>\n\n<p>Some amazing finds:</p>\n\n<pre><code>// option 3, for at most 32-bit values in v:\nc =  ((v &amp; 0xfff) * 0x1001001001001ULL &amp; 0x84210842108421ULL) % 0x1f;\nc += (((v &amp; 0xfff000) &gt;&gt; 12) * 0x1001001001001ULL &amp; 0x84210842108421ULL) % \n     0x1f;\nc += ((v &gt;&gt; 24) * 0x1001001001001ULL &amp; 0x84210842108421ULL) % 0x1f;\n</code></pre>\n\n<p>A more classic one, usually considered the best method for counting bits in a 32-bit integer v:</p>\n\n<pre><code>v = v - ((v &gt;&gt; 1) &amp; 0x55555555);                    // reuse input as temporary\nv = (v &amp; 0x33333333) + ((v &gt;&gt; 2) &amp; 0x33333333);     // temp\nc = ((v + (v &gt;&gt; 4) &amp; 0xF0F0F0F) * 0x1010101) &gt;&gt; 24; // count\n</code></pre>\n"}], "owner": {"reputation": 907, "user_id": 5617152, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g-d8oZWjJps/AAAAAAAAAAI/AAAAAAAAAEQ/d6WL36JzvLs/photo.jpg?sz=128", "display_name": "Dave S", "link": "https://stackoverflow.com/users/5617152/dave-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "closed_date": 1486592305, "answer_count": 2, "score": -2, "last_activity_date": 1486592005, "creation_date": 1486588201, "last_edit_date": 1486589522, "question_id": 42123653, "link": "https://stackoverflow.com/questions/42123653/how-to-figure-out-which-is-the-fastest-algorithm", "closed_reason": "Needs more focus", "title": "How to figure out which is the fastest algorithm", "body": "<p>In counting the number of bits in a word, a brute force would be something like this:</p>\n\n<pre><code>int CountNumSetBits(unsigned long n)\n{\n    unsigned short num_setbits = 0;\n    while (n)\n    {\n        num_setbits += n &amp; 1;\n        n &gt;&gt;= 1;\n    }\n    return num_setbits;\n}\n</code></pre>\n\n<p>The big O speed would be O(n) where n is the number of bits in the Word.</p>\n\n<p>I thought of another way of writing the algorithm taking advantage of the fact that we an optain the first occurance of a set bit using y = x&amp;~(x-1)</p>\n\n<pre><code>int CountNumSetBitsMethod2(unsigned long n)\n{\n    unsigned short num_setbits = 0;\n    int y = 0;\n    while (n)\n    {\n        y = n&amp; ~(n - 1); // get first occurrence of '1'\n        if (y) // if we have a set bit inc our counter\n            ++num_setbits;\n        n ^=y;  // erase the first occurrence of '1'\n    }\n    return num_setbits;\n}\n</code></pre>\n\n<p>If we assume that are inputs are 50% 1's and 50% 0's it appears that the second algorithm could be twice as fast. However, the actual complexity is greater:</p>\n\n<p>In method one we do the following for each bit:\n1 add\n1 and\n1 shift</p>\n\n<p>In method two we do the following for each set bit:\n1 and\n1 complement\n1 subtraction (the result of the subtraction has to be copied to another reg)\n1 compare\n1 increment (if compare is true)\n1 XOR</p>\n\n<p>Now, in practice one can determine which algorithm is faster by performing some profiling. That is, using a stop watch mechanism and some test data and call each algorithm say a million times.</p>\n\n<p>What I want to do first, however, is see how well I can estimate the speed difference by eyeballing the code (given same number of set and unset bits).</p>\n\n<p>If we assume that the subtraction takes the same amount cycles as the add (approximately), and all the other operations are equal cycle wise, can one conclude that each algorithm takes about the same amount of time?</p>\n\n<p>Note: I am assuming here we cannot use lookup tables.</p>\n"}, {"tags": ["c++", "objective-c", "c"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1486588050, "post_id": 42123595, "comment_id": 71415317, "body": "&quot;T...EX...T.M.E.SS.A.G.EE..&quot; has 26 chars. Your counter goes up to 31."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486588081, "post_id": 42123595, "comment_id": 71415332, "body": "How long is <code>secret</code>? And how many elements you are trying to index in the loop?"}, {"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486588091, "post_id": 42123595, "comment_id": 71415337, "body": "Well for starters, <code>secret</code> has 26 characters in it, but you iterate through 31."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486588106, "post_id": 42123595, "comment_id": 71415345, "body": "@EugeneSh. <code>secret</code> is defined above, and is surprisingly ... too short."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588207, "post_id": 42123595, "comment_id": 71415399, "body": "@Jean-Fran&#231;oisFabre It was a rhetorical question :) To trigger the thinking process."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486588217, "post_id": 42123595, "comment_id": 71415407, "body": "also <code>pow(2,counter)</code> is a float. You should multiply-accumulate by 2 or lshift in your loop so you get the integer computation for free."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1486588299, "post_id": 42123595, "comment_id": 71415448, "body": "<code>long lnum=counter==0?1:pow(2,counter);</code> ==&gt; <code>long lnum = 1 &lt;&lt; counter;</code>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1486588333, "post_id": 42123595, "comment_id": 71415476, "body": "And don&#39;t abuse the ternary operator."}, {"owner": {"reputation": 11, "user_id": 7536256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1839707112965866/picture?type=large", "display_name": "Shariar Islam", "link": "https://stackoverflow.com/users/7536256/shariar-islam"}, "edited": false, "score": 0, "creation_date": 1486588335, "post_id": 42123595, "comment_id": 71415479, "body": "sorry secret variable should be &quot;D....E.AD.B...E.E.F....F!.X..2..&quot;"}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1486588722, "post_id": 42123595, "comment_id": 71415704, "body": "<a href=\"http://ideone.com/XNfAyU\" rel=\"nofollow noreferrer\">cannot reproduce</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594616, "post_id": 42123595, "comment_id": 71418489, "body": "If you declared the <code>secret</code> text as an array, you could use <code>sizeof(secret) - 1</code> instead of the constant 3` in you <code>for</code> loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594766, "post_id": 42123595, "comment_id": 71418559, "body": "This statement is bothering me: <code>charec==46?funca(a,lnum):NULL;</code>.  Your code would be much clearer if you used <code>if (charec == &#39;.&#39;) {funca(a,lnum);}</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594833, "post_id": 42123595, "comment_id": 71418588, "body": "Your code may be more efficient if you used <code>(1 &lt;&lt; counter)</code> instead of <code>pow(2, counter)</code>.  Some compiler may optimize this at higher optimization settings."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1486594875, "post_id": 42123595, "comment_id": 71418606, "body": "If you need to use <code>#define</code> to shorten types, take a keyboarding / typing class."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7536256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1839707112965866/picture?type=large", "display_name": "Shariar Islam", "link": "https://stackoverflow.com/users/7536256/shariar-islam"}, "edited": false, "score": 0, "creation_date": 1486589927, "post_id": 42123851, "comment_id": 71416306, "body": "Thanks for the suggestions  :D"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1486588979, "creation_date": 1486588979, "answer_id": 42123851, "question_id": 42123595, "link": "https://stackoverflow.com/questions/42123595/getting-segmentation-fault-when-using-pow-xor-or-pointer-in-c/42123851#42123851", "title": "Getting Segmentation fault when using pow, XOR or pointer in C", "body": "<p>You have a null pointer</p>\n\n<pre><code>unsint *a = 0;\n</code></pre>\n\n<p>and you never point <code>a</code> at anything, so when you dereference it, you crash.</p>\n\n<p>You should also not throw floating point into the mix (<code>pow(2,0)</code> is 1, by the way, so you don't need a special case), and you shouldn't abuse the ternary operator or use non-portable ASCII codes when you can use portable character literals.</p>\n\n<p>I suggest something like this:</p>\n\n<pre><code>int main() {\n    unsigned int a = 0;\n    for (unsigned int counter = 0; counter &lt;= 31; counter++) {\n        if (secret[counter] == '.') {\n            a ^= 1 &lt;&lt; counter;\n        }\n    }\n    printf(\"\\nresult: %u\\n\",a);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7536256, "user_type": "registered", "profile_image": "https://graph.facebook.com/1839707112965866/picture?type=large", "display_name": "Shariar Islam", "link": "https://stackoverflow.com/users/7536256/shariar-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 42123851, "answer_count": 1, "score": -4, "last_activity_date": 1486591394, "creation_date": 1486587971, "last_edit_date": 1486591394, "question_id": 42123595, "link": "https://stackoverflow.com/questions/42123595/getting-segmentation-fault-when-using-pow-xor-or-pointer-in-c", "title": "Getting Segmentation fault when using pow, XOR or pointer in C", "body": "<p>Can anyone please explain what's wrong? am just getting Segmentation fault. am using \"gcc code.c -o code -lm\" to compile it.</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef unsigned int unsint;\nconst char* secret=\"E...EA...WSC..OP.S.EE.SSA.C....A\";\n\nvoid funca(unsint* a, unsint b) {*a^=b;}\n\nint main() {   \n        unsint *a = 0;\n        for (int counter=0;counter&lt;=31;counter++) {\n                char charec=secret[counter];  \n                long lnum=counter==0?1:pow(2,counter);\n                charec==46?funca(a,lnum):NULL;\n        }\n        printf(\"\\nresult: %u\\n\",a);\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 7, "creation_date": 1486587658, "post_id": 42123488, "comment_id": 71415105, "body": "Array of structures. I&#39;ll leave the google-fu to you."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 3408117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f78e7a725a32325c9cb43333c0abba7?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/3408117/james"}, "edited": false, "score": 0, "creation_date": 1486590505, "post_id": 42124003, "comment_id": 71416603, "body": "Thanks a mill! I was thinking it was that but I was hoping there was a simpler way of doing it thanks"}], "tags": [], "owner": {"reputation": 13741, "user_id": 1624376, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/OkgmJ.png?s=128&g=1", "display_name": "Aubin", "link": "https://stackoverflow.com/users/1624376/aubin"}, "is_accepted": true, "score": 1, "last_activity_date": 1486589482, "creation_date": 1486589482, "answer_id": 42124003, "question_id": 42123488, "link": "https://stackoverflow.com/questions/42123488/how-do-you-store-two-pieces-of-info-about-a-user-when-you-have-multiple-users-in/42124003#42124003", "title": "How do you store two pieces of info about a user when you have multiple users in c", "body": "<p>Define a record type:</p>\n\n<pre><code>typedef struct Info_s {\n   char  n[6];\n   int   a;\n   int   b;\n} Info_t;\n</code></pre>\n\n<p>Define an array type:</p>\n\n<pre><code>typedef Info_t allInfo_t[12];\n</code></pre>\n\n<p>Declare a variable of that type:</p>\n\n<pre><code>allInfo_t myInfo;\n</code></pre>\n\n<p>Take a look at <a href=\"http://www.cplusplus.com/reference/cstdlib/qsort/\" rel=\"nofollow noreferrer\">qsort()</a> to maintain the array sorted and <a href=\"http://www.cplusplus.com/reference/cstdlib/bsearch/\" rel=\"nofollow noreferrer\">bsearch()</a> to search quickly into the array. Don't forget to implement a function to compare <code>Info_t</code>.</p>\n"}], "owner": {"reputation": 103, "user_id": 3408117, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f78e7a725a32325c9cb43333c0abba7?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/3408117/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 42124003, "answer_count": 1, "score": 0, "last_activity_date": 1486589482, "creation_date": 1486587549, "question_id": 42123488, "link": "https://stackoverflow.com/questions/42123488/how-do-you-store-two-pieces-of-info-about-a-user-when-you-have-multiple-users-in", "title": "How do you store two pieces of info about a user when you have multiple users in c", "body": "<p>i dont really have much experience with c but how would i go about storing two pieces of info about a user when you have multiple users in c. Im getting player name and player type. I need to shuffle them individually e.g. sort names alphabetically etc. Thanks in advance :)</p>\n"}, {"tags": ["c++", "c", "enums"], "answers": [{"comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1486588752, "post_id": 42123588, "comment_id": 71415720, "body": "Hey that&#39;s brilliant.  I came up with something based on this idea."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 3, "last_activity_date": 1486587947, "creation_date": 1486587947, "answer_id": 42123588, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42123588#42123588", "title": "How can I convert an enum to a string automatically", "body": "<p>You can't convert an <code>enum</code> to text or text to <code>enum</code> <em>automatically</em>, as <code>enum</code> identifiers only exist during compilation and not during run-time.  </p>\n\n<p>The best methods are table lookup or <code>std::map</code>.  </p>\n\n<p>I use a table lookup since I can make the table <code>static</code> and <code>const</code> and have it initialized before <code>main</code>.</p>\n\n<pre><code>struct Enum_Entry\n{\n  int enum_value;\n  const char * enum_text;\n};\n\nstatic const Enum_Entry enum_table[] = \n{\n  {GT_UNKNOWN, \"GT_UNKNOWN\"},\n  //...\n};\nstatic const unsigned int table_capacity =\n    sizeof(enum_table) / sizeof(enum_table[0]);\n</code></pre>\n\n<p>By having both the <code>enum</code> value and the text in the same table, the one table can be used for converting text to <code>enum</code> and <code>enum</code> to text.<br>\nWhen using a <code>std::map</code>, one of the conversion directions is not very efficient.  </p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1486589089, "last_edit_date": 1486589089, "creation_date": 1486588737, "answer_id": 42123792, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42123792#42123792", "title": "How can I convert an enum to a string automatically", "body": "<p>In C, at least, you can use a variant on your proposed solution that does not require your enum values to be without holes or to be expressed in order.  C has designated initializers by which you can initialize specified elements of your array.  To wit:</p>\n\n<pre><code>#define STRINGIFY(x) #x\n\nenum c { X, Y = 3, Z = 1 };\n\nstatic const char * E_NAME[] = {\n   [X] = STRINGIFY(X),\n   [Y] = STRINGIFY(Y),\n   [Z] = STRINGIFY(Z)\n};\n\nconst char *e_name(enum c x) {\n    return E_NAME[x];\n}\n</code></pre>\n\n<p>If you want to avoid repeating the list of enum constants, that would be amenable to an X macro treatment:</p>\n\n<pre><code>#define STRINGIFY(x) #x\n\n#define ENUM_ELEMENTS E(X,), E(Y,=3), E(Z,=1)\n\n#define E(c, i) c i\nenum c {\n    ENUM_ELEMENTS\n};\n#undef E\n\n#define E(c, i) [c] = STRINGIFY(c)\nstatic const char *E_NAME[] = {\n    ENUM_ELEMENTS\n};\n#undef E\n\nconst char *e_name(enum c x) {\n    return E_NAME[x];\n}\n</code></pre>\n\n<p>Whether the X macro version helps is debatable; certainly it would be more of an advantage if the number of enum elements were greater.</p>\n"}, {"comments": [{"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1486589213, "post_id": 42123836, "comment_id": 71415958, "body": "The problem with this is I&#39;d be meddling with or redefining an existing header.  This is a lot of work when the header is already very large.  The enum is already defined in the SDK header file so I&#39;ll get errors right off the bat."}, {"owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "edited": false, "score": 0, "creation_date": 1486590735, "post_id": 42123836, "comment_id": 71416702, "body": "Sorry about the accidental edit.  But thanks for you answer.  It could still prove useful for someone."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": false, "score": 1, "last_activity_date": 1486590672, "last_edit_date": 1486590672, "creation_date": 1486588911, "answer_id": 42123836, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42123836#42123836", "title": "How can I convert an enum to a string automatically", "body": "<p>You can build this in this way:</p>\n\n<pre><code>#define NODEGRAPHTYPES \\\n    NODE_GRAPH_TYPE(GT_UNKNOWN          , 0)\\\n    NODE_GRAPH_TYPE(GT_STANDARD         , 1)\\\n    NODE_GRAPH_TYPE(GT_APP_SETTINGS     , 3)\\\n    NODE_GRAPH_TYPE(GT_GEOMETRYARCHIVE  , 2)\\\n    NODE_GRAPH_TYPE(GT_SCRIPTED         , 5)\\\n    NODE_GRAPH_TYPE(GT_SCRIPT_STORAGE   , 6)\\\n    NODE_GRAPH_TYPE(GT_PROJECT_SETTINGS , 4)\n</code></pre>\n\n<p>Then you can re-use this when defining an enum, and when defining the enum-to-text conversion like so:</p>\n\n<pre><code>enum NodeGraphType {\n#define NODE_GRAPH_TYPE(NAME, VALUE) NAME = VALUE,\n    NODEGRAPHTYPES\n#undef NODE_GRAPH_TYPE\n};\n\nstatic const char *NodeGraphName(enum NodeGraphType type)\n{\n    switch (type) {\n#define NODE_GRAPH_TYPE(NAME, VALUE) case NAME: return #NAME;\n        NODEGRAPHTYPES\n#undef NODE_GRAPH_TYPE\n    }\n    return \"*Unknown*\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1486597465, "creation_date": 1486597465, "answer_id": 42125729, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically/42125729#42125729", "title": "How can I convert an enum to a string automatically", "body": "<p>Your existing header file can be leveraged to generate an X-macro like file. It is relatively easy to generate an intermediate file that consists of just has the <code>NODE_GRAPH_TYPE</code> lines based on the example you have provided.</p>\n\n<pre><code>grep '^ *NODE_GRAPH_TYPE' node_graph.h &gt; node_graphs.x\n</code></pre>\n\n<p>Then, you can create a include this intermediate file with your own definition of <code>NODE_GRAPH_TYPE</code> to define your table the way you want. Below illustrates the function call as in your first example.</p>\n\n<pre><code>static const char * NODE_GRAPH_NAME(enum NodeGraphType)\n{\n    switch(type)\n    {\n#   define NODE_GRAPH_TYPE(x, y) case x: return #x;\n#   include \"node_graphs.x\"\n#   undef NODE_GRAPH_TYPE\n    default: break;\n    }\n    return NULL;\n}\n</code></pre>\n"}], "owner": {"reputation": 30596, "user_id": 134702, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7c1594304f3515b88e31bc8888f0f593?s=128&d=identicon&r=PG", "display_name": "Matt Hook", "link": "https://stackoverflow.com/users/134702/matt-hook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 42123588, "answer_count": 4, "score": 1, "last_activity_date": 1486597465, "creation_date": 1486587250, "last_edit_date": 1495541345, "question_id": 42123397, "link": "https://stackoverflow.com/questions/42123397/how-can-i-convert-an-enum-to-a-string-automatically", "title": "How can I convert an enum to a string automatically", "body": "<p>This is an extension of the following <a href=\"https://stackoverflow.com/questions/9907160/how-to-convert-enum-names-to-string-in-c\">question</a> which already has great answers.</p>\n\n<p>However, in all answers where the expansion is carried out by the pre-processor the enums are declared in a special way under the same project.\nBut what if the header file that declares these enums is not your own or the enums are declared out of id order.</p>\n\n<p>In my case, I have an SDK that I'm using where large tables of enums are already declared in a separate header file like the following:</p>\n\n<pre><code>#define NODE_GRAPH_TYPE(_name, _enum)   _name = _enum,\nenum NodeGraphType\n{\n    // next available ID value is 7\n    NODE_GRAPH_TYPE(GT_UNKNOWN          , 0)\n    NODE_GRAPH_TYPE(GT_STANDARD         , 1)\n    NODE_GRAPH_TYPE(GT_APP_SETTINGS     , 3)\n    NODE_GRAPH_TYPE(GT_GEOMETRYARCHIVE  , 2)\n    NODE_GRAPH_TYPE(GT_SCRIPTED         , 5)\n    NODE_GRAPH_TYPE(GT_SCRIPT_STORAGE   , 6)\n    NODE_GRAPH_TYPE(GT_PROJECT_SETTINGS , 4)\n};\n</code></pre>\n\n<p>What I want to do is to try to avoid is this type of thing:</p>\n\n<pre><code>function NODE_GRAPH_NAME(int type)\n{\n  switch(type)\n  {\n    case: GT_PROJECT_SETTINGS:\n      return \"GT_PROJECT_SETTINGS\";\n    // ...\n  };\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>static const char* NODE_GRAPH_NAME[] = {\n  \"GT_UNKNOWN\",\n  /// ...    \n}\n</code></pre>\n\n<p>The best I've come up with this this so far:</p>\n\n<pre><code>#define STRINGIFY(_x) #_x\n\nstatic const char* NODE_GRAPH_NAME[] = {\n  STRINGIFY(GT_UNKNOWN),\n  STRINGIFY(GT_STANDARD),\n  STRINGIFY(GT_GEOMETRYARCHIVE),\n  STRINGIFY(GT_APP_SETTINGS)\n  // etc\n};\n</code></pre>\n\n<p>But it still requires me to duplicate all the tables of enums and not only that, but them in order and double check there are no holes.  </p>\n\n<p>Is there perhaps a more elegant and automated way to go about this?\nIf it helps, I'm actually compiling this under C++. But the library I'm linking to is pure C.  So you could do something fancy with templates perhaps.</p>\n\n<hr>\n\n<p><strong>Based on Thomas Matthews answer below, this is what I came up with the following:</strong></p>\n\n<p>Which isn't entirely automatic, but isn't too difficult to work with.\nIn redefining NODE_GRAPH_TYPE I can copy verbatim the table from the SDK header and place it into the NODE_GRAPH_TYPES table definition.\nAnd it works.  Then I can create a lookup function to locate the item I require.  The nice thing about this is that holes don't matter and neither do out of order definitions.</p>\n\n<pre><code>#undef NODE_GRAPH_TYPE\n#define NODE_GRAPH_TYPE(_name, _enum) { _enum, #_name },\n\nstatic const Enum_Entry NODE_GRAPH_TYPES[] = \n{\n   NODE_GRAPH_TYPE(GT_UNKNOWN          , 0)\n\n    NODE_GRAPH_TYPE(GT_STANDARD         , 1)\n    NODE_GRAPH_TYPE(GT_APP_SETTINGS     , 3)\n    NODE_GRAPH_TYPE(GT_GEOMETRYARCHIVE  , 2)\n    NODE_GRAPH_TYPE(GT_SCRIPTED         , 5)\n    NODE_GRAPH_TYPE(GT_SCRIPT_STORAGE   , 6)\n    NODE_GRAPH_TYPE(GT_PROJECT_SETTINGS , 4)\n};\n\nstatic const unsigned int NODE_GRAPH_TYPES_COUNT = \n    sizeof(NODE_GRAPH_TYPES) / sizeof(NODE_GRAPH_TYPES[0]);\n\nconst char* NODE_GRAPH_TYPE_NAME(int id)\n{    \n    for (int i = 0; i &lt; NODE_GRAPH_TYPES_COUNT; ++i){\n        if (PIN_TYPES[i].enum_value == id)\n            return PIN_TYPES[i].enum_text;\n    }\n    return \"Unknown\";\n} \n</code></pre>\n"}, {"tags": ["c", "stack-overflow", "variable-length-array"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1486587457, "post_id": 42123355, "comment_id": 71414970, "body": "<code>int (*a)[n];</code> is not a VLA.  It is a pointer to a VLA."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1486587463, "post_id": 42123355, "comment_id": 71414976, "body": "Why do you multiply <code>sizeof(*a)</code> by 4? Are you making an array of 100000000x4?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 1, "creation_date": 1486587521, "post_id": 42123355, "comment_id": 71415010, "body": "Besides, as chux has noted, <code>int (*a)[n]</code> is a pointer to a VLA, not itself a VLA."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1486587558, "post_id": 42123355, "comment_id": 71415035, "body": "It&#39;s context dependent (context = system + what the calls stack looks like when the VLA is created). It think it&#39;s a good idea to only use stack-backed arrays if the size is both fairly small (definitely 100B to 4096 tops) and transient (the frame will be popped soon). On Linux process stacks default to 8MiB I believe so you definitely can&#39;t overflow that."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 0, "creation_date": 1486587636, "post_id": 42123355, "comment_id": 71415079, "body": "@dasblinkenlight, yes, edited (is just an example)"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1486587659, "post_id": 42123355, "comment_id": 71415106, "body": "@chux, makes sense!"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 1, "creation_date": 1486587665, "post_id": 42123355, "comment_id": 71415108, "body": "The general answer is no -- there&#39;s no portable way to find if VLAs could fail. The issue of potential allocation failure for VLA is applicable to any &quot;stack&quot; allocation as well (<i>automatic storage duration</i>).  Not sure how the 2nd segment is related to your question as it simply declares a pointer (to an array)."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1486588174, "post_id": 42123355, "comment_id": 71415383, "body": "It seems like you&#39;re asking &quot;how do we prevent stack overflow&quot;.  VLAs are nothing special, the same problem exists for any automatic allocation. (The comment you quote at the start is lame)"}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 6, "last_activity_date": 1486595256, "last_edit_date": 1592644375, "creation_date": 1486591882, "answer_id": 42124604, "question_id": 42123355, "link": "https://stackoverflow.com/questions/42123355/large-vla-overflow/42124604#42124604", "title": "Large VLA overflow", "body": "<p><code>int (*a)[n];</code> is not a VLA, but a pointer to a VLA.  So OP 2 examples are not a close enough comparison.</p>\n<hr />\n<p>As <a href=\"https://stackoverflow.com/questions/42123355/large-vla-overflow?noredirect=1#comment71415383_42123355\">@M.M</a> commented, preventing stack overflow is a problem with any automatic allocation.  Recursion can overly consume a stack.  Local large variables can overly consume a stack too.</p>\n<p>A VLA is simply one of the more likely to be used egregiously.</p>\n<pre><code>// Qualified use of VLA\nint len = snprintf(NULL, 0 &quot;%d&quot;, some_int);\nassert(len &gt; 0);\nchar vla_good[len+1];\nlen = snprintf(vla_good, len+1, &quot;%d&quot;, some_int);\n\n// Unqualified\nint x;\nscanf(&quot;%d&quot;, &amp;x);\nchar vla_bad[x];  // who knowns what x may be, did scanf() even work?\n</code></pre>\n<hr />\n<blockquote>\n<p>VLAs introduce more problems than they solve, because you never know if the declaration is going to crash for x being too large for the stack.</p>\n<p>Can we determine if the use of a VLA is dangerous?</p>\n</blockquote>\n<p><strong>Use the right tool for the task.</strong>  Usually a worst-case small fixed-sized arrays will do.  VLAs have limited uses.  Robust code would insure the array element count is not foolish before declaring a VLA.</p>\n<p>Note that VLA, available since C99 is optionally supported in C11.</p>\n<p>VLA are not bad, they are <a href=\"https://en.wikipedia.org/wiki/Jessica_Rabbit#.22I.27m_not_bad._I.27m_just_drawn_that_way..22\" rel=\"nofollow noreferrer\">just drawn that way</a>.</p>\n"}], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 42124604, "answer_count": 1, "score": 3, "last_activity_date": 1486595256, "creation_date": 1486587113, "last_edit_date": 1486587606, "question_id": 42123355, "link": "https://stackoverflow.com/questions/42123355/large-vla-overflow", "title": "Large VLA overflow", "body": "<p>Based on a comment of someone in another thread:</p>\n\n<blockquote>\n  <p>VLAs introduce more problems than they solve, because you never know\n  if the declaration is going to crash for x being too large for the\n  stack.</p>\n</blockquote>\n\n<p>This code will overflow because <code>sizeof(a)</code> is too long for the stack:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int n = 100000000;\n    int a[4][n];\n\n    printf(\"%zu\\n\", sizeof(a));\n\n    return 0;\n}\n</code></pre>\n\n<p>But this one can not because <code>sizeof(a)</code> is 8 (the size of a pointer in my computer):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    int n = 100000000;\n    int (*a)[n];\n\n    printf(\"%zu\\n\", sizeof(a));\n    a = malloc(sizeof(*a) * 4);\n    free(a);\n    return 0;\n}\n</code></pre>\n\n<p>Is my assumption correct?</p>\n\n<p>Can we determine if the use of a VLA is dangerous or not (may overflow) based on the <code>sizeof</code> the object?</p>\n"}, {"tags": ["c", "casting", "buffer", "shift"], "comments": [{"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1486586948, "post_id": 42123293, "comment_id": 71414695, "body": "If both elements of <code>buffer</code> are <code>uint8_t</code>, <code>mp3_stereo_buffer</code> should be <code>uint16_t</code>. For <code>int16_t</code>, the most significant bit is the sign bit, and when set, results in a negative number."}, {"owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1486587438, "post_id": 42123293, "comment_id": 71414957, "body": "@FiddlingBits so if I change mp3_stereo_buffer to uint16_t won&#39;t it remain unsigned?"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1486587578, "post_id": 42123293, "comment_id": 71415045, "body": "@sam The context of your code is very limited, so it&#39;s difficult to understand exactly what your requirements and restraints are. To answer your question, though, C will interpret an <code>uint16_t</code> variable always as that, unless you cast it of course."}], "answers": [{"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 1, "last_activity_date": 1486589105, "last_edit_date": 1486589105, "creation_date": 1486587911, "answer_id": 42123580, "question_id": 42123293, "link": "https://stackoverflow.com/questions/42123293/casting-and-shifting-to-from-uint16-t-to-int16-t/42123580#42123580", "title": "casting and shifting to from uint16_t to int16_t", "body": "<p>First, you can pack N <code>uint8_t</code> into N/2 <code>uint16_t</code> elements.</p>\n\n<pre><code>uint8_t buffer[BUFFER_SIZE];\nuint16_t mp3_stereo_buffer[BUFFER_SIZE / 2];\n</code></pre>\n\n<p>Then you need to know if your data is little-endian or big-endian.</p>\n\n<p><strong>For little-endian:</strong></p>\n\n<pre><code>for (i = 0; i &lt; BUFFER_SIZE / 2; i++) {\n  mp3_stereo_buffer[i] = (uint16_t) (buffer[i*2] | (buffer[i*2+1] &lt;&lt; 8));\n}\n</code></pre>\n\n<p><strong>For big-endian:</strong></p>\n\n<pre><code>for (i = 0; i &lt; BUFFER_SIZE / 2; i++) {\n  mp3_stereo_buffer[i] = (uint16_t) ((buffer[i*2] &lt;&lt; 8) | buffer[i*2+1]);\n}\n</code></pre>\n\n<p>p.s. If your data is in fact signed, then you can change the type and the casting to <code>int16_t</code> but beware that the way signed numbers are represented is not guaranteed to be portable.</p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 3889119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927b78a99d4950f6a34afdd7efc3da95?s=128&d=identicon&r=PG&f=1", "display_name": "Koorosh Hajiani", "link": "https://stackoverflow.com/users/3889119/koorosh-hajiani"}, "is_accepted": false, "score": 0, "last_activity_date": 1486689541, "creation_date": 1486689541, "answer_id": 42149936, "question_id": 42123293, "link": "https://stackoverflow.com/questions/42123293/casting-and-shifting-to-from-uint16-t-to-int16-t/42149936#42149936", "title": "casting and shifting to from uint16_t to int16_t", "body": "<pre><code>#define LITTLE_ENDIAN\nint main()\n{\nuint8_t buffer[4]={0x15,0xff,0x63,0xee};\nint16_t mp3_stereo_buffer[2];\n\nfor (int i = 0; i &lt; 2; i += 1) {\n    mp3_stereo_buffer[i] = ((int16_t*)buffer)[i];\n\n#ifdef LITTLE_ENDIAN\n    mp3_stereo_buffer[i]=(mp3_stereo_buffer[i]&gt;&gt;8 &amp;0x00ff) | (mp3_stereo_buffer[i]&lt;&lt;8 &amp; 0xff00);              \n#endif\n\n    printf(\"%x\\n\",mp3_stereo_buffer[i]&amp;0xffff);\n }\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4560454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a23e6117d9b6b06b76d7423fb83448f6?s=128&d=identicon&r=PG&f=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4560454/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2209, "favorite_count": 0, "accepted_answer_id": 42123580, "answer_count": 2, "score": 0, "last_activity_date": 1486689541, "creation_date": 1486586857, "last_edit_date": 1486591192, "question_id": 42123293, "link": "https://stackoverflow.com/questions/42123293/casting-and-shifting-to-from-uint16-t-to-int16-t", "title": "casting and shifting to from uint16_t to int16_t", "body": "<p>I have a noob question about casting and shifting. I'm trying to store two elements of <code>uint8_t</code> from an array as a single, signed element in an array of type <code>int16_t</code>.  However my result is not correct, and I' don't know why.</p>\n\n<p>I have this code:</p>\n\n<pre><code>uint8_t buffer[BUFFER_SIZE];\nint16_t mp3_stereo_buffer[BUFFER_SIZE];\n\nfor (i = 0; i &lt; BUFFER_SIZE; i += 2) {\n    mp3_stereo_buffer[i] = ((uint16_t)buffer[i] &lt;&lt; 8) | ((uint16_t)buffer[i + 1]);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "atmelstudio"], "comments": [{"owner": {"reputation": 1381, "user_id": 4381807, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i4GHo.gif?s=128&g=1", "display_name": "Anty", "link": "https://stackoverflow.com/users/4381807/anty"}, "edited": false, "score": 2, "creation_date": 1486585678, "post_id": 42122934, "comment_id": 71413990, "body": "You have not allocated memory."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 3, "creation_date": 1486585883, "post_id": 42122934, "comment_id": 71414115, "body": "You are not &quot;Assigning Value to Pointer&quot;. You are trying to assign a value to the <code>uint8_t</code> location your pointer is supposedly <i>pointing to</i>. But it isn&#39;t really pointing anywhere. The pointer is uninitialized."}], "answers": [{"tags": [], "owner": {"reputation": 3433, "user_id": 720934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z1OSE.jpg?s=128&g=1", "display_name": "hoodaticus", "link": "https://stackoverflow.com/users/720934/hoodaticus"}, "is_accepted": true, "score": 1, "last_activity_date": 1486585744, "creation_date": 1486585744, "answer_id": 42122998, "question_id": 42122934, "link": "https://stackoverflow.com/questions/42122934/assigning-value-to-pointer-leads-to-hard-fault/42122998#42122998", "title": "Assigning Value to Pointer Leads to Hard Fault", "body": "<p>vald is uninitialized, which means it's either zero or undefined depending on whether your compiler clears the stack frame for local variables.  Writing to address zero is always an error, and writing to an undefined address is almost always an error.</p>\n\n<pre><code>*((uint8_t*)0) = 46;\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 2490016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c88097a262993280331d6f072f3e83?s=128&d=identicon&r=PG", "display_name": "keithcaskey", "link": "https://stackoverflow.com/users/2490016/keithcaskey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 42122998, "answer_count": 1, "score": 1, "last_activity_date": 1486585744, "creation_date": 1486585536, "question_id": 42122934, "link": "https://stackoverflow.com/questions/42122934/assigning-value-to-pointer-leads-to-hard-fault", "title": "Assigning Value to Pointer Leads to Hard Fault", "body": "<p>I have narrowed the issue of a larger bug to something seemingly simple.</p>\n\n<pre><code>uint8_t *vald;\n*vald=46;\n</code></pre>\n\n<p>This couplet of code leads to a hard fault on my platform (Atmel Studio, GCC)</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["java", "c++", "c", "struct", "jna"], "comments": [{"owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "edited": false, "score": 0, "creation_date": 1486588350, "post_id": 42122862, "comment_id": 71415484, "body": "What does your attempt get you? An Error? Unexpected Result?"}, {"owner": {"reputation": 21, "user_id": 7536262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed241425ab8a0aac5f4a5fe2be848321?s=128&d=identicon&r=PG&f=1", "display_name": "benayedh", "link": "https://stackoverflow.com/users/7536262/benayedh"}, "reply_to_user": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "edited": false, "score": 0, "creation_date": 1486637371, "post_id": 42122862, "comment_id": 71435644, "body": "I get an expected result: System.out.println(&quot;Struct2.struct1_Nbr == &quot; + struct2.struct1_Nbr); returns Struct2.struct1_Nbr == 0. so I have an exeption in this instruction &quot;Struct1[] struct1_array= (Struct1[])(struct2.struct1_elements).toArray(struct2.struct&zwnj;&#8203;1_Nbr);&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 1, "creation_date": 1487089287, "post_id": 42145777, "comment_id": 71621836, "body": "Using <code>String</code> to represent an arbitrary block of data is a bad idea."}], "tags": [], "owner": {"reputation": 739, "user_id": 7453308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fab68a8d04cc8d75b37d3ae6e31dc13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7453308/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1486670421, "creation_date": 1486670421, "answer_id": 42145777, "question_id": 42122862, "link": "https://stackoverflow.com/questions/42122862/how-to-pass-a-struct-containing-char-in-java-using-jna-and-avoiding-the-data-co/42145777#42145777", "title": "How to pass a struct containing char* in java using JNA and avoiding the data copy?", "body": "<p>Here is my Solutiuon, first Draft:</p>\n\n<ol>\n<li><p>Declare a Class in java that extends Structure </p>\n\n<blockquote>\n  <p><strong>(com.sun.jna.Structure)</strong></p>\n</blockquote>\n\n<p>(all fields in the class <strong>must</strong> be public or you get an error, that the size of the structure extended class can't be measured)</p>\n\n<pre><code>public class Struct1 extends Structure{\n    public int Size;\n    public String Data;  \n}\n</code></pre></li>\n<li><p>Declare and define a method in the C Dll, that takes a pointer to the structure as an argument (I created a structure and filled it with values for testing)</p>\n\n<pre><code>void __declspec(dllexport) GetStruct(Struct1* a){\nStruct1 s;\ns.Size = 9;\ns.Data = \"Output\";\n*a = s;\n}\n</code></pre></li>\n<li><p>I assume that you already successfully connected the java app to the c dll, so i skip that part(if my assumption is wrong, tell me in the comments and i edit my answer)</p></li>\n<li><p>If you add these lines to your java code (note cdll is the handle to my C library)</p>\n\n<pre><code>Struct1 test = new Struct1();\ncdll.GetStruct(test);\nSystem.out.println(\"Struct1: \" + test.Size + \" \" + test.Data);\n</code></pre></li>\n</ol>\n\n<p>You should get the data from the Structure s in the C Dll.</p>\n"}, {"tags": [], "owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "is_accepted": false, "score": 0, "last_activity_date": 1487012413, "creation_date": 1487012413, "answer_id": 42211528, "question_id": 42122862, "link": "https://stackoverflow.com/questions/42122862/how-to-pass-a-struct-containing-char-in-java-using-jna-and-avoiding-the-data-co/42211528#42211528", "title": "How to pass a struct containing char* in java using JNA and avoiding the data copy?", "body": "<p>If the Data field points to arbitrary data, use a <code>Pointer</code>.  If the native side allocates, then you do nothing.  If the Java side allocates, use a <code>Memory</code> object assigned to that field.</p>\n\n<p>As for the <code>struct*</code> and <code>struct**</code>, it'd be useful to see some native code using those constructs in order to tell what they represent, since there is some ambiguity (<code>struct*</code> could be a pointer to a single struct, or a pointer to a contiguous array of them).  <code>struct**</code> could be storage allocated for the return of a <code>struct*</code>, or it may be something else.</p>\n"}], "owner": {"reputation": 21, "user_id": 7536262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed241425ab8a0aac5f4a5fe2be848321?s=128&d=identicon&r=PG&f=1", "display_name": "benayedh", "link": "https://stackoverflow.com/users/7536262/benayedh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 703, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1487012413, "creation_date": 1486585292, "question_id": 42122862, "link": "https://stackoverflow.com/questions/42122862/how-to-pass-a-struct-containing-char-in-java-using-jna-and-avoiding-the-data-co", "title": "How to pass a struct containing char* in java using JNA and avoiding the data copy?", "body": "<p>I am writing a java application that will access to C++ dll usnig JNA. So I prepared a C dll to communicate between the JNA and C++ thrid party dll. I have these two structs:</p>\n\n<p>C code:</p>\n\n<pre><code>    struct Struct1\n    {\n    uint32_t Size;\n    unsigned char* Data;\n    };\n    struct Struct2\n    {\n    uint32_t Struct1_Nbr;\n    Struct1* struct1_elements;\n    };\n    bool Open(char* fileName, Struct2** struct2);\n</code></pre>\n\n<p>Now I am writing the corresponding JNA code in java application and I want to access the \"unsigned char* Data\" without copying this data as it is a large amount of Data.\nHow can I use the \"Memory\" or the \"Pointer\" JNA types to do this task?</p>\n\n<p>Here is my attempt: </p>\n\n<pre><code>    public class Test\n    {\n    public static class Struct1 extends com.sun.jna.Structure {        \n    public Struct1(){}\n    public Struct1(Pointer pointer){\n        super(pointer);\n        read();\n    }\n\n    public static class Struct1ByValue extends Struct1 implements com.sun.jna.Structure.ByValue{};\n    public int Size;\n    public Memory Data;\n    public static class Struct1ByReference extends Struct1 implements com.sun.jna.Structure.ByReference{}\n\n    @Override\n    protected List getFieldOrder() {\n        // TODO Auto-generated method stub\n        return Arrays.asList(\"Size\", \"Data\");\n    };\n\npublic static class Struct2 extends com.sun.jna.Structure {    \n    public Struct2 (){}\n    public Struct2 (Pointer pointer){\n        super(pointer);\n        read();\n    }\n    public int Struct2_Nbr;\n    public Struct1.Struct1ByReference struct1_elements = new Struct1.Struct1ByReference();\n\n    public static class Struct2ByValue extends Struct2 implements com.sun.jna.Structure.ByValue{};\n    public static class Struct2ByReference extends Struct2  implements com.sun.jna.Structure.ByReference{}\n\n    @Override\n    protected List getFieldOrder() {\n        // TODO Auto-generated method stub\n        return Arrays.asList(\"Struct1_Nbr\", \"struct1_elements\"));\n    };\n}\n    public interface StructureProtocol extends com.sun.jna.Library{\n    Boolean Open(String fileName, PointerByReference struct2);\n    }\n    public StructureProtocol lib;\n    public Test(){\n    this.lib = (StructureProtocol) Native.loadLibrary(\"TestAPI\", StructureProtocol.class);\n}\n\n    public static void main(String[] args) {\n\n            Test test = new Test();\n    PointerByReference pref = new PointerByReference();\n\n    test.lib.Open(\"filePath\", pref);\n    Pointer ptr = pref.getValue();\n    Struct2 struct2= new Struct2(ptr);\n    Struct1[] struct1_array= (Struct1[])(struct2.struct1_elements).toArray(struct2.struct1_Nbr);\n    System.out.println(\"struct1_array[0]: Size = \" + struct1_array[0].Size);\n    System.out.println(\"struct1_array[0]: Data= \" + struct1_array[0].Data);\n    }\n    }\n</code></pre>\n\n<p>Any advice would be very appreciated.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 2, "creation_date": 1486585416, "post_id": 42122819, "comment_id": 71413835, "body": "What radius values did you enter? I just ran your code and it appears to work [I get non-zero output and 3.141592635389 for radius of 1]"}, {"owner": {"reputation": 234, "user_id": 5696554, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10203997152048831/picture?type=large", "display_name": "mychemicalro", "link": "https://stackoverflow.com/users/5696554/mychemicalro"}, "edited": false, "score": 0, "creation_date": 1486585500, "post_id": 42122819, "comment_id": 71413892, "body": "Same here, everything looks ok"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1486585537, "post_id": 42122819, "comment_id": 71413906, "body": "Do you by chance run it from an IDE, where stdin is not connected to an input source (i.e. instantly EOF)?"}, {"owner": {"reputation": 1253, "user_id": 4036218, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a98b5cd8145186c7adb64f0a87c9769?s=128&d=identicon&r=PG&f=1", "display_name": "DanielG", "link": "https://stackoverflow.com/users/4036218/danielg"}, "edited": false, "score": 0, "creation_date": 1486585639, "post_id": 42122819, "comment_id": 71413976, "body": "Yes, it is correct code-wise."}, {"owner": {"reputation": 20345, "user_id": 6094348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JPVct.jpg?s=128&g=1", "display_name": "Yousaf", "link": "https://stackoverflow.com/users/6094348/yousaf"}, "edited": false, "score": 0, "creation_date": 1486585707, "post_id": 42122819, "comment_id": 71414014, "body": "Apparently everything looks okay but i ran it on code::blocks and it&#39;s outputting Zero everytime"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 1, "creation_date": 1486587090, "post_id": 42122819, "comment_id": 71414768, "body": "What is your compiler?"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486586687, "post_id": 42123076, "comment_id": 71414556, "body": "You are right. A surprising result indeed. Stupid MS."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486586759, "post_id": 42123076, "comment_id": 71414591, "body": "No problem with posted code in MSVC in which <code>long double</code> is the same as <code>double</code>. Correct result."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1486586829, "post_id": 42123076, "comment_id": 71414627, "body": "@WeatherVane I&#39;ve verified it with mingw-w64. The behavior is as described."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486586885, "post_id": 42123076, "comment_id": 71414662, "body": "@EugeneSh. MingW is not in the question. If it is faulty that is another issue."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486586981, "post_id": 42123076, "comment_id": 71414713, "body": "@WeatherVane it&#39;s in the comments... oh wait. Not from the OP"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486587024, "post_id": 42123076, "comment_id": 71414735, "body": "@WeatherVane: I would guess that means MSVC compiler and MS C library knows to treat <code>long double</code> as <code>double</code>, but MinGW compiler does not. If <code>double</code> is 64 bits and MinGW uses 128 bits for <code>long double</code>, then the MS C library may do something strange."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486587118, "post_id": 42123076, "comment_id": 71414784, "body": "This all right off topic. Ask the OP. All I know is that MSVC handles the asked question correctly, even without full <code>long double</code> support."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1486587400, "post_id": 42123076, "comment_id": 71414932, "body": "(As I understand the situation,) it would be more precise to say that MinGW uses <code>MSVCRT.DLL</code>, which is <i>not</i> the C runtime used by current versions of Microsoft&#39;s compilers, has not been updated in a very long time (I don&#39;t actually know whether it supports <code>long double</code> but a claim that it doesn&#39;t is totally plausible to me), and which Microsofties will tell you <i>nobody</i> is supposed to use anymore; however, it is also the only C runtime that ships with Windows, so <code>&#175;\\_(\u30c4)_&#47;&#175;</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1486693261, "post_id": 42123076, "comment_id": 71467213, "body": "@EugeneSh. build with <code>__USE_MINGW_ANSI_STDIO=1</code>"}], "tags": [], "owner": {"reputation": 611, "user_id": 3578875, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jE2Nl.jpg?s=128&g=1", "display_name": "utsav_deep", "link": "https://stackoverflow.com/users/3578875/utsav-deep"}, "is_accepted": false, "score": 4, "last_activity_date": 1486586069, "creation_date": 1486586069, "answer_id": 42123076, "question_id": 42122819, "link": "https://stackoverflow.com/questions/42122819/c-function-not-returning-correct-result/42123076#42123076", "title": "C function not returning correct result", "body": "<p>Your code works perfectly in gcc/g++ compiler but outputs 0.0000.... in case of mingw compiler. This is because mingw uses the Microsoft C library and I seem to remember that that this library has no support for 80bits long double (microsoft C compiler use 64 bits long double for various reasons).</p>\n\n<p>However if you use <code>double</code> instead of <code>long double</code>, then you will always get expected result.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1486693452, "creation_date": 1486693452, "answer_id": 42150462, "question_id": 42122819, "link": "https://stackoverflow.com/questions/42122819/c-function-not-returning-correct-result/42150462#42150462", "title": "C function not returning correct result", "body": "<p>Code::Blocks defaults to an old, buggy compiler.  This bug is fixed in <a href=\"http://mingw-w64.org\" rel=\"nofollow noreferrer\">mingw-w64</a> when compiling with the switch <code>-D__USE_MINGW_ANSI_STDIO=1</code>.</p>\n\n<p>You can <a href=\"https://sourceforge.net/projects/mingwbuilds/\" rel=\"nofollow noreferrer\">download and install</a> this compiler into Code::Blocks and then add that option to the compiler options; or put as the first line of your source code:</p>\n\n<pre><code>#define __USE_MINGW_ANSI_STDIO 1\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7536637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17932f903717ec4aeae94d3e628d5537?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/7536637/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486699117, "creation_date": 1486585114, "last_edit_date": 1486699117, "question_id": 42122819, "link": "https://stackoverflow.com/questions/42122819/c-function-not-returning-correct-result", "title": "C function not returning correct result", "body": "<p>I am a beginner of programming, I could not figure out what is wrong with the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void)\n{\nlong double radius = 0.0L;\nlong double area = 0.0L;\nconst long double pi = 3.1415926353890L;\nprintf(\"please give the radius \");\nscanf(\"%Lf\", &amp;radius);\narea = pi * radius * radius;\nprintf(\"Area of circle with radius %.3Lf is %.12Lf\\n\", radius,\narea);\nreturn 0;\n}\n</code></pre>\n\n<p>This is actually copied directly from a tutorial, when I ran it, I got 0.000000000000 for area, I tried to change to initialized value of area, but the result did not change, can someone tell me what is wrong here?</p>\n\n<p>Update: I ran it in code::blocks, GNU GCC compiler. I tried 5 as the radius, the radius was printed out correctly, but the area was 0.000.......</p>\n\n<p>Changing from long double to double fixed the issue...</p>\n"}, {"tags": ["c", "string", "find-occurrences"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486583348, "post_id": 42122300, "comment_id": 71412657, "body": "Please ask a more specific question. Are you having issues with your current code? What is it&#39;s behaviour and what specific problem are you unable to solve with respect to that code?"}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486583491, "post_id": 42122300, "comment_id": 71412728, "body": "1. i dont know how to print out the endindex of the first occurence. i could solve it with breaking out of the for loop but then i have to put all occurences into a third string. so i couldnt go on because with the break, i could not &quot;collect&quot; all occurences"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486583546, "post_id": 42122300, "comment_id": 71412772, "body": "If you can <code>#include &lt;string.h&gt;</code> and use <code>strlen()</code> then you can use <code>strstr()</code> which will easily solve the first problem with some pointer arithmetic added. In the second point, what should happen if the matching substrings overlap? If the first match takes priority, what if there is <i>still</i> an overlap after replacement?"}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486583680, "post_id": 42122300, "comment_id": 71412842, "body": "ok, can you just describe, how i can solve the problem with strstr() ? i think i can solve the rest when i find out how to solve the first point corectly"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486583775, "post_id": 42122300, "comment_id": 71412895, "body": "<code>strstr</code> returns a pointer to the first occurence of the substring. Then some arithmetic to work out the end index of that. Over to you ;) .... but if you are supposed to <i>replace</i> a substring with another, you cannot easily do that without creating a new string, if the replacement has different length.."}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486584218, "post_id": 42122300, "comment_id": 71413188, "body": "substring is not a problem, all strings are allowed to have the same size. my problem is now the strstr function. i try to solve it now. thank you :)"}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486585301, "post_id": 42122300, "comment_id": 71413770, "body": "if my strings are like this : string1 = &quot;hellotxk&quot;          and string2 = &quot;stbcwert&quot;     then what ist the endindex of the first occurence? maybe i dont understand this part. can somebody tell me this?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1486585737, "post_id": 42122300, "comment_id": 71414030, "body": "<code>&quot;stbcwert&quot;</code> does not occur in <code>&quot;hellotxk&quot;</code>, so the result should indicate a &quot;not found&quot;-situation. A solution would be to return <code>-1</code> if string2 is not contained in string1."}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486585833, "post_id": 42122300, "comment_id": 71414087, "body": "thanks, can you give me an example of two strings pleace?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1486586048, "post_id": 42122300, "comment_id": 71414192, "body": "You are quite new to programming at all, right? Not a problem, of course. Let me help you with <code>endidx</code>; maybe you can get then ahead with the replace-thing. Await an aswer, please..."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486586936, "post_id": 42123167, "comment_id": 71414686, "body": "thank you very much, i have one question. you said it should be 11. but at this point there is &quot;!&quot;. at [10] there is the last &quot;d&quot; of &quot;hello world&quot;. is that not the endindex of str?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486587052, "post_id": 42123167, "comment_id": 71414751, "body": "I was not sure if the end index shall point to the first character after the occurrence or at the last. In the latter case write <code>result = (occurrence - str) + strlen(searchTerm) - 1</code>."}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486587215, "post_id": 42123167, "comment_id": 71414839, "body": "i am not sure too. can you speak german? i translated it from german : &quot;schreiben sie ein programm, dass eine Funktion enth&#228;lt, die einen String in einem zweiten String sucht und den Endindex des ersten Vorkommens zur&#252;ckgibt.&quot; sorry if you are not german but your name sounds like a german name :D"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486587517, "post_id": 42123167, "comment_id": 71415008, "body": "Yes, I speak german :-) I&#39;d vote for the last character, i.e. <code>result = (occurrence - str) + strlen(searchTerm) - 1</code>."}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486638532, "post_id": 42123167, "comment_id": 71436376, "body": "ok i dont understand the part : result = (occurrence - str) + strlen(searchTerm) - 1      ;;;     i dont understand how i can subtract two char* datatypes. .......         for example those two strings :                            char *string1 = &quot;12345678&quot;; \tchar *string2 = &quot;123&quot;; \tint result = (string1 - string2);          result equals -9 and i dont understand why."}, {"owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "edited": false, "score": 0, "creation_date": 1486642650, "post_id": 42123167, "comment_id": 71439070, "body": "oh ok i found it out forget my last question :)"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 0, "last_activity_date": 1486586413, "creation_date": 1486586413, "answer_id": 42123167, "question_id": 42122300, "link": "https://stackoverflow.com/questions/42122300/c-search-vor-endindex-of-first-occurence/42123167#42123167", "title": "C: Search vor endindex of first occurence", "body": "<p>The following program uses <code>strstr</code> to implement your <code>endIdx</code>-problem.\n<code>strstr</code> returns a pointer to the first occurrence of <code>searchTeram</code> in <code>str</code>, or <code>NULL</code>, if it does not occur. </p>\n\n<p>In the first case, we get a start index by taking <code>occurrence - str</code>, i.e. the memory address of the first occurrence minus the memory address where <code>str</code> starts. Adding then the length of <code>searchTerm</code> gives the end index.</p>\n\n<p>In the second case, we simply return <code>-1</code>: </p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nlong endIdx(const char *str, const char *searchTerm) {\n    long result = -1;\n    const char* occurrence = strstr(str,searchTerm);\n    if (occurrence != NULL) {\n        result = (occurrence - str) + strlen(searchTerm);\n    }\n    return result;\n}\n\nint main(void)\n{\n    // ----------------012345678901234\n    const char* str = \"Hello world! world is beautiful!\";\n    const char* searchTerm = \"world\";\n\n    long endidx = endIdx(str, searchTerm);\n    printf(\"endidx (should be 11): %ld\\n\", endidx);\n\n    endidx = endIdx(str, \"not to be contained\");\n    printf(\"endidx (should be -1): %ld\\n\", endidx);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6464126, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/385970da8551cbf51a7d68594e7a07b9?s=128&d=identicon&r=PG&f=1", "display_name": "Sedem", "link": "https://stackoverflow.com/users/6464126/sedem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 42123167, "answer_count": 1, "score": -3, "last_activity_date": 1486586413, "creation_date": 1486583224, "question_id": 42122300, "link": "https://stackoverflow.com/questions/42122300/c-search-vor-endindex-of-first-occurence", "title": "C: Search vor endindex of first occurence", "body": "<p>how can i write following programm:</p>\n\n<p>\u2022 a function which searches a string in a second string and returns the endindex of the first occurence</p>\n\n<p>\u2022 a function which includes all occurences of the first string in the second string, which will be replaced by a third string</p>\n\n<p>\u2022 a main function which scans the three strings and puts the string out within the replacement</p>\n\n<p>it is not allowed to use more headers than <strong>stdio.h</strong> , <strong>stdlib.h</strong> and <strong>string.h</strong></p>\n\n<p>i could only start with a code like this, as you can see i couldnt solve any of the three problems. i hope you can help me.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint endIdx(char *string1, char *string2, char *occu)\n{\n\n    for (int i = 0; i &lt; strlen(string1); i++)\n    {\n        for (int j = 0; j &lt; strlen(string1); j++)\n        {\n            if (string1[i] == string2[j])\n            {\n                printf(\"occurence string1[%d] is in string2[%d]\\n\", i, j);\n                occu[j] = string1[i];\n            }\n        }\n    }\n    return 0;\n}\n\n\nint main()\n{\n    char string1[20];\n    char string2[20];\n    char occu[20];\n\n    printf(\"Type in the first string: \");\n    scanf(\"%s\", string1);\n\n    printf(\"Type in the second string: \");\n    scanf(\"%s\", string2);\n\n    endIdx(string1, string2, occu);\n\n    printf(\"%s\\n\", occu);\n\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "multidimensional-array", "segmentation-fault"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 2, "creation_date": 1486582100, "post_id": 42121901, "comment_id": 71411901, "body": "Pointers to pointers are not 2d arrays: <a href=\"http://stackoverflow.com/questions/4470950/why-cant-we-use-double-pointer-to-represent-two-dimensional-arrays\" title=\"why cant we use double pointer to represent two dimensional arrays\">stackoverflow.com/questions/4470950/&hellip;</a>"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1486582256, "post_id": 42121901, "comment_id": 71411974, "body": "<code>a=(int**)malloc(row*column*sizeof(int));</code> is wrong, you need to reserve space for n (number of rows) <i>&quot;pointers&quot;</i> to <code>int</code>, instead: <code>a = malloc(row * sizeof(int *));</code> or better yet <code>a = malloc(row * sizeof *a);</code>, same for <code>b</code> and <code>c</code>, and then you need to reserve space for each row of the table using <code>a[i] = malloc(column * sizeof **a);</code> in a loop."}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1486582318, "post_id": 42121901, "comment_id": 71412017, "body": "what you have done is just creating a single dimensional array of size row*col and not a two dimensional array."}], "answers": [{"comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1486583342, "post_id": 42122189, "comment_id": 71412651, "body": "+1 for casting the result of malloc(), which is a good example for double-checking the correctness of the assignment here."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 2, "creation_date": 1486583461, "post_id": 42122189, "comment_id": 71412715, "body": "This doesn&#39;t create a true 2D array; it creates an array of pointers, each of which points to a separate array of <code>int</code>.  The rows are not going to be contiguous in memory; there will be a gap between <code>arr[0][n-1]</code> and <code>arr[1][0]</code>.  That&#39;s not necessarily a problem, but people need to be aware of the difference."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 3, "creation_date": 1486583796, "post_id": 42122189, "comment_id": 71412909, "body": "@ctx: <i>strongly</i> disagree - casting the result of <code>malloc</code> is unnecessary as of C89, it increases your maintenance burden, it makes code harder to read, and under C89 it would suppress a diagnostic if you forgot to include <code>stdlib.h</code> or otherwise didn&#39;t have a declaration for <code>malloc</code> in scope.  <code>T *a = malloc( sizeof *a * number_of_elements);</code> will <i>always</i> do the right thing, regardless of the type of <code>a</code>.  You should only cast the result of <code>malloc</code> if you&#39;re using a pre-C89 implementation or compiling as C++ (in which case you should be using the <code>new</code> operator instead)."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1486583946, "post_id": 42122189, "comment_id": 71412995, "body": "@JohnBode I know the arguments, and they are all mood in my eyes. It does not increase maintenance burden at all, it makes code in many cases better readably and it enables the compiler to show up mistakes early (in this case for example if the level of dereference of <code>a</code> was wrong). The stdlib.h argument is a joke, too, since there probably will be many other warnings if forgotten."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1486586152, "post_id": 42122189, "comment_id": 71414247, "body": "@ctx: Re: <code>stdlib.h</code> - not a joke.  I got bit by it more than once.  It&#39;s no longer a problem as of C99 (implicit typing is no longer allowed), but yes, casting the result of <code>malloc</code> <i>really did</i> supress a diagnostic if you didn&#39;t have a declaration in scope, and you&#39;d wind up with a conversion from <code>void *</code> to <code>int</code> to some other pointer type, which occasionally caused subtle runtime errors that took way too long to debug."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1486586931, "post_id": 42122189, "comment_id": 71414683, "body": "@JohnBode Sorry, just to have a warning about an implicit declaration of malloc() is not a significant reason to omit all casts of it. Especially when the left-hand side of the assignment is non-trivial (macro-expansions, dereferences, indexed arrays of multiple dimensions) it shows the reader (and the compiler, which can now warn on errors) what type exactly is expected. Of course, some (minimalist) people may find that information redundant and useless, but I do not accept that casting the result of malloc is &quot;strongly discouraged&quot;."}], "tags": [], "owner": {"reputation": 426, "user_id": 7463256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a1a7bdd45330e15f6d4c609be767c4?s=128&d=identicon&r=PG&f=1", "display_name": "aldarel", "link": "https://stackoverflow.com/users/7463256/aldarel"}, "is_accepted": true, "score": 1, "last_activity_date": 1487005564, "last_edit_date": 1487005564, "creation_date": 1486582841, "answer_id": 42122189, "question_id": 42121901, "link": "https://stackoverflow.com/questions/42121901/can-i-use-i-instead-of-i20-for-initializing-2d-array/42122189#42122189", "title": "can I use **i instead of *i[20] for initializing 2d array?", "body": "<p>You can allocate memory for 2D array with this code:</p>\n\n<pre><code>void array_2d_allocate(int ***a, int row, int column)\n{\n    *a =(int**)malloc(row*sizeof(int*));\n    for(int i=0; i &lt; row; i++){\n        (*a)[i] = (int*)malloc(column*sizeof(int));\n    }\n}\n\nint main()\n{\n    int **a,**b,**c,row,column;\n    printf(\"no.of rows of desired matrix:\");\n    scanf(\"%d\",&amp;row);\n    printf(\"no.of columns of desired matrix:\");\n    scanf(\"%d\",&amp;column);\n    array_2d_allocate(&amp;a, row, column);\n    readinput1(a,row,column);\n    array_2d_allocate(&amp;b, row, column);\n    readinput2(b,row,column);\n    array_2d_allocate(&amp;c, row, column);\n    sumoftables(a,b,c,row,column);\n    printf(\"\\n\\n\\n\");\n    displayresult(c,row,column);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7360031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yEZVj.jpg?s=128&g=1", "display_name": "Abhijeeth Savanth", "link": "https://stackoverflow.com/users/7360031/abhijeeth-savanth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 42122189, "answer_count": 1, "score": 0, "last_activity_date": 1517277716, "creation_date": 1486581849, "last_edit_date": 1517277716, "question_id": 42121901, "link": "https://stackoverflow.com/questions/42121901/can-i-use-i-instead-of-i20-for-initializing-2d-array", "title": "can I use **i instead of *i[20] for initializing 2d array?", "body": "<p>I wanted to initialize a 2d array using pointers to pointers and I wrote the following code.<br>\nThe below code is lot of hard coding but as I am a beginner to pointers I want to do it this way.<br>\nThe code is not giving the output as segmentation fault.<br>\nEverything seems well to me though.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;  \n    #include&lt;stdlib.h&gt;  \n    int readinput1(int **a,int row,int column);\n    int readinput2(int **b,int row,int column);\n    int sumoftables(int **a,int **b,int **c,int row,int column);\n    int displayresult(int **c,int row,int column);\n\nint main()\n    {\n        int **a,**b,**c,row,column;\n        printf(\"no.of rows of desired matrix:\");\n        scanf(\"%d\",&amp;row);\n        printf(\"no.of columns of desired matrix:\");\n        scanf(\"%d\",&amp;column);\n        a=(int**)malloc(row*column*sizeof(int));&gt;can i do the memory allocation like this\n        readinput1(a,row,column);\n        b=(int**)malloc(row*column*sizeof(int));\n        readinput2(b,row,column);\n        c=(int**)malloc(row*column*sizeof(int));\n        sumoftables(a,b,c,row,column);\n        printf(\"\\n\\n\\n\");\n        displayresult(c,row,column);\n\n    }\n    int readinput1(int **a,int row,int column)\n    {\n        int p,q;\n        for(p=0;p&lt;row;p++)\n        {\n            for(q=0;q&lt;column;q++)\n            {\n                scanf(\"\\n%x\",(*(a+p)+q));\n            }\n        }\n        return 0;\n    }\n\n\n    int readinput2t2(int **b,int row,int column)\n    {\n        int p,q;\n        for(p=0;p&lt;row;p++)\n        {\n            for(q=0;q&lt;column;q++)\n            {\n                scanf(\"\\n%x\",(*(b+p)+q));\n            }\n        }\n        return 0;\n    }\n    int sumoftables(int **a,int **b,int **c,int row,int column)\n    {\n        int p,q;\n        for(p=0;p&lt;row;p++)\n        {\n            for(q=0;q&lt;column;q++)\n            {\n                *(*(c+p)+q)=*(*(a+p)+q)+*(*(b+p)+q);\n            }\n        }\n                  return 0;\n    }\n    int displayresult(int **c,int row,int column)\n    {\n        int r,s;\n        for(r=0;r&lt;row;r++)\n        {\n            for(s=0;s&lt;column;s++)\n            {\n                printf(\"\\t%d\",*(*(c+r)+s));\n            }\n            printf(\"\\n\");\n        }\n        return 0;\n    }\n\n\n  [1]: https://i.stack.imgur.com/aj1AI.png\n</code></pre>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": true, "score": 0, "last_activity_date": 1486583616, "creation_date": 1486583616, "answer_id": 42122389, "question_id": 42121881, "link": "https://stackoverflow.com/questions/42121881/user-space-library-in-linux-kernel-modal-for-testing/42122389#42122389", "title": "user space library in Linux kernel modal - for testing", "body": "<p>A C library is first of all a collection of functions, there is no real distinction between \"user-space\" and \"kernel-space\". However, using a dynamic shared library is not straight possible in kernel space, since there is no suitable dynamic loader for this. Indeed, loading the kernel-module itself is some kind of dynamic loading, but the module itself cannot load another shared library in turn.</p>\n\n<p>However, it should be possible to link code from a static library (.a) to your kernel module. This code then becomes integral part of your kernel module itself and should work in kernelspace as in userspace, as long as it doesn't depend on external symbols, which are not present in kernel space (especially symbols of the libc, for example).</p>\n"}], "owner": {"reputation": 383, "user_id": 5982234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993453a7fef30ffa0d932e1ba272fa37?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5982234/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 42122389, "answer_count": 1, "score": 2, "last_activity_date": 1486585270, "creation_date": 1486581797, "last_edit_date": 1486585270, "question_id": 42121881, "link": "https://stackoverflow.com/questions/42121881/user-space-library-in-linux-kernel-modal-for-testing", "title": "user space library in Linux kernel modal - for testing", "body": "<p>I know you shouldn't and it is bad practice etc. but is it possible to include a c userspace library in a kernel module?</p>\n\n<p>I am writing the module for my own purposes to test some things and it will never be published or used by anyone else. I just want a quick hack not worrying about good practices.</p>\n\n<p>(specifically I would like to use the __int128 datatype provided by gcc included in <code>&lt;stdint.h&gt;</code>)</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "arrays", "memory-management", "casting", "stack"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486581984, "post_id": 42121859, "comment_id": 71411828, "body": "<code>memcpy(ptrStr, str, sizeof(&quot;My dog has fleas&quot;));</code>. <code>sizeof</code> on a string does not give you the result you want. That will just return you the size of a pointer. Use <code>strlen</code> instead. Or use <code>strcpy</code> to do the copy."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1486582003, "post_id": 42121859, "comment_id": 71411842, "body": "I&#39;m not entirely sure of what the point of this exercise is, but your professor seems to be doing you a disservice.  It is not valid in C to access all or part of an array of <code>char</code> as if it were an <code>int</code>, or any other non-<code>char</code> type, except under rather special circumstances that do not apply here."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "edited": false, "score": 1, "creation_date": 1486582011, "post_id": 42121859, "comment_id": 71411848, "body": "Your professor is wrong though, since doing what you are doing violates the <a href=\"http://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">strict aliasing rule</a> and it may fail under optimizations. It&#39;s better to use an <code>union</code> for this purpose."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1486582024, "post_id": 42121859, "comment_id": 71411851, "body": "Doesn&#39;t this violate strict aliasing unless you use only char* pointers?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1486582040, "post_id": 42121859, "comment_id": 71411864, "body": "@synchronizer, yes, yes it does."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486582119, "post_id": 42121859, "comment_id": 71411910, "body": "@JohnBollinger Yet is it not possible to take a char* to the int and copy over each byte to the array?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486582170, "post_id": 42121859, "comment_id": 71411931, "body": "You <i>can</i> <code>memcpy()</code> into and out of the space occupied by the array.  That&#39;s fine.  But you cannot cast a pointer to or into the array to a pointer to non-character datatype, and access the pointed-to space via that pointer.  (Where by &quot;cannot&quot; I mean that doing so produces undefined behavior.)"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1486582280, "post_id": 42121859, "comment_id": 71411987, "body": "@synchronizer, yes, if you have an <code>int</code> or any other object then you can access its bytes via a [<code>unsigned</code>] <code>char *</code>.  But not the other way around."}, {"owner": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 1, "creation_date": 1486582331, "post_id": 42121859, "comment_id": 71412026, "body": "@Pete Did you actually check what size your ints are? You use size of int as the offset for the pointers, but hard coded values in your loop."}, {"owner": {"reputation": 1533, "user_id": 7361580, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yu1so.png?s=128&g=1", "display_name": "synchronizer", "link": "https://stackoverflow.com/users/7361580/synchronizer"}, "edited": false, "score": 0, "creation_date": 1486582353, "post_id": 42121859, "comment_id": 71412043, "body": "Then I would use a <code>char*</code> if it is absolutely required to use pointer casting for the assignment, though I suspect that endianness might apply here... or maybe I am wrong."}, {"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486607380, "post_id": 42121859, "comment_id": 71422285, "body": "@JohnBollinger Thanks John, the point of the exercise is to simulate malloc() and free().  The array represents memory on the heap, and this business of storing ints or strings (or whatevers) in the array is to simulate allocating memory for different kinds of data.  Its an academic exercise, for better or worse."}, {"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "reply_to_user": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 0, "creation_date": 1486607471, "post_id": 42121859, "comment_id": 71422311, "body": "@odin You&#39;re right, I shouldn&#39;t hardcode the sizes, but use sizeof() every time.  Good catch."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1486582965, "post_id": 42122137, "comment_id": 71412427, "body": "Casting does not violate the strict aliasing rule. Using the resulting pointer to access the space does."}, {"owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "edited": false, "score": 0, "creation_date": 1486674949, "post_id": 42122137, "comment_id": 71460364, "body": "@Jack - Ohhhhhhhhhhhhh, that does make a world of sense.  Thanks, I&#39;ll implement.  I suspect this is what my professor wanted me to learn all along."}], "tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 2, "last_activity_date": 1486583004, "last_edit_date": 1495541820, "creation_date": 1486582629, "answer_id": 42122137, "question_id": 42121859, "link": "https://stackoverflow.com/questions/42121859/using-a-char-array-to-store-multiple-data-types-in-standard-c/42122137#42122137", "title": "Using a char array to store multiple data types in Standard C", "body": "<p>First of all your professor is wrong, while it's true that under the hood things maybe be in that way, dereferencing pointers obtained by casting a pointer to a  different type violates <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\"><em>strict aliasing</em></a> rule, which is an assumption made by the compiler that two pointers of different types can't refer to the same memory thus allowing optimizations on such pointers.</p>\n\n<p>Going back to your code, the problem is how you are calculating the offset from the base address, eg:</p>\n\n<pre><code>int* ptrB = ptrA + sizeof(int); \n</code></pre>\n\n<p>Now, <code>ptrA</code> is of <code>int*</code>, and adding an integer offset to a pointer implicitly multiplies the offset by the size of the element pointed. Which means that you aren't adding <code>sizeof(int)</code> bytes but <code>sizeof(int)*sizeof(int)</code> bytes.</p>\n\n<p>To force adding a specific amount of bytes you must cast the pointer to a <code>char*</code> so that adding <code>sizeof(int)</code> bytes just adds <code>sizeof(int)*sizeof(char) == sizeof(int)*1</code> bytes.</p>\n\n<pre><code>int* ptrB = (char*)ptrA + sizeof(int);      // points 4 bytes into array\n</code></pre>\n\n<p>Mind that this code is unsafe and it's bound to fail, using an <code>union</code> would be a better solution.</p>\n"}], "owner": {"reputation": 965, "user_id": 4040743, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/hAIWy.jpg?s=128&g=1", "display_name": "Pete", "link": "https://stackoverflow.com/users/4040743/pete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2687, "favorite_count": 2, "accepted_answer_id": 42122137, "answer_count": 1, "score": 2, "last_activity_date": 1486583004, "creation_date": 1486581722, "question_id": 42121859, "link": "https://stackoverflow.com/questions/42121859/using-a-char-array-to-store-multiple-data-types-in-standard-c", "title": "Using a char array to store multiple data types in Standard C", "body": "<p>I am a mid-level programmer, working to learn Standard C.  I\u2019m currently struggling through a class exercise which involves using pointers to store different kinds of data types into an array of type char.</p>\n\n<p>Suppose I have a large char array:</p>\n\n<pre><code>static char arr[1000];\n</code></pre>\n\n<p>As my professor explained it, I can consider this a chunk of local memory, where each element in the array has a granularity of one byte.  That seems useful.  Now suppose I want to take the first four bytes/elements and store an int:</p>\n\n<pre><code>int a = 100;\nint* ptr = (int*)arr;\n*ptr = a;\n</code></pre>\n\n<p>As I understand it, the second line creates an int* pointer, and then points it at the beginning of array arr.  The third line writes the value of a into that location.  Because ptr is a pointer of type int and because arr has plenty of space, this write four bytes / four element\u2019s worth of data because sizeof(int) == 4.  Watching this carefully through my debugger seems to confirm this.</p>\n\n<p>So far, so good.  Now let's say I wanted to expand this concept.  Let\u2019s say I wanted to store the following into my array, in this order:</p>\n\n<pre><code>int a = 100;\nint b = 200;\nchar* str = \u201cMy dog has fleas\u201d\nint c = 300;\n</code></pre>\n\n<p>Which would logically look like this:</p>\n\n<pre><code>00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28\n--------------------------------------------------------------------------------------\n[  100    ] [   200   ]  M  y     d  o  g     h  a  s     f  l  e  a  s \\0 [   300   ]\n</code></pre>\n\n<p>I need to be able to store data into the array in this manner, and then later, knowing the array structure in advance, be able to read the array.  Below is my code &amp; output, sorry in advance for the long length.  It compiles but does not work.  Scrutinizing it with my debugger has been very confusing; I can't tell where (and how often) I'm going off-track.  If anyone has any insight or advice, I will be very grateful.</p>\n\n<pre><code>int main(){\n\n   static char arr[1000];\n\n   int a = 100;\n   int b = 200;\n   char* str = \"My dog has fleas\";\n   int c = 300;\n\n   // Create pointers to load data:\n   int* ptrA = arr;                     // points to start of array\n   int* ptrB = ptrA + sizeof(int);      // points 4 bytes into array\n   char* ptrStr = ptrB + sizeof(int);   // points 8 bytes into array\n   int* ptrC = ptrStr + sizeof(\"My dog has fleas\"); // points to after the string\n                                       // (I don't know how to use sizeof() to measure the actual length of the string\n\n   // Load data into my array\n   *ptrA = a;       // Assign int 100 into the array?\n   *ptrB = b;       // Assign int 200 into the array?\n   *ptrStr = memcpy(ptrStr, str, sizeof(\"My dog has fleas\"));       // Write \"My dog has fleas\" into the array?\n   *ptrC = c;       // Assign int 300 into the array?\n\n   // Knowing the array's structure, walk it and print results:\n   char* walkIt = arr;\n   int counter = 0;\n   while (counter &lt; 30) {\n       if (counter == 0) {\n           // we are pointing at what should be the first int\n           int* tmpPtr1 = (int*)walkIt;\n           printf(\"%d \", *tmpPtr1);\n       }\n       else if (counter == 4) {\n           // we are pointing at what should be the second int\n           int* tmpPtr2 = (int*)walkIt;\n           printf(\"%d \", *tmpPtr2);\n       }\n       else if (counter == 8) {\n           // we are pointing at what should be the string\n           printf(\"%s \", walkIt);\n       }\n       else if (counter == 25) {\n           // we are pointing at what should be the third int\n           int* tmpPtr3 = (int*)walkIt;\n           printf(\"%d \", *tmpPtr3);\n       }\n       walkIt++;        // Continue walking the array\n       counter++;       // Don't walk too far\n   }\n   return 0;\n}\n</code></pre>\n\n<p>Output is this:</p>\n\n<pre><code>100  0  0    \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1486581512, "post_id": 42121768, "comment_id": 71411560, "body": "<code>x</code> defines the number of elements in the <code>int</code> array."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1486581531, "post_id": 42121768, "comment_id": 71411570, "body": "What are <code>var</code> and <code>x</code>? Is <code>var</code> an array? and <code>x</code> some sort of integer?"}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1486581735, "post_id": 42121768, "comment_id": 71411687, "body": "apparently <a href=\"http://cdecl.org/\" rel=\"nofollow noreferrer\">cdecl.org</a> does not support VLAs."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1486581775, "post_id": 42121768, "comment_id": 71411709, "body": "We don&#39;t know what <code>x</code> is, so I did not mention VLA in my first comment. For all we know, it is <code>#define x 42</code> although it is conventional to use uppercase."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1486584759, "post_id": 42121768, "comment_id": 71413486, "body": "I&#39;m voting to close this question as off-topic because this information is available in the first pages of any text on <code>c</code>"}], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 3159055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f9fdc5512fa6669685c7d6300cb65a4?s=128&d=identicon&r=PG", "display_name": "PRDeving", "link": "https://stackoverflow.com/users/3159055/prdeving"}, "is_accepted": false, "score": 0, "last_activity_date": 1486581561, "creation_date": 1486581561, "answer_id": 42121817, "question_id": 42121768, "link": "https://stackoverflow.com/questions/42121768/what-does-varx-do/42121817#42121817", "title": "What does var[x] do?", "body": "<p>The int defines the type of the variable, the [] defines the variable as an array, the number in the [] says the number of elements in the array.\nInt var[4] sets var as an array of 4 ints\nSo, after that, var[0] is the first element, var[1] the second and var[3] the last one (index starts in 0 as you can see)</p>\n"}, {"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486582599, "post_id": 42121830, "comment_id": 71412197, "body": "AFAIK the variable length array was in C99 standard, but made optional in C11. So the VLA must have seemed like the best thing ever, but for reasons I have not followed fell from favour. Perhaps MS was wise never to have implemented VLA (tongue in cheek)."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486582726, "post_id": 42121830, "comment_id": 71412274, "body": "@WeatherVane I agree, VLAs introduce more problems than they solve, because you never know if the declaration is going to crash for <code>x</code> being too large for the stack."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1486583237, "post_id": 42121830, "comment_id": 71412574, "body": "<i>This is a declaration of a Variable Length Array (VLA).</i> Not in this case: <code>enum values{n, x, y, z};</code> :)"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1486583349, "post_id": 42121830, "comment_id": 71412659, "body": "@KeineLust Absent OP&#39;s explanation, it&#39;s impossible to know. Given that OP&#39;s asking, it&#39;s unlikely that <code>x</code> is constant, because declarations with constants are a lot more common."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1486583749, "post_id": 42121830, "comment_id": 71412880, "body": "<i>because you never know if the declaration is going to crash for x being too large for the stack.</i>, good point, what about <code>int *a[n]; a = malloc(sizeof(*a) * 1000000);</code>, where <code>n</code> is <code>4</code>,  this will not overflow the stack because <code>a</code> is just an array of 4 pointers, even if we reserve a lot of space in the next operation, isn&#39;t it?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1486584054, "post_id": 42121830, "comment_id": 71413075, "body": "@KeineLust Even simpler - <code>int *var = malloc(sizeof(*var)*x)</code>. The only downside is having to call <code>free</code>, but that&#39;s not as scary as a possibility to overflow the stack."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1486584646, "post_id": 42121830, "comment_id": 71413433, "body": "@dasblinkenlight, I&#39;m not making myself clear. This will overflow the stack: <code>int n = 100000000; int a[4][n];</code> but this not: <code>int n = 4; int (*a)[n]; a = malloc(sizeof(*a) * 1000000);</code>, is my assumption correct?"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 1, "creation_date": 1486585431, "post_id": 42121830, "comment_id": 71413845, "body": "@KeineLust <code>int *a[n]</code> is still a large VLA. If you want an array of Nx4, use <code>int (*a)[4] = malloc(n*sizeof(*a));</code> with parentheses around <code>*a</code>."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1486582033, "last_edit_date": 1495542265, "creation_date": 1486581618, "answer_id": 42121830, "question_id": 42121768, "link": "https://stackoverflow.com/questions/42121768/what-does-varx-do/42121830#42121830", "title": "What does var[x] do?", "body": "<p>This is a declaration of a <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\"><em>Variable Length Array</em></a> (VLA).</p>\n\n<p>The value of expression <code>x</code> (most likely, a variable) is treated as the number of array elements. It <a href=\"https://stackoverflow.com/q/3783282/335858\">must have a positive value</a> at the time the expression is evaluated, otherwise the declaration of the VLA produces undefined behavior.</p>\n"}], "owner": {"reputation": 467, "user_id": 7317621, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-V68iRX4UsaM/AAAAAAAAAAI/AAAAAAAAAE4/Gcj0vD5-8YM/photo.jpg?sz=128", "display_name": "Lior Dahan", "link": "https://stackoverflow.com/users/7317621/lior-dahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 42121830, "answer_count": 2, "score": -8, "last_activity_date": 1486582862, "creation_date": 1486581406, "last_edit_date": 1486581716, "question_id": 42121768, "link": "https://stackoverflow.com/questions/42121768/what-does-varx-do", "title": "What does var[x] do?", "body": "<p>Regarding c variables, I want to know what the x does in: </p>\n\n<pre><code>int var[x]\n</code></pre>\n"}, {"tags": ["c", "sockets", "networking"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1486589174, "post_id": 42121766, "comment_id": 71415936, "body": "You should call <code>perror()</code>, or print the result of <code>strerror()</code>, when you get a failure."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": true, "score": 1, "last_activity_date": 1486584140, "last_edit_date": 1486584140, "creation_date": 1486583805, "answer_id": 42122451, "question_id": 42121766, "link": "https://stackoverflow.com/questions/42121766/socket-connect-method-doesnt-work-when-in-separate-function/42122451#42122451", "title": "Socket connect method doesn&#39;t work when in separate function", "body": "<p>Here</p>\n\n<pre><code>void * connect_to_server(int socket_fd, struct sockaddr_in *address) {\n</code></pre>\n\n<p>you pass in a pointer already.</p>\n\n<p>And here </p>\n\n<pre><code>int response = connect(socket_fd, (struct sockaddr *) &amp;address, sizeof(address));\n</code></pre>\n\n<p>you again take an address, to pass to <code>connect()</code>, namely the address of the pointer. Also the size passed in is the size of the pointer not what it is pointing to.</p>\n\n<p>You do not want this, but pass on the pointer as received, along with the size it is pointing to like this:</p>\n\n<pre><code>int response = connect(socket_fd, (struct sockaddr *) address, sizeof(*address));\n</code></pre>\n\n<p>Or even nicer (as <code>sizeof</code> is an operator not a function) do:</p>\n\n<pre><code>int response = connect(socket_fd, (struct sockaddr *) address, sizeof *address);\n</code></pre>\n"}], "owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 42122451, "answer_count": 1, "score": 0, "last_activity_date": 1486584140, "creation_date": 1486581404, "question_id": 42121766, "link": "https://stackoverflow.com/questions/42121766/socket-connect-method-doesnt-work-when-in-separate-function", "title": "Socket connect method doesn&#39;t work when in separate function", "body": "<p>I have the following code that connects to a server successfully:</p>\n\n<pre><code>response = connect(socket_fd, (struct sockaddr *) &amp;address, sizeof(address));\nif (response &lt; 0) {\n    printf(\"Failed to connect\\n\");\n    exit(1);\n} else {\n  printf(\"Connected\\n\");\n}\n</code></pre>\n\n<p>However, if I move this code into it's own function and call it with <code>connect_to_server(socket_fd, &amp;address)</code>, the connection fails.</p>\n\n<pre><code>void * connect_to_server(int socket_fd, struct sockaddr_in *address) {\n    int response = connect(socket_fd, (struct sockaddr *) &amp;address, sizeof(address));\n    if (response &lt; 0) {\n        printf(\"Failed to connect\\n\");\n        exit(1);\n    } else {\n      printf(\"Connected\\n\");\n    }\n}\n</code></pre>\n\n<p>From what I can tell, I am passing arguments correctly here, so I don't know what the problem is.  I've done basically the exact same thing for separating out a <code>send_to</code> method that uses the same <code>socket_fd</code> and <code>address</code> variables.</p>\n\n<p>I assume I'm making some kind of syntax error, but I can't figure out what it is.</p>\n"}, {"tags": ["python", "c", "python-standalone"], "answers": [{"tags": [], "owner": {"reputation": 1614, "user_id": 2903646, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/moiJ2.jpg?s=128&g=1", "display_name": "Juan Antonio", "link": "https://stackoverflow.com/users/2903646/juan-antonio"}, "is_accepted": true, "score": 2, "last_activity_date": 1486581113, "creation_date": 1486581113, "answer_id": 42121680, "question_id": 42121449, "link": "https://stackoverflow.com/questions/42121449/create-standalone-text-application-from-python/42121680#42121680", "title": "Create standalone text application from Python", "body": "<p>I don't know if you have thinking about make a web app, in Google App Engine for example is very simple to deploy a Python based web app really fast, using <a href=\"https://webapp2.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">webapp2</a> for example. And all your students could use your app online, <a href=\"https://cloud.google.com/appengine/docs/python/getting-started/creating-guestbook\" rel=\"nofollow noreferrer\">this</a> is a good getting started. But if you want maybe you could to build a command line app deployed in some server and your students could connect with ssh to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 1186, "user_id": 2290983, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/646ee78276bd8adeb3d512c92a226ec8?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/2290983/amit-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1486581121, "creation_date": 1486581121, "answer_id": 42121681, "question_id": 42121449, "link": "https://stackoverflow.com/questions/42121449/create-standalone-text-application-from-python/42121681#42121681", "title": "Create standalone text application from Python", "body": "<p>It depends what kind of systems your students have and it is highly unlikely that they will have similar kind of system. For least dependency i think you can use java to write your application. For java they just need to install <strong>jdk</strong> and can run your shared jar.</p>\n"}], "owner": {"reputation": 231, "user_id": 5484787, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ecef1c12e3a3026a2b4202333da0e81?s=128&d=identicon&r=PG", "display_name": "zhutchens1", "link": "https://stackoverflow.com/users/5484787/zhutchens1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "closed_date": 1487340997, "accepted_answer_id": 42121680, "answer_count": 2, "score": -1, "last_activity_date": 1486581474, "creation_date": 1486580320, "question_id": 42121449, "link": "https://stackoverflow.com/questions/42121449/create-standalone-text-application-from-python", "closed_reason": "Not suitable for this site", "title": "Create standalone text application from Python", "body": "<p>I am developing a program to use as a pedagogical tool in my classroom. I'm writing currently writing it in Python, but I'm also open to solutions that would use C. I want to create a standalone application for Mac (.app file) for my program, but I only need text-based interaction with the users (i.e. just STDIN/STDOUT, and not a GUI). The majority of my students do not have python installed and have no experience with Terminal/shell scripting.</p>\n\n<p>I tried using Platypus to create this application, but I get an error, as shown below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HRJw7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HRJw7.png\" alt=\"enter image description here\"></a></p>\n\n<p>I later realized that Platypus does not support prompts for user-input. Is there anything like Platypus that would also allow me to prompt users for input?</p>\n\n<p>As I say, I'm also open to solutions to my problem which would involve transposing my Python code into C and going from there.</p>\n"}, {"tags": ["c", "mpi"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7496118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1153f558071eb04a9dd768129232f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "kundilcas", "link": "https://stackoverflow.com/users/7496118/kundilcas"}, "edited": false, "score": 0, "creation_date": 1486582873, "post_id": 42122170, "comment_id": 71412367, "body": "Did you realize that I used MPI_Wait in the code, as commented now. It did not work. All the processors were waiting when I used only a MPI_Wait...?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 5, "user_id": 7496118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1153f558071eb04a9dd768129232f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "kundilcas", "link": "https://stackoverflow.com/users/7496118/kundilcas"}, "edited": false, "score": 2, "creation_date": 1486583113, "post_id": 42122170, "comment_id": 71412504, "body": "I realize that you have a <b>commented out</b> <code>MPI_Wait</code> in your code. My answer addresses your immediate question and recommends a generally alternative way to address this without manual nonblocking communication. If you wish to further investigate why <code>MPI_Wait</code> is not completing in your case. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with that. Note that your code is generally bogus, like <code>&amp;request[my_rank]</code> won&#39;t compile. This leads me to believe that the code does not represent your actual code."}, {"owner": {"reputation": 5, "user_id": 7496118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1153f558071eb04a9dd768129232f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "kundilcas", "link": "https://stackoverflow.com/users/7496118/kundilcas"}, "edited": false, "score": 0, "creation_date": 1486584776, "post_id": 42122170, "comment_id": 71413498, "body": "No man! To solve the problem, I changed request variable with a request array as offered from a guy... So, I just forgot to update that part. Now, I updated it. By the way, how you can think this code as a bogus, there is an output printed by my code .... Anyway, from this scenario, without a minimal complete example what is your suggestion?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "reply_to_user": {"reputation": 5, "user_id": 7496118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1153f558071eb04a9dd768129232f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "kundilcas", "link": "https://stackoverflow.com/users/7496118/kundilcas"}, "edited": false, "score": 0, "creation_date": 1486634402, "post_id": 42122170, "comment_id": 71433574, "body": "@kundilcas, how does this code even work given that all receives specify tag 0 and the sends tag <code>my_rank</code>, which is non-zero except for one rank?"}, {"owner": {"reputation": 5, "user_id": 7496118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1153f558071eb04a9dd768129232f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "kundilcas", "link": "https://stackoverflow.com/users/7496118/kundilcas"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1486715483, "post_id": 42122170, "comment_id": 71475150, "body": "@HristoIliev You are right. It was also from the previous version of the code as explained in my previous comment. I just also updated it now."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": true, "score": 2, "last_activity_date": 1486582758, "creation_date": 1486582758, "answer_id": 42122170, "question_id": 42121393, "link": "https://stackoverflow.com/questions/42121393/mpi-irecv-does-not-properly-receive-the-data-sent-by-mpi-send/42122170#42122170", "title": "MPI_Irecv does not properly receive the data sent by MPI_Send", "body": "<p>You <strong>must</strong> finish an <code>MPI_Wait</code> or a successful <code>MPI_Test</code> before accessing the data from <code>MPI_Irecv</code>. You cannot replace that with a barrier.</p>\n\n<p>For a ring-communication, consider using <code>MPI_Sendrecv</code>. It can be simpler than using asynchronous communication.</p>\n"}], "owner": {"reputation": 5, "user_id": 7496118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1153f558071eb04a9dd768129232f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "kundilcas", "link": "https://stackoverflow.com/users/7496118/kundilcas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 1, "accepted_answer_id": 42122170, "answer_count": 1, "score": 0, "last_activity_date": 1486715417, "creation_date": 1486580151, "last_edit_date": 1486715417, "question_id": 42121393, "link": "https://stackoverflow.com/questions/42121393/mpi-irecv-does-not-properly-receive-the-data-sent-by-mpi-send", "title": "MPI_Irecv does not properly receive the data sent by MPI_Send", "body": "<p>I have a 1D matrix data as <code>Q_send_matrix</code>. In each iteration, each processor updates its <code>Q_send_matrix</code> and sends it to the previous processor(<code>rank-1</code>), whereas it receives a newly updated matrix as <code>Q_recv_matrix</code> from the next processor(<code>rank+1</code>). For instance, in an iteration, <code>Proc[0]</code> updates its <code>Q_send_matrix</code> and sends it to <code>Proc[3]</code>, whereas it receives <code>Q_recv_matrix</code> from <code>Proc[1]</code>. As you may estimated, it is like a ring communication. Please see the code below <strong>after</strong> my explanation below of the code.</p>\n\n<pre><code>        MPI_Request request;\n        MPI_Status status;\n\n        // All the elements of Q_send and Q_recv buffers \n        // are set to 1.0 initially. Each processor\n        // updates its Q_send buffer to prepare it\n        // to be sent below.(above part is big, so it\n        // is not added here...)\n\n        /**\n         * Transfer Q matrix blocks among processors\n         *      + Each processor sends the Q matrix\n         *  + to the previous processor while receives\n         *  + the Q matrix from the next processor\n         *      + It is like a ring communication\n         * */\n\n\n        /* Receive Q matrix with MPI_Irecv */\n        source = (my_rank+1)%comm_size;\n        recv_count = no_col_per_proc[source]*input_k;\n\n        MPI_Irecv(Q_recv_matrix, recv_count,\n                MPI_FP_TYPE, source,\n                0, MPI_COMM_WORLD,\n                &amp;request);\n\n\n        /* Send Q matrix */\n        dest = (my_rank-1+comm_size)%comm_size;\n        send_count = no_col_per_proc[my_rank]*input_k;\n\n        MPI_Send(Q_send_matrix, send_count,\n                MPI_FP_TYPE, dest,\n                0, MPI_COMM_WORLD);\n\n\n        /* Wait status */\n        // MPI_Wait(request, status);\n\n        /* Barrier */\n        MPI_Barrier(MPI_COMM_WORLD);\n\n        /* Print Q send and receive matrices */\n        for( j = 0; j &lt; send_count; j ++ )\n        {\n            printf(\"P[%d] sends Q_send[%d] to P[%d] = %.2f\\n\",\n                    my_rank, j, dest, Q_send_matrix[j]);\n        }\n\n        for( j = 0; j &lt; recv_count; j ++ )\n        {\n            printf(\"P[%d] receives Q_recv[%d] from P[%d] = %.2f\\n\",\n                    my_rank, j, source, Q_recv_matrix[j]);\n        }\n</code></pre>\n\n<p>I want to do this communication as a syncronous. However, it is not possible with <code>MPI_Send</code> and <code>MPI_Recv</code> due to the deadlock based on their blocking feature. Hence, I used <code>MPI_Irecv</code> and <code>MPI_Send</code> together with an <code>MPI_Wait</code>. However, it did not finish, all the processors were waiting. So, I put an <code>MPI_Barrier</code> instead of <code>MPI_Wait</code> to make them syncronous, and solved the wait issue of the processors, so they finished their work. However, it did not work properly. Some outputs of the code as following are wrong. Each processor sends the correct data, and there is no problem on the sending side. On the other hand, there is no change on the received data buffer. It means that in some processors the initial value of the received buffer remains even if received a data from one of the other processors as following.</p>\n\n<pre><code>P[0] sends Q_send[0] to P[3] = -2.12\nP[0] sends Q_send[1] to P[3] = -2.12\nP[0] sends Q_send[2] to P[3] = 4.12\nP[0] sends Q_send[3] to P[3] = 4.12\nP[0] receives Q_recv[0] from P[1] = 1.00\nP[0] receives Q_recv[1] from P[1] = 1.00\nP[0] receives Q_recv[2] from P[1] = 1.00\nP[0] receives Q_recv[3] from P[1] = 1.00\n\nP[1] sends Q_send[0] to P[0] = -2.12\nP[1] sends Q_send[1] to P[0] = -2.12\nP[1] sends Q_send[2] to P[0] = 0.38\nP[1] sends Q_send[3] to P[0] = 0.38\nP[1] receives Q_recv[0] from P[2] = 1.00\nP[1] receives Q_recv[1] from P[2] = 1.00\nP[1] receives Q_recv[2] from P[2] = 1.00\nP[1] receives Q_recv[3] from P[2] = 1.00\n\nP[2] sends Q_send[0] to P[1] = 1.00\nP[2] sends Q_send[1] to P[1] = 1.00\nP[2] sends Q_send[2] to P[1] = -24.03\nP[2] sends Q_send[3] to P[1] = -24.03\nP[2] receives Q_recv[0] from P[3] = 1.00\nP[2] receives Q_recv[1] from P[3] = 1.00\nP[2] receives Q_recv[2] from P[3] = 1.00\nP[2] receives Q_recv[3] from P[3] = 1.00\n\nP[3] sends Q_send[0] to P[2] = 7.95\nP[3] sends Q_send[1] to P[2] = 7.95\nP[3] sends Q_send[2] to P[2] = 0.38\nP[3] sends Q_send[3] to P[2] = 0.38\nP[3] receives Q_recv[0] from P[0] = -2.12\nP[3] receives Q_recv[1] from P[0] = -2.12\nP[3] receives Q_recv[2] from P[0] = 4.12\nP[3] receives Q_recv[3] from P[0] = 4.12\n</code></pre>\n"}, {"tags": ["c", "printf", "format-specifiers"], "comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 9, "creation_date": 1486579819, "post_id": 42121267, "comment_id": 71410665, "body": "<code>printf(&quot;%p&quot;, i);</code> does not print address of <code>i</code>. You&#39;d need <code>printf(&quot;%p&quot;, (void *) &amp;i);</code> for that."}, {"owner": {"reputation": 2306, "user_id": 3437608, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Wif9E.jpg?s=128&g=1", "display_name": "Cullub", "link": "https://stackoverflow.com/users/3437608/cullub"}, "edited": false, "score": 1, "creation_date": 1486579873, "post_id": 42121267, "comment_id": 71410694, "body": "I think it&#39;s just a random address in memory. Well, not random as in generated, but not predictable directly.  Basically garbage."}, {"owner": {"reputation": 2306, "user_id": 3437608, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Wif9E.jpg?s=128&g=1", "display_name": "Cullub", "link": "https://stackoverflow.com/users/3437608/cullub"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 2, "creation_date": 1486579957, "post_id": 42121267, "comment_id": 71410732, "body": "@ant do you need the <code>(void *)</code>, though?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486580105, "post_id": 42121267, "comment_id": 71410804, "body": "In the first case, the compiler should have warned you the code is incorrect (missing argument). In the second case you are not printing <i>the pointer address of <code>i</code></i>. You are printing <code>i</code> is if it were a pointer, but it isn&#39;t and again the compiler should have warned you. Why are you asking what the compiler has already told you? Your question is equivalent to asking how much milk the milkman will deliver, when you have not told him."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 2306, "user_id": 3437608, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Wif9E.jpg?s=128&g=1", "display_name": "Cullub", "link": "https://stackoverflow.com/users/3437608/cullub"}, "edited": false, "score": 2, "creation_date": 1486580314, "post_id": 42121267, "comment_id": 71410932, "body": "@cullub: Pedantically, yes. A <code>void *</code> pointer is expected by <code>printf</code>. A <code>[signed&#47;unsigned] char *</code> pointer can be used without a cast, since it is guaranteed to have the same representation as <code>void *</code>. But <code>int *</code> can have a different representation, which is why it has to be cast to <code>void *</code>."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 2306, "user_id": 3437608, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Wif9E.jpg?s=128&g=1", "display_name": "Cullub", "link": "https://stackoverflow.com/users/3437608/cullub"}, "edited": false, "score": 1, "creation_date": 1486580406, "post_id": 42121267, "comment_id": 71410986, "body": "@cullub <a href=\"http://stackoverflow.com/questions/24867814/printfp-and-casting-to-void\">Yes</a>. Pointers may have different object representations."}, {"owner": {"reputation": 37, "user_id": 4738077, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LRBVStP34yU/AAAAAAAAAAI/AAAAAAAAALs/b-H2OHlPi2M/photo.jpg?sz=128", "display_name": "Rattata 2me", "link": "https://stackoverflow.com/users/4738077/rattata-2me"}, "edited": false, "score": 0, "creation_date": 1486679541, "post_id": 42121267, "comment_id": 71462677, "body": "So, to sum this up it is the data stored previously in the register? Trash data from another process."}], "answers": [{"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1486580146, "post_id": 42121318, "comment_id": 71410827, "body": "I think OP is asking for how that rule is enforced, if at all."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486581367, "post_id": 42121318, "comment_id": 71411471, "body": "@Mad Physicist: I don&#39;t see it. The question appears to be about the printed garbage and where it comes from."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486581593, "post_id": 42121318, "comment_id": 71411605, "body": "That makes sense, but your answer does not really answer where the garbage comes from. What does undefined mean in this context? OP is getting a concrete result after all."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1486582007, "post_id": 42121318, "comment_id": 71411846, "body": "@Mad Physicist: A practical experiment always produces a result that is <i>concrete</i> in some sense. I don&#39;t quote the standard definition of &quot;undefined behavior&quot; since everybody is probably sick and tired of hearing it  in the umpteenth time."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486587568, "post_id": 42121318, "comment_id": 71415038, "body": "@MadPhysicist see <a href=\"http://stackoverflow.com/q/2397984/1505939\">what is undefined behaviour</a>.  I&#39;m thinking of getting a macro keyboard for the amount of times I link that link"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 4, "last_activity_date": 1486580209, "last_edit_date": 1486580209, "creation_date": 1486579876, "answer_id": 42121318, "question_id": 42121267, "link": "https://stackoverflow.com/questions/42121267/the-p-printf-parameter/42121318#42121318", "title": "The &quot;%p&quot; printf parameter", "body": "<p>The behavior of</p>\n\n<pre><code>printf(\"%p\");\n</code></pre>\n\n<p>is undefined. When you specify a <code>%p</code> format in the format string, the corresponding argument of <code>void *</code> (or <code>char *</code>) type shall be present in the argument list.</p>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 4, "last_activity_date": 1486579880, "creation_date": 1486579880, "answer_id": 42121320, "question_id": 42121267, "link": "https://stackoverflow.com/questions/42121267/the-p-printf-parameter/42121320#42121320", "title": "The &quot;%p&quot; printf parameter", "body": "<p>Trash. <code>printf</code> uses a variable-length argument list. It uses the format string to determine how many arguments you actually passed. If you did not actually pass anything in, it will still read from basically arbitrary  portions of memory as though you did. The result is undefined/trash.</p>\n\n<p>Some compilers will be able to catch this situation with a warning because the <code>printf</code> family of functions is so popular. Some cases may crash your system if the function tries to read from memory you do not have access to. There is no way to tell how it will behave next time even if you have obtained a certain result.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 4, "last_activity_date": 1486579883, "creation_date": 1486579883, "answer_id": 42121321, "question_id": 42121267, "link": "https://stackoverflow.com/questions/42121267/the-p-printf-parameter/42121321#42121321", "title": "The &quot;%p&quot; printf parameter", "body": "<blockquote>\n  <p>But my question is what does it return when not adding any other argument in the printf function just printf(\"%p\");</p>\n</blockquote>\n\n<p>Anything. Nothing. Random junk. Maybe it crashes.</p>\n\n<p>There is no way to know without investigating a specific combination of compiler, CPU, platform, libraries, execution environment, and so on. There is no rule that requires it to operate any particular way.</p>\n"}], "owner": {"reputation": 37, "user_id": 4738077, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LRBVStP34yU/AAAAAAAAAAI/AAAAAAAAALs/b-H2OHlPi2M/photo.jpg?sz=128", "display_name": "Rattata 2me", "link": "https://stackoverflow.com/users/4738077/rattata-2me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1525, "favorite_count": 0, "accepted_answer_id": 42121320, "answer_count": 3, "score": 0, "last_activity_date": 1486586988, "creation_date": 1486579734, "last_edit_date": 1486586988, "question_id": 42121267, "link": "https://stackoverflow.com/questions/42121267/the-p-printf-parameter", "title": "The &quot;%p&quot; printf parameter", "body": "<p>I have this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid main(){\n       printf(\"%p\");\n}\n</code></pre>\n\n<p>This is the output:\n<code>0x7ffdd9b973d8</code></p>\n\n<p>I know <code>%p</code> stands for pointer and when using it as for example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nvoid main(){\n int i = 0;\n printf(\"%p\", i);\n}\n</code></pre>\n\n<p>it returns the pointer address of <code>i</code>. But my question is what does it return when not adding any other argument in the printf function just <code>printf(\"%p\")</code></p>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 3, "last_activity_date": 1486581103, "creation_date": 1486581103, "answer_id": 42121676, "question_id": 42121082, "link": "https://stackoverflow.com/questions/42121082/is-dupfile-des-equivalent-to-fcntlfiledes-f-dupfd-0/42121676#42121676", "title": "Is dup(file_des) equivalent to fcntl(filedes, F_DUPFD, 0)?", "body": "<p>Yes it exactly the same. According to the <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/\" rel=\"nofollow noreferrer\">posix</a> standard </p>\n\n<blockquote>\n  <p>The dup() function provides an alternative interface to the service\n  provided by fcntl() using the F_DUPFD command. The call dup(fildes)\n  shall be equivalent to:</p>\n  \n  <p>fcntl(fildes, F_DUPFD, 0);</p>\n</blockquote>\n\n<p><code>dup()</code> is shorter and easier to read, I would use that.</p>\n"}], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 2, "accepted_answer_id": 42121676, "answer_count": 1, "score": 1, "last_activity_date": 1486581103, "creation_date": 1486579099, "last_edit_date": 1486579436, "question_id": 42121082, "link": "https://stackoverflow.com/questions/42121082/is-dupfile-des-equivalent-to-fcntlfiledes-f-dupfd-0", "title": "Is dup(file_des) equivalent to fcntl(filedes, F_DUPFD, 0)?", "body": "<p>Is <code>dup(file_des)</code> equivalent to <code>fcntl(filedes, F_DUPFD, 0)</code>? If <code>yes</code>, then which is better to use?</p>\n"}, {"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486578014, "post_id": 42120648, "comment_id": 71409606, "body": "Do you just want to pass a pointer to a <code>struct</code>? Just see the example <a href=\"http://man7.org/linux/man-pages/man3/pthread_create.3.html\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1486578588, "post_id": 42120835, "comment_id": 71409965, "body": "But one must be careful with this if one passes (a pointer to) the same struct in more than one call to <code>pthread_create()</code>, and any of those threads or the parent thread also modifies the struct.  Proper synchronization is required in such a case."}, {"owner": {"reputation": 144, "user_id": 4047560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078e21682da7e03097a6f97c81b251c9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4047560/daniel"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486578791, "post_id": 42120835, "comment_id": 71410079, "body": "You are absolutely correct. This is simply the most basic solution and it does not show any synchronization and locking mechanism that&#39;s required  in the case of a shared resource."}], "tags": [], "owner": {"reputation": 144, "user_id": 4047560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/078e21682da7e03097a6f97c81b251c9?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/4047560/daniel"}, "is_accepted": true, "score": 1, "last_activity_date": 1486579135, "last_edit_date": 1486579135, "creation_date": 1486578320, "answer_id": 42120835, "question_id": 42120648, "link": "https://stackoverflow.com/questions/42120648/pass-variable-into-pthread-create-function/42120835#42120835", "title": "Pass variable into pthread_create function", "body": "<p>You can pack all of the data you want to pass to your thread on creation in a single struct and pass its pointer through the last parameter of <code>pthread_create</code>. in short:</p>\n\n<p>define a struct:</p>\n\n<pre><code>typedef struct{\n     char* prompt;\n     int socket;\n} thread_data;\n</code></pre>\n\n<p>and then call <code>pthread_create</code>:</p>\n\n<pre><code>thread_data data;\n// place code here to fill in the struct members...\npthread_create(&amp;thread, NULL, receive, (void *) &amp;data);\n</code></pre>\n\n<p>in your receive function:</p>\n\n<pre><code>void * receive(void * threadData) {\n    int socket_fd, response;\n    char message[MESSAGE_BUFFER];\n\n    thread_data* pData = (thread_data*)threadData;\n    socket_fd = pData-&gt;socket;\n    char* prompt = pData-&gt;prompt;\n\n    while(true) {\n        response = recvfrom(socket_fd, message, MESSAGE_BUFFER, 0, NULL, NULL);\n        if (response) {\n            printf(\"\\nServer&gt; %s\", message);\n            printf(\"%s\", prompt);\n        }\n    }\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 8066, "user_id": 4272549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1hvwh.jpg?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4272549/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 42120835, "answer_count": 1, "score": 0, "last_activity_date": 1486579135, "creation_date": 1486577674, "question_id": 42120648, "link": "https://stackoverflow.com/questions/42120648/pass-variable-into-pthread-create-function", "title": "Pass variable into pthread_create function", "body": "<p>I'm building a multi-threaded network chat program, but I can't figure out how to pass variables into <code>pthread_create</code>.  </p>\n\n<p>I have the following line of code that creates a thread:</p>\n\n<pre><code>pthread_create(&amp;thread, NULL, receive, (void *) socket_fd);\n</code></pre>\n\n<p>My receive function looks like this:</p>\n\n<pre><code>void * receive(void * socket) {\n    int socket_fd, response;\n    char message[MESSAGE_BUFFER];\n    socket_fd = (int) socket;\n\n    while(true) {\n        response = recvfrom(socket_fd, message, MESSAGE_BUFFER, 0, NULL, NULL);\n        if (response) {\n            printf(\"\\nServer&gt; %s\", message);\n            printf(\"%s\", prompt);\n        }\n    }\n}\n</code></pre>\n\n<p>How can I pass a <code>prompt</code> variable into this <code>receive</code> function, when calling <code>receive</code> in <code>pthread_create</code>?</p>\n"}, {"tags": ["c", "linux", "root", "scheduling"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 0, "creation_date": 1486578200, "post_id": 42120488, "comment_id": 71409724, "body": "Nope. Scheduling policies of OS are not allowed to be modified by non-super users for a reason. Similarly shared libraries (LD_LIBRARY_PATH, LD_PRELOAD etc) don&#39;t work for the same reason. See <a href=\"http://stackoverflow.com/q/9843178/1275169\">this</a> for a couple options using which you could make it work with <code>setcap</code> -- which requires you to recompile your shared libraries or place them in standard locations. Otherwise, you are out of luck."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486579321, "post_id": 42120488, "comment_id": 71410397, "body": "You could set the scheduling policy at startup and then drop root rights.  This is analogous to what many system services do when they need to obtain access to protected resources, such as reserved network ports, but do not need to operate with continuing privilege."}, {"owner": {"reputation": 2939, "user_id": 2367231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CeSBA.png?s=128&g=1", "display_name": "Alex44", "link": "https://stackoverflow.com/users/2367231/alex44"}, "edited": false, "score": 0, "creation_date": 1486583167, "post_id": 42120488, "comment_id": 71412538, "body": "What about using <code>fakeroot</code>? Is this an appropriate way?"}], "owner": {"reputation": 2939, "user_id": 2367231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/CeSBA.png?s=128&g=1", "display_name": "Alex44", "link": "https://stackoverflow.com/users/2367231/alex44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486577644, "creation_date": 1486577176, "last_edit_date": 1486577644, "question_id": 42120488, "link": "https://stackoverflow.com/questions/42120488/change-the-scheduling-policy-and-priority-of-a-thread-to-real-time", "title": "Change the scheduling policy and priority of a thread to real-time", "body": "<p>I'm write a time-critical application in C on an embedded computer and need to change the scheduling policy of the process. Using <code>pthread_setscheduler</code> with <code>SCHED_RR</code> leads to sufficient results for me. But now the application needs <em>root</em>-rights. But giving <em>root</em>-rights to the application is not very nice. Is there any possibility to set round-robin without the need of <em>root</em>-rights? \nOr there are a more elegant solution?</p>\n\n<hr>\n\n<p>Another approach with <code>setcap</code></p>\n\n<pre><code>sudo setcap cap_sys_nice+ep my_application\n</code></pre>\n\n<p>leads to problems while loading some own shared libraries which are placed in several folders. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1486576950, "post_id": 42120384, "comment_id": 71409003, "body": "Please provide a working example."}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1486577146, "post_id": 42120438, "comment_id": 71409129, "body": "You should only use the <code>str*</code> functions on C-style strings. The documentation for each of these functions makes clear that their inputs must be strings, not arbitrary chunks of data read from a file or network connection."}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 21, "user_id": 5156969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe1f8437407062e15bcad48c40b34d?s=128&d=identicon&r=PG&f=1", "display_name": "Innoveer Hipstirt", "link": "https://stackoverflow.com/users/5156969/innoveer-hipstirt"}, "edited": false, "score": 0, "creation_date": 1486582493, "post_id": 42120438, "comment_id": 71412136, "body": "@InnoveerHipstirt Check id there&#39;s a newline in the input read."}, {"owner": {"reputation": 21, "user_id": 5156969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe1f8437407062e15bcad48c40b34d?s=128&d=identicon&r=PG&f=1", "display_name": "Innoveer Hipstirt", "link": "https://stackoverflow.com/users/5156969/innoveer-hipstirt"}, "edited": false, "score": 0, "creation_date": 1486582631, "post_id": 42120438, "comment_id": 71412227, "body": "Hey thanks I forgot that. Now i can make it work. Also strncmp works!"}, {"owner": {"reputation": 21, "user_id": 5156969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe1f8437407062e15bcad48c40b34d?s=128&d=identicon&r=PG&f=1", "display_name": "Innoveer Hipstirt", "link": "https://stackoverflow.com/users/5156969/innoveer-hipstirt"}, "edited": false, "score": 0, "creation_date": 1486585337, "post_id": 42120438, "comment_id": 71413794, "body": "actually it should have been buffer[n_char-1] = 0;"}, {"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "reply_to_user": {"reputation": 21, "user_id": 5156969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe1f8437407062e15bcad48c40b34d?s=128&d=identicon&r=PG&f=1", "display_name": "Innoveer Hipstirt", "link": "https://stackoverflow.com/users/5156969/innoveer-hipstirt"}, "edited": false, "score": 0, "creation_date": 1486586039, "post_id": 42120438, "comment_id": 71414187, "body": "@InnoveerHipstirt That&#39;s true only if the buffer happens to contains a newine (and you want to remove) -- which seems to the case with you input. In general if read() reads N bytes then you&#39;d want to insert null byte at the Nth index in order to use it as a C-string. Take an example: if <code>read()</code> returns <code>abc</code> then N will be 3 and buffer[3] is where the null terminator would go."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": true, "score": 1, "last_activity_date": 1486577335, "last_edit_date": 1486577335, "creation_date": 1486577008, "answer_id": 42120438, "question_id": 42120384, "link": "https://stackoverflow.com/questions/42120384/string-compare-system-call-read/42120438#42120438", "title": "String compare, system call read", "body": "<p><a href=\"http://man7.org/linux/man-pages/man2/read.2.html\" rel=\"nofollow noreferrer\"><code>read()</code></a> doesn't add the null byte termination to <code>buffer</code>. But <code>strcmp()</code> expects its arguments to be terminated with null byte.</p>\n\n<p>Add the null byte before <code>strcmp()</code>:</p>\n\n<pre><code>buffer[n_char] = 0;\n</code></pre>\n\n<p>(If <code>n_char</code> is 10 then you need to be sure <code>buffer[n_char]</code> doesn't result in out of bound access i.e. have at least one extra byte in <code>buffer</code> for the null termination. On the other hand, you could use strncmp()`).</p>\n\n<p>Also, your condition is wrong. <code>read()</code> can retun -1 on error which would pass your condition. Change it to:</p>\n\n<pre><code>while( (n_char = read(0, buffer, 10)) &gt; 0) {\n</code></pre>\n\n<p>Notice that I removed the unnessary cast to <code>void *</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 5156969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe1f8437407062e15bcad48c40b34d?s=128&d=identicon&r=PG&f=1", "display_name": "Innoveer Hipstirt", "link": "https://stackoverflow.com/users/5156969/innoveer-hipstirt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 42120438, "answer_count": 1, "score": 2, "last_activity_date": 1486577335, "creation_date": 1486576806, "question_id": 42120384, "link": "https://stackoverflow.com/questions/42120384/string-compare-system-call-read", "title": "String compare, system call read", "body": "<p>I was trying to read in from stdin and print the input to a file, if the input is quit then I want to stop the program. However, this does not seem to work, the if clause if not activated when i type \"quit\". What is wrong with this code?</p>\n\n<pre><code>while( (n_char = read(0, (void *)buffer, 10)) != 0){\n    if (strcmp(buffer, \"quit\") == 0){\n        printf(\"equal\\n\");\n        exit(0);\n    }\n//Display the characters read\n    n_char = write(inFile, buffer,n_char);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1486576763, "post_id": 42120348, "comment_id": 71408886, "body": "Do you realize that your <code>if</code> block is outside the loop?"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1487188464, "post_id": 42120348, "comment_id": 71675335, "body": "Did you understood what i did in below answer ?"}], "answers": [{"tags": [], "owner": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "is_accepted": false, "score": 2, "last_activity_date": 1486578815, "last_edit_date": 1486578815, "creation_date": 1486576873, "answer_id": 42120406, "question_id": 42120348, "link": "https://stackoverflow.com/questions/42120348/c-how-to-display-the-numbers-in-an-array-that-are-lower-than-the-average-value/42120406#42120406", "title": "C - how to display the numbers in an array that are lower than the average value of the numbers in the array", "body": "<p>You are trying to print out <code>ray[i]</code>, but <code>i</code> is currently <code>20</code>which is outside the index of your array. Did you mean to copy your for loop around that if statement?</p>\n"}, {"comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 1, "user_id": 7536022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c07cb5b95680fb795a080d033b18859?s=128&d=identicon&r=PG&f=1", "display_name": "DaftTommy", "link": "https://stackoverflow.com/users/7536022/dafttommy"}, "edited": false, "score": 0, "creation_date": 1486655525, "post_id": 42120663, "comment_id": 71448464, "body": "@DaftTommy Please mark it best answer if it works for you :)"}], "tags": [], "owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1486582329, "last_edit_date": 1495540900, "creation_date": 1486577746, "answer_id": 42120663, "question_id": 42120348, "link": "https://stackoverflow.com/questions/42120348/c-how-to-display-the-numbers-in-an-array-that-are-lower-than-the-average-value/42120663#42120663", "title": "C - how to display the numbers in an array that are lower than the average value of the numbers in the array", "body": "<p>This Part in Your Code:</p>\n\n<pre><code>for (i=0; i&lt;20; i++)\n{\n    printf(\"Enter integer #%d\",i+1);\n    scanf (\"%d\", &amp;ray[i]);\n    sum=(sum+ray[i]);\n}\n                               //Now i = 20,that is why it left loop\naverage=(sum/20);\nprintf(\"Average = %.2f\", average);\n\nif (ray[i] &lt; average)          //You are saying if ray[20]&lt;average\n  {\n    printf(\"The following values are less than the average: %d\", ray[i]);\n    }\n</code></pre>\n\n<p>Now <code>ray[20]</code> is outside the scope because there are <code>20</code> elements and array index starts from <code>0</code> and goes on to <code>19</code>, so <code>ray[20]</code> is out of bound access. \nI highly recommend you to see this question for better understaning <a href=\"https://stackoverflow.com/questions/15646973/how-dangerous-is-it-to-access-an-array-out-of-bounds\">How dangerous is it to access an array out of bounds?</a>. </p>\n\n<p>Secondly You want to print all <code>ray[i]</code> where <code>ray[i] &lt; average</code> so you should run a loop like  </p>\n\n<pre><code>   printf(\"The following values are less than the average:\");\n\n   for(i = 0; i&lt;20; i++)  // i starts from 0 and increase with run of loop \n                          // and loop stops when i&gt;19 so you are not\n                          // accessing forbidden area.\n    {\n         if (ray[i] &lt; average){   //check if ray[i] is less than average\n           printf(\"%d\\n\", ray[i]) \n         }\n    }\n</code></pre>\n\n<p>All That makes :</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main()\n{\n    int i=0;\n    int ray[20];\n    float sum=0.00, average;\n\n    for (i=0; i&lt;20; i++)\n    {\n        printf(\"Enter integer #%d\",i+1);\n        scanf (\"%d\", &amp;ray[i]);\n        sum=(sum+ray[i]);\n    }\n\n    average=(sum/20);\n    printf(\"Average = %.2f\", average);\n\n    printf(\"The following values are less than the average:\");\n\n    for(i = 0; i&lt;20; i++)  // i starts from 0 and increase with run of loop \n                           // and loop stops when i&gt;19 so you are not\n                           // accessing forbidden area.\n   {\n     if (ray[i] &lt; average){   //check if ray[i] is less than average\n           printf(\"%d\\n\", ray[i]);\n           }\n\n}\n    system(\"pause\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486580511, "post_id": 42121305, "comment_id": 71411052, "body": "is th at o  kzzz  ?"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486580557, "post_id": 42121305, "comment_id": 71411080, "body": "Do not implement in same loop, see my answer."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486655593, "post_id": 42121305, "comment_id": 71448519, "body": "please delete this answer"}], "tags": [], "owner": {"reputation": 1, "user_id": 7536022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c07cb5b95680fb795a080d033b18859?s=128&d=identicon&r=PG&f=1", "display_name": "DaftTommy", "link": "https://stackoverflow.com/users/7536022/dafttommy"}, "is_accepted": false, "score": 0, "last_activity_date": 1486579830, "creation_date": 1486579830, "answer_id": 42121305, "question_id": 42120348, "link": "https://stackoverflow.com/questions/42120348/c-how-to-display-the-numbers-in-an-array-that-are-lower-than-the-average-value/42121305#42121305", "title": "C - how to display the numbers in an array that are lower than the average value of the numbers in the array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main()\n{\n    int i=0;\n    int ray[20];\n    float sum=0.00, average;\n\n    for (i=0; i&lt;20; i++)\n    {\n        printf(\"Enter integer #%d: \",i+1);\n        scanf (\"%d\", &amp;ray[i]);\n        sum=(sum+ray[i]);\n\n        average=(sum/20);\n\n\n            if (ray[i] &lt; average)\n                {\n                printf(\"The followiing values are less than the average: %d\", ray[i]);\n                }\n    }\n\n    printf(\"Average = %.2f\", average);\n\nsystem(\"pause\");\n}\n</code></pre>\n\n<p>This gives the \"the following integers are below the average\" part after each value that is lower than the then average, but I need it to show the values which are below the average together at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 6506337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErVni.jpg?s=128&g=1", "display_name": "Eduardo Pacheco", "link": "https://stackoverflow.com/users/6506337/eduardo-pacheco"}, "is_accepted": false, "score": 0, "last_activity_date": 1486581062, "creation_date": 1486581062, "answer_id": 42121661, "question_id": 42120348, "link": "https://stackoverflow.com/questions/42120348/c-how-to-display-the-numbers-in-an-array-that-are-lower-than-the-average-value/42121661#42121661", "title": "C - how to display the numbers in an array that are lower than the average value of the numbers in the array", "body": "<h1>The out-of-index issue</h1>\n\n<p>As the others have already pointed, your index is out of bounds.\nThat happens because you've iterated <code>for (i=0; i &lt; 20; i++)</code>, which means once you left the for statement you were at <code>i == 20</code>. Your array was allocated with 20 positions, so you can access it from index 0 to 19. The awkward value you get is given because you are accessing \"trash\", or in other words, invalid positions with unpredictable (or almost) values.</p>\n\n<h1>The algorithm issue</h1>\n\n<p>Ok, once you got that index thing right, you still need an algorithm that displays the numbers that are lower than the average. You can't just copy your if statement into the loop because you only know the true average value once you've iterated through all of the values (which you are doing just fine).</p>\n\n<p>So what you want is another loop that iterates throughout the array and that if statement inside of it (well, there are other ways to do it without running all of the values again, like <strong>sorting</strong> the array)</p>\n\n<p>So, this is the algorithm I'll propose you</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define array_size 20\n\nvoid main()\n{\n    int i;\n    int ray[array_size];\n    int sum=0;\n    float average;\n\n    for (i=0; i&lt;array_size; i++)\n    {\n        printf(\"Enter integer #%d: \",i+1);\n        scanf (\"%d\", &amp;ray[i]);\n\n        sum += ray[i];\n    }\n\n    average=(sum/(float)array_size);\n    printf(\"Average = %.2f\\n\", average);\n\n    printf(\"The following values are less than the average: \");\n\n    for (i = 0; i &lt; array_size; i++)\n    {\n        if (ray[i] &lt; average)\n        {\n            printf(\"%d \", ray[i]);\n        }\n    }\n\n    system(\"pause\");\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7536022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c07cb5b95680fb795a080d033b18859?s=128&d=identicon&r=PG&f=1", "display_name": "DaftTommy", "link": "https://stackoverflow.com/users/7536022/dafttommy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1486582329, "creation_date": 1486576686, "question_id": 42120348, "link": "https://stackoverflow.com/questions/42120348/c-how-to-display-the-numbers-in-an-array-that-are-lower-than-the-average-value", "title": "C - how to display the numbers in an array that are lower than the average value of the numbers in the array", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main()\n{\n    int i=0;\n    int ray[20];\n    float sum=0.00, average;\n\n    for (i=0; i&lt;20; i++)\n    {\n        printf(\"Enter integer #%d\",i+1);\n        scanf (\"%d\", &amp;ray[i]);\n        sum=(sum+ray[i]);\n    }\n\n    average=(sum/20);\n    printf(\"Average = %.2f\", average);\n\n    if (ray[i] &lt; average)\n    {\n        printf(\"The followiing values are less than the average: %d\",     ray[i]);\n    }\n    system(\"pause\");\n}\n</code></pre>\n\n<p>The code runs fine and gives the correct average of the integers entered but the values that are less than the average comes out as -858993460</p>\n"}, {"tags": ["c", "c89"], "comments": [{"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1486576445, "post_id": 42120069, "comment_id": 71408687, "body": "How big should <code>Number</code> be? It has 8 elements, but the elements are arrays of indeterminate size. That can&#39;t be allocated."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1486576722, "post_id": 42120069, "comment_id": 71408861, "body": "Note: <code>typedef</code> at local scope is not very useful And what purpose an array-<code>typedef</code> of undetermined size would be good for is very questionable."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1486576998, "post_id": 42120069, "comment_id": 71409035, "body": "Why not use <code>typedef int my_int; my_int a[8];</code>? (have the <code>typedef</code> at file-scope)."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2932402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767e590297bfe0263dfa248c97048468?s=128&d=identicon&r=PG&f=1", "display_name": "TonyJ", "link": "https://stackoverflow.com/users/2932402/tonyj"}, "edited": false, "score": 0, "creation_date": 1486577928, "post_id": 42120306, "comment_id": 71409561, "body": "but if I change it to <code>new_type Number={0};</code> it builds successful but how does compiler knows the actual size of &#39;Number&#39; ?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 43, "user_id": 2932402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767e590297bfe0263dfa248c97048468?s=128&d=identicon&r=PG&f=1", "display_name": "TonyJ", "link": "https://stackoverflow.com/users/2932402/tonyj"}, "edited": false, "score": 0, "creation_date": 1486578032, "post_id": 42120306, "comment_id": 71409617, "body": "@TonyJ - Because you provided an array initializer (<code>{0}</code>). It has 1 element (<code>0</code>), so the size can be deduced to be 1."}], "tags": [], "owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1486580087, "last_edit_date": 1486580087, "creation_date": 1486576541, "answer_id": 42120306, "question_id": 42120069, "link": "https://stackoverflow.com/questions/42120069/array-type-has-incomplete-element-type-when-define-new-data-type/42120306#42120306", "title": "Array type has incomplete element type when define new data type", "body": "<blockquote>\n  <p>Is the definition of new_type through typedef accepted by C90 standard? In this case, new_type is a data type that defines an array of undefined number of element or a pointer to an array of int?</p>\n</blockquote>\n\n<p>The typedef itself is not a problem, since you can typedef incomplete types (<code>typedef struct A A_s;</code>). And <code>new_type</code> is indeed pretty much what you think it is.</p>\n\n<blockquote>\n  <p>If we keep the line <code>typedef int new_type[];</code>, how can we define a variable of type new_type? </p>\n</blockquote>\n\n<p>For a variable definition, the type of the variable must be a complete type, so:</p>\n\n<pre><code>typedef int new_type[];\nnew_type Number = { 1, 2, 3 };\n</code></pre>\n\n<p>Will result in <code>Number</code> being an array of <code>int</code> of size 3. However, you try to define Number as an array of <code>int[]</code> of size 8 (<code>int Number[8][];</code>).</p>\n\n<p>But an array of unspecified size cannot be used to define any variable, array or be a member of a structure<sup>1</sup> (no incomplete type can be used for those purposes).</p>\n\n<hr>\n\n<p><sub>\n    1. Unless it's the last one, a <em>flexible array member</em> is allowed (with many restrictions on it).\n</sub></p>\n"}], "owner": {"reputation": 43, "user_id": 2932402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/767e590297bfe0263dfa248c97048468?s=128&d=identicon&r=PG&f=1", "display_name": "TonyJ", "link": "https://stackoverflow.com/users/2932402/tonyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 42120306, "answer_count": 1, "score": 0, "last_activity_date": 1486580087, "creation_date": 1486575747, "last_edit_date": 1486576927, "question_id": 42120069, "link": "https://stackoverflow.com/questions/42120069/array-type-has-incomplete-element-type-when-define-new-data-type", "title": "Array type has incomplete element type when define new data type", "body": "<p>I have the following piece of code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    typedef int new_type[];\n    new_type Number[8];\n    return 0;\n}\n</code></pre>\n\n<p>The compiler (Gcc- 4.9.2) shows error: <strong>array type has incomplete element type</strong>.<br>\nI have some questions:<br>\n1. Is the definition of <code>new_type</code> through typedef accepted by C90 standard? In this case, <code>new_type</code> is a data type that defines <strong>an array</strong> of undefined number of element or <strong>a pointer</strong> to an array of <code>int</code>?<br>\n2.If we keep the line <code>typedef int new_type[];</code>, how can we define a variable of type <code>new_type</code>?\n  Thank you for your help.</p>\n"}, {"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1486574697, "post_id": 42119624, "comment_id": 71407646, "body": "If you take the inputs as strings, you can check for the <code>&quot;00&quot;</code> and then call it, say, <code>37</code>. Otherwise <code>sscanf</code> the strings to extract the number. But I advise against using <code>float</code> for what is an integer value. I would also advise against using <code>float</code> for the money: better to work in cents. If you must use floating pont, never use <code>float</code> where you can use <code>double</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486575237, "post_id": 42119624, "comment_id": 71407938, "body": "I didn&#39;t know that. So it must be read as a string then."}, {"owner": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486575691, "post_id": 42119624, "comment_id": 71408238, "body": "@WeatherVane Thank you very much, I can now get it to read &quot;00&quot;. I haven&#39;t been introduced to sscanf yet, can I use that to compare numbers then? I will be using a switch statement to check if i have a winning value so for the case statements to pull the number from the playerBet[0].number i would use sscanf?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486575946, "post_id": 42119624, "comment_id": 71408373, "body": "You use <code>sscanf</code> in a similar way to <code>scanf</code>, after getting input with <code>fgets</code>. See the man page. One big advantage is that unlike <code>scanf</code> the function does not &quot;block&quot; when the input requirements are not satisfied. Always check the return value from these functions, which tells you <i>how many items were converted</i>. I suggested you treat <code>&quot;00&quot;</code> as <code>37</code> because you then have 38 numbers in the range <code>0...37</code> and you can make a special case of <code>0</code> and <code>37</code> (actually <code>&quot;00&quot;</code>). Also, &quot;red/black&quot; and &quot;odd/even&quot; etc can be extracted from the value, reducing the number of case statements."}, {"owner": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486576647, "post_id": 42119624, "comment_id": 71408808, "body": "@WeatherVane I&#39;ve now implemented the fgets and sscanf, thank you very much for the point in the right direction, it makes a lot more sense than using scanf. I&#39;m slightly confused on what you mean by treat 00 as 37, how would I go about that? Sorry for the amount of questions, I&#39;m learning as I go."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486577691, "post_id": 42119624, "comment_id": 71409438, "body": "<code>int wheelnum; if(instr[0] == &#39;0&#39; &amp;&amp; instr[1] == &#39;0&#39;) wheelnum = 37; else  sscanf(instr, &quot;%d&quot;, &amp;wheelnum);</code> although this example needs formatting and should be doing some error checking. Then for example <code>int even = (wheelnum % 2 == 0);</code> and so on, with exceptions for the special cases <code>0</code> and <code>37</code> (which internally, you know represents <code>&quot;00&quot;</code>)."}, {"owner": {"reputation": 879, "user_id": 5693785, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/mfKhd.jpg?s=128&g=1", "display_name": "ron", "link": "https://stackoverflow.com/users/5693785/ron"}, "edited": false, "score": 0, "creation_date": 1486580614, "post_id": 42119624, "comment_id": 71411106, "body": "for a problem like this you want to be as familiar as possible with all the functions provided by the three big libraries:  <code>stdio.h, string.h, and stdlib.h</code>.  And also <b>all</b> the conversion formats available for <code>scanf, sscanf, printf, and fprintf</code> such as <code>%d</code>  <code>%i</code>  <code>%f</code> and <code>%s</code>."}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486578207, "post_id": 42120709, "comment_id": 71409727, "body": "The advantage of using integer numbers is that (except for <code>0</code> and <code>00</code> which do not apply) the zones of the board are easily computable.  Red/black, high/low, etc. and betting perms like &quot;street&quot; and &quot;corner&quot; too."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486578290, "post_id": 42120709, "comment_id": 71409780, "body": "I agree, however for the input you wouldn&#39;t want the user to have to enter <code>&quot;37&quot;</code>, so you would probably input a character array and then parse it."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486578358, "post_id": 42120709, "comment_id": 71409835, "body": "You would not want the user to enter <code>-1</code> or <code>100</code> either. Of course there must be some error- and range-checking."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486578522, "post_id": 42120709, "comment_id": 71409932, "body": "Of course, but that is off-topic. I am saying that the use of a sentinel value of <code>37</code> is good, but not for user input. The OP should be inputting this data as character arrays so that the user can enter <code>00</code> and have the software interpret this as <code>37</code> (or however the OP wants to model the data internally)."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486578630, "post_id": 42120709, "comment_id": 71409997, "body": "And yes I agree, integers should also be used to model the internal data (not floats). I only referenced those since the OP did in the question."}, {"owner": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "edited": false, "score": 0, "creation_date": 1486579456, "post_id": 42120709, "comment_id": 71410479, "body": "So for the sentinel value i&#39;m slightly confused as to how I can achieve this, i saw the code written by weather vane but still am a bit confused on it, i understand the principle behind it and that actually solves a problem i would have had later.      if(playerBet[0].number[0] == &#39;0&#39; &amp;&amp; playerBet[0].number[1] == &#39;0&#39;) playerBet[0].number[0] = 37; Should this code not work? It gives me the result of &quot;%0&quot;."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "edited": false, "score": 0, "creation_date": 1486581145, "post_id": 42120709, "comment_id": 71411378, "body": "if <code>playerBet[0].number</code> is of type <code>float</code>, then it will probably not equal <code>&#39;0&#39;</code>, since <code>&#39;0&#39; == 48</code>, since <code>&#39;0&#39;</code> is a <code>char</code>. You should input character arrays, not floats."}, {"owner": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "edited": false, "score": 0, "creation_date": 1486582726, "post_id": 42120709, "comment_id": 71412275, "body": "@GregSchmit Thank you very much for the extremely detailed answer, I really appreciate that, I can now see how it all works, I tried implementing it however it comes back with a fatal runtime error, I&#39;ve checked all the syntax to make sure it is correct multiple times and could not find a problem."}, {"owner": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "edited": false, "score": 0, "creation_date": 1486583481, "post_id": 42120709, "comment_id": 71412722, "body": "#include &lt;stdio.h&gt; #include &lt;string.h&gt; int main( void ) { char input_number[3]; // 2 spaces plus null terminator int Number;           // numeric version (after parsing) float bet_value;      // float value for bet  struct bet /* Setting up a structure array to store input values */ { float number; float betValue; } playerBet[4];   scanf(&quot;%s %f&quot;, input_number, bet_value);  if (input_number[0] == &#39;0&#39; &amp;&amp; input_number[1] == &#39;0&#39;) {     Number = 37; } else {     Number = atoi(input_number); } ...... I then did the assigning. This now works but i can&#39;t use words."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "edited": false, "score": 0, "creation_date": 1486586019, "post_id": 42120709, "comment_id": 71414179, "body": "You should take an intro to C programming course like this one: <a href=\"https://learncodethehardway.org/c/\" rel=\"nofollow noreferrer\">learncodethehardway.org/c</a>."}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "edited": false, "score": 0, "creation_date": 1486586224, "post_id": 42120709, "comment_id": 71414281, "body": "I did have an error though: in the <code>scanf</code> statement I should&#39;ve passed the address of bet_value (as in, <code>scanf(&quot;%s %f&quot;, input_number, &amp;bet_value);</code>). It is fixed now if you want to try that. Otherwise, you should give compiler errors, don&#39;t just tell me there was a &quot;fatal error&quot;."}, {"owner": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "edited": false, "score": 0, "creation_date": 1486587215, "post_id": 42120709, "comment_id": 71414838, "body": "I no longer have any errors, thank you very much! The only problem I have now is using words but i will come to that in the future. I wish I could have given you a better compiler error but unfortunately that is all it gives me, I have been tasked to do this on the absolute most basic compiler. Is there a way you know of like strcpy to copy the data of a string into a struct array variable? Thank you very much for your help too!!"}, {"owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "reply_to_user": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "edited": false, "score": 0, "creation_date": 1486593922, "post_id": 42120709, "comment_id": 71418175, "body": "@ConradYeadon <code>strcpy()</code> can copy a string for you. For more info, see the man page here: freebsd.org/cgi/man.cgi?strcpy(3). <code>memcpy()</code> could also work. If you found my answer helpful, feel free to upvote it as well."}], "tags": [], "owner": {"reputation": 3572, "user_id": 6515554, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-iCYFFUhmkC0/AAAAAAAAAAI/AAAAAAAABR0/bmaKQzMDoe4/photo.jpg?sz=128", "display_name": "Greg Schmit", "link": "https://stackoverflow.com/users/6515554/greg-schmit"}, "is_accepted": true, "score": 0, "last_activity_date": 1487914791, "last_edit_date": 1487914791, "creation_date": 1486577904, "answer_id": 42120709, "question_id": 42119624, "link": "https://stackoverflow.com/questions/42119624/using-scanf-to-read-00/42120709#42120709", "title": "Using scanf() to read &quot;00&quot;", "body": "<p>For floating point numbers and integers, <code>0</code> and <code>00</code> are not distinguishable. As @Weather Vane pointed out in the comments, you can use a <a href=\"https://en.wikipedia.org/wiki/Sentinel_value\" rel=\"nofollow noreferrer\">sentinel value</a> to distinguish double-zero. You can also input each data point as a string (as <code>\"0\" and \"00\"</code> are distinguished as different when interpreted as character arrays).</p>\n\n<p>For these kinds of small projects that are simple (and likely homework problems), you can use <a href=\"https://www.freebsd.org/cgi/man.cgi?query=atoi&amp;apropos=0&amp;sektion=3&amp;manpath=FreeBSD+11.0-RELEASE&amp;arch=default&amp;format=html\" rel=\"nofollow noreferrer\"><code>atoi()</code></a> to convert strings to numeric values to parse your input.</p>\n\n<p>You should probably be using integers to model your data internally. This will ensure you don't run into problems when checking evenness or oddness of your input. Your data structure doesn't seem to require modeling floating-point data.</p>\n\n<h1>Example</h1>\n\n<p>Make your structure element <code>number</code> an integer, and the <code>betValue</code> a <code>float</code>:</p>\n\n<pre><code>int number;\nfloat betValue;\n</code></pre>\n\n<p>Input number as string and parse it:</p>\n\n<pre><code>char input_number[3]; // 2 spaces plus null terminator\nint number;           // numeric version (after parsing)\nfloat bet_value;      // float value for bet\nscanf(\"%s %f\", input_number, &amp;bet_value);\nif (input_number[0] == '0' &amp;&amp; input_number[1] == '0') {\n    number = 37;\n} else {\n    number = atoi(input_number);\n}\n// Assign them to structure\nplayerBet[0].number = number;\nplayerBet[0].betValue = bet_value;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7535888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7968e75e55ee2d80cdf9780a7843c4e?s=128&d=identicon&r=PG&f=1", "display_name": "Conrad", "link": "https://stackoverflow.com/users/7535888/conrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 42120709, "answer_count": 1, "score": 0, "last_activity_date": 1487914791, "creation_date": 1486574333, "last_edit_date": 1486578171, "question_id": 42119624, "link": "https://stackoverflow.com/questions/42119624/using-scanf-to-read-00", "title": "Using scanf() to read &quot;00&quot;", "body": "<p>I'm very new to programming and am trying to make a basic American roulette game using only numbers, one number that appears on the board is \"00\", I am trying to assign \"00\" to a variable in a structure array and I am not sure how to do this specific number as it reads it as \"0\". Here is the code I am using to set it up, sorry for the probably very stupid question but I have been searching for a few hours and only extremely complex answers have come up that I couldn't possibly understand yet (although I've tried). The input needs to be read in one due to the very basic compiler I'm using on request such that an input will be \"number number number number number number number number\".</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main( void )\n{\n    struct bet /* Setting up a structure array to store input values */\n    {\n        float number;\n        float betValue;\n    } playerBet[4];\n\n    scanf(\"%f %f %f %f %f %f %f %f\", &amp;playerBet[0].number, &amp;playerBet[0].betValue, &amp;playerBet[1].number, &amp;playerBet[1].betValue,&amp;playerBet[2].number, &amp;playerBet[2].betValue,&amp;playerBet[3].number, &amp;playerBet[3].betValue);\n}\n</code></pre>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["c", "call", "system"], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1486577889, "last_edit_date": 1486577889, "creation_date": 1486575081, "answer_id": 42119843, "question_id": 42119595, "link": "https://stackoverflow.com/questions/42119595/open-system-call-with-parameter-0-as-a-flag/42119843#42119843", "title": "Open system call with parameter 0 as a flag", "body": "<p><a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/open.html\" rel=\"nofollow noreferrer\">The POSIX specifications for <code>open()</code></a> require that exactly one of the defined constants <code>O_EXEC</code>, <code>O_RDONLY</code>, <code>O_WRONLY</code>, <code>O_RDWR</code>, or <code>O_SEARCH</code> be included in the flags, but they do not specify the <em>values</em> of these constants.  Indeed, they note in the rationale that \"in historical implementations the value of <code>O_RDONLY</code> is zero.\"  On such an implementation, specifying flags as 0 is equivalent to specifying (only) <code>O_RDONLY</code>.</p>\n\n<p>POSIX's use of the term \"historical\" should not be taken as suggesting that it is rare for <code>O_RDONLY</code> to have the value 0; on the contrary, it is quite common in present-day implementations.  Nevertheless, you should not specify the flags as 0 when you mean <code>O_RDONLY</code>, as that leaves your code open to breakage on systems with different definitions of the flag constants.</p>\n\n<p>If you indeed can open with flags given as 0 but not with flags given as <code>O_RDONLY</code> (which seems doubtful), then it must be the case that <code>O_RDONLY</code> has a value different from 0 in your implementation.  It may then be that one of the other members of the mandatory constant group has value 0, and that you can open the target file in the corresponding mode -- for example, maybe the path designates a directory, and it is <code>O_SEARCH</code> that has value 0.  Otherwise, you are eliciting undefined behavior from <code>open()</code>. UB does not have to manifest as returning an error indicator, and if it happens not to do so then that tells you nothing.</p>\n\n<hr>\n\n<p>Addendum: given that <code>open(path, O_RDONLY)</code> fails for you (as indicated by returning -1), it would be worthwhile to probe the reason for the error by examining <code>errno</code>, or, better, by printing a diagnostic via <code>perror()</code>.</p>\n"}], "owner": {"reputation": 743, "user_id": 4907214, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/xZcN2.png?s=128&g=1", "display_name": "Paz", "link": "https://stackoverflow.com/users/4907214/paz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486577889, "creation_date": 1486574257, "question_id": 42119595, "link": "https://stackoverflow.com/questions/42119595/open-system-call-with-parameter-0-as-a-flag", "title": "Open system call with parameter 0 as a flag", "body": "<p>Im trying to open a device file (but the question is mainly for a general file) and it's working with the next line </p>\n\n<pre><code>fd = open(path,0);\n</code></pre>\n\n<p>but failed with the following line</p>\n\n<pre><code>fd = open(path,O_RDONLY,0777)\n</code></pre>\n\n<p>(even without the mode 0777)\nI just dont understand what is the meaning of puting 0 instead of a flag and why its working.</p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 1, "creation_date": 1486574439, "post_id": 42119564, "comment_id": 71407502, "body": "Mandatory reading regarding <a href=\"http://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc\">casting malloc&#39;s return value</a>."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1486574484, "post_id": 42119564, "comment_id": 71407523, "body": "<code>&amp;x[20] = ins;</code> what are you trying to achieve with this?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486574877, "post_id": 42119564, "comment_id": 71407750, "body": "In the future, copy and paste errors via the clipboard. The term is <code>lvalue</code>, not <code>1value</code>"}], "answers": [{"comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 1, "creation_date": 1486574500, "post_id": 42119659, "comment_id": 71407536, "body": "Downvoter - can you explain what&#39;s wrong with this answer and how you can improve it."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486574502, "post_id": 42119659, "comment_id": 71407539, "body": "The issue is with trying to write to an <code>rvalue</code>, it is the same error as <code>1 + 1 = (int)x</code>"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486574527, "post_id": 42119659, "comment_id": 71407553, "body": "@StoryTeller Oh, absolutely. But I figured that I&#39;d explain <i>why</i> the address is an rvalue and why trying to assign it here isn&#39;t meaningful."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486574649, "post_id": 42119659, "comment_id": 71407619, "body": "That particular tangent doesn&#39;t explain the problem, it has nothing to do with the &quot;where those elements are isn&#39;t going to change&quot;."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486574738, "post_id": 42119659, "comment_id": 71407668, "body": "And I feel it&#39;s misleading to the OP to even attempt and give a &quot;natural&quot; interpretation to <code>&amp;x[20] = ins</code>"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486574819, "post_id": 42119659, "comment_id": 71407712, "body": "I removed my downvote since the third paragraph you added is spot on, but my previous comments about the first still stand."}, {"owner": {"reputation": 84, "user_id": 3889119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927b78a99d4950f6a34afdd7efc3da95?s=128&d=identicon&r=PG&f=1", "display_name": "Koorosh Hajiani", "link": "https://stackoverflow.com/users/3889119/koorosh-hajiani"}, "edited": false, "score": 0, "creation_date": 1489606966, "post_id": 42119659, "comment_id": 72750242, "body": "the code x[20] = ins is totally fine. Is it really fine?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 84, "user_id": 3889119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927b78a99d4950f6a34afdd7efc3da95?s=128&d=identicon&r=PG&f=1", "display_name": "Koorosh Hajiani", "link": "https://stackoverflow.com/users/3889119/koorosh-hajiani"}, "edited": false, "score": 0, "creation_date": 1489608112, "post_id": 42119659, "comment_id": 72750918, "body": "@KooroshHajiani I believe so - am I missing something?"}, {"owner": {"reputation": 84, "user_id": 3889119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927b78a99d4950f6a34afdd7efc3da95?s=128&d=identicon&r=PG&f=1", "display_name": "Koorosh Hajiani", "link": "https://stackoverflow.com/users/3889119/koorosh-hajiani"}, "edited": false, "score": 0, "creation_date": 1489608771, "post_id": 42119659, "comment_id": 72751268, "body": "You are assigning a pointer to node to node, are they not incompatible?"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 84, "user_id": 3889119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927b78a99d4950f6a34afdd7efc3da95?s=128&d=identicon&r=PG&f=1", "display_name": "Koorosh Hajiani", "link": "https://stackoverflow.com/users/3889119/koorosh-hajiani"}, "edited": false, "score": 0, "creation_date": 1489609347, "post_id": 42119659, "comment_id": 72751572, "body": "@KooroshHajiani Oh whoops, I didn&#39;t think to check the types. Let me go and fix that..."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 3, "last_activity_date": 1489609406, "last_edit_date": 1489609406, "creation_date": 1486574445, "answer_id": 42119659, "question_id": 42119564, "link": "https://stackoverflow.com/questions/42119564/why-wouldnt-this-pointer-operation-work/42119659#42119659", "title": "Why wouldn&#39;t this pointer operation work?", "body": "<p>The issue here is that when you write <code>&amp;x[20]</code>, you are getting back the address of the 20th element of the array <code>x</code>. Once you've created the array <code>x</code>, you can't change where its elements appear in memory. You can change the <em>contents</em> of the array elements, but <em>where those elements are</em> isn't going to change. As a result, writing <code>&amp;x[20] = ins</code> is illegal, since the most natural interpretation of this statement is \"move the 20th element of <code>x</code> to the spot pointed at by <code>ins</code>.\"</p>\n\n<p>On the other hand, the code <code>x[20] = ins</code> is better (but it still has an issue). That means \"change the <em>contents</em> of the 20th element of the array <code>x</code> to hold the address stored in <code>ins</code>.\" Keep in mind that there's a difference between \"the address <em>stored in</em> <code>x[20]</code>\" (which is given by <code>x[20]</code>) and \"the address <em>of</em> <code>x[20]</code>,\" which is given by (<code>&amp;x[20]</code>).</p>\n\n<p>The problem with that line of code is that <code>x[20]</code> has type <code>node</code> and <code>ins</code> has type <code>node*</code>. Did you mean to make <code>x</code> a <code>node**</code> (a pointer to an array of <code>node*</code>s? If you make that change, that line should compile.</p>\n\n<p>Technically speaking, the issue here is that the address-of operator returns an <em>rvalue</em>, but you can only put <em>lvalues</em> on the left-hand side of an assignment statement. An rvalue is a value like 137 or \"hello\" that represents, in some sense, a \"pure value\" that isn't the name of some place you can put something. Writing something like <code>137 = x</code> isn't legal because you can't store <code>x</code> \"in\" 137, the same way that writing <code>&amp;x[20] = ins</code> isn't legal because you can't store <code>ins</code> \"in\" <code>&amp;x[20]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 3117579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e81487560176d4ed21996ffb5803a63d?s=128&d=identicon&r=PG&f=1", "display_name": "reVolutionary", "link": "https://stackoverflow.com/users/3117579/revolutionary"}, "edited": false, "score": 0, "creation_date": 1486574574, "post_id": 42119680, "comment_id": 71407581, "body": "20 Would just be a random index i chose to append to"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486574579, "post_id": 42119680, "comment_id": 71407586, "body": "Why would you guess that when the OP specified it&#39;s an array of objects?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486574662, "post_id": 42119680, "comment_id": 71407629, "body": "cos he tries to store the address of a node in it"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1486574675, "post_id": 42119680, "comment_id": 71407637, "body": "If <code>x</code> is of type <code>node*</code>, isn&#39;t <code>x[20]</code> a <code>node</code> then?"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1486574698, "last_edit_date": 1486574698, "creation_date": 1486574501, "answer_id": 42119680, "question_id": 42119564, "link": "https://stackoverflow.com/questions/42119564/why-wouldnt-this-pointer-operation-work/42119680#42119680", "title": "Why wouldn&#39;t this pointer operation work?", "body": "<p>i am guessing that <code>x</code> is an array of pointers to nodes. SO do</p>\n\n<pre><code>node** x = (node**) malloc(sizeof(node*) * 500);\n</code></pre>\n\n<p>You then want to store the address of your new node in a free slot of x</p>\n\n<pre><code>x[20] = ins;\n</code></pre>\n\n<p>although I am not sure where the 20 comes from</p>\n\n<p>Your original construction </p>\n\n<pre><code>&amp;x[20] = ins;\n</code></pre>\n\n<p>simply doesnt make sense , you are trying to change the address of an array member, not allowed</p>\n"}, {"comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1486574789, "post_id": 42119718, "comment_id": 71407693, "body": "L as in LEFT / R as in RIGHT would perhaps be slightly more pedagogical :) Although you wrote it&#39;s the expression appearing on the left."}, {"owner": {"reputation": 65, "user_id": 3117579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e81487560176d4ed21996ffb5803a63d?s=128&d=identicon&r=PG&f=1", "display_name": "reVolutionary", "link": "https://stackoverflow.com/users/3117579/revolutionary"}, "edited": false, "score": 0, "creation_date": 1486574937, "post_id": 42119718, "comment_id": 71407776, "body": "Thank you, that&#39;s definitely one cool way of doing it. So if I just want an array of linked lists, why an array of pointers? This definitely seems like it would make it much much easier"}], "tags": [], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "is_accepted": false, "score": 1, "last_activity_date": 1486574621, "creation_date": 1486574621, "answer_id": 42119718, "question_id": 42119564, "link": "https://stackoverflow.com/questions/42119564/why-wouldnt-this-pointer-operation-work/42119718#42119718", "title": "Why wouldn&#39;t this pointer operation work?", "body": "<p>It is not 1value, it is lvalue, L as in LOVE.</p>\n\n<pre><code>&amp;x[20] = ins;\n</code></pre>\n\n<p>says, approximately, take the 20th element in the array x.  Find its address, change it.  You can never change a pointer, you can only change the value that pointer is pointing to.  So lvalue (an expression appearing on the left of assignment) can only be something like *node, but not &amp;node.\nYou don't need to allocate ans again.  You already have a bunch of node objects allocated.  You can just do</p>\n\n<pre><code>x[20].val = value;\n</code></pre>\n\n<p>Probably that's not what you want.  But then then you can just change your x to be an array of pointers to node objects:</p>\n\n<pre><code>node** x = (node**) malloc(sizeof(node*) * 500);\n</code></pre>\n\n<p>then do</p>\n\n<pre><code>   x[20] = ins;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 3117579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e81487560176d4ed21996ffb5803a63d?s=128&d=identicon&r=PG&f=1", "display_name": "reVolutionary", "link": "https://stackoverflow.com/users/3117579/revolutionary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 42119659, "answer_count": 3, "score": 1, "last_activity_date": 1489609406, "creation_date": 1486574142, "question_id": 42119564, "link": "https://stackoverflow.com/questions/42119564/why-wouldnt-this-pointer-operation-work", "title": "Why wouldn&#39;t this pointer operation work?", "body": "<p>So I have an array of linked lists</p>\n\n<pre><code>node* x = (node*) malloc(sizeof(node) * 500);\n</code></pre>\n\n<p>Now I want to insert into this list</p>\n\n<pre><code>int value;\nvalue = 50;\nnode* ins;\nins = (node*) malloc(sizeof(node));\nins-&gt;val = value;\nins-&gt;next = &amp;x[20];\n&amp;x[20] = ins;\n</code></pre>\n\n<p>Error i'm getting; 1value required as left operand of assignment</p>\n\n<p>Incase you want to see the node struct</p>\n\n<pre><code>typedef struct node {\n    int val;\n    struct node* next;\n } node;\n</code></pre>\n\n<p>Why wouldn't something like this work? I want to learn :D</p>\n\n<p>Edit: The error is pointed to this line</p>\n\n<pre><code>&amp;x[20] = ins;\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1486572646, "post_id": 42119020, "comment_id": 71406323, "body": "<code>printName(*name);</code> -&gt; <code>printName(name); </code>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1486572825, "post_id": 42119020, "comment_id": 71406458, "body": "and change the second loop to <code>int i = 0; while( pointer[i] != &#39;\\0&#39; ){ arrayOfPointers[i] = &amp;pointer[i]; i++; }</code> and the third loop to <code>i = 0; while( pointer[i] != &#39;\\0&#39; ){ printf(&quot;Value: %d, addr: %p\\n&quot;, pointer[i], arrayOfPointers[i]); i++; }</code> oh and also <code>char arrayOfPointers[10];</code> - &gt; <code>char* arrayOfPointers[10];</code>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1486583080, "post_id": 42119020, "comment_id": 71412486, "body": "Check your compiler error messages... if there are none then you need to reconfigure the compiler"}], "answers": [{"tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": false, "score": 1, "last_activity_date": 1486573529, "last_edit_date": 1486573529, "creation_date": 1486573059, "answer_id": 42119209, "question_id": 42119020, "link": "https://stackoverflow.com/questions/42119020/printing-the-value-and-memory-location-of-each-character-by-using-two-different/42119209#42119209", "title": "printing the value and memory location of each character by using two different arrays?", "body": "<p>You have several errors, the first one is pointed by @George in comments:</p>\n\n<pre><code> char *name = \"Example\";\n printName(*name);    \n return 0;\n}\n\nvoid printName(char *pointer)\n</code></pre>\n\n<p><code>printName</code> is expecting a pointer to <code>char</code> but you are passing (due to the dereference <code>*</code>) a single <code>char</code>, just pass <code>printName(name);</code></p>\n\n<p>And here:</p>\n\n<p><code>arrayOfPointers[i] = NULL;</code> </p>\n\n<p>you are assigning a pointer to a <code>char</code></p>\n\n<p>same for</p>\n\n<p><code>arrayOfPointers[i] = &amp;arrayOfChars[i];</code></p>\n\n<p>If you want an array of pointers (as the comment suggests) use</p>\n\n<pre><code>char arrayOfChars[10];\nchar *arrayOfPointers[10];\n</code></pre>\n\n<p>Also you need to check for the trailing <code>NUL</code> character in the loop because you are reading outside of the bounds of the array.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 7534836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc600c0c9888b4a4c5cef4c1bd8f67e?s=128&d=identicon&r=PG&f=1", "display_name": "Anmol Saraswat", "link": "https://stackoverflow.com/users/7534836/anmol-saraswat"}, "is_accepted": false, "score": 0, "last_activity_date": 1486573519, "creation_date": 1486573519, "answer_id": 42119351, "question_id": 42119020, "link": "https://stackoverflow.com/questions/42119020/printing-the-value-and-memory-location-of-each-character-by-using-two-different/42119351#42119351", "title": "printing the value and memory location of each character by using two different arrays?", "body": "<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;time.h&gt;\n    #include &lt;stdlib.h&gt;\n\n        void printName(char *pointer);\n\n      int main (void)\n       {\n          char *name = \"Example\";\n           printName(name);\n          return 0;\n          }\n      void printName(char *pointer)\n          {\n             int i;\n         char arrayOfChars[10];\n           char arrayOfPointers[10];\n\n            // set values to null\n         for(i = 0; i &lt; 10; i++)\n            {\n            arrayOfPointers[i] = NULL;\n             }\n           // set each pointer to point to one character in the other array\n          for(i = 0; i &lt; 10; i++)\n              {\n              arrayOfPointers[i] = &amp;arrayOfChars[i];\n            }\n                 // print value and memory location:\n            for (i = 0; i &lt; 10; ++i)\n             {\n                    printf(\"Value: %d, addr: %p\\n\", pointer[i], pointer+i);\n              }\n            }\n</code></pre>\n\n<p>Just try this code. You are intializing i many times may be that is the error. and also pass name to funtion and not *name because we have to pass the address not the value at that address</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 7535695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yDlAd.jpg?s=128&g=1", "display_name": "Tasnim Khan", "link": "https://stackoverflow.com/users/7535695/tasnim-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1486576657, "last_edit_date": 1486576657, "creation_date": 1486573945, "answer_id": 42119496, "question_id": 42119020, "link": "https://stackoverflow.com/questions/42119020/printing-the-value-and-memory-location-of-each-character-by-using-two-different/42119496#42119496", "title": "printing the value and memory location of each character by using two different arrays?", "body": "<p>Change: printName(*name); to printName(name); because you have already defined it as a pointer array</p>\n\n<p>When you are defining arrayOfPointers, make sure you define it as array of pointers:\nchar *arrayOfPointers[10];\nThis is to avoid the conversion error.</p>\n\n<p>Also, if you want to print the char value instead of its ASCII value: change %d  with %c:\nprintf(\"Value: %c, addr: %p\\n\", pointer[i], pointer + i);</p>\n\n<p>NB: Your code uses static array sizes and not dynamic. Because of that, the last three values you will get while printing \"Example\" addresses will be garbage values.</p>\n"}], "owner": {"reputation": 27, "user_id": 6649568, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/72cc82c856084fdc1b0bdf4eb37cd3b3?s=128&d=identicon&r=PG&f=1", "display_name": "Will Ferguson", "link": "https://stackoverflow.com/users/6649568/will-ferguson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1486582176, "creation_date": 1486572580, "last_edit_date": 1486582176, "question_id": 42119020, "link": "https://stackoverflow.com/questions/42119020/printing-the-value-and-memory-location-of-each-character-by-using-two-different", "title": "printing the value and memory location of each character by using two different arrays?", "body": "<p>I have a function and inside it two arrays.\nIn the first loop, I initialize pointers to NULL\nIn the second loop, I set each pointer to point to one character in the other array. So in pointer array location [0] there is a char pointer that points to character array location [0] etc.\nIn the third loop, I print out the value and memory location of each character. </p>\n\n<p>However, my code is not working as intended, causing IDE to crash:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n\n    void printName(char *pointer);\n\n    int main (void)\n    {\n     char *name = \"Example\";\n     printName(*name);    \n     return 0;\n    }\n    void printName(char *pointer)\n    {\n        char arrayOfChars[10];\n        char arrayOfPointers[10];\n\n        for(int i = 0; i &lt; 10; i++)\n        {\n             arrayOfPointers[i] = NULL;\n        }\n        for(int i = 0; i &lt;= 10; i++)\n        {\n             arrayOfPointers[i] = &amp;arrayOfChars[i];\n        }\n        for (int i = 0; i &lt;= 10; ++i)\n        {\n             printf(\"Value: %d, addr: %p\\n\", pointer[i], pointer+i);\n        }\n    }\n</code></pre>\n"}, {"tags": ["c", "r", "cmd"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7436254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1321923061197322/picture?type=large", "display_name": "Travis T", "link": "https://stackoverflow.com/users/7436254/travis-t"}, "edited": false, "score": 0, "creation_date": 1486573064, "post_id": 42118730, "comment_id": 71406635, "body": "So I did add this line to the <b>Makevars.win</b> under the R directory. However, it gives me the same error. Do I need to execute another line in Command Prompt to link? Do I need to put/download those libraries somewhere?"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 11, "user_id": 7436254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1321923061197322/picture?type=large", "display_name": "Travis T", "link": "https://stackoverflow.com/users/7436254/travis-t"}, "edited": false, "score": 0, "creation_date": 1486573140, "post_id": 42118730, "comment_id": 71406697, "body": "It has to be a file <code>Makevars.win</code> in the directory <code>src</code> as indicated by the shorthand notation <code>src&#47;Makevars.win</code> I employed in my answer.  You used the wrong directory."}, {"owner": {"reputation": 11, "user_id": 7436254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1321923061197322/picture?type=large", "display_name": "Travis T", "link": "https://stackoverflow.com/users/7436254/travis-t"}, "edited": false, "score": 0, "creation_date": 1486577359, "post_id": 42118730, "comment_id": 71409250, "body": "I have two src folders:  <b>D:/R/R-3.3.2/src/Makevars.win</b>    and     <b>D:/R/R-3.3.2/src/library/windlgs/src/Makevars.win</b>     I put the makefile in both folders. Still it cannot link. My &#39;Makevars.win&#39; has this content: <b>PKG_LIBS = $(GRAPHAPP_LIB) PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)</b>"}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 11, "user_id": 7436254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1321923061197322/picture?type=large", "display_name": "Travis T", "link": "https://stackoverflow.com/users/7436254/travis-t"}, "edited": false, "score": 0, "creation_date": 1486578241, "post_id": 42118730, "comment_id": 71409754, "body": "No need to yell with bold markup, in any event we prefer backticks to typeset <code>as code</code>.  All you need to know is in the <a href=\"https://cran.r-project.org/doc/manuals/r-release/R-exts.html\" rel=\"nofollow noreferrer\">Writing R Extensions</a> manual.  There are now over 10,000 packages on CRAN, and several thousand of these use compiled source.  So why not read the manual and study existing working examples?"}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 0, "last_activity_date": 1486571819, "creation_date": 1486571819, "answer_id": 42118730, "question_id": 42118561, "link": "https://stackoverflow.com/questions/42118561/error-in-r-cmd-shlib-compiling-c-code/42118730#42118730", "title": "Error in R CMD SHLIB compiling C code", "body": "<p>You have a <em>linker</em> error and not a <em>compiler</em> error.  The compilation step passed fine.</p>\n\n<p>Solution: Tell R to link against the missing library, most by adding a file <code>src/Makevars.win</code> with the following:</p>\n\n<pre><code>PKG_LIBS = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS)\n</code></pre>\n\n<p>It is a variable declaration using other variable which R knows.</p>\n"}], "owner": {"reputation": 11, "user_id": 7436254, "user_type": "registered", "profile_image": "https://graph.facebook.com/1321923061197322/picture?type=large", "display_name": "Travis T", "link": "https://stackoverflow.com/users/7436254/travis-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486571819, "creation_date": 1486571384, "question_id": 42118561, "link": "https://stackoverflow.com/questions/42118561/error-in-r-cmd-shlib-compiling-c-code", "title": "Error in R CMD SHLIB compiling C code", "body": "<p>I am trying to use <strong>R CMD SHLIB</strong> for a <strong>C</strong> program written using <strong>Lapack</strong> and <strong>Blas</strong>. I am using the command prompt in Windows. But it seems unable to link to the external libraries. How can I link these libraries?</p>\n\n<pre><code>D:\\R\\testR&gt;Rcmd SHLIB fmpc.c\nc:/Rtools/mingw_64/bin/gcc -shared -s -static-libgcc -o fmpc.dll tmp.def fmpc.o\n-Ld:/Compiler/gcc-4.9.3/local330/lib/x64 -Ld:/Compiler/gcc-4.9.3/local330/lib -L\nD:/R/R-3.3.2/bin/x64 -lR\nfmpc.o:fmpc.c:(.text+0x76d): undefined reference to `dposv_'\nfmpc.o:fmpc.c:(.text+0x800): undefined reference to `dtrtrs_'\nfmpc.o:fmpc.c:(.text+0x83b): undefined reference to `dtrtrs_'\nfmpc.o:fmpc.c:(.text+0x92f): undefined reference to `dposv_'\nfmpc.o:fmpc.c:(.text+0x9bf): undefined reference to `dtrtrs_'\nfmpc.o:fmpc.c:(.text+0x9fa): undefined reference to `dtrtrs_'\nfmpc.o:fmpc.c:(.text+0xb19): undefined reference to `dgemm_'\n</code></pre>\n"}, {"tags": ["c", "windows", "memory-leaks", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1486571459, "post_id": 42118389, "comment_id": 71405482, "body": "&quot;Debug my code for me&quot; isn&#39;t a good question. Start by eliminating superfluous details from your code until you reach a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You may find the problem yourself along the way."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486571550, "post_id": 42118389, "comment_id": 71405556, "body": "I see your function for creating the window, but I don&#39;t see any actual creation or destruction of any windows."}, {"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486572157, "post_id": 42118389, "comment_id": 71406004, "body": "@JohnBollinger The &quot;chooseProfName&quot; is here just for completeness. It does create window that is constantly open in the loop. The loop is actualy in pickNameButtCB, running showError, where the dialog is created, and destroyed (I connected the &quot;response&quot; signal to widget destroying function)."}, {"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486572335, "post_id": 42118389, "comment_id": 71406110, "body": "@StoryTeller That&#39;s where you&#39;re wrong. I&#39;ve been looking at this part of code for about 3 days now, 18 hours per day (yes, I&#39;ve been doing nothing else but STARING at this code and trying to figure out what&#39;s wrong there). I&#39;m asking &quot;is it my fault or is it gtk&#39;s&quot;, not &quot;debug my code for me&quot; because according to gtk man pages and gtk memory managements guides etc. I&#39;ve done nothing wrong. Also, I think you&#39;re right about the code part. I&#39;ll remove unnecessary code from my post."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1486572479, "post_id": 42118389, "comment_id": 71406207, "body": "If you can&#39;t find the problem whilst eliminating clutter than by all means, post a question. But I suspect your lack of success thus far is highly affected by the amount of details."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1486572495, "post_id": 42118389, "comment_id": 71406223, "body": "That&#39;s not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your last edit. Seriously, take the time and reduce it (i.e. delete code) instead of being impatient."}, {"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "edited": false, "score": 0, "creation_date": 1486572658, "post_id": 42118389, "comment_id": 71406331, "body": "Actually, according to the post you"}, {"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "edited": false, "score": 0, "creation_date": 1486573560, "post_id": 42118389, "comment_id": 71406978, "body": "(pressed enter instead of shift. sorry and edited for more than 5 minutes...) Actually, according to the post you linked it&#39;s ideal. The only thing that&#39;s missing is the parent window creation (which was mistakenly taken as the problem here, so I deleted it), and a while(1) showError( /* ... */); which is unnecessary I believe. If you&#39;re not happy with the amount of code that I deleted (which was just enough understand what the program here does) then well... noone&#39;s perfect. I&#39;ll try making it &quot;just right&quot; in a moment."}, {"owner": {"reputation": 594, "user_id": 6943963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bef7d6b5074f025cf5f7e18e9235f2?s=128&d=identicon&r=PG&f=1", "display_name": "Errol van de l&#39;Isle", "link": "https://stackoverflow.com/users/6943963/errol-van-de-lisle"}, "edited": false, "score": 0, "creation_date": 1486597811, "post_id": 42118389, "comment_id": 71419651, "body": "How did you measure the memory leak? And more importantly why have you not used the correct tools to do the measurement and find the source of the problem? Using G_SLICE=always-malloc on its own is not going to be of help to you. It is only useful when used with a tool to detect memory leaks."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1486644960, "post_id": 42118389, "comment_id": 71440668, "body": "Which GTK version and Windows version are you using ? That may help to know if that GTK version has known memory leaks."}, {"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "reply_to_user": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1486677578, "post_id": 42118389, "comment_id": 71461785, "body": "@liberforce GTK 3.22.7-1 and Windows 10"}, {"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "reply_to_user": {"reputation": 594, "user_id": 6943963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bef7d6b5074f025cf5f7e18e9235f2?s=128&d=identicon&r=PG&f=1", "display_name": "Errol van de l&#39;Isle", "link": "https://stackoverflow.com/users/6943963/errol-van-de-lisle"}, "edited": false, "score": 0, "creation_date": 1486678104, "post_id": 42118389, "comment_id": 71462007, "body": "@Errolvandel&#39;Isle At first I just opened task manager and cycled through windows to see if the memory will grow infinitely or if it will stop at some point to just check if there&#39;s something wrong with the program&#39;s memory. Then I used Performance Manager to get more info about it. So as you can see I didn&#39;t measure it - I just checked if there&#39;s something wrong with the memory I&#39;m allocating, and concluded that it might be a memory leak."}, {"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "reply_to_user": {"reputation": 594, "user_id": 6943963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bef7d6b5074f025cf5f7e18e9235f2?s=128&d=identicon&r=PG&f=1", "display_name": "Errol van de l&#39;Isle", "link": "https://stackoverflow.com/users/6943963/errol-van-de-lisle"}, "edited": false, "score": 0, "creation_date": 1486678410, "post_id": 42118389, "comment_id": 71462152, "body": "@Errolvandel&#39;Isle I didn&#39;t use valgrind because, well... it&#39;s not avaliable no Windows I believe. MSVC? Nah, I hate Micro$oft. Purifyplus or Insure++? I have no money (same for MSVC). And sadly there are no other tools that I know."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "edited": false, "score": 0, "creation_date": 1486728685, "post_id": 42118389, "comment_id": 71483239, "body": "Ok, 3.22.7-1 is the latest GTK version for Windows provided by MSYS2 it seems. Could you please post a buildable example so it&#39;s possible to investigate a bit and try to reproduce ? As for Vagrind, AFAIK it&#39;s not available on Linux, but GTK is multiplatform, so you may build your code on linux and give valgrind a try."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "edited": false, "score": 0, "creation_date": 1486946914, "post_id": 42159703, "comment_id": 71552206, "body": "Well... I&#39;m not a fan of searching until NULL happens, but I think it would free one register, so gcc would have better optimization possibilities. Also, why inspecting GUI for something that I know is there is bad? I mean, is there much of a sense in creating a struct solely for displaying an entry dialog which will never be used again in the program? As for <code>g_build_path</code>... it&#39;s a little too late now. I recently realized the power of GLib and will remember it once I start refactoring the project. And yes, I can just destroy widget instead connecting to a signal, thanks for that."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "edited": false, "score": 0, "creation_date": 1486981010, "post_id": 42159703, "comment_id": 71564498, "body": "That&#39;s not only an optimization issue. Your code should not rely on how the UI is organized, so you can move widgets and improve the user experience without breaking your code."}, {"owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "reply_to_user": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "edited": false, "score": 0, "creation_date": 1486981025, "post_id": 42159703, "comment_id": 71564505, "body": "As for the optimization, your example doesn&#39;t scale: on a UI with 100 elements in it, would traversing it still make sense? No. You shouldn&#39;t try to introspect the UI unless you really have a good reason to do so (like writing an introspection tool like gtk-inspector). Also &quot;premature optimization is the root of all evil&quot;. Just the call to <code>g_list_length</code> traverses the <i>whole</i> list once, then you traverse it a second time in your loop. Don&#39;t think at the register level unless you&#39;re sure your algorithm is optimal."}], "tags": [], "owner": {"reputation": 10263, "user_id": 518853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IjKPw.png?s=128&g=1", "display_name": "liberforce", "link": "https://stackoverflow.com/users/518853/liberforce"}, "is_accepted": false, "score": 1, "last_activity_date": 1486730568, "creation_date": 1486730568, "answer_id": 42159703, "question_id": 42118389, "link": "https://stackoverflow.com/questions/42118389/dialog-creation-and-destruction-loop-increases-memory-usage/42159703#42159703", "title": "Dialog creation and destruction loop increases memory usage", "body": "<p>Your code is too incomplete to find the root cause.</p>\n\n<p>This line especially is doesn't make sense. We're missing the definition of <code>entry</code> and you're trying to do several operations on the same line (<code>*entry = entryBase;</code>).</p>\n\n<pre><code>GList *entryBase = gtk_container_get_children(GTK_CONTAINER(gtk_bin_get_child(GTK_BIN(window)))), *entry = entryBase;\n</code></pre>\n\n<p>The leak may however be in functions you call for which you don't provide the code (settProfExists, newProfile). So <strong>please provide a minimal compilable example that reproduces the problem</strong>.</p>\n\n<p>As for the style, there are several errors: you're traversing a list the way you'd do with an array. See how is implemented GList and you'll see that this is silly (hint: look at <code>entry-&gt;prev</code> and <code>entry-&gt;next</code>):</p>\n\n<pre><code>   for(size_t i=g_list_length(entry); i&gt;0 &amp;&amp; !GTK_IS_ENTRY(entry-&gt;data); --i)\n        entry = g_list_next(entry);\n</code></pre>\n\n<p>Then an architectural problem: don't try to inspect your UI to guess where are the widgets, just create a structure, and pass you <code>call</code> parameter and the GtkEntry you're interested in, in a structure with the gpointer data argument of the callback.</p>\n\n<p>You should also not make paths by hand: you're using a fixed length array that may not be long enough. Use the portable <code>g_build_path</code> provided by the GLib (and free the path with <code>g_free</code> after use), that will handle for you Windows/Linux directories separators.</p>\n\n<p>For your dialog, as you run <code>gtk_run_dialog</code>, you may just directly call gtk_destroy_widget afterwards instead of connecting a signal:</p>\n\n<pre><code>GtkWidget *window = gtk_message_dialog_new(parent, GTK_DIALOG_DESTROY_WITH_PARENT, type, GTK_BUTTONS_OK, str);\ngtk_dialog_run(GTK_DIALOG(window));\ngtk_widget_destroy(window);\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 5869005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89bd0b8b28d02afc7b4deeaaa560dbf4?s=128&d=identicon&r=PG&f=1", "display_name": "Grabusz", "link": "https://stackoverflow.com/users/5869005/grabusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486945604, "creation_date": 1486570944, "last_edit_date": 1486945604, "question_id": 42118389, "link": "https://stackoverflow.com/questions/42118389/dialog-creation-and-destruction-loop-increases-memory-usage", "title": "Dialog creation and destruction loop increases memory usage", "body": "<p>I wrote a simple program module to ask a user for a profile name. To do that I create windoww with entry widget, and two buttons (Ok and Cancel) organized in a grid. When user enters a profile name that already exists it informs him of that fact by creating dialog with \"ok\" button, and after he presses it, it goes back to picking a profile name (the window was not hidden nor destroyed in the meantime). The problem is that when I create a profile, and then spam the ok button (by placing something heavy on enter key and going to make tea) on both profile name chooser and the dialog (making a simple loop with creation and destruction of a dialog) the memory usage of the program increases.</p>\n\n<hr>\n\n<p>TL;DR\nSimply creating and destroying gtk window (and dialog) seems to cause a memory leak. Leaving app in a loop made it increase it's memory usage by ~1900% (from 10mb to 200mb).</p>\n\n<p>No, I didn't test for memory leaks using apps designed for it.\nYes, I've set G_SLICE=always-malloc.\nYes, there is another thread running in the background of the program (but I'm sure it doesn't cause any leaks)\nI can post screens from Windows Performance Monitor if you want more info on what happens in the memory.</p>\n\n<p>The question is - is it a memory leak caused by me, or is it GTK's fault (I heard it has a lazy policy of memory management, but after some time memory usage drops from 200mb to 140mb and stays there)?</p>\n\n<p>Here's the code:</p>\n\n<pre><code>// This callback racts to the ok and cancel buttons. If input was correcs\n// or the user pressed cancel it destroys the window. Else it show error\n// prompt. The showing error prompt seems to be the problem here.\nvoid pickNameButtCB(GtkWidget *button, gpointer *call)\n{\n    GtkWidget *window = gtk_widget_get_toplevel(button);\n    if( *((char*)call) == 'k')\n    {\n        GList *entryBase = gtk_container_get_children(GTK_CONTAINER(gtk_bin_get_child(GTK_BIN(window)))), *entry = entryBase;\n        for(size_t i=g_list_length(entry); i&gt;0 &amp;&amp; !GTK_IS_ENTRY(entry-&gt;data); --i)\n            entry = g_list_next(entry);\n        if(gtk_entry_get_text_length(GTK_ENTRY(entry-&gt;data)) &gt; 0)\n        {\n            const char *temp = gtk_entry_get_text(GTK_ENTRY(entry-&gt;data));\n            char path[266];\n            strcpy(path, settingsDir);\n            strcat(path, temp);\n            strcat(path, \".prof\");\n\n            if(settProfExists(path))\n            {\n                g_list_free(entryBase);\n                showError(GTK_WINDOW(window), GTK_MESSAGE_ERROR, \"Profile with that name already exists!\");\n                return;\n            }\n            // nothing here executes as well\n        }\n        else\n        {\n            /** doesn't execute when the memory leak happens */\n        }\n        g_list_free(entryBase);\n    }\n    gtk_widget_destroy(window);\n    gtk_main_quit();\n}\n\nvoid showError(GtkWindow *parent, GtkMessageType type, const char *str)\n{\n    GtkWidget *window = gtk_message_dialog_new(parent, GTK_DIALOG_DESTROY_WITH_PARENT, type, GTK_BUTTONS_OK, str);\n    g_signal_connect_swapped(window, \"response\", G_CALLBACK(gtk_widget_destroy), window);\n    gtk_dialog_run(GTK_DIALOG(window));\n}\n\nbool settProfExists(const char *path)\n{\n    if(fileExists(path))\n        return true;\n    return false;\n}\n\nbool fileExists(const char *path)\n{\n    struct stat info;\n    errno = 0;\n    if((stat(path, &amp;info)) != 0)\n        if(errno == ENOENT)\n            return false;\n    return true;\n}\n</code></pre>\n"}, {"tags": ["c", "hash"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1486571530, "post_id": 42118346, "comment_id": 71405538, "body": "what did stepping through with a debugger show you was happening"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 2, "creation_date": 1486571632, "post_id": 42118346, "comment_id": 71405617, "body": "Check your control output: <code>completed : sdfghj</code> against <code>completed : sdfgh</code>. Your program is hashing different strings in those two cases."}, {"owner": {"reputation": 833, "user_id": 6641514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e63ac2c87607df47fa364ad179f1ffe?s=128&d=identicon&r=PG", "display_name": "brad", "link": "https://stackoverflow.com/users/6641514/brad"}, "edited": false, "score": 0, "creation_date": 1486581791, "post_id": 42118346, "comment_id": 71411722, "body": "what editor are you saving it in? try using nano input.txt from commandline to save the file make sure you make an empty file first cause nano will save any marking special characters if they are already there. I have issues with newlines and stuff if I use textedit or more UI friendly editors when doing database work. I can put as many blank lines afterwards and it works fine when use nano"}], "owner": {"reputation": 522, "user_id": 2507710, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e1972bd20155bc8fd9a5377136ccc13a?s=128&d=identicon&r=PG&f=1", "display_name": "online.0227", "link": "https://stackoverflow.com/users/2507710/online-0227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486570803, "creation_date": 1486570803, "question_id": 42118346, "link": "https://stackoverflow.com/questions/42118346/why-putting-blank-line-at-the-end-of-text-makes-different-output-hash-function", "title": "why putting blank line at the end of text makes different output? (hash function)", "body": "<p><strong>Source code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\nint hashFunc(char *c, int size) {\n    int hashVal;\n\n    for(hashVal = 0; *c != '\\0'; c++) {\n        hashVal = hashVal + *c;\n    }\n\n    return hashVal % size;\n\n}\n\nint main() {\n    int size;\n    char temp[60];\n    char **name;\n    int *entries;\n    char c;\n    int ctr=0;\n    int i,j;\n    int hashResult;\n\n    scanf(\"%d\", &amp;size);\n\n    FILE *file;\n    file = fopen(\"input.txt\", \"r\");\n\n    name = (char**)malloc(sizeof(char*) * size);\n    for(i=0; i&lt;size; i++) {\n        name[i] = (char*)malloc(sizeof(char) * size);\n    }\n\n    entries = (int*)malloc(sizeof(int) * size);\n    memset(&amp;temp[0], 0, sizeof(temp));\n\n    if(file) {\n        while((c = getc(file)) != EOF) {\n            if(c == '\\n' || ungetc(getc(file), file) == EOF) {\n                if(strlen(temp) &gt; 0) {\n                printf(\"completed : %s\\n\", temp);\n                hashResult = hashFunc(temp, size);\n                entries[hashResult]++;\n\n                memset(&amp;temp[0], 0, sizeof(temp));\n                ctr=0;\n            }\n            }\n\n            if(c != '\\n') {\n\n                temp[ctr++] = c;\n\n            }\n        }   // end of while\n\n    for(i=0; i&lt;size; i++) printf(\"entries[%d]=%d\\n\", i, entries[i]);\n\n    fclose(file);\n    for(i=0; i&lt;size; i++) free(name[i]);\n\n    free(name);\n\n    } else {\n        printf(\"no such file\\n\");\n    }\n}\n</code></pre>\n\n<p><strong>1st input.txt:</strong></p>\n\n<pre><code>this is a\ntest file\nfor b4\na smll file but could\nbe effective\naaaaa\nsdfghj\n</code></pre>\n\n<p><strong>2nd input.txt (just one more blank line after sdfghj:</strong></p>\n\n<pre><code>this is a\ntest file\nfor b4\na smll file but could\nbe effective\naaaaa\nsdfghj\n</code></pre>\n\n<p><strong>* PLZ NOTE THAT THERE IS ONE BLANK LINE AFTER sdfghj IN 2ND INPUT.TXT</strong></p>\n\n<p><strong>output for 1st input.txt:</strong></p>\n\n<pre><code>10\ncompleted : this is a\ncompleted : test file\ncompleted : for b4\ncompleted : a smll file but could\ncompleted : be effective\ncompleted : aaaaa\ncompleted : sdfgh\nentries[0]=0\nentries[1]=1\nentries[2]=0\nentries[3]=0\nentries[4]=1\nentries[5]=1\nentries[6]=2\nentries[7]=1\nentries[8]=0\nentries[9]=1\n</code></pre>\n\n<p><strong>output for 2nd input.txt:</strong></p>\n\n<pre><code>10\ncompleted : this is a\ncompleted : test file\ncompleted : for b4\ncompleted : a smll file but could\ncompleted : be effective\ncompleted : aaaaa\ncompleted : sdfghj\nentries[0]=1\nentries[1]=1\nentries[2]=0\nentries[3]=0\nentries[4]=0\nentries[5]=1\nentries[6]=2\nentries[7]=1\nentries[8]=0\nentries[9]=1\n</code></pre>\n\n<p>This program counts collisions from hash function.</p>\n\n<p>Hi. I don't understand why outputs (from entries[0] to entries[9]) for 1st and 2nd input.txt are different.</p>\n\n<p>Only difference between those input.txt is that there is one blank line after end of word, which is sdfghj, in 2nd input.txt</p>\n\n<p>If you look at my code, I am preventing any blank line with:\n if(strlen(temp) > 0) {</p>\n\n<p>but outputs(from entries[0] to entries[9]) are different. If I make blank line between words rather than end of input.txt, in this case outputs are same. only putting blank line at the end of the input.txt makes different output.</p>\n\n<p>why this happens?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486571169, "post_id": 42118298, "comment_id": 71405262, "body": "<code>memcpy</code> doesn&#39;t preform a deep copy. If you won&#39;t to follow pointers and copy objects write a custom function."}], "answers": [{"comments": [{"owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "edited": false, "score": 0, "creation_date": 1486582026, "post_id": 42118461, "comment_id": 71411854, "body": "ok thank you a lot! so I have in these cases manually to copy the substructures right?"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 2, "last_activity_date": 1486571116, "creation_date": 1486571116, "answer_id": 42118461, "question_id": 42118298, "link": "https://stackoverflow.com/questions/42118298/memcpy-over-a-structure-with-another-structure-not-working-in-c/42118461#42118461", "title": "memcpy over a structure with another structure not working in C", "body": "<p>With your <code>memcpy</code> you also copied the pointer to the sub struct. If you then free the original, you have freed the memory pointed to (that you have just copied).</p>\n\n<p>So <code>var_two-&gt;sub_struct</code> now points to the memory that <code>var_one-&gt;sub_struct</code> points to. With <code>free(var_one-&gt;sub_struct)</code> you have effectively freed what <code>var_two-&gt;sub_struct</code> now was pointing to.</p>\n\n<p>Btw, the memory <code>var_two-&gt;sub_struct</code> was pointing to is now lost.</p>\n"}], "owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 42118461, "answer_count": 1, "score": -1, "last_activity_date": 1486571116, "creation_date": 1486570659, "question_id": 42118298, "link": "https://stackoverflow.com/questions/42118298/memcpy-over-a-structure-with-another-structure-not-working-in-c", "title": "memcpy over a structure with another structure not working in C", "body": "<p>So There have already been plenty of questions about copying structure by assigning or using memcpy. Now i wrote a small programm with having two structures:</p>\n\n<pre><code>typedef struct {\n\n int b;\n} myStruct2;\n\ntypedef struct {\n\n int a;\n myStruct2* sub_struct;\n} myStruct;\n</code></pre>\n\n<p>So now I tried to define two structures and then use a memcpy over them like this (I am handling NULL pointers after allocating memory, just left it out for easier reading):</p>\n\n<pre><code>myStruct* var_one = malloc(sizeof(myStruct));\nvar_one-&gt;sub_struct = malloc(sizeof(myStruct2));\n\nvar_one-&gt;a = 10;\nvar_one-&gt;sub_struct-&gt;b = 111;\n\nmyStruct* var_two = malloc(sizeof(myStruct));\nvar_two-&gt;sub_struct = malloc(sizeof(myStruct2));\n\nvar_two-&gt;a = 22;\nvar_two-&gt;sub_struct-&gt;b = 2222;\n\nprintf(\"%d und %d\\n\", var_two-&gt;a, var_two-&gt;sub_struct-&gt;b);\n\n\nmemcpy(var_two, var_one, sizeof(myStruct));\n\n\nprintf(\"%d und %d\\n\", var_two-&gt;a, var_two-&gt;sub_struct-&gt;b);\n</code></pre>\n\n<p>Sofar everything works fine and as expected. But know if I do:</p>\n\n<pre><code>free(var_one-&gt;sub_struct);\nfree(var_one);\n\nprintf(\"%d und %d\\n\", var_two-&gt;a, var_two-&gt;sub_struct-&gt;b);\n</code></pre>\n\n<p>The second printf is giving me the error:<br>\n    Invalid read of size 4;</p>\n\n<p>Can someone explain me maybe why? The memory for the sub-structure of var_two has been allocated separately, and I thought that memcpy is just copying a piece of memory? So why is freeing the first sub-structure influencing the second one?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1486570546, "post_id": 42118190, "comment_id": 71404792, "body": "so what does your output tell you?"}, {"owner": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "edited": false, "score": 1, "creation_date": 1486570573, "post_id": 42118190, "comment_id": 71404810, "body": "This code results in a runtime error"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486570672, "post_id": 42118190, "comment_id": 71404888, "body": "Inside the function, <code>x</code> has type <code>int **</code>.  Therefore <code>*x</code> has type <code>int *</code>, and <code>*x + 1</code> is pointer arithmetic: the result is a pointer to one <i>element</i> past <code>**x</code>.  <code>*(*x + 1)</code> designates the <code>int</code> at that position; it is by definition exactly equivalent to <code>(*x)[1]</code>.  So yes, the last line of the function sets the second <code>int</code> in the dynamically allocated block to 13."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "edited": false, "score": 1, "creation_date": 1486570680, "post_id": 42118190, "comment_id": 71404895, "body": "@m_callens, it does not (except that v isn&#39;t free&#39;d). There is a compile time error that theere is an erroneous initialization of v in main."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1486570726, "post_id": 42118190, "comment_id": 71404928, "body": "@PaulOgilvie Assuming a moder OS it is freed by system."}, {"owner": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1486570739, "post_id": 42118190, "comment_id": 71404938, "body": "@PaulOgilvie hmm, <a href=\"http://ideone.com/dN2Lxx\" rel=\"nofollow noreferrer\">ran here</a> give output as well as runtime error"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "edited": false, "score": 0, "creation_date": 1486570782, "post_id": 42118190, "comment_id": 71404980, "body": "@m_callens where is the runtime error?..."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "edited": false, "score": 1, "creation_date": 1486570934, "post_id": 42118190, "comment_id": 71405101, "body": "@m_callens Well; I see: it is due to return 1 in main."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486571145, "post_id": 42118190, "comment_id": 71405241, "body": "... and ideone is unusual in classifying that as a runtime error."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486571341, "post_id": 42118190, "comment_id": 71405393, "body": "In any case, the phrasing of your question suggests a possible misunderstanding: the memory to which a pointer points is not &quot;in&quot; or in any way part of that pointer.  A pointer does not have elements, only a single value, but that value may point to a space that accommodates one or more objects of the pointer&#39;s target type."}], "answers": [{"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": true, "score": 6, "last_activity_date": 1486570917, "creation_date": 1486570917, "answer_id": 42118380, "question_id": 42118190, "link": "https://stackoverflow.com/questions/42118190/dereferencing-a-double-pointer/42118380#42118380", "title": "Dereferencing a double pointer", "body": "<p>The code is rather easy to understand if you use a temporary variable, eg:</p>\n\n<pre><code>void afunction(int**x)\n{\n    int* t = *x;\n\n    t = malloc(2 * sizeof(int));\n    *t = 12;\n    *(t+1) = 13;\n}\n</code></pre>\n\n<p>so:</p>\n\n<ul>\n<li><code>x</code> is a pointer to a pointer to <code>int</code></li>\n<li><code>*x</code> yields a <code>int*</code> (pointer to <code>int</code>)</li>\n<li><code>**x =</code> is like <code>*(*x) =</code> so you first obtain the pointer to <code>int</code> then by dereferencing you are able to set the value at the address</li>\n</ul>\n\n<p>The last part <code>*(*x+1) =</code> can be broken down:</p>\n\n<pre><code>int* pointerToIntArray = *x;\nint* secondElementInArray = pointerToIntArray + 1;\n*secondElementInArray = 13;\n</code></pre>\n\n<p>The purpose of using a pointer to pointer here is that you can pass the address to an <code>int*</code> to the function and let the function allocate the memory and fill it with data. The same purpose could be done by returning an <code>int*</code>, eg:</p>\n\n<pre><code>int* afunction() {\n  int* x = malloc(sizeof(int)*2);\n  *x = 12;\n  *(x+1) = 13;\n  return x;\n}\n\nint main() {\n  int* v = afunction();\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7273853, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1293826400681878/picture?type=large", "display_name": "Andrei Bra\u0219oveanu", "link": "https://stackoverflow.com/users/7273853/andrei-bra%c8%99oveanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23032, "favorite_count": 3, "accepted_answer_id": 42118380, "answer_count": 1, "score": 3, "last_activity_date": 1486570917, "creation_date": 1486570401, "last_edit_date": 1486570464, "question_id": 42118190, "link": "https://stackoverflow.com/questions/42118190/dereferencing-a-double-pointer", "title": "Dereferencing a double pointer", "body": "<p>I have code snippet that I can't understand how it works, because of one line that does a double dereference. The code looks like this:</p>\n\n<pre><code>void afunction(int**x){\n    *x = malloc(2 * sizeof(int));\n    **x = 12;\n    *(*x + 1) = 13;\n}\n\nint main(){\n    int *v = 10;\n    afunction(&amp;v);\n\n    printf(\"%d %d\\n\", v[0], v[1]);\n    return 1;\n}\n</code></pre>\n\n<p>I understand that the first element of the pointer to pointer gets the value 12, but the line after that I just can't seem to understand. Does the second element in the first pointer get value 13?</p>\n"}, {"tags": ["c", "turbo-c++"], "comments": [{"owner": {"reputation": 382, "user_id": 1366263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65963e2413e2724dc8fae2cc1676049e?s=128&d=identicon&r=PG", "display_name": "odin", "link": "https://stackoverflow.com/users/1366263/odin"}, "edited": false, "score": 4, "creation_date": 1486570327, "post_id": 42118067, "comment_id": 71404628, "body": "Neither of those loops should execute."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 3, "creation_date": 1486570336, "post_id": 42118067, "comment_id": 71404637, "body": "<a href=\"http://ideone.com/jwFbeN\" rel=\"nofollow noreferrer\">I&#39;m quite sure that both are not executed.</a> What&#39;s your compiler?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1486570524, "post_id": 42118067, "comment_id": 71404771, "body": "You should post an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>"}, {"owner": {"reputation": 54, "user_id": 7535471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wh7R9yEbqOI/AAAAAAAAAAI/AAAAAAAAEG0/Nu__myiWayo/photo.jpg?sz=128", "display_name": "Shailesh Jain", "link": "https://stackoverflow.com/users/7535471/shailesh-jain"}, "edited": false, "score": 0, "creation_date": 1486570985, "post_id": 42118067, "comment_id": 71405144, "body": "Turbo c++ compiler"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1486571972, "post_id": 42118067, "comment_id": 71405874, "body": "We need to see a <i>complete program that we can compile and run for ourselves</i>, containing this loop that you say is executed once."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1486572021, "post_id": 42118067, "comment_id": 71405912, "body": "Also, please tell us the exact version number of the Turbo C++ compiler you are using.  Turbo C++ is very old and it&#39;s <i>possible</i>, although unlikely, that it is generating incorrect code."}, {"owner": {"reputation": 54, "user_id": 7535471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wh7R9yEbqOI/AAAAAAAAAAI/AAAAAAAAEG0/Nu__myiWayo/photo.jpg?sz=128", "display_name": "Shailesh Jain", "link": "https://stackoverflow.com/users/7535471/shailesh-jain"}, "edited": false, "score": 0, "creation_date": 1486574420, "post_id": 42118067, "comment_id": 71407492, "body": "Its a turbo c++ 3.2 version which i am using."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1486577107, "post_id": 42118067, "comment_id": 71409100, "body": "Well....don&#39;t you think it&#39;s time to update your development platform? It is veeeeeeery cheap ;)"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1546530301, "post_id": 42118067, "comment_id": 94887296, "body": "You should enter the fact that this is a bug as an answer, and preferably provide the version number and complete source code and compiler settings to reproduce the problem."}], "answers": [{"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1486570503, "post_id": 42118185, "comment_id": 71404754, "body": "That is what the code does, but OP is telling us that the first one (with literal) is execute."}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1486570567, "post_id": 42118185, "comment_id": 71404806, "body": "I suspect he&#39;s just not communicating clearly because, as you obviously know, that can&#39;t happen. :)"}, {"owner": {"reputation": 54, "user_id": 7535471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wh7R9yEbqOI/AAAAAAAAAAI/AAAAAAAAEG0/Nu__myiWayo/photo.jpg?sz=128", "display_name": "Shailesh Jain", "link": "https://stackoverflow.com/users/7535471/shailesh-jain"}, "edited": false, "score": 0, "creation_date": 1486571506, "post_id": 42118185, "comment_id": 71405517, "body": "But the for loop  with a literal 0 is executed in a turbo compiler and is not executed in code blocks compiler. Thank you"}, {"owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "edited": false, "score": 0, "creation_date": 1486572462, "post_id": 42118185, "comment_id": 71406195, "body": "If that is true, then there is something broken about the turbo compiler.  How old is that thing?  20 years?"}, {"owner": {"reputation": 54, "user_id": 7535471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wh7R9yEbqOI/AAAAAAAAAAI/AAAAAAAAEG0/Nu__myiWayo/photo.jpg?sz=128", "display_name": "Shailesh Jain", "link": "https://stackoverflow.com/users/7535471/shailesh-jain"}, "edited": false, "score": 0, "creation_date": 1486574491, "post_id": 42118185, "comment_id": 71407529, "body": "Yes, more than 20 years."}], "tags": [], "owner": {"reputation": 14469, "user_id": 2191105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/tPiCW.png?s=128&g=1", "display_name": "David Hoelzer", "link": "https://stackoverflow.com/users/2191105/david-hoelzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1486570390, "creation_date": 1486570390, "answer_id": 42118185, "question_id": 42118067, "link": "https://stackoverflow.com/questions/42118067/turbo-c-erroneously-executes-loop-with-literal-0-in-condition/42118185#42118185", "title": "Turbo C++ erroneously executes loop with literal 0 in condition", "body": "<p>This is a basic C question that you should be able to answer yourself.  The second parameter in the <code>for</code> construct is a conditional.  If it evaluates to true, the loop continues.  If it evaluates to false, the loop halts.</p>\n\n<p>When you set the second parameter to the literal <code>0</code> or to a variable, <code>j</code>, which is set to zero, you are setting it to a value that evaluates to a logical false.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 7535471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wh7R9yEbqOI/AAAAAAAAAAI/AAAAAAAAEG0/Nu__myiWayo/photo.jpg?sz=128", "display_name": "Shailesh Jain", "link": "https://stackoverflow.com/users/7535471/shailesh-jain"}, "is_accepted": true, "score": 0, "last_activity_date": 1546600463, "last_edit_date": 1546600463, "creation_date": 1546598949, "answer_id": 54037458, "question_id": 42118067, "link": "https://stackoverflow.com/questions/42118067/turbo-c-erroneously-executes-loop-with-literal-0-in-condition/54037458#54037458", "title": "Turbo C++ erroneously executes loop with literal 0 in condition", "body": "<h1>This is a bug in the Turbo c++</h1>\n\n<p>Version : 3.2.2.0</p>\n\n<p>Following issue is reported on <strong><a href=\"https://github.com/vineetchoudhary/TurboCPP/issues/1#issue-395882012\" rel=\"nofollow noreferrer\">Github as an Issue</a></strong>:</p>\n\n<hr>\n\n<p>Following gif will provide the error explaination.\n<a href=\"https://i.stack.imgur.com/z4NGb.gif\" rel=\"nofollow noreferrer\">gif of execution of the above</a></p>\n\n<h2>Code for regeneration</h2>\n\n<pre><code>void main()\n{\n   int i,j=0;\n   clrscr();\n   for(i = 0; 0 ; i++) // you could try replacing 0 with variable j\n      printf(\"\\nHello\");\n   getch();\n}\n</code></pre>\n"}], "owner": {"reputation": 54, "user_id": 7535471, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wh7R9yEbqOI/AAAAAAAAAAI/AAAAAAAAEG0/Nu__myiWayo/photo.jpg?sz=128", "display_name": "Shailesh Jain", "link": "https://stackoverflow.com/users/7535471/shailesh-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 54037458, "answer_count": 2, "score": -1, "last_activity_date": 1546600463, "creation_date": 1486570046, "last_edit_date": 1546530260, "question_id": 42118067, "link": "https://stackoverflow.com/questions/42118067/turbo-c-erroneously-executes-loop-with-literal-0-in-condition", "title": "Turbo C++ erroneously executes loop with literal 0 in condition", "body": "<p>I wrote 0 in the condition of <code>for</code> loop so it was once executed and when I wrote j instead of 0 and j was initialized to 0 then the for loop was not executed even once. What is the reason behind it?</p>\n\n<pre><code>for(i=0;0;i++) \n</code></pre>\n\n<p>and </p>\n\n<pre><code>j = 0;\nfor(i=0;j;i++) \n</code></pre>\n\n<p>the first one executed once but the next one did not execute.</p>\n\n<h3>EDIT:</h3>\n\n<p>This is a bug in Turbo C++ compiler.</p>\n"}, {"tags": ["c", "probability"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1486570180, "post_id": 42117846, "comment_id": 71404496, "body": "Who says it is too big to calculate? <a href=\"https://www.johndcook.com/blog/2010/08/16/how-to-compute-log-factorial/\" rel=\"nofollow noreferrer\">johndcook.com/blog/2010/08/16/how-to-compute-log-factorial</a>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1486570999, "post_id": 42117846, "comment_id": 71405149, "body": "you could use a bignumber library, <a href=\"https://gmplib.org/\" rel=\"nofollow noreferrer\">gmplib.org</a> for example"}, {"owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "edited": false, "score": 0, "creation_date": 1486927890, "post_id": 42117846, "comment_id": 71546276, "body": "If you only need to do some computations, use the log-gamma function as suggested by others here. But if you need to get some insight, Stirling&#39;s formula (<a href=\"https://en.wikipedia.org/wiki/Stirling&#39;s_approximation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Stirling&#39;s_approximation</a>) is a standard approach for problems involving factorials."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 3, "last_activity_date": 1486572224, "last_edit_date": 1486572224, "creation_date": 1486570405, "answer_id": 42118193, "question_id": 42117846, "link": "https://stackoverflow.com/questions/42117846/calculating-birthday-probability-for-large-numbers/42118193#42118193", "title": "Calculating Birthday Probability for large numbers", "body": "<p>You don't want to calculate the full factorial.  Instead, calculate each term and multiply to the result.</p>\n\n<p>The probability you don't share a birthday with:</p>\n\n<ul>\n<li>1 person: 364/365</li>\n<li>2 people: 364/365 * 363/365</li>\n<li>3 people: 364/365 * 363/365 * 362/365</li>\n<li>...</li>\n</ul>\n\n<p>Given this, you calcuate <code>p</code> as follows.</p>\n\n<pre><code>int n = 30;\nint i;\ndouble p = 1;\nfor (i = 1; i &lt; n; i++) {\n    p *= (365 - i) / 365.0;\n    printf(\"i=%d, p=%f\\n\", i, 1-p);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1486570631, "post_id": 42118230, "comment_id": 71404862, "body": "Sorry I meant float, or double"}, {"owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1486570881, "post_id": 42118230, "comment_id": 71405065, "body": "now it should not. It starts with 1, then the product should be good."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1486570890, "post_id": 42118230, "comment_id": 71405071, "body": "Now you&#39;ve got it."}], "tags": [], "owner": {"reputation": 3890, "user_id": 3626078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SBXjb.jpg?s=128&g=1", "display_name": "magicleon94", "link": "https://stackoverflow.com/users/3626078/magicleon94"}, "is_accepted": false, "score": 0, "last_activity_date": 1486570803, "last_edit_date": 1486570803, "creation_date": 1486570501, "answer_id": 42118230, "question_id": 42117846, "link": "https://stackoverflow.com/questions/42117846/calculating-birthday-probability-for-large-numbers/42118230#42118230", "title": "Calculating Birthday Probability for large numbers", "body": "<p>I would write a function that looks like this:</p>\n\n<pre><code>double p(int n){\n    double res = 1;\n    while (n&gt;0){\n        res *= (365 - (n--))/365.0;\n    }\n    return res;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4607, "user_id": 434171, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dXoTt.jpg?s=128&g=1", "display_name": "Enrique Marcos", "link": "https://stackoverflow.com/users/434171/enrique-marcos"}, "is_accepted": false, "score": 0, "last_activity_date": 1486570510, "creation_date": 1486570510, "answer_id": 42118234, "question_id": 42117846, "link": "https://stackoverflow.com/questions/42117846/calculating-birthday-probability-for-large-numbers/42118234#42118234", "title": "Calculating Birthday Probability for large numbers", "body": "<p>Another solution (an approximation):</p>\n\n<p>The probability of any two people not having the same birthday is 364/365. In a room containing n people, there are C(n, 2) = n(n \u2212 1)/2 pairs of people. So:</p>\n\n<pre><code>p(n) = 364/365 ^ (n * (n-1)/2)\n</code></pre>\n\n<p>And for values bigger than <code>n = 100</code>, you can safely use the next table:</p>\n\n<pre><code>n   p(n)\n1   0.0%\n5   2.7%\n10  11.7%\n20  41.1%\n23  50.7%\n30  70.6%\n40  89.1%\n50  97.0%\n60  99.4%\n70  99.9%\n100 99.99997%\n200 99.9999999999999999999999999998%\n300 (100 \u2212 (6\u00d710\u221280))%\n350 (100 \u2212 (3\u00d710\u2212129))%\n365 (100 \u2212 (1.45\u00d710\u2212155))%\n366 100%\n367 100%\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 7438512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56809921a0f6900efb2e0de654c248cb?s=128&d=identicon&r=PG&f=1", "display_name": "mstou", "link": "https://stackoverflow.com/users/7438512/mstou"}, "is_accepted": true, "score": 3, "last_activity_date": 1486577135, "last_edit_date": 1486577135, "creation_date": 1486570646, "answer_id": 42118294, "question_id": 42117846, "link": "https://stackoverflow.com/questions/42117846/calculating-birthday-probability-for-large-numbers/42118294#42118294", "title": "Calculating Birthday Probability for large numbers", "body": "<p>You can take advantage of 365!/(365-n)! = 365 * 364 * ... * (365-(n-1))</p>\n\n<p>So to calculate this term ( let it be A=365!/(365-n)! ) you can simply the above numbers like this:</p>\n\n<pre><code>unsinged double A=1; // to make sure there is no overflow\nfor(int i=0;i&lt;n;i++) A*=365-i;\n</code></pre>\n\n<p>To take it one step further : p=A/365^n = (364*363*...*(365-(n-1)))/365^(n-1)= 364/365 * 363/365 * ... (365-(n-1))/365.</p>\n\n<p>so p can be calcuated like this:</p>\n\n<pre><code>unsigned double p=1;\nfor(int i=0;i&lt;n;i++) p*= (365-i)/365.0;\n</code></pre>\n\n<p>in linear time</p>\n\n<p>I think this should work :P </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1486739006, "post_id": 42123311, "comment_id": 71489932, "body": "@SeverinPappadeux Mars looks OK.  <code>fact(1754)</code> --&gt; 1.979262e+4930.  <a href=\"https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Martian_year\" rel=\"nofollow noreferrer\">Martian year</a> is &lt; ~689 Earth days or ~669 Mars days.  Even good to <a href=\"http://space-facts.com/ceres/\" rel=\"nofollow noreferrer\">Ceres &quot;year&quot;</a> with its ~1680 Earth days."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1486596090, "last_edit_date": 1486596090, "creation_date": 1486586945, "answer_id": 42123311, "question_id": 42117846, "link": "https://stackoverflow.com/questions/42117846/calculating-birthday-probability-for-large-numbers/42123311#42123311", "title": "Calculating Birthday Probability for large numbers", "body": "<p><code>tgamma(n+1)</code> is very close to <code>n!</code>.   No need to loop hundred of times which can reduce accuracy as each <code>*</code>, <code>/</code> loses a faction of a bit accuracy with each iteration.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;math.h&gt;\n#include &lt;float.h&gt;\n\nlong double fact(int n) {\n  return roundl(tgammal(n + 1));\n}\n\ndouble bd_prob(int n) {\n  return fact(365)/(powl(365,n)*fact(365-n));\n}\n\nint main(void){\n  // No problem with 365!\n  printf(\"fact(365) %Le\\n\", fact(365));\n  // No problem with 365 to the 365 power \n  printf(\"365^365 %Le\\n\", powl(365, 365));\n\n  printf(\"prob(22) %f\\n\", bd_prob(22));\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>fact(365) 2.510413e+778\n365^365 1.725423e+935  \nprob(22) 0.524305\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1486737747, "post_id": 42152162, "comment_id": 71488946, "body": "This is the best approach. Minor: the <code>(double)</code> casts are not needed."}], "tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": false, "score": 5, "last_activity_date": 1486704817, "creation_date": 1486704817, "answer_id": 42152162, "question_id": 42117846, "link": "https://stackoverflow.com/questions/42117846/calculating-birthday-probability-for-large-numbers/42152162#42152162", "title": "Calculating Birthday Probability for large numbers", "body": "<p>Holly Macaroni! What a show!</p>\n\n<p>Anyway, right way to compute such things with large intermediates is to log() them</p>\n\n<pre><code>p = exp(log(p))\n\nlog(p) = log(365!) - n*log(365) - log((365 - n)!)\n</code></pre>\n\n<p>For factorial, use Gamma function, G(n+1)=n!, and there is very handy function in C library which computes log(G(x)): lgamma(x)</p>\n\n<p>No more loops, no long doubles, no bignum libraries, no overflows...</p>\n\n<p>Code</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n\ndouble b(int n) {\n    double l = lgamma(365.0 + 1.0) -\n               (double)n * log(365.0) -\n               lgamma(365.0 - (double)n + 1.0);\n\n    return exp(l);\n}\n\nint main() {\n    double p = b(20);\n    printf(\"%e %e\\n\", p, 1.0 - p);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 5270618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3703fe2b1b20e4eb9dcabe83fdd76b9e?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/5270618/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "accepted_answer_id": 42118294, "answer_count": 6, "score": 5, "last_activity_date": 1486704817, "creation_date": 1486569500, "last_edit_date": 1486569968, "question_id": 42117846, "link": "https://stackoverflow.com/questions/42117846/calculating-birthday-probability-for-large-numbers", "title": "Calculating Birthday Probability for large numbers", "body": "<p>The probability that two people have the same birthday in a room full of <strong>n</strong> people is <strong>1-p</strong>. Where:</p>\n\n<pre><code>p = 365! / 365^n(365 - n)!\n</code></pre>\n\n<p>Obviously the numbers will be too big to solve this equation, what is a creative way to go about this?</p>\n\n<p>I already solved this in a different way using simulation, but I figured the formula might be more elegant.</p>\n"}, {"tags": ["c", "makefile"], "comments": [{"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 1, "creation_date": 1486569915, "post_id": 42117679, "comment_id": 71404327, "body": "What do you mean by &quot;not being executed&quot;?  What make command do you run?  What output do you see?  You are aware you have to type <code>make clean</code> to run the clean rule right?"}, {"owner": {"reputation": 619, "user_id": 4224163, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/896671a6e44f12929d3c9bdbb297a75a?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Semenyuk", "link": "https://stackoverflow.com/users/4224163/alexey-semenyuk"}, "edited": false, "score": 0, "creation_date": 1486664241, "post_id": 42117679, "comment_id": 71454280, "body": "You probably need to define more phonies: <code>clean_debug clean_release release before_release out_release debug before_debug out_debug</code>"}], "owner": {"reputation": 727, "user_id": 3952735, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1381bff4c16b2ff4ae15f5ab703bb971?s=128&d=identicon&r=PG&f=1", "display_name": "malajedala", "link": "https://stackoverflow.com/users/3952735/malajedala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486569047, "creation_date": 1486569047, "question_id": 42117679, "link": "https://stackoverflow.com/questions/42117679/makefile-in-c-not-working-phony-not-executing-anything", "title": "Makefile in C not working - phony not executing anything?", "body": "<p>I am trying to compile my C code and everything works fine, the only problem is that my clean is not being executed.. I have no idea why, i already read about phony targets but i cannot see where my mistake is.</p>\n\n<p>Here is a minimal example of my makefile</p>\n\n<pre><code>CC = gcc\nLD=gcc\nCFLAGS = -O3 -Wextra -Wall\n\nCFLAGS_DEBUG = $(CFLAGS) -Wall -pg -g -std=c99\n\nOBJDIR_DEBUG = obj/Debug\nOUT_DEBUG = bin/Debug/myProgramm\n\nCFLAGS_RELEASE = $(CFLAGS) -O3 -Wall -std=c99\n\nOBJDIR_RELEASE = obj/Release\nOUT_RELEASE = bin/Release/myProgramm\n\n\nOBJ_DEBUG = $(OBJDIR_DEBUG)/src/main.o $(OBJDIR_DEBUG)/src/file_one.o\n\nOBJ_RELEASE = $(OBJDIR_RELEASE)/src/main.o $(OBJDIR_RELEASE)/src/file_one.o\n\n\n.PHONY: all clean\n\nall: debug release\n\nclean: clean_debug clean_release\n\nbefore_debug: \n    test -d bin/Debug || mkdir -p bin/Debug\n    test -d $(OBJDIR_DEBUG)/src || mkdir -p $(OBJDIR_DEBUG)/src\n\ndebug: before_debug out_debug\n\nout_debug: before_debug $(OBJ_DEBUG)\n    $(LD) $(OBJ_DEBUG) -o $(OUT_DEBUG) \n\n$(OBJDIR_DEBUG)/src/main.o: src/main.c\n    $(CC) $(CFLAGS_DEBUG) -c src/main.c -o $(OBJDIR_DEBUG)/src/main.o\n\n$(OBJDIR_DEBUG)/src/file_one.o: src/file_one.c\n    $(CC) $(CFLAGS_DEBUG) -c src/file_one.c -o $(OBJDIR_DEBUG)/src/file_one.o\n\n\nclean_debug: \n    rm -f $(OBJ_DEBUG) $(OUT_DEBUG)\n    rm -rf bin/Debug\n    rm -rf $(OBJDIR_DEBUG)/src\n\nbefore_release: \n    test -d bin/Release || mkdir -p bin/Release\n    test -d $(OBJDIR_RELEASE)/src || mkdir -p $(OBJDIR_RELEASE)/src\n\nrelease: before_release out_release\n\nout_release: before_release $(OBJ_RELEASE) \n    $(LD) -o $(OUT_RELEASE) $(OBJ_RELEASE)\n\n$(OBJDIR_RELEASE)/src/main.o: src/main.c\n    $(CC) $(CFLAGS_RELEASE) -c src/main.c -o $(OBJDIR_RELEASE)/src/main.o\n\n$(OBJDIR_RELEASE)/src/file_one.o: src/file_one.c\n    $(CC) $(CFLAGS_RELEASE) -c src/file_one.c -o $(OBJDIR_RELEASE)/src/file_one.o\n\nclean_release: \n    rm -f $(OBJ_RELEASE) $(OUT_RELEASE)\n    rm -rf bin/Release\n    rm -rf $(OBJDIR_RELEASE)/src\n</code></pre>\n"}, {"tags": ["c", "c-preprocessor"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1486569387, "post_id": 42117676, "comment_id": 71403941, "body": "You know, you could just run the <a href=\"https://ideone.com/Ua8B2n\" rel=\"nofollow noreferrer\">code</a> , they are not the same."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1486569534, "post_id": 42117676, "comment_id": 71404056, "body": "@George your comment is like &quot;just look at them they are not identical&quot; :/"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1486569700, "post_id": 42117676, "comment_id": 71404175, "body": "@Sabrina I can&#39;t imagine why the code&#39;ud be useful but a common idiom used in place of commenting code ( code that doesn&#39;t work or needs changing ) is to use <code>#ifdef 0</code>. Anyway in the first example the code wrapped <code>#if check</code> is not compiled as <code>check</code> is false. Where as in the second, there&#39;s no macro check, so anything inside main ( assuming it&#39;s valid ) will run."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1486569753, "post_id": 42117676, "comment_id": 71404212, "body": "@George From when <code>#ifdef</code> gets an <b>integer constant</b> ?"}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "edited": false, "score": 0, "creation_date": 1486570100, "post_id": 42117676, "comment_id": 71404449, "body": "Who talked about Enum ? just delete the question it will be better."}, {"owner": {"reputation": 97, "user_id": 5738154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/073d9399591d90c7ce6e3004fa7af4e2?s=128&d=identicon&r=PG&f=1", "display_name": "Ishvar Patel", "link": "https://stackoverflow.com/users/5738154/ishvar-patel"}, "edited": false, "score": 4, "creation_date": 1486570255, "post_id": 42117676, "comment_id": 71404568, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17104594/is-ifdef-macro-equivalent-to-a-comment\">Is #ifdef MACRO equivalent to a comment</a>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1486570636, "post_id": 42117676, "comment_id": 71404865, "body": "@Sabrina what&#39;s incorrect about <code>#ifdef 0</code> ? It does the exact same thing as <code>#if check</code> in your code, only it&#39;s more generic for others."}, {"owner": {"reputation": 427, "user_id": 4901269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10303396ec8bbab327d22b73a8e47cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/4901269/geoff"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1486570840, "post_id": 42117676, "comment_id": 71405034, "body": "@George Don&#39;t waste your time."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1486571351, "post_id": 42117676, "comment_id": 71405397, "body": "What do you mean by &quot;exactly the same&quot;? Their behaviour is identical, the text is not, obviously. Care to elaborate your question?"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1486737157, "post_id": 42117676, "comment_id": 71488563, "body": "@George You probably meant <code>#if 0</code>. <code>#ifdef 0</code> is invalid because <code>#ifdef</code>&#39;s argument must be an identifier, not a number."}, {"owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1486754350, "post_id": 42117676, "comment_id": 71499052, "body": "@zwol I feel sometimes that there are dumb people here. I don&#39;t know why they upvote wrong answers."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1486776702, "post_id": 42117676, "comment_id": 71507130, "body": "@Sabrina I find it is best to pretend everyone here is reasonable and intelligent, even if, in the privacy of my own mind, I think they aren&#39;t either.  I point out mistakes as blandly and calmly as possible, and I try not to get into arguments, and I don&#39;t make any fuss about votes ever."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1486776824, "post_id": 42117676, "comment_id": 71507152, "body": "@Sabrina Incidentally, I wrote a thorough answer to this question, but it&#39;s over on the duplicate: <a href=\"http://stackoverflow.com/a/42161150/388520\">stackoverflow.com/a/42161150/388520</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4387, "user_id": 673271, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/8skfj.png?s=128&g=1", "display_name": "mattmilten", "link": "https://stackoverflow.com/users/673271/mattmilten"}, "is_accepted": false, "score": -1, "last_activity_date": 1486569197, "creation_date": 1486569197, "answer_id": 42117741, "question_id": 42117676, "link": "https://stackoverflow.com/questions/42117676/is-the-line-inside-the-preprocessor-directive-correct/42117741#42117741", "title": "Is the line inside the preprocessor directive correct?", "body": "<p>Yes, except that the first code won't compile for <code>#define check</code> ;-).</p>\n"}, {"tags": [], "owner": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "is_accepted": false, "score": 0, "last_activity_date": 1486569343, "creation_date": 1486569343, "answer_id": 42117790, "question_id": 42117676, "link": "https://stackoverflow.com/questions/42117676/is-the-line-inside-the-preprocessor-directive-correct/42117790#42117790", "title": "Is the line inside the preprocessor directive correct?", "body": "<p>No they are not the same.</p>\n\n<pre><code>#define check 0\n\nint main(void) {\n  #if check\n  this is a normal line\n  #endif\n\n  return 0;\n}\n</code></pre>\n\n<p>This segment, when compiled, is completely dependent on the value of the preprocessed <code>check</code> value, currently at <code>0</code>. Since the sole condition for compiling the code between your preprocessing <code>if-endif</code> is the <code>0|1</code> value of <code>check</code>, at runtime, they will be the same. However, if you were to change <code>check</code> to <code>1</code>, it would compile the conditional line as well.</p>\n\n<p>At compile-time, the first segment processes the <code>#define check 0</code>, where as the second, obviously, never has to and simply ignores the comment.</p>\n"}], "owner": {"reputation": 1361, "user_id": 7304770, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c7a710fcb5ccb500839c6e4819efb4b0?s=128&d=identicon&r=PG&f=1", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/7304770/sabrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1486733680, "creation_date": 1486569033, "last_edit_date": 1486733680, "question_id": 42117676, "link": "https://stackoverflow.com/questions/42117676/is-the-line-inside-the-preprocessor-directive-correct", "title": "Is the line inside the preprocessor directive correct?", "body": "<p>What is the difference between these two codes:</p>\n\n<pre><code>#define check 0\n\nint main(void)\n{\n#if check\nthis is a normal line\n#endif\nreturn 0;\n}\n</code></pre>\n\n<p>and this one:</p>\n\n<pre><code>int main(void)\n{\n/*\nthis is a normal line\n*/\nreturn 0;\n}\n</code></pre>\n\n<p>Are they <strong>exactly the same</strong> ?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 4, "creation_date": 1486567989, "post_id": 42117231, "comment_id": 71402926, "body": "remove <code>float *get_data;</code> and add <code>float *get_data(void);</code> above <code>main</code>."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486568008, "post_id": 42117231, "comment_id": 71402936, "body": "If you format your code properly, it would be easier to find the problem in it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486568165, "post_id": 42117231, "comment_id": 71403043, "body": "Or if you want to declare function <code>get_data()</code> inside <code>main()</code> you can do so, but you must declare it <i>as a function</i>.  You have declared that name as a variable, and that declaration shadows the function name.  The declaration of a function has a parenthesized argument list."}], "answers": [{"comments": [{"owner": {"reputation": 4141, "user_id": 568708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e685fc069a4e2705854f24fbb348a477?s=128&d=identicon&r=PG", "display_name": "Kenneth Wilke", "link": "https://stackoverflow.com/users/568708/kenneth-wilke"}, "edited": false, "score": 0, "creation_date": 1486568289, "post_id": 42117330, "comment_id": 71403123, "body": "You could also simply define the entire function before main, but good to know how to use function prototypes for this. It&#39;s nice to use a function prototype so that you can leave main at the top of the source."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 4141, "user_id": 568708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e685fc069a4e2705854f24fbb348a477?s=128&d=identicon&r=PG", "display_name": "Kenneth Wilke", "link": "https://stackoverflow.com/users/568708/kenneth-wilke"}, "edited": false, "score": 0, "creation_date": 1486568484, "post_id": 42117330, "comment_id": 71403274, "body": "@KennethWilke In this case, you can just define <code>get_data()</code> before <code>main()</code>, but in general, it&#39;s best practice to prototype all functions to deal with things like various functions calling one another - if you have a circular call chain (A calls B calls A), then which function goes first?"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1486568640, "last_edit_date": 1486568640, "creation_date": 1486568162, "answer_id": 42117330, "question_id": 42117231, "link": "https://stackoverflow.com/questions/42117231/error-called-object-is-not-a-function/42117330#42117330", "title": "error: called object is not a function", "body": "<p>Two things:</p>\n\n<ol>\n<li><p>You have a local variable called <code>get_data</code> in your function already, in addition to the function called <code>get_data</code>.  Rename either one of them to avoid this naming confusion. </p>\n\n<p>EDIT: It seems you don't even use the variable <code>float* get_data;</code> in <code>main()</code>.  You can just remove it.</p></li>\n<li><p>If you call a function that the compiler can't find or doesn't know about, it assumes that it's just linked to from elsewhere (like, some other library that the linker knows about), and returns an <code>int</code>.  You call <code>get_data()</code> before you define <code>get_data()</code> below <code>main()</code> in your code.  To avoid this error, prototype the function <code>get_data()</code> before <code>main()</code>, like so:</p>\n\n<pre><code>float* get_data();\nint main(void)\n{ \n    /* Your code here */\n}\nfloat* get_data()\n{\n    /* Your code here */\n}\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1486568273, "creation_date": 1486568273, "answer_id": 42117380, "question_id": 42117231, "link": "https://stackoverflow.com/questions/42117231/error-called-object-is-not-a-function/42117380#42117380", "title": "error: called object is not a function", "body": "<p>When compiler parses your code then it gets <code>get_data</code> name twice once as function name and as <code>float *</code> too. Now when it reaches a function call it simply checks the symbol table and then it gets confused and says that it can't find the function named <code>get_data</code> as it was already declared as <code>float*</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 7535335, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c7f90b550c08c89ed647078591c9bd2?s=128&d=identicon&r=PG&f=1", "display_name": "jsho", "link": "https://stackoverflow.com/users/7535335/jsho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2162, "favorite_count": 0, "accepted_answer_id": 42117330, "answer_count": 2, "score": 0, "last_activity_date": 1486568640, "creation_date": 1486567913, "last_edit_date": 1486568389, "question_id": 42117231, "link": "https://stackoverflow.com/questions/42117231/error-called-object-is-not-a-function", "title": "error: called object is not a function", "body": "<p>Trying to make an array of arrays of floats using pointers</p>\n\n<pre><code>int main(void)\n{\n    int num_of_dataSets;\n    float **dataSets;   \n    int i;\n    float *get_data;\n\n    printf(\"Enter the number of data sets: \\n\");\n    scanf( \"%d \" , &amp;num_of_dataSets);\n    dataSets = malloc(num_of_dataSets * sizeof(float) );\n\n    for( i=0; i &lt; num_of_dataSets; i++)\n    {\n        *(dataSets + i) = get_data();\n    }\n\n}\n\n\nfloat* get_data()\n{\n    float *float_list_data;\n    int j;\n    int num_of_floats;\n\n    printf(\"Enter the data: \\n\");\n    scanf(\"%d\" , &amp;num_of_floats);\n\n    float_list_data = malloc( num_of_floats * sizeof(float) );\n    return float_list_data;\n}\n</code></pre>\n\n<p>Getting error called object \"get_data\" is not a function.\nI can't get the error to go away. What am I missing?!</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 88729, "user_id": 1353011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460d2e9d0a84c78e6a5c141a51eb3ab9?s=128&d=identicon&r=PG", "display_name": "Musa", "link": "https://stackoverflow.com/users/1353011/musa"}, "edited": false, "score": 0, "creation_date": 1486567698, "post_id": 42117085, "comment_id": 71402732, "body": "You&#39;re missing a  <code>}</code> and a <code>{</code> in your if/else statement"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1486567850, "post_id": 42117085, "comment_id": 71402835, "body": "<a href=\"http://www.cplusplus.com/reference/cctype/toupper/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cctype/toupper</a> <code>toupper</code> returns int which is definitely not a string."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1486567910, "post_id": 42117085, "comment_id": 71402869, "body": "@KamiKaze Note that this is a c++ resource and the language in the tag is not c++."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486568239, "post_id": 42117085, "comment_id": 71403089, "body": "@IharobAlAsimi it is a referencing a C library though <code>ctype.h</code>"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486568429, "post_id": 42117085, "comment_id": 71403233, "body": "<i>ctype.h</i> is not a c library. And in that website and even though I don&#39;t like it&#39;s format there is a c section for documenting every function that is originally from c, there are important differences that would make the documentation different between both languages."}], "answers": [{"tags": [], "owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1486567982, "last_edit_date": 1486567982, "creation_date": 1486567638, "answer_id": 42117144, "question_id": 42117085, "link": "https://stackoverflow.com/questions/42117085/input-names-and-output-the-first-initials-of-the-surname-and-the-first-name/42117144#42117144", "title": "Input names and output the first Initials of the surname and the first name", "body": "<p>The <code>toupper()</code> function does not return a <em>string</em> and there is no such type in c, you have to convert each character so converting the first like this</p>\n\n<pre><code>a[0] = toupper(a[0]);\nreturn a;\n</code></pre>\n\n<p>Note that what happens internally in any higher level language is exactly this, each character is converted individually.</p>\n\n<p>Also note, that you are modifying the same object that you passed to the function, so the variable in your <code>main()</code> will be modified too.</p>\n\n<p>And more importantly, using the <code>string</code> type defined as <code>char *</code> is very misleading, you are hiding many important things that a c programmer must be careful with</p>\n\n<ol>\n<li>The variables of type <code>string</code> are pointers.</li>\n<li>A string is really an array of characters terminated by a <code>'\\0'</code> which is why i've written the <code>for</code> loop like I did.</li>\n<li>By defining such type the programmer might infer that concatenating strings would be possible with the + operator, this would only cause what is known as undefined behavior.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 7515656, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4FZrsHWNrk8/AAAAAAAAAAI/AAAAAAAAABQ/apjdHJbScRk/photo.jpg?sz=128", "display_name": "claytone mushi", "link": "https://stackoverflow.com/users/7515656/claytone-mushi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 945, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488568783, "creation_date": 1486567474, "last_edit_date": 1488568783, "question_id": 42117085, "link": "https://stackoverflow.com/questions/42117085/input-names-and-output-the-first-initials-of-the-surname-and-the-first-name", "title": "Input names and output the first Initials of the surname and the first name", "body": "<p>I enrolled in Harvard's cs50 via edx.org and I am stuck on this problem set two that  requires us to create a program that takes in peoples names and gives out the first initials of their first and surname names. The code is here:</p>\n\n<pre><code>string  initial (string a);  \n\nint main (void)  \n{  \n    printf(\"Give me your name\\n: \");  \n    string name = GetString();  \n\n    printf(\"Give me your second name\\n:\");  \n    string sname = GetString();  \n\n    char*c; char*b;  \n    c = name;  \n    b = sname;  \n\n    printf(\"%s %s\\n\", initial(c),initial(b));  \n}  \n\nstring initial (char*a)  \n{  \n\n        if ( *a &gt;= 'A' &amp;&amp; *a &lt;= 'z')  \n        {  \n        return toupper(*a);  \n\n        else  \n        return (\"please retype your name\");  \n        }  \n\n}  \n</code></pre>\n\n<p>This is the error message that I am getting from the compiler.</p>\n\n<pre><code>initials.c:27:16: error: incompatible integer to pointer conversion returning 'int' from a function with result type\n      'string' (aka 'char *') [-Werror,-Wint-conversion]\n        return toupper(*a);\n               ^~~~~~~~~~~\ninitials.c:29:9: error: expected expression\n        else\n        ^\n2 errors generated.\nmake: *** [initials] Error 1\n</code></pre>\n\n<p>What's wrong?</p>\n"}, {"tags": ["c", "c99", "complex-numbers"], "comments": [{"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 1, "creation_date": 1486566817, "post_id": 42116818, "comment_id": 71402116, "body": "See also <a href=\"http://stackoverflow.com/questions/6235847/how-to-generate-nan-infinity-and-infinity-in-ansi-c\">How to generate NaN, -Infinity and +Infinity in ANSI C?</a>"}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "reply_to_user": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 1, "creation_date": 1486566919, "post_id": 42116818, "comment_id": 71402198, "body": "@chrisaycock Thank you that partly addresses it. However I need to create x = inf + i inf and also test if the result is NaN + iNaN or not."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486566956, "post_id": 42116818, "comment_id": 71402232, "body": "I though that setting <code>0x7FFFFFFF</code> in a float created a <code>NaN</code>"}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1486566999, "post_id": 42116818, "comment_id": 71402268, "body": "@Jean-Fran&#231;oisFabre Thank you. I don&#39;t want to create a NaN.  I want to create x = inf + i inf and y = i inf and test if the result of the function is NaN + iNaN or not."}, {"owner": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 0, "creation_date": 1486567061, "post_id": 42116818, "comment_id": 71402304, "body": "@eleanora Got it. I&#39;ve retracted."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1486579763, "post_id": 42116818, "comment_id": 71410626, "body": "To create inf + inf i, use the CMPLX macro, that&#39;s what it&#39;s for."}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "reply_to_user": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1486583076, "post_id": 42116818, "comment_id": 71412485, "body": "@Cubbi Could you maybe add an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1486578944, "post_id": 42117111, "comment_id": 71410172, "body": "Infinity is fine, but gcc has no imaginary numbers, so those z1 and z2 are not what you think they are. They are inf+nan i, though that&#39;s still complex infinity and not NaN under C99 rules"}], "tags": [], "owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "is_accepted": false, "score": 2, "last_activity_date": 1486567557, "creation_date": 1486567557, "answer_id": 42117111, "question_id": 42116818, "link": "https://stackoverflow.com/questions/42116818/how-to-pass-infinity-values-to-a-function-and-test-the-result/42117111#42117111", "title": "How to pass infinity values to a function and test the result", "body": "<p>I'm not 100% sure this is correct since I've never worked with complex numbers in C, but I've tried this snippet:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n#include &lt;complex.h&gt;\n\ndouble complex f(double complex x, double complex y) {\n  return x*y;\n}\n\nint main(void)\n{\n    double complex z1 = INFINITY + INFINITY * I;\n    double complex z2 = INFINITY + INFINITY * I;\n    complex double result = f(z1, z2);\n    printf(\"%f + i%f\\n\", creal(result), cimag(result));    \n}\n</code></pre>\n\n<p>I used both clang 3.8 (C 11) and GCC 6.1 (C 11) and the result was:</p>\n\n<blockquote>\n  <p>-inf + i-nan</p>\n</blockquote>\n\n<p>Based on <a href=\"http://en.cppreference.com/w/c/numeric/math/INFINITY\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/c/numeric/math/INFINITY</a>.</p>\n\n<p>Apparently the macro  <code>INFINITY</code> is not always supported and thus defined. Check the link above for more info.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1486568670, "post_id": 42117113, "comment_id": 71403404, "body": "What this answer calls &quot;complex literal&quot;, in C is a <i>constant</i>.  In C++  &#39;The term \u201cliteral\u201d generally designates, in this International Standard, those tokens that are called \u201cconstants\u201d in ISO C.&#39;  C++ footnote 21"}], "tags": [], "owner": {"reputation": 1024, "user_id": 2441656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d540ddabdd3013d67723b76e340b0a0?s=128&d=identicon&r=PG", "display_name": "cnettel", "link": "https://stackoverflow.com/users/2441656/cnettel"}, "is_accepted": false, "score": 1, "last_activity_date": 1486567557, "creation_date": 1486567557, "answer_id": 42117113, "question_id": 42116818, "link": "https://stackoverflow.com/questions/42116818/how-to-pass-infinity-values-to-a-function-and-test-the-result/42117113#42117113", "title": "How to pass infinity values to a function and test the result", "body": "<p>You can specify what is basically a complex literal using multiplication with the <code>I</code> macro (which also has a <code>_Complex_I</code> alias). A minor example creating such a value is seen below:</p>\n\n<pre><code>#include &lt;math.h&gt;\n#include &lt;complex.h&gt;\n\nint main()\n{\n  complex c = INFINITY * I + INFINITY;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1486568516, "post_id": 42117357, "comment_id": 71403293, "body": "That&#39;s very confusing. Why do you get x = nan + inf*I ?"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1486568735, "post_id": 42117357, "comment_id": 71403445, "body": "@eleanora I do not have the faintest idea (without looking into the compiler sources), you need to ask the authors of the respective compilers."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1486569324, "post_id": 42117357, "comment_id": 71403895, "body": "FWIW: <code>complex double x = CMPLX(DBL_MAX,DBL_MAX)*2;</code> generated &quot;<code>x = inf + inf*I;</code>&quot; on my platform that had the same &quot;x = nan + inf*I&quot; result for <code>complex double x = INFINITY + INFINITY * I;</code>"}, {"owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1486569442, "post_id": 42117357, "comment_id": 71403988, "body": "@chux and what platform exactly?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1486569657, "post_id": 42117357, "comment_id": 71404145, "body": "&quot;i686-pc-cygwin/5.3.0&quot; &quot;Intel Xeon&quot; -std=c11"}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1486569694, "post_id": 42117357, "comment_id": 71404173, "body": "A clang dev has said that &quot;&quot;inf * I&quot; == &quot;(inf * 0 - 0*1) + (something)*I&quot;&quot; and it&#39;s probably a bug."}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 1, "creation_date": 1486579633, "post_id": 42117357, "comment_id": 71410556, "body": "Keep in mind inf is viral in C99 complex math: a number is a complex infinity if either real or imaginary part is inf, even if the other part is nan.  That said, nan+nan i is a bug."}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "reply_to_user": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "edited": false, "score": 0, "creation_date": 1486583127, "post_id": 42117357, "comment_id": 71412511, "body": "@Cubbi Yes that is what the Intel C compiler gives too.  I am waiting to see if they accept it&#39;s a bug."}, {"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1486631489, "post_id": 42117357, "comment_id": 71431549, "body": "clang 3.8 gives <code>x = nan + inf*I y = nan + inf*I f = -inf + -nan*I</code>  So it seems only the Intel Compiler is still broken."}], "tags": [], "owner": {"reputation": 5298, "user_id": 4241278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f687af42c3e779a0f2ee98d5fe3bb4?s=128&d=identicon&r=PG", "display_name": "deamentiaemundi", "link": "https://stackoverflow.com/users/4241278/deamentiaemundi"}, "is_accepted": true, "score": 2, "last_activity_date": 1486568226, "creation_date": 1486568226, "answer_id": 42117357, "question_id": 42116818, "link": "https://stackoverflow.com/questions/42116818/how-to-pass-infinity-values-to-a-function-and-test-the-result/42117357#42117357", "title": "How to pass infinity values to a function and test the result", "body": "<p>I would add an intermediate check, too:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;complex.h&gt;\n#include &lt;math.h&gt;\n\ncomplex double f(complex double x, complex double y) {\n  return x*y;\n}\n\nint main(void){\n  complex double x = INFINITY + INFINITY * I;\n  complex double y = 0.0 + INFINITY * I;\n  complex double ret;\n\n  printf(\"x = %g + %g*I\\n\", creal(x), cimag(x));\n  printf(\"y = %g + %g*I\\n\", creal(y), cimag(y));\n\n  ret = f(x,y);\n\n  printf(\"f = %g + %g*I\\n\", creal(ret), cimag(ret));\n\n  exit(EXIT_SUCCESS);\n}\n</code></pre>\n\n<p>Why?</p>\n\n<p>Result with gcc-4.9.real (Ubuntu 4.9.4-2ubuntu1~14.04.1) 4.9.4</p>\n\n<pre><code>x = nan + inf*I\ny = nan + inf*I\nf = -inf + -nan*I\n</code></pre>\n\n<p>Result with Ubuntu clang version 3.4-1ubuntu3 (tags/RELEASE_34/final) (based on LLVM 3.4)</p>\n\n<pre><code>x = nan + inf*I\ny = nan + inf*I\nf = nan + nan*I\n</code></pre>\n\n<p>A complete and utter failure from the get go.</p>\n"}, {"comments": [{"owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "edited": false, "score": 0, "creation_date": 1486588013, "post_id": 42122851, "comment_id": 71415301, "body": "Thank you very much. It&#39;s a shame there is no obvious way to report an icc bug."}, {"owner": {"reputation": 571, "user_id": 4249913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6efc268363c04189ca4c23b00017a62?s=128&d=identicon&r=PG", "display_name": "Keith Prussing", "link": "https://stackoverflow.com/users/4249913/keith-prussing"}, "edited": false, "score": 0, "creation_date": 1574176932, "post_id": 42122851, "comment_id": 104133362, "body": "Do you recall which version of GCC you used to compile your last example (using <code>CMPLX</code>)? I&#39;m getting an undefined symbol error at link time with my version(s) of GCC."}], "tags": [], "owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "is_accepted": false, "score": 1, "last_activity_date": 1486585273, "creation_date": 1486585273, "answer_id": 42122851, "question_id": 42116818, "link": "https://stackoverflow.com/questions/42116818/how-to-pass-infinity-values-to-a-function-and-test-the-result/42122851#42122851", "title": "How to pass infinity values to a function and test the result", "body": "<p>The function, as written, is fine, the problem is with the way the complex numbers with special values are created and interpreted.</p>\n\n<p>If you just write</p>\n\n<pre><code>double complex z1 = I * INFINITY;\ndouble complex z2 = INFINITY + I * INFINITY;\n</code></pre>\n\n<p>you may discover that most of the popular compilers today do not support C99's <a href=\"http://en.cppreference.com/w/c/language/arithmetic_types#Imaginary_floating_types\" rel=\"nofollow noreferrer\">imaginary numbers</a>, and this expression actually multiplies (0,1) by (inf,0) and then adds (inf,0) to the result.</p>\n\n<p>With gcc, I get z1 = (nan, inf), z2 = (nan, inf), f(z1,z2) = (-inf, -nan)</p>\n\n<p>with clang, I get z1 = (nan, inf), z2 = (nan, inf), f(z1,z2) = (-inf, -nan)</p>\n\n<p>with icc, I get z1 = (-nan, inf), z2 = (-nan, inf), f(z1, z2) = (-nan, -nan)</p>\n\n<p>The only compiler that defines I as a pure imaginary number that I have access to is the C compiler from Oracle Studio</p>\n\n<p>with oracle studio, I get z1 = (0, inf), z2 = (inf, inf), f(z1,z2) = (-inf, inf)</p>\n\n<p>Now this is not actually supposed to be a problem because in C, there is only one Complex Infinity, and every complex number whose one component is infinite is considered to be that infinity, even if the other component is NaN. All built-in arithmetic is <a href=\"http://en.cppreference.com/w/c/language/operator_arithmetic#Multiplication\" rel=\"nofollow noreferrer\">supposed to honor that</a>: so in my list above, only Intel appears to have a bug here where multiplication of two complex infinities gave a complex nan.</p>\n\n<p>For the lazy compilers, C11 has a macro that saves the day: <a href=\"http://en.cppreference.com/w/c/numeric/complex/CMPLX\" rel=\"nofollow noreferrer\">CMPLX</a></p>\n\n<pre><code>double complex z1 = CMPLX(0, INFINITY);\ndouble complex z2 = CMPLX(INFINITY, INFINITY);\n</code></pre>\n\n<p>now,</p>\n\n<p>with gcc, I get z1 = (0, inf), z2 = (inf, inf), f(z1,z2) = (-inf, inf)</p>\n"}], "owner": {"reputation": 9307, "user_id": 2179021, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/629b9942cb64be30074eecfe0a100a50?s=128&d=identicon&r=PG", "display_name": "eleanora", "link": "https://stackoverflow.com/users/2179021/eleanora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 1, "accepted_answer_id": 42117357, "answer_count": 4, "score": 1, "last_activity_date": 1486585273, "creation_date": 1486566690, "last_edit_date": 1486567360, "question_id": 42116818, "link": "https://stackoverflow.com/questions/42116818/how-to-pass-infinity-values-to-a-function-and-test-the-result", "title": "How to pass infinity values to a function and test the result", "body": "<p>I have this function:</p>\n\n<pre><code>#include &lt;complex.h&gt;\ncomplex double f(complex double x, complex double y) {\n  return x*y;\n}\n</code></pre>\n\n<p>I would like to call it with <code>x = inf + i inf</code>  and <code>y = i inf</code> and see what the result is. In particular I want to test if the result is an infinity value (as it should be) or if it is <code>NaN + iNaN</code>. The reason for this is to test different C compilers.</p>\n\n<blockquote>\n  <p>How do you do this in C?</p>\n</blockquote>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7535168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184dd125300044a64c2f42d6cfd67a66?s=128&d=identicon&r=PG&f=1", "display_name": "James Groon", "link": "https://stackoverflow.com/users/7535168/james-groon"}, "edited": false, "score": 1, "creation_date": 1486568547, "post_id": 42116662, "comment_id": 71403316, "body": "Correct me if im wrong ; So any kind of undefined behaviour in c can cause unexplained changes in program ?"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "reply_to_user": {"reputation": 41, "user_id": 7535168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184dd125300044a64c2f42d6cfd67a66?s=128&d=identicon&r=PG&f=1", "display_name": "James Groon", "link": "https://stackoverflow.com/users/7535168/james-groon"}, "edited": false, "score": 1, "creation_date": 1486568660, "post_id": 42116662, "comment_id": 71403398, "body": "@JamesGroon Well, I mean technically ub being invoked would be the explanation, but yes."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 10, "last_activity_date": 1486566719, "last_edit_date": 1486566719, "creation_date": 1486566270, "answer_id": 42116662, "question_id": 42116588, "link": "https://stackoverflow.com/questions/42116588/wrong-print-in-c-program/42116662#42116662", "title": "Wrong print in C program", "body": "<p>You refer to <code>x[j+1]</code> when <code>j</code> is <code>5</code>. That's outside the bounds of the array.</p>\n\n<p>The behaviour of your code is therefore <em>undefined</em>. (Interestingly, the behaviour of your code is consistent with <code>x[6]</code> being equivalent to <code>j</code>, and <code>x[7]</code> being <code>i</code> and a particular sequencing in the assignment, but <strong>don't</strong> rely on any of that.)</p>\n"}], "owner": {"reputation": 41, "user_id": 7535168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/184dd125300044a64c2f42d6cfd67a66?s=128&d=identicon&r=PG&f=1", "display_name": "James Groon", "link": "https://stackoverflow.com/users/7535168/james-groon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 42116662, "answer_count": 1, "score": 4, "last_activity_date": 1486568714, "creation_date": 1486566088, "last_edit_date": 1486568714, "question_id": 42116588, "link": "https://stackoverflow.com/questions/42116588/wrong-print-in-c-program", "title": "Wrong print in C program", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main() {\n  int x[] = {2, 3, 1, 5, 6, 9};\n  int j, i, s;\n  for (i=0; i&lt;6; i++){\n    if (x[i] % 2 == 1){\n      break;\n    }\n  }\n\n  printf(\"%d\", i);\n  for (j=5; j&gt;1; j--){\n    x[j+1] = x[j];\n  }\n  printf(\"%d\", i);\n\n  return 0;\n} \n</code></pre>\n\n<p>First <code>printf</code> prints 1 while the other <code>printf</code> prints 9 . And I haven't changed <code>i</code> in the meantime as you can see. Why does it print 9?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 3, "creation_date": 1486565615, "post_id": 42116327, "comment_id": 71401244, "body": "Are you asking how to transfer the bits of your two <code>unsigned int</code>s into a <code>double</code>, or does &quot;written as&quot; have some other implication for the needed conversion?"}, {"owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486565684, "post_id": 42116327, "comment_id": 71401290, "body": "John, just transfer."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1486565747, "post_id": 42116327, "comment_id": 71401346, "body": "<code>typedef union { unsigned int iVar[2]; double dVar; } i2d;</code> ?"}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1486566114, "post_id": 42116327, "comment_id": 71401612, "body": "Does unsigned int[0] and [1] denote a 64 bit integral value, or is the representation already a floating point representation (and for some mystic reason split in two 4-byte-chunks)?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 2, "creation_date": 1486566269, "post_id": 42116327, "comment_id": 71401720, "body": "We know the ordering of the two <code>unsigned int</code>s within the array is big-endian, but is the ordering of the bytes within each <code>unsigned int</code> also big-endian? And what is the endian-ness of the host CPU? What I&#39;m getting at is that you may or may not need to do some byte swapping."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486569079, "post_id": 42116327, "comment_id": 71403722, "body": "The real question here is how you know that the data in those unsigned ints is an exact binary representation of a double. And the next question then is, why would you use <code>int</code> to store it, since that makes the code endianess dependent."}], "answers": [{"comments": [{"owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "edited": false, "score": 0, "creation_date": 1486565916, "post_id": 42116436, "comment_id": 71401476, "body": "Can&#39;t use <code>memcpy</code>, sorry."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "edited": false, "score": 6, "creation_date": 1486565979, "post_id": 42116436, "comment_id": 71401521, "body": "@Danijel: Firstly, Weird limitations should normally be mentioned in the question... Is there anything else that you &quot;can&#39;t use&quot;? Secondly, if you can&#39;t use <code>memcpy</code> you can always spell it out manually, explicitly. It is just a simple cycle that copies <code>n</code> bytes. You can even express it without a cycle, as byte-by-byte copying."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486566792, "post_id": 42116436, "comment_id": 71402098, "body": "not really important to the correctness of the answer, but I&#39;d make that <code>assert</code> into a <code>static_assert</code> (assuming C11 and all those good stuff)."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 5, "last_activity_date": 1486566196, "last_edit_date": 1486566196, "creation_date": 1486565727, "answer_id": 42116436, "question_id": 42116327, "link": "https://stackoverflow.com/questions/42116327/double-from-unsigned-int2/42116436#42116436", "title": "Double from unsigned int[2]?", "body": "<p><code>memcpy</code> it from your source array to a <code>double</code> object in proper order. E.g. if you want to swap the <code>unsigned</code> parts</p>\n\n<pre><code>unsigned src[2] = { ... };\ndouble dst;\nassert(sizeof dst == sizeof src);\n\nmemcpy(&amp;dst, &amp;src[1], sizeof(unsigned));\nmemcpy((unsigned char *) &amp;dst + sizeof(unsigned), &amp;src[0], sizeof(unsigned));\n</code></pre>\n\n<p>Of course, you can always just reinterpret both source and destination objects as arrays of <code>unsigned char</code> and copy them byte-by-byte in any order you wish</p>\n\n<pre><code>unsigned src[2] = { ... };\ndouble dst;\n\nunsigned char *src_bytes = (unsigned char *) src;\nunsigned char *dst_bytes = (unsigned char *) &amp;dst;\n\nassert(sizeof dst == 8 &amp;&amp; sizeof src == 8);\n\ndst_bytes[0] = src_bytes[7];\ndst_bytes[1] = src_bytes[6];\n...\ndst_bytes[7] = src_bytes[0];\n</code></pre>\n\n<p>(The second example is not intended to be equivalent to the first one.)</p>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 4, "last_activity_date": 1486567798, "last_edit_date": 1486567798, "creation_date": 1486567472, "answer_id": 42117083, "question_id": 42116327, "link": "https://stackoverflow.com/questions/42116327/double-from-unsigned-int2/42117083#42117083", "title": "Double from unsigned int[2]?", "body": "<p>There are several ways to copy the bits of your two integers into an object of type <code>double</code>.</p>\n\n<p>At the lowest level, you can convert your input pointer to a [<code>unsigned</code>] <code>char *</code>, create a  [<code>unsigned</code>] <code>char *</code> to the first byte of the return value, and copy between those by whatever means you choose.  This provides you every opportunity to adjust byte order as may be needed -- for example, although your array is ordered most-significant <em>word</em> first, the order of the bytes within those words might not be what you need.</p>\n\n<p>In the event that you need the bytes to be transferred into your <code>double</code> most-significant byte first, and that you do not want to depend on the machine byte order, you might do this:</p>\n\n<pre><code>double d_from_u2(unsigned int *in) {\n    double result;\n    unsigned char *result_bytes = (unsigned char *) &amp;result;\n\n    for (int i = 0; i &lt; 4; i++) {\n        result_bytes[i] =     in[0] &gt;&gt; (24 - 8 * i);\n        result_bytes[i + 4] = in[1] &gt;&gt; (24 - 8 * i);\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>Using arithmetic (shifts, in this case) allows you to operate on the numeric values of the input independently of details of numeric representation.</p>\n"}, {"tags": [], "owner": {"reputation": 1068, "user_id": 57140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da10f3d496288a3eb7cf6ac03c225ed?s=128&d=identicon&r=PG", "display_name": "kwarnke", "link": "https://stackoverflow.com/users/57140/kwarnke"}, "is_accepted": false, "score": 0, "last_activity_date": 1486569058, "creation_date": 1486569058, "answer_id": 42117682, "question_id": 42116327, "link": "https://stackoverflow.com/questions/42116327/double-from-unsigned-int2/42117682#42117682", "title": "Double from unsigned int[2]?", "body": "<p>Here is a solution that works without <code>memcpy</code>but using <code>union</code>:</p>\n\n<pre><code>#include \"stdio.h\"\n#include \"stdint.h\"\n\ndouble d_from_u2(unsigned int* v) {\n  union { \n    int32_t x[2];\n    int64_t y;\n  } u = { .x = { v[1], v[0] }};\n\n  printf(\"%llu\\n\", u.y); // 1311768467463794450\n\n  return (double)u.y;\n}\n\nint main(void) {\n  int32_t x[2];\n\n  x[0] = 0x12345678;\n  x[1] = 0x9abcef12;\n  printf(\"%f\\n\", d_from_u2(x)); // 1311768467463794432.000000\n  return 0;\n}    \n</code></pre>\n\n<p>See <a href=\"https://repl.it/FcDn/2\" rel=\"nofollow noreferrer\">demo</a>. In initializes the array <code>int32_t[2]</code> in the union and uses the <code>int64_t</code> to convert it to a <code>double</code>. The order of the initialization depends on which machine (little or big endian) it runs or where the values comes from (<a href=\"https://repl.it/FcDn/2\" rel=\"nofollow noreferrer\">1</a> first). </p>\n"}], "owner": {"reputation": 6534, "user_id": 1202172, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8587094fc4666bee5d5852f163e6f86b?s=128&d=identicon&r=PG", "display_name": "Danijel", "link": "https://stackoverflow.com/users/1202172/danijel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 42117083, "answer_count": 3, "score": 2, "last_activity_date": 1486569058, "creation_date": 1486565475, "question_id": 42116327, "link": "https://stackoverflow.com/questions/42116327/double-from-unsigned-int2", "title": "Double from unsigned int[2]?", "body": "<p>I have a 64-bit number written as two 32-bit unsinged ints: <code>unsigned int[2]</code>. <code>unsigned int[0]</code> is MSB, and <code>unsigned int[1]</code> is LSB. How would I convert it to <code>double</code>? </p>\n\n<p><code>double d_from_u2(unsigned int*);</code></p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1486565217, "post_id": 42116162, "comment_id": 71400929, "body": "How does the function know <code>Num</code>? Is it a constant? Wouldn&#39;t it be better to pass it as a parameter instead?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486565239, "post_id": 42116162, "comment_id": 71400952, "body": "You cannot loop over ordinary arguments in C.  You could write this as a varargs function, however.  That could be more flexible than a function for a fixed number of arguments."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1486565381, "post_id": 42116162, "comment_id": 71401053, "body": "If you <i>are</i> going to rewrite it as a function then add better error handling. Particularly in not losing the address of the old memory block when <code>realloc</code> returns a null pointer."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1486565383, "post_id": 42116162, "comment_id": 71401056, "body": "Note also that reallocation can fail.  You&#39;ve described no error handling, and performing a group reallocation like that makes error handling trickier than otherwise it is."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1486565414, "post_id": 42116162, "comment_id": 71401079, "body": "Better using <code>bool mem_allocate(double *var[], size_t N_vars)</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486565435, "post_id": 42116162, "comment_id": 71401100, "body": "Besides the loop issue, what problems do you have in the functions implementation?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1486565443, "post_id": 42116162, "comment_id": 71401104, "body": "Variable argument functions are almost always the wrong solution to any problem... If the problem is X and you think Y is the solution, then Z is a variable argument list function.  :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1486565525, "post_id": 42116162, "comment_id": 71401168, "body": "@LPs Indeed, except he needs to change the pointers themselves. I don&#39;t believe that <code>realloc</code> guarantees that the address remains the same after calling it."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486565669, "post_id": 42116162, "comment_id": 71401276, "body": "@Lundin Should work fine with an array of pointers, as then the function can easily do <code>var[x] = new_pointer;</code> Or do you want an array of pointer <i>to</i> pointers? So e.g. <code>*var[x] = new_pointer;</code>? The first alternative requires some more work by the caller, but the second alternative leads to three-star programming... :)"}, {"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1486566097, "post_id": 42116162, "comment_id": 71401600, "body": "@LP the function needs also a <code>size_t *sizes</code> that gives the size of each of <code>var[]</code> (and <code>Num</code>)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486566109, "post_id": 42116162, "comment_id": 71401610, "body": "@Someprogrammerdude I don&#39;t think realloc gives any choice in the matter. I&#39;ll consider writing an answer."}, {"owner": {"reputation": 13, "user_id": 7535060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374567841e9d2b1ba32b355fc024914?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/7535060/mike"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486566492, "post_id": 42116162, "comment_id": 71401871, "body": "@Lundin happy to add Num as argument, obviously that&#39;s the easy bit!"}, {"owner": {"reputation": 13, "user_id": 7535060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374567841e9d2b1ba32b355fc024914?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/7535060/mike"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486566562, "post_id": 42116162, "comment_id": 71401920, "body": "@StoryTeller Maybe you could give some detail on the error handling. I have limited/no experience of that.  Reversion to malloc rather than realloc is a possibility"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486566576, "post_id": 42116162, "comment_id": 71401936, "body": "It is impossible to write a function having this exact calling sequence doing what you want. You can write a varargs macro though."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486566651, "post_id": 42116162, "comment_id": 71401981, "body": "@Mike - The gist of it is just not assigning directly to the pointer you are reallocating. Assign to a temporary first, then check for NULL and handle the error as you see fit. If you got back a valid address you can overwrite the original pointer."}, {"owner": {"reputation": 13, "user_id": 7535060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374567841e9d2b1ba32b355fc024914?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/7535060/mike"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486566679, "post_id": 42116162, "comment_id": 71402006, "body": "@Someprogrammerdude  I considered an array of pointers.  My limited knowledge meant that the array initialisation reverted to practically the same number of lines of code.  I&#39;m hoping for a succint few-liner!  Interested to hear three-star options, providing you explain it ;)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1486566869, "post_id": 42116162, "comment_id": 71402155, "body": "The fact that you are trying to have 4 arrays with the same number of elements strongly suggests that you are solving a wrong problem though. Perhaps you need a single array of structs instead."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1486568338, "post_id": 42116162, "comment_id": 71403156, "body": "Consider reading <a href=\"http://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc\">Do I cast the result of malloc?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1486568014, "post_id": 42117185, "comment_id": 71402940, "body": "Actually this is the simplest solution. I&#39;ll delete my answer in favour of this."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1486568097, "post_id": 42117185, "comment_id": 71403003, "body": "Why <code>sizeof(sometype)</code> instead of <code>sizeof *ptr</code>?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1486568372, "post_id": 42117185, "comment_id": 71403188, "body": "@Deduplicator Not a real reason, but the function takes only double pointers. BTW I&#39;m updating the answer: it is better for code management."}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 1, "last_activity_date": 1486568384, "last_edit_date": 1486568384, "creation_date": 1486567773, "answer_id": 42117185, "question_id": 42116162, "link": "https://stackoverflow.com/questions/42116162/succinct-dynamic-memory-allocation-in-c/42117185#42117185", "title": "Succinct dynamic memory allocation in C", "body": "<p>For the sake of completeness of my previous comment, an example is</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdbool.h&gt;\n\nbool mem_allocate (double *vars[], size_t N_vars, size_t newWidth)\n{\n    double *temp;\n\n    printf(\"\\n\");\n\n    for (size_t i=0; i&lt;N_vars; i++)\n    {\n        temp = realloc(vars[i], newWidth*sizeof(*temp));\n\n        if (temp != NULL)\n        {\n            printf (\"temp: %p\\n\", (void *)temp);\n            vars[i] = temp;\n        }\n        else\n        {\n            return false;\n        }\n    }\n\n    printf(\"\\n\");\n\n    return true;\n}\n\nint main (void)\n{\n    double *var1 = malloc(sizeof(*var1));\n    double *var2 = malloc(sizeof(*var2));\n    double *var3 = malloc(sizeof(*var3));\n    double *var4 = malloc(sizeof(*var4));\n\n    printf (\"var1: %p\\n\", (void *)var1);\n    printf (\"var2: %p\\n\", (void *)var2);\n    printf (\"var3: %p\\n\", (void *)var3);\n    printf (\"var4: %p\\n\", (void *)var4);\n\n    double *vars[4];\n\n    vars[0] = var1;\n    vars[1] = var2;\n    vars[2] = var3;\n    vars[3] = var4;\n\n    if (mem_allocate (vars, sizeof(vars)/sizeof(vars[0]), 200) == true)\n    {\n        var1 = vars[0];\n        var2 = vars[1];\n        var3 = vars[2];\n        var4 = vars[3];\n\n        printf (\"var1: %p\\n\", (void *)var1);\n        printf (\"var2: %p\\n\", (void *)var2);\n        printf (\"var3: %p\\n\", (void *)var3);\n        printf (\"var4: %p\\n\", (void *)var4);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Changing <code>varx</code> inside function mem_allocate would imply 3 star implementation, that I really don't love. </p>\n\n<p>Obviously all <code>malloc</code> return value must be checked.</p>\n"}], "owner": {"reputation": 13, "user_id": 7535060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9374567841e9d2b1ba32b355fc024914?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/7535060/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486568384, "creation_date": 1486565037, "last_edit_date": 1486565182, "question_id": 42116162, "link": "https://stackoverflow.com/questions/42116162/succinct-dynamic-memory-allocation-in-c", "title": "Succinct dynamic memory allocation in C", "body": "<p>In pseudo-code, I'd like to replace:</p>\n\n<pre><code>ra             =  (double *)  realloc(ra,   Num*sizeof(*ra));\ndec            =  (double *)  realloc(dec,  Num*sizeof(*dec));\nzobs           =  (double *)  realloc(zobs, Num*sizeof(*zobs));\nM_B            =  (double *)  realloc(M_B,  Num*sizeof(*M_B));\n</code></pre>\n\n<p>with </p>\n\n<p>e.g.  mem_allocate(&amp;ra, &amp;dec, &amp;zobs, &amp;M_B)</p>\n\n<p>where </p>\n\n<pre><code>mem_allocate(arg1, arg2,..., arg4){\n\nfor argi in arg1 to arg4{\n     argi = (double *)  realloc(argi, Num*sizeof(*argi))\n\n}\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 27011, "user_id": 1490355, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296f0478cb1b6724e3f862ace601fa99?s=128&d=identicon&r=PG", "display_name": "SingerOfTheFall", "link": "https://stackoverflow.com/users/1490355/singerofthefall"}, "edited": false, "score": 1, "creation_date": 1486564831, "post_id": 42116056, "comment_id": 71400607, "body": "Well the main difference is that the first one is not valid C++..."}, {"owner": {"reputation": 3123, "user_id": 2097041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8L21m.jpg?s=128&g=1", "display_name": "Colin", "link": "https://stackoverflow.com/users/2097041/colin"}, "edited": false, "score": 2, "creation_date": 1486564872, "post_id": 42116056, "comment_id": 71400649, "body": "The syntax is different. The second declares a pointer to <code>struct Stack</code> called <code>stack</code>, the first is invalid. The reason it&#39;s invalid is that it doesn&#39;t fit the grammar of either language, c or c++."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1486564892, "post_id": 42116056, "comment_id": 71400663, "body": "First is invalid in C and C++."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1486564977, "post_id": 42116056, "comment_id": 71400740, "body": "In c++ use <code>Stack* stack</code> instead. The <code>struct</code> is not needed."}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 1, "last_activity_date": 1486565259, "last_edit_date": 1486565259, "creation_date": 1486564946, "answer_id": 42116132, "question_id": 42116056, "link": "https://stackoverflow.com/questions/42116056/what-is-the-difference-between-struct-stack-stack-and-struct-stack-stack/42116132#42116132", "title": "What is the difference between &quot;struct *Stack stack&quot; and &quot;struct Stack* stack&quot;?", "body": "<blockquote>\n  <p>While writing a code when I am writing struct *Stack stack then code is not working</p>\n</blockquote>\n\n<p>This is because <code>struct *Stack stack</code> is not correct syntax. This would imply a pointer named <code>Stack stack</code>, which is not a valid name, pointing to a <code>struct</code>, which is not valid in <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> or <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a>, as you have to indicate what type of <code>struct</code> your pointer will be pointing to. The word <code>struct</code> is not standalone. </p>\n\n<blockquote>\n  <p>when I am writing it like struct Stack* stack code is working</p>\n</blockquote>\n\n<p>On the other hand, the declaration :</p>\n\n<pre><code>struct Stack* stack;\n</code></pre>\n\n<p>implies a pointer named <code>stack</code> which points to a <code>struct Stack</code> (which you have defined somewhere).</p>\n"}], "owner": {"reputation": 11, "user_id": 7535040, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vHVC_00Tjk0/AAAAAAAAAAI/AAAAAAAAAQo/qtMC4FuKmy8/photo.jpg?sz=128", "display_name": "Ashish Shukla", "link": "https://stackoverflow.com/users/7535040/ashish-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1486565259, "creation_date": 1486564749, "last_edit_date": 1486564806, "question_id": 42116056, "link": "https://stackoverflow.com/questions/42116056/what-is-the-difference-between-struct-stack-stack-and-struct-stack-stack", "title": "What is the difference between &quot;struct *Stack stack&quot; and &quot;struct Stack* stack&quot;?", "body": "<p>While writing a code when I am writing <code>struct *Stack stack</code> then code is not working and when I am writing it like <code>struct Stack* stack</code> code is working,can someone tell me the difference between these two code?</p>\n"}, {"tags": ["c", "string", "pointers", "compiler-specific"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1486564774, "post_id": 42116036, "comment_id": 71400566, "body": "1) don&#39;t use <code>gets()</code> 2) undefined behaviour on unallocated string."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1486564816, "post_id": 42116036, "comment_id": 71400600, "body": "It&#39;s a mystery why it &quot;works in Turbo C&quot; because there is no memory allocated to the pointer."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1486564828, "post_id": 42116036, "comment_id": 71400606, "body": "you might want to read up on <a href=\"http://en.cppreference.com/w/c/io/gets\" rel=\"nofollow noreferrer\"><code>gets</code></a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486564883, "post_id": 42116036, "comment_id": 71400657, "body": "When you define the pointer variable <code>str</code>, where does it point? It needs to <i>point</i> to some memory where <code>gets</code> (<b><i>really</i></b> don&#39;t use it) write the characters it reads."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1486564880, "creation_date": 1486564880, "answer_id": 42116111, "question_id": 42116036, "link": "https://stackoverflow.com/questions/42116036/why-does-the-following-c-code-work-in-turbo-c-and-not-in-devc/42116111#42116111", "title": "Why does the following c code work in turbo c and not in devc++?", "body": "<p>that</p>\n\n<pre><code>char *str;\ngets(str);\n</code></pre>\n\n<p>just <em>cannot</em> be right. <code>str</code> is not initialized, and <code>gets</code> recieves the pointer by value so it cannot allocate it internally. You're just lucky/unlucky with <em>undefined behaviour</em>.</p>\n\n<blockquote>\n  <p>which one is authentic and a more correct form of coding ?</p>\n</blockquote>\n\n<p>None of the above. <em>don't use <code>gets</code></em>. It's unsafe because you cannot limit the input size. Use <code>fgets</code> with specified size (and an allocated buffer of course!)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar buffer[20];\nfgets(buffer, sizeof(buffer), stdin); // reads at most 19 chars + null-termination\n</code></pre>\n\n<p>or <code>scanf</code> with size limit (note the -1): <code>scanf(\"%19s\",buffer);</code></p>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 13784658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e66f940d06b00778c01404be368d6363?s=128&d=identicon&r=PG&f=1", "display_name": "Desmond9989", "link": "https://stackoverflow.com/users/13784658/desmond9989"}, "is_accepted": false, "score": 0, "last_activity_date": 1593603186, "creation_date": 1593603186, "answer_id": 62675913, "question_id": 42116036, "link": "https://stackoverflow.com/questions/42116036/why-does-the-following-c-code-work-in-turbo-c-and-not-in-devc/62675913#62675913", "title": "Why does the following c code work in turbo c and not in devc++?", "body": "<pre><code>gets(str);\n</code></pre>\n<p>It shouldnt work even in turbo c++ because you have not allocated the space to str.\ncorrect way</p>\n<pre><code> str = (char *)malloc(sizeof(char) * (length+1));\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6541196, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/423cb7c7349237a181667bc45d37fc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/6541196/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1593603186, "creation_date": 1486564682, "question_id": 42116036, "link": "https://stackoverflow.com/questions/42116036/why-does-the-following-c-code-work-in-turbo-c-and-not-in-devc", "title": "Why does the following c code work in turbo c and not in devc++?", "body": "<p>I have the following piece of code:</p>\n\n<pre><code>char *str;\ngets(str);\n</code></pre>\n\n<p>Now it works in turbo c but fails to in devc.</p>\n\n<p>I have to add the following in order to make it work in devC++.</p>\n\n<pre><code>char *str = malloc(5);\n</code></pre>\n\n<p>Can anyone explain, why is it so?</p>\n\n<p>Also, which one is authentic and a more correct form of coding.</p>\n"}, {"tags": ["c", "linker", "avr-gcc", "atmelstudio", "progmem"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486564724, "post_id": 42116020, "comment_id": 71400520, "body": "have you tried this line <code>(void)PROGMEM;</code> somewhere in your code to force usage of the variable? if it doesn&#39;t work, then you have to force it in the linker file (do you have a linker file ?)"}, {"owner": {"reputation": 5219, "user_id": 365929, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4255a7fed662c5060376545e1ddcd9b?s=128&d=identicon&r=PG", "display_name": "Max Kielland", "link": "https://stackoverflow.com/users/365929/max-kielland"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486568634, "post_id": 42116020, "comment_id": 71403382, "body": "I have tried to use the variable in the program, but it&#39;s still not linked. ATMEL Studio is generating the make file, but I can set &quot;free&quot; options in the project properties."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486575029, "post_id": 42116020, "comment_id": 71407833, "body": "can you post the linker part of the makefile?"}, {"owner": {"reputation": 5219, "user_id": 365929, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4255a7fed662c5060376545e1ddcd9b?s=128&d=identicon&r=PG", "display_name": "Max Kielland", "link": "https://stackoverflow.com/users/365929/max-kielland"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1486575975, "post_id": 42116020, "comment_id": 71408385, "body": "Updated with makefile linker section."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 1475880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f15a73b47383e2f228157997ef152f1?s=128&d=identicon&r=PG", "display_name": "JBurger", "link": "https://stackoverflow.com/users/1475880/jburger"}, "is_accepted": false, "score": 0, "last_activity_date": 1499366472, "creation_date": 1499366472, "answer_id": 44956637, "question_id": 42116020, "link": "https://stackoverflow.com/questions/42116020/progmem-variable-discarded-even-if-declared-as-used/44956637#44956637", "title": "PROGMEM variable discarded even if declared as (used)", "body": "<p>Odd that <code>__attribute__((used))</code> isn't working. Two suggestions to try.</p>\n\n<p>First, change the variable from <code>static</code> to <code>volatile</code> (or just add <code>volatile</code>). That <em>may</em> prevent it from being optimized away.</p>\n\n<p>If that doesn't work, instead you can add a line to the linker to make it \"[p]retend the symbol <em>symbol</em> is undefined, to force linking of library modules to define it\" (<a href=\"https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html#index-u\" rel=\"nofollow noreferrer\">GCC Link Options</a>). This is done via <code>-u symbol</code> or <code>--undefined=symbol</code>.</p>\n\n<p>To add it to the Atmel Studio project file, go to Toolchain -> AVR/GNU Linker -> Miscellaneous. Then in Other Linker Flags add <code>--undefined=gPrgLen</code>.</p>\n\n<p>I've used this to embed revision/compile-time information into the Hex file where it wasn't otherwise used. That way I could retrieve the memory from a device and know under what conditions it was built (primarily for tracking changes during prototyping and initial firmware debugging). My main.c file had a global char array that looked something like <code>const char codeCompileDetails[] PROGMEM = \"company_name-\" __DATE__ \"-\" __TIME__;</code>. Coupled with <code>--undefined=codeCompileDetails</code>, that data (here including the date and time the code was compiled) always makes it into the executable.</p>\n"}], "owner": {"reputation": 5219, "user_id": 365929, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4255a7fed662c5060376545e1ddcd9b?s=128&d=identicon&r=PG", "display_name": "Max Kielland", "link": "https://stackoverflow.com/users/365929/max-kielland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499366472, "creation_date": 1486564636, "last_edit_date": 1486575955, "question_id": 42116020, "link": "https://stackoverflow.com/questions/42116020/progmem-variable-discarded-even-if-declared-as-used", "title": "PROGMEM variable discarded even if declared as (used)", "body": "<p>I'm using ATMEL Studio 6.2 and its toolchain with avr-gcc (avr8-gnu-toolchain). I have a variable that needs to be placed in flash (PROGMEM) and I declare it as a global:</p>\n\n<pre><code>static const uint16_t gPrgLen PROGMEM __attribute__((used)) = 0;\n</code></pre>\n\n<p>The compiler doesn't complain and the linker doesn't complain, but when I open the .lss file, there is no gPrgLen to be found. In the .map file we can see that it has been listed under \"discarded input sections\"</p>\n\n<pre><code>Discarded input sections\n.progmem.data.gPrgLen    0x00000000    0x2    Boot.o\n</code></pre>\n\n<p>It is built as a release, but a debug build gives the same result.\nHow can I force the linker to include this variable in the <code>*(.progmem*)</code> section?</p>\n\n<p>EDIT<br>\nAdded <code>static</code> but still the same result.</p>\n\n<p>Here is the linker part:</p>\n\n<pre><code># All Target\nall: $(OUTPUT_FILE_PATH) $(ADDITIONAL_DEPENDENCIES)\n\n$(OUTPUT_FILE_PATH): $(OBJS) $(USER_OBJS) $(OUTPUT_FILE_DEP) $(LIB_DEP)\n@echo Building target: $@\n@echo Invoking: AVR/GNU Linker : 4.8.1\n$(QUOTE)C:\\Program Files (x86)\\Atmel\\Atmel Toolchain\\AVR8 GCC\\Native\\3.4.1056\\avr8-gnu-toolchain\\bin\\avr-gcc.exe$(QUOTE) -o$(OUTPUT_FILE_PATH_AS_ARGS) $(OBJS_AS_ARGS) $(USER_OBJS) $(LIBS) -Wl,-Map=\"Boot.map\" -Wl,--start-group -Wl,-lm  -Wl,--end-group -Wl,--gc-sections -Wl,-section-start=.text=0xf800  -mmcu=at90usb647  \n@echo Finished building target: $@\n\"C:\\Program Files (x86)\\Atmel\\Atmel Toolchain\\AVR8 GCC\\Native\\3.4.1056\\avr8-gnu-toolchain\\bin\\avr-objcopy.exe\" -O ihex -R .eeprom -R .fuse -R .lock -R .signature -R .user_signatures  \"Boot.elf\" \"Boot.hex\"\n\"C:\\Program Files (x86)\\Atmel\\Atmel Toolchain\\AVR8 GCC\\Native\\3.4.1056\\avr8-gnu-toolchain\\bin\\avr-objcopy.exe\" -j .eeprom  --set-section-flags=.eeprom=alloc,load --change-section-lma .eeprom=0  --no-change-warnings -O ihex \"Boot.elf\" \"Boot.eep\" || exit 0\n\"C:\\Program Files (x86)\\Atmel\\Atmel Toolchain\\AVR8 GCC\\Native\\3.4.1056\\avr8-gnu-toolchain\\bin\\avr-objdump.exe\" -h -S \"Boot.elf\" &gt; \"Boot.lss\"\n\"C:\\Program Files (x86)\\Atmel\\Atmel Toolchain\\AVR8 GCC\\Native\\3.4.1056\\avr8-gnu-toolchain\\bin\\avr-objcopy.exe\" -O srec -R .eeprom -R .fuse -R .lock -R .signature -R .user_signatures \"Boot.elf\" \"Boot.srec\"\n\"C:\\Program Files (x86)\\Atmel\\Atmel Toolchain\\AVR8 GCC\\Native\\3.4.1056\\avr8-gnu-toolchain\\bin\\avr-size.exe\" \"Boot.elf\"\n</code></pre>\n"}, {"tags": ["c", "gtk3"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7628061"}, "is_accepted": false, "score": 2, "last_activity_date": 1488174550, "creation_date": 1488174550, "answer_id": 42478627, "question_id": 42115586, "link": "https://stackoverflow.com/questions/42115586/how-to-add-a-hover-effect-to-a-gtktreeview-cell/42478627#42478627", "title": "How to add a hover effect to a GtkTreeView cell", "body": "<p>You could make a custom CellRendererText and set the underline property if the PRELIT flag is present.</p>\n\n<p>i only know in Python:</p>\n\n<pre><code>class My_CellRendererText( Gtk.CellRendererText ):\ndef __init__( self ):\n    super().__init__()\n\ndef do_render( self, cr, widget, background_area, cell_area, flags ):\n    self.props.underline = ( ( flags &amp; Gtk.CellRendererState.PRELIT ) != 0 )\n    return Gtk.CellRendererText.do_render( self, cr, widget, background_area, cell_area, flags )\n\nGObject.type_register( My_CellRendererText )\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1488525910, "post_id": 42497378, "comment_id": 72279163, "body": "@lanoxx: What was your intent with the nonfunctional edits to the example code? The code as shown is tested to work, and your changes provided no functional differences, so what was their purpose? (I found the edit attempt <i>suspicious</i>, to be honest, so I&#39;d like some clarification here, please.)"}, {"owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1488576612, "post_id": 42497378, "comment_id": 72309726, "body": "Apologies for messing up the code listing. I was trying to reformat it to avoid having to scroll left and right. This would make the code listing much more readable in my opinion. The use of either <code>G_DECLARE_FINAL_TYPE</code> or <code>G_DECLARE_DERIVABLE_TYPE</code> you also make the listing shorter, because you do not need to define those 6 macros at the top and depending on which of these two macros you use, you can omit some of the <code>struct</code> declarations."}, {"owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1488576924, "post_id": 42497378, "comment_id": 72309875, "body": "Btw. I do not think this addition is necessary: <b>(and change GtkCellRenderText * to CustomCellRenderText *) in your GtkTreeView code,</b>, since the custom renderer&#39;s new function actually returns a <code>GtkCellRenderer</code> instance."}, {"owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1488578478, "post_id": 42497378, "comment_id": 72310617, "body": "Based on your code here is a solution that uses <code>G_DECLARE_FINAL_TYPE</code>: <a href=\"https://gist.github.com/lanoxx/10929bca7a0d34b5cb2552b2b6e74149\" rel=\"nofollow noreferrer\">gist.github.com/lanoxx/10929bca7a0d34b5cb2552b2b6e74149</a>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1488608245, "post_id": 42497378, "comment_id": 72317224, "body": "@lanoxx: You should add an answer with the code that solved your issue, then. If you used my example code as a basis for it, a reference -- link to, or mention of -- my answer is sufficient. (I am not here to gather &quot;score&quot;, but to help others find robust and interesting solutions to interesting problems. As I mentioned above, I found your edit &quot;suspicious&quot; and rolled it back, because it provided no functional changes.) If you do supply your own answer/code, please do explain why you arrived and chose that particular one, so that others encountering the same problem get maximum information."}, {"owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "edited": false, "score": 0, "creation_date": 1488627002, "post_id": 42497378, "comment_id": 72321990, "body": "Maybe you can just re-format the code a little so that your code is readable without having to scroll to the right."}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 1, "last_activity_date": 1488525813, "last_edit_date": 1495542724, "creation_date": 1488236493, "answer_id": 42497378, "question_id": 42115586, "link": "https://stackoverflow.com/questions/42115586/how-to-add-a-hover-effect-to-a-gtktreeview-cell/42497378#42497378", "title": "How to add a hover effect to a GtkTreeView cell", "body": "<p>There are quite a few ways to accomplish the task. A few examples follow, separated by horizontal lines.</p>\n\n<hr>\n\n<p>The simplest, and in some ways the best, option is to simply change the mouse cursor to a finger (same as the mouse cursor you see in a browser when pointing to a link) within the GtkTreeView.</p>\n\n<p>Let's say <code>GtkTreeView *view</code> is the view we're interested in. <strong>After</strong> you have called <code>gtk_widget_show_all(window);</code>, you can call</p>\n\n<pre><code>GdkWindow  *win = gtk_tree_view_get_bin_window(GTK_TREE_VIEW(view));\nGdkDisplay *disp = gdk_window_get_display(win);\ngdk_window_set_cursor(win, gdk_cursor_new_from_name(disp, \"pointer\"));\n</code></pre>\n\n<p>With this, the mouse pointer will be a finger for all rows in the view, excluding the header row.</p>\n\n<p>The set of cursor names you can use (instead of <code>\"pointer\"</code> above) is listed <a href=\"https://developer.gnome.org/gdk3/stable/gdk3-Cursors.html#gdk-cursor-new-from-name\" rel=\"nofollow noreferrer\">here</a> in the GDK3 documentation.</p>\n\n<p>The downside is that if you have empty rows in the tree view, or separator rows, the mouse pointer will still look like a finger for those.</p>\n\n<hr>\n\n<p>You can override the hover color by applying an application-specific CSS hover color, say</p>\n\n<pre><code>GtkTreeView:hover {\n    color: #ff0000;\n}\n</code></pre>\n\n<p>with e.g.</p>\n\n<pre><code>GtkCssProvider *css_provider;\ncss_provider = gtk_css_provider_new();\nif (gtk_css_provider_load_from_data(css_provider, \n            \"GtkTreeView:hover {\\n\"\n            \"    color: #ff0000;\\n\"\n            \"}\\n\"\n            \"\", -1, NULL))\n    gtk_style_context_add_provider_for_screen(gdk_screen_get_default(),\n                GTK_STYLE_PROVIDER(css_provider),\n                GTK_STYLE_PROVIDER_PRIORITY_APPLICATION);\ng_object_unref(css_provider);\n</code></pre>\n\n<p>after creating your main window. (Of course, you can include all application-specific CSS overrides in the CSS snippet.)</p>\n\n<p>However, on gtk+ 3.18.9 at least, the renderer does not seem to support <code>text-decoration</code> or <code>font</code> CSS attributes here. (The GtkCssProvider does not seem to support <code>cursor</code> attribute at all, in case you're wondering.)</p>\n\n<p>Also, since this essentially overrides the user theme, and there are a number of possible themes a Gtk+ user might be using, changing the color this way is unlikely to look good in all themes.</p>\n\n<hr>\n\n<p>If your <code>GtkTreeView *view;</code> consists of clickable rows, and you don't need the selection for anything (that is, you don't have a separate button or something that causes an action to be applied to all the selected rows in the GtkTreeView), then you can simply set the selection to follow the mouse cursor:</p>\n\n<pre><code>gtk_tree_view_set_hover_selection(view, TRUE);\n</code></pre>\n\n<p>this causes the row you hover over to be selected, and therefore also highlighted.  You probably also want to limit the selection to one row at a time:</p>\n\n<pre><code>gtk_tree_selection_set_mode(gtk_tree_view_get_selection(view),\n                            GTK_SELECTION_SINGLE);\n</code></pre>\n\n<hr>\n\n<p>As <a href=\"https://stackoverflow.com/a/42478627/1475978\">Herbalist already mentioned</a>, you can create a custom GtkCellRendererText derivative, which changes the <code>PangoUnderline underline</code> property depending on whether the text cell being rendered is also prelit (hovered over) or not:</p>\n\n<pre><code>#include &lt;gtk/gtk.h&gt;\n\n#define CUSTOM_TYPE_CELL_RENDERER_TEXT           (custom_cell_renderer_text_get_type())\n#define CUSTOM_CELL_RENDERER_TEXT(obj)           (G_TYPE_CHECK_INSTANCE_CAST((obj), CUSTOM_TYPE_CELL_RENDERER_TEXT, CustomCellRendererText))\n#define CUSTOM_CELL_RENDERER_TEXT_CLASS(cls)     (G_TYPE_CHECK_CLASS_CAST((cls),    CUSTOM_TYPE_CELL_RENDERER_TEXT, CustomCellRendererTextClass))\n#define CUSTOM_IS_CELL_RENDERER_TEXT(obj)        (G_TYPE_CHECK_INSTANCE_TYPE((obj), CUSTOM_TYPE_CELL_RENDERER_TEXT))\n#define CUSTOM_IS_CELL_RENDERER_TEXT_CLASS(cls)  (G_TYPE_CHECK_CLASS_TYPE((cls),    CUSTOM_TYPE_CELL_RENDERER_TEXT))\n#define CUSTOM_CELL_RENDERER_TEXT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS((obj),  CUSTOM_TYPE_CELL_RENDERER_TEXT, CustomCellRendererTextClass))\n\nGType  custom_cell_renderer_text_get_type(void) G_GNUC_CONST;\n\ntypedef struct {\n    GtkCellRendererText  renderer;\n} CustomCellRendererText;\n\ntypedef struct {\n    GtkCellRendererTextClass  parent_class;\n} CustomCellRendererTextClass;\n\nG_DEFINE_TYPE(CustomCellRendererText, custom_cell_renderer_text, GTK_TYPE_CELL_RENDERER_TEXT);\n\nvoid custom_cell_renderer_text_render(GtkCellRenderer *cell,\n                                      cairo_t *cr,\n                                      GtkWidget *widget,\n                                      const GdkRectangle *backarea,\n                                      const GdkRectangle *cellarea,\n                                      GtkCellRendererState state)\n{\n    if (state &amp; GTK_CELL_RENDERER_PRELIT) {\n        const PangoUnderline prelit = PANGO_UNDERLINE_SINGLE;\n        PangoUnderline curr;\n        g_object_get(cell, \"underline\", &amp;curr, NULL);\n        g_object_set(cell, \"underline\", prelit, NULL);\n        ((GtkCellRendererClass *)custom_cell_renderer_text_parent_class)-&gt;render(cell, cr, widget, backarea, cellarea, state);\n        g_object_set(cell, \"underline\", curr, NULL);\n    } else\n        ((GtkCellRendererClass *)custom_cell_renderer_text_parent_class)-&gt;render(cell, cr, widget, backarea, cellarea, state);\n}\n\nvoid custom_cell_renderer_text_class_init(CustomCellRendererTextClass *cls)\n{\n    ((GtkCellRendererClass *)cls)-&gt;render = custom_cell_renderer_text_render;\n    return;\n}\n\nvoid custom_cell_renderer_text_init(CustomCellRendererText *renderer)\n{\n    return;\n}\n\nGtkCellRenderer *custom_cell_renderer_text_new(void)\n{\n    return g_object_new(CUSTOM_TYPE_CELL_RENDERER_TEXT, NULL);\n}\n</code></pre>\n\n<p>If you then replace your <code>gtk_cell_render_text_new()</code> with <code>custom_cell_render_text_new()</code> (and change <code>GtkCellRenderText *</code> to <code>CustomCellRenderText *</code>) in your GtkTreeView code, the row you hover on in the GtkTreeView will become underlined.</p>\n\n<p>Note that all cells in the row you hover over will be highlighted, not just the cell/column you hover over. This is because in a GtkTreeView, the row (or index) is the unit being manipulated (rather than a specific cell on a specific column).</p>\n\n<p>If you use the above renderer only for some columns in your GtkTreeView, the text in those columns will get underlined even when the mouse hovers over some other column on that row.</p>\n\n<p>Also note that if you don't want all rows to indicate clickability, you can add a third column in your data model -- name <code>\"sensitive\"</code>, type <code>G_TYPE_BOOLEAN</code> for gboolean type; value <code>TRUE</code> if the row is clickable, <code>FALSE</code> if the row is non-clickable -- and change the <code>if</code> clause in <code>custom_cell_renderer_text_render()</code> to</p>\n\n<pre><code>    const GtkStateFlags  flags = gtk_cell_renderer_get_state(cell, widget, state);\n    if ((state &amp; GTK_CELL_RENDERER_PRELIT) &amp;&amp;\n       !(flags &amp; GTK_STATE_FLAG_INSENSITIVE)) {\n</code></pre>\n\n<p>Gtk+ will render rows with <code>TRUE</code> normally, and rows with <code>FALSE</code> as separators or disabled text, because the column names in the model are automatically associated with the GtkCellRenderer properties of the same name.</p>\n"}], "owner": {"reputation": 9778, "user_id": 474034, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zKYWU.jpg?s=128&g=1", "display_name": "lanoxx", "link": "https://stackoverflow.com/users/474034/lanoxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "accepted_answer_id": 42497378, "answer_count": 2, "score": 4, "last_activity_date": 1488525813, "creation_date": 1486563536, "question_id": 42115586, "link": "https://stackoverflow.com/questions/42115586/how-to-add-a-hover-effect-to-a-gtktreeview-cell", "title": "How to add a hover effect to a GtkTreeView cell", "body": "<p>I have a <code>GtkTreeView</code> with two columns of type text (e.g. <code>G_TYPE_STRING</code>) and I am using <code>GtkCellRendererText</code> to render the column.</p>\n\n<p>Is there any why that I can react when the mouse enters and leaves a certain cell and then hover or highlight the cell.</p>\n\n<p>For example I would like to underline the text in the cell renderer, when the mouse enters it, in order to give a visual clue that the cell can be clicked to perform an action.</p>\n"}, {"tags": ["c", "multidimensional-array"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 5, "creation_date": 1486563638, "post_id": 42115568, "comment_id": 71399706, "body": "It is not - that is hexadecimal and the difference is 8."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1486563715, "post_id": 42115568, "comment_id": 71399771, "body": "... <code>8 9 A B C D E F 0</code>...."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486563957, "post_id": 42115568, "comment_id": 71399949, "body": "Please always give <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1486564822, "post_id": 42115568, "comment_id": 71400602, "body": "What is the relationship between the title of question and actual question?"}], "answers": [{"tags": [], "owner": {"reputation": 9554, "user_id": 3306465, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MAduK.png?s=128&g=1", "display_name": "Igal S.", "link": "https://stackoverflow.com/users/3306465/igal-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1486563666, "creation_date": 1486563666, "answer_id": 42115642, "question_id": 42115568, "link": "https://stackoverflow.com/questions/42115568/c-2d-dynamic-array-in-memory/42115642#42115642", "title": "C 2d dynamic array in memory", "body": "<p>The numbers are hexadecimal</p>\n\n<blockquote>\n  <p>0x20 - 0x18 = 8</p>\n</blockquote>\n"}], "owner": {"reputation": 463, "user_id": 4856421, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ad8fca477ae68112693cf4e6880aa504?s=128&d=identicon&r=PG&f=1", "display_name": "Mati", "link": "https://stackoverflow.com/users/4856421/mati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1486572585, "answer_count": 1, "score": -6, "last_activity_date": 1486563906, "creation_date": 1486563496, "last_edit_date": 1486563906, "question_id": 42115568, "link": "https://stackoverflow.com/questions/42115568/c-2d-dynamic-array-in-memory", "closed_reason": "Not suitable for this site", "title": "C 2d dynamic array in memory", "body": "<p>I am trying to create 2d dynamic array.   </p>\n\n<p><strong>My Code</strong>  </p>\n\n<pre><code>char **tab;\ntab = malloc(3 * sizeof(char *));\nprintf(\"%zu\\n\", sizeof(char *));\nprintf(\"%p\\n\", tab);\ntab++;\nprintf(\"%p\\n\", tab);\ntab++;\nprintf(\"%p\\n\", tab);\nreturn  0;\n</code></pre>\n\n<p>It gives me following Output.</p>\n\n<pre><code>8\n0xfcd010\n0xfcd018\n0xfcd020\n</code></pre>\n\n<p>My question is why difference between 2nd and 3rd element is only <code>2</code>?</p>\n"}, {"tags": ["linux", "linux-kernel", "c", "raspbian", "kernel-module"], "comments": [{"owner": {"reputation": 2231, "user_id": 1624069, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e727285b022febd503457b8fbb5316e3?s=128&d=identicon&r=PG", "display_name": "Frank Thomas", "link": "https://stackoverflow.com/users/1624069/frank-thomas"}, "edited": false, "score": 0, "creation_date": 1486562727, "post_id": 42139275, "comment_id": 71444684, "body": "I&#39;m afraid that this question is outside the scope of this particular site, but may do better on Stackoverflow or Unix.stackexchange."}, {"owner": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "reply_to_user": {"reputation": 2231, "user_id": 1624069, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e727285b022febd503457b8fbb5316e3?s=128&d=identicon&r=PG", "display_name": "Frank Thomas", "link": "https://stackoverflow.com/users/1624069/frank-thomas"}, "edited": false, "score": 0, "creation_date": 1486563218, "post_id": 42139275, "comment_id": 71444685, "body": "Oh, that actually answered my question. Thank you. :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1486650842, "post_id": 42139275, "comment_id": 71444945, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it <b>in the question itself</b>. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}, {"owner": {"reputation": 12261, "user_id": 3866447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52ieQ.jpg?s=128&g=1", "display_name": "Sam Protsenko", "link": "https://stackoverflow.com/users/3866447/sam-protsenko"}, "edited": false, "score": 0, "creation_date": 1486684770, "post_id": 42139275, "comment_id": 71464656, "body": "@WidiWidiyanto See <a href=\"http://superuser.com/questions/437786/kernel-data-types-u8-u16-u32-u64-not-resolved\">this</a>, <a href=\"http://stackoverflow.com/questions/30896489/why-is-u8-u16-u32-u64-used-instead-of-unsigned-int-in-kernel-programming\">this</a> and read <a href=\"http://static.lwn.net/images/pdf/LDD3/ch11.pdf\" rel=\"nofollow noreferrer\">chapter 11</a> of LDD3. You&#39;ll find your answers there."}, {"owner": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1486980052, "post_id": 42139275, "comment_id": 71563932, "body": "@Olaf I think I&#39;ve explained it quite clearly. I want to try <code>static u8 myByte = &#39;X&#39;;</code> but it only recognized when I use <code>static uint8_t myByte = &#39;X&#39;</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1486991643, "post_id": 42139275, "comment_id": 71570999, "body": "@WidiWidiyanto: That was not the only part of the citatition. In case you were not able to check out the site-FAQ, here is the link <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"}, {"owner": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1486992527, "post_id": 42139275, "comment_id": 71571571, "body": "@Olaf Hmm.. After I read out the FAQs I&#39;m still not sure what&#39;s wrong with my question. It&#39;s silly, I know. Would you mind pointing it out if you have the time? :)"}, {"owner": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "edited": false, "score": 0, "creation_date": 1486997479, "post_id": 42139275, "comment_id": 71575019, "body": "Oh, I didn&#39;t read your comment correctly. I should&#39;ve written the headers part. Thanks. :)"}], "answers": [{"comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 1, "creation_date": 1486678547, "post_id": 42139508, "comment_id": 71462213, "body": "It&#39;s not fully correct answer. While it&#39;s indeed a non-standard type, it&#39;s widely used in Linux kernel. I guess the problem not in the type per se, but rather with its use as a module parameter. In any case there is no code provided to see what author actually did."}, {"owner": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "edited": false, "score": 0, "creation_date": 1486980459, "post_id": 42139508, "comment_id": 71564178, "body": "I use the code in <a href=\"http://www.tldp.org/LDP/lkmpg/2.6/html/x323.html#AEN345\" rel=\"nofollow noreferrer\">chapter-5.c</a>. I want to add static u8 myByte=&#39;X&#39; like in the older version <a href=\"http://www.tldp.org/LDP/lkmpg/2.4/html/x354.htm\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 2, "creation_date": 1486991569, "post_id": 42139508, "comment_id": 71570947, "body": "@0andriy: The answer is correct. <code>u8</code> is not a standard type. It&#39;s use in the kernel is a legacy from before C99 where there were no fixed-width types in the standard. The Linux kernel does not set what is standard or not. However, for the kernel one should stick with these remains, but for other, new projects one should use the standard types."}, {"owner": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "edited": false, "score": 0, "creation_date": 1486992781, "post_id": 42139508, "comment_id": 71571754, "body": "So I better off using the standard form (uint8_t) rather than u8 then. Thank you very much. :)"}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "edited": false, "score": 0, "creation_date": 1487026974, "post_id": 42139508, "comment_id": 71591619, "body": "@WidiWidiyanto, no. In kernel better to use <code>u8</code>, <code>u16</code> and so on. If it&#39;s exported to user space the <code>__u8</code>, <code>__u16</code> and so on <b>must</b> be used."}, {"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1487027527, "post_id": 42139508, "comment_id": 71591809, "body": "@Olaf, I stand corrected. Indeed for  new code <code>uint8_t</code> and a such <b>can</b> be used (it&#39;s not mandatory as well!), but for existing the style should be preserved. And for user space it must be specific types. (I&#39;m talking about style in Linux kernel exclusively)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1487027963, "post_id": 42139508, "comment_id": 71591925, "body": "@0andriy: Actually the standard types should be used in user-code definitively. Whether they can be used in the Linux kernel depends on how the legacy types are defined. If they are just <code>typedef</code>s now, using the standard types is fine. Otherwise there can be subtle differences, e.g. for <code>int32_t</code>, depending on the platform. For other usages like bare-metal embedded, one should not even consider using some homebrew-stuff."}], "tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": true, "score": 4, "last_activity_date": 1486653072, "last_edit_date": 1486653072, "creation_date": 1486651090, "answer_id": 42139508, "question_id": 42139275, "link": "https://stackoverflow.com/questions/42139275/uint8-t-is-recognized-as-a-data-type-but-u8-isnt-why/42139508#42139508", "title": "uint8_t is recognized as a data-type but u8 isn&#39;t. Why?", "body": "<p>Because <code>u8</code> is not a standard type, while <code>uint8_t</code> is (typedef'd in C99 and later <code>&lt;stdint.h&gt;</code>). If you want to use <code>u8</code>, include a header with an appropriate typedef, or typedef it in your code.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1486650450, "question_id": 1176624}, "owner": {"reputation": 145, "user_id": 6932772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f0a870df1144e5426360324256061fe?s=128&d=identicon&r=PG&f=1", "display_name": "Widi Widiyanto", "link": "https://stackoverflow.com/users/6932772/widi-widiyanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 1, "accepted_answer_id": 42139508, "answer_count": 1, "score": 1, "last_activity_date": 1486997429, "creation_date": 1486562443, "last_edit_date": 1486997429, "question_id": 42139275, "link": "https://stackoverflow.com/questions/42139275/uint8-t-is-recognized-as-a-data-type-but-u8-isnt-why", "title": "uint8_t is recognized as a data-type but u8 isn&#39;t. Why?", "body": "<p>I'm learning to create kernel modules on Raspbian Jessie based on <a href=\"http://www.tldp.org/LDP/lkmpg/2.6/html/index.html\" rel=\"nofollow noreferrer\">The Linux Kernel Module Programming Guide</a></p>\n\n<p>Currently I'm on <a href=\"http://www.tldp.org/LDP/lkmpg/2.6/html/x323.html#AEN345\" rel=\"nofollow noreferrer\">hello-5.c</a> part. I tried to add <code>static u8 myByte = 'X';</code> but <code>u8</code> is not recognized. Then I changed <code>u8</code> with <code>uint8_t</code> which is the same thing AFAIK and <code>uint8_t</code> is recognized as a data-type. </p>\n\n<p>The older version of the tutorial <a href=\"http://www.tldp.org/LDP/lkmpg/2.4/html/x354.htm\" rel=\"nofollow noreferrer\">here</a> stated <code>static u8 myByte = 'X';</code>, so I want to reuse it with the newer tutorial.</p>\n\n<p>The older tutorial included these:</p>\n\n<pre><code>#define MODULE\n#define LINUX\n#define __KERNEL__\n\n#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/init.h&gt;\n</code></pre>\n\n<p>While the newer tutorial included these;</p>\n\n<pre><code>#include &lt;linux/module.h&gt;\n#include &lt;linux/moduleparam.h&gt;\n#include &lt;linux/kernel.h&gt;\n#include &lt;linux/init.h&gt;\n#include &lt;linux/stat.h&gt;\n</code></pre>\n\n<p>I've tried using the old one, but the <code>define</code> part generates errors, so I used the newer tutorial.</p>\n\n<p>So, why <code>uint8_t</code> can be recognized while <code>u8</code> cannot in the newer version?</p>\n"}, {"tags": ["c", "arrays", "algorithm"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1486561681, "post_id": 42114830, "comment_id": 71398221, "body": "You can&#39;t resize a VLA."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1486561707, "post_id": 42114830, "comment_id": 71398237, "body": "What do you mean with &quot;remove&quot;?"}, {"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1486561733, "post_id": 42114830, "comment_id": 71398262, "body": "As such one cannot remove elements from an array but one can replace existing elements. One approach could be to have a temporary array, copy all elements except the one to  be deleted from the original array. And then copy back the temporary array to the original array."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486562960, "post_id": 42114830, "comment_id": 71399212, "body": "@Zinov Apart from the title, that question is pretty messy. Not a good canonical duplicate, in my opinion."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486563068, "post_id": 42114830, "comment_id": 71399296, "body": "Anyway, if you need to frequently add/delete items, you would use a linked list instead of an array. That is why linked lists exist."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486563146, "post_id": 42114830, "comment_id": 71399355, "body": "Please see the SomeProgrammerDude answer , it will give you more insight and without testing never mark answer as best answer"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1486561697, "creation_date": 1486561697, "answer_id": 42114907, "question_id": 42114830, "link": "https://stackoverflow.com/questions/42114830/array-remove-all-elements-with-value-input-by-user/42114907#42114907", "title": "Array remove all elements with value input by user", "body": "<p>Technically you <em>can't</em> remove elements from an array. An array have a fixed size, once it is set it can not be changed.</p>\n\n<p>Possible solutions are to use a special value to mark \"empty\" elements in the array. Or to copy the non-removed data to another array. Or to keep track of the current \"size\" (number of \"active\" elements) of the array and move the elements around so they are always at the \"front\" of the array.</p>\n"}, {"comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1486563167, "post_id": 42115243, "comment_id": 71399368, "body": "....but the question is tagged <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a> not <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a>...."}, {"owner": {"reputation": 64, "user_id": 7531249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dbc9b0e8a0fe7265c957b636c5e030b?s=128&d=identicon&r=PG&f=1", "display_name": "EgorBr", "link": "https://stackoverflow.com/users/7531249/egorbr"}, "reply_to_user": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1486563696, "post_id": 42115243, "comment_id": 71399757, "body": "Thank you, I used &#39;new&#39; by habit. Fixed."}], "tags": [], "owner": {"reputation": 64, "user_id": 7531249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dbc9b0e8a0fe7265c957b636c5e030b?s=128&d=identicon&r=PG&f=1", "display_name": "EgorBr", "link": "https://stackoverflow.com/users/7531249/egorbr"}, "is_accepted": true, "score": 1, "last_activity_date": 1486563552, "last_edit_date": 1486563552, "creation_date": 1486562661, "answer_id": 42115243, "question_id": 42114830, "link": "https://stackoverflow.com/questions/42114830/array-remove-all-elements-with-value-input-by-user/42115243#42115243", "title": "Array remove all elements with value input by user", "body": "<p>Here is the most straightforward solution:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n  const int size = 8;\n  int arr[size] = { 12, 10, 7, 43, 12, 12, 26, 83 };\n  int input;\n  int result_size = 0;\n  scanf(\"%d\", &amp;input);\n\n  // Find out size of new array\n  for (int i = 0; i &lt; size; i++)\n  {\n    if (arr[i] != input)\n    {\n      result_size++;\n    }\n  }\n\n  // Create new array\n  int *result = (int*)malloc(result_size * sizeof(int));\n  if (!result)\n  {\n    return 1;\n  }\n\n  // Fill new array\n  int j = 0;\n  for (int i = 0; i &lt;size; i++)\n  {\n    if (arr[i] != input)\n    {\n      result[j++] = arr[i];\n    }\n  }\n\n  for (int i = 0; i &lt; result_size; i++)\n  {\n    printf(\"%d \", result[i]);\n  }\n\n  free(result);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6762043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad93f4730130e96244b476ffa41d870a?s=128&d=identicon&r=PG&f=1", "display_name": "Dimanche_kh", "link": "https://stackoverflow.com/users/6762043/dimanche-kh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "closed_date": 1486562887, "accepted_answer_id": 42115243, "answer_count": 2, "score": 0, "last_activity_date": 1486563552, "creation_date": 1486561517, "question_id": 42114830, "link": "https://stackoverflow.com/questions/42114830/array-remove-all-elements-with-value-input-by-user", "closed_reason": "Duplicate", "title": "Array remove all elements with value input by user", "body": "<p>I have the following arrays, what's the algorithm to remove all element which is input by user?</p>\n\n<pre><code>eg.int arr[size]={12,10,7,43,12,12,26,83};\n</code></pre>\n\n<p>if i want to delete 12 \nso the output should look like :</p>\n\n<pre><code>{10,7,43,26,83}\n</code></pre>\n"}, {"tags": ["c", "ssl", "openssl", "xmpp", "libstrophe"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1486563289, "post_id": 42114829, "comment_id": 71399462, "body": "Also see <a href=\"https://wiki.openssl.org/index.php/SSL/TLS_Client\" rel=\"nofollow noreferrer\">SSL/TLS Client</a> and <a href=\"https://wiki.openssl.org/index.php/hostname_validation\" rel=\"nofollow noreferrer\">Hostname Validation</a> on the OpenSSL wiki."}], "owner": {"reputation": 2832, "user_id": 1410376, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/3aMQc.jpg?s=128&g=1", "display_name": "Anis_Stack", "link": "https://stackoverflow.com/users/1410376/anis-stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 991, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1486567941, "creation_date": 1486561516, "last_edit_date": 1486567941, "question_id": 42114829, "link": "https://stackoverflow.com/questions/42114829/check-trusted-certificate-with-openssl", "title": "check trusted certificate with openssl", "body": "<p>I developp a xmpp client using libmesode(fork libstrophe).\nI want to secure the authentication with certification.\nthe server side has a certificate server.pem\nthe client side has its certificate client.pem</p>\n\n<p>in lidmesode the functions used to check the certificate: </p>\n\n<pre><code>tls_t *tls_new(xmpp_ctx_t *ctx, sock_t sock, xmpp_certfail_handler certfail_handler, char *tls_cert_path)\n{\n    _xmppctx = ctx;\n    _certfail_handler = certfail_handler;\n    _cert_handled = 0;\n    _last_cb_res = 0;\n    tls_t *tls = xmpp_alloc(ctx, sizeof(*tls));\n\n    if (tls) {\n        int ret;\n        memset(tls, 0, sizeof(*tls));\n\n        tls-&gt;ctx = ctx;\n        tls-&gt;sock = sock;\n        tls-&gt;ssl_ctx = SSL_CTX_new(SSLv23_client_method());\n        if (tls-&gt;ssl_ctx == NULL)\n            goto err;\n\n        SSL_CTX_set_client_cert_cb(tls-&gt;ssl_ctx, NULL);\n        SSL_CTX_set_mode(tls-&gt;ssl_ctx, SSL_MODE_ENABLE_PARTIAL_WRITE);\n        SSL_CTX_set_verify(tls-&gt;ssl_ctx, SSL_VERIFY_PEER, verify_callback);\n        if (tls_cert_path) {\n            SSL_CTX_load_verify_locations(tls-&gt;ssl_ctx, NULL, tls_cert_path);\n            //SSL_CTX_use_certificate_file(tls-&gt;ssl_ctx, certif, SSL_FILETYPE_PEM);\n        }\n        tls-&gt;ssl = SSL_new(tls-&gt;ssl_ctx);\n        if (tls-&gt;ssl == NULL)\n            goto err_free_ctx;\n\n        ret = SSL_set_fd(tls-&gt;ssl, sock);\n        if (ret &lt;= 0)\n            goto err_free_ssl;\n    }\n\n    return tls;\n\nerr_free_ssl:\n    SSL_free(tls-&gt;ssl);\nerr_free_ctx:\n    SSL_CTX_free(tls-&gt;ssl_ctx);\nerr:\n    xmpp_free(ctx, tls);\n    _tls_log_error(ctx);\n    return NULL;\n} \n\nstatic int\nverify_callback(int preverify_ok, X509_STORE_CTX *x509_ctx)\n{\n    const STACK_OF(X509) *sk = X509_STORE_CTX_get1_chain(x509_ctx);\n    int slen = sk_X509_num(sk);\n    unsigned i;\n    X509 *certsk;\n    xmpp_debug(_xmppctx, \"TLS\", \"STACK\");\n    for(i=0; i&lt;slen; i++) {\n        certsk = sk_X509_value(sk, i);\n        _print_certificate(certsk);\n    }\n    xmpp_debug(_xmppctx, \"TLS\", \"ENDSTACK\");\n\n    if (preverify_ok) {\n        sk_X509_pop_free(sk, X509_free);\n        printf(\"=========&gt; 1\\n\");\n        return 1;\n    } else if (_cert_handled) {\n        if (_last_cb_res == 0) {\n            X509_STORE_CTX_set_error(x509_ctx, X509_V_ERR_APPLICATION_VERIFICATION);\n        }\n        sk_X509_pop_free(sk, X509_free);\n        return _last_cb_res;\n    } else {\n        int err = X509_STORE_CTX_get_error(x509_ctx);\n        const char *errstr = X509_verify_cert_error_string(err);\n        xmpp_debug(_xmppctx, \"TLS\", \"ERROR: %s\", errstr);\n\n        X509 *user_cert = sk_X509_value(sk, 0);\n        struct _tlscert_t *tlscert = _x509_to_tlscert(_xmppctx, user_cert);\n        int cb_res = 0;\n        if (_certfail_handler) {\n            cb_res = _certfail_handler(tlscert, errstr);\n        }\n        xmpp_conn_free_tlscert(_xmppctx, tlscert);\n\n        _cert_handled = 1;\n        _last_cb_res = cb_res;\n\n        if (cb_res == 0) {\n            X509_STORE_CTX_set_error(x509_ctx, X509_V_ERR_APPLICATION_VERIFICATION);\n        }\n\n        sk_X509_pop_free(sk, X509_free);\n        return cb_res;\n    }\n}\n</code></pre>\n\n<p>when the xmpp client connect to the ejabbed xmpp server with TLS, openssl check the server certificate that is self signed but continue to connect !!.\nthe second thing is: the openssl doesn't check the server certificate with the client certificate to check of the server certificate is trusted or no.</p>\n\n<p>is openssl do these check ?</p>\n\n<p>1) disconnect if self signed certificate </p>\n\n<p>2) check if certificate is trusted.</p>\n\n<p>the following capture show that the server send the certificate\nand then the client send the key.</p>\n\n<p>is this key should be taken from client certification !</p>\n\n<p><a href=\"https://i.stack.imgur.com/ncG2d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ncG2d.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "compression", "lz4"], "answers": [{"comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1488685661, "post_id": 42114763, "comment_id": 72338789, "body": "Sir, I wish to talk to you about something, Can We Chat?"}], "tags": [], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "is_accepted": false, "score": 4, "last_activity_date": 1486561350, "last_edit_date": 1495542712, "creation_date": 1486561350, "answer_id": 42114763, "question_id": 42114762, "link": "https://stackoverflow.com/questions/42114762/how-to-know-when-the-output-buffer-is-too-small-when-decompressing-with-lz4/42114763#42114763", "title": "How to know when the output buffer is too small when decompressing with LZ4?", "body": "<p>There is an <a href=\"https://github.com/lz4/lz4/issues/156\" rel=\"nofollow noreferrer\">issue opened</a> about this, and for now there is no public API to distinguish between errors.</p>\n\n<hr>\n\n<p>As a <strong>heuristic</strong>, looking at <a href=\"https://github.com/lz4/lz4/blob/dev/lib/lz4.c#L1239\" rel=\"nofollow noreferrer\">the code</a> shows the possible return values:</p>\n\n<blockquote>\n<pre><code>    /* end of decoding */\n    if (endOnInput)\n       return (int) (((char*)op)-dest);     /* Nb of output bytes decoded */\n    else\n       return (int) (((const char*)ip)-source);   /* Nb of input bytes read */\n\n    /* Overflow error detected */\n_output_error:\n    return (int) (-(((const char*)ip)-source))-1;\n</code></pre>\n</blockquote>\n\n<p>So there are only 2 cases:</p>\n\n<ul>\n<li>either the decoding was successful, and you get a positive result (whose signification depends on whether you are in full or partial mode)</li>\n<li>or the decoding was unsuccessful and you get a negative result</li>\n</ul>\n\n<p>In the case of the negative result, the value is <code>-(position_in_input + 1)</code>.</p>\n\n<p>This suggests that guessing whether the destination buffer was too small can be accomplished with a good likelihood of success by retrying with a (much) bigger buffer, and checking whether the failure occurs in the same position:</p>\n\n<ul>\n<li>if the second decompression attempt succeeds, you're good!</li>\n<li>if the second decompression attempt fails at the same position, then the issue is likely with the input,</li>\n<li>otherwise, you have to try with a bigger buffer again.</li>\n</ul>\n\n<p>Or otherwise said, as long as the result differs, try again, otherwise, there's your result.</p>\n\n<hr>\n\n<p><strong>Limitation</strong></p>\n\n<p>The input pointer does not necessarily advance one byte at a time, it may advance <code>length</code> bytes in two places where <code>length</code> is read from the input and unbounded.</p>\n\n<p>If decoding fails because the output buffer was too small, and the new output buffer is still too small for <code>length</code>, then decoding will fail in the same position even though the input is not (necessarily) malformed.</p>\n\n<p>If false positives are an issue, then one may attempt to:</p>\n\n<ul>\n<li>decode the <code>length</code>, by checking the input stream at the position returned,</li>\n<li>simply allocate <code>255 * &lt;input size&gt; - 2526</code> as per <a href=\"https://stackoverflow.com/a/25755758/147192\">Mark Adler's answer</a>, which is reasonable for small inputs.</li>\n</ul>\n"}], "owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1426, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1486561350, "creation_date": 1486561350, "question_id": 42114762, "link": "https://stackoverflow.com/questions/42114762/how-to-know-when-the-output-buffer-is-too-small-when-decompressing-with-lz4", "title": "How to know when the output buffer is too small when decompressing with LZ4?", "body": "<p>The documentation of <a href=\"https://github.com/lz4/lz4/blob/dev/lib/lz4.h#L133\" rel=\"nofollow noreferrer\"><code>LZ4_decompress_safe</code></a> says:</p>\n\n<blockquote>\n<pre><code>/*! LZ4_decompress_safe() :\n    compressedSize : is the precise full size of the compressed block.\n    maxDecompressedSize : is the size of destination buffer, which must be already allocated.\n    return : the number of bytes decompressed into destination buffer (necessarily &lt;= maxDecompressedSize)\n             If destination buffer is not large enough, decoding will stop and output an error code (&lt;0).\n             If the source stream is detected malformed, the function will stop decoding and return a negative result.\n             This function is protected against buffer overflow exploits, including malicious data packets.\n             It never writes outside output buffer, nor reads outside input buffer.\n*/\nLZ4LIB_API int LZ4_decompress_safe (const char* source, char* dest, int compressedSize, int maxDecompressedSize);\n</code></pre>\n</blockquote>\n\n<p>But doesn't specify how to distinguish whether the issue is with a too small destination buffer or from malformed input/bad combination of parameters/...</p>\n\n<p>In the case where I don't know what the target decompressed size is, how can I know whether I should retry with a bigger buffer, or not?</p>\n"}, {"tags": ["c", "unsigned-integer"], "comments": [{"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 4, "creation_date": 1486560697, "post_id": 42114492, "comment_id": 71397538, "body": "<code>unsigned int</code> is in range [0, 2^32-1]."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1486562290, "post_id": 42114492, "comment_id": 71398741, "body": "What is your platform?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 1, "creation_date": 1486563312, "post_id": 42114492, "comment_id": 71399477, "body": "@YuriyIvaskevych Yeah so what? The problem isn&#39;t related to unsigned int, but to the rules for which type the compiler picks for an integer constant. A better compiler warning would have been: &quot;warning: implicit conversion from long int to unsigned int&quot;."}, {"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486563471, "post_id": 42114492, "comment_id": 71399601, "body": "@Lundin &gt; &quot; I thought as long as the number is between 0 and 2^32&quot;. I just pointed that out, maybe OP would try to strore there 2^32 and encounter an overflow."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1486563710, "post_id": 42114492, "comment_id": 71399769, "body": "Which compilation options are you using with which compiler?  It looks like they&#39;re fussy (which is good!).  Basically, add a U to the end of the number and you should be OK."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 1, "creation_date": 1486563718, "post_id": 42114492, "comment_id": 71399775, "body": "@YuriyIvaskevych <code>2^32 = 4.29*10^9</code>. The OP is trying to store a smaller number than that, <code>4.03*10^9</code>."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1486563826, "post_id": 42114492, "comment_id": 71399844, "body": "@Lundin - Yes, and it&#39;s even smaller than <code>2^32 - 1</code>, but the OP had a misconception about the range of 32 bit unsigned integers, and Yuriy pointed that out. Nothing wrong with that so long as it is a comment and not an attempt to answer the question."}, {"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486563853, "post_id": 42114492, "comment_id": 71399869, "body": "@Lundin I can see that, thanks. That&#39;s why I answered you previously &quot;would try&quot; meaning the future. I am sorry for my English if that is a reason."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1486566701, "post_id": 42114492, "comment_id": 71402025, "body": "@YuriyIvaskevych C does not specify &quot;<code>unsigned int</code> is in range [0, 2^32-1]&quot;, although that is commonly implmented.  <code>unsigned</code> is specified to have a range of <i>at least</i> [0-65535]."}, {"owner": {"reputation": 125, "user_id": 7500482, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d63a28fb75ae428ce1d69c5e1c72365f?s=128&d=identicon&r=PG&f=1", "display_name": "neko_studies_prog", "link": "https://stackoverflow.com/users/7500482/neko-studies-prog"}, "edited": false, "score": 0, "creation_date": 1486577754, "post_id": 42114492, "comment_id": 71409470, "body": "Right. I forgot it was actually 2^32 - 1..  It worked when I put &quot;u&quot; at the end of the number! Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1486563560, "post_id": 42114788, "comment_id": 71399658, "body": "Although good advise, this doesn&#39;t really answer the question. <code>uint32_t number = 4026658824;</code> would have given the very same diagnostic. To dodge the diagnostic by using stdint types, you would have to write <code>uint32_t number = UINT32_C(4026658824);</code>"}, {"owner": {"reputation": 2597, "user_id": 1389218, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/XZKfz.png?s=128&g=1", "display_name": "John U", "link": "https://stackoverflow.com/users/1389218/john-u"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486575580, "post_id": 42114788, "comment_id": 71408152, "body": "Hence &quot;In <b>addition to</b> the answers above...&quot;"}], "tags": [], "owner": {"reputation": 2597, "user_id": 1389218, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/XZKfz.png?s=128&g=1", "display_name": "John U", "link": "https://stackoverflow.com/users/1389218/john-u"}, "is_accepted": false, "score": 0, "last_activity_date": 1486561397, "creation_date": 1486561397, "answer_id": 42114788, "question_id": 42114492, "link": "https://stackoverflow.com/questions/42114492/assign-a-big-number-to-unsigned-int-in-c/42114788#42114788", "title": "Assign a big number to unsigned int in C", "body": "<p>In addition to the answers above, if you want a variable to definitely be a certain number of bits, use <a href=\"https://en.wikipedia.org/wiki/C_variable_types_and_declarations#Fixed-width_integer_types\" rel=\"nofollow noreferrer\">Fixed-width integer types</a>. Doing embedded work we have to be careful of this (CPU may only be 8 or 16-bit) so pretty much always use them for everything.</p>\n"}, {"comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486563680, "post_id": 42115024, "comment_id": 71399745, "body": "I wish there was a way to make sure the type of the variable is identical to the type of the literal. GCC has <code>typeof</code> that you can wrap in a macro, but it&#39;s non-standard :(."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486564074, "post_id": 42115024, "comment_id": 71400032, "body": "@StoryTeller, better to choose the target type appropriately for the needs of your program, and to be sure to express the constant appropriately for the desired type.  The standard has specific <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.1p5\" rel=\"nofollow noreferrer\">rules for how the type of an integer constant is determined</a>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486564249, "post_id": 42115024, "comment_id": 71400168, "body": "@StoryTeller, and if the needs of the program are determined by the value of the constant, then C has explicit-width and minimum-width types.  For example, one might declare the variable as <code>uint_least32_t</code> (from <code>stdint.h</code>).  That does not change the need to express constants in a appropriate form."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1486564256, "post_id": 42115024, "comment_id": 71400177, "body": "@JohnBollinger - The rules don&#39;t protect you when you move to a platform where the sizes shift (thought unlikely today). Like P.P. pointed out, simply sticking a <code>u</code> there won&#39;t protect you either. <b>Deducing</b> the type correctly when the constant has meaning will make for more portable code (Well standard width integers not withstanding, as you added in your second comment, while I was typing this one)."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1486564400, "post_id": 42115024, "comment_id": 71400274, "body": "@StoryTeller Everything is possible in C if you throw enough evil macros on it!!! This isn&#39;t really a serious suggestion, but... the macro <code>#define UINT_DECLARE_INIT(name, bits, value) uint ## bits ##_t name = UINT ## bits ## _C (value)</code> used as <code>UINT_DECLARE_INIT(hello, 32, 4123456789);</code> will expand to <code>uint32_t hello = UINT32_C(4123456789);</code> which in turn expands to <code>uint32_t hello = (4123456789U);</code>. The variable type and the literal are now safely matched. Though of course it might just be wiser to use <code>UINT32_C</code> manually :)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486564580, "post_id": 42115024, "comment_id": 71400418, "body": "@Lundin - I am both intrigued and horrified by what you just wrote. And I now also understand why the standard makes  <code>uint_leastN_t</code> integers a required typedef :)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1486564782, "post_id": 42115024, "comment_id": 71400572, "body": "@StoryTeller The serious solution, in my opinion, would be to be careful with types as you go, always considering which type an integer constant will get. And then run static analysis on the code afterwards. If there&#39;s something static analysers is good at, it is whining about implicit integer conversions. For example any MISRA-C checker would have whined about the original code, if only to tell you to use an <code>u</code> suffix."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486564802, "post_id": 42115024, "comment_id": 71400586, "body": "@StoryTeller, supposing that you declare the type so that it is certain to be wide enough (e.g. by using an appropriate one of the <code>uint_leastN_t</code> types), appending a <code>U</code> to the value of the initialization constant is entirely sufficient to handle this case.  The resulting constant may be narrower than the type, but its value is sure to be representable in the type.  The compiler should not complain."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 125, "user_id": 7500482, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d63a28fb75ae428ce1d69c5e1c72365f?s=128&d=identicon&r=PG&f=1", "display_name": "neko_studies_prog", "link": "https://stackoverflow.com/users/7500482/neko-studies-prog"}, "edited": false, "score": 0, "creation_date": 1486584825, "post_id": 42115024, "comment_id": 71413522, "body": "@neko_studies_prog Detail: appending a suffix <code>u</code> is not casting.  It is just the syntax for an <i>integer constant</i>  that insures it will be a  <code>unsigned</code>, <code>unsigned long</code> or <code>unsigned long long</code>."}], "tags": [], "owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "is_accepted": false, "score": 5, "last_activity_date": 1486576411, "last_edit_date": 1486576411, "creation_date": 1486562041, "answer_id": 42115024, "question_id": 42114492, "link": "https://stackoverflow.com/questions/42114492/assign-a-big-number-to-unsigned-int-in-c/42115024#42115024", "title": "Assign a big number to unsigned int in C", "body": "<p>Type of decimal constant depends on the type in which it can be represented, per <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.4.4.1\" rel=\"nofollow noreferrer\">6.4.4.1 Integer constants</a>:</p>\n\n<blockquote>\n  <p>The type of an integer constant is the first of the corresponding list in which its value can be represented.</p>\n</blockquote>\n\n<p>(See the table in the link for how C language says the <em>actual</em> type of integer constants is deduced).</p>\n\n<p>Typically a signed int can't represent the value <code>4026658824</code>. So, <code>4026658824</code> probably has type <code>long int</code> or <code>long long int</code> on your system. If <code>unsigned int</code> can be represent <code>4026658824</code> then this is fine but your compiler is being cautious.</p>\n\n<p>You could use <code>u</code> or <code>U</code> suffix or cast it to <code>unsigned int</code>. The suffix <code>u</code> may not work if the integer constant has bigger value. For example, if <code>17179869184u</code> can't be represented by <code>unsigned int</code> then its type may be <code>unsigned long int</code> or <code>unsigned long long int</code> and you may still get diagnostics about it.</p>\n"}], "owner": {"reputation": 125, "user_id": 7500482, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d63a28fb75ae428ce1d69c5e1c72365f?s=128&d=identicon&r=PG&f=1", "display_name": "neko_studies_prog", "link": "https://stackoverflow.com/users/7500482/neko-studies-prog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1486576411, "creation_date": 1486560618, "last_edit_date": 1486561032, "question_id": 42114492, "link": "https://stackoverflow.com/questions/42114492/assign-a-big-number-to-unsigned-int-in-c", "title": "Assign a big number to unsigned int in C", "body": "<p>I am trying to assign a number to unsigned int, but it results in an error.\nI thought as long as the number is between 0 and 2^32, it should work.\nHere is my code.</p>\n\n<pre><code>unsigned int number = 4026658824;\n</code></pre>\n\n<p>However, I get this error.</p>\n\n<blockquote>\n  <p>error: constant promoted according to the 1999 ISO C standard</p>\n</blockquote>\n"}, {"tags": ["c++", "c", "winapi", "createprocess"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1486561056, "post_id": 42114446, "comment_id": 71397782, "body": "use <code>&#47;showIncludes</code> cl option for look, which files actually included. check that file, where <code>STARTUPINFO</code> is defined is included. look are this is defined in some <code>#if</code> block. check are you go in this block"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1486561457, "post_id": 42114446, "comment_id": 71398069, "body": "Read the MSDN page on <i><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686331(v=vs.85).aspx\" rel=\"nofollow noreferrer\">STARTUPINFO</a></i>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1486561571, "post_id": 42114446, "comment_id": 71398143, "body": "@ryyker - and so what ?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1486561794, "post_id": 42114446, "comment_id": 71398320, "body": "@RbMm - it describes everything needed to know how to use the STARTUPINFO structure.  Beyond that, you have already provided the hints on #defines."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1486561920, "post_id": 42114446, "comment_id": 71398427, "body": "@ryyker - and what from this ? but already view that error in <code>#include &quot;stdafx.h&quot;</code> <b>not first</b> Cheers and hth. - Alf right here. msdn here unrelated"}], "answers": [{"comments": [{"owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "edited": false, "score": 0, "creation_date": 1486563927, "post_id": 42114705, "comment_id": 71399921, "body": "Thanks ! So simple and so unclear from the errors. I moved <code>#include &quot;stdafx.h&quot;</code> to be the first and now it works."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486571580, "post_id": 42114705, "comment_id": 71405578, "body": "Precompiled header files are generated through user-provided header files. As such, the correct syntax is <code>#include &quot;stdafx.h&quot;</code>, not <code>#include &lt;stdafx.h&gt;</code>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1486579187, "post_id": 42114705, "comment_id": 71410330, "body": "@IInspectable: Thanks! Fixed. :)"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 4, "last_activity_date": 1486579168, "last_edit_date": 1486579168, "creation_date": 1486561219, "answer_id": 42114705, "question_id": 42114446, "link": "https://stackoverflow.com/questions/42114446/cant-use-createprocess-because-of-a-build-error-startupinfo-undeclared-iden/42114705#42114705", "title": "Can&#39;t use CreateProcess because of a build error: &#39;STARTUPINFO&#39;: undeclared identifier", "body": "<p>You need to put <code>#include \"stdafx.h\"</code> <em>first</em> of all.</p>\n\n<p>Or turn off precompiled headers in the project settings to get standard C++'s preprocessing behavior.</p>\n\n<p>With precompiled headers everything up to the include of the precompiled header, which in your case is <code>\"stdafx.h\"</code>, is ignored.</p>\n\n<hr>\n\n<p>There is a warning about the situation you have, where includes are ignored. If you want to use precompiled headers in general, you should find that warning number and specify that it should be treated as an error.</p>\n"}], "owner": {"reputation": 6454, "user_id": 2153777, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/L67zf.jpg?s=128&g=1", "display_name": "E235", "link": "https://stackoverflow.com/users/2153777/e235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 1, "accepted_answer_id": 42114705, "answer_count": 1, "score": 1, "last_activity_date": 1486579168, "creation_date": 1486560479, "question_id": 42114446, "link": "https://stackoverflow.com/questions/42114446/cant-use-createprocess-because-of-a-build-error-startupinfo-undeclared-iden", "title": "Can&#39;t use CreateProcess because of a build error: &#39;STARTUPINFO&#39;: undeclared identifier", "body": "<p>I am trying to start the process calc.exe with <code>CreateProcess(...)</code>.<br>\nWhen I am building the solution I received the error:<br>\n<strong><em>'STARTUPINFO': undeclared identifier</em></strong>  </p>\n\n<p><a href=\"https://i.stack.imgur.com/MzlO6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MzlO6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am not understanding why.<br>\nThe error is only when building the solution and the variable looks defined.<br>\nWhen pressing <strong>F12</strong> on the variable it appears as:<br>\n<a href=\"https://i.stack.imgur.com/5VpY2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5VpY2.png\" alt=\"enter image description here\"></a></p>\n\n<p>Maybe it related to the <code>#ifdef UNICODE</code> ?  </p>\n\n<p><strong>Full code:</strong>  </p>\n\n<pre><code>// CppConsoleApp.cpp : Defines the entry point for the console application.\n//\n\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\n#include \"stdafx.h\"\n\nint main()\n{\n    STARTUPINFO info;\n    PROCESS_INFORMATION processInfo;\n    ZeroMemory(&amp;info, sizeof(info));\n    info.cb = sizeof(info);\n    ZeroMemory(&amp;processInfo, sizeof(processInfo));\n\n    LPCWSTR path = L\"C:\\\\Windows\\\\System32\\\\calc.exe\";\n\n    if (!CreateProcess(path, NULL, NULL, NULL, TRUE, 0, NULL, NULL, &amp;info, &amp;processInfo))\n    {\n        printf(\"CreateProcess failed (%d).\\n\", GetLastError());\n    }\n\n    WaitForSingleObject(processInfo.hProcess, INFINITE);\n    CloseHandle(processInfo.hProcess);\n    CloseHandle(processInfo.hThread);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio", "visual-studio-2015", "clr"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 7, "creation_date": 1486559966, "post_id": 42114227, "comment_id": 71396995, "body": "The error message tells you exactly what is wrong. <code>strcmp</code> takes a <code>char *</code>,  you are giving it a <code>wchar_t *</code>. You probably want <a href=\"https://msdn.microsoft.com/en-us/library/e0z9k731.aspx\" rel=\"nofollow noreferrer\"><code>wcscmp</code></a> which is basically the same as <code>strcmp</code> except it works on <code>wchar_t *</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1243, "user_id": 1129815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lROzF.jpg?s=128&g=1", "display_name": "Steeve", "link": "https://stackoverflow.com/users/1129815/steeve"}, "is_accepted": false, "score": 0, "last_activity_date": 1486560053, "creation_date": 1486560053, "answer_id": 42114311, "question_id": 42114227, "link": "https://stackoverflow.com/questions/42114227/c-file-cannot-be-compiled-in-c-visual-studio/42114311#42114311", "title": "C file cannot be compiled in c++ Visual Studio", "body": "<p><code>szExeFile</code> in <code>tagPROCESSENTRY32</code> is declared as <code>TCHAR</code>, which will be a 1-byte char when compiling with <strong>Character Set</strong> set to 'Not Set' or 'Multibyte'. Set Character Set in your project settings to <strong>Use Unicode Character Set</strong> to fix the problem.</p>\n\n<p>Also, use <code>wcscmp</code> to compare WCHAR types.</p>\n"}, {"tags": [], "owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "is_accepted": false, "score": 2, "last_activity_date": 1486560246, "creation_date": 1486560246, "answer_id": 42114372, "question_id": 42114227, "link": "https://stackoverflow.com/questions/42114227/c-file-cannot-be-compiled-in-c-visual-studio/42114372#42114372", "title": "C file cannot be compiled in c++ Visual Studio", "body": "<p>The error message is clear: you have an error at this precise line:</p>\n\n<pre><code>if (strcmp(pEntry.szExeFile, filename) == 0)\n</code></pre>\n\n<p>Because your arguments are not of <code>char*</code> type as expected by <a href=\"https://linux.die.net/man/3/strcmp\" rel=\"nofollow noreferrer\">strcmp</a> but <code>WCHAR*</code> types. You should use <a href=\"https://linux.die.net/man/3/wcscmp\" rel=\"nofollow noreferrer\">wcscmp</a> instead, which is basically the same function, but working with <code>wchar_t*</code> type.</p>\n"}, {"comments": [{"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1486581260, "post_id": 42114480, "comment_id": 71411419, "body": "You mean ANSI, not ASCII. ANSI means the character encoding of the thread, which could come from the program, or the user, or the OS. It&#39;s very unlikely to be ASCII."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1486583955, "post_id": 42114480, "comment_id": 71413001, "body": "@TomBlodget - I updated my answer to show both. Take a look at <a href=\"http://msdn.microsoft.com/en-us/library/hx3yt8af.aspx\" rel=\"nofollow noreferrer\">MSDN ASCII</a> ."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 3, "last_activity_date": 1486583772, "last_edit_date": 1486583772, "creation_date": 1486560576, "answer_id": 42114480, "question_id": 42114227, "link": "https://stackoverflow.com/questions/42114227/c-file-cannot-be-compiled-in-c-visual-studio/42114480#42114480", "title": "C file cannot be compiled in c++ Visual Studio", "body": "<p>You could change every instance of WCHAR to TCHAR so text setting is \"generic\", or as already mentioned, change the project property character set to be Unicode only.</p>\n\n<pre><code>    void killProcessByName(TCHAR *filename)\n    /* ... */\n    if (_tcscmp(pEntry.szExeFile, filename) == 0)  /* replaced strcmp */\n    /* ... */\n#include &lt;windows.h&gt;    /* needed in order to use TEXT() macro */\n    /* ... */\n    TCHAR *proccc = TEXT(\"firefox.exe\");   /* TEXT() is a &lt;windows.h&gt; macro */\n</code></pre>\n\n<p>Use TCHAR type everywhere if the functions involved are not WCHAR specific. That would allow project setting to build either ANSI/ASCII (not set) or Unicode. </p>\n\n<p>Note that Process32First and Process32Next use TCHAR.</p>\n\n<p>This is mostly for legacy, since Windows 2000 and later API functions use Unicode internally, converting ANSI/ASCII to Unicode as needed, while Windows NT and older API functions use ANSI/ASCII.</p>\n\n<p>However, typically many or most text files (such as source code) are ANSI/ASCII and not Unicode, and it's awkward to have to support Unicode for Windows API and then ANSI/ASCII for text files in the same program, and for those projects I use ANSI/ASCII.</p>\n\n<p>By using the TCHAR based generic types, I can share common code with projects that use Unicode and with projects that use ANSI/ASCII.</p>\n"}], "owner": {"reputation": 59, "user_id": 3910236, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ac68b2c54460701095b0ff73b5580912?s=128&d=identicon&r=PG&f=1", "display_name": "sNOWsYSTEM", "link": "https://stackoverflow.com/users/3910236/snowsystem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 42114480, "answer_count": 3, "score": 0, "last_activity_date": 1486583772, "creation_date": 1486559770, "question_id": 42114227, "link": "https://stackoverflow.com/questions/42114227/c-file-cannot-be-compiled-in-c-visual-studio", "title": "C file cannot be compiled in c++ Visual Studio", "body": "<p>For some reason I can no longer compile a c file in my c++ clr console application. It worked before without the clr support, I also switched my project to compile as /TP still not working. Any help would be greatly appreciated. </p>\n\n<h1>Error</h1>\n\n<pre><code>Severity    Code    Description Project File    Line    Suppression State\nError   C2664   'int strcmp(const char *,const char *)': cannot convert argument 1 from 'WCHAR [260]' to 'const char *' \n</code></pre>\n\n<h1>snowkill.c</h1>\n\n<pre><code>#include \"snowkill.h\"\n\nvoid killProcessByName(WCHAR *filename)\n{\n    HANDLE hSnapShot = CreateToolhelp32Snapshot(TH32CS_SNAPALL, NULL);\n    PROCESSENTRY32 pEntry;\n    pEntry.dwSize = sizeof(pEntry);\n    BOOL hRes = Process32First(hSnapShot, &amp;pEntry);\n    while (hRes)\n    {\n        if (strcmp(pEntry.szExeFile, filename) == 0)\n        {\n            HANDLE hProcess = OpenProcess(PROCESS_TERMINATE, 0,\n                (DWORD)pEntry.th32ProcessID);\n            if (hProcess != NULL &amp;&amp; pEntry.th32ProcessID != GetCurrentProcessId())\n            {\n                TerminateProcess(hProcess, 9);\n                CloseHandle(hProcess);\n            }\n        }\n        hRes = Process32Next(hSnapShot, &amp;pEntry);\n    }\n    CloseHandle(hSnapShot);\n}\n</code></pre>\n\n<h1>snowkill.h</h1>\n\n<pre><code>#pragma once\n#include \"stdafx.h\"\n#include &lt;windows.h&gt;\n#include &lt;process.h&gt;\n#include &lt;Tlhelp32.h&gt;\n#include &lt;winbase.h&gt;\n#include &lt;string.h&gt;\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n    void killProcessByName(WCHAR *filename);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<h1>main.cpp</h1>\n\n<pre><code>#include \"stdafx.h\"\n#include \"snowkill.h\"\n#include \"motion.h\"\n#include \"info.h\"\n#include \"flushsound.h\"\n#include \"snowserial.h\"\n\nusing namespace System;\n\n\nbool on() {\n    return true;\n}\n\nbool off() {\n    return false;\n}\n\nint main()\n{\n    listenoncommport();\n    for (;;) {\n        string onoff = checkfile();\n\n        if (onoff == \"1\")\n        {\n            //detected();\n        }\n        else\n        {\n\n            WCHAR *proccc = L\"firefox.exe\";\n            killProcessByName(proccc);\n\n            //notdetected();\n\n        }\n        Sleep(5000);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "csv", "struct", "realloc"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486559007, "post_id": 42113880, "comment_id": 71396333, "body": "In <code>odczyt_z_pliku</code> you have <code>tab[n]</code> which is wrong. It should be <code>(*tab)[n]</code>. And then <code>(*tab)[n]</code> is not a pointer but an actual structure instance, so you should not use <code>-&gt;</code> to access its elements."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486559091, "post_id": 42113880, "comment_id": 71396382, "body": "And why do you have four identical <code>fscanf</code> calls? What if there&#39;s more data in the file? Or less? How about a loop?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1486559116, "post_id": 42113880, "comment_id": 71396398, "body": "<code>wybor *</code> is a pointer, not an array. But it can point to the first element of an array."}, {"owner": {"reputation": 1, "user_id": 7534416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUKRA.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/7534416/felipe"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486559669, "post_id": 42113880, "comment_id": 71396779, "body": "@Someprogrammerdude I have four fscanf just for testing, of cours there will be a loop. I will check your soution, thanks!"}, {"owner": {"reputation": 1, "user_id": 7534416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUKRA.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/7534416/felipe"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486561605, "post_id": 42113880, "comment_id": 71398167, "body": "@Someprogrammerdude It works ! Thank you so much for help :)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7534416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUKRA.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/7534416/felipe"}, "edited": false, "score": 0, "creation_date": 1486560287, "post_id": 42114245, "comment_id": 71397219, "body": "Yes, I thought about that just today morning. I was writing a counting function waiting for help from you :D"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1486560369, "last_edit_date": 1486560369, "creation_date": 1486559825, "answer_id": 42114245, "question_id": 42113880, "link": "https://stackoverflow.com/questions/42113880/dynamic-array-of-structures-in-dynamic-array-of-structure-in-c/42114245#42114245", "title": "Dynamic array of structures in dynamic array of structure in C", "body": "<p>You can use linked lists to read in the data. The user data structure has a pointer to a linked list of the user's choices.</p>\n\n<p>If you then still want to use arrays, you can now count the numbre of users, allocate an array for it and populate it with the users. In the same way you can count the number of choices of a user and allocate an array for it, then populate it.</p>\n\n<p>Your linked list should have a <code>void *</code> member that will store a pointer to a separate data structure for users, so you can just move the pointer of the user data structure from the linked list to your array.</p>\n\n<p>The user data structure has a member <code>wybor *tablica_wyborow;</code> for user choinces. You can maintain one linked list that will hold the user choices while reading in the data, then, once all of a user's choices have been read, you count them and allocate an array for it and copy the choices data (by value or pointer) into it.</p>\n\n<p>Once everything is done, deallocate the linked lists as you no longer need them.</p>\n\n<p>Alternativly, you can read the file for counting, then reprocess it. But that gives problems counting the individual user choices.</p>\n"}], "owner": {"reputation": 1, "user_id": 7534416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uUKRA.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/7534416/felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486561430, "creation_date": 1486558841, "last_edit_date": 1486561430, "question_id": 42113880, "link": "https://stackoverflow.com/questions/42113880/dynamic-array-of-structures-in-dynamic-array-of-structure-in-c", "title": "Dynamic array of structures in dynamic array of structure in C", "body": "<p>I need to allocate array of unknown number of users, and each user must have array with unknown number of choices. All data is read from a CSV file.</p>\n\n<p>So far, I have:</p>\n\n<pre><code>typedef struct wybor            //struct choice\n{\n    char rozmiar_kawy[2];\n    char czy_z_mlekiem[4];\n    char ile_cukru[2];\n    char godzina[20];\n}wybor;\n\ntypedef struct user\n{\n    char id[5];\n    char imie[20];\n    wybor *tablica_wyborow;     //dynamic array of struct choice\n}user;\n\n\nvoid odczyt_z_pliku(user **tab, int n);     //reading from file csv\nvoid godzina(user *kawa);               //doesnt matter :p\n\nint main() \n{\n    int licznik = 0;            //counter for number of users\n    user *tablica_userow;       //dynamic array of struct users\n    tablica_userow = NULL;\n    setlocale(LC_ALL, \"pl_PL\");\n\n    odczyt_z_pliku(&amp;tablica_userow, licznik);\n\n    getchar();\n    printf(\"%s\", tablica_userow[0].tablica_wyborow[2].rozmiar_kawy);        //check if it works\n    getchar();\n    return 0;\n}\n\nvoid odczyt_z_pliku(user **tab, int n)\n{\n\n    int i = 0;\n    (*tab) = malloc(1*sizeof(*(*tab)));\n    tab[n]-&gt;tablica_wyborow = malloc(1*sizeof(*(tab[n]-&gt;tablica_wyborow)));\n    FILE *plik;\n    plik = fopen(\"users.csv\", \"a+\");\n\n        //start reading from file and its working until...\n        fscanf(plik, \"%[^;] ; %[^;] ; %[^;] ; %[^;] ; %[^;] ; %s\\n\", tab[n]-&gt;id, tab[n]-&gt;imie, tab[n]-&gt;tablica_wyborow[i].rozmiar_kawy, tab[n]-&gt;tablica_wyborow[i].czy_z_mlekiem, tab[n]-&gt;tablica_wyborow[i].ile_cukru, tab[n]-&gt;tablica_wyborow[i].godzina);\n        i++;\n\n        tab[n]-&gt;tablica_wyborow = realloc(tab[n]-&gt;tablica_wyborow,(i+1)*sizeof(*(tab[n]-&gt;tablica_wyborow)));\n\n        fscanf(plik, \"%[^;] ; %[^;] ; %[^;] ; %[^;] ; %[^;] ; %s\\n\", tab[n]-&gt;id, tab[n]-&gt;imie, tab[n]-&gt;tablica_wyborow[i].rozmiar_kawy, tab[n]-&gt;tablica_wyborow[i].czy_z_mlekiem, tab[n]-&gt;tablica_wyborow[i].ile_cukru, tab[n]-&gt;tablica_wyborow[i].godzina);\n\n        i = 0;\n        n++;\n        *tab = realloc(*tab,(n+1)*sizeof(user)); //...now, here there is a memory writing location error\n\n        tab[n]-&gt;tablica_wyborow = malloc(sizeof(*tab[n]-&gt;tablica_wyborow));\n\n        fscanf(plik, \"%[^;] ; %[^;] ; %[^;] ; %[^;] ; %[^;] ; %s\\n\", tab[n]-&gt;id, tab[n]-&gt;imie, tab[n]-&gt;tablica_wyborow[i].rozmiar_kawy, tab[n]-&gt;tablica_wyborow[i].czy_z_mlekiem, tab[n]-&gt;tablica_wyborow[i].ile_cukru, tab[n]-&gt;tablica_wyborow[i].godzina);\n        i++;\n        tab[n]-&gt;tablica_wyborow = realloc(tab[n]-&gt;tablica_wyborow, (i + 1) * sizeof(*(tab[n]-&gt;tablica_wyborow)));\n\n        fscanf(plik, \"%[^;] ; %[^;] ; %[^;] ; %[^;] ; %[^;] ; %s\\n\", tab[n]-&gt;id, tab[n]-&gt;imie, tab[n]-&gt;tablica_wyborow[i].rozmiar_kawy, tab[n]-&gt;tablica_wyborow[i].czy_z_mlekiem, tab[n]-&gt;tablica_wyborow[i].ile_cukru, tab[n]-&gt;tablica_wyborow[i].godzina);\n\n    fclose(plik);\n\n}\n</code></pre>\n\n<p>I don't know why I can't realloc array of users properly.</p>\n\n<p>I didn't free the memory because it crashes when I tried.  </p>\n"}, {"tags": ["c", "linked-list"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1486558000, "post_id": 42113491, "comment_id": 71395652, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1493553875, "post_id": 42113491, "comment_id": 74456593, "body": "<a href=\"https://pastebin.com/HC1DLK4M\" rel=\"nofollow noreferrer\">tutorial</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 1, "last_activity_date": 1486558302, "last_edit_date": 1486558302, "creation_date": 1486557959, "answer_id": 42113530, "question_id": 42113491, "link": "https://stackoverflow.com/questions/42113491/to-much-value-element-in-linked-list-c-c/42113530#42113530", "title": "to much value element in linked list C/C++", "body": "<p>Change this :</p>\n\n<pre><code>void show(struct lista *head){\n    while(head!=NULL){\n        printf(\"%d\\n\", head-&gt;data);\n    }\n    head = head-&gt;next;\n}\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>void show(struct lista *head){\n    lista *temp = head;\n    while (temp != NULL){\n        printf(\"%d\\n\", temp-&gt;data);\n        temp = temp-&gt;next;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong><em>Reason for this modification :</em></strong></p>\n\n<p>You change <code>head</code> pointer <em>outside</em> the <code>while</code> loop, so <code>head</code> will always be the same. In your case it is not <code>NULL</code> so it will infinitely be printing the <code>data</code> in the node that <code>head</code> currently shows.</p>\n\n<p>Also, it is better to not modify the <code>head</code> of your list directly, because you will not be able to access it again.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5003877"}, "is_accepted": false, "score": 0, "last_activity_date": 1486558104, "creation_date": 1486558104, "answer_id": 42113576, "question_id": 42113491, "link": "https://stackoverflow.com/questions/42113491/to-much-value-element-in-linked-list-c-c/42113576#42113576", "title": "to much value element in linked list C/C++", "body": "<p>You might need to change the show method the following way and not change the head;</p>\n\n<pre><code>void show(struct lista *head){\n    lista *temp = head;\n    while (temp != NULL){\n        printf(\"%d\\n\", temp-&gt;data);\n        temp = temp-&gt;next;\n    }\n    //head = head-&gt;next;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1486561950, "post_id": 42114149, "comment_id": 71398456, "body": "Indentation is fixed now."}], "tags": [], "owner": {"reputation": 931, "user_id": 6830757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxb9.jpg?s=128&g=1", "display_name": "Shivam Sharma", "link": "https://stackoverflow.com/users/6830757/shivam-sharma"}, "is_accepted": true, "score": 3, "last_activity_date": 1493553430, "last_edit_date": 1493553430, "creation_date": 1486559579, "answer_id": 42114149, "question_id": 42113491, "link": "https://stackoverflow.com/questions/42113491/to-much-value-element-in-linked-list-c-c/42114149#42114149", "title": "to much value element in linked list C/C++", "body": "<p>you made <em>slight</em> but <em>sevior</em> mistake of \"<strong>infinity loop</strong>\".</p>\n\n<p><strong>Always notice 2 key points in the infinity case :-</strong>\n<strong>Point 1</strong>. \"Condition\" on the Control variable (i.e. *head) loop must be proper enough.\n<strong>Point 2</strong>. \"Updation\" on Control variable must be given to reach the end point of loop from the initialization of control var.</p>\n\n<p>okey, now you wouldn't be confuse in this problem to find the solution by self. :)</p>\n\n<p><strong>So, now you're able to troubleshoot and testing of problem.</strong></p>\n\n<pre><code>void show(struct lista *head){                   \n    while(head!=NULL){  //1.Condtion on *head look might be proper \n        printf(\"%d\\n\", head-&gt;data);\n        }\n    head = head-&gt;next;  //2. update on *head out of loop which gives *infininty*\n\n}                                         \n</code></pre>\n\n<p>Solution:-</p>\n\n<pre><code>void show(struct lista *head){                   \n    while(head!=NULL){                \n        printf(\"%d\\n\", head-&gt;data);\n        head = head-&gt;next;  //now the update work in loop *to break infinity*\n    }\n}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1486559997, "last_edit_date": 1486559997, "creation_date": 1486559624, "answer_id": 42114171, "question_id": 42113491, "link": "https://stackoverflow.com/questions/42113491/to-much-value-element-in-linked-list-c-c/42114171#42114171", "title": "to much value element in linked list C/C++", "body": "<p>In show(), just move the line to advance head to within the while loop:</p>\n\n<pre><code>void show(struct lista *head){\n    while(head!=NULL){\n        printf(\"%d\\n\", head-&gt;data);\n        head = head-&gt;next;     /* moved this line */\n    }                          /*  usual indentation for } */\n}\n</code></pre>\n\n<p>C function calls pass parameters by value (not by reference), so the show function will not modify the value of head in main() when it calls show().</p>\n\n<p>Shivam Sharma appears to have answered before I did, although my edit may have changed the order of answers. He should get the \"check\" for the answer.</p>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 5182224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zjdI-WE2GBM/AAAAAAAAAAI/AAAAAAAADwg/lvEkI5lmh64/photo.jpg?sz=128", "display_name": "Ashok Vishnoi", "link": "https://stackoverflow.com/users/5182224/ashok-vishnoi"}, "is_accepted": false, "score": 0, "last_activity_date": 1486559883, "creation_date": 1486559883, "answer_id": 42114263, "question_id": 42113491, "link": "https://stackoverflow.com/questions/42113491/to-much-value-element-in-linked-list-c-c/42114263#42114263", "title": "to much value element in linked list C/C++", "body": "<p>Your increment to the pointer <code>head</code> is outside the loop so actually <code>head</code> never changes and so it keeps on printing same value.</p>\n\n<p>Change your method <code>show</code> to the following:</p>\n\n<pre><code>void show(struct lista *head){\n    while(head!=NULL){\n        printf(\"%d\\n\", head-&gt;data);\n        head = head-&gt;next;\n        }\n\n}\n</code></pre>\n\n<p>Now after each <code>printf</code> statement your pointer <code>head</code> is moving to the next element of the list and thus it will work as expected.</p>\n"}], "owner": {"reputation": 520, "user_id": 2715948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c94d8d5c4cbd9ea054863e91009a09?s=128&d=identicon&r=PG&f=1", "display_name": "fuwiak", "link": "https://stackoverflow.com/users/2715948/fuwiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 42114149, "answer_count": 5, "score": 1, "last_activity_date": 1493553430, "creation_date": 1486557848, "last_edit_date": 1486557950, "question_id": 42113491, "link": "https://stackoverflow.com/questions/42113491/to-much-value-element-in-linked-list-c-c", "title": "to much value element in linked list C/C++", "body": "<p>I want put value in linked list. But I have a problem, becouse I want get this:\n123\nbut I get this\n123\n123\n123\n.\n.\nto infinity. What I doing wrong ?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nstruct lista{\n    int data;\n    struct lista *next;\n    struct lista *prev;\n};\n\nstruct lista *push(struct lista *head, struct lista *x){\n    x-&gt;next = head;\n    x-&gt;prev = NULL;\n    if(head!=NULL)\n        head-&gt;prev=x;\n    return x;\n}\n\nvoid show(struct lista *head){\n    while(head!=NULL){\n        printf(\"%d\\n\", head-&gt;data);\n        }\n    head = head-&gt;next;\n}\n\nint main(){\n    struct lista *head = NULL, *x = NULL;\n    x = (struct lista*)malloc(sizeof(struct lista));\n    x-&gt;data = 123;\n    head = push(head, x);\n    show(head);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "malloc"], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 1, "last_activity_date": 1486558194, "last_edit_date": 1486558194, "creation_date": 1486557890, "answer_id": 42113506, "question_id": 42113463, "link": "https://stackoverflow.com/questions/42113463/how-to-use-malloc-and-free-for-dynamic-memory-allocation/42113506#42113506", "title": "How to use malloc and free for Dynamic Memory Allocation", "body": "<p>You need to retain the pointer returned back from <code>reverse(argv[i])</code>, and <code>free</code> it.</p>\n\n<p>One way is to adjust <code>main</code> slightly to</p>\n\n<pre><code>int main (int argc, char** argv) {\n    char* s;\n\n    // if (argc &gt; 1) { Comment out the redundant check\n        for (int i = 1; i &lt; argc; ++i) { \n            printf(\"%d\\t%s\\t%s\\n\", i, argv[i], s = reverse(argv[i]));\n            free(s); \n        }\n    //}\n    return 0;\n}\n</code></pre>\n\n<p>Assignments deep within expressions are not to everyone's taste (as they can obfuscate), but they work well in instances like this. I'm of the ilk that you should get used to things like this in C.</p>\n\n<p>Also, <code>t[count] = '\\0';</code> overruns your buffer - the behaviour of that is <em>undefined</em>. You need <code>malloc(1 + count);</code></p>\n"}, {"tags": [], "owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "is_accepted": true, "score": 3, "last_activity_date": 1486558321, "last_edit_date": 1486558321, "creation_date": 1486557909, "answer_id": 42113510, "question_id": 42113463, "link": "https://stackoverflow.com/questions/42113463/how-to-use-malloc-and-free-for-dynamic-memory-allocation/42113510#42113510", "title": "How to use malloc and free for Dynamic Memory Allocation", "body": "<p>You should put free in the loop, after your usage of the pointer returned by reverse, as follows.</p>\n\n<pre><code>int main (int argc, char** argv) {\n    char *reverseStrPtr;\n\n    if (argc &gt; 1) {\n        for (int i = 1; i &lt; argc; ++i) {\n            reverseStrPtr = reverse(argv[i]);\n            printf(\"%d\\t%s\\t%s\\n\", i, argv[i], reverseStrPtr); \n            free(reverseStrPtr);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Also, the valgrind error is based on the line below which is in <code>reverse</code>.</p>\n\n<pre><code>t[count] = '\\0'; /* Add end of string */\n</code></pre>\n\n<p>Simply put, when you allocate count-many bytes, your index range is <code>[0, count)</code>. So trying to access count is equivalent to accessing <code>(count+1)</code>th bit, and that is an access violation.</p>\n\n<p>What you need to correct is the amount of memory you allocate, which is <code>(count+1)</code> bytes. The extra byte is needed to place the terminating <code>'\\0'</code> character.</p>\n\n<pre><code>char* reverse(char* text) {\n    int count = strLen(text);\n    char* t = malloc(count+1); // +1 for the terminating '\\0'\n\n    for (int i = count; i &gt; 0; --i) { t[count - i] = text[i-1];}\n    t[count] = '\\0'; /* Add end of string */\n\n    return t;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7534499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d70521362131e5eaff0af5f2124ab0?s=128&d=identicon&r=PG&f=1", "display_name": "Med Said", "link": "https://stackoverflow.com/users/7534499/med-said"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 42113510, "answer_count": 2, "score": 0, "last_activity_date": 1486558321, "creation_date": 1486557768, "question_id": 42113463, "link": "https://stackoverflow.com/questions/42113463/how-to-use-malloc-and-free-for-dynamic-memory-allocation", "title": "How to use malloc and free for Dynamic Memory Allocation", "body": "<p>I just started learning C, coming from php. I don't understand yet how to use malloc and free.</p>\n\n<p><strong>1) In the example code below, where I can put \"free\"?</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint strLen(char* text) {\n  int c = 0;\n  for (int i = 0; text[i] != '\\0'; ++i) ++c;\n  return c;\n}\n\n\nchar* reverse(char* text) {\n\n  int count = strLen(text);\n  char* t = malloc(count);\n\n  for (int i = count; i &gt; 0; --i) { t[count - i] = text[i-1]; }\n  t[count] = '\\0'; /* Add end of string */\n\n  return t;\n\n}\n\n\nint main (int argc, char** argv) {\n\n  if (argc &gt; 1) {\n    for (int i = 1; i &lt; argc; ++i) { \n      printf(\"%d\\t%s\\t%s\\n\", i, argv[i], reverse(argv[i])); \n    }\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>2) This is the output from valgrind. What mean the errors \"Invalid write of size 1\" and \"Invalid read of size 1\"?</strong></p>\n\n<pre><code>valgrind ./reverse Text ONe\n==3124== Memcheck, a memory error detector\n==3124== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==3124== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==3124== Command: ./reverse Text ONe\n==3124==\n==3124== Invalid write of size 1\n==3124==    at 0x40060F: reverse (in /localServer/temp/C/reverse)\n==3124==    by 0x400654: main (in /localServer/temp/C/reverse)\n==3124==  Address 0x5203044 is 0 bytes after a block of size 4 alloc'd\n==3124==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==3124==    by 0x4005C6: reverse (in /localServer/temp/C/reverse)\n==3124==    by 0x400654: main (in /localServer/temp/C/reverse)\n==3124==\n==3124== Invalid read of size 1\n==3124==    at 0x4E88CC0: vfprintf (vfprintf.c:1632)\n==3124==    by 0x4E8F898: printf (printf.c:33)\n==3124==    by 0x400682: main (in /localServer/temp/C/reverse)\n==3124==  Address 0x5203044 is 0 bytes after a block of size 4 alloc'd\n==3124==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==3124==    by 0x4005C6: reverse (in /localServer/temp/C/reverse)\n==3124==    by 0x400654: main (in /localServer/temp/C/reverse)\n==3124==\n1 Text  txeT\n2 ONe eNO\n==3124==\n==3124== HEAP SUMMARY:\n==3124==     in use at exit: 7 bytes in 2 blocks\n==3124==   total heap usage: 3 allocs, 1 frees, 1,031 bytes allocated\n==3124==\n==3124== LEAK SUMMARY:\n==3124==    definitely lost: 7 bytes in 2 blocks\n==3124==    indirectly lost: 0 bytes in 0 blocks\n==3124==      possibly lost: 0 bytes in 0 blocks\n==3124==    still reachable: 0 bytes in 0 blocks\n==3124==         suppressed: 0 bytes in 0 blocks\n==3124== Rerun with --leak-check=full to see details of leaked memory\n==3124==\n==3124== For counts of detected and suppressed errors, rerun with: -v\n==3124== ERROR SUMMARY: 4 errors from 2 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "floating-point"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1486556746, "post_id": 42112936, "comment_id": 71394750, "body": "In a limited fashion. The <code>__STDC_IEC_559__</code> expands to <code>1</code> if IEC 60559 is supported. But if you intend to pass the file between platforms, it won&#39;t be much use to you. You&#39;d still need to use a platform agnostic format."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1486557045, "post_id": 42112936, "comment_id": 71394971, "body": "Difficult to say, theoretically the C standard doesn&#39;t impose the binary representation of numbers meaning that any compiler or system is free to use whatever it likes. IEEE-754 defines a binary floating point format, using such encoding should at least give enough compatibility, but is difficult to be sure that it is supported on any system. But, as point in favor, is possible to write  a function to convert the format."}], "answers": [{"comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1486556927, "post_id": 42113085, "comment_id": 71394887, "body": "In other words, even if you don&#39;t have this (since you&#39;re not in C11) you can re-implement the same functionality and tag the file with the relevant values, thus describing the meaning of the bits and making it possible to be compatible even on hardware with a non-matching format. You could of course also make the header a single well-defined float, and check for that (I suggest \u03c0)."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1486561760, "post_id": 42113085, "comment_id": 71398287, "body": "Which particular macro are you referring to (or did you mean &quot;macros&quot;?), and what do you mean by &quot;new&quot;? <code>DBL_EPSILON</code>, <code>DBL_MAX</code>, <code>DBL_MIN</code> have been around since C89."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1486562912, "post_id": 42113085, "comment_id": 71399183, "body": "@MarkDickinson This is the only thing that I found in the standard about floating number, there are not solution at this problem in the standard but it&#39;s a start. &quot;\u2014 additional floating-point characteristics in &lt;float.h&gt;&quot;, C11."}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1486563273, "post_id": 42113085, "comment_id": 71399450, "body": "Okay, thanks. Yes, C11 added some extra things, like <code>DBL_TRUE_MIN</code> and <code>DBL_HAS_SUBNORM</code>."}], "tags": [], "owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "is_accepted": false, "score": 1, "last_activity_date": 1486564540, "last_edit_date": 1486564540, "creation_date": 1486556735, "answer_id": 42113085, "question_id": 42112936, "link": "https://stackoverflow.com/questions/42112936/floating-point-binary-portability/42113085#42113085", "title": "floating point binary portability", "body": "<p>You can look at the new(C11) and old macros in the header <code>&lt;float.h&gt;</code>, <a href=\"http://www.open-std.org/jtc1/SC22/wg14/www/docs/n1548.pdf\" rel=\"nofollow noreferrer\">page 46: 5.2.4.2.2 Characteristics of floating types</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "is_accepted": false, "score": -1, "last_activity_date": 1486558368, "last_edit_date": 1495541822, "creation_date": 1486557535, "answer_id": 42113379, "question_id": 42112936, "link": "https://stackoverflow.com/questions/42112936/floating-point-binary-portability/42113379#42113379", "title": "floating point binary portability", "body": "<p>In general you should be fine to directly read and write the binary data: the IEEE754 binary interchange format is pretty much standard outside of a few niche areas. You can use the <a href=\"https://stackoverflow.com/q/31181897/392585\"><code>__STDC_IEC_559__</code></a> macro to check.</p>\n\n<p><a href=\"https://stackoverflow.com/a/19361664/392585\">As noted in this question</a>, one thing the spec does not specify is the precise mapping of bits to bytes, so there is potential for <a href=\"https://en.wikipedia.org/wiki/Endianness#Floating_point\" rel=\"nofollow noreferrer\">endianness issues</a> (though probably not if you're exclusively using x86/x86_64). It might be a good idea to include a check floating point value at the start of your stream (note that it is not sufficient to check the endianness of your integers, as it is technically possible to have different endianness for integer and floating point).</p>\n\n<p>If you're writing text, one alternative to consider is the <a href=\"http://www.exploringbinary.com/hexadecimal-floating-point-constants/\" rel=\"nofollow noreferrer\">hex float format</a>, which can be much faster to read/write than decimal formats (though not as fast as the raw binary interchange format). Unfortunately, though it is part of both the IEEE and C-99 spec, it has been poorly supported by the MSVC compiler (though this may change now it is part of C++).</p>\n"}, {"comments": [{"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1486561365, "post_id": 42113423, "comment_id": 71397994, "body": "Good answer in general, only one flaw: Brutally casting to float will yield undefined behavior with strict aliasing rules if you are casting a pointer to <code>int</code> or similar. There are exactly two ways around this: Only cast to/from a <code>char</code> pointer and copy the bytes, or use <code>memcpy()</code> instead of a cast. The later is easier and usually translates to better code."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1486562480, "post_id": 42113423, "comment_id": 71398887, "body": "@cmaster I said brutally cast, I probably meant &quot;convert the binary pattern using whatever method you&#39;re comfortable with&quot;. I&#39;d cast. Sure, standard says we shouldn&#39;t cast. But I usually judge those things by seeing what company I&#39;ll be in when some non-standard trick breaks. And in this case the company is pretty much everybody. The standard has very good reasons to make it undefined because it is totally unportable. On the other hand compilers have very good reasons to never break it because they gain nothing from doing it and everyone would hate them for it."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1486563678, "post_id": 42113423, "comment_id": 71399743, "body": "1. In that case, you are not in my company. When I know something is UB, I try to avoid it. It feels just a tad too reckless not to. 2. The UB in question arises from strict aliasing rules: The compiler is free to move the write to the <code>int</code> after the load of the <code>float</code>. That is the whole point of introducing strict aliasing rules: To create more situations where the compiler is allowed to move a write/load. <b>Unless the compiler writers implement explicit exceptions to their optimizers to save your code from breaking, any update of the compiler may break it.</b>"}], "tags": [], "owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "is_accepted": true, "score": 3, "last_activity_date": 1486559099, "last_edit_date": 1486559099, "creation_date": 1486557656, "answer_id": 42113423, "question_id": 42112936, "link": "https://stackoverflow.com/questions/42112936/floating-point-binary-portability/42113423#42113423", "title": "floating point binary portability", "body": "<blockquote>\n  <p>Is there a way to at least check whether the floating point format the program understands is also okay with the system?</p>\n</blockquote>\n\n<p>Test 1: sizeof. Test 2: save a magic floating point value in the header of your on-disk file and check in the program that it has the right value after you've read the binary data from the disk. This should be safe enough.</p>\n\n<blockquote>\n  <p>And how much of incompatibility should I expect from dealing with floating point data in binary form?</p>\n</blockquote>\n\n<p>Very little. If, as you're saying, you're staying with just one hardware architecture (x86), you'll be fine. If you have a limited set of supported architectures - just test all of them. On x86 everyone will be using hardware floating point which limits how creative they can be (pretty much not at all). Even between architectures everyone I know of who uses IEEE 754 floating point has the same binary representation for the same endianness.</p>\n\n<p>Floating point have the weird problem that there isn't a widely used standard for their binary on disk/on wire representation. That being said, everyone who I've looked at does one of two things: either strings or store the bit pattern in an equally sized integer, adjust for endianness, brutally cast to float.</p>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 2, "last_activity_date": 1486560582, "last_edit_date": 1486560582, "creation_date": 1486558867, "answer_id": 42113886, "question_id": 42112936, "link": "https://stackoverflow.com/questions/42112936/floating-point-binary-portability/42113886#42113886", "title": "floating point binary portability", "body": "<p>Look up the binary portability website.\n<a href=\"https://github.com/MalcolmMcLean/ieee754\" rel=\"nofollow noreferrer\">https://github.com/MalcolmMcLean/ieee754</a></p>\n\n<p>The function to write an IEEE 754 portably is quite long, but it's just \na cut and paste job.\nThere's also a float version.</p>\n\n<pre><code>/*\n* write a double to a stream in ieee754 format regardless of host\n*  encoding.\n*  x - number to write\n*  fp - the stream\n*  bigendian - set to write big bytes first, elee write litle bytes\n*              first\n*  Returns: 0 or EOF on error\n*  Notes: different NaN types and negative zero not preserved.\n*         if the number is too big to represent it will become infinity\n*         if it is too small to represent it will become zero.\n*/\nint fwriteieee754(double x, FILE *fp, int bigendian)\n{\n    int shift;\n    unsigned long sign, exp, hibits, hilong, lowlong;\n    double fnorm, significand;\n    int expbits = 11;\n    int significandbits = 52;\n\n    /* zero (can't handle signed zero) */\n    if (x == 0)\n    {\n        hilong = 0;\n        lowlong = 0;\n        goto writedata;\n    }\n    /* infinity */\n    if (x &gt; DBL_MAX)\n    {\n        hilong = 1024 + ((1 &lt;&lt; (expbits - 1)) - 1);\n        hilong &lt;&lt;= (31 - expbits);\n        lowlong = 0;\n        goto writedata;\n    }\n    /* -infinity */\n    if (x &lt; -DBL_MAX)\n    {\n        hilong = 1024 + ((1 &lt;&lt; (expbits - 1)) - 1);\n        hilong &lt;&lt;= (31 - expbits);\n        hilong |= (1 &lt;&lt; 31);\n        lowlong = 0;\n        goto writedata;\n    }\n    /* NaN - dodgy because many compilers optimise out this test, but\n    *there is no portable isnan() */\n    if (x != x)\n    {\n        hilong = 1024 + ((1 &lt;&lt; (expbits - 1)) - 1);\n        hilong &lt;&lt;= (31 - expbits);\n        lowlong = 1234;\n        goto writedata;\n    }\n\n    /* get the sign */\n    if (x &lt; 0) { sign = 1; fnorm = -x; }\n    else { sign = 0; fnorm = x; }\n\n    /* get the normalized form of f and track the exponent */\n    shift = 0;\n    while (fnorm &gt;= 2.0) { fnorm /= 2.0; shift++; }\n    while (fnorm &lt; 1.0) { fnorm *= 2.0; shift--; }\n\n    /* check for denormalized numbers */\n    if (shift &lt; -1022)\n    {\n        while (shift &lt; -1022) { fnorm /= 2.0; shift++; }\n        shift = -1023;\n    }\n    /* out of range. Set to infinity */\n    else if (shift &gt; 1023)\n    {\n        hilong = 1024 + ((1 &lt;&lt; (expbits - 1)) - 1);\n        hilong &lt;&lt;= (31 - expbits);\n        hilong |= (sign &lt;&lt; 31);\n        lowlong = 0;\n        goto writedata;\n    }\n    else\n        fnorm = fnorm - 1.0; /* take the significant bit off mantissa */\n\n    /* calculate the integer form of the significand */\n    /* hold it in a  double for now */\n\n    significand = fnorm * ((1LL &lt;&lt; significandbits) + 0.5f);\n\n\n    /* get the biased exponent */\n    exp = shift + ((1 &lt;&lt; (expbits - 1)) - 1); /* shift + bias */\n\n    /* put the data into two longs (for convenience) */\n    hibits = (long)(significand / 4294967296);\n    hilong = (sign &lt;&lt; 31) | (exp &lt;&lt; (31 - expbits)) | hibits;\n    x = significand - hibits * 4294967296;\n    lowlong = (unsigned long)(significand - hibits * 4294967296);\n\nwritedata:\n    /* write the bytes out to the stream */\n    if (bigendian)\n    {\n        fputc((hilong &gt;&gt; 24) &amp; 0xFF, fp);\n        fputc((hilong &gt;&gt; 16) &amp; 0xFF, fp);\n        fputc((hilong &gt;&gt; 8) &amp; 0xFF, fp);\n        fputc(hilong &amp; 0xFF, fp);\n\n        fputc((lowlong &gt;&gt; 24) &amp; 0xFF, fp);\n        fputc((lowlong &gt;&gt; 16) &amp; 0xFF, fp);\n        fputc((lowlong &gt;&gt; 8) &amp; 0xFF, fp);\n        fputc(lowlong &amp; 0xFF, fp);\n    }\n    else\n    {\n        fputc(lowlong &amp; 0xFF, fp);\n        fputc((lowlong &gt;&gt; 8) &amp; 0xFF, fp);\n        fputc((lowlong &gt;&gt; 16) &amp; 0xFF, fp);\n        fputc((lowlong &gt;&gt; 24) &amp; 0xFF, fp);\n\n        fputc(hilong &amp; 0xFF, fp);\n        fputc((hilong &gt;&gt; 8) &amp; 0xFF, fp);\n        fputc((hilong &gt;&gt; 16) &amp; 0xFF, fp);\n        fputc((hilong &gt;&gt; 24) &amp; 0xFF, fp);\n    }\n    return ferror(fp);\n}\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 3810155, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6c8137bca50080778089baa54479bceb?s=128&d=identicon&r=PG&f=1", "display_name": "MinjaeKim", "link": "https://stackoverflow.com/users/3810155/minjaekim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 42113423, "answer_count": 4, "score": 2, "last_activity_date": 1486564540, "creation_date": 1486556303, "question_id": 42112936, "link": "https://stackoverflow.com/questions/42112936/floating-point-binary-portability", "title": "floating point binary portability", "body": "<p>I have a library that saves to disk loads of floating point data in text form. It seems they've done this because of portability matters, but because of huge disk usage from this, I've written a function to save the binary representation  of floating points directly to disk. I know this doesn't guarantee 100% portability, but I'll run this only on x86(_64) Linux/Windows PC's (maybe also in Mac and BSDs).</p>\n\n<p>Is there a way to at least check whether the floating point format the program understands is also okay with the system? And how much of incompatibility should I expect from dealing with floating point data in binary form?</p>\n"}, {"tags": ["c", "recursion", "binary"], "comments": [{"owner": {"reputation": 486140, "user_id": 1187415, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/LpTRB.png?s=128&g=1", "display_name": "Martin R", "link": "https://stackoverflow.com/users/1187415/martin-r"}, "edited": false, "score": 0, "creation_date": 1486556135, "post_id": 42112807, "comment_id": 71394315, "body": "Use your <i>debugger</i> and single-step through the program. You&#39;ll see quickly why and when the zeros are printed."}, {"owner": {"reputation": 159, "user_id": 2879844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dedd829c22695a9f820044a20d9af900?s=128&d=identicon&r=PG&f=1", "display_name": "user2879844", "link": "https://stackoverflow.com/users/2879844/user2879844"}, "edited": false, "score": 0, "creation_date": 1486556270, "post_id": 42112807, "comment_id": 71394421, "body": "The program uses recursion logic. Please go through recursion for more details."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486556754, "post_id": 42112807, "comment_id": 71394760, "body": "The only thing <i>decimal</i> in this snippet is the <code>printf(&quot;%d&quot;, n % 2);</code> (which should have been <code>printf(&quot;%u&quot;, n % 2);</code>, BTW)"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1486557058, "post_id": 42112807, "comment_id": 71394978, "body": "@wildplasser, <code>n%2</code> is binary <code>0000...01</code> or <code>0000..00</code> so <code>%u</code> is unnecessary."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486557268, "post_id": 42112807, "comment_id": 71395120, "body": "I meant: the <code>&quot;%d&quot;</code> is the only thing in the program that refers to a decimal number system."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486557556, "post_id": 42112807, "comment_id": 71395346, "body": "@wildplasser You mean <code>printf(&quot;%c&quot;, &quot;01&quot;[n&amp;1]);</code>, right? ;)"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1486557813, "post_id": 42112807, "comment_id": 71395539, "body": "@unwind: no, I just wanted to point at the OP&#39;s (false) understanding that the program <i>converts decimal to binary</i> . There is no decimal involved, except in the &quot;%d&quot;, where it does not need to be decimal, because only 0 and 1 are used (which is illustrated by your <code>%c</code> example)"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 1, "creation_date": 1486559293, "post_id": 42112807, "comment_id": 71396510, "body": "The user clearly showed that he tried to do this, why downvote, he is trying to learn and trying."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486559720, "post_id": 42112807, "comment_id": 71396815, "body": "But the actual <i>decimal to binary conversion</i> takes place in the compiler, where the (decimal) numeric literal <code>4</code> (in <code>bin(4);</code>) is translated to the binary representation that the machine requires."}], "answers": [{"comments": [{"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486559801, "post_id": 42112984, "comment_id": 71396869, "body": "Ogilivie While shifting the bits to  right, shall we rotate the rightmost bit to become the leftmost or completely eliminate it?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486559873, "post_id": 42112984, "comment_id": 71396930, "body": "Don&#39;t rotate it. Your recursion will never end."}, {"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486560417, "post_id": 42112984, "comment_id": 71397307, "body": "If we are not rotating it then how will it find the other two bits. For eg. If I am taking 7 instead of 4, then its binary representation is 111. After first divide by 2, it will become 011; after second, it will become 001. Then after printing 1, the only bits left are two 0&#39;s. From where will it find the other two 1&#39;s?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486560547, "post_id": 42112984, "comment_id": 71397418, "body": "It finds them upon the return from the recursion. <i>I strongly suggest you step this through a debugger so you can see what happens!</i>"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1486556452, "creation_date": 1486556452, "answer_id": 42112984, "question_id": 42112807, "link": "https://stackoverflow.com/questions/42112807/how-does-this-decimal-to-binary-conversion-program-work/42112984#42112984", "title": "How does this Decimal to Binary conversion program work?", "body": "<p>Dividing an integer by 2 is the same as shifting it right one bit. So using recursion, it shifts the bits to the right until only 1 bit is left (the leftmost bit)</p>\n\n<p>Then it prints this leftmost bit and returns. Upon return, there are still two bits, the leftmost and one-before-leftmost. With the <code>% 2</code> it discards all leftmost bits and prints this one-before-leftmost. Now it returns and... etc.</p>\n\n<p>This effectively prints the bits left-to-right.</p>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486559193, "post_id": 42113022, "comment_id": 71396453, "body": "Can you please explain why it will recurse it from the deepest or will print in the reverse order rather than the actual recursive path as you said. I don&#39;t understand the logic behind it."}, {"owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "reply_to_user": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486560310, "post_id": 42113022, "comment_id": 71397237, "body": "@DG4 It&#39;s because it does statements it in the order you write it. If you move the print statement before the conditional recursion it will print it in the reverse order since it prints the lowest bit first, then recurse. Since your version recurses first and wait for <b>every depth</b> to print before this iteration and that you always print the lowest bit it prints the highest bit to lowest, thus in oposite order of the recursive path which the first iteration is for the lowest bit, the next is for the next lowest ... the highest."}], "tags": [], "owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "is_accepted": false, "score": 0, "last_activity_date": 1486556903, "last_edit_date": 1486556903, "creation_date": 1486556560, "answer_id": 42113022, "question_id": 42112807, "link": "https://stackoverflow.com/questions/42112807/how-does-this-decimal-to-binary-conversion-program-work/42113022#42113022", "title": "How does this Decimal to Binary conversion program work?", "body": "<p>With your logic:</p>\n\n<pre><code>somefunc();\nsomeotherfunc();\n</code></pre>\n\n<p>When <code>somefunc()</code> is finished doing it's thing, <code>someotherfunc()</code> will not be executed since <code>somefunc()</code> was done. </p>\n\n<p>What happens is that step 2 is done when the call to <code>bin</code> is done or not run at all and then step 2 is always done. Thus Every iteration of <code>bin</code> prints something and since it's <strong>after</strong> the recursion it does it from the deepest and and up making the printing in reverse order from the actual recursive path.</p>\n\n<p>Every call to <code>bin</code>has it's own local variables so they don't interfere with each other. Thus when the call to <code>bin</code> from <code>bin</code> is done <code>n</code> is the same as before but the returning <code>bin</code> had a <code>n</code> that was half of the caller's <code>n</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486558554, "post_id": 42113345, "comment_id": 71396026, "body": "I understand this sequence shown by you but the thing which I am not able to digest is how the second and third printf statements, whose outputs are 0 came up after printing 1. Is it because we are seeing the stack implementation here like push and pop or is there any other reason?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486559325, "post_id": 42113345, "comment_id": 71396529, "body": "@DG4: <code>bin(2)</code> executes the two bullets below it. <code>bin(4)</code> executes the two bullets below it. Do you understand now?"}, {"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486559667, "post_id": 42113345, "comment_id": 71396776, "body": "No, I am asking about the printf statements containing 2%2 and 4%2."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486559757, "post_id": 42113345, "comment_id": 71396846, "body": "@DG4: <code>bin(2)</code> calls <code>bin(2&#47;2)</code> and then <code>printf(&quot;%d&quot;,2%2)</code>. Similarly, <code>bin(4)</code> calls <code>bin(4&#47;2)</code> and then <code>printf(&quot;%d&quot;,4%2)</code>. Do you understand now?"}, {"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486560127, "post_id": 42113345, "comment_id": 71397106, "body": "Yes, I understand now what you said. But now, I have another doubt. As you said that it will print 1 first. So, after printing it, how the other two 0&#39;s are printed. Are they stored in stack below the printf statement which is printing 1?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 1, "creation_date": 1486560211, "post_id": 42113345, "comment_id": 71397160, "body": "@DG4: <code>bin(1)</code> completes, and then <code>bin(2)</code> continues. Then <code>bin(2)</code> completes, and then <code>bin(4)</code> continues."}, {"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1486570081, "post_id": 42113345, "comment_id": 71404435, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/135192/discussion-between-dg4-and-barak-manos\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "is_accepted": true, "score": 2, "last_activity_date": 1486557835, "last_edit_date": 1486557835, "creation_date": 1486557436, "answer_id": 42113345, "question_id": 42112807, "link": "https://stackoverflow.com/questions/42112807/how-does-this-decimal-to-binary-conversion-program-work/42113345#42113345", "title": "How does this Decimal to Binary conversion program work?", "body": "<p>Perhaps the illustrated sequence will make it easier for you to understand:</p>\n\n<ul>\n<li><code>bin(4)</code>\n\n<ul>\n<li><code>bin(2)</code>\n\n<ul>\n<li><code>bin(1)</code>\n\n<ul>\n<li><code>printf(\"%d\",1%2); // 1</code></li>\n</ul></li>\n<li><code>printf(\"%d\",2%2); // 0</code></li>\n</ul></li>\n<li><code>printf(\"%d\",4%2); // 0</code></li>\n</ul></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486559398, "post_id": 42113759, "comment_id": 71396575, "body": "in your answer after the 4th step, how is it possible that the program will return to the caller function with a new value  after printing out the value &#39;1&#39;? My second question is are you treating it as a stack in which we are seeing the push and pop like things to print the values of the function?"}, {"owner": {"reputation": 782, "user_id": 6202058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e482c0a1c36ae37276a1d9007394607?s=128&d=identicon&r=PG&f=1", "display_name": "Avantika Saini", "link": "https://stackoverflow.com/users/6202058/avantika-saini"}, "reply_to_user": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "edited": false, "score": 0, "creation_date": 1486616668, "post_id": 42113759, "comment_id": 71424640, "body": "When you call any function(lets say fun()) from your main function then doesnt the program controll returns to the main function after executing <code>fun()</code>? Same thing happens here."}], "tags": [], "owner": {"reputation": 782, "user_id": 6202058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e482c0a1c36ae37276a1d9007394607?s=128&d=identicon&r=PG&f=1", "display_name": "Avantika Saini", "link": "https://stackoverflow.com/users/6202058/avantika-saini"}, "is_accepted": false, "score": 2, "last_activity_date": 1486558539, "creation_date": 1486558539, "answer_id": 42113759, "question_id": 42112807, "link": "https://stackoverflow.com/questions/42112807/how-does-this-decimal-to-binary-conversion-program-work/42113759#42113759", "title": "How does this Decimal to Binary conversion program work?", "body": "<p>You are on the right track,</p>\n\n<ol>\n<li><p>We will put 4 as an argument of bin first.</p></li>\n<li><p>bin(4): 4 > 1, therefore, it will again call the bin function with the argument 2. Function execution is not complete yet. Program will return here once the called function is executed</p></li>\n<li><p>bin(2): Now, 2 > 1, therefore, it will again call the bin function with the argument 1. Function execution is not complete yet. Program will return here once the called function is executed</p></li>\n<li><p>bin(1): Since 1 is not greater than 1, we will go to step 2 and the compiler will print 1 (since 1%2=1) and hence, this program should print \"1\". Fcuntion execution complete</p></li>\n<li>bin(2): program now returns to the caller function and prints 0(since 2%2=0). function execution complete</li>\n<li>bin(4): program now returns to the caller function and prints 0(since 2%2=0). function execution complete</li>\n</ol>\n\n<p>Hence the ouput is '100'</p>\n"}], "owner": {"reputation": 565, "user_id": 4890121, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H7mlP.png?s=128&g=1", "display_name": "DG4", "link": "https://stackoverflow.com/users/4890121/dg4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 42113345, "answer_count": 4, "score": 0, "last_activity_date": 1486562638, "creation_date": 1486555930, "last_edit_date": 1486562638, "question_id": 42112807, "link": "https://stackoverflow.com/questions/42112807/how-does-this-decimal-to-binary-conversion-program-work", "title": "How does this Decimal to Binary conversion program work?", "body": "<p>I was looking for an easy program for the decimal to binary conversion and then, came across the following program using recursion.</p>\n\n<pre><code>void bin(unsigned n)\n{\n/* step 1 */\nif (n &gt; 1)\n    bin(n/2);\n\n/* step 2 */\nprintf(\"%d\", n % 2);\n}\n\nint main(void)\n{\nbin(4);\nreturn 0;    \n}\n</code></pre>\n\n<p>The output of this program was <code>100</code> as expected. But, I'm unable to understand how does it show the output <code>100</code> because according to me, the output should be <code>1</code> (incorrect) instead of <code>100</code>.  </p>\n\n<p>Here is my interpretation of steps of the <code>bin</code> function.</p>\n\n<ol>\n<li>We will put <code>4</code> as an argument of <code>bin</code> first.</li>\n<li><code>4 &gt; 1</code>, therefore, it will again call the <code>bin</code> function with the argument 2.</li>\n<li>Now, <code>2 &gt; 1</code>, therefore, it will again call the <code>bin</code> function with the argument 1.</li>\n<li>Since <code>1</code> is not greater than <code>1</code>, we will go to step <code>2</code> and the compiler will print <code>1</code> (since <code>1%2=1</code>) and hence, this program should print <code>1</code> only and not <code>100</code>.</li>\n</ol>\n\n<p>Can anyone please explain and guide me where I am wrong? </p>\n"}, {"tags": ["c", "while-loop"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 2, "creation_date": 1486555489, "post_id": 42112607, "comment_id": 71393856, "body": "Why is it not working?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1486555546, "post_id": 42112607, "comment_id": 71393896, "body": "What is the problem you have? Can you please elaborate on that? Doesn&#39;t it build? Does it crash when you run the program? Give unexpected results? Please take some time to  <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1486557280, "post_id": 42112607, "comment_id": 71395131, "body": "@KamiKaze This had nothing do with his problem."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "reply_to_user": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486567550, "post_id": 42112607, "comment_id": 71402646, "body": "@SurajJain yep, was just skimming through it and as he didn&#39;t specify the problem, I assumed this might help, but I after some thought I guess it only applies to <code>%c</code>"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1486581107, "post_id": 42112607, "comment_id": 71411365, "body": "@KamiKaze Oh, it&#39;s ok :)"}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486555863, "post_id": 42112655, "comment_id": 71394116, "body": "@Someprogrammerdude the variable names are so explicit! How could have missed that :)"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1486555935, "post_id": 42112655, "comment_id": 71394169, "body": "Jean, his loops are OK. He only forgot to reset <code>nbr</code>. I disagree with your updated loop; it is less clear."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1486556165, "post_id": 42112655, "comment_id": 71394341, "body": "@PaulOgilvie Is  mine answer correct ?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1486556345, "post_id": 42112655, "comment_id": 71394479, "body": "@PaulOgilvie You&#39;ll agree that with a do/while it&#39;s better (as Joachim nicely commented). I really don&#39;t like the need to invalidate a condition to be able to enter once in the while loop. It&#39;s error prone (as we saw here :). I used while/break out of bad python habit."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 0, "last_activity_date": 1486556652, "last_edit_date": 1486556652, "creation_date": 1486555536, "answer_id": 42112655, "question_id": 42112607, "link": "https://stackoverflow.com/questions/42112607/cannot-get-this-while-function-in-c-to-work/42112655#42112655", "title": "Cannot get this while function in C to work", "body": "<p><code>while(nbr &lt; 1 || nbr &gt; 10)</code> only works once, the first time when <code>nbr</code> is 0. </p>\n\n<p>After that, <code>nbr</code> is valid, so you don't enter the loop again and your array is filled with the name number. You have to declare and initialize <code>int nbr = 0;</code> within the loop (you don't need outside the loop anyway).</p>\n\n<pre><code> while(ctr&lt;5)\n  {\n    int nbr = 0;\n</code></pre>\n\n<p>or use <code>do/while</code> instead of a condition that requires you to invalidate the value first:</p>\n\n<pre><code>do\n{\n  printf(\"\\nEnter number %d of 5:  \",ctr+1);\n  scanf(\"%d\",&amp;nbr);\n} while(nbr &lt; 1 || nbr &gt; 10);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "is_accepted": false, "score": 1, "last_activity_date": 1486555780, "creation_date": 1486555780, "answer_id": 42112743, "question_id": 42112607, "link": "https://stackoverflow.com/questions/42112607/cannot-get-this-while-function-in-c-to-work/42112743#42112743", "title": "Cannot get this while function in C to work", "body": "<pre><code>while(nbr &lt; 1 || nbr &gt; 10)\n{\n  printf(\"\\nEnter number %d of 5:  \",ctr+1);\n  scanf(\"%d\",&amp;nbr);\n}\n\narray[ctr]= nbr;\nctr++;\n\n// Add this line after `ctr++`\nnbr = 0; // &lt;======\n</code></pre>\n\n<p>You have to reset <code>nbr</code> in order to reenter the <em>while</em> loop.</p>\n\n<p>( Because after the first correct number <code>nbr</code> is entered, the while condition is always false. )</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 2913547, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/4JR3W.jpg?s=128&g=1", "display_name": "RhodosCoder", "link": "https://stackoverflow.com/users/2913547/rhodoscoder"}, "edited": false, "score": 0, "creation_date": 1486560124, "post_id": 42112768, "comment_id": 71397102, "body": "why do i have to set nbr = 0; when that was done before the first while loop?"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 119, "user_id": 2913547, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/4JR3W.jpg?s=128&g=1", "display_name": "RhodosCoder", "link": "https://stackoverflow.com/users/2913547/rhodoscoder"}, "edited": false, "score": 0, "creation_date": 1486581088, "post_id": 42112768, "comment_id": 71411351, "body": "Because it will go inside loop only if it satisfies the condition <code>(nbr &lt; 1 || nbr &gt; 10)</code> , now first you have initialised nbr so this condition holds and we go inside loop and then it continues to run till nbr is between 1 - 10 and  after that we exit the loop and nbr is stored in array , now for another number you would again go to loop but this time because nbr is between 1- 10 , you wont enter the loop and will never be able to input any other number , see my answer again and ask if you still have doubt. Read the answer carefully."}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 119, "user_id": 2913547, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/4JR3W.jpg?s=128&g=1", "display_name": "RhodosCoder", "link": "https://stackoverflow.com/users/2913547/rhodoscoder"}, "edited": false, "score": 0, "creation_date": 1486619329, "post_id": 42112768, "comment_id": 71425538, "body": "@RhodosCoder See Above :)"}, {"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "reply_to_user": {"reputation": 119, "user_id": 2913547, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/4JR3W.jpg?s=128&g=1", "display_name": "RhodosCoder", "link": "https://stackoverflow.com/users/2913547/rhodoscoder"}, "edited": false, "score": 0, "creation_date": 1488353734, "post_id": 42112768, "comment_id": 72187442, "body": "@RhodosCoder Is your problem solved?"}], "tags": [], "owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "is_accepted": false, "score": 3, "last_activity_date": 1514375729, "last_edit_date": 1514375729, "creation_date": 1486555828, "answer_id": 42112768, "question_id": 42112607, "link": "https://stackoverflow.com/questions/42112607/cannot-get-this-while-function-in-c-to-work/42112768#42112768", "title": "Cannot get this while function in C to work", "body": "<p>Consider This Loop Of Your Program :   </p>\n\n<pre><code>while(nbr &lt; 1 || nbr &gt; 10)\n  {\n   printf(\"\\nEnter number %d of 5:  \",ctr+1);\n   scanf(\"%d\",&amp;nbr);\n  }\n</code></pre>\n\n<p>Here This loop will work for the first time because you have defined <code>nbr = 0</code>, so it satisfies the loop condition and goes inside it, then until you take a number between <code>1</code> and <code>10</code> it continues running, once you take a number that is between <code>1</code> and <code>10</code>, you leave the loop, but now because <code>nbr</code> is now between <code>1</code> and <code>10</code>, you will not go inside loop again.   </p>\n\n<p>This loop will therefore execute only once so that is why you are not able to take input of all <code>5</code> numbers.   </p>\n\n<p>If you after storing <code>nbr</code> in array, assign <code>nbr = 0</code> it now will again go into loop and your code will work fine.  </p>\n\n<p><strong>Correct Code</strong> </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint array[5];\n\nint main(){\n\n  int ctr= 0,\n  nbr = 0;\n  printf(\"Enter five numbers from 1-10\\n\");\n\n  while(ctr&lt;5){\n\n    while(nbr &lt; 1 || nbr &gt; 10)//First time it enter the loop because nbr = 0\n                              //But after that nbr is between 1 and 10\n                              //So it does not enter again and you can not input more number.\n    {\n      printf(\"\\nEnter number %d of 5:  \",ctr+1);\n      scanf(\"%d\",&amp;nbr);\n    }\n\n    array[ctr]= nbr;\n    nbr = 0;         //So That Loop Run Again\n    ctr++;\n  }\n  for (ctr=0;ctr&lt;5;ctr++)                 \n    printf(\"Value %d is %d\\n\",ctr+1,array[ctr]);\n\n  return(0);\n}\n</code></pre>\n\n<p>Also There Are Other Ways that you can approach this problem, you can use <code>do-while</code> loop which executes the first time all the time and then check the condition.   </p>\n\n<p><strong>Another Method Using do-while loop</strong></p>\n\n<pre><code>    do\n      {\n        printf(\"\\nEnter number %d of 5:  \",ctr+1);\n        scanf(\"%d\",&amp;nbr);\n      } while (nbr &lt; 1 || nbr &gt; 10);\n</code></pre>\n\n<p>Now here first you enter the number and it is stored in <code>nbr</code>, if it is between <code>1</code> and <code>10</code> you exit the loop and it gets stored in the array and now you again run the outer loop and again you encounter do while, it always execute the first time and then check the condition so you do not have to reinitialise <code>nbr = 0</code> every time.</p>\n\n<p><strong>Tip</strong><br>\nAlways Describe your problem more clearly and tell what you expected it to do and what it is doing so that other can understand it better and give you better and fast solutions.  </p>\n"}, {"comments": [{"owner": {"reputation": 3817, "user_id": 5473170, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-TqTWy9pKa2g/AAAAAAAAAAI/AAAAAAAAASw/aJ0ynw2sjqM/photo.jpg?sz=128", "display_name": "Suraj Jain", "link": "https://stackoverflow.com/users/5473170/suraj-jain"}, "edited": false, "score": 0, "creation_date": 1486559616, "post_id": 42113444, "comment_id": 71396743, "body": "Please See his code again it is same as your code , his code is just hard to  understand , he did int ctr = 0, and on next line nbr = 0; so it is same as yours."}], "tags": [], "owner": {"reputation": 194, "user_id": 7090192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f0152ee3bf3819e48e6e89b96dbe8f6?s=128&d=identicon&r=PG&f=1", "display_name": "CoderGirl94", "link": "https://stackoverflow.com/users/7090192/codergirl94"}, "is_accepted": false, "score": 0, "last_activity_date": 1486557719, "creation_date": 1486557719, "answer_id": 42113444, "question_id": 42112607, "link": "https://stackoverflow.com/questions/42112607/cannot-get-this-while-function-in-c-to-work/42113444#42113444", "title": "Cannot get this while function in C to work", "body": "<p>You must change the , to a ; after initializing the variable ctr or have it written as show below.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n      int array[5];\n      int ctr= 0, nbr = 0;\n      printf(\"Enter 5 numbers from 1-10\\n\");\n\n      while(ctr&lt;5)\n      {\n          //greater than zero includes 1, less than 11 includes 10\n          while(nbr &gt; 0 || nbr &lt; 11)\n          {\n               printf(\"\\nEnter number %d of 5:  \",ctr+1);\n               scanf(\"%d\",&amp;nbr);\n           }\n\n           array[ctr]= nbr;\n           ctr++;\n         }\n    for (ctr=0;ctr&lt;5;ctr++)\n    {\n        printf(\"Value %d is %d\\n\",ctr+1,array[ctr]);\n    }\nreturn(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2913547, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/4JR3W.jpg?s=128&g=1", "display_name": "RhodosCoder", "link": "https://stackoverflow.com/users/2913547/rhodoscoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "closed_date": 1486561835, "answer_count": 4, "score": -1, "last_activity_date": 1514375729, "creation_date": 1486555405, "last_edit_date": 1486558736, "question_id": 42112607, "link": "https://stackoverflow.com/questions/42112607/cannot-get-this-while-function-in-c-to-work", "closed_reason": "Not suitable for this site", "title": "Cannot get this while function in C to work", "body": "<p>The while loop below is supposed to take user input five numbers from 1 to 10 and print them back.  </p>\n\n<p>What am I doing wrong?</p>\n\n<p><strong>My Code</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint array[5];\nint main()\n{\n  int ctr= 0,\n  nbr = 0;\n  printf(\"Enter 5 numbers from 1-10\\n\");\n\n  while(ctr&lt;5)\n  {\n    while(nbr &lt; 1 || nbr &gt; 10)\n    {\n      printf(\"\\nEnter number %d of 5:  \",ctr+1);\n      scanf(\"%d\",&amp;nbr);\n    }\n\n    array[ctr]= nbr;\n    ctr++;\n  }\n  for (ctr=0;ctr&lt;5;ctr++)\n    printf(\"Value %d is %d\\n\",ctr+1,array[ctr]);\n\n  return(0);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "function"], "comments": [{"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1486555096, "post_id": 42112447, "comment_id": 71393614, "body": "My guess is return in NetString finishes off your thread. But I am not sure."}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 2, "creation_date": 1486555151, "post_id": 42112447, "comment_id": 71393646, "body": "always check the return value of malloc"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1486555253, "post_id": 42112447, "comment_id": 71393710, "body": "and don&#39;t cast the return of malloc"}, {"owner": {"reputation": 2048, "user_id": 4961259, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b82c25cbde4d52888e6eccc44764b80?s=128&d=identicon&r=PG&f=1", "display_name": "Kami Kaze", "link": "https://stackoverflow.com/users/4961259/kami-kaze"}, "edited": false, "score": 0, "creation_date": 1486555289, "post_id": 42112447, "comment_id": 71393732, "body": "do you run Netstring as a thread or is the call to Netstring in a thread?"}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486555341, "post_id": 42112447, "comment_id": 71393770, "body": "If you understood how <code>strcat()</code> works you would never use it consecutively, specially if you already used <code>strlen()</code> with the components. Also, there is no guarantee that <code>id</code> or <code>data</code> are <code>nul</code> terminated because you did not post the code that initializes them. Finally casting <code>void *</code> to <code>char *</code> is not necessary but casting <code>char *</code> to <code>char *</code> indicates that something is wrong in your code."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486555395, "post_id": 42112447, "comment_id": 71393801, "body": "In short, the lack of context in your example does not help in finding out the problem."}, {"owner": {"reputation": 3, "user_id": 7534257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a5db6b1618ddc7c3adfb879f36d05f?s=128&d=identicon&r=PG&f=1", "display_name": "Manel498", "link": "https://stackoverflow.com/users/7534257/manel498"}, "reply_to_user": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1486555475, "post_id": 42112447, "comment_id": 71393845, "body": "@TonyTannous I believe the thread keeps running, strings after that get printed correctly, it&#39;s just not the &quot;r&quot; one."}, {"owner": {"reputation": 3, "user_id": 7534257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a5db6b1618ddc7c3adfb879f36d05f?s=128&d=identicon&r=PG&f=1", "display_name": "Manel498", "link": "https://stackoverflow.com/users/7534257/manel498"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486555854, "post_id": 42112447, "comment_id": 71394109, "body": "@IharobAlAsimi id and data are initialized in the NetString(&quot;ch&quot;,&quot;aaaaa&quot;) line... right? Also I removed both (char *) casts, no additional errors showed up."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486555942, "post_id": 42112447, "comment_id": 71394176, "body": "Can you show how is the whole program running?"}, {"owner": {"reputation": 3, "user_id": 7534257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a5db6b1618ddc7c3adfb879f36d05f?s=128&d=identicon&r=PG&f=1", "display_name": "Manel498", "link": "https://stackoverflow.com/users/7534257/manel498"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1486556210, "post_id": 42112447, "comment_id": 71394376, "body": "@IharobAlAsimi added full code link in my question: <a href=\"http://pastebin.com/M38uFLbQ\" rel=\"nofollow noreferrer\">pastebin.com/M38uFLbQ</a>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1486556273, "post_id": 42112447, "comment_id": 71394422, "body": "The warning says that you forgot to declare NetString properly. Enable all warnings and treat them as errors (-Wall -Wextra -Werror). Saves all of us time."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486557124, "post_id": 42112447, "comment_id": 71395034, "body": "@n.m. to be fair it doesn&#39;t say exactly that (there&#39;s <a href=\"http://stackoverflow.com/questions/8440816/warning-implicit-declaration-of-function\">another warning</a> for that one), but it does hint strongly at the issue."}], "answers": [{"tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": true, "score": 1, "last_activity_date": 1486557078, "creation_date": 1486557078, "answer_id": 42113215, "question_id": 42112447, "link": "https://stackoverflow.com/questions/42112447/c-passing-string-in-a-function-in-a-thread-and-returning-it-results-in-a-non-e/42113215#42113215", "title": "C - Passing string in a function in a thread and returning it results in a non-existant, non-printable string?", "body": "<p>This code</p>\n\n<pre><code>char *r = NetString(\"ch\",\"aaaaa\");\n</code></pre>\n\n<p>and this error</p>\n\n<pre><code>warning: initialization makes pointer from integer without a cast\n[enabled by default]: char *r = NetString(\"ch\",\"aaaaa\");\n                                ^\n</code></pre>\n\n<p>almost certainly mean:</p>\n\n<ol>\n<li>You are calling <code>NetString()</code> without providing a function prototype, thus it is treated as returning <code>int</code>.</li>\n<li>You are running on a 64-bit platform where pointers are 64 bit and <code>int</code> values are 32 bit.</li>\n</ol>\n\n<p>Thus, your <code>char *</code> pointer value from <code>NetString()</code> gets truncated to an <code>int</code>, then assigned to a pointer, where it no longer points to anything useful.</p>\n\n<p>You need to provide a proper prototype with a function declaration:</p>\n\n<pre><code>char *NetString( char *, char * );\n</code></pre>\n\n<p>in all code that calls <code>NetString()</code>, and the prototype needs to be <em>before</em> any such calls.</p>\n"}], "owner": {"reputation": 3, "user_id": 7534257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a5db6b1618ddc7c3adfb879f36d05f?s=128&d=identicon&r=PG&f=1", "display_name": "Manel498", "link": "https://stackoverflow.com/users/7534257/manel498"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 42113215, "answer_count": 1, "score": 0, "last_activity_date": 1486557078, "creation_date": 1486554968, "last_edit_date": 1486555961, "question_id": 42112447, "link": "https://stackoverflow.com/questions/42112447/c-passing-string-in-a-function-in-a-thread-and-returning-it-results-in-a-non-e", "title": "C - Passing string in a function in a thread and returning it results in a non-existant, non-printable string?", "body": "<p>Inside a thread, I run this function:</p>\n\n<pre><code>char *r = NetString(\"ch\",\"aaaaa\");\nprintf(\"%s\",r); printf(\"%s\",\"\\n\");\n</code></pre>\n\n<p>Which calls</p>\n\n<pre><code>char *NetString(char *id, char *data) {\n  char *result;\n  result = (char *)malloc(strlen(id)+strlen(data)+2);\n  strcpy(result, id);\n  strcat(result, \"/\");\n  strcat(result, data);\n  printf(\"%s\",result); printf(\"%s\",\"\\n\");\n  return (char *)result;\n}\n</code></pre>\n\n<p>In the console, when I compile this warning shows up:</p>\n\n<pre><code>warning: initialization makes pointer from integer without a cast\n[enabled by default]: char *r = NetString(\"ch\",\"aaaaa\");\n                                ^\n</code></pre>\n\n<p>If you need the full code (which may be a bit unorganized), here it is:\n<a href=\"http://pastebin.com/M38uFLbQ\" rel=\"nofollow noreferrer\">pastebin</a></p>\n\n<p>Apparently, this code runs as expected (returns \"ch/aaaaa\" twice) when not run in a thread, but when I run it in a thread, the string only prints once (that is, in the NetString function). Any help? Thanks a lot.</p>\n"}, {"tags": ["c", "ipc", "shared-memory"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 3, "creation_date": 1486554559, "post_id": 42112179, "comment_id": 71393275, "body": "Don&#39;t post code with external links. Create <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and insert that in to your question."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 1, "creation_date": 1486555198, "post_id": 42112179, "comment_id": 71393677, "body": "&quot;the headers are in common.h and they are correct&quot;, let us decide of that."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1486555773, "post_id": 42112179, "comment_id": 71394044, "body": "You don&#39;t seem to like for() loops..."}, {"owner": {"reputation": 6143, "user_id": 2147218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JQVSl.jpg?s=128&g=1", "display_name": "bazza", "link": "https://stackoverflow.com/users/2147218/bazza"}, "edited": false, "score": 0, "creation_date": 1486593252, "post_id": 42112179, "comment_id": 71417899, "body": "It&#39;s hard to tell without seeing the rest of your code, but it&#39;s worth a check; initialising the semaphores to 1 means that they&#39;re not available. It looks like you&#39;re planning on using one of them as a mutex (they&#39;re not), and it&#39;s normal for a mutex to be created &#39;available&#39; to be taken immediately afterwards. So you might be running into problems with semaphores not being takeable (semop() with sem_op=0)."}], "owner": {"reputation": 11, "user_id": 7534202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38fd62a5a860d21805a5a5a8cc2bf680?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7534202/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486590004, "creation_date": 1486554207, "last_edit_date": 1486554916, "question_id": 42112179, "link": "https://stackoverflow.com/questions/42112179/shared-memory-and-ipc-trouble", "title": "Shared memory and IPC Trouble", "body": "<p>I have an exam very early and have a big trouble with this code, it compiling but I have no idea why it blocking.</p>\n\n<p>There isn't error neither warning, compiled with last version of gcc on Ubuntu 16.04, the headers are in <code>common.h</code> and they are correct:</p>\n\n<pre><code>#include \"common.h\"\n\nint main()\n{\n    printf(\"Hello world!\\n\");\n    pid_t pid;\n    int shm = shmget(IPC_PRIVATE, sizeof(Esame), IPC_CREAT | 0664);\n    int sem = semget(IPC_PRIVATE, 3, IPC_CREAT | 0664);\n\n    semctl(sem, MUTEX, SETVAL, 1);\n    semctl(sem, PRENOTATI, SETVAL, 1);\n    semctl(sem, APPELLO, SETVAL, 1);\n\n    Esame* e = (Esame*)shmat(shm, 0, 0);\n    e-&gt;prenotati = 0;\n\n    pid = fork();\n\n    if (pid == 0)\n    {\n\n        docente(sem, e);\n        exit(0);\n    }\n\n    int i = 0;\n\n    while (i &lt; NSTUDENTI)\n    {\n        pid = fork();\n\n        if (pid == 0)\n        {\n            studente(sem, e);\n            exit(0);\n        }\n        i++;\n    }\n\n    i = 0;\n    while (i &lt; NSTUDENTI + 1)\n    {\n        wait(0);\n        i++;\n    }\n    shmctl(shm, IPC_RMID, 0);\n    semctl(sem, 0, IPC_RMID);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c#", "python", "c", "storage"], "comments": [{"owner": {"reputation": 1375, "user_id": 7173909, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-XbyQi0nbPtI/AAAAAAAAAAI/AAAAAAAAARw/JFwnDDfWNt0/photo.jpg?sz=128", "display_name": "bob marti", "link": "https://stackoverflow.com/users/7173909/bob-marti"}, "edited": false, "score": 2, "creation_date": 1486554441, "post_id": 42112128, "comment_id": 71393207, "body": "store the data in a database such as mySQL or sqlite3"}, {"owner": {"reputation": 3249, "user_id": 7147233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94f37773a80589840319d063ee51ab16?s=128&d=identicon&r=PG&f=1", "display_name": "WhatsThePoint", "link": "https://stackoverflow.com/users/7147233/whatsthepoint"}, "edited": false, "score": 0, "creation_date": 1486555018, "post_id": 42112128, "comment_id": 71393562, "body": "ever heard of a database?"}, {"owner": {"reputation": 19, "user_id": 7534184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d368db66eac48773e93b44d6df1724?s=128&d=identicon&r=PG&f=1", "display_name": "HeyOh", "link": "https://stackoverflow.com/users/7534184/heyoh"}, "edited": false, "score": 0, "creation_date": 1486555435, "post_id": 42112128, "comment_id": 71393825, "body": "Yes, I&#39;ve heard of databases. I was wondering if a DB would still be the optimal choice considering I have to store 150 numbers each second, and the frequency might be higher in the future and if I would end up needing to store 1000 numbers each second would a DB still be the best choice considering this might go on for years?"}, {"owner": {"reputation": 786, "user_id": 802221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73bff2cf466468b0a73212fdd989681?s=128&d=identicon&r=PG", "display_name": "codedstructure", "link": "https://stackoverflow.com/users/802221/codedstructure"}, "edited": false, "score": 0, "creation_date": 1486556873, "post_id": 42112128, "comment_id": 71394844, "body": "Have a look at <a href=\"http://db-engines.com/en/article/Time+Series+DBMS\" rel=\"nofollow noreferrer\">db-engines.com/en/article/Time+Series+DBMS</a> - some databases are designed for this sort of thing. Some (like rrdtool) manage storage by degrading resolution for older data."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7534184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d368db66eac48773e93b44d6df1724?s=128&d=identicon&r=PG&f=1", "display_name": "HeyOh", "link": "https://stackoverflow.com/users/7534184/heyoh"}, "edited": false, "score": 0, "creation_date": 1486554648, "post_id": 42112238, "comment_id": 71393325, "body": "Is it good even if I need to store more numbers? I mean I have a stream of 150 numbers to store each second ( and I might need to store it at higher frequency in the future) , for the whole day, and this will go on for years, wouldn&#39;t the DB get too lengthy?"}, {"owner": {"reputation": 630, "user_id": 4566639, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9fc996cf8825b218ec0be42e760b76ce?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/4566639/jb1"}, "reply_to_user": {"reputation": 19, "user_id": 7534184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d368db66eac48773e93b44d6df1724?s=128&d=identicon&r=PG&f=1", "display_name": "HeyOh", "link": "https://stackoverflow.com/users/7534184/heyoh"}, "edited": false, "score": 0, "creation_date": 1486555629, "post_id": 42112238, "comment_id": 71393953, "body": "No it will be fine. You can of course structure the database in a certain way that one entry pertains to one day? one hour? The structure is where database efficiency and elegance comes in, but depending on who you will want to use it you should design it well. if you are going to store all these figures they will become &quot;lengthy&quot; on one way or another?"}, {"owner": {"reputation": 630, "user_id": 4566639, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9fc996cf8825b218ec0be42e760b76ce?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/4566639/jb1"}, "reply_to_user": {"reputation": 19, "user_id": 7534184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d368db66eac48773e93b44d6df1724?s=128&d=identicon&r=PG&f=1", "display_name": "HeyOh", "link": "https://stackoverflow.com/users/7534184/heyoh"}, "edited": false, "score": 0, "creation_date": 1486555847, "post_id": 42112238, "comment_id": 71394104, "body": "You can also look at apache Hive but again its just another data warehousing tool"}], "tags": [], "owner": {"reputation": 630, "user_id": 4566639, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9fc996cf8825b218ec0be42e760b76ce?s=128&d=identicon&r=PG&f=1", "display_name": "JB1", "link": "https://stackoverflow.com/users/4566639/jb1"}, "is_accepted": false, "score": 1, "last_activity_date": 1486554367, "creation_date": 1486554367, "answer_id": 42112238, "question_id": 42112128, "link": "https://stackoverflow.com/questions/42112128/store-large-amount-of-data-and-access-it-when-needed/42112238#42112238", "title": "Store large amount of data and access it when needed", "body": "<p>An easy way to do this would be to store the data in a database such as SQL, with each entry containing your float, your epoch number and any other meta data you want to include. </p>\n\n<p>sqlite3 is an easy python API to create and add to databases. loads of tutorials online too ;)</p>\n"}], "owner": {"reputation": 19, "user_id": 7534184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d368db66eac48773e93b44d6df1724?s=128&d=identicon&r=PG&f=1", "display_name": "HeyOh", "link": "https://stackoverflow.com/users/7534184/heyoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "closed_date": 1486559408, "answer_count": 1, "score": 0, "last_activity_date": 1486555044, "creation_date": 1486554068, "last_edit_date": 1486555044, "question_id": 42112128, "link": "https://stackoverflow.com/questions/42112128/store-large-amount-of-data-and-access-it-when-needed", "closed_reason": "Needs more focus", "title": "Store large amount of data and access it when needed", "body": "<p>I need to store some data which is a float number and epoch of current time (frequency is 1 second but might be higher in future). I need to do this for long periods of time, might even be years and then I need to access it by date. Ex: Let's assume I've stored 1 year worth of data now I need to know the value of this float number when epoch was <code>X</code>.</p>\n\n<p>My first thought was to divide this data in directories, ex <code>Dir Year-2017, Month-02, Day-08</code>. And I was wondering what would be the best approach. Which language is more suited for this kind of thing? I mainly use <a href=\"/questions/tagged/python\" class=\"post-tag\" title=\"show questions tagged &#39;python&#39;\" rel=\"tag\">python</a> and <a href=\"/questions/tagged/c%23\" class=\"post-tag\" title=\"show questions tagged &#39;c#&#39;\" rel=\"tag\">c#</a>, but I can code in other languages too.</p>\n\n<p>I'm not looking for code snippets directly ( although if you want to put them they're highly appreciated ) but where can I learn to do so?</p>\n"}, {"tags": ["c", "protein-database"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1486553984, "post_id": 42112006, "comment_id": 71392904, "body": "I suppose that your file is in UTF-8"}, {"owner": {"reputation": 49, "user_id": 7534194, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10208518549096466/picture?type=large", "display_name": "Souparno Adhikary", "link": "https://stackoverflow.com/users/7534194/souparno-adhikary"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1486554114, "post_id": 42112006, "comment_id": 71392993, "body": "may be... but, how to handle that?"}, {"owner": {"reputation": 49, "user_id": 7534194, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10208518549096466/picture?type=large", "display_name": "Souparno Adhikary", "link": "https://stackoverflow.com/users/7534194/souparno-adhikary"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1486554188, "post_id": 42112006, "comment_id": 71393034, "body": "you can get the file here... and you can run the code yourself...  <a href=\"http://www.rcsb.org/pdb/explore/explore.do?structureId=5an3\" rel=\"nofollow noreferrer\">rcsb.org/pdb/explore/explore.do?structureId=5an3</a>"}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1486554215, "post_id": 42112006, "comment_id": 71393047, "body": "It&#39;s hard in C, you need to use a library. you should try in python language, it&#39;s more easy."}, {"owner": {"reputation": 49, "user_id": 7534194, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10208518549096466/picture?type=large", "display_name": "Souparno Adhikary", "link": "https://stackoverflow.com/users/7534194/souparno-adhikary"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1486554270, "post_id": 42112006, "comment_id": 71393087, "body": "I know it&#39;s hard in C, but we need to use C for a specific purpose (to meet a specific requirement)... So..."}], "owner": {"reputation": 49, "user_id": 7534194, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10208518549096466/picture?type=large", "display_name": "Souparno Adhikary", "link": "https://stackoverflow.com/users/7534194/souparno-adhikary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 296, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486553683, "creation_date": 1486553683, "question_id": 42112006, "link": "https://stackoverflow.com/questions/42112006/how-to-read-specific-atomic-coordinates-from-a-pdb-file-using-c", "title": "How to read specific atomic coordinates from a PDB file using C", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;stdlib.h&gt;\n\nint main()\n{\n    FILE *pdb;\n    pdb=fopen(\"5an3.pdb\", \"r\");\n    if(feof(pdb))\n    {\n        fprintf(stderr,\"File reading error!!! Probably your PDB file doesn't contain anything or poorly formatted\\n\");      \n        return 0;\n    }\n    char test[255];\n    while(!feof(pdb))\n    {   \n        fgets(test, 255, (FILE*)pdb);\n        char check[10];\n        strncpy(check,test,4);\n        if(strcmp(check,\"ATOM\")==0)\n        {\n            char resname[3];\n            strncpy(resname,&amp;test[17],3);\n            if((strstr(resname,\"THR\"))||(strstr(resname,\"TYR\"))||(strstr(resname,\"PHE\"))||(strstr(resname,\"TRP\")))\n            {\n                printf(\"%s\\n\",test);\n            }\n            else\n            {\n                printf(\"No Aromatic Residues Found!!! Better luck next time!!!\\n\");\n                return 0;\n            }\n        }           \n    }\n    fclose(pdb);\n    return 0;\n}\n</code></pre>\n\n<p>I tried to retrieve the records which have THR, PHE, TYR, TRP and the coordinates of their atoms for further processing. But, it seems that there are lots of invisible ascii characters in the pdb file which botch up everything. How to get rid of this?</p>\n"}, {"tags": ["c", "dos", "djgpp"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 2, "creation_date": 1486552344, "post_id": 42111493, "comment_id": 71391781, "body": "<code>counter</code> should be marked <code>volatile</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1486552504, "post_id": 42111493, "comment_id": 71391906, "body": "Also, get rid of the unnecessary casts in the calls to <code>_go32_dpmi_lock_code</code> and <code>...data</code>. They take <code>void*</code> (which will accept a pointer of any type) and <code>size_t</code> (which is the result of <code>sizeof</code>)."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 1, "creation_date": 1486552772, "post_id": 42111493, "comment_id": 71392101, "body": "Also, your use of <code>endHandler</code> to try and calculate the size of <code>handler</code> is dubious. Nothing guarantees that <code>endHandler</code> will come immediately after <code>handler</code> as you seem to expect. In GCC, the better solution is to put <code>handler</code> in a custom section and use a linker script variable to get its size. I&#39;m not sure about DJGPP however."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1486552935, "post_id": 42111493, "comment_id": 71392204, "body": "Did you try starting with the <a href=\"http://www.delorie.com/djgpp/doc/libc/libc_446.html\" rel=\"nofollow noreferrer\">example in the documentation</a>?"}, {"owner": {"reputation": 75, "user_id": 7533879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0e6b0347dc2a998d8695338792ade0?s=128&d=identicon&r=PG&f=1", "display_name": "tobywoby", "link": "https://stackoverflow.com/users/7533879/tobywoby"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1486555503, "post_id": 42111493, "comment_id": 71393865, "body": "I did not start with your linked example but with <a href=\"http://www.delorie.com/djgpp/doc/ug/interrupts/overview.html\" rel=\"nofollow noreferrer\">this guide</a> and looked into <a href=\"http://www.delorie.com/djgpp/doc/ug/interrupts/inthandlers2.html\" rel=\"nofollow noreferrer\">this</a>, which are on the DJGPP homepage so I thought they&#39;d be fine (they get the handler&#39;s size the same way). Using <code>volatile</code>&#39;s a first for me. Finally I read <a href=\"https://soulsphere.org/random/old-dos-code/docs/iea292.txt\" rel=\"nofollow noreferrer\">this tutorial</a> though its code seems to be incorrect in small parts. And you&#39;re right, I will do away with the kinda obscuring casts."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7533879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0e6b0347dc2a998d8695338792ade0?s=128&d=identicon&r=PG&f=1", "display_name": "tobywoby", "link": "https://stackoverflow.com/users/7533879/tobywoby"}, "edited": false, "score": 0, "creation_date": 1486592745, "post_id": 42123641, "comment_id": 71417651, "body": "Thanks! The info about the old handler being <i>that</i> important is nice to have. I looked into it further and found out <a href=\"http://webpages.charter.net/danrollins/techhelp/0105.HTM\" rel=\"nofollow noreferrer\">what the old handler probably does.</a> Adding <code>outportb(0x20, 0x20);</code> to my handler seems to make it work like the old one. But I will leave it at chaining if it really has that added benefit you mentioned."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "reply_to_user": {"reputation": 75, "user_id": 7533879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0e6b0347dc2a998d8695338792ade0?s=128&d=identicon&r=PG&f=1", "display_name": "tobywoby", "link": "https://stackoverflow.com/users/7533879/tobywoby"}, "edited": false, "score": 1, "creation_date": 1486610418, "post_id": 42123641, "comment_id": 71423036, "body": "@tobywoby It might not lose time on DOSBox which might not fully emulate the BIOS clock, for example by using the host operating system clock instead. On a real PC though it will lose time because the BIOS&#39;s timer interrupt handler increments a counter used by the BIOS to keep track of the current time."}], "tags": [], "owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "is_accepted": true, "score": 0, "last_activity_date": 1486588147, "creation_date": 1486588147, "answer_id": 42123641, "question_id": 42111493, "link": "https://stackoverflow.com/questions/42111493/protected-hardware-interrupt-handler-stuck-djgpp/42123641#42123641", "title": "Protected Hardware Interrupt Handler Stuck? (DJGPP)", "body": "<p>You need to chain the old interrupt handler, like in the example Jonathon Reinhart linked to in the documentation, as the old handler will tell the interrupt controller to stop asserting the interrupt. It will also have the added benefit of keeping the BIOS clock ticking, so it doesn't lose a few seconds each time you run the program. Otherwise when your interrupt handler returns the CPU will immediately call the handler again and your program will get stuck in an infinite loop.</p>\n\n<p>Also there's no guarantee that GCC will place <code>endHandler</code> after <code>handler</code>. I'd recommend just simply locking both the page <code>handler</code> starts on and the next page in case it straddles a page:</p>\n\n<pre><code>_go32_dpmi_lock_code((void *) handler, 4096);\n</code></pre>\n\n<p>Note the cast is required here, as there's no automatic conversion from pointer to a function types to pointer to void.</p>\n"}], "owner": {"reputation": 75, "user_id": 7533879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec0e6b0347dc2a998d8695338792ade0?s=128&d=identicon&r=PG&f=1", "display_name": "tobywoby", "link": "https://stackoverflow.com/users/7533879/tobywoby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 42123641, "answer_count": 1, "score": 3, "last_activity_date": 1486588147, "creation_date": 1486552164, "last_edit_date": 1486555850, "question_id": 42111493, "link": "https://stackoverflow.com/questions/42111493/protected-hardware-interrupt-handler-stuck-djgpp", "title": "Protected Hardware Interrupt Handler Stuck? (DJGPP)", "body": "<p>I'm trying to set up a hardware interrupt handler in protected mode, using <a href=\"/questions/tagged/djgpp-2\" class=\"post-tag\" title=\"show questions tagged &#39;djgpp-2&#39;\" rel=\"tag\">djgpp-2</a> for compiling in <a href=\"/questions/tagged/dosbox-0.74\" class=\"post-tag\" title=\"show questions tagged &#39;dosbox-0.74&#39;\" rel=\"tag\">dosbox-0.74</a>. Here's the smallest code possible (timer interrupt), I guess:</p>\n\n<pre><code>#include &lt;dpmi.h&gt;\n#include &lt;go32.h&gt;\n#include &lt;stdio.h&gt;\n\nunsigned int counter = 0;\n\nvoid handler(void) {\n    ++counter;\n}\nvoid endHandler(void) {}\n\nint main(void) {\n    _go32_dpmi_seginfo oldInfo, newInfo;\n\n    _go32_dpmi_lock_data(&amp;counter, sizeof(counter));\n    _go32_dpmi_lock_code(handler, endHandler - handler);\n\n    _go32_dpmi_get_protected_mode_interrupt_vector(8, &amp;oldInfo);\n\n    newInfo.pm_offset = (int) handler;\n    newInfo.pm_selector = _go32_my_cs();\n    _go32_dpmi_allocate_iret_wrapper(&amp;newInfo);\n\n    _go32_dpmi_set_protected_mode_interrupt_vector(8, &amp;newInfo);\n\n    while (counter &lt; 3) {\n        printf(\"%u\\n\", counter);\n    }\n\n    _go32_dpmi_set_protected_mode_interrupt_vector(8, &amp;oldInfo);\n    _go32_dpmi_free_iret_wrapper(&amp;newInfo);\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that I'm not chaining my handler but replacing it. The counter won't increase beyond <code>1</code> (therefore never stopping the main loop) making me guess that the handler doesn't return correctly or is called only once. Chaining on the other hand works fine (remove the wrapper-lines and replace <code>set_protected_mode</code> with <code>chain_protected_mode</code>).\nAm I missing a line?</p>\n"}, {"tags": ["c++", "c", "algorithm", "sliding", "sub-array"], "comments": [{"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1486551762, "post_id": 42111300, "comment_id": 71391374, "body": "No. Think about it, you have to scan the entire array. You can&#39;t get better than O(n). You can only optimize the coefficient of the linear run-time."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1486551781, "post_id": 42111300, "comment_id": 71391395, "body": "You cannot look at <code>n</code> numbers in less than <code>O(n)</code> time."}, {"owner": {"reputation": 159, "user_id": 6685452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c4db61b388b0c8084c3c310a994b5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/6685452/enigma"}, "edited": false, "score": 1, "creation_date": 1486552296, "post_id": 42111300, "comment_id": 71391744, "body": "If i just want to find out maximum value of sum from the obtained answer?"}, {"owner": {"reputation": 691, "user_id": 4466507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001371092691/picture?type=large", "display_name": "\u0412\u0438\u0442\u0430\u043b\u0438\u043a \u0411\u0443\u0448\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/4466507/%d0%92%d0%b8%d1%82%d0%b0%d0%bb%d0%b8%d0%ba-%d0%91%d1%83%d1%88%d0%b0%d0%b5%d0%b2"}, "edited": false, "score": 0, "creation_date": 1486552595, "post_id": 42111300, "comment_id": 71391969, "body": "if you compute a new array <code>sums</code>, where <code>sums[i] = arr[0] + ... + arr[i]</code> you could return a result in <code>O(n - k)</code>"}, {"owner": {"reputation": 394, "user_id": 7433927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cedd4cabe5e21c0ba67c5bcf9954632?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Petrovic", "link": "https://stackoverflow.com/users/7433927/petar-petrovic"}, "edited": false, "score": 1, "creation_date": 1486552769, "post_id": 42111300, "comment_id": 71392098, "body": "the result will have size n - k + 1. If k is constant, generating n - k + 1 numbers in O(log n) time seems to be impossible."}, {"owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "reply_to_user": {"reputation": 691, "user_id": 4466507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001371092691/picture?type=large", "display_name": "\u0412\u0438\u0442\u0430\u043b\u0438\u043a \u0411\u0443\u0448\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/4466507/%d0%92%d0%b8%d1%82%d0%b0%d0%bb%d0%b8%d0%ba-%d0%91%d1%83%d1%88%d0%b0%d0%b5%d0%b2"}, "edited": false, "score": 0, "creation_date": 1486553098, "post_id": 42111300, "comment_id": 71392323, "body": "@\u0412\u0438\u0442\u0430\u043b\u0438\u043a\u0411\u0443\u0448\u0430\u0435\u0432 Unless I am mistaken computing the array <code>sums</code> has <code>O(n)</code> complexity. After all, you need to read every element of <code>arr</code>, which has the size <code>n</code>. Consequently, I believe your approach has the overall complexity <code>O(n)</code>."}, {"owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "edited": false, "score": 0, "creation_date": 1486555363, "post_id": 42111300, "comment_id": 71393781, "body": "What is wrong with <code>O(n)</code> time?"}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 6685452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c4db61b388b0c8084c3c310a994b5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/6685452/enigma"}, "edited": false, "score": 1, "creation_date": 1486552212, "post_id": 42111357, "comment_id": 71391686, "body": "If i just want to find out maximum value from the obtained answer?"}, {"owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "reply_to_user": {"reputation": 159, "user_id": 6685452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c4db61b388b0c8084c3c310a994b5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/6685452/enigma"}, "edited": false, "score": 0, "creation_date": 1486552324, "post_id": 42111357, "comment_id": 71391771, "body": "@Enigma max value in the array, or the max sum among the consecutive sub-array sums? Actually, scratch what I just asked, since in both case you would again need to have extra information to be able to avoid checking each and every value in the array, which means that you need <code>O(n)</code> time if you do not have any extra information regarding the array or the values included in it."}, {"owner": {"reputation": 159, "user_id": 6685452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c4db61b388b0c8084c3c310a994b5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/6685452/enigma"}, "edited": false, "score": 1, "creation_date": 1486552717, "post_id": 42111357, "comment_id": 71392063, "body": "Max value of sum."}, {"owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "reply_to_user": {"reputation": 159, "user_id": 6685452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c4db61b388b0c8084c3c310a994b5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/6685452/enigma"}, "edited": false, "score": 1, "creation_date": 1486552970, "post_id": 42111357, "comment_id": 71392229, "body": "@Enigma <a href=\"http://www.geeksforgeeks.org/largest-sum-contiguous-subarray/\" rel=\"nofollow noreferrer\">Maximum sum continuous sub-array</a> is a well-studied problem, and you may consider using a special version of that to find out what you are asking. Still, without some extra information (i.e. for <i>any</i> generic array) the known efficient solution for that problem has the complexity of <code>O(n)</code>. As I repetitively put, <b>you need to have some extra information</b> avoid looking into each element of the array and <b>to achieve a better complexity</b>."}], "tags": [], "owner": {"reputation": 4154, "user_id": 3844480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ho59A.jpg?s=128&g=1", "display_name": "ilim", "link": "https://stackoverflow.com/users/3844480/ilim"}, "is_accepted": false, "score": 7, "last_activity_date": 1495350074, "last_edit_date": 1495350074, "creation_date": 1486551816, "answer_id": 42111357, "question_id": 42111300, "link": "https://stackoverflow.com/questions/42111300/to-find-sum-of-all-consecutive-sub-array-of-length-k-in-a-given-array/42111357#42111357", "title": "To find sum of all consecutive sub-array of length k in a given array", "body": "<p>Unless you know certain specific properties of the array (e.g. the ordering of the elements, the range of the elements included in the array, etc.) then you would need to check each individual value, resulting in an <code>O(n)</code> complexity.</p>\n\n<p><strong>If</strong>, for instance, you knew that the sum of the values in the array were <code>T</code> (perhaps because you knew <code>T</code> itself or were given the range) then you could consider that all the elements except the first and last <code>(K-1)</code> elements would be included in <code>K</code> different sums. This would mean a sum of <code>T.K</code> minus some amount, and you could reduce the values of the first and last <code>K</code> values appropriate amount of times, resulting in an algorithm of complexity <code>O(K)</code>.</p>\n\n<p>But note that, in order to achieve a strategy similar to this, you would have to know some other specific information regarding the values in the array, may that be their range or their sum.</p>\n"}, {"tags": [], "owner": {"reputation": 605, "user_id": 7413747, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CPWIY.jpg?s=128&g=1", "display_name": "oybek", "link": "https://stackoverflow.com/users/7413747/oybek"}, "is_accepted": false, "score": 1, "last_activity_date": 1495100537, "creation_date": 1495100537, "answer_id": 44044184, "question_id": 42111300, "link": "https://stackoverflow.com/questions/42111300/to-find-sum-of-all-consecutive-sub-array-of-length-k-in-a-given-array/44044184#44044184", "title": "To find sum of all consecutive sub-array of length k in a given array", "body": "<p>You can use Segment tree data structure, though building of it will take O(n log n), but than you can find sum of any interval in O( log n ), and modify each element of array in O( log n )\n<a href=\"https://en.wikipedia.org/wiki/Segment_tree\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Segment_tree</a></p>\n"}], "owner": {"reputation": 159, "user_id": 6685452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c4db61b388b0c8084c3c310a994b5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/6685452/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 958, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1499315117, "creation_date": 1486551672, "last_edit_date": 1499315117, "question_id": 42111300, "link": "https://stackoverflow.com/questions/42111300/to-find-sum-of-all-consecutive-sub-array-of-length-k-in-a-given-array", "title": "To find sum of all consecutive sub-array of length k in a given array", "body": "<p>I want to find out all the sum of continuous sub-array of length <code>K</code>\nfor a given array of Length <code>n</code> given that <code>k &lt; n</code>. For example, let the given array be <code>arr[6]={1,2,3,4,5,6}</code> and <code>k=3</code>,then answer is <code>(6,9,12,15)</code>.\nIt can be obtained as :</p>\n\n<pre><code>(1+2+3)=6,\n(2+3+4)=9,\n(3+4+5)=12,\n(4+5+6)=15.\n</code></pre>\n\n<p>I have tried this using sliding window of length <code>k</code>,but its time complexity is <code>O(n)</code>.Is any solution which takes even less time such as <code>O(log n)</code>.</p>\n"}, {"tags": ["python", "c++", "c"], "comments": [{"owner": {"reputation": 10709, "user_id": 3212865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B6qLg.jpg?s=128&g=1", "display_name": "spectras", "link": "https://stackoverflow.com/users/3212865/spectras"}, "edited": false, "score": 0, "creation_date": 1486547736, "post_id": 42109708, "comment_id": 71388591, "body": "If it&#39;s a different program, it&#39;s, by definition, not the same interpreter instance."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 2, "creation_date": 1486547964, "post_id": 42109708, "comment_id": 71388764, "body": "There is no such thing as a &quot;C/C++ program&quot;. Decide which language you are using. If it is C, then remove the C++ tag."}], "answers": [{"tags": [], "owner": {"reputation": 1024, "user_id": 2441656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d540ddabdd3013d67723b76e340b0a0?s=128&d=identicon&r=PG", "display_name": "cnettel", "link": "https://stackoverflow.com/users/2441656/cnettel"}, "is_accepted": false, "score": 1, "last_activity_date": 1486547814, "last_edit_date": 1495539925, "creation_date": 1486547814, "answer_id": 42109855, "question_id": 42109708, "link": "https://stackoverflow.com/questions/42109708/embeding-python-in-c-persistence-of-interpreter-across-execution/42109855#42109855", "title": "Embeding Python in C++: persistence of interpreter across execution", "body": "<p>No. The CPython interpreter itself does not work like that. There is no distinct interpreter object, but rather a floating set of globals with a stateful API. What's worse, Python code can load arbitrary other libraries, whose state can definitely not be persisted (in general).</p>\n\n<p>What you can do is to pickle the existing variables. That can sometimes bring you somewhere close. That is not really a hosting problem, but a Python problem. Naturally, though, you could make sure that your C code hosting Python made sure to execute the serializations steps after the \"real\" Python code has finished executing. Something like <a href=\"https://stackoverflow.com/questions/2960864/how-can-i-save-all-the-variables-in-the-current-python-session\">How can I save all the variables in the current python session?</a> might be a starting point.</p>\n"}], "owner": {"reputation": 51, "user_id": 5861487, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rDcZdwyzi68/AAAAAAAAAAI/AAAAAAAAAJs/j0SlzkNKayk/photo.jpg?sz=128", "display_name": "ashhadul islam", "link": "https://stackoverflow.com/users/5861487/ashhadul-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486549225, "creation_date": 1486547431, "last_edit_date": 1486549225, "question_id": 42109708, "link": "https://stackoverflow.com/questions/42109708/embeding-python-in-c-persistence-of-interpreter-across-execution", "title": "Embeding Python in C++: persistence of interpreter across execution", "body": "<p>Using Py_Initialize(), we can start the python interpreter in a C++ program.\nHowever as the function does not return anything, we cannot use the same interpreter in a different program.\nIs there any way of calling Py_Initialize() in one C++ program, make the interpreter persistent and use it in a different C++ program(without calling Py_Initialize() again)?</p>\n\n<p>Edit: To be more specific, Is there a way can get hold of an instance of a python interpreter and pass it to another execution as a parameter and use it to run python scripts.</p>\n"}, {"tags": ["c", "video", "hevc"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1486547258, "post_id": 42109557, "comment_id": 71388215, "body": "That isn&#39;t a macro, so that \\ is <i>pointless</i>. The code would be completely valid without it. I suspect someone sniped that code from what was at-one-time a macro, and just left it as-is."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1486547516, "post_id": 42109557, "comment_id": 71388414, "body": "The <code>+ (media_duration &gt;&gt; 1)</code> is intended to round the value up, assuming that you convert the result to an <code>int</code> at some point."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 5, "last_activity_date": 1486547115, "creation_date": 1486547115, "answer_id": 42109607, "question_id": 42109557, "link": "https://stackoverflow.com/questions/42109557/backslash-in-c-source-file/42109607#42109607", "title": "Backslash in c source file", "body": "<p>It's a line-continuation escape. It means the compiler will consider the next line as a part of the current line.</p>\n\n<p>It makes the code you show in practice being</p>\n\n<pre><code>frame_rate = (float)\n                ( ( ( frames * media_timescale) + ( media_duration &gt;&gt; 1 ) ) /\n                 media_duration);\n</code></pre>\n\n<p>There's no real need for it in this case though, except as maybe some style-guide followed by the author had it as a requirement.</p>\n\n<p>Line continuation is needed to define \"multi-line\" macros, and are also often used for long strings. But besides those places, it serves no real purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 852, "user_id": 1917004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e12a0abb82fac3b2293597967a7ec90d?s=128&d=identicon&r=PG", "display_name": "ctrl-shift-esc", "link": "https://stackoverflow.com/users/1917004/ctrl-shift-esc"}, "is_accepted": false, "score": 1, "last_activity_date": 1486547177, "creation_date": 1486547177, "answer_id": 42109621, "question_id": 42109557, "link": "https://stackoverflow.com/questions/42109557/backslash-in-c-source-file/42109621#42109621", "title": "Backslash in c source file", "body": "<p>Backslash is used to split a long line into 2 shorter lines, without signifying an end of the statement. This is usually done when a single line statement might be too long to read.</p>\n"}, {"comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1486549773, "post_id": 42109631, "comment_id": 71389996, "body": "I&#39;ve removed the rather blatant copy of someone else&#39;s example. When you want to reference someone else&#39;s work, please use proper quoting and attribution, and only <i>sparingly to support your own words</i>."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1486549876, "post_id": 42109631, "comment_id": 71390061, "body": "And I don&#39;t see how a link to a Python post is relevant to a question about C. Python&#39;s logical line rules differ in some crucial areas from those in C."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7533668"}, "is_accepted": false, "score": 0, "last_activity_date": 1486549711, "last_edit_date": 1495539925, "creation_date": 1486547208, "answer_id": 42109631, "question_id": 42109557, "link": "https://stackoverflow.com/questions/42109557/backslash-in-c-source-file/42109631#42109631", "title": "Backslash in c source file", "body": "<p>The backslash is a <strong>line continuation</strong>. It makes no difference other than for readability purposes (80 characters per line is usually the recommended limit for most style guides).</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/53162/how-can-i-do-a-line-break-line-continuation-in-python\">How can I do a line break (line continuation) in Python?</a></p>\n"}, {"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1512049501, "creation_date": 1512049501, "answer_id": 47574967, "question_id": 42109557, "link": "https://stackoverflow.com/questions/42109557/backslash-in-c-source-file/47574967#47574967", "title": "Backslash in c source file", "body": "<p>I don't think anybody could describe this better than the standard. Hence, according to <a href=\"https://port70.net/~nsz/c/c11/n1570.html#5.1.1.2\" rel=\"nofollow noreferrer\">C11/section 5.1.1.2p1</a>, which summarises the stages of translation (<em>compilation</em>, if you will) which occur when you invoke your compiler:</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Each instance of a backslash character (<code>\\</code>) immediately followed by a new-line character is deleted, splicing physical source lines to form logical source lines. Only the last backslash on any physical source line shall be eligible for being part of such a splice. A source file that is not empty shall end in a new-line character, which shall not be immediately preceded by a backslash character before any such splicing takes place.</li>\n  </ol>\n</blockquote>\n\n<p>Thus, from your example, the first line ends up effectively <em>spliced</em> (joined) with the second due to the combination of the backslash and newline.</p>\n"}], "owner": {"reputation": 1761, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 42109607, "answer_count": 4, "score": 2, "last_activity_date": 1512049501, "creation_date": 1486546999, "last_edit_date": 1486549899, "question_id": 42109557, "link": "https://stackoverflow.com/questions/42109557/backslash-in-c-source-file", "title": "Backslash in c source file", "body": "<p>I have follow code same as it is on different lines:</p>\n\n<pre><code>frame_rate = (float)\n                ( ( ( frames * media_timescale) + \\   //WHY???\n                    ( media_duration &gt;&gt; 1 ) ) /\n                 media_duration);\n</code></pre>\n\n<p>I am not understanding what is backslash doing in source file ?\nAlso to calculate the frame rate simply we can do as follow:</p>\n\n<pre><code>frame_rate = (float) ( (  frames * media_timescale) / media_duration);\n</code></pre>\n\n<p>Is there any specific intention to write first type of code?</p>\n"}, {"tags": ["c", "xcode", "pointers"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1486546923, "post_id": 42109418, "comment_id": 71387946, "body": "That code shouldn&#39;t even compile with clang (what Xcode uses). The error &quot;Assigning to &#39;int *&#39; from &#39;const int *&#39; discards qualifiers&quot; should be produced. If it isn&#39;t, you&#39;re settings are incredibly forgiving. <a href=\"http://stackoverflow.com/a/12245370/1322972\">See this answer</a>."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1486548333, "post_id": 42109418, "comment_id": 71389031, "body": "Did you check the generated code? I could imagine that the compiler doesn&#39;t read <code>con</code> as it is const and not volatile and immediately puts the value 5 into parameter list for <code>printf</code>. You might try to use <code>volatile const int con = 5;</code> Or you might stop abusing weird pointers. ;)"}, {"owner": {"reputation": 23, "user_id": 6055130, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hHMt-MOqnJ4/AAAAAAAAAAI/AAAAAAABHNA/KU396eJlIs8/photo.jpg?sz=128", "display_name": "pcbtt", "link": "https://stackoverflow.com/users/6055130/pcbtt"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1486623850, "post_id": 42109418, "comment_id": 71427514, "body": "@Gerhardh yes volatile did work, I got 6 for both value. :)"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6055130, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hHMt-MOqnJ4/AAAAAAAAAAI/AAAAAAABHNA/KU396eJlIs8/photo.jpg?sz=128", "display_name": "pcbtt", "link": "https://stackoverflow.com/users/6055130/pcbtt"}, "edited": false, "score": 0, "creation_date": 1486623783, "post_id": 42117126, "comment_id": 71427476, "body": "You mean const variable act like a macro?"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1486624387, "post_id": 42117126, "comment_id": 71427754, "body": "No. The compiler knows that you initialzed it with 5. And you are not allowed to modify it. Without volatile keyword the compiler is not forced to read it again for each access."}, {"owner": {"reputation": 2331, "user_id": 5563916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2ccad50fd4a22055ffb2ccf0859c5e?s=128&d=identicon&r=PG&f=1", "display_name": "nnovich-OK", "link": "https://stackoverflow.com/users/5563916/nnovich-ok"}, "edited": false, "score": 0, "creation_date": 1486624389, "post_id": 42117126, "comment_id": 71427757, "body": "In described case yes. Compiler replaced <code>printf(&quot;%d - %d&quot;,con,*p);</code> with <code>printf(&quot;%d - %d&quot;,5,*p);</code> since con value is expected to be known at compile time."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1486624515, "post_id": 42117126, "comment_id": 71427816, "body": "If you have a register of some clock hardware it would be an option to defibe the variable const volatile. The you mustn&#39;t write to it but it can change autonatically. Due to volatile it must be read each time. This is not how a macro works"}, {"owner": {"reputation": 2331, "user_id": 5563916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2ccad50fd4a22055ffb2ccf0859c5e?s=128&d=identicon&r=PG&f=1", "display_name": "nnovich-OK", "link": "https://stackoverflow.com/users/5563916/nnovich-ok"}, "reply_to_user": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1486624907, "post_id": 42117126, "comment_id": 71428014, "body": "@Gerhardh, Generally speaking, you are totally right. <code>const</code> and macro are different approaches and they never meant to be the same thing. But @pcbtt is trying to understand code generated for this particular case with <code>printf</code> and indeed it&#39;s identical to the following: <code>#define con 5 &lt;new line&gt; printf(&quot;%d - %d&quot;,con,*p);</code>. So precise answer should be &quot;const and macro aren&#39;t the same thing, but in this particular case they behave identically&quot;"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "reply_to_user": {"reputation": 23, "user_id": 6055130, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hHMt-MOqnJ4/AAAAAAAAAAI/AAAAAAABHNA/KU396eJlIs8/photo.jpg?sz=128", "display_name": "pcbtt", "link": "https://stackoverflow.com/users/6055130/pcbtt"}, "edited": false, "score": 0, "creation_date": 1486625178, "post_id": 42117126, "comment_id": 71428137, "body": "If the mechanism is totally different then I would not emphazise that the result is similar in this case. If you don&#39;t point out the differences, @pcbtt might come to the right result for the wrong reasons and will not understand when it is same and when it is not."}], "tags": [], "owner": {"reputation": 2331, "user_id": 5563916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2ccad50fd4a22055ffb2ccf0859c5e?s=128&d=identicon&r=PG&f=1", "display_name": "nnovich-OK", "link": "https://stackoverflow.com/users/5563916/nnovich-ok"}, "is_accepted": true, "score": 1, "last_activity_date": 1486567591, "creation_date": 1486567591, "answer_id": 42117126, "question_id": 42109418, "link": "https://stackoverflow.com/questions/42109418/xcode-c-compiler-gives-different-result-about-integer-pointer-to-const-integer-v/42117126#42117126", "title": "XCode C compiler gives different result about integer pointer to const integer value, why?", "body": "<p>Tried this with VisualStudio, get the same result as with XCode. Assembly listing proved @Gerhardh point:</p>\n\n<ul>\n<li><code>(*p) +=1;</code> successfully increases value of <code>con</code> in RAM </li>\n<li><code>printf(\"Add of constant:%p\\n\",&amp;con);</code> prints address of this memory correctly</li>\n<li><code>printf(\"%d - %d\",con,*p);</code> doesn't read <code>con</code> value from RAM, but passes 5 directly into printf. Optimization threw away unnecessary read for value known at compile time. Here is related assembly listing</li>\n</ul>\n\n<hr>\n\n<pre><code>printf(\"%d - %d\",con,*p);\n\nmov         eax,dword ptr [p]                   //get p\nmov         ecx,dword ptr [eax]                 //get *p\npush        ecx                                 //push *p (3rd param)\npush        5                                   //push 5 (2nd param). No read of con\npush        offset string \"%d - %d\" (415800h)   //push addr of format string (1st param)\ncall        dword ptr [__imp__printf (4182BCh)] //call printf()\n</code></pre>\n\n<p>Obviously, compiler on your VM didn't perform the same optimization.</p>\n"}], "owner": {"reputation": 23, "user_id": 6055130, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hHMt-MOqnJ4/AAAAAAAAAAI/AAAAAAABHNA/KU396eJlIs8/photo.jpg?sz=128", "display_name": "pcbtt", "link": "https://stackoverflow.com/users/6055130/pcbtt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 42117126, "answer_count": 1, "score": 1, "last_activity_date": 1486567591, "creation_date": 1486546616, "question_id": 42109418, "link": "https://stackoverflow.com/questions/42109418/xcode-c-compiler-gives-different-result-about-integer-pointer-to-const-integer-v", "title": "XCode C compiler gives different result about integer pointer to const integer value, why?", "body": "<p>In XCode I've tried to manipulate <code>const int</code> value by using pointer. Here is the code:</p>\n\n<pre><code>const int con = 5;\n\nint *p;\np = &amp;con;\n\n(*p) +=1;\n\nprintf(\"Add of constant:%p\\n\",&amp;con);\nprintf(\"Add of pointer:%p\\n\",p);\n\nprintf(\"%d - %d\",con,*p);\n</code></pre>\n\n<p>Result is like that on XCode:</p>\n\n<pre><code>Add of constant:0x7fff5fbff79c\nAdd of pointer:0x7fff5fbff79c\n5 - 6\n</code></pre>\n\n<p>but on linux virtual machine values of <code>con</code> and <code>*p</code> is same <code>6</code>. </p>\n\n<p>Why there is a difference between values on XCode?</p>\n"}, {"tags": ["c", "sockets", "ssl", "openssl", "tls1.2"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1486562174, "post_id": 42109328, "comment_id": 71398645, "body": "Please <a href=\"https://stackoverflow.com/posts/42109328/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">what you have tried so far</a>.  You should include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"comments": [{"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1532433131, "post_id": 42118456, "comment_id": 89963605, "body": "it is supported . see <code>enable-heartbeats</code> arg."}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1532765228, "post_id": 42118456, "comment_id": 90104827, "body": "Note that I was explicitly talking about heartbeats in TLS being removed in 1.1.0 - not heartbeats in DTLS. The <code>enable-heartbeats</code> option in 1.1.0 is for DTLS only."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1532941386, "post_id": 42118456, "comment_id": 90145994, "body": "dude did you use it ever?"}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1532956307, "post_id": 42118456, "comment_id": 90155255, "body": "Nobody uses TLS heartbeats. That&#39;s why it was removed. The CHANGES entry for its removal is here: <a href=\"https://github.com/openssl/openssl/blob/201b305a2409d9eb13b5e4bfbd4967e04e155a60/CHANGES#L1066-L1069\" rel=\"nofollow noreferrer\">github.com/openssl/openssl/blob/&hellip;</a>"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1532972977, "post_id": 42118456, "comment_id": 90165268, "body": "only option if you need to send data after 2 hours of empty connection.in my case it&#39;s over vpn. if thread is stalled over two hours it wont send anything after that regards of keepalive .<code>SSL_heartbeat</code> used  to solve this. it were streaming socket and tls , 1,1,0 ."}, {"owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1532991468, "post_id": 42118456, "comment_id": 90172633, "body": "The commit that removed this support in TLS is here: <a href=\"https://github.com/openssl/openssl/commit/22e3dcb780\" rel=\"nofollow noreferrer\">github.com/openssl/openssl/commit/22e3dcb780</a> That commit first appeared in 1.1.0-pre3, i.e. in one of the pre-releases of 1.1.0 while it was still in alpha/beta testing. If this used to work for you in 1.1.0 then plausibly you were using one of the early pre-release versions."}], "tags": [], "owner": {"reputation": 5562, "user_id": 1946679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed74e2cdc59d058b76a76c90dd3c3bdc?s=128&d=identicon&r=PG", "display_name": "Matt Caswell", "link": "https://stackoverflow.com/users/1946679/matt-caswell"}, "is_accepted": false, "score": 3, "last_activity_date": 1486571105, "creation_date": 1486571105, "answer_id": 42118456, "question_id": 42109328, "link": "https://stackoverflow.com/questions/42109328/what-is-the-openssl-api-to-configure-the-heartbeat-idle-timeout/42118456#42118456", "title": "What is the openssl API to configure the Heartbeat idle timeout", "body": "<p>I'm assuming you really do mean TLS as you said and not DTLS. Using heartbeats in TLS is quite unusual, although OpenSSL does support it in version 1.0.2. That support is removed from OpenSSL 1.1.0 so, for that reason, I would advise against using it in a new application. Use TCP keep alives instead.</p>\n\n<p>The Heartbeat API is really quite simple. You can do three things:</p>\n\n<p>1) Send a heartbeat using <code>SSL_heartbeat()</code></p>\n\n<p>2) Find out if a previously sent heartbeat is still pending a response using <code>SSL_get_tlsext_heartbeat_pending()</code></p>\n\n<p>and</p>\n\n<p>3) Set the Heartbeat mode to disallow the peer from sending heartbeat requests using <code>SSL_set_tlsext_heartbeat_no_requests()</code></p>\n\n<p>Anything else is up to the application. Retries should not be necessary in TLS because it is designed to run over a reliable transport layer. If the connection is alive, it will get there. If it isn't, it won't. The TCP layer will handle retransmission of lost packets. Timeouts should also really be done at the TCP layer. If the TCP connection times out the SSL connection will fail.</p>\n"}], "owner": {"reputation": 19, "user_id": 4713015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f3148bc29ad83cae10b9f8b77a0d7e?s=128&d=identicon&r=PG&f=1", "display_name": "user1290", "link": "https://stackoverflow.com/users/4713015/user1290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486571105, "creation_date": 1486546329, "question_id": 42109328, "link": "https://stackoverflow.com/questions/42109328/what-is-the-openssl-api-to-configure-the-heartbeat-idle-timeout", "title": "What is the openssl API to configure the Heartbeat idle timeout", "body": "<p>I am using a openssl library to implement tls server.\nHow to configure the Heartbeat request timeout and retry count using openssl API to control the keepalive message flow?</p>\n"}, {"tags": ["c", "asn.1"], "comments": [{"owner": {"reputation": 34174, "user_id": 65464, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d1fc3a85db4ff7618a7639742f356b3b?s=128&d=identicon&r=PG", "display_name": "Erich Kitzmueller", "link": "https://stackoverflow.com/users/65464/erich-kitzmueller"}, "edited": false, "score": 4, "creation_date": 1486546107, "post_id": 42109224, "comment_id": 71387290, "body": "maybe somewere there is a <code>#define DEBUG 1</code> or something similar?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1486546244, "post_id": 42109224, "comment_id": 71387385, "body": "@Ramis  It is a bad idea to use all capital letters for function names. Rename the function. It seems there is defined a macro with the same name. Or use #undef DEBUG"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1486546490, "post_id": 42109224, "comment_id": 71387579, "body": "As always in cases like these, read the <i>preprocessed code</i> to make sure you know what the compiler is actually seeing. With gcc, this is the <code>-E</code> option. There&#39;s probably a &quot;debug build&quot; flag that sets <code>DEBUG</code> to some constant using the preprocessor."}], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 6001222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGP6B.jpg?s=128&g=1", "display_name": "venky513", "link": "https://stackoverflow.com/users/6001222/venky513"}, "is_accepted": true, "score": 1, "last_activity_date": 1486546556, "creation_date": 1486546556, "answer_id": 42109400, "question_id": 42109224, "link": "https://stackoverflow.com/questions/42109224/debug-error-expected-identifier-or/42109400#42109400", "title": "DEBUG error expected identifier or &#39;(&#39;", "body": "<p>i think definitely there is a redeclaration of DEBUG or #defined as @ammoQ was saying. please check the other location and see that there are no same RE declarations\njust change it as DEBUG1 AND try it </p>\n"}], "owner": {"reputation": 8520, "user_id": 1151916, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/530d81fe88e95587a720993fc0a685dc?s=128&d=identicon&r=PG", "display_name": "Ramis", "link": "https://stackoverflow.com/users/1151916/ramis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 42109400, "answer_count": 1, "score": 0, "last_activity_date": 1486546556, "creation_date": 1486546039, "question_id": 42109224, "link": "https://stackoverflow.com/questions/42109224/debug-error-expected-identifier-or", "title": "DEBUG error expected identifier or &#39;(&#39;", "body": "<p>I am integrating asn1c code into Xcode project. Currently I am getting this error:</p>\n\n<pre><code>/asn1c/converter-sample.c:76:1: error: expected identifier or '('\nDEBUG(const char *fmt, ...) {\n^\n</code></pre>\n\n<p>Source code:</p>\n\n<pre><code>/* Debug output function */\nstatic inline void\nDEBUG(const char *fmt, ...) {  // 76th line\n    va_list ap;\n    if(!opt_debug) return;\n    fprintf(stderr, \"AD: \");\n    va_start(ap, fmt);\n    vfprintf(stderr, fmt, ap);\n    va_end(ap);\n    fprintf(stderr, \"\\n\");\n}\n</code></pre>\n\n<p>What is the way to fix this build error? </p>\n\n<p>I did look into similar questions in StackOverflow, but could not found answer which could help me.</p>\n"}, {"tags": ["c", "fftw"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1486546060, "post_id": 42108881, "comment_id": 71387258, "body": "No, but you can use the single precision (<code>float</code>) version of the FFTW libraries (<code>libfftw3f.lib</code>) if you&#39;re concerned about data size or speed."}], "answers": [{"comments": [{"owner": {"reputation": 4570, "user_id": 6570821, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2fffcd79f2d83cff1746a58fe6ba630?s=128&d=identicon&r=PG&f=1", "display_name": "xmas79", "link": "https://stackoverflow.com/users/6570821/xmas79"}, "edited": false, "score": 0, "creation_date": 1486735745, "post_id": 42109033, "comment_id": 71487634, "body": "My data originates in <code>int</code> format. I&#39;ve got the <code>int-&gt;double</code> conversion penalty, but I&#39;m fine with that. Thanks."}], "tags": [], "owner": {"reputation": 1024, "user_id": 2441656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d540ddabdd3013d67723b76e340b0a0?s=128&d=identicon&r=PG", "display_name": "cnettel", "link": "https://stackoverflow.com/users/2441656/cnettel"}, "is_accepted": true, "score": 5, "last_activity_date": 1486545460, "creation_date": 1486545460, "answer_id": 42109033, "question_id": 42108881, "link": "https://stackoverflow.com/questions/42108881/passing-int-instead-of-double-to-planner/42109033#42109033", "title": "Passing int instead of double to planner", "body": "<p>No, not using FFTW (which you tagged in the question). There are other libraries, but to be useful in practice you will need to give some thought to the fixed point representation of your choice.</p>\n\n<p>Note that floating point additions and multiplications, what's used in an FFT, is just as fast on modern x64 chips as integer operations of corresponding word size. The extra care needed to create an integer FFT result with reasonable precision would maybe even cause a slowdown in practice. The story is very different on chips with slower (or none) floating point hardware.</p>\n\n<p>Of course, conversion from integer to floating point itself is not free in the first place, so sometimes it makes sense to stay in floating point for a longer time than what is critically needed.</p>\n"}], "owner": {"reputation": 4570, "user_id": 6570821, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c2fffcd79f2d83cff1746a58fe6ba630?s=128&d=identicon&r=PG&f=1", "display_name": "xmas79", "link": "https://stackoverflow.com/users/6570821/xmas79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 42109033, "answer_count": 1, "score": 0, "last_activity_date": 1486545460, "creation_date": 1486545032, "question_id": 42108881, "link": "https://stackoverflow.com/questions/42108881/passing-int-instead-of-double-to-planner", "title": "Passing int instead of double to planner", "body": "<p>Is it possible use an <code>int</code> vector instead of using <code>double</code> vectors for fft calculation?</p>\n"}, {"tags": ["c", "while-loop", "do-while"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 3, "creation_date": 1486543924, "post_id": 42108460, "comment_id": 71385887, "body": "Hiya, a properly formatted question is more welcome here :)"}, {"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1486544181, "post_id": 42108460, "comment_id": 71386018, "body": "I see potential problem, but first edit your question so it looks readable."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1486544289, "post_id": 42108460, "comment_id": 71386091, "body": "Side note: all your function definition must be <code>...(void)</code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1486544319, "post_id": 42108460, "comment_id": 71386113, "body": "Please provide a proper indentation. Code that is hardly readable does not attract lots of people to help"}, {"owner": {"reputation": 11762, "user_id": 6530695, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/53a7a617c8e419f2562f0b00e6be10b1?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/6530695/tony"}, "edited": false, "score": 0, "creation_date": 1486544395, "post_id": 42108460, "comment_id": 71386156, "body": "Not my best edit.. I thought the problem was with the <code>while</code> loop inside the function.  I am not sure where his problem is due to his poor question."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1486544565, "post_id": 42108460, "comment_id": 71386257, "body": "Remove the <code>char ch;</code> you declared <i>inside</i> the do-while loop in <code>main()</code>. Start with that. Unrelated, the <code>if (head == NULL)...else...</code> stuff is worthless for a front-pushing linked list. Just allocate your new node and populate its members, set it&#39;s <code>ptr</code> member to <code>head</code>, then <code>head</code> to the new node pointer value. No if-else should be needed in that function."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1486546922, "post_id": 42108460, "comment_id": 71387943, "body": "Instead of editing trash formatted questions like this, teach the OP how to edit it themselves. By fixing it for them, you are sending out the signal that posting complete trash is ok on SO. The correct way to deal with questions like this is to leave a comment telling the OP to fix the formatting, down vote, then remove the down vote once they have fixed it."}], "answers": [{"tags": [], "owner": {"reputation": 30168, "user_id": 5612562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/gzBQY.jpg?s=128&g=1", "display_name": "msc", "link": "https://stackoverflow.com/users/5612562/msc"}, "is_accepted": false, "score": 2, "last_activity_date": 1486545443, "last_edit_date": 1486545443, "creation_date": 1486545133, "answer_id": 42108919, "question_id": 42108460, "link": "https://stackoverflow.com/questions/42108460/why-my-while-loop-condition-not-working/42108919#42108919", "title": "why my while loop condition not working?", "body": "<p>Why you are <strong>re-declare</strong> <code>char ch</code> inside the <code>loop</code>? </p>\n\n<p>Remove <code>char ch</code> inside loop and fix your problem. Like,</p>\n\n<pre><code>int main()\n{\n    char ch;\n    do\n    {\n        insert();\n        display();\n        printf(\"enter more data ? (y/n)\\n\");\n        scanf(\" %c\", &amp;ch);\n    }\n    while (ch != 'n');    \n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7503734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6717d9645098631ea9e270739fed5217?s=128&d=identicon&r=PG&f=1", "display_name": "Pratyush Kumar ASET Noida", "link": "https://stackoverflow.com/users/7503734/pratyush-kumar-aset-noida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1486545443, "creation_date": 1486543746, "last_edit_date": 1486544224, "question_id": 42108460, "link": "https://stackoverflow.com/questions/42108460/why-my-while-loop-condition-not-working", "title": "why my while loop condition not working?", "body": "<p>This program asks for number irrespective of what character you enter. Then the problem is in the while loop.</p>\n\n<p>Why my while loop condition not working ? checking temp isn't equal to NULL</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct node\n{\n    int num;\n    struct node *ptr;\n} nod;\nnod *head = NULL;\n\nvoid insert()\n{\n    int n;\n    nod *temp = (struct node*) malloc(sizeof(struct node));\n    printf(\"Enter nnumber \\n\");\n    scanf(\"%d\", &amp;n);\n    temp-&gt;num = n;\n    temp-&gt;ptr = NULL;\n    if (head == NULL)\n    {\n        head = temp;\n    }\n    else\n    {\n        temp-&gt;ptr = head;\n        head = temp;\n    }\n}\n\nvoid display()\n{\n    nod* temp;\n    temp = head;\n    while (temp != NULL)\n    {\n        printf(\" --&gt; %d\", temp-&gt;num);\n        temp = temp-&gt;ptr;\n    }\n}\n\nint main()\n{\n    char ch;\n    do\n    {\n        insert();\n        display();\n        char ch;\n        printf(\"\\n enter more data ? (y/n)\");\n        scanf(\"\\n %c\", &amp;ch);\n    }\n    while (ch != 'n');\n    return 0;\n}\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "x86", "simd", "intrinsics", "avx2"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1486544092, "post_id": 42108358, "comment_id": 71385982, "body": "Do you care about potential overflow, i.e. would it be better to unpack to 32 bits prior to the addition, or is this not a problem ?"}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1486722408, "post_id": 42108358, "comment_id": 71479273, "body": "@PaulR, Each 16-bit element contains a number between 0 and 255 as a pixel. So overflows might be saturated, but I don&#39;t care for this program. You mentioned a good point there are some extra and unused bits that I can use to increase the accuracy."}], "answers": [{"tags": [], "owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "is_accepted": false, "score": 3, "last_activity_date": 1486636793, "last_edit_date": 1495541843, "creation_date": 1486556637, "answer_id": 42113047, "question_id": 42108358, "link": "https://stackoverflow.com/questions/42108358/how-to-add-an-avx2-vector-horizontally-3-by-3/42113047#42113047", "title": "How to add an AVX2 vector horizontally 3 by 3?", "body": "<p>You could try something like this</p>\n\n<pre><code>__m256i idx1 = _mm256_setr_epi8(2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 0, 1);\n__m256i idx2 = _mm256_setr_epi32(1,2,3,4,5,6,7,0);\n\n__m256i t1 = _mm256_shuffle_epi8 (t0, idx1);\n__m256i t2 = _mm256_permute2x128_si256(t1, t1, 1);\n__m256i t3 = _mm256_blend_epi16(t1,t2,0x80);\n__m256i t4 = _mm256_permutevar8x32_epi32(t0, idx2);\n__m256i s = _mm256_add_epi16(t0, _mm256_add_epi16(t3,t4));\n</code></pre>\n\n<p>I based this example off <a href=\"https://stackoverflow.com/q/19516585/2542702\">this question</a>.</p>\n\n<p>Here is a working example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;x86intrin.h&gt;\n\nint main(void) {\n  short x[16];\n\n  for(int i=0; i&lt;16; i++) x[i] = i;\n  __m256i idx1 = _mm256_setr_epi8(2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 0, 1,\n                  2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 0, 1);\n  __m256i idx2 = _mm256_setr_epi32(1,2,3,4,5,6,7,0);\n\n  __m256i t0 = _mm256_loadu_si256((__m256i*)x);\n  __m256i t1 = _mm256_shuffle_epi8 (t0, idx1);\n  __m256i t2 = _mm256_permute2x128_si256(t1, t1, 1);\n  __m256i t3 = _mm256_blend_epi16(t1,t2,0x80);\n  __m256i t4 = _mm256_permutevar8x32_epi32(t0, idx2);\n  __m256i s = _mm256_add_epi16(t0, _mm256_add_epi16(t3,t4));\n\n  short y[16];\n  _mm256_storeu_si256((__m256i*)y, t0);\n  for(int i=0; i&lt;16; i++) printf(\"%2x \", y[i]); puts(\"\");\n  _mm256_storeu_si256((__m256i*)y, t3);\n  for(int i=0; i&lt;16; i++) printf(\"%2x \", y[i]); puts(\"\");\n  _mm256_storeu_si256((__m256i*)y, t4);\n  for(int i=0; i&lt;16; i++) printf(\"%2x \", y[i]); puts(\"\");\n  _mm256_storeu_si256((__m256i*)y, s);\n  for(int i=0; i&lt;16; i++) printf(\"%2x \", y[i]); puts(\"\");\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f \n1  2  3  4  5  6  7  8  9  a  b  c  d  e  f  0 \n2  3  4  5  6  7  8  9  a  b  c  d  e  f  0  1 \n3  6  9  c  f 12 15 18 1b 1e 21 24 27 2a 1d 10 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486558142, "post_id": 42113428, "comment_id": 71395752, "body": "I like your solution better than mine"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486558274, "post_id": 42113428, "comment_id": 71395846, "body": "Counting instructions, your solution uses 4 before the add and mine uses 5. I&#39;m not so familiar with <code>vpalignr</code>."}, {"owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1486558849, "post_id": 42113428, "comment_id": 71396232, "body": "@Zboson I found this instruction recently - it is very useful in order to calculate convolution."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486634528, "post_id": 42113428, "comment_id": 71433652, "body": "@Zboson A <a href=\"http://stackoverflow.com/a/42132108/2439725\">solution</a> with only 2 instructions before the adds is also possible, because we don&#39;t need an exact 256 bit shift. Some &#39;holes&#39; are allowed."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "reply_to_user": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "edited": false, "score": 0, "creation_date": 1486637124, "post_id": 42113428, "comment_id": 71435482, "body": "It turns out my original answer was correct so now my answer uses the same number of instructions as yours. Of course counting instructions is not the definitive metric for performance. It would be interesting to see what method wins. In any case it appears @wim has the best solution now."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1490496769, "post_id": 42113428, "comment_id": 73135853, "body": "@ErmIg, could you take a look at <a href=\"http://stackoverflow.com/questions/43023141/how-to-add-an-avx2-vector-5-by-5\">this question</a>"}], "tags": [], "owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "is_accepted": false, "score": 6, "last_activity_date": 1486558585, "last_edit_date": 1486558585, "creation_date": 1486557663, "answer_id": 42113428, "question_id": 42108358, "link": "https://stackoverflow.com/questions/42108358/how-to-add-an-avx2-vector-horizontally-3-by-3/42113428#42113428", "title": "How to add an AVX2 vector horizontally 3 by 3?", "body": "<p>You can try to use something like this:</p>\n\n<pre><code>#include &lt;immintrin.h&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;class T&gt; inline void Print(const __m256i &amp; v)\n{\n    T b[sizeof(v) / sizeof(T)];\n    _mm256_storeu_si256((__m256i*)b, v);\n    for (int i = 0; i &lt; sizeof(v) / sizeof(T); i++)\n        std::cout &lt;&lt; int(b[i]) &lt;&lt; \" \";\n    std::cout &lt;&lt; std::endl;\n}\n\ntemplate&lt;int shift&gt; inline __m256i Shift(const __m256i &amp; a)\n{\n    return _mm256_alignr_epi8(_mm256_permute2x128_si256(a, _mm256_setzero_si256(), 0x31), a, shift * 2);\n}\n\nint main()\n{\n    __m256i v0 = _mm256_setr_epi16(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15, 0);\n    __m256i v1 = Shift&lt;1&gt;(v0);\n    __m256i v2 = Shift&lt;2&gt;(v0);\n    __m256i r = _mm256_add_epi16(v0, _mm256_add_epi16(v1, v2));\n\n    Print&lt;short&gt;(v0);\n    Print&lt;short&gt;(v1);\n    Print&lt;short&gt;(v2);\n    Print&lt;short&gt;(r);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 0\n2 3 4 5 6 7 8 9 10 11 12 13 14 15 0 0\n3 4 5 6 7 8 9 10 11 12 13 14 15 0 0 0\n6 9 12 15 18 21 24 27 30 33 36 39 42 29 15 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486635170, "post_id": 42132108, "comment_id": 71434067, "body": "Awesome!  But the second column is wrong. It should be 15 not 30.  I original had 4 instructions and but then had to add one to fix that. One other point worth considering, I&#39;m not sure the OP means we can assume the last element is zero. Maybe the OP meant the last element should not be used in the addition. I don&#39;t know.  I mean what happens if you set the last element of t0 to 16 does this propagate to the sum? If so that&#39;s not what the OP wants I think. I may have made a mistake by doing <code>x[15] = 0</code>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486635425, "post_id": 42132108, "comment_id": 71434246, "body": "Yes I just removed the <code>x[15] = 0</code> and the last three elements of the sum become <code>32   46   45</code> but they should be <code>0 15 29</code>."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486635901, "post_id": 42132108, "comment_id": 71434543, "body": "@Zboson  Do you mean that the <code>30</code> in the row <code>sum = 0  30  29  42  |  39 ...</code> is wrong? As far as I understood the question this <code>30</code> was not of interest to the OP. output1...output5 is column 0,3 6,9,12, counting from the right?"}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 1, "creation_date": 1486636500, "post_id": 42132108, "comment_id": 71435014, "body": "@Zboson I think we don&#39;t have to worry about the value of <code>x[15]</code> because <code>sum[12, 9, 6, 3, 0] =   42   33   24   15    6 </code> is independent of the value of <code>x[15]</code> ."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486636567, "post_id": 42132108, "comment_id": 71435055, "body": "Oh, you&#39;re totally right, I just reread that question. I should not have changed my answer.  Great work!"}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486636749, "post_id": 42132108, "comment_id": 71435202, "body": "@Zboson Thanks!"}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1486637162, "post_id": 42132108, "comment_id": 71435506, "body": "I rolled back to my original answer. Now I use the same number of instructions as the accepted answer. Though you deserve best answer now."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1486723850, "post_id": 42132108, "comment_id": 71480241, "body": "Thanks guys for great answers. I think this answer might be the best. because of these points (not tested yet) First, this answer calculate the sum with 3 instructions but the accepted one use 2 set of <code>valignr</code> and <code>vperm*</code> to reorder them and then adding them totally 5 instructions which <code>valignr</code> , <code>vperm*</code>, and <code>vpsrldq</code> executed in shuffling port that might be better to use this method. Second I asked the question with intrinsics in a C program but The accepted answer is written in C++ and template. I want to change the accepted answer to this after I tested the performance and penalties"}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1486793631, "post_id": 42132108, "comment_id": 71510072, "body": "The speedup of this answer over accepted answer is  1 for small matrices, 1.0613810742, 1.0574408069, So there are not much diffrences."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1486989509, "post_id": 42132108, "comment_id": 71569717, "body": "@FackedDoctor You write that this piece of code is placed in the bottleneck section of your program. It is very likely  that this piece of code is only a very small part of this bottleneck, otherwise I would have expected a better speed up."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1486989560, "post_id": 42132108, "comment_id": 71569758, "body": "@FackedDoctor Have you vectorized the code that computes <code>v_sum</code> (the code before the horizontal sum)? What do you do with the results of <code>sum  = _mm256_add_epi16(_mm256_add_epi16(t0,t1),t2);</code>? You should certainly not  process output1, output2,... further in scalar mode! Moreover, do not store <code>sum</code> to memory and read it back with  <code>_mm256_store_si256((__m256i *)&amp;temp[0], sum); output1=sum[0];</code>.   You have to vectorize (almost) everything which is within the main loop of  your program to get good results."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1487098097, "post_id": 42132108, "comment_id": 71627308, "body": "@wim, Thank you.yes, I vectorized all the program and this piece of code is just for addition. and yes, the whole speed up over scalar is 15x but not because of this horizontal addition the last speed up was 13x when I changed the addition method the speedup changed to 15x. yes you are right. and yes I applied these points.  I write this speed ups to compare your answer with the accepted answer."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1487098951, "post_id": 42132108, "comment_id": 71627766, "body": "yes, I use avx2 instructions to extract the result and I have to store the result to a matrix. assume that each output X is a matrix place but in a row of the matrix and the largest distance between them is 12 element."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1487108195, "post_id": 42132108, "comment_id": 71632808, "body": "@FackedDoctor: Good work! Thanks for your reply. It&#39;s a pity that you cannot process outputX in a more SIMD way. Nevertheless, a speed op of 15x is great!"}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 1, "creation_date": 1487162694, "post_id": 42132108, "comment_id": 71657461, "body": "@wim, Actually I can process the outputs in a more SIMD way. I think it will yield another great speedup, I have to mask the results in a vector. The program has 3 steps. These five results are for step 1. Step 2 another five results and step 3 will compute another 5 results. it will generate 15 results that can be stored in an aligned address but I should play with it. these results are for these places:step 1: {12,9,6,3,0}, step 2: {13,10,7,4,1} step 3: {14,11,8,5,2} finally a vector containing {14,13,12,11,10,9,8,7,6,5,4,3,2,1,0} by unaligned store will finish the job."}, {"owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "reply_to_user": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1487172208, "post_id": 42132108, "comment_id": 71664402, "body": "@FackedDoctor : I think you are on the right track."}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1487177667, "post_id": 42132108, "comment_id": 71668670, "body": "@wim, Thanks. Now I&#39;m working on something else. When I&#39;ve developed that I will share it in stack"}, {"owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "edited": false, "score": 0, "creation_date": 1490496730, "post_id": 42132108, "comment_id": 73135848, "body": "@wim, could you take a look at <a href=\"http://stackoverflow.com/questions/43023141/how-to-add-an-avx2-vector-5-by-5\">this question</a>"}], "tags": [], "owner": {"reputation": 3352, "user_id": 2439725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/428ff617402eb64c48ed6dfc153617f9?s=128&d=identicon&r=PG", "display_name": "wim", "link": "https://stackoverflow.com/users/2439725/wim"}, "is_accepted": true, "score": 5, "last_activity_date": 1486630619, "creation_date": 1486630619, "answer_id": 42132108, "question_id": 42108358, "link": "https://stackoverflow.com/questions/42108358/how-to-add-an-avx2-vector-horizontally-3-by-3/42132108#42132108", "title": "How to add an AVX2 vector horizontally 3 by 3?", "body": "<p>You can do this with two adds and only 2 \"shuffles\": _mm256_bsrli_epi128 shifts in zeros at \npositions that are not of interest to the answer. For _mm256_permutevar8x32_epi32\nwe choose a permutation that duplicates the upper 32 bits, but these bits are also\nnot relevant for the answer.  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;x86intrin.h&gt;\n/*  gcc -O3 -Wall -m64 -march=haswell hor_sum3x3.c   */\nint print_vec_short(__m256i x);\nint print_12_9_6_3_0_short(__m256i x);\n\nint main() {\n   short x[16];\n\n   for(int i=0; i&lt;16; i++) x[i] = i+1; x[15] = 0;\n\n   __m256i t0   = _mm256_loadu_si256((__m256i*)x);                              \n\n\n   __m256i t1   = _mm256_bsrli_epi128(t0,2);             /* Shift 128 bit lanes in t0 right by 2 bytes while shifting in zeros. Fortunately the zeros are in the positions that we don't need */ \n   __m256i t2   = _mm256_permutevar8x32_epi32(t0,_mm256_set_epi32(7,7,6,5,4,3,2,1)); /* Shift right by 4 bytes     */\n   __m256i sum  = _mm256_add_epi16(_mm256_add_epi16(t0,t1),t2);\n\n   printf(\"t0  = \");print_vec_short(t0);\n   printf(\"t1  = \");print_vec_short(t1);\n   printf(\"t2  = \");print_vec_short(t2);\n   printf(\"sum = \");print_vec_short(sum);\n\n   printf(\"\\nvector elements of interest: columns 12, 9, 6, 3, 0:\\n\");\n   printf(\"t0[12, 9, 6, 3, 0]  = \");print_12_9_6_3_0_short(t0);\n   printf(\"t1[12, 9, 6, 3, 0]  = \");print_12_9_6_3_0_short(t1);\n   printf(\"t2[12, 9, 6, 3, 0]  = \");print_12_9_6_3_0_short(t2);\n   printf(\"sum[12, 9, 6, 3, 0] = \");print_12_9_6_3_0_short(sum);\n   return 0;\n}\n\n\nint print_vec_short(__m256i x){\n   short int v[16];\n   _mm256_storeu_si256((__m256i *)v,x);\n   printf(\"%4hi %4hi %4hi %4hi | %4hi %4hi %4hi %4hi | %4hi %4hi %4hi %4hi  | %4hi %4hi %4hi %4hi \\n\",\n          v[15],v[14],v[13],v[12],v[11],v[10],v[9],v[8],v[7],v[6],v[5],v[4],v[3],v[2],v[1],v[0]);\n   return 0;\n}\n\nint print_12_9_6_3_0_short(__m256i x){\n   short int v[16];\n   _mm256_storeu_si256((__m256i *)v,x);\n   printf(\"%4hi %4hi %4hi %4hi %4hi  \\n\",v[12],v[9],v[6],v[3],v[0]);\n   return 0;\n}\n</code></pre>\n\n<p>The output is:  </p>\n\n<pre><code>$ ./a.out\nt0  =    0   15   14   13 |   12   11   10    9 |    8    7    6    5  |    4    3    2    1 \nt1  =    0    0   15   14 |   13   12   11   10 |    0    8    7    6  |    5    4    3    2 \nt2  =    0   15    0   15 |   14   13   12   11 |   10    9    8    7  |    6    5    4    3 \nsum =    0   30   29   42 |   39   36   33   30 |   18   24   21   18  |   15   12    9    6 \n\nvector elements of interest: columns 12, 9, 6, 3, 0:\nt0[12, 9, 6, 3, 0]  =   13   10    7    4    1  \nt1[12, 9, 6, 3, 0]  =   14   11    8    5    2  \nt2[12, 9, 6, 3, 0]  =   15   12    9    6    3  \nsum[12, 9, 6, 3, 0] =   42   33   24   15    6  \n</code></pre>\n"}], "owner": {"reputation": 2109, "user_id": 7030791, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pIsKF.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7030791/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 42132108, "answer_count": 3, "score": 4, "last_activity_date": 1581563564, "creation_date": 1486543360, "last_edit_date": 1581563564, "question_id": 42108358, "link": "https://stackoverflow.com/questions/42108358/how-to-add-an-avx2-vector-horizontally-3-by-3", "title": "How to add an AVX2 vector horizontally 3 by 3?", "body": "<p>I have a <code>__m256i</code> vector containing 16x16-bit elements.I want to apply a three adjacent horizontal addition on it. In scalar mode I use the following code:</p>\n\n<pre><code>unsigned short int temp[16];\n__m256i sum_v;//has some values. 16 elements of 16-bit vector.   | 0 | x15 | x14 | x13 | ... | x3 | x2 | x1 |\n_mm256_store_si256((__m256i *)&amp;temp[0], sum_v);\noutput1 = (temp[0] + temp[1] + temp[2]);\noutput2 = (temp[3] + temp[4] + temp[5]);\noutput3 = (temp[6] + temp[7] + temp[8]);\noutput4 = (temp[9] + temp[10] + temp[11]);\noutput5 = (temp[12] + temp[13] + temp[14]); \n// Dont want the 15th element\n</code></pre>\n\n<p>Because this part is placed in the bottleneck section of my program, I decided to vectorize is using AVX2. Dreamy I can add them like the following pseudo:</p>\n\n<pre><code>sum_v                                     //|  0  | x15 | x14 | x13 |...| x10 |...| x7 |...| x4 |...| x1 | \nsum_v1 = sum_v &gt;&gt; 1*16                    //|  0  |  0  | x15 | x14 |...| x11 |...| x8 |...| x5 |...| x2 |  \nsum_v2 = sumv &gt;&gt; 2*16                     //|  0  |  0  |  0  | x15 |...| x12 |...| x9 |...| x6 |...| x3 |\nresult_vec = add_epi16 (sum_v,sum_v1,sum_v2)\n\n//then I should extact the result_vec to outputs \n</code></pre>\n\n<p>Adding them vertically will provide the answer.\nBut unfortunately, AVX2 has not a shift operation for 256 bits while the 256-bit register is viewed as two 128-bit lanes.  I should use permutation for this case. But I could not find an appropriate <code>permut</code>, <code>shuffle</code>, etc. to do this. Is there any suggestion for this implementation that should be as fast as possible.</p>\n\n<p>Using <code>gcc</code>, <code>linux mint</code>, <code>intrinsics</code>, <code>skylake</code>.</p>\n"}, {"tags": ["mysql", "c", "character-encoding"], "answers": [{"tags": [], "owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "is_accepted": false, "score": 1, "last_activity_date": 1486600316, "creation_date": 1486600316, "answer_id": 42126196, "question_id": 42108354, "link": "https://stackoverflow.com/questions/42108354/how-does-mysqldump-write-binary-data-into-files-for-mysql-logical-backup/42126196#42126196", "title": "How does mysqldump write binary data into files for MySQL logical backup?", "body": "<p><code>latin1</code>, <code>utf8</code>, etc are <code>CHARACTER SETs</code>.  They apply to <code>TEXT</code> and <code>VARCHAR</code> columns, <em>not</em> <code>BLOB</code> and <code>VARBINARY</code> columns.</p>\n\n<p>Using <code>--hex-blob</code> is a good idea.</p>\n\n<p>If you have \"unprintable characters\" in <code>TEXT</code> or <code>CHAR</code>, then either you have been trying to put a BLOB into such -- naughty -- or the print mechanism does is not set for the appropriate charset.</p>\n"}], "owner": {"reputation": 265, "user_id": 5954317, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/zeQTP.jpg?s=128&g=1", "display_name": "Casualet", "link": "https://stackoverflow.com/users/5954317/casualet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486600316, "creation_date": 1486543343, "last_edit_date": 1495535373, "question_id": 42108354, "link": "https://stackoverflow.com/questions/42108354/how-does-mysqldump-write-binary-data-into-files-for-mysql-logical-backup", "title": "How does mysqldump write binary data into files for MySQL logical backup?", "body": "<p>I am using mysqldump to back up a table. The schema is as follows:</p>\n\n<pre><code>CREATE TABLE `student` (\n  `ID` bigint(20) unsigned DEFAULT NULL,\n  `DATA` varbinary(64) DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=latin1;\n</code></pre>\n\n<p>I can use the following command to backup my data in the table.</p>\n\n<p><strong>mysqldump -uroot -p123456 tdb > dump.sql</strong>. </p>\n\n<p>Now I want to write my own code using the MySQL c interface to generate the file similar to dump.sql.\nSo I just </p>\n\n<ul>\n<li>read the data, and store it int char* p(using function mysql_fetch_row);</li>\n<li>write data into file using fprintf(f,\"%s\",p);</li>\n</ul>\n\n<p>However, when I check the table fields written into the file, I find that the file generated by mysqldump and by my own program are different.For example,</p>\n\n<ul>\n<li>one data field in the file generated by mysqldump\n<code>\n'[[     \\\\^X\\\u00ed^G\\\u00d1X`    C;\u00b7Q\u00f9^D\u00f47&lt;8a&gt;\u00bc!{&lt;96&gt;a\u00d3\u00b9&lt;8c&gt;     H\u00c0aHr^Q^^\u00bdn\u00f7^K\u00fe&lt;98&gt;IZ&lt;9f&gt;3\u00fe'\n</code></li>\n<li>one data field in the file generated by my program\n<code>\n[[      \\^X\u00ed^G\u00d1X`       C;\u00b7Q\u00f9^D\u00f47&lt;8a&gt;\u00bc!{&lt;96&gt;a\u00d3\u00b9&lt;8c&gt;     H\u00c0aHr^Q^^\u00bdn\u00f7^K\u00fe&lt;98&gt;IZ&lt;9f&gt;3\u00fe\n</code></li>\n</ul>\n\n<p>So, My question is: Why is writting data using sprintf(f,\"%s\",xx) for backup not correct? Is it enough to just add ' ' in the front and end of the string? If so, what if the data of that field happen to have ' in it?</p>\n\n<p>Also, I wonder what it means to write some unprintable characters into a text file.</p>\n\n<hr>\n\n<p>Also, I read <a href=\"https://stackoverflow.com/questions/16559086/does-mysqldump-handle-binary-data-reliably\">stackoverflow.com/questions/16559086</a> and tried <strong>--hex-blob</strong> option. Is it OK if I transform every byte of the binary data into hex form and then write simple text strings into the dump.sql. </p>\n\n<p>Then, instead of getting\n<code>\n'[[     \\\\^X\\\u00ed^G\\\u00d1X`    C;\u00b7Q\u00f9^D\u00f47&lt;8a&gt;\u00bc!{&lt;96&gt;a\u00d3\u00b9&lt;8c&gt;     H\u00c0aHr^Q^^\u00bdn\u00f7^K\u00fe&lt;98&gt;IZ&lt;9f&gt;3\u00fe'\n</code>\nI got something like\n<code>\n0x5B5B095C18ED07D1586009433BB751F95E44F4378ABC217B9661D3B98C0948C0614872111EBD6EF70BFE98495A9F33FE\n</code>\nAll the characters are printable now!</p>\n\n<p>However, If I choose this method, I wonder if I can meet problems when I use other encoding schemes other than latin1.</p>\n\n<p>Also, the above words are all my own ideas, I also wonder I there are other ways to back up data using the C interface.</p>\n\n<p>Thank you for your help! </p>\n"}, {"tags": ["c", "algorithm", "logarithm"], "comments": [{"owner": {"reputation": 485, "user_id": 4372200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf1f520fdb8541f01d60e7edd2fda91?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Legner", "link": "https://stackoverflow.com/users/4372200/jan-legner"}, "edited": false, "score": 0, "creation_date": 1486541366, "post_id": 42107700, "comment_id": 71384435, "body": "Is that a homework?"}, {"owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "reply_to_user": {"reputation": 485, "user_id": 4372200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf1f520fdb8541f01d60e7edd2fda91?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Legner", "link": "https://stackoverflow.com/users/4372200/jan-legner"}, "edited": false, "score": 2, "creation_date": 1486541413, "post_id": 42107700, "comment_id": 71384460, "body": "nope, it&#39;s not. i want to use it in a personal project. I done a function witch checks for the highest bit position, but using it i just return the integ part of the resoult, ignoring the zecimals, and i need at least 2 of them ... it will help me to a exponential function. P.S: I dont have to use any libraries"}, {"owner": {"reputation": 485, "user_id": 4372200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf1f520fdb8541f01d60e7edd2fda91?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Legner", "link": "https://stackoverflow.com/users/4372200/jan-legner"}, "edited": false, "score": 2, "creation_date": 1486541760, "post_id": 42107700, "comment_id": 71384629, "body": "Well log2(1024^100) gives you log2(1024)*100 but that will not be much help (since you cannot effectivaly count that in C)..."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1486541761, "post_id": 42107700, "comment_id": 71384630, "body": "You need to ask a specific question. What is it specifically that is preventing you from writing your code? Show our attempt, explain what is wrong with it and ask a specific question that will help you progress that code."}, {"owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "edited": false, "score": 0, "creation_date": 1486541798, "post_id": 42107700, "comment_id": 71384656, "body": "i used the ideas from here <a href=\"http://stackoverflow.com/questions/12023007/how-can-i-compute-a-base-2-logarithm-without-using-the-built-in-math-functions-i\" title=\"how can i compute a base 2 logarithm without using the built in math functions i\">stackoverflow.com/questions/12023007/&hellip;</a> but as i said, it generated me a result at int precision .."}, {"owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "edited": false, "score": 0, "creation_date": 1486541893, "post_id": 42107700, "comment_id": 71384702, "body": "i need any idea to generate a result with some decimal precision"}, {"owner": {"reputation": 818, "user_id": 7095889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28dd263cb10743a750eff5b85bb91bd5?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Ivaskevych", "link": "https://stackoverflow.com/users/7095889/yuriy-ivaskevych"}, "edited": false, "score": 0, "creation_date": 1486542413, "post_id": 42107700, "comment_id": 71385011, "body": "Why not to use <code>float</code> as a result type and when you need just multiply it say by 100 and get integer part ?"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 1, "creation_date": 1486542501, "post_id": 42107700, "comment_id": 71385061, "body": "my bet is you are on MCU without FPU. anyway use fixed precision and binary search for this"}, {"owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "edited": false, "score": 0, "creation_date": 1486542526, "post_id": 42107700, "comment_id": 71385069, "body": "i would do that, but i can&#39;t get a float result by my method, it only returns the position of the most significant 1 bit from the number, and this is exactly the value of the integer part of the result. I don&#39;t know how to find the decimal values... thats why i asked you."}, {"owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1486542581, "post_id": 42107700, "comment_id": 71385097, "body": "you are right @Spektre."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1486542594, "post_id": 42107700, "comment_id": 71385104, "body": "Do you want C++ example for log2 for example <code>24.8</code> bit ?"}, {"owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "edited": false, "score": 0, "creation_date": 1486542698, "post_id": 42107700, "comment_id": 71385169, "body": "what do you mean with &quot;24.8 bit&quot; ? Yes, show me senpai."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1486542865, "post_id": 42107700, "comment_id": 71385247, "body": "it means you got 32 bit uint and 24 bits are integer part and 8 decimal ... wil wrote one and post  as answer"}, {"owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "edited": false, "score": 0, "creation_date": 1486542986, "post_id": 42107700, "comment_id": 71385315, "body": "that sounds great. I hope it will help me."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1486549132, "post_id": 42107700, "comment_id": 71389565, "body": "If you only need 2 decimals the easiest way is to precompute a table."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1486550686, "post_id": 42107700, "comment_id": 71390613, "body": "<a href=\"http://stackoverflow.com/q/9411823/995714\">Fast log2(float x) implementation C++</a>, <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogObvious\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html#IntegerLogObvio&zwnj;&#8203;us</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1486551008, "post_id": 42107700, "comment_id": 71390843, "body": "<a href=\"http://www.ganssle.com/approx-2.htm\" rel=\"nofollow noreferrer\">log approximation in embedded systems</a>, <a href=\"http://www.myreckonings.com/Dead_Reckoning/Online/Materials/Fast_Approximation_of_Elementary_Functions.pdf\" rel=\"nofollow noreferrer\">Fast Approximation of the Tangent, Hyperbolic Tangent, Exponential and Logarithmic Functions</a>, <a href=\"http://www.convict.lu/Jeunes/ultimate_stuff/exp_ln_2.htm\" rel=\"nofollow noreferrer\">A simple and fast look-up table method to compute the exp(x) and ln(x) functions</a>, <a href=\"http://stackoverflow.com/q/4657468/995714\">Fast fixed point pow, log, exp and sqrt</a>"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1487851946, "post_id": 42107700, "comment_id": 71976148, "body": "@VladLoveMaths sorry chat does not notify I did not see your message until now. For <b>LUT</b> you need just <code>DWORD LUT[_fx32_fract_bits] = { 0.5^0.5, 0.5^0.25, 0.5^0.125,...}</code> and use that instead of <code>b=fx32_sqrt(b);</code> Do you need real code?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1606915851, "post_id": 42107700, "comment_id": 115107117, "body": "Your MCU surely has a floating point emulation library and probably using that would be the easiest. If not, what is the MCU and the compiler? I could probably port something to it to get it going. How time constrained is that log2, ie. how many clock cycles you got for it? If you can spare a couple microseconds then full blown fp emulation is probably simplest, and you could just use floats. I use floats all the time on quite tiny MCUs - just 1k of RAM, and it\u2019s mostly IEEE-754 compliant and dependable."}], "answers": [{"comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1486822429, "post_id": 42108287, "comment_id": 71517138, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/135449/discussion-on-answer-by-spektre-building-a-logarithm-function-in-c-without-using\">moved to chat</a>."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1606915625, "post_id": 42108287, "comment_id": 115107000, "body": "During log2, there\u2019s no need to run a full exponentiation: you already have a bunch of bits previously computed - all you need at each step is a trial fixed point multiplication by a constant from a table. In fact, you don\u2019t need either exponentiation nor square roots. Just multiplies, adds and compares. But at that point you may see that you\u2019ll get many less multiplies if you use the typical ways floating point is emulated, so taking verbatim code from a float software library and cutting down its accuracy would yield even faster code!"}], "tags": [], "owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "is_accepted": true, "score": 3, "last_activity_date": 1486639451, "last_edit_date": 1495540809, "creation_date": 1486543148, "answer_id": 42108287, "question_id": 42107700, "link": "https://stackoverflow.com/questions/42107700/building-a-logarithm-function-in-c-without-using-float-type/42108287#42108287", "title": "Building a logarithm function in C without using float type", "body": "<p>You need to use <strong>fixed point</strong> precision/arithmetics/math for this. It means you use integer type variables but some of the bits are after the decimal point.</p>\n\n<p>for example let assume 8 decimal bits so operations are done like this:</p>\n\n<pre><code>a = number1*256\nb = number2*256\nc=a+b // +\nc=a-b // -\nc=(a*b)&gt;&gt;8 // *\nc=(a/b)&lt;&lt;8 // /\n</code></pre>\n\n<p>Here simple fixed point <code>log2</code> example via binary search in <strong>C++</strong>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>//---------------------------------------------------------------------------\nconst DWORD _fx32_bits      =32;                            // all bits count\nconst DWORD _fx32_fract_bits= 8;                            // fractional bits count\nconst DWORD _fx32_integ_bits=_fx32_bits-_fx32_fract_bits;   // integer bits count\n//---------------------------------------------------------------------------\nconst DWORD _fx32_one       =1&lt;&lt;_fx32_fract_bits;           // constant=1.0 (fixed point)\nconst DWORD _fx32_fract_mask=_fx32_one-1;                   // fractional bits mask\nconst DWORD _fx32_integ_mask=0xFFFFFFFF-_fx32_fract_mask;   // integer bits mask\nconst DWORD _fx32_MSB_mask=1&lt;&lt;(_fx32_bits-1);               // max unsigned bit mask\n//---------------------------------------------------------------------------\nDWORD bits(DWORD p)             // count how many bits is p\n    {\n    DWORD m=0x80000000; DWORD b=32;\n    for (;m;m&gt;&gt;=1,b--)\n     if (p&gt;=m) break;\n    return b;\n    }\n//---------------------------------------------------------------------------\nDWORD fx32_mul(DWORD x,DWORD y)\n    {\n    // this should be done in asm with 64 bit result !!!\n    DWORD a=x,b=y;              // asm has access only to local variables\n    asm {                       // compute (a*b)&gt;&gt;_fx32_fract\n        mov eax,a               // eax=a\n        mov ebx,b               // ebx=b\n        mul eax,ebx             // (edx,eax)=eax*ebx\n        mov ebx,_fx32_one\n        div ebx                 // eax=(edx,eax)&gt;&gt;_fx32_fract\n        mov a,eax;\n        }\n    return a;\n    // you can also do this instead but unless done on 64bit variable will overflow\n    return (x*y)&gt;&gt;_fx32_fract_bits;\n    }\n//---------------------------------------------------------------------------\nDWORD fx32_sqrt(const DWORD &amp;x) // unsigned fixed point sqrt\n    {\n    DWORD m,a;\n    if (!x) return 0;\n    m=bits(x);                  // integer bits\n    if (m&gt;_fx32_fract_bits) m-=_fx32_fract_bits; else m=0;\n    m&gt;&gt;=1;                      // sqrt integer result is half of x integer bits\n    m=_fx32_one&lt;&lt;m;             // MSB of result mask\n    for (a=0;m;m&gt;&gt;=1)           // test bits from MSB to 0\n        {\n        a|=m;                   // bit set\n        if (fx32_mul(a,a)&gt;x)    // if result is too big\n         a^=m;                  // bit clear\n        }\n    return a;\n    }\n//---------------------------------------------------------------------------\nDWORD fx32_exp2(DWORD y)       // 2^y\n    {\n    // handle special cases\n    if (!y) return _fx32_one;                    // 2^0 = 1\n    if (y==_fx32_one) return 2;                  // 2^1 = 2\n    DWORD m,a,b,_y;\n    // handle the signs\n    _y=y&amp;_fx32_fract_mask;      // _y fractional part of exponent\n     y=y&amp;_fx32_integ_mask;      //  y integer part of exponent\n    a=_fx32_one;                // ini result\n    // powering by squaring x^y\n    if (y)\n        {\n        for (m=_fx32_MSB_mask;(m&gt;_fx32_one)&amp;&amp;(m&gt;y);m&gt;&gt;=1);     // find mask of highest bit of exponent\n        for (;m&gt;=_fx32_one;m&gt;&gt;=1)\n            {\n            a=fx32_mul(a,a);\n            if (DWORD(y&amp;m)) a&lt;&lt;=1;  // a*=2\n            }\n        }\n    // powering by rooting x^_y\n    if (_y)\n        {\n        for (b=2&lt;&lt;_fx32_fract_bits,m=_fx32_one&gt;&gt;1;m;m&gt;&gt;=1)      // use only fractional part\n            {\n            b=fx32_sqrt(b);\n            if (DWORD(_y&amp;m)) a=fx32_mul(a,b);\n            }\n        }\n    return a;\n    }\n//---------------------------------------------------------------------------\nDWORD fx32_log2(DWORD x)    // = log2(x)\n    {\n    DWORD y,m;\n    // binary search from highest possible integer power of 2 to avoid overflows (log2(integer bits)-1)\n    for (y=0,m=_fx32_one&lt;&lt;(bits(_fx32_integ_bits)-1);m;m&gt;&gt;=1)\n        {\n        y|=m;   // set bit\n        if (fx32_exp2(y)&gt;x) y^=m; // clear bit if result too big\n        }\n    return y;\n    }\n//---------------------------------------------------------------------------\n</code></pre>\n\n<p>Here simple test (using floats just for loading and printing you can handle booth on integers too, or by compiler evaluated constants):</p>\n\n<pre><code>float(fx32_log2(float(125.67*float(_fx32_one)))) / float(_fx32_one)\n</code></pre>\n\n<p>This evaluates: <code>log2(125.67) = 6.98828125</code> my win calc returns <code>6.97349648</code> which is pretty close. More precise result you need more fractional bits you need to use. Int and compile time evaluation float example:</p>\n\n<pre><code>(100*fx32_log2(125.67*_fx32_one))&gt;&gt;_fx32_fract_bits\n</code></pre>\n\n<p>returns <code>698</code> which means <code>6.98</code> as we multiplied by <code>100</code>. You can also write your own load and print function to convert between <strong>fixed point</strong> and <strong>string</strong> directly.</p>\n\n<p>To change precision just play with <code>_fx32_fract_bits</code> constant. Anyway if your <strong>C++</strong> does not know <code>DWORD</code> it is just 32bit <code>unsigned int</code>. If you are using different type (like <code>16</code> or <code>64</code> bit) then just change the constants accordingly.</p>\n\n<p>For more info take a look at: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/30962495/2521214\">Power by squaring for negative exponents</a></li>\n</ul>\n\n<p><strong>[Edit2] <code>fx32_mul</code> on 32bit arithmetics without <code>asm</code> base <code>2^16 O(n^2)</code></strong> </p>\n\n<pre><code>DWORD fx32_mul(DWORD x,DWORD y)\n    {\n    const int _h=1; // this is MSW,LSW order platform dependent So swap 0,1 if your platform is different\n    const int _l=0;\n    union _u\n        {\n        DWORD u32;\n        WORD u16[2];\n        }u;\n    DWORD al,ah,bl,bh;\n    DWORD c0,c1,c2,c3;\n    // separate 2^16 base digits\n    u.u32=x; al=u.u16[_l]; ah=u.u16[_h];\n    u.u32=y; bl=u.u16[_l]; bh=u.u16[_h];\n    // multiplication (al+ah&lt;&lt;1)*(bl+bh&lt;&lt;1) = al*bl + al*bh&lt;&lt;1 + ah*bl&lt;&lt;1 + ah*bh&lt;&lt;2\n    c0=(al*bl);\n    c1=(al*bh)+(ah*bl);\n    c2=(ah*bh);\n    c3= 0;\n    // propagate 2^16 overflows (backward to avoid overflow)\n    c3+=c2&gt;&gt;16; c2&amp;=0x0000FFFF;\n    c2+=c1&gt;&gt;16; c1&amp;=0x0000FFFF;\n    c1+=c0&gt;&gt;16; c0&amp;=0x0000FFFF;\n    // propagate 2^16 overflows (normaly to recover from secondary overflow)\n    c2+=c1&gt;&gt;16; c1&amp;=0x0000FFFF;\n    c3+=c2&gt;&gt;16; c2&amp;=0x0000FFFF;\n    // (c3,c2,c1,c0) &gt;&gt; _fx32_fract_bits\n    u.u16[_l]=c0; u.u16[_h]=c1; c0=u.u32;\n    u.u16[_l]=c2; u.u16[_h]=c3; c1=u.u32;\n    c0 =(c0&amp;_fx32_integ_mask)&gt;&gt;_fx32_fract_bits;\n    c0|=(c1&amp;_fx32_fract_mask)&lt;&lt;_fx32_integ_bits;\n    return c0;\n    }\n</code></pre>\n\n<p>In case you do not have <code>WORD,DWORD</code> add this to start of code</p>\n\n<pre><code>typedef unsigned __int32 DWORD;\ntypedef unsigned __int16 WORD;\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>typedef uint32_t DWORD;\ntypedef uint16_t WORD;\n</code></pre>\n\n<p><strong>[Edit3] fx32_mul debug info</strong></p>\n\n<p>let call and trace/breakpoint this (15 fractional bits):</p>\n\n<pre><code>fx32_mul(0x00123400,0x00230056);\n</code></pre>\n\n<p>Which is:</p>\n\n<pre><code>0x00123400/32768 * 0x00230056/32768 =\n36 * 70.00262451171875 = 2520.094482421875\n</code></pre>\n\n<p>So:</p>\n\n<pre><code>DWORD fx32_mul(DWORD x,DWORD y) // x=0x00123400 y=0x00230056\n    {\n    const int _h=1;\n    const int _l=0;\n    union _u\n        {\n        DWORD u32;\n        WORD u16[2];\n        }u;\n    DWORD al,ah,bl,bh;\n    DWORD c0,c1,c2,c3;\n    // separate 2^16 base digits\n    u.u32=x; al=u.u16[_l]; ah=u.u16[_h]; // al=0x3400 ah=0x0012\n    u.u32=y; bl=u.u16[_l]; bh=u.u16[_h]; // bl=0x0056 bh=0x0023\n    // multiplication (al+ah&lt;&lt;1)*(bl+bh&lt;&lt;1) = al*bl + al*bh&lt;&lt;1 + ah*bl&lt;&lt;1 + ah*bh&lt;&lt;2\n    c0=(al*bl);        // c0=0x00117800\n    c1=(al*bh)+(ah*bl);// c1=0x0007220C\n    c2=(ah*bh);        // c2=0x00000276\n    c3= 0;             // c3=0x00000000\n    // propagate 2^16 overflows (backward to avoid overflow)\n    c3+=c2&gt;&gt;16; c2&amp;=0x0000FFFF; // c3=0x00000000 c2=0x00000276\n    c2+=c1&gt;&gt;16; c1&amp;=0x0000FFFF; // c2=0x0000027D c1=0x0000220C\n    c1+=c0&gt;&gt;16; c0&amp;=0x0000FFFF; // c1=0x0000221D c0=0x00007800\n    // propagate 2^16 overflows (normaly to recover from secondary overflow)\n    c2+=c1&gt;&gt;16; c1&amp;=0x0000FFFF; // c2=0x0000027D c1=0x0000221D\n    c3+=c2&gt;&gt;16; c2&amp;=0x0000FFFF; // c3=0x00000000 c2=0x0000027D\n    // (c3,c2,c1,c0) &gt;&gt; _fx32_fract_bits\n    u.u16[_l]=c0; u.u16[_h]=c1; c0=u.u32; // c0=0x221D7800\n    u.u16[_l]=c2; u.u16[_h]=c3; c1=u.u32; // c1=0x0000027D\n    c0 =(c0&amp;_fx32_integ_mask)&gt;&gt;_fx32_fract_bits; // c0=0x0000443A\n    c0|=(c1&amp;_fx32_fract_mask)&lt;&lt;_fx32_integ_bits; // c0=0x04FA443A\n    return c0; // 0x04FA443A -&gt; 83510330/32768 = 2548.53302001953125\n    }\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7140657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadcad3bca4d3ef4116a96dd83f90380?s=128&d=identicon&r=PG&f=1", "display_name": "VladLoveMaths", "link": "https://stackoverflow.com/users/7140657/vladlovemaths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1174, "favorite_count": 1, "accepted_answer_id": 42108287, "answer_count": 1, "score": 0, "last_activity_date": 1486639451, "creation_date": 1486541131, "last_edit_date": 1495542301, "question_id": 42107700, "link": "https://stackoverflow.com/questions/42107700/building-a-logarithm-function-in-c-without-using-float-type", "title": "Building a logarithm function in C without using float type", "body": "<p>I need to rewrite the log function (base <code>2</code> or base <code>10</code> doesn't matter which) without using <code>float</code> type, but I need to get the precision of few decimal digits after the decimal point. ( like a <code>float * 100</code> to get <code>2</code> decimals inside integer type eg: if the <code>1.4352</code> would be the result, my function should return something like <code>143</code> (<code>int</code> type) and I know that the last 2 numbers are the decimals.</p>\n\n<p>I found over the stackoverflow some methods like:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/12023007/how-can-i-compute-a-base-2-logarithm-without-using-the-built-in-math-functions-i\">How can I compute a base 2 logarithm without using the built-in math functions in C#?</a></li>\n</ul>\n\n<p>but all of them returns <code>int</code> precision ( avoiding the decimals ).</p>\n\n<p>I have no idea how to approach this so the question is:</p>\n\n<p>How to encode (and or change) integer <code>log</code> implementation to support decimal result?</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1486541591, "post_id": 42107681, "comment_id": 71384545, "body": "It&#39;s the <a href=\"http://en.cppreference.com/w/c/language/operator_other#Conditional_operator\" rel=\"nofollow noreferrer\">conditional (a.k.a. ternary) operator</a>. I know there&#39;s a good duplicate question, but I just can&#39;t seem to find it at the moment."}], "answers": [{"comments": [{"owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "edited": false, "score": 0, "creation_date": 1486541792, "post_id": 42107719, "comment_id": 71384653, "body": "Shouldn&#39;t it then be <code>next == next?</code> Otherwise it is an assignment, not a comparison, isn&#39;t it?"}, {"owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "reply_to_user": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "edited": false, "score": 0, "creation_date": 1486541930, "post_id": 42107719, "comment_id": 71384727, "body": "@arc_lupus I didn&#39;t get it, what are you saying that should be <code>next == next</code>?"}, {"owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "reply_to_user": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1486542087, "post_id": 42107719, "comment_id": 71384821, "body": "The answer from @user694733 solved it for me, was a misunderstanding, sorry!"}, {"owner": {"reputation": 186, "user_id": 5683968, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f58b2be757494b41047b7bd4bbe3a36?s=128&d=identicon&r=PG&f=1", "display_name": "Bar", "link": "https://stackoverflow.com/users/5683968/bar"}, "edited": false, "score": 0, "creation_date": 1486542818, "post_id": 42107719, "comment_id": 71385224, "body": "Good answer, but I know the operator. The mistake was misreading: I thought it was: (next =next?) next-&gt;next : NULL) which didn&#39;t make sense. Thanks"}, {"owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "reply_to_user": {"reputation": 186, "user_id": 5683968, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f58b2be757494b41047b7bd4bbe3a36?s=128&d=identicon&r=PG&f=1", "display_name": "Bar", "link": "https://stackoverflow.com/users/5683968/bar"}, "edited": false, "score": 0, "creation_date": 1486542861, "post_id": 42107719, "comment_id": 71385245, "body": "@Bar glad if it helped!"}], "tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": false, "score": 3, "last_activity_date": 1486541970, "last_edit_date": 1486541970, "creation_date": 1486541211, "answer_id": 42107719, "question_id": 42107681, "link": "https://stackoverflow.com/questions/42107681/understanding-a-tricky-for-loop-in-c/42107719#42107719", "title": "Understanding a tricky for loop in c", "body": "<p>The part :</p>\n\n<pre><code>curr = next, next = next? next-&gt;next : NULL\n</code></pre>\n\n<p>is the third part of the <code>for</code> loop, which means that it will be executed each time it ends. It is equivalent to  :</p>\n\n<pre><code>curr = next;\nif (next)                 //if next != NULL\n    next = next-&gt;next;\nelse\n    next = NULL;\n</code></pre>\n\n<p>What the code is trying to achieve is to check all pointers so as to avoid trying to access <code>NULL-&gt;next</code> on the last element, which will not exist.</p>\n\n<hr>\n\n<p>In general, an <code>if</code> statement like the following :</p>\n\n<pre><code>if (a &gt; b) {\n    result = x;\n} else {\n    result = y;\n}\n</code></pre>\n\n<p>can be rewritten as the following statement:</p>\n\n<pre><code>result = a &gt; b ? x : y;\n</code></pre>\n\n<p>as shown in <a href=\"https://en.wikipedia.org/wiki/%3F:#C\" rel=\"nofollow noreferrer\">this link</a>.</p>\n\n<p>You can read more about the <a href=\"http://www.tutorialspoint.com/ansi_c/ternary_operator_examples.htm\" rel=\"nofollow noreferrer\">Ternary operator in C</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "is_accepted": false, "score": 0, "last_activity_date": 1486541709, "creation_date": 1486541709, "answer_id": 42107857, "question_id": 42107681, "link": "https://stackoverflow.com/questions/42107681/understanding-a-tricky-for-loop-in-c/42107857#42107857", "title": "Understanding a tricky for loop in c", "body": "<p>It's a part of the <code>?:</code> operator. The construct is <code>cond?consequent:alternative</code>. If <code>cond</code> evaluates <code>true</code> the expression <code>consequent</code> is evaluated and it's value is the result of the expression, otherwise <code>alternative</code> is evaluated and it's value is the result of the expression. The type of <code>consequent</code> and <code>alternative</code> should be the same.</p>\n\n<p>So <code>next ? next-&gt;next : NULL</code> means <code>next-&gt;next</code> if <code>next</code> is not <code>NULL</code> and <code>NULL</code> if <code>next</code> is <code>NULL</code>.</p>\n\n<p>Additionally the <code>,</code> operator means to evaluate the expressions in sequence. This is the lowest prioritized operator which means that the last of the <code>for</code> clause means that first evaluate <code>curr = next</code> and then <code>next = next ? next-&gt;next : NULL</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 852, "user_id": 1917004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e12a0abb82fac3b2293597967a7ec90d?s=128&d=identicon&r=PG", "display_name": "ctrl-shift-esc", "link": "https://stackoverflow.com/users/1917004/ctrl-shift-esc"}, "is_accepted": false, "score": 1, "last_activity_date": 1486541774, "last_edit_date": 1495541824, "creation_date": 1486541774, "answer_id": 42107879, "question_id": 42107681, "link": "https://stackoverflow.com/questions/42107681/understanding-a-tricky-for-loop-in-c/42107879#42107879", "title": "Understanding a tricky for loop in c", "body": "<p>The for loop can be rewritten as a while loop, as follows:</p>\n\n<pre><code>Node* curr = head-&gt;next;\nwhile(curr != NULL)\n{\n    free(curr);\n    curr = next;\n    if (next != NULL)\n    {\n        next = next-&gt;next;\n    }\n    else\n    {\n        next = NULL;\n    }\n}\n</code></pre>\n\n<p>The intention of <code>next = next?next-&gt;next:NULL</code> is to move the <code>next</code> pointer to its next node.</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/758849/the-ternary-conditional-operator-in-c\">The ternary (conditional) operator in C</a></p>\n"}, {"tags": [], "owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "is_accepted": true, "score": 3, "last_activity_date": 1486541798, "creation_date": 1486541798, "answer_id": 42107889, "question_id": 42107681, "link": "https://stackoverflow.com/questions/42107681/understanding-a-tricky-for-loop-in-c/42107889#42107889", "title": "Understanding a tricky for loop in c", "body": "<p>Ternary operator <code>?:</code> has higher precedence than assignment <code>=</code>.</p>\n\n<p>Code is equivalent to:</p>\n\n<pre><code>next = (next? next-&gt;next : NULL)\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>if(next != NULL)\n    next = next-&gt;next;\nelse\n    next = NULL;\n</code></pre>\n\n<p>Point of the code is to avoid accidentally doing <code>NULL-&gt;next</code> on last element.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 0, "last_activity_date": 1486544631, "creation_date": 1486544631, "answer_id": 42108734, "question_id": 42107681, "link": "https://stackoverflow.com/questions/42107681/understanding-a-tricky-for-loop-in-c/42108734#42108734", "title": "Understanding a tricky for loop in c", "body": "<p>This is an example of <em>obscuation</em> and almost certainly the code is a failed attempt to delete all nodes in a linked list. A faster and more readable way to do the same would be:</p>\n\n<pre><code>void release_list (Node* head)\n{\n  while(head != NULL)\n  {\n    Node* tmp = head;\n    head = head-&gt;next;\n    free(tmp); \n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 186, "user_id": 5683968, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f58b2be757494b41047b7bd4bbe3a36?s=128&d=identicon&r=PG&f=1", "display_name": "Bar", "link": "https://stackoverflow.com/users/5683968/bar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 42107889, "answer_count": 5, "score": 2, "last_activity_date": 1486544631, "creation_date": 1486541072, "last_edit_date": 1486541289, "question_id": 42107681, "link": "https://stackoverflow.com/questions/42107681/understanding-a-tricky-for-loop-in-c", "title": "Understanding a tricky for loop in c", "body": "<p>I have a question regarding the for loop in the release list func. (The head is a dummy so we don't need to release it). I don't understand the: </p>\n\n<pre><code>next = next?\n</code></pre>\n\n<p>part in the loop. What does it actually do, and why simply</p>\n\n<pre><code>next?\n</code></pre>\n\n<p>won't suffice? here is the code: </p>\n\n<pre><code>typedef struct NODE {\nint num;\nstruct NODE* next;\n} Node;\n\n\n\n\nvoid release_list(Node* head) {\n    Node* next = head-&gt;next ? head-&gt;next-&gt;next : NULL;\n    for( Node* curr = head-&gt;next;\n         curr != NULL;\n         curr = next, next = next? next-&gt;next : NULL) {\n        free(curr);\n     }\n}\n</code></pre>\n"}, {"tags": ["c", "asterisk"], "comments": [{"owner": {"reputation": 13, "user_id": 5966093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWkgXhXJzRI/AAAAAAAAAAI/AAAAAAAAAHM/FR98Xejr_00/photo.jpg?sz=128", "display_name": "Through Lee", "link": "https://stackoverflow.com/users/5966093/through-lee"}, "edited": false, "score": 0, "creation_date": 1486540329, "post_id": 42107461, "comment_id": 71383921, "body": "Note: <code>res_odbc</code> included <code>&lt;sql.h&gt;</code>,<code>&lt;sqlext.h&gt;</code> and <code>&lt;sqltypes.h&gt;</code>"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1486541397, "post_id": 42107461, "comment_id": 71384456, "body": "It is a linker error, so the code snippet and the .h files are not relevant at all.  You forgot to link the odbc library."}, {"owner": {"reputation": 13, "user_id": 5966093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWkgXhXJzRI/AAAAAAAAAAI/AAAAAAAAAHM/FR98Xejr_00/photo.jpg?sz=128", "display_name": "Through Lee", "link": "https://stackoverflow.com/users/5966093/through-lee"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1486542706, "post_id": 42107461, "comment_id": 71385177, "body": "How to link odbc library? I thought just need to include the header file."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5966093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWkgXhXJzRI/AAAAAAAAAAI/AAAAAAAAAHM/FR98Xejr_00/photo.jpg?sz=128", "display_name": "Through Lee", "link": "https://stackoverflow.com/users/5966093/through-lee"}, "edited": false, "score": 0, "creation_date": 1486600920, "post_id": 42113692, "comment_id": 71420629, "body": "what does  REALTIME and func_odbc mean?"}, {"owner": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "reply_to_user": {"reputation": 13, "user_id": 5966093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWkgXhXJzRI/AAAAAAAAAAI/AAAAAAAAAHM/FR98Xejr_00/photo.jpg?sz=128", "display_name": "Through Lee", "link": "https://stackoverflow.com/users/5966093/through-lee"}, "edited": false, "score": 0, "creation_date": 1486607983, "post_id": 42113692, "comment_id": 71422432, "body": "<a href=\"https://wiki.asterisk.org/wiki/display/AST/Realtime+Database+Configuration\" rel=\"nofollow noreferrer\">wiki.asterisk.org/wiki/display/AST/&hellip;</a>"}], "tags": [], "owner": {"reputation": 14851, "user_id": 861388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e67c6ded563e65de617062d3c47d79c2?s=128&d=identicon&r=PG", "display_name": "arheops", "link": "https://stackoverflow.com/users/861388/arheops"}, "is_accepted": false, "score": 0, "last_activity_date": 1486558396, "creation_date": 1486558396, "answer_id": 42113692, "question_id": 42107461, "link": "https://stackoverflow.com/questions/42107461/asteriskundefined-reference-to-sqlallochandle/42113692#42113692", "title": "Asterisk:undefined reference to `SQLAllocHandle&#39;", "body": "<p>You should change Makefile for include libs into your module.</p>\n\n<p>But that is WRONG method when you working with asterisk. </p>\n\n<p>Correct method is user REALTIME or func_odbc and make it care about connection.</p>\n"}], "owner": {"reputation": 13, "user_id": 5966093, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWkgXhXJzRI/AAAAAAAAAAI/AAAAAAAAAHM/FR98Xejr_00/photo.jpg?sz=128", "display_name": "Through Lee", "link": "https://stackoverflow.com/users/5966093/through-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486558396, "creation_date": 1486540196, "question_id": 42107461, "link": "https://stackoverflow.com/questions/42107461/asteriskundefined-reference-to-sqlallochandle", "title": "Asterisk:undefined reference to `SQLAllocHandle&#39;", "body": "<p>I added a test.c in <code>asterisk/main</code> directory to test ODBC. Unfortunately it shows like below when I run <code>make</code>.</p>\n\n<pre><code>test.o: In function `test_function':\n/usr/src/asterisk-certified-13.8-cert3/main/libtest.c:10: \nundefined     reference to `SQLAllocHandle'\n</code></pre>\n\n<p><code>test.c</code> like this:</p>\n\n<pre><code>#include \"asterisk/res_odbc.h\"\n\nASTERISK_FILE_VERSION(__FILE__, \"$Revision$\")\n\n\nint test_function(void){\n    int res;\n    SQLHANDLE output_handle;\n    res = SQLAllocHandle(SQL_HANDLE_ENV,  SQL_NULL_HANDLE,   &amp;output_handle);\n\n    if ( (res != SQL_SUCCESS) &amp;&amp; (res != SQL_SUCCESS_WITH_INFO) ) {\n        ast_log(LOG_DEBUG, \"AllocHandle Success!\\n\");\n        } else {\n            ast_log(LOG_WARNING, \"Error AllocHandle\");\n        }\n\n    return 0;\n}\n</code></pre>\n\n<p>How can I fix this? Thanks!</p>\n"}, {"tags": ["c++", "c", "pointers"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1486540140, "post_id": 42107403, "comment_id": 71383832, "body": "Underneath, they are all just pointers to memory, and work the same. The type system is part of the C++ layer over the top, that helps you make sure you don&#39;t access, say, an <code>int</code> as a <code>float</code> by mistake. The memory itself can&#39;t tell the difference."}, {"owner": {"reputation": 1050, "user_id": 4720292, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ab9634db96cbb4bc54c10cbe276ae411?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre", "link": "https://stackoverflow.com/users/4720292/pierre"}, "edited": false, "score": 0, "creation_date": 1486540150, "post_id": 42107403, "comment_id": 71383836, "body": "By this way it is possible to do a type checking at compile time, and prevent you (or at least it tries to prevent you) from doing mistakes."}, {"owner": {"reputation": 782, "user_id": 6202058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e482c0a1c36ae37276a1d9007394607?s=128&d=identicon&r=PG&f=1", "display_name": "Avantika Saini", "link": "https://stackoverflow.com/users/6202058/avantika-saini"}, "edited": false, "score": 0, "creation_date": 1486555834, "post_id": 42107403, "comment_id": 71394091, "body": "<i>so there is an address of char type</i> NO. Memory address are always intergers. Here, <code>char * pnt = &amp;x</code> means that the variable <code>pnt</code> stores the address(which is always integer) of a memory location which contains a char type data. So, different pointer types tell the compiler about the type of the data stored at the memory location pointed by the pointer."}], "answers": [{"comments": [{"owner": {"reputation": 694, "user_id": 5718184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZEYNb.jpg?s=128&g=1", "display_name": "Ishan Tiwary", "link": "https://stackoverflow.com/users/5718184/ishan-tiwary"}, "edited": false, "score": 0, "creation_date": 1486540775, "post_id": 42107505, "comment_id": 71384132, "body": "This is because the size allocated for different data types are different. So if it is an integer 2 bytes will be allocated, for char it is 1 byte. Data type is given to pointer to tell how much bytes it should read. This is called dereferencing so that the pointer knows how much data it should read from the address it is pointing to."}, {"owner": {"reputation": 857, "user_id": 4520592, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/08057a4f456e4d618e6725b6196e2652?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Tsyshnatiy", "link": "https://stackoverflow.com/users/4520592/vladimir-tsyshnatiy"}, "reply_to_user": {"reputation": 694, "user_id": 5718184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZEYNb.jpg?s=128&g=1", "display_name": "Ishan Tiwary", "link": "https://stackoverflow.com/users/5718184/ishan-tiwary"}, "edited": false, "score": 0, "creation_date": 1486540887, "post_id": 42107505, "comment_id": 71384198, "body": "Yep, nice point. For some reason I&#39;ve assumed that and did not point to this into my answer. Thank you!"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1486543963, "post_id": 42107505, "comment_id": 71385917, "body": "Also pointer arithmetics will not work without proper size."}], "tags": [], "owner": {"reputation": 857, "user_id": 4520592, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/08057a4f456e4d618e6725b6196e2652?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir Tsyshnatiy", "link": "https://stackoverflow.com/users/4520592/vladimir-tsyshnatiy"}, "is_accepted": false, "score": 0, "last_activity_date": 1486540379, "creation_date": 1486540379, "answer_id": 42107505, "question_id": 42107403, "link": "https://stackoverflow.com/questions/42107403/why-there-is-different-types-of-pointers/42107505#42107505", "title": "Why there is different types of pointers?", "body": "<p>That's because of strong typing in C/C++. That is one of the paradigms (python uses different one for example), but the only possible in C++. You actually can use your knowledge about pointer types and transform pointer between types. Use static_cast, dynamic_cast and so on to do this. Also if you are using C you can define a pointer to \"something\" - void*. This one can point to char, to int or to other type you can imagine. Notice: such transformation should be conscious. This can be a symphtom of a bad architecture or other troubles.</p>\n"}], "owner": {"reputation": 45, "user_id": 4735580, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641934096039296/picture?type=large", "display_name": "Mahmoud Sami", "link": "https://stackoverflow.com/users/4735580/mahmoud-sami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "closed_date": 1486540519, "answer_count": 1, "score": 0, "last_activity_date": 1486540552, "creation_date": 1486539989, "last_edit_date": 1486540552, "question_id": 42107403, "link": "https://stackoverflow.com/questions/42107403/why-there-is-different-types-of-pointers", "closed_reason": "Duplicate", "title": "Why there is different types of pointers?", "body": "<p>First of all, I'm sorry if this question is stupid\nand I'm beginner in C/C++ </p>\n\n<p>My question is:</p>\n\n<p>Why when I want to point to a <code>char</code> variable like ( <code>char x = 'A'</code> ) I should make a pointer of char datatype? like this one ( <code>char * pnt = &amp;x</code> ) ? I thought the address should be always integer of any place in Memory so the variable x in my example stored in RAM like this format (01000001) after converted (65) to the binary system in some address .. so there is an address of char type ??</p>\n\n<p>I didn't understand the concept, any explanation?</p>\n"}, {"tags": ["c", "file-io", "scanf"], "comments": [{"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1486539965, "post_id": 42107328, "comment_id": 71383741, "body": "<code>fscanf(inF,&quot; %c %d&quot;, &amp;r1, &amp;immediate);</code> --&gt; <code>fscanf(inF,&quot; %i %d&quot;, &amp;r1, &amp;immediate);</code> assuming <code>r1</code> is <code>int</code>"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 3, "creation_date": 1486540021, "post_id": 42107328, "comment_id": 71383769, "body": "what is the type of <code>r1</code>?"}, {"owner": {"reputation": 852, "user_id": 1917004, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e12a0abb82fac3b2293597967a7ec90d?s=128&d=identicon&r=PG", "display_name": "ctrl-shift-esc", "link": "https://stackoverflow.com/users/1917004/ctrl-shift-esc"}, "edited": false, "score": 2, "creation_date": 1486540825, "post_id": 42107328, "comment_id": 71384169, "body": "A side note on why <code>while(!feof(inF))</code> is wrong: <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 135, "user_id": 6122810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59409b6f921cd790d045d14dce25e02a?s=128&d=identicon&r=PG&f=1", "display_name": "parallel_resistance", "link": "https://stackoverflow.com/users/6122810/parallel-resistance"}, "edited": false, "score": 0, "creation_date": 1486541596, "post_id": 42107328, "comment_id": 71384547, "body": "r1&#39;s type is char"}, {"owner": {"reputation": 135, "user_id": 6122810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59409b6f921cd790d045d14dce25e02a?s=128&d=identicon&r=PG&f=1", "display_name": "parallel_resistance", "link": "https://stackoverflow.com/users/6122810/parallel-resistance"}, "edited": false, "score": 0, "creation_date": 1486541676, "post_id": 42107328, "comment_id": 71384590, "body": "What would you recommend for the file loop then?"}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 0, "creation_date": 1486541754, "post_id": 42107328, "comment_id": 71384627, "body": "Can you post a small complete example program demonstrating the issue, so that we can run it and check?"}, {"owner": {"reputation": 135, "user_id": 6122810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59409b6f921cd790d045d14dce25e02a?s=128&d=identicon&r=PG&f=1", "display_name": "parallel_resistance", "link": "https://stackoverflow.com/users/6122810/parallel-resistance"}, "edited": false, "score": 0, "creation_date": 1486541859, "post_id": 42107328, "comment_id": 71384688, "body": "Yeah, here you go: <a href=\"http://pastebin.com/6RUAXX3s\" rel=\"nofollow noreferrer\">pastebin.com/6RUAXX3s</a>"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 6122810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59409b6f921cd790d045d14dce25e02a?s=128&d=identicon&r=PG&f=1", "display_name": "parallel_resistance", "link": "https://stackoverflow.com/users/6122810/parallel-resistance"}, "edited": false, "score": 0, "creation_date": 1486565534, "post_id": 42108050, "comment_id": 71401177, "body": "I&#39;ll try changing the type and adding a cast to <code>unsigned short</code> after getting the value"}, {"owner": {"reputation": 135, "user_id": 6122810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59409b6f921cd790d045d14dce25e02a?s=128&d=identicon&r=PG&f=1", "display_name": "parallel_resistance", "link": "https://stackoverflow.com/users/6122810/parallel-resistance"}, "edited": false, "score": 0, "creation_date": 1486620890, "post_id": 42108050, "comment_id": 71426142, "body": "Okay, this gets the desired result, but then it proceeds to give me the same result as above after returning the correct values for some reason."}, {"owner": {"reputation": 135, "user_id": 6122810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59409b6f921cd790d045d14dce25e02a?s=128&d=identicon&r=PG&f=1", "display_name": "parallel_resistance", "link": "https://stackoverflow.com/users/6122810/parallel-resistance"}, "edited": false, "score": 0, "creation_date": 1486621021, "post_id": 42108050, "comment_id": 71426194, "body": "Okay never mind I fixed that problem by adding a <code>return;</code> at the end of the if statement."}], "tags": [], "owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "is_accepted": true, "score": 1, "last_activity_date": 1486542384, "creation_date": 1486542384, "answer_id": 42108050, "question_id": 42107328, "link": "https://stackoverflow.com/questions/42107328/fscanf-not-reading-char-from-file/42108050#42108050", "title": "fscanf not reading char from file", "body": "<p>You have declared the variable <code>immediate</code> as <code>unsigned short</code> while the line </p>\n\n<pre><code>fscanf(inF,\" %c %d\", &amp;r1, &amp;immediate);\n</code></pre>\n\n<p>supposes it is an integer. The behavior is undefined in such cases. </p>\n"}], "owner": {"reputation": 135, "user_id": 6122810, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/59409b6f921cd790d045d14dce25e02a?s=128&d=identicon&r=PG&f=1", "display_name": "parallel_resistance", "link": "https://stackoverflow.com/users/6122810/parallel-resistance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "accepted_answer_id": 42108050, "answer_count": 1, "score": 1, "last_activity_date": 1486542384, "creation_date": 1486539654, "last_edit_date": 1486540150, "question_id": 42107328, "link": "https://stackoverflow.com/questions/42107328/fscanf-not-reading-char-from-file", "title": "fscanf not reading char from file", "body": "<p>I have a program that reads from a file and converts assembly code into VM machine code. Instructions have different datatypes depending on the opcode, so my reader looks like this:</p>\n\n<pre><code>while(!feof(inF)) {\n    fscanf(inF, \"%s\",&amp;temp); //analyse first string and branch into if statement \n        printf(\"%s\\n\", temp);\n        if (strcmp(temp, \"NOP\") == 0 || strcmp(temp, \"nop\") == 0) {\n            fprintf(outF, \"%i\\n\", 0);\n        }\n        else if (strcmp(temp, \"LDI\") == 0 || strcmp(temp, \"ldi\") == 0) {\n            opcode = LDI; //opcode 1\n            fscanf(inF,\" %c %d\", &amp;r1, &amp;immediate); //get r1 and immediate\n            printf(\"R1: %i\\n\", r1);\n            printf(\"I: %i\\n\", immediate);\n            r1 = getReg(r1);\n            r2 = 0;\n            subop = 0;\n            output = (opcode &lt;&lt; 27)|(r1 &lt;&lt; 24)|(r2 &lt;&lt; 21)|(subop &lt;&lt; 16)|(immediate);\n            fprintf(outF, \"%x\\n\", output);\n        }        \n}\n</code></pre>\n\n<p>With a line reading <code>LDI A 1024</code>, I get an output of : </p>\n\n<pre><code>LDI\nR1: 0\nI: 1024\n</code></pre>\n\n<p>Instead of the expected </p>\n\n<pre><code>LDI\nR1: 65\nI: 1024\n</code></pre>\n\n<p>It appears that <code>fscanf</code> is not reading the <code>char</code>. I've looked at solutions that seemed to work for others and they don't seem to work here for some reason. </p>\n"}]