[{"tags": ["c", "scanf"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440027836, "post_id": 32107392, "comment_id": 52109067, "body": "So is is numbers or <code>char</code>/character? That should be a difference in Java, too. And limit the length of input taken by scanf, orerwise you run into <i>undefined behaviour</i>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1440028862, "post_id": 32107392, "comment_id": 52109356, "body": "<code>char move[4] = {0};scanf(&quot; %c %c %c&quot;, &amp;move[0], &amp;move[1],&amp;move[2]);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440034887, "post_id": 32107392, "comment_id": 52110633, "body": "&quot;enter 3 chars,the first 2 being numbers, and the last 1 being either &#39;v&#39; or &#39;h&#39;. For example &quot;1 2 v&quot;.&quot; is mis-leading.  &quot;1 2 v&quot; is 5 <code>char</code>, 1 more, if one counts the &quot;enter&quot;.   Apparently code needs to read 3 non-white-space <code>char</code>."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1440039027, "post_id": 32107392, "comment_id": 52111633, "body": "when using scanf() (and family) with the &#39;%s&#39; format specifier, to avoid input buffer overruns (like the user, in this case, entering 16 or more characters), always include a max length modifier that is 1 less than the length of the input buffer.  And always check the returned value (not the parameter value) to assure the operation was successful"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440033785, "post_id": 32107432, "comment_id": 52110363, "body": "&quot;Note the extra byte for &#39;\\0&#39;.&quot; is not needed with <code>fgets()</code>.  Recommend <code>fgets(input, sizeof input, stdin);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1440033888, "post_id": 32107432, "comment_id": 52110391, "body": "<code>scanf(&quot;%d%d%c&quot;, &amp;x, &amp;y, &amp;d);</code> will <i>not</i> work to properly scan in OP&#39;s <code>&quot;1 2 v&quot;</code>."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1440036792, "post_id": 32107432, "comment_id": 52111110, "body": "Unfortunately, it is far too common to advise against using <code>scanf</code> under the basis that it is easy to misuse, even when it&#39;s the correct tool for the job. By that logic, it would make sense to advise against using C altogether. That kind of logic doesn&#39;t belong in an answer to this question."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 1, "creation_date": 1440037620, "post_id": 32107432, "comment_id": 52111310, "body": "Additionally, advising against using <code>scanf</code> under the guise that it&#39;s less safe than <code>fscanf</code> is unfounded; there&#39;s no logical explanation for that. <code>x</code> and <code>y</code> might contain <i>multiple digits</i>. If I may suggest, from one person who has learnt how to use <code>scanf</code> safely, declare <code>x</code> and <code>y</code> as <code>unsigned int</code> and use <code>%1u</code> (that&#39;s a <i>one</i>, not an <i>ell</i>); <code>%1d</code> would cause UB with regards to negative values. None of these directives enforce the &quot;one space between fields&quot; requirement; they might discard multiple whitespace characters (<code>&#39;\\n&#39;</code>, <code>&#39;\\t&#39;</code>, etc)... and <b>always check the return value!</b>"}], "tags": [], "owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "is_accepted": false, "score": 0, "last_activity_date": 1440028359, "last_edit_date": 1440028359, "creation_date": 1440028015, "answer_id": 32107432, "question_id": 32107392, "link": "https://stackoverflow.com/questions/32107392/how-to-get-3-chars-entered-with-spaces-in-scanf-into-a-char-array/32107432#32107432", "title": "How to get 3 chars entered with spaces in scanf into a char array?", "body": "<p>It's usuall a bad idea to read string via <code>scanf</code> because of potential buffer overflow. Consider using <code>fscanf</code> or better <code>fgets</code> as in</p>\n\n<pre><code>fgets(input, 15, stdin);\n</code></pre>\n\n<p>Note the extra byte for '\\0'.</p>\n\n<hr>\n\n<p>Also, you're comparing char to string here: <code>input[i] != \"\\n\"</code>. It should be <code>input[i] != '\\n'</code> instead.</p>\n\n<hr>\n\n<p>And btw you can just use something like</p>\n\n<pre><code>int x, y;\nchar d;\nscanf(\"%d%d%c\", &amp;x, &amp;y, &amp;d);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1440039865, "post_id": 32107573, "comment_id": 52111834, "body": "This is a nice piece of information, but it needs work... It seems as though you put minimal effort in to obtain maximal score. As you later remarked, the return value of <code>scanf</code> needs to be checked; your example as it currently stands is a poor example. Furthermore, this only half-answers the question, and though it might seem like a good step in the right direction, if we interpret the OPs requirements precisely then the first field requires exactly no leading whitespace, and each of the other fields require delimiters of exactly one space character (which is not a newline or tab)."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "edited": false, "score": 0, "creation_date": 1440123317, "post_id": 32107573, "comment_id": 52153477, "body": "@Freenode-newbostonSebivor: The OP doesn&#39;t list any requirements, just two example inputs that should work (<code>12v</code> and <code>1 2 v</code>).  Getting a &quot;requirement&quot; that there be exactly one space between chars is obtuse if not simply wrong."}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 1, "last_activity_date": 1440029094, "creation_date": 1440029094, "answer_id": 32107573, "question_id": 32107392, "link": "https://stackoverflow.com/questions/32107392/how-to-get-3-chars-entered-with-spaces-in-scanf-into-a-char-array/32107573#32107573", "title": "How to get 3 chars entered with spaces in scanf into a char array?", "body": "<p><code>%s</code> reads a whitespace-delimited string with scanf, so if that's not what you want, it's not the thing to use.  <code>%c</code> reads a single character, but does not skip whitespce, so you probably also want a <code></code> (space) in your format to skip whitespace:</p>\n\n<pre><code>char input[3];\n\nscanf(\" %c %c %c\", intput, input+1, input+2);\n</code></pre>\n\n<p>will read 3 non-whitespace characters and skip any whitespace before or between them.  You should also check the return value of <code>scanf</code> to make sure that it is 3 -- if not, there was less than 3 characters in your input before an end-of-file was reached.</p>\n"}, {"comments": [{"owner": {"reputation": 1040, "user_id": 2327497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001609f0e9acc8302721fe05fecbc97c?s=128&d=identicon&r=PG", "display_name": "Arlie Stephens", "link": "https://stackoverflow.com/users/2327497/arlie-stephens"}, "edited": false, "score": 0, "creation_date": 1440035577, "post_id": 32108293, "comment_id": 52110803, "body": "also, the comparison of input[i] to &quot;\\n&quot; is incorrect, as pointed out above. It should be &#39;\\n&#39;"}], "tags": [], "owner": {"reputation": 1040, "user_id": 2327497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001609f0e9acc8302721fe05fecbc97c?s=128&d=identicon&r=PG", "display_name": "Arlie Stephens", "link": "https://stackoverflow.com/users/2327497/arlie-stephens"}, "is_accepted": false, "score": 0, "last_activity_date": 1440035670, "last_edit_date": 1440035670, "creation_date": 1440035284, "answer_id": 32108293, "question_id": 32107392, "link": "https://stackoverflow.com/questions/32107392/how-to-get-3-chars-entered-with-spaces-in-scanf-into-a-char-array/32108293#32108293", "title": "How to get 3 chars entered with spaces in scanf into a char array?", "body": "<p>This looks like two simple bugs. </p>\n\n<p>You need to use separate indexes for move[] and input[] </p>\n\n<pre><code>    int i = 0;\n    while(input[i] != 0){\n\n            if(input[i] != ' ' &amp;&amp; input[i] != \"\\n\"){\n                    move[i] = input[i];\n            }\n            i++;\n    }\n</code></pre>\n\n<p>Imagine input of 1 2 v</p>\n\n<p>input[0] != 0, so we enter the loop</p>\n\n<p>it's not ' ' or '\\n' either, so we copy input[0] to move[0]</p>\n\n<p>so far so good</p>\n\n<p>You increment i, and discover that input[1] == ' '</p>\n\n<p>But then you increment i again</p>\n\n<p>You discover that you are interested in input[2] (2) - so you copy it to move[2], rather than move[1]. Oops!</p>\n\n<p>Then to make things worse, you never put an end-of-string character after the last valid character of move[]. </p>\n"}, {"comments": [{"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440043028, "post_id": 32108575, "comment_id": 52112522, "body": "Though I understand that problem, @chux, adding a space at the front would be a violation of the requirements that the OP has specified. I&#39;ll ping you in an hour or so following a modification..."}, {"owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440044474, "post_id": 32108575, "comment_id": 52112924, "body": "@chux Thanks for your input... How does that look to you?"}], "tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 3, "last_activity_date": 1440044335, "last_edit_date": 1440044335, "creation_date": 1440037318, "answer_id": 32108575, "question_id": 32107392, "link": "https://stackoverflow.com/questions/32107392/how-to-get-3-chars-entered-with-spaces-in-scanf-into-a-char-array/32108575#32108575", "title": "How to get 3 chars entered with spaces in scanf into a char array?", "body": "<blockquote>\n  <p>If someone could explain what I'm doing wrong here, I would appreciate it.</p>\n</blockquote>\n\n<p>The short story is: Your code doesn't fulfill your requirements. It simply doesn't do what you want it to do.</p>\n\n<p>Your requirements are:</p>\n\n<ul>\n<li>All fields must be one character. This requirement isn't fulfilled by your code. Your code will mistakenly accept multiple characters per field.</li>\n<li>There must be one space (exactly one space?) between the fields. This requirement isn't fulfilled by your code. There might be multiple spaces between the fields, and your code will mistakenly accept that.</li>\n</ul>\n\n<p><strong>In fact, your code invokes undefined behaviour by accessing the <code>move</code> array out of bounds.</strong> Consider that as a consequence of one of the above scenarios <code>i</code> might become some value higher than 3. What might happen in this code: <code>move[i] = input[i];</code>?</p>\n\n<p>Your code is also way too complex. All of your functionality can be performed by <code>scanf</code> alone. It's a very powerful function, when you know how to use it correctly... I suggest reading and understanding <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/fscanf.html\" rel=\"nofollow\">the manual</a> multiple times, when you have an opportunity. You'll learn <em>a lot</em>!</p>\n\n<p>I notice something you neglected to mention from within the logic you have presented: It's expected that the first field might also be <code>'x'</code>, which corresponds to an <em>exit</em> usecase. This is a bad design; the caller has no opportunity to clean up... but I'll run with it. You really should use <code>return</code> (and return an <code>int</code> value or something, corresponding to error/success) instead.</p>\n\n<p>Let us caste that last paragraph aside, because we can simply consider <code>'x'</code> to be invalid input (and exit as a result), and I don't want to change the contracts of your functions; I'll leave that to you. The expression described so far appears to be <code>int x = scanf(\"%1[0123456789]%*1[ ]%1[0123456789]%*1[ ]%1[vh]\", a, b, c);</code>.</p>\n\n<p>Note that it is expected that <code>a</code>, <code>b</code> and <code>c</code> will have enough space to store a string of one byte in length. That is, their declaration should look like: <code>char a[2], b[2], c[2];</code>.</p>\n\n<p><strong>Make sure you check the return value (<code>x</code>, in the example)!</strong> If <code>x</code> is 3, it's safe to assume that the three variables <code>a</code>, <code>b</code> and <code>c</code> are safe to use. If <code>x</code> is 2, it's safe to assume that <code>a</code> and <code>b</code> are safe to use, and so on... If <code>x</code> is <code>EOF</code> or <code>0</code>, none of them are safe to use.</p>\n\n<p>By checking the return value, you can reject input that doesn't match that precise pattern, that is:</p>\n\n<ul>\n<li>Fields that aren't exactly one byte in width will be rejected.</li>\n<li>Too many or too few spaces will be rejected.</li>\n</ul>\n\n<p>Something else popped up that you have neglected to mention, and it's also present within your code: Chux mentioned that you'll likely be expecting the input to be terminated with a <code>'\\n'</code> (newline) character. This can also be implemented in a number of ways using <code>scanf</code>:</p>\n\n<ul>\n<li><code>scanf(\"%1*[\\n]\");</code> will attempt to read and discard precisely one <code>'\\n'</code> character, but there's no way to ensure that was successful. <code>getchar</code> would be more appropriate for that purpose; something along the lines of <code>if (getchar() != '\\n') { exit(EXIT_FAILURE); }</code> might make sense, if you wish to ensure that the lines of input are perfectly formed and bomb out when they aren't... <code>#define BOMB_OUT</code>?</li>\n<li><code>scanf(\"%*[^\\n]\"); scanf(\"%*c\");</code> makes more sense; If you're interested in reading <em>one item per line</em>, then it makes sense to discard everything remaining on the line, and then the newline character itself. Note that your program should always tell the user when it's discarding or truncating input. You could also use <code>getchar</code> for this.</li>\n</ul>\n\n<hr>\n\n<pre><code>void manageInput(char box[][width]){\n    for (;;) {\n        char a[2], b[2], c[2];\n        int x = scanf(\"%1[0123456789]%*1[ ]%1[0123456789]%*1[ ]%1[vh]\", a, b, c);\n        if (x != 3) {\n            /* INVALID INPUT should cause an error value to be returned!\n             * However, this function has no return value (which makes it\n             * poorly designed)... Calling `exit` gives no opportunity for\n             * calling code to clean up :(\n             */\n            exit(EXIT_FAILURE);\n        }\n\n        if (getchar() != '\\n') {\n#           ifdef BOMB_OUT\n            exit(EXIT_FAILURE);\n#           else\n            scanf(\"%*[^\\n]\");\n            getchar();\n            puts(\"NOTE: Excess input has been discarded.\");\n#           endif\n        }\n\n        char move[4] = { a[0], b[0], c[0] };\n        printf(\"%s\\n\", move);\n        makeMove(box, move);\n        printBox(box, height, width);\n        // TODO\n        if(move[0] == 'x'){\n            exit(0);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1014, "user_id": 2238818, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/aa6471cf4c21886529bb7c198948ac75?s=128&d=identicon&r=PG", "display_name": "Fishingfon", "link": "https://stackoverflow.com/users/2238818/fishingfon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1440044335, "creation_date": 1440027784, "last_edit_date": 1440039344, "question_id": 32107392, "link": "https://stackoverflow.com/questions/32107392/how-to-get-3-chars-entered-with-spaces-in-scanf-into-a-char-array", "title": "How to get 3 chars entered with spaces in scanf into a char array?", "body": "<p>I am previously a java programmer, but I'm now doing a C course at university (computer science major).</p>\n\n<p>I need the user to be able to enter 3 chars,the first 2 being numbers, and the last 1 being either 'v' or 'h'.\nFor example \"1 2 v\".</p>\n\n<p>I need the user to be able to enter it with the spaces in between each character.</p>\n\n<p><strong><em>This is my current code:</em></strong></p>\n\n<pre><code>void manageInput(char box[][width]){\n    char move[4];\n    char input[16]; \n    while(1){\n\n            scanf(\"%s\", input);\n            int i = 0;\n            while(input[i] != 0){\n\n                    if(input[i] != ' ' &amp;&amp; input[i] != \"\\n\"){\n                            move[i] = input[i];\n                    }\n                    i++;\n            }\n            printf(\"%s\\n\", move);\n\n            makeMove(box, move);\n            printBox(box, height, width);\n            // TODO\n            if(move[0] == 'x'){\n                    exit(0);\n            }\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>However if I run it, it works fine when I enter the chars with out spaces like \"12v\", but  If I enter \"1 2 v\", it will print out \"1\", call printBox, then print out \"2\", then print out box again, and so on.</p>\n\n<p>If someone could explain what I'm doing wrong here, I would appreciate it.</p>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 1, "creation_date": 1440025084, "post_id": 32106962, "comment_id": 52108354, "body": "<a href=\"http://www.cplusplus.com/reference/cstring/strcat/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstring/strcat</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440025196, "post_id": 32106962, "comment_id": 52108380, "body": "Do not add tags for different languages! C++ is not C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1440025254, "post_id": 32106962, "comment_id": 52108395, "body": "And read what a <i>pointer</i> is. You seem not even to have an idea about them. I&#39;d recommend to read a C bokk or do a tutorial."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1440025763, "post_id": 32106962, "comment_id": 52108520, "body": "Because C doesn&#39;t have string types. You have to do that yourself, as well as doing the memory management."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440027237, "post_id": 32107017, "comment_id": 52108903, "body": "&quot;And adding two pointers results in a pointer that points at the address that is the sum of the two original addresses.&quot; - it&#39;s a constraint violation. Pointers aren&#39;t fancy integers"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1440029036, "post_id": 32107017, "comment_id": 52109417, "body": "strings are not pointers.   They behave like pointers in some circumstances, but they are not pointers."}, {"owner": {"reputation": 5541, "user_id": 4367864, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/mIepQ.png?s=128&g=1", "display_name": "PC Luddite", "link": "https://stackoverflow.com/users/4367864/pc-luddite"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1440039017, "post_id": 32107017, "comment_id": 52111631, "body": "@Peter I think what he&#39;s trying to say that strings in C are implemented as an array of characters, and arrays are often managed using pointers to their first element. Therefore, you can&#39;t use <code>+</code> when concatenating strings because adding two pointers is meaningless. The wording can be tricky."}, {"owner": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1521826672, "post_id": 32107017, "comment_id": 85913819, "body": "@M.M actually, a pointer is a variable that holds a value of an address which is a <i>fancy</i> <b>integer</b>, whoever downvoted this, tell me what&#39;s wrong with his answer? upvoted."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "edited": false, "score": 0, "creation_date": 1521861525, "post_id": 32107017, "comment_id": 85924635, "body": "@KiraSama no an address isn&#39;t a fancy integer (in Standard C) . This is a common misconception that  contributes to the confusion newbies have surrounding pointers. If pointers were a sort of integer then you could add them, for example. But you can&#39;t. This answer claims two pointers can be added, which is false."}, {"owner": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1521948455, "post_id": 32107017, "comment_id": 85947076, "body": "@M.M<code>A pointer is an address, which is a numeric value</code> Incrementing a pointer results the next adjacent location in memory as <code>while(*ptr)ptr++;</code> when counting a length of an C string which the termination character at the end of it would be 0, stops the loop results the length of it is how much the loop iterated, so you&#39;re able to use arithmetic operations with pointers, never tried to add them cause It&#39;s meaningless but you <b>can</b>, unlike subtracting them which is useful in some ways, sorry if I didn&#39;t get your comment but I claim that I <b>can</b> add them &amp;&amp; <code>printf</code> that integral address."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "edited": false, "score": 0, "creation_date": 1521955505, "post_id": 32107017, "comment_id": 85948092, "body": "@KiraSama The compiler will give an error for attempting to add two pointers. And/or you could read the C Standard"}, {"owner": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1521973403, "post_id": 32107017, "comment_id": 85951971, "body": "@M.M Just cast <code>(int)</code> before them and their addresses would be added."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "edited": false, "score": 1, "creation_date": 1522007163, "post_id": 32107017, "comment_id": 85963236, "body": "@KiraSama The cast changes a pointer value to an integer value. Integers can be added, pointers can&#39;t. Also, your cast may cause undefined behaviour on a system with 64-bit pointers and 32-bit ints."}], "tags": [], "owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "is_accepted": false, "score": 0, "last_activity_date": 1440025369, "creation_date": 1440025369, "answer_id": 32107017, "question_id": 32106962, "link": "https://stackoverflow.com/questions/32106962/adding-char-variables-together/32107017#32107017", "title": "Adding char* variables together?", "body": "<p>You can't add two strings in C because, well, they're not actually strings. They're just pointers. And adding two pointers results in a pointer that points at the address that is the sum of the two original addresses.</p>\n\n<p>To concatenate two <code>char*</code>s together, you can use the <a href=\"http://www.cplusplus.com/reference/cstring/strcat/\" rel=\"nofollow\">strcat(char * destination, const char * source)</a> function. Just make sure that your <code>both</code> pointer is pointing to enough memory to actually hold the concatenated string!</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1440027196, "post_id": 32107066, "comment_id": 52108889, "body": "check your snprintf arguments"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440027720, "post_id": 32107066, "comment_id": 52109033, "body": "Taking a sledgehammer to crack a nut. What&#39;s wrong with strcpy here?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440030077, "post_id": 32107066, "comment_id": 52109610, "body": "@Olaf You&#39;d need a <code>strcpy</code> followed by two <code>strcat</code> to accomplish what the <code>snprintf</code> is doing. And using a sledgehammer to crack nuts will improve your arm strength, so it&#39;s a win-win :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1440032041, "post_id": 32107066, "comment_id": 52109994, "body": "@user3386109: Yes, that is the attitude leading to GUIs with 16GiB requirement to run a text editor. Alone the format string parser is more bloat than the 10 strcpys. Also: it is just two memcpy and 1 strlen. And a modern compiler wil either inline them and use highly optimized code. If you are a brain-worker, there is nothing gained being a body-builder."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1440089172, "post_id": 32107066, "comment_id": 52139658, "body": "I expect that the OP doesnt want to simply add two stirng together. I suspect he is composing a string like &quot;https://%s:%d&quot;, in that case snprintf is what he wants"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": false, "score": 1, "last_activity_date": 1440089058, "last_edit_date": 1440089058, "creation_date": 1440025693, "answer_id": 32107066, "question_id": 32106962, "link": "https://stackoverflow.com/questions/32106962/adding-char-variables-together/32107066#32107066", "title": "Adding char* variables together?", "body": "<p>you probably want to use snprintf</p>\n\n<pre><code>char buff[100];\nsnprintf(buff, sizeof(buff), \"%s %s\", port, ip);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2088, "user_id": 8524922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfezG.jpg?s=128&g=1", "display_name": "Beyondo", "link": "https://stackoverflow.com/users/8524922/beyondo"}, "is_accepted": false, "score": 0, "last_activity_date": 1521827745, "creation_date": 1521827745, "answer_id": 49455743, "question_id": 32106962, "link": "https://stackoverflow.com/questions/32106962/adding-char-variables-together/49455743#49455743", "title": "Adding char* variables together?", "body": "<p>You can use <code>sprintf()</code> function call</p>\n\n<p><strong>...</strong></p>\n\n<p><code>sprintf(char * buffer, const char * format, ...)</code></p>\n\n<p><strong>Dynamic</strong></p>\n\n<pre><code>char* res = (char*)malloc(15);\nchar* str1 = \"Hello \";\nchar* str2 = \"World!\";\nsprintf(res, \"%s%s\", str1, str2);\nputs(res); // Hello World!\n</code></pre>\n\n<p><strong>Static</strong></p>\n\n<pre><code>char res[15];\nchar str1[] = \"Hello \";\nchar str2[] = \"World!\";\nsprintf(res, \"%s%s\", str1, str2);\nputs(res); // Hello World!\n</code></pre>\n\n<p>you're able to add integers into a <strong>C</strong> string too with the <code>%d</code> format specifier.</p>\n"}], "owner": {"reputation": 101, "user_id": 5213298, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a633b4a467982e6b6327d7120d010fed?s=128&d=identicon&r=PG&f=1", "display_name": "forever_fighting_21", "link": "https://stackoverflow.com/users/5213298/forever-fighting-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1426, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1521827745, "creation_date": 1440025035, "last_edit_date": 1440025175, "question_id": 32106962, "link": "https://stackoverflow.com/questions/32106962/adding-char-variables-together", "title": "Adding char* variables together?", "body": "<p>Very simple question but within my code I have two char* variables. </p>\n\n<pre><code>char* port = \"1100\";\nchar* ip = inet_ntoa(((struct sockaddr_in *)&amp;ifr.ifr_addr)-&gt;sin_addr);\n</code></pre>\n\n<p>The first is a port number and the second tells the ip address of a given interface.</p>\n\n<p>If I wanted to create a new variable say, char* both, why is it that I cannot say: </p>\n\n<pre><code>char* both = ip + port; \n</code></pre>\n\n<p>with the output of 172.21.8.179 1100? How can I get a new variable with that output? Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1440024959, "post_id": 32106909, "comment_id": 52108325, "body": "<code>text</code> is NULL, so you&#39;re going to crash at <code>text[*characters]</code>. Also, comparing a <code>char</code> to <code>EOF</code> doesn&#39;t make sense."}, {"owner": {"reputation": 3006, "user_id": 4307644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5a0ad436fd74b40a789d43682b223205?s=128&d=identicon&r=PG", "display_name": "MeetTitan", "link": "https://stackoverflow.com/users/4307644/meettitan"}, "edited": false, "score": 0, "creation_date": 1440025625, "post_id": 32106909, "comment_id": 52108487, "body": "An easy way to think of it is, because <code>text</code> is nothing, when you ask for its location in memory with <code>text[*characters]</code> it crashes, because nothing has no address."}, {"owner": {"reputation": 1040, "user_id": 2327497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001609f0e9acc8302721fe05fecbc97c?s=128&d=identicon&r=PG", "display_name": "Arlie Stephens", "link": "https://stackoverflow.com/users/2327497/arlie-stephens"}, "edited": false, "score": 0, "creation_date": 1440036323, "post_id": 32106909, "comment_id": 52110981, "body": "Personally, when I want to read a block of a particular size, I just use read()."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4921189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nitl6.png?s=128&g=1", "display_name": "Haeral", "link": "https://stackoverflow.com/users/4921189/haeral"}, "edited": false, "score": 0, "creation_date": 1440025594, "post_id": 32107040, "comment_id": 52108480, "body": "Thanks. I tried this          static char text[1000]; and it worked."}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "edited": false, "score": 0, "creation_date": 1440025933, "post_id": 32107040, "comment_id": 52108559, "body": "melpomene: well, you&#39;re right, in this case it&#39;s not needed as you have to <code>free</code> memory after all."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1440037341, "post_id": 32107040, "comment_id": 52111235, "body": "A static array exists in what is usually called the data segment of a program, not from the stack or from the heap. _alloca() could be used to allocate from the stack (which auto frees when the function returns), but it&#39;s rarely used these days."}], "tags": [], "owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "is_accepted": false, "score": 2, "last_activity_date": 1440025992, "last_edit_date": 1440025992, "creation_date": 1440025534, "answer_id": 32107040, "question_id": 32106909, "link": "https://stackoverflow.com/questions/32106909/how-to-load-a-text-that-can-include-new-line/32107040#32107040", "title": "How to load a text that can include &quot;new line&quot;?", "body": "<p>Allocate some memory for <code>text</code> via <code>malloc</code>. E.g.,</p>\n\n<pre><code>char *text = malloc(1000);\n</code></pre>\n\n<p>And remember to free memory at the end of the function using <code>free</code>.</p>\n\n<p><strong>upd:</strong>\nAlternatively, you can consider using stack instead of heap:</p>\n\n<pre><code>static char text[1000];\n</code></pre>\n\n<p>Note that in both cases you should allocate maximum length plus one byte for string because of <code>'\\0'</code> at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "is_accepted": false, "score": 0, "last_activity_date": 1440025572, "last_edit_date": 1495542125, "creation_date": 1440025572, "answer_id": 32107048, "question_id": 32106909, "link": "https://stackoverflow.com/questions/32106909/how-to-load-a-text-that-can-include-new-line/32107048#32107048", "title": "How to load a text that can include &quot;new line&quot;?", "body": "<p>No need to pass an int pointer for characters. Also your whole array concept seems to be quite off. See <a href=\"https://stackoverflow.com/questions/10186765/char-array-vs-char-pointer-in-c\">here</a> for ways to work with char arrays. You only declare a char pointer but you never point it to a memory block, which means that once you start traversing you go God knowns where and get segmentation violations.</p>\n\n<ol>\n<li>Declare an array on the stack or reserve dynamically memory and assign a pointer to that block</li>\n<li>Loop while getchar() isn't equal to \\n or EOF (you can also use the ASCII code for the Enter, which, if I remember correctly, is the number 13). Also depending on the way you have declared your array you will have to put a counter for the index of the array cell currently being handled or just increase the pointer by one</li>\n<li>Insert the character received from getchar() in your array</li>\n</ol>\n\n<p>Here is one more easy to follow <a href=\"http://www.tutorialspoint.com/cprogramming/c_array_of_pointers.htm\" rel=\"nofollow noreferrer\">tutorial</a> that might help you get a hold on the pointer/array situation.</p>\n"}, {"comments": [{"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "edited": false, "score": 0, "creation_date": 1440027012, "post_id": 32107208, "comment_id": 52108838, "body": "You should allocate one extra byte for &#39;\\0&#39; at the end of the string."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440042126, "post_id": 32107208, "comment_id": 52112326, "body": "Detail: a <code>char</code> and <code>int</code> <i>can</i> both have the value of <code>EOF</code>.  Example:  signed <code>char</code> and <code>EOF == -1</code>.  The problem is that <code>char</code> cannot distinctly hold all the different values return from <code>getchar()</code>.  <code>0</code> to <code>UCHAR_MAX</code> and <code>EOF</code>: typically 257 different values."}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1440063648, "last_edit_date": 1440063648, "creation_date": 1440026610, "answer_id": 32107208, "question_id": 32106909, "link": "https://stackoverflow.com/questions/32106909/how-to-load-a-text-that-can-include-new-line/32107208#32107208", "title": "How to load a text that can include &quot;new line&quot;?", "body": "<p>A pointer is not an array.</p>\n\n<p>So</p>\n\n<pre><code>static char *text;\n</code></pre>\n\n<p>defines a pointer which, since it is <code>static</code> is a NULL pointer.   The next action is attempting to treat that pointer as if it is an array,</p>\n\n<pre><code>while((*characters&lt;999)&amp;&amp;(((text[*characters])=getchar())!=EOF))\n</code></pre>\n\n<p>which gives undefined behaviour.   Practically, the result is usually overwriting some random area of memory.  Operating systems - if they detect that - will terminate your program (which, in your case, means by triggering a segmentation violation).</p>\n\n<p>Making <code>text</code> static is irrelevant.   Without the <code>static</code> keyword, all that happens is that <code>text</code> is created automatically when your program is run, and doesn't exist after it returns.   In that case, it will be uninitiatialised (which means even accessing its value gives undefined behaviour).</p>\n\n<p>What you need to do is make <code>text</code> point at a valid location in memory.   Since you are returning its value, that value has to be valid after the function returns.   One way is</p>\n\n<pre><code> char text = malloc(999 + 1);\n</code></pre>\n\n<p>which will be fine, as long as the input does not exceed <code>999</code> characters.   It will also be necessary for the caller to release that memory to avoid a memory leak.</p>\n\n<p>Also, <code>getchar()</code> returns an <code>int</code>.   An <code>int</code> can represent the value of <code>EOF</code>.  There is no guarantee that a <code>char</code> can.   So assigning <code>(text[*characters])=getchar()</code> means that value (since it has been converted to be a <code>char</code>) may never compare equal with <code>EOF</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4921189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nitl6.png?s=128&g=1", "display_name": "Haeral", "link": "https://stackoverflow.com/users/4921189/haeral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1440063648, "creation_date": 1440024732, "last_edit_date": 1440034395, "question_id": 32106909, "link": "https://stackoverflow.com/questions/32106909/how-to-load-a-text-that-can-include-new-line", "title": "How to load a text that can include &quot;new line&quot;?", "body": "<p>One excercise commonly asked on my faculty's exams is using a function to load a text(&lt;1000 characters) into an array that can include \"enter\" or \"\\n\". </p>\n\n<p>The way I've seen other people do it is the following:</p>\n\n<pre><code>char * load (int  *characters) //characters=amount of characters written\n{    \n    static char *text;\n    *characters=0;\n    while((*characters&lt;999) &amp;&amp; (((text[*characters]) = getchar()) != EOF))\n    {\n        ++*characters;\n    }\n    text[*characters]='\\0';\n    return(text);\n}\n</code></pre>\n\n<p>My problem is that I always get segmentation violations when trying to input something. I'd love some help!</p>\n"}, {"tags": ["c", "unit-testing", "cpputest"], "comments": [{"owner": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "edited": false, "score": 0, "creation_date": 1440026403, "post_id": 32106816, "comment_id": 52108686, "body": "I am no expert in testing, but I found <a href=\"http://stackoverflow.com/a/1410143/1174343\">this SO answer</a> addressing your dependency problem quite interesting."}, {"owner": {"reputation": 6051, "user_id": 109704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a2d9fe259b7217a9743f4a09abdc982b?s=128&d=identicon&r=PG", "display_name": "wei", "link": "https://stackoverflow.com/users/109704/wei"}, "reply_to_user": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "edited": false, "score": 0, "creation_date": 1440028443, "post_id": 32106816, "comment_id": 52109234, "body": "thanks for the link. This is more of an &#39; internal &#39; dependency than an &#39;external&#39; dependency such as logger in the linked answer. For external dependency, mocking is the way to go which I see how it works nicely."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1440038514, "post_id": 32106816, "comment_id": 52111492, "body": "Trigger all the cases is quite impossible, if you want to fake some result from func_A() without be able to trigger it, you can use <code>#ifndef</code>, <code>#ifdef</code> and <code>#define</code>. On test mode you set TEST, and on func_A you can choose to fake the return. But this can be use just for some corner cases, it is easier to try to set the environment to trigger all cases"}, {"owner": {"reputation": 22989, "user_id": 1622894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fc8ff4593f37f357f8e3985d9f16902?s=128&d=identicon&r=PG&f=1", "display_name": "ollo", "link": "https://stackoverflow.com/users/1622894/ollo"}, "edited": false, "score": 0, "creation_date": 1441312108, "post_id": 32106816, "comment_id": 52640346, "body": "I use 1.) to get around those sometimes-link-production-sometimes-mock issues. If you use CMake (incl. CTest) for building the amount of executable is not an issue; cmake will create them for you and ctest will run them all in a single command."}], "owner": {"reputation": 6051, "user_id": 109704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/a2d9fe259b7217a9743f4a09abdc982b?s=128&d=identicon&r=PG", "display_name": "wei", "link": "https://stackoverflow.com/users/109704/wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440024156, "creation_date": 1440024156, "question_id": 32106816, "link": "https://stackoverflow.com/questions/32106816/c-unit-test-common-practice", "title": "C unit test common practice", "body": "<p>For example, my production code(say it builds to an executable) has </p>\n\n<pre><code>file_a.c (sub_module A)\n   int func_a() {\n      ....\n   }\n\nfile_b.c (module B)\n   func_b () {\n       ...\n       ret = func_a();\n       ...\n   }\n</code></pre>\n\n<p>For unit test, I am using CppUTest. If I test B with the real code of A, then</p>\n\n<ol>\n<li>I need real implementation of A, </li>\n<li>we might not be able to produces all different possible outputs from func_a(). </li>\n<li>if func_a() calls other module's functions, it is hard to discover/setup all cases deep inside the function call chains.</li>\n<li>mabybe this is too extreme, but I can't convince ppl how this approach different from linking all code together and simply testing from main()?</li>\n</ol>\n\n<p>But If I  mock func_a() while testing B, then linker will complain multiple definitions once I start testing A since now real implementation will be linked. \nFor this issue, I see two ways around it </p>\n\n<ol>\n<li>create a separate test executable for each file_a.c and file_b.c. But this will produce so many executables as the production grows, and also complications will happen if some \"real\" and \"mock\" combination tests is needed.</li>\n<li>compile production code as a shared library and link it to the test executable, then use link time interposing to intercept function calls towards the real implementation. </li>\n</ol>\n\n<p>So what is the common practice for such scenarios? I am sure this is a very common scenario for unit testing c code. </p>\n\n<p>Thanks,</p>\n"}, {"tags": ["c++", "c", "constants", "language-lawyer"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440546219, "post_id": 32106803, "comment_id": 52315378, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. <code>get_in_ptr</code> and <code>get_out_ptr</code> are not defined."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440613077, "post_id": 32106803, "comment_id": 52350088, "body": "I have extended the example."}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440025445, "post_id": 32106942, "comment_id": 52108440, "body": "Thanks a lot! Should I interpret this as meaning that the structs &quot;s1&quot; and &quot;s2&quot; are layout compatible (or the equivalent C terminology)? Additionally, is it strict-aliasing-safe to read the value of &quot;in-&gt;ptr&quot; in the function &quot;alg,&quot; and does the answer depend on if &quot;in&quot; and &quot;out&quot; are the same structure?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440025488, "post_id": 32106942, "comment_id": 52108453, "body": "@68ejxfcj5669: Why don&#39;t you just read the standard? Instead of requiring  me to copy bits of it here?"}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440026019, "post_id": 32106942, "comment_id": 52108578, "body": "&quot;You know this is okay anyway, because when you wrote &amp;in_arg your compiler implicitly converted the s1* to const s1*&quot;. I know that non-const pointers are convertible to const pointers, but it&#39;s not immediately obvious that they need have the same representation. For example, some implementation might add a tag bit to const-pointers that triggers a trap when written. Anyway, the real question at hand is about aliasing the structs s1 and s2. I could read the standard, but I&#39;ve never understood how to interpret strict aliasing clauses."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440026158, "post_id": 32106942, "comment_id": 52108609, "body": "@68ejxfcj5669: I think the passages I quoted are fairly clear."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440026678, "post_id": 32106942, "comment_id": 52108758, "body": "Yes. It is now clear to me that the pointers have the same representation, and I can e.g. memcpy them. However, what is <b>not</b> clear to me is what this means for structures that contain differently qualified pointers. The question is about accesing s1 and s2 through pointers to the other type, but since the issue of pointer representation has been sorted, perhaps this is just another strict-aliasing question. Sorry if I have somehow offended you."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440027044, "post_id": 32106942, "comment_id": 52108847, "body": "@68ejxfcj5669 You haven&#39;t &quot;offended&quot; me; I just don&#39;t see what&#39;s left to add. If you have two structures whose only members have identical layout, then clearly the two structures themselves have identical layout. I&#39;ve added a couple more citations (C++14 only this time; you can find the equivalents in the other standards yourself!) if that helps...?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1440031444, "post_id": 32106942, "comment_id": 52109876, "body": "I&#39;m not convinced that <code>void*</code> and <code>const void*</code> are layout-compatible, even after <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1719\" rel=\"nofollow noreferrer\">CWG 1719</a> relaxed the rules in this area. &quot;have the same representation and alignment requirements&quot; != layout-compatible; the latter has a specific definition in the standard."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440093184, "post_id": 32106942, "comment_id": 52141745, "body": "@LightnessRacesinOrbit I thought about this further, and realized that the statements quoted indicate that &quot;T&quot; and &quot;const T&quot; are identical, not their pointers. Clause 3.9.2 (compound types) in a C++11 draft I found appears to be the relevant language: &quot;Pointers to cv-qualified and cv-unqualified versions (3.9.3) of layout-compatible types shall have the same value representation and alignment requirements (3.11).&quot;"}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1440093410, "post_id": 32106942, "comment_id": 52141890, "body": "@T.C. That&#39;s the part that I&#39;m still unsure of as well. However, in a C++11 draft I found, there is a footnote 51 in section 3.9.3 (CV-qualifiers) that states &quot;The same representation and alignment requirements are meant to imply interchangeability as arguments to functions, return values from functions, and <b>non-static data members of unions.</b>&quot; It&#39;s not clear to me if this implies layout compatibility though."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440094986, "post_id": 32106942, "comment_id": 52142737, "body": "What else would &quot;same representation&quot; mean?"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": -1, "last_activity_date": 1440027181, "last_edit_date": 1592644375, "creation_date": 1440024920, "answer_id": 32106942, "question_id": 32106803, "link": "https://stackoverflow.com/questions/32106803/pointer-to-qualified-and-non-qualified-type-representation/32106942#32106942", "title": "Pointer to qualified and non-qualified type representation", "body": "<blockquote>\n<p><code>[C99: 6.2.5/25, C11: 6.2.5/26]:</code> <em>[..]</em> The qualified or unqualified versions of a type are distinct types that belong to the same type category and have the same representation and alignment requirements. <em>[..]</em></p>\n<p><code>[C++03, C++11, C++14: 3.9.3/1]:</code> <em>[..]</em> The cv-qualified or cv-unqualified versions of a type are distinct types; however, they shall have the same representation and alignment requirements (3.11).</p>\n</blockquote>\n<p>And for the encapsulating types:</p>\n<blockquote>\n<p><code>[C99: 6.2.7/1]:</code> <em>[..]</em> Moreover, two structure, union, or enumerated types declared in separate translation units are compatible if their tags and members satisfy the following requirements: If one is declared with a tag, the other shall be declared with the same tag. If both are complete types, then the following additional requirements apply: there shall be a one-to-one correspondence between their members such that each pair of corresponding members are declared with compatible types, and such that if one member of a corresponding pair is declared with a name, the other member is declared with the same name. <em>[..]</em></p>\n<p><code>[C++03: 9.2/14]:</code> Two POD-struct (clause 9) types are layout-compatible if they have the same number of nonstatic data members, and corresponding nonstatic data members (in order) have layout-compatible types (3.9).</p>\n<p><code>[C++11: 9.2/16, C++14: 9.2/17]:</code> Two standard-layout struct (Clause 9) types are layout-compatible if they have the same number of non-static data members and corresponding non-static data members (in declaration order) have layout-compatible types (3.9).</p>\n</blockquote>\n<p>So, assuming we're ignoring the type system bypass (<code>const void*</code> \u2192 <code>void*</code> through <code>const_cast</code> either directly or by C-style cast \u2014 note that <code>reinterpret_cast</code> has nothing to do with this and is explicitly prohibited from dropping <em>cv-qualifiers</em>) and only talking about aliasing compatibility\u2026</p>\n<p><strong>\u2026yes, this is &quot;safe&quot;.</strong></p>\n<p>It's why we're able to use <code>const_cast</code>, delicately, when ancient C APIs force us to take them at their word rather than actually using <code>const</code>-safety.</p>\n<p>You know this is okay anyway, because when you wrote <code>&amp;in_arg</code> your compiler implicitly converted the <code>s1*</code> to <code>const s1*</code> for the call, and did not complain.</p>\n"}, {"comments": [{"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440094933, "post_id": 32107221, "comment_id": 52142702, "body": "This doesn&#39;t answer the question. The question is whether the cast <i>itself</i> (which is done by casting a pointer to one struct into a pointer to a different struct) is safe, not whether writing to the value referenced through the pointer it safe."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440544179, "post_id": 32107221, "comment_id": 52314743, "body": "@Random832 I agree. The question is regarding whether it is defined to cast the pointers to structs containing pointers of different qualification and read the values of those pointers (not the pointed object)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440546172, "post_id": 32107221, "comment_id": 52315367, "body": "@68ejxfcj5669: The question is clearly given in the first paragraph: &quot;Is it safe to reinterpret a pointer to a qualified type as a pointer to a non-qualified type? ...&quot;. Note that C does not have a <code>reinterpret_cast</code>, but only a cast. If you have a problem with a C answer, you should have tagged your question C++ only."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440546884, "post_id": 32107221, "comment_id": 52315577, "body": "But the question is about casting pointers to two different structs and whether those two structs are compatible for the purpose of such a cast based on the pointer qualifications <i>of their members</i>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440546988, "post_id": 32107221, "comment_id": 52315604, "body": "@Random832: Read the paragraph! OP should have asked different if she wants a different answer. Problem is also that OP is missing some information and a comprehensive answer depends on the language. C is not C++. Especially with type-compatibility, there are massive differences."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440612983, "post_id": 32107221, "comment_id": 52350035, "body": "@Olaf Yes, the question in the first paragraph is very clear. Is it valid to interpret a memory object containing a pointer to unqualified as a memory object containing a pointer to qualified, and vice-versa? The question of whether such pointers are convertible or not by some language mechanism is irrelevant."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 2, "last_activity_date": 1440433987, "last_edit_date": 1440433987, "creation_date": 1440026676, "answer_id": 32107221, "question_id": 32106803, "link": "https://stackoverflow.com/questions/32106803/pointer-to-qualified-and-non-qualified-type-representation/32107221#32107221", "title": "Pointer to qualified and non-qualified type representation", "body": "<p>C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.3p1\" rel=\"nofollow\">states</a>:</p>\n\n<blockquote>\n  <p>For any qualifier q, a pointer to a non-q-qualified type may be converted to a pointer to the q-qualified version of the type; the values stored in the original and converted pointers shall compare equal.</p>\n</blockquote>\n\n<p>So, it is safe to cast to a qualified version, but not vice-versa. Casting away - especially <code>const</code> or volatile could use different memory accesses, e.g. for Harvard architectures storing <code>const</code> variables in program memory (PIC, AVR). And the standard is very <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.3p6\" rel=\"nofollow\">clear</a> about the consequences:</p>\n\n<blockquote>\n  <p>If an attempt is made to modify an object defined with a const-qualified type through use of an lvalue with non-const-qualified type, the behavior is undefined. If an attempt is made to refer to an object defined with a volatile-qualified type through use of an lvalue with non-volatile-qualified type, the behavior is undefined.</p>\n</blockquote>\n\n<p>Briefly: it is <strong>not</strong> safe to cast away those qualifiers in general. The standard does not mention read-accesses for ex-<code>const</code> objects, however.</p>\n\n<p>For the other qualifiers and further details, please read yourself.</p>\n\n<hr>\n\n<p>For the struct layout: C uses compatibility by type/layout, as opposed to C++. So two types are compatible if they use the same layout/standard type, not the same type-name.</p>\n"}], "owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1440612845, "creation_date": 1440024091, "last_edit_date": 1440612845, "question_id": 32106803, "link": "https://stackoverflow.com/questions/32106803/pointer-to-qualified-and-non-qualified-type-representation", "title": "Pointer to qualified and non-qualified type representation", "body": "<p>Is it safe to reinterpret a pointer to an unqualified type as a pointer to a qualified type? Consider a standard layout type containing a pointer member \"void *ptr\" and another standard layout type defined equivalently, but with \"const void *ptr\". Are these types layout compatible, and does this answer depend on the language revision or between C and C++?</p>\n\n<p>Motivation:</p>\n\n<p>Sometimes when interfacing with C programs, one defines a struct grouping parameters to some type of buffer. For const-correctness, an input buffer should have const pointers to underlying buffers, but output buffers must obviously be mutable.</p>\n\n<pre><code>struct s1 { const void *ptr; }\nstruct s2 { void *ptr; }\n\nconst void *get_in_ptr(void);\nvoid *get_out_ptr(void);\n\nvoid alg(const s1 *in, const s2 *out);\n\nvoid f()\n{\n    s1 in_arg = { get_in_ptr() };\n    s2 out_arg1 = { get_out_ptr() };\n    s2 out_arg2 = { get_out_ptr() };\n\n    /* First algorithm pass. */\n    alg(&amp;in_arg, &amp;out_arg1);\n    /* Second algorithm pass. */\n    alg((const s1 *)&amp;out_arg1, &amp;out_arg2); /* Is this legal? */\n}\n</code></pre>\n\n<p>Please cite the relevant standard publications in any answers.</p>\n"}, {"tags": ["c", "perl", "variables"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1440020323, "post_id": 32105815, "comment_id": 52106751, "body": "<a href=\"http://p3rl.org/Inline::C\" rel=\"nofollow noreferrer\">Inline::C</a>?"}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440020569, "post_id": 32105815, "comment_id": 52106854, "body": "or change the permissions on <code>myCProg</code> so only folks with permission to execute it can."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440020619, "post_id": 32105815, "comment_id": 52106869, "body": "@thrig, You&#39;d have to make the Perl script an set-uid script for that to be useful."}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 1, "creation_date": 1440021030, "post_id": 32105815, "comment_id": 52107014, "body": "I completely fail to see what setuid on a perl script would have to do with controlling who has permissions to execute <code>myCProg</code>, e.g. <code>chmod go-rwx myCProg</code> to restrict execution (and thus viewing the output) to just the owner."}, {"owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440050635, "post_id": 32105815, "comment_id": 52114791, "body": "@thrig 1. create user to own <code>myPerlProg</code> and <code>myCProg</code>.  2. <code>chmod 700 myCProg</code>.  3. make <code>myPerlProg</code> setuid so other users can execute <code>myPerlProg</code> and it can execute <code>myCProg</code> (but they can&#39;t execute <code>myCProg</code> directly)."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440073445, "post_id": 32105815, "comment_id": 52128683, "body": "@thrig, If you do that, the user won&#39;t be able to execute it, but the OP wants the user to be able to execute it. He just doesn&#39;t want the user to see its output. So changing the permissions of the C program isn&#39;t enough. You additionally have to make the Perl script a set-uid script."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "edited": false, "score": 0, "creation_date": 1440074787, "post_id": 32105815, "comment_id": 52129643, "body": "If we&#39;re talking permissions, both the myCProg and perl script will be chmod 700 and owned/group root. The perl script will also have code in it that will not let it run unless it&#39;s run by root or sudo (double checks and if not then it will print to console that it must be run by root). I&#39;m wondering, is all this enough? Also I heard that anything printed to console is stored somewhere and can be recalled (like in a profile cache). I want the output of the C Program to not end up in one of these caches."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "edited": false, "score": 0, "creation_date": 1440076482, "post_id": 32105815, "comment_id": 52130884, "body": "Wait... I think I was wrong about caching output. I remembered that things you type in at the command line can be cached in the profile (so that you can use the up arrow to recall them) but not anything printed out to the screen by a program. I assume this is true?"}, {"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440081839, "post_id": 32105815, "comment_id": 52134951, "body": "Nope, still not seeing where the setuid is coming from. Maybe the poster could clarify the requirements?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440116782, "post_id": 32105815, "comment_id": 52151963, "body": "@thrig, see my last two comments. I don&#39;t know how else to explain it."}], "answers": [{"comments": [{"owner": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440165866, "post_id": 32106136, "comment_id": 52174039, "body": "Besides wondering why setuid has been proposed as a solution to this problem (perhaps the poster could clarify what exactly &quot;anyone could also run&quot; means?), I could point out that suidperl support was eliminated from perl five years ago (<code>perldoc perl5120delta</code>). Thus, the above is certainly not a valid solution."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 586, "user_id": 5216673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb5d8b8e0713574ae9a4836651a39e56?s=128&d=identicon&r=PG", "display_name": "thrig", "link": "https://stackoverflow.com/users/5216673/thrig"}, "edited": false, "score": 0, "creation_date": 1440175146, "post_id": 32106136, "comment_id": 52180163, "body": "@thrig, Perhaps you should read your own reference, cause you are completely wrong. What was removed from 5.12 was an emulation of setuid scripts for systems that didn&#39;t support them. Setuid Perl scripts still work on systems that support setuid scripts."}], "tags": [], "owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1440073505, "last_edit_date": 1440073505, "creation_date": 1440020552, "answer_id": 32106136, "question_id": 32105815, "link": "https://stackoverflow.com/questions/32105815/how-do-i-securely-get-data-transferred-from-c-to-perl/32106136#32106136", "title": "How do I securely get data transferred from C to Perl?", "body": "<p>You could encrypt the communication. You could communicate via fd 3. You could create a socket and have the C program connect to that socket. But whatever you do can be done by anyone else too.</p>\n\n<p>The only solution that comes to mind involves file permissions: Remove the ability to access the C program, and make the Perl program a set-uid script whose owner has access to the C program. In detail,</p>\n\n<ol>\n<li>Create a user to own this application. Let's call it <code>myProg</code>.</li>\n<li><code>chown myProg myCProg myPerlProg</code></li>\n<li><code>chmod 700 myCProg</code></li>\n<li><code>chmod 4755 myPerlProg</code></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5074403"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440073505, "creation_date": 1440019045, "last_edit_date": 1440020927, "question_id": 32105815, "link": "https://stackoverflow.com/questions/32105815/how-do-i-securely-get-data-transferred-from-c-to-perl", "title": "How do I securely get data transferred from C to Perl?", "body": "<p>Suppose I have a perl program such as:</p>\n\n<pre><code>my $c = \"MyDataToCProg\";\nopen my $h, '-|', 'myCProg', \"$c\";\nmy @result = &lt;$h&gt;;\nclose $h;\nprint \"Result: \" . $result[0] . \"\\n\";\n</code></pre>\n\n<p>Now, myCProg is a program compiled with gcc. The C program's output would be a printf statement which would end up in the perl program's $result[0] variable.</p>\n\n<p>Is there a better way to extract output out of a C program than through printing with printf? For example, anyone could also run 'myCProg' from the command line and also see output. I want the output to only be seen in the perl program an NOT viewable if someone ran the program at the command line.</p>\n\n<p>Anyone know how to do this?</p>\n\n<p>Sorry, I don't have a C Program handy, but anything that has a printf statement (even a simple Hello World) and takes an argument (maybe prints \"Hello [yourname]\" would work for this example.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 21553, "user_id": 434004, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50a236e50d72e5e32f294d62dc57b5ba?s=128&d=identicon&r=PG", "display_name": "Graham Perks", "link": "https://stackoverflow.com/users/434004/graham-perks"}, "edited": false, "score": 0, "creation_date": 1440021634, "post_id": 32105690, "comment_id": 52107267, "body": "We need info on your build chain. Are we talking Unix, Visual Studio, ...?"}], "owner": {"reputation": 55, "user_id": 605504, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q3vVb.jpg?s=128&g=1", "display_name": "Alex Young", "link": "https://stackoverflow.com/users/605504/alex-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "closed_date": 1440026220, "answer_count": 0, "score": 2, "last_activity_date": 1440023358, "creation_date": 1440018478, "last_edit_date": 1440023358, "question_id": 32105690, "link": "https://stackoverflow.com/questions/32105690/overriding-malloc-in-shared-libraries-in-a-c-application", "closed_reason": "Duplicate", "title": "Overriding malloc in shared libraries in a C application", "body": "<p>I am writing a server application in C that links to three shared libraries. One of the libraries returns NULL from functions that involve one or more malloc(3)'s that fail and the two other libraries call abort(3) from within a function if malloc fails. My application wraps malloc(3) in a function e.g. amalloc that checks for malloc(3) fails (returning NULL) and shuts down the server as gracefully as possible.</p>\n\n<p>Am I able to override calls to malloc(3) in all of the shared libraries so that they use my wrapper function? I would like to be able to handle malloc(3) fails that occur in the shared libraries as well as my application. I would prefer to not have to recompile them but if that's necessary then I can do.</p>\n\n<p>I am using gcc version 4.9.2 (Debian 4.9.2-10) and writing the server to run exclusively on Linux. The shared libraries are linked using -lx, -ly, -lz</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 1, "creation_date": 1440018626, "post_id": 32105682, "comment_id": 52105951, "body": "Once the <code>strlen()</code> problem is fixed, <a href=\"http://stackoverflow.com/questions/25603908/stange-behavior-with-my-c-string-reverse-function\" title=\"stange behavior with my c string reverse function\">stackoverflow.com/questions/25603908/&hellip;</a> is another reverse-string question with your other bug (returning a local array)."}, {"owner": {"reputation": 729, "user_id": 1758142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087d5392c25711573eb218471eac3204?s=128&d=identicon&r=PG", "display_name": "pascx64", "link": "https://stackoverflow.com/users/1758142/pascx64"}, "edited": false, "score": 0, "creation_date": 1440018662, "post_id": 32105682, "comment_id": 52105963, "body": "The bug here is not the return, even if it is a bug"}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "reply_to_user": {"reputation": 729, "user_id": 1758142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087d5392c25711573eb218471eac3204?s=128&d=identicon&r=PG", "display_name": "pascx64", "link": "https://stackoverflow.com/users/1758142/pascx64"}, "edited": false, "score": 1, "creation_date": 1440018713, "post_id": 32105682, "comment_id": 52105987, "body": "@pascx64 Are you saying that returning the local <code>reversedString</code> variable is good, safe, well-defined behavior?"}, {"owner": {"reputation": 729, "user_id": 1758142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087d5392c25711573eb218471eac3204?s=128&d=identicon&r=PG", "display_name": "pascx64", "link": "https://stackoverflow.com/users/1758142/pascx64"}, "edited": false, "score": 0, "creation_date": 1440018787, "post_id": 32105682, "comment_id": 52106020, "body": "No, this is why is said &quot;even if it is a bug&quot;. It is just, not THE bug that cause the problem of gilianzz"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1440018802, "post_id": 32105682, "comment_id": 52106031, "body": "You are forgetting to place a null-terminator on your new string."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1440018815, "post_id": 32105682, "comment_id": 52106038, "body": "1. You are not terminating <code>reversedString</code> array with a null-character. 2. You are returning the address of a local array (<code>reversedString</code>). 3. I would recommend against using variable-length arrays (VLA); Consider allocating it dynamically instead (<code>reversedString = malloc(len)</code>)."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1440018877, "post_id": 32105682, "comment_id": 52106063, "body": "I think the equality of &quot;weird output&quot; and &quot;undefined behavior&quot; should be documented somewhere."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440019035, "post_id": 32105682, "comment_id": 52106130, "body": "@juanchopanza: Yep, I see that now. Perhaps you should also recommend to OP against using VLAs (if you agree with that (regardless of the <code>return</code> issue))."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1440019289, "post_id": 32105682, "comment_id": 52106247, "body": "@barakmanos: VLAs can be useful if the arrays are sized big enough.  This one isn&#39;t (off by one \u2014 forgot the null terminator, which is a problem throughout this code).  You need to be aware of their limitations, and one of those is that there is a limit on the stack size so you should ensure the size is not &#39;too big&#39; \u2014 but there isn&#39;t a portable way to do that."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440019460, "post_id": 32105682, "comment_id": 52106340, "body": "@JonathanLeffler: Also not &quot;logically&quot; portable. To C89, and if I&#39;m not mistaken - also to C++."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1440021879, "post_id": 32105682, "comment_id": 52107366, "body": "@barakmanos: Only in the Windows world is C89 still an issue.  Granted, that&#39;s a moderately big hunk of the world, but there are compilers that work with more recent standards than the quarter-century old C89 standard.  You have to decide whether that&#39;s a problem for you.  You&#39;re right that Standard C++ does not support VLAs.  GCC (G++) does as an extension, but that&#39;s not quite the same thing.  Again, you have to make a decision about whether that is critical to you or not."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1440019055, "post_id": 32105726, "comment_id": 52106135, "body": "Interestingly, the code doesn&#39;t dereference the returned pointer-to-local-variable, so that isn&#39;t an active problem (but it is a disaster waiting to happen).  Not null-terminating the string in the reverse function (as well as not passing a null-terminated string to a function that expects one) is a problem.  The printing occurs down in the reverse function where the local variable is valid."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440019239, "post_id": 32105726, "comment_id": 52106224, "body": "@JonathanLeffler Yes, it is a potential problem. If the function is used as expected, UB will ensue even if the null-terminations are fixed. I re-phrased my answer to indicate that it <i>could</i> be a problem."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440019298, "post_id": 32105726, "comment_id": 52106251, "body": "@Jonathan Leffler  I <i>think</i> even copying an invalid pointer is UB.  Certainly de-referencing it is bad."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440019444, "post_id": 32105726, "comment_id": 52106331, "body": "@chux: In theory, yes.  In practice, I&#39;ve not heard of a machine where the assignment in <code>main()</code> would cause problems.  Any use of the result could cause problems; possibly even checking the result for nullness could cause problems.  But the systems where that happens are few and far between.  I&#39;m not excusing the returned pointer; it is bad.  I am suggesting that the lack of null terminators, and lack of space in the VLA for a null terminator, are the main problems."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440019834, "post_id": 32105726, "comment_id": 52106514, "body": "@Jonathan Leffler  I used to think the same thing about signed integer overflow, but then the compilers became &quot;smarter&quot;.  I agree with current practice, copying an invalid pointer is is not a great concern but a &quot;disaster waiting to happen&quot;."}], "tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 9, "last_activity_date": 1440019098, "last_edit_date": 1440019098, "creation_date": 1440018613, "answer_id": 32105726, "question_id": 32105682, "link": "https://stackoverflow.com/questions/32105682/c-reverse-string-function-getting-weird-output/32105726#32105726", "title": "C reverse string function getting weird output", "body": "<p>There are at least two major bugs in your code. There could be more.</p>\n\n<p>First, the call to <code>strlen</code> causes <em>undefined behaviour</em> because you aren't passing it a null-terminated string. The reason for this is that your char array isn't large enough for the null terminator character:</p>\n\n<pre><code>char string[6] = \"kitten\";\n</code></pre>\n\n<p>You need</p>\n\n<pre><code>char string[7] = \"kitten\";\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char string[] = \"kitten\";\n</code></pre>\n\n<p>Second, you are returning a pointer to a local array, namely <code>reversedString</code>. De-referencing that would also cause undefined behaviour. You can solve this by wither reversing the string in-place, or passing a pointer to a buffer of the same length as the input. Remember that the reversed string must also be null-terminated.</p>\n"}, {"tags": [], "owner": {"reputation": 8806, "user_id": 257418, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/97Mb4.png?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/257418/lynn"}, "is_accepted": true, "score": 11, "last_activity_date": 1440018855, "creation_date": 1440018855, "answer_id": 32105773, "question_id": 32105682, "link": "https://stackoverflow.com/questions/32105682/c-reverse-string-function-getting-weird-output/32105773#32105773", "title": "C reverse string function getting weird output", "body": "<p>Stop! First of all, you're making a classic mistake beginners often make when they learn about pointers. When you write:</p>\n\n<pre><code>char *reverseString(char string[]) {\n    ...\n    char reversedString[len];\n    return reversedString;\n}\n</code></pre>\n\n<p>You're returning a pointer to where it <em>was</em>, not is: the memory actually gets freed when you leave the function, so there's no guarantee that the memory you think contains your reversed string isn't already getting reused by something else. This way, your program will fail catastrophically.</p>\n\n<p>However, you're printing the reversed string before returning it, so it's no huge problem <em>yet</em>. What's going wrong there, then, is that your string isn't properly zero-terminated.</p>\n\n<p>A string in the C language needs room to store its final <code>'\\0'</code> byte: <code>char string[6] = \"kitten\";</code> is too small to hold the zero-terminated string <code>{ 'k', 'i', 't', 't', 'e', 'n', '\\0' }</code>. Similarly, when you call <code>printf(\"%s\", reversedString)</code>, you haven't properly terminated the string with <code>'\\0'</code>, so <code>printf</code> keeps looking for the end of the string and prints out whatever junk is in memory where <code>reversedString</code> is allocated.</p>\n\n<p>You should try:</p>\n\n<ul>\n<li>making your function return <code>void</code>,</li>\n<li>allocating <code>7</code> bytes for your original string,</li>\n<li>allocating <code>strlen(string) + 1</code> (which will also be 7) bytes for your new string, and</li>\n<li>writing a <code>'\\0'</code> to the end of your new string after looping through the old one in reverse.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1440021418, "last_edit_date": 1440021418, "creation_date": 1440020837, "answer_id": 32106198, "question_id": 32105682, "link": "https://stackoverflow.com/questions/32105682/c-reverse-string-function-getting-weird-output/32106198#32106198", "title": "C reverse string function getting weird output", "body": "<p>The function is wrong.</p>\n\n<p>Firts of all it returns pointer to a local array that will be destroyed after exiting the function</p>\n\n<pre><code>//,,,\nchar reversedString[len];  \n//...\nreturn reversedString; //return pointer to first element of reversed string\n</code></pre>\n\n<p>Secondly the reversed string shall have terminating zero. However you declare an array that has no space for the terminating zero.</p>\n\n<p>Also this array in main defined incorrectly</p>\n\n<pre><code>char string[6] = \"kitten\";\n</code></pre>\n\n<p>because it does not include terminating zero.</p>\n\n<p>And at last it is a bad design of the function.</p>\n\n<p>If you want to copy the source string in the destination string then the both character arrays should be declared as function parameters. Moreover the source array should be declared as a constant array.</p>\n\n<p>The function can look the following way</p>\n\n<pre><code>char *reverseCopyString( char s1[], const char s2[] )\n{\n    size_t n = strlen( s2 );\n\n    for ( size_t i = 0; i &lt; n; i++ ) s1[i] = s2[n - i - 1];\n    s1[n] = '\\0';\n\n    return s1;\n}\n</code></pre>\n\n<p>Or you could define the function such a way that ir reverse the source string. For example</p>\n\n<pre><code>char *reverseString( char s[] )\n{\n    size_t n = strlen( s );\n\n    for ( size_t i = 0; i &lt; n / 2; i++ )\n    {\n        char c = s[i];\n        s[i] = s[n - i - 1];\n        s[n - i - 1] = c;\n    }        \n\n    return s;\n}\n</code></pre>\n\n<p>Take into account that string literals are immutable in C and may not be changed. Any attempt to change a string literal results in undefined behaviour of the program.</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nchar *reverseCopyString( char s1[], const char s2[] )\n{\n    size_t n = strlen( s2 );\n\n    for ( size_t i = 0; i &lt; n; i++ ) s1[i] = s2[n - i - 1];\n    s1[n] = '\\0';\n\n    return s1;\n}\n\nchar *reverseString( char s[] )\n{\n    size_t n = strlen( s );\n\n    for ( size_t i = 0; i &lt; n / 2; i++ )\n    {\n        char c = s[i];\n        s[i] = s[n - i - 1];\n        s[n - i - 1] = c;\n    }        \n\n    return s;\n}\n\nint main( void )\n{\n    char *s1 = \"Hello gilianzz\";\n    char s2[16];\n\n    puts( s1 );\n    puts( reverseCopyString( s2, s1 ) );\n    puts( reverseString( s2 ) );\n}    \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Hello gilianzz\nzznailig olleH\nHello gilianzz\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 4674045, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2b8cefe732d7f7a97118291c21e09bc2?s=128&d=identicon&r=PG", "display_name": "gilianzz", "link": "https://stackoverflow.com/users/4674045/gilianzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "accepted_answer_id": 32105773, "answer_count": 3, "score": 4, "last_activity_date": 1440021418, "creation_date": 1440018455, "question_id": 32105682, "link": "https://stackoverflow.com/questions/32105682/c-reverse-string-function-getting-weird-output", "title": "C reverse string function getting weird output", "body": "<p>\nI'm trying to understand pointers and made a reverse string function.<br>\ncode:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nchar *reverseString(char string[]){\n    int i;\n    int len = strlen(string);\n    char reversedString[len];  \n    for (i = 0; i &lt; len; i++){\n        reversedString[i] = string[(len - 1) - i];\n    }\n    printf(\"%s\", reversedString); //print it out\n\n    return reversedString; //return pointer to first element of reversed string\n}\n\nint main (){\n    char string[6] = \"kitten\";\n    int i;\n    char *p = reverseString(string);\n    return (0);\n\n}\n</code></pre>\n\n<p>My goal is to reverse the string \"kitten\" and print the reversed string. I expect the output \"nettik\" but I get \"nettik\ufffd\ufffd\ufffd\". Why am I getting these weird characters?</p>\n"}, {"tags": ["c", "pointers", "casting"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1440016068, "post_id": 32105008, "comment_id": 52104628, "body": "<code>&amp;</code> is the &quot;address-of&quot; operator. Applying it produces a pointer to the operand. This is covered in the early chapters of your &quot;introduction to C&quot; book. <code>RxPtr</code> is a <code>uint*</code> because that&#39;s what the surrounding code needs."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440017516, "post_id": 32105008, "comment_id": 52105415, "body": "XY Problem: The correct way to serialise a struct is to serialise its fields properly and portably. <b>Without</b> casting and warnings."}, {"owner": {"reputation": 7, "user_id": 5244977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2276db7f3bd26fab33d2525d525f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Numbers", "link": "https://stackoverflow.com/users/5244977/mr-numbers"}, "edited": false, "score": 0, "creation_date": 1440072679, "post_id": 32105008, "comment_id": 52128228, "body": "You would be surprised, moldbnilo. All intro C books state what a pointer is, and what &amp; is, but none go into the detail that &amp; produces a pointer to the operand, if that is correct. I&#39;ve been through about 5 C books in the last couple days. Thanks for the answer though, it certainly cleared a few of my thoughts."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5244977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2276db7f3bd26fab33d2525d525f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Numbers", "link": "https://stackoverflow.com/users/5244977/mr-numbers"}, "edited": false, "score": 0, "creation_date": 1440072975, "post_id": 32105300, "comment_id": 52128427, "body": "Thanks John. Based on what you and molbdnilo said, it&#39;s more clear that &amp; produces a pointer. I had trouble believing this at first because I thought only pointers could point to things. But I guess an &amp; isn&#39;t a pointer, it just implicitly produces one behind the scenes? Is this correct to say? As for the confusion around pointers, the problem is that books don&#39;t go into enough detail. All 5 that I&#39;ve been through say the same exact thing. &amp; gives an address, * is the indirection operator, and they are inverses of each other. Details could confuse beginners, but lack of details confuses me!"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "reply_to_user": {"reputation": 7, "user_id": 5244977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2276db7f3bd26fab33d2525d525f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Numbers", "link": "https://stackoverflow.com/users/5244977/mr-numbers"}, "edited": false, "score": 0, "creation_date": 1440078995, "post_id": 32105300, "comment_id": 52132892, "body": "<code>&amp;</code> gives an address, <code>*</code> is the indirection operator, and they are inverses of each other. This is true, and is the sensible part. There are other uses of <code>*</code> besides as the indirection operator, and that&#39;s where it gets confusing. <code>*</code> is also used in type declarations and in typecasts to denote pointer (AKA address) types. This is <i>not</i> the indirection operator. The <code>*</code> in <code>int *</code> is not the same as the <code>*</code> in <code>*variable</code>. The former is a type name, the latter is the indirection operator."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": -1, "last_activity_date": 1440016954, "creation_date": 1440016954, "answer_id": 32105300, "question_id": 32105008, "link": "https://stackoverflow.com/questions/32105008/trouble-understanding-pointer-cast-from-struct-address-to-uint/32105300#32105300", "title": "Trouble understanding pointer cast from struct address to (uint *)", "body": "<blockquote>\n  <p>I've only found 1 other person asking this type of question. The answer, applied to my question, would be that <code>&amp;some_buffer</code> gives you a <code>(struct *)</code> which needs to be type-casted into <code>(uint *)</code>. </p>\n</blockquote>\n\n<p>Some days I wonder if some of the difficulty of grasping pointers is due to C muddying the waters by using <code>type *</code> to denote addresses instead of <code>type &amp;</code>. If it used <code>&amp;</code> instead then <code>*</code> would much more naturally be the opposite of <code>&amp;</code>.</p>\n\n<pre><code>// wishful thinking\nint x;\nint &amp;addr = &amp;x;\nint y = *addr;\n</code></pre>\n\n<p>But that is not what C does. When you take the address of a variable with <code>&amp;x</code> you get a <code>type *</code>. It seems perfectly natural to me now, twenty years after first learning pointers, but I remember when I was young that this syntax seemed awfully confusing.</p>\n\n<p>In the world that we live in, C doesn't think of <code>&amp;x</code> as the \"address of <code>x</code>\". Instead, it's a \"pointer to <code>x</code>\", and so the resulting type is <code>int *</code> not <code>int &amp;</code>. </p>\n\n<pre><code>// reality\nint x;\nint *addr = &amp;x;\nint y = *addr;\n</code></pre>\n\n<p>Variables are usually said to hold <em>pointers</em>, moreso than <em>addresses</em>. Addresses is still correct, mind you. It's not wrong to say addresses. It's just that the two words are synonymous and \"pointer\" is more common.</p>\n\n<pre><code>(uint &amp;) &amp;some_buffer;   // wishful thinking\n(uint *) &amp;some_buffer;   // reality\n</code></pre>\n\n<p>This explains why, then, pointer casts are written as <code>(uint *)</code>. <code>&amp;some_buffer</code> gives you a \"pointer to <code>some_buffer</code>\" and <code>(uint *)</code> casts that pointer to another type.</p>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "is_accepted": false, "score": 1, "last_activity_date": 1440017044, "creation_date": 1440017044, "answer_id": 32105326, "question_id": 32105008, "link": "https://stackoverflow.com/questions/32105008/trouble-understanding-pointer-cast-from-struct-address-to-uint/32105326#32105326", "title": "Trouble understanding pointer cast from struct address to (uint *)", "body": "<p>If RxPtr would be an unsigned int, it wouldn't be a pointer.</p>\n\n<p>The reason why someone lets a pointer to a value point to the address of a structure is usually to be able to fill the structure without caring about the structure elements.</p>\n\n<p>Assuming struct some_buffer being something like:</p>\n\n<pre><code>struct some_buffer\n{\n uint header;\n uint first_data;\n uint second_data;\n};\n</code></pre>\n\n<p>and rx_data being an array of three uints.</p>\n\n<p>Then you can fill the data of some_buffer with:</p>\n\n<pre><code>some_buffer.head = rx_data[0];\nsome_buffer.first_data = rx_data[1];\nsome_buffer.second_data = rx_data[2];\n</code></pre>\n\n<p>You could also point an uint pointer at the struct though and write:</p>\n\n<pre><code>ptr = (uint *) &amp;some_buffer;\nptr[0] = rx_data[0];\nptr[1] = rx_data[1];\nptr[2] = rx_data[2];\n</code></pre>\n\n<p>And when you are that far you can even simplify it further and write:</p>\n\n<pre><code>ptr = (uint *) &amp;some_buffer;\nfor(int i = 0; i &lt; 3; i++)\n{\n   ptr[i] = rx_data[i];\n}\n</code></pre>\n\n<p>As each element in the structure is the sizeof(uint) and the pointer also increments by sizeof(uint) as it points to uint, you fill the three elements of the structure without actually needing to know the name of the structure elements. The pointer code will work even if you rename header to mynewheader.</p>\n\n<p>If RxPtr would be an unsigned int, you couldn't do this. Incrementing an unsigned int would merely result in the unsigned int having a different value, but not pointing at different content of some_buffer.</p>\n"}, {"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1440017083, "creation_date": 1440017083, "answer_id": 32105335, "question_id": 32105008, "link": "https://stackoverflow.com/questions/32105008/trouble-understanding-pointer-cast-from-struct-address-to-uint/32105335#32105335", "title": "Trouble understanding pointer cast from struct address to (uint *)", "body": "<p><code>some_buffer</code> is a thing. <code>&amp;some_buffer</code> is the <em>address</em> of that thing.  Now, an address is a location in memory, and any type can be stored at an address.  In this case, &amp;some_buffer is the address for a struct.</p>\n\n<p><code>RxPtr</code> has also been declared as an address, intended to store <code>uint</code>.  It may be that the original author knows the struct starts with a <code>uint</code> and just cast the pointer to reflect that.  But it is bad practice, and that may be what's misleading you.</p>\n"}], "owner": {"reputation": 7, "user_id": 5244977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2276db7f3bd26fab33d2525d525f4a6f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.Numbers", "link": "https://stackoverflow.com/users/5244977/mr-numbers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "closed_date": 1440017665, "answer_count": 3, "score": -3, "last_activity_date": 1440021543, "creation_date": 1440015927, "last_edit_date": 1440021543, "question_id": 32105008, "link": "https://stackoverflow.com/questions/32105008/trouble-understanding-pointer-cast-from-struct-address-to-uint", "closed_reason": "Needs details or clarity", "title": "Trouble understanding pointer cast from struct address to (uint *)", "body": "<p>I'm having some trouble at work explaining the following C code to myself and nobody can seem to give me a clear answer, so this is literally my last resort. </p>\n\n<pre><code>struct s some_buffer;\n\nuint *RxPtr;\n\nRxPtr = (uint *)&amp;some_buffer;\n</code></pre>\n\n<p>I understand that a type-cast is the only method of forcing <code>RxPtr</code> to point to <code>some_buffer</code> because <code>some_buffer</code> is of type <code>struct</code> and <code>RxPtr</code> can only point to <code>uint</code>. What's giving me so much trouble is the <code>*</code> in <code>(uint *)</code>. I don't understand why the author of this code would want <code>some_buffer</code> to be of type <code>uint *</code> instead of just <code>uint</code>.</p>\n\n<p>I've only found 1 other person asking this type of question. The answer, applied to my question, would be that <code>&amp;some_buffer</code> gives you a <code>(struct *)</code> which needs to be type-casted into <code>(uint *)</code>. </p>\n\n<p>This makes sense when I think of it that way. But that's essentially saying     <code>&amp;</code> = <code>struct *</code>. <code>&amp;</code> is not a pointer, so how does <code>&amp;some_buffer</code> give me a <code>(struct *)</code>? And like I said earlier, why would the author of this code want <code>some_buffer</code> to be of type <code>uint *</code> instead of just <code>uint</code>?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 1000, "user_id": 900564, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/UoHjG.jpg?s=128&g=1", "display_name": "Micha\u0142 Szkudlarek", "link": "https://stackoverflow.com/users/900564/micha%c5%82-szkudlarek"}, "edited": false, "score": 1, "creation_date": 1440015408, "post_id": 32104799, "comment_id": 52104260, "body": "Because it is declared  <code>const</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1440015515, "post_id": 32104799, "comment_id": 52104317, "body": "It won&#39;t work even without <code>const</code>, as it is pointing to a read-only string literal."}, {"owner": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "edited": false, "score": 0, "creation_date": 1440015895, "post_id": 32104799, "comment_id": 52104514, "body": "yes this is what i&#39;m trying to say that it is also not working inspite of using it without const keyword"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440018070, "post_id": 32104799, "comment_id": 52105694, "body": "<i>undefined behaviour</i> - again."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "edited": false, "score": 0, "creation_date": 1440015741, "post_id": 32104872, "comment_id": 52104426, "body": "if i donot use const keyword then only a warning showed up but rest of the code is fine, inspite of this i cant get the desired output but it should word? shouln&#39;t it?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "edited": false, "score": 1, "creation_date": 1440015884, "post_id": 32104872, "comment_id": 52104505, "body": "@vinay <i>Never</i> rely on undefined behavior."}, {"owner": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440016094, "post_id": 32104872, "comment_id": 52104642, "body": "@EugeneSh. can i sort the string using bubble method without calculating string&#39;s length?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "edited": false, "score": 0, "creation_date": 1440016159, "post_id": 32104872, "comment_id": 52104681, "body": "@vinay You have asked this question before. So seek for the answer there."}, {"owner": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440016254, "post_id": 32104872, "comment_id": 52104742, "body": "@EugeneSh. haha, u knew that :)"}, {"owner": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440016618, "post_id": 32104872, "comment_id": 52104920, "body": "@EugeneSh. she is my twin sister actually we are working on same problem given us by DAD :)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "edited": false, "score": 0, "creation_date": 1440016751, "post_id": 32104872, "comment_id": 52105001, "body": "@vinay Anyway, you can reuse it"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "edited": false, "score": 1, "creation_date": 1440016846, "post_id": 32104872, "comment_id": 52105051, "body": "@Vinay: just removing the <code>const</code> isn&#39;t enough - attempting to modify the contents of a string literal leads to undefined behavior.  It may work, it may crash, it may do something else.  Always treat string literals as though they were immutable, whether the implementation does so or not."}, {"owner": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "edited": false, "score": 0, "creation_date": 1440017026, "post_id": 32104872, "comment_id": 52105141, "body": "@JohnBode okay i got it"}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1440015403, "creation_date": 1440015403, "answer_id": 32104872, "question_id": 32104799, "link": "https://stackoverflow.com/questions/32104799/assignment-of-read-only-location-error-when-assigning-value-of-pointer-to-other/32104872#32104872", "title": "Assignment of read only location error when assigning value of pointer to other pointer?", "body": "<p>You declared <code>str</code> as <code>const char *</code>, so the types of <code>str[j]</code> and <code>str[j+1]</code> are <code>const char</code>, meaning they can't be assigned to.  </p>\n\n<p>Beyond that, however, attempting to modify the contents of a string literal invokes undefined behavior.  </p>\n\n<p>To make your code work, change the declaration of <code>str</code> to</p>\n\n<pre><code>char str[]=\"geeksforgeeks\";\n</code></pre>\n\n<p>This will declare <code>str</code> as an <em>array</em> of <code>char</code> initialized with the contents of the string <code>\"geeksforgeeks\"</code>; you can manipulate the contents of this array to your heart's content.  </p>\n"}], "owner": {"reputation": 51, "user_id": 5113828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/697aeab0ece3f9c34f5763f3a6adb64a?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/5113828/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5820, "favorite_count": 0, "accepted_answer_id": 32104872, "answer_count": 1, "score": 0, "last_activity_date": 1440015403, "creation_date": 1440015155, "question_id": 32104799, "link": "https://stackoverflow.com/questions/32104799/assignment-of-read-only-location-error-when-assigning-value-of-pointer-to-other", "title": "Assignment of read only location error when assigning value of pointer to other pointer?", "body": "<pre><code>#include&lt;conio.h&gt;\n#include&lt;stdio.h&gt;\n\nint main(void)\n{\n    int i,j,temp;\n    const char *str=\"geeksforgeeks\";\n    for(i=1;str[i];i++)\n    {\n        for(j=0;str[j];j++)\n        {\n            if(str[j]&gt;str[j+1])\n            {\n                temp=str[j];\n                str[j]=str[j+1];\n                str[j+1]=temp;\n            }       \n         }\n    }\n    for(i=0;str[i];i++)\n    {\n        printf(\"%c\",str[i]);\n    }\n</code></pre>\n\n<p>Do not understand why this error occur when i try to write <code>str[j]=str[j+1]</code>?\nI'm doing something wrong here please do tell me?</p>\n"}, {"tags": ["c", "gcc", "powerpc"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440016655, "post_id": 32104833, "comment_id": 52104947, "body": "Compiler isn&#39;t giving me error for now, gonna test it on my dm500."}, {"owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440016878, "post_id": 32104833, "comment_id": 52105067, "body": "When I run it, it says &quot;Segmentation fault&quot;. :("}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "reply_to_user": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440016990, "post_id": 32104833, "comment_id": 52105124, "body": "Run <code>ldd a.out</code> (or whatever name your compiled program has) and post here its output."}, {"owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017125, "post_id": 32104833, "comment_id": 52105197, "body": "It says &quot;not a dynamic executable&quot;."}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "reply_to_user": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017254, "post_id": 32104833, "comment_id": 52105278, "body": "Where are your running this?"}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "reply_to_user": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017271, "post_id": 32104833, "comment_id": 52105290, "body": "Well, actually, you can try compiling with <code>-static-libgcc</code> flag."}, {"owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017284, "post_id": 32104833, "comment_id": 52105298, "body": "I did the ldd test.out on my linux pc"}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "reply_to_user": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017518, "post_id": 32104833, "comment_id": 52105416, "body": "Ok, then do <code>powerpc-linux-gnu-readelf -a test.out | grep &quot;Shared library:&quot;</code>. It should print all needed dynamic libraries."}, {"owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017594, "post_id": 32104833, "comment_id": 52105449, "body": "I did powerpc-linux-gnu-gcc-4.8 example.c -static-libgcc But still segmentation fault. What does segmentation fault mean anyway?"}, {"owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017760, "post_id": 32104833, "comment_id": 52105531, "body": "It says 0x0000001 (NEEDED)        Shared library: [libc.sp.6]"}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "reply_to_user": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "edited": false, "score": 0, "creation_date": 1440017931, "post_id": 32104833, "comment_id": 52105617, "body": "Your target system may use different libc (e.g. uclibc instead of glibc), so needed libs (like <code>libc.sp.6</code>) won&#39;t be found."}], "tags": [], "owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "is_accepted": false, "score": 6, "last_activity_date": 1440018388, "last_edit_date": 1440018388, "creation_date": 1440015277, "answer_id": 32104833, "question_id": 32104775, "link": "https://stackoverflow.com/questions/32104775/how-to-compile-hello-world-program-for-powerpc/32104833#32104833", "title": "How to compile Hello World program for PowerPC", "body": "<p>You should use cross-compiler, because your <strong>target</strong> architecture differs from <strong>host</strong> one. Host is the architecture of your system (usually <code>amd64</code> (x86_64) or <code>i386</code> (x86_32)). And target arch is the arch on which your compiled program will run (<code>powerpc</code> in your case).</p>\n\n<p>Many GNU/Linux distors provide crosscompilers as a separate packages. For example, for Ubuntu these packages are available:</p>\n\n<pre><code>sudo apt-get install gcc-4.8-powerpc-linux-gnu g++-4.8-powerpc-linux-gnu binutils-4.8-powerpc-linux-gnu\n</code></pre>\n\n<p>Packages above are for trusty. In later releases different GCC versions are available.</p>\n\n<p>Then you can compile your program using <code>powerpc-linux-gnu-gcc-4.8</code>. Or you can set your environment variables <code>CC</code> and <code>CXX</code> to <code>powerpc-linux-gnu-gcc-4.8</code> and <code>powerpc-linux-gnu-g++-4.8</code> accordingly.</p>\n\n<p><strong>upd:</strong>\nI found crosscompiler toolchain for Dreambox 500 <a href=\"http://www.streamboard.tv/oscam/wiki/crosscompiling#dm500_ppc\" rel=\"noreferrer\">here</a>, but it contains relatively old GCC (3.4).</p>\n\n<p>In order to use it extract downloaded file to <code>/opt/cross/dm500</code>, add <code>/opt/cross/dm500/cdk/bin</code> to path via <code>export PATH=$PATH:/opt/cross/dm500/cdk/bin</code> and use <code>gcc</code> from here with appropriate prefix.</p>\n"}, {"comments": [{"owner": {"reputation": 5101, "user_id": 700170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gZ8hw.png?s=128&g=1", "display_name": "Morten Jensen", "link": "https://stackoverflow.com/users/700170/morten-jensen"}, "edited": false, "score": 3, "creation_date": 1442158834, "post_id": 32549270, "comment_id": 52958688, "body": "AFAIK the static flag compiles your binary to a monolithic executable that doesn&#39;t have run-time library dependencies."}], "tags": [], "owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "is_accepted": true, "score": 0, "last_activity_date": 1442144464, "creation_date": 1442144464, "answer_id": 32549270, "question_id": 32104775, "link": "https://stackoverflow.com/questions/32104775/how-to-compile-hello-world-program-for-powerpc/32549270#32549270", "title": "How to compile Hello World program for PowerPC", "body": "<p>After being on a programming forum for a while, found a guy with the same problem, and after a while he found a way to fix it and I tried it and it works.\nThe thing I have to do is</p>\n\n<pre><code>powerpc-gcc someprog.c -static\n</code></pre>\n\n<p>I have no idea what the -static does but it increases the executable file size and at the end it works!</p>\n"}], "owner": {"reputation": 93, "user_id": 5233231, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00efafa015241656dcfe25e216fd52dc?s=128&d=identicon&r=PG&f=1", "display_name": "Iamk Denok", "link": "https://stackoverflow.com/users/5233231/iamk-denok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11152, "favorite_count": 0, "accepted_answer_id": 32549270, "answer_count": 2, "score": 5, "last_activity_date": 1542152645, "creation_date": 1440015044, "last_edit_date": 1542152645, "question_id": 32104775, "link": "https://stackoverflow.com/questions/32104775/how-to-compile-hello-world-program-for-powerpc", "title": "How to compile Hello World program for PowerPC", "body": "<p>I have a Dreambox 500 which on Wikipedia says has a PCP processor which is PowerPC:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ cat /proc/cpuinfo\nprocessor: 0\ncpu: STBx25xx\nclock: 252MHz\nReview: 9.80 (pvr 5151 0950)\nbogomips: 250.36\nMachine: Dream Multimedia Dreambox TV\nplb bus clock: 63MHz\n</code></pre>\n\n<p>I would normally install GCC but it has low storage on it and I need to compile a program for it.</p>\n\n<p>I've heard GCC can compile powerpc but I had no luck doing so.</p>\n\n<p>Example this code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"Hello World!\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<p>And I use this to compile</p>\n\n<pre><code>gcc example.c -mtune=powerpc\n</code></pre>\n\n<p>But it give this error</p>\n\n<pre><code>example.c:1:0 error: bad value (powerpc) for -mtune- switch\n#include &lt;stdio.h&gt;\n^\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 2, "creation_date": 1440015386, "post_id": 32104770, "comment_id": 52104249, "body": "What compiler (and its version) are you using? Did you include all the necessary headers?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1440015679, "post_id": 32104770, "comment_id": 52104400, "body": "What does the man page say is the return type of <code>strol</code>?"}, {"owner": {"reputation": 391, "user_id": 2950055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97bf20b2d815792728640712f72ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Krzysztofik", "link": "https://stackoverflow.com/users/2950055/krzysztofik"}, "edited": false, "score": 0, "creation_date": 1440015876, "post_id": 32104770, "comment_id": 52104495, "body": "Ok, compiler and headers added"}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 0, "creation_date": 1440016338, "post_id": 32104770, "comment_id": 52104783, "body": "<code>int</code> coercion happens outside of <code>strtol</code>, so <code>strtol</code> can&#39;t detect range error anyway."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1440016668, "post_id": 32104770, "comment_id": 52104952, "body": "Example <a href=\"http://stackoverflow.com/a/29378380/2410359\"><code>strtoi()</code></a> may help."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440016206, "post_id": 32105005, "comment_id": 52104713, "body": "He&#39;s using GCC on Ubuntu."}, {"owner": {"reputation": 2558, "user_id": 655436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98da4e7757d5f0e8596fd832bebee3d0?s=128&d=identicon&r=PG", "display_name": "fukanchik", "link": "https://stackoverflow.com/users/655436/fukanchik"}, "edited": false, "score": 1, "creation_date": 1440016257, "post_id": 32105005, "comment_id": 52104743, "body": "<code>strtol</code> can&#39;t detect <code>int</code> coercion which happens outside of <code>strtol</code>"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1440016966, "post_id": 32105005, "comment_id": 52105109, "body": "It&#39;s also not the Visual C++ CRT source code and the Apple link looks like kernel and not libc code."}], "tags": [], "owner": {"reputation": 253, "user_id": 2341156, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d72e14b97ba8af6fbc0031ad0c65bf5f?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/2341156/philip"}, "is_accepted": false, "score": -1, "last_activity_date": 1440015899, "creation_date": 1440015899, "answer_id": 32105005, "question_id": 32104770, "link": "https://stackoverflow.com/questions/32104770/strtol-doesnt-set-errno-on-overflow-conversion/32105005#32105005", "title": "Strtol doesn&#39;t set errno on overflow conversion", "body": "<p>It seems like both Microsoft [1] and Apple [2] implementations have the setting of <code>errno</code> commented out.</p>\n\n<p>[1] <a href=\"http://research.microsoft.com/en-us/um/redmond/projects/invisible/src/crt/strtol.c.htm\" rel=\"nofollow\">http://research.microsoft.com/en-us/um/redmond/projects/invisible/src/crt/strtol.c.htm</a></p>\n\n<p>[2] <a href=\"http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/strtol.c\" rel=\"nofollow\">http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/strtol.c</a></p>\n"}, {"comments": [{"owner": {"reputation": 391, "user_id": 2950055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97bf20b2d815792728640712f72ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Krzysztofik", "link": "https://stackoverflow.com/users/2950055/krzysztofik"}, "edited": false, "score": 0, "creation_date": 1440016083, "post_id": 32105011, "comment_id": 52104636, "body": "Thanks for the answer. Do you possibly know if there is a function for normal int conversion, with overflow detection?"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 391, "user_id": 2950055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97bf20b2d815792728640712f72ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Krzysztofik", "link": "https://stackoverflow.com/users/2950055/krzysztofik"}, "edited": false, "score": 0, "creation_date": 1440016927, "post_id": 32105011, "comment_id": 52105089, "body": "@Krzysztofik: I&#39;ve added an example."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1440016936, "post_id": 32105011, "comment_id": 52105094, "body": "@cremno Actually, it was a brain fart. You&#39;re right, this is LP64, not LLP64."}, {"owner": {"reputation": 253, "user_id": 2341156, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d72e14b97ba8af6fbc0031ad0c65bf5f?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/2341156/philip"}, "edited": false, "score": 0, "creation_date": 1440017336, "post_id": 32105011, "comment_id": 52105323, "body": "@cremno Isn&#39;t <code>long</code> equal in size to <code>int</code>? Tested your code, see <a href=\"http://ideone.com/awPacv\" rel=\"nofollow noreferrer\">ideone.com/awPacv</a>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 253, "user_id": 2341156, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d72e14b97ba8af6fbc0031ad0c65bf5f?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/2341156/philip"}, "edited": false, "score": 0, "creation_date": 1440017511, "post_id": 32105011, "comment_id": 52105413, "body": "@Philip Dahnen <code>long</code> has <i>at least</i> the range of <code>int</code>.  There are the same on many platform, yet differ on others - as allowed by the C spec."}], "tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": true, "score": 5, "last_activity_date": 1440018113, "last_edit_date": 1440018113, "creation_date": 1440015934, "answer_id": 32105011, "question_id": 32104770, "link": "https://stackoverflow.com/questions/32104770/strtol-doesnt-set-errno-on-overflow-conversion/32105011#32105011", "title": "Strtol doesn&#39;t set errno on overflow conversion", "body": "<p>There is nothing wrong with the implementation of <code>strtol()</code> but there is with your code.</p>\n\n<p>The return type of this function is <code>long</code> (see the trailing <code>l</code>) and apparently the value <code>1000000000000000</code> can be represented by the <code>long</code> integer type. However the return value is assigned to <code>e</code> whose type is <code>int</code> which is unable to represent this value. What then happens is implementation-defined.</p>\n\n<p>So change <code>int e</code> to <code>long e</code> and <code>\"%d %d\\n\"</code> to <code>\"%d %ld\\n\"</code>. If you want to keep it as <code>int</code>, then you have to check if the value is outside of its range of representable values by yourself:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;  // for INT_{MIN,MAX}\nint\nmain(void)\n{\n    errno = 0;\n    long f = strtol(\"1000000000000000\", NULL, 10);\n    if (errno == ERANGE) {\n        puts(\"value not representable by long (or int)\");\n    } else if (f &lt; INT_MIN || f &gt; INT_MAX) {\n        puts(\"value not representable by int\");\n    } else {\n        int e = f;\n        printf(\"%d\\n\", e);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 2950055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97bf20b2d815792728640712f72ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Krzysztofik", "link": "https://stackoverflow.com/users/2950055/krzysztofik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 32105011, "answer_count": 2, "score": 2, "last_activity_date": 1459279710, "creation_date": 1440015036, "last_edit_date": 1440015835, "question_id": 32104770, "link": "https://stackoverflow.com/questions/32104770/strtol-doesnt-set-errno-on-overflow-conversion", "title": "Strtol doesn&#39;t set errno on overflow conversion", "body": "<p>My strtol function fails to set errno during overflown conversion.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;getopt.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdlib.h&gt;    \n\nint main(int argc, char **argv) {\n\n    errno = 0;\n    int e = strtol(\"1000000000000000\", NULL, 10);\n    printf(\"%d %d\\n\", errno, e);\n\n    return 0;\n}\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>0 -1530494976\n</code></pre>\n\n<p>What do I do wrong?</p>\n\n<p>Compiler</p>\n\n<pre><code>gcc (Ubuntu 4.9.2-10ubuntu13) 4.9.2\n</code></pre>\n\n<p>Options</p>\n\n<pre><code>gcc -Wall -std=gnu99 -O2\n</code></pre>\n"}, {"tags": ["c", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1440013331, "post_id": 32104190, "comment_id": 52103017, "body": "Error!! <code>if(str[j]&gt;str[j+1])</code> is UB on the last element."}, {"owner": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 1, "creation_date": 1440013447, "post_id": 32104190, "comment_id": 52103085, "body": "You should also provide a sample test case (input and output). Or if the code crashes tell us the error message! This  will help give a better idea of what is wrong :)"}, {"owner": {"reputation": 662, "user_id": 4430622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Gs3LViEzxaA/AAAAAAAAAAI/AAAAAAAAAGU/zt8NSZNqsQg/photo.jpg?sz=128", "display_name": "Dan", "link": "https://stackoverflow.com/users/4430622/dan"}, "edited": false, "score": 2, "creation_date": 1440013468, "post_id": 32104190, "comment_id": 52103104, "body": "It is currently extremely unclear what you&#39;re asking, and what you&#39;re trying to do. Explain what you&#39;re trying to do, what&#39;s going wrong, and why you know it&#39;s wrong. Then ask a clear question. You&#39;ll generate a lot more willingness to help by doing this, because we all want to help, but we don&#39;t want to spend forever figuring out what you want."}, {"owner": {"reputation": 353, "user_id": 4983331, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/91116ac6b1fdd423885355b5ed7076f9?s=128&d=identicon&r=PG&f=1", "display_name": "sony", "link": "https://stackoverflow.com/users/4983331/sony"}, "edited": false, "score": 0, "creation_date": 1440013575, "post_id": 32104190, "comment_id": 52103175, "body": "i want to sort the string using bubble sort without calculating the length of the string"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1440013603, "post_id": 32104190, "comment_id": 52103198, "body": ".. to refine my previous comment, not exacly UB but comparing with the string terminator."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1440013686, "post_id": 32104190, "comment_id": 52103260, "body": "@sony I would have thought there are numerous bubble sort examples available."}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 4983331, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/91116ac6b1fdd423885355b5ed7076f9?s=128&d=identicon&r=PG&f=1", "display_name": "sony", "link": "https://stackoverflow.com/users/4983331/sony"}, "edited": false, "score": 0, "creation_date": 1440017737, "post_id": 32105093, "comment_id": 52105520, "body": "yeah i think its better to define a variable and when there is no swap then after nested loop we should break the loop to reduce iterations"}], "tags": [], "owner": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "is_accepted": true, "score": 1, "last_activity_date": 1440016198, "creation_date": 1440016198, "answer_id": 32105093, "question_id": 32104190, "link": "https://stackoverflow.com/questions/32104190/bubble-sort-on-string/32105093#32105093", "title": "Bubble sort on string", "body": "<p>As Weather Vane has pointed out already, error is at <code>str[j]&gt;str[j+1]</code>. This will switch the second last character with the NULL terminator (and thus cause you to miss your end condition for the for loop).</p>\n\n<p>To fix this change the for loop end condition to <code>str[j+1]!='\\0'</code> and add a check at the beginning to make sure the first character in the array is not '\\0'! I also suggest researching Bubble search because this code has a lot of extra iterations!</p>\n"}], "owner": {"reputation": 353, "user_id": 4983331, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/91116ac6b1fdd423885355b5ed7076f9?s=128&d=identicon&r=PG&f=1", "display_name": "sony", "link": "https://stackoverflow.com/users/4983331/sony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 32105093, "answer_count": 1, "score": 0, "last_activity_date": 1440016198, "creation_date": 1440012964, "last_edit_date": 1440015070, "question_id": 32104190, "link": "https://stackoverflow.com/questions/32104190/bubble-sort-on-string", "title": "Bubble sort on string", "body": "<pre><code> #include&lt;conio.h&gt;\n #include&lt;stdio.h&gt;\n\n int main(void)\n {\n     int i,j,temp;\n     char str[]=\"geeksforgeeks\";\n     for(i=1;str[i];i++)\n     {\n         for(j=0;str[j]!='\\0';j++)\n         {\n             if(str[j]&gt;str[j+1])\n             {\n                 temp=str[j];\n                 str[j]=str[j+1];\n                 str[j+1]=temp;\n             }      \n         }\n     }\n     for(i=0;str[i]!='\\0';i++)\n     {\n         printf(\"%c\",str[i]);\n     }\n}\n</code></pre>\n\n<p>I want it to be done without calculating the length of the string.As i know that the bug is in the condition statement of for loop then tell me what it should be? </p>\n"}, {"tags": ["c++", "c", "recursion"], "comments": [{"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 6, "creation_date": 1440012930, "post_id": 32104129, "comment_id": 52102786, "body": "While you don&#39;t understand recursion read this sentence from the beginning."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1440012985, "post_id": 32104129, "comment_id": 52102815, "body": "Is this a Stackreview question? What problem are you having with the code, or is this a philosophical enquiry?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1440013053, "post_id": 32104129, "comment_id": 52102847, "body": "Isn&#39;t the <a href=\"https://en.wikipedia.org/wiki/Recursion#Formal_definitions\" rel=\"nofollow noreferrer\">formal recursion definition</a> clearly answer the question?"}, {"owner": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "reply_to_user": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1440013057, "post_id": 32104129, "comment_id": 52102849, "body": "@ElliottFrisch: That&#39;s more like a <code>while</code> loop..."}, {"owner": {"reputation": 20105, "user_id": 451540, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jajjn.png?s=128&g=1", "display_name": "thumbmunkeys", "link": "https://stackoverflow.com/users/451540/thumbmunkeys"}, "edited": false, "score": 0, "creation_date": 1440013094, "post_id": 32104129, "comment_id": 52102871, "body": "that question is better suited for <a href=\"http://programmers.stackexchange.com\">programmers.stackexchange.com</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "edited": false, "score": 1, "creation_date": 1440013157, "post_id": 32104129, "comment_id": 52102908, "body": "@mort or a <code>do</code> loop?"}, {"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "reply_to_user": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "edited": false, "score": 0, "creation_date": 1440015975, "post_id": 32104129, "comment_id": 52104569, "body": "@mort no. It&#39;s a recursive definition of recursion. Syntax is not semantics."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1440021513, "post_id": 32104129, "comment_id": 52107221, "body": "<a href=\"http://stackoverflow.com/questions/32104129/what-defines-a-recursive-function\" title=\"what defines a recursive function\">stackoverflow.com/questions/32104129/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1440032479, "post_id": 32104369, "comment_id": 52110081, "body": "Great answer. The distinction between the mathematical definition and the implementation is often overlooked."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1440064067, "post_id": 32104369, "comment_id": 52122579, "body": "And in fact some algorithms are implemented in a way that&#39;s <i>both</i> recursive and iterative. Sorting, for instance, is typically defined recursively down to 1 element which by definition is always sorted. Real implementations recurse down to 8 elements or so, and then switch to an iterative sort. This is significantly faster in practice as a lot of time in sorting is spent on sorting all those small subsets."}], "tags": [], "owner": {"reputation": 20994, "user_id": 2170192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JsKlq.png?s=128&g=1", "display_name": "Alex Shesterov", "link": "https://stackoverflow.com/users/2170192/alex-shesterov"}, "is_accepted": true, "score": 10, "last_activity_date": 1440014827, "last_edit_date": 1440014827, "creation_date": 1440013603, "answer_id": 32104369, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32104369#32104369", "title": "what defines a recursive function?", "body": "<p>There's a difference between a <em>recursive definition</em> of a function, and its <em>recursive implementation</em> (or algorithm). </p>\n\n<p>A function may be mathematically defined in a recursive manner, but an algorithm (i.e. implementation) which calculates this function may well be non-recursive, and vice versa. </p>\n\n<p>Note that there may be different mathematical definitions and different algorithms for the same function. </p>\n\n<hr>\n\n<p>In the examples you've provided, it's totally obvious that <em>CASE 1-implementation</em> is recursive, while <em>CASE 2-</em> and <em>CASE 3-implementations</em> are not recursive, regardless if the mathematical definition of the function was recursive or not. </p>\n\n<hr>\n\n<p><em>P.S. to keep it in the question's scope, I intentionally didn't touch direct/indirect recursion, nor some pure functional languages which express iterations through recursion only.</em> </p>\n"}, {"tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1440022296, "last_edit_date": 1440022296, "creation_date": 1440017756, "answer_id": 32105524, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32105524#32105524", "title": "what defines a recursive function?", "body": "<p>Just to expand a bit on the answer @AlexShesterov gave. explicit recursion is generally expensive, and depending on the use case it risks overflowing the stack, which is why in practice it's commonly avoided through similar transformations to yours.</p>\n\n<p>Consider a <em>tail-recursive</em> function.  A <em>tail-recursive</em> function, like it sounds, is a function that does not keep any state in the function call (the recursive call is at the end).  Compilers will normally implement these as iterative code since it's a trivial transformation.</p>\n\n<p>Recursion is a very succinct way to describe a function though, which is why a lot are described using it (i.e. Fibonacci numbers).  However, in practice it is generally better to reformulate them iteratively.</p>\n\n<p>With Fibonacci numbers you have...</p>\n\n<pre><code>F(0) = 0\nF(1) = 1\nF(N) = F(N-1) + F(N-2)\n</code></pre>\n\n<p>So, normally in C++ it can be implemented recursively with...</p>\n\n<pre><code>size_t fib(size_t n) {\n\n  if (n == 0)\n    return 0;\n\n  if (n == 1)\n    return 1;\n\n   return fib(n - 1) + fib(n - 2);\n}\n</code></pre>\n\n<p>Although, it's inefficient (recomputing values, storing data on call stack, etc...).  One optimization would <em>memoizing</em> the function calls.  However, the actual value can be constructed from the bottom up, so it's better to simply re-formulate it iteratively.</p>\n\n<pre><code>size_t fib(size_t n) {\n\n  size_t p = 0, c = 1;\n\n  if (n == 0)\n    return 0;\n\n   while (n--) {\n\n     size_t t = c;\n\n     c = p + c;\n     p = t;\n   }\n\n  return c;\n}\n</code></pre>\n\n<p>For fun, here's the same thing in haskell...</p>\n\n<pre><code>fib n = fibs !! n\n  where fibs = 0 : 1 : zipWith (+) fibs (tail fibs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "is_accepted": false, "score": 1, "last_activity_date": 1440019712, "last_edit_date": 1440019712, "creation_date": 1440019399, "answer_id": 32105901, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32105901#32105901", "title": "what defines a recursive function?", "body": "<p>The word recursion is used in different contexts. You have the simple definition of a recursive function where a function either calls itself directly of indirectly, but in computer science you also say something about a processes.</p>\n\n<p>An iterative process is basically a primitive recursive function. It is all functions that can be defined by iteration or tail recursion. Examples:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>int test (int x)\n{\n  return x + 1;\n}\n\nint factorial(int x)\n{\n   int a = 1;\n   while( x &gt; 1 ) {\n       a *= x;\n   }\n   return a;\n}\n\nint factorial_aux(int x, int a)\n{\n   return x == 0 ? a : factorial_aux(x-1, a*x);\n}\n</code></pre>\n\n<p>A recursive process is an process which always would need some kind of data structure to keep data while it's processing in order to track back. An example of that might be tree traversal:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Node* search(Node* tree, int needle) {\n  if( tree == NULL  || tree-&gt;value == needle )\n    return tree;\n  else\n    return search(tree-&gt;left, needle) || search(tree-&gt;right, needle);\n}\n\nNode* search(Node* tree, int needle) {\n  Stack&lt;Node *&gt; stack;\n  if( tree )\n    stack.push(tree);\n\n  while ( stack.empty() == false ) {\n      Node* n = stack.pop();\n      if( n-&gt;value == needle )\n          return n;\n\n      if( tree-&gt;right != NULL )\n         stack.push(tree-&gt;right);\n      if( tree-&gt;left != NULL )\n         stack.push(tree-&gt;left);\n  }\n  return NULL;\n}\n</code></pre>\n\n<p>Both of the above are recursive processes. The fact that one use a recursive function and the other an iterative function using a loop does not change the fact that the system stack or explicit stack will grow as the process visits nodes further from the root. </p>\n\n<p>The CPUs usually doesn't support most of these things so a compiler needs to do a lot of \"emulating\" by using primitive instructions and pushing and cleaning up stack for argument passing. Thus under the hood a recursive function is often an iterative procedure with a growing stack.</p>\n\n<p>So to answer your question:</p>\n\n<ul>\n<li><strong>For a process:</strong>  When the space used is constant</li>\n<li><strong>For a function:</strong> When there is no possibility for a direct or indirect self call</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 2, "last_activity_date": 1440032053, "last_edit_date": 1440032053, "creation_date": 1440024049, "answer_id": 32106795, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32106795#32106795", "title": "what defines a recursive function?", "body": "<p>A solution stops being recursive when at no time, for any inputs, does there appear more than one instance of any function in the activation chain: no function is re-entered.</p>\n\n<p>Is the \"unrolled recursion\" recursion or not? That depends whether we are talking about the concept on which the unrolled solution is based on, or its implementation.</p>\n\n<p>Clearly, the implementation isn't recursive.</p>\n\n<p>Clearly, the unrolled copies of the function are a mechanical repetition based on a recursive implementation, and the solution still expresses some aspects of that solution; when you look at the code, it is obvious how it can be rolled back into a recursive implementation. We can also validate that solution against the recursive description of the algorithm; that is to say, using a description of the recursive algorithm as our guide, we can easily convince ourselves whether the unrolled implementation is right or wrong.</p>\n\n<p>So clearly, the unrolled code is exactly that: an unrolled implementation of the recursive solution. We cannot deny the connection to the recursive specification, yet we have to acknowledge that recursion isn't taking place.</p>\n"}], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 32104369, "answer_count": 4, "score": 6, "last_activity_date": 1440432882, "creation_date": 1440012762, "last_edit_date": 1495540685, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function", "title": "what defines a recursive function?", "body": "<p>Beyond the simple question asked <a href=\"https://stackoverflow.com/q/13098975/2963099\">here</a>\nAnd based on <a href=\"https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/32059779#comment51972274_31885811\">this</a> comment</p>\n\n<p>The question is at what point does a solution stop being considered recursive, even if the base algorithm implemented is recursive?</p>\n\n<p>For completeness, the following functions are used by all cases:</p>\n\n<pre><code>int counter=0;\nint reps=0;\n\nvoid show(int x)\n{\n#ifdef OUTPUT\n    printf(\"==============&gt;&gt;&gt; %d &lt;&lt;&lt;\\n\", x);\n#endif\n    counter+=x;\n    ++reps;\n}\n\nint bit_val(unsigned int v)\n{\n  static const int MultiplyDeBruijnBitPosition2[32] =\n  {\n    0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8,\n    31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9\n  };\n  return MultiplyDeBruijnBitPosition2[(unsigned int)(v * 0x077CB531U) &gt;&gt; 27];\n}\n</code></pre>\n\n<p><strong>CASE 1: Clear recursion</strong></p>\n\n<pre><code>void uniq_digitsR(int places, int prefix, int used) {\n  if (places==1) {\n    show(prefix*10+bit_val(~used));\n    return;\n  }\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while(unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digitsR(places-1, base+bit_val(bit), used|bit);\n  }\n}\n\nint uniq_digits9() {\n  unsigned int used=~((1&lt;&lt;10)-1); // set all bits except 0-9\n  used |= 1;                      // unset 0\n  uniq_digitsR(9, 0, used);\n  return 0;\n}\n</code></pre>\n\n<p><strong>CASE 2:  Hardcoded Unrolling</strong></p>\n\n<p>Note that at no time does a function call itself or any direct or indirect caller</p>\n\n<pre><code>void uniq_digits1(int prefix, unsigned int used) {\n  show(prefix*10+bit_val(~used));\n}\n\nvoid uniq_digits2(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits1(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits3(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits2(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits4(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits3(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits5(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits4(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits6(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits5(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits7(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits6(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits8(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits7(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits9() {\n  unsigned int used=~((1&lt;&lt;10)-1); // set all bits except 0-9\n  used |= 1;                      // unset 0\n  for (int i = 1; i &lt; 10; i++) {\n    unsigned int bit=1&lt;&lt;i;\n    uniq_digits8(i,used|bit);\n  }\n}\n</code></pre>\n\n<p><strong>CASE 3: Iterative Version</strong></p>\n\n<p>Note that no functions are called (aside from obviously show) but it is the same algorithm</p>\n\n<pre><code>void uniq_digits(const int array[], const int length) {\n  unsigned int unused[length-1];                    // unused prior\n  unsigned int combos[length-1];                    // digits untried\n  int digit[length];                                // printable digit\n  int mult[length];                                 // faster calcs\n  mult[length-1]=1;                                 // start at 1\n  for (int i = length-2; i &gt;= 0; --i)\n     mult[i]=mult[i+1]*10;                          // store multiplier\n  unused[0]=combos[0]=((1&lt;&lt;(length))-1);            // set all bits 0-length\n  int depth=0;                                      // start at top\n  digit[0]=0;                                       // start at 0\n  while(1) {\n    if (combos[depth]) {                            // if bits left\n      unsigned int avail=combos[depth];             // save old\n      combos[depth]=avail &amp; (avail-1);              // remove lowest bit\n      unsigned int bit=avail-combos[depth];         // get lowest bit\n      digit[depth+1]=digit[depth]+mult[depth]*array[bit_val(bit)]; // get associated digit\n      unsigned int rest=unused[depth]&amp;(~bit);       // all remaining\n      depth++;                                      // go to next digit\n      if (depth!=length-1) {                        // not at bottom\n        unused[depth]=combos[depth]=rest;           // try remaining\n      } else {\n        show(digit[depth]+array[bit_val(rest)]);    // print it\n        depth--;                                    // stay on same level\n      }\n    } else {\n      depth--;                                      // go back up a level\n      if (depth &lt; 0)\n        break;                                      // all done\n    }\n  }\n}\n</code></pre>\n\n<p>So, is just <code>CASE 1</code> recursive?  Or do we also include <code>CASE 2</code> or even <code>CASE 3</code>?</p>\n"}, {"tags": ["c", "memory"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440012867, "post_id": 32104082, "comment_id": 52102745, "body": "GCC is optimizing it away. Try with <code>-O0</code>, though it may still leave some optimizations in. Also, you can use <a href=\"http://en.cppreference.com/w/c/types/ptrdiff_t\" rel=\"nofollow noreferrer\"><code>ptrdiff_t</code></a> instead of the <code>size_t</code> casts. But note that strictly speaking, only pointers to elements in the same array may meaningfully be subtracted from eachother."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1440012869, "post_id": 32104082, "comment_id": 52102748, "body": "Like you already noticed, the compiler is optimizing out your variable p because even though you assign to it you never use it, leaving x and y."}, {"owner": {"reputation": 1068, "user_id": 492520, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2ddf2ce3e4bb2499b3759ed779c48813?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/492520/dmitri"}, "edited": false, "score": 0, "creation_date": 1440013199, "post_id": 32104082, "comment_id": 52102926, "body": "You are better off using an array for this kind of experimentation. You cannot rely on where the linker places a bunch of different variables that may not have anything to do with each other."}, {"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1440014242, "post_id": 32104082, "comment_id": 52103587, "body": "You seem to be on the path to <i>programming by experimentation</i>, which will likely teach you tons of misconceptions about C and C compilers. Don&#39;t do that. Read the ISO C Standard and recognize that all what you are doing here is <b>undefined behavior</b>."}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1440018447, "post_id": 32104082, "comment_id": 52105865, "body": "Even if <code>p</code> <i>isn&#39;t</i> optimized out, I don&#39;t see why the compiler couldn&#39;t just keep <code>p</code> it in a register since its address is never taken... when the address <i>is</i> taken, suddenly there&#39;s a need for it to actually have a memory address."}], "answers": [{"tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": false, "score": 4, "last_activity_date": 1440012889, "creation_date": 1440012889, "answer_id": 32104170, "question_id": 32104082, "link": "https://stackoverflow.com/questions/32104082/distance-between-arbitrary-pointers/32104170#32104170", "title": "Distance between arbitrary pointers", "body": "<p><code>p</code> is not used in your program and is likely to be optimized out. Anyway this is implementation details and the compiler is free to even change the order of the <code>x</code> and <code>y</code> objects in memory.</p>\n"}, {"comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1440014053, "post_id": 32104207, "comment_id": 52103480, "body": "Even worse, subtracting pointers not pointing (in)to the same object (or just past it), is <i>undefined behavior</i>."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 4, "last_activity_date": 1440013036, "creation_date": 1440013036, "answer_id": 32104207, "question_id": 32104082, "link": "https://stackoverflow.com/questions/32104082/distance-between-arbitrary-pointers/32104207#32104207", "title": "Distance between arbitrary pointers", "body": "<blockquote>\n  <p>it is as if the variable p not exist until its memory address is used</p>\n</blockquote>\n\n<p>gcc will optimize away any variables that do not affect the behavior of the program.  </p>\n\n<p>Secondly, you <em>cannot</em> assume that variables are laid out in any particular order in memory, and the \"distance\" between any two may be completely meaningless.  The only time you can rely on the distance between two pointers to have any meaning is when they are both pointing to elements within the same array object.  </p>\n"}, {"comments": [{"owner": {"reputation": 1040, "user_id": 2327497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001609f0e9acc8302721fe05fecbc97c?s=128&d=identicon&r=PG", "display_name": "Arlie Stephens", "link": "https://stackoverflow.com/users/2327497/arlie-stephens"}, "edited": false, "score": 0, "creation_date": 1440037734, "post_id": 32104235, "comment_id": 52111332, "body": "I&#39;m under the impression that a pointer of any type can be passed to a function expecting void; no need for a cast. Am I out of date? (Sometimes I remember things from earlier C standards, not realizing they&#39;ve changed since.)"}, {"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "reply_to_user": {"reputation": 1040, "user_id": 2327497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001609f0e9acc8302721fe05fecbc97c?s=128&d=identicon&r=PG", "display_name": "Arlie Stephens", "link": "https://stackoverflow.com/users/2327497/arlie-stephens"}, "edited": false, "score": 0, "creation_date": 1440059368, "post_id": 32104235, "comment_id": 52119513, "body": "@ArlieStephens That is generally true (when the function prototype explicitly expects a <code>void *</code> pointer type), but in the case of <code>printf(3)</code>, the pointers are being passed as part of the variable arguments list, so there is no automatic conversion to <code>void *</code>. Because the representation of a pointer may be different when converted to <code>void *</code>, and the <code>%p</code> format specifier expects a <code>void *</code>, we need to cast it."}], "tags": [], "owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "is_accepted": true, "score": 2, "last_activity_date": 1440013577, "last_edit_date": 1440013577, "creation_date": 1440013142, "answer_id": 32104235, "question_id": 32104082, "link": "https://stackoverflow.com/questions/32104082/distance-between-arbitrary-pointers/32104235#32104235", "title": "Distance between arbitrary pointers", "body": "<p>Pointer arithmetic is valid only between pointers to elements of the same array, or one past the end. Going against that will have unpredictable and implementation-defined results. In this case, it seems you have found the answer yourself: gcc is optimizing <code>p</code> away, but in any case, you can't assume any specific order of variables in memory, yet alone do pointer arithmetic.</p>\n\n<p>Also, this:</p>\n\n<pre><code>size_t difference = (size_t) a1 - (size_t) a0;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>ptrdiff_t difference = a1 - a0;\n</code></pre>\n\n<p>The correct type for the difference between two pointers is <code>ptrdiff_t</code> (defined in <code>stddef.h</code>). You shouldn't cast the pointers to <code>size_t</code> because pointer values are not necessarily representable in a <code>size_t</code> (if you want a numeric type to convert pointers to, use <code>uintptr_t</code> or <code>intptr_t</code>).</p>\n\n<p>The <code>%p</code> format specifier expects a <code>void *</code>, so you should cast the pointers, and the correct format specifier for <code>ptrdiff_t</code> is <code>%td</code>:</p>\n\n<pre><code>printf(\"distance between %p &amp; %p: %td\\n\", (void *) a0, (void *) a1, difference);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4261179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2d334b0371bd4c3afcf8de25ee9b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgito", "link": "https://stackoverflow.com/users/4261179/jorgito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 32104235, "answer_count": 3, "score": 4, "last_activity_date": 1440013577, "creation_date": 1440012604, "last_edit_date": 1440013500, "question_id": 32104082, "link": "https://stackoverflow.com/questions/32104082/distance-between-arbitrary-pointers", "title": "Distance between arbitrary pointers", "body": "<p>I am trying to print the distance between two pointers, but I have found that sometimes the code doesn't work well.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;math.h&gt;\n\n/**\n * Print the distance between 2 pointers\n */\nvoid distance(int * a0, int * a1){\n    size_t difference = (size_t) a1 - (size_t) a0;\n    printf(\"distance between %p &amp; %p: %u\\n\" ,a0, a1, abs((int) difference));\n}\n</code></pre>\n\n<p>Trying this works perfectly!!</p>\n\n<pre><code>int main(void){\n    int x = 100;\n    int y = 3000;\n    distance(&amp;x, &amp;y);\n    return 0;\n}\n</code></pre>\n\n<p>printing (example):</p>\n\n<pre><code>distance between 0028ff18 &amp; 0028ff14: 4\n</code></pre>\n\n<p>But start to going wrong with this code</p>\n\n<pre><code>int main(void){\n    int x = 100;\n    int p = 1500;\n    int y = 3000;\n    distance(&amp;x, &amp;y);\n    p = p + 2; // remove unused warning\n    // &amp;p\n    return 0;\n}\n</code></pre>\n\n<p>printing (example):</p>\n\n<pre><code>distance between 0028ff18 &amp; 0028ff14: 4\n</code></pre>\n\n<p>When it has to print <code>8</code> because of an integer separating this values!</p>\n\n<p>But if I uncomment <code>//&amp;p</code>, it works again.</p>\n\n<p>It is as if the variable <code>p</code> does not exist until its memory address is used.</p>\n\n<p>I'm using gcc 4.9.3 on windows 7 (64 bits)</p>\n"}, {"tags": ["c", "dll", "sqlite", "cvi"], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "is_accepted": false, "score": 1, "last_activity_date": 1440102291, "creation_date": 1440102291, "answer_id": 32127708, "question_id": 32104005, "link": "https://stackoverflow.com/questions/32104005/hide-dependent-dll-functions/32127708#32127708", "title": "Hide dependent DLL functions", "body": "<p>I discovered the answer.  The sqlite3.dll was incorrectly specified as a source of exports to the compiler.  Removing the directive to export functions from sqlite3.dll corrected the issue.</p>\n"}], "owner": {"reputation": 658, "user_id": 4468575, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-rjuj4nDQspA/AAAAAAAAAAI/AAAAAAAAAL4/CqmQMgU2fE0/photo.jpg?sz=128", "display_name": "Kin3TiX", "link": "https://stackoverflow.com/users/4468575/kin3tix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440102291, "creation_date": 1440012342, "question_id": 32104005, "link": "https://stackoverflow.com/questions/32104005/hide-dependent-dll-functions", "title": "Hide dependent DLL functions", "body": "<p>I am struggling to understand if I can prevent exposing certain function calls from within a DLL that I am building.  The function calls I want to hide are calls that are exposed by sqlite3.dll which I am building into another DLL of my own making.  sqlite3.dll exposes 5 functions, one of which looks like this in the header:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>SQLITE_API int SQLITE_STDCALL sqlite3_close(sqlite3*);\n</code></pre>\n\n<p>The macros at play here are defined earlier as:</p>\n\n<pre><code>/*\n** Provide the ability to override linkage features of the interface.\n*/\n#ifndef SQLITE_EXTERN\n# define SQLITE_EXTERN extern\n#endif\n#ifndef SQLITE_API\n# define SQLITE_API\n#endif\n#ifndef SQLITE_CDECL\n# define SQLITE_CDECL\n#endif\n#ifndef SQLITE_STDCALL\n# define SQLITE_STDCALL\n#endif\n</code></pre>\n\n<p>Now, I am building sqlite3.dll into my application by linking against sqlite3.lib and including sqlite3.h (the source of the prior code snippets).</p>\n\n<p>I realize I may be able to play with those macros to achieve what I want.</p>\n\n<p>I expose the functions in my own dll with:</p>\n\n<pre><code>/* module entry point */\nint __declspec(dllexport) __stdcall load_properties(CAObjHandle context);\n</code></pre>\n\n<p>When I look at the functions available in the output of my build, I get my functions+5 functions from the sqlite library.  All of the functions in sqlite that are exposed have the declaration structure similar to what I showed for close() above.</p>\n\n<p>Is there a way I can hide the sqlite functions?  Is it the .lib file that is causing the issue?  That file was auto-generated so I am not sure what is in there.</p>\n"}, {"tags": ["c", "file-io", "struct"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 2, "creation_date": 1440009655, "post_id": 32103102, "comment_id": 52100796, "body": "<code>%t</code> is not a valid <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow noreferrer\"><code>fprintf</code></a> specifier (that I know of), did you mean <code>\\t</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1440009690, "post_id": 32103102, "comment_id": 52100821, "body": "Many times a duplicate.  The <code>scanf()</code> leaves the newline in the input buffer; the <code>scanf(&quot;%c&quot;, \u2026)</code> grabs the newline.  Put a space in front of the <code>%c</code>:  scanf(&quot; %c&quot;, &amp;ch);` to skip the white space.  Check the return value from <code>scanf()</code>, every time.  If it isn&#39;t the number of values you expected (1 in your code), there&#39;s a problem."}, {"owner": {"reputation": 342, "user_id": 2084733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2d8d709701def68ce5146d5b6abb381b?s=128&d=identicon&r=PG&f=1", "display_name": "theartist33", "link": "https://stackoverflow.com/users/2084733/theartist33"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440009866, "post_id": 32103102, "comment_id": 52100930, "body": "@Kninnug  you are right  I meant \\t , anyway situation stands same."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440009886, "post_id": 32103102, "comment_id": 52100950, "body": "Wrong (or not best) duplicate chosen.  Suggest <a href=\"http://stackoverflow.com/q/217074\">SO 217074</a> instead."}, {"owner": {"reputation": 342, "user_id": 2084733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2d8d709701def68ce5146d5b6abb381b?s=128&d=identicon&r=PG&f=1", "display_name": "theartist33", "link": "https://stackoverflow.com/users/2084733/theartist33"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440010199, "post_id": 32103102, "comment_id": 52101146, "body": "@JonathanLeffler  I put space before %c in scanf now and it is now prompting user to enter a value and waits for input but even if I enter y (yes want to continue) program is exiting ."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1440010336, "post_id": 32103102, "comment_id": 52101228, "body": "Did you print out the value read into <code>ch</code>?  The first and simplest step in debugging is to check that the program sees what you think it sees."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1440010655, "post_id": 32103102, "comment_id": 52101394, "body": "in <code>scanf</code>, <code>&amp;admin.str</code> should be just <code>admin.str</code> since <code>%s</code> expects a <code>char *</code> similarly in <code>fprintf</code>, &#39;%d&#39; expects an <code>int</code> which <code>admin.a</code> is not..... there are more type errors, compile with warnings enabled."}, {"owner": {"reputation": 342, "user_id": 2084733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2d8d709701def68ce5146d5b6abb381b?s=128&d=identicon&r=PG&f=1", "display_name": "theartist33", "link": "https://stackoverflow.com/users/2084733/theartist33"}, "edited": false, "score": 0, "creation_date": 1440010698, "post_id": 32103102, "comment_id": 52101417, "body": "yes , checked .   Enter the name of admin :  akhil  Enter the age of admin : 23  Do you want to continue ? Y or N :y value you entered in ch is y"}], "answers": [{"comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440009603, "post_id": 32103150, "comment_id": 52100752, "body": "For this <code>ch</code> must be an <code>int</code> (OP has <code>ch</code> declared as <code>char</code>)."}, {"owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440009802, "post_id": 32103150, "comment_id": 52100891, "body": "@Kninnug: Thanks. Updated my answer. :)"}, {"owner": {"reputation": 342, "user_id": 2084733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2d8d709701def68ce5146d5b6abb381b?s=128&d=identicon&r=PG&f=1", "display_name": "theartist33", "link": "https://stackoverflow.com/users/2084733/theartist33"}, "edited": false, "score": 0, "creation_date": 1440010475, "post_id": 32103150, "comment_id": 52101296, "body": "not working , still exiting even if I enter Y or y. Also before entering into loop compiler is waiting for user to enter value in order to execute loop , if you press enter it exits (because of your code logic &#39;\\n&#39; )"}, {"owner": {"reputation": 342, "user_id": 2084733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2d8d709701def68ce5146d5b6abb381b?s=128&d=identicon&r=PG&f=1", "display_name": "theartist33", "link": "https://stackoverflow.com/users/2084733/theartist33"}, "edited": false, "score": 0, "creation_date": 1440181625, "post_id": 32103150, "comment_id": 52183503, "body": "Below is the Answer : #include&lt;stdio.h&gt; typedef struct {   char str[40];  int a[5] ;  }UNIX; int main()  {  FILE *fp; char ch=&#39;y&#39;;   UNIX admin;  fp=fopen(&quot;/home/akhils/file_dir/admin_db.data&quot;,&quot;a&quot;); int i=0; while(1) {    printf(&quot;Enter the name of admin : &quot;);   scanf(&quot;%s[^\\n]&quot;,admin.str);  printf(&quot;\\nEnter age of admin : &quot;);   scanf(&quot;%d[^\\n]&quot;,admin.a);  printf(&quot;\\nDo you want to continue ? Y or N : &quot; ) ;   scanf(&quot; %c&quot;,&amp;ch);  fprintf(fp,&quot;%s \\t %d\\n&quot;,admin.str,admin.a[0]);   i++;   if(ch==&#39;N&#39; || ch==&#39;n&#39;)   break;   } fclose(fp); }"}], "tags": [], "owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1440010159, "last_edit_date": 1440010159, "creation_date": 1440009414, "answer_id": 32103150, "question_id": 32103102, "link": "https://stackoverflow.com/questions/32103102/fprintf-use-in-c/32103150#32103150", "title": "fprintf use in C", "body": "<p>You have to flush <code>stdin</code> before taking additional input.  The following is a portable method:</p>\n\n<pre><code>int ch;\nwhile (((ch = getchar()) != '\\n') &amp;&amp; (ch != EOF));\n</code></pre>\n"}], "owner": {"reputation": 342, "user_id": 2084733, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2d8d709701def68ce5146d5b6abb381b?s=128&d=identicon&r=PG&f=1", "display_name": "theartist33", "link": "https://stackoverflow.com/users/2084733/theartist33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "closed_date": 1440011585, "answer_count": 1, "score": 0, "last_activity_date": 1440075449, "creation_date": 1440009269, "last_edit_date": 1440075449, "question_id": 32103102, "link": "https://stackoverflow.com/questions/32103102/fprintf-use-in-c", "closed_reason": "Duplicate", "title": "fprintf use in C", "body": "<p>I am using fprintf to store the values entered by user  in a file . Code is not working as expected (First thing that after prompting \"Do you want to continue? Y or N  : \" program is automatically taking some value and continues the loop . Secondly it is not storing the value input by user into intended file . Update: I am able to let program prompt use whether to continue loop or not by putting space in scanf before %c but still file admin_db.txt is not getting populated properly.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\ntypedef struct {\n\nchar str[30];\nint a[10];\n\n}UNIX;\n\nint main()\n\n{\n\nUNIX admin;\nchar ch;\nFILE *fp;\n\nfp=fopen(\"admin_db.txt\",\"w+\");\n\nwhile(1)\n\n{\nprintf(\"\\nEnter the name of admin :  \");\n scanf(\"%s\",&amp;admin.str);\n\n printf(\"\\nEnter the age of admin : \");\n  scanf(\"%d\",&amp;admin.a);\n\n  fprintf(fp,\"%s%t%d\",admin.str,admin.a);\n\n  printf(\"\\nDo you want to continue ? Y or N :\");\n   scanf(\"%c\",&amp;ch);\n\n   if(ch=='n' || ch=='N')\n     break;\n\n}\n\nfclose(fp);\n\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Enter the name of admin :  Akhil\n\nEnter the age of admin : 23\n\nDo you want to continue ? Y or N :        //Automatically taking some value                                        //                                        other than n or N and continuing loop.\nEnter the name of admin :  sukhi\n\nEnter the age of admin : 30\n\nDo you want to continue ? Y or N :\nEnter the name of admin :\nEnter the age of admin : ^C \n</code></pre>\n\n<p>Also , sizeof file admin_db.txt is of 0 bytes.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440009534, "post_id": 32103079, "comment_id": 52100708, "body": "Eh? What range of signed int do you think will fit into 4 bits?  I&#39;ve never seen anyone use negative ints with bitfields before."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1440009940, "post_id": 32103079, "comment_id": 52100986, "body": "@MartinJames Well, it could work with one extra bit..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440010112, "post_id": 32103079, "comment_id": 52101089, "body": "@EugeneSh. Yeah.  All my embedded jobs are a bit short."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440010224, "post_id": 32103079, "comment_id": 52101165, "body": "@MartinJames Mine is a bit too long (shh! I hope my boss isn&#39;t here..)"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1440010914, "post_id": 32103079, "comment_id": 52101568, "body": "Ironically, the wikipedia page for <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">two&#39;s complement</a> has the answer for this exact question in a nice little table."}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 1, "creation_date": 1440012709, "post_id": 32103079, "comment_id": 52102653, "body": "A 4-bit signed int represents values -8 to 7. A 3-bit signed int -4 to 3. Your initializers are out of range."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440020794, "post_id": 32103079, "comment_id": 52106922, "body": "And how would this very basic question be related to embedded systems?"}, {"owner": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440021780, "post_id": 32103079, "comment_id": 52107315, "body": "@Olaf i think you mean &quot;how would this question not be related to non-embedded systems&quot;. surely a basic question applies to all systems"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440022332, "post_id": 32103079, "comment_id": 52107511, "body": "@Olaf - bitfields tend to be used more on RAM-restricted systems where an array of booleans, (bytes), is inappropriate.  Also, many embedded controllers tend to use bitmasks in union/struct for protocol handling."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1810, "user_id": 3018243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469fdc7e2f05894b3c6d98a389c869ab?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Cox", "link": "https://stackoverflow.com/users/3018243/steve-cox"}, "edited": false, "score": 0, "creation_date": 1440022488, "post_id": 32103079, "comment_id": 52107571, "body": "@SteveCox: On embedded systems, C bitfields are very rarely used, as the standard does not even guarantee a specific layout, a compiler might use more complicated operations to modify fields, sign-extension often requires many instructions. And for hardware registers, it is even worse to guarantee a single access. So, no, it is likely <b>not</b> used for embedded systems."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440022650, "post_id": 32103079, "comment_id": 52107623, "body": "@MartinJames: Nope, often the better way on such systems is to use bit-operations. Only with the Cortex-M3/4 bitfield instructions, they might become more popular. But they still have to be seen very critical for <code>volatile</code> types. And for very restricted systems, an implementation is free to implement <code>_Bool</code> as single bits."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1440024706, "post_id": 32103079, "comment_id": 52108267, "body": "Well, if I unionise a set of bitfields totalling 32 bits over an unsigned int, it has worked fine on every compiler I&#39;ve used.  A set of bitfields is far clearer that a pile of bit ops and the structs can be used as documentation of the protocol units.  Empirically, bitfield unions are  just not a problem as long as you understand them and their limitations."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5244650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c73a8456fff50753eb171a08a0f15?s=128&d=identicon&r=PG&f=1", "display_name": "Manjunathan", "link": "https://stackoverflow.com/users/5244650/manjunathan"}, "edited": false, "score": 0, "creation_date": 1440012626, "post_id": 32103527, "comment_id": 52102593, "body": "thank you for your ans. what basis outside valid range is assigned"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440020854, "post_id": 32103527, "comment_id": 52106949, "body": "Assuming 2s complement. For sign/maginitude, it would be <code>-7..7</code>, etc."}], "tags": [], "owner": {"reputation": 4299, "user_id": 798346, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d7e5d155178f095778086f1cf84142ce?s=128&d=identicon&r=PG", "display_name": "Jim Rhodes", "link": "https://stackoverflow.com/users/798346/jim-rhodes"}, "is_accepted": false, "score": 5, "last_activity_date": 1440010678, "creation_date": 1440010678, "answer_id": 32103527, "question_id": 32103079, "link": "https://stackoverflow.com/questions/32103079/can-you-explain-how-int-values-are-stored-in-bitfields-in-c-please/32103527#32103527", "title": "Can you explain how int values are stored in bitfields in C, please?", "body": "<p>For <code>p</code>, you are allocating 4 bits. Therefore your valid range of values for <code>p</code> is 1000B - 0111B or -8 to 7. The fewest number of bits needed for -15 is 5 which in binary would be 10001B. Since you only allocated 4 bits, the sign bit is lost and you are left with 1.</p>\n\n<p>For <code>c</code>, your are allocating 3 bits which has a valid range of 100B - 011B or -4 to 3. Since 5 is 101B and outside the valid range, it is displayed as -3.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 0, "last_activity_date": 1440011326, "creation_date": 1440011326, "answer_id": 32103702, "question_id": 32103079, "link": "https://stackoverflow.com/questions/32103079/can-you-explain-how-int-values-are-stored-in-bitfields-in-c-please/32103702#32103702", "title": "Can you explain how int values are stored in bitfields in C, please?", "body": "<p>The value 5 in binary is 101.  Because the field in question is a 3 bit signed, and the most significant bit is set, the value is negative.  In two's complement representation, it is -3.</p>\n"}], "owner": {"reputation": 23, "user_id": 5244650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9c73a8456fff50753eb171a08a0f15?s=128&d=identicon&r=PG&f=1", "display_name": "Manjunathan", "link": "https://stackoverflow.com/users/5244650/manjunathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1440020805, "creation_date": 1440009197, "last_edit_date": 1440020805, "question_id": 32103079, "link": "https://stackoverflow.com/questions/32103079/can-you-explain-how-int-values-are-stored-in-bitfields-in-c-please", "title": "Can you explain how int values are stored in bitfields in C, please?", "body": "<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n\nstruct marks{\n    int p:4;\n    int c:3;\n    unsigned int m:2;\n};\n\nvoid main()\n{\n    struct marks s = {-15, 5, 3};\n    printf(\"%d %d %d\\n\", s.p, s.c, s.m);\n}\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>1 -3 3\n</code></pre>\n\n<p>Why is the first value printed as 1 and the second value is printed as -3?</p>\n"}, {"tags": ["c", "arrays", "pointers", "gcc", "char"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1440008637, "post_id": 32102858, "comment_id": 52100145, "body": "Why isn&#39;t <code>p</code> considered a &quot;counting variable&quot;?"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1440008711, "post_id": 32102858, "comment_id": 52100184, "body": "How about <code>char *p=astring;</code>?  Or <code>char *p=&amp;(astring[0];</code>?"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440008800, "post_id": 32102858, "comment_id": 52100222, "body": "Why do you have casts in <code>astring[0] = (char*)&quot;ABC&quot;; ...</code>?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440008839, "post_id": 32102858, "comment_id": 52100252, "body": "Unrelated, that your compiler likely spewed warnings or errors at you until you tossed in those <code>(char*)</code> casts should be taken to heart; not masked by casting."}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1440008946, "post_id": 32102858, "comment_id": 52100314, "body": "Kninnug, I could remove those casts, but I&#39;d rather be safe than sorry. with those segmentation faults I was getting, I&#39;m lucky I didn&#39;t have to restart my computer"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 2, "creation_date": 1440009061, "post_id": 32102858, "comment_id": 52100385, "body": "@Mike Fortunately, unless you have a really old system, or are writing system software, application-segfaults rarely crash your whole machine. Secondly, casts usually make code less safe, as they hide information from the compiler. A typecast is saying to the compiler &quot;look, I know it looks like type X, but pretend its type Y&quot;. Usually the compiler knows its types better than the programmer."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1440009192, "post_id": 32102858, "comment_id": 52100472, "body": "Fyi, without the casts and with const-correctness, <a href=\"http://ideone.com/UXQFJv\" rel=\"nofollow noreferrer\">see it live</a>"}, {"owner": {"reputation": 8445, "user_id": 929459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420841bacccb72fb934f80069c11d0b?s=128&d=identicon&r=PG", "display_name": "Dmitri", "link": "https://stackoverflow.com/users/929459/dmitri"}, "edited": false, "score": 0, "creation_date": 1440010014, "post_id": 32102858, "comment_id": 52101035, "body": "<code>p</code> needs to be <code>char **</code> (since it points into a <code>char *</code> array), and the increment should move to the <code>printf()</code> so that <code>printf()</code> gets the value from before the increment: <code>char **p=astring; while(*p) printf(&quot;%s\\n&quot;,*p++);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1440009064, "post_id": 32102925, "comment_id": 52100386, "body": "AlexD, I still receive segmentation fault"}], "tags": [], "owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "is_accepted": false, "score": 2, "last_activity_date": 1440008684, "creation_date": 1440008684, "answer_id": 32102925, "question_id": 32102858, "link": "https://stackoverflow.com/questions/32102858/looping-strings-without-for-loop-or-counter-in-c/32102925#32102925", "title": "looping strings without for loop or counter in C", "body": "<pre><code>char** p = astring;\nwhile (*p != NULL){\n    printf(\"%s\\n\", *p);\n    p++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1440009354, "post_id": 32102964, "comment_id": 52100579, "body": "That for loop gave me <code>error: &#39;for&#39; loop initial declaration used outside C99 mode</code> message"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 2, "last_activity_date": 1440009374, "last_edit_date": 1440009374, "creation_date": 1440008802, "answer_id": 32102964, "question_id": 32102858, "link": "https://stackoverflow.com/questions/32102858/looping-strings-without-for-loop-or-counter-in-c/32102964#32102964", "title": "looping strings without for loop or counter in C", "body": "<p>You could just write</p>\n\n<pre><code>for ( char **p = astring; *p; ++p ) puts( *p );\n</code></pre>\n\n<p>Or if your compiler does not support C99 then place the declaration of the pointer after the declaration of the array</p>\n\n<pre><code>char *astring[500];\nchar **p;\n\n//...\n\nfor ( p = astring; *p; ++p ) puts( *p );\n</code></pre>\n\n<p>If you have an array with elements of type <code>T</code> then the array used in expressions is converted to pointer to its first element. So if there is declaration</p>\n\n<pre><code>T array[N];\n</code></pre>\n\n<p>then you can write</p>\n\n<pre><code>T *p = array;\n</code></pre>\n\n<p>In your program you have an array of elements of type <code>char *</code>. So <code>T</code> corresponds to <code>char *</code>. And you can write</p>\n\n<pre><code>typedef char * T;\nT astring[500];\nT *p = astring;\n</code></pre>\n\n<p>that is <code>p</code> will have type <code>char **</code></p>\n\n<p>Take into account that there is no need to apply casting</p>\n\n<pre><code>astring[0]=(char*)\"ABC\";\nastring[1]=(char*)\"DEF\";\nastring[2]=(char*)\"GHI\";\nastring[3]=(char*)NULL;\n</code></pre>\n\n<p>You could write</p>\n\n<pre><code>char *astring[500] = { \"ABC\", \"DEF\", \"GHI\"/*, NULL */ }; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1440009789, "post_id": 32103257, "comment_id": 52100881, "body": "now question is how to merge that p++ into the while loop without a segfault"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1440010082, "post_id": 32103257, "comment_id": 52101068, "body": "Change  *p++; to p++; or ++p; As for the segmentation fault then the program is correct."}], "tags": [], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "is_accepted": false, "score": 0, "last_activity_date": 1440009771, "creation_date": 1440009771, "answer_id": 32103257, "question_id": 32102858, "link": "https://stackoverflow.com/questions/32102858/looping-strings-without-for-loop-or-counter-in-c/32103257#32103257", "title": "looping strings without for loop or counter in C", "body": "<p>I figured out one way to do it:</p>\n\n<pre><code>int main(int argc,char* argv[]){\n    char *astring[500]={\"ABC\",\"DEF\",\"GHI\",\"JKL\",NULL};\n    char **p=astring;\n    while (*p != NULL){\n    printf(\"%s\\n\",*p);\n    *p++;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 32102964, "answer_count": 3, "score": 4, "last_activity_date": 1440009771, "creation_date": 1440008450, "question_id": 32102858, "link": "https://stackoverflow.com/questions/32102858/looping-strings-without-for-loop-or-counter-in-c", "title": "looping strings without for loop or counter in C", "body": "<p>My objective is to loop through a predefined set of strings while printing each one on its own line without the use of a counter variable. The lines I have commented out is the working code, but requires a counter. The four lines below it have stumped me.</p>\n\n<pre><code>int main(int argc,char* argv[]){\n    char *astring[500];\n    astring[0]=(char*)\"ABC\";\n    astring[1]=(char*)\"DEF\";\n    astring[2]=(char*)\"GHI\";\n    astring[3]=(char*)NULL;\n    //long count;\n    //for (count=0;count&lt;4;count++){\n    //printf(\"%s\\n\",astring[count]);\n    //}\n    char *p=*astring;\n    while (*p++){\n    printf(\"%s\\n\",*p);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>I have tried the following variations without success.</p>\n\n<p>This code:</p>\n\n<pre><code>    char *p=*astring;\n    while (*p++){\n    printf(\"%s\\n\",*p);\n    }\n</code></pre>\n\n<p>compiles fine, but upon execution, a segmentation fault error happens and the program immediately exits.</p>\n\n<p>I tried:</p>\n\n<pre><code>    while (**p++){\n    printf(\"%s\\n\",*p);\n    }\n</code></pre>\n\n<p>and the program won't compile because of <code>invalid type argument of 'unary *'</code>.</p>\n\n<p>I then changed <code>char *p=*astring;</code> to <code>char *p=astring;</code> and received the warning of <code>initialization from incompatible pointer type</code></p>\n\n<p>I then also tried <code>char *p=**astring;</code> and received this compiler warning: <code>initialization makes pointer from integer without a cast</code></p>\n\n<p>I must be confused with the stars or is what I'm trying to do impossible? Does anyone have a solution?</p>\n"}, {"tags": ["c", "list", "struct"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1440008446, "post_id": 32102798, "comment_id": 52100018, "body": "It only has be like that (2) when your declared structure uses <code>Node *next;</code> (which yours does not). You can just use <code>struct Node</code>. Or is the intent to declare the <code>Node</code> type in the first place?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1440008564, "post_id": 32102798, "comment_id": 52100097, "body": "What is the relation between <code>Point</code> and <code>Node</code>? Update, oh, it&#39;s just an example, right?"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1440008640, "post_id": 32102798, "comment_id": 52100148, "body": "Your third option can work, if you give the <code>struct</code> a tag: <code>typedef struct Node{ int d; struct Node * next; } Node;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 858, "user_id": 3093427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlDuy.png?s=128&g=1", "display_name": "gmoshkin", "link": "https://stackoverflow.com/users/3093427/gmoshkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1440009481, "last_edit_date": 1440009481, "creation_date": 1440008903, "answer_id": 32103001, "question_id": 32102798, "link": "https://stackoverflow.com/questions/32102798/using-structs-for-a-linked-list-versus-using-them-for-a-point-type-variable/32103001#32103001", "title": "Using structs for a linked list versus using them for a point-type variable", "body": "<pre><code>typedef struct Node Node;\n</code></pre>\n\n<p>This statement is the directive to the compiler to consider <code>Node</code> to be the same name as <code>struct Node</code>, that is why it has to include the word \"Node\" twice.</p>\n\n<p>Also the declaration doesn't have to be this way, the second version is correct too.</p>\n\n<p>The <code>struct</code> declaration doesn't have to include <code>typedef</code> at all, it is needed only to assign the type a new name and is often used with <code>struct</code> declarations to avoid the need to type the word <code>struct</code> over and over.</p>\n"}], "owner": {"reputation": 45, "user_id": 5220003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17cb601ae65a9c49a955bd0720f851e1?s=128&d=identicon&r=PG&f=1", "display_name": "Agnaroc ", "link": "https://stackoverflow.com/users/5220003/agnaroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 32103001, "answer_count": 1, "score": 3, "last_activity_date": 1440009481, "creation_date": 1440008265, "question_id": 32102798, "link": "https://stackoverflow.com/questions/32102798/using-structs-for-a-linked-list-versus-using-them-for-a-point-type-variable", "title": "Using structs for a linked list versus using them for a point-type variable", "body": "<p>If I want to make a variable Point which can hold 2 doubles and I want to avoid having to write struct everytime I use it I can simply use:</p>\n\n<pre><code>typedef struct{\n    double x,y; \n}Point;\n</code></pre>\n\n<p>But when I want to make a linked list the declaration must be like this:</p>\n\n<pre><code>typedef struct Node Node; // (2)\nstruct Node{\n    int d;\n    struct Node * next;   \n};\n</code></pre>\n\n<p>And not like this:</p>\n\n<pre><code>typedef struct{\n    int d;\n    struct Node * next;   \n}Node;\n</code></pre>\n\n<p>Why does the declaration have to be this way and why do you have to type \"Node\" twice, see (2).</p>\n"}, {"tags": ["python", "c", "arrays", "numpy"], "comments": [{"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 0, "creation_date": 1440010990, "post_id": 32102690, "comment_id": 52101620, "body": "Usually in Python, a negative stride just means that the data is to be read backwards, but I don&#39;t know enough numpy to fully answer your question..."}], "answers": [{"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1440011307, "creation_date": 1440011307, "answer_id": 32103699, "question_id": 32102690, "link": "https://stackoverflow.com/questions/32102690/python-c-extensions-reading-numpy-array-with-negative-strides/32103699#32103699", "title": "Python C extensions reading numpy array with negative strides", "body": "<p>You are assuming that the stride is always 8, but your pointer arithmetic is wrong. Just use the given stride and everything should just work.</p>\n\n<p>Something like that (untested):</p>\n\n<pre><code>for (i=0; i&lt;*length; i++)\n{\n    pos_in_vector = *(double*)(positions-&gt;data + i * positions-&gt;strides[0]);\n    work[i] = *(double*)(vector-&gt;data + (int)pos_in_vector * vector-&gt;strides[0]);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5139431, "user_type": "registered", "profile_image": "https://graph.facebook.com/1124178917610752/picture?type=large", "display_name": "Filip M&#237;valt", "link": "https://stackoverflow.com/users/5139431/filip-m%c3%advalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440011307, "creation_date": 1440007868, "question_id": 32102690, "link": "https://stackoverflow.com/questions/32102690/python-c-extensions-reading-numpy-array-with-negative-strides", "title": "Python C extensions reading numpy array with negative strides", "body": "<p>I've got a function in Python which is reading some file and creating very long numpy array.</p>\n\n<pre><code>def readmat(name):\n   outp=loadmat(name);\n   outp= outp['screen1'];\n   outp=outp['data'];\n   outp=outp[0,0];\n   outp=outp[0];\n   return outp;\n\nsignal=readmat('nameoffile.mat');\n</code></pre>\n\n<p>now i create another function which is calling another which is written like Pyextension.</p>\n\n<p>Python:</p>\n\n<pre><code>def getfrom(vector,positions):\n   outp=np.arange(0,dtype=float); #create needed data type\n   clib.getfrom(vector,positions,outp);\n   return outp;\n</code></pre>\n\n<p>this functions should execute something like this</p>\n\n<p>a=[10,11,12,13,14,15,16,17,18,19];</p>\n\n<p>b=[0,1,10];</p>\n\n<p>c=getfrom(a,b);</p>\n\n<p>and after that c=[10,11,19]</p>\n\n<p>C:</p>\n\n<pre><code>static PyObject *py_getfrom(PyObject* self, PyObject* args)\n{\n PyArrayObject *vector, *positions, *output;\n int pos_index, i, *length;\n\n double pos_in_vector;\n if (!PyArg_ParseTuple(args, \"OOO\",&amp;vector,&amp;positions,&amp;output))\n return NULL;\n\n length=&amp;positions-&gt;dimensions[0];\n double *work;\n work=(double*)calloc(*length, sizeof(double))\n\n for (i=0; i&lt;*length; i++)\n{\n    pos_in_vector=*((positions-&gt;data)+i);\n    pos_index=pos_in_vector;\n    work[i]=*((double *)(vector-&gt;data)+pos_index);\n }\n output-&gt;dimensions[0]=*length;\n output-&gt;data=work;\n return Py_None;\n }\n</code></pre>\n\n<p>The C function should create needed array 'work' and give it to the structure of variable 'outp' and change outp->dimensions[0] to the right value.</p>\n\n<p>Everything works fine but problem is when  data->strides isn't equal to +8 but -8. (it gives python).\nto change sign before 'i' doesn't work.</p>\n\n<p>Can any body help me?</p>\n"}, {"tags": ["c", "linux", "gcc", "curl"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1440008995, "post_id": 32102613, "comment_id": 52100341, "body": "I don&#39;t see how the warnings you post relate to the problem you describe."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1440009621, "post_id": 32102613, "comment_id": 52100768, "body": "You want to link against the static versions of <b>all</b> libraries or simply with <code>libcurl</code>? Also why do you specify it twice (the one from <code>tmp</code> and <code>-lcurl</code>; you should use <code>-L</code> in order to specify library paths: check <a href=\"http://linux.die.net/man/1/ld\" rel=\"nofollow noreferrer\">ld man page</a>).After you statically build your application, what&#39;s <code>ldd test</code> output?"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 1429142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42a5332d384be7fa30aadd4bfb05428?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0428\u0435\u0440", "link": "https://stackoverflow.com/users/1429142/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a8%d0%b5%d1%80"}, "edited": false, "score": 0, "creation_date": 1440015716, "post_id": 32104550, "comment_id": 52104416, "body": "Thanks for your reply, but you did not understand me. I have no problem with static compilation. The problem is that in a statically compiled program is not working domain name resolution."}, {"owner": {"reputation": 2263, "user_id": 5240198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/963df2e5e692fb3422853b3d5f3353c7?s=128&d=identicon&r=PG&f=1", "display_name": "rastik", "link": "https://stackoverflow.com/users/5240198/rastik"}, "reply_to_user": {"reputation": 161, "user_id": 1429142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42a5332d384be7fa30aadd4bfb05428?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0428\u0435\u0440", "link": "https://stackoverflow.com/users/1429142/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a8%d0%b5%d1%80"}, "edited": false, "score": 0, "creation_date": 1440019146, "post_id": 32104550, "comment_id": 52106175, "body": "You mentioned that you get warnings when complied. Have you managed to compile it without warnings? I&#39;ve tried your code and it works even when statically linked."}], "tags": [], "owner": {"reputation": 2263, "user_id": 5240198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/963df2e5e692fb3422853b3d5f3353c7?s=128&d=identicon&r=PG&f=1", "display_name": "rastik", "link": "https://stackoverflow.com/users/5240198/rastik"}, "is_accepted": false, "score": 7, "last_activity_date": 1440014274, "creation_date": 1440014274, "answer_id": 32104550, "question_id": 32102613, "link": "https://stackoverflow.com/questions/32102613/how-to-compile-a-program-with-static-libcurl/32104550#32104550", "title": "How to compile a program with static libcurl?", "body": "<p>This is how it looks with dynamic libcurl.</p>\n\n<pre><code>$ ldd test\n    linux-vdso.so.1 (0x00007ffcca3aa000)\n    libcurl.so.4 =&gt; /usr/lib64/libcurl.so.4 (0x00007f5536ed6000)\n    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f5536b3e000)\n    libssl.so.1.0.0 =&gt; /usr/lib64/libssl.so.1.0.0 (0x00007f55368d3000)\n    libcrypto.so.1.0.0 =&gt; /usr/lib64/libcrypto.so.1.0.0 (0x00007f5536503000)\n    libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f55362ed000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f5537138000)\n    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f55360e9000)\n</code></pre>\n\n<p>If you want to link only curl statically, do not use -static. Just add libcurl.a as one of the objects files or use -lcurl, you don't need to specify it twice.\nAfter</p>\n\n<pre><code>gcc test.c curl-7.44.0/lib/.libs/libcurl.a -lssl -lcrypto -ldl -lm -lz -DCURL_STATICLIB -o test\n</code></pre>\n\n<p>you'll get</p>\n\n<pre><code>$ ldd test\n    linux-vdso.so.1 (0x00007ffd9a0a7000)\n    libssl.so.1.0.0 =&gt; /usr/lib64/libssl.so.1.0.0 (0x00007f947cc7e000)\n    libcrypto.so.1.0.0 =&gt; /usr/lib64/libcrypto.so.1.0.0 (0x00007f947c8ae000)\n    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f947c6aa000)\n    libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f947c3b1000)\n    libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f947c19b000)\n    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f947be03000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f947cee9000)\n</code></pre>\n\n<p>-static means that you want link all statically. Then you need all libraries prepared as static and the result will be:</p>\n\n<pre><code>$ ldd test\n    not a dynamic executable\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 1429142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42a5332d384be7fa30aadd4bfb05428?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0428\u0435\u0440", "link": "https://stackoverflow.com/users/1429142/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a8%d0%b5%d1%80"}, "is_accepted": false, "score": 6, "last_activity_date": 1440071691, "creation_date": 1440071691, "answer_id": 32117592, "question_id": 32102613, "link": "https://stackoverflow.com/questions/32102613/how-to-compile-a-program-with-static-libcurl/32117592#32117592", "title": "How to compile a program with static libcurl?", "body": "<p>I found a way. libcurl must be configured with key \"--enable-ares\".</p>\n\n<pre><code>./configure --disable-shared --enable-static --prefix=/tmp/curl --disable-ldap --disable-sspi --without-librtmp --disable-ftp --disable-file --disable-dict --disable-telnet --disable-tftp --disable-rtsp --disable-pop3 --disable-imap --disable-smtp --disable-gopher --disable-smb --without-libidn --enable-ares\n</code></pre>\n\n<p>Then the program will feature gethostbyname and will be able to resolve the domain name. </p>\n\n<p>Thank you all for the comments.</p>\n"}], "owner": {"reputation": 161, "user_id": 1429142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d42a5332d384be7fa30aadd4bfb05428?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0428\u0435\u0440", "link": "https://stackoverflow.com/users/1429142/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a8%d0%b5%d1%80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16080, "favorite_count": 2, "answer_count": 2, "score": 10, "last_activity_date": 1464011735, "creation_date": 1440007650, "last_edit_date": 1440009002, "question_id": 32102613, "link": "https://stackoverflow.com/questions/32102613/how-to-compile-a-program-with-static-libcurl", "title": "How to compile a program with static libcurl?", "body": "<p>There is a following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;curl/curl.h&gt;\n\nint main(void){\n  CURL *curl;\n  CURLcode res;\n\n  curl = curl_easy_init();\n\n  if(curl == NULL)\n    return 0;\n\n  curl_easy_setopt(curl, CURLOPT_URL, \"https://example.com/getAccessAttributes?id=1\");\n\n  res = curl_easy_perform(curl);\n\n  if(res != CURLE_OK) {\n    fprintf(stderr, \"Error: %s\\n\", curl_easy_strerror(res));\n    return 0;\n  }\n\n  curl_easy_cleanup(curl);\n  return 0;\n}\n</code></pre>\n\n<p>Everything works fine if you collect it from the dynamic link library:</p>\n\n<pre><code>gcc test.c -lcurl -o test\n</code></pre>\n\n<p>Now I want to raise a static program:</p>\n\n<pre><code>gcc test.c /tmp/curl/lib/libcurl.a -static -lcurl -lssl -lcrypto -ldl -lm -lz -DCURL_STATICLIB -I/tmp/curl/include -o test\n</code></pre>\n\n<p>He is going with errors:</p>\n\n<blockquote>\n  <p>/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/libcrypto.a(dso_dlfcn.o): In function <code>dlfcn_globallookup':\n  (.text+0x11): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n  /tmp/curl/lib/libcurl.a(libcurl_la-netrc.o): In function</code>Curl_parsenetrc':\n  netrc.c:(.text+0x3c8): warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking\n  /tmp/curl/lib/libcurl.a(libcurl_la-curl_addrinfo.o): In function `Curl_getaddrinfo_ex':\n  curl_addrinfo.c:(.text+0x60): warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking</p>\n</blockquote>\n\n<p>The program works only if you specify a host ip address and not example.com.\nOtherwise the program can not resolve the domain name:</p>\n\n<pre><code>$ ./test\nError: Couldn't resolve host name\n</code></pre>\n\n<p>How can I solve the problem of name resolution? Thanks!</p>\n\n<p>P.S.\nStatic libcurl I collected the following method:</p>\n\n<pre><code>wget http://curl.haxx.se/download/curl-7.44.0.tar.lzma\ntar xf curl-7.44.0.tar.lzma\ncd curl-7.44.0\n./configure --disable-shared --enable-static --prefix=/tmp/curl --disable-ldap --disable-sspi --without-librtmp --disable-ftp --disable-file --disable-dict --disable-telnet --disable-tftp --disable-rtsp --disable-pop3 --disable-imap --disable-smtp --disable-gopher --disable-smb --without-libidn\nmake &amp;&amp; make install\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "edited": false, "score": 0, "creation_date": 1440007352, "post_id": 32102366, "comment_id": 52099370, "body": "By the way, you might want to consider using <code>%p</code> to printf pointer values."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1440007398, "post_id": 32102366, "comment_id": 52099396, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/232303/so-you-think-you-know-pointers\">So you think you know pointers?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1234, "user_id": 4847264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b6735add4b9df1cc3bf77c455125332?s=128&d=identicon&r=PG", "display_name": "Adam Bak", "link": "https://stackoverflow.com/users/4847264/adam-bak"}, "edited": false, "score": 0, "creation_date": 1440007753, "post_id": 32102520, "comment_id": 52099584, "body": "Interesting, this would mean that if I wanted to get the next memory location directly after the array I could use &quot;&amp;nums + 1&quot;. Thanks for the quick answer."}, {"owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "reply_to_user": {"reputation": 1234, "user_id": 4847264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b6735add4b9df1cc3bf77c455125332?s=128&d=identicon&r=PG", "display_name": "Adam Bak", "link": "https://stackoverflow.com/users/4847264/adam-bak"}, "edited": false, "score": 1, "creation_date": 1440007858, "post_id": 32102520, "comment_id": 52099645, "body": "Yes, that&#39;s true. However you cannot actually use that memory location, because it would invoke <i>undefined behavior</i>. Nor are you allowed to compute any memory locations past the end, either."}], "tags": [], "owner": {"reputation": 16556, "user_id": 839689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eed3ee2db841be15bdb120f3ff38f02e?s=128&d=identicon&r=PG", "display_name": "Nayuki", "link": "https://stackoverflow.com/users/839689/nayuki"}, "is_accepted": true, "score": 7, "last_activity_date": 1440007977, "last_edit_date": 1440007977, "creation_date": 1440007259, "answer_id": 32102520, "question_id": 32102366, "link": "https://stackoverflow.com/questions/32102366/pointer-arithmetic-in-c-using-array-variables/32102520#32102520", "title": "Pointer Arithmetic in C using Array Variables", "body": "<p>The confusion is related to how in C, arrays implicitly decay into pointers in certain contexts.</p>\n\n<p>The easier one to explain, <code>nums + 1</code> effectively means <code>&amp;nums[0] + 1</code>. <code>nums[0]</code> is type <code>int</code>, which is 4 bytes per element. Thus <code>&amp;nums[0] + 1</code> is 4 bytes after <code>&amp;nums</code>.</p>\n\n<p>As for <code>&amp;nums + 1</code>, <code>&amp;nums</code> is of type <code>int(*)[3]</code>, which is 12 bytes per element. Thus <code>&amp;nums + 1</code> is 12 bytes after <code>&amp;nums</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2134, "user_id": 2623659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bd33f70a971bf89c7719005d477e2b?s=128&d=identicon&r=PG", "display_name": "ach", "link": "https://stackoverflow.com/users/2623659/ach"}, "is_accepted": false, "score": 2, "last_activity_date": 1440007961, "creation_date": 1440007961, "answer_id": 32102709, "question_id": 32102366, "link": "https://stackoverflow.com/questions/32102366/pointer-arithmetic-in-c-using-array-variables/32102709#32102709", "title": "Pointer Arithmetic in C using Array Variables", "body": "<p>Both expressions, <code>(int*) nums</code> and <code>&amp;nums</code> have pointer types, but the types pointed to are different. You only can test them for equality in C, not C++.</p>\n\n<p>The type of <code>nums</code> is <code>int[3]</code>, that is, 'array of 3 objects of type <code>int</code>' and the type of <code>(int*) nums</code> is <code>int*</code>, that is, 'a pointer to <code>int</code>' . Adding 1 to <code>(int*) nums</code> means obtaining a pointer to an object of type <code>int</code> that follows <code>nums[0]</code>. In terms of addresses that means adding <code>1 * sizeof (int)</code>.</p>\n\n<p>The type of <code>&amp;nums</code> is <code>int(*)[3]</code>, that is, 'pointer to an array of 3 objects of type <code>int</code>'. Adding 1 to <code>&amp;nums</code> means obtaining a pointer to an object of type <code>int[3]</code> that follows <code>nums</code>. In terms of addresses that means adding <code>1 * sizeof (int[3])</code>, that is, <code>3 * sizeof (int)</code>.</p>\n"}], "owner": {"reputation": 1234, "user_id": 4847264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b6735add4b9df1cc3bf77c455125332?s=128&d=identicon&r=PG", "display_name": "Adam Bak", "link": "https://stackoverflow.com/users/4847264/adam-bak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 32102520, "answer_count": 2, "score": 4, "last_activity_date": 1440007977, "creation_date": 1440006772, "question_id": 32102366, "link": "https://stackoverflow.com/questions/32102366/pointer-arithmetic-in-c-using-array-variables", "title": "Pointer Arithmetic in C using Array Variables", "body": "<p>I am in the process of learning C, and have begun exploring the world of pointers and pointer arithmetic. For example,  in the following code snippet:</p>\n\n<pre><code>int nums[] = {1, 2, 3};\n</code></pre>\n\n<p><code>nums</code> is an Array variable and acts like a pointer that points to the first memory location of the array. I wrote the following sample code and am trying to understand why I am getting the results that I am getting:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt; \n\nint main() \n{\n  int nums[] = {1, 2, 3};\n\n  if(nums == &amp;nums)\n    puts(\"nums == &amp;nums\");\n  else\n    puts(\"nums != &amp;nums\");\n\n  if((nums + 1) == (&amp;nums + 1))\n    puts(\"(nums + 1) == (&amp;nums + 1)\");\n  else\n    puts(\"(nums + 1) != (&amp;nums + 1)\");    \n\n  printf(\"nums: %i\\n\", nums);\n  printf(\"&amp;nums: %i\\n\", &amp;nums);\n  printf(\"nums + 1: %i\\n\", nums + 1);\n  printf(\"&amp;nums + 1: %i\\n\", &amp;nums + 1);\n\n  return 0;    \n}\n</code></pre>\n\n<p>I am getting that <code>nums == &amp;nums</code> is true as expected; however, when I apply pointer arithmetic and add <code>1</code> to <code>nums</code> this result does not equal <code>&amp;nums + 1</code>. In other words <code>(nums + 1) != (&amp;nums + 1)</code> even though <code>nums == &amp;nums</code>.</p>\n\n<p>This is the output of the program that I get:</p>\n\n<pre><code>nums == &amp;nums\n(nums + 1) != (&amp;nums + 1)\nnums: 2345600\n&amp;nums: 2345600\nnums + 1: 2345604\n&amp;nums + 1: 2345612\n</code></pre>\n\n<p>It appears that <code>nums</code> and <code>nums + 1</code> are off set by 4 bytes; however, <code>&amp;nums</code> and <code>&amp;nums + 1</code> are offset by 12. Why is it that this offset is by 12 bytes and not by 4?</p>\n"}, {"tags": ["c++", "c", "tokenize", "strtok"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 3, "creation_date": 1440006303, "post_id": 32102180, "comment_id": 52098828, "body": "<code>strtok</code> modifies the input string, while the C++ version is making copies.  Whlie they may have the same end result, the two versions are taking vastly different routes to reach the end."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1440006475, "post_id": 32102180, "comment_id": 52098908, "body": "You might want to see this on how to split a string C++ as it is more efficient: <a href=\"http://stackoverflow.com/questions/236129/split-a-string-in-c\">stackoverflow.com/questions/236129/split-a-string-in-c</a>  What does you data look like and what are you trying to do with it?"}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1440006927, "post_id": 32102180, "comment_id": 52099140, "body": "If you are testing on constant strings,  functions with equivalent  <i>_builtin</i>&#39;s will always win because the get folded."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1440007044, "post_id": 32102180, "comment_id": 52099193, "body": "Maybe because C library was written at a time where resource was scarce and efficiency was preferred to a neat design, while C++ is more concerned at robustness and design - but this is just my opinion :-)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d22cad42a792798e79126bd0358740?s=128&d=identicon&r=PG&f=1", "display_name": "nicolati", "link": "https://stackoverflow.com/users/5244472/nicolati"}, "edited": false, "score": 0, "creation_date": 1440096952, "post_id": 32102954, "comment_id": 52143821, "body": "Thank you! I will try it. It seems very interesting! I didn&#39;t catch that &quot;my&quot; algorithm had to perform such big number of copies and allocations... :("}, {"owner": {"reputation": 31, "user_id": 5244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d22cad42a792798e79126bd0358740?s=128&d=identicon&r=PG&f=1", "display_name": "nicolati", "link": "https://stackoverflow.com/users/5244472/nicolati"}, "edited": false, "score": 1, "creation_date": 1440180591, "post_id": 32102954, "comment_id": 52182935, "body": "Hi Christophe, I tried your algorithm. It&#39;s much better than &quot;mine&quot;, but still worse than strtok. Since it&#39;s about 5X faster than &quot;mine&quot; and maybe 2X slower than strtok, I will use it anyway. I can survive with 2X :) Thank you"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1440010897, "last_edit_date": 1440010897, "creation_date": 1440008769, "answer_id": 32102954, "question_id": 32102180, "link": "https://stackoverflow.com/questions/32102180/c-tokenizer-complexity-vs-strtok-r/32102954#32102954", "title": "C++ Tokenizer Complexity vs strtok_r", "body": "<p><a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow\"><code>strtok()</code></a> modifies the string, replacing the token delimiter with a null terminator. If your long string has n tokens, the function just iterates through the string changing n chars to null, which is extremely fast.  </p>\n\n<p>In your C++ alternative you are making 2*n string copies, which means potentially 2*n allocation operations, plus the sheer copy of the (very long) remaining string, which is much heavier than the first alternative.  The difference is that you're not obliged to change the original string.  </p>\n\n<p>You could improve by keeping the string you're iterating trough unchanged and for example use offsets for the search:  </p>\n\n<pre><code>string mystring, token ;\nsize_t cur_token=0, next_token ;\n// fill 'mystring'\ndo {\n    next_token = mystring.find_first_of (\" \", cur_token) ;\n    token = mystring.substr (cur_token, next_token-cur_token);  // next_token-(nex_token==string::npos ? 0:cur_token) would be cleaner\n    if (next_token!=string::npos) \n        cur_token = next_token+1; \n    // do something with token;\n} while (next_token!=string::npos);\n</code></pre>\n\n<p><a href=\"http://ideone.com/CQEkrm\" rel=\"nofollow\">Live demo</a> </p>\n"}], "owner": {"reputation": 31, "user_id": 5244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d22cad42a792798e79126bd0358740?s=128&d=identicon&r=PG&f=1", "display_name": "nicolati", "link": "https://stackoverflow.com/users/5244472/nicolati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1440010897, "creation_date": 1440006172, "last_edit_date": 1440007643, "question_id": 32102180, "link": "https://stackoverflow.com/questions/32102180/c-tokenizer-complexity-vs-strtok-r", "title": "C++ Tokenizer Complexity vs strtok_r", "body": "<p>I'm making this question because I moved my tokenizer from strtok_r to an equivalent version in C++. I have to use strtok_r in place of strtok, because I have 2 nested tokenizations to perform most of the time.</p>\n\n<p>The strtok_r algorithm is something like this:</p>\n\n<pre><code>char *end_token, *token, *word ;\n// fill 'word'\ntoken = strtok_r (word, \" \", &amp;end_token) ;\nwhile (token != NULL) {\n  // do something\n  token = strtok_r (NULL, \" \", &amp;end_token) ;\n}\n</code></pre>\n\n<p>And the C++ version is like this (taken from another post here):</p>\n\n<pre><code>string mystring, token ;\nsize_t next_token ;\n// fill 'mystring'\nwhile (token != mystring) {\n    next_token = mystring.find_first_of (\" \") ;\n    token = mystring.substr (0, next_token) ;\n    mystring = mystring.substr (next_token + 1) ;\n    // do something\n}\n</code></pre>\n\n<p>Now the question: why the C++ version is so heavy respect to the C version?\nFor long strings I have to wait about 10 seconds with the C++ version, while the C version is instantaneous with the same strings.\nSo, it seems like the C++ version has higher complexity...\nWhat do you think about?</p>\n"}, {"tags": ["c", "gcc", "constants"], "comments": [{"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1440005902, "post_id": 32102063, "comment_id": 52098610, "body": "<code>define</code> won&#39;t take up any space during runtime."}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "reply_to_user": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1440006021, "post_id": 32102063, "comment_id": 52098673, "body": "That&#39;s why I tried it"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1440006048, "post_id": 32102063, "comment_id": 52098689, "body": "Array length is not consuming any memory in the run time. Constant expressions are not consuming any <i>data</i> memory, though they might reside in the code (read-only) memory. And such a premature optimization is really obsolete here."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440006912, "post_id": 32102063, "comment_id": 52099131, "body": "there are a few problems with the posted code that you should fix first.  1) stdio.h is a system header file.  It should be surrounded by &#39;&lt;&#39; and &#39;&gt;&#39; not by double quotes.   2) when #define&#39;ing numeric values, always surround the values with parens &#39;(&#39; and &#39;)&#39; to avoid text replacement problems.  3) the 2 parameters to main() are unused.  Suggest: &#39;int main( void )&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440007195, "post_id": 32102063, "comment_id": 52099266, "body": "This line: &#39;#define SIZE1 500;&#39;  is not syntactically correct.  A #define is NOT terminated with a semicolon &#39;;&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1440006058, "post_id": 32102092, "comment_id": 52098694, "body": "Apparently the system won&#39;t let me accept an answer right now, but you fixed the issue"}, {"owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "reply_to_user": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 2, "creation_date": 1440006081, "post_id": 32102092, "comment_id": 52098708, "body": "Yup, there&#39;s a delay before it lets you accept. No hurry."}], "tags": [], "owner": {"reputation": 14761, "user_id": 290072, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ITEsv.png?s=128&g=1", "display_name": "Almo", "link": "https://stackoverflow.com/users/290072/almo"}, "is_accepted": true, "score": 11, "last_activity_date": 1440005809, "creation_date": 1440005809, "answer_id": 32102092, "question_id": 32102063, "link": "https://stackoverflow.com/questions/32102063/any-way-i-can-use-a-constant-number-in-my-program-without-storing-it-in-memory/32102092#32102092", "title": "Any way I can use a constant number in my program without storing it in memory?", "body": "<p>You mean</p>\n\n<pre><code>#define SIZE1 500\n</code></pre>\n\n<p>In your code, whenever you use <code>SIZE1</code> a semicolon is being inserted. Preprocessor commands like <code>#define</code> don't end with semicolons.</p>\n"}], "owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 32102092, "answer_count": 1, "score": 2, "last_activity_date": 1440005809, "creation_date": 1440005647, "question_id": 32102063, "link": "https://stackoverflow.com/questions/32102063/any-way-i-can-use-a-constant-number-in-my-program-without-storing-it-in-memory", "title": "Any way I can use a constant number in my program without storing it in memory?", "body": "<p>This is my C code:</p>\n\n<pre><code>#include \"stdio.h\"\n#define SIZE1 500;\nint main(int argc,char* argv[]){\n    unsigned long SIZE2=500;\n    char astring2[SIZE2];\n    char astring[SIZE1];\n    return 0;\n}\n</code></pre>\n\n<p>If I remove the line containing \"define\" and the line containing <code>char astring[SIZE1];</code> then the program will work nicely, however at least 4 bytes in memory are required to store the number 500.</p>\n\n<p>What I'd like to see work which does not work is me removing these two lines instead:</p>\n\n<pre><code>unsigned long SIZE2=500;\nchar astring2[SIZE2];\n</code></pre>\n\n<p>When I compile the complete code above, the compiler gives me these errors:</p>\n\n<pre><code>./teststring.c: In function 'main':\n./teststring.c:6: error: expected ']' before ';' token\n</code></pre>\n\n<p>This suggests to me that it has a problem with SIZE1. \nI also tried putting quotes around the value of SIZE1 and I still receive the same error.</p>\n\n<p>Is there a way I can do this or am I forced to store a number in memory to use it? </p>\n\n<p>I don't want to constantly type the same number everywhere I need it in my program, so please don't suggest <code>char astring[500]</code> as an answer, but it would be nice if the compiler did that behind the scenes for me as it compiles the code to an executable format.</p>\n\n<p>And my compiler is GCC version 4.1.2.</p>\n"}, {"tags": ["c", "struct", "linked-list"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1440005685, "post_id": 32101785, "comment_id": 52098487, "body": "Actually storing the read-characters in the list rather than just creating a nodes you eventually leak and throwing away the chars you read would probably be a good place to start. Unrelated, (a) <code>void</code> isn&#39;t a standard return type for <code>main()</code>, (b) <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc?s=1|8.2015\">don&#39;t cast <code>malloc</code> in C programs</a>, and (c) Turbo C++ is probably older than <i>you</i> are. Consider a more recent toolchain (perhaps one from at least the last <i>decade</i>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "edited": false, "score": 0, "creation_date": 1440005927, "post_id": 32101785, "comment_id": 52098623, "body": "For starting, you should do it without using functions but if you want to use functions then make the variables new_node and current as static. Your logic of linking the linked list (the if else block) is correct. BTW you haven&#39;t entered data (char data) in any of these linked list nodes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "edited": false, "score": 0, "creation_date": 1440006576, "post_id": 32101785, "comment_id": 52098958, "body": "Display function nowhere defined."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440076581, "post_id": 32101785, "comment_id": 52130952, "body": "When calling function malloc, in C, do not cast the returned value as it is already a void* so can be assigned to any other pointer.  Always check (!=NULL) the returned value to assure the operation was successful"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440076710, "post_id": 32101785, "comment_id": 52131044, "body": "what is &#39;start&#39; and &#39;current&#39;?"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1440007357, "last_edit_date": 1440007357, "creation_date": 1440006770, "answer_id": 32102365, "question_id": 32101785, "link": "https://stackoverflow.com/questions/32101785/a-program-to-search-for-an-element-in-a-linked-list-of-characters-insert-charac/32102365#32102365", "title": "A program to search for an element in a linked list of characters (insert characters using random number generator) using recursion", "body": "<p>Take this program as a template for your program. This program has a recursive method of searching a character in the list.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nstruct Node\n{\n    char data;\n    struct Node *next;\n};\n\nvoid insert_front( struct Node **head, char c )\n{\n    struct Node *tmp = malloc( sizeof( struct Node ) );\n\n    if ( tmp != NULL )\n    {               \n        tmp-&gt;data = c;\n        tmp-&gt;next = *head;\n        *head = tmp;\n    }\n}\n\nvoid free_list( struct Node *head )\n{\n    while ( head != NULL )\n    {\n        struct Node *tmp = head;\n        head = head-&gt;next;\n        free( tmp );\n    }\n}\n\nvoid display_list( struct Node *head )\n{\n    for ( ; head != NULL; head = head-&gt;next ) printf( \"%c \", head-&gt;data );\n}\n\nstruct Node * find_node( struct Node *head, char c )\n{\n    return head == NULL || head-&gt;data == c ? head : find_node( head-&gt;next, c );\n}\n\nint main( void )\n{\n    const char alphabet[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\n    struct Node *head = NULL;\n\n    srand( ( unsigned int )time( NULL ) );\n\n    const size_t N = 10;\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        insert_front( &amp;head, alphabet[rand() % ( sizeof( alphabet ) - 1 )] );\n    }\n\n    display_list( head );\n    printf( \"\\n\" );\n\n    while ( 1 )\n    {\n        struct Node *node;\n\n        char c = '@';\n        printf( \"Enter letter to search in the list (@-exit): \" );\n        scanf( \" %c\", &amp;c );\n\n        if ( c == '@' ) break;\n\n        node = find_node( head, c );\n\n        if ( node != NULL ) printf( \"Letter %c is present in the list\\n\", c );\n        else printf( \"Letter %c is not present in the list\\n\", c );\n    }\n\n    free_list( head );\n}    \n</code></pre>\n\n<p>If to enter for example</p>\n\n<pre><code>A E I O U @\n</code></pre>\n\n<p>then the program output might look like</p>\n\n<pre><code>W H T C E H N J F N \nEnter letter to search in the list (@-exit): A\nLetter A is not present in the list\nEnter letter to search in the list (@-exit): E\nLetter E is present in the list\nEnter letter to search in the list (@-exit): I\nLetter I is not present in the list\nEnter letter to search in the list (@-exit): O\nLetter O is not present in the list\nEnter letter to search in the list (@-exit): U\nLetter U is not present in the list\nEnter letter to search in the list (@-exit): @\n</code></pre>\n\n<p>Function <code>find_node</code> returns a node. Thus you can use it for example to find all occurences of a letter.</p>\n\n<p>for example</p>\n\n<pre><code>size_t count = 0;\nstruct Node *node = head;\nchar c = 'A';\n\nwhile ( ( node = find_node( node, c ) ) != NULL )\n{\n    ++count;\n    node = node-&gt;next;\n}\n\nprintf( \"There are %zu letters %c in the list\\n\", count, c );\n</code></pre>\n\n<p>By the way in Russia there is also name <strong>Katherine</strong> :)</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "is_accepted": false, "score": 2, "last_activity_date": 1440006826, "creation_date": 1440006826, "answer_id": 32102385, "question_id": 32101785, "link": "https://stackoverflow.com/questions/32101785/a-program-to-search-for-an-element-in-a-linked-list-of-characters-insert-charac/32102385#32102385", "title": "A program to search for an element in a linked list of characters (insert characters using random number generator) using recursion", "body": "<p>I have commented where the changes have been made. You need to concrete your linked list concepts. Hope this helps</p>\n\n<pre><code>  `#include&lt;stdio.h&gt;\n   #include&lt;conio.h&gt;\n   #include&lt;alloc.h&gt;\n\n   //-------------------------------------------------\n   struct node\n   {\n    char data;\n    struct node *next;\n   }*start=NULL;\n   //------------------------------------------------------------\n static struct node *new_node,*current;  //declared these static outside the create funtion\n  void create()\n    {\n     char ch;\n     do\n      {\n\n\n       new_node=(struct node *)malloc(sizeof(struct node));\n\n        /*I want random characters inserted here*/\n       new_node-&gt;next=NULL;\n        printf(\"Enter the data in the nodes: \"); //asking you to enter data in nodes\n        scanf(\" %c\",&amp;(new_node-&gt;data));    //entering data in the linked list node\n       if(start==NULL)\n        {\n         start=new_node;\n         current=new_node;\n        }\n       else\n        {\n        current-&gt;next=new_node;\n        current=new_node;\n        }\n\n    printf(\"nDo you want to creat another : \");\n    ch=getche();\n}while(ch!='n');\n}\n\nvoid display()   //display function defined here\n    {\n      struct node *arbitrary_pointer;\n      arbitrary_pointer=start;\n      while(arbitrary_pointer!=NULL)\n       {\n         printf(\" %c\",arbitrary_pointer-&gt;data);\n         arbitrary_pointer=arbitrary_pointer-&gt;next;\n       }\n    }\n  int main()              //changed return type of main function from void to int\n   {\n    create();\n    display();\n    return 0;\n   }\n</code></pre>\n\n<p>`</p>\n"}], "owner": {"reputation": 271, "user_id": 5026712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qSVMh.jpg?s=128&g=1", "display_name": "Katherine", "link": "https://stackoverflow.com/users/5026712/katherine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "accepted_answer_id": 32102365, "answer_count": 2, "score": 2, "last_activity_date": 1440007357, "creation_date": 1440004633, "last_edit_date": 1440005630, "question_id": 32101785, "link": "https://stackoverflow.com/questions/32101785/a-program-to-search-for-an-element-in-a-linked-list-of-characters-insert-charac", "title": "A program to search for an element in a linked list of characters (insert characters using random number generator) using recursion", "body": "<p>Can some one please help me how to implement this?? \nI am unable to create a logic to do this. How to insert random characters and how to then search recursively through it? This is what I have done till now...</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;alloc.h&gt;\n\n//-------------------------------------------------\nstruct node\n{\n    char data;\n    struct node *next;\n}*start=NULL;\n//------------------------------------------------------------\n\nvoid create()\n{\n    char ch;\n    do\n    {\n        struct node *new_node,*current;\n\n        new_node=(struct node *)malloc(sizeof(struct node));\n\n        /*I want random characters inserted here*/\n        new_node-&gt;next=NULL;\n\n        if(start==NULL)\n        {\n            start=new_node;\n            current=new_node;\n        }\n        else\n        {\n            current-&gt;next=new_node;\n            current=new_node;\n        }\n\n        printf(\"nDo you want to creat another : \");\n        ch=getche();\n    }while(ch!='n');\n}\n\n\nvoid main()\n{\n    create();\n    display();\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "edited": false, "score": 1, "creation_date": 1440004453, "post_id": 32101565, "comment_id": 52097740, "body": "Please add the &quot;ft_list.h&quot; file."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440005007, "post_id": 32101565, "comment_id": 52098046, "body": "please consistently indent the code for readability/understandability by us humans.  Suggest indent 4 spaces after every opening brace &#39;{&#39; and un-indent before every closing brace &#39;}&#39;   Never use tabs for indenting because every wordprocessor/test editor has the tab stops/tab width set differently."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440005105, "post_id": 32101565, "comment_id": 52098108, "body": "&#39;new&#39; is a keyword in the c++ language, and while that language is not C, the c++ compiler can be used to compile C programs.   I.E. do not use keywords for variable names"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440005256, "post_id": 32101565, "comment_id": 52098206, "body": "the way the code is written, if the malloc fails, that event is never passed through nor displayed to the user.   Note: usually, for non embedded applications, if malloc fails then call &#39;perror()&#39; then cleanup (close files, etc) then call &#39;exit( EXIT_FAILURE );&#39;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440005605, "post_id": 32101565, "comment_id": 52098438, "body": "this line: &#39;new = ft_create_elem(av[1]));&#39; does not compile because there is too many &#39;)&#39;."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440005685, "post_id": 32101565, "comment_id": 52098486, "body": "to check out the code, we need the contents of the ft_list.h file posted."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440005753, "post_id": 32101565, "comment_id": 52098530, "body": "this line: &#39;new = add_link(list, av[1]);&#39; does not compile because the &#39;list&#39; variable is not defined."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440005937, "post_id": 32101565, "comment_id": 52098627, "body": "the question mentions something about using the argc and argv[] parameters, but does not list the main() function.  Are we expected to guess what your talking about?"}], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 0, "last_activity_date": 1440009032, "last_edit_date": 1440009032, "creation_date": 1440008511, "answer_id": 32102874, "question_id": 32101565, "link": "https://stackoverflow.com/questions/32101565/how-to-call-in-main-a-link-list-with-argc-and-argv/32102874#32102874", "title": "How to call in main a link list with argc and argv?", "body": "<p>The line</p>\n\n<pre><code>        list = add_link(list, av[1]);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>        list = add_link(list, av[i]);\n</code></pre>\n\n<p>Optional: ft_create_elem() is not needed. add_link() can be used to push the first node on an empty list (list == NULL). I'm wondering if there should be function to display the list, and a function to delete the list (free all the allocated nodes). Since the nodes are being pushed onto the front of the list, the list will end up with the parameters in reverse order, is this what is wanted?</p>\n"}], "owner": {"reputation": 45, "user_id": 5228823, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-H6J9wJKYc6c/AAAAAAAAAAI/AAAAAAAAACY/N6g9Zn3r5g4/photo.jpg?sz=128", "display_name": "Raoul Crisan", "link": "https://stackoverflow.com/users/5228823/raoul-crisan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 32102874, "answer_count": 1, "score": -4, "last_activity_date": 1440009032, "creation_date": 1440003874, "last_edit_date": 1440008443, "question_id": 32101565, "link": "https://stackoverflow.com/questions/32101565/how-to-call-in-main-a-link-list-with-argc-and-argv", "title": "How to call in main a link list with argc and argv?", "body": "<p>how to call in main this function to see if it works ? I don't even know how to call in main linked lists but with arguments it seems much more difficult .. so please someone would help me ?</p>\n\n<pre><code>#include \"ft_list.h\"\n\nt_list  *add_link(t_list *list, void *data)\n{\nt_list *aux;\n    aux = malloc(sizeof(t_list));\n    if (aux)\n    {\n        aux-&gt;data = data;\n        aux-&gt;next = list;\n    }\n    return (aux);\n}\n\nt_list  *ft_list_push_params(int ac, char **av)\n{\nint i;\nt_list *list;\n\n    i = 2;\n    if (ac == 1)\n        return (NULL);\n    list = ft_create_elem(av[1]);\n    while (i &lt; ac)\n    {\n        list = add_link(list, av[1]);\n        i++;\n    }\n    return (list);\n}\n\nint main(int argc, char**argv)\n{\nt_list *list;\n    list = ft_list_push_params(argc, argv);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "integer"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1440002868, "post_id": 32101239, "comment_id": 52096903, "body": "Use <code>printf(&quot;%d &quot;,game.GameScoresHome[x%10][y]);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1440002882, "creation_date": 1440002882, "answer_id": 32101279, "question_id": 32101239, "link": "https://stackoverflow.com/questions/32101239/setting-2d-integer-array-values-all-to-0-in-c/32101279#32101279", "title": "Setting 2D Integer Array values all to 0 in C", "body": "<p>In your code</p>\n\n<pre><code>for (int x=0;x&lt;100;x++) {\n        int y = floor(x/10);\n        printf(\"%d \",game.GameScoresHome[x][y]);\n    }\n</code></pre>\n\n<p>the <code>x</code> value is going out of bound. Maybe you want to take a <code>%10</code> value of <code>x</code> and change the index locations, like</p>\n\n<pre><code>  printf(\"%d \",game.GameScoresHome[y][x%10]);\n</code></pre>\n\n<p>or, use a nested loop to maintain two indexes separately.</p>\n"}, {"tags": [], "owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1440003264, "last_edit_date": 1440003264, "creation_date": 1440002899, "answer_id": 32101283, "question_id": 32101239, "link": "https://stackoverflow.com/questions/32101239/setting-2d-integer-array-values-all-to-0-in-c/32101283#32101283", "title": "Setting 2D Integer Array values all to 0 in C", "body": "<p>You're accessing memory outside the array.</p>\n\n<p>Your <code>x</code> variable iterates from 0 to 99.</p>\n\n<pre><code>for (int x=0;x&lt;100;x++)\n</code></pre>\n\n<p>But your array has only 10 rows.</p>\n\n<pre><code>int GameScoresHome[10][10];\n</code></pre>\n\n<p>One fix would be to use simple nested loops.</p>\n\n<pre><code>for (int x=0;x&lt;10;x++) {\n   for (int y=0;y&lt;10;y++) {\n      printf(\"%d \",game.GameScoresHome[x][y]);\n   }\n}\n</code></pre>\n\n<p>Nested loops would also make it easy to include a newline after each row.</p>\n\n<pre><code>for (int x=0;x&lt;10;x++) {\n   for (int y=0;y&lt;10;y++) {\n      printf(\"%d \",game.GameScoresHome[x][y]);\n   }\n   printf(\"\\n\");\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1440003410, "last_edit_date": 1440003410, "creation_date": 1440002932, "answer_id": 32101289, "question_id": 32101239, "link": "https://stackoverflow.com/questions/32101239/setting-2d-integer-array-values-all-to-0-in-c/32101289#32101289", "title": "Setting 2D Integer Array values all to 0 in C", "body": "<p>Write the loop simpler</p>\n\n<pre><code>for ( int x = 0; x &lt; 100; x++) {\n    printf(\"%d \",game.GameScoresHome[x / 10][x % 10]);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for ( int x = 0; x &lt; 100; x++) {\n    printf(\"%d \",game.GameScoresHome[x / 10][x % 10]);\n    if ( x % 10 == 9 ) printf( \"\\n\" );\n}\n</code></pre>\n\n<p>As for your loop then x is being changed from 0 up to 100 and as result using x as the first index in the statement</p>\n\n<pre><code>printf(\"%d \",game.GameScoresHome[x][y]);\n                                ^^^\n</code></pre>\n\n<p>is invalid. And y is calculated incorrectly.</p>\n"}, {"tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": false, "score": 0, "last_activity_date": 1440003240, "creation_date": 1440003240, "answer_id": 32101370, "question_id": 32101239, "link": "https://stackoverflow.com/questions/32101239/setting-2d-integer-array-values-all-to-0-in-c/32101370#32101370", "title": "Setting 2D Integer Array values all to 0 in C", "body": "<p>What about?</p>\n\n<pre><code>struct Game game = {.GameScoresHome = {0}};\nfor (int x=0;x&lt;10;x++) {\n   for (int y=0;y&lt;10;y++) {\n      printf(\"%d \",game.GameScoresHome[x][y]);\n   }\n   printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 680, "user_id": 4802698, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/536dc8f5fe69d0dabe70024eba7fb1a7?s=128&d=identicon&r=PG&f=1", "display_name": "Enayet Hussain", "link": "https://stackoverflow.com/users/4802698/enayet-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1440003410, "creation_date": 1440002727, "question_id": 32101239, "link": "https://stackoverflow.com/questions/32101239/setting-2d-integer-array-values-all-to-0-in-c", "title": "Setting 2D Integer Array values all to 0 in C", "body": "<p>I am trying to set all the values in my 2D array to 0 and then print all the scores back to make sure they are correct.</p>\n\n<pre><code>struct Game {\n    int GameScoresHome[10][10];\n};\n\nint main() {\n    struct Game game;\n\n    memset(game.GameScoresHome, 0, sizeof game.GameScoresHome);\n    for (int x=0;x&lt;100;x++) {\n        int y = floor(x/10);\n        printf(\"%d \",game.GameScoresHome[x][y]);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The current output is: </p>\n\n<pre><code>0 0 0 0 0 0 0 0 0 0 0 0 822083893 32767 32767 32767 32767 32767 32767 1651067951 1634028652 1345283180 1702057263 1701080931 2054842477 1866870631 1885417061 1647262318 1146113364 896624241 1280918623 1919052108 1819042146 1818850626 1634956149 1852133983 1264923239 792545364 1666723698 1836345960 1163089152 1949263220 1919250021 1868774725 1213481296 796026224 1785230711 1650803759 792546380 1213481296 1868781615 1752003690 6780258 1497628720 778396783 1920232291 792545364 1666723698 1836345960 1735746149 796026224 1785230711 1650803759 0 0 3 0 7 0 -2147482624 0 0 0 0 0 0 0 0 0 0 233472 1869045599 48 1868783455 5312 1633967967 3480 1818320735 304 1919115103 0 1852796269 0 115 0 72 0 1227 0 0 \n</code></pre>\n\n<p>The first 11 zeros are as they should be then it all goes wrong. What's going on?</p>\n"}, {"tags": ["c++", "c", "bit-manipulation"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440001289, "post_id": 32100772, "comment_id": 52095989, "body": "<code>iVal32 == (iVal32)iVal16</code>? It would be much easier to use unsigned."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440001682, "post_id": 32100772, "comment_id": 52096200, "body": "@Olaf - I have updated both to be unsigned."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1440001990, "post_id": 32100772, "comment_id": 52096402, "body": "@Jeff: These are no valid strings!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002096, "post_id": 32100772, "comment_id": 52096466, "body": "That actually included a bit sarcasm. You did not even define &quot;contain&quot; precisely. And your examples do not add to clarity."}, {"owner": {"reputation": 7193, "user_id": 1856325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ZO1bm.png?s=128&g=1", "display_name": "FreeNickname", "link": "https://stackoverflow.com/users/1856325/freenickname"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002199, "post_id": 32100772, "comment_id": 52096535, "body": "As @Olaf said, could you define &quot;contain&quot; more precisely? For instance, does <code>0xAB12CD34 &gt;&gt; 1;</code> contain <code>0xAB12</code>?"}, {"owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002214, "post_id": 32100772, "comment_id": 52096544, "body": "@Olaf - Good point.  strrchr is out.  but still a perfect candidate for SSE2 / AVX.  Or AVX2 if you don&#39;t care about older processors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1440002260, "post_id": 32100772, "comment_id": 52096563, "body": "@Jeff: My mobile does not hav any of those. Nor does my embedded CPU."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002301, "post_id": 32100772, "comment_id": 52096582, "body": "@Olaf - Oops, I have just corrected it. Thank you."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440002396, "post_id": 32100772, "comment_id": 52096641, "body": "While you can do this with bitmanipulation, it&#39;s annoying. Can you clarify whether SSE is allowed and if so which versions?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002453, "post_id": 32100772, "comment_id": 52096677, "body": "No, you have not. Please think it over first, then write it down."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002955, "post_id": 32100772, "comment_id": 52096945, "body": "@Olaf - Just imagine that 0xCD12 and 0x3456 are 16-bit characters stored in memory."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440003477, "post_id": 32100772, "comment_id": 52097214, "body": "there&#39;s an algorithm to check if &quot;a word has a byte equal to n&quot; here <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#ZeroInWord\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html#ZeroInWord</a>"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1440003486, "post_id": 32100772, "comment_id": 52097220, "body": "i am very interested in what function will behave differently out of the box in different architecture?"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440003500, "post_id": 32100772, "comment_id": 52097228, "body": "@harold - Since this is about bitwise manipulation (not about speed optimization), I think SSE is irrelevant here."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440003619, "post_id": 32100772, "comment_id": 52097303, "body": "@Aeoliyan sure, if you want it to be. You&#39;re the OP after all. But it wouldn&#39;t have been the first time that someone asked for a bithack but actually wanted a speed optimization."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1440003770, "post_id": 32100772, "comment_id": 52097386, "body": "i think you can try this: <code>(value &amp; iVal32) ^ value == 0</code> return <code>1</code> if it satisfies your requirement. and perform another time of <code>&lt;&lt;</code> to make sure this for higher bits."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440004074, "post_id": 32100772, "comment_id": 52097528, "body": "@L\u01b0uV\u0129nhPh&#250;c - Yes, your link is a good starting point."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440004586, "post_id": 32100772, "comment_id": 52097821, "body": "You can combine that check-for-zero with <code>x ^ (test * 0x00010001)</code> (that&#39;s 32bit, extend the obvious way)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1440004945, "post_id": 32100772, "comment_id": 52098001, "body": "Do it with bit shifting and AND operations. Don&#39;t over shift though: that&#39;s undefined behaviour."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1440005397, "post_id": 32100772, "comment_id": 52098312, "body": "Should the bit pattern be aligned on byte boundaries?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440006255, "post_id": 32100772, "comment_id": 52098803, "body": "your could use memcmp() in a loop, that starts with the first byte if the 32 or 64 bit memory entity and step forward one byte on each iteration of the loop and compare 2 bytes at a time.  Note: you may have to pay attention to the Endianness of the underlying architecture"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1440008626, "post_id": 32100772, "comment_id": 52100139, "body": "@DanielJour - See my update."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440008999, "post_id": 32100772, "comment_id": 52100343, "body": "@user3629249 - Yes, thanks for your suggestion, I agree <code>memcmp()</code> can be used. However, solutions to this question still have advantages to understand what is behind the scene."}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440059671, "post_id": 32102324, "comment_id": 52119687, "body": "@DavidSchwartz - Would you adapt your code to follow my latest update? Sorry for inconvenience. +1"}], "tags": [], "owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1440081049, "last_edit_date": 1440081049, "creation_date": 1440006651, "answer_id": 32102324, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32102324#32102324", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<pre><code>bool contains (uint32_t haystack, uint16_t needle)\n{\n    return ((haystack &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 16) &amp; 0xffff) == needle);\n}\n\nbool contains (uint64_t haystack, uint16_t needle)\n{\n    return ((haystack &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 16) &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 32) &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 48) &amp; 0xffff) == needle);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440059886, "post_id": 32102626, "comment_id": 52119794, "body": "@P_Hinker - See my latest update. Sorry for inconvenience. +1"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440089096, "post_id": 32102626, "comment_id": 52139619, "body": "@P_Hinker - I will upvote you later when my point is at least 15. It turns out that is the rule here."}], "tags": [], "owner": {"reputation": 300, "user_id": 5235902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88f854711e641c4544d4fa5503d9548?s=128&d=identicon&r=PG&f=1", "display_name": "P. Hinker", "link": "https://stackoverflow.com/users/5235902/p-hinker"}, "is_accepted": false, "score": 1, "last_activity_date": 1440088058, "last_edit_date": 1440088058, "creation_date": 1440007684, "answer_id": 32102626, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32102626#32102626", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<p>Not completely clear what the OP wants but given the description and subsequent comments, something along the lines of this :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdint.h&gt;\nusing namespace std;\n\nbool contains(uint16_t item, uint32_t source);\nbool contains(uint16_t item, uint64_t source);\n\nint main()\n{\n    uint32_t iVal32 = 0xABCD1234;\n    uint64_t iVal64 = 0xABCD12345678CABELL;\n\n    cout &lt;&lt; contains(0x1234, iVal32) &lt;&lt; endl;\n    cout &lt;&lt; contains(0xABCD, iVal32) &lt;&lt; endl;\n\n    cout &lt;&lt; contains(0xABCD, iVal64) &lt;&lt; endl;\n    cout &lt;&lt; contains(0x1234, iVal64) &lt;&lt; endl;\n    cout &lt;&lt; contains(0x5678, iVal64) &lt;&lt; endl;\n    cout &lt;&lt; contains(0xCABE, iVal64) &lt;&lt; endl;   \n    return 0;\n}\n\nbool contains(uint16_t item, uint32_t source)\n{\n    for (int i = 16 ; i &gt;= 0 ; i -= 16)\n    {\n        if (((source &lt;&lt; i) &gt;&gt; 16) == item)\n        {\n           return true;\n        }    \n    }\n    return false;\n}\n\nbool contains(uint16_t item, uint64_t source)\n{\n    for(int i = 48 ; i &gt;= 0 ; i -= 16)\n    {\n        if (((source &lt;&lt; i) &gt;&gt; 48) == item)\n        {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440010171, "post_id": 32102752, "comment_id": 52101124, "body": "Thank you, I&#39;ll test it, but the time now is already dawn in my country, so I have to sleep now. I&#39;ll come back soon. :-)"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440059737, "post_id": 32102752, "comment_id": 52119719, "body": "Would you adapt your code to follow my latest update? Sorry for inconvenience. +1"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440062842, "post_id": 32102752, "comment_id": 52121762, "body": "I am not sure if I fully understand what you mean. Do you get what you expect if you change <code>i+=4</code> to <code>i+=16</code>?"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440084691, "post_id": 32102752, "comment_id": 52137090, "body": "Yes, one word (16-bit) for each test, that was I meant. However, I think the pattern matching test should be from left to right instead. Perhaps, the <code>0xFFFF</code> should be changed to <code>0xFFFF0000</code>."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440085723, "post_id": 32102752, "comment_id": 52137732, "body": "Thank you very much. I will upvote you later when my points achieve 15. I accept David Schwartz&#39;s answer because he done it without a looping."}], "tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": false, "score": 1, "last_activity_date": 1440010295, "last_edit_date": 1440010295, "creation_date": 1440008122, "answer_id": 32102752, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32102752#32102752", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<p>Here is a possible solution for 32bit.\n<code>find_pos</code> returns the bit position of the 16bit value in the 32bit value,\nor <code>-1</code> if the 32bit value does not contain the 16bit value.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nuint32_t iVal32 = 0xABCD1234;\nuint64_t iVal64 = 0xABCD12345678CABE;\n\nint find_pos(uint32_t value, uint16_t pattern)\n{\n    int i;\n\n    for (i = 0; i &lt; 32; i+=4) {\n        uint32_t v = (value &amp; (0xFFFF &lt;&lt; i));\n        uint32_t p = (pattern &lt;&lt; i);\n        if (v == p)\n            return i;\n    }\n\n    return -1;\n}\n\nint main ()\n{\n    printf(\"i = %i\\n\", find_pos(iVal32, 0xCD12));\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>update:</strong></p>\n\n<p>Here is a possible solution for 32bit and 64bit, using a macro.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nuint32_t iVal32 = 0xABCD1234;\nuint64_t iVal64 = 0xABCD12345678CABE;\n\n#define find_pos(value, pattern, width)             \\\n({                                                  \\\n    int i;                                          \\\n    int found = 0;                                  \\\n                                                    \\\n    for (i = 0; i &lt; width; i+=4) {                  \\\n        typeof(value) v = (value &amp; (0xFFFF &lt;&lt; i));  \\\n        typeof(value) p = (pattern &lt;&lt; i);           \\\n        if (v == p) {                               \\\n            found = 1;                              \\\n            break;                                  \\\n        }                                           \\\n    }                                               \\\n                                                    \\\n    if (!found)                                     \\\n        i = -1;                                     \\\n    i;                                              \\\n})\n\n#define find_pos32(value, pattern) \\\n    find_pos(value, pattern, 32)\n\n#define find_pos64(value, pattern) \\\n    find_pos(value, pattern, 64)\n\nint main ()\n{\n    printf(\"i = %i\\n\", find_pos32(iVal32, 0xCD12));\n    printf(\"i = %i\\n\", find_pos64(iVal64, 0x678C));\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440128361, "post_id": 32123709, "comment_id": 52154693, "body": "I&#39;m amazed by your clever solution. By the way, instead of <code>return (h1 * h2) == 0;</code> I think <code>return (h1 &amp; h2) == 0;</code> should be faster, shouldn&#39;t it?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 1, "creation_date": 1440142741, "post_id": 32123709, "comment_id": 52160121, "body": "@Aeoliyan: It&#39;s faster but wrong. 1100 &amp; 0011 == 0000."}, {"owner": {"reputation": 523, "user_id": 1377697, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/782dfa617e9b47ef2995edfeb332f0b5?s=128&d=identicon&r=PG", "display_name": "warren", "link": "https://stackoverflow.com/users/1377697/warren"}, "edited": false, "score": 0, "creation_date": 1440180500, "post_id": 32123709, "comment_id": 52182889, "body": "Wouldn&#39;t return (h1==0)|(h2==0) be faster?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 523, "user_id": 1377697, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/782dfa617e9b47ef2995edfeb332f0b5?s=128&d=identicon&r=PG", "display_name": "warren", "link": "https://stackoverflow.com/users/1377697/warren"}, "edited": false, "score": 1, "creation_date": 1440188639, "post_id": 32123709, "comment_id": 52186824, "body": "@warren: That&#39;s three operations: two compares and an or. Although it&#39;s not unreasonable for the compiler to turn both into the same binary."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1440088634, "creation_date": 1440088634, "answer_id": 32123709, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32123709#32123709", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<p>A slight variation of David's answer, non-branching.</p>\n\n<pre><code>bool contains (uint32_t haystack, uint16_t needle)\n{\n    uint32_t h1 = (haystack ^ needle) &amp; 0xFFFF;\n    haystack &gt;&gt;= 16;\n    uint32_t h2 = haystack ^ needle; // No need for mask.\n    // If and only if needle was in haystack, h1 or h2 will now be 0\n    return (h1*h2) == 0;\n}\n</code></pre>\n\n<p>Two XOR's, one shift, one mask, one multiplication and a compare that's probably free. Only 3 registers needed. The obvious extension to x64 calculates <code>h1*h2*h3*h4</code> but it might be more efficient to calculate a running product, so we don't need registers for the 4 intermediate results. (A decent optimizer will also do this).</p>\n\n<p>Since there's no shortcut evaluation, this may sometimes take more instructions, but the lack of shortcut evaluation also means there's no branch. I'll bet that for string searching this is a net win. </p>\n\n<p>Going a bit off-topic, the question mentions x86. SSE is the logical option there, especially for 64 bits.</p>\n"}], "owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 2, "accepted_answer_id": 32102324, "answer_count": 4, "score": 0, "last_activity_date": 1440088634, "creation_date": 1440000922, "last_edit_date": 1440088324, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<h1>Questions</h1>\n\n<p>Consider the following 32-bit and 64-bit values:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>  uint32_t iVal32 = 0x AB CD 12 34;\n  uint64_t iVal64 = 0x AB CD 12 34 56 78 CA BE;\n</code></pre>\n\n<ol>\n<li>How to determine whether <code>iVal32</code> contains a certain 16-bit (word) value? <strike>Let's say <code>0xCD12</code>.</strike></li>\n<li>How to determine whether <code>iVal64</code> contains a certain 16-bit (word) value? <strike>Let's say <code>0x3456</code>.</strike></li>\n</ol>\n\n<h3>Update 1 (added later)</h3>\n\n<ul>\n<li><strike><code>0xCD12</code></strike> A word value that is to be checked might be anywhere in <code>iVal32</code> in every word boundary.</li>\n<li><strike><code>0x3456</code></strike> A word value that is to be checked might be anywhere in <code>iVal64</code> in every word boundary.</li>\n</ul>\n\n<h3>Update 2 (added later)</h3>\n\n<p>I admit a ridiculous mistake in the question. In my previous example, the word values to be checked were not in word boundaries in <code>iVal32</code> and <code>iVal64</code>. Therefore, my correction are:</p>\n\n<ul>\n<li>For <code>iVal32</code>, a word value to be checked can be either <code>0xABCD</code> or <code>0x1234</code>. Thus, for example, <code>0xCD12</code> shouldn't be found in <code>iVal32</code>.</li>\n<li>For <code>iVal64</code>, a word value to be checked can be one of the following: <code>0xABCD</code> or <code>0x1234</code> or <code>0x5678</code> or <code>0xCABE</code>. Thus, for example, <code>0xCD12</code> or <code>0x3456</code> or <code>0x78CA</code> shouldn't be found in <code>iVal64</code>.</li>\n</ul>\n\n<h1>Remarks</h1>\n\n<ul>\n<li>Solutions are intended to be used in a function that searches for a 16-bit character in a Unicode string. In x86, the function reads two characters at a time; and in x64, the function reads four characters at a time.</li>\n<li>I ask this because I noticed that the implementation of glibc <a href=\"https://github.com/lattera/glibc/blob/master/string/strchr.c\" rel=\"nofollow\">strchr()</a> (that works for 8-bit character) tries to test a longword at a time, but I didn't understand the code well.</li>\n</ul>\n"}, {"tags": ["c", "list", "struct"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "edited": false, "score": 0, "creation_date": 1440003079, "post_id": 32100377, "comment_id": 52097015, "body": "Your concepts doesn&#39;t seems to be clear, I would suggest you to watch some video lectures and clarify your concepts about dynamic memory allocation using malloc() or others and linked lists."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5220003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17cb601ae65a9c49a955bd0720f851e1?s=128&d=identicon&r=PG&f=1", "display_name": "Agnaroc ", "link": "https://stackoverflow.com/users/5220003/agnaroc"}, "edited": false, "score": 0, "creation_date": 1440000124, "post_id": 32100428, "comment_id": 52095397, "body": "What I don&#39;t understand: aren&#39;t both k and l pointers ? So if both point to the same location, wouldn&#39;t changing k or allocating memory to the same location result in l pointing to the same location with allocated memory ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 45, "user_id": 5220003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17cb601ae65a9c49a955bd0720f851e1?s=128&d=identicon&r=PG&f=1", "display_name": "Agnaroc ", "link": "https://stackoverflow.com/users/5220003/agnaroc"}, "edited": false, "score": 0, "creation_date": 1440000222, "post_id": 32100428, "comment_id": 52095469, "body": "At the first hand both <code>k</code> and <code>l</code> are <b>variables</b>. If you are assigning them a value, they will retain it unless you reassign it either directly, or by <b>dereferencing a pointer to them</b>, not the pointer having the same value."}, {"owner": {"reputation": 45, "user_id": 5220003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17cb601ae65a9c49a955bd0720f851e1?s=128&d=identicon&r=PG&f=1", "display_name": "Agnaroc ", "link": "https://stackoverflow.com/users/5220003/agnaroc"}, "edited": false, "score": 0, "creation_date": 1440006940, "post_id": 32100428, "comment_id": 52099144, "body": "@Eugene_Sh. Am I understanding it correctly: struct node *l is a variable and struct node *pl is a pointer to a struct node whereas int *p; is a pointer to an int ?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 45, "user_id": 5220003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17cb601ae65a9c49a955bd0720f851e1?s=128&d=identicon&r=PG&f=1", "display_name": "Agnaroc ", "link": "https://stackoverflow.com/users/5220003/agnaroc"}, "edited": false, "score": 0, "creation_date": 1440007569, "post_id": 32100428, "comment_id": 52099480, "body": "Both <code>l</code> and <code>pl</code> have the same type, which is pointer to <code>node</code>. <code>p</code> is a pointer to <code>int</code>. But a <code>pointer to &lt;type&gt;</code> is a type itself, so having an identifier of type <code>pointer to &lt;type&gt;</code> is making it variable of that type."}], "tags": [], "owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "is_accepted": true, "score": 5, "last_activity_date": 1439999887, "creation_date": 1439999887, "answer_id": 32100428, "question_id": 32100377, "link": "https://stackoverflow.com/questions/32100377/allocating-memory-to-a-struct-using-pointers/32100428#32100428", "title": "Allocating memory to a struct using pointers", "body": "<p>Let's take it apart. Look at the comments</p>\n\n<pre><code>struct node{\n    int d;\n    struct node * next;   \n};\n\nint main(){\n    struct node * l = 0;     // Now l = 0 (or NULL)\n    struct node * k = l;     // Now k=l=0\n    k = malloc(sizeof(struct node));   // Now k=&lt;some address allocated&gt;\n    /*\n    l-&gt;d = 8;                          // But l is still 0\n    */\n    return 0;\n}\n</code></pre>\n\n<p>So the commented code is trying to dereference a NULL pointer.</p>\n"}], "owner": {"reputation": 45, "user_id": 5220003, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/17cb601ae65a9c49a955bd0720f851e1?s=128&d=identicon&r=PG&f=1", "display_name": "Agnaroc ", "link": "https://stackoverflow.com/users/5220003/agnaroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 32100428, "answer_count": 1, "score": -1, "last_activity_date": 1440000859, "creation_date": 1439999732, "last_edit_date": 1440000859, "question_id": 32100377, "link": "https://stackoverflow.com/questions/32100377/allocating-memory-to-a-struct-using-pointers", "title": "Allocating memory to a struct using pointers", "body": "<p>I have the following linked list:</p>\n\n<pre><code>struct node {\n    int d;\n    struct node *next;   \n};\n\nint main()\n{\n    struct node *l = 0;\n    struct node *k = l;\n    k = malloc(sizeof(struct node));\n    /* l-&gt;d = 8; */\n    return 0;\n}\n</code></pre>\n\n<p>Why is the commented code wrong to use? I don't understand why the memory isn't allocated for the node that ``l points to since <code>k</code> points to the same node as <code>l</code> and I used the <code>k</code>-pointer to allocate memory for it.</p>\n"}, {"tags": ["c", "arrays", "int", "user-input", "fgets"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1439999668, "post_id": 32100250, "comment_id": 52095049, "body": "What are these quotes around  <code>&lt;</code> ???"}, {"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1439999926, "post_id": 32100250, "comment_id": 52095260, "body": "What exactly are you expecting from &#39;&lt;&#39; to do ??"}, {"owner": {"reputation": 11, "user_id": 5243885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db328745c06d0fd5329ba24c74fa29d?s=128&d=identicon&r=PG&f=1", "display_name": "Putridul", "link": "https://stackoverflow.com/users/5243885/putridul"}, "edited": false, "score": 0, "creation_date": 1440001291, "post_id": 32100250, "comment_id": 52095990, "body": "It was an error when posting the question, removed the quotes!"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1440002680, "post_id": 32100250, "comment_id": 52096809, "body": "@Putridul To mark a question resolved, you just need to accept an answer. There&#39;s no need to put [SOLVED] into the title of your question. Glad you found useful information!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5243885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db328745c06d0fd5329ba24c74fa29d?s=128&d=identicon&r=PG&f=1", "display_name": "Putridul", "link": "https://stackoverflow.com/users/5243885/putridul"}, "edited": false, "score": 0, "creation_date": 1440002370, "post_id": 32100397, "comment_id": 52096626, "body": "Thank you very much! I didn&#39;t scanf would work like that with spaces."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1439999790, "creation_date": 1439999790, "answer_id": 32100397, "question_id": 32100250, "link": "https://stackoverflow.com/questions/32100250/problems-with-sum-of-user-inputted-array-elements/32100397#32100397", "title": "Problems with sum of user-inputted array elements", "body": "<pre><code>for(i=0;i'&lt;'n;i++) // i&lt;n should be there not '&lt;'(as this wont work).\nscanf(\"%d\", &amp;a[i]);  \n</code></pre>\n\n<p>And this won't take input on separate lines until you press <code>enter</code> you can press <code>space</code> between numbers instead.</p>\n\n<p>And seeing size of your input you should use <code>long</code> or <code>long long</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5243885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db328745c06d0fd5329ba24c74fa29d?s=128&d=identicon&r=PG&f=1", "display_name": "Putridul", "link": "https://stackoverflow.com/users/5243885/putridul"}, "edited": false, "score": 0, "creation_date": 1440002584, "post_id": 32101127, "comment_id": 52096752, "body": "It did work when I tried it now, thank you very much! I had some problems understanding exactly how scanf works."}], "tags": [], "owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "is_accepted": true, "score": 0, "last_activity_date": 1440002308, "creation_date": 1440002308, "answer_id": 32101127, "question_id": 32100250, "link": "https://stackoverflow.com/questions/32100250/problems-with-sum-of-user-inputted-array-elements/32101127#32101127", "title": "Problems with sum of user-inputted array elements", "body": "<pre><code>scanf(\"%d\", &amp;n);\nfor (i=0; i&lt;n; i++) {\n    scanf(\"%d\", &amp;x);\n    sum += x;\n}\n</code></pre>\n\n<p>Doesn't work for you? Why?</p>\n"}], "owner": {"reputation": 11, "user_id": 5243885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db328745c06d0fd5329ba24c74fa29d?s=128&d=identicon&r=PG&f=1", "display_name": "Putridul", "link": "https://stackoverflow.com/users/5243885/putridul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 32101127, "answer_count": 2, "score": 0, "last_activity_date": 1440002641, "creation_date": 1439999397, "last_edit_date": 1440002641, "question_id": 32100250, "link": "https://stackoverflow.com/questions/32100250/problems-with-sum-of-user-inputted-array-elements", "title": "Problems with sum of user-inputted array elements", "body": "<p>I'd like to apologize for the long post, and mostly useless stuff in my post and code, but I'd like to be as clear as possible.</p>\n\n<p>My problem is a very basic one:  </p>\n\n<blockquote>\n  <p>You are given an array of integers of size N. You need to print the sum of the elements of the array. \n  The first line of the input consists of an integer N. The next line contains N space-separated integers describing the array.<br>\n  Sample input:  </p>\n</blockquote>\n\n<pre class=\"lang-none prettyprint-override\"><code>5  \n1000000001 1000000002 1000000003 1000000004 1000000005  \n</code></pre>\n\n<p>I usuallly ask for the n with a scanf, then do:</p>\n\n<pre><code>for(i=0;i&lt;n;i++)\n  scanf(\"%d\", &amp;a[i]);  \n</code></pre>\n\n<p>But that is for numbers on separate lines.<br>\nOr I could do something like</p>\n\n<pre><code>scanf(\"%d %d %d\", &amp;a[0], &amp;a[1], &amp;a[2]);\n</code></pre>\n\n<p>But I'd have to know how many elements there will be before the execution of the program.  </p>\n\n<p>So I found a function online, <code>parseString</code>, which I used to get each number as an element of an array of strings and then I converted them element by element into an array of ints in my main function.   </p>\n\n<p>Here's the code: <a href=\"http://imgur.com/erS0gYc\" rel=\"nofollow\">http://imgur.com/erS0gYc</a>  </p>\n\n<p>Which appeared to work, but when submitting the problem on www.hackerrank.com (A Very Big Sum), this appeared:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>In file included from /usr/include/stdio.h:937:0,\n                 from solution.c:3:\nIn function 'fgets',\n    inlined from 'main' at solution.c:42:3:\n/usr/include/x86_64-linux-gnu/bits/stdio2.h:261:2: warning: call to '__fgets_chk_warn' declared with attribute warning: fgets called with bigger size than length of destination buffer\n  return __fgets_chk_warn (__s, __bos (__s), __n, __stream);\n  ^\n</code></pre>\n\n<p>I don't exactly understand how <code>parseString</code> works, but I got it to the point where I could use it to convert the array of strings to an array of ints.<br>\nThe problem I understand hackerrank has, is with the buffer of the first fgets function.  </p>\n\n<p>Finally, I'd like to know what the easiest thing to do would be, to just get the space-separated numbers into an array.  </p>\n\n<p>Thank you very much!</p>\n"}, {"tags": ["c++", "c", "arrays", "pointers", "language-lawyer"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439999479, "post_id": 32100245, "comment_id": 52094910, "body": "What the... Why would the standard guys even <i>think</i> about such a monstrosity ?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439999747, "post_id": 32100245, "comment_id": 52095115, "body": "@Quentin That&#39;s kind of the point. They did not, they should not have to, and this shows there is problem with C and C++. The standards are written for particular examples, and they do not create general rules, and the committees have zero idea what the semantics of fundamental constructs is or should be (see unions, see type punning, see strict aliasing, see lifetime of non polymorphic objects in C++)."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1440000316, "post_id": 32100245, "comment_id": 52095520, "body": "This is making my head hurt - <code>past</code> and <code>val</code> <i>should</i> evaluate to the same value.  <code>a[0] + S</code> is outside the bounds of <code>a[0]</code>, but still within the bounds of <code>a</code>, so it should be a valid pointer.  But honestly, masking two pointer values together to get another pointer is a use case I&#39;ve never considered."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1440000481, "post_id": 32100245, "comment_id": 52095616, "body": "@JohnBode &quot;<i>This is making my head hurt</i>&quot; I hope so. My head was about to explode when I though of that, now I want everybody to have the same feelings."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1440003176, "post_id": 32100245, "comment_id": 52097056, "body": "Why do you think the standard does not consider your case? Why do you think unions, type punning, strict aliasing are problematic? If you think you understand something better than the standards committee, please provide a demonstration."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440003466, "post_id": 32100245, "comment_id": 52097208, "body": "@n.m. I understand that &quot;declared type&quot; is problematic and unlikely to help compiler writers. I understand that decades after publishing the first languages descriptions, <b>people are still fighting over fundamental issues of lifetimes, valid operations on pointers, allowed casts, allowed type punning...</b> For a language hyped as &quot;portable assembly&quot;, it sucks."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 7, "creation_date": 1440003474, "post_id": 32100245, "comment_id": 52097213, "body": "Could you add the reasoning that led you to believe that the standard committee should define what happens when you mash two pointers together ? Or are you just here to hate on C and C++ to no end ?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1440003670, "post_id": 32100245, "comment_id": 52097330, "body": "@curiousguy yes it is. But you deliberately went outside of what the langage defines. That&#39;s getting a bit tautologic."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440003823, "post_id": 32100245, "comment_id": 52097409, "body": "@curiousguy it&#39;s not a standard-compliant C program, because it relies on at least implementation-defined behaviour."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440003846, "post_id": 32100245, "comment_id": 52097423, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/87404/discussion-between-curiousguy-and-quentin\">continue this discussion in chat</a>."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440004148, "post_id": 32100245, "comment_id": 52097566, "body": "@n.m. f.ex. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_236.htm\" rel=\"nofollow noreferrer\">DR #236</a> <b>The interpretation of type based aliasing rule when applied to union objects or allocated objects.</b> (2006-05-08) &quot;<i>The current situation requires more consideration, but <b>general consensus seems</b> to be</i>&quot; &quot;<i>The committee does not think that the suggested wording is acceptable</i>&quot; etc. That&#39;s committee members not sure about the validity of very simple code."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440004387, "post_id": 32100245, "comment_id": 52097705, "body": "No demonstration so far, only vague references to some problems that may or may not exist or be serious enough to worry about them."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 2, "creation_date": 1440004971, "post_id": 32100245, "comment_id": 52098021, "body": "&quot;.. there is problem with C and C++. ... hyped as ...&quot; There&#39;s no problem. That is ongoing development of two (distinct btw) languages. They aren&#39;t hyped as portable assembly, they are as portable as you can currently get with out sacrificing the high level of abstraction both provide. Heck, at least they <b>are</b> standardised, to my knowledge this doesn&#39;t apply to Java, C#, Python, Ruby, Go, Rust, JavaScript (though there&#39;s ECMA), BASIC dialects, ..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440005046, "post_id": 32100245, "comment_id": 52098073, "body": "The C standard has defects, like many man-made complex constructs. The committee is well aware of (hopefully) most of them. These defects don&#39;t preclude us from building useful programs. Most programmers won&#39;t ever come across any of them in their life. I.e. there&#39;s no fundamental problem you are trying to make out of them."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440005348, "post_id": 32100245, "comment_id": 52098274, "body": "@n.m. Bull. Did you read the DR? Are you claiming that type punning, reading of not the active member of unions, don&#39;t happen?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440005659, "post_id": 32100245, "comment_id": 52098477, "body": "See <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n980.htm\" rel=\"nofollow noreferrer\">WG14 N980</a>? How can such features from the original (pre-ANSI) C specification can <i>not</i> be cast in stone?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1440005769, "post_id": 32100245, "comment_id": 52098535, "body": "@DanielJour &quot;<i>They aren&#39;t hyped as portable assembly</i>&quot; I believed they were. Both C and C++ are often used for the backend of compilers of high level languages. &quot;<i>Heck, at least they are standardised, to my knowledge this doesn&#39;t apply to Java</i>&quot; are you saying there is no Java specification?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440007003, "post_id": 32100245, "comment_id": 52099176, "body": "@n.m. and the current state of mind of C++ lawyers is absolutely worse: <a href=\"http://std-proposals.isocpp.narkive.com/WH2troiS/questions-on-n4430-core-issue-1776-replacement-of-class-objects-containing-reference-members\" rel=\"nofollow noreferrer\">Questions on N4430 (Core Issue 1776: Replacement of class objects containing reference members)</a> They are essentially killing C/C++."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1440007037, "post_id": 32100245, "comment_id": 52099189, "body": "@DanielJour: C was invented to serve as a form of semi-portable assembly, with a stronger focus on the portability of the <i>language itself</i> than of <i>code written in the language</i>.  On many platforms, it is still the best such language.  Unfortunately, some people have lost sight of the fact that one of the reasons various actions invoke Undefined Behavior was that different platforms had different contradictory <i>but sometimes useful</i> behaviors.  If an application needed to print the arithmetic value of <code>x+y</code> when it was representable as <code>int</code> and never output an incorrect value, but..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440007161, "post_id": 32100245, "comment_id": 52099246, "body": "...having the program terminate when given invalid input would be acceptable, and if the program was running on a platform which traps integer overflow, <code>printf(&quot;%d&quot;,x+y);</code> would satisfy the requirements.  If a different program running on a platform where overflow yields two&#39;s-complement reduction had a requirement that overflow must not disrupt program behavior, but could output any arbitrary value, the same code would be useable there.  Mandating any particular overflow behavior would have required one of those programs to be longer and more complicated."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440007349, "post_id": 32100245, "comment_id": 52099369, "body": "@supercat C should have 2complement types or operators."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440007858, "post_id": 32100245, "comment_id": 52099647, "body": "@curiousguy: For most applications, I would posit that the most optimizer-friendly normative specification for overflow would be to have it yield a &quot;partially indeterminate value&quot;, with the rule that every rvalue conversion of a partially-indeterminate value may (independently) yield any number which is congruent to arithmetical value of the overflowing expression, mod the number of values of the type, but with an additional rule that an <i>explicit</i> cast to <code>int</code> must perform a two&#39;s-complement reduction, and possibly with an additional rule which would permit <code>for</code> loops to early-exit..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1440007936, "post_id": 32100245, "comment_id": 52099691, "body": "Yes I did read it. Why should I care one way or another? This is an awful code that has no place in a real-life program. Let language lawyers discuss its validity, meanwhile we mere mortals shall steer clear of such constructs regardless. If you think issues like this are killing C and C++, you need to think harder."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440008089, "post_id": 32100245, "comment_id": 52099778, "body": "@n.m. What is an awful code?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440008127, "post_id": 32100245, "comment_id": 52099799, "body": "...in case of overflow (I&#39;d limit the early-exit to <code>for</code> loops only, so that code can indicate whether or not early-exit is acceptable by its choice of loop type).  Such rules would not only allow the vast majority of the useful optimizations would be made possible by having <code>int</code> overflow be undefined, but more importantly would allow programmers to safely write code that could be optimized in such fashion."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1440008489, "post_id": 32100245, "comment_id": 52100043, "body": "@n.m.: The fundamental question which is embodied by the code is the extent to which C will continue to abide by one of its fundamental principles--that every object is represented by a sequence of unsigned character values. While useful optimizations may be facilitated by allowing objects to be invisibly tagged with other information that compilers may use to make inferences regarding their usage, such tagging may in some cases force programmers to write code that is less efficient than they could have done otherwise, and it may not always be possible for optimizers to remove such redundancy."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440012601, "post_id": 32100245, "comment_id": 52102580, "body": "@supercat An implementation is allowed to tag bytes however it wishes for whatever purposes, always was, no problem with that. Are you saying the strict aliasing rules violate this principle? I fail to see how. If strict aliasing rules inhibit some potential optimisations or coding idioms, I have no problem with that, cost/benefit-wise. I just can&#39;t see what it has to do with the fundamental principle in question."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1440013943, "post_id": 32100245, "comment_id": 52103422, "body": "@n.m.: Strict aliasing went against the fundamental principle of C; the performance advantages may be seen as more important than that principle, but that doesn&#39;t make the principle worthless. For any sequence of bytes and type, there is at most one object that can be identified by any pointer of that type whose representation matches that sequence.  I would suggest that if a sequence of unrelated bytes are assembled into a pointer, and if any pointer could exist whose representation matches that sequence and which could be used in a particular way, then the pointer made from the sequence..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440014401, "post_id": 32100245, "comment_id": 52103687, "body": "...should be likewise usable.  Such cases are rare, and the cost of lost optimization opportunities in them would pale in comparison to the cost of errant program behavior caused by &quot;optimizations&quot; that make a program violate its requirements."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440014664, "post_id": 32100245, "comment_id": 52103828, "body": "@supercat Again I don&#39;t see where any fundamental principles are violated by strict aliasing. Could you please point me to a reliable source that names such a principle and describes why it is broken by strict aliases? I couldn&#39;t find any. You can assemble a valid pointer out of bytes, no problem with that; how does it relate to strict aliasing?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440037245, "post_id": 32100245, "comment_id": 52111209, "body": "@supercat: C was <i>not</i> invented to be a semi-portable assembly; it was invented to be a <i>high-level language</i> for <i>low-level (systems) programming</i>.  There&#39;s a difference."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440057281, "post_id": 32100245, "comment_id": 52118250, "body": "@n.m. Everybody has a different interpretation of strict aliasing."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440062111, "post_id": 32100245, "comment_id": 52121254, "body": "That&#39;s an interesting observation. Is the standard so much ambiguous on this? Can you point out the passage you draw your interpretation from?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1440078042, "post_id": 32100245, "comment_id": 52132134, "body": "@JohnBode: There are different shades of meaning, but I&#39;d posit that a key aspect of C&#39;s success for systems programming as well as many other purposes stems from the fact that operations which could be performed by some but not all hardware platforms (e.g. relational comparisons of unrelated pointers) would be supported by compilers for platforms where they were supported."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440234406, "post_id": 32100245, "comment_id": 52197006, "body": "Downvoting because you ask a question that is very specific to what the standard says but you don&#39;t specify if you mean C or C++. There is likely different behaviour between these two languages in this particular case. When do you understand that you should tell us what language your question is about?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440235941, "post_id": 32100245, "comment_id": 52197399, "body": "@FUZxxl The tags tell the answer."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440242687, "post_id": 32100245, "comment_id": 52199233, "body": "@FUZxxl Next time I&#39;ll ask TWO word for word identical questions, one for C, one for C++ (not)."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440242884, "post_id": 32100245, "comment_id": 52199293, "body": "@Quentin I hate broken tools. To no end."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1440243184, "post_id": 32100245, "comment_id": 52199384, "body": "@curiousguy Yeah, please do so. Then I can answer one for C and the other for C++."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440244252, "post_id": 32100245, "comment_id": 52199729, "body": "@FUZxxl Really? It&#39;s the officially recommended way?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1440244598, "post_id": 32100245, "comment_id": 52199826, "body": "@curiousguy Yes. You ask the same question for two different languages. The point of this rule is that many people tag-spam C and C++ to attract more viewers but then aren&#39;t interested in the C answer because they program in C++ or whatever. This is why I&#39;m pretty hostile towards questions that are tagged both C and C++. Only questions asking for the differences or the interaction between C and C++ should be tagged with both."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1510211253, "post_id": 32100245, "comment_id": 81340356, "body": "&quot;<i>Why would the standard guys even think about such a monstrosity ?</i>&quot; That cases that nobody thought about are not covered by the specification proves that it is <b>not</b> a specification. The std is a glorified tutorial."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1528335824, "post_id": 32100245, "comment_id": 88471515, "body": "@Quentin &quot;<i>Or are you just here to hate on C and C++ to no end ?</i>&quot; I hate that C/C++ pretend to be ultra low level and high level at the same time, because it&#39;s a lie; you cannot do both and the deck of cards falls down as I have proved again and again. High level as in Java implies that many things are opaque for the user, esp. pointers. Low level means that the translation is predictable and not optimized except for trivial simplifications. Even the C++ committee &quot;hates&quot; the C semantics and its union visibility rules. They think it&#39;s BS, so it isn&#39;t just me."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1528336055, "post_id": 32100245, "comment_id": 88471576, "body": "As a rule, you cannot specify a high level semantic on a type and then expose all its internal components. It doesn&#39;t go together, as any optimisation would break when the internals are poked by the user. But the C/C++ pointers aren&#39;t high level, as they are just numbers: you can convert to from numbers with casts, with printf/scanf, with iostream, with volatile pointers. If it&#39;s just a number it CANNOT have the high level semantics and optimisations are limited. I understand that what I saw is very hurtful for the people who used to think that the optimisations of pointers are sound."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1528336616, "post_id": 32100245, "comment_id": 88471752, "body": "&quot;(...), pointer types, (...) are collectively called scalar types () Cv-unqualified scalar types, (...) are collectively called trivially copyable types.&quot; &quot;For trivially copyable types, <b>the value representation is a set of bits in the object representation that determines a value</b>, which is one discrete element of an implementation-defined set of values.&quot;  [basic.types]"}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440006259, "post_id": 32100749, "comment_id": 52098805, "body": "So can I use <code>a[0][size]</code> to refer to <code>a[1][0]</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440006951, "post_id": 32100749, "comment_id": 52099153, "body": "@curiousguy Yes. <code>&amp;a[0][size]</code> is the address <code>a + size * sizeof(T)</code>. <code>&amp;a[1][0]</code> is the address <code>a + 1 * (size * sizeof(T)) + 0</code>. Those are the same address, so when you dereference it you get the same value."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440007177, "post_id": 32100749, "comment_id": 52099257, "body": "<i>If the result points one past the last element of the array object, it shall not be used as the operand of a unary <code>*</code> operator that is evaluated</i> (C99 6.5.6 Additive operators). C and C++ seem to diverge here."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440007314, "post_id": 32100749, "comment_id": 52099352, "body": "@n.m. But it&#39;s not one past the end of the <i>array object</i>. There is one object: <code>a</code>. One past the end would be <code>&amp;a[1][size]</code> (or <code>&amp;a[2][0]</code>)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440008158, "post_id": 32100749, "comment_id": 52099815, "body": "@Barry <code>a[0]</code> and <code>a[1]</code> are array objects as well."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440008962, "post_id": 32100749, "comment_id": 52100325, "body": "@Barry: The declaration <code>int a[3][5]</code> creates an object <code>a</code> which contains three smaller objects, each of which is an array of five integers; it also contains, superimposed on that, an array of 15 integers.  Using <code>a</code> directly as an rvalue yields a pointer to the first of three five-element inner arrays, and using <code>a[0]</code> as an rvalue will yield a pointer to the first int within that five-element inner array.  Casting <code>a</code> to <code>int*</code> or <code>int[]</code> will yield a pointer to the first element of the superimposed 15-element array.  Compilers are not required to keep track of how pointers are derived..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1440009138, "post_id": 32100749, "comment_id": 52100444, "body": "...but they are allowed to do so.  The pointers <code>a[0]+5</code> and <code>a[1]</code> will compare equal, but the former is a one-past pointer for <code>a[0]</code> and the second is a pointer to the first element of <code>a[1]</code>.  It would be helpful if the Standard were to mandate that certain actions on a pointer must cause the compiler to &quot;forget about&quot; any restrictions it might have had on its behavior, but it&#39;s rather vague on such issues."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1488748768, "post_id": 32100749, "comment_id": 72357205, "body": "@T.C. Is the issue there that now the fact that the array and its first element aren&#39;t interconvertible? I&#39;m still not sure I understand that change well enough to explain it."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1488908438, "post_id": 32100749, "comment_id": 72435331, "body": "Basically, this sentence is not correct anymore. A pointer value is now defined abstractly to be one of 1) invalid, 2) null, 3) &quot;pointer to X&quot;, 4) &quot;pointer past the end of X&quot;. Even if a type-3 pointer and type-4 pointer represent the same address, the latter is still not considered to point to the object pointed to by the former."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1549105955, "post_id": 32100749, "comment_id": 95790676, "body": "I don&#39;t think that the old wording in [basic.compound] was not defective and supposed to be taken literally. Some time ago, an object was a region of storage, but this have never been true."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 9, "last_activity_date": 1488909496, "last_edit_date": 1488909496, "creation_date": 1440000851, "answer_id": 32100749, "question_id": 32100245, "link": "https://stackoverflow.com/questions/32100245/dereferencing-a-50-out-of-bound-pointer-array-of-array/32100749#32100749", "title": "Dereferencing a 50% out of bound pointer (array of array)", "body": "<p>In [basic.compound]:</p>\n\n<blockquote>\n  <p>If an object of type <code>T</code> is located at an address <code>A</code>, a pointer of type <em>cv</em> <code>T*</code> whose value is the\n  address <code>A</code> is said to point to that object, <strong>regardless of how the value was obtained</strong>.</p>\n</blockquote>\n\n<p><code>past</code> and <code>val</code> have the same address, so they point to the same object. It doesn't matter that one is \"one past the end\" of the first row and the second is the first element of the second row. There is a valid object at that address, so everything here is perfectly reasonable. </p>\n\n<hr />\n\n<p>In C++17, as of <a href=\"http://wg21.link/p0137\" rel=\"nofollow noreferrer\">P0137</a>, this changes a lot. Now, [basic.compound] defines pointers as:</p>\n\n<blockquote>\n  <p>Every value of pointer type is one of the following:<br>\n  \u2014 a <em>pointer to</em> an object or function (the pointer is said to <em>point</em> to the object or function), or<br>\n  \u2014 <em>a pointer past the end of</em> an object (5.7), or<br>\n  \u2014 the <em>null pointer value</em> (4.11) for that type, or<br>\n  \u2014 an <em>invalid pointer value</em>.</p>\n</blockquote>\n\n<p>So now, <code>past</code> is a value of the 2nd type (a pointer past the end of), but <code>val</code> is a value of the 1st type (a pointer to). Those are different categories of values and are not comparable:</p>\n\n<blockquote>\n  <p>A value of a pointer type that is a pointer to or past the end of an object represents the address of the first byte in memory (1.7) occupied by the object or the first byte in memory after the end of the storage occupied by the object, respectively. <em>[ Note:</em> A pointer past the end of an object (5.7) is not considered to point to an unrelated object of the object\u2019s type that might be located at that address. A pointer value becomes invalid when the storage it denotes reaches the end of its storage duration; see 3.7. <em>\u2014end note ]</em></p>\n</blockquote>\n\n<p><code>past</code> doesn't point to something, so viewing its contents as if it were the same as <code>val</code> is no longer meaningful. </p>\n"}, {"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440002407, "post_id": 32100960, "comment_id": 52096650, "body": "&quot;<i>Valid pointer values are obtained</i> (...)&quot; Are you saying that I can&#39;t use <code>memcpy</code> on a pointer in a std conforming program?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1440002837, "post_id": 32100960, "comment_id": 52096883, "body": "@curiousguy: For copying the contents of a valid pointer value to another object <i>of the same type</i>, sure, although <code>p = q;</code> is just as easy.  If the types are not compatible and you try to use the copied-to pointer, then the behavior will be undefined (meaning, it may work just fine, it may crash outright, it may cause a runtime error later on, etc.).  Pointers to different types don&#39;t have to have the same size or representation."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440005226, "post_id": 32100960, "comment_id": 52098184, "body": "Yes: only compatible types in my program (only <code>int*</code>)."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1440001644, "creation_date": 1440001644, "answer_id": 32100960, "question_id": 32100245, "link": "https://stackoverflow.com/questions/32100245/dereferencing-a-50-out-of-bound-pointer-array-of-array/32100960#32100960", "title": "Dereferencing a 50% out of bound pointer (array of array)", "body": "<blockquote>\n  <p>What I really want to understand is: what does \"p points to object x\" means.</p>\n</blockquote>\n\n<p>The object <code>p</code> contains a value that corresponds to the location of the object <code>x</code> in memory.  </p>\n\n<p>That's it.  That's all it means.  You seem determined to make this more complicated than it needs to be.  </p>\n\n<p>Pointer types are not arithmetic types, and aren't meant to be arbitrarily munged like that.  Valid pointer values are obtained by using the unary <code>&amp;</code> operator on an lvalue, using an array expression that isn't the operand of the <code>sizeof</code> or unary <code>&amp;</code> operator, or calling a library function that returns a pointer value.  </p>\n\n<p><em>Everything</em> beyond that (size, representation, physical vs. virtual, etc.) is an <strong>implementation detail</strong>, and implementations vary <em>widely</em> when it comes to representing addresses.  That's why the standards don't say <em>anything</em> about what to expect when you play Dr. Frankenstein with pointer values.  </p>\n\n<p>If you are intimately familiar with your platform's addressing conventions (both virtual and physical), and you know how your implementation lays out items in memory and how it represents pointer types, and you have a <em>valid use case</em> for hacking your pointer values this way, then hack away to your heart's content - neither language standard has anything to say on the subject.  </p>\n"}], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1488909496, "creation_date": 1439999383, "last_edit_date": 1495542313, "question_id": 32100245, "link": "https://stackoverflow.com/questions/32100245/dereferencing-a-50-out-of-bound-pointer-array-of-array", "title": "Dereferencing a 50% out of bound pointer (array of array)", "body": "<p>This is a new question in my \"I don't understand pointers in C and C++\" collection. </p>\n\n<p>If I mix the bits of two pointers with equal values (pointing to the same memory address), that happen to have exactly the same bit representation, when one is dereferenceable and one is one past the end, what does the standard say should happen?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n\n// required: a == b\n// returns a copy of both a and b into dest \n// (half of the bytes of either pointers)\nint *copy2to1 (int *a, int *b) {\n    // check input: \n    // not only the pointers must be equal\n    assert (a == b);\n    // also the representation must match exactly\n    int *dest;\n    size_t s = sizeof(dest);\n    assert(memcmp(&amp;a, &amp;b, s) == 0); \n\n    // copy a and b into dest:\n    // on \"exotic\" architectures, size does't have to be dividable by 2\n    size_t half = s/2; // = floor(s/2), \n    char *pa = (char*)&amp;a, *pb = (char*)&amp;b, *pd = (char*)&amp;dest;\n\n    // copy half of a into dest:\n    memcpy (pd, pa, half);\n    // copy half of b into dest:\n    memcpy (pd+half, pb+half, s-half); // s-half = ceil(s/2)\n\n    //printf (\"a:%p b:%p dest:%p \\n\", a, b, dest);    \n\n    // check result\n    assert(memcmp(&amp;dest, &amp;a, s) == 0);\n    assert(memcmp(&amp;dest, &amp;b, s) == 0);\n\n    return dest;\n}\n\n#define S 1 // size of inner array\n\nint main(void) {\n    int a[2][S] = {{1},{2}};\n    int *past = a[0] + S, // one past the end of inner array a[0]\n        *val = &amp;a[1][0], // valid dereferenceable pointer\n        *mix = copy2to1 (past, val);\n    #define PRINT(x) printf (\"%s=%p, *%s=%d\\n\",#x,x,#x,*x)\n    PRINT(past);\n    PRINT(mix);\n    PRINT(val);\n    return 0;\n}\n</code></pre>\n\n<p>What I really want to understand is: <strong>what does \"p points to object x\" mean?</strong></p>\n\n<p>SEE ALSO</p>\n\n<p>This question is a better version of my previous questions about array of arrays: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/32048698/963864\">Is memcpy of a pointer the same as assignment?</a> which is a variation on my other question:</li>\n<li><a href=\"https://stackoverflow.com/q/32043795/963864\">Dereferencing an out of bound pointer that contains the address of an object (array of array)</a> </li>\n</ul>\n\n<p>and other related questions about pointer validity:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/32045888/963864\">Are pointer variables just integers with some operators or are they &quot;mystical&quot;?</a></li>\n<li>and the C++ question: <a href=\"https://stackoverflow.com/q/32043314/963864\">Overwriting an object with an object of same type</a></li>\n</ul>\n"}, {"tags": ["c++", "c", "linux", "nginx"], "owner": {"reputation": 11, "user_id": 4441773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd79f8f2409af6926ee1f4931d3cd69b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4441773/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439999309, "creation_date": 1439999309, "question_id": 32100222, "link": "https://stackoverflow.com/questions/32100222/use-web-service-in-nginx-configuration-file", "title": "Use Web Service In Nginx configuration File", "body": "<p>See this configuration</p>\n\n<pre><code>location ~* ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)(.*)$ {\nroot /home/GodOFWar/public_html/;\nsecure_link $1,$2;\nsecure_link_md5 oH4fJ4KiON6sRT5tXDC1$3$2;\nif ($secure_link = \"\") {\nreturn 403;\n}\nif ($secure_link = \"0\") {\nreturn 403;\n}\nrewrite ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)/(.*)$ /$3 break;\n}\n</code></pre>\n\n<p>After the token and expiry time are checked (before rewrite), I want to call a module with the operation that the  token and user IP are sent to the web service; if the output of the web service is True, the file is downloaded, and if it is False, a Username/password is received and sent to the web service as in Http Auth Basic.\nIf the output of the web service is True, the file is downloaded, and if it is False, error 404 is given</p>\n\n<p>For Example :</p>\n\n<p><a href=\"http://www.example.com/dl/GghBgdpQluCkx17nbBY29w/1440849227/user/John/Files/Video.Mp4\" rel=\"nofollow\">http://www.example.com/dl/GghBgdpQluCkx17nbBY29w/1440849227/user/John/Files/Video.Mp4</a></p>\n\n<pre><code>/*\n  * After the token and expiry time are checked\n  * Token And user IP are Sent to the web service :\n  * WS : http://www.example.com/checkToken/GghBgdpQluCkx17nbBY29w/52.152.62.145\n*/\nif(True) {\n  rewrite ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)/(.*)$ /$3 break;\n}\nelse {\n    /*\n     * a Username/password is received and sent to the web service   similar Http Auth          \n      Module.\n     * WS : http://www.example.com/checkUser/GodOfWar/123456\n    */\n    if(True) {\n      rewrite ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)/(.*)$ /$3 break;\n    }\n    else {\n        return 404;\n    }\n}\n</code></pre>\n\n<p>Please help me to solve the problem</p>\n"}, {"tags": ["c", "java-native-interface", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1440252535, "post_id": 32100157, "comment_id": 52202172, "body": "What you do with cases like this depends entirely on the semantics of the C function and the desired semantics for your Java. Does this function create a new instance of my_struct by any chance and store it in the pointer pointed to by example? Most likely you&#39;re looking at the exact same usage scenario as my answer here: <a href=\"http://stackoverflow.com/a/12767656/168175\">stackoverflow.com/a/12767656/168175</a>"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1440253198, "post_id": 32100157, "comment_id": 52202321, "body": "Actually <a href=\"http://stackoverflow.com/a/14427814/168175\">stackoverflow.com/a/14427814/168175</a> or <a href=\"http://stackoverflow.com/a/30360180/168175\">stackoverflow.com/a/30360180/168175</a> might be better examples"}], "owner": {"reputation": 11, "user_id": 5244125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cadac479d827d73c79f75c9438de52b6?s=128&d=identicon&r=PG&f=1", "display_name": "coderror", "link": "https://stackoverflow.com/users/5244125/coderror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440000026, "creation_date": 1439999114, "last_edit_date": 1440000026, "question_id": 32100157, "link": "https://stackoverflow.com/questions/32100157/dealing-with-structure-double-pointers-in-swig", "title": "Dealing with structure double pointers in swig", "body": "<p>I have a function in C which takes in a double pointer to a typedef struct as an argument. say for example </p>\n\n<pre><code>void func (my_struct ** example){...};\n</code></pre>\n\n<p>When I am using swig to generate the corresponding code in java, it is generating a SWIGTYPE_p_p_my_struct class. I wanted to know how to access the elements of the struct using this class, and instantiate an object of this class. Also, what do I need to include in the interface file.</p>\n\n<p>Currently I am using the below line at the end of the interface file - </p>\n\n<pre><code>%pointer_functions(my_struct, my_struct_p);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 1, "creation_date": 1439999745, "post_id": 32100071, "comment_id": 52095112, "body": "you do not need to cast malloc, its return type is void* and malloc(sizeof(char) * 5) is the same as malloc(sizeof(1) * 5), anyway you need at least 6 and not 5."}], "answers": [{"comments": [{"owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "reply_to_user": {"reputation": 4739, "user_id": 4745612, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1b8f0eb3ff209075ac07aabc64d2bde4?s=128&d=identicon&r=PG&f=1", "display_name": "Michi", "link": "https://stackoverflow.com/users/4745612/michi"}, "edited": false, "score": 0, "creation_date": 1440000116, "post_id": 32100255, "comment_id": 52095392, "body": "@Michi I don&#39;t normally. It was a copy-paste error from the question."}], "tags": [], "owner": {"reputation": 5694, "user_id": 1552737, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfC6P.jpg?s=128&g=1", "display_name": "IKavanagh", "link": "https://stackoverflow.com/users/1552737/ikavanagh"}, "is_accepted": false, "score": 3, "last_activity_date": 1440000082, "last_edit_date": 1440000082, "creation_date": 1439999416, "answer_id": 32100255, "question_id": 32100071, "link": "https://stackoverflow.com/questions/32100071/error-when-using-a-structure-with-an-array-of-chars-in-c/32100255#32100255", "title": "Error when using a structure with an array of chars in C", "body": "<p>You haven't <strong>null-terminated</strong> your 'string' <code>b-&gt;a.x</code> so <code>printf(\"x: %s\\n\", b-&gt;a.x);</code> reads past the end of the allocated memory which causes the error you are getting in <code>valgrind</code>.</p>\n\n<p>You can fix it by changing</p>\n\n<pre><code>b-&gt;a.x = (char *) malloc(sizeof(char) * 5);\n  printf(\"addres in f %p: \\n\", b-&gt;a.x);\n\n  for(i = 0; i &lt; 5; i++)\n    b-&gt;a.x[i] = 'a';\n</code></pre>\n\n<p>to </p>\n\n<pre><code>b-&gt;a.x = malloc(6 * sizeof b-&gt;a.x);\nprintf(\"address in f %p: \\n\", b-&gt;a.x);\n\nfor(i = 0; i &lt; 5; i++)\n    b-&gt;a.x[i] = 'a';\nb-&gt;a.x[i] = '\\0';\n</code></pre>\n\n<p>Here I've increased the size of the dynamically allocated block of memory to <strong>6</strong> and I've explicitly <strong>null-terminated</strong> the 'string' with <code>b-&gt;a.x[i] = '\\0';</code>. <strong><code>\\0</code></strong> is used to <strong>null-terminate</strong> strings in C.</p>\n\n<hr>\n\n<p><strong>Note</strong>: As pointed out by @<a href=\"https://stackoverflow.com/users/4745612/michi\">Michi</a> in the comments. In C there is no need to cast the result of <code>malloc()</code>.</p>\n\n<p>I've also rewritten <code>sizeof(char)</code> to <code>sizeof b-&gt;a.x</code> as it is better for portability in case you change the type of <code>b-&gt;a.x</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 5244097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1fa6742b56f668acb0f14e47bbcea0b?s=128&d=identicon&r=PG&f=1", "display_name": "user5244097", "link": "https://stackoverflow.com/users/5244097/user5244097"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1440000082, "creation_date": 1439998889, "question_id": 32100071, "link": "https://stackoverflow.com/questions/32100071/error-when-using-a-structure-with-an-array-of-chars-in-c", "title": "Error when using a structure with an array of chars in C", "body": "<p>I have a struct that contains an array of chars and another struct that has this struct. I passed it by reference to a function that initializes the array. Then, I call a function to print and free the array.</p>\n\n<p>Please help me, what is wrong with this program?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct {\n  char *x;\n  double y;\n} A;\n\ntypedef struct {\n  A a;\n  int w;\n} B;\n\nvoid f(B *b) {\n  int i;\n\n  b-&gt;w = 5;\n  b-&gt;a.x = (char *) malloc(sizeof(char) * 5);\n  printf(\"addres in f %p: \\n\", b-&gt;a.x);\n\n  for(i = 0; i &lt; 5; i++)\n    b-&gt;a.x[i] = 'a';\n\n  b-&gt;a.y = 20;\n}\n\nvoid p(B *b) {\n  int i;\n\n  printf(\"w: %d\\n\", b-&gt;w);\n  printf(\"addres in p %p: \\n\", b-&gt;a.x);\n  printf(\"x: %s\\n\", b-&gt;a.x);\n  printf(\"y: %f\\n\", b-&gt;a.y);\n  free(b-&gt;a.x);\n}\n\nint main(int argc, char **argv) {\n  B b;\n\n  f(&amp;b);\n  p(&amp;b);\n\n  return 0;\n}\n</code></pre>\n\n<p>When I run with valgrind, it occurs the following:</p>\n\n<pre><code>==28053== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 6 from 2)\n==28053== \n==28053== 1 errors in context 1 of 1:\n==28053== Invalid read of size 1\n==28053==    at 0x3A03E489D7: vfprintf (in /lib64/libc-2.10.1.so)\n==28053==    by 0x3A03E4FB49: printf (in /lib64/libc-2.10.1.so)\n==28053==    by 0x400633: p (test_struct.c:33)\n==28053==    by 0x400686: main (test_struct.c:43)\n==28053==  Address 0x4c20035 is 0 bytes after a block of size 5 alloc'd\n==28053==    at 0x4A0763E: malloc (vg_replace_malloc.c:207)\n==28053==    by 0x400574: f (test_struct.c:19)\n==28053==    by 0x40067A: main (test_struct.c:42)\n</code></pre>\n\n<p>and the output:</p>\n\n<pre><code>addres in f 0x16b4010: \nw: 5\naddres in p 0x16b4010: \nx: aaaaa\ny: 20.000000\n</code></pre>\n\n<p>Thanks,\nhg</p>\n"}, {"tags": ["c", "size", "padding", "memory-alignment"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1439999029, "post_id": 32100031, "comment_id": 52094578, "body": "Optimization usually, reading data on a CPU native word boundary might be quicker on some platforms than reading unaligned data (like having to read two words and mask out the wanted word if the data is unaligned)."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 1, "creation_date": 1439999516, "post_id": 32100031, "comment_id": 52094938, "body": "Put a different way, this is a software specification that is not for the direct benefit of software. Rather, it&#39;s to cooperate with hardware which, most of the time, is either better with such alignment or in some extreme cases, will crash (throw a hardware exception which software must deal with or crash) if used without such alignment."}, {"owner": {"reputation": 944, "user_id": 1518588, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0dc57ef6856b371529d1db038cb2f358?s=128&d=identicon&r=PG", "display_name": "LP_", "link": "https://stackoverflow.com/users/1518588/lp"}, "edited": false, "score": 0, "creation_date": 1439999803, "post_id": 32100031, "comment_id": 52095160, "body": "Note that I am never talking about not respecting alignment constraints."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1440005359, "post_id": 32100031, "comment_id": 52098288, "body": "If the value of <code>sizeof(A)</code> cannot be guaranteed to be same whether the object is in an array, in another <code>struct</code>, or by itself, I can see problems in pointer arithmetic and when allocating memory using <code>malloc</code>."}], "answers": [{"comments": [{"owner": {"reputation": 944, "user_id": 1518588, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0dc57ef6856b371529d1db038cb2f358?s=128&d=identicon&r=PG", "display_name": "LP_", "link": "https://stackoverflow.com/users/1518588/lp"}, "edited": false, "score": 0, "creation_date": 1440076644, "post_id": 32102093, "comment_id": 52131003, "body": "In my idea, the <code>sizeof</code> <b>operator</b> would always return the real size (not the padded size), thus it would not need to be contextual. And AFAIK you need not zero-out padding bits (do C standards say anything about that?), so you could use the <code>memset</code> safely inside <code>zero_A</code>.  The only real change that would be done is when adding 1 to an <code>A*</code> pointer: it would need to add the <i>padded size</i> to the pointer value (call it <code>psizeof(T)</code>). Now I realize this would not work to iterate on a bunch of contiguous fields of the same type in a struct. Maybe the C standard require that to be possible?"}], "tags": [], "owner": {"reputation": 5273, "user_id": 1430833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a754beedb3a29fe1ddfc28e900e33f2?s=128&d=identicon&r=PG", "display_name": "sfstewman", "link": "https://stackoverflow.com/users/1430833/sfstewman"}, "is_accepted": false, "score": 1, "last_activity_date": 1440005812, "creation_date": 1440005812, "answer_id": 32102093, "question_id": 32100031, "link": "https://stackoverflow.com/questions/32100031/why-should-a-structs-size-reflect-its-alignment/32102093#32102093", "title": "Why should a struct&#39;s size reflect its alignment?", "body": "<p>In each translation unit of C, <code>sizeof(T)</code> is the same, regardless of the context of <code>T</code>.  Your proposal would introduce at least two values for <code>sizeof(T)</code>: one for arrays of <code>T</code> and a different one for individual objects of <code>T</code>.  This basically introduces context-dependence into the <code>sizeof</code> operator.  It is incompatible with how C handles pointers, arrays, and addresses of objects.</p>\n\n<p>Consider the following:</p>\n\n<pre><code>void zero_A(struct A *a) { memset(a,0,sizeof(*a)); }\n\n/* ... */\nstruct A single;\nstruct A several[3];\nstruct B b;\n\nb.d = 3;\nzero_A(&amp;b.a);\nzero_A(&amp;single);\nzero_A(several+1);\n</code></pre>\n\n<p>Under your proposal, <code>zero_A</code> would have to know whether the pointer it was passed pointed to <code>struct A</code> in an array context (where <code>sizeof(*a) == 16</code>) or <code>struct A</code> outside of an array context (where <code>sizeof(*a) == 9</code>).  Standard C doesn't support this.  If the compiler guessed wrong, or the information was lost (eg: in a round-trip through a <code>volatile struct A *</code>), then <code>zero_A(&amp;single)</code> would invoke undefined behavior (by writing past the bounds of <code>single</code>), and <code>zero_A(&amp;b.a)</code> would overwrite <code>b.d</code> and also invoke undefined behavior.</p>\n\n<p>Tightly packing structs into an array is a relatively uncommon requirement, and adding context-dependence to <code>sizeof</code> would introduce a lot of complications to the language, its libraries, and ABIs.  There are times you need to do this, and C gives you the tools you need: <code>memcpy</code> and unions.</p>\n"}], "owner": {"reputation": 944, "user_id": 1518588, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0dc57ef6856b371529d1db038cb2f358?s=128&d=identicon&r=PG", "display_name": "LP_", "link": "https://stackoverflow.com/users/1518588/lp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440005812, "creation_date": 1439998803, "question_id": 32100031, "link": "https://stackoverflow.com/questions/32100031/why-should-a-structs-size-reflect-its-alignment", "title": "Why should a struct&#39;s size reflect its alignment?", "body": "<p>According to <a href=\"https://en.wikipedia.org/wiki/Data_structure_alignment#Typical_alignment_of_C_structs_on_x86\" rel=\"nofollow\">Wikipedia</a>:</p>\n\n<blockquote>\n  <p>the last member is padded with the number of bytes required so that the total size of the structure should be a multiple of the largest alignment of any structure member</p>\n</blockquote>\n\n<p>In my understanding, it means that in the following:</p>\n\n<pre><code>struct A {\n  char *p;     // 8 bytes\n  char c;      // 1 byte\n};\nstruct B {\n  struct A a;  // 16 bytes\n  char d;      // 1 bytes\n};\n</code></pre>\n\n<p>Struct <code>A</code> will have a size of 16 bytes, and struct <code>B</code> will have a size of 24 bytes.</p>\n\n<p>The common explanation is that arrays of <code>A</code> should have their elements accessible at the address of the array plus the index times the size of <code>A</code>.</p>\n\n<p>But I fail to see why that is the case. Why could we not say <code>A</code> has size 9 and <code>B</code> has size 10 (both with 8 bytes alignment), and use a special \"array-storage\" size when indexing into an array?</p>\n\n<p>Of course, we'd still store those types in arrays in a way compatible with their alignment (using 16 bytes to store each <code>B</code> element). Then, we'd simply compute element addresses by taking into account their alignment, instead of considering their size alone (the compiler can do that statically).</p>\n\n<p>For example, we could store 64 objects in a 1Kb bytes array of <code>B</code>'s, instead of only 42.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 4, "creation_date": 1439998927, "post_id": 32100006, "comment_id": 52094495, "body": "<code>cin</code> and <code>cout</code> are in the c++ header <code>iostream</code> which is written in c++. While valid c is (typically) valid c++, this relationship doesn&#39;t work in reverse--<code>cin</code> and <code>cout</code> can&#39;t be used in a c program."}, {"owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "edited": false, "score": 0, "creation_date": 1439998947, "post_id": 32100006, "comment_id": 52094509, "body": "iostreams won&#39;t work in C, you&#39;ll have to use <code>printf()</code>"}, {"owner": {"reputation": 61, "user_id": 5141376, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/C9jCa.jpg?s=128&g=1", "display_name": "95media", "link": "https://stackoverflow.com/users/5141376/95media"}, "edited": false, "score": 0, "creation_date": 1439999003, "post_id": 32100006, "comment_id": 52094556, "body": "Hmm thanks I will try that now"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440000189, "post_id": 32100006, "comment_id": 52095441, "body": "@Joshua: &quot;While valid c is (typically) valid c++,&quot; That is (typically) wrong. There are some semantic differences and some syntaxtical. Just think of casting <code>void *</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440000274, "post_id": 32100006, "comment_id": 52095498, "body": "If you use C++ features, you do <b>not</b> have C code anymore! Even if the syntax is identical, semantics might differ."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1440002604, "post_id": 32100006, "comment_id": 52096763, "body": "@Olaf in what way was my statement wrong? I made sure to state that C code isn&#39;t always valid C++ code. As far as I can tell, the fact that there are <i>some</i> instances where C doesn&#39;t convert well to C++, but that it does so in many cases, means that C is typically valid C++. In fact, as I recall, the ability to interpret C code is one of the driving factors behind C++ being &#39;built&#39; on C."}, {"owner": {"reputation": 61, "user_id": 5141376, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/C9jCa.jpg?s=128&g=1", "display_name": "95media", "link": "https://stackoverflow.com/users/5141376/95media"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1440012017, "post_id": 32100006, "comment_id": 52102194, "body": "@jaggedSpire and everyone else thanks for the comment and advise I have solved the problem"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440016930, "post_id": 32100006, "comment_id": 52105091, "body": "&quot;in many cases, means that C is typically valid C++&quot; only for trivial programs. Once you use <code>malloc</code> &amp; friends, it should actually be <b>not</b>. (hint: it is not primarily because of <code>malloc</code> as such. And using a C programming style in C++ is complete nonsense (again: for non-trivial code)."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440017293, "post_id": 32100006, "comment_id": 52105305, "body": "@Olaf Because the common idiom for dynamically allocating memory via <code>malloc</code> in C uses an cast that has been been rendered illegal in C++, and proper conversion would have that cast be made explicit?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1440017434, "post_id": 32100006, "comment_id": 52105377, "body": "@jaggedSpire: True for the first part, false for the latter. Explictly casting might shadow type errors, as the compiler must not warn anymore. However, have a cookie:-)"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440017911, "post_id": 32100006, "comment_id": 52105602, "body": "@Olaf Thank you for the clarification, and the cookie. :-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440020129, "post_id": 32100006, "comment_id": 52106679, "body": "@Olaf &quot;typical&quot; doesn&#39;t mean &quot;always&quot;"}, {"owner": {"reputation": 627, "user_id": 2188550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da649cd6a4a764f958ea3fc7115ccd7a?s=128&d=identicon&r=PG", "display_name": "Ivanzinho", "link": "https://stackoverflow.com/users/2188550/ivanzinho"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1544545126, "post_id": 32100006, "comment_id": 94310052, "body": "I saw this question as a downvoted one but I vote it up because I get here due to this link <a href=\"https://www.cs.bu.edu/teaching/cpp/string/array-vs-ptr/\" rel=\"nofollow noreferrer\">cs.bu.edu/teaching/cpp/string/array-vs-ptr</a> Usually I give for granted the link is correct because it comes from an university but reading comments and answers here I conclude the link is not correct, cout is NOT part of C. Comments like @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 does are really useless, it&#39;s a waste of time read them, don&#39;t contribute to answer the question."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1439999498, "creation_date": 1439999498, "answer_id": 32100286, "question_id": 32100006, "link": "https://stackoverflow.com/questions/32100006/cin-and-cout-in-c-programming/32100286#32100286", "title": "cin and cout in c programming", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/io/cin\" rel=\"nofollow\"><code>cin</code></a> and <a href=\"http://en.cppreference.com/w/cpp/io/cout\" rel=\"nofollow\"><code>cout</code></a> are streams and do not exist in C.  You can use <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow\"><code>printf()</code></a> and <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"nofollow\"><code>scanf()</code></a> in C.</p>\n\n<p>In general running C code in C++ will work as C++ is based on C but going the other way can be problematic as there are a lot of features in C++ that don't exist in C.</p>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1440004089, "last_edit_date": 1440004089, "creation_date": 1440003753, "answer_id": 32101533, "question_id": 32100006, "link": "https://stackoverflow.com/questions/32100006/cin-and-cout-in-c-programming/32101533#32101533", "title": "cin and cout in c programming", "body": "<blockquote>\n  <p>any library i can use or probable if i can convert the code to work in\n  c programming</p>\n</blockquote>\n\n<p>I think no such library or code conversion tools would exist.  Also, I believe you probably do not want such a thing.</p>\n\n<p>IMHO, C and C++ are two languages, so you will be required to keep the compilation units separate based on code type:</p>\n\n<p>1a) It is (mostly true) that C functions can only be compiled in a C compilation unit.  </p>\n\n<p>1b) A C compilation unit can not compile or understand C++.</p>\n\n<p>2a) C++ functions or methods can only be compiled in a C++ compilation unit.  </p>\n\n<p>2b) A C++ compilation unit <em>CAN</em> produce C link-able function, but as said in other answers, C and C++ do not necessarily generate identical code for the same 'c-style' function.</p>\n\n<p>The issue (of 1 and 2 above) is sometimes called (or used to be called?) name mangling, specifically what the linker uses to connect the code of different compilation units.  C++ uses name mangling, C does not.</p>\n\n<p>3) It is trivial to call C functions (defined and compiled in a C compilation unit) from C++ code (in a C++ compilation unit) ... use 'extern \"C\" '.  The extern \"C\" causes the C++ compiler to generate the function call with an unmangled link name, a name that C code can link to and invoke.</p>\n\n<p>4) It is fairly easy (though possibly not trivial) to call C++ functions (defined in a C++ compilation unit) from code in a C compilation unit.  </p>\n\n<p>But one 'direct' approach is to provide in the C++ compilation unit a C style function interface declared with the request to not mangle the name.</p>\n\n<p>4a) within the C++ code, declare and implement a C function (i.e. foo()) with the extern \"C\" declaration.  This function, though c-style, is able to access or perform the desired C++ function.  </p>\n\n<p>4b) The extern \"C\" foo() can be invoked from the code of a C compilation unit (note: where there is no extern \"C\").</p>\n\n<p>4c) the Linker will connect the unmangled name of foo() ... thus supporting the C code invocation of the C++ function foo().</p>\n\n<p>5) It is somewhat more challenging to invoke a class method from a C function, because the C++ class method will typically require a specific instance through which to address the object.  And C code knows little about class instances.</p>\n\n<p>With enough pieces, it can be done. For instance, I have used a static class methods to connect interrupts (always C or assy code) to a C++ object instance.  But without compelling reasons (like interrupt handling), I choose to write using C++.</p>\n"}], "owner": {"reputation": 61, "user_id": 5141376, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/C9jCa.jpg?s=128&g=1", "display_name": "95media", "link": "https://stackoverflow.com/users/5141376/95media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16350, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1516574626, "creation_date": 1439998728, "last_edit_date": 1440016845, "question_id": 32100006, "link": "https://stackoverflow.com/questions/32100006/cin-and-cout-in-c-programming", "title": "cin and cout in c programming", "body": "<p>My code is written in c. However, I converted the code via changing the header files to c++ and the program works fine. Now my question is: I want the cin and cout to work in the c program. I have included the following libraries  </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;linux/types.h&gt;\n    #include &lt;asm/types.h&gt;\n    #include &lt;linux/socket.h&gt;\n    #include &lt;asm/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;errno.h&gt;\n</code></pre>\n\n<p>and for the cin and cout to work I used the iostream library in c++ which does not work in c. Kindly advise me of any library I can use or probably if I can convert the code to work in c programming.  </p>\n"}, {"tags": ["c", "arrays", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440001411, "post_id": 32100062, "comment_id": 52096059, "body": "Detail: &quot;They do indeed have identical values&quot;  Disagree that <code>pa</code> and <code>a</code> have the same value.  IMO, <code>a[]</code> has a 6 <code>char</code> <i>value</i>.  In the context of <code>char *pa = a;</code>, the expression <code>a</code> is converted to a <code>char *</code> with a value of of the initial element of <code>a</code> and that is assigned to <code>pa</code>.  Yet <code>a</code> does not have the value of a pointer."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440001662, "post_id": 32100062, "comment_id": 52096187, "body": "I know what you&#39;re saying, but I say the <i>values</i> are equal though the <i>types</i> are different."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1439998861, "creation_date": 1439998861, "answer_id": 32100062, "question_id": 32099990, "link": "https://stackoverflow.com/questions/32099990/why-sizes-of-an-array-and-a-pointer-to-a-first-element-are-different/32100062#32100062", "title": "Why sizes of an array and a pointer to a first element are different?", "body": "<p>They do indeed have identical <strong>values</strong>. But that <strong>doesn't</strong> mean they are the same thing.</p>\n\n<p><code>a</code> is <strong>still</strong> a fixed-sized array. <code>pa</code> is <strong>still</strong> a pointer.</p>\n\n<p><code>sizeof</code> is one operator that recognises this difference.</p>\n\n<p>Your array has 6 elements of size <code>char</code> (<code>sizeof(char)</code> is defined by the standard to be 1). (The 6th element is the string null terminator).</p>\n\n<p><code>sizeof(char*)</code> is 8 on your system. It's probably 64 bit.</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1439999107, "post_id": 32100074, "comment_id": 52094628, "body": "There&#39;s a handful of contexts that don&#39;t decay arrays, unary <code>&amp;</code> is also one of them."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1439999279, "post_id": 32100074, "comment_id": 52094759, "body": "See <a href=\"http://stackoverflow.com/a/17753057/3233393\">stackoverflow.com/a/17753057/3233393</a> for what seems to be a full list :)"}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1439999360, "last_edit_date": 1439999360, "creation_date": 1439998899, "answer_id": 32100074, "question_id": 32099990, "link": "https://stackoverflow.com/questions/32099990/why-sizes-of-an-array-and-a-pointer-to-a-first-element-are-different/32100074#32100074", "title": "Why sizes of an array and a pointer to a first element are different?", "body": "<p><code>a</code> and <code>pa</code> are not identical. Always remember: <strong>Arrays are not pointers</strong>. When used in an expression arrays are converted to pointer to its first element with some exception including as an operand of <code>sizeof</code> operator.<br>\n<code>sizeof(a)</code> will give the size of array while <code>sizeof(pa)</code> will give the size of pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1439999213, "post_id": 32100167, "comment_id": 52094713, "body": "<code>_Alignof</code> should be out of the exception list!"}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1439999481, "post_id": 32100167, "comment_id": 52094912, "body": "@haccks Source? I&#39;m quoting from the draft of the standard."}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1440000756, "post_id": 32100167, "comment_id": 52095692, "body": "That&#39;s a <b>bug</b> in the standard. See what C11 standard says: <i>The <code>_Alignof</code> operator yields the alignment requirement of its operand type. The operand is not evaluated and the result is an integer constant. <b>When applied to an array type, the result is the alignment requirement of the element type</b>.</i> (6.5.3.4 p3)."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1439999237, "last_edit_date": 1592644375, "creation_date": 1439999153, "answer_id": 32100167, "question_id": 32099990, "link": "https://stackoverflow.com/questions/32099990/why-sizes-of-an-array-and-a-pointer-to-a-first-element-are-different/32100167#32100167", "title": "Why sizes of an array and a pointer to a first element are different?", "body": "<p>Arrays are not pointers. The array name <em>decays</em> to a pointer to its first element in many cases, but <code>sizeof</code> is one of the few exceptions.</p>\n<blockquote>\n<h3>C11 \u00a76.3.2.1 Lvalues, arrays, and function designators</h3>\n<p>Except when it is the operand of the <code>sizeof</code> operator, the <code>_Alignof</code> operator, or the unary <code>&amp;</code> operator, or is a string literal used to initialize an array, an expression that has type &quot;array of type&quot; is converted to an expression with type &quot;pointer to type&quot; that points to the initial element of the array object and is not an lvalue.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1439999164, "creation_date": 1439999164, "answer_id": 32100171, "question_id": 32099990, "link": "https://stackoverflow.com/questions/32099990/why-sizes-of-an-array-and-a-pointer-to-a-first-element-are-different/32100171#32100171", "title": "Why sizes of an array and a pointer to a first element are different?", "body": "<pre><code> char a[] = \"hello\";\n char *pa = a;\n</code></pre>\n\n<p>Here <code>sizeof(a)</code> will give size of array <code>a</code> . And <code>sizeof(pa)</code> will give size of pointer <code>pa</code>.Both are different .</p>\n\n<p>Also as in function arguments array decays to pointer but this one is exception along with <code>&amp;</code>.</p>\n\n<p>Also while printing type <code>size_t</code> you should use specifier <code>%zu</code> (as specified in ANSI C99).</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1440001159, "last_edit_date": 1440001159, "creation_date": 1440000376, "answer_id": 32100600, "question_id": 32099990, "link": "https://stackoverflow.com/questions/32099990/why-sizes-of-an-array-and-a-pointer-to-a-first-element-are-different/32100600#32100600", "title": "Why sizes of an array and a pointer to a first element are different?", "body": "<p>Two objects can have the same address but their sizes can be different.</p>\n\n<p>From the C Standard (6.5.3.4 The sizeof and alignof operators)</p>\n\n<blockquote>\n  <p>2 The sizeof operator yields the size (in bytes) of its operand, which\n  may be an expression or the parenthesized name of a type. <strong>The size is\n  determined from the type of the operand</strong>....</p>\n</blockquote>\n\n<p>Consider the following example</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main( void )\n{\n    struct A\n    {\n        char c;\n        int x;\n    } a;\n\n    printf( \"object a:\\taddress - %p size - %zu\\n\",\n            &amp;a, sizeof( a ) );\n    printf( \"object a.c:\\taddress - %p size - %zu\\n\",\n            &amp;a.c, sizeof( a.c ) );\n}    \n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>object a:   address - 0x7fff164e16d0 size - 8\nobject a.c: address - 0x7fff164e16d0 size - 1\n</code></pre>\n\n<p>As it is seen the object <code>a</code> of type <code>struct A</code> and its data member <code>c</code> of type <code>char</code> have the same address but different sizes.</p>\n\n<p>As for arrays then a pointer is an object that stores an address of other object. To store an address of other object it is enough to allocate for example 4 or 8 bytes of memory for the pointer depending on the used system.</p>\n\n<p>As for arrays then they are named extents of memory. Arrays do not store addresses. They store their own elements (that of course can be pointers).</p>\n\n<p>An array name used in expressions is converted to pointer to its first element.</p>\n\n<p>According to the C Standard (6.3.2.1 Lvalues, arrays, and function designators)</p>\n\n<blockquote>\n  <p>3 Except when it is the operand of the sizeof operator or the unary &amp;\n  operator, or is a string literal used to initialize an array, <strong>an\n  expression that has type \u2018\u2018array of type\u2019\u2019 is converted to an\n  expression with type \u2018\u2018pointer to type\u2019\u2019</strong> that points to the initial\n  element of the array object and is not an lvalue. If the array object\n  has register storage class, the behavior is undefined.</p>\n</blockquote>\n\n<p>In this quote there is listed when an array is not converted to a pointer to its first element. For example when an array is the operand of <code>sizeof</code> operator.</p>\n\n<p>If to return to your program</p>\n\n<pre><code>int main()\n{\n    char a[] = \"hello\";\n    char *pa = a;\n    printf(\"Array: %ld\\n\", sizeof(a));\n    printf(\"Pointer: %ld\\n\", sizeof(pa));\n}\n</code></pre>\n\n<p>then in this statement </p>\n\n<pre><code>    char a[] = \"hello\";\n</code></pre>\n\n<p>string literal <code>\"Hello\"</code> that has type <code>char[6]</code> is not converted to a pointer.\nHowever in this statement</p>\n\n<pre><code>    char *pa = a;\n</code></pre>\n\n<p>array <code>a</code> is converted to pointer to its first element.</p>\n\n<p>And in this statement</p>\n\n<pre><code>    printf(\"Array: %ld\\n\", sizeof(a));\n</code></pre>\n\n<p>array <code>a</code> is not converted to a pointer because it is the operand of the <code>sizeof</code> operator.</p>\n\n<p>However if you used an expression in the sizeof operator for example like this</p>\n\n<pre><code>sizeof( a + 0 )\n</code></pre>\n\n<p>then you would get a pointer and correspondingly the <code>sizeof</code> would return the size of the pointer instead of the size of the array</p>\n"}], "owner": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 32100600, "answer_count": 5, "score": 2, "last_activity_date": 1440001159, "creation_date": 1439998688, "question_id": 32099990, "link": "https://stackoverflow.com/questions/32099990/why-sizes-of-an-array-and-a-pointer-to-a-first-element-are-different", "title": "Why sizes of an array and a pointer to a first element are different?", "body": "<p>Kernighan &amp; Ritchie 2nd ed. says:</p>\n\n<blockquote>\n  <p>The correspondence between indexing and pointer arithmetic is very close. By definition, the value of a variable or expression of type array is the address of element zero of the array. Thus after the assignment<br>\n  <code>pa = &amp;a[0];</code></p>\n  \n  <p><strong><code>pa</code> and <code>a</code> have identical values.</strong> Since the name of an array is a synonym for the location of the initial element, the assignment <code>pa=&amp;a[0]</code> can also be written as<br>\n  <code>pa = a;</code></p>\n</blockquote>\n\n<p>If <code>a</code> and <code>pa</code> are identical, then why this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    char a[] = \"hello\";\n    char *pa = a;\n    printf(\"Array: %ld\\n\", sizeof(a));\n    printf(\"Pointer: %ld\\n\", sizeof(pa));\n}\n</code></pre>\n\n<p>Outputs this:</p>\n\n<pre><code>Array: 6\nPointer: 8\n</code></pre>\n\n<p>Reference to an authoritative source would be much appreciated.</p>\n"}, {"tags": ["c", "gcc", "assembly"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439998703, "post_id": 32099922, "comment_id": 52094329, "body": "Where does the documentation state gcc will reorder assembler instructions in a single asm block?"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439998841, "post_id": 32099922, "comment_id": 52094427, "body": "@Olaf It&#39;s not about the instructions, it&#39;s about the parameters of the block."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1439998904, "post_id": 32099922, "comment_id": 52094481, "body": "The input and output constraints apply before and after the whole block, respectively. That also means your code is wrong, because you are saving the restored <code>ebx</code>. Also note that if you specify a register as output, the compiler knows it has been modified. Furthermore, the ABI applies to function calls only, for inline asm you need to tell the compiler about <b>all</b> registers that you modify either as output or clobber. You generally don&#39;t need to save/restore them, the compiler can do that better."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439999163, "post_id": 32099922, "comment_id": 52094669, "body": "@Olaf - <i>&quot;Where does the documentation state gcc ...&quot;</i> - I cited the doc; its the one that discusses assembler templates. Search for the word &quot;consecutive&quot;. (And please note that I did not use the word <i>&quot;reorder&quot;</i>; you did)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1439999269, "post_id": 32099922, "comment_id": 52094753, "body": "@ElderBug - <i>&quot;That also means your code is wrong...&quot;</i> - that&#39;s what I thought. So how do we express this when taking &quot;consecutive-ness&quot; into account, which means it has to be in a multi-statement block?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1439999412, "post_id": 32099922, "comment_id": 52094861, "body": "The correct code for this is just <code>&quot;cpuid&quot;</code>, since <code>ebx</code> does not need to be preserved given it&#39;s listed as output."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439999536, "post_id": 32099922, "comment_id": 52094952, "body": "@Olaf the output constraints instruct the compiler to generate those mov instructions (if needed)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1439999594, "post_id": 32099922, "comment_id": 52095001, "body": "@Jester - According to <a href=\"https://gcc.gnu.org/ml/gcc-help/2015-08/msg00088.html\" rel=\"nofollow noreferrer\">Proper use of x86/x86_64 CPUID instruction with extended assembler</a> on the GCC mailing list, <code>EBX</code> or <code>RBX</code> needs to be manually saved and restored. Even the GCC patches for GCC do it."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1439999759, "post_id": 32099922, "comment_id": 52095122, "body": "@ElderBug  - sorry about that. Its too late to change it now. My apologies."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 2, "creation_date": 1440000042, "post_id": 32099922, "comment_id": 52095335, "body": "@jww actually the problem there is that when compiling PIC, the compiler simply does not allow you to use the <code>&quot;b&quot;</code> constraint (it says <code>error: inconsistent operand constraints in an &#39;asm&#39;</code>). To work around that, indeed you need to save <code>ebx</code> because you can&#39;t list it as output or clobber. For usual code, you can use <code>&quot;b&quot;</code> directly (the linked patch does this too)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440001616, "post_id": 32099922, "comment_id": 52096147, "body": "@Jester - <i>&quot;...the compiler simply does not allow you to use the &quot;b&quot; constraint ...&quot;</i> - OK, I&#39;m getting different results. For example, under Cygwin i386, there is no complaint. Cygwin is using the GCC 4.9 compiler. And I did not have problems when testing under under Debian 8/i386 and Fedora 22/i686. I believe they use the GCC 4.9 and 5.1 compilers, respectively."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440001633, "post_id": 32099922, "comment_id": 52096164, "body": "@Jester - as an academic exercise, how can I use all of this in a multi-asm block? &quot;All of this&quot; is (1) save <code>EBX</code>, (2) execute <code>CPUID</code>, (3) save the results, and (4) restore <code>EBX</code>. How should I write the multi-asm statement block? (Your ASM mojo is much better than mine)."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440006668, "post_id": 32099922, "comment_id": 52099009, "body": "@Jester - is the problem here that we <b><i>cannot</i></b> use Extended ASM to solve this problem?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440009051, "post_id": 32099922, "comment_id": 52100375, "body": "@jww : When you tested what @jester said did you compile it with <code>-fPIC</code>?   Joker prefaced <i>&quot;the compiler simply does not allow you to use the &quot;b&quot; constraint ...&quot;</i> with <i>&quot;the problem there is that when compiling PIC&quot;</i> ?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440010084, "post_id": 32099922, "comment_id": 52101069, "body": "@Michael - Yes. In fact, Cygwin enables it by default."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440010263, "post_id": 32099922, "comment_id": 52101187, "body": "@jww Peculiar unless you were generating 64bit code."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440012093, "post_id": 32099922, "comment_id": 52102238, "body": "@Michael - yeah, but its kind of par for the course at times. Hence the reason we want to unconditionally save <code>EBX&#47;RBX</code>. With it unconditionally saved, all these sidebar questions (like &quot;why is Cygwin not complaining about a constraint violation&quot; and &quot;are the ABI requirements being met&quot;) simply go away."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440012317, "post_id": 32099922, "comment_id": 52102373, "body": "@Jester - <i>&quot;That also means your code is wrong...&quot;</i> - by the way, you should provide an answer since that answers the question at hand. That was exactly what I was wondering about."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440012643, "post_id": 32099922, "comment_id": 52102609, "body": "Couldn&#39;t you manually move <code>ebx</code> to variable <code>__EBX</code> prior to the <code>pop</code>?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440013112, "post_id": 32099922, "comment_id": 52102883, "body": "@Michael - that&#39;s actually kind of tricky... On x86_64, <code>CPUID</code> still uses <code>EAX</code> and friends. But the 64-bit <code>RBX</code> needs to be preserved. I was even thinking to declare an extra C variable to handle it. But if I can&#39;t control when the constraints or operands are evaluated, then its a moot point."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440013792, "post_id": 32099922, "comment_id": 52103337, "body": "My understanding has always been that gcc <code>asm</code> blocks are seen as a text passed onto the assembler verbatim (The compiler doesn&#39;t modify such code). That would imply the constraint would have to be outside the assembler block some point after <code>pop %ebx</code>"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440014759, "post_id": 32099922, "comment_id": 52103877, "body": "@Michael - OK, then I think that leads us back to the problem of ensuring the consecutive-ness of multi-line asm statements and the assembler template :)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440015148, "post_id": 32099922, "comment_id": 52104109, "body": "Isn&#39;t that already handled in the spec for GCC: &quot;Do not expect a <i>sequence</i> of <b>asm</b> <i>statements</i> to remain perfectly consecutive after compilation, &quot; A single <code>__asm__</code> statement with multiple instructions won&#39;t be rearranged but separate <code>__asm__</code> statements may be."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440017289, "post_id": 32099922, "comment_id": 52105302, "body": "@Michael - <i>&quot;Isn&#39;t that already handled in the spec for GCC...&quot;</i> - yes, that&#39;s why we are trying to do this from a single, multi-line ASM block. But to use the multi-line ASM block, we need to ensure operands are read from and written to at the correct times."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1440019453, "post_id": 32099922, "comment_id": 52106335, "body": "@jww I don&#39;t think everyone knows what you mean by &quot;correct time&quot;. You have 3 assembly instruction here. They&#39;re executed in the order you wrote them, and they work just like the intel manuals say they do. Where does time enter the picture, and how could operands not be read/written from at the correct time ?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440019927, "post_id": 32099922, "comment_id": 52106565, "body": "Note that in 64 bit code, this is a non-issue because <code>rbx</code> is not used as the GOT pointer since 64 bit uses rip-relative addressing, and indeed the <code>&quot;b&quot;</code> constraint works fine in 64 bit mode (at least on my linux machine)."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440021374, "post_id": 32099922, "comment_id": 52107157, "body": "According to cpuid.h on x86_64 whether <code>rbx</code> is saved or not is also dependent on the memory model. Retaining the state of <code>rbx</code> is done when this is true <code>#elif defined(__x86_64__) &amp;&amp; (defined(__code_model_medium__) || defined(__code_model_large__)) &amp;&amp; defined(__PIC__)</code>"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1440022199, "post_id": 32099922, "comment_id": 52107477, "body": "@MichaelPetch yeah makes sense since rip-relative addressing might not work in those cases."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1440023047, "post_id": 32099922, "comment_id": 52107767, "body": "@nos - I&#39;m probably splitting hairs, but I never said &quot;correct time&quot; (I even checked history). How the operands are not read/written at the expected times is explained in the body (like which <code>EBX</code> is being written to which C variable at which point in time). I&#39;m very open to suggestions because its hard to capture the essence of the question for the title. I was having such a hard time with it, the question sat unsubmitted for about 4 hours while I thought about how to phrase it."}], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440017034, "post_id": 32105119, "comment_id": 52105146, "body": "That&#39;s kind of an interesting approach - call <code>CPUID</code> twice. I tried unwinding the terseness of the extended ASM into explicit ASM like `movl %eax, %1&quot;, but I can&#39;t get the damn assembler to accept it. Maybe this is the solution."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440017623, "post_id": 32105119, "comment_id": 52105467, "body": "If you were wondering how to implement cpuid I could have suggested you look directly at cpuid.h (should be a copy on your system, but you can find it online). In particular <code>__cpuid</code> macro which uses an assembler directive. It uses <code>xchg</code> instead of <code>push</code> and <code>pop</code> and uses an output register of &quot;=r&quot; (used with <code>xchg</code>). <a href=\"https://github.com/infphilo/hisat/blob/master/third_party/cpuid.h\" rel=\"nofollow noreferrer\">github.com/infphilo/hisat/blob/master/third_party/cpuid.h</a>"}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440018420, "post_id": 32105119, "comment_id": 52105854, "body": "@jww Like I said, I&#39;m not completely sure what the x86 assembler syntax should look like, so please correct me if it&#39;s wrong. You should indeed be able to substitute <code>%ecx</code> with <code>%0</code> but there&#39;s no real need to."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440018872, "post_id": 32105119, "comment_id": 52106061, "body": "@Michael - thanks. As crazy as it sounds, the site does not allow us to ask certain question. So a more direct question (like &quot;How do I do X&quot; or &quot;Please show me an implementation that meets X and Y requirements&quot;) may have been closed as off-topic. So we have craft questions that comply with the site&#39;s policies and endure the indirect route. It sucks at times (like now), but that&#39;s how the site is."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440019161, "post_id": 32105119, "comment_id": 52106187, "body": "No problem. On a side note I should point out that I wasn&#39;t the one who voted to close ;-) . Someone else can formulate an answer based on my comment if they wish but if they don&#39;t by days end I will (when I have a bit of time)"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440019243, "post_id": 32105119, "comment_id": 52106227, "body": "@Michael - the GitHub code looks a lot <a href=\"https://gcc.gnu.org/ml/gcc-patches/2007-09/msg00324.html\" rel=\"nofollow noreferrer\">GCC Patch: Introduce cpuid.h and use it everywhere</a>. I actually tried to get feedback on it at the GCC Help mailing list; see <a href=\"https://gcc.gnu.org/ml/gcc-help/2015-08/msg00088.html\" rel=\"nofollow noreferrer\">Proper use of x86/x86_64 CPUID instruction with extended assembler</a>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440019384, "post_id": 32105119, "comment_id": 52106302, "body": "@Michael - <i>&quot;On a side note I should point out that I wasn&#39;t the one who voted to close...&quot;</i> - Oh, not at all. I&#39;m fair game for closes (I even vote to close some of my earliest questions (did I really ask that in that manner :o)). I&#39;m pretty sure I know who it was. He and I have had problems in the past."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1440019988, "post_id": 32105119, "comment_id": 52106593, "body": "The link I posted was the wrong one. I meant to post this one which was from gcc 4.8: <a href=\"http://denemo.org/~jjbenham/mxe/usr/lib/gcc/i686-pc-mingw32/4.8.1/include/cpuid.h\" rel=\"nofollow noreferrer\">denemo.org/~jjbenham/mxe/usr/lib/gcc/i686-pc-mingw32/4.8.1/&hellip;</a> . In particular this one deals with X86_64 and i386 (32 bit). You&#39;ll note that the macro is defined differently for 64 and 32 bit compilation."}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440020039, "post_id": 32105119, "comment_id": 52106633, "body": "jww&#39;s linked snippet works around the problem by using another free register of the compiler&#39;s choice (hence the <code>&quot;r&quot;</code> constraint), so it doesn&#39;t need to double the <code>cpuid</code>."}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1440062381, "post_id": 32105119, "comment_id": 52121461, "body": "@Jester thanks for fixing it. I wasnt AT&amp;T order, it was ARM order, so doubly wrong. ;-)"}], "tags": [], "owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "is_accepted": false, "score": 2, "last_activity_date": 1440019797, "last_edit_date": 1440019797, "creation_date": 1440016289, "answer_id": 32105119, "question_id": 32099922, "link": "https://stackoverflow.com/questions/32099922/what-ensures-reads-writes-of-operands-occurs-at-desired-timed-with-extended-asm/32105119#32105119", "title": "What ensures reads/writes of operands occurs at desired timed with extended ASM?", "body": "<p>I think you understand, but to be clear, the \"consecutive\" rule means that this:</p>\n\n<pre><code>asm (\"a\");\nasm (\"b\");\nasm (\"c\");\n</code></pre>\n\n<p>... might get other instructions interposed, so if that's not desirable then it must be rewritten like this:</p>\n\n<pre><code>asm (\"a\\n\"\n     \"b\\n\"\n     \"c\");\n</code></pre>\n\n<p>... and now it will be inserted as a whole.</p>\n\n<hr>\n\n<p>As for the <code>cpuid</code> snippet, we have two problems:</p>\n\n<ol>\n<li><p>The <code>cpuid</code> instruction will overwrite <code>ebx</code>, and hence clobber the data that PIC code must keep there.</p></li>\n<li><p>We want to extract the value that <code>cpuid</code> places in <code>ebx</code> while never returning to compiled code with the \"wrong\" <code>ebx</code> value.</p></li>\n</ol>\n\n<p>One possible solution would be this:</p>\n\n<pre><code>unsigned int __FUNC = 1, __SUBFUNC = 0;\nunsigned int __EAX, __EBX, __ECX, __EDX;\n\n__asm__ __volatile__ (    \n  \"push %ebx;\"\n  \"cpuid;\"\n  \"mov %ebx, %ecx\"\n  \"pop %ebx\"\n  : \"=c\"(__EBX)\n  : \"a\"(__FUNC), \"c\"(__SUBFUNC)\n  : \"eax\", \"edx\"\n);\n__asm__ __volatile__ (    \n  \"push %ebx;\"\n  \"cpuid;\"\n  \"pop %ebx\"\n  : \"=a\"(__EAX), \"=c\"(__ECX), \"=d\"(__EDX)\n  : \"a\"(__FUNC), \"c\"(__SUBFUNC)\n);\n</code></pre>\n\n<p>There's no need to mark <code>ebx</code> as clobbered as you're putting it back how you found it.</p>\n\n<p>(I don't do much Intel programming, so I may have some of the assembler-specific details off there, but this is how <code>asm</code> works.)</p>\n"}, {"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440027924, "post_id": 32107271, "comment_id": 52109090, "body": "<i>&quot;Why it doesn&#39;t produce a warning for you is unusual.&quot;</i> It gets even better. This is for the <a href=\"http://www.cryptopp.com/\" rel=\"nofollow noreferrer\">Crypto++ library</a>. I have test platforms set-up going back to GCC 2.9 and 3.x (about 30 in all, with 22 for Linux and GCC). Odd behavior for just one or two platforms would be warmly welcomed :)"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440028780, "post_id": 32107271, "comment_id": 52109331, "body": "Oh, so when there was no warning generated at compile time, that was with GCC 2.9 or early 3.x? Does a newer (4.x) compiler throw up a warning?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440030232, "post_id": 32107271, "comment_id": 52109648, "body": "If one wanted to force the compiler to use a particular register to exchange into one might wish to consider replacing <code>=&amp;r</code> with <code>=D</code> which would specifically use <code>%esi</code> or <code>%rsi</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440123456, "post_id": 32107271, "comment_id": 52153510, "body": "Now a related question: <a href=\"http://stackoverflow.com/q/32131003\">Generated code not matching expectations with Extended ASM</a>. I&#39;m really beginning to dislike GCC&#39;s inline assembly. Its too damn limited in that (1) we cannot use local C/C++ variables directly, like <code>movl %eax, c_variable</code>; and (2) we cannot enforce &quot;consecutive-ness&quot; without Extended ASM and assembler templates."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440123647, "post_id": 32107271, "comment_id": 52153557, "body": "You can pass a variable into the assembler template as an input constraint and then reference it as a positional argument inside the assembler template."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440125219, "post_id": 32107271, "comment_id": 52153922, "body": "I tried using positional arguments before asking these two questions. I can&#39;t begin to express what a joy it was. The manual is about as clear as mud, and it resulted in a spectacular failure of incomprehensible error messages that pointed to the closing paren of the extended ASM block (and not the line number of the offender). But I&#39;m getting ready to back to it so I can take complete control of things because I don&#39;t trust the code being generated."}], "tags": [], "owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "is_accepted": true, "score": 3, "last_activity_date": 1440028674, "last_edit_date": 1440028674, "creation_date": 1440026987, "answer_id": 32107271, "question_id": 32099922, "link": "https://stackoverflow.com/questions/32099922/what-ensures-reads-writes-of-operands-occurs-at-desired-timed-with-extended-asm/32107271#32107271", "title": "What ensures reads/writes of operands occurs at desired timed with extended ASM?", "body": "<p>In your question you present some code that does a <code>push</code> and <code>pop</code> of <code>ebx</code>. The idea of saving <code>ebx</code> in the event that you compile with gcc using <code>-fPIC</code> (position independent code) is correct. It is up to our function not to clobber <code>ebx</code> upon return in that situation. Unfortunately the way you have defined the constraints you explicitly use <code>ebx</code>. Generally the compiler will warn you (<em>error: inconsistent operand constraints in an 'asm'</em>) if you are using PIC code and you specify <code>=b</code> as an output constraint. Why it doesn't produce a warning for you is unusual.</p>\n\n<p>To get around this problem you can let the assembler template choose a register for you. Instead of pushing and popping we simply exchange <code>%ebx</code> with an unused register chosen by the compiler and restore it by exchanging it back after. Since we don't wish to have the compiler clobber our input registers during the exchange we specify early clobber modifier, thus ending up with a constraint of <code>=&amp;r</code> (instead of <code>=b</code> in the OPs code). More on modifiers can be found <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Modifiers.html#Modifiers\" rel=\"nofollow\">here</a>. Your code (for 32 bit) would look something like:</p>\n\n<pre><code>unsigned int __FUNC = 1, __SUBFUNC = 0;\nunsigned int __EAX, __EBX, __ECX, __EDX;\n\n__asm__ __volatile__ (\n       \"xchgl\\t%%ebx, %k1\\n\\t\"      \\\n       \"cpuid\\n\\t\"                  \\\n       \"xchgl\\t%%ebx, %k1\\n\\t\"\n\n  : \"=a\"(__EAX), \"=&amp;r\"(__EBX), \"=c\"(__ECX), \"=d\"(__EDX)\n  : \"a\"(__FUNC), \"c\"(__SUBFUNC));\n</code></pre>\n\n<p>If you intend to compile for X86_64 (64 bit) you'll need to save the entire contents of <code>%rbx</code>. The code above will not quite work. You'd have to use something like:</p>\n\n<pre><code>uint32_t  __FUNC = 1, __SUBFUNC = 0;\nuint32_t __EAX, __ECX, __EDX;\nuint64_t __BX; /* Big enough to hold a 64 bit value */\n\n__asm__ __volatile__ (\n       \"xchgq\\t%%rbx, %q1\\n\\t\"      \\\n       \"cpuid\\n\\t\"                  \\\n       \"xchgq\\t%%rbx, %q1\\n\\t\"\n\n  : \"=a\"(__EAX), \"=&amp;r\"(__BX), \"=c\"(__ECX), \"=d\"(__EDX)\n  : \"a\"(__FUNC), \"c\"(__SUBFUNC));\n</code></pre>\n\n<p>You could code this up using conditional compilation to deal with both X86_64 and i386:</p>\n\n<pre><code>uint32_t  __FUNC = 1, __SUBFUNC = 0;\nuint32_t __EAX, __ECX, __EDX;\nuint64_t __BX; /* Big enough to hold a 64 bit value */\n\n#if defined(__i386__)\n    __asm__ __volatile__ (\n           \"xchgl\\t%%ebx, %k1\\n\\t\"      \\\n           \"cpuid\\n\\t\"                  \\\n           \"xchgl\\t%%ebx, %k1\\n\\t\"\n\n      : \"=a\"(__EAX), \"=&amp;r\"(__BX), \"=c\"(__ECX), \"=d\"(__EDX)\n      : \"a\"(__FUNC), \"c\"(__SUBFUNC));\n\n#elif defined(__x86_64__)\n    __asm__ __volatile__ (\n           \"xchgq\\t%%rbx, %q1\\n\\t\"      \\\n           \"cpuid\\n\\t\"                  \\\n           \"xchgq\\t%%rbx, %q1\\n\\t\"\n\n      : \"=a\"(__EAX), \"=&amp;r\"(__BX), \"=c\"(__ECX), \"=d\"(__EDX)\n      : \"a\"(__FUNC), \"c\"(__SUBFUNC));\n#else\n#error \"Unknown architecture.\"\n#endif\n</code></pre>\n\n<p>GCC has a <code>__cpuid</code> macro defined in <code>cpuid.h</code>. It defined the macro so that it only saves the <code>ebx</code> and <code>rbx</code> register when required. You can find the GCC 4.8.1 macro definition here to get an idea of how they handle <code>cpuid</code> in <a href=\"http://denemo.org/~jjbenham/mxe/usr/lib/gcc/i686-pc-mingw32/4.8.1/include/cpuid.h\" rel=\"nofollow\">cpuid.h</a>. </p>\n\n<p>The astute reader may ask the question - what stops the compiler from choosing <code>ebx</code> or <code>rbx</code> as the scratch register to use for the exchange. The compiler knows about <code>ebx</code> and <code>rbx</code> in the context of PIC, and will not allow it to be used as a scratch register. This is based on my personal observations over the years and reviewing the assembler (.s) files generated from C code. I can't say for certain how more ancient versions of gcc handled it so it could be a problem. </p>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 1, "accepted_answer_id": 32107271, "answer_count": 2, "score": 2, "last_activity_date": 1440028674, "creation_date": 1439998474, "last_edit_date": 1440025252, "question_id": 32099922, "link": "https://stackoverflow.com/questions/32099922/what-ensures-reads-writes-of-operands-occurs-at-desired-timed-with-extended-asm", "title": "What ensures reads/writes of operands occurs at desired timed with extended ASM?", "body": "<p>According to GCC's <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#AssemblerTemplate\" rel=\"nofollow\">Extended ASM and Assembler Template</a>, to keep instructions consecutive, they must be in the same ASM block. I'm having trouble understanding what provides the scheduling or timings of reads and writes to the operands in a block with multiple statements.</p>\n\n<p>As an example, <code>EBX</code> or <code>RBX</code> needs to be preserved when using <code>CPUID</code> because, according to the ABI, the caller owns it. There are some open questions with respect to the use of <code>EBX</code> and <code>RBX</code>, so we want to preserve it unconditionally (its a requirement). So three instructions need to be encoded into a single ASM block to ensure the consecutive-ness of the instructions (re: the assembler template discussed in the first paragraph):</p>\n\n<pre><code>unsigned int __FUNC = 1, __SUBFUNC = 0;\nunsigned int __EAX, __EBX, __ECX, __EDX;\n\n__asm__ __volatile__ (\n\n  \"push %ebx;\"\n  \"cpuid;\"\n  \"pop %ebx\"\n  : \"=a\"(__EAX), \"=b\"(__EBX), \"=c\"(__ECX), \"=d\"(__EDX)\n  : \"a\"(__FUNC), \"c\"(__SUBFUNC)\n\n);\n</code></pre>\n\n<p>If the expression representing the operands is interpreted at the wrong point in time, then <code>__EBX</code> will be the saved <code>EBX</code> (and not the <code>CPUID</code>'s <code>EBX</code>), which will likely be a pointer to the Global Offset Table (GOT) if PIC is enabled. </p>\n\n<p>Where, exactly, does the expression specify that the store of <code>CPUID</code>'s <code>%EBX</code> into <code>__EBX</code> should happen (1) after the <code>PUSH %EBX</code>; (2) after the <code>CPUID</code>; but (3) before the <code>POP %EBX</code>?</p>\n"}, {"tags": ["c", "arrays", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440048602, "post_id": 32099660, "comment_id": 52114052, "body": "<code>char arr[]</code> is NOT an example of <code>a[i]</code> .  The change that your quoted passage is talking about, would be for example changing <code>arr[0]</code> to <code>*(arr+0)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "edited": false, "score": 0, "creation_date": 1439998059, "post_id": 32099719, "comment_id": 52093886, "body": "What is &quot;string literal&quot;? It&#39;s stored differently from char array?"}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "edited": false, "score": 0, "creation_date": 1439998455, "post_id": 32099719, "comment_id": 52094164, "body": "@GillBates In here <code>&quot;hello&quot;</code> is. If you need the official definition, read <i>C11 6.4.5 String literals</i>."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1439997961, "creation_date": 1439997961, "answer_id": 32099719, "question_id": 32099660, "link": "https://stackoverflow.com/questions/32099660/why-assignment-to-a-subscripted-array-works-and-assignment-to-a-dereferenced-poi/32099719#32099719", "title": "Why assignment to a subscripted array works and assignment to a dereferenced pointer arithmetic expression - doesn&#39;t?", "body": "<p>It has nothing to do with pointer arithmetic. It's because in the second program:</p>\n\n<pre><code>char *arr = \"hello\";\n</code></pre>\n\n<p><code>arr</code> points to a string literal, which can NOT be modified.</p>\n"}, {"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": 1, "last_activity_date": 1439997961, "creation_date": 1439997961, "answer_id": 32099718, "question_id": 32099660, "link": "https://stackoverflow.com/questions/32099660/why-assignment-to-a-subscripted-array-works-and-assignment-to-a-dereferenced-poi/32099718#32099718", "title": "Why assignment to a subscripted array works and assignment to a dereferenced pointer arithmetic expression - doesn&#39;t?", "body": "<p>That's because the <code>arr</code> in first snippet is a <code>char</code> array and can be modified while in second snippet it is a string literal which is not subjected to change.   </p>\n\n<p>String literals might be stored in read only section of memory and modifying it will invoke undefined behavior. </p>\n"}, {"comments": [{"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1439998456, "post_id": 32099772, "comment_id": 52094165, "body": "Oops! I need to change my eyeglass."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1439998102, "creation_date": 1439998102, "answer_id": 32099772, "question_id": 32099660, "link": "https://stackoverflow.com/questions/32099660/why-assignment-to-a-subscripted-array-works-and-assignment-to-a-dereferenced-poi/32099772#32099772", "title": "Why assignment to a subscripted array works and assignment to a dereferenced pointer arithmetic expression - doesn&#39;t?", "body": "<p>When you define and initialize the array, all of the array is allocated in modifiable memory (usually the stack), and so you can modify the array any way you want.</p>\n\n<p>When you use a string literal, the compiler will give you a pointer to a <em>read-only</em> zero-terminated array of <code>char</code>. Attempting to modify this array (which you do in the second example) leads to <em>undefined behavior</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "is_accepted": true, "score": 0, "last_activity_date": 1440051883, "last_edit_date": 1440051883, "creation_date": 1440011272, "answer_id": 32103689, "question_id": 32099660, "link": "https://stackoverflow.com/questions/32099660/why-assignment-to-a-subscripted-array-works-and-assignment-to-a-dereferenced-poi/32103689#32103689", "title": "Why assignment to a subscripted array works and assignment to a dereferenced pointer arithmetic expression - doesn&#39;t?", "body": "<p>K&amp;R (<em>5.5 Character Pointers and Functions</em>):</p>\n\n<blockquote>\n  <p>There is an important difference between these definitions:</p>\n\n<pre><code>char\u00a0amessage[]\u00a0=\u00a0\"now\u00a0is\u00a0the\u00a0time\";\u00a0\u00a0\u00a0/*\u00a0an\u00a0array\u00a0*/\nchar\u00a0*pmessage\u00a0=\u00a0\"now\u00a0is\u00a0the\u00a0time\";\u00a0\u00a0\u00a0\u00a0/*\u00a0a\u00a0pointer\u00a0*/\n</code></pre>\n  \n  <p><code>amessage</code> is an array, just big enough to hold the sequence of\n  characters and <code>\u2032\\0\u2032</code> that initializes it. Individual characters\n  within the array may be changed but <code>amessage</code> will always refer to\n  the same storage. <strong>On the other hand, <code>pmessage</code> is a pointer,\n  initialized to point to a string constant</strong>; the pointer may\n  subsequently be modified to point elsewhere, but <strong>the result is\n  undefined if you try to modify the string contents.</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 8915, "user_id": 1818608, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/2c7fd43d0ea66acaf6eadc8062693a50?s=128&d=identicon&r=PG", "display_name": "Gill Bates", "link": "https://stackoverflow.com/users/1818608/gill-bates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 2, "accepted_answer_id": 32103689, "answer_count": 4, "score": 1, "last_activity_date": 1440051883, "creation_date": 1439997816, "last_edit_date": 1439998119, "question_id": 32099660, "link": "https://stackoverflow.com/questions/32099660/why-assignment-to-a-subscripted-array-works-and-assignment-to-a-dereferenced-poi", "title": "Why assignment to a subscripted array works and assignment to a dereferenced pointer arithmetic expression - doesn&#39;t?", "body": "<p>Kernighan &amp; Ritchie 2nd ed. says:</p>\n\n<blockquote>\n  <p>The correspondence between indexing and pointer arithmetic is very close. By definition, the value of a variable or expression of type array is the address of element zero of the array. Thus after the assignment<br>\n  <code>pa = &amp;a[0];</code></p>\n  \n  <p><code>pa</code> and <code>a</code> have identical values. Since the name of an array is a synonym for the location of the initial element, the assignment <code>pa=&amp;a[0]</code> can also be written as<br>\n  <code>pa = a;</code></p>\n  \n  <p>Rather more surprising, at least at first sight, is the fact that a reference to <code>a[i]</code> can also be written as <code>*(a+i).</code> In evaluating <code>a[i]</code>, C converts it to <code>a[i]</code> immediately; the two forms are equivalent. Applying the operator &amp; to both parts of this equivalence, it follows that <code>and</code> are also identical: <code>a+i</code> is the address of the <code>i</code>-th element beyond a. As the other side of this coin, if <code>pa</code> is a pointer, expressions may use it with a subscript; <code>pa[i]</code> is identical to <code>*(pa+i)</code>. In short, <strong>an array-and-index expression is equivalent to one written as a pointer and offset</strong>.</p>\n</blockquote>\n\n<p>And after reading this, I expect this two programs work identically:</p>\n\n<pre><code>/* Program 1 */\n#include &lt;stdio.h&gt;\n\n\nint main()\n{\n    char arr[] = \"hello\";\n    arr[0] = 'H';\n    printf(\"%s\\n\", arr);\n\n}\n\n/* Program 2 */\n#include &lt;stdio.h&gt;\n\n\nint main()\n{\n    char *arr = \"hello\";\n    arr[0] = 'H';\n    printf(\"%s\\n\", arr);\n\n}\n</code></pre>\n\n<p>But only the first one is actually works. With the second one I get segmentation fault.</p>\n\n<p>Why? Reference to an authoritative source would be much appreciated.</p>\n"}, {"tags": ["c", "gcc", "assembly", "powerpc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439997429, "post_id": 32099489, "comment_id": 52093459, "body": "This is the design choice of the compiler programmers. They&#39;ve made it for their reasons, while seeing the whole picture."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 3, "creation_date": 1439997791, "post_id": 32099489, "comment_id": 52093712, "body": "The generated code doesn&#39;t make sense. Since I trust compilers, the logical conclusion is that <i>you</i>&#39;ve made a mistake... Please re-check your code and post."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439997851, "post_id": 32099489, "comment_id": 52093760, "body": "Please read the EDIT"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 4, "creation_date": 1439997920, "post_id": 32099489, "comment_id": 52093795, "body": "No, the code is incorrect. <code>y ++;</code> should be executed unconditionally. You&#39;ve probably made an error while &quot;copy-pasting&quot; the generated assembly..."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439998036, "post_id": 32099489, "comment_id": 52093869, "body": "Oh, Yes. That&#39;s my fault in copy-pasting. Sorry. I corrected it."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439998058, "post_id": 32099489, "comment_id": 52093884, "body": "My question is why assembler uses the negative form?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1439998134, "post_id": 32099489, "comment_id": 52093934, "body": "It&#39;s still incorrect."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439998203, "post_id": 32099489, "comment_id": 52093984, "body": "I&#39;ve edited the code. Thanks for your hints."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439998251, "post_id": 32099489, "comment_id": 52094012, "body": "As you are asking about the <b>compiler&#39;s</b> output, why not post the compiler generated code, instead of your hand-written code?"}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1439998334, "post_id": 32099489, "comment_id": 52094072, "body": "The compiler can do absolutely anything it wants as long as the program functions as described (by the C code) what would you have the assembly output for <code>if(!!!!!!!!!!!someBool){doSomething();}</code> be?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1439998356, "post_id": 32099489, "comment_id": 52094087, "body": "Regarding the question: Instead of just asking, you should think yourself and try to follow both, the generated code and the one you <b>think</b> had to be generated. Then you will see <b>why</b> the compiler generated the code as it did."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439998424, "post_id": 32099489, "comment_id": 52094139, "body": "Could be an assignment/homework."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1439998537, "post_id": 32099489, "comment_id": 52094223, "body": "Why should it use exactly what&#39;s written in your code? The optimizer can do even more surprise things. And why don&#39;t add the tag for that architecture?"}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439998584, "post_id": 32099489, "comment_id": 52094251, "body": "@Olaf: I&#39;ve post the generated code. I use the handwritten one to show the problem simple."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1439998663, "post_id": 32099489, "comment_id": 52094303, "body": "@L\u01b0uV\u0129nhPh&#250;c That is common for all architecture assemblers."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439998785, "post_id": 32099489, "comment_id": 52094389, "body": "All you can vote down for my question. But the question is really important for me and that is not assignment or homework. I can&#39;t find anything on the web for my own and I forced to explain my problem on stackoverflow."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439998945, "post_id": 32099489, "comment_id": 52094508, "body": "It shows little research, which is a valid reason for DV. A simple analysis will give you the answer. And it is irrelevant if it is important for <i>you</i> (sorry to tell you the truth). But perhaps complaining about the bad downvoters on SO is easier, than reading the comments and thinking about them."}, {"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 0, "creation_date": 1439999169, "post_id": 32099489, "comment_id": 52094677, "body": "@HosseinMobasher I&#39;m not going to comment on the downvotes. But I am going to recommend to you Olaf&#39;s suggestion: If you were the compiler, how would you translate this code to assembly? Write it down, and see."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439999201, "post_id": 32099489, "comment_id": 52094703, "body": "@Olaf Thanks for your comment. I read all of them and do what they want (In some cases). But I thought about my problem much more and I forced to ask the question here."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "reply_to_user": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 0, "creation_date": 1439999335, "post_id": 32099489, "comment_id": 52094806, "body": "@ArjunShankar: The assembler can do that with equal comparison instruction, but preferred to use negated form. We can do that with the following code:   <code>cmpwi r0, 10    --- beq label1      --- b label2      ---  label1:   add to x     ---  label2:  add to y      </code>"}, {"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 2, "creation_date": 1439999567, "post_id": 32099489, "comment_id": 52094975, "body": "So... you think having two branches is better than having one branch?"}, {"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 0, "creation_date": 1439999578, "post_id": 32099489, "comment_id": 52094985, "body": "I hope that answers your question ;)"}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "reply_to_user": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 0, "creation_date": 1439999687, "post_id": 32099489, "comment_id": 52095067, "body": "@ArjunShankar Assembler with optimizing level 0 is not intelligent. So, producing more that one branch is not impossible."}, {"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 1, "creation_date": 1439999814, "post_id": 32099489, "comment_id": 52095173, "body": "@HosseinMobasher this is simply too simple an &#39;optimization&#39; for a compiler to skip. It involves no cost at all. Anyway, I see your question has now been answered to your satisfaction. Cheers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439999871, "post_id": 32099489, "comment_id": 52095223, "body": "The C standard does not define optimization levels. The compiler is allowed to do anything it wants as long as the generated code follows the abstract machine. And why should the compiler generate complete superfluous code, whcih does not even help perserving the structure more than better code?"}], "answers": [{"comments": [{"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439998863, "post_id": 32099883, "comment_id": 52094446, "body": "Thanks for your answer. Could you please give me such a reference to read more about that?"}, {"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "reply_to_user": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439999295, "post_id": 32099883, "comment_id": 52094776, "body": "@HosseinMobasher There isn&#39;t really a reference, it&#39;s just that the logic of a branch is the opposite of the logic of a &#39;if&#39;, so you have to negate the condition do to the same thing. Take a notepad and try to do a simple &#39;if&#39;  using a branch without negating condition. You will see that you need more than one branch, but you can do it in a single branch if you negate."}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439999602, "post_id": 32099883, "comment_id": 52095009, "body": "Thanks for your reply. I used assembler with optimizing level 0. So, I thought that the assembler do that with more than one branch."}, {"owner": {"reputation": 21234, "user_id": 274261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3be1df1fa2e3588564cdd9a4f517ad0?s=128&d=identicon&r=PG", "display_name": "ArjunShankar", "link": "https://stackoverflow.com/users/274261/arjunshankar"}, "edited": false, "score": 0, "creation_date": 1439999700, "post_id": 32099883, "comment_id": 52095075, "body": "@ElderBug you can really improve this answer by editing your above comment into it. And grabbing the OP&#39;s handwritten code (with two branches, in a comment below the question now) and putting that in there too."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1439999958, "post_id": 32099883, "comment_id": 52095277, "body": "@HosseinMobasher: The assembler does not optimize (in general)! It is the C compiler which optimizes!"}, {"owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "edited": false, "score": 0, "creation_date": 1440000013, "post_id": 32099883, "comment_id": 52095314, "body": "Yes, I mean the compiler. Sorry for that."}], "tags": [], "owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "is_accepted": true, "score": 1, "last_activity_date": 1440000894, "last_edit_date": 1440000894, "creation_date": 1439998350, "answer_id": 32099883, "question_id": 32099489, "link": "https://stackoverflow.com/questions/32099489/assembler-generates-negative-forms-of-conditions-not-positive-one/32099883#32099883", "title": "Assembler generates negative forms of conditions, not positive one", "body": "<p>The reason the the negative form is simple : branching is the opposite of an <code>if</code>. Branching means \"skip if\", while <code>if</code> means \"execute if\". So, for an assembly with a conditional branching model, all the <code>if</code> conditions will be negated to translate to a single branch. For an <code>if</code>+<code>else</code>, it doesn't matter because the two can be swapped, but usually the negation is preserved.</p>\n\n<p>Negating is the intuitive thing here ; take your example :</p>\n\n<pre><code>if (x == 10)\n{\n    x++;\n}\ny++;\n</code></pre>\n\n<p>When you \"run\" the code in your head, what do you do ? You look at the condition, and check if it is true. If it is, you do <code>x++</code>, then <code>y++</code>. If it isn't, you jump directly to <code>y++</code>. In other words, you jump (branch) to <code>y++</code> if the condition is false ; you intuitively negate the condition.</p>\n"}], "owner": {"reputation": 4039, "user_id": 860721, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ab3456aabcc39571a064666e258b33fe?s=128&d=identicon&r=PG&f=1", "display_name": "Hossein Mobasher", "link": "https://stackoverflow.com/users/860721/hossein-mobasher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 32099883, "answer_count": 1, "score": -5, "last_activity_date": 1440000894, "creation_date": 1439997249, "last_edit_date": 1439999879, "question_id": 32099489, "link": "https://stackoverflow.com/questions/32099489/assembler-generates-negative-forms-of-conditions-not-positive-one", "title": "Assembler generates negative forms of conditions, not positive one", "body": "<p>I wondered why <code>gcc</code> assembler use negative form of conditions instead of positive one. Suppose that we have following <code>C</code> code:</p>\n\n<pre><code>if (x == 10)\n{\n  x ++;\n}\n\ny ++;\n</code></pre>\n\n<p>When I use <code>gcc</code> to compile and produce object file, the result of assembly code in <code>PowerPC</code> assembly is as follows:</p>\n\n<pre><code>  20:   2c 00 00 0a     cmpwi   r0,10\n  24:   40 82 00 10     bne 34 &lt;main+0x34&gt;\n  28:   81 3f 00 08     lwz r9,8(r31)\n  2c:   38 09 00 01     addi    r0,r9,1\n  30:   90 1f 00 08     stw r0,8(r31)\n  34:   81 3f 00 0c     lwz r9,12(r31)\n  38:   38 09 00 01     addi    r0,r9,1\n  3c:   90 1f 00 0c     stw r0,12(r31)\n</code></pre>\n\n<p>The assembly uses <code>bne</code> while I used equal <code>==</code> in my <code>C</code> code.</p>\n\n<p><strong>EDIT 1:</strong></p>\n\n<p>I know that the code is working perfectly. But I means why assembler use negative form not positive one.</p>\n\n<p><strong>EDIT 2:</strong>\nI am using the compiler with level 0 optimizer and we know that, it is not intelligent. My means from question is that, why assembler couldn't produce assembly such a below:</p>\n\n<pre><code>cmpi x, 10\nbeq label1\nb label2\n\nlabel1:\nadd x, x, 1\nlabel2:\nadd y, y, 1\n</code></pre>\n\n<p>Could any one please explain what happens?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "winapi", "exception", "x86", "sse"], "owner": {"reputation": 1251, "user_id": 2214913, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/3b75c8cbd4fde9e754e3c70b39484726?s=128&d=identicon&r=PG", "display_name": "user2214913", "link": "https://stackoverflow.com/users/2214913/user2214913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1439996459, "creation_date": 1439996459, "question_id": 32099129, "link": "https://stackoverflow.com/questions/32099129/how-to-set-up-handler-for-sse-misalignment-exception", "title": "How to set up handler for SSE misalignment exception?", "body": "<p>I am using mingw on win32..</p>\n\n<p>I use signal() from c library that allow me to setup handler for some hardvare exceptions (like integer dib by zero, illegal operation etc) but it seems riight now that it not works for SSE misalignment exception (who do not go thru my handler but outa him and crashes app).</p>\n\n<p>How to set such handler? I would like to show message box on such misalignment with at least \"misaligned see acces\" communicate, yet better with some additionel info..</p>\n\n<p>How to do that?</p>\n"}, {"tags": ["c++", "c", "linux", "libusb"], "comments": [{"owner": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 0, "creation_date": 1439996174, "post_id": 32098883, "comment_id": 52092503, "body": "This might be more appropriate for libusb developers. Can you try with latest version of the library, and if it still happens, report a bug to them?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1439996716, "post_id": 32098883, "comment_id": 52092919, "body": "Perhaps you can debug the program and get a stack trace. You can also use a debug version of the libusb as described in <a href=\"http://www.libusb.org/wiki/debug\" rel=\"nofollow noreferrer\">libusb.org/wiki/debug</a>."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1439999265, "post_id": 32098883, "comment_id": 52094751, "body": "This still segfaults with the <code>else</code>?"}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1439999397, "post_id": 32098883, "comment_id": 52094849, "body": "@donjuedo yes it does."}, {"owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 1, "creation_date": 1439999511, "post_id": 32098883, "comment_id": 52094936, "body": "As you are not showing that part, have you checked your call to <code>libusb_init(NULL)</code> ?"}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "reply_to_user": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 0, "creation_date": 1440000179, "post_id": 32098883, "comment_id": 52095431, "body": "@Leiaz Thanks. I had passed reference to a pointer of null instead of null itself."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440075306, "post_id": 32098883, "comment_id": 52130027, "body": "suggest reading the documentation (and code examples) at &lt;<a href=\"http://www.dreamincode.net/forums/topic/148707-introduction-to-using-libusb-10/\" rel=\"nofollow noreferrer\">dreamincode.net/forums/topic/&hellip;</a>&gt; which has a number of steps that need to be performed that the posted code is not doing."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440076112, "post_id": 32098883, "comment_id": 52130605, "body": "the library is written for C++.   The posted code calls printf() so is for C rather than C++."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440078163, "post_id": 32098883, "comment_id": 52132227, "body": "@user3629249 the library is written for c/c++ and it&#39;s also available cross platform. This is an excerpt from code the answer has already been found."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439997173, "post_id": 32099436, "comment_id": 52093270, "body": "Heh.. missed it surprisingly..It&#39;s like &quot;is there a check? Yes there is.&quot; But without paying attention what we do with this check.."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998215, "post_id": 32099436, "comment_id": 52093990, "body": "Even if that would be a problem. The problem that returns the segmentation fault is the code that I have specified above. When putting a printf statement before the if statement it is not hit. The problem is within the libusb_open_device_with_vid_pid function or my use of it."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998433, "post_id": 32099436, "comment_id": 52094148, "body": "@MathewWright, Well, I did assume the library call has no internal bug.  The parameters going in are simple, and NULL is permitted as the first param.  So how did you determine the open is where the crash is?"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998584, "post_id": 32099436, "comment_id": 52094252, "body": "@MathewWright, Also, it wouldn&#39;t hurt to add the return mentioned, retest, and edit the post, just to eliminate distraction (If indeed I&#39;m mistaken)."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998726, "post_id": 32099436, "comment_id": 52094344, "body": "@donjuedo, I assumed it would be fine also. I used simple printf statements before and after the open function. The printf after the open function did not show. The program terminates at that function call because of a segmentation error."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439999141, "post_id": 32099436, "comment_id": 52094650, "body": "@MathewWright, that is what I suspected.  <code>printf()</code> buffers output, so the absence of text is misleading.  That&#39;s also why I suggested adding the change anyway.  If the crash is in the claim, and the return is added, the <code>printf()</code> output will get a chance to flush."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439999369, "post_id": 32099436, "comment_id": 52094827, "body": "@donjuedo I added the change you suggested above to the code above. I have also removed the entire check statement. Sadly I still get the error."}], "tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1439997132, "creation_date": 1439997132, "answer_id": 32099436, "question_id": 32098883, "link": "https://stackoverflow.com/questions/32098883/segmentation-fault-on-libusb-get-device-with-vid-pid/32099436#32099436", "title": "segmentation fault on libusb_get_device_with_vid_pid", "body": "<p>You are getting <code>NULL</code> for <code>dev</code>, and using it anyway.  You could add a return statement after the <code>printf()</code>, or an <code>else</code> before the <code>libusb_claim_interface()</code>.</p>\n"}], "owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439999045, "creation_date": 1439995869, "last_edit_date": 1439999045, "question_id": 32098883, "link": "https://stackoverflow.com/questions/32098883/segmentation-fault-on-libusb-get-device-with-vid-pid", "title": "segmentation fault on libusb_get_device_with_vid_pid", "body": "<p>I'm trying to open a connection to a camera from a raspberry pi 2 over usb. I'm able to detect the camera but when I try to open a connection using            </p>\n\n<pre><code>libusb_open_device_with_vid_pid(null, vendor id, product id);\n</code></pre>\n\n<p>But I receive a segmentation fault. I've narrowed it down and that line of code is what causes the segmentation fault.     </p>\n\n<pre><code>void opendevice(){\n    libusb_device_handle* dev;\n    struct libusb_device_descriptor* desc;\n    int err;\n\ndev = libusb_open_device_with_vid_pid(NULL,0x2a0b,0x00f8);\n\n   if (dev == NULL){\n        printf(\"device not found\\n\");\n       }\n\nelse {\n     err = libusb_claim_interface(dev, 0);\n     }    \n}\n</code></pre>\n\n<p>The message from the pi opened over putty on my computer is.</p>\n\n<pre><code>Segmentation fault\n</code></pre>\n\n<p>Any ideas as to what I am doing wrong?</p>\n"}, {"tags": ["c++", "c", "datetime", "timezone", "dst"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1439995832, "post_id": 32098778, "comment_id": 52092244, "body": "For clarification, are you saying that your device can&#39;t divide? Or why is it impossible to use a solution which requires modulus?"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 0, "creation_date": 1439995995, "post_id": 32098778, "comment_id": 52092355, "body": "@Bathsheba boost is not the answer for everything. Especially if <code>I have access to minimal C and C++ libraries within the device</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 1, "creation_date": 1439996327, "post_id": 32098778, "comment_id": 52092612, "body": "@MateuszGrzejek That close is uncalled-for in my opinion. It&#39;s a simple mathematical error which has an obvious solution; the question is clear."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1439996370, "post_id": 32098778, "comment_id": 52092642, "body": "That formula will be off by one week if MonthCode + YearCode is greater than or equal to DayOfWeek, because in that case you will be counting from a negative date. You need to check for that condition and add 7 if it is the case. (Question was closed before I manage to finish typing the answer.)"}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1439996847, "post_id": 32098778, "comment_id": 52093013, "body": "No rici, I&#39;m saying that the solution that carries out the reverse operation, calculates the modulus for further use but discards the quotient from the same calculation, i.e. the quotient is unimportant when carrying out the reverse operation. In order to transpose, I would need to feed in both the modulus and quotient (along with the divisor) to arrive at the original dividend."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439996979, "post_id": 32098778, "comment_id": 52093126, "body": "<b>There is no language C/C++!</b> Pick one language!"}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1439997087, "post_id": 32098778, "comment_id": 52093208, "body": "Thanks rici... I&#39;ll give that a whirl."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1439997308, "post_id": 32098778, "comment_id": 52093376, "body": "@MickM:  I voted to reopen.  In the meantime, this library might be helpful to you: <a href=\"http://howardhinnant.github.io/date_v2.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/date_v2.html</a>  With it you can write expressions such as <code>tue[3]&#47;may&#47;2015</code> which represents the 3rd Tuesday of May in 2015.  That can be converted to a serial count of days, or to a year/month/day format, all very easily, and very accurately.  It is based on the low-level date algorithms presented here: <a href=\"http://howardhinnant.github.io/date_algorithms.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/date_algorithms.html</a>  C++11 or C++14 is required for the date lib, but not for the algorithms."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1439997437, "post_id": 32098778, "comment_id": 52093469, "body": "Note that 1) DST changes often; 2) most countries switch on the <i>last</i> occurrence of a weekday, which is either the 4th or 5th; and 3) in Brazil, you need to know when it&#39;s <i>carnaval</i>."}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1439998332, "post_id": 32098778, "comment_id": 52094071, "body": "Haha... Yeah, we are aware of carnaval and many other anomolies. I spent a number of weeks tying myself in knots over such things before opting for a simpler approach. Our table which describes the info listed above is produced (and updated) externally and I parse out the info for each build. Early on I looked at using the comprehensive Linux DST tables but just don&#39;t have the space."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1439999548, "post_id": 32098778, "comment_id": 52094961, "body": "Fwiw, here is a C++11/14 parser of the IANA timezone database: <a href=\"http://howardhinnant.github.io/tz.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/tz.html</a>"}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1440002697, "post_id": 32098778, "comment_id": 52096819, "body": "Thanks Howard... I&#39;ll be sure to take a look at your solutions."}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1440073999, "post_id": 32098778, "comment_id": 52129062, "body": "This seems to work:   date = DoW + (((WoM - (yearCode + monthCode &lt;= DoW)) * 7) - monthCode - yearCode);   For more situations but I need to test further and make further modifications for the &quot;2 weeks out scenario&quot;."}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1440166184, "post_id": 32098778, "comment_id": 52174286, "body": "Further modifier added: &lt;br&gt;      date = DoW + (((WoM - y) * (yearCode + monthCode &lt;= DoW)) - monthCode - yearCode) + ((yearCode + monthCode &gt;= (DoW + 7) * 7);"}], "answers": [{"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1440123357, "post_id": 32103638, "comment_id": 52153487, "body": "Disclaimer:  This formula is valid for the proleptic Gregorian calendar back to <code>Wed 0000-03-01</code>, but no earlier.  That is an impressive range, but it should be noted."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1440125677, "post_id": 32103638, "comment_id": 52154049, "body": "@howard. Fair enough. As far as I remember, daylight savings time is a more recent invention than the Gregorian calendar -- or even time zones -- so in the context of the application, I don&#39;t think it is necessary to consider any proleptic year, and much less whether to follow Bede&#39;s null-free numerology. But consider the limitation noted."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1440167367, "post_id": 32103638, "comment_id": 52175257, "body": "I suspect it could be modified to handle negative years by changing <code>year = year % 400</code> to floored or Euclidian division: <a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Modulo_operation</a>  But I have not tested that suspicion.  Agreed that such a change would be targeting a very small audience.  Fwiw, the earliest entry in the IANA timezone database is 1835-01-01. :-)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1440168727, "post_id": 32103638, "comment_id": 52176214, "body": "@howard: iirc, time zones were a response to the needs of the railway timetable; prior to the existence of a transportation medium with predictable duration, it was not really problematic for every village to idiosyncratically use its own town clock to define the local time. And yes, using a more sensible modulus function and astronomic year numbering would proleptically extend the algorithm to the beginning of <code>int</code>-representable time."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1440041414, "last_edit_date": 1440041414, "creation_date": 1440011090, "answer_id": 32103638, "question_id": 32098778, "link": "https://stackoverflow.com/questions/32098778/find-the-date-given-the-year-the-month-and-the-nth-occurrance-of-day-within-t/32103638#32103638", "title": "Find the date given the year, the month and the &quot;nth&quot; occurrance of day within the month C/C++", "body": "<p>That formula will be off by one week (or even two weeks) if <code>MonthCode</code> + <code>YearCode</code> is greater than or equal to <code>DayOfWeek</code>, because in that case you will be counting <code>NthOccurenceOfDay</code> from a negative date.</p>\n\n<p>As an alternative, with no tables, you can compute the day of week of the first of the month using, for example, <a href=\"https://en.wikipedia.org/wiki/Determination_of_the_day_of_the_week#Zeller.E2.80.99s_algorithm\" rel=\"nofollow\">Zeller's algorithm</a>:</p>\n\n<pre><code>int NthOccurrence(int year, int month, int n, int dayOfWeek) {\n  // year is the current year (eg. 2015)\n  // month is the target month (January == 1...December == 12)\n  // Finds the date of the nth dayOfWeek (Sun == 0...Sat == 6)\n\n  // Adjust month and year\n  if (month &lt; 3) { --year, month += 12; }\n  // The gregorian calendar is a 400-year cycle\n  year = year % 400;\n  // There are no leap years in years 100, 200 and 300 of the cycle.\n  int century = year / 100;\n  int leaps = year / 4 - century;\n  // A normal year is 52 weeks and 1 day, so the calendar advances one day.\n  // In a leap year, it advances two days.\n  int advances = year + leaps;\n  // This is either magic or carefully contrived,\n  // depending on how you look at it:\n  int month_offset = (13 * (month + 1)) / 5;\n  // From which, we can compute the day of week of the first of the month:\n  int first = (month_offset + advances) % 7;\n  // If the dayOfWeek we're looking for is at least the day we just\n  // computed, we just add the difference. Otherwise, we need to add 7.\n  // Then we just add the desired number of weeks.\n  int offset = dayOfWeek - first;\n  if (offset &lt; 0) offset += 7;\n  return 1 + offset + (n - 1) * 7;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 1, "last_activity_date": 1463853797, "last_edit_date": 1463853797, "creation_date": 1440017005, "answer_id": 32105317, "question_id": 32098778, "link": "https://stackoverflow.com/questions/32098778/find-the-date-given-the-year-the-month-and-the-nth-occurrance-of-day-within-t/32105317#32105317", "title": "Find the date given the year, the month and the &quot;nth&quot; occurrance of day within the month C/C++", "body": "<p>Using <a href=\"http://howardhinnant.github.io/date/date.html\" rel=\"nofollow\">this open source, cross platform date library</a>, one can write:</p>\n\n<pre><code>#include \"date.h\"\n#include &lt;iostream&gt;\n\nint\nmain()\n{\n    using namespace date;\n    year_month_day us_daylight_starts = sys_days(sun[2]/mar/2015);\n    year_month_day us_daylight_ends   = sys_days(sun[1]/nov/2015);\n    std::cout &lt;&lt; us_daylight_starts &lt;&lt; '\\n';\n    std::cout &lt;&lt; us_daylight_ends &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>which will output:</p>\n\n<pre><code>2015-03-08\n2015-11-01\n</code></pre>\n\n<p>The formulas this library is based on are in the public domain and <a href=\"http://howardhinnant.github.io/date_algorithms.html\" rel=\"nofollow\">documented here</a>.</p>\n\n<p>The algorithms paper has very complete unit tests validating the date algorithms over a range of millions of years (a far larger range than is necessary).</p>\n\n<p>Sometimes daylight savings rules are written in terms of the <em>last</em> weekday of a month.  That is just as easily handled:</p>\n\n<pre><code>year_month_day ymd = sys_days(sun[last]/nov/2015);\nstd::cout &lt;&lt; ymd &lt;&lt; '\\n';  // 2015-11-29\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463853797, "creation_date": 1439995648, "last_edit_date": 1439995970, "question_id": 32098778, "link": "https://stackoverflow.com/questions/32098778/find-the-date-given-the-year-the-month-and-the-nth-occurrance-of-day-within-t", "title": "Find the date given the year, the month and the &quot;nth&quot; occurrance of day within the month C/C++", "body": "<p>In order that a device (with limited memory) is able to manage its own timezone and daylight savings, I'm trying to calculate daylight savings triggers for 85 time zones based on a simplified description of each timezone. I have access to minimal C and C++ libraries within the device. The format of the timezone (inc. DST) description for each time zone is as follows:</p>\n\n<ul>\n<li>UTC - the base time and date from system clock</li>\n<li>GMTOffsetMinutes - offset from GMT with DST inactive</li>\n<li>DSTDeltaMinutes - modifier to above with DST active (as applicable to TZ)</li>\n<li>DSTStartMonth - month in which DST becomes active</li>\n<li>DSTStartNthOccurranceOfDay - the nth occurrence of the day name in month</li>\n<li>DSTDayOfWeek - Sun = 0 through to Sat = 6</li>\n<li>DSTStartHour - hour at which DST becomes active</li>\n<li>DSTStartMinute - minute at which DST becomes active</li>\n<li>and corresponding EndMonth, EndNth..., EndHour, EndMinute</li>\n</ul>\n\n<p>I have found numerous examples going the other way, i.e. starting with the date, but they involve using the modulus, keeping the remainder and dropping the quotient hence I have been unable to transpose the formula to suit my needs.</p>\n\n<p>I also tried to reuse the standard \"Jan = 6, Feb = 2, Mar = 2, Apr = 5, May = 0, etc. modifier table and year modifiers from the \"tell me what day the 25th of June, 2067 is?\" party trick and developed the following algorithm.</p>\n\n<pre><code>Date = DayOfWeek + ((NthOccuranceOfDay - 1) x 7 ) - MonthCode - YearCode\n</code></pre>\n\n<p>This worked for the first 6 random test dates I selected but then I started to see dates for which it failed. Is it possible that the basic algorithm is sound but I'm missing a further modifier or maybe that I'm applying the modifiers incorrectly?</p>\n\n<p>Is there another solution I could utilize?</p>\n"}, {"tags": ["python", "c", "struct", "swig"], "answers": [{"tags": [], "owner": {"reputation": 4793, "user_id": 1099230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9d86aa069778820dfc676147d432c2d?s=128&d=identicon&r=PG", "display_name": "luoluo", "link": "https://stackoverflow.com/users/1099230/luoluo"}, "is_accepted": true, "score": 2, "last_activity_date": 1439994908, "creation_date": 1439994908, "answer_id": 32098510, "question_id": 32098093, "link": "https://stackoverflow.com/questions/32098093/access-struct-in-python-using-swig/32098510#32098510", "title": "Access struct in Python using SWIG", "body": "<p>I think you don't have to, except you want to add member functions to C structures.</p>\n\n<pre><code>/* file : vector.h */\n...\ntypedef struct {\n    double x,y,z;\n} Vector;\n\n\n// file : vector.i\n%module mymodule\n%{\n    #include \"vector.h\"\n%}\n\n%include \"vector.h\"          // Just grab original C header file\n</code></pre>\n\n<p><strong>Adding member functions to C structures</strong></p>\n\n<pre><code>/* file : vector.h */\n...\ntypedef struct {\n    double x,y,z;\n} Vector;\n\n\n// file : vector.i\n%module mymodule\n%{\n    #include \"vector.h\"\n%}\n%extend Vector {             // Attach these functions to struct Vector\n    Vector(double x, double y, double z) {\n        Vector *v;\n        v = (Vector *) malloc(sizeof(Vector));\n        v-&gt;x = x;\n        v-&gt;y = y;\n        v-&gt;z = z;\n        return v;\n    }\n    ~Vector() {\n        free($self);\n    }\n    double magnitude() {\n        return sqrt($self-&gt;x*$self-&gt;x+$self-&gt;y*$self-&gt;y+$self-&gt;z*$self-&gt;z);\n    }\n    void print() {\n        printf(\"Vector [%g, %g, %g]\\n\", $self-&gt;x,$self-&gt;y,$self-&gt;z);\n    }\n};\n</code></pre>\n\n<p><a href=\"http://www.swig.org/Doc1.3/SWIGDocumentation.html#SWIG_nn18\" rel=\"nofollow\">SWIG-1.3 Documentation</a></p>\n"}], "owner": {"reputation": 1155, "user_id": 4689412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G3XRh.jpg?s=128&g=1", "display_name": "Maximilian", "link": "https://stackoverflow.com/users/4689412/maximilian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 32098510, "answer_count": 1, "score": 1, "last_activity_date": 1439994908, "creation_date": 1439993905, "last_edit_date": 1439994816, "question_id": 32098093, "link": "https://stackoverflow.com/questions/32098093/access-struct-in-python-using-swig", "title": "Access struct in Python using SWIG", "body": "<p>Do I have to completely redefine a given <strong>struct</strong> (given in a .c file, which is included in the compilation) in the interface file to make it accessible via python? </p>\n\n<p><strong>EDIT:</strong>\nIf it is defined in a header file, I only have to include the header file in the interface file, right?</p>\n"}, {"tags": ["c", "algorithm", "conditional", "integer-overflow"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1439994449, "post_id": 32098091, "comment_id": 52091100, "body": "I&#39;m voting to close this question as off-topic because this is about formulas/algorithms, not programming."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439994499, "post_id": 32098091, "comment_id": 52091136, "body": "@Olaf so should I post it on Mathematics SE?"}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439994569, "post_id": 32098091, "comment_id": 52091201, "body": "PS: since when are questions about algorithms off-topic?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439994578, "post_id": 32098091, "comment_id": 52091214, "body": "I do not know the policy of that site, so I&#39;m careful to recommend. Btw: if you want &quot;unlimited&quot; integers, try Python. If speed is not an issue, it is the swiss army knife of programming."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439994709, "post_id": 32098091, "comment_id": 52091314, "body": "Thanks @Olaf for the advise, but I think with Python it&#39;s impossible to solve it in O(1) as the algorithm slows down with bigger numbers."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439994720, "post_id": 32098091, "comment_id": 52091324, "body": "Hmm, you might be right, but as given, it is lacking more inforamtion. E.g. what is the possible range of values? Many languages have more than one integer type. I also see no specific relation to C."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1439994788, "post_id": 32098091, "comment_id": 52091377, "body": "Complexity is not a matter of the programming language/implementation or execution speed, but the algorithm! Either is is O(1) or it is not."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439994921, "post_id": 32098091, "comment_id": 52091470, "body": "@Olaf you&#39;re right but still Python would be kind of O(ln(n)) because the code is translated to an algorithm that slows down with bigger numbers."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1439995753, "post_id": 32098091, "comment_id": 52092178, "body": "@KlausPrinoth Hope this helps."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440020681, "post_id": 32098091, "comment_id": 52106887, "body": "@Olaf &quot;Software algorithms&quot; are explicitly mentioned as on-topic in the help center."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1440020758, "post_id": 32098091, "comment_id": 52106909, "body": "@KlausPrinoth If a, b and c fit into O(1) bits, then a^2, b^2 and c^2 fit into 2 * O(1) = O(1) bits too, so your argument is not really valid"}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "reply_to_user": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1440021113, "post_id": 32098091, "comment_id": 52107054, "body": "@NiklasB. this explains also Riccis answer, but I&#39;m actually searching a solution where just integers of the specified size are used. And there should be just primitive maths like <code>+-*&#47;^&amp;|%</code> and no tricks to pack the numbers in bigger integers, so that the solution is also applicable to any other integer size."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440021222, "post_id": 32098091, "comment_id": 52107095, "body": "Also by just packing them in bigger types, there is no limit and you end up with some O(ln(n)) solution."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1440021529, "post_id": 32098091, "comment_id": 52107230, "body": "@KlausPrinoth I&#39;m just saying, just by specifying that the input is represented using 32 bits per number and intermediate computations should not require more than 32 bits, you don&#39;t really force any kind of creative solution. Because you can easily implement 64 bit integers using 32 bit integers, in O(1) per operation, as Ricci&#39;s answer shows. Seems however that one of the answers is what you were probably looking for"}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440021763, "post_id": 32098091, "comment_id": 52107308, "body": "I&#39;m thinking to accept Sumeets answer but I&#39;m not sure if it works always(until MAX_INT/2 or whatever)"}], "answers": [{"comments": [{"owner": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 0, "creation_date": 1439995988, "post_id": 32098779, "comment_id": 52092349, "body": "This approach may be inaccurate if you calculate those quotients. If you reduce the fractions and test for equality then it will no longer be O(1)."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1439996140, "post_id": 32098779, "comment_id": 52092473, "body": "I have thought of something similar before, but I think the flaw here is that you can&#39;t be sure that <code>b</code> is divisible by <code>c+a</code> and <code>c-a</code> is divisible by <code>b</code>. And if it&#39;s not it will be rounded and give false positives."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1439996214, "post_id": 32098779, "comment_id": 52092535, "body": "@KlausPrinoth Tell me the language u are using."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1439996303, "post_id": 32098779, "comment_id": 52092597, "body": "I tagged the question <code>c</code>, but I think the language doesn&#39;t matter a lot as long as it uses integers that can overflow and are <i>not</i> automatically converted to floating point numbers."}, {"owner": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "reply_to_user": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1439996540, "post_id": 32098779, "comment_id": 52092782, "body": "@KlausPrinoth <a href=\"https://en.wikipedia.org/wiki/Pythagorean_triple#Generating_a_triple\" rel=\"nofollow noreferrer\">Euclid&#39;s formula</a> shows that you are correct!"}, {"owner": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 0, "creation_date": 1439996748, "post_id": 32098779, "comment_id": 52092938, "body": "@Sumeet 3/10 != 2/3. And the problem of determining if 2 non-integer types are equal still exists."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 0, "creation_date": 1439996827, "post_id": 32098779, "comment_id": 52092999, "body": "@MichaelSPriz It is when you are using C language and the numbers are integers."}, {"owner": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 1, "creation_date": 1439997271, "post_id": 32098779, "comment_id": 52093342, "body": "I still do not think that this is correct. You still would need to determine if (b%(c+a))/(c+a) and ((c-a)%b)/b are equal."}, {"owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "edited": false, "score": 0, "creation_date": 1439997612, "post_id": 32098779, "comment_id": 52093579, "body": "C+A could still overflow. Example: if the last 2 bits of C are set and the 2nd to last bit of A 11b + 01b = [1]00b"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "edited": false, "score": 1, "creation_date": 1440008302, "post_id": 32098779, "comment_id": 52099912, "body": "@Louis Ricci so this method appears to be limited to <code>0&lt;=a&lt;=b&lt;c&lt;=UINT_MAX&#47;2</code>.  Much better than OP&#39;s original limit of about <code>sqrt(UINT_MAX)</code>."}, {"owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440008825, "post_id": 32098779, "comment_id": 52100237, "body": "@chux - I proposed a more complex (operation wise) solution that will work on all UINT32&#39;s, but if undefined results are acceptable for the very large numbers than this concise solution is great."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "reply_to_user": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 0, "creation_date": 1440023022, "post_id": 32098779, "comment_id": 52107758, "body": "Finally got time to test it, it is a really nice solution and would be great if it would work, but @MichaelSPriz was absolutely right, this code gives false positives(for now I don&#39;t know if there are false negatives to), the smallest false positive I could find is: <code>a=6,b=7,c=9</code>, which is clearly not a pythagorean triple."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "reply_to_user": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 0, "creation_date": 1440023623, "post_id": 32098779, "comment_id": 52107948, "body": "Yeah not so good, there are false negatives too: <code>a=5,b=12,c=13</code>, this answer also isn&#39;t proven and there is no logic that it works, following math rules @MichaelSPriz &#39;s solution should be right, but not an improvement to the solution I proposed."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440080940, "post_id": 32098779, "comment_id": 52134298, "body": "@KlausPrinoth fine i am removing my answer.It was good of you to point out the mistake. Constructive criticism is what i like."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 1096, "user_id": 5144555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c0f1046a519313e19ad3929479ec85?s=128&d=identicon&r=PG&f=1", "display_name": "Michael S Priz", "link": "https://stackoverflow.com/users/5144555/michael-s-priz"}, "edited": false, "score": 0, "creation_date": 1440080965, "post_id": 32098779, "comment_id": 52134318, "body": "@MichaelSPriz ok i am removing my answer,"}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440082209, "post_id": 32098779, "comment_id": 52135233, "body": "@KlausPrinoth I think now, it will work for all cases."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440082894, "post_id": 32098779, "comment_id": 52135811, "body": "You don&#39;t have to remove your answer, you showed research effort and got up-voted for that, now it also works, but to convert the integers to doubles is still not solution I&#39;m seeking."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440086594, "post_id": 32098779, "comment_id": 52138257, "body": "Note: case where <code>c+a</code> overflows does not look like this code will work."}], "tags": [], "owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "is_accepted": false, "score": 2, "last_activity_date": 1440082149, "last_edit_date": 1440082149, "creation_date": 1439995650, "answer_id": 32098779, "question_id": 32098091, "link": "https://stackoverflow.com/questions/32098091/efficient-test-for-pythagorean-triples-in-modulo-integer-space/32098779#32098779", "title": "Efficient test for pythagorean triples in modulo integer space", "body": "<p>I think little rearrangement would help a lot.</p>\n\n<pre><code>a\u00b2+b\u00b2=c\u00b2 \n\ncan be written as b\u00b2=c\u00b2-a\u00b2\n\nwhich is b\u00b2 = (c-a)(c+a)\n\nand hence we arrive at\n\nb/(c+a) = (c-a)/b\n\nor (c+a)/b = b/(c-a)\n</code></pre>\n\n<p>Now using the above equation, you do not need to compute squares.</p>\n\n<p>So we must do this</p>\n\n<pre><code>  if(((c+a)/(double)b)==((double)(b)/(c-a)))\n    printf(\"Yes it is pythagorean triples\");\n  else printf(\"No it is not\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1439997509, "post_id": 32099302, "comment_id": 52093514, "body": "But the problem persists: I have a margin in that architecture/integer class, wich I want to optimize."}, {"owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "reply_to_user": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1439998014, "post_id": 32099302, "comment_id": 52093855, "body": "@KlausPrinoth - If the integers are large enough even an addition can cause an overflow"}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1439998197, "post_id": 32099302, "comment_id": 52093977, "body": "True, but the numbers must be much larger to cause an overflow with an addition than with a multiplication or square."}, {"owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "reply_to_user": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440007873, "post_id": 32099302, "comment_id": 52099656, "body": "@KlausPrinoth - breaking the math into unsigned 32bit chunks to avoid overflows in any situation will also work"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440009194, "post_id": 32099302, "comment_id": 52100475, "body": "&quot;Converting your 32bit integers to ... floating point doubles ...&quot; is a potential problem as <code>double</code> * <code>double</code> may lose exact product representation."}, {"owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440010231, "post_id": 32099302, "comment_id": 52101169, "body": "@chux - that&#39;s right, doubles are only integer precise to the number of bits in their mantissa, perhaps 80bit long doubles would be sufficient. Even an unsigned long long will still over flow (0xFFFFFFFF ^ 2) * 2. For these reasons I edited my answer to show a solution that is correct over all UINT32."}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440021401, "post_id": 32099302, "comment_id": 52107174, "body": "Not quite that what I&#39;m looking for, but still a nice solution. +1"}, {"owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "edited": false, "score": 0, "creation_date": 1440073833, "post_id": 32099302, "comment_id": 52128944, "body": "I&#39;m accepting this answer because it works and answers the question correctly, it is not the kind of solution I would like, but I think there is no such solution. Also this answer is by far better than an answer where the code doesn&#39;t work. If anyone else finds a better solution, feel free to answer and I will accept their solution."}], "tags": [], "owner": {"reputation": 19534, "user_id": 884862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16a1a1a26718fe4ba2d0903ebb056f2?s=128&d=identicon&r=PG", "display_name": "Louis Ricci", "link": "https://stackoverflow.com/users/884862/louis-ricci"}, "is_accepted": true, "score": 2, "last_activity_date": 1440010320, "last_edit_date": 1440010320, "creation_date": 1439996842, "answer_id": 32099302, "question_id": 32098091, "link": "https://stackoverflow.com/questions/32098091/efficient-test-for-pythagorean-triples-in-modulo-integer-space/32099302#32099302", "title": "Efficient test for pythagorean triples in modulo integer space", "body": "<p><strong>EDIT</strong> If you need to have 32bit integers all the way down then you can just modify the math to fit your requirement. To keep it simple I do the math (squaring and summing) on 16bit chunks of data and use a struct that contains 2 unsigned ints as the result.</p>\n\n<p><a href=\"http://ideone.com/er2TaS\" rel=\"nofollow\">http://ideone.com/er2TaS</a></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nstruct u64 {\n    unsigned int lo;\n    unsigned int hi;\n    bool of;\n};\nu64 square(unsigned int a) {\n    u64 result;\n    unsigned int alo = (a &amp; 0xffff);\n    unsigned int ahi = (a &gt;&gt; 16);\n    unsigned int aalo = alo * alo;\n    unsigned int aami = alo * ahi;\n    unsigned int aahi = ahi * ahi;\n    unsigned int aa1 = aalo &amp; 0xffff;\n    unsigned int aa2 = (aalo &gt;&gt; 16) + (aami &amp; 0xffff) + (aami &amp; 0xffff);\n    unsigned int aa3 = (aa2 &gt;&gt; 16) + (aami &gt;&gt; 16) + (aami &gt;&gt; 16) + (aahi &amp; 0xffff);\n    unsigned int aa4 = (aa3 &gt;&gt; 16) + (aahi &gt;&gt; 16);\n    result.lo = (aa1 &amp; 0xffff) | ((aa2 &amp; 0xffff) &lt;&lt; 16);\n    result.hi = (aa3 &amp; 0xffff) | (aa4 &lt;&lt; 16);\n    result.of = false; // 0xffffffff^2 can't overflow\n    return result;\n}\nu64 sum(u64 a, u64 b) {\n    u64 result;\n    unsigned int a1 = a.lo &amp; 0xffff;\n    unsigned int a2 = a.lo &gt;&gt; 16;\n    unsigned int a3 = a.hi &amp; 0xffff;\n    unsigned int a4 = a.hi &gt;&gt; 16;\n    unsigned int b1 = b.lo &amp; 0xffff;\n    unsigned int b2 = b.lo &gt;&gt; 16;\n    unsigned int b3 = b.hi &amp; 0xffff;\n    unsigned int b4 = b.hi &gt;&gt; 16;\n    unsigned int s1 = a1 + b1;\n    unsigned int s2 = a2 + b2 + (s1 &gt;&gt; 16);\n    unsigned int s3 = a3 + b3 + (s2 &gt;&gt; 16);\n    unsigned int s4 = a4 + b4 + (s3 &gt;&gt; 16);\n    result.lo = (s1 &amp; 0xffff) | ((s2 &amp; 0xffff) &lt;&lt; 16);\n    result.hi = (s3 &amp; 0xffff) | ((s4 &amp; 0xffff) &lt;&lt; 16);\n    result.of = (s4 &gt; 0xffff ? true : false);\n    return result;\n}\nbool isTriple(unsigned int a, unsigned int b, unsigned int c) {\n    u64 aa = square(a);\n    u64 bb = square(b);\n    u64 cc = square(c);\n    u64 aabb = sum(aa, bb);\n    return aabb.lo == cc.lo &amp;&amp; aabb.hi == cc.hi &amp;&amp; aabb.of == false;\n}\nint main() {\n    cout &lt;&lt; isTriple(3,4,5) &lt;&lt; endl;\n    cout &lt;&lt; isTriple(2800,9600,10000) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Conerting your 32bit integers to 64bit longs or even floating point doubles would <strong>edit</strong> <em>reduce</em> the chance of overflow and continue being, programmatically, O(1) since all the major architectures (x86, ARM, etc) have int to double conversion op codes at the low level and casting up to a long from int is also an O(1) operation.</p>\n\n<pre><code>bool isTriple(int a, int b, int c) {\nlong long bigA = a;\nlong long bigB = b;\nlong long bigC = c;\nreturn bigA * bigA + bigB * bigB == bigC * bigC;\n}\n</code></pre>\n"}], "owner": {"reputation": 518, "user_id": 4999641, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TwQpG.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/4999641/klaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 32099302, "answer_count": 2, "score": 2, "last_activity_date": 1440082149, "creation_date": 1439993903, "last_edit_date": 1492085955, "question_id": 32098091, "link": "https://stackoverflow.com/questions/32098091/efficient-test-for-pythagorean-triples-in-modulo-integer-space", "title": "Efficient test for pythagorean triples in modulo integer space", "body": "<p>I was wondering what the most effective formula, for testing if three numbers are a pythagorean triple is.<br>\nJust as a reminder: a pythagorean triple are three integers where <code>a\u00b2+b\u00b2=c\u00b2</code>.  </p>\n\n<p>I mean not the most effective formula in terms of time, but a formula that is the most efficient in terms of not causing an overflow on a specific integer(lets say <strong>32-bit unsigned int</strong>).</p>\n\n<p>I was trying a bit with rearrangements of <code>a*a + b*b == c*c</code>:</p>\n\n<blockquote>\n  <p>Let's assume <code>a&lt;=b&lt;c</code>, then the best formula I could get to is:<br>\n  <code>2b*(c-b) == (a+b-c) * (a-b+c)</code><br>\n  with this formula can be proven, that the right side is smaller than <code>a*c</code> and so should be the left side, but <code>a*c</code> doesn't look like a huge improvement of <code>c*c</code>.</p>\n</blockquote>\n\n<p>So my question is, if there is a better formula for this conditional that works with bigger numbers without overflowing an integer space. The execution time of the formula doesn't matter that much, besides it should be O(1).</p>\n\n<p>PS: I don't know if I should post such a question here or on <a href=\"https://math.stackexchange.com/\">Mathematics SE</a>, but to me it seems to be more about programming.</p>\n"}, {"tags": ["c", "windows", "passwords", "codeblocks"], "comments": [{"owner": {"reputation": 19358, "user_id": 3049655, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/ZLzeP.jpg?s=128&g=1", "display_name": "Spikatrix", "link": "https://stackoverflow.com/users/3049655/spikatrix"}, "edited": false, "score": 1, "creation_date": 1439994133, "post_id": 32098031, "comment_id": 52090853, "body": "Look into <code>getch()</code>. It works like <code>getchar()</code> but doesn&#39;t echo the character. The idea here is to use <code>getch()</code> in a loop until the newline character (<code>\\n</code>) is inputted. Print a <code>*</code> on each input of a  character. You might also need to check for the backspace character (<code>\\b</code>)."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1439994137, "post_id": 32098031, "comment_id": 52090857, "body": "In fairness to the OP, this is not obvious for a console app."}], "owner": {"reputation": 11, "user_id": 5236218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38aa07bf0849fca57ea187c472df0939?s=128&d=identicon&r=PG&f=1", "display_name": "Nokama", "link": "https://stackoverflow.com/users/5236218/nokama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "closed_date": 1439994244, "answer_count": 0, "score": 0, "last_activity_date": 1439994064, "creation_date": 1439993743, "question_id": 32098031, "link": "https://stackoverflow.com/questions/32098031/how-to-replace-characters-in-passwords-with-in-c", "closed_reason": "Duplicate", "title": "How to replace characters in passwords with * in C", "body": "<p>I've started a few days ago to learn C and created a little console application:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;conio.h&gt;\n\nint main()\n{\nchar name[100];\nchar password[100];\n\nprintf(\"Welcome to Skynet servers, please enter your username and password in the form below. \\n\");\nprintf(\"username: \");\nscanf(\" %s\", name);\nprintf(\"password: \");\nscanf(\" %s\", password);\n\nif(strcmp(password, \"skynet\") == 0){\n    printf(\"\\n Welcome, Mr. %s, to your personal Skynet account\", name);\n}else {\n    printf(\"ERROR: USERNAME OR PASSWORD INCORRECT. LEAVE THIS TERMINAL OR SECURITY WILL BE ALERTED!!!\");\n}\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>I want the password to be masked with * while writing it.\nThanks in advance.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1439993683, "post_id": 32097987, "comment_id": 52090498, "body": "Welcome to Stack Overflow! Please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read <a href=\"http://stackoverflow.com/help/how-to-ask\">How to Ask</a> to learn what we expect from questions here."}, {"owner": {"reputation": 45, "user_id": 3764325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WUmbV.jpg?s=128&g=1", "display_name": "IVRafa", "link": "https://stackoverflow.com/users/3764325/ivrafa"}, "edited": false, "score": 0, "creation_date": 1439994276, "post_id": 32097987, "comment_id": 52090950, "body": "char* studArr[NumCourses][1024]; char studName[3];  where NumCourses is just a constant"}, {"owner": {"reputation": 965, "user_id": 2312064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86a21cb4d402f3f3b694b7d262ee7ed?s=128&d=identicon&r=PG", "display_name": "krzydyn", "link": "https://stackoverflow.com/users/2312064/krzydyn"}, "edited": false, "score": 1, "creation_date": 1439994722, "post_id": 32097987, "comment_id": 52091327, "body": "If you store studName[3] = &#39;\\0&#39;; than you should declate char studName[4]; In C array index is counted from 0 to N-1, where N is number of elements in the array"}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1439993935, "creation_date": 1439993935, "answer_id": 32098106, "question_id": 32097987, "link": "https://stackoverflow.com/questions/32097987/c-storing-a-char-array-multiple-times-in-a-2d-char-array/32098106#32098106", "title": "C - Storing a char array multiple times in a 2d char* array", "body": "<p>My guess it's because you assign all pointer to point to <code>studName</code>, and it will always contain the last read string.</p>\n\n<p>You need to <em>duplicate</em> the string instead of just assigning the pointer. Either use <code>strdup</code> (which means you have to free the memory later) or make each entry an array and copy into it.</p>\n"}, {"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 2, "last_activity_date": 1439994013, "creation_date": 1439994013, "answer_id": 32098144, "question_id": 32097987, "link": "https://stackoverflow.com/questions/32097987/c-storing-a-char-array-multiple-times-in-a-2d-char-array/32098144#32098144", "title": "C - Storing a char array multiple times in a 2d char* array", "body": "<p><code>studName</code> is a pointer, and each <code>studArr[j][N]</code> is being set to the same pointer.  The <em>contents</em> found by the pointer are being updated, but all the duplicate copies of the same pointer will show the last contents only.</p>\n\n<p>You probably need to use <code>strncpy()</code>, or the like.  Specific details really depend on the code you have not yet shown, like declarations.</p>\n"}, {"tags": [], "owner": {"reputation": 965, "user_id": 2312064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e86a21cb4d402f3f3b694b7d262ee7ed?s=128&d=identicon&r=PG", "display_name": "krzydyn", "link": "https://stackoverflow.com/users/2312064/krzydyn"}, "is_accepted": true, "score": 4, "last_activity_date": 1439994053, "creation_date": 1439994053, "answer_id": 32098168, "question_id": 32097987, "link": "https://stackoverflow.com/questions/32097987/c-storing-a-char-array-multiple-times-in-a-2d-char-array/32098168#32098168", "title": "C - Storing a char array multiple times in a 2d char* array", "body": "<p>with the assignment:</p>\n\n<blockquote>\n  <p>studArr[j][k+1] = studName;</p>\n</blockquote>\n\n<p>you store a pointer to char[] studName.\nYou should allocate memory for every instance, like here:</p>\n\n<pre><code>studArr[j][k+1] = strdup(studName);\n</code></pre>\n\n<p>Note: remember to free allocated memory.</p>\n"}], "owner": {"reputation": 45, "user_id": 3764325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WUmbV.jpg?s=128&g=1", "display_name": "IVRafa", "link": "https://stackoverflow.com/users/3764325/ivrafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 32098168, "answer_count": 3, "score": 1, "last_activity_date": 1439996331, "creation_date": 1439993621, "last_edit_date": 1439996331, "question_id": 32097987, "link": "https://stackoverflow.com/questions/32097987/c-storing-a-char-array-multiple-times-in-a-2d-char-array", "title": "C - Storing a char array multiple times in a 2d char* array", "body": "<p>The problem here is that whenever I change the contents of studName the contents inside studArr change too. </p>\n\n<p>If the input looks like this <code>(AAA,BBB,CCC)</code> I first store <code>AAA</code> inside <code>studName</code> and then store <code>studName</code> into <code>studArr</code>.</p>\n\n<p>I'm trying to make:</p>\n\n<pre><code>studArr[0][1] = \"AAA\"\n\nstudArr[0][2] = \"BBB\"\n\nstudArr[0][3] = \"CCC\n</code></pre>\n\n<p>but when I use this code all of them equal <code>CCC</code>. Is there a way I can fix this?</p>\n\n<pre><code>for (j = 0; j &lt; NumCourses + 1; j++){\n    i = 0;\n    k = 0;\n    while ((c = fgetc(ifp)) != ')'){\n        if (c == ','){\n            studName[3] = '\\0'; // ends sting with null char\n            studArr[j][k+1] = studName;\n            k++;\n            i = 0;\n        }\n        else{\n            studName[i] = c;\n            i++;\n        }\n    }\n    studName[3] = '\\0'; // ends sting with null char\n    studArr[j][k+1] = studName; // store studName in studArr\n\n}\n</code></pre>\n"}, {"tags": ["c", "ubuntu"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1439993118, "post_id": 32097724, "comment_id": 52090022, "body": "The first thing you are doing wrong, is not showing the source code of the writer."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1439993145, "post_id": 32097724, "comment_id": 52090045, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439993238, "post_id": 32097724, "comment_id": 52090114, "body": "Do you know the difference between binary and text data?"}, {"owner": {"reputation": 283, "user_id": 5098635, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/0f9d6fff1055088b8cc14f5039aa9219?s=128&d=identicon&r=PG&f=1", "display_name": "Roham Amini", "link": "https://stackoverflow.com/users/5098635/roham-amini"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439993818, "post_id": 32097724, "comment_id": 52090609, "body": "@Eugene Sh if you have time could you explain what i should do to fix this problem or where i can find information about this."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439993998, "post_id": 32097724, "comment_id": 52090749, "body": "You are creating file containing <b>characters</b> &#39;4&#39;, &#39;0&#39; and so on, while their hexadecimal ascii representation is <code>34</code>, <code>30</code> and so on respectively. And it is what you see in the dump."}], "owner": {"reputation": 283, "user_id": 5098635, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/0f9d6fff1055088b8cc14f5039aa9219?s=128&d=identicon&r=PG&f=1", "display_name": "Roham Amini", "link": "https://stackoverflow.com/users/5098635/roham-amini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439993122, "creation_date": 1439992890, "question_id": 32097724, "link": "https://stackoverflow.com/questions/32097724/saving-hexadecimal-value-in-dat-file", "title": "saving hexadecimal value in .dat file", "body": "<p>In a tutorial the writer saves 48 bytes of padding followed by the address 0x601040 in a file called data1.dat.The writer then shows this output:</p>\n\n<pre><code>$ hexdump data1.dat -vC\n00000000  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|\n00000010  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|\n00000020  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|\n00000030  40 10 60 00 00 00 00 00                           |@.`.....|\n00000038\n</code></pre>\n\n<p>I created a file called data1.dat on my 64 bit Ubuntu containing:</p>\n\n<pre><code>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4010600000000000\n</code></pre>\n\n<p>but when I type hexdump data1.dat -vC I get:</p>\n\n<pre><code>test@test-VirtualBox:~$ hexdump data1.dat -vC\n00000000  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|\n00000010  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|\n00000020  41 41 41 41 41 41 41 41  41 41 41 41 41 41 41 41  |AAAAAAAAAAAAAAAA|\n00000030  34 30 31 30 36 30 30 30  30 30 30 30 30 30 30 30  |4010600000000000|\n00000040  0a                                                |.|\n00000041\ntest@test-VirtualBox:~$ \n</code></pre>\n\n<p>I am not sure what I am doing wrong.</p>\n"}, {"tags": ["c", "ansi-c"], "comments": [{"owner": {"reputation": 3008, "user_id": 2209329, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e62709eac24c8a174c5f876e1cb63b39?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Szyd\u0142owski", "link": "https://stackoverflow.com/users/2209329/micha%c5%82-szyd%c5%82owski"}, "edited": false, "score": 0, "creation_date": 1439992441, "post_id": 32097499, "comment_id": 52089514, "body": "typically you display an error message, and then do <code>exit(error_code)</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1439992600, "post_id": 32097499, "comment_id": 52089631, "body": "There are many schools of thought on how to handle errors like these, often clashing with each other. The most common is to return silently (if the function returns <code>void</code>) or to return with a code or value meaning error (typically <code>-1</code> or <code>NULL</code>), possibly setting <code>errno</code>. However, one thing that most people seem to agree on is to <i>not</i> use <code>assert</code> or similar functionality for runtime error checking, mainly because it&#39;s only enabled on debug builds."}, {"owner": {"reputation": 5811, "user_id": 2726734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkA2E.jpg?s=128&g=1", "display_name": "ryanpattison", "link": "https://stackoverflow.com/users/2726734/ryanpattison"}, "edited": false, "score": 0, "creation_date": 1439992619, "post_id": 32097499, "comment_id": 52089650, "body": "related: <a href=\"http://stackoverflow.com/questions/385975/error-handling-in-c-code\" title=\"error handling in c code\">stackoverflow.com/questions/385975/error-handling-in-c-code</a>"}], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "edited": false, "score": 0, "creation_date": 1439992632, "post_id": 32097570, "comment_id": 52089664, "body": "Let&#39;s assume my goal is to try and recover. Since the function returns an int, but any int is valid, is there a way to return, but let the caller know the function failed."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "edited": false, "score": 0, "creation_date": 1439992740, "post_id": 32097570, "comment_id": 52089761, "body": "@dranobob you can use a particular style to return values, like example, a <code>0</code> return value means success, and a negative return value means the function call was unsuccessful. Now, based on the -ve return value, you can check the cause of failure."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "edited": false, "score": 0, "creation_date": 1439992849, "post_id": 32097570, "comment_id": 52089835, "body": "@dranobob FWIW, you can check the concept of <a href=\"http://linux.die.net/man/3/errno\" rel=\"nofollow noreferrer\"><code>errno</code></a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1439993045, "post_id": 32097570, "comment_id": 52089975, "body": "My advice would be to avoid <code>errno</code> and other static variables. They make your code messy, especially if multithreading."}, {"owner": {"reputation": 1632, "user_id": 4178025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159c588df64aaa5d1b2c96c1461e85cf?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4178025/diego"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1439993102, "post_id": 32097570, "comment_id": 52090016, "body": "@MattMcNabb errno is thread-local AFAIK"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1439993129, "post_id": 32097570, "comment_id": 52090031, "body": "@MattMcNabb Sir, I was just showing the concept of error codes, I was also not advising to use errno. :)"}, {"owner": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "edited": false, "score": 0, "creation_date": 1439993293, "post_id": 32097570, "comment_id": 52090169, "body": "ok, so it appears my logical fallacy is using the return int as the result of the function. Instead it sounds like I should use the return int as an error code.  Then pass a reference as a parameter and have the function set the reference&#39;s value as my result."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "edited": false, "score": 0, "creation_date": 1439993388, "post_id": 32097570, "comment_id": 52090244, "body": "@dranobob That&#39;ll be the best approach. It will make your function much more extensive and robust."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "edited": false, "score": 0, "creation_date": 1439993412, "post_id": 32097570, "comment_id": 52090261, "body": "@dranobob That is the best way indeed. You&#39;ll notice that experienced C programmers sometimes refrain from returning values from functions even when they could have done so, just because that they want to reserve the return for error handling."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439993480, "post_id": 32097570, "comment_id": 52090314, "body": "@Lundin Ahead of you sir by +/- 20 seconds. :)"}, {"owner": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "edited": false, "score": 0, "creation_date": 1439993529, "post_id": 32097570, "comment_id": 52090355, "body": "Its a complete mental shift than what I&#39;m used to, but it makes complete sense!  Thanks everyone for the help."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1439993079, "last_edit_date": 1439993079, "creation_date": 1439992449, "answer_id": 32097570, "question_id": 32097499, "link": "https://stackoverflow.com/questions/32097499/how-to-handle-invalid-passed-arguments-in-ansi-c/32097570#32097570", "title": "How to handle invalid passed arguments in Ansi C", "body": "<blockquote>\n  <p><em>if I want the function to stop immediately</em></p>\n</blockquote>\n\n<p>Two things.</p>\n\n<ol>\n<li><p>If you want <em>only</em> the function to stop execution and return to caller, use a <code>return</code> statement. Also, you may want to use some predefined or user-defined error codes as the failure case return value to distinguish the reason of failure from the caller.</p></li>\n<li><p>If you want the program itself to terminate, call <a href=\"http://linux.die.net/man/3/exit\" rel=\"nofollow\"><code>exit()</code></a>.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 5, "creation_date": 1439992633, "post_id": 32097597, "comment_id": 52089666, "body": "More typically, the return value itself would be the error code and the result passed by reference."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1439992756, "post_id": 32097597, "comment_id": 52089773, "body": "This is tagged C. Please don&#39;t give answers in another programming language."}, {"owner": {"reputation": 729, "user_id": 1758142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087d5392c25711573eb218471eac3204?s=128&d=identicon&r=PG", "display_name": "pascx64", "link": "https://stackoverflow.com/users/1758142/pascx64"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1439993158, "post_id": 32097597, "comment_id": 52090052, "body": "@Jongware I changed the return value to use an error code"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439993260, "post_id": 32097597, "comment_id": 52090135, "body": "C does support the bool type btw, it just doesn&#39;t support references."}, {"owner": {"reputation": 729, "user_id": 1758142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087d5392c25711573eb218471eac3204?s=128&d=identicon&r=PG", "display_name": "pascx64", "link": "https://stackoverflow.com/users/1758142/pascx64"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1439993382, "post_id": 32097597, "comment_id": 52090239, "body": "I know, I changed to an int following the advice of @Jongware. I did changed the reference for a pointer too"}], "tags": [], "owner": {"reputation": 729, "user_id": 1758142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/087d5392c25711573eb218471eac3204?s=128&d=identicon&r=PG", "display_name": "pascx64", "link": "https://stackoverflow.com/users/1758142/pascx64"}, "is_accepted": false, "score": 3, "last_activity_date": 1439993133, "last_edit_date": 1439993133, "creation_date": 1439992523, "answer_id": 32097597, "question_id": 32097499, "link": "https://stackoverflow.com/questions/32097499/how-to-handle-invalid-passed-arguments-in-ansi-c/32097597#32097597", "title": "How to handle invalid passed arguments in Ansi C", "body": "<p>You can always use the return value :</p>\n\n<pre><code>if( /* some bad parameters */ )\n   return -1;\n</code></pre>\n\n<p>And then :</p>\n\n<pre><code>int value = foo( something );\nif( value == -1 )\n   // error\nelse\n   // no error\n</code></pre>\n\n<p>Or pass an another parameters :</p>\n\n<pre><code>int foo( char s[], int* value )\n{\n    if( /* error */ )\n        return 1;// error code 1\n    // ...\n    *value = something;\n    return 0;\n}\n</code></pre>\n\n<p>Then when you call the function you can verify if it was executed correctly :</p>\n\n<pre><code> if( foo( \"something\", &amp;result ) )\n {\n     //ok\n }\n else\n {\n     // not ok\n }\n</code></pre>\n\n<p>Both of these method implies that the caller will verify manually if there was an error</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439993197, "post_id": 32097671, "comment_id": 52090090, "body": "While this is one of the few valid uses of goto, I don&#39;t agree that goto error is the ideal way of doing this. You&#39;ll want to specify the error reason somewhere anyhow, so it is better just to return the error code, without any jumping around."}, {"owner": {"reputation": 237, "user_id": 5243467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb7ca64eda9911e73adba6964b025b7?s=128&d=identicon&r=PG&f=1", "display_name": "Leroy", "link": "https://stackoverflow.com/users/5243467/leroy"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439993303, "post_id": 32097671, "comment_id": 52090179, "body": "I feel that it depends on whether you want the NULL malloc error to float up (to let some other system handle it) or whether your&#39;re creating the system that handles the error."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439993525, "post_id": 32097671, "comment_id": 52090353, "body": "Most often you&#39;ll want all errors to &quot;float up&quot;, especially when designing libraries, drivers etc."}], "tags": [], "owner": {"reputation": 237, "user_id": 5243467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb7ca64eda9911e73adba6964b025b7?s=128&d=identicon&r=PG&f=1", "display_name": "Leroy", "link": "https://stackoverflow.com/users/5243467/leroy"}, "is_accepted": false, "score": 0, "last_activity_date": 1439992745, "creation_date": 1439992745, "answer_id": 32097671, "question_id": 32097499, "link": "https://stackoverflow.com/questions/32097499/how-to-handle-invalid-passed-arguments-in-ansi-c/32097671#32097671", "title": "How to handle invalid passed arguments in Ansi C", "body": "<p>If I thinking of your question right, most type errors will be caught on compilation. If you want to just return early, you can simply call <code>return</code>. Often times, error handling, C programers will add a <code>goto</code> for the error:</p>\n\n<pre><code>struct Data *\ncreate_data ()\n{\n  struct Data *data = malloc(sizeof(struct Data));\n\n  if (data == NULL)\n      goto exit;\n\n  /* do stuff with data */\n\nexit:\n    return data;\n}\n</code></pre>\n\n<p>That will return NULL if there was no memory. But you might want to exit early for another reason. So, if you need to exit the program gracefully (and free all the things you have taken), you're going to need a central exit point.</p>\n\n<p>I usually have a function like</p>\n\n<pre><code>void bail (const char *fmt, ...)\n{\n    va_list argp;\n    va_start(argp, fmt);\n      vfprintf(stderr, fmt, argp);\n    va_end(argp);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>It prints to <code>STDERR</code> and returns a non-0 exit as well. You could easily modify this to accept any data you need to free.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1439992987, "creation_date": 1439992987, "answer_id": 32097761, "question_id": 32097499, "link": "https://stackoverflow.com/questions/32097499/how-to-handle-invalid-passed-arguments-in-ansi-c/32097761#32097761", "title": "How to handle invalid passed arguments in Ansi C", "body": "<p>The standard way to do error handling in any C program is to reserve the return value of the function for an error code. </p>\n\n<p>Most typically this is a custom enum type. Example:</p>\n\n<pre><code>typedef enum\n{\n  FOO_OK,\n  FOO_ERR_STRLENGTH,\n  FOO_ERR_DIVIDE_BY_ZERO,\n  ...\n} foo_err_t;\n\n\nfoo_err_t  foo_func (/* parameters */)\n{\n  if (strlen(s) &lt; 1) \n  {\n    return FOO_ERR_STRLENGTH;\n  }\n\n  ...\n\n  return FOO_OK;\n}\n</code></pre>\n\n<p>Then you document the function properly and state which error codes it may return, and what is causing them.</p>\n\n<p>What should be done upon error is usually no business of your routines, but something that should be decided by the caller. In particular, your routines should never decide to terminate the whole program. That decision should be taken by the outer-most caller (top of the call stack), i.e from main().</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1439993203, "creation_date": 1439993203, "answer_id": 32097830, "question_id": 32097499, "link": "https://stackoverflow.com/questions/32097499/how-to-handle-invalid-passed-arguments-in-ansi-c/32097830#32097830", "title": "How to handle invalid passed arguments in Ansi C", "body": "<p>Your major options are:</p>\n\n<ul>\n<li>Have the return value combine both the error status and the actual value. For example if your function only intends to return non-negative values, then you could say that negative return values indicate an error.</li>\n<li>Return an error code (<code>0</code> for success) and give the function's output via a reference parameter.</li>\n<li>Return the function's output and give the error code via a reference parameter.</li>\n</ul>\n\n<p>Other options include using a global (or thread-local) variable for error status (not a good idea IMHO), or returning a <code>struct</code> that contains both the return information and the error status.</p>\n"}], "owner": {"reputation": 570, "user_id": 5025845, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/036b86b31783f6b3f60fd2c2ce99bb24?s=128&d=identicon&r=PG&f=1", "display_name": "dranobob", "link": "https://stackoverflow.com/users/5025845/dranobob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "closed_date": 1439995648, "answer_count": 5, "score": 3, "last_activity_date": 1439993203, "creation_date": 1439992292, "last_edit_date": 1439992487, "question_id": 32097499, "link": "https://stackoverflow.com/questions/32097499/how-to-handle-invalid-passed-arguments-in-ansi-c", "closed_reason": "Needs more focus", "title": "How to handle invalid passed arguments in Ansi C", "body": "<p>I am new to C and come from a back ground of newer languages (like Java and C++) and I'm not sure how to handle runtime errors like an incorrect arguments sent to a function.</p>\n\n<p>for example say I want to write a function to manipulate a string (assuming any valid int is an acceptable return value):</p>\n\n<pre><code>int foo (char s[]) {\n    if ( strlen(s) &lt; 1)\n        // ERROR\n    ....\n    ....\n    return someInt;\n}\n</code></pre>\n\n<p>How do I handle this scenario in Ansi C if I want the function to stop immediately? In C++ or Java I would throw an exception to be caught by the caller. </p>\n"}, {"tags": ["php", "c", "php-extension"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2413748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAZ0Q.jpg?s=128&g=1", "display_name": "AterCattus", "link": "https://stackoverflow.com/users/2413748/atercattus"}, "edited": false, "score": 0, "creation_date": 1439998301, "post_id": 32099468, "comment_id": 52094045, "body": "Yes, I known about CoW. I need in-place update the $s1, rather than returning new string."}, {"owner": {"reputation": 41, "user_id": 2413748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAZ0Q.jpg?s=128&g=1", "display_name": "AterCattus", "link": "https://stackoverflow.com/users/2413748/atercattus"}, "edited": false, "score": 0, "creation_date": 1439999321, "post_id": 32099468, "comment_id": 52094795, "body": "The length of the string can be very large (tens of megabytes), but I change several bytes in it."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 41, "user_id": 2413748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAZ0Q.jpg?s=128&g=1", "display_name": "AterCattus", "link": "https://stackoverflow.com/users/2413748/atercattus"}, "edited": false, "score": 0, "creation_date": 1440001636, "post_id": 32099468, "comment_id": 52096169, "body": "You told that you know about CoW: Even if you change(write) just a single byte, you need to copy it the whole string. That&#39;s the deal. I don&#39;t know details about your current problem, but as long as you stored strings of multiple MB into a string variable, you need to copy the whole variable."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 41, "user_id": 2413748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAZ0Q.jpg?s=128&g=1", "display_name": "AterCattus", "link": "https://stackoverflow.com/users/2413748/atercattus"}, "edited": false, "score": 0, "creation_date": 1440008950, "post_id": 32099468, "comment_id": 52100315, "body": "... but since that would obviously introduces huge memory requirements, you may need to find a different way of designing your extensions. Probably its a good a idea to create a resource type (stream?) for that portions of data. Take the mysql extension for example, it does not return an array containing all data from a database query, it returns a mysql result resource where you can iterate over without having all the data in memory."}, {"owner": {"reputation": 310, "user_id": 6726357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YeM-wpBuP-I/AAAAAAAAAAI/AAAAAAAAAEg/o82bRa8WLWA/photo.jpg?sz=128", "display_name": "Anos K. Mhazo", "link": "https://stackoverflow.com/users/6726357/anos-k-mhazo"}, "edited": false, "score": 0, "creation_date": 1511857232, "post_id": 32099468, "comment_id": 82009718, "body": "Just a small update:  string = strdup(s1-&gt;value.str.val);  Change to string = strdup(s1-&gt;value.str-&gt;val);"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1511858980, "post_id": 32099468, "comment_id": 82010763, "body": "Sorry, I&#39;m not able to reproduce this atm. Are you using <code>z</code> or <code>s</code> for the type?"}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1440066246, "last_edit_date": 1440066246, "creation_date": 1439997200, "answer_id": 32099468, "question_id": 32097304, "link": "https://stackoverflow.com/questions/32097304/can-i-pass-the-string-in-php-extension-by-reference-with-separating-from-other-v/32099468#32099468", "title": "Can I pass the string in PHP extension by reference with separating from other variables?", "body": "<p>This happens because of a mechanism called <em>copy on write</em>.</p>\n\n<p>After this lines:</p>\n\n<pre><code>$s1 = 'hello';\n$s2 = $s1;\n</code></pre>\n\n<p><code>$s1</code> and <code>$s2</code> are both independent variables (zvals), but they point to the same(!) data in memory - because both share the same value, meaning none of them has been changed so far.</p>\n\n<p>If you would:</p>\n\n<pre><code>$s1 = 'foo';\n</code></pre>\n\n<p>... PHP would internally update the zval behind <code>$s1</code> in a way that it's value points to a different portion of memory.</p>\n\n<p>However, since you are modifying the value in an extension function, this function would need to take care on that itself:</p>\n\n<pre><code>PHP_FUNCTION(refstring)\n{\n    zval *s1;\n    char *string;\n\n    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"z\", &amp;s1)\n        != SUCCESS\n    ) {\n        return;\n    }   \n\n    // copy the value before writing to it\n    string = strdup(s1-&gt;value.str.val);\n    string[0] = 'X';\n\n    ZVAL_STRING(s1, string, 1);\n}\n</code></pre>\n\n<p>Note that I'm using a <code>zval *</code> rather than using a pure string for the input parameter.</p>\n\n<p>Further note that, the above function works as expected. However, I'm not sure if there is a MACRO for that purpose which can be used more elegantly. </p>\n"}], "owner": {"reputation": 41, "user_id": 2413748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CAZ0Q.jpg?s=128&g=1", "display_name": "AterCattus", "link": "https://stackoverflow.com/users/2413748/atercattus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1440066514, "creation_date": 1439991814, "last_edit_date": 1440066514, "question_id": 32097304, "link": "https://stackoverflow.com/questions/32097304/can-i-pass-the-string-in-php-extension-by-reference-with-separating-from-other-v", "title": "Can I pass the string in PHP extension by reference with separating from other variables?", "body": "<p>I have example code:</p>\n\n<pre><code>ZEND_BEGIN_ARG_INFO(arginfo_refstring, 0)\n    ZEND_ARG_INFO(1, s1)\nZEND_END_ARG_INFO()\n\nconst zend_function_entry refstring_functions[] = {\n    PHP_FE(refstring, arginfo_refstring)\n    PHP_FE_END\n};\n\nPHP_FUNCTION(refstring)\n{\n    char *s1;\n    int s1_len;\n\n    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, \"s\", &amp;s1, &amp;s1_len) == FAILURE) {\n        return;\n    }\n\n    s1[0] = 'X';\n}\n</code></pre>\n\n<p>And php code:</p>\n\n<pre><code>$s1 = 'hello';\n$s2 = $s1;\nrefstring($s1);\nvar_dump($s1, $s2);\n</code></pre>\n\n<p>I expect:</p>\n\n<pre><code>string(5) \"Xello\"\nstring(5) \"hello\"\n</code></pre>\n\n<p>But i got:</p>\n\n<pre><code>string(5) \"Xello\"\nstring(5) \"Xello\"\n</code></pre>\n\n<blockquote>\n  <p>How can I separate <code>$s2</code> from <code>$s1</code>, but keep the ability to change <code>$s1</code> inside function?</p>\n</blockquote>\n\n<p>I known about SEPARATE_ZVAL and co., but they did not help...</p>\n"}, {"tags": ["c", "pointers", "memory-management", "free"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1439991275, "post_id": 32097048, "comment_id": 52088500, "body": "Please <a href=\"http://stackoverflow.com/q/605845/2173917\">see why not to cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1439994039, "post_id": 32097048, "comment_id": 52090778, "body": "@shinhwa there is a serious issue you are missing here."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1439994560, "post_id": 32097048, "comment_id": 52091195, "body": "@SouravGhosh You have ignored a serious issue my friend."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1439994618, "post_id": 32097048, "comment_id": 52091244, "body": "@Sumeet Kindly enlighten me."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1439994640, "post_id": 32097048, "comment_id": 52091267, "body": "@SouravGhosh See my answer."}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5112209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153117467889022/picture?type=large", "display_name": "shinhwa", "link": "https://stackoverflow.com/users/5112209/shinhwa"}, "edited": false, "score": 1, "creation_date": 1439991754, "post_id": 32097111, "comment_id": 52088920, "body": "thanks for your comments and explanation. I realized the 2nd aspect, I&#39;m learning the first one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439992493, "post_id": 32097111, "comment_id": 52089549, "body": "The code is correct as far as syntax and functionality go, but it is bad program design."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 7, "last_activity_date": 1553742583, "last_edit_date": 1553742583, "creation_date": 1439991363, "answer_id": 32097111, "question_id": 32097048, "link": "https://stackoverflow.com/questions/32097048/malloc-in-local-function-free-memory-in-main-is-it-ok-how/32097111#32097111", "title": "&quot;malloc in local function, free memory in main&quot; is it ok? How?", "body": "<p>Yes, your code is correct.<sup>condition apply, see note below</sup></p>\n\n<p>To <a href=\"https://linux.die.net/man/3/free\" rel=\"nofollow noreferrer\"><code>free()</code></a> the allocated memory, you only need to pass the returned pointer from <code>malloc()</code> and family. </p>\n\n<p>As you're getting the same pointer returned by <code>malloc()</code> back from the <code>Add_them_up()</code> function and storing the same in <code>presult</code>, in the <code>main()</code> function you can call</p>\n\n<pre><code>free (presult);\n</code></pre>\n\n<p>without any issues. It will carry out the intended job.</p>\n\n<hr>\n\n<p>Note: You're missing two aspects here, e.g.</p>\n\n<ol>\n<li>Please <a href=\"https://stackoverflow.com/q/605845/2173917\">see why not to cast</a> the return value of <code>malloc()</code> and family in C.</li>\n<li>Always check for the success of <code>malloc()</code> before using the returned pointer.</li>\n</ol>\n\n<p>That said, just a suggestion, always try to use the form</p>\n\n<pre><code>int *p = malloc(sizeof(*p));\n</code></pre>\n\n<p>which makes the allocation statement independent of the type of <code>p</code>, resulting in a most robust code.</p>\n"}, {"comments": [{"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1439994622, "post_id": 32097566, "comment_id": 52091249, "body": "Well said, also I think there has been one issue left out."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 1, "creation_date": 1439995471, "post_id": 32097566, "comment_id": 52091929, "body": "@Sumeet Dangling pointers is only an issue if the routines are expected to be called yet again with the same inputs. In that case, it is up to the routines which do the malloc/free to handle it."}, {"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1439995710, "post_id": 32097566, "comment_id": 52092138, "body": "But still making it NULL is a good thing to do, don&#39;t you think."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 1, "creation_date": 1439995775, "post_id": 32097566, "comment_id": 52092197, "body": "@Sumeet It entirely depends on the nature and functionality of the code. It might be very good and necessary, or it might be superfluous clutter."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 4, "last_activity_date": 1439992445, "creation_date": 1439992445, "answer_id": 32097566, "question_id": 32097048, "link": "https://stackoverflow.com/questions/32097048/malloc-in-local-function-free-memory-in-main-is-it-ok-how/32097566#32097566", "title": "&quot;malloc in local function, free memory in main&quot; is it ok? How?", "body": "<p>This is generally considered poor program design. The module that does the malloc() should be designed so that it is also responsible for doing the free(). </p>\n\n<p>You should never design programs so that some external routine is supposed to clean up the mess from your module. It is all common sense really.</p>\n\n<p>So in this case, you should add a wrapper function around free(), which main() can call. main() shouldn't need to know or care about how your routines perform dynamic allocation/deallocation.</p>\n\n<p>Note that programs that don't follow this program design tend to have memory leak-related bugs.</p>\n"}], "owner": {"reputation": 109, "user_id": 5112209, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153117467889022/picture?type=large", "display_name": "shinhwa", "link": "https://stackoverflow.com/users/5112209/shinhwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5188, "favorite_count": 0, "closed_date": 1440006593, "answer_count": 2, "score": 9, "last_activity_date": 1553742583, "creation_date": 1439991219, "last_edit_date": 1439991869, "question_id": 32097048, "link": "https://stackoverflow.com/questions/32097048/malloc-in-local-function-free-memory-in-main-is-it-ok-how", "closed_reason": "Duplicate", "title": "&quot;malloc in local function, free memory in main&quot; is it ok? How?", "body": "<p>I learned in book that if I need to return a pointer from a function, I use <code>malloc()</code> and get memory from the heap. I was wondering how I can <code>free()</code> up the memory allocated after the function.</p>\n\n<p>Is OK to do what I did in the following code to free that memory? If it's not correct, what's correct way to free memory after function?</p>\n\n<pre><code>int *Add_them_up (int *x, int *y)\n{\n    int *p = (int *) malloc(sizeof (int));\n    *p = *x + *y;\n    return p;\n}\n\n\nint main ()\n{   \n    int c = 3;\n    int d = 4;\n    int *presult = NULL;\n    presult = Add_them_up (&amp;c, &amp;d);\n    printf (\"the result of adding is:%d\\n\", *presult);\n    free (presult);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "one-time-password", "libgcrypt"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439993023, "post_id": 32096993, "comment_id": 52089961, "body": "Time to learn debugging."}, {"owner": {"reputation": 1601, "user_id": 880530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/09979eaaa6c8ee730735f1aa7ad3a7ac?s=128&d=identicon&r=PG&f=1", "display_name": "polslinux", "link": "https://stackoverflow.com/users/880530/polslinux"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440005418, "post_id": 32096993, "comment_id": 52098323, "body": "I&#39;ve found the problem. I had to reverse the byte order on <code>C</code> and set the length from <code>4</code> to <code>8</code>. Cheers"}, {"owner": {"reputation": 2616, "user_id": 31319, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49d6cfe3732f2849692684d3660548ec?s=128&d=identicon&r=PG", "display_name": "m0j0", "link": "https://stackoverflow.com/users/31319/m0j0"}, "edited": false, "score": 0, "creation_date": 1496425785, "post_id": 32096993, "comment_id": 75673315, "body": "Once you found the problem, did you edit your question to have the correct code? You could also answer your own question and accept the answer."}], "owner": {"reputation": 1601, "user_id": 880530, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/09979eaaa6c8ee730735f1aa7ad3a7ac?s=128&d=identicon&r=PG&f=1", "display_name": "polslinux", "link": "https://stackoverflow.com/users/880530/polslinux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1194, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1575764362, "creation_date": 1439991097, "last_edit_date": 1575764362, "question_id": 32096993, "link": "https://stackoverflow.com/questions/32096993/implementation-of-totp-using-c-and-gcrypt", "title": "implementation of TOTP using C and Gcrypt", "body": "<p>I'm trying to implement a simple TOTP client using C and libgcrypt.<br>\nI've read both the <a href=\"https://tools.ietf.org/html/rfc6238\" rel=\"nofollow\">RFC 6238</a> and the <a href=\"https://tools.ietf.org/html/rfc4226\" rel=\"nofollow\">RFC 4226</a> but I still have some problems with the result.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n#include &lt;string.h&gt;\n#include &lt;gcrypt.h&gt;\n\nint DIGITS_POWER[] = {1,10,100,1000,10000,100000,1000000,10000000,100000000};\n\nint Truncate (unsigned char *hmac, int N)\n{\n    // uint64_t O = least_four_significant_bits_hmac;\n    int O = (hmac[19] &amp; 0x0f);\n    int bin_code = ((hmac[O] &amp; 0x7f) &lt;&lt; 24) | ((hmac[O+1] &amp; 0xff) &lt;&lt; 16) | ((hmac[O+2] &amp; 0xff) &lt;&lt; 8) | ((hmac[O+3] &amp; 0xff));\n    printf(\"%d\\n\", bin_code);\n    int token = bin_code % DIGITS_POWER[N];\n    return token;\n}\n\nunsigned char *HMAC (char *K, long C)\n{\n    // K is the key, C is the message\n    unsigned char *buffer = (unsigned char *)&amp;C;\n    gcry_md_hd_t hd;\n    gcry_md_open (&amp;hd, GCRY_MD_SHA1, GCRY_MD_FLAG_HMAC);\n    gcry_md_setkey (hd, K, strlen(K));\n    gcry_md_write (hd, buffer, 4); // 4 because C is (in hex) 0273EF07\n    gcry_md_final (hd);\n    unsigned char *hmac =  gcry_md_read (hd, GCRY_MD_SHA1);\n    return hmac;\n}\n\n\nint HOTP (char *K, long C, int N)\n{\n    unsigned char *hmac = HMAC(K, C);\n    int token = Truncate (hmac, N);\n    return token;\n}\n\n\nint TOTP (char *K, int N)\n{\n    long TC = 1234567890/30;// ((uint64_t) time (NULL))/30;\n    return HOTP(K, TC, N);\n}\n\nint main (void)\n{\n    printf (\"%d\\n\", TOTP(\"12345678901234567890\", 6));\n    return 0;\n}\n</code></pre>\n\n<p>According to the test vectors written in the <a href=\"https://tools.ietf.org/html/rfc6238#appendix-B\" rel=\"nofollow\">Appendix-B</a>, if I use <code>TC=1234567890/30</code> and <code>secret_key=\"12345678901234567890\"</code> I should receive <code>89005924</code> as TOTP value but, instead, I receive <code>37734835</code>.\n<br>What's wrong with my code? :-/<br>\nThanks</p>\n"}, {"tags": ["c++", "c", "geometry", "coordinates", "earthdistance"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439991312, "post_id": 32096968, "comment_id": 52088532, "body": "And you think that will compile as C? It <b>is</b> not C. There is no &quot;a little bit pregnant&quot;!"}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439991413, "post_id": 32096968, "comment_id": 52088629, "body": "@Olaf, The code is for additional reference, not the center point of the question. It won&#39;t compile in C as it is, but it&#39;s quite easily portable. The other question I referred is actually from C. To get wider audience, both C and C++ are tagged."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1439992924, "post_id": 32096968, "comment_id": 52089895, "body": "<code>double</code> ... floating point arithmetic is potentially imprecise."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1439992981, "post_id": 32096968, "comment_id": 52089924, "body": "Try converting the numbers into fixed point representation to capture the full given precision and calculate it. But even before, calculate it manually."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439993299, "post_id": 32096968, "comment_id": 52090176, "body": "@EugeneSh., I din&#39;t get your comment. At which particular equation are you referring? Can you give an example of converting the number into fixed point representation? There can be inaccuracies due to <code>double</code>, but <code>0.0005</code> is quite large in that sense. The result is same for <code>double</code> and <code>long double</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439993380, "post_id": 32096968, "comment_id": 52090237, "body": "At all of them. If you want to check whether it is an issue of the double precision and not the calculation itself, you should first try more precise methods. The large <i>resulting</i> inaccuracy is accumulated through the steps. <a href=\"https://en.wikipedia.org/wiki/Fixed-point_arithmetic\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Fixed-point_arithmetic</a>"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1439999772, "post_id": 32096968, "comment_id": 52095134, "body": "To test whether it&#39;s floating point rounding errors, you could try to change the rounding mode: <a href=\"http://stackoverflow.com/a/6867722/1116364\">stackoverflow.com/a/6867722/1116364</a> This won&#39;t solve your issue, but may confirm that the imprecision is the actual cause."}], "answers": [{"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1439997062, "last_edit_date": 1495535377, "creation_date": 1439997062, "answer_id": 32099408, "question_id": 32096968, "link": "https://stackoverflow.com/questions/32096968/finding-earth-coordinates-latitude-longitude-distance-meters-and-bearing-a/32099408#32099408", "title": "Finding Earth Coordinates (latitude,longitude), Distance (meters) and Bearing (angle)", "body": "<p>Partial answer</p>\n\n<p>With an angle of <code>92.97\u00b0</code> then converted to radians, a call to <code>sin/cos/tan</code> will effectively change the angle to <code>2.97\u00b0</code>.  This step alone loses 6 bits of precision as the period reduction occurs <em>after</em> degrees to radians conversion and in the trig function call.</p>\n\n<p>Precision of trigonometric functions with large angles in degrees can be enhanced.  Use the fortunate aspect the there are <em>exactly</em> 360.0 degrees in a circle.  Perform a \"modulo 45\u00b0\", maybe with <code>remquo(angle, 45, &amp;octant)</code>, and <em>then</em> converting to radians before calling the trig function with a radian argument.</p>\n\n<p>Example <a href=\"https://stackoverflow.com/a/31525208/2410359\"><code>sind()</code></a></p>\n\n<hr>\n\n<p>Your answers of 77.641308 and 77.653130 differs by about 1 part in 6600 (~13 bits of precision).  This answer may not fully explain that, yet should help.\n(If some usage of <code>float</code> occurs somewhere, that should be made <code>double</code>.)</p>\n"}, {"tags": [], "owner": {"reputation": 2311, "user_id": 4566976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56346a6db33a8b54fe45d1516a8c82c8?s=128&d=identicon&r=PG&f=1", "display_name": "4566976", "link": "https://stackoverflow.com/users/4566976/4566976"}, "is_accepted": true, "score": 2, "last_activity_date": 1440052780, "last_edit_date": 1440052780, "creation_date": 1440008747, "answer_id": 32102946, "question_id": 32096968, "link": "https://stackoverflow.com/questions/32096968/finding-earth-coordinates-latitude-longitude-distance-meters-and-bearing-a/32102946#32102946", "title": "Finding Earth Coordinates (latitude,longitude), Distance (meters) and Bearing (angle)", "body": "<p>In <code>CoordinateToCoordinate</code> you use <code>sin(coordinate.first)</code> which is already in degrees. Use <code>sin(degreeToRadian(coordinate.first))</code>. </p>\n\n<p>Or to be more cleaner:</p>\n\n<pre><code>... CoordinateToCoordinate (...)\n{\n  ...\n  coordinate.first = asin((sin(latitude) * cos(meters))\n                        + (cos(latitude) * sin(meters) * cos(angle)));\n  coordinate.second = longitude + atan2((sin(angle) * sin(meters) * cos(latitude)), \n         cos(meters) - (sin(latitude) * sin(coordinate.first)));\n\n  coordinate.first = radianToDegree(coordinate.first);\n  coordinate.second = radianToDegree(coordinate.second);\n\n  return coordinate;\n}\n</code></pre>\n\n<p>This fixes the problem. <a href=\"http://ideone.com/9yuONO\" rel=\"nofollow\">Live Demo</a>.</p>\n"}], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6322, "favorite_count": 2, "accepted_answer_id": 32102946, "answer_count": 2, "score": 2, "last_activity_date": 1533941998, "creation_date": 1439991042, "last_edit_date": 1495535377, "question_id": 32096968, "link": "https://stackoverflow.com/questions/32096968/finding-earth-coordinates-latitude-longitude-distance-meters-and-bearing-a", "title": "Finding Earth Coordinates (latitude,longitude), Distance (meters) and Bearing (angle)", "body": "<p>I need to deal with Earth coordinates in various ways. There is no function in C/C++ which does this straight away.<br>\nReferred below questions:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/7222382/get-lat-long-given-current-point-distance-and-bearing\">Python: Get lat/long given current point, distance and\nbearing</a></li>\n<li><a href=\"https://stackoverflow.com/questions/30002372/given-point-of-latitude-longitude-distance-and-bearing-how-to-get-the-new-la\">C: Given point of (latitude,longitude), distance and bearing, How\nto get the new latitude and\nlongitude</a></li>\n</ol>\n\n<p>From 1st one and <a href=\"http://www.movable-type.co.uk/scripts/latlong.html\" rel=\"nofollow noreferrer\">movable type scripts website</a>, I found that below are the formulas:  </p>\n\n<p><strong>Find Bearing(angle) between 2 coordinates</strong></p>\n\n<pre><code>x = cos(lat1Rad)*sin(lat2Rad) - sin(lat1Rad)*cos(lat2Rad)*cos(lon2Rad-lon1Rad);\ny = sin(lon2Rad-lon1Rad) * cos(lat2Rad);\nbearing = atan2(y, x);  // In radians; \n// Convert to degrees and for -ve add 360\n</code></pre>\n\n<p><strong>Find Distance(meters) between 2 coordinates</strong></p>\n\n<pre><code>PI = 3.14159265358979323846, earthDiameterMeters = 2*6371*1000;\nx = sin((lat2Rad-lat1Rad) / 2);\ny = sin((lon2Rad-lon1Rad) / 2);\nmeters = earthDiameterMeters * asin(sqrt(x*x + y*y*cos(lat1Rad)*cos(lat2Rad)));\n</code></pre>\n\n<p><strong>Find Coordinate from Coordinate+Distance+Angle</strong></p>\n\n<pre><code>meters *= 2 / earthDiameterMeters;\nlat2Rad = asin(sin(lat1Rad)*cos(meters) + cos(lat1Rad)*sin(meters)*cos(bearing));\nlon2Rad = lon1Rad + atan2(sin(bearing)*sin(meters)*cos(lat1Rad), \n                          cos(meters) - sin(lat1Rad)*sin(lat2Rad));\n</code></pre>\n\n<p>Below pseudo code should verify above 3 equations mutually:  </p>\n\n<pre><code>struct Coordinate { double lat, lon; } c1, c2;  \nauto degree = FindBearing(c1, c2);\nauto meters = FindDistance(c1, c2);\nauto cX = FindCoordiante(c1, degree, meters);\n</code></pre>\n\n<p>Now actually the answer comes <em>almost</em> near but not the correct. i.e. cX is Not equal to c2!<br>\nThere is always a difference of <code>0.0005</code> difference in longitude value.\ne.g.</p>\n\n<pre><code>c1 = (12.968460,77.641308)  \nc2 = (12.967862,77.653130)  \nangle = 92.97         ^^^\ndistance = 1282.74  \ncX = (12.967862,77.653613)\n                      ^^^\n</code></pre>\n\n<p>I don't have much knowledge of mathematics' <a href=\"https://en.wikipedia.org/wiki/Haversine_formula\" rel=\"nofollow noreferrer\">Havesine Forumla</a>. But what I know is that from <a href=\"https://www.fcc.gov/encyclopedia/find-terminal-coordinates-given-bearing-and-distance\" rel=\"nofollow noreferrer\">the website fcc.gov</a>, the answer always comes correct.</p>\n\n<p><strong>What am I doing wrong?</strong>  </p>\n\n<h2><a href=\"http://ideone.com/I4sT0f\" rel=\"nofollow noreferrer\">Code</a> only for reference</h2>\n\n<p>Though the syntax is in C++, but all the math functions are from C and is easily portable in C as well (hence tagged for both)</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;iomanip&gt;\n#include&lt;cmath&gt;\n\n\n// Source: http://www.movable-type.co.uk/scripts/latlong.html\n\nstatic const double PI = 3.14159265358979323846, earthDiameterMeters = 6371.0 * 2 * 1000;\n\ndouble degreeToRadian (const double degree) { return (degree * PI / 180); };\ndouble radianToDegree (const double radian) { return (radian * 180 / PI); };\n\ndouble CoordinatesToAngle (double latitude1,\n                           const double longitude1,\n                           double latitude2,\n                           const double longitude2)\n{\n  const auto longitudeDifference = degreeToRadian(longitude2 - longitude1);\n  latitude1 = degreeToRadian(latitude1);\n  latitude2 = degreeToRadian(latitude2);\n\n  using namespace std;\n  const auto x = (cos(latitude1) * sin(latitude2)) -\n                 (sin(latitude1) * cos(latitude2) * cos(longitudeDifference));\n  const auto y = sin(longitudeDifference) * cos(latitude2);\n\n  const auto degree = radianToDegree(atan2(y, x));\n  return (degree &gt;= 0)? degree : (degree + 360);\n}\n\ndouble CoordinatesToMeters (double latitude1,\n                            double longitude1,\n                            double latitude2,\n                            double longitude2)\n{\n  latitude1 = degreeToRadian(latitude1);\n  longitude1 = degreeToRadian(longitude1);\n  latitude2 = degreeToRadian(latitude2);\n  longitude2 = degreeToRadian(longitude2);\n\n  using namespace std;\n  auto x = sin((latitude2 - latitude1) / 2), y = sin((longitude2 - longitude1) / 2);\n#if 1\n  return earthDiameterMeters * asin(sqrt((x * x) + (cos(latitude1) * cos(latitude2) * y * y)));\n#else\n  auto value = (x * x) + (cos(latitude1) * cos(latitude2) * y * y);\n  return earthDiameterMeters * atan2(sqrt(value), sqrt(1 - value));\n#endif\n}\n\nstd::pair&lt;double,double&gt; CoordinateToCoordinate (double latitude,\n                                                 double longitude,\n                                                 double angle,\n                                                 double meters)\n{\n  latitude = degreeToRadian(latitude);\n  longitude = degreeToRadian(longitude);\n  angle = degreeToRadian(angle);\n  meters *= 2 / earthDiameterMeters;\n\n  using namespace std;\n  pair&lt;double,double&gt; coordinate;\n\n  coordinate.first = radianToDegree(asin((sin(latitude) * cos(meters))\n                             + (cos(latitude) * sin(meters) * cos(angle))));\n  coordinate.second = radianToDegree(longitude\n                    + atan2((sin(angle) * sin(meters) * cos(latitude)),\n                    cos(meters) - (sin(latitude) * sin(coordinate.first))));\n\n  return coordinate;\n}\n\nint main ()\n{\n  using namespace std;\n  const auto latitude1 = 12.968460, longitude1 = 77.641308,\n             latitude2 = 12.967862, longitude2 = 77.653130;\n\n  cout &lt;&lt; std::setprecision(10);\n  cout &lt;&lt; \"(\" &lt;&lt; latitude1 &lt;&lt; \",\" &lt;&lt; longitude1 &lt;&lt; \") --- \"\n          \"(\" &lt;&lt; latitude2 &lt;&lt; \",\" &lt;&lt; longitude2 &lt;&lt; \")\\n\";\n\n  auto angle = CoordinatesToAngle(latitude1, longitude1, latitude2, longitude2);\n  cout &lt;&lt; \"Angle =  \" &lt;&lt; angle &lt;&lt; endl;\n\n  auto meters = CoordinatesToMeters(latitude1, longitude1, latitude2, longitude2);\n  cout &lt;&lt; \"Meters = \" &lt;&lt; meters &lt;&lt; endl;\n\n  auto coordinate = CoordinateToCoordinate(latitude1, longitude1, angle, meters);\n  cout &lt;&lt; \"Destination = (\" &lt;&lt; coordinate.first &lt;&lt; \",\" &lt;&lt; coordinate.second &lt;&lt; \")\\n\";\n}\n</code></pre>\n"}, {"tags": ["c", "gcc-warning"], "comments": [{"owner": {"reputation": 7602, "user_id": 3845604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/4wqJf.png?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3845604/praveen"}, "edited": false, "score": 2, "creation_date": 1439990703, "post_id": 32096734, "comment_id": 52088076, "body": "<a href=\"http://stackoverflow.com/questions/14562845/why-does-passing-char-as-const-char-generate-a-warning\" title=\"why does passing char as const char generate a warning\">stackoverflow.com/questions/14562845/&hellip;</a>"}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "reply_to_user": {"reputation": 7602, "user_id": 3845604, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/4wqJf.png?s=128&g=1", "display_name": "Praveen", "link": "https://stackoverflow.com/users/3845604/praveen"}, "edited": false, "score": 0, "creation_date": 1439991840, "post_id": 32096734, "comment_id": 52088993, "body": "None of those answers have any function examples."}], "answers": [{"comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1439991574, "post_id": 32096953, "comment_id": 52088773, "body": "nope, that&#39;s not why. it should be fine to pass a modifiable object to a function that even promises not to modify it. The subtle problem lies elsewhere, one level of indirection above."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1439992098, "post_id": 32096953, "comment_id": 52089224, "body": "@TheParamagneticCroissant  Compiler won&#39;t treat them as same. So to that my answer was."}], "tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 0, "last_activity_date": 1439992175, "last_edit_date": 1439992175, "creation_date": 1439991019, "answer_id": 32096953, "question_id": 32096734, "link": "https://stackoverflow.com/questions/32096734/const-char-vs-const-char-function-argument/32096953#32096953", "title": "const char * vs. const char ** function argument", "body": "<pre><code>f2( v1 );               /* compiler warning - why? */\n</code></pre>\n\n<blockquote>\n  <p>compiler warning - why?</p>\n</blockquote>\n\n<p>Because <code>char**</code> and <code>const char**</code> are different. They are not treated as same.</p>\n\n<pre><code>char** v1 // pointer to pointer to char \n</code></pre>\n\n<p>Here you can change value of <code>**v1</code> .</p>\n\n<p>Whereas </p>\n\n<pre><code>const char** v2  //pointer to pointer to constant char \n</code></pre>\n\n<p>Here you can't change value of <code>**v2</code> and if you try to compiler issues a error.</p>\n"}, {"comments": [{"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1439992092, "post_id": 32096996, "comment_id": 52089218, "body": "Yes, but why is not putting the const in the function declaration the &quot;promise&quot; that the function does not do that sort of evil?"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1439992610, "post_id": 32096996, "comment_id": 52089641, "body": "Because it&#39;s not the function who would cause the harm - that&#39;s the case. See updated answer."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1439993030, "post_id": 32096996, "comment_id": 52089969, "body": "Thank you, that makes sense where the answers to previous questons did not."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1439993434, "post_id": 32096996, "comment_id": 52090284, "body": "Oddly, using <code>const char * const * ccc</code> gives the same warning though it prevents the assignment to <code>*ccc</code> in <code>f2()</code>"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1439993684, "post_id": 32096996, "comment_id": 52090499, "body": "Second <code>const</code> refers to constness of the <i>first-level pointer</i>, so it can&#39;t work. <code>const char** const</code> will be fine, however."}, {"owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "edited": false, "score": 0, "creation_date": 1439996621, "post_id": 32096996, "comment_id": 52092842, "body": "Hmmm, &quot;cdecl.org&quot; disagrees -- it says &#39;const char * const * cccc&#39; is &#39;declare cccc as pointer to const pointer to const char` and &#39;const char ** const cccc&#39; is &#39;declare cccc as const pointer to pointer to const char&#39;"}], "tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": true, "score": 3, "last_activity_date": 1439992664, "last_edit_date": 1439992664, "creation_date": 1439991105, "answer_id": 32096996, "question_id": 32096734, "link": "https://stackoverflow.com/questions/32096734/const-char-vs-const-char-function-argument/32096996#32096996", "title": "const char * vs. const char ** function argument", "body": "<p>Standard forbids this, because that would allow to violate constness of an object. Consider:</p>\n\n<pre><code>const char ch = 'X';\nchar* ch_ptr;\nconst char** ch_pptr = &amp;ch_ptr; // This is not allowed, because...\n\n*ch_pptr = &amp;ch;\n*ch_ptr = 'Q'; // ...this will modify ch, which should be immutable!\n</code></pre>\n\n<p>After this line:</p>\n\n<p><code>const char** ch_pptr = &amp;ch_ptr;</code></p>\n\n<p><code>*ch_pptr</code> and <code>ch_ptr</code> yield the same value (address), but they are of different types (<code>const char*</code> and <code>char*</code>). Then, you use <code>ch_pptr</code> to point const object, which automatically cause <code>ch_ptr</code> to point to the same memory location. By doing this, you allowed for any modification (using <code>ch_ptr</code>) of an object, that was initially declared an constant.</p>\n\n<p>This error is very subtle, but after a while, you should be able to understand why it could be dangerous. That's why it is not allowed.</p>\n\n<hr>\n\n<blockquote>\n  <p>Yes, but why is not putting the const in the function declaration the \"promise\" that the function does not do that sort of evil?</p>\n</blockquote>\n\n<p>Because it works the other way around - function, that does perfectly legal things may introduce invalid behavior. Look at this code:</p>\n\n<pre><code>static const char* sample_string = \"String\";\n\nvoid f2 (const char ** ccc)\n{\n    *ccc = sample_string; //Perfectly valid - function does not do any \"evil\" things\n}\n\nint main ( void )\n{\n    char** v1 = NULL;\n\n    f2(v1); // After this call, *v1 will point to sample_string\n\n    (*v1)[0] = 'Q'; // Access violation error\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 8652, "user_id": 2040863, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IspsC.jpg?s=128&g=1", "display_name": "John Hascall", "link": "https://stackoverflow.com/users/2040863/john-hascall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7146, "favorite_count": 1, "closed_date": 1439991157, "accepted_answer_id": 32096996, "answer_count": 2, "score": 2, "last_activity_date": 1439992664, "creation_date": 1439990462, "question_id": 32096734, "link": "https://stackoverflow.com/questions/32096734/const-char-vs-const-char-function-argument", "closed_reason": "Duplicate", "title": "const char * vs. const char ** function argument", "body": "<p>I've read the <a href=\"http://c-faq.com/ansi/constmismatch.html\" rel=\"nofollow\">C FAQ on const</a>, but I'm still confused.</p>\n\n<p>I was under the (apparently mistaken) impression that const in a function declaration was essentially a promise that the function won't modify what you have marked as const.  Thus passing in a const or not-const parameter is fine.  But this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nextern void f1 ( const char * cc );\nextern void f2 ( const char ** ccc );\n\nint main ( void ) {\n    char            c1[]    = \"hello\";\n    const char *    c2      = \"hello\";\n    char *          c3      = NULL;\n    char **         v1      = NULL;\n    const char **   v2      = NULL;\n\n    f1( c1 );               /* ok */\n    f1( c2 );               /* ok */\n    f1( c3 );               /* ok */\n    f1( \"hello, world\" );   /* ok */\n    f2( v1 );               /* compiler warning - why? */\n    f2( v2 );               /* ok */\n    return 0;\n}\n</code></pre>\n\n<p>warns thusly:</p>\n\n<pre><code>$ cc -c -o sample.o sample.c sample.c: In function 'main': sample.c:17:\nwarning: passing argument 1 of 'f2' from incompatible pointer type\nsample.c:4: note: expected 'const char **' but argument is of type 'char **'\n</code></pre>\n"}, {"tags": ["c", "locking", "pthreads", "global-variables", "mutex"], "answers": [{"tags": [], "owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "is_accepted": true, "score": 3, "last_activity_date": 1439991176, "last_edit_date": 1439991176, "creation_date": 1439990837, "answer_id": 32096877, "question_id": 32096707, "link": "https://stackoverflow.com/questions/32096707/c-and-pthreads-how-can-a-mutex-be-referred-to-a-particular-variable/32096877#32096877", "title": "C and pthreads: how can a mutex be referred to a particular variable?", "body": "<p>A (pthread) mutex isn't explicitly bound to a particular variable, it's just a general locking mechanism. It's up to you to make sure every action on that variable is properly surrounded by locks and unlocks. </p>\n\n<p>Your program has a(n implicit) contract that only 1 thread may access <code>dotstr.sum</code>. The mutex helps you enforce it by making sure only 1 thread can have a lock on the mutex, but it won't force you to lock and unlock it everytime you do something with <code>dotstr.sum</code>.</p>\n\n<p>Try, for example, commenting out the lock &amp; unlock lines. The program will still compile and run, but the result may not be what you wanted it to be.</p>\n\n<p>You can associate a mutex with anything, for example reading or writing from a file. But <em>you</em> must make sure that every access to the thing you want to lock is actually locked.</p>\n"}], "owner": {"reputation": 1102, "user_id": 2501622, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2e6a958d1e2cccd68149bafd9418dd47?s=128&d=identicon&r=PG", "display_name": "BowPark", "link": "https://stackoverflow.com/users/2501622/bowpark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 32096877, "answer_count": 1, "score": 1, "last_activity_date": 1439991176, "creation_date": 1439990410, "question_id": 32096707, "link": "https://stackoverflow.com/questions/32096707/c-and-pthreads-how-can-a-mutex-be-referred-to-a-particular-variable", "title": "C and pthreads: how can a mutex be referred to a particular variable?", "body": "<p>In <a href=\"https://computing.llnl.gov/tutorials/pthreads/samples/dotprod_mutex.c\" rel=\"nofollow\">this</a> code an example of the use of mutex is showed. In particular, the mutex is first declared before the <code>main</code>:</p>\n\n<pre><code>pthread_mutex_t mutexsum;\n</code></pre>\n\n<p>The particular variable to be \"protected\" by the mutex is <code>dotstr.sum</code> in the global structure <code>dotstr</code>: every thread writes on it after having acquired a <code>lock</code>. The correspondant code is:</p>\n\n<pre><code>pthread_mutex_lock (&amp;mutexsum);\ndotstr.sum += mysum;\nprintf(\"Thread %ld did %d to %d:  mysum=%f global sum=%f\\n\",offset,start,end,mysum,dotstr.sum);\npthread_mutex_unlock (&amp;mutexsum);\n</code></pre>\n\n<p>I have compiled the code and it obviously works, but I don't know mutexes very well. So, how can the program be aware that the \"general\" mutex <code>mutexsum</code> is applied just on the <code>dotstr.sum</code> variable? </p>\n\n<p>There are many other global variables which can be locked. Why there is not an explicit relation in the code between the mutex <code>mutexsum</code> and the variable I want to lock, <code>dotstr.sum</code>?</p>\n"}, {"tags": ["java", "c", "java-native-interface"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1439992527, "post_id": 32096645, "comment_id": 52089580, "body": "<i>&quot;Basically the jbyteArray is cast to *(oop*)&quot;</i>. No, the <code>jobject</code> is being cast to an <code>oop*</code>, which then gets dereferenced, giving you an <code>oop</code> (it&#39;s unclear to me exactly what an <code>oop</code> is)."}, {"owner": {"reputation": 946, "user_id": 1580426, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e2de3805cb75a1a2b0aff78091d2956?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/1580426/bond"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1439995506, "post_id": 32096645, "comment_id": 52091960, "body": "The byte[] is cast to jobject which is then cast to oop.  I think oop represents all java objects."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1439995735, "post_id": 32096645, "comment_id": 52092162, "body": "My point was that <code>(void*)</code> is just a cast, while <code>*(oop*)</code> is a cast followed by a pointer dereference."}, {"owner": {"reputation": 946, "user_id": 1580426, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e2de3805cb75a1a2b0aff78091d2956?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/1580426/bond"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1439996922, "post_id": 32096645, "comment_id": 52093075, "body": "Do you know what the point of casting to a pointer then dereferencing it is?"}], "answers": [{"tags": [], "owner": {"reputation": 946, "user_id": 1580426, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e2de3805cb75a1a2b0aff78091d2956?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/1580426/bond"}, "is_accepted": false, "score": 0, "last_activity_date": 1439998771, "creation_date": 1439998771, "answer_id": 32100020, "question_id": 32096645, "link": "https://stackoverflow.com/questions/32096645/accessing-content-of-bytearray-without-jni-getbytearrayelements/32100020#32100020", "title": "Accessing content of ByteArray without JNI GetByteArrayElements", "body": "<p>Thank you Michael for the input.</p>\n\n<p>After two days of fiddling; here is the correct / easy way to do it.</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_analyze(\n        JNIEnv *env, jclass cls, jobject bytes, jint bytes_len, jlong addr,\n        jint pos, jint limit) {\n\n    jbyte *elements = (*env)-&gt;GetByteArrayElements(env, (jbyteArray) bytes, false);\n\n    char * e = (void *) elements;\n    void * f =  *(jobject *) bytes;\n    char * o = (void *) (uintptr_t) addr;\n\n    printf(\"%d %d\\n\", e,f );\n\n//  printf(\"address %d limit %d\\n\", (long) addr, (int) limit);\n\n    hexDump(e, (int) bytes_len);\n    hexDump(f, (int) 500);\n    hexDump(o, (int) limit);\n\n    //(*env)-&gt;ReleaseByteArrayElements(env, bytes, elements, 0);\n}\n</code></pre>\n\n<p>Output notice that ff 22 ff 22 (the marker we are looking for) starts at position 16 from the dereferenced jobject.</p>\n\n<pre><code>34533184 1794590904\nhex address: 34533184 len: 4\n000000  ff 22 ff 22                                      .\".\"\nhex address: 1794590904 len: 500\n000000  01 00 00 00 00 00 00 00 f5 00 00 f8 04 00 00 00  ................\n000016  ff 22 ff 22 00 00 00 00 01 00 00 00 00 00 00 00  .\".\"............\n000032  da 02 00 f8 1d e9 5e ed 00 00 00 00 00 00 00 00  ......^.........\n000048  01 00 00 00 00 00 00 00 41 00 00 f8 13 00 00 00  ........A.......\n000064  6a 00 61 00 76 00 61 00 2f 00 6e 00 69 00 6f 00  j.a.v.a./.n.i.o.\n000080  2f 00 42 00 79 00 74 00 65 00 42 00 75 00 66 00  /.B.y.t.e.B.u.f.\n000096  66 00 65 00 72 00 00 00 01 00 00 00 00 00 00 00  f.e.r...........\n000112  da 02 00 f8 27 e9 5e ed ee 9c 60 df 00 00 00 00  ....'.^...`.....\n000128  01 00 00 00 00 00 00 00 41 00 00 f8 13 00 00 00  ........A.......\n000144  6a 00 61 00 76 00 61 00 2e 00 6e 00 69 00 6f 00  j.a.v.a...n.i.o.\n000160  2e 00 42 00 79 00 74 00 65 00 42 00 75 00 66 00  ..B.y.t.e.B.u.f.\n000176  66 00 65 00 72 00 00 00 01 00 00 00 00 00 00 00  f.e.r...........\n000192  e5 01 00 f8 00 00 00 00 01 00 00 00 00 00 00 00  ................\n000208  66 66 00 f8 8e 43 60 5f 24 e9 5e ed 2e e9 5e ed  ff...C`_$.^...^.\n000224  66 f7 5e ed 00 00 00 00 01 00 00 00 00 00 00 00  f.^.............\n000240  da 02 00 f8 37 e9 5e ed 00 00 00 00 00 00 00 00  ....7.^.........\n000256  01 00 00 00 00 00 00 00 41 00 00 f8 13 00 00 00  ........A.......\n000272  6a 00 61 00 76 00 61 00 2f 00 6e 00 69 00 6f 00  j.a.v.a./.n.i.o.\n000288  2f 00 42 00 79 00 74 00 65 00 42 00 75 00 66 00  /.B.y.t.e.B.u.f.\n000304  66 00 65 00 72 00 00 00 01 00 00 00 00 00 00 00  f.e.r...........\n000320  e5 01 00 f8 00 00 00 00 01 00 00 00 00 00 00 00  ................\n000336  66 66 00 f8 8e 43 60 5f 24 e9 5e ed 3e e9 5e ed  ff...C`_$.^.&gt;.^.\n000352  76 f7 5e ed 00 00 00 00 01 00 00 00 00 00 00 00  v.^.............\n000368  da 02 00 f8 47 e9 5e ed 00 00 00 00 00 00 00 00  ....G.^.........\n000384  01 00 00 00 00 00 00 00 41 00 00 f8 13 00 00 00  ........A.......\n000400  6a 00 61 00 76 00 61 00 2f 00 6e 00 69 00 6f 00  j.a.v.a./.n.i.o.\n000416  2f 00 42 00 79 00 74 00 65 00 42 00 75 00 66 00  /.B.y.t.e.B.u.f.\n000432  66 00 65 00 72 00 00 00 01 00 00 00 00 00 00 00  f.e.r...........\n000448  84 7e 00 f8 ff ff ff ff 80 ab dc 1d 00 00 00 00  .~..............\n000464  00 00 00 00 36 00 00 00 f4 01 00 00 00 00 00 00  ....6...........\n000480  00 01 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000496  70 e9 5e ed                                      p.^.\nhex address: 501001088 len: 54\n000000  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000016  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000032  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000048  00 00 ff 22 ff 22                                ...\".\"\n</code></pre>\n\n<p>This means that you can access the raw bytes of an primitive array through JNI without using the absurd copy mechanic in GetByteArrayElements; now be aware that this bypasses all sorts of safety checks.</p>\n"}], "owner": {"reputation": 946, "user_id": 1580426, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e2de3805cb75a1a2b0aff78091d2956?s=128&d=identicon&r=PG&f=1", "display_name": "bond", "link": "https://stackoverflow.com/users/1580426/bond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439998771, "creation_date": 1439990254, "last_edit_date": 1439995318, "question_id": 32096645, "link": "https://stackoverflow.com/questions/32096645/accessing-content-of-bytearray-without-jni-getbytearrayelements", "title": "Accessing content of ByteArray without JNI GetByteArrayElements", "body": "<p>I am investigating a more efficient way of accessing the content of a ByteArray through JNI without the ugly GetByteArrayElements.  I am seeking some knowledgeable JNI experts to explain what I am seeing and possibly help with a solution.</p>\n\n<p><strong>My test function</strong></p>\n\n<pre><code>JNIEXPORT void JNICALL Java_analyizer(JNIEnv *env, jclass cls, jbyteArray bytes, jint bytes_len, jlong addr,jint limit) {\n\n    jbyte *elements = (*env)-&gt;GetByteArrayElements(env, bytes, false);\n\n    char * e = (void *) elements;\n    char * f = (void *) bytes;\n    char * o = (void *) (uintptr_t) addr;\n\n    printf(\"%d %d\\n\", e,f );\n\n    hexDump(e, (int) bytes_len);\n    hexDump(f, (int) 500);\n    hexDump(o, (int) limit);\n\n    return;\n}\n\nvoid hexDump(void *addr, int len) {\n    printf(\"hex address: %d len: %d\\n\", (uintptr_t) addr, len);\n\n    int i;\n    unsigned char buff[17];\n    unsigned char *pc = (unsigned char*) addr;\n\n    // Process every byte in the data.\n    for (i = 0; i &lt; len; i++) {\n        // Multiple of 16 means new line (with line offset).\n\n        if ((i % 16) == 0) {\n            // Just don't print ASCII for the zeroth line.\n            if (i != 0)\n                printf(\"  %s\\n\", buff);\n\n            // Output the offset.\n            printf(\"%06d \", i);\n        }\n\n        // Now the hex code for the specific character.\n        printf(\" %02x\", pc[i]);\n\n        // And store a printable ASCII character for later.\n        if ((pc[i] &lt; 0x20) || (pc[i] &gt; 0x7e))\n            buff[i % 16] = '.';\n        else\n            buff[i % 16] = pc[i];\n        buff[(i % 16) + 1] = '\\0';\n    }\n\n    // Pad out last line if not exactly 16 characters.\n    while ((i % 16) != 0) {\n        printf(\"   \");\n        i++;\n    }\n\n    // And print the final ASCII bit.\n    printf(\"  %s\\n\", buff);\n}\n</code></pre>\n\n<p>I set it to dump a large amount of memory from the bytes reference thinking I would find the values in it but it didn't work out that way.</p>\n\n<pre><code>hex address: 31519248 len: 4\n000000  ff 22 ff 22                                      .\".\"\nhex address: 31519040 len: 500\n000000  10 f2 e0 01 00 00 00 00 04 00 00 00 00 00 00 00  ................\n000016  60 a4 b4 1d 00 00 00 00 00 00 00 00 00 00 00 00  `...............\n000032  36 00 00 00 00 00 00 00 a0 26 4a 1b 00 00 00 00  6........&amp;J.....\n000048  18 01 00 00 00 00 00 00 00 d8 e3 01 00 00 00 00  ................\n000064  62 5b fa 01 00 00 00 00 88 f1 e0 01 00 00 00 00  b[..............\n000080  a0 26 4a 1b 00 00 00 00 10 f2 e0 01 00 00 00 00  .&amp;J.............\n000096  c8 41 4a 1b 00 00 00 00 00 00 00 00 00 00 00 00  .AJ.............\n000112  a0 26 4a 1b 00 00 00 00 00 00 00 00 00 00 00 00  .&amp;J.............\n000128  e8 f1 e0 01 00 00 00 00 58 f2 e0 01 00 00 00 00  ........X.......\n000144  30 77 f9 01 00 00 00 00 58 b3 f7 6a 07 00 00 00  0w......X..j....\n000160  76 f9 f9 01 00 00 00 00 36 00 00 00 00 00 00 00  v.......6.......\n000176  00 00 00 00 00 00 00 00 60 a4 b4 1d 00 00 00 00  ........`.......\n000192  70 4a f7 6a 07 00 00 00 04 00 00 00 00 00 00 00  pJ.j............\n000208  b8 48 f7 6a 07 00 00 00 18 f2 e0 01 00 00 00 00  .H.j............\n000224  5c 27 4a 1b 00 00 00 00 90 f2 e0 01 00 00 00 00  \\'J.............\n000240  c8 41 4a 1b 00 00 00 00 00 00 00 00 00 00 00 00  .AJ.............\n000256  00 28 4a 1b 00 00 00 00 e8 f1 e0 01 00 00 00 00  .(J.............\n000272  80 f2 e0 01 00 00 00 00 e0 f2 e0 01 00 00 00 00  ................\n000288  30 77 f9 01 00 00 00 00 00 00 00 00 00 00 00 00  0w..............\n000304  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000320  36 00 00 00 00 00 00 00 70 4a f7 6a 07 00 00 00  6.......pJ.j....\n000336  b8 48 f7 6a 07 00 00 00 60 2e f1 6a 07 00 00 00  .H.j....`..j....\n000352  a0 f2 e0 01 00 00 00 00 e8 04 4a 1b 00 00 00 00  ..........J.....\n000368  10 f3 e0 01 00 00 00 00 90 05 4a 1b 00 00 00 00  ..........J.....\n000384  00 00 00 00 00 00 00 00 38 05 4a 1b 00 00 00 00  ........8.J.....\n000400  80 f2 e0 01 00 00 00 00 10 f3 e0 01 00 00 00 00  ................\n000416  f0 f3 e0 01 00 00 00 00 da 08 f9 01 00 00 00 00  ................\n000432  60 a4 b4 1d 00 00 00 00 00 00 00 00 00 00 00 00  `...............\n000448  70 4a f7 6a 07 00 00 00 b8 48 f7 6a 07 00 00 00  pJ.j.....H.j....\n000464  28 3a f7 6a 07 00 00 00 be ba fe ca be ba fe ca  (:.j............\n000480  be ba fe ca be ba fe ca 00 00 00 00 00 00 00 00  ................\n000496  00 00 00 00                                      ....\nhex address: 498377824 len: 54\n000000  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000016  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000032  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................\n000048  00 00 ff 22 ff 22                                ...\".\"\n</code></pre>\n\n<p>I am reverse engineering how Unsafe_CopyMemory works since it can copy data from a ByteArray into an address.</p>\n\n<p><strong>Unsafe.copyMemory</strong></p>\n\n<pre><code>UNSAFE_ENTRY(void, Unsafe_CopyMemory(JNIEnv *env, jobject unsafe, jlong srcAddr, jlong dstAddr, jlong size))\n  UnsafeWrapper(\"Unsafe_CopyMemory\");\n  if (size == 0) {\n    return;\n  }\n  size_t sz = (size_t)size;\n  if (sz != (julong)size || size &lt; 0) {\n    THROW(vmSymbols::java_lang_IllegalArgumentException());\n  }\n  void* src = addr_from_java(srcAddr);\n  void* dst = addr_from_java(dstAddr);\n  Copy::conjoint_memory_atomic(src, dst, sz);\nUNSAFE_END\n\nUNSAFE_ENTRY(void, Unsafe_CopyMemory2(JNIEnv *env, jobject unsafe, jobject srcObj, jlong srcOffset, jobject dstObj, jlong dstOffset, jlong size))\n  UnsafeWrapper(\"Unsafe_CopyMemory\");\n  if (size == 0) {\n    return;\n  }\n  size_t sz = (size_t)size;\n  if (sz != (julong)size || size &lt; 0) {\n    THROW(vmSymbols::java_lang_IllegalArgumentException());\n  }\n  oop srcp = JNIHandles::resolve(srcObj);\n  oop dstp = JNIHandles::resolve(dstObj);\n  if (dstp != NULL &amp;&amp; !dstp-&gt;is_typeArray()) {\n    // NYI:  This works only for non-oop arrays at present.\n    // Generalizing it would be reasonable, but requires card marking.\n    // Also, autoboxing a Long from 0L in copyMemory(x,y, 0L,z, n) would be bad.\n    THROW(vmSymbols::java_lang_IllegalArgumentException());\n  }\n  void* src = index_oop_from_field_offset_long(srcp, srcOffset);\n  void* dst = index_oop_from_field_offset_long(dstp, dstOffset);\n  Copy::conjoint_memory_atomic(src, dst, sz);\nUNSAFE_END\n</code></pre>\n\n<p><strong>Unsafe.java</strong></p>\n\n<pre><code>public native void copyMemory(Object srcBase, long srcOffset,\n                                  Object destBase, long destOffset,\n                                  long bytes);\n</code></pre>\n\n<p><strong>JNIHandles::resolve</strong></p>\n\n<p>All this seems to do is cast jobject using *(oop*).  I am not an expert in C and I've never seen that kind of double pointer cast.</p>\n\n<pre><code>inline oop JNIHandles::resolve(jobject handle) {\n  oop result = (handle == NULL ? (oop)NULL : *(oop*)handle);\n  assert(result != NULL || (handle == NULL || !CheckJNICalls || is_weak_global_handle(handle)), \"Invalid value read from jni handle\");\n  assert(result != badJNIHandle, \"Pointing to zapped jni handle area\");\n  return result;\n};\n</code></pre>\n\n<p><strong>index_oop_from_field_offset_long</strong></p>\n\n<p>The byte_offset can be read/determined by Bits.unsafe().arrayBaseOffset(byte[].class);  For byte[] the value is 16.</p>\n\n<pre><code>inline jlong field_offset_to_byte_offset(jlong field_offset) {\n  return field_offset;\n}\n\ninline void* index_oop_from_field_offset_long(oop p, jlong field_offset) {\n  jlong byte_offset = field_offset_to_byte_offset(field_offset);\n\n  if (sizeof(char*) == sizeof(jint))    // (this constant folds!)\n    return (address)p + (jint) byte_offset;\n  else\n    return (address)p +        byte_offset;\n}\n</code></pre>\n\n<p>Basically the jbyteArray is cast to *(oop*) then cast to (address) and that is it.  I don't understand why that works but a direct cast to (void *) doesn't.</p>\n"}, {"tags": ["c", "gcc", "optimization", "clang"], "answers": [{"tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 2, "last_activity_date": 1439990798, "creation_date": 1439990798, "answer_id": 32096860, "question_id": 32096445, "link": "https://stackoverflow.com/questions/32096445/can-clang-gcc-optimize-linked-list-trees/32096860#32096860", "title": "Can clang/gcc optimize linked-list trees?", "body": "<p>Compiler optimizations won't change your data structure into something else.  The best you'll get is a local array variable being kept entirely in registers and optimized away.</p>\n\n<p>In theory with whole-program optimization, a compiler <em>could</em> figure out what you're doing with a data structure, and use a better one.  In practice, if we had that we'd just tack on some natural-language processing and we'd have an AI to write classes / libraries based on English descriptions.</p>\n\n<p>Your best bet is to use <code>-O3</code>.  Or <code>-Ofast</code> if <code>-ffast-math</code> and similar \"unsafe\" optimizations are ok.  Even better: use <code>-profile-generate</code> and <code>-fprofile-use</code> to optimize based on which loops run a lot, and which way branches usually go, and things like that.  This will get the compiler to do as much as possible to minimize any constant factors in the run-time of your algorithm.</p>\n\n<hr>\n\n<p>To improve the worst-case lookup times, you do need to change your algorithm.  Either one of the many flavours of tree that involves re-balancing to avoid degenerate cases, or a different data structure entirely (e.g. hash table).</p>\n"}], "owner": {"reputation": 237, "user_id": 5243467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbb7ca64eda9911e73adba6964b025b7?s=128&d=identicon&r=PG&f=1", "display_name": "Leroy", "link": "https://stackoverflow.com/users/5243467/leroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 32096860, "answer_count": 1, "score": 0, "last_activity_date": 1440008622, "creation_date": 1439989757, "last_edit_date": 1439992278, "question_id": 32096445, "link": "https://stackoverflow.com/questions/32096445/can-clang-gcc-optimize-linked-list-trees", "title": "Can clang/gcc optimize linked-list trees?", "body": "<p>I have a C program that has a tree implemented with linked-lists (child->parent and sibling->sibling).</p>\n\n<p>I'm very green to compiler optimizations. I have seen and read about O-O3 and I think I've read about speeding up nested for loops and such.</p>\n\n<p>If I want to increase performance with my tree implementation, do I need to start thinking about reimplementing it? Or perhaps I can just crunch the compiler?</p>\n"}, {"tags": ["c", "malloc"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 7, "creation_date": 1439989727, "post_id": 32096395, "comment_id": 52087275, "body": "You can&#39;t do that - you need to take care of this kind of book-keeping yourself."}, {"owner": {"reputation": 35069, "user_id": 1324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883238a436c061eaf848af87b8fda561?s=128&d=identicon&r=PG", "display_name": "Paul Roub", "link": "https://stackoverflow.com/users/1324/paul-roub"}, "edited": false, "score": 5, "creation_date": 1439989748, "post_id": 32096395, "comment_id": 52087292, "body": "You can&#39;t. There&#39;s no way to examine a dynamically allocated C array and magically determine its size."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1439989902, "post_id": 32096395, "comment_id": 52087405, "body": "Yes, but interestingly, for <code>free</code> no size is given as argument either. Although to my knowledge there is no specified way to access the internal bookkeeping, the information of the size of the allocated memory area must be stored somewhere internally."}, {"owner": {"reputation": 22043, "user_id": 87973, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abc7768058e25c1382df18414db72a10?s=128&d=identicon&r=PG", "display_name": "Jonas Bystr&#246;m", "link": "https://stackoverflow.com/users/87973/jonas-bystr%c3%b6m"}, "edited": false, "score": 2, "creation_date": 1439989906, "post_id": 32096395, "comment_id": 52087410, "body": "You could have an <code>size_t s[100]</code> to store the sizes in dynamically, then just do a lookup."}, {"owner": {"reputation": 764, "user_id": 2899478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juuUm.jpg?s=128&g=1", "display_name": "o_weisman", "link": "https://stackoverflow.com/users/2899478/o-weisman"}, "edited": false, "score": 2, "creation_date": 1439989935, "post_id": 32096395, "comment_id": 52087427, "body": "This has been asked and answered: <a href=\"http://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c\" title=\"how do i determine the size of my array in c\">stackoverflow.com/questions/37538/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 4, "last_activity_date": 1439991075, "last_edit_date": 1439991075, "creation_date": 1439989969, "answer_id": 32096515, "question_id": 32096395, "link": "https://stackoverflow.com/questions/32096395/how-to-dynamically-calculate-the-size-of-a-dynamically-allocated-memory/32096515#32096515", "title": "How to dynamically calculate the size of a dynamically allocated memory", "body": "<p>In general you can't, and you should just take care of this kind of book-keeping yourself, but one possibility would be to store an additional row pointer set to <code>NULL</code> (aka a <em>sentinel</em>):</p>\n\n<pre><code>a = malloc((a_size + 1) * sizeof(char*));   // allocate additional row pointer\nfor (int i = 0; i &lt; a_size; i++)            // allocate rows\n    a[i] = malloc(s_size); \na[a_size] = NULL;                           // set sentinel row to NULL\n</code></pre>\n\n<p>Then you can determine the size by iterating through the row pointers until you find a <code>NULL</code> row. Note that this could be quite inefficient if you do it too often, or if the number of rows could be large.</p>\n"}, {"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1439990073, "creation_date": 1439990073, "answer_id": 32096563, "question_id": 32096395, "link": "https://stackoverflow.com/questions/32096395/how-to-dynamically-calculate-the-size-of-a-dynamically-allocated-memory/32096563#32096563", "title": "How to dynamically calculate the size of a dynamically allocated memory", "body": "<p>First of all dynamically you allocated 101 one-dimensional arrays.</p>\n\n<p>The total number of allocated characters are equal to the product <code>s_size * s_size</code>. </p>\n\n<p>You could use a sentinel but in general it is difficult to select a value for the sentinel.</p>\n\n<p>So you should store these values in variables yourself.</p>\n\n<p>You need to determine  the length of a string stored in one one-dimensiobal array with elements of type <code>char</code> you should use standard C function <code>strlen</code> declared in header <code>&lt;string.h&gt;</code> For example</p>\n\n<pre><code>strlen( a[0] )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1439991017, "last_edit_date": 1495541678, "creation_date": 1439990143, "answer_id": 32096596, "question_id": 32096395, "link": "https://stackoverflow.com/questions/32096395/how-to-dynamically-calculate-the-size-of-a-dynamically-allocated-memory/32096596#32096596", "title": "How to dynamically calculate the size of a dynamically allocated memory", "body": "<p><strong>TL;DR</strong> Pointers do not store any information regarding the allocated memory size. So, there is not straightway API kind of thing using which we can determine the allocated size.</p>\n\n<p>However, some dynamic memory allocation libraries provide some options to actually fetch the information regarding the allocated size, but that's non-standard and heavily implementation dependent.</p>\n\n<p>That said, you can think of an approach where you can explicitly <em>mark</em> the end of the data (<em>check about the <a href=\"https://en.wikipedia.org/wiki/Sentinel_value\" rel=\"nofollow noreferrer\">sentinel value</a> concept</em>) stored into the dynamically allocated memory (thus, essentially, marking the end of the allocated memory) but then also, it's something you have to take care of. </p>\n\n<p>Please remember. as very rightly mentioned by <a href=\"https://stackoverflow.com/users/253056/paul-r\">Mr. Paul R</a>, this sentinel value approach can be quite inefficient and there can be many limitations to this approach, like</p>\n\n<ul>\n<li>You cannot have the sentinel value as one of the <em>legit</em> values.</li>\n<li>In case, somehow the sentinel value does not appear at the very end of the allocation, it may provide wrong information about the allocated size.</li>\n<li>You're always allocating some memory (to put the sentinel) which is not being used <em>effectively</em>.</li>\n</ul>\n\n<p>and so on. </p>\n\n<p>IMHO, best approach will be, keep the track of the size of allocation in a separate variable and pass that around with the pointer, as and when necessary.</p>\n"}, {"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": false, "score": 0, "last_activity_date": 1439990435, "creation_date": 1439990435, "answer_id": 32096719, "question_id": 32096395, "link": "https://stackoverflow.com/questions/32096395/how-to-dynamically-calculate-the-size-of-a-dynamically-allocated-memory/32096719#32096719", "title": "How to dynamically calculate the size of a dynamically allocated memory", "body": "<p>One possibility to implement the desired bookkeeping mechanism (although this might not be a good approach) would be to implement custom allocation, size and free functions which can be sketched in the following way, where <code>size_t</code> is the type used for the size of arrays; the approach is similar to the <a href=\"https://en.wikipedia.org/wiki/String_%28computer_science%29\" rel=\"nofollow\">Pascal</a> style strings.</p>\n\n<p>For the allocation, allocate <code>sizeof(t_size)</code> memory more, write it to the beginnig of the allocated block, and return a pointer just pointing after the first <code>sizeof(t_size)</code> bytes.</p>\n\n<p>To obtain the size, just look <code>sizeof(t_size)</code> bytes before the array.</p>\n\n<p>For the free function, deallocate the memory block beginning at the position where the size is stored, which is the beginning of the block that was actually allocated.</p>\n"}], "owner": {"reputation": 11768, "user_id": 2274686, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/z3EDW.jpg?s=128&g=1", "display_name": "vdenotaris", "link": "https://stackoverflow.com/users/2274686/vdenotaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "accepted_answer_id": 32096515, "answer_count": 4, "score": 3, "last_activity_date": 1439992722, "creation_date": 1439989612, "last_edit_date": 1439992722, "question_id": 32096395, "link": "https://stackoverflow.com/questions/32096395/how-to-dynamically-calculate-the-size-of-a-dynamically-allocated-memory", "title": "How to dynamically calculate the size of a dynamically allocated memory", "body": "<p>Considering the code as follows:</p>\n\n<pre><code>int i, a_size, s_size, n;\nchar **a;\n\na_size = 100; // examples\ns_size = 10;\n\na = malloc(a_size * sizeof(char*));\nfor (int i = 0; i &lt; a_size; i++)\n    a[i] = malloc((s_size) * sizeof(char)); \n</code></pre>\n\n<p>Now, I would like to calculate how many elements there are inside the array dynamically (thus, ignoring <code>a_size</code>). Which is the proper way to do that?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1439988115, "post_id": 32095796, "comment_id": 52086047, "body": "It&#39;s because of the TAB character which advances simple to the next modulo 8 column."}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1439988178, "post_id": 32095796, "comment_id": 52086092, "body": "@MichaelWalz does that depend on the terminal, or is it standardized somewhere?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1439988239, "post_id": 32095796, "comment_id": 52086145, "body": "Try using <code>&quot;%2d&quot;</code> for the days instead. Or remove the space after printing the days."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1439988396, "post_id": 32095796, "comment_id": 52086293, "body": "@Kninnug see by answer below."}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 5240812, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/6026913dffc8fdb128ce57e27089a1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Saleem", "link": "https://stackoverflow.com/users/5240812/fahad-saleem"}, "edited": false, "score": 0, "creation_date": 1439988668, "post_id": 32095879, "comment_id": 52086508, "body": "I tried removing the space. Now it doesn&#39;t indent any line of code."}, {"owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "reply_to_user": {"reputation": 399, "user_id": 5240812, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/6026913dffc8fdb128ce57e27089a1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Saleem", "link": "https://stackoverflow.com/users/5240812/fahad-saleem"}, "edited": false, "score": 0, "creation_date": 1439988742, "post_id": 32095879, "comment_id": 52086563, "body": "@FahadSaleem, I&#39;m not sure what you mean by <i>indent</i>, but removing the space does align all <i>Amount</i> columns."}], "tags": [], "owner": {"reputation": 64130, "user_id": 107090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RZVHK.png?s=128&g=1", "display_name": "lhf", "link": "https://stackoverflow.com/users/107090/lhf"}, "is_accepted": false, "score": 0, "last_activity_date": 1439988267, "creation_date": 1439988267, "answer_id": 32095879, "question_id": 32095796, "link": "https://stackoverflow.com/questions/32095796/indentation-on-c-not-working-for-1st-ten-lines-of-code/32095879#32095879", "title": "indentation on C not working for 1st ten lines of code", "body": "<p>Try</p>\n\n<pre><code>printf(\"Day: %d\\t Amount: %f\\n\", days, penny);\n</code></pre>\n\n<p>Note the absence of a space before the first tab.</p>\n\n<p>But perhaps using <code>%2d</code> with you original format gives a better result.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 3, "last_activity_date": 1439989292, "last_edit_date": 1439989292, "creation_date": 1439988370, "answer_id": 32095927, "question_id": 32095796, "link": "https://stackoverflow.com/questions/32095796/indentation-on-c-not-working-for-1st-ten-lines-of-code/32095927#32095927", "title": "indentation on C not working for 1st ten lines of code", "body": "<p>It's because of the TAB character (<code>\\t'</code>) which simply advances the cursor to the next modulo 8 column:</p>\n\n<p>Illustration:</p>\n\n<pre><code>01234567012375670123456701234567 &lt;-- column number modulo 8\n|       |       |       |\nDay: 9   Amount: 2.560000\nDay: 10          Amount: 5.120000\nDay: 11          Amount: 10.240000\n</code></pre>\n\n<p>Usually terminals behave like this, but I'm not sure if there is actually a standard which defines this.</p>\n\n<p>Small program illustrating this behaviour:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  int i,j,k;\n\n  for (i = 0; i &lt; 16; i++)\n  {\n    for (j = 0; j &lt; 4; j++)\n    {\n      for (k = 0; k &lt; i; k++)\n      {\n        printf (\"*\");\n      }\n      printf (\"\\t\");\n    }    \n    printf (\"\\n\");\n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>*       *       *       *\n**      **      **      **\n***     ***     ***     ***\n****    ****    ****    ****\n*****   *****   *****   *****\n******  ******  ******  ******\n******* ******* ******* *******\n********        ********        ********        ********\n*********       *********       *********       *********\n**********      **********      **********      **********\n***********     ***********     ***********     ***********\n************    ************    ************    ************\n*************   *************   *************   *************\n**************  **************  **************  **************\n*************** *************** *************** ***************\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3361, "user_id": 91208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e643d47c57b984078c3b67560f7649b6?s=128&d=identicon&r=PG", "display_name": "Lolo", "link": "https://stackoverflow.com/users/91208/lolo"}, "edited": false, "score": 0, "creation_date": 1494595737, "post_id": 32095951, "comment_id": 74910027, "body": "Great printf article!"}], "tags": [], "owner": {"reputation": 16091, "user_id": 4975822, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c04e8c4c984d36bea8a6239574980fbd?s=128&d=identicon&r=PG&f=1", "display_name": "artm", "link": "https://stackoverflow.com/users/4975822/artm"}, "is_accepted": false, "score": 3, "last_activity_date": 1439989419, "last_edit_date": 1439989419, "creation_date": 1439988414, "answer_id": 32095951, "question_id": 32095796, "link": "https://stackoverflow.com/questions/32095796/indentation-on-c-not-working-for-1st-ten-lines-of-code/32095951#32095951", "title": "indentation on C not working for 1st ten lines of code", "body": "<p><code>tab</code> is not a reliable alignment. You can specify number of spaces instead, for example:</p>\n\n<p><code>printf(\"Day: %-10dAmount: %f\\n\", days, penny);</code></p>\n\n<p>The <code>%-10d</code> specifier would print the day in exactly 10 spaces, left alignment.</p>\n\n<p>Btw, see this <a href=\"http://www.cypress.com/file/54761/download\" rel=\"nofollow\">printf tricks</a> for various tricks with <code>printf</code>, alignments, etc.</p>\n"}], "owner": {"reputation": 399, "user_id": 5240812, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/6026913dffc8fdb128ce57e27089a1ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fahad Saleem", "link": "https://stackoverflow.com/users/5240812/fahad-saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1439989419, "creation_date": 1439988030, "last_edit_date": 1439988954, "question_id": 32095796, "link": "https://stackoverflow.com/questions/32095796/indentation-on-c-not-working-for-1st-ten-lines-of-code", "title": "indentation on C not working for 1st ten lines of code", "body": "<p>The indentation in my program, which is achieved by <code>\\t</code>, is only being displayed after the 10th day. I don't know what's wrong with it.</p>\n\n<pre><code>float penny= 0.01;\nint days = 1;\n\nwhile(31 &gt;= days)\n{\n    printf(\"Day: %d \\t Amount: %f\\n\", days, penny);\n    days += 1;\n    penny *= 2;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 10, "creation_date": 1439988079, "post_id": 32095786, "comment_id": 52086016, "body": "In a printf format string, the format specifier <code>%%</code> means to print <code>%</code> . If you used <code>puts</code> isntead you would see <code>%%d</code>."}], "answers": [{"tags": [], "owner": {"reputation": 21711, "user_id": 418729, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vm1jt.jpg?s=128&g=1", "display_name": "Sadique", "link": "https://stackoverflow.com/users/418729/sadique"}, "is_accepted": false, "score": 2, "last_activity_date": 1439988994, "last_edit_date": 1439988994, "creation_date": 1439988688, "answer_id": 32096049, "question_id": 32095786, "link": "https://stackoverflow.com/questions/32095786/why-the-output-of-printfd-1-is-d-but-printfd1-is-d/32096049#32096049", "title": "Why the output of printf(&quot;%d&quot; +1) is d but printf(&quot;%%%d&quot;+1) is %d?", "body": "<p><code>\"%d\"+1</code> by pointer arithmetic takes you to the second char in the char array which is <code>d</code>.</p>\n\n<p>In the string literal <code>\"%%%d\"+1</code> leaves you with <code>\"%%d\"</code> which is interpreted as <code>%d</code> by <code>printf</code>. Since <code>%%</code> is escaped to <code>%</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 1, "last_activity_date": 1439988865, "creation_date": 1439988865, "answer_id": 32096105, "question_id": 32095786, "link": "https://stackoverflow.com/questions/32095786/why-the-output-of-printfd-1-is-d-but-printfd1-is-d/32096105#32096105", "title": "Why the output of printf(&quot;%d&quot; +1) is d but printf(&quot;%%%d&quot;+1) is %d?", "body": "<p>You are doing pointer arithmetic. <code>\"%d\"+1</code> is <code>\"d\"</code> and <code>\"%%%d\"+1</code> is <code>\"%%d\"</code> (it's like you are skipping the first character of the string).</p>\n\n<p>But, as the <a href=\"http://en.cppreference.com/w/c/io/fprintf\" rel=\"nofollow\">documentation of printf()</a> explains, the percent sign (<code>%</code>) is a special character in the string format argument of <code>printf()</code>. It introduces a \"conversion specifications\". </p>\n\n<p>Because it is a special character it needs a special sequence (a conversion specification, in fact) in order to be able to print a literal <code>%</code>. And the conversion specification designated to print a literal <code>%</code> is exactly <code>%%</code>, as you can see from the first row of the conversion specifications table in the docs.</p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 3145716, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/4JcnI.jpg?s=128&g=1", "display_name": "piyush", "link": "https://stackoverflow.com/users/3145716/piyush"}, "is_accepted": false, "score": 1, "last_activity_date": 1439989714, "last_edit_date": 1439989714, "creation_date": 1439988958, "answer_id": 32096147, "question_id": 32095786, "link": "https://stackoverflow.com/questions/32095786/why-the-output-of-printfd-1-is-d-but-printfd1-is-d/32096147#32096147", "title": "Why the output of printf(&quot;%d&quot; +1) is d but printf(&quot;%%%d&quot;+1) is %d?", "body": "<p>You are using <code>+1</code> in <code>printf</code> which will in turn skip the one character i.e. <code>%</code> in your case. after skipping <code>%</code>character you will be left with <code>%%d</code>, since <code>%%</code> is used to print <code>%</code> character. Output will be <code>%d</code>. </p>\n"}], "owner": {"reputation": 165, "user_id": 3277437, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100000932870308/picture?type=large", "display_name": "Mudit Juneja", "link": "https://stackoverflow.com/users/3277437/mudit-juneja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1119, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1439989714, "creation_date": 1439988002, "question_id": 32095786, "link": "https://stackoverflow.com/questions/32095786/why-the-output-of-printfd-1-is-d-but-printfd1-is-d", "title": "Why the output of printf(&quot;%d&quot; +1) is d but printf(&quot;%%%d&quot;+1) is %d?", "body": "<p>Why is that the output of </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\nprintf(\"%d\"+1);\n}\n</code></pre>\n\n<p>is <strong>d</strong> but the output of </p>\n\n<pre><code>#include&lt;stdio.h&gt;\nvoid main()\n{\n printf(\"%%%d\"+1);\n}\n</code></pre>\n\n<p>is <strong>%d</strong> and not <strong>%%d</strong> ??</p>\n"}, {"tags": ["c", "libraries"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 5, "creation_date": 1439987754, "post_id": 32095641, "comment_id": 52085768, "body": "You mean <a href=\"http://en.cppreference.com/w/c/io/sscanf\" rel=\"nofollow noreferrer\"><code>sscanf</code></a>?"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1439987771, "post_id": 32095641, "comment_id": 52085785, "body": "Are you looking for sscanf ?"}, {"owner": {"reputation": 1091, "user_id": 3745005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yvS7i.png?s=128&g=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/3745005/andrey"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1439987825, "post_id": 32095641, "comment_id": 52085833, "body": "@Kninnug Yes, that&#39;s exactly what I was looking for."}], "answers": [{"tags": [], "owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "is_accepted": true, "score": 2, "last_activity_date": 1439987832, "creation_date": 1439987832, "answer_id": 32095727, "question_id": 32095641, "link": "https://stackoverflow.com/questions/32095641/parsing-ascii-in-raw-memory-in-c/32095727#32095727", "title": "Parsing ASCII in raw memory in C", "body": "<p>You'll be wanting <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow\"><code>sscanf</code></a>. Note that it does expect a null-terminated string.</p>\n"}], "owner": {"reputation": 1091, "user_id": 3745005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yvS7i.png?s=128&g=1", "display_name": "andrey", "link": "https://stackoverflow.com/users/3745005/andrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 32095727, "answer_count": 1, "score": -1, "last_activity_date": 1439987832, "creation_date": 1439987582, "question_id": 32095641, "link": "https://stackoverflow.com/questions/32095641/parsing-ascii-in-raw-memory-in-c", "title": "Parsing ASCII in raw memory in C", "body": "<p>My goal is to parse potentially garbled ASCII data containing text and numbers. So far I've been doing fine with getting a pointer to numbers within the text with <code>strcmp</code> and hard-coded pointer arithmetic and then converting them with <code>strtol</code>, but I feel there must be a better way.</p>\n\n<p>Is there a function with the effect of <code>scanf</code> which takes a pointer to memory instead of input stream?</p>\n"}, {"tags": ["c", "pointers"], "answers": [{"tags": [], "owner": {"reputation": 2655, "user_id": 245452, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85a0d5887acd8563bb712a3786f2f043?s=128&d=identicon&r=PG", "display_name": "ytoledano", "link": "https://stackoverflow.com/users/245452/ytoledano"}, "is_accepted": false, "score": 0, "last_activity_date": 1439987869, "last_edit_date": 1439987869, "creation_date": 1439987364, "answer_id": 32095564, "question_id": 32095509, "link": "https://stackoverflow.com/questions/32095509/how-can-i-change-the-value-where-char-is-pointing/32095564#32095564", "title": "How can I change the value where char* is Pointing?", "body": "<p>The short answer (don't do this):</p>\n\n<pre><code>#include &lt;string.h&gt;\n...\nstrcpy(year, \"your new string\");\n</code></pre>\n\n<p>The reason not to do this is that you don't own the memory that <code>year</code> is pointing to. Instead, you should declare <code>year</code> as <code>char year[100]</code>, this allocates memory for you on the stack. Then you can copy a string into it.</p>\n"}, {"comments": [{"owner": {"reputation": 22043, "user_id": 87973, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abc7768058e25c1382df18414db72a10?s=128&d=identicon&r=PG", "display_name": "Jonas Bystr&#246;m", "link": "https://stackoverflow.com/users/87973/jonas-bystr%c3%b6m"}, "reply_to_user": {"reputation": 7800, "user_id": 556595, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Oquv0.jpg?s=128&g=1", "display_name": "Gustavo Mori", "link": "https://stackoverflow.com/users/556595/gustavo-mori"}, "edited": false, "score": 0, "creation_date": 1440404012, "post_id": 32096453, "comment_id": 52240443, "body": "@GustavoMori: it&#39;s always better to answer what they need to know than what they&#39;re asking. Foundation of modern schooling."}], "tags": [], "owner": {"reputation": 22043, "user_id": 87973, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abc7768058e25c1382df18414db72a10?s=128&d=identicon&r=PG", "display_name": "Jonas Bystr&#246;m", "link": "https://stackoverflow.com/users/87973/jonas-bystr%c3%b6m"}, "is_accepted": false, "score": -1, "last_activity_date": 1439989950, "last_edit_date": 1439989950, "creation_date": 1439989778, "answer_id": 32096453, "question_id": 32095509, "link": "https://stackoverflow.com/questions/32095509/how-can-i-change-the-value-where-char-is-pointing/32096453#32096453", "title": "How can I change the value where char* is Pointing?", "body": "<pre><code>char year[1024] = {0}; // Null terminated, so empty string.\nget_data() {\n    strcpy(year, \"some value\");\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5243308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58dd3a2463a2d8e6ec85136e0377dd33?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza Ali Joiyah", "link": "https://stackoverflow.com/users/5243308/hamza-ali-joiyah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1439992342, "creation_date": 1439987230, "last_edit_date": 1439992284, "question_id": 32095509, "link": "https://stackoverflow.com/questions/32095509/how-can-i-change-the-value-where-char-is-pointing", "title": "How can I change the value where char* is Pointing?", "body": "<p>I am using <code>char*</code> to store some variable values, but there's problem that I can't change its value. If anyone could suggest a method..... Would be a life saver for me....</p>\n\n<pre><code>char* year=\"\"; //definition as empty\nget_data(){\n  year=  //\"Here I want to give it another value of another variable(also in char*)\"\n}\n</code></pre>\n"}, {"tags": ["python", "c", "debugging", "gdb"], "comments": [{"owner": {"reputation": 19948, "user_id": 3150853, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/qIPrg.jpg?s=128&g=1", "display_name": "Jayesh Bhoi", "link": "https://stackoverflow.com/users/3150853/jayesh-bhoi"}, "edited": false, "score": 0, "creation_date": 1439988027, "post_id": 32095495, "comment_id": 52085978, "body": "I don&#39;t think <code>gdb</code> know about python script. when you give <code>gdb -ex r -args python test.py</code> then it will go for debug <code>python</code> compiler not script."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1440006416, "creation_date": 1440006416, "answer_id": 32102250, "question_id": 32095495, "link": "https://stackoverflow.com/questions/32095495/symbol-table-not-found-debugging-python-c/32102250#32102250", "title": "symbol table not found debugging python + C", "body": "<blockquote>\n  <p>what could be the potential reason..</p>\n</blockquote>\n\n<p>The reason is that <code>/usr/bin/python2.7</code> was compiled without debug symbols, and your C module has not yet been dynamically loaded.</p>\n\n<p>One way to deal with this is to set a deferred breakpoint on your module initialization code. Once you hit that breakpoint, <code>list</code> will start working.</p>\n"}], "owner": {"reputation": 1717, "user_id": 2018093, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/A0Cp1.jpg?s=128&g=1", "display_name": "DEV", "link": "https://stackoverflow.com/users/2018093/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440006416, "creation_date": 1439987189, "question_id": 32095495, "link": "https://stackoverflow.com/questions/32095495/symbol-table-not-found-debugging-python-c", "title": "symbol table not found debugging python + C", "body": "<p>I have a C module, I compiled it with -g option, Now I am using some of the functions of this module using a python script. When I run this command -        </p>\n\n<pre><code>gdb -ex r -args python test.py \n</code></pre>\n\n<p>it shows-</p>\n\n<pre><code>Reading symbols from /usr/bin/python2.7...Reading symbols from /usr/bin/python2.7...(no debugging symbols found)...done.\n(no debugging symbols found)...done.\n</code></pre>\n\n<p>and while using GDB command list it throws -</p>\n\n<pre><code>No symbol table is loaded.  Use the \"file\" command.\n</code></pre>\n\n<p>what could be the potential reason..?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "edited": false, "score": 2, "creation_date": 1439986930, "post_id": 32095376, "comment_id": 52085162, "body": "char dagen[6][12]; should be char dagen[7][12];"}, {"owner": {"reputation": 261, "user_id": 3524043, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e9657d7ed76ac4de4d9556f6113b3de1?s=128&d=identicon&r=PG&f=1", "display_name": "Manariba", "link": "https://stackoverflow.com/users/3524043/manariba"}, "reply_to_user": {"reputation": 2619, "user_id": 589026, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wVUyz.jpg?s=128&g=1", "display_name": "Raghu Srikanth Reddy", "link": "https://stackoverflow.com/users/589026/raghu-srikanth-reddy"}, "edited": false, "score": 2, "creation_date": 1439987035, "post_id": 32095376, "comment_id": 52085238, "body": "Still doesn&#39;t work..."}, {"owner": {"reputation": 1998, "user_id": 2283078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/008b29961534cf4b1e499eb430231c3c?s=128&d=identicon&r=PG", "display_name": "Alejandro D&#237;az", "link": "https://stackoverflow.com/users/2283078/alejandro-d%c3%adaz"}, "edited": false, "score": 1, "creation_date": 1439987149, "post_id": 32095376, "comment_id": 52085322, "body": "Why are you passing <code>inlezen(temp, 1, DAGEN, dagen, 6, 12);</code> six parameters when your function only takes two? <code>void inlezen(int t[][DAGEN], char d[][12])</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1439987198, "post_id": 32095376, "comment_id": 52085352, "body": "<code>int temp[2][DAGEN]; char dagen[DAGEN][12];</code>, <code>scanf(&quot;%d&quot;, &amp;t[0][i]);</code>,<code>scanf(&quot;%d&quot;, &amp;t[1][i]);</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1439987248, "post_id": 32095376, "comment_id": 52085392, "body": "The size you give in an array declaration is not the top index, it&#39;s the number of elements in the array. So declaring an array of seven elements (with indexes <code>0</code> through <code>6</code> (inclusive)) you specify <code>7</code> as the size."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 4, "last_activity_date": 1439987623, "last_edit_date": 1439987623, "creation_date": 1439986943, "answer_id": 32095410, "question_id": 32095376, "link": "https://stackoverflow.com/questions/32095376/character-array-in-c-with-function/32095410#32095410", "title": "Character array in c with function", "body": "<p>In your code</p>\n\n<pre><code> strcpy(dagen[6], \"ZO\");\n</code></pre>\n\n<p>you're accessing out of bound memory by using 6 as the index value. Your definition of <code>dagen</code> </p>\n\n<pre><code> char dagen[6][12];\n</code></pre>\n\n<p>only permits a valid access up to 5 as the first index. \n]\nBy using 6, it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>.</p>\n\n<p>FWIW, C uses <code>0</code> based indexing for arrays.</p>\n\n<p>That said, the call</p>\n\n<pre><code> inlezen(temp, 1, DAGEN, dagen, 6, 12);\n</code></pre>\n\n<p>does not match the function signature, at all.</p>\n\n<p>Finally, <code>scanf()</code> family expects a pointer to variable type of arguments for supplied format specifiers, so, the</p>\n\n<pre><code>  scanf(\"%d%*c\", t[0][i]);\n</code></pre>\n\n<p>statements should be actually</p>\n\n<pre><code>  scanf(\"%d%*c\", &amp;t[0][i]);\n</code></pre>\n\n<p>and likewise.</p>\n"}, {"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 1, "last_activity_date": 1439987267, "creation_date": 1439987267, "answer_id": 32095525, "question_id": 32095376, "link": "https://stackoverflow.com/questions/32095376/character-array-in-c-with-function/32095525#32095525", "title": "Character array in c with function", "body": "<pre><code>void inlezen(int[][DAGEN], char[][12]);\n</code></pre>\n\n<p>See this prototype you declared</p>\n\n<p>and what values you pass to it -<code>inlezen(temp, 1, DAGEN, dagen, 6, 12);</code> in <code>main</code>.</p>\n\n<p>And this  <code>strcpy(dagen[6], \"ZO\");</code> .Declaration of array was <code>char dagen[6][12];</code>  so index can go from <code>0</code> to <code>5</code>.You access out of bound memory ,thus invokes <strong>UB</strong>.Either remove this line or increase size to <code>char dagen[7][12];</code></p>\n\n<p>These statements -</p>\n\n<pre><code> scanf(\"%d%*c\", t[0][i]);\n .....\n scanf(\"%d%*c\", t[1][i]);\n</code></pre>\n\n<p>should be -</p>\n\n<pre><code>scanf(\"%d\",&amp;t[0][i]);\n .....\nscanf(\"%d\",&amp;t[1][i]);\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 3524043, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e9657d7ed76ac4de4d9556f6113b3de1?s=128&d=identicon&r=PG&f=1", "display_name": "Manariba", "link": "https://stackoverflow.com/users/3524043/manariba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 32095410, "answer_count": 2, "score": 0, "last_activity_date": 1439987742, "creation_date": 1439986838, "last_edit_date": 1439987742, "question_id": 32095376, "link": "https://stackoverflow.com/questions/32095376/character-array-in-c-with-function", "title": "Character array in c with function", "body": "<p>I have a problem with a character array in my c program.</p>\n\n<p>The program immediately shutdown when I run it. I think the problem is somewhere with passing the character array in the function.</p>\n\n<p>here's my code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#define DAGEN 7\n\nvoid inlezen(int[][DAGEN], char[][12]);\n\nint main(void)\n{\n    int i;\n    int temp[1][DAGEN];\n\n    char dagen[7][12];\n\n    strcpy(dagen[0], \"MA\");\n    strcpy(dagen[1], \"DI\");\n    strcpy(dagen[2], \"WOE\");\n    strcpy(dagen[3], \"DO\");\n    strcpy(dagen[4], \"VR\");\n    strcpy(dagen[5], \"ZA\");\n    strcpy(dagen[6], \"ZO\");\n\n\n\n    inlezen(temp, 1, DAGEN, dagen, 7, 12);\n\n}\n\nvoid inlezen(int t[][DAGEN], char d[][12])\n{\n    int i;\n\n    for (i = 0; i &lt; DAGEN; i++)\n    {\n        printf(\"Geef de temperatuur overdag van %s\", d[i]);\n        scanf(\"%d%*c\", &amp;t[0][i]);\n    }\n    for (i = 0; i &lt; DAGEN; i++)\n    {\n        printf(\"Geef de temperatuur 's avonds van %s\", d[i]);\n        scanf(\"%d%*c\", &amp;t[1][i]);\n    }\n\n}\n</code></pre>\n\n<p>I've edited my code, but it still doesn't work.</p>\n"}, {"tags": ["java", "c", "bash", "netbeans"], "comments": [{"owner": {"reputation": 11092, "user_id": 982149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LdDoZ.png?s=128&g=1", "display_name": "Fildor", "link": "https://stackoverflow.com/users/982149/fildor"}, "edited": false, "score": 0, "creation_date": 1439987268, "post_id": 32095314, "comment_id": 52085402, "body": "execute bloomgenerator.exe directly instead of bash.exe."}, {"owner": {"reputation": 11, "user_id": 4874455, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kH7h24Zg48A/AAAAAAAAAAI/AAAAAAAAA1g/Fr8Vfy6FjAU/photo.jpg?sz=128", "display_name": "Parvat Patel", "link": "https://stackoverflow.com/users/4874455/parvat-patel"}, "reply_to_user": {"reputation": 11092, "user_id": 982149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LdDoZ.png?s=128&g=1", "display_name": "Fildor", "link": "https://stackoverflow.com/users/982149/fildor"}, "edited": false, "score": 0, "creation_date": 1439987708, "post_id": 32095314, "comment_id": 52085735, "body": "It gives following erro when running directly **java.io.IOException: Cannot run program &quot;&#39;C:\\Users\\Bhulku-Parvat\\Desktop\\bloom-filter\\bloomgenerator&zwnj;&#8203;.exe&#39;&quot;: CreateProcess error=2, The system cannot find the file specified**@Fildor"}], "owner": {"reputation": 11, "user_id": 4874455, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kH7h24Zg48A/AAAAAAAAAAI/AAAAAAAAA1g/Fr8Vfy6FjAU/photo.jpg?sz=128", "display_name": "Parvat Patel", "link": "https://stackoverflow.com/users/4874455/parvat-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1564040733, "creation_date": 1439986688, "last_edit_date": 1564040733, "question_id": 32095314, "link": "https://stackoverflow.com/questions/32095314/run-cygwinc-generated-exe-file-using-in-netbeans-java-with-process", "title": "Run (Cygwin)C generated exe file using in Netbeans java with process", "body": "<p>I have a c file called generator.c and by using cygwin64 i run make and generator.exe gets created</p>\n\n<pre><code>Bhulku-Parvat@DasNaDas /cygdrive/c/Users/Bhulku-Parvat/Desktop/bloom-filter\n$ make\nmake: Nothing to be done for 'all'.\n$ ./bloomgenerator.exe test 4 0.0003 'C:\\Users\\Bhulku-Parvat\\Desktop' 'C:\\Users\\Bhulku-Parvat\\Desktop\\rawdata.txt'\n</code></pre>\n\n<p>and when i  run in cygwin i give 5 parameter ,it succesfully runs and generate desired ouput that is new file in specified loaction</p>\n\n<p>Following is my Java Code</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Bloomtest {\n\n    public static void main(String[] args) {\n\n        Runtime run = Runtime.getRuntime();\n        Process p;\n        System.out.println(\"----sart----\");\n        String cmmd[] = new String[3];\n\n        try {\n            cmmd[0] = \"C:/cygwin64/bin/bash.exe\";\n            cmmd[1] = \"-c\";\n            cmmd[2] = \"'C:\\\\Users\\\\Bhulku-Parvat\\\\Desktop\\\\bloom-filter\\\\bloomgenerator.exe' 'testqw', '4', '0.0003', 'C:/Users/Bhulku-Parvat/Desktop' ,'C:/Users/Bhulku-Parvat/Desktop/rawdata.txt'\";\n\n            p = run.exec(cmmd);\n            p.waitFor();\n            BufferedReader reader;\n            reader = new BufferedReader(new InputStreamReader(p.getErrorStream()));\n            String line = reader.readLine();\n            while (line != null) {\n                System.out.println(line);\n                line = reader.readLine();\n            }\n        } catch (Exception ex) {\n            ex.printStackTrace();\n            Logger.getLogger(Bloomtest.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n</code></pre>\n\n<p><strong>The problem is i want to run same command in java through netbeans using process or processbuilder but i am unable to run  help me out</strong></p>\n\n<p>It gives the following output</p>\n\n<blockquote>\n  <p><strong>/usr/bin/bash: C:\\Users\\Bhulku-Parvat\\Desktop\\bloom-filter\\bloomgenerator.exe: command not found</strong></p>\n</blockquote>\n"}, {"tags": ["c", "dynamic-memory-allocation", "realloc"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1439987472, "post_id": 32095311, "comment_id": 52085553, "body": "<code>stack-&gt;array=realloc(stack,stack-&gt;capacity);} --&gt;&gt; </code> <code>stack-&gt;array=realloc(stack-&gt;array,sizeof stack-&gt;array[0] * stack-&gt;capacity);} </code>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1439987946, "post_id": 32095311, "comment_id": 52085918, "body": "Funny: until now, all three answers have failed to see the omission of <code>sizeof(int)</code> in the size expression."}], "answers": [{"comments": [{"owner": {"reputation": 1517, "user_id": 4259922, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab0b41e72934448eba6644f19b26fc82?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Saluja", "link": "https://stackoverflow.com/users/4259922/rohit-saluja"}, "edited": false, "score": 1, "creation_date": 1439993475, "post_id": 32095374, "comment_id": 52090310, "body": "Thanks for the Tip Sourav"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1439987174, "last_edit_date": 1439987174, "creation_date": 1439986835, "answer_id": 32095374, "question_id": 32095311, "link": "https://stackoverflow.com/questions/32095311/realloc-arguments/32095374#32095374", "title": "Realloc Arguments", "body": "<p>As you're correctly thought,</p>\n\n<pre><code>  stack-&gt;array=realloc(stack,stack-&gt;capacity);\n</code></pre>\n\n<p>should <strong>atleast</strong> be</p>\n\n<pre><code>  stack-&gt;array=realloc(stack-&gt;array,stack-&gt;capacity);\n</code></pre>\n\n<p>Otherwise, if successful, you'll be <code>free()</code>-ing up <code>stack</code> itself and then you'll end up accessing it. That invokes  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>. Many things \"seem\" to work once you've got UB.</p>\n\n<p>That said, from the usage point of view, </p>\n\n<pre><code> p = realloc(p, q); \n</code></pre>\n\n<p>kind of code is very bad, as if <code>realloc()</code> fails, it won't modify the <code>p</code> which has been passed as an argument, but due to the direct assignment of the return value of <code>realloc()</code> to <code>p</code>, the <code>p</code> will be set to <code>NULL</code>, losing the actual stored pointer.</p>\n\n<p>Tip: Always use a temporary pointer to collect the return value of <code>realloc()</code>, then check for <code>realloc()</code> success and in case ofg success, assign the newly returned pointer to the pointer which has been passed to <code>realloc()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1439989460, "last_edit_date": 1439989460, "creation_date": 1439986869, "answer_id": 32095389, "question_id": 32095311, "link": "https://stackoverflow.com/questions/32095311/realloc-arguments/32095389#32095389", "title": "Realloc Arguments", "body": "<p>You should pass to <code>realloc</code> a pointer to the array that you wish to extend. Since <code>stack</code> is not an array that you wish to extend, and <code>stack-&gt;array</code> is, you should pass <code>stack-&gt;array</code> as the first parameter.</p>\n\n<p>However, you should store the result of <code>realloc</code> in a separate variable and do <code>NULL</code> check.</p>\n\n<blockquote>\n  <p>If the function fails to allocate the requested block of memory, a\n  null pointer is returned, and the memory block pointed to by argument\n  ptr is not deallocated (it is still valid, and with its contents\n  unchanged).</p>\n</blockquote>\n\n<p>Otherwise you risk creating a memory leak:</p>\n\n<pre><code>int *tmp = realloc(stack-&gt;array, stack-&gt;capacity);\nif (tmp) {\n    stack-&gt;array = tmp;\n} else {\n    ... // Deal with the allocation error here\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1517, "user_id": 4259922, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab0b41e72934448eba6644f19b26fc82?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Saluja", "link": "https://stackoverflow.com/users/4259922/rohit-saluja"}, "edited": false, "score": 0, "creation_date": 1439993562, "post_id": 32095735, "comment_id": 52090390, "body": "Initially top is not set to 1 it is set to -1 see using <b>stack-&gt;top=-1</b>"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1517, "user_id": 4259922, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ab0b41e72934448eba6644f19b26fc82?s=128&d=identicon&r=PG&f=1", "display_name": "Rohit Saluja", "link": "https://stackoverflow.com/users/4259922/rohit-saluja"}, "edited": false, "score": 0, "creation_date": 1439994471, "post_id": 32095735, "comment_id": 52091117, "body": "@Rohit Saluja I thought that it is initialized by 1. Nevertheless only the implementation of doubleStack shown by me is correct.:) The same can be said about function push. That is in any case my post is the most uuseful.:)"}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1439989490, "last_edit_date": 1439989490, "creation_date": 1439987858, "answer_id": 32095735, "question_id": 32095311, "link": "https://stackoverflow.com/questions/32095311/realloc-arguments/32095735#32095735", "title": "Realloc Arguments", "body": "<p>First of all function <code>push</code> is wrong</p>\n\n<pre><code>void push( struct Stack *stack , int data)\n{\n        if(stack-&gt;top==(stack-&gt;capacity)-1)\n                doubleStack(stack);\n        stack-&gt;array[++stack-&gt;top]=data;\n}\n</code></pre>\n\n<p>Initially <code>top</code> is set to 1 and <code>capacity</code> is also set to 1.</p>\n\n<p>So this condition</p>\n\n<pre><code>if(stack-&gt;top==(stack-&gt;capacity)-1)\n</code></pre>\n\n<p>yields <code>false</code> and the following statement </p>\n\n<pre><code>stack-&gt;array[++stack-&gt;top]=data;\n</code></pre>\n\n<p>is executed. It writes to memory <code>stack-&gt;array[2]</code> that is beyond the allocated array.</p>\n\n<p>I think initially <code>top</code> should be set to 0. And the function should be defined the following way</p>\n\n<pre><code>void push( struct Stack *stack , int data )\n{\n        if ( stack-&gt;top != stack-&gt;capacity || doubleStack( stack ) )\n        {\n            stack-&gt;array[stack-&gt;top++] = data;\n        } \n}\n</code></pre>\n\n<p>In this case you can simply define a function that reports whether a stack is empty the following way</p>\n\n<pre><code>int empty( struct Stack *stack ) { return stack-&gt;top == 0; }\n</code></pre>\n\n<p>As for the function <code>doubleStack</code> then it should be defined the following way</p>\n\n<pre><code>int doubleStack(struct Stack *stack)\n{\n        int success = 0;\n\n        int new_capacity = 2 * stack-&gt;capacity;\n\n        int *tmp = = realloc( stack-&gt;array, new_capacity * sizeof( int ) );\n\n        if ( ( success = tmp != NULL ) ) \n        {\n            stack-&gt;capacity = new_capacity;\n            stack-&gt;array = tmp;\n        }\n\n        return success\n}\n</code></pre>\n\n<p>Take into account that I changed the return type of the function from <code>void</code> to <code>int</code>.\nAlso I used an intermediate varaible <code>new_capacity</code>. If the reallocation fails the current capacity will not be changed</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4418808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1040, "favorite_count": 1, "accepted_answer_id": 32095389, "answer_count": 3, "score": 2, "last_activity_date": 1439992205, "creation_date": 1439986683, "last_edit_date": 1439992205, "question_id": 32095311, "link": "https://stackoverflow.com/questions/32095311/realloc-arguments", "title": "Realloc Arguments", "body": "<p>I am implementing Stack using arrays with the below code</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\nstruct Stack{\nint top;\nint capacity;\nint *array;\n};\n\nstruct Stack *createStack()\n{\n        struct Stack *stack=malloc(sizeof(struct Stack));\n        stack-&gt;top=-1;\n        stack-&gt;capacity=1;\n        stack-&gt;array=malloc(sizeof(sizeof(int)*stack-&gt;capacity));\n}\nvoid doubleStack(struct Stack *stack)\n{\n        stack-&gt;capacity=stack-&gt;capacity*2;\n        stack-&gt;array=realloc(stack,stack-&gt;capacity);\n}\nvoid push( struct Stack *stack , int data)\n{\n        if(stack-&gt;top==(stack-&gt;capacity)-1)\n                doubleStack(stack);\n        stack-&gt;array[++stack-&gt;top]=data;\n}\n</code></pre>\n\n<p>My doubt is, when <code>doubleStack</code> is called once the Stack is full, \nShould I use <code>stack-&gt;array</code> as the first argument of the <code>realloc()</code> or <code>stack</code> as the first argument of the <code>realloc()</code>?</p>\n\n<p>Well I think <code>stack-&gt;array</code> should be passed. As we need to reallocate only that portion of the memory. </p>\n\n<p>But accidentally I passed <code>stack</code> and that also seemed to work. Please advise. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1439987027, "post_id": 32095304, "comment_id": 52085231, "body": "You mean, to use a function from a library written in C from Fortran? (I haven&#39;t really touched Fortran, but I have no reason to think you wouldn&#39;t be able to.)"}, {"owner": {"reputation": 42694, "user_id": 1175077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AWgLI.jpg?s=128&g=1", "display_name": "jpw", "link": "https://stackoverflow.com/users/1175077/jpw"}, "edited": false, "score": 3, "creation_date": 1439987122, "post_id": 32095304, "comment_id": 52085298, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/354182/calling-c-code-from-fortran\">Calling C Code from FORTRAN</a>"}], "answers": [{"tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 2, "last_activity_date": 1439987029, "creation_date": 1439987029, "answer_id": 32095445, "question_id": 32095304, "link": "https://stackoverflow.com/questions/32095304/can-c-program-be-used-without-main-function/32095445#32095445", "title": "Can C program be used without main function?", "body": "<p>No, you don't need a <code>main</code> in your C code. The linker will use the <code>main</code> from the FORTRAN code, or rather, the FORTRAN equivalent of <code>main</code>, when linking your C functions to the FORTRAN program.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 5, "last_activity_date": 1439987140, "creation_date": 1439987140, "answer_id": 32095485, "question_id": 32095304, "link": "https://stackoverflow.com/questions/32095304/can-c-program-be-used-without-main-function/32095485#32095485", "title": "Can C program be used without main function?", "body": "<p>If Fortran only calls the C function, then the C code does not need a <code>main()</code> function.</p>\n\n<p>The <code>main()</code> function of C is the program entry point. The system loads the .exe, transfers control to the startup code, which address is mentioned in the .exe file (the startup code is called <code>crt</code>, C run-time start-up). The run-time startup does initialization and then transfers control to the user code. The user code entry point is <code>main()</code>.</p>\n\n<p>Since Fortran is the main program, no C run-time start-up is needed and so no <code>main()</code> is needed.</p>\n"}], "owner": {"reputation": 3, "user_id": 3567820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82c1796e746433d434021014c9081d1d?s=128&d=identicon&r=PG&f=1", "display_name": "curious", "link": "https://stackoverflow.com/users/3567820/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 32095485, "answer_count": 2, "score": 0, "last_activity_date": 1498115725, "creation_date": 1439986676, "question_id": 32095304, "link": "https://stackoverflow.com/questions/32095304/can-c-program-be-used-without-main-function", "title": "Can C program be used without main function?", "body": "<p>From a Fortran Code, I intend to run a C code (to read a file) and fetch the read information.\nThe main program is the Fortran code, which uses a function written in C to do the processing.\nIn this C code, is it necessary to run a main function?</p>\n"}, {"tags": ["c", "pointers", "crash", "alignment", "size"], "comments": [{"owner": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1439990363, "post_id": 32094885, "comment_id": 52087772, "body": "Don&#39;t forget that if you enable optimizations, <code>char i;</code> will be the only variable in memory for x64, so all the pointers can&#39;t ever get corrupted. Other things can get corrupted though..."}, {"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "reply_to_user": {"reputation": 4991, "user_id": 4340578, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c75589faf097f9308a448ffe021defd1?s=128&d=identicon&r=PG&f=1", "display_name": "ElderBug", "link": "https://stackoverflow.com/users/4340578/elderbug"}, "edited": false, "score": 0, "creation_date": 1439993283, "post_id": 32094885, "comment_id": 52090157, "body": "If they&#39;re not stored memory then where?"}], "answers": [{"comments": [{"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1439986351, "post_id": 32095113, "comment_id": 52084753, "body": "yes, I know. I said that in my question. I would like to make sure what are the actual implementation-defined reasons for which this code does not crash on x64 machines"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 2, "creation_date": 1439986407, "post_id": 32095113, "comment_id": 52084798, "body": "@user1042840 your reasoning is possibly correct, but to be sure you should have a look at the generated assembly code."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1439986361, "last_edit_date": 1439986361, "creation_date": 1439986144, "answer_id": 32095113, "question_id": 32094885, "link": "https://stackoverflow.com/questions/32094885/does-this-program-only-crash-on-x32-because-of-alignment-differences/32095113#32095113", "title": "Does this program only crash on x32 because of alignment differences?", "body": "<p>It's probably because of this line:</p>\n\n<pre><code>*pp = -1;   /* overwrite memory starting at &amp;i */\n</code></pre>\n\n<p>which leads to undefined behaviour.</p>\n\n<p>On my Visual Studio 2012 I get </p>\n\n<blockquote>\n  <p>Run-Time Check Failure #2 - Stack around the variable 'i' was\n  corrupted.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3045, "user_id": 956880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8wevB.png?s=128&g=1", "display_name": "Anonymous Coward", "link": "https://stackoverflow.com/users/956880/anonymous-coward"}, "is_accepted": false, "score": 1, "last_activity_date": 1439988725, "creation_date": 1439988725, "answer_id": 32096061, "question_id": 32094885, "link": "https://stackoverflow.com/questions/32094885/does-this-program-only-crash-on-x32-because-of-alignment-differences/32096061#32096061", "title": "Does this program only crash on x32 because of alignment differences?", "body": "<p>This is the result of compiling your code for 64 bits.</p>\n\n<pre><code>                .Ltext0:\n                    .section    .rodata\n                .LC0:\n0000 706F696E       .string \"pointer points to: %p\\n\"\n     74657220 \n     706F696E \n     74732074 \n     6F3A2025 \n                .LC1:\n0017 25642025       .string \"%d %d\\n\"\n     640A00\n                .LC2:\n001e 25640A00       .string \"%d\\n\"\n                    .text\n                    .globl  main\n                main:\n                .LFB0:\n                    .cfi_startproc\n0000 55             pushq   %rbp\n                    .cfi_def_cfa_offset 16\n                    .cfi_offset 6, -16\n0001 4889E5         movq    %rsp, %rbp\n                    .cfi_def_cfa_register 6\n0004 4883EC20       subq    $32, %rsp\n0008 C645E61E       movb    $30, -26(%rbp)\n000c C645E77B       movb    $123, -25(%rbp)\n0010 488D45E6       leaq    -26(%rbp), %rax\n0014 488945E8       movq    %rax, -24(%rbp)\n0018 488B45E8       movq    -24(%rbp), %rax\n001c 4889C6         movq    %rax, %rsi\n001f BF000000       movl    $.LC0, %edi\n     00\n0024 B8000000       movl    $0, %eax\n     00\n0029 E8000000       call    printf\n     00\n002e 488B45E8       movq    -24(%rbp), %rax\n0032 488945F0       movq    %rax, -16(%rbp)\n0036 488B45F0       movq    -16(%rbp), %rax\n003a 488945F8       movq    %rax, -8(%rbp)\n003e 0FBE55E7       movsbl  -25(%rbp), %edx\n0042 0FB645E6       movzbl  -26(%rbp), %eax\n0046 0FBEC0         movsbl  %al, %eax\n0049 89C6           movl    %eax, %esi\n004b BF000000       movl    $.LC1, %edi\n     00\n0050 B8000000       movl    $0, %eax\n     00\n0055 E8000000       call    printf\n     00\n005a 488B45F8       movq    -8(%rbp), %rax\n005e C700FFFF       movl    $-1, (%rax)\n     FFFF\n0064 0FBE55E7       movsbl  -25(%rbp), %edx\n0068 0FB645E6       movzbl  -26(%rbp), %eax\n006c 0FBEC0         movsbl  %al, %eax\n006f 89C6           movl    %eax, %esi\n0071 BF000000       movl    $.LC1, %edi\n     00\n0076 B8000000       movl    $0, %eax\n     00\n007b E8000000       call    printf\n     00\n0080 488B45E8       movq    -24(%rbp), %rax\n0084 4889C6         movq    %rax, %rsi\n0087 BF000000       movl    $.LC0, %edi\n     00\n008c B8000000       movl    $0, %eax\n     00\n0091 E8000000       call    printf\n     00\n0096 488B45E8       movq    -24(%rbp), %rax\n009a 0FB600         movzbl  (%rax), %eax\n009d 0FBEC0         movsbl  %al, %eax\n00a0 89C6           movl    %eax, %esi\n00a2 BF000000       movl    $.LC2, %edi\n     00\n00a7 B8000000       movl    $0, %eax\n     00\n00ac E8000000       call    printf\n     00\n00b1 B8000000       movl    $0, %eax\n     00\n00b6 C9             leave\n                    .cfi_def_cfa 7, 8\n00b7 C3             ret\n                    .cfi_endproc\n                .LFE0:\n                .Letext0:\n</code></pre>\n\n<p>Lines 0010 and 0014 are <code>char* p = &amp;i;</code> so you can see that variable <code>i</code> is located at memory position -26(%rbp); and only there since it is just one byte.  There we also see that variable <code>p</code> is located at memory position -24(%rbp); it extends from -24(%rbp) to -17(%rbp) because it is a pointer under 64 bits architecture.<br>\nWith the code  <code>void* q = p; int * pp = q;</code> we are just loading the position of <code>p</code>; which is -24(%rbp) at variable <code>pp</code>.<br>\nSo <code>p</code> and <code>pp</code> contain exactly the very same value. They are binary equal. And that value is the value of the register bp minus 26.<br>\nLines 005a and 005e correspond to <code>*pp = -1;</code> Please note how the instruction movl is used. This is going to copy a constant of 4 bytes to the direction -26(%rbp). So the memory positions -26(%rbp) to -23(%rbp) are going to be overwritten. But remember that variable <code>p</code> was located at memory positions -24(%rbp) to -17(%rbp). <strong>So two bytes of that variable are being overwritten!!!</strong><br>\nThat means that <code>p</code> is no longer pointing to what it was pointing, now it points to a different memory position. One whose 2 less significative bytes are now FFFF. Pointing to memory position which is going to be larger than it was (at most 65535 more). This means pointing torwards the begining of the stack.</p>\n\n<p>So it is as you suspected, two bytes are being overwritten. Even in 64 bits mode.<br>\nSo the cause must be that such altered direction is out of the memory assigned to the process in 32 bits mode but not 64 bit mode. Which has more to do with the way the program is loaded into memory than with the program itself.</p>\n"}, {"comments": [{"owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1439992117, "post_id": 32096874, "comment_id": 52089244, "body": "You put me on the right track. When I compile this code with <code>clang</code> it does not fail on <code>x32</code> machine. Value of <code>p</code> is not overwritten. Does it mean that <code>clang</code> probably stores <code>p</code> in CPU register and not memory?"}, {"owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "reply_to_user": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "edited": false, "score": 0, "creation_date": 1439993960, "post_id": 32096874, "comment_id": 52090723, "body": "There is really no reasonable way to tell before what a compiler will do, if the behavior is up to the compiler. Maybe the compiler put p in a register, maybe the compiler switched the stack positions of p and q for whatever reason, maybe the compiler does align everything on 8 bytes even on x32. Only the generated assembler code can tell you the truth and this truth is only valid for this particular compiler with this particular version of the compiler with this particular flags and this particular architecture."}], "tags": [], "owner": {"reputation": 467, "user_id": 5118455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0da1391e8d298f6d4e2d1ac574e4546?s=128&d=identicon&r=PG&f=1", "display_name": "John Hammond", "link": "https://stackoverflow.com/users/5118455/john-hammond"}, "is_accepted": true, "score": 1, "last_activity_date": 1439990823, "creation_date": 1439990823, "answer_id": 32096874, "question_id": 32094885, "link": "https://stackoverflow.com/questions/32094885/does-this-program-only-crash-on-x32-because-of-alignment-differences/32096874#32096874", "title": "Does this program only crash on x32 because of alignment differences?", "body": "<p>The reasoning is not idiotic, but not guaranteed to be correct.</p>\n\n<p>The layout of the function stack is not as fixed as you might think. While the stack pointer register is only allowed to have an address mod 4 or mod 8, depending on the alignment, the compiler is not required to follow a specific alignment. There is not even a guarantee that the data is somewhere on the stack. It might reside completely in registers!</p>\n\n<p>The stack alignment you have in mind is part of the Procedure Call Standard, which says how the stack has to look like before one function calls another function and wants to transfer data via the stack. Only in that case is the compiler required to align and pad data and make sure that the address of a pointer passed as parameter resides on a 4/8 byte boundary.</p>\n\n<p>In example:\nYour x64 executable might run, just because the compiler keeps p in a register and not on the stack, so overwriting the stack does not affect p, even if you would memset the whole stack to zero. p would always be a valid address that can be dereferenced.</p>\n\n<p>So, your code could run fine on a 32 bit machine, too or crash on a 64 bit machine. The compiler and its optimization settings will determine the result much more than the architecture.</p>\n"}], "owner": {"reputation": 1825, "user_id": 1042840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/159d59ce9a4b6bacc2c1a21fc2abce6d?s=128&d=identicon&r=PG", "display_name": "user1042840", "link": "https://stackoverflow.com/users/1042840/user1042840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 32096874, "answer_count": 3, "score": 2, "last_activity_date": 1439990823, "creation_date": 1439985501, "last_edit_date": 1439988561, "question_id": 32094885, "link": "https://stackoverflow.com/questions/32094885/does-this-program-only-crash-on-x32-because-of-alignment-differences", "title": "Does this program only crash on x32 because of alignment differences?", "body": "<p>The following code is taken from <a href=\"http://www.stroustrup.com/bs_faq2.html#void-ptr\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n    char i = 30;\n    char j = 123;\n    char* p = &amp;i;\n    printf(\"pointer points to: %p\\n\", p);\n    void* q = p;\n    int * pp = q;   /* unsafe, legal C, not C++ */\n\n    printf(\"%d %d\\n\",i,j);\n    *pp = -1;   /* overwrite memory starting at &amp;i */\n    printf(\"%d %d\\n\",i,j);\n    printf(\"pointer points to: %p\\n\", p);\n    printf(\"%d\\n\", *p);\n}\n</code></pre>\n\n<p>On my x32 Linux machine it crashes in the last line. On x64 Linux it does not crash. Is it because pointers are 4 bytes on x32 and 8 bytes on x64 and due to alignment requirements there is probably a max 6 bytes hole between <code>char j</code> and <code>char *p</code> on x64 machine that is overwritten by <code>*pp = -1</code> and therefore nothing happens to <code>*p</code> but on x32 machine the hole is only maximum 2 bytes so that <code>*pp = -1</code> overwrites the fist two bytes of <code>char *p</code> resulting in segmentation fault when dereferencing? Is this reasoning correct or completely idiotic?</p>\n"}, {"tags": ["c", "googletest", "static-functions"], "comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1439985436, "post_id": 32094797, "comment_id": 52084098, "body": "<code>#include</code> the source file instead of the header file."}], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 966530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e53eda4a7385114a5f5fd15c73861b6?s=128&d=identicon&r=PG", "display_name": "Anticom", "link": "https://stackoverflow.com/users/966530/anticom"}, "edited": false, "score": 1, "creation_date": 1504800896, "post_id": 32094876, "comment_id": 79164488, "body": "Considering that usual projects have tens if not even hundrets or thousands of compilation units, commenting out the <code>static</code> keyword isn&#39;t a very pratical approach."}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": -1, "last_activity_date": 1439985478, "creation_date": 1439985478, "answer_id": 32094876, "question_id": 32094797, "link": "https://stackoverflow.com/questions/32094797/how-to-test-static-functions-of-c-using-google-test/32094876#32094876", "title": "how to test static functions of C using google test", "body": "<p>A <code>static</code> function has it's visibility limited to the translation unit. </p>\n\n<p>AFAIK,  for googletest, you need to call the function(s) under test from a separate test file conating the test code written with <code>TEST()</code>. If the function under test is <code>static</code>, simply it is not possible to test that directly from the <code>TEST()</code> MACRO invocation.</p>\n\n<p>The straightway approach is to, comment out the <code>static</code> modifier for the function for testing purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 4, "last_activity_date": 1439986385, "last_edit_date": 1439986385, "creation_date": 1439985866, "answer_id": 32095021, "question_id": 32094797, "link": "https://stackoverflow.com/questions/32094797/how-to-test-static-functions-of-c-using-google-test/32095021#32095021", "title": "how to test static functions of C using google test", "body": "<p>One way to achieve this is to <code>#include</code> the C source file into your test source.  Then, the <code>static</code> function is part of the same translation unit as the test code, and can be called from it:</p>\n\n<pre><code>#include \"test.c\"\n\n/* here follow the tests of getData() */\n</code></pre>\n\n<p>The downside to this is that everything in <code>test.c</code> gets compiled again, with obvious impact on build times.  If that gets to be a problem, you might consider extracting the static functions to be tested into their own source file (e.g. <code>test_p.c</code>, with the <code>_p</code> meaning private/internal).  Then <code>#include \"test_p.c\"</code> from both <code>test.c</code> and your unit test.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1574872802, "post_id": 32095882, "comment_id": 104387036, "body": "Conflicts should be unlikely if your tests exercise only one implementation file per test suite.  I&#39;d certainly advocate that as the preferable option, with the wrapper functions being the last resort."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 3, "last_activity_date": 1439988270, "creation_date": 1439988270, "answer_id": 32095882, "question_id": 32094797, "link": "https://stackoverflow.com/questions/32094797/how-to-test-static-functions-of-c-using-google-test/32095882#32095882", "title": "how to test static functions of C using google test", "body": "<p>I understand that to test a function with google test, it must be visible to the test code. A static function is only visible to the current compilation unit.</p>\n\n<p>A way to get around this is to \"remove\" the static attribute for test purposes:</p>\n\n<pre><code>#ifndef GOOGLE_TEST\n# define STATIC static\n#else\n# define STATIC\n#endif\n\nSTATIC int getData();\n</code></pre>\n\n<p>If this gives conflicts, for example because there aer <code>getData()</code> functions in many source files, you could create simple container functions:</p>\n\n<pre><code>static int getData(&lt;arglist&gt;);\n\n#ifdef GOOGLE_TEST\nint myModule_getData(&lt;arglist&gt;) {return(getData(&lt;arglist&gt;);}\n...\n#endif\n</code></pre>\n"}], "owner": {"reputation": 1177, "user_id": 3057900, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3fd5c1a3141c1130fc18771498169887?s=128&d=identicon&r=PG&f=1", "display_name": "ratzip", "link": "https://stackoverflow.com/users/3057900/ratzip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4718, "favorite_count": 0, "accepted_answer_id": 32095021, "answer_count": 3, "score": 2, "last_activity_date": 1439988270, "creation_date": 1439985284, "last_edit_date": 1439985340, "question_id": 32094797, "link": "https://stackoverflow.com/questions/32094797/how-to-test-static-functions-of-c-using-google-test", "title": "how to test static functions of C using google test", "body": "<p>I have a C file contains some static functions, how to use google test to test those static function?</p>\n\n<p>header file:</p>\n\n<pre><code>test.h\nint accessData();\n</code></pre>\n\n<p>source file:</p>\n\n<pre><code>test.c\nstatic int value;\nstatic int getData()\n{\n   return value;\n}\n\nint accessData()\n{\n    if(value != 0)\n    {\n       return getData();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>static function is called by global function, but how to test those static function using google test?</p>\n"}, {"tags": ["c", "libssh"], "comments": [{"owner": {"reputation": 49, "user_id": 5243168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5539d206d0969627f4dbf528c7efe87b?s=128&d=identicon&r=PG&f=1", "display_name": "P. Lacosta", "link": "https://stackoverflow.com/users/5243168/p-lacosta"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1439984673, "post_id": 32094511, "comment_id": 52083545, "body": "@ckruczek I downloaded it and unzip it into the folder &quot;libssh&quot; on my Desktop. Then I did (|| means new line): &quot;cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Debug ..&quot; || &quot;make&quot;  and finally: &quot;sudo make install&quot;"}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1439984937, "post_id": 32094511, "comment_id": 52083716, "body": "So please provide the code you tried to compile and the error messages the compiler has thrown.... Please provide as much information as needed to help you."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 1, "creation_date": 1439985995, "post_id": 32094511, "comment_id": 52084472, "body": "Ok and how do you compile your test programm. Man you have to give us all the information that are needed to help you. Asking you for each and every little thing is kind of annoying."}, {"owner": {"reputation": 49, "user_id": 5243168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5539d206d0969627f4dbf528c7efe87b?s=128&d=identicon&r=PG&f=1", "display_name": "P. Lacosta", "link": "https://stackoverflow.com/users/5243168/p-lacosta"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1439986695, "post_id": 32094511, "comment_id": 52085006, "body": "@ckruczek I&#39;m sorry, I don&#39;t know what you mean. I just press &quot;play&quot;. If I include any other file in /usr/include it works fine (like &lt;pthread.h&gt;) but when I #include &lt;libssh/libssh.h&gt; it returns file not found, even though if I cd to /usr/include/libssh the file libssh.h does exist."}, {"owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1439986831, "post_id": 32094511, "comment_id": 52085097, "body": "Yes...you just press &#39;play&#39;.... Thats bothering me even more...So without any hint of you about how you compile I can&#39;t help you. Did you included the lib in your linking process? <code>gcc -lssh test.c -o test.o</code> or something like this?"}, {"owner": {"reputation": 49, "user_id": 5243168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5539d206d0969627f4dbf528c7efe87b?s=128&d=identicon&r=PG&f=1", "display_name": "P. Lacosta", "link": "https://stackoverflow.com/users/5243168/p-lacosta"}, "reply_to_user": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "edited": false, "score": 0, "creation_date": 1439987851, "post_id": 32094511, "comment_id": 52085851, "body": "@ckruczek Truth is I don&#39;t know a lot about linking. I read this but it doesn&#39;t have much information: <a href=\"http://api.libssh.org/master/libssh_linking.html\" rel=\"nofollow noreferrer\">api.libssh.org/master/libssh_linking.html</a> I also tried &quot;brew install libssh&quot; and even though it was installed properly it doesn&#39;t work neither. I thought that if you have the library in /usr/include the compiler will automatically link it. For instance, the pthread.h file is included properly without doing anything. If you tell me which information you want about the compiling process and how to get it I would gladly post it here."}], "answers": [{"tags": [], "owner": {"reputation": 2145, "user_id": 4849573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/096fb4358973b1d406f85d2b0eeec9c2?s=128&d=identicon&r=PG&f=1", "display_name": "ckruczek", "link": "https://stackoverflow.com/users/4849573/ckruczek"}, "is_accepted": false, "score": 1, "last_activity_date": 1439988431, "creation_date": 1439988431, "answer_id": 32095961, "question_id": 32094511, "link": "https://stackoverflow.com/questions/32094511/how-to-include-libssh-to-my-project/32095961#32095961", "title": "How to include libssh to my project", "body": "<p>In <a href=\"http://api.libssh.org/master/libssh_linking.html\" rel=\"nofollow\">the tutorial</a> is described how you have to link the library</p>\n\n<p>You have two possibilities here:</p>\n\n<ol>\n<li><p>As described you have to add those two lines to your code</p>\n\n<p><code>#define LIBSSH_STATIC 1</code></p>\n\n<p><code>#include &lt;libssh/libssh.h&gt;</code></p></li>\n<li><p>You compile your code with the <code>LIBSSH_STATIC</code> flag.</p>\n\n<p><code>gcc -DLIBSSH_STATIC test.c -o test.o</code></p></li>\n</ol>\n\n<blockquote>\n  <p>I thought that if you have the library in /usr/include the compiler will automatically link it. For instance, the pthread.h file is included properly without doing anything.</p>\n</blockquote>\n\n<p>This is a system library which gets linked automatically most of the time. <code>libssh</code> is not. Thats why you have to be more specific on how to compile/link it.</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 4580437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F48Vu.jpg?s=128&g=1", "display_name": "keelyn roberts", "link": "https://stackoverflow.com/users/4580437/keelyn-roberts"}, "is_accepted": false, "score": 0, "last_activity_date": 1458675110, "creation_date": 1458675110, "answer_id": 36163512, "question_id": 32094511, "link": "https://stackoverflow.com/questions/32094511/how-to-include-libssh-to-my-project/36163512#36163512", "title": "How to include libssh to my project", "body": "<p>Ive had a very similar problem several times and I have solved it by removing the \u2264 \u2265 symbols from around my header files and using \"\"s and the absolute path to the header file you're including.   Now this doesn't solve your libssh install problems but it will allow you to compile just the way you have it as long as you know the absolute path of your header file and all of your header's dependencies are in the respective locations that they were inteded to look for them in.  Hope this helps. </p>\n"}], "owner": {"reputation": 49, "user_id": 5243168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5539d206d0969627f4dbf528c7efe87b?s=128&d=identicon&r=PG&f=1", "display_name": "P. Lacosta", "link": "https://stackoverflow.com/users/5243168/p-lacosta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7402, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1458675110, "creation_date": 1439984480, "last_edit_date": 1439988819, "question_id": 32094511, "link": "https://stackoverflow.com/questions/32094511/how-to-include-libssh-to-my-project", "title": "How to include libssh to my project", "body": "<p>I've installed libssh following the instructions and even though everything seems to be OK my compiler still returns the error \"file not found\" in the line \"#include \". I guess it has something to do with directories or links (I have \"make install\" in the same folder where I downloaded it) but I don't know where should I put it so I can #include it in any project.</p>\n\n<p>This is how I installed it:\nI downloaded it and unzip it into the folder \"libssh\" on my Desktop (Mac). </p>\n\n<p>Then I did</p>\n\n<pre><code>cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Debug ..\nmake\n</code></pre>\n\n<p>and finally: </p>\n\n<pre><code>sudo make install\n</code></pre>\n\n<p>Then in my program I have:</p>\n\n<pre><code>#include &lt;libssh/sftp.h&gt;\n</code></pre>\n\n<p>And XCode returns: \"libssh/sftp.h file not found\". I tried adding the libssh folder in the Desktop to the project, but I still have similar problems.</p>\n\n<p>I guess I should install it (somehow) to the /usr/include folder, so that any project can use it (like pthread or many others), but I don't know how to do this.</p>\n\n<p>If I include any other file in /usr/include it works fine (like ) but when I #include  it returns file not found, even though if I cd to /usr/include/libssh the file libssh.h does exist.</p>\n\n<p>This is the very simple sample code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt; //OK\n#include &lt;libssh/libssh.h&gt; //Not OK, file not found.\n\nint main(int argc, const char * argv[])\n{\n    printf(\"Hello World!\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1439984656, "post_id": 32094371, "comment_id": 52083538, "body": "But isn&#39;t there a mismatch in how you call the function from python, in regards to how the function actually is defined? You say in your Python code that the function takes three integers, a string, another integer, another string and then a last integer, but the function is defined to only take a single string argument. That will of course not work as expected, since the function will receive the first integer and use it as a string pointer."}, {"owner": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1439985084, "post_id": 32094371, "comment_id": 52083820, "body": "@ Joachim Pileborg I have playing around with code, please have a look at the problem statement now."}, {"owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "edited": false, "score": 0, "creation_date": 1439986512, "post_id": 32094371, "comment_id": 52084878, "body": "Did you have a look at <a href=\"https://docs.python.org/2/library/ctypes.html#ctypes.create_string_buffer\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a> ? It&#39;s also a suggested solution in the question you linked."}, {"owner": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "edited": false, "score": 0, "creation_date": 1439986758, "post_id": 32094371, "comment_id": 52085051, "body": "@ sebastine Thanks alot, could you please direct me which function i have to use for this? create_string_buffer or  ctypes.byref(obj[, offset]), It is highly appreciated, if there is any code example or links to solve this"}, {"owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "edited": false, "score": 0, "creation_date": 1439987124, "post_id": 32094371, "comment_id": 52085300, "body": "Just search trough the ctypes documenation and you&#39;ll find: <a href=\"https://docs.python.org/2/library/ctypes.html#passing-pointers-or-passing-parameters-by-reference\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a>"}, {"owner": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "edited": false, "score": 0, "creation_date": 1439988338, "post_id": 32094371, "comment_id": 52086236, "body": "v= &quot;0x200000e000600&quot;         c_s = c_char_p(v)         j=&quot;0&quot;         d_s = c_char_p(j)         cdll.func(0,6,0,c_s.value,50,d_s.value,90) But still doesn&#39;t work, it there any other way? @ sebastin, is this is the right approach?"}, {"owner": {"reputation": 31791, "user_id": 529630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c2dd297abe572bd192b1f01322dec83?s=128&d=identicon&r=PG", "display_name": "Dunes", "link": "https://stackoverflow.com/users/529630/dunes"}, "edited": false, "score": 0, "creation_date": 1439988727, "post_id": 32094371, "comment_id": 52086557, "body": "Could you post any error message you are getting, the version of python you are using and the OS you are using?"}, {"owner": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "edited": false, "score": 0, "creation_date": 1439989516, "post_id": 32094371, "comment_id": 52087121, "body": "@ Duke error : TypeError: bytes or integer address expected instead of str instance Os:win 7 python version : 3.4"}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "edited": false, "score": 0, "creation_date": 1439993072, "post_id": 32094371, "comment_id": 52089989, "body": "Well then you have to use <code>bytes</code> instances instead of <code>str</code>.  <code>str</code> is a unicode object in Python 3.  Nothing C \u201dunderstands\u201d.  So you either have to pass <code>bytes</code> objects or encode the <code>str</code> objects as <code>bytes</code>."}, {"owner": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "edited": false, "score": 0, "creation_date": 1439993268, "post_id": 32094371, "comment_id": 52090137, "body": "@ BlackJack , How do i pass byte instance could you please explain?"}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "reply_to_user": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "edited": false, "score": 0, "creation_date": 1440075448, "post_id": 32094371, "comment_id": 52130139, "body": "See the answer from @sebastian."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "edited": false, "score": 0, "creation_date": 1439996084, "post_id": 32098126, "comment_id": 52092439, "body": "Thanks I got that const unsigned char* pointer is expecting packed unsigned charcaters from python, is it possible to send as packed bytes in python."}, {"owner": {"reputation": 3925, "user_id": 3815611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26b153a6443c973aea03f8314127f33a?s=128&d=identicon&r=PG&f=1", "display_name": "BlackJack", "link": "https://stackoverflow.com/users/3815611/blackjack"}, "reply_to_user": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "edited": false, "score": 0, "creation_date": 1440506698, "post_id": 32098126, "comment_id": 52292724, "body": "@Sandy What are <i>packed bytes</i>?  A <code>bytes</code> object contains a sequence of bytes just like a <code>char</code> array or \u201dstring\u201d in C."}], "tags": [], "owner": {"reputation": 8840, "user_id": 2319400, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9Ckyw.png?s=128&g=1", "display_name": "sebastian", "link": "https://stackoverflow.com/users/2319400/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1440076992, "last_edit_date": 1440076992, "creation_date": 1439993975, "answer_id": 32098126, "question_id": 32094371, "link": "https://stackoverflow.com/questions/32094371/passing-string-to-c-dll-expecting-const-unsigned-char-in-python/32098126#32098126", "title": "passing string to c dll expecting const unsigned char* in python", "body": "<p>The below is what I would have concluded from the ctypes documenation:</p>\n\n<pre><code>v = ctypes.create_string_buffer(b'11011101001111111000110011111')\nj = ctypes.create_string_buffer(b'0')\ncdll.func(0,1,0,v,60,j,80)\n</code></pre>\n\n<p>The <code>ctypes</code> functions <code>create_string_buffer</code> and <code>create_unicode_buffer</code> were not renamed / changed in Python 3. So <code>create_string_buffer</code> does really create a buffer of bytes.</p>\n\n<p>An attempt to pass u_chars:</p>\n\n<pre><code>def uchar_array(s):\n    # construct array type of proper length including\n    # zero-termination\n    cls = ctypes.c_ubyte * (len(s)+1)\n\n    # initialize with the provided bytes\n    instance = cls(*list(s))\n\n    # terminate with a zero\n    instance[len(s)] = 0\n    return instance\n\nv = uchar_array(b'11011101001111111000110011111')\nj = uchar_array(b'0')\ncdll.func(0,1,0,v,60,j,80)\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 5143603, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b20af0a69648fa93d272f47db172f1c1?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/5143603/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440076992, "creation_date": 1439984096, "last_edit_date": 1495540241, "question_id": 32094371, "link": "https://stackoverflow.com/questions/32094371/passing-string-to-c-dll-expecting-const-unsigned-char-in-python", "title": "passing string to c dll expecting const unsigned char* in python", "body": "<p>I feel sorry, but I generally have a hard time reading the ctypes docs...</p>\n\n<p>If I have a C function that takes a const unsigned char* pointer, and I know it will neither modify the passed in string, nor keep a reference to it beyond the function call, it really makes sense to pass in a pointer directly to the bytes of a python string. </p>\n\n<p>I followed 2 approach</p>\n\n<pre><code>approach1:\n\ncdll.func.restype=c_int\ncdll.func.argtypes[c_int,c_int,c_int,c_char_p,c_int,c_char_p,c_int]\ncdll.func(0,1,0,'11011101001111111000110011111',60,'0',80)\n\ncdll function\n\n\n int func(inta,int b,int c, const unsigned char* cptr1 ,int ,const unsigned char* cptr2,int d){\n       // do some string operation\n       return 0;\n    }\n\napproach2:\n\nv ='11011101001111111000110011111'\nj = '0'\ncdll.func(0,1,0,v,60,j,80)\n\n  int func(inta,int b,int c, const unsigned char* cptr1 ,int ,const unsigned char* cptr2,int d){\n       // do some string operation\n       return 0;\n    }\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/5576925/is-it-possible-to-pass-a-python-string-by-reference-through-ctypes\">I done some research here link1</a></p>\n\n<p>But it doesn't help , is it really to do typecast kind of thing in python? but if i do this , it does work. Thanks in advance</p>\n"}, {"tags": ["c", "microcontroller", "codewarrior"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1439984169, "post_id": 32094278, "comment_id": 52083223, "body": "And how much time does it cost a human reader to read the two source files?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1439985155, "post_id": 32094278, "comment_id": 52083879, "body": "<code>if</code> or <code>else</code> are no loop statements."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1439986083, "post_id": 32094278, "comment_id": 52084547, "body": "The more code there is, the longer it takes to compile but calling functions can mean it may take longer to run."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1439986801, "post_id": 32094278, "comment_id": 52085075, "body": "The larger extent of code in your Style 1 example may give the compiler more opportunities to apply optimizations, which take time to work out."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1439986940, "post_id": 32094278, "comment_id": 52085168, "body": "Factors such as the use of separate compilation, incremental compilation, and compiler optimisation may apply, but you have not provided that information. The optimiser will probably have to work harder on large functions."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439988603, "post_id": 32094278, "comment_id": 52086453, "body": "I would guess you are using the Eclipse version of Codewarrior. It is horribly slow, simply because it is very poorly made. There is no logical explanation of why it is so slow, other than the fact that it is full of IDE bugs. I would strongly recommend deleting that compiler/IDE and get a useful one instead."}, {"owner": {"reputation": 93, "user_id": 5243022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a550a6837001110c10852907a0d98b67?s=128&d=identicon&r=PG&f=1", "display_name": "sandy", "link": "https://stackoverflow.com/users/5243022/sandy"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440041600, "post_id": 32094278, "comment_id": 52112219, "body": "@Lundin I am using freescale codewarrior 10.5"}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1440042550, "post_id": 32094278, "comment_id": 52112410, "body": "Wow. That is either a slow compiler or a slow machine or both. You didn&#39;t mention compiler options you&#39;re using. Some optimizations are O(n^3) or worse and quirky. So comparatively small changes in the code can have relatively big effects on run time."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1440053456, "post_id": 32094278, "comment_id": 52116076, "body": "@Sandesh That explains everything. I would strongly recommend to delete that one and get a working 3rd party compiler instead."}, {"owner": {"reputation": 93, "user_id": 5243022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a550a6837001110c10852907a0d98b67?s=128&d=identicon&r=PG&f=1", "display_name": "sandy", "link": "https://stackoverflow.com/users/5243022/sandy"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1440069675, "post_id": 32094278, "comment_id": 52126202, "body": "@Bob Jarvis agreed but would the style 2 optimization cause the compilation time to reduce so much (4 times)?"}], "owner": {"reputation": 93, "user_id": 5243022, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a550a6837001110c10852907a0d98b67?s=128&d=identicon&r=PG&f=1", "display_name": "sandy", "link": "https://stackoverflow.com/users/5243022/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440041656, "creation_date": 1439983866, "last_edit_date": 1440041656, "question_id": 32094278, "link": "https://stackoverflow.com/questions/32094278/how-compilation-time-is-affected-with-coding-style-modular-programming-etc", "title": "How compilation time is affected with coding style (modular programming etc.)?", "body": "<p>I have written simple C code of around 4700 lines in freescale codewarrior in two ways. In both the ways number of lines and content are same. The code contains mostly if else loops. Style 1 takes compiler 40 seconds while Style 2 takes 10 seconds despite the same content. The details of the two styles are as follows:</p>\n\n<p><strong>Style 1</strong></p>\n\n<p>Most part of the code is written in a loop which is called each 10ms.</p>\n\n<p><strong>Style 2</strong></p>\n\n<p>Same as style 1 except the code is broken into 4-5 functions those are called in the same loop.</p>\n\n<p><strong><em>How compiler treats both the styles? Why style 2 takes significantly less time than style 1 ?</em></strong></p>\n"}, {"tags": ["c", "comma-operator"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 5, "creation_date": 1439983754, "post_id": 32094189, "comment_id": 52082939, "body": "<a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comma_operator</a>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1439984479, "last_edit_date": 1439984479, "creation_date": 1439983760, "answer_id": 32094240, "question_id": 32094189, "link": "https://stackoverflow.com/questions/32094189/comma-separated-return-arguments-in-c-function/32094240#32094240", "title": "Comma-Separated return arguments in C function", "body": "<p>In your code,</p>\n\n<pre><code> return (44,66);\n</code></pre>\n\n<p>is making (<em>mis</em>)use of the <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow\">comma operator</a> property. Here, it essentially <em>discards</em> the first (left side) operand of the <code>,</code> operator and returns the value of that of the second one (right operand).</p>\n\n<p>To quote the <code>C11</code> standard, chapter \u00a76.5.17, <em>Comma operator</em></p>\n\n<blockquote>\n  <p>The left operand of a comma operator is evaluated as a void expression; there is a sequence point between its evaluation and that of the right operand. Then the right operand is evaluated; the result has its type and value.</p>\n</blockquote>\n\n<p>In this case, it is same as writing</p>\n\n<pre><code> return 66;\n</code></pre>\n\n<p>However, FWIW, the left hand side operand is <em>evaluated as a void expression</em>, meaning, if there is any side effect of that evaluation, that will take place as usual, but the result of the <em>whole</em> expression of the statement involving the comma operator will be having the type and the value of the evaluation of the right hand side operand.</p>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 2, "last_activity_date": 1439984114, "last_edit_date": 1495539943, "creation_date": 1439983802, "answer_id": 32094253, "question_id": 32094189, "link": "https://stackoverflow.com/questions/32094189/comma-separated-return-arguments-in-c-function/32094253#32094253", "title": "Comma-Separated return arguments in C function", "body": "<p>This will return <code>66</code>. There is nothing special about returning <code>(44,66)</code>. </p>\n\n<p><code>(44,66)</code> is an expression that has the value <code>66</code> and therefore your function will return <code>66</code>.</p>\n\n<p>Read more <a href=\"https://stackoverflow.com/questions/52550/what-does-the-comma-operator-do-in-c\">about the comma operator</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 1556232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/403919a0e764dadd8735c552b7aac9eb?s=128&d=identicon&r=PG", "display_name": "user1556232", "link": "https://stackoverflow.com/users/1556232/user1556232"}, "edited": false, "score": 0, "creation_date": 1439986460, "post_id": 32094398, "comment_id": 52084832, "body": "Thanks for the explanation, I haven&#39;t really used the comma property operator in such a way before. I started coming up with some really convoluted ideas how it was working. More examples on how its used can be shown in this thread <a href=\"http://stackoverflow.com/questions/52550/what-does-the-comma-operator-do-in-c\">What does the comma operator `,` do in C</a>"}], "tags": [], "owner": {"reputation": 10264, "user_id": 1655700, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/xObp1.png?s=128&g=1", "display_name": "Tyler Durden", "link": "https://stackoverflow.com/users/1655700/tyler-durden"}, "is_accepted": true, "score": 8, "last_activity_date": 1439984150, "creation_date": 1439984150, "answer_id": 32094398, "question_id": 32094189, "link": "https://stackoverflow.com/questions/32094189/comma-separated-return-arguments-in-c-function/32094398#32094398", "title": "Comma-Separated return arguments in C function", "body": "<p>The comma operator evaluates a series of expressions. The value of the comma group is the value of the last element in the list.</p>\n\n<p>In the example you show the leading constant expression 44 has no effect, but if the expression had a side effect, it would occur. For example,</p>\n\n<pre><code>return printf( \"we're done\" ), 66;\n</code></pre>\n\n<p>In this case, the program would print \"we're done\" and then return 66.</p>\n"}, {"tags": [], "owner": {"reputation": 718, "user_id": 3145716, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/4JcnI.jpg?s=128&g=1", "display_name": "piyush", "link": "https://stackoverflow.com/users/3145716/piyush"}, "is_accepted": false, "score": 1, "last_activity_date": 1439984301, "creation_date": 1439984301, "answer_id": 32094446, "question_id": 32094189, "link": "https://stackoverflow.com/questions/32094189/comma-separated-return-arguments-in-c-function/32094446#32094446", "title": "Comma-Separated return arguments in C function", "body": "<p>Coma operator always returns the value of the <code>rightmost operand</code> when multiple comma operators are used inside an expression.\nIt will obviously return 66.</p>\n"}], "owner": {"reputation": 97, "user_id": 1556232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/403919a0e764dadd8735c552b7aac9eb?s=128&d=identicon&r=PG", "display_name": "user1556232", "link": "https://stackoverflow.com/users/1556232/user1556232"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1815, "favorite_count": 0, "closed_date": 1439988857, "accepted_answer_id": 32094398, "answer_count": 4, "score": 6, "last_activity_date": 1439992469, "creation_date": 1439983631, "last_edit_date": 1439992469, "question_id": 32094189, "link": "https://stackoverflow.com/questions/32094189/comma-separated-return-arguments-in-c-function", "closed_reason": "Duplicate", "title": "Comma-Separated return arguments in C function", "body": "<p>While completing a C programming test, I was given a question regarding  the expected output from a function which seem to return two values. It was structured as follows:</p>\n\n<pre><code>int multi_return_args(void)\n{\n return (44,66);\n}\n</code></pre>\n\n<p>The question caught me by surprise and inherently thought that if possible the first argument would be passed to the caller. </p>\n\n<p>But after compiling it, the result is 66 instead. After a quick search I couldn't find anything about structuring a return statement like this so was wondering if some could help me.</p>\n\n<p>Why does it behave like this and why?  </p>\n"}, {"tags": ["c", "pam"], "owner": {"reputation": 408, "user_id": 3329449, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/480a1ed283db238a7251cab9911c467d?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Martin", "link": "https://stackoverflow.com/users/3329449/anthony-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439982471, "creation_date": 1439982471, "question_id": 32093777, "link": "https://stackoverflow.com/questions/32093777/using-libpam-pwhistory-module-to-update-the-opasswd-file", "title": "Using libpam pwhistory module to update the opasswd file", "body": "<p>I'm working on a project where it is necessary to check a user's password for uniqueness against historical passwords, and add old passwords to a list of historical passwords. To accomplish this I want to read and write to the opasswd file with the pam_pwhistory module. I don't want to update the user's password at all, just to check whether it is unique or not, and write their existing password to the opasswd file. The user has just been prompted for their password, and I have access to the new password, so I don't want to have to prompt the user for it again.</p>\n\n<p>As far as I can tell, there are two ways to do this:</p>\n\n<ol>\n<li>Use pam functions (pam_start, pam_chauthtok, pam_end), and interpret the prompts '(current) UNIX password: ', 'New password: ' and 'Retype new password: '. Only include pam_pwhistory.so in the PAM chain for this application. This feels very ugly as these prompts are obviously intended to be interactive, and could be renamed in future. I'd also like to avoid having to maintain an extra PAM configuration file if necessary.</li>\n<li>Use pamc to communicate directly with the pam_pwhistory module. I have not had much luck with this approach and it doesn't seem to be well documented. Should I be using this API at all?</li>\n<li>Is there a 3rd option? How would you approach this?</li>\n</ol>\n\n<p>Thanks very much for any help!</p>\n"}, {"tags": ["c", "arrays", "undefined-behavior"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 4, "creation_date": 1439982191, "post_id": 32093644, "comment_id": 52081855, "body": "By &#39;outbound&#39; you mean &#39;out of bounds&#39;? If so: no, any out of bounds access is undefined behaviour."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440006608, "post_id": 32093644, "comment_id": 52098978, "body": "Given the trailing comma in the array declaration, I wonder if some compilers might be creating an array of ten elements, with the last one zero-initialized?  Behavior of such code would be correct if the array contained a sentinel element with a zero pointer."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4520838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adf3d8ac945f7c53369888dd1b2ea57?s=128&d=identicon&r=PG&f=1", "display_name": "nunojsa", "link": "https://stackoverflow.com/users/4520838/nunojsa"}, "edited": false, "score": 0, "creation_date": 1439983156, "post_id": 32093691, "comment_id": 52082532, "body": "That is also my understanding. But i found it strange to find this in wireshark source code, in a function that is widely used. And the truth is, the program never crashes. But if, instead of using a static const, i use heap allocated memory, sometimes the program throws an exception (access memory violation) which i can understand why!"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 31, "user_id": 4520838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adf3d8ac945f7c53369888dd1b2ea57?s=128&d=identicon&r=PG&f=1", "display_name": "nunojsa", "link": "https://stackoverflow.com/users/4520838/nunojsa"}, "edited": false, "score": 0, "creation_date": 1439983233, "post_id": 32093691, "comment_id": 52082583, "body": "@nunojsa Well, then that <b>proves</b> the program is having UB, isn&#39;t it? BTW, did you try debugging the same anytime?"}, {"owner": {"reputation": 31, "user_id": 4520838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adf3d8ac945f7c53369888dd1b2ea57?s=128&d=identicon&r=PG&f=1", "display_name": "nunojsa", "link": "https://stackoverflow.com/users/4520838/nunojsa"}, "edited": false, "score": 0, "creation_date": 1439984427, "post_id": 32093691, "comment_id": 52083381, "body": "Yes, it has UB but only when i use dynamic allocated memory. If i use a static const variable, then it never crashes. This is what is bothering me, because i&#39;m well aware that you should not go beyond your array size, or you can get strange things. But in this case, never crashes... that&#39;s why i was wondering if there were some differences in .DATA variables."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 31, "user_id": 4520838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adf3d8ac945f7c53369888dd1b2ea57?s=128&d=identicon&r=PG&f=1", "display_name": "nunojsa", "link": "https://stackoverflow.com/users/4520838/nunojsa"}, "edited": false, "score": 0, "creation_date": 1439984602, "post_id": 32093691, "comment_id": 52083504, "body": "@nunojsa Well, that is what the beauty of UB. A segmentation fault is one of the many side effects UB can produce. IMHO, if you get a seg-fault, consider yourself luck that you&#39;re being aware of the wrongdoing. Otherwise, God saves!! :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1439982212, "creation_date": 1439982212, "answer_id": 32093691, "question_id": 32093644, "link": "https://stackoverflow.com/questions/32093644/outbound-access-in-static-const-arrays/32093691#32093691", "title": "Outbound access in static const arrays", "body": "<blockquote>\n  <p><em>can i assume that accessing an outbound index of a static const array (that i guess is stored on the .DATA segment) is valid?</em></p>\n</blockquote>\n\n<p>Accessing out of bound memory is <strong><em>always</em></strong>  <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behaviour</a>. Do not even <em>try</em> doing that.</p>\n"}], "owner": {"reputation": 31, "user_id": 4520838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adf3d8ac945f7c53369888dd1b2ea57?s=128&d=identicon&r=PG&f=1", "display_name": "nunojsa", "link": "https://stackoverflow.com/users/4520838/nunojsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1439984305, "creation_date": 1439982089, "last_edit_date": 1439984305, "question_id": 32093644, "link": "https://stackoverflow.com/questions/32093644/outbound-access-in-static-const-arrays", "title": "Outbound access in static const arrays", "body": "<p>Assume the following code:</p>\n\n<pre><code>static const value_string global_variable [] = {\n        { 4,   \"STRING1\" },              \n        { 6,   \"STRING2\" },\n        { 9,   \"STRING3\" },\n        { 10,  \"STRING4\" },\n        { 11,  \"STRING5\" },\n        { 12,  \"STRING6\" },\n        { 13,  \"STRING7\" },\n        { 14,  \"STRING8\" },\n        { 15,  \"STRING9\" },\n};\n\nconst gchar * try_val_to_str_idx(const guint32 val, const value_string *vs, gint *idx)    \n{\n   gint i = 0;\n   DISSECTOR_ASSERT(idx != NULL); \n   if(vs) {\n      while (vs[i].strptr) {\n         if (vs[i].value == val) {\n            *idx = i;\n            return(vs[i].strptr);\n         }\n         i++;\n      }\n    }\n\n   *idx = -1;\n   return NULL;\n}\n</code></pre>\n\n<p>Where <code>vs</code> is a static const array (global_variable ), of a structure with two elements:\nan <code>int</code> and a pointer to a <code>char</code>.</p>\n\n<p>This code, is an extract of the wireshark source code. So, this function assumes that vs is a static const variable. </p>\n\n<p>My question is, can I assume that accessing an outbound index of a static const array (that I guess is stored on the .DATA segment) is valid? Is a valid position of memory to access? Or is undefined behavior? </p>\n\n<p>What will happen if I try to find the string relative the value 40, for example?\nIf it\u00b4s valid, how can I be sure, that position of memory will have 0 value, and then <code>NULL</code> and exit the while cycle?</p>\n"}, {"tags": ["c", "frama-c"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1439981623, "post_id": 32093457, "comment_id": 52081430, "body": "You loop from 0 to 26 <b>exclusive</b>, so <code>0 &lt;= c &lt; 26</code> (<code>0 &lt;= c &lt;= 25</code>)."}, {"owner": {"reputation": 191, "user_id": 3785805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387bd325bb0654cdf1412aa882936fc4?s=128&d=identicon&r=PG&f=1", "display_name": "abort", "link": "https://stackoverflow.com/users/3785805/abort"}, "edited": false, "score": 1, "creation_date": 1439982384, "post_id": 32093457, "comment_id": 52082007, "body": "Doesn&#39;t it support something like <code>memset</code>? In that case you could simply use <code>memset(first, 0, 26 * sizeof(int))</code>."}, {"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 1, "creation_date": 1440519924, "post_id": 32093457, "comment_id": 52302425, "body": "@Kninnug See second comment below <a href=\"http://stackoverflow.com/questions/32144221/frama-c-anagram-function-behavior-verification\" title=\"frama c anagram function behavior verification\">stackoverflow.com/questions/32144221/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5242392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a77264f4eef854558f8234c49f12d47?s=128&d=identicon&r=PG&f=1", "display_name": "Bortoli&#241;o", "link": "https://stackoverflow.com/users/5242392/bortoli%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1440073248, "post_id": 32095032, "comment_id": 52128567, "body": "Thank you, solved! It was a problem with the installation of Alt-Ergo (it seems that it was not installed), so i got it from &#39;apt-get&#39; and then it run successfully!"}], "tags": [], "owner": {"reputation": 61, "user_id": 5243241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c8IMW.jpg?s=128&g=1", "display_name": "David MENTR&#201;", "link": "https://stackoverflow.com/users/5243241/david-mentr%c3%89"}, "is_accepted": true, "score": 2, "last_activity_date": 1439985914, "creation_date": 1439985914, "answer_id": 32095032, "question_id": 32093457, "link": "https://stackoverflow.com/questions/32093457/frama-c-initialize-array-to-zero-specification/32095032#32095032", "title": "Frama-C initialize array to zero specification", "body": "<p>You might have an issue with you Frama-C installation, your code verifies perfectly with default setup.</p>\n\n<p>The code I used:</p>\n\n<pre><code>$ cat loop-init.c \nvoid loop_init(void)\n{\n  int first[26];\n  int second[26];\n  int c;\n  /*@\n    loop assigns first[0..(c-1)];\n    loop assigns second[0..(c-1)];\n    loop assigns c; \n    loop invariant 0 &lt;= c &lt;= 26;\n    loop invariant \\forall integer k; 0 &lt;= k &lt; c ==&gt; second[k] == first[k];\n    loop invariant \\forall integer k; 0 &lt;= k &lt; c ==&gt; first[k] == 0 &amp;&amp; second[k] == 0;\n    loop invariant \\valid(first+(0..25)) &amp;&amp; \\valid(second+(0..25));\n    loop variant 26-c;\n  */\n  for(c = 0; c &lt; 26; c++)\n    {\n      first[c] = 0;\n      second[c] = 0;\n    }\n}\n</code></pre>\n\n<p>Everything is proved:</p>\n\n<pre><code>$ frama-c -wp loop-init.c \n[kernel] Parsing FRAMAC_SHARE/libc/__fc_builtin_for_normalization.i (no preprocessing)\n[kernel] Parsing loop-init.c (with preprocessing)\n[wp] Running WP plugin...\n[wp] Collecting axiomatic usage\n[wp] warning: Missing RTE guards\n[wp] 14 goals scheduled\n[wp] [Qed] Goal typed_loop_init_loop_inv_established : Valid\n[wp] [Qed] Goal typed_loop_init_loop_inv_2_established : Valid\n[wp] [Qed] Goal typed_loop_init_loop_inv_3_established : Valid\n[wp] [Qed] Goal typed_loop_init_loop_inv_4_preserved : Valid\n[wp] [Alt-Ergo] Goal typed_loop_init_loop_inv_preserved : Valid (16ms) (18)\n[wp] [Alt-Ergo] Goal typed_loop_init_loop_inv_2_preserved : Valid (28ms) (26)\n[wp] [Qed] Goal typed_loop_init_loop_inv_4_established : Valid\n[wp] [Qed] Goal typed_loop_init_loop_assign_part1 : Valid\n[wp] [Qed] Goal typed_loop_init_loop_assign_part2 : Valid\n[wp] [Qed] Goal typed_loop_init_loop_assign_part3 : Valid\n[wp] [Qed] Goal typed_loop_init_loop_assign_part4 : Valid\n[wp] [Qed] Goal typed_loop_init_loop_term_decrease : Valid\n[wp] [Qed] Goal typed_loop_init_loop_term_positive : Valid\n[wp] [Alt-Ergo] Goal typed_loop_init_loop_inv_3_preserved : Valid (1.6s) (68)\n[wp] Proved goals:   14 / 14\n     Qed:            11 \n     Alt-Ergo:        3  (16ms-1.6s) (68)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5242392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a77264f4eef854558f8234c49f12d47?s=128&d=identicon&r=PG&f=1", "display_name": "Bortoli&#241;o", "link": "https://stackoverflow.com/users/5242392/bortoli%c3%b1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 32095032, "answer_count": 1, "score": 1, "last_activity_date": 1439985914, "creation_date": 1439981537, "last_edit_date": 1439982073, "question_id": 32093457, "link": "https://stackoverflow.com/questions/32093457/frama-c-initialize-array-to-zero-specification", "title": "Frama-C initialize array to zero specification", "body": "<p>I am trying to prove a specification for a C loop that initialize two integer arrays to zero but i cannot verify it.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>int first[26];\nint second[26];\nint c;\n/*@\nloop assigns first[0..(c-1)];\nloop assigns second[0..(c-1)];\nloop assigns c; \nloop invariant 0 &lt;= c &lt;= 26;\nloop invariant \\forall integer k; 0 &lt;= k &lt; c ==&gt; second[k] == first[k];\nloop invariant \\forall integer k; 0 &lt;= k &lt; c ==&gt; first[k] == 0 &amp;&amp; second[k] == 0;\nloop invariant \\valid(first+(0..25)) &amp;&amp; \\valid(second+(0..25));\nloop variant 26-c;\n*/\nfor(c = 0; c &lt; 26; c++)\n{\n  first[c] = 0;\n  second[c] = 0;\n}\n</code></pre>\n\n<p>I also tried to use the short form\n<code>int first[26] = {0};</code> for zero-initializing but it seems that Frama-C doesn't support that form.</p>\n\n<p>I'm using Frama-C Sodium-20150201 with Alt-Ergo prover and it cannot verify the first three <strong>invariants</strong> of specification, that are</p>\n\n<pre><code>loop invariant 0 &lt;= c &lt;= 26;\nloop invariant \\forall integer k; 0 &lt;= k &lt; c ==&gt; second[k] == first[k];\nloop invariant \\forall integer k; 0 &lt;= k &lt; c ==&gt; first[k] == 0 &amp;&amp; second[k] == 0;\n</code></pre>\n"}, {"tags": ["c", "string", "linked-list"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 1, "creation_date": 1439981233, "post_id": 32093235, "comment_id": 52081165, "body": "Why did you comment <code>&#47;&#47;strcpy(cursr -&gt; val,i);</code> out? My guess is that line would fix your problem. Assuming, of course, that <code>cursr-&gt;val</code> has the required space allocated."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1439981270, "post_id": 32093235, "comment_id": 52081193, "body": "@Kninnug  he tried to assign in next line .He should use <code>strcpy</code> though."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1439981569, "post_id": 32093235, "comment_id": 52081385, "body": "Assuming <code>node</code>&#39;s <code>val</code> member is <code>char*</code> (since you chose for whatever reason not to include the definition of <code>node</code>), consider this: I you do <i>not</i> understand that <code>cursr-&gt;val = i;</code> just stores the address of the <code>i[]</code> buffer in the node&#39;s <code>val</code> pointer member, and thus <i>every</i> node in your list, once built, has a <code>val</code> pointing to the same <code>i[]</code> buffer, you may need to review how pointers work in C."}, {"owner": {"reputation": 3, "user_id": 1467427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c05a7b9aa64197632348a3ae03843a?s=128&d=identicon&r=PG", "display_name": "user1467427", "link": "https://stackoverflow.com/users/1467427/user1467427"}, "edited": false, "score": 0, "creation_date": 1439981750, "post_id": 32093235, "comment_id": 52081521, "body": "so I commented //strcpy(cursr -&gt; val,i); because this was giving me a core dumped. This is my node definition :       &lt;br/&gt; typedef struct node {     char* val;     struct node* next;  }node;"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1439981825, "post_id": 32093235, "comment_id": 52081566, "body": "Please don&#39;t post code here. It belongs in your question (along with all your other code). Regardless, lose the <code>cursr -&gt; val = i;</code> assignment, put back your <code>strcpy</code>, and change your node <code>val</code> member to be <code>char val[10];</code> that is probably the quickest way to &quot;fix&quot; this (and I use that term liberally)."}, {"owner": {"reputation": 3, "user_id": 1467427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c05a7b9aa64197632348a3ae03843a?s=128&d=identicon&r=PG", "display_name": "user1467427", "link": "https://stackoverflow.com/users/1467427/user1467427"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1439984837, "post_id": 32093235, "comment_id": 52083646, "body": "Thanks @WhozCraig . I made the fixes and it worked perfectly. I just have a couple of questions, so this is not just a temp fix. When I first used the code with ints  <code>cursr -&gt; val = i;</code> seemed to be assigning the int value to each new node, why would that be? Since this is just a fix, what are the limitations of using such code and what would be the correct way to build a string linked list? Thanks again."}], "answers": [{"tags": [], "owner": {"reputation": 1247, "user_id": 4349429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747aac0b54af7691075ba3758a66ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "Pawan", "link": "https://stackoverflow.com/users/4349429/pawan"}, "is_accepted": true, "score": 1, "last_activity_date": 1439984326, "creation_date": 1439984326, "answer_id": 32094457, "question_id": 32093235, "link": "https://stackoverflow.com/questions/32093235/string-linked-list-only-printing-last-input/32094457#32094457", "title": "String Linked List only printing last input", "body": "<p>try this. it shall work.</p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n//#include \"node.h\"\n#include &lt;string.h&gt;\n\ntypedef struct node {\n   //char* val;\n   char val[10];\n   struct node* next;\n }node;\n\nint main(){\n\n// read text file\nFILE * fp;\nfp = fopen (\"dict.txt\", \"r\");\n\n//  linked list\n\nchar i[10];\n//int i;\n\nnode* head = malloc(sizeof(node));\nnode* cursr= head;\n\nwhile (fscanf(fp, \"%s\", i) !=EOF)\n{\n    //fscanf(fp, \"%s\", i);\n    strcpy(cursr -&gt; val,i);\n    //cursr -&gt; val = i;\n    printf(\"Read String1 |%s|\\n\", cursr-&gt;val );\n    node* newnode = malloc(sizeof(node));\n    cursr -&gt; next = newnode;\n    //cursr = newnode;\n    cursr = newnode;\n}\n\ncursr-&gt;next = NULL;\ncursr=head;\n\nwhile  (cursr -&gt; next != NULL)\n{\n    printf(\"%s\",cursr-&gt;val);\n    cursr = cursr -&gt; next;\n}\n\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 1467427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1c05a7b9aa64197632348a3ae03843a?s=128&d=identicon&r=PG", "display_name": "user1467427", "link": "https://stackoverflow.com/users/1467427/user1467427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 32094457, "answer_count": 1, "score": -1, "last_activity_date": 1439984326, "creation_date": 1439980974, "last_edit_date": 1439981963, "question_id": 32093235, "link": "https://stackoverflow.com/questions/32093235/string-linked-list-only-printing-last-input", "title": "String Linked List only printing last input", "body": "<p>I've been stuck on this for a while, can anyone help? \nmy linked list code works fine for an integer but does not seem to work for strings, it only prints the last entry, any idea? \nThanks </p>\n\n<pre><code>#include&lt;stdlib.h&gt;\n#include&lt;stdio.h&gt;\n#include \"node.h\"\n#include &lt;string.h&gt;\n\ntypedef struct node {\n   char* val; \n   struct node* next;\n }node;\n\nint main(){\n\n// read text file\nFILE * fp;\nfp = fopen (\"dict.txt\", \"r\");\n\n//  linked list\n\nchar i[10];\n\nnode* head = malloc(sizeof(node));\nnode* cursr=head;\n\nwhile (fscanf(fp, \"%s\", i) !=EOF)\n{\n    fscanf(fp, \"%s\", i);\n    //strcpy(cursr -&gt; val,i);\n    cursr -&gt; val = i;\n    printf(\"Read String1 |%s|\\n\", cursr-&gt;val );\n    node* newnode = malloc(sizeof(node));\n    cursr -&gt; next = newnode;\n    cursr = newnode;\n}\n\ncursr-&gt;next = NULL;\ncursr=head;\n\nwhile  (cursr -&gt; next != NULL)\n{\n    printf(\"%s\",cursr-&gt;val);\n    cursr = cursr -&gt; next;\n}\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "xcode", "char"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1439981437, "post_id": 32093226, "comment_id": 52081310, "body": "<code>printf</code>s <code>%s</code> expects a <code>char *</code>, you provide a <code>char</code>..."}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 0, "creation_date": 1439981711, "post_id": 32093226, "comment_id": 52081494, "body": "What do you want to get character or the string ?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439985811, "post_id": 32093226, "comment_id": 52084331, "body": "That is neither a 3D nor a 2D &quot;character&quot; array."}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1439982005, "post_id": 32093427, "comment_id": 52081708, "body": "how about <code>printf(&quot;%s&quot;, getStr(3));</code>?"}, {"owner": {"reputation": 680, "user_id": 4802698, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/536dc8f5fe69d0dabe70024eba7fb1a7?s=128&d=identicon&r=PG&f=1", "display_name": "Enayet Hussain", "link": "https://stackoverflow.com/users/4802698/enayet-hussain"}, "edited": false, "score": 0, "creation_date": 1439982931, "post_id": 32093427, "comment_id": 52082381, "body": "Great thanks! So before I just run off with working code what mistakes was I making and what did it cause to happen?"}], "tags": [], "owner": {"reputation": 1147, "user_id": 3430986, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fd07f78ffb9c601ae068d00938c8e0f7?s=128&d=identicon&r=PG&f=1", "display_name": "orestisf", "link": "https://stackoverflow.com/users/3430986/orestisf"}, "is_accepted": true, "score": 2, "last_activity_date": 1439982422, "last_edit_date": 1439982422, "creation_date": 1439981451, "answer_id": 32093427, "question_id": 32093226, "link": "https://stackoverflow.com/questions/32093226/c-3d-character-array-function-returning-char-array/32093427#32093427", "title": "C 3D Character Array Function Returning Char Array", "body": "<p>If you just want to print a char use %c not %s in printf():</p>\n\n<pre><code>printf(\"%c\", getStr(0));\n</code></pre>\n\n<p>Also, if you want to return one of the two strings you should do that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar* getStr(int x) {\n    char* arr[2] = {\"test\", \"temp\"};\n    return arr[x];\n}\n\nint main() {\n    printf(\"%s\", getStr(1));\n    return 0;\n}\n</code></pre>\n\n<p>Finally, if you want to return the x-th char of the array:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n#define ARRAY_SIZE 2\n\nchar getStr(int x) {\n    char* arr[ARRAY_SIZE] = {\"test\", \"temp\"};\n    size_t s = strlen(arr[0]);\n    int i = 0;\n    while ((size_t)x &gt; s) {\n        i++;\n        if (i &gt; ARRAY_SIZE) return 0;\n        x -= s;\n        s = strlen(arr[i]);\n    }\n    return arr[i][x];\n}\n\nint main() {\n    printf(\"%c\", getStr(7));\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 680, "user_id": 4802698, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/536dc8f5fe69d0dabe70024eba7fb1a7?s=128&d=identicon&r=PG&f=1", "display_name": "Enayet Hussain", "link": "https://stackoverflow.com/users/4802698/enayet-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32093427, "answer_count": 1, "score": -4, "last_activity_date": 1439982422, "creation_date": 1439980942, "question_id": 32093226, "link": "https://stackoverflow.com/questions/32093226/c-3d-character-array-function-returning-char-array", "title": "C 3D Character Array Function Returning Char Array", "body": "<pre><code>char getStr(int x) {\n    const char *arr[10] = {\"test\", \"temp\"};\n    return *arr[x];\n}\n\nint main() {\n    printf(\"%s\", getStr(0));\n    return 0;\n}\n</code></pre>\n\n<p>The above code is returning the error \"EXC_BAD_ADDRESS (code=1, address=0x70)\" in Xcode. What could be causing the issue?\nWhat can I do to fix the issue? </p>\n"}, {"tags": ["c", "multithreading", "openmp", "hardware-acceleration", "xeon-phi"], "comments": [{"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1439984969, "post_id": 32093172, "comment_id": 52083744, "body": "My guess is that it&#39;s an implementation issue. You might want to report this as a bug to GCC."}, {"owner": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1439988216, "post_id": 32093172, "comment_id": 52086126, "body": "@Jeff thanks for the comment, I&#39;ll consider to file a bug if no one is able to explain me the behavior I&#39;m observing. Would you be able to run this simple test on real hardware (maybe is an emulation issue)? I wish I could do that but right now I do not have access to a machine with a real Intel MIC. Thanks"}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1440012672, "post_id": 32093172, "comment_id": 52102635, "body": "Why can&#39;t you run it on KNC? Lots of those machines are available to users."}, {"owner": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1440054899, "post_id": 32093172, "comment_id": 52116876, "body": "Yes I would like to do so if only I could have a real KNC, for the time being I have to stick to the emulator because I do not have a real hardware to test my code on :("}, {"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1440102032, "post_id": 32093172, "comment_id": 52146563, "body": "@Jeff GCC doesn&#39;t support code generation for KNC."}, {"owner": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1440140422, "post_id": 32093172, "comment_id": 52158882, "body": "@IlyaVerbin You are definitely right, I would need a KNL to test the code on real hardware."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1440186614, "post_id": 32093172, "comment_id": 52185875, "body": "That&#39;s not quite true. The GNU/Linux toolchain of KNC is built with GCC. KNC supports Pentium x86 plus extensions. Union of KNC and Xeon ISAs is still x86. Of course, GCC doesn&#39;t support KNC VPU, but you can leverage C ABI standardization to mix in code built with ICC into GCC programs."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1440186730, "post_id": 32093172, "comment_id": 52185922, "body": "And since one of the best features of KNL is that it is available as a self-hosted socket, I&#39;m not sure why you&#39;re so focused on KNL offload with GCC. What do you really want to accomplish?"}, {"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 0, "creation_date": 1440202067, "post_id": 32093172, "comment_id": 52190946, "body": "@Jeff You&#39;re talking about special version of GCC in MPSS. However, GCC 5.2.0, trunk and all other versions don&#39;t support -march=knc."}, {"owner": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1440212084, "post_id": 32093172, "comment_id": 52192637, "body": "@IlyaVerbin does GCC not support Pentium x86 that works on KNC?"}, {"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "reply_to_user": {"reputation": 4652, "user_id": 2189128, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/P19VP.jpg?s=128&g=1", "display_name": "Jeff Hammond", "link": "https://stackoverflow.com/users/2189128/jeff-hammond"}, "edited": false, "score": 1, "creation_date": 1440283089, "post_id": 32093172, "comment_id": 52210493, "body": "@Jeff You can&#39;t just compile a program with <code>-march=pentium</code> and run it on KNC, because KNC requires special <code>e_machine</code> value in the ELF header (<code>EM_K1OM</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "edited": false, "score": 0, "creation_date": 1440054479, "post_id": 32105146, "comment_id": 52116630, "body": "Thanks for the answer but I would say that it does not really answer my question which was all about offloading. Of course if I put my tasks within a parallel region with at least 2 threads then things are going more or less as expected. More or less! Indeed each thread is executing a task so I see the expected output but still the thread executing the offload task is waiting for the device to complete its job. This is unexpected to me, the thread should reach a scheduling point right after the target directive. Otherwise I always need double the number of threads to overlap device/host tasks."}, {"owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "reply_to_user": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "edited": false, "score": 1, "creation_date": 1440070348, "post_id": 32105146, "comment_id": 52126663, "body": "@MaJac89 - Yes, your question is about offloading, but you&#39;re using OpenMP to do it, and the task pragmas are going to be ignored outside of a parallel region; offloading doesn&#39;t change this.  For offloading in particular, it&#39;s the &quot;encountering task&quot; that executes the target clause; there needs to be a thread bound to the the target construct."}, {"owner": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "edited": false, "score": 0, "creation_date": 1440070357, "post_id": 32105146, "comment_id": 52126668, "body": "Thanks, I will try it again (I already tried to enclose everything in a parallel region and the result goes as follow: with 1 thread the behavior is the same as I posted with serial execution, with 2 threads each thread is executing a task but the thread executing the offload part does wait until the device has finished its job and this is the thing I cannot understand). However I will edit the code as soon as I can so that I can better explain my point."}, {"owner": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "reply_to_user": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "edited": false, "score": 1, "creation_date": 1440102697, "post_id": 32105146, "comment_id": 52146929, "body": "@MaJac89 OpenMP 4.0 says &quot;The task that encounters the target construct waits at the end of the construct until execution of the region completes.&quot; Looks like you need OpenMP 4.1 with <code>omp target nowait</code> clause."}, {"owner": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "reply_to_user": {"reputation": 627, "user_id": 1566099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cd78f0484d050f006b916d4aba2ad95?s=128&d=identicon&r=PG", "display_name": "Ilya Verbin", "link": "https://stackoverflow.com/users/1566099/ilya-verbin"}, "edited": false, "score": 0, "creation_date": 1440140298, "post_id": 32105146, "comment_id": 52158820, "body": "@IlyaVerbin Yes, I understand that but later in the OpenMP 4.0 specs when they write about Task scheduling you can read: &quot;Task scheduling points are implied at the following locations: [...] the point immediately following the generation of a target region&quot;. Therefore I would expect that a thread encountering a target region is suspending the execution of its current task switching to the execution of an other one (if another independent task is available). Moreover take a look at these refs. <a href=\"https://goo.gl/heZhRK\" rel=\"nofollow noreferrer\">1</a> <a href=\"http://goo.gl/h2DGRC\" rel=\"nofollow noreferrer\">2</a> <a href=\"http://goo.gl/S86Wnr\" rel=\"nofollow noreferrer\">3</a> and look for &#39;async&#39;."}], "tags": [], "owner": {"reputation": 47129, "user_id": 463827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwR2m.jpg?s=128&g=1", "display_name": "Jonathan Dursi", "link": "https://stackoverflow.com/users/463827/jonathan-dursi"}, "is_accepted": false, "score": 1, "last_activity_date": 1440016374, "creation_date": 1440016374, "answer_id": 32105146, "question_id": 32093172, "link": "https://stackoverflow.com/questions/32093172/openmp-4-0-gcc-5-2-0-overlap-device-and-host-task-execution/32105146#32105146", "title": "OpenMP 4.0 - GCC 5.2.0 - Overlap device and host task execution", "body": "<p>There's a more fundamental (and simpler) issue here than the offloading - your tasks aren't in a parallel region.</p>\n\n<p><a href=\"https://en.wikibooks.org/wiki/OpenMP/Tasks\" rel=\"nofollow\">OpenMP tasks have to be in a parallel region</a>, even though they're typically then embedded in an <code>omp single</code>.</p>\n\n<p>So this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char** argv)\n{\n\n#pragma omp task \n    {\n        printf(\"task 1 starts\\n\");\n        sleep(3);\n        printf(\"task 1 ends\\n\");\n    }\n\n#pragma omp task \n    {\n        printf(\"task 2 starts\\n\");\n        sleep(1);\n        printf(\"task 2 ends\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Runs the tasks serially:</p>\n\n<pre><code>$ gcc -fopenmp brokentasks.c -o brokentasks\n$ export OMP_NUM_THREADS=2\n\n$ ./brokentasks \ntask 1 starts\ntask 1 ends\ntask 2 starts\ntask 2 ends\n</code></pre>\n\n<p>Whereas putting the tasks in a parallel region like so:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(int argc, char** argv)\n{\n\n#pragma omp parallel\n#pragma omp single\n    {\n#pragma omp task \n        {\n            printf(\"task 1 starts\\n\");\n            sleep(3);\n            printf(\"task 1 ends\\n\");\n        }\n\n#pragma omp task \n        {\n            printf(\"task 2 starts\\n\");\n            sleep(1);\n            printf(\"task 2 ends\\n\");\n        }\n    }\n\n}\n</code></pre>\n\n<p>Works as expected</p>\n\n<pre><code>$ gcc -fopenmp tasks.c -o tasks\njdursi@odw-jdursi:~/tmp$ ./tasks\ntask 2 starts\ntask 1 starts\ntask 2 ends\ntask 1 ends\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 1461649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0c349a36655b03e426c69a7199df91?s=128&d=identicon&r=PG", "display_name": "MaJac89", "link": "https://stackoverflow.com/users/1461649/majac89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1440016374, "creation_date": 1439980789, "question_id": 32093172, "link": "https://stackoverflow.com/questions/32093172/openmp-4-0-gcc-5-2-0-overlap-device-and-host-task-execution", "title": "OpenMP 4.0 - GCC 5.2.0 - Overlap device and host task execution", "body": "<p>I am trying to test a very simple program that uses gcc 5 offload capabilities through OpenMP 4.0 directives. My goal is to write a two independent tasks program with one task being executed on an accelerator (i.e. Intel MIC emulator) and another one being executed concurrently on the CPU.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;omp.h&gt;\n#include &lt;stdio.h&gt;\n\n#define limit 100000\n\nint main(int argc, char** argv)\n{\n    int cpu_prime, acc_prime;\n\n    #pragma omp task shared(acc_prime)\n    {\n            #pragma omp target map(tofrom: acc_prime)\n            {\n                    printf(\"mjf-dbg &gt;&gt; acc computation\\n\");\n                    int i, j;\n                    acc_prime=0;\n                    for(i=0; i&lt;limit; i++){\n                            for(j=2; j&lt;=i; j++){\n                                    if(i%j==0)\n                                            break;\n                            }\n                            if(j==i)\n                                    acc_prime = i;\n                    }\n                    printf(\"mjf-dbg &lt;&lt; acc computation\\n\");\n            }\n    }\n\n    #pragma omp task shared(cpu_prime)\n    {\n            int i, j;\n            cpu_prime=0;\n            printf(\"mjf-dbg &gt;&gt; cpu computation\\n\");\n            for(i=0; i&lt;limit; i++){\n                    for(j=2; j&lt;=i; j++){\n                            if(i%j==0)\n                                    break;\n                    }\n                    if(j==i)\n                            cpu_prime = i;\n            }\n            printf(\"mjf-dbg &lt;&lt; cpu computation\\n\");\n    }\n\n    #pragma omp taskwait\n\n    printf(\"cpu prime: %d \\n\", cpu_prime);\n    printf(\"gpu prime: %d \\n\", acc_prime);\n\n}\n</code></pre>\n\n<p>With this code I was expecting the following execution flow:</p>\n\n<ol>\n<li>The Master Thread (MT) encounter the first explicit task region, bind to that task and begin its execution.</li>\n<li>Encountering the target directive the MT offload the target block to the accelerator and reach a scheduling point</li>\n<li>The MT go back to the implicit task region</li>\n<li>The MT encounters the second explicit task region, bind to that task and begin its execution.</li>\n<li>The MT performs the computation on host in parallel with the computation offloaded to the accelerator device.</li>\n<li>The MT go back to the implicit task region and reach a scheduling point caused by the taskwait directive</li>\n<li>The MT go back to the first explicit task region waiting for the end of the offloaded block.</li>\n</ol>\n\n<p>Compile &amp; Run:</p>\n\n<pre><code>gcc -fopenmp -foffload=\"-march=knl\" overlap.c -o overlap\nOFFLOAD_EMUL_RUN=\"sde -knl --\" ./overlap\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>mjf-dbg &gt;&gt; acc computation\nmjf-dbg &lt;&lt; acc computation\nmjf-dbg &gt;&gt; cpu computation\nmjf-dbg &lt;&lt; cpu computation\ncpu prime: 99991 \ngpu prime: 99991\n</code></pre>\n\n<p>This is not the output I was expecting, since it means that the master thread is waiting for the offload computation to be completed before scheduling the host task. Instead I was looking for something like this:</p>\n\n<pre><code>mjf-dbg &gt;&gt; acc computation\nmjf-dbg &gt;&gt; cpu computation\nmjf-dbg &lt;&lt; cpu computation\nmjf-dbg &lt;&lt; acc computation\ncpu prime: 99991 \ngpu prime: 99991\n</code></pre>\n\n<p>The offload emulator is working properly since during the execution I can see the _offload_target process going to 100% CPU usage when the program is executing the target block. </p>\n\n<p>So the question is: does anyone have any idea about why the two tasks are being serialized and not executed in parallel (one on host process and the other on the _offload_target emulation process)??</p>\n"}, {"tags": ["c", "arrays", "struct", "microchip", "mplab"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439986158, "post_id": 32092029, "comment_id": 52084605, "body": "Assuming the constants are correct, I do not see a problem. Maybe it&#39;s the toolchain. I&#39;d check for erratas."}, {"owner": {"reputation": 24405, "user_id": 99354, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b6ee96d3a17fcbd2bd24210eb7caf441?s=128&d=identicon&r=PG&f=1", "display_name": "Marco van de Voort", "link": "https://stackoverflow.com/users/99354/marco-van-de-voort"}, "edited": false, "score": 0, "creation_date": 1441721378, "post_id": 32092029, "comment_id": 52782051, "body": "dspic24E and a controller with more than 32kb ram? Do the initialization in code. Loading of structured constants in expressions with <b>eds</b> references go wrong iirc."}], "owner": {"reputation": 1, "user_id": 5242681, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-o7ajiMTICSw/AAAAAAAAAAI/AAAAAAAAAFo/T5-taFgTGLQ/photo.jpg?sz=128", "display_name": "Antatip", "link": "https://stackoverflow.com/users/5242681/antatip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439977681, "creation_date": 1439977681, "question_id": 32092029, "link": "https://stackoverflow.com/questions/32092029/microchip-struct-array-wrong-memory-allocation", "title": "Microchip : Struct array, wrong memory allocation", "body": "<p>On Mplab IDE, with a PIC24, C99 language,\nI have built an array of structures : </p>\n\n<pre><code>typedef struct{\n    enum GPRS_code_state        src_state;\n    enum GPRS_code_return       ret_code;\n    enum GPRS_code_state        dst_state;\n}Transition;\n\nTransition GPRS_transitions[] = {\n        {GPRS_CIPSHUT       , GPRS_retour_ok    , GPRS_CIPSHUT_rep  },\n        {GPRS_CIPSHUT       , GPRS_retour_repeat, GPRS_CIPSHUT      },\n        {GPRS_CIPSHUT       , GPRS_retour_timeout, GPRS_Error       },\n..................................}\n</code></pre>\n\n<p>When initializing the array, the first element (zero) is correctly allocated.\nBut all others aren't written after the first one in the memory. </p>\n\n<p>The debugger is trying to show me the array at the beggining of the memory but the content is wrong.\nI've tried to change the place of initialization unsuccessfully.</p>\n\n<p>This code is perfectly working on a computer.</p>\n\n<p>Any idea ?</p>\n"}, {"tags": ["c", "char", "byte", "bit"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 5, "creation_date": 1439978297, "post_id": 32091992, "comment_id": 52079196, "body": "Related to <a href=\"http://stackoverflow.com/questions/2098149/what-platforms-have-something-other-than-8-bit-char\" title=\"what platforms have something other than 8 bit char\">stackoverflow.com/questions/2098149/&hellip;</a>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 3, "creation_date": 1439978545, "post_id": 32091992, "comment_id": 52079377, "body": "IIRC there are DSP chips with 16 bit chars."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440074741, "post_id": 32091992, "comment_id": 52129610, "body": "the wide characters, used in several language alphabets is usually 16 bits"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1468393438, "post_id": 32091992, "comment_id": 64102877, "body": "Yes.  Old Cray machines had the equivalent of <code>CHAR_BIT == 32</code> (so <code>sizeof(int) == 1 == sizeof(short) == sizeof(char)</code>.  Modern DSP systems can have <code>CHAR_BIT == 16</code>."}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 4, "creation_date": 1468394418, "post_id": 32091992, "comment_id": 64103512, "body": "The TI compiler for the TMS320C54x (commonly known as the C54x) defines <code>CHAR_BIT</code> as 16. See Table 7.1 in the User&#39;s Guide: <a href=\"http://www.ti.com.cn/cn/lit/ug/spru103g/spru103g.pdf\" rel=\"nofollow noreferrer\">ti.com.cn/cn/lit/ug/spru103g/spru103g.pdf</a>"}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 5, "creation_date": 1468438691, "post_id": 32091992, "comment_id": 64133003, "body": "It would be interesting to see if there are non-DSP implementations where <code>CHAR_BIT &gt; 8</code>."}, {"owner": {"reputation": 121, "user_id": 1697504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkDbY.jpg?s=128&g=1", "display_name": "Chris St John", "link": "https://stackoverflow.com/users/1697504/chris-st-john"}, "edited": false, "score": 2, "creation_date": 1468600190, "post_id": 32091992, "comment_id": 64210211, "body": "The XAP processor created by Cambridge Consultants and powering a few billion Bluetooth headsets around the world have CHAR_BIT == 16"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 121, "user_id": 1697504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkDbY.jpg?s=128&g=1", "display_name": "Chris St John", "link": "https://stackoverflow.com/users/1697504/chris-st-john"}, "edited": false, "score": 0, "creation_date": 1468742677, "post_id": 32091992, "comment_id": 64245027, "body": "@ChrisStJohn You should post an answer with a link to the official documentation specifying CHAR_BIT."}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1468869125, "post_id": 32091992, "comment_id": 64293960, "body": "Possibly also related to: <a href=\"http://stackoverflow.com/questions/19708810/fixed-char-bit-on-various-systems\">this SO post</a>."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1497163917, "post_id": 32091992, "comment_id": 75956843, "body": "Also see <a href=\"https://stackoverflow.com/q/6971886/1708801\">Exotic architectures the standards committees care about</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user13752507"}, "edited": false, "score": 0, "creation_date": 1593027071, "post_id": 32091992, "comment_id": 110639339, "body": "Maybe on some wack architecture that no one uses, maybe."}], "answers": [{"comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 1, "creation_date": 1468876878, "post_id": 38345249, "comment_id": 64297760, "body": "Two outstanding answers making it hard to select a bounty winner. So I rolled a dice... one of you gets the &quot;accept&quot; score, the other the bounty."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 22, "last_activity_date": 1468404677, "last_edit_date": 1468404677, "creation_date": 1468394965, "answer_id": 38345249, "question_id": 32091992, "link": "https://stackoverflow.com/questions/32091992/is-char-bit-ever-8/38345249#38345249", "title": "Is CHAR_BIT ever &gt; 8?", "body": "<p><a href=\"https://www.ti.com/lsds/ti/microcontrollers_16-bit_32-bit/c2000_performance/control_automation/f28m3x/overview.page\">TMS320C28x</a> DSP from Texas Instruments has a byte with 16 bits.</p>\n\n<p><a href=\"http://www.ti.com/general/docs/lit/getliterature.tsp?baseLiteratureNumber=spru514&amp;fileType=pdf\">Documentation</a> for the compiler specifies <code>CHAR_BIT</code> as 16 on page 101. </p>\n\n<p>This appears to be a modern processor (currently being sold), compilers supporting C99 and C++03.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1576347922, "post_id": 38360262, "comment_id": 104873630, "body": "Curious, is a <code>char</code> a signed char or an unsigned one there?"}, {"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1576379092, "post_id": 38360262, "comment_id": 104879403, "body": "@chux-ReinstateMonica signed. Search for <code>&quot;plain&quot; char</code> in the document."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1576380781, "post_id": 38360262, "comment_id": 104879603, "body": "<a href=\"http://www.analog.com/media/en/dsp-documentation/software-manuals/cces-SharcCompiler-manual.pdf\" rel=\"nofollow noreferrer\">Compiler Manual for SHARC Processors</a> has  &quot;A &quot;plain&quot; char has the same range and value as a signed char.&quot; .  Thanks."}], "tags": [], "owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "is_accepted": false, "score": 18, "last_activity_date": 1468438526, "creation_date": 1468438526, "answer_id": 38360262, "question_id": 32091992, "link": "https://stackoverflow.com/questions/32091992/is-char-bit-ever-8/38360262#38360262", "title": "Is CHAR_BIT ever &gt; 8?", "body": "<p>Another example is Analog Devices' <a href=\"http://www.analog.com/en/products/processors-dsp/sharc.html\">SHARC processor family</a>. \nIts C implementation, <a href=\"http://www.analog.com/en/design-center/processors-and-dsp/evaluation-and-development-software/adswt-cces.html\">CrossCore Embedded Studio</a>, has <code>CHAR_BIT == 32</code> and <a href=\"http://www.analog.com/media/en/dsp-documentation/software-manuals/cces-SharcCompiler-manual.pdf\">claims</a> to provide freestanding C99 and C++11 conformance.</p>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 2325279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xkrmf.jpg?s=128&g=1", "display_name": "Petr Vep\u0159ek", "link": "https://stackoverflow.com/users/2325279/petr-vep%c5%99ek"}, "is_accepted": false, "score": 3, "last_activity_date": 1492882747, "creation_date": 1492882747, "answer_id": 43562431, "question_id": 32091992, "link": "https://stackoverflow.com/questions/32091992/is-char-bit-ever-8/43562431#43562431", "title": "Is CHAR_BIT ever &gt; 8?", "body": "<p>Analog Devices' SHARC DSP was already mentioned (CHAR_BIT==32).  Let me add that recent <strong>SHARC+</strong> cores (I use ADSP-SC589 and CCES toolchain) can run apps written in two modes: <strong>CHAR_BIT == 8</strong> or <strong>CHAR_BIT == 32</strong>.  You can even <strong>mix'n'match</strong> the two modes together in one app.  Although I would not recommend this for development in general, I find it useful when porting code.</p>\n"}], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1977, "favorite_count": 3, "accepted_answer_id": 38345249, "answer_count": 3, "score": 17, "last_activity_date": 1492882747, "creation_date": 1439977597, "last_edit_date": 1468468269, "question_id": 32091992, "link": "https://stackoverflow.com/questions/32091992/is-char-bit-ever-8", "title": "Is CHAR_BIT ever &gt; 8?", "body": "<p>The ISO C Standard requires <code>CHAR_BIT</code> to be at least 8.</p>\n\n<p>With POSIX mandating <code>CHAR_BIT</code> be equal to 8, and (almost?) all networking and communication standards using <em>octets</em>, is there <em>any</em> contemporary C implementation where <code>CHAR_BIT</code> > 8?</p>\n\n<p>(Note: I'm not interested in historic computer architectures using 18 or 36 bit words. It's genuinely a question about C as it is used today on current hardware; think systems with a C99 or later implementation).</p>\n"}, {"tags": ["c++", "c", "linux", "unix"], "comments": [{"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440087575, "post_id": 32091389, "comment_id": 52138841, "body": "What is your outer problem exactly? This sounds like an XY problem."}, {"owner": {"reputation": 12588, "user_id": 417896, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ujjJo.jpg?s=128&g=1", "display_name": "BAR", "link": "https://stackoverflow.com/users/417896/bar"}, "reply_to_user": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440087701, "post_id": 32091389, "comment_id": 52138914, "body": "@DavidSchwartz Streaming GBs of data on local net.  Noticed a significant improvement using TCP_CORK, now I need to push the MTU."}, {"owner": {"reputation": 165655, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440111553, "post_id": 32091389, "comment_id": 52150595, "body": "The MTU is a network parameter."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1535142924, "post_id": 32091389, "comment_id": 90973756, "body": "<code>uint16_t</code> is probably wrong. Most socket options take an <code>int</code>."}], "owner": {"reputation": 12588, "user_id": 417896, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ujjJo.jpg?s=128&g=1", "display_name": "BAR", "link": "https://stackoverflow.com/users/417896/bar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440084427, "creation_date": 1439975978, "last_edit_date": 1440083611, "question_id": 32091389, "link": "https://stackoverflow.com/questions/32091389/how-to-set-mtu-for-use-with-tcp-cork", "title": "How to set MTU for use with TCP_CORK", "body": "<p>How do I set the MTU value pragmatically?</p>\n\n<p>Apparently there are three candidates: <code>IP_MTU</code>, <code>TCP_MSS</code>, and <code>TCP_MAXSEG</code></p>\n\n<p>I tried:</p>\n\n<pre><code>uint16_t tcp_mss = 2048 * 8;\n\nsetsockopt(sock_descriptor, IPPROTO_TCP, TCP_MSS, &amp;tcp_mss, sizeof(tcp_mss));\n</code></pre>\n\n<p>My intention is to increase the amount of data the TCP buffer should have before sending the packet.  <code>TCP_CORK</code> is in use.</p>\n\n<p>Also helps if you know how to change the time from the apparent default of 200ms.</p>\n"}, {"tags": ["c", "eclipse", "postgresql", "debugging"], "answers": [{"tags": [], "owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "is_accepted": true, "score": 0, "last_activity_date": 1439981940, "last_edit_date": 1439981940, "creation_date": 1439981493, "answer_id": 32093436, "question_id": 32091338, "link": "https://stackoverflow.com/questions/32091338/debugging-postgresql-9-3-with-eclipse-cdt-and-gdb/32093436#32093436", "title": "Debugging Postgresql 9.3 with Eclipse CDT and GDB", "body": "<blockquote>\n  <p>When i connect a client with: <code>$ psql test</code>, Does the server create a new thread for the client?</p>\n</blockquote>\n\n<p>No. The server creates a new <code>postgres</code> (or, on Windows, <code>postgres.exe</code>) <em>process</em> that communicates with the postmaster and other processes via shared memory and signals. PostgreSQL uses a shared-nothing-by-default multiprocessing architecture rather than a shared-everything-by-default multithreading architecture.</p>\n\n<blockquote>\n  <p>Is it possible to attach debugger and set breakpoints in parser.c or executor.c in postgresql source files so that i can analyse how postgresql queries are executed?</p>\n</blockquote>\n\n<p>Yes, if your debugger can follow backend forks from the postmaster, or if you directly attach your debugger to the backend you wish to debug. The latter is more common unless you're debugging backend startup.</p>\n\n<p>A typical workflow is:</p>\n\n<ul>\n<li>Connect with <code>psql</code></li>\n<li><code>SELECT pg_backend_pid()</code></li>\n<li>Connect the debugger to that process ID</li>\n<li>Set breakpoints and watches as desired and resume execution</li>\n<li>In the same <code>psql</code> session, run the query you want to debug backend execution of</li>\n<li>Switch to the debugger when it traps and start debugging</li>\n</ul>\n\n<p>This works on Linux with gdb and Windows with Visual Studio. Presumably it works with Eclipse too.</p>\n\n<p>More at <a href=\"https://wiki.postgresql.org/wiki/Developer_FAQ\" rel=\"nofollow\">the developer FAQ</a>.</p>\n\n<hr>\n\n<p>It is <em>possible</em> to instead debug the postmaster and use gdb's multi-process debugging features with <code>follow-fork-mode</code>, <code>detach-on-fork</code>, <code>schedule-multiple</code> and <code>non-stop</code> options, but it's complicated to get right, noisy, and will be confusing if you're used to gdb's normal break behaviour. It's also a bit awkward because PostgreSQL uses signals that gdb also uses, so some hacks are required to work around that. See <a href=\"http://blog.2ndquadrant.com/processes-breakpoints-watchpoints-postgresql/\" rel=\"nofollow\">a blog post I wrote on the topic earlier</a>.</p>\n\n<p>I recommend keeping it simple and attaching using <code>pg_backend_pid</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 4995214, "user_type": "registered", "profile_image": "https://graph.facebook.com/959311824089750/picture?type=large", "display_name": "Venkateshwara Cholan", "link": "https://stackoverflow.com/users/4995214/venkateshwara-cholan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 32093436, "answer_count": 1, "score": 0, "last_activity_date": 1545595479, "creation_date": 1439975843, "question_id": 32091338, "link": "https://stackoverflow.com/questions/32091338/debugging-postgresql-9-3-with-eclipse-cdt-and-gdb", "title": "Debugging Postgresql 9.3 with Eclipse CDT and GDB", "body": "<p>i am from java background and have used debugger in eclipse(java).</p>\n\n<p>i have installed postgresql 9.3 as stated in this link: <a href=\"https://wiki.postgresql.org/wiki/Working_with_Eclipse\" rel=\"nofollow\">https://wiki.postgresql.org/wiki/Working_with_Eclipse</a></p>\n\n<p>The debugger works fine for the server(which waits and accepts incoming client connections).</p>\n\n<ol>\n<li><p>When i connect a client with: <strong>$ psql test</strong> .Does the server create a new thread for the client?</p></li>\n<li><p>Is it possible to attach debugger and set breakpoints in parser.c or executor.c in postgresql source files so that i can analyse how postgresql queries are executed?</p></li>\n</ol>\n\n<p>I have tried attaching debugger and set breakpoints in parser.c and executed some queries in the client.But it doesnt stop at the breakpoint.</p>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["c", "linux", "pointers", "malloc", "embedded-linux"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1439975188, "post_id": 32091053, "comment_id": 52076955, "body": "Note: Please <a href=\"http://stackoverflow.com/q/605845/2173917\">see why not to cast</a> the return value of <code>malloc()</code> and family in <code>C</code>."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1439975517, "post_id": 32091053, "comment_id": 52077156, "body": "@nos maybe that <code>ptCurEntry-&gt;pNext = </code>  is a clue to your first question."}, {"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1439975715, "post_id": 32091053, "comment_id": 52077303, "body": "What you mean with &quot;when system is busy&quot;? Happens <b>only</b> when system is busy?"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1439976163, "post_id": 32091053, "comment_id": 52077609, "body": "What&#39;s the value of <code>ptCurEntry</code> just before you execute this code?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439976180, "post_id": 32091053, "comment_id": 52077620, "body": "Most likely ptCurEntry isn&#39;t valid. There&#39;s not necessarily any relation between the line that contains the bug and the line where the program crashes. At any rate, the bug is located outside the code posted."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1439976298, "post_id": 32091053, "comment_id": 52077709, "body": "Also, unless you get paid per number of parenthesis written, consider changing the code to <code>ptCurEntry-&gt;pNext = malloc(sizeof(TISOMStscBoxEntry)); if(ptCurEntry-&gt;pNext == NULL)</code>"}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1439977434, "post_id": 32091053, "comment_id": 52078577, "body": "A comment about the first comment (why not to cast the return value of <code>malloc</code>)? Does this really help answering the question? Or do people on SO just like to show that they know this general fact, which although correct, doesn&#39;t seem to contribute whatsoever in explaining <code>malloc</code> bugs (even according to the accepted answer in that link, the only possible runtime issue is if <code>stdlib.h</code> is not included). It seems very often that users here like boasting with quotes such as &quot;undefined behavior&quot; and &quot;don&#39;t cast the return-value of <code>malloc</code>&quot;, instead of concentrating in the question at hand!!!!!"}], "answers": [{"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1439975988, "creation_date": 1439975988, "answer_id": 32091393, "question_id": 32091053, "link": "https://stackoverflow.com/questions/32091053/strange-behavior-of-malloc/32091393#32091393", "title": "Strange behavior of malloc()", "body": "<p>Things to check</p>\n\n<ul>\n<li><code>ptCurEntry</code> points at a valid object.  If this is not so, accessing <code>ptCurEntry-&gt;pNext</code> will give undefined behaviour;</li>\n<li><code>ptCurEntry-&gt;pNext</code> is actually a pointer to <code>TISOMStscBoxEntry</code>.  If this is not true, it is possible not enough memory is being allocated.</li>\n<li>Before the call of <code>malloc()</code>, <code>&lt;stdlib.h&gt;</code> has been included.  Failure to do this can result dereferencing the pointer to have undefined behaviour.</li>\n</ul>\n\n<p>Also, change the</p>\n\n<pre><code>if ((ptCurEntry-&gt;pNext = (TISOMStscBoxEntry *) malloc(sizeof(TISOMStscBoxEntry))) == NULL)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if ((ptCurEntry-&gt;pNext = malloc(sizeof(*(ptCurEntry-&gt;pNext)))) == NULL)\n</code></pre>\n\n<p>This addresses some of the things to check above.   If it does not compile it means that either you have omitted to <code>#include &lt;stdlib.h&gt;</code> or that your compiler is a C++ compiler rather than a C compiler.</p>\n\n<p>I am assuming your code is not multithreaded.</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 5241788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tsvUS.png?s=128&g=1", "display_name": "Jossy Sebastian", "link": "https://stackoverflow.com/users/5241788/jossy-sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1439977235, "creation_date": 1439977235, "answer_id": 32091852, "question_id": 32091053, "link": "https://stackoverflow.com/questions/32091053/strange-behavior-of-malloc/32091852#32091852", "title": "Strange behavior of malloc()", "body": "<p>malloc can behave abnormally or generate core if your application has already made any memory corruption. So make sure there is no invalid read/write with valgrind or similar tools</p>\n"}], "owner": {"reputation": 61, "user_id": 5209511, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/32bfcf9fbd5ea369fefb12365cecc9ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Yang", "link": "https://stackoverflow.com/users/5209511/ryan-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1440075631, "answer_count": 2, "score": 0, "last_activity_date": 1439977235, "creation_date": 1439975120, "last_edit_date": 1439975996, "question_id": 32091053, "link": "https://stackoverflow.com/questions/32091053/strange-behavior-of-malloc", "closed_reason": "Not suitable for this site", "title": "Strange behavior of malloc()", "body": "<p>I have the following code:</p>\n\n<pre><code>if ((ptCurEntry-&gt;pNext = (TISOMStscBoxEntry *) malloc(sizeof(TISOMStscBoxEntry))) == NULL)\n{\n    return ERR_OUT_OF_MEMORY;\n}\nptCurEntry-&gt;pNext-&gt;pNext = NULL;\n</code></pre>\n\n<p>I malloc a space which is the size of <code>TISOMStscBoxEntry</code>.\nIn this structure, there is a pointer <strong>pNext</strong> included.\nIn normal case, <code>ptCurEntry-&gt;pNext-&gt;pNext = NULL</code> is worked.\n(Just assign NULL to that created pointer)\nHowever, I got <strong>segmentation fault</strong> which was caused by <code>ptCurEntry-&gt;pNext-&gt;pNext = NULL</code> when the system was busy.\nIt seems like the error handling above for malloc is fine, what's wrong with it?\nMaybe I cannot rely on the returned NULL of malloc?</p>\n"}, {"tags": ["c", "language-lawyer", "c89"], "answers": [{"comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1439974164, "post_id": 32090670, "comment_id": 52076260, "body": "Also case in point, 64 bit windows have 32 bit longs and 64 bit size_t"}, {"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1439974206, "post_id": 32090670, "comment_id": 52076285, "body": "Also: <code>size_t</code> is unsigned, <code>long</code>s are signed."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1439975187, "post_id": 32090670, "comment_id": 52076953, "body": "In the case of Windows and Visual Studio, the format specifier for printing a size_t variable is (% upper case I) %I optionally followed by o, u, x, or X, which will work in both 32 bit and 64 bit modes. For GCC I think it&#39;s %zu (not sure if other suffixes can be used with %z)."}, {"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1439978589, "post_id": 32090670, "comment_id": 52079414, "body": "Unfortunately this answer seem to be prematurely posted (as the question was), the question was later completed so this doesn&#39;t really answer the questions."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1439980795, "post_id": 32090670, "comment_id": 52080865, "body": "@skyking - In the case of Visual Studio (2013 and older, maybe 2015 as well), it&#39;s C (not C++) compiler is pre C99."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440007422, "post_id": 32090670, "comment_id": 52099405, "body": "Is there even a guarantee that <code>SIZE_MAX+1</code> won&#39;t yield Undefined Behavior [e.g. if <code>int</code> and <code>long</code> have 32 value bits and a sign bit, while <code>unsigned int</code>, <code>unsigned long</code>, and <code>size_t</code> have 32 value bits and a padding bit, I think <code>SIZE_MAX+1</code> would promote <code>SIZE_MAX</code> to <code>long</code> (with value LONG_MAX), so adding 1 would cause overflow.]"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1473631616, "post_id": 32090670, "comment_id": 66204512, "body": "In C89/C90, since there were no extended integer types and <code>size_t</code> must be one of the standard unsigned types, it was (I think) guaranteed that any <code>size_t</code> value is within the range of <code>unsigned long</code>. That guarantee evaporated in C99 with the introduction of <code>unsigned long long</code>."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1474046131, "post_id": 32090670, "comment_id": 66387818, "body": "@KeithThompson: Nothing in C89 would have forbade an implementation from defining a __uint64 or, for that matter, __uint24 type.  If the underbars were included, such a thing wouldn&#39;t even be an &quot;extension&quot; as C89 defines the term (note that annex J2 of C89 lists predefinition of certain macros <i>without underbars</i> as a common extension, implying both that the existence of additional predefined identifiers without underbars would be a legitimate extension, and that the existence of identifiers without underbars need not be considered an extension at all."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1474047067, "post_id": 32090670, "comment_id": 66388222, "body": "@supercat: ISO C90 has no Annex J2. I don&#39;t have a copy of ANSI C89. ISO C90 lists &quot;Common extensions&quot; in G.5 -- and it clearly says, &quot;The inclusion of any extension that may cause a strictly conforming program to become invalid renders an implementation nonconforming.&quot;. Such an &quot;extension&quot; is not a permitted extension as described in C90 section 4, &quot;Compliance&quot;. C90 requires` <code>size_t</code> to be an &quot;unsigned integral type&quot;. C90 6.1.2.5 defines what <i>signed integer types</i> and <i>unsigned integer types</i> are, by listing them."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1474047161, "post_id": 32090670, "comment_id": 66388281, "body": "@supercat:  In any case, C90 is an obsolete standard. We needn&#39;t worry about new implementations inventing new extensions. If I&#39;m writing code that must work with a conforming C89/C90 implementation, it&#39;s perfectly safe to assume that any <code>size_t</code> value is within the range of <code>unsigned long</code>, both by the letter of the standard and the practical consideration of what any real-world compilers actually do."}], "tags": [], "owner": {"reputation": 133646, "user_id": 1119701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d4bef9fe12d776629b204d4e650c2e0?s=128&d=identicon&r=PG", "display_name": "ouah", "link": "https://stackoverflow.com/users/1119701/ouah"}, "is_accepted": true, "score": 7, "last_activity_date": 1439981344, "last_edit_date": 1439981344, "creation_date": 1439974082, "answer_id": 32090670, "question_id": 32090583, "link": "https://stackoverflow.com/questions/32090583/was-long-guaranteed-to-be-as-wide-as-size-t/32090670#32090670", "title": "Was `long` guaranteed to be as wide as `size_t`", "body": "<p>There is no such guarantee. </p>\n\n<p>While it is common for implementation to have same size for <code>long</code> and <code>size_t</code>, it is not always the case. As put in the comments Windows 64-bit have different size for <code>long</code> and <code>size_t</code>.</p>\n\n<p>Also notice that the minimum value of <code>SIZE_MAX</code> for an implementation is <code>65535</code> while the minimum value of <code>ULONG_MAX</code> is <code>4294967295</code> (<code>2147483647</code> for <code>LONG_MAX</code>). (Note that <code>SIZE_MAX</code> appeared with C99.) It means that <code>size_t</code> is guaranteed to be at least 16-bit but <code>unsigned long</code> / <code>long</code> are guaranteed to be at least 32-bit.</p>\n\n<p><strong>EDIT:</strong> Question has changed a little bit after this answer... So:</p>\n\n<p><em>So the question is could you assume or were you guaranteed that long were enough to hold size_t in pre C99.</em></p>\n\n<p>There is no such guarantee even in C89. <code>long</code> can be 32-bit and <code>size_t</code> 64-bit. (See C89 example with MSVC in Windows 64-bit above.)</p>\n\n<p><em>The other question is whether there exists any guarantee that size_t would fit in any of the other standardized integer types (except the obvious exceptions like ssize_t, ptrdiff_t and such).</em></p>\n\n<p>Again there is no such guarantee by the Standard. <code>size_t</code> is an alias for another standard unsigned integer type (and it cannot be an extended integer type as C89 does not have extended integer types).</p>\n"}, {"tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 3, "last_activity_date": 1473632749, "creation_date": 1473632749, "answer_id": 39441237, "question_id": 32090583, "link": "https://stackoverflow.com/questions/32090583/was-long-guaranteed-to-be-as-wide-as-size-t/39441237#39441237", "title": "Was `long` guaranteed to be as wide as `size_t`", "body": "<blockquote>\n  <p>So the question is could you assume or were you guaranteed that <code>long</code> were enough to hold <code>size_t</code> in <strong>pre C99</strong>.</p>\n</blockquote>\n\n<p>Not <code>long</code>, but <code>unsigned long</code>.</p>\n\n<p>In C89/C90, <code>size_t</code> is required to be an unsigned integral type. There are exactly 4 <em>unsigned integer types</em> in C89/C90: <code>unsigned char</code>, <code>unsigned short</code>, <code>unsigned int</code>, and <code>unsigned long</code>. Therefore <em>in C89/C90</em>, <code>size_t</code> can be no wider than <code>unsigned long</code>, and therefore any value of type <code>size_t</code> can be converted to <code>unsigned long</code> without loss of information. (This applies only to <code>unsigned long</code>, not to <code>long</code>.)</p>\n\n<p>This implicit guarantee vanished in C99, with the introduction of <code>unsigned long long</code> and of <em>extended integer types</em>. In C99 and later, <code>size_t</code> can be wider than <code>unsigned long</code>. For example, a C99 implementation might have 32-bit <code>long</code> and 64-bit <code>long long</code>, and make <code>size_t</code> an alias for <code>unsigned long long</code>.</p>\n\n<p>Even in C89/C90, you can rely on the guarantee only if you have a conforming C89/C90 implementation. It was common for pre-C99 compilers to provide extensions on top of the C89/C90 standard -- for example a compiler might support <code>long long</code>, and might make <code>size_t</code> an alias for <code>unsigned long long</code>, even if the compiler didn't fully support the C99 (or C11) standard.</p>\n\n<p>The question was about <code>printf</code>. Keep in mind that an argument to <code>printf</code> <em>must</em> be of an appropriate type for the format string. This:</p>\n\n<pre><code>printf(\"sizeof (int) = %lu\\n\", sizeof (int));\n</code></pre>\n\n<p>has undefined behavior unless <code>size_t</code> happens to be an alias for <code>unsigned long</code> (even if <code>size_t</code> and <code>unsigned long</code> happen to have the same size). You need to cast the value to the correct type:</p>\n\n<pre><code>printf(\"sizeof (int) = %lu\\n\", (unsigned long)sizeof (int));\n</code></pre>\n\n<p>For C99 and later, you can print <code>size_t</code> values directly:</p>\n\n<pre><code>printf(\"sizeof (int) = %zu\\n\", sizeof (int));\n</code></pre>\n\n<p>And if like, you can test the value of <code>__STDC_VERSION__</code> to determine which one to use.</p>\n\n<p>(A note on editions of the C standard. The first C standard was published in 1989 by ANSI. It was republished, with extra boilerplate sections added, by ISO in 1990. So C89 and C90 are two different documents that describe the same language. The later C99 and C11 standards were published by ISO. All three ISO C standards were officially adopted by ANSI. So strictly speaking \"ANSI C\" should refer to ISO C11 -- but for historical reasons the phrase is still used to refer to the 1989 standard.)</p>\n"}], "owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 1, "accepted_answer_id": 32090670, "answer_count": 2, "score": 4, "last_activity_date": 1473632749, "creation_date": 1439973843, "last_edit_date": 1495540862, "question_id": 32090583, "link": "https://stackoverflow.com/questions/32090583/was-long-guaranteed-to-be-as-wide-as-size-t", "title": "Was `long` guaranteed to be as wide as `size_t`", "body": "<p>When looking for evidence of <code>unsigned long</code> being enough to hold <code>size_t</code> for the purpose of being argument to <code>printf</code> I ran into two fact(oid)s.</p>\n\n<p>First there's this <a href=\"https://stackoverflow.com/a/10065397/4498329\">answer</a> stating that <code>long</code> is indeed not guaranteed to be large enough for <code>size_t</code>. On the other hand I saw this <a href=\"https://stackoverflow.com/a/2524876/4498329\">answer</a> suggesting to use <code>printf(\"%lu\", (unsigned long)x)</code> in pre C99, <code>x</code> being of <code>size_t</code>.</p>\n\n<p>So the question is could you assume or were you guaranteed that <code>long</code> were enough to hold <code>size_t</code> in <strong>pre C99</strong>. The other question is whether there exists any guarantee that <code>size_t</code> would fit in any of the other standardized integer types (except the obvious exceptions like <code>ssize_t</code>, <code>ptrdiff_t</code> and such).</p>\n"}, {"tags": ["c", "xcode", "macos", "debugging", "lldb"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1439973864, "post_id": 32090552, "comment_id": 52076032, "body": "Did you compile with <code>-g</code> or similar ?"}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439974042, "post_id": 32090552, "comment_id": 52076165, "body": "compiling the code with -g flag seems to have fixed the problem. what does this option represents in clang compiler ?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1439974123, "post_id": 32090552, "comment_id": 52076231, "body": "In gcc, clang et al <code>-g</code> enables debug symbols in the generated code - you usually want this for any debug or profiling builds (and sometimes even release builds too)."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439974194, "post_id": 32090552, "comment_id": 52076280, "body": "I&#39;ve converted this to an answer now, for any future visitors to the question..."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439974326, "post_id": 32090552, "comment_id": 52076365, "body": "Great that, i&#39;ve just noticed that on the gcc/clang manual. however, i did try to compile with -O flag that should give more debugging information, perhaps do you know what&#39;s the difference between -O to -g"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439974392, "post_id": 32090552, "comment_id": 52076403, "body": "No, <code>-O</code> relates to code optimisation. Its relevance to debugging is that you normally want minimum optimisation for debug builds (<code>-O0</code>), and a higher optimisation level for release builds (<code>-O2</code> or <code>-O3</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1439974170, "creation_date": 1439974170, "answer_id": 32090696, "question_id": 32090552, "link": "https://stackoverflow.com/questions/32090552/lldb-debugger-step-resolution/32090696#32090696", "title": "LLDB debugger step resolution", "body": "<p>You need to compile with debug symbols enabled (e.g. <code>-g</code>) in order for gdb or lldb to be able to step at the source level.</p>\n\n<p>In gcc, clang, <em>et al</em> <code>-g</code> enables debug symbols in the generated code - you usually want this for any debug or profiling builds (and sometimes even release builds too).</p>\n"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 32090696, "answer_count": 1, "score": 0, "last_activity_date": 1439974332, "creation_date": 1439973746, "last_edit_date": 1439974332, "question_id": 32090552, "link": "https://stackoverflow.com/questions/32090552/lldb-debugger-step-resolution", "title": "LLDB debugger step resolution", "body": "<p>I've launched LLDB debugger from command line, with target stand-alone C executable, and set the start of <code>main()</code> method as breakpoint. </p>\n\n<p>After running the application in the debugger, I saw that it stops on assembly line, rather then C code line. In addition, every time I stepped forward, the step resolution is a single assembly line. </p>\n\n<p>Here's the output of lldb: </p>\n\n<pre><code>(lldb) target create \"./a.out\"\nCurrent executable set to './a.out' (x86_64).\n(lldb) breakpoint set --name main\nBreakpoint 1: where = a.out`main, address = 0x0000000100000e80\n(lldb) run\nProcess 2023 launched: './a.out' (x86_64)\nProcess 2023 stopped\n* thread #1: tid = 0xfca5, 0x0000000100000e80 a.out`main, queue = 'com.apple.main-thread', stop reason = breakpoint 1.1\nframe #0: 0x0000000100000e80 a.out`main a.out`main:\n-&gt;  0x100000e80 &lt;+0&gt;: pushq  %rbp\n    0x100000e81 &lt;+1&gt;: movq   %rsp, %rbp\n    0x100000e84 &lt;+4&gt;: pushq  %r15\n    0x100000e86 &lt;+6&gt;: pushq  %r14\n(lldb) n\nProcess 2023 stopped\n* thread #1: tid = 0xfca5, 0x0000000100000e81 a.out`main + 1, queue = 'com.apple.main-thread', stop reason = instruction step over\nframe #0: 0x0000000100000e81 a.out`main + 1\na.out`main:\n-&gt;  0x100000e81 &lt;+1&gt;: movq   %rsp, %rbp\n    0x100000e84 &lt;+4&gt;: pushq  %r15\n    0x100000e86 &lt;+6&gt;: pushq  %r14\n    0x100000e88 &lt;+8&gt;: pushq  %r12\n(lldb) n\n</code></pre>\n\n<p>Is there any way I can change the step resolution for a single C source line rather then assembly line (like I get when running lldb from Xcode) ?</p>\n"}, {"tags": ["python", "c", "unit-testing", "mocking", "pymock"], "comments": [{"owner": {"reputation": 1331, "user_id": 1076268, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40d0052a4cd080ec949c64c2ae62bd82?s=128&d=identicon&r=PG", "display_name": "zom-pro", "link": "https://stackoverflow.com/users/1076268/zom-pro"}, "edited": false, "score": 1, "creation_date": 1439973004, "post_id": 32090164, "comment_id": 52075533, "body": "Could you provide a snippet of your code to see how are you including your C libraries?"}, {"owner": {"reputation": 121, "user_id": 5242411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdb7549730d469d27529444c95f3a02?s=128&d=identicon&r=PG&f=1", "display_name": "P Jelic", "link": "https://stackoverflow.com/users/5242411/p-jelic"}, "reply_to_user": {"reputation": 1331, "user_id": 1076268, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40d0052a4cd080ec949c64c2ae62bd82?s=128&d=identicon&r=PG", "display_name": "zom-pro", "link": "https://stackoverflow.com/users/1076268/zom-pro"}, "edited": false, "score": 1, "creation_date": 1439974605, "post_id": 32090164, "comment_id": 52076570, "body": "i added it to original question"}, {"owner": {"reputation": 10650, "user_id": 1556290, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5b37e6b4ac97453e4ba9dba37954cf79?s=128&d=identicon&r=PG", "display_name": "Armin Rigo", "link": "https://stackoverflow.com/users/1556290/armin-rigo"}, "edited": false, "score": 0, "creation_date": 1439978576, "post_id": 32090164, "comment_id": 52079403, "body": "This would be theoretically possible, at least if the C function was not declared &quot;static&quot;.  I&#39;m not sure if it is done by any mocking framework."}, {"owner": {"reputation": 1331, "user_id": 1076268, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/40d0052a4cd080ec949c64c2ae62bd82?s=128&d=identicon&r=PG", "display_name": "zom-pro", "link": "https://stackoverflow.com/users/1076268/zom-pro"}, "edited": false, "score": 0, "creation_date": 1439988816, "post_id": 32090164, "comment_id": 52086619, "body": "What can you see in self.event if you inspect it? (using the inspect module)"}, {"owner": {"reputation": 121, "user_id": 5242411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdb7549730d469d27529444c95f3a02?s=128&d=identicon&r=PG&f=1", "display_name": "P Jelic", "link": "https://stackoverflow.com/users/5242411/p-jelic"}, "edited": false, "score": 0, "creation_date": 1440058716, "post_id": 32090164, "comment_id": 52119111, "body": "i added it to original question"}, {"owner": {"reputation": 3341, "user_id": 1539813, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3a8ebf2c1343c036ce21ba2e242a1d7?s=128&d=identicon&r=PG", "display_name": "Nikhil Rupanawar", "link": "https://stackoverflow.com/users/1539813/nikhil-rupanawar"}, "edited": false, "score": 0, "creation_date": 1463655440, "post_id": 32090164, "comment_id": 62161713, "body": "<a href=\"https://gist.github.com/theodoregoetz/a06477775f18c11b4517\" rel=\"nofollow noreferrer\">gist.github.com/theodoregoetz/a06477775f18c11b4517</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1086, "user_id": 7619353, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e4d2a067a2026b3805e1f2f6a6ac48d0?s=128&d=identicon&r=PG&f=1", "display_name": "tyleax", "link": "https://stackoverflow.com/users/7619353/tyleax"}, "edited": false, "score": 0, "creation_date": 1524788181, "post_id": 36345731, "comment_id": 87123539, "body": "If he mocks self.event entirely, won&#39;t he be mocking all the c functions? How would the c function be tested with your suggestion? Maybe I am not understanding you."}], "tags": [], "owner": {"reputation": 806, "user_id": 645317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/78570f57a6668c81cfb59b2ac642ec9c?s=128&d=identicon&r=PG", "display_name": "peroksid", "link": "https://stackoverflow.com/users/645317/peroksid"}, "is_accepted": false, "score": 2, "last_activity_date": 1459468106, "creation_date": 1459468106, "answer_id": 36345731, "question_id": 32090164, "link": "https://stackoverflow.com/questions/32090164/is-it-possible-to-mock-a-c-function-using-python/36345731#36345731", "title": "Is it possible to mock a C function using python?", "body": "<p>If you mock it you pretend it is reliable. Or at least do not test mocked functionality in the test using the mock.</p>\n\n<p>No point in mocking exactly C function, no need in loading SO object.</p>\n\n<p>Mock self.event and add Mock instance \"read_sensor\" to it, use the mock. </p>\n"}], "owner": {"reputation": 121, "user_id": 5242411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdb7549730d469d27529444c95f3a02?s=128&d=identicon&r=PG&f=1", "display_name": "P Jelic", "link": "https://stackoverflow.com/users/5242411/p-jelic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 2, "answer_count": 1, "score": 12, "last_activity_date": 1574889000, "creation_date": 1439972516, "last_edit_date": 1458874547, "question_id": 32090164, "link": "https://stackoverflow.com/questions/32090164/is-it-possible-to-mock-a-c-function-using-python", "title": "Is it possible to mock a C function using python?", "body": "<p>I was wondering is it possible to mock a C function using the Python <a href=\"https://pypi.python.org/pypi/mock\" rel=\"noreferrer\">mock</a> library and how?</p>\n\n<p>To make a unit test for a C function in Python I use the shared library, but I can't mock one function in order to pass the test. Tests work fine when there is no need to use mock.</p>\n\n<p>So my question is: Is it possible to mock a C function using Python mock and how? </p>\n\n<p>Here is an example of source code.</p>\n\n<pre><code>//read_sensor.c\n   #include &lt;stdint.h&gt;\n   #include \"read_sensor.h\"        \n   uint8_t read_sensor (void)\n   {\n       return  0xff;\n   }\n\n//event_report.c\n    include &lt;stdint.h&gt;\n    #include &lt;string.h&gt;\n    #include \"event_report.h\"\n    #include \"read_sensor.h\"\n\n\n    #define TRUE 1\n    #define FALSE 0\n\n    extern char status ;\n    extern uint8_t flag;\n\n    void read_distance(void)\n    {\n        uint8_t count;\n        uint8_t value;\n        uint8_t flag_count = 0;\n        for (count = 0; count &lt; 3; count ++)\n        {\n            value = read_sensor();\n            if ( value &lt; 100 ) \n            {\n                flag_count++;\n            }  \n        }\n\n        if ( flag_count == 3) \n        {\n            flag = TRUE;\n        } \n        else\n        {\n            flag = FALSE;    \n        }    \n    }\n</code></pre>\n\n<p>and the test is here</p>\n\n<pre><code>import ctypes\nfrom ctypes import *\nimport mock\nimport unittest\n\nTRUE = 1\nFALSE = 0\n\nclass TestClass(unittest.TestCase):\n\n    def setUp(self):\n        print \"\\nSetUp\\n\"\n        self.event=ctypes.CDLL('d:/test_pytest/test_sensor_report/event_report.so')\n\n    def tearDown(self):\n        print \"tearDown\\n\"\n\n\n    def test_1_flag_should_be_true_when_readed_distance_is_0(self):\n        expected_flag = TRUE\n\n        self.event.read_sensor = MagicMock(return_value = 0)\n\n        #calling function under test\n        result = self.event.read_distance()\n        print result\n\n        #testing assertion\n        assert expected_flag == result\n</code></pre>\n\n<p>After inspecting with <code>inspect.getmembers()</code> I get the following:</p>\n\n<pre><code> [('_FuncPtr', &lt;class 'ctypes._FuncPtr'&gt;), ('__class__', &lt;class\n 'ctypes.CDLL'&gt;), ('__delattr__', &lt;method-wrapper '__delattr__' of\n CDLL object at 0xffa87eec&gt;), ('__dict__', {'_FuncPtr': &lt;class\n 'ctypes._FuncPtr'&gt;, '_handle': 1690304512, '_name':\n 'd:/test_pytest/test_sensor_report/event_report.so'}),\n ('__doc__', \"An instance of this class represents a loaded\n  dll/shared\\n    library, exporting functions using the standard C\n  calling\\n    convention (named 'cdecl' on Windows).\\n\\n    The\n  exported functions can be accessed as attributes, or by\\n\n  indexing with the function name.  Examples:\\n\\n    &lt;obj&gt;.qsort -&gt;\n  callable object\\n    &lt;obj&gt;['qsort'] -&gt; callable object\\n\\n\n  Calling the functions releases the Python GIL during the call\n  and\\n    reacquires it afterwards.\\n    \"), ('__format__',\n  &lt;built-in method __format__ of CDLL object at 0xffa87eec&gt;),\n  ('__getattr__', &lt;bound method CDLL.__getattr__ of &lt;CDLL\n    'd:/test_pytest/test_sensor_report/event_report.so', handle\n    64c00000 at ffa87eec&gt;&gt;), ('__getattribute__', &lt;method-wrapper\n        '__getattribute__' of CDLL object at 0xffa87eec&gt;),\n    ('__getitem__', &lt;bound method CDLL.__getitem__ of &lt;CDLL\n     'd:/test_pytest/test_sensor_report/event_report.so', handle\n     64c00000 at ffa87eec&gt;&gt;), ('__hash__', &lt;method-wrapper\n         '__hash__' of CDLL object at 0xffa87eec&gt;), ('__init__',\n             &lt;bound method CDLL.__init__ of &lt;CDLL\n             'd:/test_pytest/test_sensor_report/event_report.so',\n             handle 64c00000 at ffa87eec&gt;&gt;), ('__module__', 'ctypes'),\n         ('__new__', &lt;built-in method __new__ of type object at\n          0x3d35b600&gt;), ('__reduce__', &lt;built-in method __reduce__ of\n              CDLL object at 0xffa87eec&gt;), ('__reduce_ex__', &lt;built-in\n                  method __reduce_ex__ of CDLL object at 0xffa87eec&gt;),\n              ('__repr__', &lt;bound method CDLL.__repr__ of &lt;CDLL\n                'd:/test_pytest/test_sensor_report/event_report.so',\n                handle 64c00000 at ffa87eec&gt;&gt;), ('__setattr__',\n                    &lt;method-wrapper '__setattr__' of CDLL object at\n                    0xffa87eec&gt;), ('__sizeof__', &lt;built-in method\n                        __sizeof__ of CDLL object at 0xffa87eec&gt;),\n                    ('__str__', &lt;method-wrapper '__str__' of CDLL object\n                     at 0xffa87eec&gt;), ('__subclasshook__', &lt;built-in\n                         method __subclasshook__ of type object at\n                         0xffae8204&gt;), ('__weakref__', None),\n                     ('_func_flags_', 1), ('_func_restype_', &lt;class\n                             'ctypes.c_long'&gt;), ('_handle', 1690304512),\n                     ('_name',\n                      'd:/test_pytest/test_sensor_report/event_report.so')]\n</code></pre>\n"}, {"tags": ["c", "segmentation-fault", "binary-tree"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "edited": false, "score": 1, "creation_date": 1439973895, "post_id": 32090435, "comment_id": 52076053, "body": "Thanks a ton, this was the real problem,I didn&#39;t look into that."}, {"owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "edited": false, "score": 0, "creation_date": 1439973943, "post_id": 32090435, "comment_id": 52076092, "body": "Welcome, Happy Coding. Thanks"}], "tags": [], "owner": {"reputation": 3814, "user_id": 2776146, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/pIofO.jpg?s=128&g=1", "display_name": "TryinHard", "link": "https://stackoverflow.com/users/2776146/tryinhard"}, "is_accepted": true, "score": 4, "last_activity_date": 1439973394, "creation_date": 1439973394, "answer_id": 32090435, "question_id": 32090121, "link": "https://stackoverflow.com/questions/32090121/segmentation-fault-in-code-for-finding-inorder-successor-of-nodes-in-binary-tr/32090435#32090435", "title": "Segmentation fault in code for finding (inorder) successor of nodes in binary tree", "body": "<p>Consider this snippet:</p>\n\n<pre><code>if(xptr!=NULL)          \n    {                               \n        printf(\" %d is the successor of %d\\n\",a-&gt;x,xptr-&gt;x);\n    }\nelse                            \n        printf(\"%d is the scuccessor of no one\\n\",xptr-&gt;x);\n</code></pre>\n\n<p>whenever the <code>xptr</code> is <code>null</code>, control enters <code>else</code> part and then tries to print <code>xptr-&gt;x</code> which is <strong>de-referencing a null pointer</strong>(<code>null-&gt;x</code>). Hence the segmentation fault.</p>\n\n<p>I think you wrote this by mistake:</p>\n\n<pre><code>printf(\"%d is the successor of no one\\n\",xptr-&gt;x);\n</code></pre>\n\n<p>which in my opinion should be:</p>\n\n<pre><code>printf(\"%d is the successor of no one\\n\",a-&gt;x);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 32090435, "answer_count": 1, "score": 3, "last_activity_date": 1439973935, "creation_date": 1439972378, "last_edit_date": 1439973935, "question_id": 32090121, "link": "https://stackoverflow.com/questions/32090121/segmentation-fault-in-code-for-finding-inorder-successor-of-nodes-in-binary-tr", "title": "Segmentation fault in code for finding (inorder) successor of nodes in binary tree", "body": "<p>I was trying to find/print the inorder successor of each node in a binary tree but the compiler is giving me <strong>segmentation fault</strong> as the result.</p>\n\n<p>Here is the structure:-</p>\n\n<pre><code>struct node\n{\n    int x;\n    struct node *left;\n    struct node *right;\n};\n</code></pre>\n\n<p><strong>Initial condition:</strong> </p>\n\n<blockquote>\n  <p>I've passed root of the tree as <code>a</code> (in <code>succ()</code>) and <code>NULL</code> pointer as <code>b</code>.</p>\n</blockquote>\n\n<p>Here is my code for printing/finding the successor:</p>\n\n<pre><code>struct node *(succ(struct node *a,struct node *b))\n{\n    struct node *xptr;\n    xptr=b;                                                                     \n    if(a!=NULL) \n    {                   \n        xptr=succ(a-&gt;left,xptr);\n        if(xptr!=NULL)          \n        {                               \n            printf(\" %d is the successor of %d\\n\",a-&gt;x,xptr-&gt;x);\n        }\n        else                            \n            printf(\"%d is the successor of no one\\n\",xptr-&gt;x);\n        xptr=a;                         \n        if(xptr-&gt;right==NULL)\n        {                       \n            return xptr;        \n        }                               \n        xptr=succ(a-&gt;right,xptr);               \n        return xptr;                    \n    }\n    else                        \n        return xptr; \n}\n</code></pre>\n\n<p>I've tested the rest of the code (building the tree) and it is working fine.</p>\n"}, {"tags": ["python", "c++", "c", "arrays", "function"], "comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 2, "creation_date": 1439972486, "post_id": 32090089, "comment_id": 52075206, "body": "Usually you&#39;d pass a struct containing the arguments.  You could pass a tuple I suppose (more idiomatic for C++ but still not quite there yet in my opinion)."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 4, "creation_date": 1439972693, "post_id": 32090089, "comment_id": 52075334, "body": "Specify the language, the seemingly same question are actually quite different for different languages."}, {"owner": {"reputation": 2935, "user_id": 3398583, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rzlZK.png?s=128&g=1", "display_name": "muddyfish", "link": "https://stackoverflow.com/users/3398583/muddyfish"}, "edited": false, "score": 0, "creation_date": 1439972695, "post_id": 32090089, "comment_id": 52075337, "body": "Pass in a tuple or a dict or your own custom object"}, {"owner": {"reputation": 92, "user_id": 3065863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/94N6G.jpg?s=128&g=1", "display_name": "bgeschka", "link": "https://stackoverflow.com/users/3065863/bgeschka"}, "edited": false, "score": 0, "creation_date": 1439972742, "post_id": 32090089, "comment_id": 52075367, "body": "Passing a reference to a struct or an array would be the most efficient way of passing multiple arguments, as well as changing them in place."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1439973267, "post_id": 32090089, "comment_id": 52075692, "body": "@Dave: array requires that all parameters have same type. <code>struct</code> doesn&#39;t have this restriction."}, {"owner": {"reputation": 455, "user_id": 3021368, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9caec852b9148541e98d6e8bdc52ac25?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/3021368/dave"}, "edited": false, "score": 0, "creation_date": 1439991797, "post_id": 32090089, "comment_id": 52088951, "body": "Thanks all for your rapid responses &amp; clear explanations. All upvoted &amp; marked  &quot;Answered&quot;. BW. Dave"}], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 2422765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f13ae5bbbd22da66b486e4697a6775?s=128&d=identicon&r=PG", "display_name": "Joyas", "link": "https://stackoverflow.com/users/2422765/joyas"}, "is_accepted": false, "score": 0, "last_activity_date": 1439973411, "creation_date": 1439973411, "answer_id": 32090442, "question_id": 32090089, "link": "https://stackoverflow.com/questions/32090089/most-efficient-way-to-pass-multiple-arguments-to-a-function/32090442#32090442", "title": "Most efficient way to pass multiple arguments to a function?", "body": "<p>It will obviously depend on what you want to do, because each of the containers has a different purpose. </p>\n\n<p>For sure, in term of processing speed and memory, you should use a pointer or a reference to a container (Structure, class, array, tuple...), in order to not copy all the data but just the address of the container.</p>\n\n<p>However, you must not create a structure, or put all your variables in the same container just in order to give them as a parameter of a function. All the variables that you will put on the data structure should be related.</p>\n\n<p>In the example that you gave, there are multiple variable of different types. That is why a structure is preferred, because an array requires that all parameters have the same type. In python you could use <a href=\"https://docs.python.org/2/library/collections.html#collections.namedtuple\" rel=\"nofollow\">named tuple</a> in order to store different variable.</p>\n"}, {"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1439973752, "creation_date": 1439973752, "answer_id": 32090555, "question_id": 32090089, "link": "https://stackoverflow.com/questions/32090089/most-efficient-way-to-pass-multiple-arguments-to-a-function/32090555#32090555", "title": "Most efficient way to pass multiple arguments to a function?", "body": "<p>All of this depends on the target system and its calling convention for functions. This answer applies to C and C++ only.</p>\n\n<p>Generally, the use of file scope variables will usually be the fastest possible. In such cases, the variable should never be declared as global (accessible throughout the whole project), but as static (accessible by the local file only). </p>\n\n<p>Still, such static file scope variables should be avoided for several reasons: they can make the code harder to read and maintain, indisciplined use may lead to \"spaghetti code\", they will create re-entrancy issues and they add some extra identifiers to the file scope namespace.</p>\n\n<p>It should be noted, that in case the number of parameters are limited, that keeping them as separate parameters might increase performance, as the compiler may then store some of them in CPU registers instead of storing them on the stack. CPU registers are the fastest way of passing parameters to a function. How this works is very system-specific. However, writing your program in such a manner that you hope to get the parameters passed through CPU registers, is pre-mature optimization in most cases.</p>\n\n<p>The best, de facto way of passing multiple arguments is indeed to create a custom struct (or C++ class) containing all of the arguments. This structure is then passed by reference to the function. Try to make it so that the struct contains only variables related to each other. Consider putting variables that are not related to each other, or special just for one given function, in a separate parameter. Good program design supersedes efficiency in most cases.</p>\n\n<p>The reason why a struct/class is preferable instead of an array, is simply because the variables together form a unique type, but also since they will likely have different types compared to each other. Making an array of variables that all have different types doesn't make any sense.</p>\n\n<p>And in C++, a class offers other advantages over an array, such as constructors and destructors, custom assignment operators etc.</p>\n"}], "owner": {"reputation": 455, "user_id": 3021368, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9caec852b9148541e98d6e8bdc52ac25?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/3021368/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 0, "accepted_answer_id": 32090555, "answer_count": 2, "score": 3, "last_activity_date": 1439973752, "creation_date": 1439972314, "last_edit_date": 1495541173, "question_id": 32090089, "link": "https://stackoverflow.com/questions/32090089/most-efficient-way-to-pass-multiple-arguments-to-a-function", "title": "Most efficient way to pass multiple arguments to a function?", "body": "<p>What is the most efficient (in terms of processing speed and memory utilisation) method for passing a large number of user-input variables as arguments to a function, and for returning multiple results?</p>\n\n<p>A long string of arguments and return values each time I call the function - e.g. (a,b,c,d,e,f,g) = MyFunction(a,b,c,d,e,f,g) - seems inelegant, and I'm guessing is also inefficient; especially if I have to call the function repeatedly or recursively.</p>\n\n<p>However defining the whole list of variables as Global outside of the function also is ugly, and carries the danger of variable names being inadvertently assigned to several different variables as my program grows.</p>\n\n<p>I've tried putting all the variables into a single array or list and passed that to the function as a single argument, as this seems neater.\nAm I correct in thinking that this is also more efficient, even for huge arrays, since it is only the pointer to the start of the array that is passed to the function each time, not the whole array itself? \nIf arrays are the best method for passing a large number of variables to/from a function, at what point does this efficiency saving kick in - e.g. is it better to pass a string of arguments if the number of arguments is less than 5, but use an array or list if 5 or more arguments are required?</p>\n\n<p>A previous discussion on StackExchange:\n<a href=\"https://stackoverflow.com/questions/24952190/elegant-way-to-pass-multiple-arguments-to-a-function\">Elegant way to pass multiple arguments to a function</a>\nhas recommended using struct rather than vectors/arrays for passing multiple arguments. Why is this method preferred to using arrays, and at what point do efficiency savings justify the added complexity of using struct? </p>\n\n<p>Are there any other methods that I should consider which will work in Python or C/C++?\n(e.g. I'm new to object orientated programming, but wonder if this might offer a solution which is specific\n to Python?)</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["c", "performance", "debugging", "microcontroller", "multitasking"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439973765, "post_id": 32090024, "comment_id": 52075982, "body": "Sounds like a real mess - it also sounds like the company you work at doesn&#39;t have any kind of formal processes for software development, testing, quality control, etc ? Are there no requirements/design documents, test plans, etc ? What does your manager think about all this ?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439974169, "post_id": 32090024, "comment_id": 52076264, "body": "How could your program be slower than it was on the old MCU? That doesn&#39;t make any sense and suggests a poor choice of MCU and/or clock. Out of curiousity, which was the old MCU and which one did you port to?"}, {"owner": {"reputation": 1, "user_id": 3239944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eo6QN.jpg?s=128&g=1", "display_name": "Ayanimea", "link": "https://stackoverflow.com/users/3239944/ayanimea"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439977097, "post_id": 32090024, "comment_id": 52078334, "body": "@Paul R: nice guess. There is very few development process. Computing is not their core work and they basically do not care about it. The IT team manager disagrees with this philosophy but its management does not want to spend money on &quot;non-productive matters&quot; even if they got warned many times that it will cost them more in the end. The only documentation they agrees with is functional one - the one that will explain how the software should interact with the chillers&#39; components. For the purely technical information... Well, there is people&#39;s memory..."}, {"owner": {"reputation": 1, "user_id": 3239944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eo6QN.jpg?s=128&g=1", "display_name": "Ayanimea", "link": "https://stackoverflow.com/users/3239944/ayanimea"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1439977740, "post_id": 32090024, "comment_id": 52078766, "body": "@Lundin: Wrong choice of MCU, in fact. They used a customed 16-bits microcontroller with 1GB flash memory. Now, they use a 32-bits SAIA Burgess MCU, with a 8MB flash memory. The memory is just not enough for the program&#39;s data so a routine provided by SAIA compresses frequently the files. The program being quite slow - or the tasks badly scheduled - it seems to me that there is some kind of collision between the SAIA&#39;s compressing task and the programs&#39; tasks."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439978309, "post_id": 32090024, "comment_id": 52079206, "body": "Commiserations - sounds like an unpleasant work culture in which to be a software engineer - if you can&#39;t get them to wake up to the long-term consequences of slapdash software development then it might be a good idea to start looking for another job..."}], "owner": {"reputation": 1, "user_id": 3239944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eo6QN.jpg?s=128&g=1", "display_name": "Ayanimea", "link": "https://stackoverflow.com/users/3239944/ayanimea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439972108, "creation_date": 1439972108, "question_id": 32090024, "link": "https://stackoverflow.com/questions/32090024/i-have-a-lack-of-performance-in-a-multitask-c-program-running-on-a-micro-control", "title": "I have a lack of performance in a multitask C program running on a micro-controller. How can I find its source?", "body": "<p>I am working on a C-program that runs on a 32bit microcontroller. This program has been written 10 years ago by functional specialists for another architecture and I do not know well how it should behave (its made to manage a chiller and I have very few notions of thermodynamics and there is nearly no documentation about how the code is structured). My work was to migrate it on the new architecture and I am almost done. Actually, I am beginning to validate my development. And now, I am worried because, if the core function of the program seems to work more or less, it seems very slow to me and it also generated many HMI errors (which I know is probably due to the lack of performance).</p>\n\n<p>Knowing that I migrated my code quite blindly and do not master its internal logics, I wondered how I can confirm my belief and improve the performances.</p>\n\n<p>About its structure, it is a multitask program - something like 30 tasks are potentially running, the majority are scheduled periodically, some are scheduled only when conditions are met and some are meant to be stopped after a few runs.\nIt includes also reading and writing in a flash drive that is known to be very small - maybe too small to meet the program's requirements, and network communications (which seems to be quite OK to me).</p>\n\n<p>Do you have strategies in mind that would help me find my issue? Ideas of how I could investigate in such a mess?</p>\n\n<p>I know its is a broad question, and I am not sure it meets Stack Overflow requirements. If it does not, I will gladly accept any explanation of what I did wrong and how I can write a better question.</p>\n\n<p>Regards.</p>\n"}, {"tags": ["c++", "c", "gcc", "string.h", "cl"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439972080, "post_id": 32089980, "comment_id": 52074957, "body": "Do you have <code>#include &lt;string.h&gt;</code> in your source file ?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1439972142, "post_id": 32089980, "comment_id": 52074998, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/24850479/memcpy-was-not-declared-in-this-scope\">\u2018memcpy\u2019 was not declared in this scope</a>"}, {"owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1439973110, "post_id": 32089980, "comment_id": 52075599, "body": "No, it is not included in the source file. So, this is the question, it is possible to force it via makefile?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 2, "creation_date": 1439973266, "post_id": 32089980, "comment_id": 52075689, "body": "you should normally just #include all required headers, but some compilers (e.g. Visual Studio) all you to take a lazy approach (stdafx.h) - there may be a way to do this with gcc (?) but it&#39;s really the wrong solution - just add the required #includes."}], "answers": [{"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": true, "score": 0, "last_activity_date": 1440097802, "last_edit_date": 1440097802, "creation_date": 1440096857, "answer_id": 32126153, "question_id": 32089980, "link": "https://stackoverflow.com/questions/32089980/memcpy-was-not-declared-in-this-scope-when-using-gcc-compiler/32126153#32126153", "title": "\u2018memcpy\u2019 was not declared in this scope when using gcc compiler", "body": "<p>The correct way would be to add these includes to the source files where you use methods which are defined in them.\nBut if you insist to include it through the makefile, you can use <strong>force include</strong>.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/8c5ztk84.aspx\" rel=\"nofollow\">Visual studio link.</a></p>\n\n<blockquote>\n  <p>To set this compiler option in the Visual Studio development\n  environment Open the project's Property Pages dialog box. </p>\n  \n  <p>Open Project Property Pages. </p>\n  \n  <p>Click the C/C++ folder. </p>\n  \n  <p>Click the Advanced property page. </p>\n  \n  <p>Modify the Force Includes property.</p>\n</blockquote>\n\n<p>or use <code>-include path_to_the_header</code> for <a href=\"http://linux.die.net/man/1/gcc\" rel=\"nofollow\">gcc</a></p>\n\n<p>Just add this option to the compilation command line. Good luck.</p>\n"}], "owner": {"reputation": 729, "user_id": 5135400, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/340af7d7f56355c39b56f926cae83c0d?s=128&d=identicon&r=PG&f=1", "display_name": "JohnDoe", "link": "https://stackoverflow.com/users/5135400/johndoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2818, "favorite_count": 0, "accepted_answer_id": 32126153, "answer_count": 1, "score": -2, "last_activity_date": 1440097802, "creation_date": 1439971972, "last_edit_date": 1439972168, "question_id": 32089980, "link": "https://stackoverflow.com/questions/32089980/memcpy-was-not-declared-in-this-scope-when-using-gcc-compiler", "title": "\u2018memcpy\u2019 was not declared in this scope when using gcc compiler", "body": "<p>Actually I'm trying to compile a c/c++ project with mingw. The same project is actually compiled with visual studio compiler. For this purpose, I have written a makefile and everything works so far.</p>\n\n<p>During compiling I get error regarding functions which are declared withing string.h and stdio.h like memcpy() , printf()..., with following error:</p>\n\n<pre><code>error: 'memcpy' was not declared in this scope\n</code></pre>\n\n<p>That's  because the compiler didn't find the functions. When compiling within visual studio, this error didn't appear, logically, because of compiler include paths like:</p>\n\n<pre><code>c:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\include\\\n</code></pre>\n\n<p>My question now is:\nWhat should I do in my makefile to tell the compiler to use the \"string.h\" and \"stdio.h\" functions from the mingw. I tried to put the include path in the makefile, like:</p>\n\n<pre><code> INCLUDE_DIRS =\\\n C:\\MinGW\\include\n</code></pre>\n\n<p>but it has no effect. \nAnd also, there is a difference between the string.h and stdio.h from visual studio and string.h and stdio.h used by gcc. Can this be a problem?</p>\n"}, {"tags": ["c", "arrays", "matlab", "hex"], "comments": [{"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 1, "creation_date": 1439969728, "post_id": 32089100, "comment_id": 52073529, "body": "Do you want to extract the values from C source code/header files?"}, {"owner": {"reputation": 165, "user_id": 1029956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9944d037a4b86fd14baf4f86e92701?s=128&d=identicon&r=PG", "display_name": "Abu Bakar", "link": "https://stackoverflow.com/users/1029956/abu-bakar"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1439969948, "post_id": 32089100, "comment_id": 52073657, "body": "@KlasLindb&#228;ck Actually I have an audio clip given as c-code for a microcontroller. I needed to perform signal processing on it in Matlab. Later I might need to do the reverse too, i.e. conver matlab vector to C-Array."}, {"owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1439970665, "post_id": 32089100, "comment_id": 52074074, "body": "Is it a one-off or do you need to do this many times?"}, {"owner": {"reputation": 165, "user_id": 1029956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9944d037a4b86fd14baf4f86e92701?s=128&d=identicon&r=PG", "display_name": "Abu Bakar", "link": "https://stackoverflow.com/users/1029956/abu-bakar"}, "reply_to_user": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1439972081, "post_id": 32089100, "comment_id": 52074960, "body": "At present its one time."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439986747, "post_id": 32089100, "comment_id": 52085042, "body": "If you have source-code, how is the question related to &quot;embedded&quot;? That is a simple file-conversion on the host! Use Python to convert the file. Iif required only once, just strip off the C-stuff, leaving the comma-seperated values, then feed to the Python program."}, {"owner": {"reputation": 165, "user_id": 1029956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9944d037a4b86fd14baf4f86e92701?s=128&d=identicon&r=PG", "display_name": "Abu Bakar", "link": "https://stackoverflow.com/users/1029956/abu-bakar"}, "edited": false, "score": 0, "creation_date": 1440063699, "post_id": 32089100, "comment_id": 52122349, "body": "As embedded development platforms are not supposed to handle data files on hard disk, I wanted to do all the conversions inside Matlab."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 1029956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9944d037a4b86fd14baf4f86e92701?s=128&d=identicon&r=PG", "display_name": "Abu Bakar", "link": "https://stackoverflow.com/users/1029956/abu-bakar"}, "edited": false, "score": 0, "creation_date": 1439971927, "post_id": 32089856, "comment_id": 52074856, "body": "Thanks for your help. Perhaps you missed later part of my post. Now I have to search how uVision can write to a text file or search a small kind enough c-compiler :)"}], "tags": [], "owner": {"reputation": 32098, "user_id": 646887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YJ0Ye.jpg?s=128&g=1", "display_name": "Klas Lindb&#228;ck", "link": "https://stackoverflow.com/users/646887/klas-lindb%c3%a4ck"}, "is_accepted": false, "score": 1, "last_activity_date": 1439973250, "last_edit_date": 1439973250, "creation_date": 1439971584, "answer_id": 32089856, "question_id": 32089100, "link": "https://stackoverflow.com/questions/32089100/convert-hexadecimal-c-array-to-matlab-vector/32089856#32089856", "title": "Convert Hexadecimal C Array to Matlab Vector", "body": "<p>Copy the code that defines the array to a file called \"clip.h\".</p>\n\n<p>Write a small c program that <code>#include \"clip.h\"</code> and use a simple loop to write the data in the desired format. Run the program on your desktop computer. It could look something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n#include \"clip.h\"\n#define NUMBERS_PER_LINE 20\n\nint main(void) {\n    int i;\n    int sample_length = (sizeof AUDIO_SAMPLE)/(sizeof AUDIO_SAMPLE[0]);\n\n    printf(\"AUDIO_SAMPLE = [ \");\n    for (i=0; i &lt; sample_length; i++) {\n        printf(\"%\" PRIu16 PRId16, AUDIO_SAMPLE[i]);  // Use the format specifier for uint16_t.\n        if (i % NUMBERS_PER_LINE == NUMBERS_PER_LINE - 1) {\n            // Insert line continuation mark\n            printf(\" ...\\n  \");\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The program will write the matlab code on stdout, so you need to redirect it to the desired file.</p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 1029956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9944d037a4b86fd14baf4f86e92701?s=128&d=identicon&r=PG", "display_name": "Abu Bakar", "link": "https://stackoverflow.com/users/1029956/abu-bakar"}, "is_accepted": true, "score": 0, "last_activity_date": 1440144081, "creation_date": 1440144081, "answer_id": 32135263, "question_id": 32089100, "link": "https://stackoverflow.com/questions/32089100/convert-hexadecimal-c-array-to-matlab-vector/32135263#32135263", "title": "Convert Hexadecimal C Array to Matlab Vector", "body": "<p>It proved tougher than I thought.</p>\n\n<p><strong>Contents of the text file <em>audio.c</em></strong></p>\n\n<pre><code>4952, 4646, 0x4f6e, 0xf, 0x4157, 0x4556, 0x6d66, 0x2074, 0x12, 0, 0x1, \n0x2, 0xbb80, 0, 0xee00, 0x2, 0x4, 0x10, 0, 0x6166, 0x7463, 0x4, \n0, 0xd3cf, 0x3, 0x6164, 0x6174, 0x4f3c, 0xf, 0, 0, 0, 0, \n0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, \n</code></pre>\n\n<p>The given file has 11 values in each line. Here follows the MATLAB code to convert HEX values to decimal numbers:</p>\n\n<pre><code>fp = fopen('audio.c', 'rt');\nC = textscan(fp, '%s', 'CommentStyle', '#', 'Delimiter', '');\nfclose(fp);\n\nC = regexp(C{:}, '\\w+', 'match');\nC = cellfun(@(x)strrep(x,'0x',''), C, 'UniformOutput', false);\nC = cellfun(@(x)hex2dec(x), C, 'UniformOutput', false);\nresult=cell2mat(C)'\nallOneString = sprintf('%d, ' , result)\n</code></pre>\n\n<p>Finally I have string of decimal values separated by comma as follows:</p>\n\n<pre><code>18770, 17990, 20334, 15, 16727, 17750, 28006, 8308, 18, 0, 1, 2, 48000, 0, 60928, 2, 4, 16, 0, 24934, 29795, 4, 0, 54223, 3, 24932, 24948, 20284, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0\n</code></pre>\n\n<p>Of course previous posts on SO were of immense help :)</p>\n"}], "owner": {"reputation": 165, "user_id": 1029956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb9944d037a4b86fd14baf4f86e92701?s=128&d=identicon&r=PG", "display_name": "Abu Bakar", "link": "https://stackoverflow.com/users/1029956/abu-bakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 32135263, "answer_count": 2, "score": 1, "last_activity_date": 1440144081, "creation_date": 1439969341, "last_edit_date": 1439986775, "question_id": 32089100, "link": "https://stackoverflow.com/questions/32089100/convert-hexadecimal-c-array-to-matlab-vector", "title": "Convert Hexadecimal C Array to Matlab Vector", "body": "<p>I am looking for a simple way to convert from c-code hex array to matlab</p>\n\n<p><strong>Available C-Code Format:</strong>\nconst uint16_t AUDIO_SAMPLE[] = {0x4952, 0x4646, 0x4f6e, 0xf, 0x4157, 0x4556, 0x6d66, 0x2074, 0x12, 0, 0x1}</p>\n\n<p><strong>Required Matlab Format:</strong>\nAUDIO_SAMPLE = [18770 17990 20334 15 16727 17750 28006 8308 18 0 1]</p>\n\n<p>Though it is simple to convert for small numbers, I have to convert a very big array. I am using embedded platform so the numbers can not be written to a simple text file for later read in matlab. Its preferable to write the conversion code in matlab.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Till now able to get rid of <strong>0x</strong>. Failed to get a vector after using eval function as given below:</p>\n\n<pre><code>a='0x4952, 0x4646, 0x4f6e'; %Given\nb = strrep(a, '0x', '') ; %Returns 4952, 4646, 4f6e\nx = eval( [ '[', b, ']' ] ) %\n</code></pre>\n"}, {"tags": ["c", "linux"], "answers": [{"tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 5, "last_activity_date": 1439969322, "creation_date": 1439969322, "answer_id": 32089092, "question_id": 32089042, "link": "https://stackoverflow.com/questions/32089042/how-to-seperate-integer-values-using-sscanf-in-c/32089092#32089092", "title": "How to seperate integer values using sscanf in c?", "body": "<p>You left out the <code>%</code> symbols and some spaces - try:</p>\n\n<pre><code>sscanf(data,\"User %d%%, System %d%%, IOW %d%%, IRQ %d%%\",&amp;user,&amp;sys,&amp;iow,&amp;irq);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 655, "user_id": 3616601, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d9dbe1da7416f8fa9b0cf1d0974269e7?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom", "link": "https://stackoverflow.com/users/3616601/phantom"}, "is_accepted": false, "score": -2, "last_activity_date": 1439969452, "creation_date": 1439969452, "answer_id": 32089137, "question_id": 32089042, "link": "https://stackoverflow.com/questions/32089042/how-to-seperate-integer-values-using-sscanf-in-c/32089137#32089137", "title": "How to seperate integer values using sscanf in c?", "body": "<p>You have wrong output because you input string is like:<br/>\n<code>User 6%, System 18%, IOW 0%, IRQ 0%</code></p>\n\n<p>But you try to scan a string like:<br/>\n<code>User 6, System 18, IOW 0, IRQ 0</code></p>\n"}], "owner": {"reputation": 155, "user_id": 5163650, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/8b8036ef6b57e4407c5ace910565d1fd?s=128&d=identicon&r=PG&f=1", "display_name": "Bharat Jain", "link": "https://stackoverflow.com/users/5163650/bharat-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 32089092, "answer_count": 2, "score": 0, "last_activity_date": 1439969452, "creation_date": 1439969178, "question_id": 32089042, "link": "https://stackoverflow.com/questions/32089042/how-to-seperate-integer-values-using-sscanf-in-c", "title": "How to seperate integer values using sscanf in c?", "body": "<p>I have a string which captures details stored in <code>data</code></p>\n\n<p><code>User 6%, System 18%, IOW 0%, IRQ 0%</code></p>\n\n<p>What i am doing is</p>\n\n<p><code>sscanf(data,\"User %d,System %d,IOW %d,IRQ %d\",&amp;user,&amp;sys,&amp;iow,&amp;irq);</code></p>\n\n<p>I am getting wrong output . why ?\nIs is like i am missing something ?</p>\n"}, {"tags": ["c", "windows", "clock", "system-clock"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 4, "last_activity_date": 1439969164, "creation_date": 1439969164, "answer_id": 32089037, "question_id": 32088980, "link": "https://stackoverflow.com/questions/32088980/c-why-clocks-per-sec-is-printing-1000-when-my-processor-speed-is-3-10ghz/32089037#32089037", "title": "C: Why CLOCKS_PER_SEC is printing 1000 when my processor speed is 3.10GHz", "body": "<blockquote>\n  <p>Clock ticks are units of time of a constant but system-specific length, as those returned by function <code>clock</code>.</p>\n</blockquote>\n\n<p>It has nothing to do with the processor speed.</p>\n"}, {"tags": [], "owner": {"reputation": 6138, "user_id": 1342402, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7b963a5fcf4e1eb56b3310e3528a22cd?s=128&d=identicon&r=PG&f=1", "display_name": "maazza", "link": "https://stackoverflow.com/users/1342402/maazza"}, "is_accepted": false, "score": 1, "last_activity_date": 1439969272, "last_edit_date": 1495535200, "creation_date": 1439969272, "answer_id": 32089076, "question_id": 32088980, "link": "https://stackoverflow.com/questions/32088980/c-why-clocks-per-sec-is-printing-1000-when-my-processor-speed-is-3-10ghz/32089076#32089076", "title": "C: Why CLOCKS_PER_SEC is printing 1000 when my processor speed is 3.10GHz", "body": "<p>see <a href=\"https://stackoverflow.com/questions/10455905/clocks-per-sec-not-actually-clocks-per-sec\">Why is CLOCKS_PER_SEC not the actual number of clocks per second?</a></p>\n\n<blockquote>\n  <p>POSIX requires that CLOCKS_PER_SEC equals 1000000 independent of the\n  actual resolution.</p>\n</blockquote>\n"}], "owner": {"reputation": 393, "user_id": 5134191, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-qvMz8SElRj0/AAAAAAAAAAI/AAAAAAAAALE/y0FFdhThLNI/photo.jpg?sz=128", "display_name": "Anurag Chakraborty", "link": "https://stackoverflow.com/users/5134191/anurag-chakraborty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1301, "favorite_count": 0, "accepted_answer_id": 32089037, "answer_count": 2, "score": 1, "last_activity_date": 1439971780, "creation_date": 1439968983, "last_edit_date": 1439971780, "question_id": 32088980, "link": "https://stackoverflow.com/questions/32088980/c-why-clocks-per-sec-is-printing-1000-when-my-processor-speed-is-3-10ghz", "title": "C: Why CLOCKS_PER_SEC is printing 1000 when my processor speed is 3.10GHz", "body": "<p>My PC configuration is</p>\n\n<p>Intel Core i3-2100 CPU @3.10GHz</p>\n\n<p>Windows7 64 bit</p>\n\n<p>But when I'm executing below code why it's printing 1000?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;time.h&gt;\nmain()\n{\n    printf(\"Clock %d\",CLOCKS_PER_SEC);\n    getch();\n}\n</code></pre>\n\n<p>The actual clock speed should be around 3.1x10^12 per sec right?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1439968243, "post_id": 32088698, "comment_id": 52072671, "body": "What is a &quot;ram file&quot;?"}, {"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1439968280, "post_id": 32088698, "comment_id": 52072696, "body": "@user2864740 A file created in ramfs."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1439968297, "post_id": 32088698, "comment_id": 52072705, "body": "So how does it differ from a &quot;normal file&quot;?"}, {"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1439968394, "post_id": 32088698, "comment_id": 52072757, "body": "It doesn&#39;t, it just makes the process less invasive for the function being debugged which is one of the attributes I&#39;m looking in the mechanism."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1439968426, "post_id": 32088698, "comment_id": 52072778, "body": "How is it &#39;less invasive&#39; from a <i>code</i> point of view? Eg. isn&#39;t the question just &quot;How can I write to a file?&quot; - I&#39;m fairly certain that is already covered."}, {"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1439968652, "post_id": 32088698, "comment_id": 52072905, "body": "True, but I&#39;m aiming that the result is simple enough that it can be syntactically  equal for both languages."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1439970220, "post_id": 32088698, "comment_id": 52073820, "body": "Is it a requirement that the data is securely written to the file before &#39;method&#39; returns?"}, {"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1439970567, "post_id": 32088698, "comment_id": 52074008, "body": "@user2864740 No, it is about a way of writing to a file for debug purposes in a context when printing can&#39;t be done. The non invasive part means that the debug code should have as little execution time as possible and should minimally interfere with the method that&#39;s being debugged."}, {"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1439970592, "post_id": 32088698, "comment_id": 52074026, "body": "@MartinJames Nope, it would be great if the content could be buffered and executed less often."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1439971358, "post_id": 32088698, "comment_id": 52074498, "body": "@Alan in that case, is is feasible to copy the data to a malloced struct and queue off the pointer to another thread that handles the, possibly high-latency, file operations?"}, {"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1439971856, "post_id": 32088698, "comment_id": 52074810, "body": "@MartinJames My current belief is that the file operations aren&#39;t high latency (do to the file existing in ram). The multi threaded example would probably work, but I&#39;m exploring the situation for a reusable and hopefully simple copy-paste debugging solution"}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1439970102, "post_id": 32088699, "comment_id": 52073760, "body": "You open the file every time you enter &#39;method&#39;, but never close it?  You are overwriting file descriptors."}, {"owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1439970661, "post_id": 32088699, "comment_id": 52074073, "body": "Isn&#39;t <code>static</code> preventing that? My perspective was that it&#39;s opened only the first time and later the same pointer for <code>rawPcmLog</code> is used every time <code>method</code> is executed."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 2, "creation_date": 1439971489, "post_id": 32088699, "comment_id": 52074592, "body": "As it contains a function call, it will not be optimised away, even if the pointer is static. You should use the fact that a static pointer is initialized to NULL and write <code>static FILE * rawPcmLog; if (rawPcmLog == NULL) rawPcmLog = fopen(&quot;&#47;tmp&#47;rawPcm&quot;,&quot;w&quot;);</code>"}], "tags": [], "owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "is_accepted": true, "score": 0, "last_activity_date": 1439971639, "last_edit_date": 1439971639, "creation_date": 1439968104, "answer_id": 32088699, "question_id": 32088698, "link": "https://stackoverflow.com/questions/32088698/non-invasive-way-for-a-debug-print-into-ram-file/32088699#32088699", "title": "Non invasive way for a debug print into ram file", "body": "<p>The best I've come so far is this. Am open for other answers with a more optimized approach</p>\n\n<pre><code>unsigned int method(short *frame, int length)\n    {\n    static FILE * rawPcmLog; \n    if (rawPcmLog == NULL) rawPcmLog = fopen(\"/tmp/rawPcm\",\"w\"); \n    int i;\n    for (i=0; i&lt;length; i++){\n        fwrite(frame,length, 1,rawPcmLog);\n    }\n    process-frame(short *frame, int length);\n    }\n</code></pre>\n"}], "owner": {"reputation": 12879, "user_id": 1214214, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/mE5HL.png?s=128&g=1", "display_name": "TheMeaningfulEngineer", "link": "https://stackoverflow.com/users/1214214/themeaningfulengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 32088699, "answer_count": 1, "score": 0, "last_activity_date": 1439971639, "creation_date": 1439968104, "last_edit_date": 1439970735, "question_id": 32088698, "link": "https://stackoverflow.com/questions/32088698/non-invasive-way-for-a-debug-print-into-ram-file", "title": "Non invasive way for a debug print into ram file", "body": "<p>I'm looking for a non invasive way of writing a local variable into a file to use it as a debugging mechanism. The non invasive part means that the debug code should have as little execution time as possible and should minimally interfere with the method that's being debugged.</p>\n\n<p>Example:</p>\n\n<p>Somewhere deep inside the code there is a <code>method</code>.</p>\n\n<pre><code>unsigned int method(short *frame, int length)\n    {\n    process-frame(short *frame, int length);\n    }\n</code></pre>\n\n<p>It gets called 100 times a second and I would like to print out the content of <code>frame</code>. Since the process is time sensitive I can't print to the terminal but will print into the file in ram. Am looking for a way to do it inside the function scope.</p>\n"}, {"tags": ["c", "io", "terminal", "stdin", "instant-messaging"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1439967959, "post_id": 32088603, "comment_id": 52072532, "body": "You might want to read about <a href=\"https://en.wikipedia.org/wiki/Ncurses\" rel=\"nofollow noreferrer\">the ncurses library</a>, or about using <a href=\"http://www.termsys.demon.co.uk/vtansi.htm\" rel=\"nofollow noreferrer\">VT100 control codes</a> to put the cursor at the position."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1439976550, "post_id": 32088603, "comment_id": 52077877, "body": "There is no way to do this with pure standard C. C doesn&#39;t even recognize the presence of a terminal or even a computer screen: it is only concerned with input and output streams."}], "answers": [{"tags": [], "owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "is_accepted": true, "score": 1, "last_activity_date": 1439976697, "last_edit_date": 1439976697, "creation_date": 1439973296, "answer_id": 32090407, "question_id": 32088603, "link": "https://stackoverflow.com/questions/32088603/how-to-keep-stdin-at-bottom-the-terminal-in-c/32090407#32090407", "title": "How to keep STDIN at bottom the terminal in C", "body": "<p>The usual way to do this is using <a href=\"http://invisible-island.net/ncurses/\" rel=\"nofollow\">ncurses</a> (any flavor of curses would work), accepting the input in one <em>window</em> and writing the result to <em>another</em>.  Here is a short example:</p>\n\n<pre><code>#include &lt;curses.h&gt;\n\nint\nmain(void)\n{\n    bool done = FALSE;\n    WINDOW *input, *output;\n    char buffer[1024];\n\n    initscr();\n    cbreak();\n    echo();\n    input = newwin(1, COLS, LINES - 1, 0);\n    output = newwin(LINES - 1, COLS, 0, 0);\n    wmove(output, LINES - 2, 0);    /* start at the bottom */\n    scrollok(output, TRUE);\n    while (!done) {\n    mvwprintw(input, 0, 0, \"&gt; \");\n    if (wgetnstr(input, buffer, COLS - 4) != OK) {\n        break;\n    }\n    werase(input);\n    waddch(output, '\\n');   /* result from wgetnstr has no newline */\n    waddstr(output, buffer);\n    wrefresh(output);\n    done = (*buffer == 4);  /* quit on control-D */\n    }\n    endwin();\n    return 0;\n}\n</code></pre>\n\n<p>If you want to learn about VT100 control codes (as distinct from ECMA-48), <a href=\"http://vt100.net/\" rel=\"nofollow\">vt100.net</a> has manuals for some terminals.</p>\n\n<p>Regarding the link <em><a href=\"http://www.termsys.demon.co.uk/vtansi.htm\" rel=\"nofollow\">VT100 control codes</a></em>: that is a source of misinformation, as noted in the ncurses FAQ <em><a href=\"http://invisible-island.net/ncurses/ncurses.faq.html#vt100_color\" rel=\"nofollow\">How do I get color with VT100?</a></em></p>\n"}], "owner": {"reputation": 23, "user_id": 3597376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f53cf4e5229a66add0454da52b4e30?s=128&d=identicon&r=PG&f=1", "display_name": "gab64", "link": "https://stackoverflow.com/users/3597376/gab64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 1, "accepted_answer_id": 32090407, "answer_count": 1, "score": 1, "last_activity_date": 1439976697, "creation_date": 1439967782, "last_edit_date": 1592644375, "question_id": 32088603, "link": "https://stackoverflow.com/questions/32088603/how-to-keep-stdin-at-bottom-the-terminal-in-c", "title": "How to keep STDIN at bottom the terminal in C", "body": "<p>I am writing a simple instant messaging client in c. It's currently working well, however if a user is typing and receives a message while typing, the message displays AFTER the text, then the user continues on the line below. It would look like this:</p>\n<blockquote>\n<p>USER: I am trying to ty...FRIEND: Hello</p>\n<p>pe a message.  &lt;--- (the end of the users message)</p>\n</blockquote>\n<p>My idea is:</p>\n<p>Somehow force the current data from stdin and load it into a buffer, then use a \\r before printing FRIEND: to erase what is on the line, then print from the buffer. Does anyone have any concrete examples of how to accomplish this task?</p>\n<p>The final result should be</p>\n<blockquote>\n<p>FRIEND:  Hello</p>\n<p>USER: I am trying to type a message</p>\n</blockquote>\n<p>The user started typing the message, received a message, the stdin line was shifted downwards, then the user completed their message.</p>\n<p>Note: I am running GNOME Terminal 3.6.2 on the newest version of Linux Mint</p>\n"}, {"tags": ["c", "language-lawyer", "c99", "c11", "variable-length-array"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1439966890, "post_id": 32088226, "comment_id": 52071982, "body": "But the operand type as shown is an <code>int</code>. No?"}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1439967036, "post_id": 32088226, "comment_id": 52072061, "body": "I think what the statement means is that if you do <code>sizeof(a)</code> then <code>a[r]</code> is evaluated. That is, the actual value of <code>r</code> needs to be obtained. But I&#39;m no language expert so please correct away if that&#39;s not what it means."}, {"owner": {"reputation": 1298, "user_id": 143279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/I0Npe.jpg?s=128&g=1", "display_name": "bleakgadfly", "link": "https://stackoverflow.com/users/143279/bleakgadfly"}, "edited": false, "score": 0, "creation_date": 1439967515, "post_id": 32088226, "comment_id": 52072313, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19785518/is-dereferencing-null-pointer-valid-in-sizeof-operation\">Is dereferencing null pointer valid in sizeof operation</a>"}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "reply_to_user": {"reputation": 1298, "user_id": 143279, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/I0Npe.jpg?s=128&g=1", "display_name": "bleakgadfly", "link": "https://stackoverflow.com/users/143279/bleakgadfly"}, "edited": false, "score": 0, "creation_date": 1439967743, "post_id": 32088226, "comment_id": 52072431, "body": "@bleakgadfly Not a duplicate because it doesn&#39;t address VLAs directly."}, {"owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "edited": false, "score": 0, "creation_date": 1530047772, "post_id": 32088226, "comment_id": 89093990, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/14995870/behavior-of-sizeof-on-variable-length-arrays-c-only\">Behavior of sizeof on variable length arrays (C only)</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439969489, "post_id": 32088472, "comment_id": 52073373, "body": "Do you think it is possible to cause ub, with sizeof and VLAs?"}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1439967406, "creation_date": 1439967406, "answer_id": 32088472, "question_id": 32088226, "link": "https://stackoverflow.com/questions/32088226/sizeof-evaluation-of-a-variable-length-array/32088472#32088472", "title": "sizeof evaluation of a variable-length array", "body": "<p><code>a</code> itself is a VLA. However, <code>a[0]-&gt;i</code> is not, its type is <code>int</code>.</p>\n\n<p>So <code>sizeof( a[0]-&gt;i )</code> is simply <code>sizeof(int)</code>. <code>sizeof</code> here is a compile time operator, <code>a[0]-&gt;i</code> is not evaluated, the code is defined.</p>\n"}, {"comments": [{"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439968350, "post_id": 32088495, "comment_id": 52072735, "body": "Do you think it is possible to cause ub, with sizeof and VLAs?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439970885, "post_id": 32088495, "comment_id": 52074195, "body": "@this, you can&#39;t &quot;cause&quot; UB, undefined behavior is not behavior, but by definition the absence of it. If you are asking if the expression that is evaluated can be erroneous, yes, sure. Just take <code>p</code> to be a pointer to a VLA and do <code>sizeof *p</code>. If <code>p</code> is <code>0</code> this will crash your program."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439971297, "post_id": 32088495, "comment_id": 52074453, "body": "I already tried that several times but the program worked. Maybe I should as a new question. I hope you don&#39;t mind if I make a link to this answer?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439971562, "post_id": 32088495, "comment_id": 52074636, "body": "I should have said &quot;may crash your program&quot;. The problem with erroneous code that has no defined behavior is that is can do anything, even appear to work. You are on your own, then."}, {"owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439971678, "post_id": 32088495, "comment_id": 52074695, "body": "I know that, I didn&#39;t say that the code is defined. I also know what ub is. Still it is strange, since clearly sizeof in that case is not evaluated the same way as a plain pointer dereference which will crash. So why the difference."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "edited": false, "score": 0, "creation_date": 1439972335, "post_id": 32088495, "comment_id": 52075120, "body": "Because standard only distinguishes between expressions that are evaluated for their type at compile time and expressions that are evaluated for their value at run time. Since here the run time version is needed, you are in the second case and all requirements for the expression apply. So the standard doesn&#39;t define a behavior if <code>p</code> is <code>0</code> or is uninitialized. Now your compiler provider <i>may</i> define a behavior for that situation, because it may deduce the size from the definition of <code>p</code>. It could also try to deference <code>p</code> and look there. You&#39;d have to check if they document such a thing."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440009323, "post_id": 32088495, "comment_id": 52100555, "body": "The Standard could have eliminated any requirement to have <code>sizeof</code> perform any action at run-time if it had forbid the <i>definition</i> of variable-size array types within a <code>sizeof</code> expression.  Given <code>int x[sz];</code>, the expression <code>sizeof x</code> would not be a compile-time expression, but would yield the value of <code>sz</code> with which <code>x</code> was created (the compiler may or may not need to create a hidden variable for that, depending upon whether <code>sz</code> could be modified later)."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440012581, "post_id": 32088495, "comment_id": 52102566, "body": "@supercat, the C standard doesn&#39;t have the concept of &quot;action&quot;. <i>yield the value <code>sz</code></i> and <i>evaluate a hidden variable</i> is simply a run time evaluation. And as you see, things would quickly become lengthy to describe and tricky to implement. Usually the C committee feels that they shouldn&#39;t impose particular implementations and that there should be enough slackness for implementors to make things simple and efficient."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440012999, "post_id": 32088495, "comment_id": 52102824, "body": "@JensGustedt: The act of reading a hidden variable whose value cannot change within its lifetime cannot have side-effects, and thus a <code>sizeof</code> which does nothing except compute a linear function of such values would not have side-effects.  As it is, given <code>int x[sz];</code>, evaluation of <code>sizeof x[f()]</code>; could evaluate <code>f</code> even though there would be no defined means by which <code>f</code> could do anything that would affect the value computed by <code>sizeof</code>.  A rule which simply said that &quot;sizeof&quot; will never evaluate the expression would be simpler than one which allows the expression to be evaluated with VLAs."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440013350, "post_id": 32088495, "comment_id": 52103025, "body": "@supercat, <i><code>sizeof</code> will never evaluate the expression</i> here is simply not possible within the existing terminology. I think what you mean is <i>the evaluation of an expression in <code>sizeof</code> should never have side effects</i>. This sounds completely reasonable, but is more a rule of thumb that everybody should follow, anyhow, not only in <code>sizeof</code>. Anybody who uses <code>++</code> inside complicated expressions (definition of a type!) should be made responsible for his acts."}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 2, "last_activity_date": 1439971146, "last_edit_date": 1439971146, "creation_date": 1439967459, "answer_id": 32088495, "question_id": 32088226, "link": "https://stackoverflow.com/questions/32088226/sizeof-evaluation-of-a-variable-length-array/32088495#32088495", "title": "sizeof evaluation of a variable-length array", "body": "<p>The operand of </p>\n\n<pre><code>sizeof a[0]-&gt;i\n</code></pre>\n\n<p>is not a VLA and is thus not evaluated. Neither would be</p>\n\n<pre><code>sizeof a[0]\n</code></pre>\n\n<p>only constructs like</p>\n\n<pre><code>sizeof a\n</code></pre>\n\n<p>need to evaluate its argument at runtime, because the size of that animal is not known at compile time.</p>\n\n<p><em>Edit:</em> Such an evaluation can be erroneous, of course. If you have</p>\n\n<pre><code>double (*p)[n];\n</code></pre>\n\n<p>so a pointer to a VLA. Then</p>\n\n<pre><code>sizeof *p\n</code></pre>\n\n<p>is a run time expression and erroneous if you didn't initialize <code>p</code> properly.</p>\n"}], "owner": {"reputation": 5077, "user_id": 2327831, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/acb1ec5c15fa33042fa79847c55da18d?s=128&d=identicon&r=PG", "display_name": "this", "link": "https://stackoverflow.com/users/2327831/this"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1439971146, "creation_date": 1439966554, "last_edit_date": 1439967707, "question_id": 32088226, "link": "https://stackoverflow.com/questions/32088226/sizeof-evaluation-of-a-variable-length-array", "title": "sizeof evaluation of a variable-length array", "body": "<p><code>sizeof</code> operand will evaluate the the operand if it is a variable-length array.</p>\n\n<blockquote>\n  <p>6.5.3.4, p2: If the type of the operand is a variable length array type, the operand is evaluated;</p>\n</blockquote>\n\n<p>Yet this code is working, and I'm assuming it is defined:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;assert.h&gt;\n\nstruct test\n{\n    struct test* t;\n    int i;  \n};\n\nint main(void) \n{\n    int r = ( rand() % 100 ) + 1;\n    assert( r &gt; 0 );\n    struct test* a[r];\n    for( size_t i = 0; i &lt; r; i++ )\n    {\n        a[i] = NULL;\n    }\n\n    printf(\"%zu\\n\" , sizeof( a[0]-&gt;i ) );\n    //printf(\"%d\\n\", a[0]-&gt;i ); //this will of course crash the program\n\n    return 0;\n}\n</code></pre>\n\n<ol>\n<li>Is the code defined?</li>\n<li>Is the <code>sizeof</code> operand evaluated?</li>\n<li>Shouldn't evaluation dereference the pointer?</li>\n<li>What is the difference between the first and second <code>printf</code>, given the context?</li>\n</ol>\n\n<p>The program seems to be correct with any amount of additional deferences:</p>\n\n<pre><code>struct other\n{\n    int i;  \n};\n\nstruct test\n{\n    struct other* t; \n};\n\nint main(void) \n{\n    int r = ( rand() % 100 ) + 1;\n    assert( r &gt; 0 );\n    struct test* a[r];\n    for( size_t i = 0; i &lt; r; i++ )\n    {\n        a[i] = NULL;\n    }\n\n    printf(\"%zu\\n\" , sizeof( a[0]-&gt;t-&gt;i ) );\n    //printf(\"%d\\n\", a[0]-&gt;t-&gt;i ); //this will of course crash the program\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "winapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1439974456, "post_id": 32088032, "comment_id": 52076454, "body": "Unrelated to your problem: You should really consider using the <code>FORMAT_MESSAGE_IGNORE_INSERTS</code> flag in your call to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679351.aspx\" rel=\"nofollow noreferrer\">FormatMessage</a>. While you are using custom messages, and can - in theory - make inserts work, I don&#39;t see any provisions in your sample. In the same vein, the <code>FORMAT_MESSAGE_ARGUMENT_ARRAY</code> looks wrong."}], "answers": [{"tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 3, "last_activity_date": 1439967146, "creation_date": 1439967146, "answer_id": 32088400, "question_id": 32088032, "link": "https://stackoverflow.com/questions/32088032/how-to-add-message-to-message-table-with-id-greater-than-0x20000000-bit-29-set/32088400#32088400", "title": "How to add message to message table with ID greater than 0x20000000 (bit 29 set)?", "body": "<p>You need to use the <code>-c</code> argument for <code>mc.exe</code> - this will make it set the \"Customer code flag\" (bit 29) for all message IDs.</p>\n\n<p>The actual message ID value you specify in the message text file must fit in 16 bits (so in the above example, you would just specify <code>MessageId=1</code> and with the -c flag, mc.exe would turn this into <code>0x20000001</code>).</p>\n"}], "owner": {"reputation": 129, "user_id": 1678047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0421367752812f401faa0f37ddb22c59?s=128&d=identicon&r=PG", "display_name": "tongko", "link": "https://stackoverflow.com/users/1678047/tongko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 32088400, "answer_count": 1, "score": 2, "last_activity_date": 1439967146, "creation_date": 1439965808, "question_id": 32088032, "link": "https://stackoverflow.com/questions/32088032/how-to-add-message-to-message-table-with-id-greater-than-0x20000000-bit-29-set", "title": "How to add message to message table with ID greater than 0x20000000 (bit 29 set)?", "body": "<p>I writing Win32 program using C. I'm using message table to keep all custom defined messages as shown in the following fragment:</p>\n\n<pre><code>;#ifndef MESSAGE_H\n;#define MESSAGE_H\n;\n\nMessageIdTypedef = DWORD\n\nSeverityNames=\n    (\n        Success         = 0x0:STATUS_SEVERITY_SUCCESS\n        Informational   = 0x1:STATUS_SEVERITY_INFORMATIONAL\n        Warning         = 0x2:STATUS_SEVERITY_WARNING\n        Error           = 0x3:STATUS_SEVERITY_ERROR\n    )\n\nFacilityNames =\n    (\n        System  =0x0:FACILITY_SYSTEM\n        Runtime =0x2:FACILITY_RUNTIME\n        Stubs   =0x3:FACILITY_STUBS\n        Io      =0x4:FACILITY_IO_ERROR_CODE\n    )\n\nLanguageNames = \n    (\n        English = 0x0409:MSG_EN\n        Chinese = 0x0804:MSG_ZH\n    )\n\nMessageId       = 1\nSymbolicName    = MSG_SUCCESS\nSeverity        = Success\nLanguage        = English\nSuccess\n.\nLanguage        = Chinese\n\u6210\u529f\n.\n\nMessageId       = +1\nSymbolicName    = MSG_OUT_OF_MEM\nLanguage        = English\nOut of memory\n.\nLanguage        = Chinese\n\u5185\u5b58\u4e0d\u8db3\n.\n</code></pre>\n\n<p>In the program I retrieved these messages using <code>FormatMessage()</code> like this:</p>\n\n<pre><code>FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_HMODULE | FORMAT_MESSAGE_ARGUMENT_ARRAY, NULL, dwError, LANG_NEUTRAL, (LPTSTR) &amp;lpszTemp, 0, NULL);\n</code></pre>\n\n<p>Where dwError is the <code>MessageId</code> in message table.\nBut <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms680347%28v=vs.85%29.aspx\" rel=\"nofollow\">MSDN</a> said,</p>\n\n<blockquote>\n  <p>Error codes are 32-bit values (bit 31 is the most significant bit).\n  Bit 29 is reserved for application-defined error codes; no system\n  error code has this bit set. If you define error codes for your\n  application, set this bit to indicate that the error code has been\n  defined by an application and to ensure that the error codes do not\n  conflict with any system-defined error codes.</p>\n</blockquote>\n\n<p>So I tried change the <code>MessageId</code> to starts from 0x20000001, but MC.exe failed me saying</p>\n\n<pre><code>Message.mc(29) : error : Message Id value (20000001) too large\n</code></pre>\n\n<p>My question is, how can I add message into message table with properly defined id (bit 29 set)?</p>\n"}, {"tags": ["c++", "c", "data-structures", "hash"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4961197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21194c22a1eac197301a2cc3af24b347?s=128&d=identicon&r=PG&f=1", "display_name": "\uc591\uc218\ud604", "link": "https://stackoverflow.com/users/4961197/%ec%96%91%ec%88%98%ed%98%84"}, "edited": false, "score": 0, "creation_date": 1439966249, "post_id": 32088095, "comment_id": 52071687, "body": "Then If i want to find paxdiablo in my hash. Do I search for the hash value..? which means there is some space saying paxdiablo == hash value is this right?"}, {"owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "reply_to_user": {"reputation": 11, "user_id": 4961197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21194c22a1eac197301a2cc3af24b347?s=128&d=identicon&r=PG&f=1", "display_name": "\uc591\uc218\ud604", "link": "https://stackoverflow.com/users/4961197/%ec%96%91%ec%88%98%ed%98%84"}, "edited": false, "score": 0, "creation_date": 1439966430, "post_id": 32088095, "comment_id": 52071784, "body": "@\uc591\uc218\ud604, if you want to find <code>paxdiablo</code>, you hash the string to get 42, then go to the #42 bucket and rummage through all the entries until you find it (or not, as the case may be)."}, {"owner": {"reputation": 11, "user_id": 4961197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21194c22a1eac197301a2cc3af24b347?s=128&d=identicon&r=PG&f=1", "display_name": "\uc591\uc218\ud604", "link": "https://stackoverflow.com/users/4961197/%ec%96%91%ec%88%98%ed%98%84"}, "edited": false, "score": 0, "creation_date": 1439967026, "post_id": 32088095, "comment_id": 52072056, "body": "I&#39;m still not sure about the hash value, when I&#39;m searching for paxdiablo. is the hash value paxdiablo then..?"}], "tags": [], "owner": {"reputation": 767708, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "is_accepted": true, "score": 2, "last_activity_date": 1439970374, "last_edit_date": 1439970374, "creation_date": 1439966080, "answer_id": 32088095, "question_id": 32087999, "link": "https://stackoverflow.com/questions/32087999/hash-key-and-value/32088095#32088095", "title": "Hash key and value", "body": "<p>Let's first get some terminology straight since you appear to be confused regarding them<sup>1</sup>.</p>\n\n<p>In hashing, there are really only two things, the item (from footnote, probably your hash value/key) and the hashcode. You pass the input item to a hashing function and get back a hashcode. That's the general case but make sure you've read the footnote - there may be valid reasons for distinguishing between a complete item and the key portion of it.</p>\n\n<p>In terms of why you need the hash value as well as code, let's say, for example, you're keeping a record of all the super-intelligent, handsome people on the planet (along with their dog's names), and you therefore need to add the string <code>paxdiablo:lilly</code>.</p>\n\n<p>So you throw that string into your hashing function and end up with a hashcode of 42 (calculated from just <code>paxdiablo</code>), so that's the bucket where it goes.</p>\n\n<p>However, since the hashing function is almost invariably a many to one operation (many other strings will also hash to 42), there's no way to tell that it's actually <code>paxdiablo</code> in your data structure based on the hashcode alone.</p>\n\n<p>In fact, my arch-nemesis <code>paxangelo</code>, who has a cat called, of all things, <code>fluffybunnykins</code>, is one of the dumbest, ugliest lifeforms you could ever hope not to meet, and also generates a hashcode of 42. So, when it comes to finding out who's in the 42 bucket, how are you going to tell the difference between the two unless the original string is in there?</p>\n\n<p>The hashcode decides which bucket is used for an item, but you still have to actually <em>put</em> the item into the bucket.</p>\n\n<hr>\n\n<p><sup>1</sup> I tried for about ten minutes but I'm <em>still</em> not entirely happy with what I came up with. As best I can tell, you're using:</p>\n\n<ul>\n<li>hash value as the entire item to be stored.</li>\n<li>hash key to be that portion of the hash value used for hashing.</li>\n<li>hash value as the result of the hashing function.</li>\n</ul>\n\n<p>I tend not to distinguish between the first two simply because there's not really anything to gain in my opinion. I generally pass an entire item to a hashing function but you <em>could</em> conceivably engineer a solution that only wants the key part, <em>especially</em> if you wanted to use a hashing function on different record layouts (with the key in a different position).</p>\n"}], "owner": {"reputation": 11, "user_id": 4961197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/21194c22a1eac197301a2cc3af24b347?s=128&d=identicon&r=PG&f=1", "display_name": "\uc591\uc218\ud604", "link": "https://stackoverflow.com/users/4961197/%ec%96%91%ec%88%98%ed%98%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 32088095, "answer_count": 1, "score": -1, "last_activity_date": 1439970374, "creation_date": 1439965698, "last_edit_date": 1439965970, "question_id": 32087999, "link": "https://stackoverflow.com/questions/32087999/hash-key-and-value", "title": "Hash key and value", "body": "<p>I'm curious of why hashing needs both hash key and hash value.</p>\n\n<ol>\n<li><p>If a hash key was an int, hash key is changed in to a hash code which is the index of hashes. However, the hash value is the same as hash key isn't it? So, when I'm using a int for hash keys hash value isn't needed as a parameter (duplicate with hash key).</p></li>\n<li><p>If I have a hash key as a string, hash key is also changed to a hash code. And then, a hash value is some number I want to match with the string?\nOr a pointer for the string?</p></li>\n</ol>\n\n<p>I don't get why hash values are needed.</p>\n"}]