[{"tags": ["c", "multithreading", "pthreads"], "comments": [{"owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461196020, "post_id": 36757064, "comment_id": 61094135, "body": "Please also post the code that create and start the threads."}, {"owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "reply_to_user": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461196297, "post_id": 36757064, "comment_id": 61094211, "body": "@fluter Added the parent"}, {"owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "reply_to_user": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461196997, "post_id": 36757064, "comment_id": 61094384, "body": "@fluter Okay, that&#39;s everything. Sorry...I should have put that in from the get go..."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1461197430, "post_id": 36757064, "comment_id": 61094492, "body": "Pthreads functions and stdio functions are not async-signal-safe.  You must not call them from an interrupt handler."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1461197574, "post_id": 36757064, "comment_id": 61094525, "body": "Additionally, you seem to intend that the <code>pthread_cond_broadcast()</code> and <code>pthread_mutex_unlock()</code> calls in your signal handler pair with the <code>pthread_mutex_lock()</code> in your thread function, but even if these functoins were async-signal-safe, it seems overly optimistic to rely on such a pairing."}, {"owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1461197710, "post_id": 36757064, "comment_id": 61094562, "body": "@JohnBollinger May you elloborate why this assumption is overly optimistic? And as note the segmentation fault still occurs without the print calls. Could I assume this may be the point you were trying to make between the two mutex calls?"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1461197880, "post_id": 36757064, "comment_id": 61094604, "body": "Mutex, conditional vars aren&#39;t initialized."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1461198158, "post_id": 36757064, "comment_id": 61094689, "body": "@ZFN7, a process-directed signal can be delivered to any thread in the process that does not have it blocked.  <code>pthread_cond_wait()</code> does not cause any signals to be blocked.  But really, that&#39;s all secondary.  You must not call pthreads functions in a signal handler at all.  They are not async-signal safe."}, {"owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1461198508, "post_id": 36757064, "comment_id": 61094800, "body": "@JohnBollinger, so are you saying that the fact that I have not async-signal safe components inside my handler this could be a cause to the segmentation fault?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1461199169, "post_id": 36757064, "comment_id": 61094977, "body": "@ZFN7, the behavior of functions that are not async-signal safe is <b>unspecified</b> when they are called from a signal handler.  It is entirely possible that under some circumstances, a segfault could occur.  Inasmuch as your segfault seems to correlate with your <code>pthread_cond_broadcast()</code> call, that doesn&#39;t seem so far-fetched."}], "answers": [{"tags": [], "owner": {"reputation": 1644, "user_id": 1035133, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/03fe8859897884a6e62bc75a09e25bea?s=128&d=identicon&r=PG", "display_name": "Pan Ruochen", "link": "https://stackoverflow.com/users/1035133/pan-ruochen"}, "is_accepted": false, "score": 0, "last_activity_date": 1461210458, "creation_date": 1461210458, "answer_id": 36759290, "question_id": 36757064, "link": "https://stackoverflow.com/questions/36757064/segmentation-fault-occurring-with-child-pthreads/36759290#36759290", "title": "Segmentation fault occurring with child pthreads", "body": "<p>Seems pthread_mutex_lock/pthread_mutex_unlock do not pair.</p>\n\n<p>The correct code looks like</p>\n\n<pre><code>pthread_mutex_lock()\npthread_cond_broadcast()\npthread_mutex_unlock()\n\npthread_mutex_lock()\npthread_cond_wait()\npthread_mutex_unlock()\n</code></pre>\n"}], "owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 303, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461210458, "creation_date": 1461195384, "last_edit_date": 1461196959, "question_id": 36757064, "link": "https://stackoverflow.com/questions/36757064/segmentation-fault-occurring-with-child-pthreads", "title": "Segmentation fault occurring with child pthreads", "body": "<p>I'm currently working on custom thread scheduler project that uses pthreads in C. I have been struggling conceptually with it but am finally getting the behavior I expect to see, save for the segmentation fault.</p>\n\n<p>My job is to register five child threads and schedule each one based on the order of their IDs stored in an array. What I do is call <code>pthread_mutex_lock</code> and tell whichever child thread that is not to be scheduled first to wait. I do some stuff to my counter to keep track of when the next child should be scheduled and after one child thread increments counter to five it should wake up other threads and do the same thing for as many times as main loop is defined.</p>\n\n<p>all variables:</p>\n\n<pre><code>#define NTHREADS         5             /* Number of child threads        */\n#define NUM_LOOPS  10             /* Number of local loops          */\n#define SCHEDULE_INTERVAL 1            /* thread scheduling interval     */\n\n#define errexit(code,str) fprintf(stderr,\"%s: %s\\n\",(str),strerror(code));exit(1);\n\nint schedule_vector[NTHREADS];        /* The thread schedule vector      */\n\nint flag = 0;\npthread_cond_t cv;                   // condtitional variable\npthread_mutex_t mtx;               // mutex semaphore 1\nint globalcounter = 0;\nint currentThread;\n#define TASK_LIMIT  6\n</code></pre>\n\n<p>here is parent thread:</p>\n\n<pre><code>int main(int argc,char *argv[])\n{\n  int       i;                        \n  int       worker;                     \n  int       ids[NTHREADS];              \n  int       errcode;                 \n  int       *status;                    \n  int       policy;                     \n\n  pthread_t threads[NTHREADS];        \n\n  /* Create child threads --------------------------------------------- */\n  for (worker = 0; worker &lt; NTHREADS; worker++)\n  {\n    ids[worker] = worker;              \n\n    printf(\"creating child thread using id %d\\n\", worker);\n\n    /* Create a child thread ----------------------------------------- */\n    pthread_create (                 \n      &amp;threads[worker],    \n      NULL,                 \n      my_thread,          \n      &amp;ids[worker]);      \n    }\n\n    /* Initialize the thread schedule vector  -------------------------- */\n    schedule_vector[0] = 0;      /* First thread to be executed (0)      */\n    schedule_vector[1] = 1;      /* Second thread to be exceuted (1)     */\n    schedule_vector[2] = 2;      /* Third thread to be executed (2)      */\n    schedule_vector[3] = 3;      /* Fourth thread to be executed (3)     */\n    schedule_vector[4] = 4;      /* Fifth thread to be executed (4)      */\n\n    signal(SIGALRM, clock_interrupt_handler);\n    alarm(SCHEDULE_INTERVAL);\n    printf(\"handler set up\\n\");\n\n    /* Reap the threads as they exit ----------------------------------- */\n    for (worker = 0; worker &lt; NTHREADS; worker++)\n    {\n      /* Wait for thread to terminate --- */\n      if (errcode=pthread_join(threads[worker],(void *) &amp;status))\n      { errexit(errcode,\"pthread_join\"); }\n\n      /* Check thread's exit status and release its resources -------- */\n      if (*status != worker)\n      {\n        fprintf(stderr,\"thread %d terminated abnormally\\n\",worker);\n        exit(1);\n      }\n    }\n\n    /* The main (parent) thread terminates itself ---------------------- */\n    return(0);\n  }\n</code></pre>\n\n<p>Here is the child thread function:</p>\n\n<pre><code>void *my_thread(void * arg)\n{\n  long int i;                  \n  long int counter;      \n  int myid=*(int *) arg;  \n  counter = 0;\n  printf(\"\\nI am thread #%d\\n\\n\", myid);\n\n  /* Main loop ------------------------------------------ */\n  for (i = 0; i &lt; NUM_LOOPS; i++)\n  {\n\n        currentThread = myid;\n        pthread_mutex_lock(&amp;mtx);\n        while(myid != schedule_vector[flag]){\n          pthread_cond_wait(&amp;cv, &amp;mtx);\n        }\n        counter++;\n        globalcounter = counter;\n\n\n    printf(\"Thread: %d is running ...\\n\", myid);\n    usleep(100000);\n  }\n  return arg;\n}\n</code></pre>\n\n<p>and here is my interrupt handler:</p>\n\n<pre><code>void clock_interrupt_handler(void)\n{\n\n  printf(\"scheduler started ++++++++++++++++++++++++++++++++++ \\n\");\n  if (currentThread == schedule_vector[flag]) {\n    printf(\"scheduled thread received: thread %d, and it's counter is at %d\\n\", currentThread, globalcounter);\n    while(globalcounter &lt; TASK_LIMIT){\n    if(globalcounter == 5){\n      flag++;\n      pthread_cond_broadcast(&amp;cv);\n    }\n    pthread_mutex_unlock(&amp;mtx);\n    alarm(SCHEDULE_INTERVAL);\n    }\n  } else {\n    printf(\"unscheduled thread received, putting thread %d  with count %d to sleep...\\n\", currentThread, globalcounter);\n    alarm(SCHEDULE_INTERVAL);\n\n  }\n\n\n}\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>scheduler started ++++++++++++++++++++++++++++++++++\nscheduled thread received: thread 0, and it's counter is at 1\nThread: 0 is running ...\nThread: 0 is running ...\nThread: 0 is running ...\nThread: 0 is running ...\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>It basically repeats this behavior, but for each thread. I'd like to understand what is exactly causing the seg fault</p>\n"}, {"tags": ["c", "visual-studio-2015", "function-pointers", "codeblocks"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1461191478, "post_id": 36756294, "comment_id": 61092727, "body": "It sounds like VS2015 is using an earlier C standard that doesn&#39;t support dynamically sized arrays.  You should check their documentation to see if there&#39;s an option to support a later C standard."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1461192043, "post_id": 36756294, "comment_id": 61092945, "body": "see <a href=\"https://stackoverflow.com/questions/7871019/variable-length-arrays-c99-not-supported-in-c\">Variable length arrays C99 not supported in C</a> and <a href=\"https://stackoverflow.com/questions/18521398/which-compiler-should-i-trust?lq=1\">Which compiler should I trust?</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1461192065, "post_id": 36756294, "comment_id": 61092951, "body": "MSVC is not compliant to the C standard. And they never supported features introduced with C99 like <i>variable length arrays</i> (VLAs). You should get a modern C compiler which supports standard C like clang or gcc. Note: Code::Blocks is an IDE, not a compiler."}, {"owner": {"reputation": 19, "user_id": 5998705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a0691e803c6f9c53690f0403361be7?s=128&d=identicon&r=PG&f=1", "display_name": "theViTALiTY", "link": "https://stackoverflow.com/users/5998705/thevitality"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1461196648, "post_id": 36756294, "comment_id": 61094304, "body": "@Olaf,  Well its kinda implied that it&#39;s an IDE, its just sometimes i refer to one as the other. Nevertheless, google is not very helpful at aiding me the information to why MSVC is not supporting C99 standard, and now it got me to question why am i allowed to define a variable within &#39;for&#39; loop&#39;s brackets. Isn&#39;t that a feature only supported by C99 standard? C::B doesn&#39;t let you use it that way unless u specifically tell it to use C99 standard when compiling."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1461196804, "post_id": 36756294, "comment_id": 61094335, "body": "You missed the point. The IDE is not responsible for compiling the code. So the underlying compiler is what matters. AFAIK you can very well call MSVC from Code::Blocks, too. And maybe you can call gcc or clang from VS. About the &quot;whys and why nots&quot; of MS supporting something: I have learned not to think about it. Tempora mutantur, MS is not the only to provide software ... If in doubt if something is an extension of C or not, read the documentation of the compiler and the <b>only</b> authoritative reference, which is ISO9899:2011. There is no other C standard."}], "owner": {"reputation": 19, "user_id": 5998705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a0691e803c6f9c53690f0403361be7?s=128&d=identicon&r=PG&f=1", "display_name": "theViTALiTY", "link": "https://stackoverflow.com/users/5998705/thevitality"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1461193401, "answer_count": 0, "score": 0, "last_activity_date": 1461191220, "creation_date": 1461191052, "last_edit_date": 1461191220, "question_id": 36756294, "link": "https://stackoverflow.com/questions/36756294/function-pointer-in-vs2015-and-constant-value", "closed_reason": "Duplicate", "title": "Function pointer in VS2015 and constant value?", "body": "<p>I wrote a pretty straight forward code that gives a value of X for 3 called functions within variable arguments function. The problem is, when i compile this within CodeBlocks, it runs perfectly, but VS2015 is giving me errors about using a variable for an array size that is not constant (Line 28), and giving me errors on line 32 that state:</p>\n\n<ul>\n<li>expected a ')'                              - Line 28</li>\n<li>C2143 syntax error: missing ')' before '*'  - Line 32</li>\n<li>C2059 syntax error: ')'                     - Line 32</li>\n<li>C2143 syntax error: missing ')' before ';'  - Line 32</li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdarg.h&gt;\n#include &lt;math.h&gt;\n\nvoid f(double, int, ...);\n\nint main(int argc, char *argv[])\n{\n    double dx;\n\n    printf(\"  x     sin(x)    cos(x)    exp(x) \\n\");\n    printf(\"===== ========= ========= =========\\n\");\n\n    for (dx = -1; dx &lt; 1; dx += 0.01)\n        f(dx, 3, sin, cos, exp);\n\n    getchar();\n    getchar();\n    return 0;\n}\n\nvoid f(double x, int n, ...)\n{\n    va_list arg;\n    va_start(arg, n);\n    double rez[n]; // LINE 28\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        double (*f)(double) = va_arg(arg, double (*)(double)); // LINE 32\n        rez[i] = (*f)(x);\n    }\n\n    printf(\"%5.2f \", x);\n\n    for (int i = 0; i &lt; n; i++)\n        printf(\"%9.5f \", rez[i]);\n\n    printf(\"\\n\");\n    free(rez);\n    va_end(arg);\n}\n</code></pre>\n\n<p>So, what is the difference between the compilers since one lets me compile it like a charm and other one doesn't?</p>\n"}, {"tags": ["c", "arrays", "function", "pointers"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1461191227, "post_id": 36756256, "comment_id": 61092638, "body": "You cannot return the address of any variable with automatic storage in a function, since that storage is no longer allocated upon return from the function.  You have two options:  (1) Pass the array address as an argument to the function, or (2) Have the function allocate the storage with <code>malloc</code>, leaving it to the caller to free it later."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1461191267, "post_id": 36756256, "comment_id": 61092652, "body": "You can&#39;t return an array in C."}], "answers": [{"comments": [{"owner": {"reputation": 1141, "user_id": 5802468, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/yqeEu.gif?s=128&g=1", "display_name": "Majora320", "link": "https://stackoverflow.com/users/5802468/majora320"}, "edited": false, "score": 1, "creation_date": 1461192147, "post_id": 36756367, "comment_id": 61092983, "body": "<b>Don&#39;t use explicit <code>malloc</code> casting!</b>"}], "tags": [], "owner": {"reputation": 677, "user_id": 1339839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559a8b5eca744116f78e49012ed4c734?s=128&d=identicon&r=PG", "display_name": "yaman", "link": "https://stackoverflow.com/users/1339839/yaman"}, "is_accepted": false, "score": 1, "last_activity_date": 1461192340, "last_edit_date": 1461192340, "creation_date": 1461191458, "answer_id": 36756367, "question_id": 36756256, "link": "https://stackoverflow.com/questions/36756256/functions-returning-arrays/36756367#36756367", "title": "Functions returning arrays", "body": "<p>The array is destroyed when the function returns due to its auto storage. Try allocating memory dynamically from the heap (ie malloc()) as:</p>\n\n<pre><code>int * PopulateArray(int y) \n{\n    int i;\n    int *x = malloc(10*sizeof(int));\n\n    int a = 1;\n    for (i = 0; i &lt; y; i++) \n    {\n        printf(\"Please enter number %d: \", a);\n        scanf(\"%d\", &amp;x[i]);\n        a++;\n    }\n    return x;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 4708221, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e50952e7f1a4f9dc949f090e6942a041?s=128&d=identicon&r=PG&f=1", "display_name": "jjflyV7", "link": "https://stackoverflow.com/users/4708221/jjflyv7"}, "edited": false, "score": 0, "creation_date": 1461250937, "post_id": 36758558, "comment_id": 61123986, "body": "Thank You for the detailed explanation. now i&#39;m confident that my array values are fine and it is my searchArray function that is looking for any numbers divisible by three that is the reason I am getting the long numbers as my result."}, {"owner": {"reputation": 55, "user_id": 4708221, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e50952e7f1a4f9dc949f090e6942a041?s=128&d=identicon&r=PG&f=1", "display_name": "jjflyV7", "link": "https://stackoverflow.com/users/4708221/jjflyv7"}, "edited": false, "score": 0, "creation_date": 1461251805, "post_id": 36758558, "comment_id": 61124582, "body": "I have even fixed that now my for loop was not using size to iterate through the array. But really appreciate the explanation I was struggling with the pointer aspect and I think that this will help me with that as well as I am just a beginner."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 55, "user_id": 4708221, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e50952e7f1a4f9dc949f090e6942a041?s=128&d=identicon&r=PG&f=1", "display_name": "jjflyV7", "link": "https://stackoverflow.com/users/4708221/jjflyv7"}, "edited": false, "score": 0, "creation_date": 1461267782, "post_id": 36758558, "comment_id": 61134336, "body": "You will get it. C just takes time, but it is well worth it. Remember, a <i>pointer</i> is nothing more than a variable that holds the <i>address-of</i> something else as its value. E.g. <code>int a = 5;</code> declares <code>a</code> with an <i>immediate-value</i> of <code>5</code>. Then, <code>int *b = &amp;a;</code> simply declares the variable <code>b</code> (a pointer) that holds the <i>address-of</i> <code>a</code> as its value. In C you can only pass a single value as a function parameter, or return. So in order to pass an array to a function, the array variable is converted to a pointer (a variable holding the address of the first element as its value. <code>:)</code> Good luck!"}], "tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": true, "score": 2, "last_activity_date": 1461205962, "creation_date": 1461205962, "answer_id": 36758558, "question_id": 36756256, "link": "https://stackoverflow.com/questions/36756256/functions-returning-arrays/36758558#36758558", "title": "Functions returning arrays", "body": "<p>Your research is correct. The way to handle operations on an array within a function is to pass a pointer to the array to your function. You can then operate on the array at-will in the function without the requirement of returning a pointer when your function return. (you can still return a pointer to the array for convenience of course)</p>\n\n<p>Beyond passing a pointer to your array, you will need to pass the size of your array as well (or use a global to track the size of your array - not preferable as you want to avoid the use of globals unless totally necessary). For example, your <code>populatearray</code> function could be written as follows:</p>\n\n<pre><code>/* pass pointer to array and size to function */\nint *populatearray (int *x, int sz) \n{\n    int i, a = 1;\n\n    for (i = 0; i &lt; sz; i++)     {\n        printf (\"Please enter number %2d: \", a++);\n        scanf (\"%d\", &amp;x[i]);\n    }\n\n    return x;\n}\n</code></pre>\n\n<p>(the return here is for convenience and is not required as your array is declared in <code>main()</code>)</p>\n\n<p>This allows you to avoid dynamic allocation, maintaining a pointer to the allocated block of memory and the responsibility for freeing that memory when it is no longer needed. There is nothing wrong with dynamically allocating memory, but it is an additional layer of complication that new C programmers have to deal with.</p>\n\n<p>A short example using your <code>populatearray</code> could work as follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nenum { MAXI = 10 };  /* avoid 'magic' numbers, use proper constants */\n\nint *populatearray (int *x, int y);\nvoid prnarray (int *x, int sz);\n\nint main (void) {\n\n    int x[MAXI] = {0};\n\n    populatearray (x, MAXI);\n    prnarray (x, MAXI);\n\n    return 0;\n}\n\n/* pass pointer to array and size to function */\nint *populatearray (int *x, int sz) \n{\n    int i, a = 1;\n\n    for (i = 0; i &lt; sz; i++)     {\n        printf (\"Please enter number %2d: \", a++);\n        scanf (\"%d\", &amp;x[i]);\n    }\n\n    return x;\n}\n\n/* pass pointer to array and size to function */\nvoid prnarray (int *x, int sz) \n{\n    int i;\n    for (i = 0; i &lt; sz; i++)\n        printf (\" x[%2d] : %d\\n\", i, x[i]);\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/array_pass\nPlease enter number  1: 10\nPlease enter number  2: 20\nPlease enter number  3: 30\nPlease enter number  4: 40\nPlease enter number  5: 50\nPlease enter number  6: 60\nPlease enter number  7: 70\nPlease enter number  8: 80\nPlease enter number  9: 90\nPlease enter number 10: 100\n x[ 0] : 10\n x[ 1] : 20\n x[ 2] : 30\n x[ 3] : 40\n x[ 4] : 50\n x[ 5] : 60\n x[ 6] : 70\n x[ 7] : 80\n x[ 8] : 90\n x[ 9] : 100\n</code></pre>\n\n<p>(While not an error, the standard coding style for C avoids <code>caMelCase</code> variables in favor of all <em>lower-case</em>. See e.g. <a href=\"http://homepages.inf.ed.ac.uk/dts/pm/Papers/nasa-c-style.pdf\" rel=\"nofollow\"><strong>NASA - C Style Guide, 1994</strong></a>)</p>\n\n<p>Let me know if you have any additional questions.</p>\n"}], "owner": {"reputation": 55, "user_id": 4708221, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e50952e7f1a4f9dc949f090e6942a041?s=128&d=identicon&r=PG&f=1", "display_name": "jjflyV7", "link": "https://stackoverflow.com/users/4708221/jjflyv7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 36758558, "answer_count": 2, "score": 0, "last_activity_date": 1461205997, "creation_date": 1461190861, "last_edit_date": 1461205997, "question_id": 36756256, "link": "https://stackoverflow.com/questions/36756256/functions-returning-arrays", "title": "Functions returning arrays", "body": "<p>I need my function to return an array that will then go into the next function. I know based on some research that I have to use a pointer to get this done. however when I run this code I get memory addresses or what appears to me memory addresses (if its not the address its a huge number) in my results.</p>\n\n<p>The problem happens when the array needs to change functions. The two individual functions run fine on there own as intended. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>int main(void) \n{\n    int y = 0, x[10];\n    int *p;\n    y = capturingNumberTimesLoopRuns();\n    p = PopulateArray(y);\n    searchArray(x);\n}\n\nint capturingNumberTimesLoopRuns (void)\n{\n    int y = 0;\n    while (y == 0) \n    {\n        printf(\"Please enter the quantity of numbers you wish to enter.\\n\");\n        printf(\"Enter a number between 1 and 10: \");\n        scanf(\"%d\", &amp;y);\n        if (y &lt; 1 || y &gt; 10)\n        {\n            printf(\"Invalid Selection! Please Try Again.\\n\");\n            y = 0;\n        }\n    }\n    return y;\n}\n\nint * PopulateArray(int y) \n{\n    int i;\n    int x[10];\n    int a = 1;\n    for (i = 0; i &lt; y; i++) \n    {\n        printf(\"Please enter number %d: \", a);\n        scanf(\"%d\", &amp;x[i]);\n        a++;\n    }\n    return x;\n}\n\nvoid searchArray(int x[]) \n{\n    int i, a = 0, numberOfTimes = 0, average = 0;\n    for (i = 0; x[i] != 0; i++) \n    {\n        if (x[i] % 3 == 0) \n        {\n            a += x[i];\n            numberOfTimes += 1;\n        }\n    }\n    average = a / numberOfTimes;\n    printf(\"%d\\n\", a);\n    printf(\"average = %d\", average);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "pointers", "strstr"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 1, "creation_date": 1461191136, "post_id": 36756225, "comment_id": 61092604, "body": "1) <code>int counter;</code> --&gt; <code>int counter=0;</code> 2) <code>char num[4322];</code>.. <code>num[i] = i;</code> : <code>char</code> can hold 0~255 or -128~127 3) <code>strstr(&amp;num[i], &quot;5&quot;)</code> : <code>&amp;num[i]</code> isn&#39;t C-String."}, {"owner": {"reputation": 2868, "user_id": 6184684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f535fc95ebb88dada1ace7c012ba32e8?s=128&d=identicon&r=PG&f=1", "display_name": "qwertyman", "link": "https://stackoverflow.com/users/6184684/qwertyman"}, "edited": false, "score": 0, "creation_date": 1461191403, "post_id": 36756225, "comment_id": 61092696, "body": "interesting how it actually gives this result, with 17 ~= 4322 / 255. Since each char is in 0-255, you end up having 17 0-terminated strings, each of which contains the char &#39;5&#39; (ascii code 0x35) exactly once."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5438783, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/31481f1dd379b66952893d6fb4d802c0?s=128&d=identicon&r=PG&f=1", "display_name": "Bossrevz", "link": "https://stackoverflow.com/users/5438783/bossrevz"}, "edited": false, "score": 0, "creation_date": 1461193009, "post_id": 36756323, "comment_id": 61093304, "body": "I don&#39;t really udnerstand this. so imagine i=50.  for (cur = i; cur &gt; 0; cur /= 10) {             if (cur % 10 == target) counter++;         } 50 % 10 = 0 so the counter would not increment"}, {"owner": {"user_type": "does_not_exist", "display_name": "user539810"}, "reply_to_user": {"reputation": 25, "user_id": 5438783, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/31481f1dd379b66952893d6fb4d802c0?s=128&d=identicon&r=PG&f=1", "display_name": "Bossrevz", "link": "https://stackoverflow.com/users/5438783/bossrevz"}, "edited": false, "score": 0, "creation_date": 1461199042, "post_id": 36756323, "comment_id": 61094932, "body": "@Bossrevz Note the <code>for</code> loop&#39;s third clause is <code>cur &#47;= 10</code> and the loop executes while <code>cur &gt; 0</code> is true. This means that <code>cur = 50 &#47; 10</code> (5), and <code>5 &gt; 0</code> is true, so 50 will be counted. It just won&#39;t be counted on the first iteration of the loop."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 6, "last_activity_date": 1461191213, "creation_date": 1461191213, "answer_id": 36756323, "question_id": 36756225, "link": "https://stackoverflow.com/questions/36756225/finding-how-many-times-the-digit-5-appears-within-0-4322/36756323#36756323", "title": "finding how many times the digit 5 appears within 0 - 4322", "body": "<p>You didn't convert the numbers to strings, and you passed what are not a null-terminated strings to <code>strstr()</code>.\nYou also forgot to initialize <code>counter</code>.</p>\n\n<p>You should check the digits one-by-one. Try this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int max = 4322;\n    int target = 5;\n    int i, cur, counter = 0;\n    for (i = 1; i &lt;= max; i++) {\n        for (cur = i; cur &gt; 0; cur /= 10) {\n            if (cur % 10 == target) counter++;\n        }\n    }\n    printf(\"%d\\n\", counter);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1461191378, "post_id": 36756337, "comment_id": 61092687, "body": "Shouldn&#39;t <code>55</code> be counted as two <code>5</code>s?"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1461191479, "post_id": 36756337, "comment_id": 61092730, "body": "@MikeCAT: Thanks, fixed."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1461191792, "post_id": 36756337, "comment_id": 61092855, "body": "Your new code contains an infinite loop: <code>p</code> has to be incremented after being checked if it is <code>NULL</code>."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1461191896, "post_id": 36756337, "comment_id": 61092892, "body": "Thanks again, and this is why I don&#39;t like doing string processing in C."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461192331, "post_id": 36756337, "comment_id": 61093044, "body": "<code>char buf[10];</code> is skimpy for a 32-bit int.  Suggest <code>char buf[12];</code> for <code>&quot;-2147483648&quot;</code>, or just double it for growth <code>char buf[24];</code>  (Ah now see OP said <code>0 - 4322</code>."}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1461192356, "post_id": 36756337, "comment_id": 61093056, "body": "@chux: It&#39;s not skimpy for 4322, thank you very much.  Trying to solve the OP&#39;s problem, not predict some future problem he may have."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461192582, "post_id": 36756337, "comment_id": 61093136, "body": "Hmm wonder why <code>4322</code>? Perhaps easier for a prof to google 4322 and see who used SO for homework?"}, {"owner": {"reputation": 25, "user_id": 5438783, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/31481f1dd379b66952893d6fb4d802c0?s=128&d=identicon&r=PG&f=1", "display_name": "Bossrevz", "link": "https://stackoverflow.com/users/5438783/bossrevz"}, "edited": false, "score": 0, "creation_date": 1461192893, "post_id": 36756337, "comment_id": 61093262, "body": "Thanks for the help guys. Like i have a bit of knowledge in java, if anyone can tell and just did it as if it were java syntax, but in C you have to use all these function terms like snprintf which i just google&#39;d right now and pointers and it just feels so foreign to me :/"}, {"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "reply_to_user": {"reputation": 25, "user_id": 5438783, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/31481f1dd379b66952893d6fb4d802c0?s=128&d=identicon&r=PG&f=1", "display_name": "Bossrevz", "link": "https://stackoverflow.com/users/5438783/bossrevz"}, "edited": false, "score": 0, "creation_date": 1461193218, "post_id": 36756337, "comment_id": 61093365, "body": "@Bossrevz: Java has pointers, you just can&#39;t do arithmetic on them or cast them."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 4, "last_activity_date": 1461191844, "last_edit_date": 1461191844, "creation_date": 1461191299, "answer_id": 36756337, "question_id": 36756225, "link": "https://stackoverflow.com/questions/36756225/finding-how-many-times-the-digit-5-appears-within-0-4322/36756337#36756337", "title": "finding how many times the digit 5 appears within 0 - 4322", "body": "<p>There are many problems in this code.</p>\n\n<pre><code>char num[4322];\n</code></pre>\n\n<p>This is an array of 4322 characters.  You probably didn't want that, I'm not sure why it is here.</p>\n\n<pre><code>num[i] = i;\n</code></pre>\n\n<p>This is invalid, because you cannot assign large numbers to a <code>char</code>.  This will not convert the number to a string, this will convert the number to a <code>char</code> which is different.  So 5 does not become <code>\"5\"</code> but it becomes <code>\\x05</code>.</p>\n\n<pre><code>strstr(&amp;num[i], \"5\")\n</code></pre>\n\n<p>This will search for <code>\"5\"</code>, but since the array is not nul-terminated, it is incorrect.  Also note that you are storing</p>\n\n<pre><code>int counter;\n</code></pre>\n\n<p>Note that <code>counter</code> is uninitialized.  This is an error.</p>\n\n<p>Here is a similar program, which is correct (but not \"efficient\" per se):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nint main() {\n    int counter = 0; // initialize to 0\n    for (int i = 0; i &lt; 4322; i++) {\n        // Put the number in a string\n        char buf[10];\n        snprintf(buf, sizeof(buf), \"%d\", i);\n        // Count 5s\n        for (char *p = buf; *p; p++) {\n            if (*p == '5') {\n                counter++;\n            }\n        }\n    }\n    printf(\"%d\", counter);\n}\n</code></pre>\n\n<p>Note that @MikeCAT's answer skips the int -> string conversion, which is somewhat unnecessary.</p>\n"}], "owner": {"reputation": 25, "user_id": 5438783, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/31481f1dd379b66952893d6fb4d802c0?s=128&d=identicon&r=PG&f=1", "display_name": "Bossrevz", "link": "https://stackoverflow.com/users/5438783/bossrevz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461194756, "creation_date": 1461190662, "last_edit_date": 1461194756, "question_id": 36756225, "link": "https://stackoverflow.com/questions/36756225/finding-how-many-times-the-digit-5-appears-within-0-4322", "title": "finding how many times the digit 5 appears within 0 - 4322", "body": "<p>This code doesnt seem to work for me. it outputs the number 17 which is obviously wrong.the counter should go up if it encounters numbers like 5, 15, 25, 50 ect. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n\nint main(void) {\n    int i;\n    int counter; \n    char num[4322];\n\n    for (i = 1; i &lt; sizeof(num); i++){\n        num[i] = i;\n        if ( strstr(&amp;num[i], \"5\")){\n            counter = counter + 1;\n        }\n    } \n\n    printf(\"%d\", counter);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "matrix-multiplication"], "comments": [{"owner": {"reputation": 1778, "user_id": 6055065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZV7.jpg?s=128&g=1", "display_name": "Dmitry Kolchev", "link": "https://stackoverflow.com/users/6055065/dmitry-kolchev"}, "edited": false, "score": 0, "creation_date": 1461190587, "post_id": 36756147, "comment_id": 61092421, "body": "<a href=\"http://stackoverflow.com/questions/6311309/how-can-i-multiply-two-matrices-in-c\" title=\"how can i multiply two matrices in c\">stackoverflow.com/questions/6311309/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6169069, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYgDnrqRE1Q/AAAAAAAAAAI/AAAAAAAAACs/tfUSQ1TpYts/photo.jpg?sz=128", "display_name": "CoolPigeon", "link": "https://stackoverflow.com/users/6169069/coolpigeon"}, "edited": false, "score": 0, "creation_date": 1461194329, "post_id": 36756189, "comment_id": 61093687, "body": "Here is my entire code:   <i><a href=\"https://ideone.com/pdBf8K\" rel=\"nofollow noreferrer\">ideone.com/pdBf8K</a></i> . I would appreciate if you could tell me what i did wrong."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": false, "score": 5, "last_activity_date": 1461190491, "creation_date": 1461190491, "answer_id": 36756189, "question_id": 36756147, "link": "https://stackoverflow.com/questions/36756147/how-to-calculate-matrix-multiplication-in-language-c/36756189#36756189", "title": "How to calculate matrix multiplication in language C", "body": "<p>Missing braces.</p>\n\n<pre><code>for (i = 0; i &lt; row1; i++) {\n    for (j = 0; j &lt; col2; j++) { // added brace\n        suma = 0;\n        for (l = 0; l &lt; row2; l++) { // added brace\n            suma += a[i][l] * bt[l][j];\n        } // added brace\n        c[i][j] = suma;             \n    } // added brace\n}\n</code></pre>\n\n<p>The braces on the inside aren't <em>strictly necessary</em> but if you always use braces you are less likely to make this particular mistake in the future.</p>\n\n<p>Without the braces, it looks like this, correctly indented:</p>\n\n<pre><code>for (i = 0; i &lt; row1; i++) {\n    for (j = 0; j &lt; col2; j++)\n        suma = 0;\n    // Note that j = col2, which means that we are accessing\n    // array elements out of bounds, which is an error.\n    for (l = 0; l &lt; row2; l++)\n        suma += a[i][l] * bt[l][j];\n    c[i][j] = suma;             \n}\n</code></pre>\n\n<p>This is more obviously wrong.  Another way to make the error less likely is to move the variables inside the loops:</p>\n\n<pre><code>for (int i = 0; i &lt; row1; i++) {\n    for (int j = 0; j &lt; col2; j++) {\n        double suma = 0;\n        for (int l = 0; l &lt; row2; l++) {\n            suma += a[i][l] * bt[l][j];\n        }\n        c[i][j] = suma;             \n    }\n}\n</code></pre>\n\n<p>This way, if you remove the braces, you will get an error because <code>j</code> is not defined.  (This doesn't work in C90, but that's ancient history these days.)</p>\n"}], "owner": {"reputation": 1, "user_id": 6169069, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jYgDnrqRE1Q/AAAAAAAAAAI/AAAAAAAAACs/tfUSQ1TpYts/photo.jpg?sz=128", "display_name": "CoolPigeon", "link": "https://stackoverflow.com/users/6169069/coolpigeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1461190491, "creation_date": 1461190299, "question_id": 36756147, "link": "https://stackoverflow.com/questions/36756147/how-to-calculate-matrix-multiplication-in-language-c", "title": "How to calculate matrix multiplication in language C", "body": "<p>I tried this code but something is wrong</p>\n\n<pre><code>        for (i = 0; i &lt; row1; i++) {\n        for (j = 0; j &lt; col2; j++)\n            suma = 0;\n            for (l = 0; l &lt; row2; l++)\n            suma += a[i][l] * bt[l][j];\n            c[i][j] = suma;             \n    }\n    printf(\"\\nMultiplication of 2 matrices:\\n\");\n    for (i = 0; i &lt; row1; i++) {\n        for (j = 0; j &lt; col2; j++)\n            printf(\"%2d\", c[i][j]);\n        printf(\"\\n\");\n    }\n</code></pre>\n\n<p>when i debug it it prints out random numbers in both rows and columns (something like -895473 )</p>\n"}, {"tags": ["c", "linux", "printf", "fopen", "fclose"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 12, "creation_date": 1461188256, "post_id": 36755645, "comment_id": 61091514, "body": "Usually those one-liners are called functions..."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1461188287, "post_id": 36755645, "comment_id": 61091529, "body": "One-line as in &#39;in the source code&#39;? Best make it a macro, so you can easily disable it later on."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1461188318, "post_id": 36755645, "comment_id": 61091535, "body": "Sure: Put the logging stuff into a seperate module, call the &quot;open&quot; function of that module early from <code>main</code>, the <code>close</code> just before you end your program and the <code>log</code> function wherever you want to write to the log file."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461188749, "post_id": 36755645, "comment_id": 61091710, "body": "Any particular reason that code in not using something like a function called <code>debug_printf(int, ...)</code>?"}, {"owner": {"reputation": 832, "user_id": 5395234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/h9mdP.jpg?s=128&g=1", "display_name": "vestlen", "link": "https://stackoverflow.com/users/5395234/vestlen"}, "edited": false, "score": 1, "creation_date": 1461188870, "post_id": 36755645, "comment_id": 61091751, "body": "Added clarification to the question. I&#39;m not really looking for a &quot;make it a function&quot; solution because I want something simple to paste into multiple programs, similar to using printk&#39;s. Just looking for anything I may have missed in my block that could simplify it."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1461189312, "post_id": 36755645, "comment_id": 61091938, "body": "In the case where <code>fopen</code> fails, you should be writing your error message to <code>stderr</code>, not <code>stdout</code>."}, {"owner": {"reputation": 832, "user_id": 5395234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/h9mdP.jpg?s=128&g=1", "display_name": "vestlen", "link": "https://stackoverflow.com/users/5395234/vestlen"}, "edited": false, "score": 0, "creation_date": 1461189622, "post_id": 36755645, "comment_id": 61092038, "body": "@MarkPlotnick YES! Of course! That is exactly what I was looking for. You can make this into an answer if you&#39;d like."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1461191776, "post_id": 36755645, "comment_id": 61092849, "body": "Why do you want to reduce things to one line?  Do you <i>really</i> believe your brain can comprehend that many things going on at once?  Or do you endeavor to produce code you can&#39;t understand?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1461192499, "post_id": 36755645, "comment_id": 61093107, "body": "I&#39;m voting to close this, because it&#39;s a Code Golf type question. <i>Here&#39;s my really bad idea that works. Can anybody make it shorter?</i> is a challenge, not an actual problem you&#39;re facing. There&#39;s an entire site here at <a href=\"https://stackexchange.com\">Stack Exchange</a> for those sorts of question."}], "answers": [{"tags": [], "owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "is_accepted": false, "score": 5, "last_activity_date": 1461188722, "creation_date": 1461188722, "answer_id": 36755782, "question_id": 36755645, "link": "https://stackoverflow.com/questions/36755645/one-liner-for-fopen-fprintf-fclose/36755782#36755782", "title": "One-liner for fopen, fprintf, fclose?", "body": "<hr>\n\n<blockquote>\n  <p><code>Functions.</code></p>\n</blockquote>\n\n<hr>\n\n<p>Extra chars for my shortest answer.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1461191998, "last_edit_date": 1495540373, "creation_date": 1461191581, "answer_id": 36756387, "question_id": 36755645, "link": "https://stackoverflow.com/questions/36755645/one-liner-for-fopen-fprintf-fclose/36756387#36756387", "title": "One-liner for fopen, fprintf, fclose?", "body": "<p>Potential problem with <code>fprintf(f, \"DEBUG MSG\\n\");</code></p>\n\n<p>I assume <code>\"DEBUG MSG\\n\"</code> is some placeholder for the true message.  Should the true message contain a <code>'%'</code>, then the function will look for missing arguments.  Use <code>fputs()</code> - its can be lighter on the CPU too than <code>fprintf()</code>.</p>\n\n<pre><code>fputs(debug_message, f);\n</code></pre>\n\n<p>The true message may lack a <code>'\\n'</code> and then get stuck in buffering just prior to a program crash.  Best to flush when you are done.</p>\n\n<pre><code>fputs(debug_message, f);\nfflush(f);\n</code></pre>\n\n<p>Pedantic: Debugging is for problem solving.  Too often the message itself is questionable/corrupt.  Consider using protection.  (I do not trust excessive long debug messages).  Of course the more junk in the <code>fprintf()</code>, the greater the performance impact of debug logging.</p>\n\n<pre><code>if (f) {\n  if (debug_message) {\n    fprintf(f, \"%.99s\", debug_message);\n    fflush(f);\n    fclose(f);\n  }\n}\n</code></pre>\n\n<p>As mentioned by <a href=\"https://stackoverflow.com/questions/36755645/one-liner-for-fopen-fprintf-fclose#comment61091938_36755645\">@Tom Karzes</a>, send diagnostic message to <code>stderr</code>, rather than <code>stdout</code>.</p>\n\n<hr>\n\n<p>Overall, I would use a function call wrapped in a conditional macro rather than embedded code.  YMMV.</p>\n\n<pre><code>#ifdef NDEBUG\n  #define DEBUG_PUTS(level, s)\n#else\n  #define DEBUG_PUTS(level, s) debug_puts((level), __FILE__, __LINE__, (s))\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461265566, "post_id": 36756945, "comment_id": 61133096, "body": "Note: This is an OS specific solution.  The post did not specify the OS and had &quot;runs on an embedded device&quot; which implies there might not even be an underlying OS."}, {"owner": {"reputation": 832, "user_id": 5395234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/h9mdP.jpg?s=128&g=1", "display_name": "vestlen", "link": "https://stackoverflow.com/users/5395234/vestlen"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461290295, "post_id": 36756945, "comment_id": 61142856, "body": "Good point. I added this to the question. I was hoping for a more general solution (like a library function that I had been unaware of or something) but this one solved the problem for my situation."}], "tags": [], "owner": {"reputation": 832, "user_id": 5395234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/h9mdP.jpg?s=128&g=1", "display_name": "vestlen", "link": "https://stackoverflow.com/users/5395234/vestlen"}, "is_accepted": true, "score": 0, "last_activity_date": 1461556709, "last_edit_date": 1461556709, "creation_date": 1461194579, "answer_id": 36756945, "question_id": 36755645, "link": "https://stackoverflow.com/questions/36755645/one-liner-for-fopen-fprintf-fclose/36756945#36756945", "title": "One-liner for fopen, fprintf, fclose?", "body": "<p>As mentioned by Mark Plotnick, a workaround for Linux systems is:</p>\n\n<pre><code>system(\"echo DEBUG MSG &gt;&gt; filename\");\n</code></pre>\n\n<p>It's not pretty but it's quick, copy/pasteable, and easy to use for this situation because it can also write to <code>/dev/kmsg</code>:</p>\n\n<pre><code>system(\"echo DEBUG MSG &gt;&gt; /dev/kmsg\");\n</code></pre>\n\n<p>which allows it to behave like a printk. Of course, it's not a safe solution and can't be used with any chars that interfere with a bash echo, but for a temporary static debug message it works fine.</p>\n"}], "owner": {"reputation": 832, "user_id": 5395234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/h9mdP.jpg?s=128&g=1", "display_name": "vestlen", "link": "https://stackoverflow.com/users/5395234/vestlen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "closed_date": 1462071976, "accepted_answer_id": 36756945, "answer_count": 3, "score": -4, "last_activity_date": 1515082704, "creation_date": 1461188179, "last_edit_date": 1515082704, "question_id": 36755645, "link": "https://stackoverflow.com/questions/36755645/one-liner-for-fopen-fprintf-fclose", "closed_reason": "Opinion-based", "title": "One-liner for fopen, fprintf, fclose?", "body": "<p>I'm putting some very temporary debug prints into various userspace programs to figure out what code runs on an embedded Linux device, and I want these prints to write to a file without leaving it open. To make the debug more portable between the various programs, it would be nice to have a one-liner that can open a file, write to it, and close it without having to define a function/macro elsewhere. I could do something like:</p>\n\n<pre><code>{ FILE *f = fopen(\"filename\", \"a\"); if (f) { fprintf(f, \"DEBUG MSG\\n\"); fclose(f); } else printf(\"File open error!\\n\"); }\n</code></pre>\n\n<p>which is just removing the whitespace from:</p>\n\n<pre><code>{\n    FILE *f = fopen(\"filename\", \"a\");\n    if (f) {\n        fprintf(f, \"DEBUG MSG\\n\");\n        fclose(f);\n    }\n    else\n        printf(\"File open error!\\n\");\n}\n</code></pre>\n\n<p>But this feels needlessly complex. Is there some more simplified way of doing this? Again, I'm not talking about making it a function, as I'd like it to be copy/pasted between separate programs without defining a function every time. It's just basically a temporary printk equivalent for userspace.</p>\n"}, {"tags": ["c", "struct", "free"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1461187702, "post_id": 36755481, "comment_id": 61091252, "body": "<code>l-&gt;lista[i] = (ProdutoNP)malloc(sizeof(struct ProdutoN));         l-&gt;lista[i] = NULL;</code> what is that suppossed to mean?"}, {"owner": {"reputation": 5425, "user_id": 583044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ad7ef9756043aad048a7f0e70c724f?s=128&d=identicon&r=PG", "display_name": "tinman", "link": "https://stackoverflow.com/users/583044/tinman"}, "edited": false, "score": 2, "creation_date": 1461187737, "post_id": 36755481, "comment_id": 61091267, "body": "It would be useful to post the definitions of <code>ProdutoNP</code> and <code>CatalogoProdutos</code>."}, {"owner": {"reputation": 525, "user_id": 2747961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f020f3f1b168067b0b1c06fb1094081?s=128&d=identicon&r=PG&f=1", "display_name": "ddz", "link": "https://stackoverflow.com/users/2747961/ddz"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1461187799, "post_id": 36755481, "comment_id": 61091294, "body": "@SouravGhosh i think he just wants to leak memory there :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1461187818, "post_id": 36755481, "comment_id": 61091303, "body": "1) Don&#39;t cast the result of <code>malloc</code>. 2) As I suspect the missing types are <code>typedef</code>ed pointers: Don&#39;t <code>typedef</code> pointers! This obfuscates the special semantics and eventually results in confusion."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1461188373, "post_id": 36755481, "comment_id": 61091562, "body": "<code>l=(CatalogoProdutos)malloc(sizeof(struct ArrayProd));</code> can&#39;t set to caller side variable. Because <code>l</code> is local variable."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1461188401, "post_id": 36755481, "comment_id": 61091573, "body": "There are lots of problems with this code.  <code>inicializa</code> is calling <code>malloc</code>, then immediately overwriting the pointers that were returned with <code>NULL</code>, losing them forever.  At best that&#39;s a memory leak.  <code>freePNP</code> is attempting to free <code>prod</code>, which is an array that is allocated as part of the containing structure.  This makes no sense.  Hint:  The calls to <code>free</code> should be in one-to-one correspondence with the calls to <code>malloc</code>."}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 0, "creation_date": 1544103597, "post_id": 36755481, "comment_id": 94163649, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2902064/how-to-track-down-a-double-free-or-corruption-error\">How to track down a &quot;double free or corruption&quot; error</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5425, "user_id": 583044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ad7ef9756043aad048a7f0e70c724f?s=128&d=identicon&r=PG", "display_name": "tinman", "link": "https://stackoverflow.com/users/583044/tinman"}, "is_accepted": false, "score": 2, "last_activity_date": 1461187678, "creation_date": 1461187678, "answer_id": 36755538, "question_id": 36755481, "link": "https://stackoverflow.com/questions/36755481/double-free-or-corruption-faststop/36755538#36755538", "title": "Double free or corruption (faststop)", "body": "<p>You are trying to free the member of the struct that is not dynamically allocated.</p>\n\n<pre><code>free (lista-&gt;prod);\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4615871, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/937452189628154/picture?type=large", "display_name": "Jos&#233; Cunha", "link": "https://stackoverflow.com/users/4615871/jos%c3%a9-cunha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1461187847, "creation_date": 1461187473, "last_edit_date": 1461187847, "question_id": 36755481, "link": "https://stackoverflow.com/questions/36755481/double-free-or-corruption-faststop", "title": "Double free or corruption (faststop)", "body": "<p>I was clearing memory from previous mallocs  and I  got this error :\n<strong><em>Error in `./prot': double free or corruption (fasttop)</em></strong> . I allocated memory for some structs and I got this error when trying to free them.\nThis are the structs I used:</p>\n\n<pre><code>struct ProdutoN\n{\n    char prod[MAXBUFFPROD];\n    int altura;\n    struct ProdutoN *esq;\n    struct ProdutoN *dir;\n};\n\n\nstruct ArrayProd\n{\n    ProdutoNP lista[26];\n    int tamanho[26];\n};\n</code></pre>\n\n<p>I created an incomplete type called <code>CatalogoProdutos</code> that points to the struct called <code>ArrayProd</code>. Inside that same struct I created an incomplete type called <code>ProdutoNP</code> that points to the struct called <code>ProdutoN</code> (which is an avl tree). This is how I have iniciated this structs :</p>\n\n<pre><code>void inicializa(CatalogoProdutos l)\n{\n    int i;\n    l=(CatalogoProdutos)malloc(sizeof(struct ArrayProd));\n    for(i=0;i&lt;26;i++)\n    {\n\n        l-&gt;lista[i] = (ProdutoNP)malloc(sizeof(struct ProdutoN));\n        l-&gt;lista[i] = NULL;\n        l-&gt;tamanho[i]=0;\n\n    }\n\n}\n</code></pre>\n\n<p>This is how I tried to free this :</p>\n\n<pre><code>void freePNP (ProdutoNP lista)\n{\n    if (lista == NULL)\n    return;\n\n    free (lista-&gt;prod);\n    freePNP (lista-&gt;esq);\n    freePNP (lista-&gt;dir);\n\n    free(lista);\n}\nvoid freeCP (CatalogoProdutos l)\n{\n    int i;\n\n    if (l == NULL)\n    return; \n\n    for (i = 0 ; i &lt; 26 ; i++)\n    freePNP(l-&gt;lista[i]);\n\n    free(l);\n}\n</code></pre>\n\n<p>Definitions of the incomplete types:</p>\n\n<pre><code>typedef struct ProdutoN *ProdutoNP;\ntypedef struct ArrayProd *CatalogoProdutos;\n</code></pre>\n\n<p><strong><em>What I am doing wrong ?</em></strong></p>\n"}, {"tags": ["c", "pointers", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 3, "creation_date": 1461190279, "post_id": 36755436, "comment_id": 61092293, "body": "Your call to <code>malloc</code> is using the wrong size.  You need <code>sizeof(card)</code>, not <code>sizeof(card *)</code>.  This is a segmentation fault just waiting to happen."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 2, "creation_date": 1461192502, "post_id": 36755436, "comment_id": 61093108, "body": "<code>newCard = (card*)malloc(sizeof(card*));</code> then <code>newCard = hand;</code> causes a serious memory leak. You are allocating a memory for <code>NewCard</code> and then subsequently losing track of it."}, {"owner": {"reputation": 67, "user_id": 5870908, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/474aac776668d4360f58c1d8aee802e3?s=128&d=identicon&r=PG&f=1", "display_name": "John F.", "link": "https://stackoverflow.com/users/5870908/john-f"}, "reply_to_user": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1461210569, "post_id": 36755436, "comment_id": 61097794, "body": "Thank you @TomKarzes! I completely missed that extra asterisk."}, {"owner": {"reputation": 67, "user_id": 5870908, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/474aac776668d4360f58c1d8aee802e3?s=128&d=identicon&r=PG&f=1", "display_name": "John F.", "link": "https://stackoverflow.com/users/5870908/john-f"}, "reply_to_user": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1461210616, "post_id": 36755436, "comment_id": 61097809, "body": "@alvits that would explain the bad access error. Unfortunately though my many attempts to fix this function I ended up just making it worse by losing track of memory! thank you"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 5870908, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/474aac776668d4360f58c1d8aee802e3?s=128&d=identicon&r=PG&f=1", "display_name": "John F.", "link": "https://stackoverflow.com/users/5870908/john-f"}, "edited": false, "score": 0, "creation_date": 1461211327, "post_id": 36755644, "comment_id": 61097999, "body": "I am a little confused with your format here. I have never seen pointing to a node in a list in this kind of format <code>card* current = list -&gt; head;</code>. Are you just saying that the current should be set to the head of the list? Also, why would I not want to free a node in the second stage? I want to delete that node anyway; why could these two steps not be done in the same function?"}, {"owner": {"reputation": 64, "user_id": 5990939, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X2hwK.jpg?s=128&g=1", "display_name": "PSD", "link": "https://stackoverflow.com/users/5990939/psd"}, "reply_to_user": {"reputation": 67, "user_id": 5870908, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/474aac776668d4360f58c1d8aee802e3?s=128&d=identicon&r=PG&f=1", "display_name": "John F.", "link": "https://stackoverflow.com/users/5870908/john-f"}, "edited": false, "score": 0, "creation_date": 1461213195, "post_id": 36755644, "comment_id": 61098548, "body": "what is your list structure? in the title you have said you wish to copy a node to another list if thats the case you are simply getting the pointer to point to the address of the node. I will add an example of how I would use this let me know if that doesn&#39;t clarify"}, {"owner": {"reputation": 67, "user_id": 5870908, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/474aac776668d4360f58c1d8aee802e3?s=128&d=identicon&r=PG&f=1", "display_name": "John F.", "link": "https://stackoverflow.com/users/5870908/john-f"}, "edited": false, "score": 0, "creation_date": 1461222709, "post_id": 36755644, "comment_id": 61102875, "body": "My list structure is <code>struct card_s { char suit; int face; struct card_s *listp; }card;</code> but i think that clarified it! thank you so much!"}, {"owner": {"reputation": 64, "user_id": 5990939, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X2hwK.jpg?s=128&g=1", "display_name": "PSD", "link": "https://stackoverflow.com/users/5990939/psd"}, "reply_to_user": {"reputation": 67, "user_id": 5870908, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/474aac776668d4360f58c1d8aee802e3?s=128&d=identicon&r=PG&f=1", "display_name": "John F.", "link": "https://stackoverflow.com/users/5870908/john-f"}, "edited": false, "score": 0, "creation_date": 1461224205, "post_id": 36755644, "comment_id": 61103905, "body": "let me know if you need help on the initialization/freeing  otherwise good luck with it mate"}], "tags": [], "owner": {"reputation": 64, "user_id": 5990939, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/X2hwK.jpg?s=128&g=1", "display_name": "PSD", "link": "https://stackoverflow.com/users/5990939/psd"}, "is_accepted": false, "score": 1, "last_activity_date": 1461214496, "last_edit_date": 1461214496, "creation_date": 1461188177, "answer_id": 36755644, "question_id": 36755436, "link": "https://stackoverflow.com/questions/36755436/how-to-add-a-node-from-one-linked-list-onto-another/36755644#36755644", "title": "How to add a node from one linked list onto another", "body": "<p>Not sure if this is what your really asking but you need to remove and free a node you want to keep track of where you are in the list and bypass that node <strong>then</strong> free it</p>\n\n<pre><code>card * current = list -&gt; head;\ncard * next_node = current -&gt; next;\n /* To delete the next node*/\ncurrent-&gt;next = next_node-&gt; next;\nfree(next_node-&gt;data);\nfree(next_node);    \n</code></pre>\n\n<p>To move a node from one list to another its just a matter of finding your insertion point in list1 (strcmp?) then you can iterate over list2 finding the node you wish to move, you dont need to memove or free at this stage you need to set pointers to it</p>\n\n<pre><code>node2 -&gt; next = node1 -&gt; next;\nnode1 -&gt; next = &amp;node2;\n</code></pre>\n\n<p>list contains the head </p>\n\n<pre><code> struct list\n {\n     node * head;\n     struct data * card_data;\n }\n</code></pre>\n\n<p>to use this linked list I would  have nodes</p>\n\n<pre><code> struct *node\n {\n     struct data * card_data; /*contains the details of this card*/\n     node * next; /* pointer to the next node*/\n }\n</code></pre>\n\n<p>itterate in the following way assuming you have initialized he node (each pointer needs to be malloc'd)</p>\n\n<pre><code>node cur = list -&gt;head;\nif (cur == NULL)\n{ \n     return EXIT_FAILURE;\n}\ndo\n{\n\n    /* some check on the node */\n    cur =  cur- &gt; next;\n    next = cur -&gt; next;\n}while (next != NULL)\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5870908, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/474aac776668d4360f58c1d8aee802e3?s=128&d=identicon&r=PG&f=1", "display_name": "John F.", "link": "https://stackoverflow.com/users/5870908/john-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2074, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461214496, "creation_date": 1461187305, "last_edit_date": 1495541257, "question_id": 36755436, "link": "https://stackoverflow.com/questions/36755436/how-to-add-a-node-from-one-linked-list-onto-another", "title": "How to add a node from one linked list onto another", "body": "<p>I am trying to remove a 'card' (node) from a linked list called deck and move it onto the player's hand. Overall, this is where a player would be drawing a card so the card would be added to their hand and completely deleted from the deck. I viewed <a href=\"https://stackoverflow.com/q/20636265/5870908\">Linked Lists: Moving a node from one linked list to the next</a> and tried to follow this format along with a modified format of my dealing cards function. Unfortunately, my function is not outputting anything. I have modified this function many different times, but I think the problem lies with allocating the memory to a new space in the hand. I also tried pointer-to-pointers for hand and deck because that solved many of the other problems in my code, but my method did not seem to make a difference. Here is my most recent attempt. It is definitely one of my more complicated attempts for whenever I edit it, I just seem to add more lines of code. </p>\n\n<pre><code>void drawCard (card* hand, card* deck) {\n   card* newCard = NULL;\n   newCard = (card*)malloc(sizeof(card*));\n   deck = deck-&gt;listp;\n   newCard = hand;\n   while (hand != NULL) {\n      hand = hand-&gt;listp;\n   }\n   newCard-&gt;face = deck-&gt;face;\n   newCard-&gt;suit = deck-&gt;suit;\n   hand = newCard-&gt;listp;\n\n}\n</code></pre>\n\n<p>My idea while writing this is I move the deck to the next position in the list (the first position is the \"Top Card\" in play) and that will be card for drawing. I then set newCard equal to the first position of hand, and then move hand to the very end of the list. I thought this would open a spot up at the top of player's hand, but I seem to be mistaken. Also, I realized I did not add a section to delete the node from the deck. Would I just create a temp variable, copy the card node to the temp, and then free it from the deck? Any guidance would be very appreciated. </p>\n"}, {"tags": ["c", "linux", "sockets", "pam", "linux-capabilities"], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 719974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bca8442baceae9a2cbc45223e77f688?s=128&d=identicon&r=PG", "display_name": "heath", "link": "https://stackoverflow.com/users/719974/heath"}, "is_accepted": true, "score": 1, "last_activity_date": 1461698136, "creation_date": 1461698136, "answer_id": 36873841, "question_id": 36755412, "link": "https://stackoverflow.com/questions/36755412/how-do-i-use-the-pam-capabilities-module-to-grant-capabilities-to-a-particular-u/36873841#36873841", "title": "How do I use the PAM capabilities module to grant capabilities to a particular user and executable?", "body": "<p>I figured out that I had the wrong capabilities on the file.  In order for the process to be able to obtain effective capabilities from the pam_cap module, the file needs to be configured with the \"inherited\" capability as well.  So, setting caps on the file should be:</p>\n\n<pre><code>sudo setcap cap_net_raw+ip socket\n</code></pre>\n\n<p>However, I still could only get the program to work successfully from a normal tty login, and not an ssh login.</p>\n"}], "owner": {"reputation": 107, "user_id": 719974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bca8442baceae9a2cbc45223e77f688?s=128&d=identicon&r=PG", "display_name": "heath", "link": "https://stackoverflow.com/users/719974/heath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1863, "favorite_count": 0, "accepted_answer_id": 36873841, "answer_count": 1, "score": 5, "last_activity_date": 1514980437, "creation_date": 1461187213, "last_edit_date": 1514980437, "question_id": 36755412, "link": "https://stackoverflow.com/questions/36755412/how-do-i-use-the-pam-capabilities-module-to-grant-capabilities-to-a-particular-u", "title": "How do I use the PAM capabilities module to grant capabilities to a particular user and executable?", "body": "<p>I'm attempting to make a program which uses raw sockets run correctly as non-root with Linux capabilities. The program is as follows:</p>\n\n<pre><code>#include &lt;netinet/ip.h&gt;\n\nint main()\n{\n  int sd = socket(PF_INET, SOCK_RAW, IPPROTO_TCP);\n  if(sd &lt; 0)\n  {\n    perror(\"socket() error\");\n    return 1;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>If I compile it and run it as non-root, I get an error, as expected:</p>\n\n<pre><code>[user@localhost ~]$ make socket\ncc     socket.c   -o socket\n[user@localhost ~]$ ./socket \nsocket() error: Operation not permitted\n</code></pre>\n\n<p>If I add the <code>cap_net_raw</code> capability, as an effective and permitted capability, it works.</p>\n\n<pre><code>[user@localhost ~]$ sudo setcap cap_net_raw+ep socket\n[sudo] password for user: \n[user@localhost ~]$ ./socket \n[user@localhost ~]$ \n</code></pre>\n\n<p>Now, I want to use <code>pam_cap.so</code> to make it so that only a particular user can run this program with <code>cap_net_raw</code>, instead of everyone. My <code>/etc/security/capability.conf</code> is:</p>\n\n<pre><code>cap_net_raw user\n</code></pre>\n\n<p>My <code>/etc/pam.d/login</code> is (note that I also tried <code>/etc/pam.d/sshd</code> but that did not seem to work either):</p>\n\n<pre><code>#%PAM-1.0\nauth [user_unknown=ignore success=ok ignore=ignore default=bad] pam_securetty.so\nauth       substack     system-auth\nauth       include      postlogin\n#Added this line to use pam_cap\nauth       required     pam_cap.so\naccount    required     pam_nologin.so\naccount    include      system-auth\npassword   include      system-auth\n# pam_selinux.so close should be the first session rule\nsession    required     pam_selinux.so close\nsession    required     pam_loginuid.so\nsession    optional     pam_console.so\n# pam_selinux.so open should only be followed by sessions to be executed in the user context\nsession    required     pam_selinux.so open\nsession    required     pam_namespace.so\nsession    optional     pam_keyinit.so force revoke\nsession    include      system-auth\nsession    include      postlogin\n-session   optional     pam_ck_connector.so\n</code></pre>\n\n<p>I had an ssh session, I logged out and back in after that and executed the following commands:</p>\n\n<pre><code>[user@localhost ~]$ sudo setcap cap_net_raw+p socket\n[sudo] password for user: \n[user@localhost ~]$ getcap socket\nsocket = cap_net_raw+p\n[user@localhost ~]$ ./socket \nsocket() error: Operation not permitted\n[user@localhost ~]$ \n</code></pre>\n\n<p>My question is:  Why was I not able to execute the 'socket' program with <code>cap_net_raw</code>? I thought that when I logged in, my user would obtain it as a permitted capability, and it would allow 'user' to run 'socket' with the <code>cap_net_raw</code>.</p>\n\n<p>This is what I'm running on:</p>\n\n<pre><code>[user@localhost ~]$ uname -a\nLinux localhost.localdomain 3.10.0-123.el7.x86_64 #1 SMP Mon Jun 30 12:09:22 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n[user@localhost ~]$ cat /etc/redhat-release \nCentOS Linux release 7.0.1406 (Core) \n</code></pre>\n"}, {"tags": ["c", "string", "pointers", "printf"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1461187485, "post_id": 36755360, "comment_id": 61091156, "body": "You invoke undefined behaviour if the character is not in the string."}, {"owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "edited": false, "score": 0, "creation_date": 1461188012, "post_id": 36755360, "comment_id": 61091401, "body": "To avoid it, he must use <code>strchrnul</code>"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1461187115, "creation_date": 1461187115, "answer_id": 36755391, "question_id": 36755360, "link": "https://stackoverflow.com/questions/36755360/c-programming-strchr-returns-pointer/36755391#36755391", "title": "C programming strchr returns pointer", "body": "<p>Have a look at the <code>%s</code> conversion specifier properties. When used in <code>printf()</code>, it expects an argument of type <code>char *</code> and so it gets. All is well.</p>\n\n<p>To quote <code>C11</code> standard, chapter \u00a77.21.6.1</p>\n\n<blockquote>\n  <p><code>s</code><br> If no <code>l</code> length modifier is present, the argument shall be a pointer to the initial\n  element of an array of character type.<sup>280)</sup> Characters from the array are\n  written up to (but not including) the terminating null character. [...]</p>\n</blockquote>\n\n<p>In other words, to print out a <em>string</em> using <code>%s</code>, you have to supply the pointer to the start of the string, that is <code>res</code>, not <code>*res</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1461188115, "post_id": 36755546, "comment_id": 61091454, "body": "&quot;Every for-loop is to be represented by a while loop&quot; What do you mean? <code>for</code> is <i>similar</i> to a <code>while</code> loop with stuff added before/within, but there are some cases where it&#39;s tricky to emulate the same behaviour using <code>while</code>, and really, why bother trying?"}, {"owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1461188205, "post_id": 36755546, "comment_id": 61091495, "body": "just theoretically possible"}], "tags": [], "owner": {"reputation": 3566, "user_id": 4325010, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/048bff2cd5cae6d0a93ecd485f6690ad?s=128&d=identicon&r=PG&f=1", "display_name": "users at 4325010", "link": "https://stackoverflow.com/users/4325010/users-at-4325010"}, "is_accepted": false, "score": 0, "last_activity_date": 1461187710, "creation_date": 1461187710, "answer_id": 36755546, "question_id": 36755360, "link": "https://stackoverflow.com/questions/36755360/c-programming-strchr-returns-pointer/36755546#36755546", "title": "C programming strchr returns pointer", "body": "<blockquote>\n  <p>\"since the string is the value in ret, which is accessed by *ret\"</p>\n</blockquote>\n\n<p>No. A string in C is a number of chars ending with <code>\\0</code>. So <code>*ret</code> will point to the first char of the <em>many</em>. There is no unitary value of a String as e.g. in Java.</p>\n\n<p><code>*</code> is the dereference operator.<code>*ret</code> will give the <code>.</code> since you use <code>*</code> to access the pointed element. The <code>%s</code>-printf format uses a pointer to chars (the pointer is denoted only by the name <code>ret</code>). It goes on until it encounters <code>\\0</code>, the terminating character. </p>\n\n<p>The function <code>strchr</code> from Linux man(3): </p>\n\n<blockquote>\n  <p>The strchr() function returns a pointer to the first occurrence of\n         the character c in the string s.</p>\n</blockquote>\n\n<p>You could implement it manually with a while loop and simply incrementing the pointer. However, you would still need the <code>%s</code>-specifier to print it. Or the tedious for loop and a function call on every char. <em>Inefficient.</em></p>\n\n<p><em>Note</em>: Every for-loop is to be represented by a while loop, so the above mentioned loops are not firmly set.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1461187779, "creation_date": 1461187779, "answer_id": 36755557, "question_id": 36755360, "link": "https://stackoverflow.com/questions/36755360/c-programming-strchr-returns-pointer/36755557#36755557", "title": "C programming strchr returns pointer", "body": "<blockquote>\n  <p>To use the value/ what the pointer is pointed to, I do <code>*ret</code>.</p>\n</blockquote>\n\n<p>Yes this is useful if code needs to use that value, a single character only.  But code wants to print the contents of a <em>string</em>.  A <em>string</em> is a sequence (or array) of characters up to and including the null character.</p>\n\n<blockquote>\n  <p>Why don't we use <code>*ret</code> to get <code>\".tutorialspoint.com\"</code> since the string is the value in <code>ret</code>, which is accessed by <code>*ret</code>?</p>\n</blockquote>\n\n<p><code>*ret</code> resolves to a single a character.  <code>printf(\"%s\", ...</code> expects a pointer to a sequence or array of characters.  By using <code>printf(\"|%s|\\n\", ret);</code>, <code>printf()</code> knows the address of the beginning of the <em>string</em> and can then print the initial character <code>'.'</code> and then subsequent ones <code>'t'</code>, <code>'u'</code>, <code>'t'</code>, ... until encountering a null character.</p>\n\n<hr>\n\n<p>Better code would have checked the <code>ret != NULL</code> before attempting the <code>printf()</code></p>\n\n<pre><code>ret = strchr(str, ch);\nif (ret != NULL) {\n  printf(\"String after |%c| is - |%s|\\n\", ch, ret);\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5276139, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/322d808b7d2515e7bd45a9784208d528?s=128&d=identicon&r=PG&f=1", "display_name": "amay20", "link": "https://stackoverflow.com/users/5276139/amay20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1461187779, "creation_date": 1461187020, "last_edit_date": 1461187361, "question_id": 36755360, "link": "https://stackoverflow.com/questions/36755360/c-programming-strchr-returns-pointer", "title": "C programming strchr returns pointer", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main ()\n{\n   const char str[] = \"http://www.tutorialspoint.com\";\n   const char ch = '.';\n   char *ret;\n\n   ret = strchr(str, ch);\n\n   printf(\"String after |%c| is - |%s|\\n\", ch, ret);\n\n   return(0);\n}\n</code></pre>\n\n<p>This code is copied from tutorialspoint. </p>\n\n<p>From what I understand, <code>ret</code> is a pointer to a character. To use the value/ what the pointer is pointed to, I do <code>*ret</code>. </p>\n\n<p>However, in this example, just by calling <code>ret</code>,<code>printf()</code> prints out <code>.tutorialspoint.com</code>. Why don't we use <code>*ret</code> to get <code>.tutorialspoint.com</code> since the string is the value in <code>ret</code>, which is accessed by <code>*ret</code>?</p>\n"}, {"tags": ["python", "c", "python-c-api", "numerical-integration", "python-extensions"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1461186603, "post_id": 36755127, "comment_id": 61090692, "body": "Integration is a wrong tag here - please take time to read the tag descriptions."}, {"owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "edited": false, "score": 0, "creation_date": 1461188055, "post_id": 36755127, "comment_id": 61091421, "body": "what have you tried? where does the quad function come from? how about <a href=\"https://en.m.wikipedia.org/wiki/Monte_Carlo_integration\" rel=\"nofollow noreferrer\">monte carlo integration</a>"}, {"owner": {"reputation": 21, "user_id": 5488841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514f47eb79e58bbdc559ee856185ee5d?s=128&d=identicon&r=PG&f=1", "display_name": "sunra", "link": "https://stackoverflow.com/users/5488841/sunra"}, "reply_to_user": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "edited": false, "score": 0, "creation_date": 1461189255, "post_id": 36755127, "comment_id": 61091906, "body": "@Julius the first code block is python calling scipy.integrate.quad. Using quad to integrate the inner integral works, but is still slow for the limits I&#39;m using. Thank you for monte carlo, I&#39;ll look into that as a possible option, but the C code is so fast over the inner integral, I&#39;m sure if I could figure out how to do this in C it will be very useful in the future."}, {"owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "edited": false, "score": 0, "creation_date": 1461190363, "post_id": 36755127, "comment_id": 61092325, "body": "it&#39;s already in Fortran <a href=\"https://github.com/scipy/scipy/blob/v0.17.0/scipy/integrate/quadpack.py#L45-L360\" rel=\"nofollow noreferrer\">github.com/scipy/scipy/blob/v0.17.0/scipy/integrate/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5488841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514f47eb79e58bbdc559ee856185ee5d?s=128&d=identicon&r=PG&f=1", "display_name": "sunra", "link": "https://stackoverflow.com/users/5488841/sunra"}, "edited": false, "score": 0, "creation_date": 1461190806, "post_id": 36756084, "comment_id": 61092503, "body": "Thanks, I have written a pure python implementation using quad and dblquad, but this takes days (probably over a week) to run and I&#39;m limited to 5 days max mainframe time. It is clear from comparing just the inner integral the C-extension module is orders of magnitude faster. I would like to rewrite the extension mod so that calc.gauss1 can integrate over calc.gauss2, thus replacing all integration in python, but I&#39;m limited in my coding skills."}, {"owner": {"reputation": 21, "user_id": 5488841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514f47eb79e58bbdc559ee856185ee5d?s=128&d=identicon&r=PG&f=1", "display_name": "sunra", "link": "https://stackoverflow.com/users/5488841/sunra"}, "edited": false, "score": 0, "creation_date": 1461190984, "post_id": 36756084, "comment_id": 61092558, "body": "Ok, I&#39;v just seen your edit. I&#39;ll look into multithreading, but again that&#39;s something I have no experience with."}, {"owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "reply_to_user": {"reputation": 21, "user_id": 5488841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514f47eb79e58bbdc559ee856185ee5d?s=128&d=identicon&r=PG&f=1", "display_name": "sunra", "link": "https://stackoverflow.com/users/5488841/sunra"}, "edited": false, "score": 0, "creation_date": 1461191636, "post_id": 36756084, "comment_id": 61092797, "body": "it&#39;s pretty simple <a href=\"http://www.cplusplus.com/reference/thread/thread/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/thread/thread</a> just remember if you pass pointers that threads share out of function memory space"}], "tags": [], "owner": {"reputation": 3184, "user_id": 447599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/16869820699afa8b6b6d358e9234f1d7?s=128&d=identicon&r=PG", "display_name": "Jules G.M.", "link": "https://stackoverflow.com/users/447599/jules-g-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1461190672, "last_edit_date": 1461190672, "creation_date": 1461189996, "answer_id": 36756084, "question_id": 36755127, "link": "https://stackoverflow.com/questions/36755127/equivalent-of-python-lambda-function-for-c-python-extensions/36756084#36756084", "title": "Equivalent of python lambda function for C (Python Extensions)", "body": "<p>Maybe the source code for scipy integrate quad is a good place to start if you haven't looked there : <a href=\"https://github.com/scipy/scipy/blob/v0.17.0/scipy/integrate/quadpack.py#L45-L360\" rel=\"nofollow\">https://github.com/scipy/scipy/blob/v0.17.0/scipy/integrate/quadpack.py#L45-L360</a></p>\n\n<p>Looks like most of the work is already being done by native Fortran code, which is normally either as fast or faster than C/C++ code. You will be hard pressed to improve on that, unless you create/find a CUDA implementation.</p>\n\n<p>You make the Fortran code multithreaded, if it's not already and the source is open. Lastly, you could make a threading dispatcher in C/Fortran  (python doesn't support real threading because of the GIL) and just make your calls to quad parallel from one another atleast. Interfacing calc directly with Fortran quad would probably save you some decent overhead too.</p>\n"}], "owner": {"reputation": 21, "user_id": 5488841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/514f47eb79e58bbdc559ee856185ee5d?s=128&d=identicon&r=PG&f=1", "display_name": "sunra", "link": "https://stackoverflow.com/users/5488841/sunra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461190672, "creation_date": 1461186158, "last_edit_date": 1461189663, "question_id": 36755127, "link": "https://stackoverflow.com/questions/36755127/equivalent-of-python-lambda-function-for-c-python-extensions", "title": "Equivalent of python lambda function for C (Python Extensions)", "body": "<p>I'v written a Python extension module with C to speed up computation times. The first step is a 2D integration of a function f(x,y,k), which is very fast and allows me to integrate over y in [y1(x),y2(x)] and x in [a,b] whilst assigning a float to k. But I really need to integrate k over the range [c,d]. Currently, I'm doing something like this in Python</p>\n\n<pre><code>inner = lambda k: calc.kernel(l,k,ki)\nI = quad(inner,c,d)[0]\n</code></pre>\n\n<p>where calc is my C-extension module and calc.kernel calls gauss2 to perform 2D integration. l and ki are just other variables. But with my data, quad still takes many hours to finish. I would like to do all calculations within the C-extension module, but I'm really stumped on how to implement this outer integral. Here is my C-code</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;math.h&gt;\n\ndouble A96[96]={        /* abscissas for 96-point Gauss   quadrature */\n    };\n\ndouble W96[96]={            /* weights for 96-point Gauss quadrature */\n    };\n\ndouble Y1(double x){\n    return 0;\n    }\n\ndouble Y2(double x){\n    return x;\n    }\n\ndouble gauss1(double F(double),double a,double b)\n{ /* 96-pt Gauss qaudrature integrates F(x) from a to b */\nint i;\ndouble cx,dx,q;\ncx=(a+b)/2;\ndx=(b-a)/2;\nq=0;\nfor(i=0;i&lt;48;i++)\n    q+=W96[i]*(F(cx-dx*A96[i])+F(cx+dx*A96[i]));\nreturn(q*dx);\n}\n\ndouble gauss2(double F(double,double,int,double,double),double Y1(double),double Y2(double),double a,double b,int l,double k, double ki)\n{/* 96x96-pt 2-D Gauss qaudrature integrates\n           F(x,y) from y=Y1(x) to Y2(x) and x=a to b */\nint i,j,h;\ndouble cx,cy,dx,dy,q,w,x,y1,y2;\ncx=(a+b)/2;\ndx=(b-a)/2;\nq=0;\nfor(i=0;i&lt;48;i++)\n    {\n    for(h=-1;h&lt;=1;h+=2)\n        {\n        x=cx+h*dx*A96[i];\n        y1=Y1(x);\n        y2=Y2(x);\n        cy=(y1+y2)/2;\n        dy=(y2-y1)/2;\n        w=dy*W96[i];\n        for(j=0;j&lt;48;j++)\n            q+=w*W96[j]*(F(x,cy-dy*A96[j],l,k,ki)+F(x,cy+dy*A96[j],l,k,ki));\n        }\n    }\nreturn(q*dx);\n}\n\ndouble ps_fact(double z){\n    double M = 0.3;\n    return 3/2*(M*(1+z)*(1+z)*(1+z) + (1-M))*(M*(1+z)*(1+z)*(1+z) + (1-M))*(M*(1+z)*(1+z)*(1+z) + (1-M))/(1+z)/(1+z);\n    }\ndouble drdz(double z){\n    double M = 0.3;\n    return 3000/sqrt(M*(1+z)*(1+z)*(1+z) + (1-M));\n}\n\ndouble rInt(double z){\n    double M = 0.3;\n    return 3000/sqrt(M*(1+z)*(1+z)*(1+z) + (1-M));\n}\n\ndouble kernel_func ( double y , double x, int l,double k, double ki) {\n    return ps_fact(y)*ki*rInt(x)*sqrt(M_PI/2/rInt(x))*jn(l+0.5,ki*rInt(x))*drdz(x)*(rInt(x)-rInt(y))/rInt(y)*sqrt(M_PI/2/rInt(y))*jn(l+0.5,k*rInt(y))*drdz(y);\n}\n\nstatic PyObject* calc(PyObject* self, PyObject* args)\n{\n    int l;\n    double k, ki;\n    if (!PyArg_ParseTuple(args, \"idd\", &amp;l, &amp;k, &amp;ki))\n        return NULL;\n\n    double res;\n    res = gauss2(kernel_func,Y1, Y2, 0,10,l, k, ki);\n\n    return Py_BuildValue(\"d\", res);\n}\n\nstatic PyMethodDef CalcMethods[] = {\n    {\"kernel\", calc, METH_VARARGS, \"Calculates kernel values.\"},\n    {NULL, NULL, 0, NULL}\n};\n\nPyMODINIT_FUNC initcalc(void){\n    (void) Py_InitModule(\"calc\", CalcMethods);\n</code></pre>\n\n<p>A96 and W96 both contain the points for the Gaussian quadrature, so don't worry that they are empty here. I should add I don't take any credit for the functions gauss1 and gauss2.</p>\n\n<p>EDIT: python code was wrong - edited now.</p>\n"}, {"tags": ["c", "getopt", "getopt-long"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1461187568, "post_id": 36755103, "comment_id": 61091184, "body": "The one assumption that isn&#39;t often stated is that you call <code>getopt()</code> et al consistently with the same values for <code>argc</code> and <code>argv</code>, rather than changing the list on each call.  If you use <code>getopt()</code> to process command line arguments, and then subsequently use it to access some other set of arguments, you could \u2014 not necessarily will \u2014 run into problems.  Are you doing anything like that?  (Basically, there&#39;s no provision for concurrency \u2014 it isn&#39;t thread-safe \u2014 and there&#39;s no provision for reuse.  There usually is a semi-undocumented way to reset the system so it starts over, but it varies.)"}, {"owner": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1461187824, "post_id": 36755103, "comment_id": 61091306, "body": "No calls to <code>getopt</code> come from the same thread and so are done sequentially."}], "answers": [{"comments": [{"owner": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "edited": false, "score": 0, "creation_date": 1461186857, "post_id": 36755158, "comment_id": 61090838, "body": "Okay cool. I really don&#39;t see where that segmentation fault come from... I have printed <code>argv</code> values before a call to the command (it is a shell program) <code>chat -h</code>, the argv is well parsed and argc is set to 2. I have tried a simple call to getopt without any <code>while</code> loop followed immediately by a print of the returned value, and I still get the segmentation fault. I can see it come from the call to <code>getopt_long</code> because the print isn&#39;t done."}, {"owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "reply_to_user": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "edited": false, "score": 0, "creation_date": 1461187159, "post_id": 36755158, "comment_id": 61090994, "body": "So do you call getopt twice in your program? If you call it twice, you need to set <code>optind</code> to <code>0</code> before second call. And provide mcve: <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "edited": false, "score": 0, "creation_date": 1461187729, "post_id": 36755158, "comment_id": 61091263, "body": "I have commented the while loop and replaced it with a single call to getopt_long and I get the segmentation fault, so without twice calls, but I have tried to set optind to 0 before the first call and it works. I don&#39;t see it in the man."}], "tags": [], "owner": {"reputation": 3370, "user_id": 2819650, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd1c2520461767f78a63e6cfb6431b1c?s=128&d=identicon&r=PG&f=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/2819650/coredump"}, "is_accepted": true, "score": 3, "last_activity_date": 1461186302, "creation_date": 1461186302, "answer_id": 36755158, "question_id": 36755103, "link": "https://stackoverflow.com/questions/36755103/do-c-getopt-and-getopt-long-only-work-for-main-arguments/36755158#36755158", "title": "Do C getopt and getopt_long only work for main arguments?", "body": "<p>Both <code>getopt()</code> and <code>getopt_long()</code> will work with every proper <code>char **</code> and <code>int</code>, there is no difference between <code>argv</code> and any other <code>char **</code>. \nIf you'll pass <code>argv</code> and <code>argc</code>, or their copies from main to your function and call <code>getopt()</code> from there it will work. Show how your function got <code>argc</code> and <code>argv</code>;</p>\n"}], "owner": {"reputation": 877, "user_id": 4830221, "user_type": "registered", "accept_rate": 51, "profile_image": "https://graph.facebook.com/10204799712886824/picture?type=large", "display_name": "Nicolas Scotto Di Perto", "link": "https://stackoverflow.com/users/4830221/nicolas-scotto-di-perto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 0, "accepted_answer_id": 36755158, "answer_count": 1, "score": 1, "last_activity_date": 1461186958, "creation_date": 1461186090, "last_edit_date": 1461186958, "question_id": 36755103, "link": "https://stackoverflow.com/questions/36755103/do-c-getopt-and-getopt-long-only-work-for-main-arguments", "title": "Do C getopt and getopt_long only work for main arguments?", "body": "<p>the question is pretty clear, I wonder because the man says </p>\n\n<blockquote>\n  <p>The  getopt() function parses the command-line arguments.</p>\n</blockquote>\n\n<p>And I am trying to use it with another function which has the same signature as the main and the <code>argc</code> and <code>argv</code> are obtained with <code>wordexp</code> so everythings seems the same, but when calling getopt I get a segmentation fault immediately after calling getopt_long.</p>\n\n<pre><code>#define   OPT_HELP    'h'\n#define   OPTL_HELP   \"help\"\n#define   OPT_MESS    'm'\n#define   OPTL_MESS   \"message\"\n\n#define   OPT_STRING  \"hm:\"\n\nstruct option longopts[] = {\n  {OPTL_HELP,     no_argument, 0, OPT_HELP},\n  {OPTL_MESS,     required_argument, 0, OPT_MESS},\n  {0, 0, 0, 0}\n};\n\n#define FLAG_MESS 1\n\nvoid cmd_chat(int argc, char **argv)\n{\n  int c, indexptr;\n  short flag = 0;\n  char message[481];\n  while ((c = getopt_long(argc, argv, OPT_STRING,\n          longopts, &amp;indexptr)) != -1) {\n    debug(MAGENTA \"cmd_chat\", MAGENTA \"c value: %d\", c);\n    switch (c) {\n      case OPT_HELP:\n        debug(MAGENTA \"cmd_chat\", MAGENTA \"calling help\");\n        help(argv[0]);\n        return;\n        break;\n      case OPT_MESS:\n        flag |= FLAG_MESS;\n        strncpy(message, optarg, 481);\n        break;\n      default:\n        usage(argv[0]);\n        break;\n    }\n  }\n\n\n[...]\n</code></pre>\n\n<p>It might be that, but if so I wonder why it is like that also why we should pass the <code>argc</code> and <code>argv</code> to <code>getopt</code>(<code>_long</code>).</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1461186073, "post_id": 36755003, "comment_id": 61090399, "body": "Are you intentionally using the same semaphore (<code>&#47;mysem</code>) for both full and empty? That doesn&#39;t look logically correct."}, {"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1461186230, "post_id": 36755003, "comment_id": 61090473, "body": "I don&#39;t know where is the file of the semaphore, so I searched online and one example said /mysem will store the semaphore. I&#39;m not sure what should the file be."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 2, "creation_date": 1461186720, "post_id": 36755003, "comment_id": 61090764, "body": "Perhaps you should go back to read the <a href=\"http://linux.die.net/man/3/sem_open\" rel=\"nofollow noreferrer\">sem_open man page</a>. It answers the questions you have asked so far. In particular, opening a semaphore with the same name yields the same semaphore. That&#39;s not what you want for this program. Instead, you may want to for example open <code>&quot;&#47;full_sem&quot;</code> for one and <code>&quot;&#47;empty_sem&quot;</code> for the other."}, {"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "reply_to_user": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 0, "creation_date": 1461186732, "post_id": 36755003, "comment_id": 61090774, "body": "@kaylum I try to change the name of the semaphores to /empty and /full. The program run correctly. So the first variable in sem_open() is the semaphore name, right?"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 0, "creation_date": 1461243719, "post_id": 36756580, "comment_id": 61118193, "body": "Are empty and full semaphores created every time when I run the code? Because today I run the code and the code print nothing, if I change the semaphore name to <code>&#47;empty</code> and <code>&#47;full</code>, the code will run correctly. It can be compiled."}, {"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 1, "creation_date": 1461245126, "post_id": 36756580, "comment_id": 61119345, "body": "I just use <code>sem_unlink</code> to prevent the name has been used. It works."}], "tags": [], "owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "is_accepted": true, "score": 1, "last_activity_date": 1461192554, "creation_date": 1461192554, "answer_id": 36756580, "question_id": 36755003, "link": "https://stackoverflow.com/questions/36755003/initialise-semaphores-using-sem-open/36756580#36756580", "title": "Initialise semaphores using sem_open", "body": "<p>As stated in the <a href=\"http://linux.die.net/man/3/sem_open\" rel=\"nofollow\">sem_open man page</a>: </p>\n\n<blockquote>\n  <p>The semaphore is identified by name.</p>\n</blockquote>\n\n<p>Since your code provides the same name value (<code>/mysem</code>) for both <code>sem_open</code> calls it results in referencing the same semaphore for both full and empty. That's clearly not what the logic of the program should be. Instead, open different semaphores for each. It's also best practice to check the return values of all function calls.</p>\n\n<pre><code>empty = sem_open(\"/empty_sem\", O_CREAT, 0644, BUFFER_SIZE);\nif (empty == SEM_FAILED) {\n     perror(\"Failed to open semphore for empty\");\n     exit(-1);\n}\n\nfull = sem_open(\"/full_sem\", O_CREAT, 0644, 0);\nif (full == SEM_FAILED) {\n     sem_close(empty);\n     perror(\"Failed to open semphore for full\");\n     exit(-1);\n}\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11138, "favorite_count": 0, "accepted_answer_id": 36756580, "answer_count": 1, "score": 0, "last_activity_date": 1461192554, "creation_date": 1461185705, "question_id": 36755003, "link": "https://stackoverflow.com/questions/36755003/initialise-semaphores-using-sem-open", "title": "Initialise semaphores using sem_open", "body": "<p>In my producer and consumer problem, I use sem_open to initalise the semaphores. How could I test if sem_open work in a correct way?</p>\n\n<p>The program can be compiled, but when I run the program it print nothing. I test the program and found the problem maybe about sem_open(). I find if I comment the sem_open() in the program, the program will run correctly. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;stdlib.h&gt; \n#include &lt;unistd.h&gt;\n\n#define BUFFER_SIZE 10\n\nint buffer[BUFFER_SIZE];\npthread_t pro_thread, con_thread;\npthread_mutex_t mutex;\nint counter = 0;\nsem_t  *empty, *full;\n\nvoid print_buffer(int counter) {\n    for (int i = 0; i &lt; counter; i ++)\n    {\n        printf(\"*\");\n    }\n    printf(\"\\n\");\n}\n\nvoid* producer(void* var) {\n    int item;\n    while(1) {\n        item = rand() % 100 + 1;\n        sem_wait(empty);\n        pthread_mutex_lock(&amp;mutex);\n\n        while (counter == BUFFER_SIZE)\n            ; // waiting\n\n        if(counter &lt; BUFFER_SIZE) {\n            buffer[counter] = item;\n            counter ++;\n            printf(\"Producer: \");\n            print_buffer(counter);\n        }\n\n        sleep(1);\n        pthread_mutex_unlock(&amp;mutex);\n        sem_post(full);\n    }\n}\n\nvoid* consumer(void* var) {\n    int item;\n    while(1) {\n        sem_wait(full);\n        pthread_mutex_lock(&amp;mutex);\n\n        while (counter == 0)\n            ; // waiting\n\n        if(counter &gt; 0) {\n            counter --;\n            print_buffer(counter);\n        }\n\n        sleep(1);\n\n        pthread_mutex_unlock(&amp;mutex);\n        sem_post(empty);\n    }\n}\n\nint main(int argc, char *argv[]) {\n    pthread_mutex_init(&amp;mutex, NULL);\n    empty = sem_open(\"/mysem\", O_CREAT, 0644, BUFFER_SIZE);\n    full = sem_open(\"/mysem\", O_CREAT, 0644, 0);\n\n    pthread_create(&amp;pro_thread, NULL, producer, NULL);\n    pthread_create(&amp;con_thread, NULL, consumer, NULL);\n\n    pthread_exit(NULL);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "embedded", "x-macros"], "comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1461186191, "post_id": 36754914, "comment_id": 61090451, "body": "I would assume, the way you create your arrays (X-Macros or not) is unrelated to why they end in RAM and not in flash. It is quite specific to OS, system, Flash type, loading strategies and other settings, what you will eventually end up with. For example, some FLASH memories cannot be randomly adressed and the loader loads the whole image to RAM on startup. More examples: Some FLASH have slower access speed as RAM on some systems, and thus, the system specific tools make according trade off decisions... Tell us more about what you deal with and we might have ideas."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1461186211, "post_id": 36754914, "comment_id": 61090458, "body": "This has nothing to do with X-macros obviously."}, {"owner": {"reputation": 13, "user_id": 3847027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ffc4edb1868f798cb328db7eeb8682b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Ritchey", "link": "https://stackoverflow.com/users/3847027/bob-ritchey"}, "edited": false, "score": 0, "creation_date": 1461188528, "post_id": 36754914, "comment_id": 61091627, "body": "OK, then maybe just a misunderstanding of C. I think maybe I need to emulate what I do without X-macros more fully.  Thanks,"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3847027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ffc4edb1868f798cb328db7eeb8682b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Ritchey", "link": "https://stackoverflow.com/users/3847027/bob-ritchey"}, "edited": false, "score": 0, "creation_date": 1461332405, "post_id": 36757724, "comment_id": 61165225, "body": "Actually the USB controller can access the flash.  If I do this discretely to force it into flash I need to do this <code>const uint8_t PRODUCT_STRING[]         = {&quot;PowerExpander Eq10E&quot;};</code>   Then I need to reference the pointer in a uint32_t array.  The enum is easy.  I think I need to emulate this more directly with my x-macro expansion.  Thanks for your input."}], "tags": [], "owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "is_accepted": false, "score": -1, "last_activity_date": 1461199985, "creation_date": 1461199985, "answer_id": 36757724, "question_id": 36754914, "link": "https://stackoverflow.com/questions/36754914/force-strings-and-pointers-into-flash-when-using-x-macro-expansion/36757724#36757724", "title": "Force strings and pointers into flash when using X-macro expansion", "body": "<p>Your problem lies less with macro expansion or C as it does with the linker and the scatter gather/linker descriptor file, and maybe with your underlying hardware.</p>\n\n<p><code>const</code> data will almost always be directed towards <code>.rodata</code>, which is placed in the memory map by the linker descriptor file, which also (sort of...and probably very indirectly) specifies things that need to be initialized by the startup library or not.   </p>\n\n<p>You might be able to use a <code>#pragma</code> or <code>__attribute__()</code> to change the section name from <code>.rodata</code> to <code>.text</code>, but these sort of things are notoriously fickle, brittle, and very vendor specific.   GNU does it differently than Keil, or IAR, or GHS, and sometimes the mechanisms and undocumented features (like this where you poke at it until it works for you) change from version to version.</p>\n\n<p>Even if you could, you may find out that your USB controller simply cannot access the flash, necessitating you expand it into SRAM anyways.</p>\n"}], "owner": {"reputation": 13, "user_id": 3847027, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ffc4edb1868f798cb328db7eeb8682b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Ritchey", "link": "https://stackoverflow.com/users/3847027/bob-ritchey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1461199985, "creation_date": 1461185363, "last_edit_date": 1461185962, "question_id": 36754914, "link": "https://stackoverflow.com/questions/36754914/force-strings-and-pointers-into-flash-when-using-x-macro-expansion", "title": "Force strings and pointers into flash when using X-macro expansion", "body": "<p>I thought I understood X-macros pretty well but this is really stumping me. I defined the following code:</p>\n\n<pre><code>#define FOR_DESCR_STRINGS(apply) \\\n    apply(LANGUAGE_ID_STRING, \"\\0x04\\0x03\\0x09\\0x04\")  \\\n    apply(MANUFACTURER_STRING, \"Quest Engineering &amp; Development, Inc.\") \\\n    apply(PRODUCT_STRING, \"PowerExpander Eq10E\") \\\n    apply(SERIAL_NUMBER_STRING, \"\\0x00\")              \\\n    apply(MS_OS_COMPAT_STRING \"MSFT100\\0xFF\")\n\n#define SELECT_DESCR_STRING_ID(a, b) a,\n#define SELECT_DESCR_STRING(a, b) b\n#define SELECT_DESCR_STRING_PTR(a, b) b,\n\nenum\n{\n     FOR_DESCR_STRINGS(SELECT_DESCR_STRING_ID)\n     DESCR_STRING_CNT\n};\n\nconst uint8_t  DESCR_STRINGS[][] = /* Array of Descriptor Strings */\n    {FOR_DESCR_STRINGS(SELECT_DESCR_STRING)};  \n\nconst uint8_t* DESCR_STRING_PTRS[] = /* Array of Descriptor String Ptrs */\n    {FOR_DESCR_STRINGS(SELECT_DESCR_STRING_PTR)}; \n</code></pre>\n\n<p>I wanted the strings and pointers to go into flash but what I am ending up with is .rodata where the pointers and strings are being copied to RAM during the C startup code.  Is there anyway to do what I want to do here (define multiple strings and define pointer array to strings) so they stay in flash and are not copied to RAM while still using X-macros? \nThanks, </p>\n"}, {"tags": ["c", "string", "pointers", "casting", "void-pointers"], "comments": [{"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 4, "creation_date": 1461184028, "post_id": 36754296, "comment_id": 61089254, "body": "Ugh, don&#39;t use that typedef."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1461184193, "post_id": 36754296, "comment_id": 61089367, "body": "The cast prevented the compiler from catching an error. But the program died anyway. The lesson?"}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1461184301, "post_id": 36754296, "comment_id": 61089436, "body": "Upvotes for a horrible typedef/cast construct and a lack of understanding of pointers?"}, {"owner": {"reputation": 45, "user_id": 6142483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KBOWR.jpg?s=128&g=1", "display_name": "Eden_Yosef", "link": "https://stackoverflow.com/users/6142483/eden-yosef"}, "edited": false, "score": 0, "creation_date": 1461186638, "post_id": 36754296, "comment_id": 61090713, "body": "what is so horrible about my typedef?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461186975, "post_id": 36754296, "comment_id": 61090905, "body": "<code>typedef</code> that contains a direct <code>*</code> is considered a confusing programming styles by many.  Also in C, a <i>string</i> is a sequence (typically an array) of characters.  You are defining <code>String</code> to be a pointer type.  Image the confusion of  <code>typedef int Double;  Double x = 3.1;</code>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1461260088, "post_id": 36754296, "comment_id": 61130071, "body": "Did you find my answer useful?"}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1461184110, "last_edit_date": 1461184110, "creation_date": 1461183789, "answer_id": 36754422, "question_id": 36754296, "link": "https://stackoverflow.com/questions/36754296/having-some-trouble-in-casting-void-to-back-to-string/36754422#36754422", "title": "having some trouble in casting void* to back to String", "body": "<p>In your code,</p>\n\n<pre><code> String try2=*(String*)try;\n</code></pre>\n\n<p>is wrong. You can get rid of the unnecessary (<em>harmful</em>) casts (<em>which actually hides the issue of mismatched datatype</em>) and simply write</p>\n\n<pre><code> String try2 = try;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1461183844, "creation_date": 1461183844, "answer_id": 36754440, "question_id": 36754296, "link": "https://stackoverflow.com/questions/36754296/having-some-trouble-in-casting-void-to-back-to-string/36754440#36754440", "title": "having some trouble in casting void* to back to String", "body": "<p>You can either use </p>\n\n<pre><code>try=&amp;string1[0];\n</code></pre>\n\n<p>or </p>\n\n<pre><code>try=string1;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1461183939, "creation_date": 1461183939, "answer_id": 36754469, "question_id": 36754296, "link": "https://stackoverflow.com/questions/36754296/having-some-trouble-in-casting-void-to-back-to-string/36754469#36754469", "title": "having some trouble in casting void* to back to String", "body": "<pre><code>String try2=*(String*)try;\n</code></pre>\n\n<p>is wrong.</p>\n\n<p>You can have either</p>\n\n<pre><code>String try2=(String)try;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>String try2=try; // Recommended style, since a void* can be safely cast into any other pointer type.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": false, "score": 2, "last_activity_date": 1461193871, "creation_date": 1461193871, "answer_id": 36756831, "question_id": 36754296, "link": "https://stackoverflow.com/questions/36754296/having-some-trouble-in-casting-void-to-back-to-string/36756831#36756831", "title": "having some trouble in casting void* to back to String", "body": "<pre><code>String try2 = *(String*)try;\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>char* try2 = *(char**)try;\n</code></pre>\n\n<p>which presumably conflicts to your intention. You should write either</p>\n\n<pre><code>String try2 = try;\n</code></pre>\n\n<p>or simply</p>\n\n<pre><code>char *try2 = try;\n</code></pre>\n\n<p>Also note that casting can hide serious problems, so you should avoid using them when they are unnecessary.</p>\n"}, {"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 0, "last_activity_date": 1461230164, "creation_date": 1461230164, "answer_id": 36765086, "question_id": 36754296, "link": "https://stackoverflow.com/questions/36754296/having-some-trouble-in-casting-void-to-back-to-string/36765086#36765086", "title": "having some trouble in casting void* to back to String", "body": "<p>The type of <code>string</code> is <code>char[6]</code>, it is an array of <code>char</code>, and you can assing it to a char pointer:</p>\n\n<pre><code>char* p = string;\n</code></pre>\n\n<p>However the type of <code>&amp;string</code> is <code>char(*)[6]</code>. It is a pointer to an array of 6 <code>char</code>, so you cannot assign it to <code>char**</code>, which is a pointer to a pointer to <code>char</code>. You need to assign it to a pointer to an array of 6 characters:</p>\n\n<pre><code>char (*pa)[6] = &amp;string;\n</code></pre>\n\n<p>Thus the cast you made here:</p>\n\n<pre><code>(String*)try;\n</code></pre>\n\n<p>which is equivalent to:</p>\n\n<pre><code>( char**)try \n</code></pre>\n\n<p>Is incorrect, because <code>try</code> represents a pointer to an array of 6 char, and not a pointer to a pointer to char.</p>\n\n<p>The pointer should be cast to the correct type, a pointer to an array of 6 char:</p>\n\n<pre><code>String* try2 = *( char(*)[6] )try;\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6142483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/KBOWR.jpg?s=128&g=1", "display_name": "Eden_Yosef", "link": "https://stackoverflow.com/users/6142483/eden-yosef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 5, "score": -1, "last_activity_date": 1461230164, "creation_date": 1461183407, "last_edit_date": 1461193599, "question_id": 36754296, "link": "https://stackoverflow.com/questions/36754296/having-some-trouble-in-casting-void-to-back-to-string", "title": "having some trouble in casting void* to back to String", "body": "<p>When I try to run the following code, the program crashes:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n\ntypedef char* String;\n\nint main() {\n    char string1[] = \"hello\";\n    void* try = &amp;string1;\n    String try2 = *(String*)try;\n    printf(\"%s \",try2);\n}\n</code></pre>\n\n<p>any Idea why?</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 0, "creation_date": 1461184237, "post_id": 36754486, "comment_id": 61089395, "body": "I&#39;m not agree with you. Initially, counter is 0 and BUFFER_SIZE is 10, so the producer will not go to the while loop."}, {"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 0, "creation_date": 1461184466, "post_id": 36754486, "comment_id": 61089540, "body": "For producer, if the buffer is full which means counter == BUFFER_SIZE, the producer will stop producing, so the producer will stop. Initially, there no item in the buffer, so the producer could produce something."}, {"owner": {"reputation": 936, "user_id": 4278394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DNnQDbUkHEo/AAAAAAAAAAI/AAAAAAAAAp8/taAmCIsZcA8/photo.jpg?sz=128", "display_name": "Jorge", "link": "https://stackoverflow.com/users/4278394/jorge"}, "reply_to_user": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 0, "creation_date": 1461184656, "post_id": 36754486, "comment_id": 61089655, "body": "You&#39;re right, I saw it wrong... In thinking if the pthread_mutex_lock(&amp;mutex); makes the consumer takes the lock and wait forever in its while loop. In that case producer will never produce anything because is waiting for the consumer to free the mutex"}, {"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 0, "creation_date": 1461184996, "post_id": 36754486, "comment_id": 61089852, "body": "I find another problem.. If I delete the sem_open for empty and full, the program will run correctly. But I don&#39;t know why, could you please help me? Thank you."}, {"owner": {"reputation": 936, "user_id": 4278394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DNnQDbUkHEo/AAAAAAAAAAI/AAAAAAAAAp8/taAmCIsZcA8/photo.jpg?sz=128", "display_name": "Jorge", "link": "https://stackoverflow.com/users/4278394/jorge"}, "reply_to_user": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 0, "creation_date": 1461185171, "post_id": 36754486, "comment_id": 61089948, "body": "Check this link <a href=\"http://man7.org/linux/man-pages/man3/sem_open.3.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man3/sem_open.3.html</a> as your giving the same name, it seems that both empty and full are the same instance"}, {"owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "edited": false, "score": 0, "creation_date": 1461186981, "post_id": 36754486, "comment_id": 61090906, "body": "Thank you Jorge. I have figured out the problem. I just use the same name of empty and full in sem_open(). It should be different."}], "tags": [], "owner": {"reputation": 936, "user_id": 4278394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DNnQDbUkHEo/AAAAAAAAAAI/AAAAAAAAAp8/taAmCIsZcA8/photo.jpg?sz=128", "display_name": "Jorge", "link": "https://stackoverflow.com/users/4278394/jorge"}, "is_accepted": true, "score": 0, "last_activity_date": 1461185276, "last_edit_date": 1461185276, "creation_date": 1461183992, "answer_id": 36754486, "question_id": 36754253, "link": "https://stackoverflow.com/questions/36754253/sem-wait-in-producer-and-consumer/36754486#36754486", "title": "sem_wait() in producer and consumer", "body": "<p>It seems that your producer never produces anything</p>\n\n<p>Check the semaphore names. May be <code>empty</code> and <code>full</code> are the same instance as you're using the same name for both in your <code>sem_open</code> function</p>\n"}], "owner": {"reputation": 77, "user_id": 5585222, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/nOt2q.jpg?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/5585222/helen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 36754486, "answer_count": 1, "score": 1, "last_activity_date": 1461243934, "creation_date": 1461183276, "last_edit_date": 1461243934, "question_id": 36754253, "link": "https://stackoverflow.com/questions/36754253/sem-wait-in-producer-and-consumer", "title": "sem_wait() in producer and consumer", "body": "<p>This is my code for producer and consumer problem. It can be compiled, but when I run the program it print nothing. I test the program and found the problem maybe about sem_wait(). Why the program could be compiled but the output is wrong? Thank you.</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    pthread_mutex_init(&amp;mutex, NULL);\n    empty = sem_open(\"/mysem\", O_CREAT, 0644, BUFFER_SIZE);\n    full = sem_open(\"/mysem\", O_CREAT, 0644, 0);\n\n    pthread_create(&amp;pro_thread, NULL, producer, NULL);\n    pthread_create(&amp;con_thread, NULL, consumer, NULL);\n\n    pthread_exit(NULL);\n\n    return 0;\n}\n</code></pre>\n\n<p>Is the sem_open() function right? I commented the following line and the program could run...maybe the problem is about sem_open? </p>\n\n<pre><code>empty = sem_open(\"/mysem\", O_CREAT, 0644, BUFFER_SIZE);\n</code></pre>\n"}, {"tags": ["c", "linux"], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1461206767, "post_id": 36757191, "comment_id": 61096806, "body": "An alternative to handling SIGPIPE is to ignore it; the <code>write()</code>-related calls then return an error and indicate the problem with <code>errno</code> set to EPIPE.  If <code>tee()</code> can generate a SIGPIPE (reasonable), then you must have been handling or ignoring SIGPIPE in order to get the <code>-1</code> and <code>EPIPE</code> status."}], "tags": [], "owner": {"reputation": 12864, "user_id": 157525, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5820228fd7aefaba2a8bfb0503b9e2a8?s=128&d=identicon&r=PG", "display_name": "gct", "link": "https://stackoverflow.com/users/157525/gct"}, "is_accepted": true, "score": 2, "last_activity_date": 1461206824, "last_edit_date": 1461206824, "creation_date": 1461196242, "answer_id": 36757191, "question_id": 36754076, "link": "https://stackoverflow.com/questions/36754076/determining-that-reader-has-closed-when-using-tee-function-in-linux/36757191#36757191", "title": "Determining that reader has closed when using tee() function in Linux", "body": "<p>For future generations, it looks like the answer is that <code>tee()</code> will return -1 signalling an error, with <code>errno</code> set to EPIPE, when the reader of the pipe has closed it, even though this isn't documented in the man pages.  Correspondingly, a SIGPIPE will be generated, so be sure to properly handle that if you value your program continuing to execute.</p>\n"}], "owner": {"reputation": 12864, "user_id": 157525, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5820228fd7aefaba2a8bfb0503b9e2a8?s=128&d=identicon&r=PG", "display_name": "gct", "link": "https://stackoverflow.com/users/157525/gct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 36757191, "answer_count": 1, "score": 3, "last_activity_date": 1461206824, "creation_date": 1461182648, "last_edit_date": 1461199067, "question_id": 36754076, "link": "https://stackoverflow.com/questions/36754076/determining-that-reader-has-closed-when-using-tee-function-in-linux", "title": "Determining that reader has closed when using tee() function in Linux", "body": "<p>When using the <a href=\"http://linux.die.net/man/2/tee\" rel=\"nofollow\"><code>tee()</code></a> system call to move data from one pipe to another, it returns 0 if the writer on the input pipe closes, but how can one discern whether the reader on the output pipe has closed?</p>\n"}, {"tags": ["c", "fopen", "exc-bad-access", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1461182655, "post_id": 36754042, "comment_id": 61088343, "body": "You can start by checking the return value of <code>fopen()</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1461194566, "post_id": 36754042, "comment_id": 61093752, "body": "<code>float matrix[1000][1000];</code> probably, Large to ensure the stack. change to <code>static float matrix[1000][1000];</code> or ensure by <code>malloc</code>."}], "answers": [{"comments": [{"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 1, "creation_date": 1461193995, "post_id": 36754804, "comment_id": 61093607, "body": "Even more helpful than printing the value of <code>errno</code> is to use <code>perror</code> or <code>strerror</code> to get a human-readable message.."}, {"owner": {"reputation": 11, "user_id": 6230789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb54bccd130d609775a03b9dcff89a13?s=128&d=identicon&r=PG&f=1", "display_name": "mathia", "link": "https://stackoverflow.com/users/6230789/mathia"}, "edited": false, "score": 0, "creation_date": 1461219308, "post_id": 36754804, "comment_id": 61100806, "body": "The code you suggested returns &quot;fopen worked&quot;, so that doesn&#39;t seem to be the problem. The variables n, min and max still has the values 0 (or very small numbers) after fscanf."}, {"owner": {"reputation": 11, "user_id": 6230789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb54bccd130d609775a03b9dcff89a13?s=128&d=identicon&r=PG&f=1", "display_name": "mathia", "link": "https://stackoverflow.com/users/6230789/mathia"}, "edited": false, "score": 0, "creation_date": 1461229371, "post_id": 36754804, "comment_id": 61107604, "body": "I found out now. The problem was that the file wasn&#39;t located where i had dragged it. So by inserting the full path, the file was read properly. Thanks for taking time to help me. @8protons"}, {"owner": {"reputation": 2790, "user_id": 5137782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b8bQ8.jpg?s=128&g=1", "display_name": "8protons", "link": "https://stackoverflow.com/users/5137782/8protons"}, "reply_to_user": {"reputation": 11, "user_id": 6230789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb54bccd130d609775a03b9dcff89a13?s=128&d=identicon&r=PG&f=1", "display_name": "mathia", "link": "https://stackoverflow.com/users/6230789/mathia"}, "edited": false, "score": 0, "creation_date": 1461251418, "post_id": 36754804, "comment_id": 61124315, "body": "@mathia No problem. I am curious about the fact that, &quot;The code you suggested returns &quot;fopen worked&quot;&quot; yet &quot;the problem was that the file wasn&#39;t located where i had dragged it.&quot; I&#39;d suspect that an incorrect file path would have returned an errno."}], "tags": [], "owner": {"reputation": 2790, "user_id": 5137782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b8bQ8.jpg?s=128&g=1", "display_name": "8protons", "link": "https://stackoverflow.com/users/5137782/8protons"}, "is_accepted": false, "score": 1, "last_activity_date": 1461185056, "creation_date": 1461185056, "answer_id": 36754804, "question_id": 36754042, "link": "https://stackoverflow.com/questions/36754042/c-program-wont-get-access-to-textile/36754804#36754804", "title": "C program won&#39;t get access to textile", "body": "<p>Since you're \"a beginner in C\", I want to first welcome you to what is a very rigorous but rewarding language. Though, to be fair, I wouldn't consider someone who is writing operating system code to be a \"<em>beginner\"</em> in C.</p>\n\n<p>I'll gladly assist you and update this answer as we proceed. My first suggestion is as follows:</p>\n\n<p>The first thing you <em>always</em> should do when doing file operations (like opening one) is to check the results of the execution! For example, if you read the <a href=\"http://linux.die.net/man/3/fopen\" rel=\"nofollow\">man page</a> on <code>fopen()</code>, you'll see that <code>fopen()</code> will </p>\n\n<blockquote>\n  <p>return a FILE pointer. Otherwise, NULL is returned and errno is set to\n  indicate the error.</p>\n</blockquote>\n\n<p>So, use something similar to the code below to make sure that your file is opening as expected: </p>\n\n<pre><code>if (fp == NULL) {\n    printf(\"fopen did not work! Check errno %d\\n\", errno);\n}\nelse {\n    printf(\"fopen workd!\\n\");\n}\n</code></pre>\n\n<p><em>I will update this answer once you get back to me on the results of implementing the code above.</em></p>\n"}], "owner": {"reputation": 11, "user_id": 6230789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb54bccd130d609775a03b9dcff89a13?s=128&d=identicon&r=PG&f=1", "display_name": "mathia", "link": "https://stackoverflow.com/users/6230789/mathia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461494169, "creation_date": 1461182532, "last_edit_date": 1461494169, "question_id": 36754042, "link": "https://stackoverflow.com/questions/36754042/c-program-wont-get-access-to-textile", "title": "C program won&#39;t get access to textile", "body": "<p>Just to make it clear - I'm a beginner in C.</p>\n\n<p>When my program is running (using Xcode), no values correspond to the values in \"resultfortran.txt\". Instead, they become very small, very large or zero (looks random). For example, the variable n becomes 0, even though the first line in \"resultfortran.txt\" is 10. The variables min and max also becomes very small (and don't get the values at line 2 and 3).</p>\n\n<p>I have searched the web all day, and asked my fellow students. If it is of interest, I got the error \"EXC_BAD_ACCESS\" on the line where the file is opened, but that error has (some how?) disappeared. And yes, \"resultfortran.txt2 is in the same folder as main.m.</p>\n\n<p>The start of the program is shown below:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;GLUT/glut.h&gt;\n#include &lt;OpenGL/OpenGL.h&gt;\n#include &lt;Cocoa/Cocoa.h&gt;\n\n\nstatic void draw( void )\n{\nint n,i,j;\nfloat step,min,max,x,y,scaled;\nfloat matrix[1000][1000];\n\nFILE *fp; //reads input file\nfp=fopen(\"resultfortran.txt\", \"r\");\nfscanf(fp,\"%d\",&amp;n); //Gives n the value of the first line.\nstep=(1.0/n); //Defines step size\nfscanf(fp,\"%f\",&amp;min); //Gives min the value of the second line.\nfscanf(fp,\"%f\",&amp;max); //Gives max the value of the third line.\n\nfor (i=0;i&lt;n+1;i=i+1)\n{\n\n    for (j=0;j&lt;n+1;j=j+1)\n    {\n        fscanf(fp,\"%f\",&amp;matrix[i][j]);\n    }\n}\n... not finished here ...\n</code></pre>\n\n<p>The first lines of the file \"resultfortran.txt\" (which is a output from a fortran script) is shown below:</p>\n\n<pre><code>10\n0.00000000\n0.500000000\n0.0000000000\n0.0025000002\n0.0100000007\n0.0225000009\n0.0400000028\n0.0625000000\n0.0900000036\n0.1224999949\n0.1600000113\n0.2024999857\n0.2500000000\n0.0025000002\n0.0050000008\n0.0125000002\n</code></pre>\n"}, {"tags": ["c", "algorithm", "cpu", "scheduling", "multiprocessor"], "comments": [{"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1461182223, "post_id": 36753881, "comment_id": 61088044, "body": "Is there an operating system involved?  For example, how does <code>printf()</code> produce output on a terminal?"}, {"owner": {"reputation": 2076, "user_id": 1866196, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/TrCUq.png?s=128&g=1", "display_name": "skrtbhtngr", "link": "https://stackoverflow.com/users/1866196/skrtbhtngr"}, "edited": false, "score": 0, "creation_date": 1461182287, "post_id": 36753881, "comment_id": 61088084, "body": "i suggest you use multithreading!"}, {"owner": {"reputation": 770, "user_id": 1183079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca9d7069ddf9f6ff0b7eeaa7fbe96d0?s=128&d=identicon&r=PG", "display_name": "Kateract", "link": "https://stackoverflow.com/users/1183079/kateract"}, "edited": false, "score": 0, "creation_date": 1461182832, "post_id": 36753881, "comment_id": 61088454, "body": "Welcome to Stack Overflow.  Please check <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for information about how to get the most out of your questions.  For example, this question seems to be a bit broad in scope as you are asking about how to implement basically a whole library.  Try to narrow down to a specific question that can be answered in a few paragraphs."}, {"owner": {"reputation": 1, "user_id": 6232189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d75846f3b9aef8d957feabc087e443?s=128&d=identicon&r=PG&f=1", "display_name": "creativeguitar", "link": "https://stackoverflow.com/users/6232189/creativeguitar"}, "edited": false, "score": 0, "creation_date": 1461183350, "post_id": 36753881, "comment_id": 61088814, "body": "yes, i am using ubuntu to compile my code,"}, {"owner": {"reputation": 1, "user_id": 6232189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d75846f3b9aef8d957feabc087e443?s=128&d=identicon&r=PG&f=1", "display_name": "creativeguitar", "link": "https://stackoverflow.com/users/6232189/creativeguitar"}, "edited": false, "score": 0, "creation_date": 1461183386, "post_id": 36753881, "comment_id": 61088834, "body": "how do I implement multithreading in this example, can you please help me? can you please use multithread to demonstrate 4 processors for example?"}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1461191920, "post_id": 36753881, "comment_id": 61092899, "body": "There are several ways to do it.  One is to use <a href=\"https://en.wikipedia.org/wiki/Fork_%28system_call%29\" rel=\"nofollow noreferrer\"><code>fork()</code></a> and create a new process.  Another way is to use <a href=\"https://en.wikipedia.org/wiki/POSIX_Threads\" rel=\"nofollow noreferrer\">pthreads</a>.  What is it you want to accomplish?"}], "answers": [{"tags": [], "owner": {"reputation": 1563, "user_id": 4556696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47b77fa3f6e3e71da089a1dead131a3a?s=128&d=identicon&r=PG&f=1", "display_name": "dimm", "link": "https://stackoverflow.com/users/4556696/dimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1461183843, "creation_date": 1461183843, "answer_id": 36754438, "question_id": 36753881, "link": "https://stackoverflow.com/questions/36753881/first-come-first-serve-multiprocessor-6-processors-scheduler-in-c-code/36754438#36754438", "title": "First Come First Serve Multiprocessor (6 processors) scheduler in C code", "body": "<p>This seems like homework for Operating Systems class.</p>\n\n<p>Since you don't have arrival times of the precesses, only duration, we assume that all arrive at the same time, but are ordered in some list.</p>\n\n<p>I will use the terms jobs and CPUs, instead processes and processors for obvious reasons.</p>\n\n<p>The first six jobs will be assinged to all six CPUs.\nThe next job (7th) will get assigned to the CPU that will finish first.\nThen the next 8th job will be assigned to the CPU that will finish next (after the 7th was started).</p>\n\n<p>The algorithm can be easily implemented with priority (min) queue.</p>\n\n<pre><code>p := new priority queue\nfor 1 to 6\n    insert 0 in p\n\ntotal_wait_time = 0\n\nfor j in jobs\n    top := pop from p\n    end_time := top + j\n    total_wait_time += top\n    insert end_time in p\n\navg_wait = total_wait_time / num_of_jobs\n</code></pre>\n\n<p>You can play around with this, maybe to get average finishing times instead of average waiting times.</p>\n"}], "owner": {"reputation": 1, "user_id": 6232189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53d75846f3b9aef8d957feabc087e443?s=128&d=identicon&r=PG&f=1", "display_name": "creativeguitar", "link": "https://stackoverflow.com/users/6232189/creativeguitar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1360, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461183843, "creation_date": 1461182044, "last_edit_date": 1461182179, "question_id": 36753881, "link": "https://stackoverflow.com/questions/36753881/first-come-first-serve-multiprocessor-6-processors-scheduler-in-c-code", "title": "First Come First Serve Multiprocessor (6 processors) scheduler in C code", "body": "<p>I am developing for a FCFS scheduler algorithm.  But it only works with one processor.  How can divide the task into 6 processors? I would need waiting queue, ready queue, etc.</p>\n\n<p>Each processor should work individually, if one processor finishes its task, then it would take the next task without waiting for all the processors to finish.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main()\n{\n\n    int n,bt[20],wt[20],tat[20],avwt=0,avtat=0,i,j;\n    printf(\"Enter total number of processes(maximum 20):\");\n    scanf(\"%d\",&amp;n);\n\n    printf(\"\\nEnter Process Burst Time\\n\");\n    for(i=0;i&lt;n;i++)\n    {\n        printf(\"P[%d]:\",i+1);\n        scanf(\"%d\",&amp;bt[i]);\n    }\n\n    wt[0]=0;    //waiting time for first process is 0\n\n    //calculating waiting time\n    for(i=1;i&lt;n;i++)\n    {\n        wt[i]=0;\n        for(j=0;j&lt;i;j++)\n            wt[i]+=bt[j];\n    }\n\n    printf(\"\\nProcess\\t\\tBurst Time\\tWaiting Time\\tTurnaround Time\");\n\n    //calculating turnaround time\n    for(i=0;i&lt;n;i++)\n    {\n        tat[i]=bt[i]+wt[i];\n        avwt+=wt[i];\n        avtat+=tat[i];\n        printf(\"\\nP[%d]\\t\\t%d\\t\\t%d\\t\\t%d\",i+1,bt[i],wt[i],tat[i]);\n    }\n\n    avwt/=i;\n    avtat/=i;\n    printf(\"\\n\\nAverage Waiting Time:%d\",avwt);\n    printf(\"\\nAverage Turnaround Time:%d\",avtat);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "intel-pin"], "comments": [{"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 2, "creation_date": 1461182285, "post_id": 36753661, "comment_id": 61088081, "body": "getpid is syscall nr 39 with 64-bit, maybe that&#39;s the reason you can&#39;t find it?"}, {"owner": {"reputation": 308, "user_id": 3241663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2772bd82c001755ef52c69494e219a2a?s=128&d=identicon&r=PG&f=1", "display_name": "TypeKazt", "link": "https://stackoverflow.com/users/3241663/typekazt"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1461182441, "post_id": 36753661, "comment_id": 61088203, "body": "@Ctx I am running on a 64-bit machine, so yes that would be it. Thank you."}], "owner": {"reputation": 308, "user_id": 3241663, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2772bd82c001755ef52c69494e219a2a?s=128&d=identicon&r=PG&f=1", "display_name": "TypeKazt", "link": "https://stackoverflow.com/users/3241663/typekazt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461182382, "creation_date": 1461181355, "last_edit_date": 1461182382, "question_id": 36753661, "link": "https://stackoverflow.com/questions/36753661/pin-not-capturing-getpid-system-call", "title": "PIN not capturing getpid() system call", "body": "<p>Using a code example provided in the PIN API titled <a href=\"https://svn.mcs.anl.gov/repos/performance/Gwalp/gwalpsite/pin/source/tools/ManualExamples/strace.cpp\" rel=\"nofollow\">strace.cpp</a> on a binary should provide an output file containing all the system calls used, as well as some other information. The binary I use as a test is a simple C binary that contains a <code>getpid()</code> system call, which is the 20th system call. The source looks like this: </p>\n\n<pre><code>struct {\n  unsigned int pid;\n  char data [16];\n}test;\n\nvoid foo(){\n  printf(\"In Foo!\\n\");\n  char *p = \"hello world\";\n  test.pid = getpid();\n  strcpy(test.data,p);  \n}\n\nint main()\n{\n  printf(\"Hello World!\\n\");\n  foo();\n  return 0;\n}\n</code></pre>\n\n<p>After the PIN tool completes there is an output file in the working directory titled <a href=\"http://www.pastebucket.com/303418\" rel=\"nofollow\">strace.out</a>, which contains all of the system call information. The file contains about 28 different system calls, but none of them are labeled 20, or the <code>getpid()</code> system call. The system call number is the first number following the colon on each line. </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 5, "creation_date": 1461181113, "post_id": 36753532, "comment_id": 61087318, "body": "Make it static to a particular file"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1461181285, "post_id": 36753532, "comment_id": 61087427, "body": "Making it static is certainly a good step, possibly the best one. Something else to consider though: why would having it called by <code>main()</code> be so disruptive? The normal answer to this would be that needed data may not have been initialized - so another option is to simply detect that condition and return an appropriate error."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1461181401, "post_id": 36753532, "comment_id": 61087507, "body": "What about simply <code>#define dangerous_method something_thats_not_defined</code> in a header.  And then when you want to use it, <code>#undef</code>."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1461181809, "post_id": 36753532, "comment_id": 61087763, "body": "Even if the function is <code>static</code>, it&#39;s possible that some other function in the same translation unit could take its address and make it available. You can make it difficult or inconvenient to call a function; you can&#39;t really make it impossible."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1461182354, "post_id": 36753532, "comment_id": 61088133, "body": "@KeithThompson Depending on the architecture, the compiler is allowed to  take some &quot;shortcuts&quot;, like using specific addressing modes or &quot;short branches&quot; and &quot;short returns&quot; that can make it really pretty impossible to call the <code>static</code> function from outside, even if you would know the address. Another one: A compiler doesn&#39;t even need to make a <code>static</code> function a function at all. it is free to inline it into any caller, which makes it even more difficult to call it from outside - it&#39;s got no address."}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1461186185, "post_id": 36753532, "comment_id": 61090448, "body": "@tofro though if you take the address of a static function, the compiler couldn&#39;t optimise out the function - it would exist even if never actually called and made inline."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1461186341, "post_id": 36753532, "comment_id": 61090539, "body": "This is all kind of academic. If you had access to the source file to change it (or, take the address of the <code>static</code> function), it would be way easier to remove the <code>static</code>and recompile. I seem to be missing the point here."}, {"owner": {"reputation": 7561, "user_id": 1627348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0169513b14084f169c7d5126885a6e0?s=128&d=identicon&r=PG", "display_name": "teppic", "link": "https://stackoverflow.com/users/1627348/teppic"}, "reply_to_user": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 1, "creation_date": 1461186668, "post_id": 36753532, "comment_id": 61090735, "body": "@tofro in response to KeithThompson&#39;s comment, whose point was you can take the address of a static function; you said that it may not have an address as it may not exist, but if you take its address, it will of course always have one."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1461186772, "post_id": 36753532, "comment_id": 61090791, "body": "Yep, that&#39;s right. But still academic ;)"}], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "edited": false, "score": 0, "creation_date": 1461245319, "post_id": 36753666, "comment_id": 61119510, "body": "this actaully solved my problem. thank you very much"}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": true, "score": 6, "last_activity_date": 1461181669, "last_edit_date": 1461181669, "creation_date": 1461181368, "answer_id": 36753666, "question_id": 36753532, "link": "https://stackoverflow.com/questions/36753532/c-language-exclusive-calls-of-a-function/36753666#36753666", "title": "C Language: Exclusive calls of a function", "body": "<p>Put <em>a</em> and <em>b</em> into a separate compilation unit (object file of its own). Declare <em>a</em> <code>static</code> to that compilation unit, make <em>b</em> globally visible, and also known in a specific header file.</p>\n\n<p>Anything <em>outside</em> that compilation unit will not be able to call (or even \"see\") <em>a</em>, while <em>b</em> is fully visible for the rest of your program and very well able to call <em>a</em>.</p>\n\n<p>If you want to make sure that nobody is able to change this, distribute only the compiled .o file and an appropriate header.</p>\n\n<p>b.c:</p>\n\n<pre><code>static int a(int i){\n   ...\n}\n\nint b(int x){\n  return a(x + 100);\n}\n</code></pre>\n\n<p>main.c:</p>\n\n<pre><code>#include \"b.h\"\nint main (int argc, char *argv[]){\n   int c, d;\n\n   c = b(100);     /* works */\n   d = a(100);     /* will not compile */\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1461182447, "post_id": 36753851, "comment_id": 61088209, "body": "<code>backtrace</code> is not a C language feature."}, {"owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1461186130, "post_id": 36753851, "comment_id": 61090427, "body": "@Jens That is true. <code>backtrace</code> and others are GNU extensions. However, you can use <code>RtlCaptureStackBackTrace</code> on Windows platform."}], "tags": [], "owner": {"reputation": 2451, "user_id": 1729784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d97a5cecaf61887679df1f79b59b157?s=128&d=identicon&r=PG", "display_name": "DaBler", "link": "https://stackoverflow.com/users/1729784/dabler"}, "is_accepted": false, "score": 0, "last_activity_date": 1461181957, "creation_date": 1461181957, "answer_id": 36753851, "question_id": 36753532, "link": "https://stackoverflow.com/questions/36753532/c-language-exclusive-calls-of-a-function/36753851#36753851", "title": "C Language: Exclusive calls of a function", "body": "<p>If you want to check this at run time, you can use <code>backtrace</code> or similar function to determine who invoked your method. Be aware that the symbol names may be unavailable without the use of special linker options.</p>\n"}, {"comments": [{"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1461182506, "post_id": 36753892, "comment_id": 61088255, "body": "Good idea, thus +1. Not very portable, thus -1. Basically only works on Linux and/or gcc"}, {"owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "edited": false, "score": 0, "creation_date": 1461245207, "post_id": 36753892, "comment_id": 61119420, "body": "this idea is actually good and i appreciate it beeing shared! +1 thank you"}], "tags": [], "owner": {"reputation": 2004, "user_id": 4043922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/iOi5q.jpg?s=128&g=1", "display_name": "Shriganesh Shintre", "link": "https://stackoverflow.com/users/4043922/shriganesh-shintre"}, "is_accepted": false, "score": 1, "last_activity_date": 1461182088, "creation_date": 1461182088, "answer_id": 36753892, "question_id": 36753532, "link": "https://stackoverflow.com/questions/36753532/c-language-exclusive-calls-of-a-function/36753892#36753892", "title": "C Language: Exclusive calls of a function", "body": "<p>How about using backtrace and backtrace_symbol functions. <a href=\"http://man7.org/linux/man-pages/man3/backtrace.3.html\" rel=\"nofollow\">backtrace man page</a></p>\n\n<p>So inside this function A() check if it is called by specific allowed function and then only proceed or return (return with error or exit if needed). </p>\n\n<p>Note: This method does not avoid getting your program instruction pointer (program counter) inside the dangerous function A (even when called from unwanted main()).</p>\n"}], "owner": {"reputation": 424, "user_id": 5576024, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/HqOM5.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/5576024/alon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 36753666, "answer_count": 3, "score": 1, "last_activity_date": 1461182088, "creation_date": 1461181007, "question_id": 36753532, "link": "https://stackoverflow.com/questions/36753532/c-language-exclusive-calls-of-a-function", "title": "C Language: Exclusive calls of a function", "body": "<p>I wondered if its possible that you can declare method A in a way that only a specific other method B can call A. </p>\n\n<p>The reason beeing is that i want to restrict one method from beeing called from main (because of strange testing algorithms at college). If main called this method (which is an helper method), the whole programm would be trash. </p>\n\n<p>So, how can i \"forbid\" main (or any other method) to call my dangerous method B ? </p>\n"}, {"tags": ["c++", "c", "macros"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1461180724, "post_id": 36753431, "comment_id": 61087106, "body": "<a href=\"http://stackoverflow.com/questions/351733/can-you-write-object-oriented-code-in-c\" title=\"can you write object oriented code in c\">stackoverflow.com/questions/351733/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1461180875, "post_id": 36753431, "comment_id": 61087190, "body": "If you want to convert any valid C++ program into a C program then that is going to be a big challenge.  I do not know if you would be able to replicate move semantics in C."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1461180953, "post_id": 36753431, "comment_id": 61087236, "body": "Try doing this and tell us what you have come up with."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1461181007, "post_id": 36753431, "comment_id": 61087263, "body": "I&#39;m curious why anyone would <i>want</i> to do that. In any case, I doubt that it could be done with macros. But I don&#39;t think that not doing it would rigorously prove that it can&#39;t be done."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1461181037, "post_id": 36753431, "comment_id": 61087279, "body": "I dont really agree that the question is a duplicate. Writing oo code in c might be doable, while transforming c++ to c is much more challenging"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1461181089, "post_id": 36753431, "comment_id": 61087307, "body": "As apparently basically everything, including <code>mov</code>, is turing complete, one can probably proof that it is possible (not a CS guy though). However, in the real world, no one cares. Maybe try your luck on CS.SE if you have enough academic interest, but read their rules first."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1461181157, "post_id": 36753431, "comment_id": 61087342, "body": "No. Not by simple text substitution (which is what macros are). You won&#39;t get past the first template."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1461181326, "post_id": 36753431, "comment_id": 61087453, "body": "Actually, I&#39;m curious why anyone would use <b>C</b> when <b>C++</b> exists? There aren&#39;t many situations in which a C program can do something a C++ program can&#39;t."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 4, "creation_date": 1461181445, "post_id": 36753431, "comment_id": 61087534, "body": "@Logicrat 1) Legacy code 2) Not every platform has a decent C++ compiler, esp. in the embedded world 3) If you are Torwalds, you want to keep the CS-C++ noobs from screwing up your project 4) You believe that C is faster, and probably many more."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461181613, "post_id": 36753431, "comment_id": 61087632, "body": "Perhaps this applies here in some tangential fashion.  C++ compilers were <i>initially</i> code translators, converting C++ syntax to C. and then compiling with a C compiler.  So BITD, <i>all</i> C++ programs could theoretically be translated into C code."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461181740, "post_id": 36753431, "comment_id": 61087729, "body": "@chux, while what you are saying is true in general, it doesn&#39;t mean program can translate itself."}, {"owner": {"reputation": 877, "user_id": 2548319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Thw8X.jpg?s=128&g=1", "display_name": "Paulo1205", "link": "https://stackoverflow.com/users/2548319/paulo1205"}, "edited": false, "score": 0, "creation_date": 1461181982, "post_id": 36753431, "comment_id": 61087869, "body": "There are OO libraries in C that extensively use macros for implementing their OO functionality, but the final product don&#39;t look like C++ code would.  One example is <i>GObject</i>."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1461182260, "post_id": 36753431, "comment_id": 61088071, "body": "If it were possible, we wouldn&#39;t have needed Cfront."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 4, "creation_date": 1461182294, "post_id": 36753431, "comment_id": 61088088, "body": "I&#39;m voting to close this question as off-topic because it is about a theoretical issue (language equivalency), and not a practical programming problem."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1461183234, "post_id": 36753431, "comment_id": 61088731, "body": "Keep in mind that the first C++ implementation, cfront, parsed C++ (or a subset of it) and produced C code as its output.  Here is some info on <a href=\"https://en.wikipedia.org/wiki/Cfront\" rel=\"nofollow noreferrer\">cfront</a>."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1461184673, "post_id": 36753431, "comment_id": 61089669, "body": "Let&#39;s say <i>it was possible</i> - <code>cfront</code>used to be not much more than a preprocessor. Modern C++ has probably migrated away too much from C to make this still possible."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461181771, "post_id": 36753777, "comment_id": 61087741, "body": "Apparently you never looked at Boost.Preprocessor :)"}, {"owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461182057, "post_id": 36753777, "comment_id": 61087920, "body": "Boost.Preprocessor has an iteration limit of 256 for exactly this reason.  They unroll the loop."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1461182363, "post_id": 36753777, "comment_id": 61088144, "body": "cpp recursive template instantiation also has it&#39;s limits, and it is not much higher on modern compilers (and indeed was lower not so long ago)."}], "tags": [], "owner": {"reputation": 14766, "user_id": 483486, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/fcf225aa724d9bb05f6693dc8cf8c459?s=128&d=identicon&r=PG", "display_name": "OmnipotentEntity", "link": "https://stackoverflow.com/users/483486/omnipotententity"}, "is_accepted": false, "score": 2, "last_activity_date": 1461182292, "last_edit_date": 1461182292, "creation_date": 1461181730, "answer_id": 36753777, "question_id": 36753431, "link": "https://stackoverflow.com/questions/36753431/is-it-possible-to-implement-c-as-a-c-library-with-macros/36753777#36753777", "title": "Is it possible to implement C++ as a C library with macros?", "body": "<p>No.</p>\n\n<p>For a specific proof, consider this template.</p>\n\n<pre><code>template&lt;size_t n&gt;\nstruct fact {\n  static const int value = n * fact&lt;n-1&gt;::value;\n};\n\ntemplate&lt;&gt;\nstruct fact&lt;0&gt; {\n  static const int value = 1;\n};\n</code></pre>\n\n<p>Even if you could write an extremely sophisticated preprocessing macro to translate this into C, the preprocessor only runs once.  It does not loop or run recursively (which this template definition requires to function correctly.)  So you cannot implement this template within C with macros only.</p>\n\n<p>You may be able to do a subset of C++, but the preprocessor is fundamentally unsuited for this situation.</p>\n\n<p>EDIT: Re: Boost.Preprocessor.  Iteration is faked in the Boost.Preprocessor.  There is an iteration limit of 256 in all cases, this is because the preprocessor fakes loops using repeated calls.  See boost/repetition/for.hpp for an example.</p>\n"}, {"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 4, "last_activity_date": 1461182072, "creation_date": 1461182072, "answer_id": 36753887, "question_id": 36753431, "link": "https://stackoverflow.com/questions/36753431/is-it-possible-to-implement-c-as-a-c-library-with-macros/36753887#36753887", "title": "Is it possible to implement C++ as a C library with macros?", "body": "<p>C does not have function overloading, but C++ does.</p>\n\n<p>It seems to me that it would probably be impossible to make this simple C++ code compile in C:</p>\n\n<pre><code>bool Add(int a, int b);\nbool Add(string a, string b);\n</code></pre>\n\n<p>(two overloaded functions: same name, different parameters, different implementation)</p>\n\n<p>C would report an error similar to \"redefinition of an existing function\".<br>\nC++ would compile it with no problems.</p>\n"}, {"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1461182429, "creation_date": 1461182429, "answer_id": 36754008, "question_id": 36753431, "link": "https://stackoverflow.com/questions/36753431/is-it-possible-to-implement-c-as-a-c-library-with-macros/36754008#36754008", "title": "Is it possible to implement C++ as a C library with macros?", "body": "<p>Operator overloading might represent an issue.\nYou can go with code generation, g++ frontend probably does something of this kind. Fork it and fix it.</p>\n"}, {"tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 2, "last_activity_date": 1461182569, "creation_date": 1461182569, "answer_id": 36754056, "question_id": 36753431, "link": "https://stackoverflow.com/questions/36753431/is-it-possible-to-implement-c-as-a-c-library-with-macros/36754056#36754056", "title": "Is it possible to implement C++ as a C library with macros?", "body": "<p>The template mechanism is turing complete. The macro processor is not. /story</p>\n"}], "owner": {"reputation": 109, "user_id": 5208741, "user_type": "registered", "profile_image": "https://graph.facebook.com/1614679458814956/picture?type=large", "display_name": "Tomasz Garbus", "link": "https://stackoverflow.com/users/5208741/tomasz-garbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "closed_date": 1461182583, "answer_count": 4, "score": 0, "last_activity_date": 1461182569, "creation_date": 1461180671, "question_id": 36753431, "link": "https://stackoverflow.com/questions/36753431/is-it-possible-to-implement-c-as-a-c-library-with-macros", "closed_reason": "Not suitable for this site", "title": "Is it possible to implement C++ as a C library with macros?", "body": "<p>Would it be theoretically possible to implement C++ keywords, classes syntax etc. using a C library with right macros? (i.e. prepare a library which would make any C++ code compile using C compiler). I guess the answer is probably \"no\", but I wonder if you can prove it.</p>\n"}, {"tags": ["c", "visual-studio", "struct"], "comments": [{"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1461181489, "post_id": 36753402, "comment_id": 61087562, "body": "gcc 4.5.2 isn&#39;t fond of this at all."}, {"owner": {"reputation": 1578, "user_id": 6003161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4baeef3d0ff8d4dec06271c9b0125922?s=128&d=identicon&r=PG&f=1", "display_name": "Pants", "link": "https://stackoverflow.com/users/6003161/pants"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1461181846, "post_id": 36753402, "comment_id": 61087790, "body": "Yeah I&#39;ve noticed, thats why I&#39;m asking if any of you sharp people have found a work around. I&#39;m sure I&#39;m not the only one who has experienced this..."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461280093, "post_id": 36753402, "comment_id": 61140297, "body": "linux + gcc does not like this at all.  Suggest re-designing the data."}], "owner": {"reputation": 1578, "user_id": 6003161, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4baeef3d0ff8d4dec06271c9b0125922?s=128&d=identicon&r=PG&f=1", "display_name": "Pants", "link": "https://stackoverflow.com/users/6003161/pants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461180596, "creation_date": 1461180596, "question_id": 36753402, "link": "https://stackoverflow.com/questions/36753402/defining-a-struct-error-in-vs-2015", "title": "Defining a struct error in VS 2015", "body": "<p>I have a struct declaration in my header</p>\n\n<pre><code>#ifndef _MAP_IMPL_\ntypedef struct { } *MapADT;\n#endif\n</code></pre>\n\n<p>And I then define it in my source file like this</p>\n\n<pre><code>typedef struct Key {\n\n    void * value;\n    void * keyVal;\n    struct Key * next;\n} Key;\n\n    // Defining struct MapADT\ntypedef struct {\n    Key *keys; // Head of keys\n    bool (*equals)( const void *a, const void *b );\n\n}*MapADT;\n\n#define _MAP_IMPL_\n#include \"mapADT.h\" // Header file\n</code></pre>\n\n<p>This works perfectly fine on Linux, but for some reason VS really hates it.\nIs there any work around to this?</p>\n\n<p>Visual Studio gives me an error indicating that</p>\n\n<p>\"C requires that a struct or union has at least one member\"</p>\n"}, {"tags": ["c++", "c", "parallel-processing", "openmp", "affinity"], "comments": [{"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1461189548, "post_id": 36753263, "comment_id": 61092020, "body": "How about the benefit that the user does not have to create a huge bat file every time it has to be run in parallel?"}], "answers": [{"comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1461240860, "post_id": 36753386, "comment_id": 61115909, "body": "That last statement about <code>malloc</code> is interesting. Could you please provide some pointers to the glibc source code or the documentation to back it? I don&#39;t see <code>malloc</code> coming in different versions in glibc 2.12 or newer although ptmalloc2 could be compiled without thread safety. Besides, the library has the option to create one memory arena per core for (almost) lock-free implementation of <code>malloc</code> and at least RedHat-based distributions come with that option turned on."}, {"owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1461261274, "post_id": 36753386, "comment_id": 61130655, "body": "This is from memory, but my recollection is that linking with <code>-lpthread</code> got a different version or perhaps build configuration of malloc interposed."}], "tags": [], "owner": {"reputation": 32065, "user_id": 90002, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/717b51c0020d2a527975a5ee44026d12?s=128&d=identicon&r=PG", "display_name": "Phil Miller", "link": "https://stackoverflow.com/users/90002/phil-miller"}, "is_accepted": false, "score": 1, "last_activity_date": 1461180559, "creation_date": 1461180559, "answer_id": 36753386, "question_id": 36753263, "link": "https://stackoverflow.com/questions/36753263/software-parallelization-with-openmp-versus-affinity-scheduling/36753386#36753386", "title": "Software parallelization with OpenMP versus Affinity scheduling?", "body": "<p>If your problem is a simply parallel, with no interaction among the data in the separate input files, then you would probably not see a speedup with OpenMP, and might even see a slow-down, since memory allocation and various other things then have to be thread-safe. Single-threaded processes can gain lots of efficiencies, and in fact do on GNU libc, where linking in POSIX threads support means you also get a slower implementation of <code>malloc</code></p>\n"}], "owner": {"reputation": 15257, "user_id": 1409312, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TCzB.jpg?s=128&g=1", "display_name": "Syntactic Fructose", "link": "https://stackoverflow.com/users/1409312/syntactic-fructose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461180559, "creation_date": 1461180169, "question_id": 36753263, "link": "https://stackoverflow.com/questions/36753263/software-parallelization-with-openmp-versus-affinity-scheduling", "title": "Software parallelization with OpenMP versus Affinity scheduling?", "body": "<p>Scenario: I have an program which can be <em>easily</em> parallelized using OpenMP, lets say the main loop of the program is a for loop and independent data within it, so paralleizing it would be trivial. However currently I <strong>don't</strong> parallelize it, and instead use affinity scheduling.</p>\n\n<p>This program performs work on some input files specified by a folder in the command line arguments. To run this program in parallel, someone can create a bat file like so:</p>\n\n<pre><code>start \\affinity 1 \"1\" bat1\nstart \\affinity 2 \"2\" bat2\nstart \\affinity 3 \"3\" bat3\nstart \\affinity 4 \"4\" bat4\n</code></pre>\n\n<p>where bat1 - 4 is a bat file that calls <code>main.exe</code> with a different input folder for each bat file. So in this case there would be 4 instances of <code>main.exe</code> running on <code>input_folder1, input_folder2, input_folder3, input_folder4</code> respectively.</p>\n\n<p><strong>What would be the benefits of using a library like OpenMP be instead of affinity scheduling</strong>? I figure</p>\n\n<ul>\n<li>Less memory usage, single stack and heap for a single program instance as opposed to <code>n</code> instances of a program for <code>n</code> cores</li>\n<li>Better scaling</li>\n</ul>\n\n<p>But would I expect to actually see a performance boost? Why if so?</p>\n"}, {"tags": ["c", "random", "srand"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 7, "creation_date": 1461179500, "post_id": 36752991, "comment_id": 61086320, "body": "Move <code>srand</code> outside the loop. Call it once, at the start of a program. You keep resetting the RNG, with one second granularity."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461182034, "post_id": 36752991, "comment_id": 61087903, "body": "Side note:  Rarely have I seen the need for the range <code>[0.0 to 1.0]</code>, but the range <code>[0.0 1.0)</code>  (Upper end does not include 1.0)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461183981, "post_id": 36752991, "comment_id": 61089221, "body": "Note: with typical 32-bit <code>int</code> and 32-bit <code>float</code>, <code>((float)rand())&#47;RAND_MAX;</code>  will not provide an equal occurrence of <code>float</code> values.  <code>1.0f</code> will occur 64 times as often as  <code>0.0f</code> due to rounding of <code>(float)rand()</code>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1618999183, "post_id": 36752991, "comment_id": 118770084, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/7343833/srand-why-call-it-only-once\">srand() \u2014 why call it only once?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 17608, "user_id": 3650362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fqdi1.jpg?s=128&g=1", "display_name": "trentcl", "link": "https://stackoverflow.com/users/3650362/trentcl"}, "is_accepted": true, "score": 7, "last_activity_date": 1461179513, "creation_date": 1461179513, "answer_id": 36753056, "question_id": 36752991, "link": "https://stackoverflow.com/questions/36752991/generate-random-float-number-ranging-0-1-in-c/36753056#36753056", "title": "generate random float number ranging [0,1] in c", "body": "<p>You should call <code>srand()</code> only once, at the beginning of your program. Calling it before each call to <code>rand()</code> only makes the results more predictable, since each time you call it with a number probably very similar to the previous one.</p>\n"}, {"tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 2, "last_activity_date": 1461179519, "creation_date": 1461179519, "answer_id": 36753060, "question_id": 36752991, "link": "https://stackoverflow.com/questions/36752991/generate-random-float-number-ranging-0-1-in-c/36753060#36753060", "title": "generate random float number ranging [0,1] in c", "body": "<p>Move the line</p>\n\n<pre><code>srand((unsigned int)time(NULL));\n</code></pre>\n\n<p>to the start of the program i.e. just after <code>main</code>.</p>\n\n<p>You only need to seed the random number generator once. </p>\n"}, {"tags": [], "owner": {"reputation": 2773, "user_id": 1806873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d33ff8a6104760848c9a0ee5d0eda0?s=128&d=identicon&r=PG", "display_name": "Tomer", "link": "https://stackoverflow.com/users/1806873/tomer"}, "is_accepted": false, "score": 2, "last_activity_date": 1461180844, "last_edit_date": 1461180844, "creation_date": 1461180501, "answer_id": 36753366, "question_id": 36752991, "link": "https://stackoverflow.com/questions/36752991/generate-random-float-number-ranging-0-1-in-c/36753366#36753366", "title": "generate random float number ranging [0,1] in c", "body": "<p><code>srand()</code> only initializes the pseudo-random number generator using a piece of data given to it, called the seed. The <code>rand()</code> function then uses this seed to produce random numbers. Afterwards, each call to <code>rand()</code> is based on the previous random number that was generated. You are not intended to call <code>srand()</code> more than once anyway. (You can actually see this behavior in one of <a href=\"http://research.microsoft.com/en-us/um/redmond/projects/invisible/src/crt/rand.c.htm\" rel=\"nofollow\">rand's implementation</a>)</p>\n\n<p>The problem here is that <code>time()</code> gives you the current time in <em>seconds</em>, so when you initialize the generator and call <code>rand()</code> every time you will get the same number, until one second will pass.</p>\n"}], "owner": {"reputation": 207, "user_id": 5455373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/56da1e8d4f95ee9ad852bef07588b5c3?s=128&d=identicon&r=PG&f=1", "display_name": "NUO", "link": "https://stackoverflow.com/users/5455373/nuo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 1, "is_answered": true, "view_count": 11071, "favorite_count": 1, "accepted_answer_id": 36753056, "answer_count": 3, "score": 0, "last_activity_date": 1618999223, "creation_date": 1461179312, "last_edit_date": 1618999223, "question_id": 36752991, "link": "https://stackoverflow.com/questions/36752991/generate-random-float-number-ranging-0-1-in-c", "title": "generate random float number ranging [0,1] in c", "body": "<p>When I used <code>rand()</code> with <code>srand()</code> to generate random number in [0,1], it gave me numbers like: 0.70324, 0.70328, 0.70321...</p>\n<p>They were difference only in the last one or two digits, while I was intended to get random float numbers like 0.1,0.7,0.3....</p>\n<p>How could I get random float number like that instead of making difference in the last digit?</p>\n<p>Here's my code:</p>\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n    int i;\n    float randomNum;\n    for (  i=0; i&lt;10; i++){\n        srand((unsigned int)time(NULL));\n        randomNum = ((float)rand())/RAND_MAX;\n        printf(&quot;%f\\n&quot;,randomNum);\n     }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "elf", "dwarf", "aslr"], "comments": [{"owner": {"reputation": 3968, "user_id": 2402061, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VUGa3.png?s=128&g=1", "display_name": "Ricky Mutschlechner", "link": "https://stackoverflow.com/users/2402061/ricky-mutschlechner"}, "edited": false, "score": 1, "creation_date": 1461179561, "post_id": 36752879, "comment_id": 61086366, "body": "I believe ASLR only works on the code, stack and heap. Not necessarily on the data. Could be wrong, so not putting this as an answer."}, {"owner": {"reputation": 2773, "user_id": 1806873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d33ff8a6104760848c9a0ee5d0eda0?s=128&d=identicon&r=PG", "display_name": "Tomer", "link": "https://stackoverflow.com/users/1806873/tomer"}, "edited": false, "score": 0, "creation_date": 1461183037, "post_id": 36752879, "comment_id": 61088586, "body": "Did you try running and debugging with <code>gdb</code>? I&#39;m not sure, but maybe there is some kind of relocation done there."}], "answers": [{"comments": [{"owner": {"reputation": 818, "user_id": 3688293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044211651200793b2656b9942e7cbe89?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3688293/martin"}, "edited": false, "score": 0, "creation_date": 1461183127, "post_id": 36753996, "comment_id": 61088649, "body": "But what happens with the actual code? In the example I had <code>mov DWORD PTR [rip+0x200b3d],0xa</code>, which depends on the value of <code>rip</code>. This means that the &quot;random&quot; base addresses of <code>.data</code> and <code>.text</code> are somehow related, right? Could the generated code ever refer to a global variable in terms of just an address (as opposed to a register + offset)? If so, would it break with ASLR on?"}, {"owner": {"reputation": 7695, "user_id": 637866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a566553d97f6cdd46b6de6b26f47374?s=128&d=identicon&r=PG", "display_name": "ysdx", "link": "https://stackoverflow.com/users/637866/ysdx"}, "reply_to_user": {"reputation": 818, "user_id": 3688293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044211651200793b2656b9942e7cbe89?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3688293/martin"}, "edited": false, "score": 0, "creation_date": 1461183671, "post_id": 36753996, "comment_id": 61089013, "body": "Yes the relative position of the different parts of a given ELF file is fixed. When you compile PIE, the compiler only uses &quot;relative addressing&quot; instead of absolute addresses. That&#39;s the core idea of PIC/PIE (position independent)."}, {"owner": {"reputation": 818, "user_id": 3688293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044211651200793b2656b9942e7cbe89?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3688293/martin"}, "edited": false, "score": 1, "creation_date": 1461183816, "post_id": 36753996, "comment_id": 61089107, "body": "Oh, I see. I thought each section had an independent base address. Still, could the generated code ever refer to a global variable in terms of just an address (as opposed to a register + offset)? If so, would it break with ASLR on?"}, {"owner": {"reputation": 7695, "user_id": 637866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a566553d97f6cdd46b6de6b26f47374?s=128&d=identicon&r=PG", "display_name": "ysdx", "link": "https://stackoverflow.com/users/637866/ysdx"}, "reply_to_user": {"reputation": 818, "user_id": 3688293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044211651200793b2656b9942e7cbe89?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3688293/martin"}, "edited": false, "score": 0, "creation_date": 1461183990, "post_id": 36753996, "comment_id": 61089231, "body": "This would happen if you compile without <code>-fpie</code>. In this case, on the top of my head, the link editor might will fail to link properly or generate text relocations (i.e. patch the instruction when loading the file)."}], "tags": [], "owner": {"reputation": 7695, "user_id": 637866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a566553d97f6cdd46b6de6b26f47374?s=128&d=identicon&r=PG", "display_name": "ysdx", "link": "https://stackoverflow.com/users/637866/ysdx"}, "is_accepted": true, "score": 3, "last_activity_date": 1462345511, "last_edit_date": 1462345511, "creation_date": 1461182407, "answer_id": 36753996, "question_id": 36752879, "link": "https://stackoverflow.com/questions/36752879/how-can-global-variables-addresses-be-randomized-if-theyre-hardcoded-inside-th/36753996#36753996", "title": "How can global variables&#39; addresses be randomized if they&#39;re hardcoded inside the ELF?", "body": "<p>When you compile a PIE, the file is in fact technically a shared object (<code>ET_DYN</code>, you can check this with <code>readelf -h filename</code>). This type of ELF files (both PIEs and <code>.so</code> files) are designed to be loadable <strong>at any base address</strong> (well, usually modulo the page size).</p>\n\n<p>For those files, the virtual addresses (given in the section header table, program header table, symbol table, in the DWARF DIEs, etc.) are offsets from this base address.</p>\n\n<p>This is explained <a href=\"http://sco.com/developers/devspecs/gabi41.pdf#page=75\" rel=\"nofollow\">in the System V ABI</a>:</p>\n\n<blockquote>\n  <p>the virtual addresses in the program headers might not represent\n  the actual virtual addresses of the program\u2019s memory image.\n  Executable files typically contain absolute code. [...]\n  On the other hand, <strong>shared object segments typically contain\n  position-independent code</strong>.\n  This lets a segment\u2019s virtual address change from\n  one process to another, without invalidating execution behavior.\n  Though the system chooses virtual addresses for individual\n  processes, it maintains the segments\u2019 relative positions\n  Because  <strong>position-independent code uses relative addressing</strong>\n  between segments, <strong>the difference between virtual addresses\n  in memory must match the difference between virtual addresses\n  in the file</strong>. The difference between the virtual address of any\n  segment in memory and the corresponding virtual address\n  in the file is thus a single constant value for any one\n  executable or shared object in a given process.\n  This difference is the base address.</p>\n</blockquote>\n\n<p>For DWARF, this is explained in <a href=\"http://www.dwarfstd.org/doc/DWARF4.pdf#page=154\" rel=\"nofollow\">section 7.3</a> of <a href=\"http://www.dwarfstd.org/doc/DWARF4.pdf\" rel=\"nofollow\">DWARF 4</a>:</p>\n\n<blockquote>\n  <p>The relocated addresses in the debugging information\n  for an executable object are virtual \n  addresses and the relocated addresses in the\n  debugging information <b>for a shared object are offsets \n  relative to the start of the lowest region</b> of memory loaded\n  from that shared object.  </p>\n</blockquote>\n\n<p>As those files can be mapped at any base address, this base address can be randomized.</p>\n"}, {"comments": [{"owner": {"reputation": 818, "user_id": 3688293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044211651200793b2656b9942e7cbe89?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3688293/martin"}, "edited": false, "score": 0, "creation_date": 1461183307, "post_id": 36754100, "comment_id": 61088785, "body": "Yes, but that happens even without <code>-fpie</code>. I guess the compiler is being safe just in case?"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 5, "last_activity_date": 1461182742, "creation_date": 1461182742, "answer_id": 36754100, "question_id": 36752879, "link": "https://stackoverflow.com/questions/36752879/how-can-global-variables-addresses-be-randomized-if-theyre-hardcoded-inside-th/36754100#36754100", "title": "How can global variables&#39; addresses be randomized if they&#39;re hardcoded inside the ELF?", "body": "<p>The instruction output from the disassembly is giving you <code>601038</code> as a convenience relative to an arbitrary base (0x400000), but read the actual instruction; it's writing to <code>DWORD PTR [rip+0x200b3d]</code>. <code>rip</code> is the instruction pointer. The code and data is at a fixed offset relative to each other; randomizing the base address doesn't change that. By loading using the instruction pointer, it's using an address that incorporates the ASLR relocation already.</p>\n\n<p>The convenience mapping in the description to <code>601038</code> is because the fixed offsets from <code>rip</code> scattered throughout the code are all dependent on where the instruction is located, so they're not comparable without making an adjustment for the instruction location; the disassembler knows the instruction offset though, so it can subtract that instruction offset for you to get globally comparable addresses for the common 0x400000 base.</p>\n"}], "owner": {"reputation": 818, "user_id": 3688293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/044211651200793b2656b9942e7cbe89?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/3688293/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 36753996, "answer_count": 2, "score": 4, "last_activity_date": 1462345511, "creation_date": 1461178945, "last_edit_date": 1461179398, "question_id": 36752879, "link": "https://stackoverflow.com/questions/36752879/how-can-global-variables-addresses-be-randomized-if-theyre-hardcoded-inside-th", "title": "How can global variables&#39; addresses be randomized if they&#39;re hardcoded inside the ELF?", "body": "<p>I've read in a few places that ASLR is supposed to load the <code>.data</code> section at random addresses each time a program is run, which means the addresses of global variables should be different. However, if I have the following code:</p>\n\n<pre><code>int global_var = 42;\n\nint main()\n{\n    global_var = 10;\n    return 0;\n}\n</code></pre>\n\n<p>and I compile it with <code>gcc -fpie -o global global.c</code>, <code>objdump -d -M intel</code> shows the following:</p>\n\n<pre><code>  4004ed:   55                      push   rbp\n  4004ee:   48 89 e5                mov    rbp,rsp\n  4004f1:   c7 05 3d 0b 20 00 0a    mov    DWORD PTR [rip+0x200b3d],0xa        # 601038 &lt;global_var&gt;\n</code></pre>\n\n<p>It appears that <code>global_var</code> will always be placed at 601038. Indeed, if I compile with debugging symbols, <code>global_var</code>'s DIE has that address hardcoded:</p>\n\n<pre><code>$ gcc -ggdb3 -fpie -o global global.c\n$ objdump --dwarf=info global\n...\n&lt;1&gt;&lt;55&gt;: Abbrev Number: 4 (DW_TAG_variable)\n   &lt;56&gt;   DW_AT_name        : (indirect string, offset: 0x30c): global_var  \n   &lt;5a&gt;   DW_AT_decl_file   : 1 \n   &lt;5b&gt;   DW_AT_decl_line   : 1 \n   &lt;5c&gt;   DW_AT_type        : &lt;0x4e&gt;    \n   &lt;60&gt;   DW_AT_external    : 1 \n   &lt;60&gt;   DW_AT_location    : 9 byte block: 3 38 10 60 0 0 0 0 0    (DW_OP_addr: 601038)\n</code></pre>\n\n<p>How does ASLR work in these cases?</p>\n"}, {"tags": ["c", "char"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1461178383, "post_id": 36752649, "comment_id": 61085595, "body": "It won&#39;t even compile."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461178575, "post_id": 36752649, "comment_id": 61085716, "body": "What is <code>get</code>? What is your expected output for what command line?"}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1461178681, "post_id": 36752649, "comment_id": 61085783, "body": "Do you mean <code>printf(&quot;\\nErrored codeword is : %s\\n&quot;,text);</code> instead of <code>printf(&quot;\\nErrored codeword is : %s\\n&quot;,get);</code>? also notice that <code>argv[1]</code> is a string and your function is expecting a <code>double</code>, use  <code>printf(&quot;\\nErrored codeword is : %s\\n&quot;,strtod(text, NULL));</code>"}, {"owner": {"reputation": 11, "user_id": 6058036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42d6934eceb204bcaa1041d702fc7f1?s=128&d=identicon&r=PG&f=1", "display_name": "Zhonghao Liao", "link": "https://stackoverflow.com/users/6058036/zhonghao-liao"}, "edited": false, "score": 0, "creation_date": 1461178826, "post_id": 36752649, "comment_id": 61085882, "body": "Sorry, I made a mistake. Now it can compile but I cannot modify the char test. I want to modify the each bit of  test when the random number is less than 0.01"}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1461178869, "post_id": 36752649, "comment_id": 61085915, "body": "<code>2147483647</code> should be replaced with <code>RAND_MAX</code>, <code>random</code> with <code>rand</code>, and <code>k[i]=1</code> with <code>k[i]=&#39;1&#39;</code>.  If I make those changes and use a sufficiently high rate argument, your program does what you expected it to do."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1461179068, "post_id": 36752649, "comment_id": 61086037, "body": "(Also you seem to be confused about the difference between bits and <code>char</code>s.)"}, {"owner": {"reputation": 11, "user_id": 6058036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42d6934eceb204bcaa1041d702fc7f1?s=128&d=identicon&r=PG&f=1", "display_name": "Zhonghao Liao", "link": "https://stackoverflow.com/users/6058036/zhonghao-liao"}, "reply_to_user": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 0, "creation_date": 1461179375, "post_id": 36752649, "comment_id": 61086239, "body": "@zwol I modified the 2147483647 should be replaced with RAND_MAX random with rand, and k[i]=1 with k[i]=&#39;1&#39;,  and I got the right output. Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 2747961, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f020f3f1b168067b0b1c06fb1094081?s=128&d=identicon&r=PG&f=1", "display_name": "ddz", "link": "https://stackoverflow.com/users/2747961/ddz"}, "edited": false, "score": 0, "creation_date": 1461179915, "post_id": 36752805, "comment_id": 61086581, "body": "I assume it is because you didn&#39;t answer the question."}, {"owner": {"reputation": 14, "user_id": 5942044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ffd83704d87dae487cfb1b699f9327?s=128&d=identicon&r=PG&f=1", "display_name": "rfisher", "link": "https://stackoverflow.com/users/5942044/rfisher"}, "edited": false, "score": 0, "creation_date": 1461182537, "post_id": 36752805, "comment_id": 61088277, "body": "The code wouldn&#39;t even compile until you fixed the code that I mentioned, then the code was fixed exactly what I said, and that gets a negative rating. Something is wrong with this site if that&#39;s how things work."}, {"owner": {"reputation": 14, "user_id": 5942044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ffd83704d87dae487cfb1b699f9327?s=128&d=identicon&r=PG&f=1", "display_name": "rfisher", "link": "https://stackoverflow.com/users/5942044/rfisher"}, "edited": false, "score": 0, "creation_date": 1461183016, "post_id": 36752805, "comment_id": 61088566, "body": "It looks like the my negative rating was given by a person that doesn&#39;t even know the correct variable name &quot;test&quot; not &quot;text&quot;"}], "tags": [], "owner": {"reputation": 14, "user_id": 5942044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08ffd83704d87dae487cfb1b699f9327?s=128&d=identicon&r=PG&f=1", "display_name": "rfisher", "link": "https://stackoverflow.com/users/5942044/rfisher"}, "is_accepted": false, "score": -1, "last_activity_date": 1461179023, "last_edit_date": 1461179023, "creation_date": 1461178720, "answer_id": 36752805, "question_id": 36752649, "link": "https://stackoverflow.com/questions/36752649/get-the-return-value-from-a-function/36752805#36752805", "title": "Get the return value from a function", "body": "<p><code>get</code> in the <code>printf</code> statement is not defined. If you change <code>get</code> with <code>test</code> it should compile.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1461179212, "creation_date": 1461179212, "answer_id": 36752960, "question_id": 36752649, "link": "https://stackoverflow.com/questions/36752649/get-the-return-value-from-a-function/36752960#36752960", "title": "Get the return value from a function", "body": "<p><code>k</code> is a string i.e. array of characters, but you're assigning an integer value to it.</p>\n\n<p>Instead of:</p>\n\n<pre><code>k[i] = 1;\n</code></pre>\n\n<p>You probably want:</p>\n\n<pre><code>k[i] = '1';\n</code></pre>\n\n<p>Also, you should call <code>srandom</code> at the start of your program to seed the random number generator, passing in at least the PID, i.e. <code>srandom(getpid());</code> so that you don't get the same results every time.</p>\n"}], "owner": {"reputation": 11, "user_id": 6058036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f42d6934eceb204bcaa1041d702fc7f1?s=128&d=identicon&r=PG&f=1", "display_name": "Zhonghao Liao", "link": "https://stackoverflow.com/users/6058036/zhonghao-liao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1461179235, "creation_date": 1461178332, "last_edit_date": 1461178769, "question_id": 36752649, "link": "https://stackoverflow.com/questions/36752649/get-the-return-value-from-a-function", "title": "Get the return value from a function", "body": "<p>I want to modify a char by using a function and print it on the screen but my code cannot achieve this function. Here is my source code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\nlong M = 2147483647;\nvoid IntroduceError(char k[],double p)\n{\n    int i;\n\n    for ( i = 0; i &lt; 8; i++) {\n        if ((double)random()/M &lt;= p)\n            k[i] = 1;\n    }\n\n}\n\nint main(int argc, char *argv[])\n{\n\n    char test[] = \"11110000\";\n    double rate = atof(argv[1]);\n    IntroduceError(test, rate);\n    printf(\"\\nErrored codeword is : %s\\n\",test);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "nidaqmx", "daq-mx"], "comments": [{"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "edited": false, "score": 0, "creation_date": 1461178474, "post_id": 36752539, "comment_id": 61085653, "body": "You should fix your indentation to make it more readable.You also have brackets that are not required. Make sure to use spaces and not tabs."}], "answers": [{"tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 0, "last_activity_date": 1461179241, "last_edit_date": 1461179241, "creation_date": 1461178815, "answer_id": 36752834, "question_id": 36752539, "link": "https://stackoverflow.com/questions/36752539/access-values-in-an-externally-generated-array/36752834#36752834", "title": "Access values in an externally generated array", "body": "<p>C is zero based index so you have been skipping the first value every time, which may or may not give a bad value. The extra brackets caused you to miss setting up the conditional correctly. I marked the bad ; with a comment so you can see it.</p>\n\n<pre><code>sum2 = 0; // not needed since initialized above\ncount = 0; // not needed since initialized above\nfor (i = 0; i &lt; 999; ++i) \n{\n    if ((minV &lt; data[i]) &amp;&amp; (data[i] &lt; maxV)) // ; messed up and forced code to execute\n    // Extra parens are just for readability\n    {\n        //Sum of values in desired range\n        Sum2 += data[i];\n        //Number of values in desired range\n        count++;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6231946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75eac781c9e925c8f1bf87da2c77a28f?s=128&d=identicon&r=PG&f=1", "display_name": "NikMif", "link": "https://stackoverflow.com/users/6231946/nikmif"}, "edited": false, "score": 0, "creation_date": 1461254573, "post_id": 36752909, "comment_id": 61126665, "body": "Removing the &#39;;&#39; results in a count and sum of Zero"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1, "user_id": 6231946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75eac781c9e925c8f1bf87da2c77a28f?s=128&d=identicon&r=PG&f=1", "display_name": "NikMif", "link": "https://stackoverflow.com/users/6231946/nikmif"}, "edited": false, "score": 0, "creation_date": 1461255368, "post_id": 36752909, "comment_id": 61127247, "body": "In that case something else is wong, as well. As you said, &quot;Sum2 is adding 999 values instead of filtering&quot; and this was why."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1, "user_id": 6231946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75eac781c9e925c8f1bf87da2c77a28f?s=128&d=identicon&r=PG&f=1", "display_name": "NikMif", "link": "https://stackoverflow.com/users/6231946/nikmif"}, "edited": false, "score": 0, "creation_date": 1461255635, "post_id": 36752909, "comment_id": 61127442, "body": "Perhaps it is because you fiddle with <code>minV</code> and <code>maxV</code> before testing the data against them."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1, "user_id": 6231946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75eac781c9e925c8f1bf87da2c77a28f?s=128&d=identicon&r=PG&f=1", "display_name": "NikMif", "link": "https://stackoverflow.com/users/6231946/nikmif"}, "edited": false, "score": 0, "creation_date": 1461255836, "post_id": 36752909, "comment_id": 61127586, "body": "@NikMif I have added more to my answer."}, {"owner": {"reputation": 1, "user_id": 6231946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75eac781c9e925c8f1bf87da2c77a28f?s=128&d=identicon&r=PG&f=1", "display_name": "NikMif", "link": "https://stackoverflow.com/users/6231946/nikmif"}, "edited": false, "score": 0, "creation_date": 1461257564, "post_id": 36752909, "comment_id": 61128673, "body": "<code>minV = (minP2*.404) + 2.9674; maxV = (maxP2*.404) + 2.9674;</code> Is the conversion from pressure to voltage. The data begins in voltage and must be processed at pressure"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 1, "user_id": 6231946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75eac781c9e925c8f1bf87da2c77a28f?s=128&d=identicon&r=PG&f=1", "display_name": "NikMif", "link": "https://stackoverflow.com/users/6231946/nikmif"}, "edited": false, "score": 0, "creation_date": 1461259295, "post_id": 36752909, "comment_id": 61129614, "body": "Well either they are outside the range, or the data isn&#39;t what you expected it to be."}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 0, "last_activity_date": 1461256187, "last_edit_date": 1461256187, "creation_date": 1461179062, "answer_id": 36752909, "question_id": 36752539, "link": "https://stackoverflow.com/questions/36752539/access-values-in-an-externally-generated-array/36752909#36752909", "title": "Access values in an externally generated array", "body": "<p>You have an erroneous <code>;</code> after the following lines</p>\n\n<pre><code>if (minV &lt; data[i] &amp;&amp; data[i] &lt; maxV);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (minV &lt; data[i] &amp;&amp; data[i] &lt; maxV);\n</code></pre>\n\n<p>These cause the following code block to be always executed, since the <code>;</code> creates a \"do-nothing\" code block.</p>\n\n<p><strong>EDIT:</strong> are you also doing the wrong calculation for <code>minV</code> and <code>maxV</code>? What do they have to do with pressure?</p>\n\n<pre><code>minV = (minP2*.404) + 2.9674;\nmaxV = (maxP2*.404) + 2.9674;\n</code></pre>\n\n<p>Perhaps that puts the data out of their range, since the loop fails to catch any values.</p>\n"}], "owner": {"reputation": 1, "user_id": 6231946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75eac781c9e925c8f1bf87da2c77a28f?s=128&d=identicon&r=PG&f=1", "display_name": "NikMif", "link": "https://stackoverflow.com/users/6231946/nikmif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461257863, "creation_date": 1461177983, "last_edit_date": 1461257863, "question_id": 36752539, "link": "https://stackoverflow.com/questions/36752539/access-values-in-an-externally-generated-array", "title": "Access values in an externally generated array", "body": "<p>I am taking voltage readings and converting them into pressure readings. This is my first real experience with C so my code is messy but so far has worked fine. The problem I am facing is making the program count the number of readings (stored in the array data[i]) that fall between a min and max desired value.</p>\n\n<p>Here is the code, Sum2 and count are the areas giving me trouble. Sum2 is adding 999 values instead of filtering and count is always resulting in 998 when it should be closer to 500</p>\n\n<p>EDIT:</p>\n\n<p>the readings in data[i] are voltage and I am working with pressure. My calibration curve is P=(V-2.9674)/.404</p>\n\n<pre><code>    //Voltage readings for NI USB-6009 built from the ground up\n\n#include \"stdafx.h\"\n#include \"stdio.h\"\n#include \"NIDAQmx.h\"\n#include \"math.h\"\n#include \"tdmwriter.h\"\n#include \"fundtypes.h\"\n#include \"platdefines.h\"\n\n\n\n#define DAQmxErrChk(functionCall) if( DAQmxFailed(error=(functionCall)) ) goto Error; else\n\nint main(void)\n{\n    int32       error = 0;\n    TaskHandle  taskHandle = 0;\n    int32       read;\n    float64     data[1000], Sum=0, Average, Variance, Deviation=0, std_dev, min=0, max=0, num=0, avg=0, minP=0, maxP=0, avgP=0, avgP2=0, minP2=0, maxP2=0, minV=0, maxV=0, avgV=0, Sum2 = 0;\n    char        errBuff[2048] = { '\\0' };\n    int         i, count = 0;\n\n    /*********************************************/\n    // DAQmx Configure Code\n    /*********************************************/\n    DAQmxErrChk(DAQmxCreateTask(\"Pressure Voltage\\n\", &amp;taskHandle));\n    DAQmxErrChk(DAQmxCreateAIVoltageChan(taskHandle, \"Dev1/ai0\", \"\", DAQmx_Val_Cfg_Default, -10.0, 10.0, DAQmx_Val_Volts, NULL));\n    DAQmxErrChk(DAQmxCfgSampClkTiming(taskHandle, \"\", 100.0, DAQmx_Val_Rising, DAQmx_Val_FiniteSamps, 1000));\n\n    /*********************************************/\n    // DAQmx TDMS Configure Code\n    /*********************************************/\n    DAQmxErrChk(DAQmxConfigureLogging(taskHandle, \"C:\\\\TestData\\\\LogFile.tdms\", DAQmx_Val_LogAndRead, \"ECS Test Data\", DAQmx_Val_OpenOrCreate));\n    //DAQmxWriteAnalogF64(taskHandle,1000, 1 /*autoStart*/, -1 /*timeout*/, DAQmx_Val_GroupByScanNumber, data, 1000, NULL);\n\n    /*********************************************/\n    // DAQmx Start Code\n    /*********************************************/\n    DAQmxErrChk(DAQmxStartTask(taskHandle));\n    printf(\"Voltage due to Pressure:\\n\");\n    printf(\"\\n\");\n    printf(\"Recording Data...\\n\");\n    DAQmxErrChk(DAQmxWaitUntilTaskDone(taskHandle, 10.0));\n\n\n    /*********************************************/\n    // DAQmx Read Code\n    /*********************************************/\n    DAQmxErrChk(DAQmxReadAnalogF64(taskHandle, 1000, 10.0, DAQmx_Val_GroupByChannel, data, 1000, &amp;read, NULL));\n\n    printf(\"Acquired %d points\\n\", (int)read);\n\n\n    /*********************************************/\n    //Display Values\n    /*********************************************/\n    printf(\"\\n\");\n    printf(\"values:\\n\");\n    printf(\"Voltage 1= %f\\n\",data[10]);\n    printf(\"Voltage 2= %f\\n\", data[100]);\n    printf(\"Voltage 3= %f\\n\", data[200]);\n    printf(\"Voltage 4= %f\\n\", data[300]);\n    printf(\"Voltage 5= %f\\n\", data[400]);\n    printf(\"Voltage 6= %f\\n\", data[500]);\n    printf(\"Voltage 7= %f\\n\", data[600]);\n    printf(\"Voltage 8= %f\\n\", data[700]);\n    printf(\"Voltage 9= %f\\n\", data[800]);\n    printf(\"Voltage 10= %f\\n\", data[900]);\n    printf(\"\\n\");\n\n    //for (int i = 1; i &lt; 1000; i++) {\n    //  printf(\"Voltage %i= %f\\n\",i, data[i]);\n    //}\n    //printf(\"\\n\");\n\n    /*********************************************/\n    //Average Values\n    /*********************************************/\n    for (i = 1; i &lt; 999; ++i) {\n        Sum = Sum + data[i];\n    }\n\n    Average = (Sum / 999);\n    printf(\"Average= %f\\n\", Average);\n\n\n    /*********************************************/\n    //Standard Deviation\n    /*********************************************/\n    for (i = 1; i &lt; 999; ++i) {\n        Deviation = Deviation + pow((Average - data[i]), 2);\n    }\n\n    Variance = Deviation / 999;\n    printf(\"Variance= %f\\n\", Variance);\n\n    std_dev = sqrt(Variance);\n    printf(\"Standard Deviation= %f\\n\", std_dev);\n\n    printf(\"\\n\");\n\n\n    /*********************************************/\n    //Min and Max Values\n    /*********************************************/\n\n    {\n        max = fmax(data[2], data[999]);\n    }\n    {\n        min = fmin(data[2], data[999]);\n    }\n\n    printf(\"Min: %f\\n\", min);\n    printf(\"Max: %f\\n\", max);\n    printf(\"Log File located in C:\\\\TestData. Please rename LogFile.tdms after testing\\n\");\n    printf(\"\\n\");\n\n\n    /*********************************************/\n    //Convert to Pressure Readings\n    /*********************************************/\n    printf(\"Pressure Readings (inches H2O):\\n\");\n    {\n        minP = (min - 2.9674) / .404;\n        maxP = (max - 2.9674) / .404;\n        avgP = (Average - 2.9674) / .404;\n    }\n    printf(\"Min Pressure: %f\\n\", minP);\n    printf(\"Max Pressure: %f\\n\", maxP);\n    printf(\"Average Pressure: %f\\n\", avgP);\n    printf(\"\\n\");\n\n\n    /*********************************************/\n    //New Voltage and Pressure Averages\n    /*********************************************/\n    {//target min and max pressure\n        minP2 = avgP - (avgP / 10);\n        maxP2 = avgP + (avgP / 10);\n    }\n    {//target min and max voltage\n        minV = (minP2*.404) + 2.9674;\n        maxV = (maxP2*.404) + 2.9674;\n    }\n    {//Sum of values in desired range\n        for (i = 1; i &lt; 999; ++i) {\n            if (minV &lt; data[i] &amp;&amp; data[i] &lt; maxV); { Sum2 = Sum2 + data[i]; }\n    }\n    }\n    {//Number of values in desired range\n        for (i = 1; i &lt; 999; i++)\n        {\n            if (minV &lt; data[i] &amp;&amp; data[i] &lt; maxV);\n            {\n                count++;\n            }\n        }\n    }\n    {//New average voltage\n        avgV = Sum2 / count;\n    }\n    {//New average pressure\n        avgP2 = ((avgV - 2.9674) / .404);\n    }\n    printf(\"Adjusted Values:\\n\");\n    printf(\"Min P2= %f\\n\", minP2);\n    printf(\"Max P2= %f\\n\", maxP2);\n    printf(\"Min Voltage= %f\\n\", minV);\n    printf(\"Max Voltage= %f\\n\", maxV);\n    printf(\"Sum Voltage= %f\\n\", Sum2);\n    printf(\"Count= %d\\n\", count);\n    printf(\"AvgV= %f\\n\", avgV);\n    printf(\"AvgP= %f\\n\", avgP2);\n\n\nError:\n    if (DAQmxFailed(error))\n        DAQmxGetExtendedErrorInfo(errBuff, 2048);\n    if (taskHandle != 0) \n    {\n        /*********************************************/\n        // DAQmx Stop Code\n        /*********************************************/\n\n        DAQmxStopTask(taskHandle);\n        DAQmxClearTask(taskHandle);\n    }\n\n    if (DAQmxFailed(error))\n        printf(\"DAQmx Error: %s\\n\", errBuff);\n    printf(\"End of program, press Enter key to quit...\\n\");\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "lua", "love2d"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1461181375, "post_id": 36752168, "comment_id": 61087489, "body": "Are you asking how to combine the two files into one file? Or are you asking how to <i>not</i> do that and instead how to distribute <i>two</i> files and use the <code>.lua</code> file from the executable?"}, {"owner": {"reputation": 25, "user_id": 5463969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-EXHkH_PCSR8/AAAAAAAAAAI/AAAAAAAAAMw/VyZ-WsGSeJ0/photo.jpg?sz=128", "display_name": "Blazing Code", "link": "https://stackoverflow.com/users/5463969/blazing-code"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1461183370, "post_id": 36752168, "comment_id": 61088827, "body": "I&#39;m asking how to combine them into one file similar to that of love2d so that when said application is distributed the user isn&#39;t tempted to poke around the .lua file and so that people implementing the c++ don&#39;t need to know it and can focus on just using lua"}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1461183606, "post_id": 36752168, "comment_id": 61088967, "body": "<code>copy &#47;b</code> just merged the two files by stuffing one file on the end of the other file I think. So how to use that is a question of how to find the other file at the end of your file. I don&#39;t know if there&#39;s a specific way to do it but you could always just open yourself and read backwards from the end until you find your header/marker and then load it."}, {"owner": {"reputation": 25, "user_id": 5463969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-EXHkH_PCSR8/AAAAAAAAAAI/AAAAAAAAAMw/VyZ-WsGSeJ0/photo.jpg?sz=128", "display_name": "Blazing Code", "link": "https://stackoverflow.com/users/5463969/blazing-code"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1461183611, "post_id": 36752168, "comment_id": 61088971, "body": "<a href=\"https://love2d.org/wiki/Game_Distribution\" rel=\"nofollow noreferrer\">love2d.org/wiki/Game_Distribution</a> like what is described under creating a Windows executable."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1461184272, "post_id": 36752168, "comment_id": 61089417, "body": "Yeah. Like I said I don&#39;t know how love is doing it specifically but at its simplest what I said should work I believe."}, {"owner": {"reputation": 25, "user_id": 5463969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-EXHkH_PCSR8/AAAAAAAAAAI/AAAAAAAAAMw/VyZ-WsGSeJ0/photo.jpg?sz=128", "display_name": "Blazing Code", "link": "https://stackoverflow.com/users/5463969/blazing-code"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1461184833, "post_id": 36752168, "comment_id": 61089773, "body": "I&#39;ll try it out and then get back to you once I&#39;ve tested it, thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5463969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-EXHkH_PCSR8/AAAAAAAAAAI/AAAAAAAAAMw/VyZ-WsGSeJ0/photo.jpg?sz=128", "display_name": "Blazing Code", "link": "https://stackoverflow.com/users/5463969/blazing-code"}, "edited": false, "score": 0, "creation_date": 1461178055, "post_id": 36752332, "comment_id": 61085399, "body": "I understand that this is possible and i will use this if absolutely necessary but i would rather have the code in a seperate file so that it can be edited by people who aren&#39;t as proficient"}, {"owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "reply_to_user": {"reputation": 25, "user_id": 5463969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-EXHkH_PCSR8/AAAAAAAAAAI/AAAAAAAAAMw/VyZ-WsGSeJ0/photo.jpg?sz=128", "display_name": "Blazing Code", "link": "https://stackoverflow.com/users/5463969/blazing-code"}, "edited": false, "score": 0, "creation_date": 1461277061, "post_id": 36752332, "comment_id": 61139241, "body": "@BlazingCode Then you should have a build system which converts your Lua file to C code and inserts it before compiling your executable."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 2, "last_activity_date": 1461177326, "creation_date": 1461177326, "answer_id": 36752332, "question_id": 36752168, "link": "https://stackoverflow.com/questions/36752168/how-to-distribute-a-lua-file-with-c/36752332#36752332", "title": "how to distribute a lua file with c++", "body": "<p>You could embed the lua code directly into your C++ source in a raw string literal like so:</p>\n\n<pre><code>const auto lua_code = R\"lua(\n...lua code here...\n)lua\";\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5463969, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-EXHkH_PCSR8/AAAAAAAAAAI/AAAAAAAAAMw/VyZ-WsGSeJ0/photo.jpg?sz=128", "display_name": "Blazing Code", "link": "https://stackoverflow.com/users/5463969/blazing-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 36752332, "answer_count": 1, "score": 0, "last_activity_date": 1461177326, "creation_date": 1461176818, "question_id": 36752168, "link": "https://stackoverflow.com/questions/36752168/how-to-distribute-a-lua-file-with-c", "title": "how to distribute a lua file with c++", "body": "<p>I know how to do stuff with Lua states and what not but what i don't understand is how you would distribute the final program with a seperate lua file because say you have a .exe and a lua file in the same directory how would I make it so that it is all one executable like how L\u00f6ve 2d uses </p>\n\n<pre><code>copy /b \n</code></pre>\n\n<p>to append the lua file to the L\u00f6ve 2d interpreter so it can be distributed.\ncould someone possibly explain how this works.</p>\n\n<p>many thanks \nBlazing</p>\n"}, {"tags": ["c", "posix", "flex-lexer", "yacc", "lemon"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1461177329, "post_id": 36752066, "comment_id": 61084982, "body": "&quot;<code>mystring</code> is not known&quot; seems a poor description of the problem.  The variable is certainly known in the sense that a declaration is in scope everywhere that variable is referenced, else your code would not compile.  If the problem is with <code>mystring</code> at all, then surely it&#39;s that its value is not what you expected."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1461177871, "post_id": 36752066, "comment_id": 61085292, "body": "But why is this grammar not executed? <code>&lt;SINGLE_QUOTED&gt;[^&#39;]+    { printf(&quot;test&quot;);mystring = strdup(yytext); }</code> I thought that it should write out the test msg and write to <code>mystring</code>."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1461179641, "post_id": 36752066, "comment_id": 61086413, "body": "@PaulOgilvie I write to the interpreter <code>echo &#39;a b&#39; </code> and I get a segfault. I wanted it to print <code>test&#39; and write to the </code>mystring` variable."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1461179930, "post_id": 36752066, "comment_id": 61086595, "body": "If it reaches that rule, then at least you will see &quot;test&quot; appearing from <code>printf(&quot;test&quot;);</code> If you don&#39;t see that, it didn&#39;t reach that rule. Of course, it first sees <code>echo</code>, for which I see no rule."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1461180064, "post_id": 36752066, "comment_id": 61086697, "body": "<code>echo</code> results in lexcode 3. It looks like <code>echo</code> gets interpreted correctly. Thing is that <code>echo foo</code> works but not <code>echo &#39;foo bar&#39; </code>"}], "answers": [{"comments": [{"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1461179379, "post_id": 36752359, "comment_id": 61086245, "body": "But it looks like I set the string in the grammar: <code>&lt;SINGLE_QUOTED&gt;[^&#39;]+ { printf(&quot;test&quot;);mystring = strdup(yytext); }</code> but then it doesn&#39;t even print the test msg."}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 1, "creation_date": 1461179526, "post_id": 36752359, "comment_id": 61086338, "body": "So you know the lexer never gets to that rule.... The lexer returns some other token it has seen, and then it doesn&#39;t set <code>mystring</code>."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 2, "last_activity_date": 1461177395, "creation_date": 1461177395, "answer_id": 36752359, "question_id": 36752066, "link": "https://stackoverflow.com/questions/36752066/why-unknown-variable-mystring/36752359#36752359", "title": "Why unknown variable &quot;mystring&quot;?", "body": "<p>Because in</p>\n\n<pre><code>    lexCode = yylex(scanner);\n    text = strdup(yyget_text(scanner));\n    printf(\"lexcode %i Text %s mystring %s\\n\", lexCode, text, mystring);\n</code></pre>\n\n<p><code>mystring</code> has not necessarilly been set by <code>yylex</code>. There is only one rule that sets it, so generally it will (still) be <code>NULL</code>, causing the segfault.</p>\n"}, {"comments": [{"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1461180997, "post_id": 36753285, "comment_id": 61087259, "body": "It&#39;s not working. I updated the question with a link to all the code which I keep in github. I don&#39;t understand why it doesn&#39;t work."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1461181520, "post_id": 36753285, "comment_id": 61087574, "body": "@Programmer400, sorry, it doesn&#39;t work that way here.  We generally insist on the code to which the question pertains appearing in the question itself.  Moreover, your chances of getting a useful answer are greatly improved if you present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which, really, we should have asked for from the beginning.  Paul&#39;s is the best answer to the question as originally posed.  If that turns out not to have been the one you really needed to ask, then perhaps you should accept Paul&#39;s answer and ask a new question -- with a <i>bona fide</i> MCVE this time."}, {"owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "edited": false, "score": 0, "creation_date": 1461182183, "post_id": 36753285, "comment_id": 61088015, "body": "I get this error msg <code>error: \u2018yyg\u2019 undeclared (first use in this function)  #define yytext yyg-&gt;yytext_r</code>"}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1461181928, "last_edit_date": 1461181928, "creation_date": 1461180253, "answer_id": 36753285, "question_id": 36752066, "link": "https://stackoverflow.com/questions/36752066/why-unknown-variable-mystring/36753285#36753285", "title": "Why unknown variable &quot;mystring&quot;?", "body": "<p>@PaulOgilvie explained pretty clearly why <code>mystring</code> might still be <code>NULL</code> after <code>yylex()</code> returns.  As an otherwise-uninitialized global, <code>mystring</code>'s initial value is <code>NULL</code>.  After scanning the text \"echo\" from your example command, <code>yylex()</code> returns, not having set <code>mystring</code>, so at that point it is still <code>NULL</code>.</p>\n\n<p>Do note, however, that that does not appear to be the proximal cause of your segfault.  Your output shows the program proceeding past that point and in fact executing the <code>printf()</code> call immediately preceding the assignment to <code>mystring</code>.  That <code>strdup()</code> with which you compute a value for <code>mystring</code> is a problem, however, because although <code>yytext</code> is a pointer to the start of the <em>text</em> of the token, it is not a pointer to a <em>C string</em> containing the token.  Rather, it is a pointer to the location of the text in <code>flex</code>'s buffer, and that text is not, generally, terminated at the end of the token.</p>\n\n<p><code>flex</code> provides global variable <code>yyleng</code> to tell you how long the text is, and you can use that to make a copy.  For example, you could do this:</p>\n\n<pre><code>mystring = strndup(yytext, yyleng);\n</code></pre>\n\n<p>With that said, your output seems to show the scanning proceeding to completion (receiving token <code>EOL</code>, with value <code>1</code>), in which case the crash is probably occurring in <code>dump_argv()</code> or even after.  From the output, I'm guessing that you have a wild pointer or perhaps a pointer to an unterminated string somewhere in there.  It's hard to tell, because you do not present the code for those functions.</p>\n\n<p><strong>Update:</strong> You do, still, seem to have <code>mystring</code> in the main loop not seeing the assignment performed by your scanner.  The only plausible explanation for this is that they are not the same <code>mystring</code>.  Perhaps you are declaring a <code>static</code> or local <code>mystring</code> in the scope of the main loop you presented.  Note, too, that using <code>flex</code>'s <code>%reentrant</code> option is intended to produce a scanner that avoids communicating via global variables, but you defeat that by introducing your own (<code>mystring</code>).</p>\n"}], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1461223419, "creation_date": 1461176528, "last_edit_date": 1495535288, "question_id": 36752066, "link": "https://stackoverflow.com/questions/36752066/why-unknown-variable-mystring", "title": "Why unknown variable &quot;mystring&quot;?", "body": "<p>I'm trying to debug why my variable <code>mystring</code> is not known when I think it should be according to an earlier question</p>\n\n<p><a href=\"https://stackoverflow.com/questions/36696071/is-the-bug-in-the-grammar-or-in-the-code\">Is the bug in the grammar or in the code?</a></p>\n\n<pre><code>(gdb) run\nThe program being debugged has been started already.\nStart it from the beginning? (y or n) y\nStarting program: /home/dac/ClionProjects/openshell/openshell \n'PATH' is set to /home/dac/proj/google-cloud-sdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games.\n&gt; echo 'a b'\nlexcode 3 Text echo mystring (null)\nBecho\ntestlexcode 4 Text ' mystring (null)\nlexcode 1 Text \n mystring (null)\nargument ::= ARGUMENT .\nargumentList ::= argument .\ncommand ::= FILENAME argumentList .\ncommandList ::= command .\n {(null)} {echo} {(null)}\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x0000000000402308 in main ()\n(gdb) \n</code></pre>\n\n<p>My grammar is</p>\n\n<pre><code>%{\n    #include \"shellparser.h\"\n    #include &lt;string.h&gt;\n    char *mystring;\n%}\n\n%option reentrant\n%option noyywrap\n\n%x SINGLE_QUOTED\n%x DOUBLE_QUOTED\n\n%%\n\n\"|\"                     { return PIPE; }\n\n[ \\t\\r]                 { }\n[\\n]                    { return EOL; }\n\n[a-zA-Z0-9_\\.\\-]+       { return FILENAME; }\n\n[']                     { BEGIN(SINGLE_QUOTED); }\n&lt;SINGLE_QUOTED&gt;[^']+    { printf(\"test\");mystring = strdup(yytext); }\n\n&lt;SINGLE_QUOTED&gt;[']      { BEGIN(INITIAL);\n      /*  mystring contains the whole string now,\n           yytext contains only \"'\" */\n                          return ARGUMENT; }\n&lt;SINGLE_QUOTED&gt;&lt;&lt;EOF&gt;&gt;  { return -1; }\n\n[\"]                     { BEGIN(DOUBLE_QUOTED); }\n&lt;DOUBLE_QUOTED&gt;[^\"]+    { }\n&lt;DOUBLE_QUOTED&gt;[\"]      { BEGIN(INITIAL); return ARGUMENT; }\n&lt;DOUBLE_QUOTED&gt;&lt;&lt;EOF&gt;&gt;  { return -1; }\n\n[^ \\t\\r\\n|'\"]+          { return ARGUMENT; }\n\n%%\n</code></pre>\n\n<p>Then my main loop is</p>\n\n<pre><code>yylex_init(&amp;scanner);\nyyset_in(stdin, scanner);\n\nshellParser = ParseAlloc(malloc);\n\nparams[0] = NULL;\nprintf(\"&gt; \");\ni=1;\ndo {\n    lexCode = yylex(scanner);\n    text = strdup(yyget_text(scanner));\n    printf(\"lexcode %i Text %s mystring %s\\n\", lexCode, text, mystring);\n    if (lexCode == 4) {\n        params[i++] = mystring;\n        if (strcmp(text, \"\\'\\0\")) {\n            params[i++] = mystring;\n        }\n    } else\n    if (lexCode != EOL) {\n        params[i++] = text;\n        printf(\"B%s\\n\", text);\n    }\n    Parse(shellParser, lexCode, text);\n    if (lexCode == EOL) {\n        dump_argv(\"Before exec_arguments\", i, params);\n        exec_arguments(i, params);\n        corpse_collector();\n        Parse(shellParser, 0, NULL);\n        i=1;\n    }\n} while (lexCode &gt; 0);\nif (-1 == lexCode) {\n    fprintf(stderr, \"The scanner encountered an error.\\n\");\n}\nyylex_destroy(scanner);\nParseFree(shellParser, free);\n</code></pre>\n\n<p>Why is <code>mystring</code> null when I expect it to be something? I get a segmentation fault:</p>\n\n<pre><code>$ ./openshell \n'PATH' is set to /home/dac/proj/google-cloud-sdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games.\n&gt; echo 'a b'\nlexcode 3 Text echo mystring (null)\nBecho\ntestlexcode 4 Text ' mystring (null)\nlexcode 1 Text \n mystring (null)\nargument ::= ARGUMENT .\nargumentList ::= argument .\ncommand ::= FILENAME argumentList .\ncommandList ::= command .\n {(null)} {echo} {(null)}\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>The whole project is on <a href=\"http://github.com/montao/openshell\" rel=\"nofollow noreferrer\">my github</a>. </p>\n"}, {"tags": ["c", "sockets", "tcp", "client-server", "recv"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461176442, "post_id": 36751850, "comment_id": 61084452, "body": "&#39;printf(&quot;\\n-&gt; Recibida alta tema %s\\n&quot;, buff);&#39; - NO!   The buffer is not guaranteed null-terminated.  If you are sure to always be communicating text, or other data that does not contain embedded nulls, you could null-terminate the buffer data by using  &#39;buff_readed_aux&#39; as an index.  Be sure to leave neough space for the null, eg.. by reading &#39;sizeof(buff)-1&#39; chars.  &#39;bzero()&#39; is wasteful cargo-cult coding, but should have worked."}, {"owner": {"reputation": 223, "user_id": 3803589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9fea604a368c15bf4d58d57a99ee967?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s Mart&#237;n Berlanga", "link": "https://stackoverflow.com/users/3803589/jes%c3%bas-mart%c3%adn-berlanga"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461176615, "post_id": 36751850, "comment_id": 61084551, "body": "@MartinJames The string is null terminated, otherwhise the length in buff_readed_aux would be wrong because of strlen. Ok, I spotted the error because of you, I sent 7 bytes, I did not send the null termination."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1461176631, "post_id": 36751850, "comment_id": 61084565, "body": "Use wireshark to find out if the garbage is being sent by the client, is a result of client code bugs, or both."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461176991, "post_id": 36751850, "comment_id": 61084766, "body": "What is the declaration of &#39;tema&#39;?"}, {"owner": {"reputation": 223, "user_id": 3803589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9fea604a368c15bf4d58d57a99ee967?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s Mart&#237;n Berlanga", "link": "https://stackoverflow.com/users/3803589/jes%c3%bas-mart%c3%adn-berlanga"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461177906, "post_id": 36751850, "comment_id": 61085308, "body": "@MartinJames Is dinamically allocated and stored in a hash table. The problem is maybe in the server because I don&#39;t find the message send with wireshark."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1461177994, "post_id": 36751850, "comment_id": 61085362, "body": "OK, so is &#39;&amp;tema&#39; the address of the data you want to send, or is it the address of the pointer to the data?"}, {"owner": {"reputation": 223, "user_id": 3803589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9fea604a368c15bf4d58d57a99ee967?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s Mart&#237;n Berlanga", "link": "https://stackoverflow.com/users/3803589/jes%c3%bas-mart%c3%adn-berlanga"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461178094, "post_id": 36751850, "comment_id": 61085421, "body": "@MartinJames Damn!! That&#39;s the problem. You made my day, I have been 2 hours debuging like a monkey. I will test it and see If it works."}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 3803589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9fea604a368c15bf4d58d57a99ee967?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s Mart&#237;n Berlanga", "link": "https://stackoverflow.com/users/3803589/jes%c3%bas-mart%c3%adn-berlanga"}, "edited": false, "score": 0, "creation_date": 1461178016, "post_id": 36752493, "comment_id": 61085377, "body": "I have inspected the memory and buff is wrongly filled, so that&#39;s not  the main problem."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 223, "user_id": 3803589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9fea604a368c15bf4d58d57a99ee967?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s Mart&#237;n Berlanga", "link": "https://stackoverflow.com/users/3803589/jes%c3%bas-mart%c3%adn-berlanga"}, "edited": false, "score": 1, "creation_date": 1461178078, "post_id": 36752493, "comment_id": 61085411, "body": "@Jes&#250;sMart&#237;nBerlanga You probably have <i>way</i> more than two bugs. (See updates.)"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1461178066, "last_edit_date": 1461178066, "creation_date": 1461177866, "answer_id": 36752493, "question_id": 36751850, "link": "https://stackoverflow.com/questions/36751850/buffer-filled-with-trash-using-recv/36752493#36752493", "title": "buffer filled with trash using recv", "body": "<pre><code>buff_readed_aux = recv(cd, &amp;buff, sizeof(buff), 0)));\nprintf(\"\\n-&gt; Recibida alta tema %s\\n\", buff);\n</code></pre>\n\n<p>How are you expecting this <code>printf</code> to know how many characters to print? Magic?</p>\n\n<p>Try, for example:</p>\n\n<pre><code>if (buff_readed_aux &gt; 0)\n{\n    printf(\"\\n-&gt; Recibida alta tema \");\n    for (int i = 0; i &lt; buff_readed_aux; ++i) putchar(buff[i]);\n    printf(\"\\n\");\n}\n</code></pre>\n\n<p>Also:</p>\n\n<pre><code> else if(send_all(cd, &amp;tema, tema_name_length, 0) == -1) { op_result = CALLBACK_TRANSM_ERROR; }\n\n#ifdef DEBUG_MSG\n    fprintf(stderr, \"aviso-gestion-gema (%d bytes): %s\\n\", tema_name_length, tema);\n#endif\n</code></pre>\n\n<p>If <code>tema</code> holds the address of what you want to send (as the <code>fprintf</code> suggests), why are you passing the <em>address</em> of <code>tema</code> to <code>send_all</code>? You're supposed to pass <code>send_all</code> the address of what you want to send, not the address of the thing that holds the address of what you want to send!</p>\n"}], "owner": {"reputation": 223, "user_id": 3803589, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9fea604a368c15bf4d58d57a99ee967?s=128&d=identicon&r=PG&f=1", "display_name": "Jes&#250;s Mart&#237;n Berlanga", "link": "https://stackoverflow.com/users/3803589/jes%c3%bas-mart%c3%adn-berlanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 726, "favorite_count": 1, "accepted_answer_id": 36752493, "answer_count": 1, "score": 0, "last_activity_date": 1461178147, "creation_date": 1461175784, "last_edit_date": 1461178147, "question_id": 36751850, "link": "https://stackoverflow.com/questions/36751850/buffer-filled-with-trash-using-recv", "title": "buffer filled with trash using recv", "body": "<p>The destination recives the correct ammount of bytes but the string recived is trash.</p>\n\n<p>Auxiliar function:</p>\n\n<pre><code>ssize_t send_all(int socket, const void *buffer, size_t length, int flags) {\n    ssize_t n;\n    const char *p = buffer;\n    while (length &gt; 0)\n    {\n        n = send(socket, p, length, flags);\n        if (n &lt;= 0) break;\n        p += n;\n        length -= n;\n    }\n    return (n &lt;= 0) ? -1 : 0;   \n}\n</code></pre>\n\n<p>This is my sender:</p>\n\n<pre><code>p_status_t aviso_gestion_tema(struct sockaddr_in id, char* tema, int tema_name_length, tipo_msg_intermediario precedente) {\n\n//...\n\nint cd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\nif(connect(cd, (struct sockaddr*) &amp;id, sizeof(id)) == -1) {\n    #ifdef DEBUG_ERR\n        fprintf(stderr, \"connect: %s\\n\", strerror(errno));\n    #endif \n    op_result = CALLBACK_TRANSM_ERROR;\n}\nelse if(send(cd, &amp;tipo, 1, 0) == -1) { op_result = CALLBACK_TRANSM_ERROR; }\nelse if(send_all(cd, &amp;tema, tema_name_length, 0) == -1) { op_result = CALLBACK_TRANSM_ERROR; }\n\n#ifdef DEBUG_MSG\n    fprintf(stderr, \"aviso-gestion-gema (%d bytes): %s\\n\", tema_name_length, tema);\n#endif\n\nclose(cd);\n</code></pre>\n\n<p>This is a simplifcation of what I do on the reciver:</p>\n\n<pre><code>int cd;\nchar tipo_msg;\nstruct sockaddr_in client_ain;\nsocklen_t c_ain_size;\nchar buff[BUFFER_SIZE];\nssize_t buff_readed_aux;\nunsigned int tema_name_length;\n\nc_ain_size = sizeof(client_ain);\ncd = accept(socket_recepcion, (struct sockaddr*)&amp;client_ain, &amp;c_ain_size);\nif(cd == -1) {...}\n\ntipo_msg = (char) 0;\nif(recv(cd, &amp;tipo_msg, 1, 0) == -1) {...}\n\nbuff_readed_aux = recv(cd, &amp;buff, sizeof(buff), 0)));\nprintf(\"\\n-&gt; Recibida alta tema %s\\n\", buff);\n</code></pre>\n\n<p>If I inspect the memory <code>buff_readed_aux</code> value is correct but the buffer is filled with trash.</p>\n\n<p>Example of values I get on the prints:</p>\n\n<pre><code>Client: aviso-gestion-gema (7 bytes): nombre1.  \nServer: Recibida alta tema P\ufffd`\n\nClient: aviso-gestion-gema (5 bytes): nom#2\nServer: Recibida alta tema \ufffd\ufffd`\n</code></pre>\n\n<p>I don't understand whats happening, I have tried to use 'bzero' to  initialize the buffer with no luck. I have confirmed with wireshark that the message is not being sending correctly from the server.</p>\n\n<p>Tema is allocated in a hash table like this:</p>\n\n<pre><code>tema_name_length = strlen(utstring_body(readed));\nchar* allocated = malloc(tema_name_length+1); // 1+ for nul termination\nstrcpy(allocated, utstring_body(readed));\n// store allocated in the hash-table\n</code></pre>\n"}, {"tags": ["c", "linux-device-driver"], "comments": [{"owner": {"reputation": 3561, "user_id": 2511795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c869f55cbcf82a7bc4536d563daa0a?s=128&d=identicon&r=PG", "display_name": "0andriy", "link": "https://stackoverflow.com/users/2511795/0andriy"}, "edited": false, "score": 0, "creation_date": 1461614052, "post_id": 36751647, "comment_id": 61268633, "body": "You have to read whatever you want to a temporary buffer and then print to a sequential file via <code>seq_printf()</code> for example. To pass register to read from you have to provide an interface. If you want to do this through file system you need at least two files to have."}], "owner": {"reputation": 510, "user_id": 5645637, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wPnXm.jpg?s=128&g=1", "display_name": "gutelfuldead", "link": "https://stackoverflow.com/users/5645637/gutelfuldead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1461178194, "creation_date": 1461175164, "last_edit_date": 1461178194, "question_id": 36751647, "link": "https://stackoverflow.com/questions/36751647/reading-specific-registers-with-seq-file-device-driver", "title": "Reading specific registers with seq_file : Device Driver", "body": "<p>I have a very simple modified driver to write to specific registers. I pass the value and the register I intend to write to. IE: 0x00000008 2, read as write 8 to register (base_addr + 2*4). </p>\n\n<p>This works and was relatively straight forward to implement because the driver automatically receives an input buffer.</p>\n\n<p>Now since in order to read I have to use the seq_file I'm not sure how to pass the register that I would like to read from... The augmented device driver I'm using is posted below. </p>\n\n<p>Is there a way to pass the register value and then using ioread32(base_addr + register)? How can I use copy_from_user in this function where my only inputs are the seq_file?</p>\n\n<p>Usage Example (altered ioread32 to be base_addr+2):</p>\n\n<pre><code>$ sudo echo \"0x00001233 2\" &gt; /proc/accelerator                                  \n$ cat /proc/accelerator                                                         \n0x1233\n$ \n</code></pre>\n\n<p>Dev Driver Code:</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;asm/uaccess.h&gt;    /* Needed for copy_from_user */\n#include &lt;asm/io.h&gt;         /* Needed for IO Read/Write Functions */\n#include &lt;linux/proc_fs.h&gt;  /* Needed for Proc File System Functions */\n#include &lt;linux/seq_file.h&gt; /* Needed for Sequence File Operations */\n#include &lt;linux/platform_device.h&gt;  /* Needed for Platform Driver Functions */\n#include &lt;linux/slab.h&gt; /*for kmalloc and kfree */\n#include &lt;linux/vmalloc.h&gt;\n\n/* Define Driver Name */\n#define DRIVER_NAME \"accelerator\"\n\n\nunsigned long *base_addr;   /* Vitual Base Address */\nstruct resource *res;       /* Device Resource Structure */\nunsigned long remap_size;   /* Device Memory Size */\n\n/* Write operation for /proc/accelerator\n * -----------------------------------\n *  When user cat a string to /proc/accelerator file, the string will be stored in\n *  const char __user *buf. This function will copy the string from user\n *  space into kernel space, and change it to an unsigned long value.\n *  It will then write the value to the register of accelerator controller,\n *  and turn on the corresponding LEDs eventually.\n */\n static ssize_t proc_accelerator_write(struct file *file, const char __user * buf,\n                  size_t count, loff_t * ppos)\n  {\n      //Allocate\n      char * myaddr_phrase;\n      char * pEnd;\n      char *buffer = vzalloc(count);\n      myaddr_phrase = buffer;\n      u32 myaddr_value;\n       u32 myreg_value;\n\n      //Copy Data \n      if (count &lt; 22) {\n          if (copy_from_user(myaddr_phrase, buf, count))\n              return -EFAULT;\n\n         //myaddr_phrase[count] = '\\0';\n     printk(\"count = %d\\n\", count);\n     printk(\"%s\\n\",myaddr_phrase);\n      }\n    // Use strtol to parse input\n    /* http://www.cplusplus.com/reference/cstdlib/strtol/ */\n         myaddr_value = simple_strtoul(myaddr_phrase, &amp;pEnd, 0);\n     printk(\"myaddr_value = %08x\\n\", myaddr_value);\n     pEnd = strsep(&amp;myaddr_phrase,\" \");\n     myreg_value = simple_strtoul(myaddr_phrase,&amp;pEnd ,0);\n     printk(\"myreg_value = %08x\\n\", myreg_value);\n     printk(\"final_value = %08x\\n\", (base_addr + (myreg_value)));\n     printk(\"mult_val = %08x\\n\", (myreg_value));\n     wmb();\n     iowrite32(myaddr_value, (base_addr + (myreg_value)));\n     return count;\n }\n\n /* Callback function when opening file /proc/accelerator\n  * ------------------------------------------------------\n  *  Read the register value of accelerator controller, print the value to\n  *  the sequence file struct seq_file *p. In file open operation for /proc/accelerator\n  *  this callback function will be called first to fill up the seq_file,\n  *  and seq_read function will print whatever in seq_file to the terminal.\n  */\n static int proc_accelerator_show(struct seq_file *p, void *v)\n {\n     u32 accelerator_value;\n     accelerator_value = ioread32(base_addr+2);\n     seq_printf(p, \"0x%x\\n\", accelerator_value);\n     return 0;\n }\n\n /* Open function for /proc/accelerator\n   * ------------------------------------\n   *  When user want to read /proc/accelerator (i.e. cat /proc/accelerator), the open function \n   *  will be called first. In the open function, a seq_file will be prepared and the \n   *  status of accelerator will be filled into the seq_file by proc_accelerator_show function.\n   *\n   *p 69\n    int (*open) (struct inode *, struct file *);\n    Though this is always the first operation performed on the device file, the driver\n    is not required to declare a corresponding method. If this entry is NULL, opening\n    the device always succeeds, but your driver isn\u2019t notified.\n\n    Open described on p76\n   */\n static int proc_accelerator_open(struct inode *inode, struct file *file)\n  {\n      unsigned int size = 16;\n      char *buf;\n      struct seq_file *m;\n      int res;\n\n      buf = (char *)kmalloc(size * sizeof(char), GFP_KERNEL);\n      if (!buf)\n          return -ENOMEM;\n\n      res = single_open(file, proc_accelerator_show, NULL);\n\n      if (!res) {\n          m = file-&gt;private_data;\n          m-&gt;buf = buf;\n          m-&gt;size = size;\n      } else {\n          kfree(buf);\n      }\n\n      return res;\n  }\n\n  /* File Operations for /proc/accelerator */\n  static const struct file_operations proc_accelerator_operations = {\n      .open = proc_accelerator_open,\n      .read =  seq_read,\n      .write = proc_accelerator_write,\n      .llseek = seq_lseek,\n      .release = single_release\n  };\n  /*\nint (*open) (struct inode *, struct file *);\nThough this is always the first operation performed on the device file, the driver\nis not required to declare a corresponding method. If this entry is NULL, opening\nthe device always succeeds, but your driver isn\u2019t notified.\n\nssize_t (*read) (struct file *, char __user *, size_t, loff_t *);\nUsed to retrieve data from the device. A null pointer in this position causes the\nreadsystem call to fail with-EINVAL(\u201cInvalid argument\u201d). A nonnegative return\nvalue represents the number of bytes successfully read (the return value is a\n\u201csigned size\u201d type, usually the native integer type for the target platform)\n\nssize_t (*write) (struct file *, const char __user *, size_t, loff_t *);\nSends data to the device. IfNULL, -EINVALis returned to the program calling the\nwritesystem call. The return value, if nonnegative, represents the number of\nbytes successfully written.\n\nloff_t (*llseek) (struct file *, loff_t, int);\nThellseek method is used to change the current read/write position in a file, and\nthe new position is returned as a (positive) return value. Theloff_tparameter is\na \u201clong offset\u201d and is at least 64 bits wide even on 32-bit platforms. Errors are\nsignaled by a negative return value. If this function pointer isNULL, seek calls will\nmodify the position counter in thefilestructure (described in the section \u201cThe\nfile Structure\u201d) in potentially unpredictable ways.\n\nint (*release) (struct inode *, struct file *);\nThis operation is invoked when thefilestructure is being released. Likeopen,\nreleasecan beNULL.\n*\n  */\n\n\n  /* Shutdown function for accelerator\n   * -----------------------------------\n   *  Before accelerator shutdown, turn-off all the leds\n  */\n static void accelerator_shutdown(struct platform_device *pdev)\n {\n    iowrite32(0, base_addr);\n }\n\n /* Remove function for accelerator\n  * ----------------------------------\n  *  When accelerator module is removed, turn off all the leds first,\n  *  release virtual address and the memory region requested.\n  */\n static int accelerator_remove(struct platform_device *pdev)\n {\n     accelerator_shutdown(pdev);\n\n     /* Remove /proc/accelerator entry */\n     remove_proc_entry(DRIVER_NAME, NULL);\n\n     /* Release mapped virtual address */\n     iounmap(base_addr);\n\n     /* Release the region */\n     release_mem_region(res-&gt;start, remap_size);\n\n     return 0;\n }\n\n /* Device Probe function for accelerator\n  * ------------------------------------\n  *  Get the resource structure from the information in device tree.\n  *  request the memory region needed for the controller, and map it into\n  *  kernel virtual memory space. Create an entry under /proc file system\n  *  and register file operations for that entry.\n  */\n static int accelerator_probe(struct platform_device *pdev)\n {\n\n     struct proc_dir_entry *accelerator_proc_entry;\n     int ret = 0;\n    printk(KERN_ALERT \"Probing\\n\");\n     res = platform_get_resource(pdev, IORESOURCE_MEM, 0);\n     if (!res) {\n         dev_err(&amp;pdev-&gt;dev, \"No memory resource\\n\");\n         return -ENODEV;\n     }\n\n     remap_size = res-&gt;end - res-&gt;start + 1;\n     if (!request_mem_region(res-&gt;start, remap_size, pdev-&gt;name)) {\n         dev_err(&amp;pdev-&gt;dev, \"Cannot request IO\\n\");\n         return -ENXIO;\n     }\n\n     base_addr = ioremap(res-&gt;start, remap_size);\n     if (base_addr == NULL) {\n         dev_err(&amp;pdev-&gt;dev, \"Couldn't ioremap memory at 0x%08lx\\n\",\n             (unsigned long)res-&gt;start);\n         ret = -ENOMEM;\n         goto err_release_region;\n     }\n\n     accelerator_proc_entry = proc_create(DRIVER_NAME, 0, NULL,\n                        &amp;proc_accelerator_operations);\n     if (accelerator_proc_entry == NULL) {\n         dev_err(&amp;pdev-&gt;dev, \"Couldn't create proc entry\\n\");\n         ret = -ENOMEM;\n         goto err_create_proc_entry;\n     }\n\n     printk(KERN_INFO DRIVER_NAME \" probed at VA 0x%08lx\\n\",\n            (unsigned long) base_addr);\n     printk(KERN_ALERT \"Goodbye, probe\\n\"); \n\n     return 0;\n\n  err_create_proc_entry:\n     iounmap(base_addr);\n  err_release_region:\n     release_mem_region(res-&gt;start, remap_size);\n\n     return ret;\n }\n\n /* device match table to match with device node in device tree */\n /*\n https://lwn.net/Articles/448502/\n */\n static const struct of_device_id accelerator_of_match[] = {\n     {.compatible = \"PCA,bitSplitter\"},\n     {},\n };\n\n MODULE_DEVICE_TABLE(of, accelerator_of_match);\n\n /* platform driver structure for accelerator driver */\n /*\n Platform devices are represented by the struct, and is found in &lt;linux/platform_device.h&gt;\n at minimum probe() and remove() must be supplied, the others have to do with power management \n https://lwn.net/Articles/448499/\n */\n static struct platform_driver accelerator_driver = {\n     .driver = {\n            .name = DRIVER_NAME,\n            .owner = THIS_MODULE,\n            .of_match_table = accelerator_of_match},\n     .probe = accelerator_probe,\n     .remove = accelerator_remove,\n     .shutdown = accelerator_shutdown\n};\n\n /* Register accelerator platform driver */\n /*\n   Helper macro for drivers that don't do\n * anything special in module init/exit.  This eliminates a lot of\n * boilerplate.  Each module may only use this macro once, and\n * calling it replaces module_init() and module_exit()\n *\n * Platform drivers are for HW that will not dynamically come and go into a Linux system, \n * such as the video and audio controllers in a tablet.  In makes sense to statically pull \n * in those code necessary through the __initcall magic discussed above.  \n *\n * http://henryomd.blogspot.com/2014/11/linux-kernel-startup.html\n */\n module_platform_driver(accelerator_driver);\n\n /* Module Informations */\n /*\n Discussed in 2.6 Preliminaries \n */\n MODULE_AUTHOR(\"Digilent, Inc.\");\n MODULE_LICENSE(\"GPL\");\n MODULE_DESCRIPTION(DRIVER_NAME \": accelerator driver (Simple Version)\");\n MODULE_ALIAS(DRIVER_NAME);\n</code></pre>\n"}, {"tags": ["c", "input", "dev-c++"], "comments": [{"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 1, "creation_date": 1461175100, "post_id": 36751603, "comment_id": 61083611, "body": "Open the text file and read it to process its data ."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461175107, "post_id": 36751603, "comment_id": 61083613, "body": "Have you decided what the return value from the function will mean?"}, {"owner": {"reputation": 147, "user_id": 5647546, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1062202783812089/picture?type=large", "display_name": "Social Programmer", "link": "https://stackoverflow.com/users/5647546/social-programmer"}, "edited": false, "score": 0, "creation_date": 1461175237, "post_id": 36751603, "comment_id": 61083690, "body": "it should be void i guess"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1461175622, "post_id": 36751603, "comment_id": 61083924, "body": "<a href=\"http://www.tutorialspoint.com/cprogramming/c_file_io.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/cprogramming/c_file_io.htm</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "is_accepted": true, "score": 1, "last_activity_date": 1461176704, "creation_date": 1461176704, "answer_id": 36752128, "question_id": 36751603, "link": "https://stackoverflow.com/questions/36751603/input-from-a-text-file/36752128#36752128", "title": "Input from a text file", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, char** argv)\n{\n  if (2 &gt; argc)\n  {\n    printf(\"Please enter a file name on the command line\\n\");\n    return 0;\n  }\n  FILE* in = fopen(argv[1], \"r\");\n  if (!in)\n  {\n    printf(\"Unable to open the specified file\\n\");\n    return 0;\n  }\n  ProcessInput(in);\n  fclose(in);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 5647546, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1062202783812089/picture?type=large", "display_name": "Social Programmer", "link": "https://stackoverflow.com/users/5647546/social-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 36752128, "answer_count": 1, "score": 0, "last_activity_date": 1461176704, "creation_date": 1461175013, "question_id": 36751603, "link": "https://stackoverflow.com/questions/36751603/input-from-a-text-file", "title": "Input from a text file", "body": "<p>I need to make a function , which will take as input a .txt file and then proceed \nworking on each character , while doing a bunch of operations. </p>\n\n<p>This how function's declaration looks like.</p>\n\n<pre><code>int ProcessInput(FILE *in);\n</code></pre>\n\n<p>The thing is I don't want to take an input from keyboard , but from the .txt file as mentioned before. \nI am working on Dev C++ .\nAny ideas ?</p>\n"}, {"tags": ["c", "bit-manipulation", "undefined-behavior", "ubsan"], "answers": [{"comments": [{"owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "edited": false, "score": 0, "creation_date": 1461175186, "post_id": 36751569, "comment_id": 61083655, "body": "Thanks, @AnT. In my case, I am converting to 7 bit fixed point when I perform the shift. So, what is the correct way of converting negative numbers to fixed point?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "edited": false, "score": 1, "creation_date": 1461175375, "post_id": 36751569, "comment_id": 61083777, "body": "@Jacko: Multiply it instead of shifting? Multiply it by 128. The compiler will still be able to generate a shift for that (if that&#39;s indeed the most efficient way to do it), but you will not have to go through UB."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1461177108, "post_id": 36751569, "comment_id": 61084844, "body": "From C11 standard: 6.5.7 Bitwise shift operators [...] The result of E1 &lt;&lt; E2 is E1 left-shifted E2 bit positions; vacated bits are filled with zeros. If E1 has an unsigned type, the value of the result is E1 &#215; 2^E2, reduced modulo one more than the maximum value representable in the result type. If E1 has a signed type and nonnegative value, and E1 &#215; 2^E2 is representable in the result type, then that is the resulting value; otherwise, the behavior is undefined."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 7, "last_activity_date": 1461175190, "last_edit_date": 1461175190, "creation_date": 1461174913, "answer_id": 36751569, "question_id": 36751538, "link": "https://stackoverflow.com/questions/36751538/ubsan-reports-875-7-as-undefined-behaviour/36751569#36751569", "title": "UBSAN reports: -875 &lt;&lt; 7 as undefined behaviour", "body": "<p>Your understanding is incorrect. </p>\n\n<p>Firstly you used <code>bar &lt;&lt;= FOO</code> syntax. This explicitly shifts <code>bar</code> and <code>bar</code> is negative. Left-shifting of negative values produces undefined behavior in C. There's no way <code>bar &lt;&lt;= FOO</code> can be interpreted as <code>-(875&lt;&lt;7)</code>. </p>\n\n<p>Secondly, concerning <code>-875 &lt;&lt; 7</code> in terms of operator priority: unary operators always have higher priority than binary ones, which means that <code>-875 &lt;&lt; 7</code> is <code>(-875) &lt;&lt; 7</code> and not <code>-(875 &lt;&lt; 7)</code>. And, again, left-shifting of negative values produces undefined behavior in C.</p>\n"}, {"comments": [{"owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "edited": false, "score": 0, "creation_date": 1461178837, "post_id": 36752739, "comment_id": 61085887, "body": "Thanks, @supercat. I am learning to treat shift operators with more respect :) Fast and potentially deadly."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "edited": false, "score": 1, "creation_date": 1461180476, "post_id": 36752739, "comment_id": 61086938, "body": "@Jacko: Hopefully there will someday be a recognized split between &quot;sane C&quot;, where shift registers will be free of side-effects, and the presently-fashionable &quot;Obtuse C&quot;, which goes out of its way to avoid letting programmers do anything useful beyond what the Standard requires."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1461184033, "post_id": 36752739, "comment_id": 61089258, "body": "With regard to the final paragraph, the following might be useful follow-up reading: Wang, Xi, et al. &quot;A differential approach to undefined behavior detection.&quot; Communications of the ACM 59.3 (2016): 99-106. (<a href=\"https://people.csail.mit.edu/nickolai/papers/wang-stack-cacm.pdf\" rel=\"nofollow noreferrer\">online</a>)"}, {"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1461185341, "post_id": 36752739, "comment_id": 61090051, "body": "What happened in 2005 to start the &quot;undefined :=&gt; unexecuted&quot; trend?  I have only recently become aware of it, and it hurts my brain.  I feel like an unwritten contract between programmer and compiler is being broken."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1461185521, "post_id": 36752739, "comment_id": 61090135, "body": "@AShelly: I&#39;m not sure what precipitated it, but I haven&#39;t found any evidence of the trend prior to that.  I haven&#39;t found any evidence that far back than that since I started looking, but I have enough of a recollection of there having been something in 2005 that I can&#39;t claim to be unaware of anything before that."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1461185772, "post_id": 36752739, "comment_id": 61090247, "body": "@AShelly: As for the contract, it&#39;s simple: the C89 Standard was written with the intention that it should form the common core for a variety of machine-specific dialects that would be extended to fit different platforms&#39; unique abilities.  The authors of the rationale noted, for example, that having &quot;unsigned char&quot; promote to &quot;signed int&quot; would not prevent a majority of then-current platforms from yielding deterministic arithmetically-correct behavior if &quot;unsigned x=uchar1*int1;&quot; yielded a result between INT_MAX+1u and UINT_MAX, even though such code might fail on other platforms."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 0, "creation_date": 1461185945, "post_id": 36752739, "comment_id": 61090343, "body": "@AShelly: It was widely seen as important that compilers not only comply with the Standard, but also that they abide by behavioral guarantees that offered by compilers for similar platforms.  If 100.0% of compilers would honor a behavioral guarantee except when invoked in hyper-pedantic mode, nobody had reason to think it mattered if the Standard actually required it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1461187167, "post_id": 36752739, "comment_id": 61090998, "body": "@njuffa: Looking through the bibliography of that paper, it seems the trend in question is mostly fairly recent.  The 2007 reference I saw &quot;(n+100 &gt; n)&quot; falls into a class of optimization I would regard as helpful, which is to allow compilers to treat integers with extra precision that may appear or disappear at the compiler&#39;s leisure--something very different from hyper-modernism."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1461188642, "post_id": 36752739, "comment_id": 61091678, "body": "@supercat I became aware of the trend around 2006 or 2007, when I was bitten by gcc&#39;s introduction of new optimizations exploiting undefined behavior, which &quot;broke&quot; code I had used without issues for more than a decade prior to that, across three platforms and five toolchains. BTW, a more detailed version of the paper in CACM by the same authors is: Wang, Xi, et al. &quot;A differential approach to undefined behavior detection.&quot; ACM Transactions on Computer Systems (TOCS) 33.1 (2015): 1."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1461189704, "post_id": 36752739, "comment_id": 61092075, "body": "@njuffa: What irks me is the attitude of gcc&#39;s maintainers that code which relies upon behavior which isn&#39;t defined by the Standard but had been treated 100% consistently by every modern compiler, should be considered &quot;broken&quot;, especially when fixing the code would effectively block what would otherwise be useful optimizations.  If C is to survive as a useful language, it needs to add normative specifications such that programs could say what corner-case behaviors they require, and compilers could then either accept the programs (and honor the requirements) or reject the programs."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1461189793, "post_id": 36752739, "comment_id": 61092110, "body": "@njuffa: If the authors of a compiler for some platform judge that nobody writing code for the platform would care about some guarantee, there would be no need for them to burden the compiler with it, but on the flip side code which would benefit from a guarantee that just about any platform should be able to offer cheaply shouldn&#39;t have to refrain from using it just because some obscure platform can&#39;t."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 3, "last_activity_date": 1461178561, "creation_date": 1461178561, "answer_id": 36752739, "question_id": 36751538, "link": "https://stackoverflow.com/questions/36751538/ubsan-reports-875-7-as-undefined-behaviour/36752739#36752739", "title": "UBSAN reports: -875 &lt;&lt; 7 as undefined behaviour", "body": "<p>On a sign-magnitude machine, it is unclear what the effect of left-shifting a negative number should be, and it would not be unreasonable for such a machine to trap if such an operation was attempted.  On such a machine, imposing any requirements on the behavior of a negative integer left-shift would likely have required compilers for such machines to generate extra code even in cases where the values to be shifted would always be positive.  To avoid imposing such costs, the authors of the Standard declined to mandate any particular behavior.</p>\n\n<p>Ones'-complement and two's-complement platforms would have no logical reason to trap when shifting a negative value (though whether -1&lt;&lt;1 should yield -2 or -3 on a ones'-complement machine would be unclear), but the authors of the Standard saw no reason to say that left-shifting of negative values has Undefined Behavior on platforms which use sign-magnitude integers, Implementation-Defined Behavior on platforms that use ones'-complement, and Standard-defined behavior on platforms which use two's-complement, since any two's-complement implementation would regard -1&lt;&lt;1 as yielding -2, whether or not the Standard mandated it, <em>unless the author was deliberately obtuse</em>.</p>\n\n<p>Until probably 2005 or so, there would have been nothing even imaginably unsafe about code which will only be called upon to run on commonplace two's-complement machines using the left-shift operator on a negative value.  Unfortunately, around that time an idea started to take hold which suggested that a compiler which avoids doing anything the Standard doesn't mandate can be more \"efficient\" than one which behaves usefully in situations not mandated by the Standard, and that such \"efficiency\" is desirable.  I am not yet aware of compilers regarding the statement <code>y=x&lt;&lt;1;</code> as retroactively making the value of <em>x</em> non-negative, but I do not believe there is any reason to believe that they won't do so in future so unless or until some agency officially codifies the behavioral guarantees which mainstream microcomputer C compilers unanimously upheld for 25+ years such code cannot be considered \"safe\".</p>\n"}], "owner": {"reputation": 11279, "user_id": 244005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/aec4e0f43a28c641ef701e2252dfbfa4?s=128&d=identicon&r=PG", "display_name": "Jacko", "link": "https://stackoverflow.com/users/244005/jacko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 36751569, "answer_count": 2, "score": 2, "last_activity_date": 1461178561, "creation_date": 1461174802, "question_id": 36751538, "link": "https://stackoverflow.com/questions/36751538/ubsan-reports-875-7-as-undefined-behaviour", "title": "UBSAN reports: -875 &lt;&lt; 7 as undefined behaviour", "body": "<p>Simple code snippet:</p>\n\n<pre><code>#define FOO 7\nint bar = -875;\nbar &lt;&lt;= FOO;\n</code></pre>\n\n<p>This is being reported by UBSAN as UB.  </p>\n\n<p>My understanding is that <code>-875 &lt;&lt; 7</code> is just <code>-(875&lt;&lt;7)</code>\nand there is no overflow.</p>\n\n<p>So, is there a real problem here?</p>\n"}, {"tags": ["c", "macos"], "answers": [{"comments": [{"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461175450, "post_id": 36751645, "comment_id": 61083823, "body": "This is for a fuzzer, I specifically want to launch and test Preview so I&#39;m not worried about users, also I don&#39;t want to wait for Preview which using system() does."}, {"owner": {"reputation": 26715, "user_id": 137080, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86bdc5ff5eee5288200118aeebf680d0?s=128&d=identicon&r=PG", "display_name": "Williham Totland", "link": "https://stackoverflow.com/users/137080/williham-totland"}, "reply_to_user": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461175653, "post_id": 36751645, "comment_id": 61083946, "body": "@2trill2spill <code>open</code> should return control pretty quickly, but if it&#39;s not quick enough, you could try <code>system(&quot;open &#47;file.pdf &amp;&quot;)</code>; should be even quicker."}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461176109, "post_id": 36751645, "comment_id": 61084236, "body": "The reason I want to use fork is so I have the pid of Preview so I can kill it right after launching, how can I get the pid using system() or otherwise kill Preview."}, {"owner": {"reputation": 26715, "user_id": 137080, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86bdc5ff5eee5288200118aeebf680d0?s=128&d=identicon&r=PG", "display_name": "Williham Totland", "link": "https://stackoverflow.com/users/137080/williham-totland"}, "reply_to_user": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461176570, "post_id": 36751645, "comment_id": 61084523, "body": "@2trill2spill I&#39;m not sure I understand exactly what you&#39;re trying to do: Let&#39;s back up a few steps. What exactly are you trying to achieve in the first place?"}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461176957, "post_id": 36751645, "comment_id": 61084756, "body": "Specifically I&#39;m trying to test Preview using a technique called fuzzing. So I mutate a file and then I want Preview to try running it. When Preview is done launching I want to kill it so that Preview doesn&#39;t stay running forever. Then you repeat the whole process until Preview crashes or your kernel panics."}, {"owner": {"reputation": 26715, "user_id": 137080, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86bdc5ff5eee5288200118aeebf680d0?s=128&d=identicon&r=PG", "display_name": "Williham Totland", "link": "https://stackoverflow.com/users/137080/williham-totland"}, "reply_to_user": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461177230, "post_id": 36751645, "comment_id": 61084924, "body": "@2trill2spill Ah, I see. In this case, it sounds as if open should do the job admirably: Instead of closing and re-opening Preview on each new file, simply keep calling open. If Preview is already open, the file will be sent off to preview, and loaded. The design of the application (if it&#39;s well-behaved, which is not an unreasonable assumption), means that opening the application and then a file and <i>just</i> opening a file are identical processes once the application is open; and the application opens completely prior to actually loading anything."}, {"owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461178979, "post_id": 36751645, "comment_id": 61085983, "body": "I tried calling open in a loop and there is two problems with that, first If I don&#39;t kill Preview each time while feeding it corrupted files it&#39;s bound to get in a weird state and if it does crash it will be hard to reproduce because it&#39;s not one file causing the crash it&#39;s a series of files. Secondly when I keep calling open on different files the screen fills up with Preview windows and eventually grinds to a halt when I run low on memory. So I really need to be able to kill Preview in between each test run."}, {"owner": {"reputation": 26715, "user_id": 137080, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86bdc5ff5eee5288200118aeebf680d0?s=128&d=identicon&r=PG", "display_name": "Williham Totland", "link": "https://stackoverflow.com/users/137080/williham-totland"}, "reply_to_user": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "edited": false, "score": 0, "creation_date": 1461179914, "post_id": 36751645, "comment_id": 61086579, "body": "@2trill2spill Pivoting into a Cocoa application using execv isn&#39;t so simple; it sounds like what you really want is to leverage Objective-C in this case: Have a loop that spawns instances of Preview using, for instance, <code>system(&quot;open -nF -a Preview testfile.pdf&quot;)</code>; register with the system notification center and watch for &quot;Document Opened&quot; notifications from Preview, and kill the applications using the info from the notification. After all, using execv <i>already</i> leaves your application in a weird state."}], "tags": [], "owner": {"reputation": 26715, "user_id": 137080, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86bdc5ff5eee5288200118aeebf680d0?s=128&d=identicon&r=PG", "display_name": "Williham Totland", "link": "https://stackoverflow.com/users/137080/williham-totland"}, "is_accepted": false, "score": 0, "last_activity_date": 1461175154, "creation_date": 1461175154, "answer_id": 36751645, "question_id": 36751396, "link": "https://stackoverflow.com/questions/36751396/how-to-launch-preview-programmatically-with-fork-and-execv/36751645#36751645", "title": "How to launch Preview programmatically with fork and execv?", "body": "<p>You also need to set the additional arguments that the Mac OS X application system supplies to <code>main()</code>, but you shouldn't be doing any of this:</p>\n\n<p>Preview may or may not be the default PDF viewer for the system it's running on, and if it is not, congratulations, you now have a bewildered and possibly angry user.</p>\n\n<p>If you're dead set on not using Objective-C, what you'll want to do is <code>system(\"open /path/to/file.pdf\");</code>. This will take care of all the tricky business of figuring out <em>what</em> application to use, <em>where</em> it is and <em>how</em> to launch it.</p>\n"}], "owner": {"reputation": 1054, "user_id": 2930456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2Etu5.jpg?s=128&g=1", "display_name": "2trill2spill", "link": "https://stackoverflow.com/users/2930456/2trill2spill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461175154, "creation_date": 1461174390, "question_id": 36751396, "link": "https://stackoverflow.com/questions/36751396/how-to-launch-preview-programmatically-with-fork-and-execv", "title": "How to launch Preview programmatically with fork and execv?", "body": "<p>I'm trying to launch Preview on OSX using fork and execv. When I use fork and execv on Preview the icon pops up in the dock, but nothing is displayed on the screen. The console also displays the two error messages below. </p>\n\n<pre><code>4/20/16 12:18:23.276 PM iconservicesagent[319]: -[ISGenerateImageOp generateImageWithCompletion:] Failed to composit image for descriptor &lt;ISBindingImageDescriptor: 0x7f85aa50b890&gt;.\n4/20/16 12:18:23.276 PM quicklookd[1959]: Error returned from iconservicesagent: (null)\n</code></pre>\n\n<p>Below is some code to reproduce the problem, note you will have to replace\nthe hardcoded file path in the <code>args</code> array to a valid pdf file path for your system.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(int argc, char *argv[])\n{\n    pid_t pid = 0;\n    int32_t rtrn = 0;\n\n    pid = fork();\n    if(pid == 0)\n    {\n        char * const args[] = {\"/users/nah/desktop/file.pdf\", NULL};\n\n        rtrn = execv(\"/Applications/Preview.app/Contents/MacOS/Preview\", args);\n        if(rtrn &lt; 0)\n        {\n            printf(\"Can't execute target program: %s\\n\", strerror(errno));\n            _exit(-1);\n        }\n\n        _exit(0);\n    }\n    else if(pid &gt; 0)\n    {\n        int32_t status = 0;\n\n        while(waitpid(-1, &amp;status, 0) &gt; 0)\n        {\n\n        }\n    }\n    else\n    {\n        printf(\"Can't create child proc: %s\\n\", strerror(errno));\n        return (-1);\n    }\n\n    return (0);\n}\n</code></pre>\n\n<p>However If I replace all the fork and execv code and use <code>system(3)</code> like in the example below, Preview opens and displays just fine and there are no error messages in console. So how do I launch Preview using fork and execv instead using <code>system(3)</code> or having to use Objective-C?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdint.h&gt;\n\nint main(int argc, char *argv[])\n{\n    pid_t pid = 0;\n    int32_t rtrn = 0;\n\n    rtrn = system(\"/Applications/Preview.app/Contents/MacOS/Preview /users/nah/desktop/file.pdf\");\n    if(rtrn &lt; 0)\n    {\n        printf(\"System: %s\\n\", strerror(errno));\n        return (-1);\n    }\n\n    return (0);\n}\n</code></pre>\n"}, {"tags": ["c", "struct", "initialization", "heap-memory"], "comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1461174021, "post_id": 36751204, "comment_id": 61082948, "body": "Are you sure that works, because it shouldn&#39;t. What is the type of <code>entry</code>?"}, {"owner": {"reputation": 195, "user_id": 1439561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6a27aba9787f5a4daad23d561a61808?s=128&d=identicon&r=PG", "display_name": "Cranium", "link": "https://stackoverflow.com/users/1439561/cranium"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1461174347, "post_id": 36751204, "comment_id": 61083157, "body": "<code>entry</code> is a <code>struct entry*</code>. I add the declaration part in the question."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1461174825, "post_id": 36751204, "comment_id": 61083432, "body": "As I suspected, it won&#39;t compile: <a href=\"https://ideone.com/2YIgUN\" rel=\"nofollow noreferrer\">ideone.com/2YIgUN</a>"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1461175188, "post_id": 36751204, "comment_id": 61083656, "body": "I just noticed that you also suggested memcpy, so yeah that is the correct approach. :-s"}, {"owner": {"reputation": 195, "user_id": 1439561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6a27aba9787f5a4daad23d561a61808?s=128&d=identicon&r=PG", "display_name": "Cranium", "link": "https://stackoverflow.com/users/1439561/cranium"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 1, "creation_date": 1461175304, "post_id": 36751204, "comment_id": 61083734, "body": "Strange... With your file: <code>clang -std=c11 -Weverything -pedantic struct_test.c  -o struct_test</code> yields no error for me."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1461175572, "post_id": 36751204, "comment_id": 61083898, "body": "gcc correctly complains and clang doesn&#39;t. Looks like a compiler bug."}], "answers": [{"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1471506420, "post_id": 36751372, "comment_id": 65376207, "body": "Is it really safe to <code>memcpy</code> new values over <code>const</code> fields?"}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1471506487, "post_id": 36751372, "comment_id": 65376243, "body": "Wait, never mind, you are not doing that, <code>mem</code> does not have a type yet. But leaving the comment in case someone else wonders about it."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1471506489, "post_id": 36751372, "comment_id": 65376244, "body": "@hyde Yes, memcpy sets the effective type to the object."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1471515597, "post_id": 36751372, "comment_id": 65381761, "body": "Is it a problem to use <code>e</code> instead of <code>mem</code> the whole way in your sample? (I guess you used <code>mem</code> to avoid this issue entirely)"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1471515619, "post_id": 36751372, "comment_id": 65381773, "body": "@M.M It makes no difference what points to an object. The object before memcpy doesn&#39;t have an effective type. Since this is way beyond OP&#39;s understanding I used void to imply it."}], "tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": true, "score": 5, "last_activity_date": 1471506171, "last_edit_date": 1471506171, "creation_date": 1461174298, "answer_id": 36751372, "question_id": 36751204, "link": "https://stackoverflow.com/questions/36751204/use-of-struct-initialization-syntax-for-on-heap-struct/36751372#36751372", "title": "Use of struct initialization syntax for on-heap struct", "body": "<p>The assignment you presented is not correct and should not compile.</p>\n\n<p>The correct way of initializing an allocated struct with const members is to allocate some memory, create a temporary struct entry object, and then use memcpy to copy the object to the allocated memory:</p>\n\n<pre><code>void* mem = malloc( sizeof( struct entry ) );\nstruct entry temp = { key , data , NULL };\nmemcpy( mem , &amp;temp , sizeof( temp ) );\nstruct entry* e = mem;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1471516334, "post_id": 39015684, "comment_id": 65382261, "body": "memcpy-ing over an object of type struct entry (or any other type) that doesn&#39;t have allocated storage duration would cause undefined behavior."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1471516936, "post_id": 39015684, "comment_id": 65382641, "body": "@2501 can you provide standard references for that"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1471517075, "post_id": 39015684, "comment_id": 65382745, "body": "9899:2011 Expressions 6.5 paragraphs 6 and 7"}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1471517450, "post_id": 39015684, "comment_id": 65382967, "body": "I made a mistake, above comments are not relevant. The problem is with const, not aliasing. Sorry. :-/ memcpy-ing over a type struct entry is ub becase of 6.7.3 p6, since one of the members is const."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1471519096, "post_id": 39015684, "comment_id": 65383942, "body": "@2501 the 6.7.3p6 talks about writing using a non-const lvalue. <code>memcpy</code> doesn&#39;t write with an lvalue. I&#39;ve seen people say memcpy should be treated the same as a series of assignment of <code>unsigned char</code> but I don&#39;t think the actual text in the standard is solid.  Unclear wording imo, although I agree that the most sensible thing that the standard <i>should</i> say is that you can&#39;t memcpy over the object declared const."}, {"owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "edited": false, "score": 0, "creation_date": 1471525577, "post_id": 39015684, "comment_id": 65388411, "body": "Read 7.24.1. p1 and p3. The lvalue is unsigned char."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1471515665, "creation_date": 1471515665, "answer_id": 39015684, "question_id": 36751204, "link": "https://stackoverflow.com/questions/36751204/use-of-struct-initialization-syntax-for-on-heap-struct/39015684#39015684", "title": "Use of struct initialization syntax for on-heap struct", "body": "<p>This line:</p>\n\n<pre><code>*entry = (struct entry) { .key = key, .data = data, .next = NULL };\n</code></pre>\n\n<p>uses the assignment operator. The conditions for assignment operator (C11 6.5.16/2) include:</p>\n\n<blockquote>\n  <p><strong>Constraints</strong></p>\n  \n  <p>An assignment operator shall have a modifiable lvalue as its left operand.</p>\n</blockquote>\n\n<p>The definition of <em>modifiable lvalue</em> can be found in 6.3.2.1/1:</p>\n\n<blockquote>\n  <p>A modifiable lvalue is an lvalue that does not have array type, does not have an incomplete type, does not have a const-qualified type, and if it is a structure or union, does not have any member (including, recursively, any member or element of all contained aggregates or unions) with a const-qualified type.</p>\n</blockquote>\n\n<p>So <code>*entry</code> is not a modifiable lvalue, because its type is a struct that has a member with const-qualified type. Therefore it is a <strong>constraint violation</strong> to have <code>*entry</code> appear on the left-hand-side of the assignment operator.  </p>\n\n<p>The clang compiler (all versions I tried) appears to not give any diagnostic message for this constraint violation; this is clearly a compiler bug. gcc does give a diagnostic.</p>\n\n<hr>\n\n<p>Regarding the second part of the question:</p>\n\n<blockquote>\n  <p>should I prefer creating a local struct that is then copied with memcpy to the right location?</p>\n</blockquote>\n\n<p>As also explained by 2501, you can do this in C when writing into space allocated by the <code>malloc</code> family.   (If you had declared a named <code>struct entry</code> object then it is less clear whether <code>memcpy</code>ing over it is permitted).</p>\n"}], "owner": {"reputation": 195, "user_id": 1439561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f6a27aba9787f5a4daad23d561a61808?s=128&d=identicon&r=PG", "display_name": "Cranium", "link": "https://stackoverflow.com/users/1439561/cranium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 36751372, "answer_count": 2, "score": 2, "last_activity_date": 1471515665, "creation_date": 1461173752, "last_edit_date": 1461174418, "question_id": 36751204, "link": "https://stackoverflow.com/questions/36751204/use-of-struct-initialization-syntax-for-on-heap-struct", "title": "Use of struct initialization syntax for on-heap struct", "body": "<p>I have this simple structure I want to initialize on the heap and return as a pointer in a function.</p>\n\n<pre><code>struct entry {\n    const char* const key; // We don't want the key modified in any way\n    const void* data;      // But the pointer to data can change\n    struct entry* next;\n};\n</code></pre>\n\n<p>There is one problem, I cannot <code>calloc</code> it and initialize members one by one because <code>key</code> is a const pointer. I found somewhere this syntax that works:</p>\n\n<pre><code>struct entry* entry = calloc(1, sizeof(struct entry));\n*entry = (struct entry) { .key = key, .data = data, .next = NULL };\n</code></pre>\n\n<p>But I don't know what is going on with it: does it create an \"anonymous\" struct that is then copied to the place where <code>*entry</code> lives? Is that safe to use or should I prefer creating a local struct that is then copied with <code>memcpy</code> to the right location?</p>\n"}, {"tags": ["c", "windows", "winapi"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461173751, "post_id": 36751066, "comment_id": 61082777, "body": "Yes, for IPV6 it is not a nul-terminated string as the page says. It is a byte array. Print each byte value separately in a loop."}, {"owner": {"reputation": 284, "user_id": 1864522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a8ccbc1b1149a2607a33a932a744f5?s=128&d=identicon&r=PG", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/1864522/polar-bear"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461175946, "post_id": 36751066, "comment_id": 61084142, "body": "Yes but the line &quot;if (AF_INET == address-&gt;AdresseFamily)&quot; garanties that it will only be IPV4 adresses. Printing it byte by byte will only work for IPV6 adresses"}], "answers": [{"comments": [{"owner": {"reputation": 284, "user_id": 1864522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a8ccbc1b1149a2607a33a932a744f5?s=128&d=identicon&r=PG", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/1864522/polar-bear"}, "edited": false, "score": 1, "creation_date": 1461344415, "post_id": 36756895, "comment_id": 61173091, "body": "Worked perfectly ! Thanks ! And the IPV6 address is offset by two bytes too. (for anyone else coming with the same problem)"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1461194246, "creation_date": 1461194246, "answer_id": 36756895, "question_id": 36751066, "link": "https://stackoverflow.com/questions/36751066/wts-client-address-address-wont-print-properly/36756895#36756895", "title": "WTS_CLIENT_ADDRESS address won&#39;t print properly", "body": "<p>You are not taking into account the following note in the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383861.aspx\" rel=\"nofollow\"><code>WTS_INFO_CLASS</code></a> documentation:</p>\n\n<blockquote>\n  <p>WTSClientAddress<br>\n  The network type and network address of the client. For more information, see WTS_CLIENT_ADDRESS.</p>\n  \n  <p><strong>The IP address is offset by two bytes from the start of the Address member of the WTS_CLIENT_ADDRESS structure.</strong></p>\n</blockquote>\n\n<p>Also, despite what the documentation says, the IPv4 address is NOT a null-terminated string! It is actually the raw 4 bytes of the IPv4 address (just like the IPv6 address is raw bytes).</p>\n\n<p>Try this instead:</p>\n\n<pre><code>WTSQuerySessionInformation(WTS_CURRENT_SERVER_HANDLE,\n                           SessionNo,\n                           WTSClientAddress,\n                           &amp;ppBuffer,\n                           &amp;pBytesReturned);\n\naddress = (WTS_CLIENT_ADDRESS *)ppBuffer;\n\nif (AF_INET == address-&gt;AddressFamily)\n{\n    printf(\"Client Address : %d.%d.%d.%d\\n\",\n        address-&gt;Address[2], address-&gt;Address[3], address-&gt;Address[4], address-&gt;Address[5]);\n}\nelse if (AF_INET6 == address-&gt;AddressFamily)\n{\n    //print IPV6\n}\n</code></pre>\n"}], "owner": {"reputation": 284, "user_id": 1864522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a8ccbc1b1149a2607a33a932a744f5?s=128&d=identicon&r=PG", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/1864522/polar-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 36756895, "answer_count": 1, "score": 1, "last_activity_date": 1461194246, "creation_date": 1461173392, "last_edit_date": 1461176044, "question_id": 36751066, "link": "https://stackoverflow.com/questions/36751066/wts-client-address-address-wont-print-properly", "title": "WTS_CLIENT_ADDRESS address won&#39;t print properly", "body": "<p>I'm trying to get the IP address of all the RDP connections logged into a computer. I'm using WTSEnumerateSessions and WTSQuerySessionInformation to retrieve a pointer to a WTS_CLIENT_ADDRESS structure which contains the address. Here is part of the code :</p>\n\n<pre><code>WTSQuerySessionInformation(WTS_CURRENT_SERVER_HANDLE,\n                           SessionNo,\n                           WTSClientAddress,\n                           &amp;ppBuffer,\n                           &amp;pBytesReturned);\n\naddress = (WTS_CLIENT_ADDRESS *)ppBuffer;\n\nif (AF_INET == address-&gt;AddressFamily)\n{\n    printf(\"Client Address : %s\\n\", (LPSTR)address-&gt;Address);\n}\nelse if (AF_INET6 == address-&gt;AddressFamily)\n{\n    //print IPV6\n}\n</code></pre>\n\n<p>I can get the AddressFamily and the value is good, but when I try to print the Address I get gibberish. MSDN says the value is a null terminated string but it just won't print like it should. Here's the link :</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383857(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/aa383857(v=vs.85).aspx</a></p>\n\n<p>I have a feeling I'm missing something here.</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1461173117, "post_id": 36750903, "comment_id": 61082391, "body": "I don&#39;t know why you are using an array of string pointers, but even so, <code>r[c-i]</code> should be <code>r[c-i-1]</code> if <code>c</code> is the array length. And then, you make the classic &quot;howler&quot; of swapping the characters <i>twice</i> instead of of stopping in the middle."}, {"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 1, "creation_date": 1461269225, "post_id": 36750903, "comment_id": 61135184, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33047452/definitive-list-of-common-reasons-for-segmentation-faults\">Definitive List of Common Reasons for Segmentation Faults</a>"}], "answers": [{"tags": [], "owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "is_accepted": false, "score": 3, "last_activity_date": 1461173355, "creation_date": 1461173355, "answer_id": 36751048, "question_id": 36750903, "link": "https://stackoverflow.com/questions/36750903/location-of-segmentation-fault/36751048#36751048", "title": "location of segmentation fault", "body": "<p>Problem lies here -</p>\n\n<pre><code>char  *r[40];    \nfor(i=0;i&lt;c;i++)\n  *(r[c-i])=*(ptr[i]);\n</code></pre>\n\n<p>Here you declare array of <code>char</code> pointers <code>r</code> and you dereference these uninitialized pointers which must have caused seg fault . </p>\n"}], "owner": {"reputation": 3, "user_id": 6177579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de99ae5c435852a1dc14ad43d6d83de9?s=128&d=identicon&r=PG&f=1", "display_name": "raven", "link": "https://stackoverflow.com/users/6177579/raven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461227018, "creation_date": 1461172892, "last_edit_date": 1461222113, "question_id": 36750903, "link": "https://stackoverflow.com/questions/36750903/location-of-segmentation-fault", "title": "location of segmentation fault", "body": "<p>I am unable to locate the cause of the segmentation fault \nobjective-to reverse a string using pointers</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nvoid swap(char *ptr[], int c)\n{\n  int i;\n  char  *r[40];    \n  for(i=0; i&lt;c; i++)\n    *(r[c-i]) = *(ptr[i]);\n  printf(\"%s\",*r);\n}\n\nmain()\n{\n  int i;\n  char *ptr[20],str[40];\n\n  printf(\"enter string:\");\n  gets(str);\n  for(i=0; i&lt;(strlen(str)); i++)\n    ptr[i]=&amp;(str[i]);\n  swap(ptr,strlen(str));    \n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "gdb", "double", "binary-data"], "comments": [{"owner": {"reputation": 2134, "user_id": 2623659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1bd33f70a971bf89c7719005d477e2b?s=128&d=identicon&r=PG", "display_name": "ach", "link": "https://stackoverflow.com/users/2623659/ach"}, "edited": false, "score": 1, "creation_date": 1461179346, "post_id": 36750774, "comment_id": 61086219, "body": "<code>&#47;t</code> doesn&#39;t mean printing the bit pattern, it just means a base 2 representation of the value, the value itself being 107 (gdb knows the type of your <code>a</code>). To find out the bit pattern, use the <code>x</code> command."}], "answers": [{"tags": [], "owner": {"reputation": 182, "user_id": 1988355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b6522568728b68ea9d7ea5d22b7115?s=128&d=identicon&r=PG", "display_name": "DGounaris", "link": "https://stackoverflow.com/users/1988355/dgounaris"}, "is_accepted": false, "score": 1, "last_activity_date": 1461172792, "creation_date": 1461172792, "answer_id": 36750873, "question_id": 36750774, "link": "https://stackoverflow.com/questions/36750774/why-is-double-represented-as-integer/36750873#36750873", "title": "Why is &quot;double&quot; represented as integer?", "body": "<p>Doubles are represented in powers of two, just a bit different than integers. Not going into much details, 107 would be 1.101011 * (2^6) = 1101011. It is possible that gdb only shows the last result instead of giving you the full 64bit representation for no reason. </p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 5390751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3580b981c5c41c1a32c5a2855254c77e?s=128&d=identicon&r=PG&f=1", "display_name": "D. O.", "link": "https://stackoverflow.com/users/5390751/d-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1461173350, "creation_date": 1461173350, "answer_id": 36751044, "question_id": 36750774, "link": "https://stackoverflow.com/questions/36750774/why-is-double-represented-as-integer/36751044#36751044", "title": "Why is &quot;double&quot; represented as integer?", "body": "<p>well im not familiar with gdb, but when you write \"d\" it might think that you explicitly mean integers</p>\n\n<p>consider:</p>\n\n<pre><code>double foo = 1.0;\nprintf(\"%d\",foo);\n</code></pre>\n\n<p>c will be confused because you tell it you will give it an integer but you  actually give it a double.</p>\n"}, {"comments": [{"owner": {"reputation": 10198, "user_id": 1229490, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bca06377adfdc168d5a1f70ee1e55f5?s=128&d=identicon&r=PG", "display_name": "OneZero", "link": "https://stackoverflow.com/users/1229490/onezero"}, "edited": false, "score": 0, "creation_date": 1461175882, "post_id": 36751097, "comment_id": 61084103, "body": "Sorry that was a typo. I was using <code>p &#47;t a</code> actually. But in any case, the format specifier is <code>\\t</code>, which tells it to print as binary. So the original typo&#39;ed <code>d</code> only serves as a variable name."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 10198, "user_id": 1229490, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bca06377adfdc168d5a1f70ee1e55f5?s=128&d=identicon&r=PG", "display_name": "OneZero", "link": "https://stackoverflow.com/users/1229490/onezero"}, "edited": false, "score": 0, "creation_date": 1461177283, "post_id": 36751097, "comment_id": 61084954, "body": "@OneZero web page says it should be a forward slash  For example, to print the program counter in hex (see section Registers), type  <code>p&#47;x $pc</code>"}], "tags": [], "owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "is_accepted": false, "score": 5, "last_activity_date": 1461177098, "last_edit_date": 1461177098, "creation_date": 1461173467, "answer_id": 36751097, "question_id": 36750774, "link": "https://stackoverflow.com/questions/36750774/why-is-double-represented-as-integer/36751097#36751097", "title": "Why is &quot;double&quot; represented as integer?", "body": "<p>You told gdb to print it as a binary integer.</p>\n\n<pre><code> p /t a\n</code></pre>\n\n<p>If you want to see the floating point version use</p>\n\n<pre><code> p /f a\n</code></pre>\n\n<p><a href=\"http://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_9.html#SEC55\" rel=\"nofollow\">Output formats</a></p>\n\n<blockquote>\n  <p>x Regard the bits of the value as an integer, and print the integer in\n  hexadecimal. </p>\n  \n  <p>d Print as integer in signed decimal. </p>\n  \n  <p>u Print as integer in unsigned decimal. </p>\n  \n  <p>o Print as integer in octal. </p>\n  \n  <p>t Print as integer in binary. The letter `t' stands for \"two\". (2) </p>\n  \n  <p>a Print as an address, both absolute in hexadecimal and as an offset\n  from the nearest preceding symbol. You can use this format used to\n  discover where (in what function) an unknown address is located:</p>\n  \n  <p>c Regard as an integer and print it as a character constant. </p>\n  \n  <p>f Regard the bits of the value as a floating point number and print\n  using typical floating point syntax.</p>\n  \n  <p>For example, to print the program counter in hex (see section\n  Registers), type <code>p/x $pc</code></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "is_accepted": false, "score": 0, "last_activity_date": 1461262542, "last_edit_date": 1461262542, "creation_date": 1461252815, "answer_id": 36774266, "question_id": 36750774, "link": "https://stackoverflow.com/questions/36750774/why-is-double-represented-as-integer/36774266#36774266", "title": "Why is &quot;double&quot; represented as integer?", "body": "<p>There are several ways to print variables' values from the gdb command line.</p>\n\n<ul>\n<li><p><a href=\"http://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_9.html#SEC52\" rel=\"nofollow\">print</a> works on expressions, and will do some implicit conversions, just as C does.\n<br>\n<code>p /t a</code> in your example will convert a's value to an integer and print it in base 2.\n<br>\nYou wanted to look at <code>a</code>'s bit pattern, so there are a few options with <code>print</code>:</p>\n\n<ul>\n<li>you can cast its address to a pointer to an unsigned integer type that's the same length as a double - probably <code>unsigned long long</code> or <code>uint64_t</code> in your example - and dereference that.\n<br>\n<code>(gdb) p /t *(uint64_t *)&amp;a</code>\n<br>\n<code>$6 = 100000001011010110000000000000000000000000000000000000000000000</code></li>\n<li>You can use <code>{uint64_t}</code> to accomplish the same thing more concisely.\n<br>\n<code>(gdb) p /t {uint64_t}&amp;a</code>\n<br>\n<code>$7 = 100000001011010110000000000000000000000000000000000000000000000</code></li>\n</ul></li>\n<li><p><a href=\"http://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_9.html#SEC56\" rel=\"nofollow\">x</a> displays the data at a given address, and you can specify the datatype. <code>/g</code> means an 8-byte integer.\n<br>\n<code>(gdb) x /tg &amp;a</code>\n<br>\n<code>0x7fffffffded8: 0100000001011010110000000000000000000000000000000000000000000000</code></p></li>\n</ul>\n\n<p>If you use optimization, it's possible that <code>a</code> will be in a register, and you won't be able to take its address, so none of the above will work.</p>\n\n<pre><code>(gdb) p {uint64_t}&amp;a\nAddress requested for identifier \"a\" which is in register $ymm0\n</code></pre>\n\n<p>But <code>gdb</code> supports printing the contents of AVX registers in various formats, using syntax resembling a C union of arrays.</p>\n\n<pre><code>(gdb) p $ymm0\n$1 = {v8_float = {0, 3.41796875, 0, 0, 0, 0, 0, 0},\nv4_double = {107, 0, 0, 0}, v32_int8 = {0, 0, 0, 0, 0, -64, 90, \n64, 0 &lt;repeats 24 times&gt;},\nv16_int16 = {0, 0, -16384, 16474, 0 &lt;repeats 12 times&gt;},\nv8_int32 = {0, 1079689216, 0, 0, 0, 0, 0, 0},\nv4_int64 = {4637229872563879936, 0, 0, 0},\nv2_int128 = {0x0000000000000000405ac00000000000, 0x00000000000000000000000000000000}}\n\n(gdb) p /t $ymm0.v4_int64[0]\n$2 = 100000001011010110000000000000000000000000000000000000000000000\n</code></pre>\n"}], "owner": {"reputation": 10198, "user_id": 1229490, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4bca06377adfdc168d5a1f70ee1e55f5?s=128&d=identicon&r=PG", "display_name": "OneZero", "link": "https://stackoverflow.com/users/1229490/onezero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1461262542, "creation_date": 1461172485, "last_edit_date": 1461175812, "question_id": 36750774, "link": "https://stackoverflow.com/questions/36750774/why-is-double-represented-as-integer", "title": "Why is &quot;double&quot; represented as integer?", "body": "<pre><code>void foo(double a) {  \n  ...\n}\n</code></pre>\n\n<p>And in <code>main()</code> I passed <code>107.0</code> to <code>foo</code> as its parameter. Then I used gdb to examine the binary representation of <code>a</code> by <code>p /t a</code>, and this is what I got: </p>\n\n<pre><code>$1 = 1101011\n</code></pre>\n\n<p>This results seems very strange to me. This is the binary representation of INTEGER 107. But here the type of <code>a</code> is defined as <code>double</code> and we passed a parameter of <code>107.0</code>. And we know that doubles have different binary representations as integers. </p>\n\n<p>Can anyone explain why <code>a</code> has a integer binary rep rather than double? Is the compiler doing anything funny?</p>\n"}, {"tags": ["c", "struct", "malloc", "sdl"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461174505, "post_id": 36750768, "comment_id": 61083247, "body": "<code>malloc</code> does not initialise the memory it provides. So <code>player-&gt;playerHp.healthSurface</code> has an arbitrary value that will cause problems when you try to dereference it. If the struct contains pointers, each one must be initialised too. But when you do initialise it, you get a different kind of error, but not a crash. I notice you have not provide any <code>flag</code> value, is that a problem?"}, {"owner": {"reputation": 15473, "user_id": 744720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65030f1bd22dbb4d1e6976cfac08a1c5?s=128&d=identicon&r=PG", "display_name": "keltar", "link": "https://stackoverflow.com/users/744720/keltar"}, "edited": false, "score": 0, "creation_date": 1461209431, "post_id": 36750768, "comment_id": 61097501, "body": "Are you trying to create palette surface (bpp=4 in surface creation)? Start with RGB, it would be much simpler. If not, then your bpp and colour masks are likely to be incorrect."}], "owner": {"reputation": 33, "user_id": 5390751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3580b981c5c41c1a32c5a2855254c77e?s=128&d=identicon&r=PG&f=1", "display_name": "D. O.", "link": "https://stackoverflow.com/users/5390751/d-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1461172462, "creation_date": 1461172462, "question_id": 36750768, "link": "https://stackoverflow.com/questions/36750768/sdl-fillrect-segmentation-fault-struct-inside-struct-with-pointer-confusion", "title": "SDL_Fillrect segmentation fault / struct inside struct with pointer confusion", "body": "<p>Firstly I want to say that I'm not a professional c programmer \nand  with that out of the  way, i'll get right into my problem.</p>\n\n<p>So i have these 2 structs: </p>\n\n<pre><code>struct hitPointData{\n    int size;\n    int maxHp;\n    int currentHp;\n    SDL_Rect healthBarCurrent;\n    SDL_Rect healthBarMax;\n    SDL_Surface* healthSurface;\n    SDL_Texture* healthTexture;\n};\n\nstruct PlayableCharacter{\n    SDL_Rect playerBox;\n    int xSpeed;\n    int ySpeed;\n    struct hitPointData playerHp;\n};\n</code></pre>\n\n<p>And the problem i have is that  i get  a  segmentation fault in this function call: </p>\n\n<pre><code>SDL_FillRect(player-&gt;playerHp.healthSurface,\n             NULL, // Not actually supposed to be NULL, just here until i get fillrect working properly\n             SDL_MapRGB(player-&gt;playerHp.healthSurface-&gt;format,255,0,0));\n</code></pre>\n\n<p>i think it might have something to do with the surface/surface->format because when i do:</p>\n\n<pre><code>player-&gt;playerHp.healthSurface = SDL_CreateRGBSurface(0,32,16,4,0,255,255,0);\n</code></pre>\n\n<p>i dont get the segmentation error however Fillrect returns an error code saying that the format is not supported.</p>\n\n<p>Also this is how i initialize the player:</p>\n\n<pre><code>struct PlayableCharacter *player = malloc(sizeof(struct PlayableCharacter));\n</code></pre>\n\n<p>I know segmentation error basically means you're writing outside your allowed memory and i suspect i have to malloc somewhere but im  not  really sure where or how.</p>\n\n<p>Any help is greatly appriciated!</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1461171311, "post_id": 36750359, "comment_id": 61081363, "body": "It&#39;s the same as the difference between a house and a kitchen, or between a human and a toe."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1461171894, "post_id": 36750359, "comment_id": 61081704, "body": "Here&#39;s the warning for the <code>printf</code> line in the second snippet, in case you missed it: <b>&quot;check.c:8:17: warning: format specifies type &#39;int&#39; but the argument has type &#39;int *&#39; [-Wformat]&quot;</b>"}], "answers": [{"tags": [], "owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "is_accepted": false, "score": 1, "last_activity_date": 1461171962, "last_edit_date": 1461171962, "creation_date": 1461171692, "answer_id": 36750504, "question_id": 36750359, "link": "https://stackoverflow.com/questions/36750359/what-is-the-difference-between-these-two-pointer-declaration/36750504#36750504", "title": "what is the difference between these two pointer declaration", "body": "<p><code>arr</code> is an array of arrays of integers while <code>ptr</code> is a pointer to an integer. In an array of arrays you need two levels of indirection to reach an integer (<code>arr[0][0]</code>) while in a pointer you need just one (<code>ptr[0]</code>). You can assign an array of elements of a certain type to a pointer to an element of the same type, but not if the types are different which is the case here.</p>\n\n<p>As you can see, they are two different things so the compiler does a good job on whining on your assignation.</p>\n"}, {"comments": [{"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1461175398, "post_id": 36750769, "comment_id": 61083796, "body": "Arrays <i>do not</i> contain any pointers to any elements; array expressions are <i>converted</i> to pointer expressions as necessary.  If you examine a 2D array byte by byte, you will not find any pointer values within it; you will only find the array elements themselves."}, {"owner": {"reputation": 182, "user_id": 1988355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b6522568728b68ea9d7ea5d22b7115?s=128&d=identicon&r=PG", "display_name": "DGounaris", "link": "https://stackoverflow.com/users/1988355/dgounaris"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1461187075, "post_id": 36750769, "comment_id": 61090949, "body": "My bad phrasing that one. I meant that each element of the 1st dimension in the array (each arr[i]) is a pointer (pointing to an array of size j), while each arr[i][j] is a value and arr itself is a pointer to an array of size i (which, as mentioned, has pointers as elements). Isn&#39;t that correct?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1461190747, "post_id": 36750769, "comment_id": 61092482, "body": "No, it is not.  Neither <code>arr</code> nor any <code>arr[i]</code> store a pointer value.  During translation, the <i>expressions</i> <code>arr</code> and <code>arr[i]</code> are replaced with pointer values as necessary, but no storage is set aside for any pointers within the array object.  See the example layout at the end of my answer."}], "tags": [], "owner": {"reputation": 182, "user_id": 1988355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b6522568728b68ea9d7ea5d22b7115?s=128&d=identicon&r=PG", "display_name": "DGounaris", "link": "https://stackoverflow.com/users/1988355/dgounaris"}, "is_accepted": false, "score": -2, "last_activity_date": 1461172464, "creation_date": 1461172464, "answer_id": 36750769, "question_id": 36750359, "link": "https://stackoverflow.com/questions/36750359/what-is-the-difference-between-these-two-pointer-declaration/36750769#36750769", "title": "what is the difference between these two pointer declaration", "body": "<p>2D arrays contain (as arrurri mentioned) a pointer which points to an array of pointers and each of those point to the actual elements. So, arr is a pointer to pointers and each indexed value of it (arr[i]) is a pointer to a row. </p>\n\n<p>So, what you need to do is ptr=arr[0]; instead.</p>\n"}, {"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 2, "last_activity_date": 1461190875, "last_edit_date": 1461190875, "creation_date": 1461176590, "answer_id": 36752091, "question_id": 36750359, "link": "https://stackoverflow.com/questions/36750359/what-is-the-difference-between-these-two-pointer-declaration/36752091#36752091", "title": "what is the difference between these two pointer declaration", "body": "<p>Except when it is the operand of the <code>sizeof</code> or unary <code>&amp;</code> operators, an <em>expression</em> of type \"<code>N</code>-element array of <code>T</code>\" will be converted (\"decay\") to an expression of type \"pointer to <code>T</code>\", and the value of the expression will be the address of the first element of the array.</p>\n\n<p>In the line</p>\n\n<pre><code>int *ptr=arr;\n</code></pre>\n\n<p>the <em>expression</em> <code>arr</code> has type \"2-element array of 2-element array of <code>int</code>\" (IOW, <code>T</code> is \"2-element array of <code>int</code>\").  Since the expression <code>arr</code> is not the operand of either the <code>sizeof</code> or unary <code>&amp;</code> operators, it is converted (\"decays\") to an expression of type \"pointer to 2-element array of <code>int</code>\", or <code>int (*)[2]</code>, and the value of the expression is the address of the first element of the array.</p>\n\n<p>This is why you got the warning for the line above, but not for</p>\n\n<pre><code>int (*ptr)[2]=arr;\n</code></pre>\n\n<p>since in that case the types match correctly.</p>\n\n<p>Given the declaration </p>\n\n<pre><code>int arr[2][2]={{6,2},{3,4}};\n</code></pre>\n\n<p>the following are all true:</p>\n\n<pre><code>Expression         Type            Decays To            Equivalent Value\n----------         ----            ---------            ----------------\n       arr         int [2][2]      int (*)[2]           &amp;arr[0][0]\n      &amp;arr         int (*)[2][2]                        &amp;arr[0][0]\n      *arr         int [2]         int *                &amp;arr[0][0]\n    arr[i]         int [2]         int *                &amp;arr[i][0]\n   &amp;arr[i]         int (*)[2]                           &amp;arr[i][0]\n   *arr[i]         int                                  arr[i][0]\n arr[i][j]         int                                  \n&amp;arr[i][j]         int *              \n</code></pre>\n\n<p>So <code>arr</code>, <code>&amp;arr</code>, <code>arr[0]</code>, <code>&amp;arr[0]</code>, and <code>&amp;arr[0][0]</code> all evaluate to the same <em>value</em> (the address of the first element of an array is the same as the address of the array itself), but the <em>types</em> are all different.  </p>\n\n<p>A very important point I want to get across (especially because it's shown up in a couple of other answers) is that array objects <em>do not</em> store any pointer values.  If you looked at the contents of <code>arr</code> in memory, you'd see something like the following:</p>\n\n<pre><code>     +---+\narr: | 6 | arr[0][0]\n     +---+ \n     | 2 | arr[0][1]\n     +---+\n     | 3 | arr[1][0]\n     +---+\n     | 4 | arr[1][1]\n     +---+\n</code></pre>\n\n<p>No storage is set aside anywhere for any pointers.  When your code is compiled, any expressions that refer to arrays are <em>replaced</em> with pointers to the first element of the array.  </p>\n"}], "owner": {"reputation": 7609, "user_id": 3138436, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HKyxB.jpg?s=128&g=1", "display_name": "AL-zami", "link": "https://stackoverflow.com/users/3138436/al-zami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1461190875, "creation_date": 1461171240, "last_edit_date": 1461172085, "question_id": 36750359, "link": "https://stackoverflow.com/questions/36750359/what-is-the-difference-between-these-two-pointer-declaration", "title": "what is the difference between these two pointer declaration", "body": "<p>Here I have a 2D array. I want to declare a pointer to point to the first row of the array. First I did something like this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main ()\n{\n   int arr[2][2]={{6,2},{3,4}};\n   int *ptr=arr;\n\n   printf(\"%d\",*(ptr+0));\n}\n</code></pre>\n\n<p>First row of the 2D array is also a array. Similar type of pointer declaration for a 1D array don't give any warning. Why am I getting warning during compilation.</p>\n\n<blockquote>\n  <p>[Warning] initialization from incompatible pointer type [enabled by\n  default]</p>\n</blockquote>\n\n<p>The following didn't give any warning </p>\n\n<pre><code>int main ()\n{\n   int arr[2][2]={{6,2},{3,4}};\n   int (*ptr)[2]=arr;\n\n   printf(\"%d\",*(ptr+0));\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1461171261, "post_id": 36750265, "comment_id": 61081338, "body": "Did you try the step-into option? using F-11 you could trace it. And you could put break points every where to see when and where it hits"}, {"owner": {"reputation": 347, "user_id": 3783576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8e9b2374ea146c877b1107d82febedaf?s=128&d=identicon&r=PG&f=1", "display_name": "MatthewJohnHeath", "link": "https://stackoverflow.com/users/3783576/matthewjohnheath"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1461184171, "post_id": 36750265, "comment_id": 61089356, "body": "Yeah, I tried it. The debugger is not seeing that code at all, so even one &quot;step-into&quot; flies straight past everything (and it&#39;s throwing an exception somewhere in there)"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1461189456, "post_id": 36750265, "comment_id": 61091993, "body": "post that line of code where it doesn&#39;t step into it and the code behind where somewhere it throws an error"}, {"owner": {"reputation": 347, "user_id": 3783576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8e9b2374ea146c877b1107d82febedaf?s=128&d=identicon&r=PG&f=1", "display_name": "MatthewJohnHeath", "link": "https://stackoverflow.com/users/3783576/matthewjohnheath"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1461225520, "post_id": 36750265, "comment_id": 61104817, "body": "@FirstStep I&#39;ve done that now. Hope it is clear"}], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 3783576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8e9b2374ea146c877b1107d82febedaf?s=128&d=identicon&r=PG&f=1", "display_name": "MatthewJohnHeath", "link": "https://stackoverflow.com/users/3783576/matthewjohnheath"}, "is_accepted": true, "score": 0, "last_activity_date": 1461253383, "creation_date": 1461253383, "answer_id": 36774488, "question_id": 36750265, "link": "https://stackoverflow.com/questions/36750265/locate-from-where-visual-studio-2015-debugger-is-reading-symbol-defs-when-source/36774488#36774488", "title": "Locate from where Visual Studio 2015 debugger is reading symbol defs when source is not available", "body": "<p>For my particular case I was able to find out where the alternative definitions come from by asking colleagues if they could think of any other dependencies that might have been interfering. Not the most satisfying solution but it will do. </p>\n"}], "owner": {"reputation": 347, "user_id": 3783576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8e9b2374ea146c877b1107d82febedaf?s=128&d=identicon&r=PG&f=1", "display_name": "MatthewJohnHeath", "link": "https://stackoverflow.com/users/3783576/matthewjohnheath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "accepted_answer_id": 36774488, "answer_count": 1, "score": 0, "last_activity_date": 1461253383, "creation_date": 1461170982, "last_edit_date": 1461234951, "question_id": 36750265, "link": "https://stackoverflow.com/questions/36750265/locate-from-where-visual-studio-2015-debugger-is-reading-symbol-defs-when-source", "title": "Locate from where Visual Studio 2015 debugger is reading symbol defs when source is not available", "body": "<p>I want to see from where a function definition is being read from in a project because it is neither where I expect it to be nor where \"Go To Definition\" in VS2015 claims it is.</p>\n\n<p>I have an application calling a static library which calls a second static library all included as a solution in Visual Studio and both library included as project dependencies for the application. When I go to any call from the first library to a function defined in the second in the code and right-click->\"Go To Definition\" it takes me to the correct location in the second library.</p>\n\n<p>However it definitely <em>not</em> getting the functions from that source when it runs, since it is returning the wrong answers and not giving the console output I added for debugging this problem. Another (toy) application that I wrote to check the code and is in a different solution also containing the libraries takes the definitions correctly.</p>\n\n<p>If, while debugging, I click on these functions, I am told that the source is not available. Obviously it is reading the definitions from somewhere and I can look at the disassembly. After looking at the properties of all the projects, and searching for other versions of the second library on my computer, I still have no idea from where it might be getting different definitions. So it would be useful to know from where the debugger/compiler is reading in the compiled code from which it can generate the disassembly (and do the function).</p>\n\n<p>The last line of code that is being executed from where I expect is:</p>\n\n<pre><code>dgstrf(opPt, column_permuted, relax, panel_size, etree, NULL, 0, col_perm_pt, row_perm_pt, lower, upper, glu, stats, status);\n</code></pre>\n\n<p>which according to \"Go To Definition\" should call a function that begins:</p>\n\n<pre><code>void\ndgstrf (superlu_options_t *options, SuperMatrix *A,\n    int relax, int panel_size, int *etree, void *work, int lwork,\n    int *perm_c, int *perm_r, SuperMatrix *L, SuperMatrix *U,\n    GlobalLU_t *Glu, /* persistent to facilitate multiple factorizations */\n    SuperLUStat_t *stat, int *info)\n{\n    printf(\"doing dgstrf\\n\");\n ...\n</code></pre>\n\n<p>which after a while calls:</p>\n\n<pre><code>*info = dLUMemInit(fact, work, lwork, m, n, Astore-&gt;nnz,\n                   panel_size, fill_ratio, L, U, Glu, &amp;iwork, &amp;dwork);\n</code></pre>\n\n<p>which starts:</p>\n\n<pre><code>int\n dLUMemInit(fact_t fact, void *work, int lwork, int m, int n, int annz,\n      int panel_size, double fill_ratio, SuperMatrix *L, SuperMatrix *U,\n          GlobalLU_t *Glu, int **iwork, double **dwork)\n{\n   printf(\"doing dLUMemInit\\n\");...\n</code></pre>\n\n<p>which calls in turn dLUWorkInit -> intCalloc, and then in the version that running in the real app (but not in the toy app that works) ->superlu_abort_and_exit -> fprintf</p>\n\n<p>fprintf (in stdio.h) is the first thing since my wrapper function to dgstrf for which the call stack says it has source code. </p>\n\n<p>It throws an exception \"Access violation writing to location 0x0000000000000024.\" on the lines</p>\n\n<pre><code>__crt_va_start(_ArgList, _Format);\n_Result = _vfprintf_l(_Stream, _Format, NULL, _ArgList);\n__crt_va_end(_ArgList);\nreturn _Result;\n</code></pre>\n\n<p>I've been through what <em>should</em> be the source code up to here and filled it with break points. They aren't hit and none of the console output I have set it to produce is. </p>\n"}, {"tags": ["c", "arrays", "char"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1461170951, "post_id": 36750219, "comment_id": 61081154, "body": "Do you have a question?"}, {"owner": {"reputation": 15946, "user_id": 4606734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/858769040849894/picture?type=large", "display_name": "ameyCU", "link": "https://stackoverflow.com/users/4606734/ameycu"}, "edited": false, "score": 2, "creation_date": 1461171538, "post_id": 36750219, "comment_id": 61081500, "body": "@AntonioGvardijan You need this <code>scanf_s(&quot; %c %c %c&quot;, &amp;lista[0],(rsize_t)1,&amp;lista[1],(rsize_t)1, &amp;lista[2],(rsize_t)1);</code>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461174382, "post_id": 36750219, "comment_id": 61083177, "body": "Posting examples of input and expected output would help.  The details are lacking.  Are all these OK? <code>&quot;a b c&quot;</code>, <code>&quot;a b 10&quot;</code>,  <code>&quot;a b (many spaces)   c&quot;</code>, <code>&quot;ab c&quot;</code>, <code>&quot;a &#225; c&quot;</code>,  <code>&quot;a b c d&quot;</code>?  By some definition, these all meet &quot;3 letters or numbers on char array&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1461178961, "creation_date": 1461178961, "answer_id": 36752884, "question_id": 36750219, "link": "https://stackoverflow.com/questions/36750219/entering-3-letters-in-array-with-space-between-it/36752884#36752884", "title": "Entering 3 letters in array with space between it", "body": "<pre><code>char c[3];\n    int count = 0;\n\n    printf(\"Enter 3 chars separated by space and press enter :\");\n    while (count &lt; 3)\n    {\n        scanf(\"%c%*[ ]\", &amp;c[count]); // *[ ] ignores the empty spaces after each character\n        count++;\n    }\n\n    printf(\"c1:%c\\n\", c[0]);\n    printf(\"c2:%c\\n\", c[1]);\n    printf(\"c3:%c\\n\", c[2]);\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6058093, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7e16c234ad153ba8b9a5fd53ea2b449e?s=128&d=identicon&r=PG&f=1", "display_name": "Antonio Gvardijan", "link": "https://stackoverflow.com/users/6058093/antonio-gvardijan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1461178961, "creation_date": 1461170859, "question_id": 36750219, "link": "https://stackoverflow.com/questions/36750219/entering-3-letters-in-array-with-space-between-it", "title": "Entering 3 letters in array with space between it", "body": "<p>I need to enter 3 letters or numbers on char array with space between them. I NEED to use scanf since we didn't learn any other method. This is my code : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n    void main(){\n\n        char lista[3];\n        int x;\n        printf(\"Enter 3 letters with space between them : \");\n        scanf_s(\" %s\", lista, sizeof(lista));\n    }\n</code></pre>\n"}, {"tags": ["c", "microchip", "xc8"], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1461171711, "post_id": 36750373, "comment_id": 61081603, "body": "Yeah, the OP could try appending <code>u</code> to those literals and seeing what happens. I would also caution that signed <code>1 &lt;&lt; [bits in the platform&#39;s int - 1]</code> <i>was</i> undefined behaviour and is now implementation-defined, so if <code>_Pin.Bit == bits in OP&#39;s int</code>, then anything can happen."}, {"owner": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1461173516, "post_id": 36750373, "comment_id": 61082631, "body": "Okay, so if I understand well :  The shifting operation use a int platform, a int is signed by default,  this is why i have thoses warnings  So is there a way to tell XC8 to use a char to make the shift ? @underscore_d what do you mean by appending u ?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "edited": false, "score": 1, "creation_date": 1461175733, "post_id": 36750373, "comment_id": 61084010, "body": "@shangaorenfilehunter I guess you should read up on how C determines types as it evaluates an expression."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "edited": false, "score": 0, "creation_date": 1461178372, "post_id": 36750373, "comment_id": 61085582, "body": "@shangaorenfilehunter &quot;append&quot; ~= suffix. simply try adding a <code>u</code> at the end of your currently signed literals and see what happens. to be clear, the literals have type, <i>not</i> the shift. and yes, a little more background reading about literals, integral promotion, etc would clear a lot of this up."}, {"owner": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1461179054, "post_id": 36750373, "comment_id": 61086028, "body": "Okay, adding a u cleared the signed/unsigned problem, thanks @underscore_d"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "edited": false, "score": 0, "creation_date": 1461179419, "post_id": 36750373, "comment_id": 61086271, "body": "@shangaorenfilehunter Good to hear and thanks for letting me know."}, {"owner": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "edited": false, "score": 0, "creation_date": 1461180692, "post_id": 36750373, "comment_id": 61087085, "body": "According to XC8&#39;s manual the shortest size of a literal is a int even for a binary or hexadecimal value so i think there is no way to suppress this warning"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "edited": false, "score": 1, "creation_date": 1461183047, "post_id": 36750373, "comment_id": 61088594, "body": "@shangaorenfilehunter You can explicitly cast the expression to a desired type, and the compiler should should up then: <code>... = (unsigned char)(~(1&lt;&lt;_Pin.Bit));</code>"}, {"owner": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "edited": false, "score": 0, "creation_date": 1461225502, "post_id": 36750373, "comment_id": 61104807, "body": "No i&#39;ve already try to cast to unsigned char but the warning still there         (*((_Pin.Reg)+ 5*sizeof(char))) = (*((_Pin.Reg)+ 5*sizeof(char)))&amp; (unsigned char)(~(1u&lt;&lt;_Pin.Bit));  give me this : Pin.c:18: warning: (752) conversion to shorter data type  but this look related to the ~ because i don&#39;t have this on the over line"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1461171274, "creation_date": 1461171274, "answer_id": 36750373, "question_id": 36750166, "link": "https://stackoverflow.com/questions/36750166/microchip-xc8-warnings-conversion-to-shorter-data-type-and-implicit-conversio/36750373#36750373", "title": "Microchip XC8 warnings &quot;conversion to shorter data type&quot; and &quot;implicit conversion signed to unsigned&quot;", "body": "<blockquote>\n  <p>the both values are unsigned char so why do i have these warnings ?</p>\n</blockquote>\n\n<p>A helpful approach for yourself would be: assume that you're wrong. Where can you be wrong? Obviously since you have the warnings, the values cannot be unsigned.</p>\n\n<p>Now let's analyze how they might not be unsigned. <code>_Pin.Bit</code> is a unsigned value. But we don't use it. We use it in an integer expression, whose type is - well - simply <code>int</code>:</p>\n\n<p>The expression <code>(1&lt;&lt;_Pin.Bit)</code> is of type <code>int</code>.</p>\n\n<p>The expression <code>~(1&lt;&lt;_Pin.Bit)</code> is of type <code>int</code> and moreover you're discarding its non-zero sign bits when converting to a unsigned char, prompting the second warning for line 17.</p>\n"}], "owner": {"reputation": 21, "user_id": 6231357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1maHX.jpg?s=128&g=1", "display_name": "shangaoren filehunter", "link": "https://stackoverflow.com/users/6231357/shangaoren-filehunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2046, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1461171274, "creation_date": 1461170722, "question_id": 36750166, "link": "https://stackoverflow.com/questions/36750166/microchip-xc8-warnings-conversion-to-shorter-data-type-and-implicit-conversio", "title": "Microchip XC8 warnings &quot;conversion to shorter data type&quot; and &quot;implicit conversion signed to unsigned&quot;", "body": "<p>I'm using MPLABX 3.20 with xc8 1.35 compiler for a PIC18F2420 and i've got two stranges warnings that i don't understand :</p>\n\n<p>Here is one of the source code that generate the warning </p>\n\n<pre><code>9  void write(Pin _Pin, char value)\n10  {\n11     if( value == 1)\n12     {\n13         (*((_Pin.Reg)+ 5*sizeof(char))) |=(1&lt;&lt;_Pin.Bit);\n14     }\n15     else\n16     {\n17         (*((_Pin.Reg)+ 5*sizeof(char))) &amp;= ~(1&lt;&lt;_Pin.Bit);\n18     }\n19 }\n</code></pre>\n\n<p>Here is the Struct Pin i use : </p>\n\n<pre><code>typedef unsigned char *SFR;\n\ntypedef struct \n{\n    SFR Reg;\n    unsigned char Bit;\n    SFR ReadReg;\n\n}Pin;\n</code></pre>\n\n<p>this code is used to offer a simple way to use the pins </p>\n\n<p>I have the following warnings : </p>\n\n<p>Pin.c:13: warning: (373) implicit signed to unsigned conversion</p>\n\n<p>Pin.c:17: warning: (373) implicit signed to unsigned conversion</p>\n\n<p>...</p>\n\n<p>Pin.c:17: warning: (752) conversion to shorter data type</p>\n\n<p>the both values are unsigned char so why do i have these warnings ? </p>\n"}, {"tags": ["c", "fractions"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1461170127, "post_id": 36749934, "comment_id": 61080669, "body": "You want to step through the code inside a debugger while inspecting all relevant variables to learn what is going on."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1461170140, "post_id": 36749934, "comment_id": 61080680, "body": "If <code>S</code> is an <code>int</code> then it is an integer.  an integer can only be a whole number."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461170218, "post_id": 36749934, "comment_id": 61080723, "body": "<code>n+=2;    n-=2;</code> does not makes sense. <code>n</code> does not change in the end. This is a NOP. The same applies to those two statements: <code>S = S + (n&#47;((double)d));    S = S - (n&#47;((double)d));</code>"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1461170640, "post_id": 36749934, "comment_id": 61080963, "body": "You want 9 elements, but your loop only executes 4 times."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461170677, "post_id": 36749934, "comment_id": 61080979, "body": "MUST is also an operator? or why is it in capital letters ?"}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1461171165, "post_id": 36749934, "comment_id": 61081289, "body": "@stark She uses a loop of 4 because she is attempting to handle two terms for each loop index, with the initial term handled outside the loop."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1461171261, "post_id": 36749934, "comment_id": 61081337, "body": "All of your variables (except <code>i</code>) should be <code>double</code>. And the <code>n-=2</code> should be <code>d-=2</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1387, "user_id": 2561898, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/BZDcM.png?s=128&g=1", "display_name": "eightShirt", "link": "https://stackoverflow.com/users/2561898/eightshirt"}, "is_accepted": false, "score": 2, "last_activity_date": 1477499324, "last_edit_date": 1477499324, "creation_date": 1461171372, "answer_id": 36750407, "question_id": 36749934, "link": "https://stackoverflow.com/questions/36749934/fractions-sum-and-difference-in-c-programming/36750407#36750407", "title": "Fractions: Sum and difference in C programming", "body": "<p>Check if what you're looking for is the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nvoid main () {\n    int n = 1, d = 50, i = 0, signal = 1;\n    double S = n / (double) d;\n    for (i = 0; i &lt; 8; i++) {\n        n += 2;\n        d -= 2;\n        signal = -signal;\n        S += signal * n/(double)d;\n    }\n    printf(\"%f\", S);\n}\n</code></pre>\n\n<p>I think you're missing <code>S</code> is a <code>double</code> number. <code>int/double = double</code>, but youre assign this math in a <code>int</code> variable.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1461171382, "creation_date": 1461171382, "answer_id": 36750409, "question_id": 36749934, "link": "https://stackoverflow.com/questions/36749934/fractions-sum-and-difference-in-c-programming/36750409#36750409", "title": "Fractions: Sum and difference in C programming", "body": "<p>Perhaps like this. The most important point, is to use the <code>double</code> type, because the <code>int</code> type can only hold whole numbers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main (void) {\n    int i;\n    double sign = 1.0;              // sign\n    double num = 1.0;               // numerator\n    double div = 50.0;              // divisor\n    double sum = 0.0;               // series sum\n\n    for (i = 0; i &lt; 9; i++) {\n        sum += sign * num / div;    // accumulate the term\n        num += 2.0;                 // numerator +2\n        div -= 2.0;                 // divisor -2\n        sign *= -1.0;               // alternate the sign\n        printf(\"%f\\n\", sum);        // show double result\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>0.020000\n-0.042500\n0.066196\n-0.092895\n0.121390\n-0.153610\n0.188496\n-0.228171\n0.271829\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 6002930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/npEcO.jpg?s=128&g=1", "display_name": "steiner", "link": "https://stackoverflow.com/users/6002930/steiner"}, "is_accepted": false, "score": 2, "last_activity_date": 1461171486, "creation_date": 1461171486, "answer_id": 36750438, "question_id": 36749934, "link": "https://stackoverflow.com/questions/36749934/fractions-sum-and-difference-in-c-programming/36750438#36750438", "title": "Fractions: Sum and difference in C programming", "body": "<p>Different things to say about your code. </p>\n\n<p>First you cannot use an integer for your sum since you want a floating point result. </p>\n\n<p>Then as mentioned in comments you are using successive operations that result in not changing the variable </p>\n\n<pre><code>n+=2; n-=2;\n</code></pre>\n\n<p>You could simply do something like :</p>\n\n<pre><code>double S = 0.0; int N=9;\nfor(i=0; i &lt; N; ++i) {\n   S += ( (i % 2 == 0)?(1.0):(-1.0) ) * (2.0*i+1)/(50-(2.0*i+1));\n}\n</code></pre>\n\n<p>The instruction (i % 2 == 0)?(1.0):(-1.0) pick 1 if 'i' is even and -1 if 'i' is odd.</p>\n\n<p>Finally if S is no longer an int you must change your printf with a floating point format like for example '%f'.</p>\n"}], "owner": {"reputation": 659, "user_id": 6231396, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-n7MWb-XnFmM/AAAAAAAAAAI/AAAAAAAAARg/ryvCOflnkgM/photo.jpg?sz=128", "display_name": "E. AMARAL", "link": "https://stackoverflow.com/users/6231396/e-amaral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2756, "favorite_count": 0, "accepted_answer_id": 36750409, "answer_count": 3, "score": -1, "last_activity_date": 1477499324, "creation_date": 1461169943, "last_edit_date": 1461171281, "question_id": 36749934, "link": "https://stackoverflow.com/questions/36749934/fractions-sum-and-difference-in-c-programming", "title": "Fractions: Sum and difference in C programming", "body": "<p>I'm facing problems in writing a program in C that calculates S, being S = {1/50 - 3/48 + 5/46...} with 9 elements. I don't know how to use the DIFFERENCE operator followed by a SUM operator, and I MUST use the <strong>for</strong> structure. </p>\n\n<p>Here's the program I wrote:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main (void) {\n    int n, d, S, i;\n    i = 0;\n    n = 1;\n    d = 50;\n    S = n / ((double)d);\n\n    for (i = 0; i &lt; 4; i++) {\n        n += 2;\n        n -= 2;\n        S = S + (n / ((double)d));\n        S = S - (n / ((double)d));\n    }\n    printf(\"%d\", S);\n    return 0;\n}\n</code></pre>\n\n<p>I know that the variable declarations may be wrong and that's exactly where I get confused. I decalred S as an integer but put d (denominator) to double 'cause the result must be a decimal number, of course.</p>\n\n<p>Can anybody help me??</p>\n\n<p>The output I'm getting is: <code>0</code></p>\n"}, {"tags": ["c++", "c", "parallel-processing", "cuda"], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 5164423, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aWXeOsNK6AI/AAAAAAAAAAI/AAAAAAAAABY/LdklER42QEY/photo.jpg?sz=128", "display_name": "tusharrnimje", "link": "https://stackoverflow.com/users/5164423/tusharrnimje"}, "is_accepted": true, "score": 4, "last_activity_date": 1461174566, "creation_date": 1461174566, "answer_id": 36751457, "question_id": 36749870, "link": "https://stackoverflow.com/questions/36749870/cuda-global-to-shared-memory-and-constant-memory/36751457#36751457", "title": "Cuda global to shared memory and constant memory", "body": "<p>a) <strong>Shared memory</strong>: This memory will be visible only to all threads in a block. This shared memory is useful if you are accessing data more than once from that block.So in squaring of a number it will not be useful but while matrix multiplication it is useful.<br>\nb) <strong>Constant memory</strong>: Data is stored in device global memory and data can be read through multiprocessor constant cache. 64KB constant memory and 8KB cache is given to each multiprocessor.Data is broadcast to all threads in a warp.So if all the threads in the warp request the same value, that value is delivered to in a single cycle.</p>\n\n<p>Below links helped me in understanding constant and shared memory  </p>\n\n<p>1) <a href=\"http://cuda-programming.blogspot.in/2013/01/what-is-constant-memory-in-cuda.html\" rel=\"nofollow\">http://cuda-programming.blogspot.in/2013/01/what-is-constant-memory-in-cuda.html</a><br>\n2) <a href=\"http://cuda-programming.blogspot.in/2013/01/shared-memory-and-synchronization-in.html\" rel=\"nofollow\">http://cuda-programming.blogspot.in/2013/01/shared-memory-and-synchronization-in.html</a><br>\n3) <a href=\"https://devblogs.nvidia.com/parallelforall/using-shared-memory-cuda-cc/\" rel=\"nofollow\">https://devblogs.nvidia.com/parallelforall/using-shared-memory-cuda-cc/</a>  </p>\n\n<p>Please refer this links.</p>\n"}], "owner": {"reputation": 661, "user_id": 2806570, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8c13bd98acab66dd3bb64c3f511822d?s=128&d=identicon&r=PG&f=1", "display_name": "user2806570", "link": "https://stackoverflow.com/users/2806570/user2806570"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 36751457, "answer_count": 1, "score": 1, "last_activity_date": 1461174566, "creation_date": 1461169737, "question_id": 36749870, "link": "https://stackoverflow.com/questions/36749870/cuda-global-to-shared-memory-and-constant-memory", "title": "Cuda global to shared memory and constant memory", "body": "<p>I just started learning cuda and I'm having an issue converting some code to use shared memory and another to use constant memory, for comparison purposes.</p>\n\n<pre><code>__global__ void CUDA(int *device_array_Image1, int *device_array_Image2,int *device_array_Image3, int *device_array_kernel, int *device_array_Result1,int *device_array_Result2,int *device_array_Result3){\n\nint i = blockIdx.x;\nint j = threadIdx.x;\n\n\nint ArraySum1 = 0 ; // set sum = 0 initially\nint ArraySum2 = 0 ;\nint ArraySum3 = 0 ;\nfor (int N = -1 ; N &lt;= 1 ; N++)\n{\n    for (int M = -1 ; M &lt;= 1 ; M++)\n    {\n        ArraySum1 = ArraySum1 + (device_array_Image1[(i + N) * Image_Size + (j + M)]* device_array_kernel[(N + 1) * 3 + (M + 1)]);\n        ArraySum2 = ArraySum2 + (device_array_Image2[(i + N) * Image_Size + (j + M)]* device_array_kernel[(N + 1) * 3 + (M + 1)]);\n        ArraySum3 = ArraySum3 + (device_array_Image3[(i + N) * Image_Size + (j + M)]* device_array_kernel[(N + 1) * 3 + (M + 1)]);\n    }\n}\n\ndevice_array_Result1[i * Image_Size + j] = ArraySum1;\ndevice_array_Result2[i * Image_Size + j] = ArraySum2;\ndevice_array_Result3[i * Image_Size + j] = ArraySum3;\n}\n</code></pre>\n\n<p>This is what I have done so far but I'm having an issue understanding the shared and constant memory so if anyone could help with the code or point me in the right direction I'd be really grateful.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c", "function", "insert"], "comments": [{"owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "edited": false, "score": 2, "creation_date": 1461169731, "post_id": 36749846, "comment_id": 61080412, "body": "1. <code>fflush(stdin);</code> invokes undefined behaviour. 2. Never use <code>gets()</code>."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1461169893, "post_id": 36749846, "comment_id": 61080521, "body": "<code>gets</code> is obsolete, but that and <code>fgets</code> will read the <code>newline</code> left in the buffer after <code>scanf</code>. To avoid that, use <code>scanf(&quot;%d%*c&quot;, &amp;ps-&gt;facN);</code> so <code>scanf</code> will read and throw away the <code>newline</code> following the numeric entry."}], "answers": [{"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": false, "score": 0, "last_activity_date": 1461170699, "last_edit_date": 1461170699, "creation_date": 1461170378, "answer_id": 36750069, "question_id": 36749846, "link": "https://stackoverflow.com/questions/36749846/cant-save-the-user-input-to-a-variable/36750069#36750069", "title": "Cant save the user input to a variable", "body": "<ol>\n<li><code>fflush(stdin);</code> invokes undefined behaviour, so you should remove these statements.</li>\n<li><code>memset()</code>ing the struct makes no sense, because it'll be filled with data in the end.</li>\n<li>Use <code>scanf(\" %d%*c\", &amp;var);</code>, rather than <code>gets()</code> to input <code>int</code> fields. <code>%*c</code> is added to discard a <code>'\\n'</code> character.</li>\n<li><code>gets()</code> doesn't have buffer overflow protection, so call <code>fgets()</code> instead. Also, use <code>strcspn()</code> to remove the tailing <code>'\\n'</code> written by <code>fgets()</code>.</li>\n<li>I suppose you mean <code>printf(\"\\nkurs: \");</code>.</li>\n</ol>\n\n<p>Refined code:</p>\n\n<pre><code>int enterBody(BODY *ps)\n{\n    if (ps == NULL)\n        return 0;\n\n    printf(\"\\nFaculty No: \");\n    scanf(\" %d%*c\", &amp;ps-&gt;facN);\n\n    printf(\"\\nName: \");\n    fgets(ps-&gt;name, MAX_LENGHT + 1, stdin);\n    (ps-&gt;name)[strcspn((ps-&gt;name), \"\\n\")] = '\\0';\n\n    printf(\"\\nPrezime: \");\n    fgets(ps-&gt;prezume, MAX_LENGHT + 1, stdin);\n    (ps-&gt;prezume)[strcspn((ps-&gt;prezume), \"\\n\")] = '\\0';\n\n    printf(\"\\nFamiliq: \");\n    fgets(ps-&gt;familiq, MAX_LENGHT + 1, stdin);\n    (ps-&gt;familiq)[strcspn((ps-&gt;familiq), \"\\n\")] = '\\0';\n\n    printf(\"\\nSpecialnost: \");\n    fgets(ps-&gt;specialnost, MAX_LENGHT + 1, stdin);\n    (ps-&gt;specialnost)[strcspn((ps-&gt;specialnost), \"\\n\")] = '\\0';\n\n    printf(\"\\ngrupa: \");\n    scanf(\" %d%*c\", &amp;ps-&gt;group);\n\n    printf(\"\\nkurs: \");\n    scanf(\" %d%*c\", &amp;ps-&gt;kurs);\n\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6231402, "user_type": "registered", "profile_image": "https://graph.facebook.com/1203475473038544/picture?type=large", "display_name": "Georgi Grozev", "link": "https://stackoverflow.com/users/6231402/georgi-grozev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461170699, "creation_date": 1461169664, "question_id": 36749846, "link": "https://stackoverflow.com/questions/36749846/cant-save-the-user-input-to-a-variable", "title": "Cant save the user input to a variable", "body": "<p>Hello everyone I m doing my homework and i have some problem. </p>\n\n<p>This are my variables:</p>\n\n<pre><code>struct student\n{\n    int facN;\n    char name[MAX_LENGHT + 1];\n    char prezime[MAX_LENGHT + 1];\n    char familiq[MAX_LENGHT + 1];\n    char specialnost[MAX_LENGHT + 1];\n    int group;\n    int kurs;\n};\ntypedef struct student BODY;\n</code></pre>\n\n<p>And the function for the input is:</p>\n\n<pre><code>int enterBody(BODY *ps)\n{\n    if (ps == NULL) return 0;\n    memset(ps, 0, sizeof(BODY));\n\n    fflush(stdin);\n    printf(\"\\nFaculty No: \");\n    scanf(\"%d\", &amp;(ps-&gt;facN));\n    //fflush(stdin);\n\n    printf(\"\\nName: \");\n    gets(ps-&gt;name);\n\n    printf(\"\\nPrezime: \");\n    gets(ps-&gt;prezime);\n\n    printf(\"\\nFamiliq: \");\n    gets(ps-&gt;familiq);\n\n    printf(\"\\nSpecialnost: \");\n    gets(ps-&gt;specialnost);\n\n    printf(\"\\ngrupa: \");\n    gets(ps-&gt;group);\n\n    printf(\"\\kurs: \");\n    gets(ps-&gt;kurs);\n\n    return 1;\n}\n</code></pre>\n\n<p>The main problem is when i run the program I cant get Prezime and the others after that to get on the the screen and after that to save the input into the varaibles.</p>\n"}, {"tags": ["c", "linux-kernel", "atomic"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1461177640, "post_id": 36749839, "comment_id": 61085163, "body": "Can you explain a scenario in which you think it behaves in a non-atomic manner?"}], "answers": [{"comments": [{"owner": {"reputation": 913, "user_id": 1849975, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5a2ae9703546a8bfed6b4d464b056481?s=128&d=identicon&r=PG", "display_name": "carobnodrvo", "link": "https://stackoverflow.com/users/1849975/carobnodrvo"}, "edited": false, "score": 0, "creation_date": 1461179640, "post_id": 36750036, "comment_id": 61086412, "body": "I don&#39;t know how I didn&#39;t see it before :). The most important part: &quot;write <code>dec</code> in <code>*v</code> only if the value in <code>*v</code> is equal to <code>c</code>&quot; and <code>c</code> is a value which has been red at the start of the function."}], "tags": [], "owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "is_accepted": true, "score": 3, "last_activity_date": 1461170300, "creation_date": 1461170300, "answer_id": 36750036, "question_id": 36749839, "link": "https://stackoverflow.com/questions/36749839/how-is-atomic-dec-if-positive-atomic/36750036#36750036", "title": "How is atomic_dec_if_positive atomic?", "body": "<p>It uses the functions <code>atomic_read()</code> and <code>atomic_cmpxchg()</code>, which surely somewhere will be implemented in assembly language using atomicity features of the microprocessor's instruction set.</p>\n\n<p>It first reads a value and makes sure it is positive, stores the read value in <code>c</code>, the decremented value in <code>dec</code> and calls <code>atomic_cmpxchg()</code> which will atomically do the following: \"write <code>dec</code> in <code>*v</code> only if the value in <code>*v</code> is equal to <code>c</code>, and return the old value in <code>*v</code>\". That way you make sure that the value in <code>*v</code> was not changed between the two atomic calls. If it fails and the return value was different from the expected contents of <code>*v</code>, it retries the whole process.</p>\n"}, {"tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": false, "score": 2, "last_activity_date": 1461183217, "last_edit_date": 1461183217, "creation_date": 1461176985, "answer_id": 36752218, "question_id": 36749839, "link": "https://stackoverflow.com/questions/36749839/how-is-atomic-dec-if-positive-atomic/36752218#36752218", "title": "How is atomic_dec_if_positive atomic?", "body": "<p>The following line</p>\n\n<pre><code>c = atomic_read(v);\n</code></pre>\n\n<p>means at this point in time we know the value of the atomic_v variable == c. We\ndecrement c to give us our required value.</p>\n\n<pre><code>dec = c - 1;\n</code></pre>\n\n<p>Obviously if the number is not positive and 0 is not positive we cannot\ndecrement it.</p>\n\n<pre><code>if (unlikely(dec &lt; 0))\n        break;\n</code></pre>\n\n<p>Now we try and change our known old result with the expected result</p>\n\n<pre><code>old = atomic_cmpxchg((v), c, dec);\n</code></pre>\n\n<p>This is defined as</p>\n\n<pre><code>int atomic_cmpxchg(atomic_t *v, int old, int new);\n</code></pre>\n\n<p>If we write it out as follows and assume that the whole function is atomic. We have</p>\n\n<pre><code>int atomic_cmpxchg(atomic_t *v, int old, int new) {\n  &amp;v-&gt;counter = &amp;v-&gt;counter == old ? new : old;\n  return old;\n}\n</code></pre>\n\n<p>Note, I'm treating <code>v</code> as an integer, on x86 it's a struct. At this point we\nknow that at the point of the the atomic operation happening we get the\nold value. Our expected old value is <code>c</code>, so if this is the case then we have\nsuccessfully decremented the value, return the result.</p>\n\n<pre><code>if (likely(old == c))\n        break;\n</code></pre>\n\n<p>If not we need to reset our expectataion ie our start point, we're decrementing a new value <code>c</code> not the old one we had when last entered the <code>for(;;)</code> loop</p>\n\n<pre><code>c = old;\n</code></pre>\n\n<p>The important part here is that this is in a loop, this loop will continue until it succeeds to decrement the value or the value is non positive.</p>\n"}], "owner": {"reputation": 913, "user_id": 1849975, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5a2ae9703546a8bfed6b4d464b056481?s=128&d=identicon&r=PG", "display_name": "carobnodrvo", "link": "https://stackoverflow.com/users/1849975/carobnodrvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "accepted_answer_id": 36750036, "answer_count": 2, "score": 3, "last_activity_date": 1461183217, "creation_date": 1461169642, "question_id": 36749839, "link": "https://stackoverflow.com/questions/36749839/how-is-atomic-dec-if-positive-atomic", "title": "How is atomic_dec_if_positive atomic?", "body": "<p>So I am reading <code>atomic.h</code> from Linux source code from <a href=\"http://lxr.free-electrons.com/source/arch/x86/include/asm/atomic.h?v=3.5\" rel=\"nofollow\">here</a> (found it on google. I am not sure if it's legit) and I just can't wrap my mind around this:</p>\n\n<p>how is this atomic?</p>\n\n<pre><code>static inline int atomic_dec_if_positive(atomic_t *v)\n{\n  int c, old, dec;\n  c = atomic_read(v);\n  for (;;) {\n    dec = c - 1;\n    if (unlikely(dec &lt; 0))\n      break;\n    old = atomic_cmpxchg((v), c, dec);\n    if (likely(old == c))\n      break;\n    c = old;\n  }\n  return dec;\n}\n</code></pre>\n"}, {"tags": ["c", "sockets", "tcp", "server", "bind"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1461175167, "post_id": 36749779, "comment_id": 61083638, "body": "Are you taking into account the fact that the accept() call will block until an incoming TCP connection is received?  (That would explain why accept() takes up a lot of wall-clock time but not much CPU-time)"}, {"owner": {"reputation": 333, "user_id": 1542694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc1860b9624032d9506fa80dfb4e27d0?s=128&d=identicon&r=PG", "display_name": "zodiac", "link": "https://stackoverflow.com/users/1542694/zodiac"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1461179324, "post_id": 36749779, "comment_id": 61086204, "body": "Yes, I know that. Do you want to say that <code>parallel nc...</code> will have a delay between connections?"}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461225631, "post_id": 36749779, "comment_id": 61104900, "body": "Let me guess: your computer has 8 cores? Many versions of <code>nc</code> have a bug that they call <code>select()</code> at least once with wait time of 1 second. Meaning that smallest wall clock time of those versions of <code>nc</code> is at least 1 second. Run your <code>nc</code> under <code>strace</code>. Try newer <code>netcat</code> tool instead."}, {"owner": {"reputation": 333, "user_id": 1542694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc1860b9624032d9506fa80dfb4e27d0?s=128&d=identicon&r=PG", "display_name": "zodiac", "link": "https://stackoverflow.com/users/1542694/zodiac"}, "reply_to_user": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461248691, "post_id": 36749779, "comment_id": 61122251, "body": "@Dummy00001, maybe you are right. I wrote my own simple tcp client and get 0.003289 sec per <code>accept()</code> call on server. It&#39;s 4 seconds for 1000 requests and 34 seconds for 10000 requests. Is it normal time for <code>accept()</code>?"}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461253753, "post_id": 36749779, "comment_id": 61126081, "body": "That is slow, but acceptable for something quickly put together. You really can&#39;t measure the performance of <code>accept()</code> in case of blocking server: you need either parallelization (either threads or forking server (call blocking accept in child processes)) or non-blocking operation."}, {"owner": {"reputation": 333, "user_id": 1542694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc1860b9624032d9506fa80dfb4e27d0?s=128&d=identicon&r=PG", "display_name": "zodiac", "link": "https://stackoverflow.com/users/1542694/zodiac"}, "reply_to_user": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461259326, "post_id": 36749779, "comment_id": 61129628, "body": "@Dummy00001 I have a task to compare a performance of server with threads (one thread per client) and epoll/kqueue. All I want to know is it normal that 10000 requests takes 34 seconds? With pthreads (one thread per client for send a message) I have the same situation. Is it the highest performance for this realization?"}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461311379, "post_id": 36749779, "comment_id": 61151007, "body": "@zodiac, sorry, I have never measured this performance. I generally go directly for async non-blocking mode (&quot;epoll/kqueue&quot; in your case). But the code above is not the same as &quot;one thread per client&quot;, since you can call <code>accept()</code> on the same listening socket in multiple threads simultaneously. Under normal circumstances, the performance of the <code>accept()</code> is not the critical part: it&#39;s what you do with the accepted connection (e.g. in my last application, I could only accept 250 connections per second, because the client authentication was that slow)."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461311597, "post_id": 36749779, "comment_id": 61151151, "body": "@zodiac, this historical page might be of interest: <a href=\"http://www.kegel.com/c10k.html\" rel=\"nofollow noreferrer\">kegel.com/c10k.html</a> . Also check: <a href=\"http://libevent.org/\" rel=\"nofollow noreferrer\">libevent.org</a> and <a href=\"http://libev.schmorp.de/bench.html\" rel=\"nofollow noreferrer\">libev.schmorp.de/bench.html</a> ."}, {"owner": {"reputation": 2682, "user_id": 4072843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKkUM.jpg?s=128&g=1", "display_name": "Castaglia", "link": "https://stackoverflow.com/users/4072843/castaglia"}, "edited": false, "score": 0, "creation_date": 1461346017, "post_id": 36749779, "comment_id": 61173893, "body": "What happens if you omit the <code>send()</code> function, and simple <code>accept()</code>, then <code>close()</code>, the <code>client_sfd</code>?  <i>I.e.</i> how much latency might be being contributed by that <code>send()</code> function, since that needs to complete before you loop around to accept the next connection?"}, {"owner": {"reputation": 333, "user_id": 1542694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc1860b9624032d9506fa80dfb4e27d0?s=128&d=identicon&r=PG", "display_name": "zodiac", "link": "https://stackoverflow.com/users/1542694/zodiac"}, "reply_to_user": {"reputation": 2682, "user_id": 4072843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tKkUM.jpg?s=128&g=1", "display_name": "Castaglia", "link": "https://stackoverflow.com/users/4072843/castaglia"}, "edited": false, "score": 0, "creation_date": 1461346543, "post_id": 36749779, "comment_id": 61174187, "body": "@Castaglia, without <code>send()</code> there is the same results as described in question for both realizations."}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 715064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54fbeeb2c415db175401550269d9600?s=128&d=identicon&r=PG", "display_name": "swex", "link": "https://stackoverflow.com/users/715064/swex"}, "is_accepted": false, "score": 0, "last_activity_date": 1461173594, "creation_date": 1461173594, "answer_id": 36751140, "question_id": 36749779, "link": "https://stackoverflow.com/questions/36749779/slow-accept-in-socket-server-in-c/36751140#36751140", "title": "Slow accept() in socket server in C", "body": "<p>Take a look at your listen() second argument. Try to increase it.\nhere is text from <code>man 2 listen</code></p>\n\n<blockquote>\n  <p>The backlog argument defines the maximum length to which the queue of\n  pending connections for sockfd may grow.  If a  connection  request \n  arrives when the queue is full, the client may receive an error with\n  an indication of ECONNREFUSED or, if the underlying protocol supports\n  retransmission, the request may be ignored so that a later reattempt\n  at connection succeeds.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": true, "score": 4, "last_activity_date": 1461356868, "creation_date": 1461356868, "answer_id": 36802787, "question_id": 36749779, "link": "https://stackoverflow.com/questions/36749779/slow-accept-in-socket-server-in-c/36802787#36802787", "title": "Slow accept() in socket server in C", "body": "<p>It's the way you're testing it. When you use this</p>\n\n<pre><code>seq 10000 | time parallel -j 4 -n0 'nc 127.0.0.1 5678' | wc -l\n</code></pre>\n\n<p>That's actually going to impact the test because you're spawning lots of processes etc ie you're not actually testing the C application your testing the ability to spawn processes.</p>\n\n<p>If we change this to a simple python script ie </p>\n\n<pre><code>#!/usr/bin/env python\nimport socket\nTCP_IP = '127.0.0.1'\nTCP_PORT = 5678\nBUFFER_SIZE = 1024\nmsg = \"1\" \n\nfor i in range(0, 1000):\n  s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n  s.connect((TCP_IP, TCP_PORT))\n  s.send(msg.encode('utf-8'))\n  data = s.recv(BUFFER_SIZE)\n  s.close()\n  print(\"received data: %s\" % data)\n</code></pre>\n\n<p>and run the test the results are vastly different.</p>\n\n<pre><code>real    0m0.269s\nuser    0m0.074s\nsys     0m0.114s\n</code></pre>\n\n<p>If you really want to test this and see how fast it is you need to use separate machines etc and typically you might need to use C or your limiting factor might be the client. The best tool I've seen for this (HTTP Specific) where you might find some good code is <code>wrk</code> </p>\n\n<p><a href=\"https://github.com/wg/wrk\" rel=\"nofollow\">https://github.com/wg/wrk</a></p>\n"}], "owner": {"reputation": 333, "user_id": 1542694, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dc1860b9624032d9506fa80dfb4e27d0?s=128&d=identicon&r=PG", "display_name": "zodiac", "link": "https://stackoverflow.com/users/1542694/zodiac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "accepted_answer_id": 36802787, "answer_count": 2, "score": 2, "last_activity_date": 1461356868, "creation_date": 1461169457, "last_edit_date": 1461346260, "question_id": 36749779, "link": "https://stackoverflow.com/questions/36749779/slow-accept-in-socket-server-in-c", "title": "Slow accept() in socket server in C", "body": "<p>I have the following code for my education socket server in C.</p>\n\n<pre><code>#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\ndouble get_wall_time()\n{\n    struct timeval time;\n    if (gettimeofday(&amp;time, NULL)){\n        return 0;\n    }\n    return (double)time.tv_sec + (double)time.tv_usec * 0.000001;\n}\n\ndouble get_cpu_time()\n{\n    return (double)clock() / CLOCKS_PER_SEC;\n}\n\nint main()\n{\n    double wall = get_wall_time();\n    double cpu = get_cpu_time();\n\n    int sfd = socket(AF_INET, SOCK_STREAM, 0);\n\n    struct sockaddr_in own_addr = {0};\n    own_addr.sin_family = AF_INET;\n    own_addr.sin_port = htons(5678);\n\n    bind(sfd, (struct sockaddr *)&amp;own_addr, sizeof(own_addr));\n    listen(sfd, 5);\n\n    static char message[] = \"hello from server\\n\";\n\n    double wall_accept = 0;\n    double cpu_accept = 0;\n\n    int count = 0;\n    while (1) {\n        if (count++ == 1000) {\n            break;\n        }\n\n        double wall_start = get_wall_time();\n        double cpu_start = get_cpu_time();\n        int client_sfd = accept(sfd, NULL, NULL);\n        wall_accept += get_wall_time() - wall_start;\n        cpu_accept += get_cpu_time() - cpu_start;\n\n        send(client_sfd, message, sizeof(message), 0);\n        close(client_sfd);\n    }\n\n    wall = get_wall_time() - wall;\n    cpu = get_cpu_time() - cpu;\n\n    printf(\"wall accept: %lf\\n\", wall_accept);\n    printf(\"cpu accept: %lf\\n\", cpu_accept);\n\n    printf(\"wall: %lf\\n\", wall);\n    printf(\"cpu: %lf\\n\", cpu);\n}\n</code></pre>\n\n<p>To test I use <code>seq 1000 | time parallel -j 1 -n0 'nc 127.0.0.1 5678' | wc -l</code> with results</p>\n\n<pre><code>wall accept: 6.436480\ncpu accept: 0.010000\nwall: 6.456266\ncpu: 0.020000\n</code></pre>\n\n<p>For 10000 requests result is</p>\n\n<pre><code>wall accept: 55.434541\ncpu accept: 0.080000\nwall: 55.633679\ncpu: 0.260000\n</code></pre>\n\n<p>Is <code>accept()</code> slow or I do something wrong? Or maybe this is normal result for single-thread implementation?</p>\n\n<p><strong>UPD.</strong> I also wrote a server with pthreads to send a message in different thread.</p>\n\n<pre><code>#include &lt;arpa/inet.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/time.h&gt;\n\ndouble get_wall_time()\n{\n    struct timeval time;\n    if (gettimeofday(&amp;time, NULL)){\n        return 0;\n    }\n    return (double)time.tv_sec + (double)time.tv_usec * 0.000001;\n}\n\ndouble get_cpu_time()\n{\n    return (double)clock() / CLOCKS_PER_SEC;\n}\n\nvoid *send_message(void *pclient_sfd)\n{\n    int client_sfd = *(int *)pclient_sfd;\n    free(pclient_sfd);\n\n    static char message[] = \"hello from server\\n\";\n    send(client_sfd, message, sizeof(message), 0);\n    close(client_sfd);\n\n    return NULL;\n}\n\nint main()\n{\n    double wall = get_wall_time();\n    double cpu = get_cpu_time();\n\n    int sfd = socket(AF_INET, SOCK_STREAM, 0);\n\n    struct sockaddr_in own_addr = {0};\n    own_addr.sin_family = AF_INET;\n    own_addr.sin_port = htons(5678);\n\n    bind(sfd, (struct sockaddr *)&amp;own_addr, sizeof(own_addr));\n    listen(sfd, 5);\n\n    double wall_accept = 0;\n    double cpu_accept = 0;\n\n    int count = 0;\n    while (1) {\n        if (count++ == 10000) {\n            break;\n        }\n\n        int *pclient_sfd = malloc(sizeof(*pclient_sfd));\n\n        double wall_start = get_wall_time();\n        double cpu_start = get_cpu_time();\n\n        *pclient_sfd = accept(sfd, NULL, NULL);\n\n        wall_accept += get_wall_time() - wall_start;\n        cpu_accept += get_cpu_time() - cpu_start;\n\n        pthread_t tid;\n        pthread_create(&amp;tid, NULL, send_message, (void *)pclient_sfd);\n    }\n\n    wall = get_wall_time() - wall;\n    cpu = get_cpu_time() - cpu;\n\n    printf(\"wall accept: %lf\\n\", wall_accept);\n    printf(\"cpu accept: %lf\\n\", cpu_accept);\n\n    printf(\"wall: %lf\\n\", wall);\n    printf(\"cpu: %lf\\n\", cpu);\n\n    return 0;\n}\n</code></pre>\n\n<p>Then I use <code>seq 10000 | time parallel -j 4 -n0 'nc 127.0.0.1 5678' | wc -l</code> and it takes 58 seconds.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 2, "creation_date": 1461169185, "post_id": 36749669, "comment_id": 61080064, "body": "There are very good security reasons that isn&#39;t going to happen"}, {"owner": {"reputation": 23, "user_id": 6227202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9223abfbf2442015b5d660622cad4478?s=128&d=identicon&r=PG&f=1", "display_name": "Neo Ks", "link": "https://stackoverflow.com/users/6227202/neo-ks"}, "reply_to_user": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 0, "creation_date": 1461169608, "post_id": 36749669, "comment_id": 61080326, "body": "U mean the application can t bypass the security,firewall or antivirus will detect it and remove it totaly ?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461171235, "post_id": 36749669, "comment_id": 61081323, "body": "Why would SO users wish to involve themselves in your immoral/illegal actions?"}, {"owner": {"reputation": 23, "user_id": 6227202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9223abfbf2442015b5d660622cad4478?s=128&d=identicon&r=PG&f=1", "display_name": "Neo Ks", "link": "https://stackoverflow.com/users/6227202/neo-ks"}, "edited": false, "score": 0, "creation_date": 1461172189, "post_id": 36749669, "comment_id": 61081889, "body": "If it&#39;s illegal..it depends on your MORAL For me no :)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461175722, "post_id": 36749669, "comment_id": 61084003, "body": "Unfortunately the alphabet-soup agencies, (FBI, CIA, NSA etc), lawyers, prosecutors and judges are extremely unlikely to believe that anyone helping you to achieve what you ask for is not liable to some extent for any damage that you may cause."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6227202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9223abfbf2442015b5d660622cad4478?s=128&d=identicon&r=PG&f=1", "display_name": "Neo Ks", "link": "https://stackoverflow.com/users/6227202/neo-ks"}, "edited": false, "score": 0, "creation_date": 1461169691, "post_id": 36749707, "comment_id": 61080383, "body": "So no alternative way . it s impossible ?"}, {"owner": {"reputation": 2598, "user_id": 2939175, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100002492231539/picture?type=large", "display_name": "Mate Hegedus", "link": "https://stackoverflow.com/users/2939175/mate-hegedus"}, "reply_to_user": {"reputation": 23, "user_id": 6227202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9223abfbf2442015b5d660622cad4478?s=128&d=identicon&r=PG&f=1", "display_name": "Neo Ks", "link": "https://stackoverflow.com/users/6227202/neo-ks"}, "edited": false, "score": 0, "creation_date": 1461169798, "post_id": 36749707, "comment_id": 61080457, "body": "@NarutoKawasaki no it is not. The only way is if you have found a security vulnerability in an operating system."}, {"owner": {"reputation": 23, "user_id": 6227202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9223abfbf2442015b5d660622cad4478?s=128&d=identicon&r=PG&f=1", "display_name": "Neo Ks", "link": "https://stackoverflow.com/users/6227202/neo-ks"}, "edited": false, "score": 0, "creation_date": 1461169923, "post_id": 36749707, "comment_id": 61080547, "body": "Okay thank you @MateHegedus"}], "tags": [], "owner": {"reputation": 2598, "user_id": 2939175, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/100002492231539/picture?type=large", "display_name": "Mate Hegedus", "link": "https://stackoverflow.com/users/2939175/mate-hegedus"}, "is_accepted": false, "score": 1, "last_activity_date": 1461169231, "creation_date": 1461169231, "answer_id": 36749707, "question_id": 36749669, "link": "https://stackoverflow.com/questions/36749669/auto-startup-an-executable-application-when-downloaded-from-an-email/36749707#36749707", "title": "Auto startup an executable application when downloaded from an email", "body": "<p>There is no way to do this. This is to stop viruses/malware etc. to spread. </p>\n"}], "owner": {"reputation": 23, "user_id": 6227202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9223abfbf2442015b5d660622cad4478?s=128&d=identicon&r=PG&f=1", "display_name": "Neo Ks", "link": "https://stackoverflow.com/users/6227202/neo-ks"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1461173358, "answer_count": 1, "score": -6, "last_activity_date": 1461169231, "creation_date": 1461169144, "question_id": 36749669, "link": "https://stackoverflow.com/questions/36749669/auto-startup-an-executable-application-when-downloaded-from-an-email", "closed_reason": "Needs details or clarity", "title": "Auto startup an executable application when downloaded from an email", "body": "<p>I am building an application with C language for my final project,\nI am sending the executable application via email,\nwhen the application is downloaded it should run itself. </p>\n"}, {"tags": ["c++", "c", "linux", "sockets", "unix"], "comments": [{"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1461178752, "post_id": 36749541, "comment_id": 61085825, "body": "Which language is this in, C or C++?"}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "reply_to_user": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1461179522, "post_id": 36749541, "comment_id": 61086335, "body": "It&#39;s very C-style C++, but it&#39;s compiled with g++, so that&#39;s what it is. I was broad with the tags because I figured sockets was... well, broad. =)"}, {"owner": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1461179651, "post_id": 36749541, "comment_id": 61086421, "body": "Ah, fair enough. It&#39;s worth nothing the preferred norm afaik here is to only use a single &quot;language tag&quot; excepting questions specifically about language compatibility. Still, shall leave it up to you."}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "reply_to_user": {"reputation": 6316, "user_id": 3323096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1227f90127f0f7b8678a8c13261f48b4?s=128&d=identicon&r=PG", "display_name": "Vality", "link": "https://stackoverflow.com/users/3323096/vality"}, "edited": false, "score": 0, "creation_date": 1461180147, "post_id": 36749541, "comment_id": 61086740, "body": "That&#39;s a good point. Details amended. Though, it seems that @alk has offered an answer anyway. Time to test..."}], "answers": [{"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 3, "last_activity_date": 1461168952, "creation_date": 1461168952, "answer_id": 36749602, "question_id": 36749541, "link": "https://stackoverflow.com/questions/36749541/hung-program-on-a-non-blocking-socket/36749602#36749602", "title": "Hung program on a non-blocking socket", "body": "<p>The option <code>SOCK_NONBLOCK</code> does not refer to the listening socket (the one passed to <code>accept4()</code>), but to the one getting created on acceptance of a connection.</p>\n\n<p>Verbatim from <a href=\"http://man7.org/linux/man-pages/man2/accept.2.html\" rel=\"nofollow\"><code>man accept4</code></a>:</p>\n\n<blockquote>\n  <p><strong>SOCK_NONBLOCK</strong>   Set the <strong>O_NONBLOCK</strong> file status flag on the new open file description. </p>\n</blockquote>\n"}], "owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1461179738, "creation_date": 1461168783, "last_edit_date": 1461179738, "question_id": 36749541, "link": "https://stackoverflow.com/questions/36749541/hung-program-on-a-non-blocking-socket", "title": "Hung program on a non-blocking socket", "body": "<p>At inconsistent intervals of time, I've seen one particular program becoming hung up lately (that is, halting execution but not crashing and not spinning the CPU). When termination with core dumps is forced, it's consistently stuck on this line:</p>\n\n<pre><code>int new_socket = accept4(listen_socket,NULL,NULL,SOCK_NONBLOCK);\n</code></pre>\n\n<p>Since this is a non-blocking accept, how can the program hang up there? It doesn't appear as if operating conditions change dramatically between functional and halted execution.</p>\n\n<p>I am no network programming expert, so please let me know what other source (if any) would provide context for tracking this down.</p>\n\n<p>EDIT: This software is running on and compiled with the following</p>\n\n<pre><code>$ uname -a\nLinux phoenix 3.16.0-30-generic #40~14.04.1-Ubuntu SMP Thu Jan 15 17:43:14 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\n$ g++ --version\ng++ (Ubuntu 4.8.2-19ubuntu1) 4.8.2\n\n$ ldd --version\nldd (Ubuntu EGLIBC 2.19-0ubuntu6.6) 2.19\n</code></pre>\n"}, {"tags": ["c", "struct"], "comments": [{"owner": {"reputation": 1, "user_id": 4815665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3389ceec238404a06ab456eb9fa472d3?s=128&d=identicon&r=PG&f=1", "display_name": "francisco dominguez", "link": "https://stackoverflow.com/users/4815665/francisco-dominguez"}, "edited": false, "score": 0, "creation_date": 1461171337, "post_id": 36749531, "comment_id": 61081379, "body": "@atturri Yes, but i want use the same structures in both .c files, sharing the structures info."}, {"owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "edited": false, "score": 0, "creation_date": 1461172114, "post_id": 36749531, "comment_id": 61081841, "body": "Yes, you will, don&#39;t worry. You <b>must</b> define the objects in a unique .c file, but thanks to the <code>extern</code> in the .h file the other .c files will be using the same objects."}, {"owner": {"reputation": 1, "user_id": 4815665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3389ceec238404a06ab456eb9fa472d3?s=128&d=identicon&r=PG&f=1", "display_name": "francisco dominguez", "link": "https://stackoverflow.com/users/4815665/francisco-dominguez"}, "reply_to_user": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "edited": false, "score": 0, "creation_date": 1461172700, "post_id": 36749531, "comment_id": 61082172, "body": "@atturri Thanks a lot! i understand and compile very well :)"}], "answers": [{"tags": [], "owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "is_accepted": false, "score": 3, "last_activity_date": 1461168948, "creation_date": 1461168948, "answer_id": 36749601, "question_id": 36749531, "link": "https://stackoverflow.com/questions/36749531/struct-in-header-file/36749601#36749601", "title": "struct in header file", "body": "<p>The last two lines in your header file are the <strong>declaration</strong> of your <code>pokemon</code> objects, which allow you to use them from multiple .c files. But in one of the .c files you must <strong>define</strong> them, which in your case is the same as declaring but without the <code>extern</code> keyword:</p>\n\n<pre><code>pokemon pokemon1;\npokemon pokemon2;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4815665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3389ceec238404a06ab456eb9fa472d3?s=128&d=identicon&r=PG&f=1", "display_name": "francisco dominguez", "link": "https://stackoverflow.com/users/4815665/francisco-dominguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461169883, "creation_date": 1461168761, "last_edit_date": 1461169883, "question_id": 36749531, "link": "https://stackoverflow.com/questions/36749531/struct-in-header-file", "title": "struct in header file", "body": "<p>I want have two shared structs.</p>\n\n<p>In my .h:</p>\n\n<pre><code>typedef struct {\n  char nombre[25];\n  int pv;\n  char ataque1[25];\n  char ataque2[25];\n  char ataque3[25];\n  char ataque4[25];\n  char ataque1_estado[25];\n  char ataque2_estado[25];\n  char ataque3_estado[25];\n  char ataque4_estado[25];\n  char estado[25];\n  int pd_max[4];\n  int pd_min[4];\n  int pp[4];\n  int pociones;\n  int antidotos;\n} pokemon;\n\nextern pokemon pokemon1;\nextern pokemon pokemon2;\n</code></pre>\n\n<p>And in my .c files:</p>\n\n<pre><code>#include \"file.h\"\n//file body, i use here structs in file.h\n</code></pre>\n\n<p>But it doesn't compile. GCC shows this error:</p>\n\n<blockquote>\n  <p>main.c:(.text+0x440): referencia a `pokemon1' sin definir</p>\n</blockquote>\n\n<p>What is wrong?</p>\n"}, {"tags": ["c", "string", "buffer"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1461168496, "post_id": 36749343, "comment_id": 61079617, "body": "<code>buffer2[]</code> only has 1 character, a size of 2, and can&#39;t hold any more than that. You are indexing it by up to the length of <code>buffer[]</code> which is <i>undefined behaviour</i>."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1461168505, "post_id": 36749343, "comment_id": 61079624, "body": "Run your program in a debugger - that will help you a lot.  Also, I can tell you that your <code>if (number = isalpha(buffer[i]) == 0)</code> s/b changed to <code>if ((number = isalpha(buffer[i])) == 0))</code>"}, {"owner": {"reputation": 5, "user_id": 6152326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fdde790836a08de1b55fe0ee9ed62bd?s=128&d=identicon&r=PG&f=1", "display_name": "ekekekek", "link": "https://stackoverflow.com/users/6152326/ekekekek"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1461169283, "post_id": 36749343, "comment_id": 61080132, "body": "@KevinDTimm woops my fault :) I Not defining the size of the buffers was one of the tests I did and forgot to fix it again."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461169484, "post_id": 36749343, "comment_id": 61080254, "body": "Please don&#39;t change the question. It makes nonsense of the replies. Rolled back."}], "answers": [{"tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": false, "score": 2, "last_activity_date": 1461168727, "creation_date": 1461168727, "answer_id": 36749520, "question_id": 36749343, "link": "https://stackoverflow.com/questions/36749343/filter-one-buffer-and-copy-it-into-another-c/36749520#36749520", "title": "Filter one buffer and copy it into another C", "body": "<p>When you skip copying a character over, <code>buffer2</code> is left w/ whatever was originally in that position, which seems to be 0 (but may not always be), which is why printing it out looks like no other characters were copied.  In fact, they <em>were</em>, but the skipped character is interpreted as the null termination of that string.</p>\n\n<p>But worse, you never allocate space for <code>buffer2</code>: you let the compiler do it, which means you aren't really allowed to modify that space.  As with the above, you might be getting away with it, but it is undefined behavior, and could actually crash your program.</p>\n"}, {"tags": [], "owner": {"reputation": 11698, "user_id": 5399734, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2162d669508364bb0c03aba1a2473aa8?s=128&d=identicon&r=PG&f=1", "display_name": "nalzok", "link": "https://stackoverflow.com/users/5399734/nalzok"}, "is_accepted": true, "score": 3, "last_activity_date": 1461170827, "last_edit_date": 1461170827, "creation_date": 1461168878, "answer_id": 36749580, "question_id": 36749343, "link": "https://stackoverflow.com/questions/36749343/filter-one-buffer-and-copy-it-into-another-c/36749580#36749580", "title": "Filter one buffer and copy it into another C", "body": "<ol>\n<li>Your code leaves the first element of <code>buffer2</code> to be 0, indicating the end of the C-string. In fact, the index of same characters should differ in <code>buffer</code> and <code>buffer2</code>, because characters must be consistent within a C-string, but some characters are not copied.</li>\n<li>It's unnecessary to initialise <code>buffer</code> with <code>\"a\"</code>. Use <code>{0}</code> instead.</li>\n<li>You don't need to use variable <code>number</code>.</li>\n</ol>\n\n<p>Refined code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n    char buffer[80] = \"103 PLUS 1\";\n    char buffer2[80] = {0};\n    int i, j = 0;\n\n    size_t length = strlen(buffer);\n\n    fprintf(stdout,\"Buffer initially: %s \\n\", buffer);\n    fprintf(stdout,\"Buffer2 initially: %s \\n\", buffer2);\n\n    for(i = 0; i &lt; length; i++)\n    {\n        if (isalpha(buffer[i]))\n        {\n            strncpy(&amp;buffer2[j++], &amp;buffer[i], 1);\n        }\n    }\n    fprintf(stdout, \"Copied buffer is: %s \\n\", buffer2);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Buffer initially: 103 PLUS 1 \nBuffer2 initially:  \nCopied buffer is: PLUS\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6152326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fdde790836a08de1b55fe0ee9ed62bd?s=128&d=identicon&r=PG&f=1", "display_name": "ekekekek", "link": "https://stackoverflow.com/users/6152326/ekekekek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 36749580, "answer_count": 2, "score": 0, "last_activity_date": 1461170827, "creation_date": 1461168199, "last_edit_date": 1461169466, "question_id": 36749343, "link": "https://stackoverflow.com/questions/36749343/filter-one-buffer-and-copy-it-into-another-c", "title": "Filter one buffer and copy it into another C", "body": "<p>I'm trying to read a buffer, copy all the non-alphabetical characters and dump it into another buffer.</p>\n\n<p>The problem I'm getting is that whenever I encounter a non numerical character, it won't copy anything more.</p>\n\n<p>I have tried to try to detect the blank spaces, use an auxiliary buffer...</p>\n\n<pre><code>int main(void)\n{\n    char buffer[] = \"103 PLUS 1\";\n    char buffer2[] = \"a\";\n    int i, number;\n\n    memset(buffer2, 0, sizeof (buffer2));\n    size_t length = strlen(buffer);\n\n    fprintf(stdout,\"Buffer initially: %s \\n\", buffer);\n    fprintf(stdout,\"Buffer2 initially: %s \\n\", buffer2);\n\n    for(i=0; i&lt;length; i++)\n    {\n        if (number = isalpha(buffer[i]) == 0)\n        {\n            strncpy(&amp;buffer2[i], &amp;buffer[i], 1);\n        }\n    }\n    fprintf(stdout, \"Copied buffer is: %s \\n\", buffer2);\n    return 0;\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c", "constants"], "comments": [{"owner": {"reputation": 106438, "user_id": 1275169, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4c6dbda4e65af6d2ceaabdfad538b319?s=128&d=identicon&r=PG&f=1", "display_name": "P.P", "link": "https://stackoverflow.com/users/1275169/p-p"}, "edited": false, "score": 5, "creation_date": 1461168703, "post_id": 36749331, "comment_id": 61079743, "body": "<code>declares 1 and 0 as a FALSE and TRUE</code> why not use C99&#39;s <code>&lt;stdbool.h&gt;</code>?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461168742, "post_id": 36749331, "comment_id": 61079767, "body": "Which version of C (C89, C99, C11) does your code need to support?"}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1461170134, "post_id": 36749331, "comment_id": 61080675, "body": "<code>&#47;&#47; declares 1 and 0 as a FALSE and TRUE</code> is confusing as the ordering suggests <code>FALSE</code> is <code>1</code> and <code>TRUE</code> is <code>0</code>! Also, I&#39;d just define <code>FALSE</code> as <code>0</code> rather than mucking around with <code>!TRUE</code>, which should probably have parentheses for safety."}, {"owner": {"reputation": 521, "user_id": 6014759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2518c6afbc34631810aee4c75d59aa29?s=128&d=identicon&r=PG&f=1", "display_name": "Lucfia", "link": "https://stackoverflow.com/users/6014759/lucfia"}, "edited": false, "score": 0, "creation_date": 1461172458, "post_id": 36749331, "comment_id": 61082037, "body": "Thank you for tips, i&#39;ll check stdbool library first :) What about  <code>const enum { ...</code> ? Is this ok?"}], "answers": [{"tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": true, "score": 2, "last_activity_date": 1461178235, "creation_date": 1461178235, "answer_id": 36752616, "question_id": 36749331, "link": "https://stackoverflow.com/questions/36749331/what-is-the-right-declaration-of-constants-in-c/36752616#36752616", "title": "What is the right declaration of constants in C?", "body": "<p>There are several different ways to define symbolic constants in C:</p>\n\n<ul>\n<li>Using the preprocessor: <code>#define FOO something</code></li>\n<li>Using enumeration constants: <code>enum { FOO=1, BAR=10, BLETCH=100 };</code></li>\n<li>Using const-qualified variables: <code>const double PI=3.14159265359;</code></li>\n</ul>\n\n<p>Each has its pros and cons.</p>\n\n<p>Preprocessor macros are basically just text replacements, and can be used for simple values:</p>\n\n<pre><code>#define FOO 10\n#define STR \"This is a test\"\n#define PI 3.14159265359\n</code></pre>\n\n<p>or for more complex expressions</p>\n\n<pre><code>#define BAR (FOO * PI + BLETCH)\n</code></pre>\n\n<p>The problem is that preprocessor macros are replaced during the preprocessing stage, so after your code is compiled the symbols <code>FOO</code>, <code>STR</code>, <code>PI</code>, and <code>BAR</code> no longer exist (which can make assembly-level debugging difficult), and they don't obey scoping rules (i.e., if you create the macro within a function, it's visibility won't be limited to just that function, it will be visible to any code following the function definition).  </p>\n\n<p>You can use enumeration constants for integer values:</p>\n\n<pre><code>enum { FOO = 1, BAR = 10, BLETCH = 100 };\n</code></pre>\n\n<p>These are not replaced after preprocessing, so they're visible in debuggers.  Values are known at compile time, so they can be used for array sizes or cases in <code>switch</code> statements.  Enumeration constants occupy the same name space as variable and function names, so you can't use the same symbol for an enumeration constant and a variable.  Enumeration constants <em>do</em> obey scoping rules; if you define the <code>enum</code> type within a function, those enumeration constants will not be visible outside of the function body.  </p>\n\n<p>You cannot use enumeration constants for non-<code>int</code> values (strings, floats, any integer value wider than <code>int</code>).  </p>\n\n<p>You can use <code>const</code>-qualified variables:</p>\n\n<pre><code>const double PI = 3.14159265359;\nconst char * const STR = \"This is a string constant\";\nconst int FOO = 10;\n</code></pre>\n\n<p>Almost as flexible as preprocessor macros, symbols aren't replaced by the preprocessor.  Like enumeration constants, variables obey scoping rules.  Downside is that storage must be allocated for all these objects at runtime, and they don't count as <em>compile-time</em> constants, meaning they can't be used for things like cases in a <code>switch</code> statement. </p>\n\n<p>No one scheme is always \"best\"; it really depends on what you need.  </p>\n\n<p>For my part, I use the <code>enum</code> method for related integer constants (error codes, machine states, etc.), and <code>const</code>-qualified variables for just about everything else.  I rarely use preprocessor macros for symbolic constants.  </p>\n"}], "owner": {"reputation": 521, "user_id": 6014759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2518c6afbc34631810aee4c75d59aa29?s=128&d=identicon&r=PG&f=1", "display_name": "Lucfia", "link": "https://stackoverflow.com/users/6014759/lucfia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 36752616, "answer_count": 1, "score": 1, "last_activity_date": 1461178235, "creation_date": 1461168175, "question_id": 36749331, "link": "https://stackoverflow.com/questions/36749331/what-is-the-right-declaration-of-constants-in-c", "title": "What is the right declaration of constants in C?", "body": "<p>I am actualy using something like this to make constansts for my error function. Is this fine or should I do this somehow else?</p>\n\n<pre><code>// declares 1 and 0 as a FALSE and TRUE\n#define TRUE 1\n#define FALSE !TRUE\n\n// declares \"error types\"\nconst enum {\n    SYNTAX = 0,\n    ZERO_OPERATOR = 1,\n    ZERO_MINUS = 2\n};\n</code></pre>\n\n<p>How I am using \"error types\" constants in code:</p>\n\n<pre><code>If (!something) error(SYNTAX); // there is a switch in error function which prints the error\n</code></pre>\n"}, {"tags": ["c", "switch-statement"], "comments": [{"owner": {"reputation": 2021, "user_id": 903014, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bnzFu.jpg?s=128&g=1", "display_name": "Steve0", "link": "https://stackoverflow.com/users/903014/steve0"}, "edited": false, "score": 0, "creation_date": 1461167401, "post_id": 36748934, "comment_id": 61078821, "body": "Your only options are to do as you don&#39;t want to or as pzaenger suggests."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461167636, "post_id": 36748934, "comment_id": 61079017, "body": "If you want a non portable solution, gcc can use range based case."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 6, "creation_date": 1461167694, "post_id": 36748934, "comment_id": 61079061, "body": "You mean <code>1 ... 10</code>, not <code>&#39;1&#39; ... &#39;10&#39;</code>. And that construct is a gcc extension, not standard C."}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 1, "creation_date": 1461168102, "post_id": 36748934, "comment_id": 61079334, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/9922837/converting-the-gnu-case-range-extension-to-standard-c\">Converting the GNU case range extension to standard C</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1461167938, "post_id": 36749099, "comment_id": 61079223, "body": "In which case <code>switch</code> might not be the way to go."}, {"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 2, "creation_date": 1461167984, "post_id": 36749099, "comment_id": 61079244, "body": "If you have to check thousands of numbers, you should have mentioned that in your original question."}, {"owner": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "edited": false, "score": 0, "creation_date": 1461167991, "post_id": 36749099, "comment_id": 61079250, "body": "you mean you have 1000s of ranges to check for? if yes then use <code>if</code>, if numbers are in 1000s but ranges are few then you can use <code>switch</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 181, "user_id": 3205621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ce667308c8d1192c87a152e98a12c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3205621", "link": "https://stackoverflow.com/users/3205621/user3205621"}, "edited": false, "score": 1, "creation_date": 1461168239, "post_id": 36749099, "comment_id": 61079416, "body": "@user3205621 consider writing a short program to generate the source code for you, then copy/paste, or include the file ;)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461170018, "post_id": 36749099, "comment_id": 61080595, "body": "Note: <code>switch()</code> statements might not support more than 1023 <code>case</code> labels:  C11 &#167;5.2.4.1 1"}, {"owner": {"reputation": 973, "user_id": 1734032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/69zJo.jpg?s=128&g=1", "display_name": "mckenzm", "link": "https://stackoverflow.com/users/1734032/mckenzm"}, "edited": false, "score": 0, "creation_date": 1560579764, "post_id": 36749099, "comment_id": 99791244, "body": "likely he had 1024 numbers, and could have ranged them to a scale of 1..10. Just saying, a lot of Arduino programmers want to do this."}], "tags": [], "owner": {"reputation": 8159, "user_id": 1091784, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/cIHz9.png?s=128&g=1", "display_name": "riteshtch", "link": "https://stackoverflow.com/users/1091784/riteshtch"}, "is_accepted": false, "score": 4, "last_activity_date": 1461167518, "creation_date": 1461167518, "answer_id": 36749099, "question_id": 36748934, "link": "https://stackoverflow.com/questions/36748934/how-can-i-use-ranges-in-a-switch-case-statement-in-c/36749099#36749099", "title": "How can I use ranges in a switch case statement in C?", "body": "<p>Option 1: use <code>case 0</code> for <code>0-9</code>, <code>case 1</code> for <code>11-20</code> and so on.</p>\n\n<p>Option 2: use <code>if</code></p>\n\n<p>Option 3:  </p>\n\n<p>Another shabby way is using fall through cases like this:  </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n    int i=1;\n\n    for(i=1;i&lt;=25;i++)\n    {\n    switch(i)\n    {\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n        case 7:\n        case 8:\n        case 9:\n        case 10:\n            printf(\"%d  is in between 1-10\\n\", i);\n            break;\n\n        case 11:\n        case 12:\n        case 13:\n        case 14:\n        case 15:\n        case 16:\n        case 17:\n        case 18:\n        case 19:\n        case 20:\n            printf(\"%d  is in between 11-20\\n\", i);\n            break;\n\n        default:\n            printf(\"%d  is above 20\\n\", i);\n    }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>1  is in between 1-10\n2  is in between 1-10\n3  is in between 1-10\n4  is in between 1-10\n5  is in between 1-10\n6  is in between 1-10\n7  is in between 1-10\n8  is in between 1-10\n9  is in between 1-10\n10  is in between 1-10\n11  is in between 11-20\n12  is in between 11-20\n13  is in between 11-20\n14  is in between 11-20\n15  is in between 11-20\n16  is in between 11-20\n17  is in between 11-20\n18  is in between 11-20\n19  is in between 11-20\n20  is in between 11-20\n21  is above 20\n22  is above 20\n23  is above 20\n24  is above 20\n25  is above 20\n</code></pre>\n\n<p><a href=\"https://ideone.com/Cw6HDO\" rel=\"nofollow\">https://ideone.com/Cw6HDO</a></p>\n"}, {"tags": [], "owner": {"reputation": 19025, "user_id": 599792, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ce404c8d35df762a599cb5173f18456?s=128&d=identicon&r=PG", "display_name": "Gareth McCaughan", "link": "https://stackoverflow.com/users/599792/gareth-mccaughan"}, "is_accepted": false, "score": 1, "last_activity_date": 1461167525, "creation_date": 1461167525, "answer_id": 36749100, "question_id": 36748934, "link": "https://stackoverflow.com/questions/36748934/how-can-i-use-ranges-in-a-switch-case-statement-in-c/36749100#36749100", "title": "How can I use ranges in a switch case statement in C?", "body": "<p>C doesn't support case values other than single integers (or integer-like things -- characters, enumeration values). So your options are:</p>\n\n<ul>\n<li>As suggested by pzaenger in a now-deleted comment: transform the number you're working with into something you <em>can</em> switch on (in this case, divide by 10).</li>\n<li>Multiple case statements (taking advantage of fallthrough): <code>case 1: case 2: case 3: ... case 10: do_something();</code></li>\n<li>Use <code>if</code> rather than <code>case</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "is_accepted": false, "score": 6, "last_activity_date": 1461168087, "last_edit_date": 1461168087, "creation_date": 1461167652, "answer_id": 36749135, "question_id": 36748934, "link": "https://stackoverflow.com/questions/36748934/how-can-i-use-ranges-in-a-switch-case-statement-in-c/36749135#36749135", "title": "How can I use ranges in a switch case statement in C?", "body": "<pre><code>void SwitchDemo(int value)\n   {\n   switch(value / 10)\n      {\n      case 0: ...; break; // 0 - 9\n      case 1: ...; break; // 10 - 19\n      ...\n      }\n   }\n</code></pre>\n\n<p>or, specific to the question ranges:</p>\n\n<pre><code>void SwitchDemo(int value)\n   {\n   switch((value-1) / 10)\n      {\n      case 0: ...; break; // 1 - 10\n      case 1: ...; break; // 11 - 20\n      ...\n      }\n   }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461170215, "post_id": 36749194, "comment_id": 61080722, "body": "The <code>switch()</code> <b>can</b> operate a non-constant expression in the <i>expression</i> portion of <code>switch ( expression ) ...</code>"}], "tags": [], "owner": {"reputation": 160, "user_id": 3147629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ba08438b94cde0ff7ffed3a6866a63?s=128&d=identicon&r=PG&f=1", "display_name": "maxlazar", "link": "https://stackoverflow.com/users/3147629/maxlazar"}, "is_accepted": false, "score": -1, "last_activity_date": 1461167829, "last_edit_date": 1495535482, "creation_date": 1461167829, "answer_id": 36749194, "question_id": 36748934, "link": "https://stackoverflow.com/questions/36748934/how-can-i-use-ranges-in-a-switch-case-statement-in-c/36749194#36749194", "title": "How can I use ranges in a switch case statement in C?", "body": "<p>Switch statements in c can only operate on a constant expression, the case statements cannot include dynamic comparisons.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3755524/example-of-something-which-is-and-is-not-a-constant-expression-in-c\">Example of something which is, and is not, a &quot;Constant Expression&quot; in C?</a></p>\n\n<p>For something this simple an if/else structure could be clearer and simpler, depending on the compiler your case statement may be translated into a series of branching comparison statements anyways.</p>\n"}, {"tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 27, "last_activity_date": 1461168093, "last_edit_date": 1495541882, "creation_date": 1461168093, "answer_id": 36749300, "question_id": 36748934, "link": "https://stackoverflow.com/questions/36748934/how-can-i-use-ranges-in-a-switch-case-statement-in-c/36749300#36749300", "title": "How can I use ranges in a switch case statement in C?", "body": "<p>The <a href=\"http://gcc.gnu.org/\" rel=\"noreferrer\">GCC</a> compiler supports, as a <em>language extension</em>, <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Case-Ranges.html\" rel=\"noreferrer\">case ranges</a> like:</p>\n\n<pre><code> switch(i) {\n    case 0 ... 9: return true;\n    default: return false;\n }\n</code></pre>\n\n<p>This language extension is also accepted by <a href=\"http://clang.llvm.org/\" rel=\"noreferrer\">Clang/LLVM</a>. So use it if you can afford restricting your code to GCC &amp; Clang compilers.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/5924681/are-elipses-in-case-statements-standard-c-c\">this</a>.</p>\n\n<p>I have no idea why this extension was not included in <a href=\"https://en.wikipedia.org/wiki/C11_%28C_standard_revision%29\" rel=\"noreferrer\">C11</a> standard.</p>\n"}, {"tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 0, "last_activity_date": 1521924203, "last_edit_date": 1521924203, "creation_date": 1521217095, "answer_id": 49325302, "question_id": 36748934, "link": "https://stackoverflow.com/questions/36748934/how-can-i-use-ranges-in-a-switch-case-statement-in-c/49325302#49325302", "title": "How can I use ranges in a switch case statement in C?", "body": "<p>In the C programming language the <code>case</code> statement used in a <code>switch()</code> statement must specify a value that the compiler can turn into a constant in some way. Each of the values used in the <code>case</code> statements must be unique within the scope of the <code>switch()</code>. The <code>default</code> keyword indicates the default if none of the <code>case</code> statements match the expression in the <code>switch()</code> statement.</p>\n\n<p>As an aside, check out Duff's Device to show an interesting use of <code>switch()</code> and <code>case</code>. See <a href=\"https://stackoverflow.com/questions/514118/how-does-duffs-device-work\">How does Duff's device work?</a></p>\n\n<p>So the following shows several examples of proper <code>case</code> statements in a <code>switch()</code>:</p>\n\n<pre><code>#define XXVAL 2\n#define CASETEST(x) (x + 5)\n\nint iValue;\n//  set the value of the variable iValue at some point\nswitch (iValue) {\ncase 0:\n    // do the case if iValue == 0\n    break;\ncase XXVAL:\n    // do the case if iValue == XXVAL\n    break;\ncase CASETEST(3):\n    // do the case if iValue == CASETEST(3)\n    // works because preprocessor generates the source text which is\n    // then compiled and the expression can be resolved to a constant\n    break;\ncase CASETEST(5) * 2:\n    // do the case if iValue == CASETEST(5) * 2\n    // works because preprocessor generates the source text which is\n    // then compiled and the expression can be resolved to a constant\n    break;\ndefault:\n    break;\n}\n</code></pre>\n\n<p>What you can do if you still want to use  a <code>switch()</code> with ranged <code>case</code> statements is to provide some mechanism to fold the expression into one or more specific constant values.</p>\n\n<p>So in a simple, trivial example you could do something like the following. This is a trivial case to show the technique which ends up making the logic of the simple <code>if</code> statements opaque. This technique can be useful for complex decisions and classification that can be folded into a simple set of constants.</p>\n\n<pre><code>int foldit (int iValue)\n{\n    if (iValue &lt; 5000) return 0;\n    else if (iValue &lt; 10000) return 1;\n    else if (ivalue &lt; 20000) return 2;\n    else return 9999;   // triggers the default part of the switch\n}\n\nswitch (foldit(iValue)) {\ncase 0:\n    // do what is needed for up to but not including 5000\n    break;\ncase 1:\n    // do what is needed for 5000 up to but not including 10000\n    break;\ncase 2:\n    // do what is needed for 10000 up to but not including 20000\n    break;\ndefault:\n    // handle anything else\n    break;\n}\n</code></pre>\n\n<p>Where the fold approach can be helpful is when you have several different results perhaps using a filter to try to classify a data item.</p>\n\n<pre><code>#define type1  0x00001\n#define type2  0x00002\n#define type3  0x00004\n#define type4  0x00008\n\nstruct datatype {\n    int iVal;\n    int jVal; \n};\n\nunsigned long is_a_type1(struct datatype * thing)\n{\n    unsigned long retVal = 0;   // initialize to not a type1, set to type1 if turns out to be\n    // do checks for the type and if so set retVal to type1 if it matches\n    return retVal;\n}\n\nunsigned long is_a_type2(struct datatype * thing)\n{\n    unsigned long retVal = 0;   // initialize to not a type2, set to type2 if turns out to be\n    // do checks for the type and if so set retVal to type2 if it matches\n    return retVal;\n}\n\nunsigned long is_a_type3(struct datatype * thing)\n{\n    unsigned long retVal = 0;   // initialize to not a type3, set to type3 if turns out to be\n    // do checks for the type and if so set retVal to type3 if it matches\n    return retVal;\n}\n\nunsigned long is_a_type4(struct datatype * thing)\n{\n    unsigned long retVal = 0;   // initialize to not a type4, set to type4 if turns out to be\n    // do checks for the type and if so set retVal to type4 if it matches\n    return retVal;\n}\n\nunsigned long classify (struct datatype *thing)\n{\n    unsigned long ulTestResult = 0;\n\n    // test to see if this is a type1 thing\n    ulTestResult |= is_a_type1(thing);\n\n    // test to see if this is a type2 thing\n    ulTestResult |= is_a_type2(thing);\n\n    // test to see if this is a type3 thing\n    ulTestResult |= is_a_type3(thing);\n\n    // test to see if this is a type4 thing\n    ulTestResult |= is_a_type4(thing);\n\n    return ulTestResult;\n}\n\nint main ()\n{\n    struct datatype myThing;\n    //  other source code then\n    switch (classify(&amp;myThing)) {\n    case type1 | type2 | type3:\n        // do stuff if this is a type1, type2, and type3 but not type4\n        // that is classify() determined that myThing matched all three types.\n        break;\n    case type1:\n        // do stuff if type1 which includes stuff you do for type2 as well under\n        // special values of myThing.\n        if (myThing.iVal &lt; 50) {\n            case type2:\n                // at this point we have type2 case stuff that we do. Code above is skipped\n                // and the switch () will jump straight to here if classify() is type2.\n                //\n                // Also stuff we do if type1 and myThing.iVal &lt; 50\n                // in other words this code is execute if classify(&amp;myThing) is type2 or\n                // if classify(&amp;myThink) is type1 and there is a special processing for myThing.iVal &lt; 50\n                break;  // if classify() type2 or if classify() type1 and myThing.ival &lt; 50\n            }\n        // do stuff if only type1 and myThing.iVal &gt;= 50\n        break;\n    case type2 | type3:\n        // do stuff if type2 and type3 matched but none of the others.\n        break;\n    default:\n        // any other case\n        break;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 3205621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ce667308c8d1192c87a152e98a12c2?s=128&d=identicon&r=PG&f=1", "display_name": "user3205621", "link": "https://stackoverflow.com/users/3205621/user3205621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42453, "favorite_count": 5, "answer_count": 6, "score": 15, "last_activity_date": 1521924203, "creation_date": 1461167136, "last_edit_date": 1461167978, "question_id": 36748934, "link": "https://stackoverflow.com/questions/36748934/how-can-i-use-ranges-in-a-switch-case-statement-in-c", "title": "How can I use ranges in a switch case statement in C?", "body": "<p>My logic is:</p>\n\n<pre><code>if number is between 1 to 10, execute first case statement\nif number is from 20 to 30, execute second case statement\n</code></pre>\n\n<p>is there a solution other than the one below?  </p>\n\n<pre><code>case '1' ... '10':\ncase '20' ... '30':\n</code></pre>\n"}, {"tags": ["c", "winapi", "x86", "stack", "x86-64"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1461168889, "post_id": 36748888, "comment_id": 61079867, "body": "What information did you gather running the code under a debugger? Specifically, which expression/statement failed with an access violation?"}, {"owner": {"reputation": 145, "user_id": 5918499, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FvSfu.jpg?s=128&g=1", "display_name": "man", "link": "https://stackoverflow.com/users/5918499/man"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1461169277, "post_id": 36748888, "comment_id": 61080129, "body": "@IInspectable <code>void* pointsTo = *((void**)address);</code>  It&#39;s the first iteration of the loop when it fails."}], "answers": [{"tags": [], "owner": {"reputation": 2163, "user_id": 1354557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc453786e0df9531c8c511d87a3514bd?s=128&d=identicon&r=PG", "display_name": "user1354557", "link": "https://stackoverflow.com/users/1354557/user1354557"}, "is_accepted": true, "score": 1, "last_activity_date": 1461175512, "creation_date": 1461175512, "answer_id": 36751770, "question_id": 36748888, "link": "https://stackoverflow.com/questions/36748888/going-through-the-stack/36751770#36751770", "title": "Going through the stack", "body": "<p>The problem is that you are dereferencing <code>tib-&gt;StackBase</code>.</p>\n\n<p>The stack region is greater than or equal to <code>tib-&gt;StackLimit</code> and <em>less than</em> <code>tib-&gt;StackBase</code>.  It is very likely that the page that page containing <code>tib-&gt;StackBase</code> will not be mapped into memory.</p>\n\n<p>So just change your for loop to look like this:</p>\n\n<pre><code>for (void* address = (char*)tib-&gt;StackBase - sizeof(void*);\n           address &gt;= tib-&gt;StackLimit;\n           address = (char*)address - sizeof(void*))\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 5918499, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FvSfu.jpg?s=128&g=1", "display_name": "man", "link": "https://stackoverflow.com/users/5918499/man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 36751770, "answer_count": 1, "score": 1, "last_activity_date": 1461175512, "creation_date": 1461167049, "last_edit_date": 1461168402, "question_id": 36748888, "link": "https://stackoverflow.com/questions/36748888/going-through-the-stack", "title": "Going through the stack", "body": "<p>I made a simple function to iterate through the whole stack and print out contents of each entry in there.<br></p>\n\n<pre><code>void ListStack()\n{\n    NT_TIB* tib = (NT_TIB*)NtCurrentTeb();\n\n    for (void* address = tib-&gt;StackBase; address &gt; tib-&gt;StackLimit; address = (char*)address - sizeof(void*))\n    {\n        void* pointsTo = *((void**)address);\n\n        printf(\"address=%p, points to=%p\\n\", address, pointsTo);\n    }\n}\n</code></pre>\n\n<p>On x86, this works fine. However, on x64, it gives me read access violation.<br><br>\nWhat's wrong with this?</p>\n"}, {"tags": ["c", "pointers", "memory", "struct"], "answers": [{"comments": [{"owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "edited": false, "score": 0, "creation_date": 1461179031, "post_id": 36752398, "comment_id": 61086015, "body": "Ok, thank you very much I understood everything :) as i said, i know this isn&#39;t the easiest and more reasonable way to do it (in fact the provided solution to the exercise used two arrays of structures, one for the payments and the other for the people inserted)"}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 1, "last_activity_date": 1461187317, "last_edit_date": 1461187317, "creation_date": 1461177529, "answer_id": 36752398, "question_id": 36748780, "link": "https://stackoverflow.com/questions/36748780/realloc-overlapping-pointers-with-different-one/36752398#36752398", "title": "realloc overlapping pointers with different one", "body": "<h3>Transcribed Comments</h3>\n\n<blockquote>\n  <p>Quotes are from <a href=\"https://stackoverflow.com/users/4296075/john-smith\">John Smith</a>.</p>\n</blockquote>\n\n<p>Any line like: <code>oldptr = realloc(oldptr, newsize);</code> is a memory leak waiting to happen. If the reallocation fails, you've just overwritten <code>oldptr</code> with <code>NULL</code>, so you can't free the still allocated memory. Always use:</p>\n\n<pre><code>newptr = realloc(oldptr, newsize);\nif (newptr != 0) { oldptr = newptr; oldsize = newsize; }\nelse { \u2026handle error\u2026 }\n</code></pre>\n\n<p>(if you're keeping track of sizes \u2014 or <code>oldcount = newcount;</code> if you're counting array entries).</p>\n\n<blockquote>\n  <p>From what I understood <code>oldptr</code> gets overwritten by NULL and freeing a NULL doesn't do anything; that's why I check if it's NULL and return 0 if it is (the exercise explicitly stated to return 0 in this case). I thought that when <code>realloc</code> returns NULL the old pointer would've been freed automatically but apparently this isn't the case. I'll keep that in mind! </p>\n</blockquote>\n\n<p>I think you're running into problems with your <code>realloc()</code> calls in <code>trip_add_expense()</code>. You're not taking into account the number of items already allocated \u2014 <code>sizeof(accountTable-&gt;descriptions)</code> does not do what you seem to think it does, for example. You should track the number of pointers in each array (or set of arrays) separately, and resize using that and the entry size, etc.</p>\n\n<pre><code>size_t new_size = accountTable-&gt;num_desc + 1;\nchar **new_desc = realloc(accountTable-&gt;descriptions, (new_size * sizeof(*accountTable-&gt;descriptions));\n</code></pre>\n\n<p>and error check, except growing by 1 is suboptimal too.</p>\n\n<p>Calling <code>free(NULL)</code> does no harm (but no good either), but the memory that <code>oldptr</code> was pointing to was not freed by <code>realloc()</code> when it failed, but you can no longer pass that pointer to <code>free()</code> because it was overwritten.  That's the memory leak.  (It isn't the only leak in your code, either.)</p>\n\n<blockquote>\n  <p>So, I do the <code>realloc</code> with <code>accountTable-&gt;description + sizeof(char *)</code> because I thought I needed an additional <code>char *</code> that I later use to store the pointer to the start of the description string. Is this wrong and I need to take into account the number of descriptions I have already stored? Also I know growing by 1 is suboptimal and it should be double the size like Python does for arrays (if I remember correctly) but since this, for me, was more an exercise on pointers I preferred to do it like this to write it faster.</p>\n</blockquote>\n\n<p>One of the problems is that you are always allocating the same space; the size is fixed. Unless you're dealing with variable length arrays (which you're not), <code>sizeof(x)</code> is a compile-time constant.</p>\n\n<blockquote>\n  <p>So, tell me if I understood correctly. No matter how many times I write <code>accountTable-&gt;description = realloc(accountTable-&gt;description + sizeof(char *))</code> the result will always be pretty much <code>sizeof(accountTable-&gt;description) + sizeof(char *)</code> because <code>sizeof</code> is a compile-time constant right? This would explain why it breaks with more than 2 entries; the first one is valid because I did the initial malloc and the second because I increase the size by <code>sizeof(char *)</code>.</p>\n</blockquote>\n\n<p>Yes; that's basically correct. For the third entry, you're allocating as much space as you allocated for two entries, and for 4, 5, 6 entries you're allocating the same as for 2 entries. This is not going to lead to happiness if you try to use the extra entries that you thought you allocated but did not actually allocate. You could demonstrate by printing the size values you're passing to the allocation functions. How do you know how many people, descriptions, amounts and payers there are (how big each array is)?</p>\n\n<h3>Code</h3>\n\n<p>This is roughly what you need to do.  Note that I've annotated a few extra mistakes over and above those already mentioned in the commentary to the question.</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nstruct accounting\n{\n    char **people;\n    char **descriptions;\n    float *amountMoney;\n    int *payers;\n    int participants;\n    int payments;\n};\n\nstruct accounting *accountTable;\n\nextern int trip_add_person(const char *name);\nextern int trip_find_person(const char *name);\nextern void trip_shutdown(void);\nextern void trip_initialize(void);\nextern int trip_add_expense(const char *descr, float amount, int payer);\n\nvoid trip_initialize(void)\n{\n    accountTable = malloc(sizeof(struct accounting));\n    assert(accountTable != 0);\n    accountTable-&gt;people = malloc(sizeof(char *));\n    accountTable-&gt;descriptions = malloc(sizeof(char *));\n    /*accountTable-&gt;amountMoney = malloc(sizeof(float *)); // Repeated - leak! */\n    accountTable-&gt;amountMoney = malloc(sizeof(float *));\n    accountTable-&gt;payers = malloc(sizeof(int *));\n    accountTable-&gt;participants = 0;\n    accountTable-&gt;payments = 0;\n    assert(accountTable-&gt;people != 0 &amp;&amp; accountTable-&gt;descriptions != 0 &amp;&amp;\n           accountTable-&gt;amountMoney != 0 &amp;&amp; accountTable-&gt;payers != 0);\n}\n\nvoid trip_shutdown(void)\n{\n    for (int i = 0; i &lt; accountTable-&gt;participants; i++)\n        free(accountTable-&gt;people[i]);\n    for (int i = 0; i &lt; accountTable-&gt;payments; i++)\n        free(accountTable-&gt;descriptions[i]);\n    free(accountTable-&gt;amountMoney);\n    free(accountTable-&gt;payers);\n    free(accountTable-&gt;people);\n    free(accountTable-&gt;descriptions);\n    free(accountTable);\n}\n\nint trip_add_person(const char *name)\n{\n    size_t new_num = accountTable-&gt;participants + 1;\n    char **new_acct = realloc(accountTable-&gt;people, new_num * sizeof(*accountTable-&gt;people));\n    if (new_acct == 0)\n    {\n        fprintf(stderr, \"Out of memory (%zu bytes requested)\\n\", new_num * sizeof(*accountTable-&gt;people));\n        return -1;\n    }\n    accountTable-&gt;people = new_acct;\n    /*accountTable-&gt;people[accountTable-&gt;participants] = malloc(sizeof(char *)); // Leak with strdup! */\n    accountTable-&gt;people[accountTable-&gt;participants] = strdup(name);\n    return accountTable-&gt;participants++;\n}\n\nint trip_find_person(const char *name)\n{\n    for (int i = 0; i &lt; accountTable-&gt;participants; i++)\n    {\n        if (!strcmp(accountTable-&gt;people[i], name))\n        {\n            return i;\n        }\n    }\n    return -1;\n}\n\nint trip_add_expense(const char *descr, float amount, int payer)\n{\n    if (payer &lt; 0 || payer &gt; accountTable-&gt;participants)\n    {\n        return 0;\n    }\n    size_t new_num = accountTable-&gt;payments + 1;\n    char **new_desc = realloc(accountTable-&gt;descriptions, new_num * sizeof(*accountTable-&gt;descriptions));\n    if (new_desc == 0)\n    {\n        fprintf(stderr, \"Out of memory (%zu bytes requested)\\n\", new_num * sizeof(*accountTable-&gt;descriptions));\n        return 0;\n    }\n    accountTable-&gt;descriptions = new_desc;\n    float *new_money = realloc(accountTable-&gt;amountMoney, new_num * sizeof(*accountTable-&gt;amountMoney));\n    if (new_money == 0)\n    {\n        fprintf(stderr, \"Out of memory (%zu bytes requested)\\n\", new_num * sizeof(*accountTable-&gt;amountMoney));\n        return 0;\n    }\n    accountTable-&gt;amountMoney = new_money;\n    int *new_payers = realloc(accountTable-&gt;payers, new_num * sizeof(*accountTable-&gt;payers));\n    if (new_payers == 0)\n    {\n        fprintf(stderr, \"Out of memory (%zu bytes requested)\\n\", new_num * sizeof(*accountTable-&gt;payers));\n        return 0;\n    }\n    accountTable-&gt;payers = new_payers;\n    accountTable-&gt;descriptions[accountTable-&gt;payments] = strdup(descr);\n    accountTable-&gt;amountMoney[accountTable-&gt;payments] = amount;\n    accountTable-&gt;payers[accountTable-&gt;payments] = payer;\n    accountTable-&gt;payments++;\n    return 1;\n}\n\nint main(void)\n{\n    trip_initialize();\n    int who_1 = trip_add_person(\"Original Poster\");\n    int who_2 = trip_add_person(\"Question Answerer\");\n    int who_3 = trip_add_person(\"Antibody\");\n    if (who_1 == -1 || who_2 == -1 || who_3 == -1)\n        fprintf(stderr, \"Oops - Adding people!\\n\");\n    if (trip_add_expense(\"Deposit\", 200.0, who_1) == 0 ||\n        trip_add_expense(\"Deposit\", 200.0, who_2) == 0 ||\n        trip_add_expense(\"Deposit\", 200.0, who_3) == 0)\n        fprintf(stderr, \"Oops - adding expenses!\\n\");\n\n    trip_shutdown();\n}\n</code></pre>\n\n<p>It runs cleanly under <a href=\"http://valgrind.org/\" rel=\"nofollow\"><code>valgrind</code></a> and compiles cleanly using this command (source file name <code>mm31.c</code>):</p>\n\n<pre><code>$ gcc -O3 -g -std=c11 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \\\n&gt;     -Wold-style-definition -Werror mm31.c -o mm31\n$\n</code></pre>\n\n<p>Note that the triple allocations for description, amount, payer is a mess.  You should have:</p>\n\n<pre><code>struct Payment\n{\n    char *description;\n    float amount;\n    int payer;\n};\n</code></pre>\n\n<p>and your structure should contain a pointer to an array of those.  It would radically simplify the <code>trip_add_expense()</code> function.</p>\n\n<p>I think you've always got one more space allocated than you're using in the arrays.  It is often best to leave the pointers unallocated until you first need some space.  Then I'd allocate something like <code>size_t new_num = (old_num + 2) * 2;</code> units and keep a record of how many units are allocated and how many are in use.  This allocates 4, then 12, then 28 \u2026 entries for use (a power of 2 minus 4, as it happens \u2014 the <code>+ 2</code> deals with <code>old_num == 0</code>; you can also use <code>new_num = old_num * 2 + 2</code>, giving you 2, 6, 14, 30, \u2026 as the sizes).</p>\n"}], "owner": {"reputation": 1211, "user_id": 4296075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a7d4f6a4e79ec582c89e67c45dea3e71?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4296075/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 36752398, "answer_count": 1, "score": 1, "last_activity_date": 1461187317, "creation_date": 1461166790, "last_edit_date": 1461167167, "question_id": 36748780, "link": "https://stackoverflow.com/questions/36748780/realloc-overlapping-pointers-with-different-one", "title": "realloc overlapping pointers with different one", "body": "<p>I'm trying to learn C and found a nice exercise that is giving me some problems. In particular i wrote the following code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include \"trip.h\"\n\nstruct accounting{\n    char ** people;\n    char ** descriptions;\n    float * amountMoney;\n    int * payers;\n    int participants;\n    int payments;\n};\n\nstruct accounting *accountTable;\n\nvoid trip_initialize(){\n    accountTable = malloc(sizeof(struct accounting));\n    accountTable-&gt;people = malloc(sizeof(char *));\n    accountTable-&gt;descriptions = malloc(sizeof(char *));\n    accountTable-&gt;amountMoney = malloc(sizeof(float *));\n\n    accountTable-&gt;amountMoney = malloc(sizeof(float *));\n    accountTable-&gt;payers = malloc(sizeof(int *));\n    accountTable-&gt;participants = 0;\n    accountTable-&gt;payments = 0;\n};\n\nvoid trip_shutdown(){\n\n    for (int i = 0; i &lt; accountTable-&gt;participants; i++){\n        free(accountTable-&gt;people[i]);\n    }\n\n    for (int i = 0; i &lt; accountTable-&gt;payments; i++){\n        free(accountTable-&gt;descriptions[i]);\n    }\n    free(accountTable-&gt;amountMoney);\n    free(accountTable-&gt;payers);\n    free(accountTable-&gt;people);\n    free(accountTable-&gt;descriptions);\n    free(accountTable);\n};\n\nint trip_add_person(const char * name){\n    accountTable-&gt;people = realloc(accountTable-&gt;people,sizeof(accountTable-&gt;people) + sizeof(char *));\n    if (!accountTable-&gt;people){\n        return -1;\n    }\n    accountTable-&gt;people[accountTable-&gt;participants] = malloc(sizeof(char *));\n    accountTable-&gt;people[accountTable-&gt;participants] = strdup(name);\n    return accountTable-&gt;participants++;\n};\n\nint trip_find_person(const char * name){\n    for (int i = 0; i &lt; accountTable-&gt;participants; i++){\n        if (!strcmp(accountTable-&gt;people[i], name)){\n            return i;\n        }\n    }\n    return -1;\n};\n\nint trip_add_expense(const char * descr, float amount, int payer){\n    if (payer &lt; 0 || payer &gt; accountTable-&gt;participants){\n        return 0;\n    }\n    accountTable-&gt;descriptions = realloc(accountTable-&gt;descriptions, sizeof(accountTable-&gt;descriptions) +  sizeof(char *));\n    if (!accountTable-&gt;descriptions){\n        return 0;\n    }\n    accountTable-&gt;amountMoney = realloc(accountTable-&gt;amountMoney, sizeof(accountTable-&gt;amountMoney) + sizeof(float *));\n    if (!accountTable-&gt;amountMoney){\n        return 0;\n    }\n    accountTable-&gt;payers = realloc(accountTable-&gt;payers, sizeof(accountTable-&gt;payers) + sizeof(int *));\n    if (!accountTable-&gt;payers){\n        return 0;\n    }\n    accountTable-&gt;descriptions[accountTable-&gt;payments] = strdup(descr);\n    accountTable-&gt;amountMoney[accountTable-&gt;payments] = amount;\n    accountTable-&gt;payers[accountTable-&gt;payments] = payer;\n    accountTable-&gt;payments++;\n    return 1;\n};\n</code></pre>\n\n<p>Now, I admit I have some problems understanding exactly how pointers and memory allocation work and I know there are probably more efficient ways to do this exercise.</p>\n\n<p>My problem is that if I insert some persons into the system everything works fine, if I then insert 3 or more expenses the pointers of description from people[2] onward will point to the same memory positions of description. E.G. if I add 2 expenses everything is ok,if I then add one more the pointer of the newly added person will point to the memory location of description[0], the next person i insert will point to description[1] and so on overriding the names and if I add more people i will override the previously saved descriptions.</p>\n\n<p>I really don't understand why this happens since from what i read realloc() won't go over other memory positions already used by another malloc.</p>\n\n<p>If i print the pointers i will get</p>\n\n<pre><code>person pointer[0] 0x7ff73b404a20\nperson pointer[1] 0x7ff73b404a28\nperson pointer[2] 0x7ff73b404a30\n\ndescription pointer[0] 0x7ff73b404a30\ndescription pointer[1] 0x7ff73b404a38\ndescription pointer[2] 0x7ff73b404a40 \n</code></pre>\n\n<p>as you can see person[2] points to the same location as description[0] and if I continue person[3] will point to description[1] and so on.</p>\n\n<p>I think I introduced some undefined behavior somewhere but I can't really understand where.</p>\n\n<p>P.S. If you try to copy and paste this code trip_shutdown() won't work because free(accountTable->descriptions[0]) will try to free a pointer already freed in the previous loop.</p>\n"}, {"tags": ["c", "matrix", "global-variables", "global-scope"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1461166376, "post_id": 36748600, "comment_id": 61077978, "body": "Why you can&#39;t use pointers with dynamic memory allocation?"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461166494, "post_id": 36748600, "comment_id": 61078058, "body": "If you cannot use dynamic allocation, just put greater values than needed."}, {"owner": {"reputation": 29, "user_id": 6231123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C5QAY.jpg?s=128&g=1", "display_name": "Aryella Lacerda", "link": "https://stackoverflow.com/users/6231123/aryella-lacerda"}, "edited": false, "score": 0, "creation_date": 1461324919, "post_id": 36748600, "comment_id": 61159774, "body": "I hadn&#39;t yet learned about dynamic memory allocation. :) Since it was mentioned here, I googled and figured out what it meant."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461168813, "post_id": 36748673, "comment_id": 61079818, "body": "This is probably the worst solution. It has, like, <i>zero</i> memory locality for the data."}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461169449, "post_id": 36748673, "comment_id": 61080229, "body": "@LightnessRacesinOrbit :  Spatial locality may be guaranteed if the op has a small size matrix spanning only a few bytes/characters"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461170754, "post_id": 36748673, "comment_id": 61081037, "body": "Quite the opposite because you have an additional layer of indirection. That&#39;s the problem. Speaking generally, double-pointers = bad."}], "tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": true, "score": 1, "last_activity_date": 1461168028, "last_edit_date": 1461168028, "creation_date": 1461166525, "answer_id": 36748673, "question_id": 36748600, "link": "https://stackoverflow.com/questions/36748600/declare-matrix-at-file-scope-dimensions-from-user-input-c/36748673#36748673", "title": "Declare matrix at file scope, dimensions from user input? C", "body": "<p>Do</p>\n\n<pre><code>char **matrix;\n</code></pre>\n\n<p>Read rows <code>r</code> and columns <code>c</code> as input from the user.</p>\n\n<p>Then do :</p>\n\n<pre><code>*matrix[c]=malloc(sizeof(matrix[r][c]); //You get contiguous memory here\n</code></pre>\n\n<p>Then you access the matrix like matrix[x][y] , the same way you access a 2D array.</p>\n\n<p>At the end of the day, clear the memory allocated :</p>\n\n<pre><code>clear(matrix);\n</code></pre>\n\n<blockquote>\n  <p>Or a way to access this matrix and dimensions without passing them as\n  arguments to various functions?</p>\n</blockquote>\n\n<p>Well, yes . You usually you pass the arguments like below :</p>\n\n<pre><code>void print_matrix(char** matrix_copy,int rows,int cols)\n{\n//Access the matrix using matrix_copy[x][y] format\n}\n</code></pre>\n\n<p>You can just pass the matrix from <code>main()</code> like below :</p>\n\n<pre><code>print_matrix(matrix,r,c); // As simple as that.\n</code></pre>\n\n<p><strong>Since you don't need arguments you need a workaround</strong> which is simple.</p>\n\n<p>Declare </p>\n\n<pre><code>char **matrix;\nint r,c; // rows &amp; columns\n</code></pre>\n\n<p>outside all the functions, so that they are accessible across the program.\nIn other words declare them in file scope. But in this case make sure that you access the <code>matrix</code> only after it is allocated some space using <code>malloc</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1461168673, "post_id": 36749368, "comment_id": 61079726, "body": "In this case memory allocated is not contiguous, ie it is fragmented. You get slow crappy code that burns.and crashes ."}, {"owner": {"reputation": 125, "user_id": 6216954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/065bf407ecc1c08a1e3e35ecb4d7ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "D.Christodoulou", "link": "https://stackoverflow.com/users/6216954/d-christodoulou"}, "reply_to_user": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1461168848, "post_id": 36749368, "comment_id": 61079837, "body": "Yes you are right but as the OP mentioned she is a beginner C programmer, I thought a simpler code might help her understand about pointers and the &quot;malloc&quot; function. Thank you for pointing that out though!"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 0, "creation_date": 1461168897, "post_id": 36749368, "comment_id": 61079876, "body": "This is not simpler either."}], "tags": [], "owner": {"reputation": 125, "user_id": 6216954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/065bf407ecc1c08a1e3e35ecb4d7ca4a?s=128&d=identicon&r=PG&f=1", "display_name": "D.Christodoulou", "link": "https://stackoverflow.com/users/6216954/d-christodoulou"}, "is_accepted": false, "score": 0, "last_activity_date": 1461168277, "creation_date": 1461168277, "answer_id": 36749368, "question_id": 36748600, "link": "https://stackoverflow.com/questions/36748600/declare-matrix-at-file-scope-dimensions-from-user-input-c/36749368#36749368", "title": "Declare matrix at file scope, dimensions from user input? C", "body": "<p>Dynamic Memory Allocation is a viable solution to your problem, as sjsam said.\nThe only thing I would like to point out is that the code can look like this:</p>\n\n<pre><code>int i,lin,col;\nchar **matrix;\nmatrix=malloc(lin * sizeof(char*));\n//check for NULL\nfor(i=0;i&lt;lin;i++){\n    matrix[i]=malloc(col * sizeof(char));\n    //again,check for NULL\n}\n</code></pre>\n\n<p>Then again, to free your allocated memory, you do:</p>\n\n<pre><code>for(i=0;i&lt;lin;i++)\n    free(matrix[i]);\nfree(matrix);\n</code></pre>\n\n<p>Hope that answers your question!</p>\n"}], "owner": {"reputation": 29, "user_id": 6231123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C5QAY.jpg?s=128&g=1", "display_name": "Aryella Lacerda", "link": "https://stackoverflow.com/users/6231123/aryella-lacerda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 36748673, "answer_count": 2, "score": 0, "last_activity_date": 1461168846, "creation_date": 1461166314, "last_edit_date": 1461168846, "question_id": 36748600, "link": "https://stackoverflow.com/questions/36748600/declare-matrix-at-file-scope-dimensions-from-user-input-c", "title": "Declare matrix at file scope, dimensions from user input? C", "body": "<p>I have a program based on a matrix and need various functions to be able to access this matrix and it's dimensions, which I get from the user. I've managed to do it by passing them as arguments to each separate function, but that doesn't seem efficient.</p>\n\n<p>When I try to declare this:</p>\n\n<pre><code>int lin, col;\nchar matrix[lin][col]; \n</code></pre>\n\n<p>I get an error: <em>variable length array declaration not allowed at file scope</em>. I'm guessing it's because at that point, I haven't asked the user for 'lin' and 'col'? My question is: is there a way to make my matrix of variable dimensions have global scope? Or a way to access this matrix and dimensions without passing them as arguments to various functions?</p>\n"}, {"tags": ["c", "valgrind", "calloc"], "comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461166755, "post_id": 36748546, "comment_id": 61078249, "body": "So see (some of) the Valgrind messages would also help."}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1461166976, "post_id": 36748546, "comment_id": 61078435, "body": "Based on standard C, I don&#39;t think you can be assured that your array is initialized to all NULL pointers; it&#39;s all bits zero, but in principle the NULL pointer could have some other representation.  Maybe this is the cause of the warning?  Does it help if after the calloc, you put in an explicit loop setting each element of the allocated array to NULL?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461167478, "post_id": 36748546, "comment_id": 61078881, "body": "On which platform do observe this behaviour?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1461188778, "post_id": 36748546, "comment_id": 61091722, "body": "It would help if you could also post your <code>free</code> code since you mention that the problem seems to happen with that. Also, some code to show the context of the alloc/free calls. You may be doing the free and then still trying to use the pointer?"}, {"owner": {"reputation": 51, "user_id": 3521664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131aa7f520dfa191235988c9e2353ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Damian Miralles", "link": "https://stackoverflow.com/users/3521664/damian-miralles"}, "edited": false, "score": 0, "creation_date": 1461189218, "post_id": 36748546, "comment_id": 61091894, "body": "Hi all, I just edited my previous question to add the information requested."}, {"owner": {"reputation": 5768, "user_id": 3088572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/769f723b0fd6eb8c99d5f65b39392b18?s=128&d=identicon&r=PG&f=1", "display_name": "alvits", "link": "https://stackoverflow.com/users/3088572/alvits"}, "edited": false, "score": 0, "creation_date": 1461193514, "post_id": 36748546, "comment_id": 61093452, "body": "Can you try to turn <code>\u2013track-origins</code> on? Memcheck will be slower, but will report more accurately."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 3521664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131aa7f520dfa191235988c9e2353ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Damian Miralles", "link": "https://stackoverflow.com/users/3521664/damian-miralles"}, "is_accepted": false, "score": 2, "last_activity_date": 1461336176, "creation_date": 1461336176, "answer_id": 36796832, "question_id": 36748546, "link": "https://stackoverflow.com/questions/36748546/valgrind-memcheck-conditional-jump-traces-it-back-to-brk-and-sbrk-functions/36796832#36796832", "title": "valgrind memcheck conditional jump traces it back to brk and sbrk functions", "body": "<p>I found the error in the code. My problem was that the code was being built statically and valgrind had issues with that. After I changed everything to a dynamically link process everything worked. Thanks all!!!!</p>\n"}], "owner": {"reputation": 51, "user_id": 3521664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131aa7f520dfa191235988c9e2353ca5?s=128&d=identicon&r=PG&f=1", "display_name": "Damian Miralles", "link": "https://stackoverflow.com/users/3521664/damian-miralles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461336176, "creation_date": 1461166162, "last_edit_date": 1461187985, "question_id": 36748546, "link": "https://stackoverflow.com/questions/36748546/valgrind-memcheck-conditional-jump-traces-it-back-to-brk-and-sbrk-functions", "title": "valgrind memcheck conditional jump traces it back to brk and sbrk functions", "body": "<p>I have been looking for a similar post to mine without success. I am working with a code that so far seems to be deterministic and is as of now working properly. However when running Valgrind memcheck on it I get thousands of warnings all referencing to \"conditional jump or move depends on unninitialised value\". \nWhen tracing the error, valgrind trace it back to brk and sbrk functions. I do not understand why this is happening?, and more importantly how to fix it?. Below a portion of my code.</p>\n\n<pre><code>    navSolutions-&gt;channel.satPositions = (fl64 **) calloc(3 , sizeof(fl64*));\n    ERRORCHECK(navSolutions-&gt;channel.satPositions == NULL)\n\n    navSolutions-&gt;channel.satPositionsOld = (fl64 **) calloc(3 , sizeof(fl64*));\n    ERRORCHECK(navSolutions-&gt;channel.satPositionsOld == NULL)\n</code></pre>\n\n<p>It is also relevant that a lot of these calls happen when calling free() for each of the pointers I allocate memory to.\nANy help would be great. Thanks in advance</p>\n\n<p>As part of the quick replies here is the extra information requested:\nHello all again, thanks for the quick answers. My code code is being run in Linux Mint 17.2 Cinamon  64 bit.  I am also using the following version of gcc (Ubuntu 4.8.4-2ubuntu1~14.04.1) 4.8.4  and valgrind version 3.10.1. I also tried the advice given by Nate Eldredge without success. Here are some of the valgrind ouput</p>\n\n<pre><code>==25494== Conditional jump or move depends on uninitialised value(s)\n==25494==    at 0x4669D7: _int_malloc (in /home/glonass/Documents/EclipseProjects/pyxis/bin/nav/navexe)\n==25494==    by 0x4695C5: calloc (in /home/glonass/Documents/EclipseProjects/pyxis/bin/nav/navexe)\n==25494==    by 0x40C1F5: initNavSolution (initNavSolutions.c:57)\n==25494==    by 0x401714: nav_init (nav_init.c:35)\n==25494==    by 0x40107B: main (main.c:38)\n==25494==  Uninitialised value was created\n==25494==    at 0x4BA9CC: brk (in /home/glonass/Documents/EclipseProjects/pyxis/bin/nav/navexe)\n==25494==    by 0x490C34: sbrk (in /home/glonass/Documents/EclipseProjects/pyxis/bin/nav/navexe)\n==25494==    by 0x454793: __libc_setup_tls (in /home/glonass/Documents/EclipseProjects/pyxis/bin/nav/navexe)\n==25494==    by 0x4543FD: (below main) (in /home/glonass/Documents/EclipseProjects/pyxis/bin/nav/navexe)\n</code></pre>\n\n<p>Thanks all in advance again</p>\n"}, {"tags": ["c", "pointers", "struct", "realloc"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1461166363, "post_id": 36748320, "comment_id": 61077964, "body": "You are telling the function by passing the pointer to the structure: Hey, there is some stuff located in that place in memory, go there and make any mess you want. And it does."}, {"owner": {"reputation": 2790, "user_id": 5137782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b8bQ8.jpg?s=128&g=1", "display_name": "8protons", "link": "https://stackoverflow.com/users/5137782/8protons"}, "edited": false, "score": 0, "creation_date": 1461167300, "post_id": 36748320, "comment_id": 61078720, "body": "Just to make sure, is your second parameter <code>string</code> of <code>const char *</code> supposed to be unused? It&#39;s being passed in, but I don&#39;t see any literal use of the variable <code>string</code>."}, {"owner": {"reputation": 227, "user_id": 5854333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fcc9808c59d4fe06067932f5da6f07?s=128&d=identicon&r=PG&f=1", "display_name": "Emilie", "link": "https://stackoverflow.com/users/5854333/emilie"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1461167369, "post_id": 36748320, "comment_id": 61078787, "body": "@EugeneSh. So passing in a pointer to the struct allows us to modify any of the structure&#39;s elements. That seems reasonable, thanks.  Now, why would we pass in a double pointer to the struct, as in  <code>void createNewStringHolder(stringHolder ** holder) {     (*holder) = malloc(sizeof(stringHolder)); }</code> ? Presumably we are changing the size of the memory allocated to the struct, but didn&#39;t it already have this size from its definition when it was declared in the main function? What did this change?"}, {"owner": {"reputation": 227, "user_id": 5854333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fcc9808c59d4fe06067932f5da6f07?s=128&d=identicon&r=PG&f=1", "display_name": "Emilie", "link": "https://stackoverflow.com/users/5854333/emilie"}, "reply_to_user": {"reputation": 2790, "user_id": 5137782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b8bQ8.jpg?s=128&g=1", "display_name": "8protons", "link": "https://stackoverflow.com/users/5137782/8protons"}, "edited": false, "score": 0, "creation_date": 1461167501, "post_id": 36748320, "comment_id": 61078900, "body": "@8protons I only added in the part of the function that I didn&#39;t understand in order to make my question more readable. You can see the fuller context in the link."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1461167560, "post_id": 36748320, "comment_id": 61078956, "body": "It&#39;s a double pointer, as it is intended to point to multiple strings. Each string is pointed by a single pointer, while the bunch of strings are pointed by a bunch of pointers, so you need a pointer to pointers."}, {"owner": {"reputation": 2790, "user_id": 5137782, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/b8bQ8.jpg?s=128&g=1", "display_name": "8protons", "link": "https://stackoverflow.com/users/5137782/8protons"}, "edited": false, "score": 0, "creation_date": 1461167682, "post_id": 36748320, "comment_id": 61079052, "body": "@Emilie Ah, okay, that makes sense. Next time I&#39;d suggest adding something like <code>...</code> before the final <code>}</code> delimiter of your function because folks will assume that your function ends there. If you do something like <code>void (){some code ...}</code>, than we know that there is more content but it&#39;s simply irrelevant."}, {"owner": {"reputation": 227, "user_id": 5854333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fcc9808c59d4fe06067932f5da6f07?s=128&d=identicon&r=PG&f=1", "display_name": "Emilie", "link": "https://stackoverflow.com/users/5854333/emilie"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1461171417, "post_id": 36748320, "comment_id": 61081420, "body": "@EugeneSh. Ah, ok. And because we declared a pointer to a struct, instead of a struct itself--that&#39;s why we have to dynamically allocate memory for it later, right?"}], "answers": [{"comments": [{"owner": {"reputation": 227, "user_id": 5854333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fcc9808c59d4fe06067932f5da6f07?s=128&d=identicon&r=PG&f=1", "display_name": "Emilie", "link": "https://stackoverflow.com/users/5854333/emilie"}, "edited": false, "score": 0, "creation_date": 1461229369, "post_id": 36762756, "comment_id": 61107602, "body": "Thanks for the explanations! I think the key answer here is what Eugene Sh. pointed (hah!) out. By passing in a pointer to the struct, all contents of the struct can be modified. I understand how the pointers work in these examples--my main concern was that since we used <code>realloc</code> with the double pointer, the double pointer sometimes needs to change location, so I wanted to make sure it was indeed being called by reference rather than value, so that it could be modified if necessary. Eugene Sh. confirmed that it was, since we were passing in a pointer to the struct. Thanks again!"}], "tags": [], "owner": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "is_accepted": true, "score": 1, "last_activity_date": 1461235509, "last_edit_date": 1461235509, "creation_date": 1461223985, "answer_id": 36762756, "question_id": 36748320, "link": "https://stackoverflow.com/questions/36748320/re-struct-array-with-varying-size-structs-clarification/36762756#36762756", "title": "Re: Struct Array with Varying Size Structs--Clarification", "body": "<blockquote>\n  <p>Can the double pointer <code>strings</code> really be modified in this function?</p>\n</blockquote>\n\n<p>Shortly, yes.</p>\n\n<p>To elaborate:</p>\n\n<p>A pointer in C is just a location in the memory, when you pass it to a function you simply tell the function where to preform its operation.</p>\n\n<p>By passing in a pointer to the struct, we are calling all of its elements by reference, and thus we can modify any of its elements, including the double pointer <code>strings</code>.</p>\n\n<p>Say we have a pointer to your struct <code>stringHolder* h_ptr</code> where:</p>\n\n<pre><code>typedef struct {\n   int numberOfStrings;\n   char ** strings;\n}stringHolder;\n</code></pre>\n\n<p>Now using <code>*</code> to dereference the pointer(s) you can access every level:</p>\n\n<pre><code>h_ptr /*some adress in memory*/\n*h_ptr /*the value stored in said adress (we know its a stringHolder)*/\n</code></pre>\n\n<p>using the syntax <code>x-&gt;y</code> instead of <code>(*x).y</code> for readability</p>\n\n<pre><code>h_ptr-&gt;numberOfStrings /*the integer value stored in this struct*/\nh_ptr-&gt;strings /*a pointer to an array of C string pointers*/\n*(h_ptr-&gt;strings) /*the first \"string\" in said array, same as saying\n                    a pointer to the first char in the first \"string\"*/\n**(h_ptr-&gt;strings) /*the first char of the first \"string\"*/\n</code></pre>\n\n<p>And with pointer arithmetic we can get wherever we want and modify the values (as long as we keep the C convention of null terminated strings)</p>\n\n<pre><code>*(h_ptr-&gt;strings + 1) /*the second \"string\" in strings array*/\n*(*(h_ptr-&gt;strings + 2) + 4) /*the fifth char in the third \"string\"*/\n</code></pre>\n\n<p>and so on.</p>\n"}], "owner": {"reputation": 227, "user_id": 5854333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34fcc9808c59d4fe06067932f5da6f07?s=128&d=identicon&r=PG&f=1", "display_name": "Emilie", "link": "https://stackoverflow.com/users/5854333/emilie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 36762756, "answer_count": 1, "score": 2, "last_activity_date": 1461235509, "creation_date": 1461165611, "last_edit_date": 1495542352, "question_id": 36748320, "link": "https://stackoverflow.com/questions/36748320/re-struct-array-with-varying-size-structs-clarification", "title": "Re: Struct Array with Varying Size Structs--Clarification", "body": "<p>I have a question regarding one of the solutions that was posted--the accepted one on this thread:\n<a href=\"https://stackoverflow.com/a/4982586/5854333\">https://stackoverflow.com/a/4982586/5854333</a> .</p>\n\n<p>I would have left a comment on it instead of starting a new question thread, but I do not currently have the experience necessary. The program indeed runs as promised and is similar to what I intend to actually implement, but I'm still confused as to whether there may be subtle memory issues in it.</p>\n\n<p>For example, in the portion:</p>\n\n<pre><code>void addStringToHolder(stringHolder * holder, const char * string) {\n    char ** newStrings = realloc(holder-&gt;strings, newStringCount * sizeof(char *));\n    if (newStrings != NULL) {\n        holder-&gt;strings = newStrings;\n    }\n}\n</code></pre>\n\n<p>(we are working in this function with the struct)</p>\n\n<pre><code>typedef struct {\n    int numberOfStrings;\n    char ** strings;\n}stringHolder;\n</code></pre>\n\n<p><strong>Can the double pointer <code>strings</code> really be modified in this function?</strong> I thought we always had to pass in a pointer to the thing we wanted to modify, rather than the thing itself. Wouldn't we have to pass in a triple pointer if we wanted to modify the double pointer?</p>\n\n<p>Of course we are also passing in a pointer to the struct in the first place, so does that make this work? I think I'm getting lost in all of these pointers. A little clarity would be helpful. Hopefully understanding this case will allow me to understand the others.</p>\n"}, {"tags": ["c", "windows", "c-strings"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1461165151, "post_id": 36748069, "comment_id": 61077039, "body": "<code>scanf(&quot;%c&quot;, s);</code> --&gt; <code>scanf(&quot;%c&quot;, &amp;s);</code>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1461165179, "post_id": 36748069, "comment_id": 61077058, "body": "Wait...stop...really? a <i>string</i> in a <code>char</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1564831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DTnx.jpg?s=128&g=1", "display_name": "theweeknd", "link": "https://stackoverflow.com/users/1564831/theweeknd"}, "edited": false, "score": 0, "creation_date": 1461259971, "post_id": 36748473, "comment_id": 61130005, "body": "Thank you !  Can you tell me what exactly is happening here  int len = strlen(s);  for (i = 0; i &lt; len; i++)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 11, "user_id": 1564831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DTnx.jpg?s=128&g=1", "display_name": "theweeknd", "link": "https://stackoverflow.com/users/1564831/theweeknd"}, "edited": false, "score": 0, "creation_date": 1461273715, "post_id": 36748473, "comment_id": 61137768, "body": "@theweeknd Hint: if <code>s</code> contains a string of length 10000, how many times will <code>strlen</code> be called with your code ? And how many times will it be called with my code ?"}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1461165951, "creation_date": 1461165951, "answer_id": 36748473, "question_id": 36748069, "link": "https://stackoverflow.com/questions/36748069/having-problems-with-strings-program-crashing/36748473#36748473", "title": "Having problems with strings, program crashing", "body": "<p>There are multiple issues:</p>\n\n<p>You want this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{    \n  char s[100];     // array of 100 chars\n\n  printf(\"Enter name\\n\");\n  scanf(\"%s\", s);  // read name from user into s array\n\n  int i;\n  for (i = 0; i &lt; strlen(s); i++)\n    printf(\"%c\", s[i]);    \n\n  return 0;\n}\n</code></pre>\n\n<p>Advanced topic:</p>\n\n<p>This line:</p>\n\n<pre><code>for (i = 0; i &lt; strlen(s); i++)\n</code></pre>\n\n<p>although correct, is inefficient.</p>\n\n<p>Following code is better:</p>\n\n<pre><code>int len = strlen(s);\n\nfor (i = 0; i &lt; len; i++)\n</code></pre>\n\n<p>Finding out why is left as an exercise to the reader.</p>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 6105692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b319f39af45a42f5f38962b6869c335?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/6105692/foo"}, "is_accepted": false, "score": 0, "last_activity_date": 1461166025, "creation_date": 1461166025, "answer_id": 36748494, "question_id": 36748069, "link": "https://stackoverflow.com/questions/36748069/having-problems-with-strings-program-crashing/36748494#36748494", "title": "Having problems with strings, program crashing", "body": "<p>You have several issues in your program. First you have only allocated memory for a single <code>char</code>, but you want to store a name into it (which consists of multiple <code>chars</code>).</p>\n\n<p>Furthermore, you have multiple syntax errors such as <code>;</code> after the for loop and a misplaced <code>\"</code> in the <code>printf</code> call.</p>\n\n<p>If I understood it correctly you are looking for something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n  char s[200];\n\n  printf(\"Enter name\\n\");\n  scanf(\"%s\", &amp;s);\n\n  int i;\n  for (i = 0; i &lt; strlen(s); i++)\n    printf(\"%c\\n\", s[i]);\n\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461167601, "post_id": 36748674, "comment_id": 61078987, "body": "Thanks - hope this looks better"}], "tags": [], "owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "is_accepted": false, "score": 0, "last_activity_date": 1461167528, "last_edit_date": 1461167528, "creation_date": 1461166528, "answer_id": 36748674, "question_id": 36748069, "link": "https://stackoverflow.com/questions/36748069/having-problems-with-strings-program-crashing/36748674#36748674", "title": "Having problems with strings, program crashing", "body": "<p>A way to do it, with explanations in comments:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{\n  char s[] = {\"\\0\"}; //s should be a char array type, it needs explicit size or initialization\n  printf(\"Enter name\\n\");\n  scanf(\"%s\", s);    //format specifier must match data type\n  int len = strlen(s);\n  for( int i = 0; i &lt; len; i++)\n      printf(\"%c\\n\", s[i]);//format specifier must match data type\n  return 0;\n}\n</code></pre>\n\n<p>Hope this can help.</p>\n"}], "owner": {"reputation": 11, "user_id": 1564831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7DTnx.jpg?s=128&g=1", "display_name": "theweeknd", "link": "https://stackoverflow.com/users/1564831/theweeknd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1461168340, "creation_date": 1461165076, "last_edit_date": 1461168340, "question_id": 36748069, "link": "https://stackoverflow.com/questions/36748069/having-problems-with-strings-program-crashing", "title": "Having problems with strings, program crashing", "body": "<p>I am a newbie trying to learn calling <code>strings</code>. So here is a program I wrote and I'm trying to achieve a program that displays all characters of a name one per line. This program compiles successfully but after entering the name, the program crashes. Can anyone tell me what I'm doing wrong ? Thanks very much !</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void)\n{    \n  char s;\n\n  printf(\"Enter name\\n\");\n  scanf(\"%c\", s);\n\n  int i;\n  for( i = 0; i &lt; strlen(s); i++);\n  printf(\"%c, s[i]\");\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1461164659, "post_id": 36747814, "comment_id": 61076639, "body": "<code>cal-&gt;*priority_array</code>???"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1461164812, "post_id": 36747814, "comment_id": 61076768, "body": "Why is it a double pointer? What is the memory layout that you want to address with it?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461164964, "post_id": 36747814, "comment_id": 61076899, "body": "You &quot;cannot dereference priority_array to set it to its second pointer&quot; because <code>priority_array</code> is uninitialised."}], "answers": [{"comments": [{"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1461165620, "post_id": 36748037, "comment_id": 61077388, "body": "Or, using the object itself rather than the type, <code>cal-&gt;priority_array = calloc(max_priority + 1, sizeof *cal-&gt;priority_array);</code>"}], "tags": [], "owner": {"reputation": 608, "user_id": 4462877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e40ef77dcc62d93436a2a5ded444e517?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Li", "link": "https://stackoverflow.com/users/4462877/mohammed-li"}, "is_accepted": true, "score": 1, "last_activity_date": 1461165380, "last_edit_date": 1461165380, "creation_date": 1461164993, "answer_id": 36748037, "question_id": 36747814, "link": "https://stackoverflow.com/questions/36747814/setting-a-double-pointer-with-a-calloc/36748037#36748037", "title": "Setting a double pointer with a calloc", "body": "<p>Try </p>\n\n<pre><code>cal-&gt;priority_array = calloc(max_priority + 1, sizeof(Task *));\n</code></pre>\n\n<p>That is assuming you allocated cal and set max_priority. The example code is a bit lacking.</p>\n"}], "owner": {"reputation": 43, "user_id": 4439028, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1645527815675357/picture?type=large", "display_name": "Wolf_t", "link": "https://stackoverflow.com/users/4439028/wolf-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 36748037, "answer_count": 1, "score": 0, "last_activity_date": 1461165380, "creation_date": 1461164493, "question_id": 36747814, "link": "https://stackoverflow.com/questions/36747814/setting-a-double-pointer-with-a-calloc", "title": "Setting a double pointer with a calloc", "body": "<p>I am initializing a the Calendar structure blow, but I am having trouble initializing the priority_array.</p>\n\n<pre><code>typedef struct task {\n   const char *name;\n   const char *description;\n   struct task *next_task;\n} Task;\ntypedef struct {\n   Task **priority_array;\n   int max_priority;\n} Calendar;\n</code></pre>\n\n<p>I try to initialize it by doing so </p>\n\n<pre><code>cal-&gt;*priority_array = calloc(max_priority + 1, sizeof(Task));\n</code></pre>\n\n<p>However, I get  </p>\n\n<pre><code>error: incompatible types when assigning to type 'Task' from type 'void *'\n</code></pre>\n\n<p>If I remove the '*', then I can compile correctly, but priority_task would just be a single pointer.</p>\n\n<p>Why is it that I cannot dereference priority_array to set it to its second pointer</p>\n"}, {"tags": ["c", "sdl", "keyevent"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461164596, "post_id": 36747546, "comment_id": 61076590, "body": "Look as though you are getting the results from auto-repeat events. <code>SDL_GetKeyboardState</code> took me about 5 seconds to google &quot;sdl key status&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 3087555, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fe453dd9d1b38e7fcc19dc5f71e3cc4a?s=128&d=identicon&r=PG&f=1", "display_name": "ZeppRock", "link": "https://stackoverflow.com/users/3087555/zepprock"}, "is_accepted": true, "score": 0, "last_activity_date": 1461323252, "creation_date": 1461323252, "answer_id": 36792183, "question_id": 36747546, "link": "https://stackoverflow.com/questions/36747546/sdl-getting-continuously-key-pressing/36792183#36792183", "title": "sdl getting continuously key pressing", "body": "<p>The first thing i did was i wanted to remove the small delay and get the movement of the paddle smoother. I introduced 2 new global bool variables to keep track on which key that was pressed down.</p>\n\n<pre><code>bool key_up = false;\nbool key_down = false;\n</code></pre>\n\n<p>I initiate them with the value false because no key is currently pressed. </p>\n\n<p>In my switch I set the value for these boolean variables to match what is currently pressed down.</p>\n\n<pre><code>        if(event.type == SDL_KEYDOWN)\n        { \n            switch (event.key.keysym.sym)   \n            {\n\n            case SDLK_DOWN:\n                key_up = true;\n                key_down = false;\n                break;\n\n            case SDLK_UP:\n                key_down = true;\n                key_up = false;\n                break;\n\n            default:\n\n                break;\n            }\n        }\n</code></pre>\n\n<p>Then in the first while-loop i make two if-cases for the two keys that can be pressed and call the movement function in these if-cases.</p>\n\n<pre><code>    if (key_up)\n        move_paddle(UP);\n    else if (key_down)\n        move_paddle(DOWN); \n</code></pre>\n\n<p>When i did this the delay disappeared and the paddle movement was smooth but it also generated another probelm, the paddle could not stay still in one place (except the boundraries). I then realised that the code is only looking for a key that is pressed down and does not react to a key that is released.</p>\n\n<p>I then figured out that if a key is released (in this case the UP key or the DOWN key) the two boolean values had to be set to false because no key was pressed down. </p>\n\n<p>What I did was that I made another if-statement after the <code>if(event.type == SDL_KEYDOWN)</code> that would disable the movement of the paddle if no key was pressed down. </p>\n\n<pre><code>        if (event.type == SDL_KEYUP)\n        {\n            key_down = false;\n            key_up = false;\n        }\n</code></pre>\n\n<p>When I implemented all of this in my code the game worked like a charm.</p>\n\n<p>For those who are interested, here is my new final code:</p>\n\n<pre><code>int gameloop()\n{\nSDL_Event event;\nbool running = true;\nbool key_up = false;\nbool key_down = false;\n\nwhile (running)\n{\n    while (SDL_PollEvent(&amp;event))\n    {\n        //update the game\n        if (event.type == SDL_QUIT)\n        {\n            quit_game();\n            running = false;\n        }\n\n        if(event.type == SDL_KEYDOWN)\n        { \n            switch (event.key.keysym.sym)   \n            {\n\n            case SDLK_DOWN:\n                key_up = true;\n                key_down = false;\n                break;\n\n            case SDLK_UP:\n                key_down = true;\n                key_up = false;\n                break;\n\n            default:\n\n                break;\n            }\n        }\n\n        if (event.type == SDL_KEYUP)\n        {\n            key_down = false;\n            key_up = false;\n        }\n    }\n    if (key_up)\n        move_paddle(UP);\n    else if (key_down)\n        move_paddle(DOWN);\n\n    move_ball();\n    ai_paddle_move();\n    draw_game();\n    printf(\"Player: %d   |   AI: %d\\n\", player, ai);\n    SDL_Delay(15);\n}\n\nreturn 1;\n} \n</code></pre>\n"}], "owner": {"reputation": 848, "user_id": 3087555, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fe453dd9d1b38e7fcc19dc5f71e3cc4a?s=128&d=identicon&r=PG&f=1", "display_name": "ZeppRock", "link": "https://stackoverflow.com/users/3087555/zepprock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 1, "accepted_answer_id": 36792183, "answer_count": 1, "score": 0, "last_activity_date": 1461323252, "creation_date": 1461163834, "question_id": 36747546, "link": "https://stackoverflow.com/questions/36747546/sdl-getting-continuously-key-pressing", "title": "sdl getting continuously key pressing", "body": "<p>I am currently programming a simple game in SDL (PONG clone) where i must have a continuously key pressing.</p>\n\n<p>The problem I have is that when i press a button it reacts, waits a short period and then continues to continuously key pressing. </p>\n\n<p>I wonder how i get that little delay to go away.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>while (running)\n{\n    while (SDL_PollEvent(&amp;event))\n    {\n        //update the game\n        if (event.type == SDL_QUIT)\n        {\n            quit_game();\n            running = false;\n        }\n\n        if(event.type == SDL_KEYDOWN)\n        { \n            switch (event.key.keysym.sym)   \n            {\n\n            case SDLK_DOWN:\n                move_paddle(UP);\n                break;\n\n            case SDLK_UP:\n                move_paddle(DOWN);\n                break;\n\n            default:\n\n                break;\n            }\n        }   \n    }\n    draw_game();\n    move_ball();\n    SDL_Delay(15);\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "nano"], "comments": [{"owner": {"reputation": 1721, "user_id": 4077900, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ouNmD.jpg?s=128&g=1", "display_name": "anukul", "link": "https://stackoverflow.com/users/4077900/anukul"}, "edited": false, "score": 1, "creation_date": 1461163709, "post_id": 36747425, "comment_id": 61075846, "body": "what? does your code compile? O.o"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1461164282, "post_id": 36747425, "comment_id": 61076311, "body": "&quot;With ping it works normally but...&quot; what did the ping code look like? Standard C and C++, or even generally available Linux headers I know of don&#39;t have ping or ping6 C library functions"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461164354, "post_id": 36747425, "comment_id": 61076368, "body": "Have you considered building a string and using that as the argument for <code>system()</code>?"}, {"owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "edited": false, "score": 0, "creation_date": 1461164683, "post_id": 36747425, "comment_id": 61076659, "body": "If he wants to do &quot;the goal is to retrieve roundtime information about the ping&quot; I don&#39;t think system is enough, he would want the output? popen perhaps if not using additional libraries"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1461165691, "post_id": 36747425, "comment_id": 61077447, "body": "may be better off writing a shell script?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461166336, "post_id": 36747425, "comment_id": 61077943, "body": "the posted code fails to compile!!   so your first consideration is fixing the compile problems.  then post the updated code (as additional text).  Suggest using the following to compile: <code>gcc -c -Wall -Wextra -pedantic -Wconversion -std=gnu99 myfile.c -o myfile.o</code>  then you will see such messages as: <code>main()</code> needs a return type of <code>int</code>, unknown type name: <code>ping6</code>,   Suggest using the function: <code>system()</code> to run the <code>ping6</code> command in a shell."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461166450, "post_id": 36747425, "comment_id": 61078027, "body": "Note: the <code>for()</code> code block only includes the first call to <code>printf()</code>  you probably want to use braces &#39;{&#39; and &#39;}&#39; so the call to ping6 is also repeated"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461166483, "post_id": 36747425, "comment_id": 61078049, "body": "Please use consistent indenting.   indenting has no effect on the compile/running of the program.  However, it makes it massively easier for humans (you and I) to read/understand"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461166683, "post_id": 36747425, "comment_id": 61078206, "body": "you might want to read the man page for <code>ping6</code>  especially the statement: <i>ping6  is  IPv6  version  of  ping,  and can also send Node Information        Queries (RFC4620).  Intermediate hops may not be allowed, because  IPv6  source routing was deprecated (RFC5095).</i>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461166784, "post_id": 36747425, "comment_id": 61078268, "body": "when using <code>system()</code>, the output can be re-directed to a file and the code then open/read that file to get the output."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461166978, "post_id": 36747425, "comment_id": 61078438, "body": "the think the <code>ipv6</code> addressing does not support an address that contains: <code>i%nstack</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1461167863, "post_id": 36749074, "comment_id": 61079176, "body": "if you modify the above code to use something like <code>sprintf()</code> to create the desired string for the ipv6 address, (along with the rest of the string to pass to <code>system()</code>) then it might actually be able to find some host."}, {"owner": {"reputation": 1, "user_id": 6230878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8965a361be115ca6b19a7b4c45d3d779?s=128&d=identicon&r=PG&f=1", "display_name": "Fred ", "link": "https://stackoverflow.com/users/6230878/fred"}, "edited": false, "score": 0, "creation_date": 1461316664, "post_id": 36749074, "comment_id": 61154324, "body": "THank you for your comment about the system() , actually what improved is that now ping6 works but the problem is he s giving unknown host because of the i integer which he is not understanding as part of the command line . I will explqin myself when I ping exemple system( &quot;ping6  fe80::acbd:ff:fe00:2%nstack -c 2&quot; ) it works but when i replace 2 by i it doesnt. i think its a simple concept I am missing could you help ?"}], "tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 2, "last_activity_date": 1461363026, "last_edit_date": 1461363026, "creation_date": 1461167460, "answer_id": 36749074, "question_id": 36747425, "link": "https://stackoverflow.com/questions/36747425/ping-6-program-in-nano-linux-using-c-programming/36749074#36749074", "title": "Ping 6 program in nano linux using c programming", "body": "<p>the posted code contains several problems:</p>\n\n<p>Most of those problems are covered in the question comments.</p>\n\n<p>The following code compiles cleanly and performs the desired function</p>\n\n<pre><code>#include &lt;stdio.h&gt;  // printf()\n#include &lt;stdlib.h&gt; // system()\n\nint main( void )\n{\n    int i;\n\n    for (i=0; i&lt;9; i++)\n    {\n        printf(\"pinging device number:%d\\n\",i);\n        system( \"ping6  fe80::acbd:ff:fe00:i%nstack -c 2\" );\n    }\n    printf(\" \\n Done\\n\");\n}\n</code></pre>\n\n<p>the output from the above code is:</p>\n\n<pre><code>pinging device number:0\nunknown host\npinging device number:1\nunknown host\npinging device number:2\nunknown host\npinging device number:3\nunknown host\npinging device number:4\nunknown host\npinging device number:5\nunknown host\npinging device number:6\nunknown host\npinging device number:7\nunknown host\npinging device number:8\nunknown host\n\n Done\n</code></pre>\n\n<p>You may be able to reach a valid host from your network.</p>\n\n<p>However, remember the excerpt from the man page about not being able to perform routing.</p>\n\n<p>(edit) the following code cleanly compiles and uses <code>sprintf()</code></p>\n\n<p>However, I find nothing that supports the 6th address <code>:1%nstack</code> parameter!  I would expect to only see the device number, not the text: <code>%nstack</code> what am I missing?</p>\n\n<pre><code>#include &lt;stdio.h&gt;  // printf(), sprintf()\n#include &lt;stdlib.h&gt; // system()\n\nint main( void )\n{\n    int i;\n\n    char pingCmd[100] = {'\\0'};\n\n    for (i=0; i&lt;9; i++)\n    {\n        printf(\"\\npinging device number:%d\\n\",i);\n        //system( \"ping6  fe80::acbd:ff:fe00:i%nstack -c 2\" );\n        sprintf( pingCmd, \"%s%d%s\", \"ping6  -c 2 fe80::acbd:ff:fe00:\", i, \"%nstack\");\n        printf( \"%s\\n\", pingCmd);\n        system( pingCmd );\n    }\n    printf(\" \\n Done\\n\");\n}\n</code></pre>\n\n<p>the output from the above is:</p>\n\n<pre><code>pinging device number:0\nping6  -c 2 fe80::acbd:ff:fe00:0%nstack\nunknown host\n\npinging device number:1\nping6  -c 2 fe80::acbd:ff:fe00:1%nstack\nunknown host\n\npinging device number:2\nping6  -c 2 fe80::acbd:ff:fe00:2%nstack\nunknown host\n\npinging device number:3\nping6  -c 2 fe80::acbd:ff:fe00:3%nstack\nunknown host\n\npinging device number:4\nping6  -c 2 fe80::acbd:ff:fe00:4%nstack\nunknown host\n\npinging device number:5\nping6  -c 2 fe80::acbd:ff:fe00:5%nstack\nunknown host\n\npinging device number:6\nping6  -c 2 fe80::acbd:ff:fe00:6%nstack\nunknown host\n\npinging device number:7\nping6  -c 2 fe80::acbd:ff:fe00:7%nstack\nunknown host\n\npinging device number:8\nping6  -c 2 fe80::acbd:ff:fe00:8%nstack\nunknown host\n\n Done\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6230878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8965a361be115ca6b19a7b4c45d3d779?s=128&d=identicon&r=PG&f=1", "display_name": "Fred ", "link": "https://stackoverflow.com/users/6230878/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1461363026, "creation_date": 1461163563, "last_edit_date": 1461203100, "question_id": 36747425, "link": "https://stackoverflow.com/questions/36747425/ping-6-program-in-nano-linux-using-c-programming", "title": "Ping 6 program in nano linux using c programming", "body": "<p>I am trying to write a program in C language using the nano ceditor in linux(ubuntu) in order to ping many devices at the same time, the goal is to retrieve roundtime information about the ping. \nThe program looks like this : </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nmain()\n{\n   int i;\n   for (i=0; i&lt;9; i++)\n      printf(\"pinging device number:%d\",i);\n        ping6  fe80::acbd:ff:fe00:i%nstack -c 2\n                printf(\" \\n Done\");\n\n}\n</code></pre>\n\n<p>With ping it works normally but im using ipv6 and it doesnt work. \nNote: if i do the ping6 command alone it works its just when im putting it in my program \nThank you </p>\n"}, {"tags": ["java", "c", "struct", "structure", "jna"], "comments": [{"owner": {"reputation": 9289, "user_id": 17175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a89d4cf026c5eb3af2b3fdea1925723?s=128&d=identicon&r=PG", "display_name": "technomage", "link": "https://stackoverflow.com/users/17175/technomage"}, "edited": false, "score": 0, "creation_date": 1461186619, "post_id": 36747228, "comment_id": 61090698, "body": "<code>pCWndBeamHandler</code> should be <code>Pointer</code>, not <code>PointerByReference</code>.  You should also add a <code>Pointer</code>-based constructor for each <code>Structure</code> which calls <code>Structure.read()</code> after <code>super()</code> (not critical, but avoids unnecessary extra memory allocations)."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 4901819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0544159232e11c4f188a1c09cce4a94b?s=128&d=identicon&r=PG&f=1", "display_name": "jakson", "link": "https://stackoverflow.com/users/4901819/jakson"}, "edited": false, "score": 0, "creation_date": 1461338656, "post_id": 36750665, "comment_id": 61169683, "body": "Thanks, now it works perfectly. There were two issues: lack of &quot;.ByReference&quot; and bad (default) data alignment in structures.  I had to change MONITOR into MONITOR.ByReference and super() into super(ALIGN_NONE).  ALIGN_NONE set no alignment on structures, place all fields on nearest 1-byte boundary."}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "reply_to_user": {"reputation": 175, "user_id": 4901819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0544159232e11c4f188a1c09cce4a94b?s=128&d=identicon&r=PG&f=1", "display_name": "jakson", "link": "https://stackoverflow.com/users/4901819/jakson"}, "edited": false, "score": 0, "creation_date": 1461349080, "post_id": 36750665, "comment_id": 61175533, "body": "There is nothing in the C++ code that indicates that it&#39;s using 8bit packing; but glad that it&#39;s working for you. Altered packing rules like this are quite uncommon - there&#39;s nothing in the mentioned C++ interface that indicates that this is the case."}, {"owner": {"reputation": 175, "user_id": 4901819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0544159232e11c4f188a1c09cce4a94b?s=128&d=identicon&r=PG&f=1", "display_name": "jakson", "link": "https://stackoverflow.com/users/4901819/jakson"}, "edited": false, "score": 0, "creation_date": 1461402272, "post_id": 36750665, "comment_id": 61190620, "body": "I don&#39;t have C/C++ source code - I have only *.dll and *.h files, but it looks like Elo Touch Solutions developers use 1-byte aligned for their touchscreen crappy API."}, {"owner": {"reputation": 175, "user_id": 4901819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0544159232e11c4f188a1c09cce4a94b?s=128&d=identicon&r=PG&f=1", "display_name": "jakson", "link": "https://stackoverflow.com/users/4901819/jakson"}, "edited": false, "score": 0, "creation_date": 1461568012, "post_id": 36750665, "comment_id": 61238549, "body": "BTW: Is there any way to set global memory byte alignment for all data structures in JNA library (*.dll Java wrapper)? Currently I&#39;m doing this in very clumsy way - I&#39;m setting data alignment (super(ALIGN_NONE)) in each and every structure (a lot of structures in separate files). <a href=\"http://stackoverflow.com/questions/36809144/how-to-set-global-memory-byte-alignment-for-all-structures-in-jna-library\" title=\"how to set global memory byte alignment for all structures in jna library\">stackoverflow.com/questions/36809144/&hellip;</a>"}], "tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": false, "score": 2, "last_activity_date": 1461172148, "creation_date": 1461172148, "answer_id": 36750665, "question_id": 36747228, "link": "https://stackoverflow.com/questions/36747228/c-struct-to-java-jna-structure-pointer-to-struct/36750665#36750665", "title": "C struct to Java JNA Structure (pointer to struct)", "body": "<p>You're so very close to right.</p>\n\n<p>in the SCREEN class in java, you need to define <code>pMonitor</code> as:</p>\n\n<pre><code>    public MONITOR.ByReference pMonitor;\n</code></pre>\n\n<p>This is <a href=\"https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#when-should-i-use-structurebyreference-structurebyvalue-structure\" rel=\"nofollow\">per the FAQ</a>.</p>\n\n<blockquote>\n  <p>When should I use Structure.ByReference? Structure.ByValue? Structure[]?  </p>\n</blockquote>\n\n<pre><code>typedef struct _outerstruct2 {\n  simplestruct *byref; // use Structure.ByReference\n} outerstruct2;  \n</code></pre>\n\n<p>As an addendum:</p>\n\n<blockquote>\n  <p>When I stubbed this up using a mingw compiled <code>dll</code>, I had to inherit from <code>StdCallLibrary</code> and not <code>Library</code> - this may not be the case for you, I'm just mentioning this as it affected my testing.</p>\n</blockquote>\n"}], "owner": {"reputation": 175, "user_id": 4901819, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0544159232e11c4f188a1c09cce4a94b?s=128&d=identicon&r=PG&f=1", "display_name": "jakson", "link": "https://stackoverflow.com/users/4901819/jakson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7890, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1461599535, "creation_date": 1461163068, "last_edit_date": 1461599535, "question_id": 36747228, "link": "https://stackoverflow.com/questions/36747228/c-struct-to-java-jna-structure-pointer-to-struct", "title": "C struct to Java JNA Structure (pointer to struct)", "body": "<p>I have problem with JNA Structure based on C/C++ struct. Fields nScreenIndex, uVendorID, uProductID, uVersionNumber looks OK, but after them I see odd bytes. My main and only goal is to \"extract\" pMonitor fields.\nAre <strong>pMonitor</strong> declaration and <strong>MONITOR</strong> implementation correct?</p>\n\n<p>C/C++ origin:</p>\n\n<pre><code>SCREEN* EloGetScreenByIndex (int nScreenIndex);\n\ntypedef struct SCREEN_TAG\n{\n    int               nScreenIndex;\n    USHORT            uVendorID;     \n    USHORT            uProductID;    \n    USHORT            uVersionNumber;\n    wchar_t           szDevicePath [MAX_PATH];\n    HANDLE            hCalTouchThread;\n    MONITOR*          pMonitor;\n    LPVOID            pCWndBeamHandler;\n    BOOL              bIrBeams;\n} SCREEN;\n\ntypedef struct MONITORS_TAG\n{\n    int     elo_mon_num;\n    int     x;\n    int     y;\n    int     width;\n    int     height;\n    DWORD   orientation;\n    bool    is_primary;\n} MONITOR;\n</code></pre>\n\n<p>and Java/JNA code:</p>\n\n<pre><code>SCREEN EloGetScreenByIndex(int nScreenIndex);\n\npublic class SCREEN extends Structure {\n    public int nScreenIndex;\n    public short uVendorID;\n    public short uProductID;\n    public short uVersionNumber;\n    public char[] szDevicePath = new char[WinDef.MAX_PATH];\n    public WinNT.HANDLE hCalTouchThread;\n    public MONITOR pMonitor;\n    public PointerByReference pCWndBeamHandler;\n    public boolean bIrBeams;\n    ...\n}\n\npublic class MONITOR extends Structure {\n    public int elo_mon_num;\n    public int x;\n    public int y;\n    public int width;\n    public int height;\n    public int orientation;\n    public byte is_primary;\n\n    public MONITOR() {\n        super();\n    }\n\n    @Override\n    protected List&lt;? &gt; getFieldOrder() {\n        return Arrays.asList(\"elo_mon_num\", \"x\", \"y\", \"width\", \"height\", \"orientation\", \"is_primary\");\n    }\n\n    public MONITOR(Pointer peer) {\n        super(peer);\n    }\n\n    public static class ByReference extends MONITOR implements Structure.ByReference {\n    };\n\n    public static class ByValue extends MONITOR implements Structure.ByValue {\n    };\n}\n</code></pre>\n"}, {"tags": ["c", "tdd", "keil", "armcc"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1461163271, "post_id": 36747216, "comment_id": 61075488, "body": "I see three options: 1) run the code on the target, 2) run the code on a simulator, 3) if the code is not processor- or OS-specific, compile for your PC and run locally."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461163679, "post_id": 36747216, "comment_id": 61075824, "body": "A fourth option, which can significantly affect the way you write code from its very first line, is to keep form and function quite separate. You can then patch any system-specific functions with conditional compilation. For example, if the target requires an external device, you can simulate its input for yourself. In other words, you create your own system layer. Then the code can be ported reasonably easily to other platforms."}, {"owner": {"reputation": 81, "user_id": 5111348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8085018c13b4e8a0623f49b799d78431?s=128&d=identicon&r=PG&f=1", "display_name": "eimer", "link": "https://stackoverflow.com/users/5111348/eimer"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461221261, "post_id": 36747216, "comment_id": 61101900, "body": "Thanks you. I am having a few comments to your suggestions. 1) I don&#39;t want to test on the target. I rather prefer mocking &quot;hardware&quot; and test the logic behavior first. 2) At the moment a working simulator does not exist, at least not for my target. 3) I still can&#39;t run the code with the armcc compiler, at least not to my knowledge. The target is required. 4) Unfortunately, I have to handle a lot of legacy code, wich is untested :(  I was hopping somebody has experience on how to compile code with armcc and run the executable with gcc/g++. I will further hunt down a feasible solution for me..."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461221746, "post_id": 36747216, "comment_id": 61102228, "body": "faced with the hardware not being available until a week before delivery, I wrote my own emulators/debuggers to run on a PC. You do get to know the processor that way, but they have become more complex since then."}], "owner": {"reputation": 81, "user_id": 5111348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8085018c13b4e8a0623f49b799d78431?s=128&d=identicon&r=PG&f=1", "display_name": "eimer", "link": "https://stackoverflow.com/users/5111348/eimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461163305, "creation_date": 1461163029, "last_edit_date": 1461163305, "question_id": 36747216, "link": "https://stackoverflow.com/questions/36747216/tdd-with-armcc-keil-unconventional", "title": "TDD with armcc (Keil) - unconventional", "body": "<p>I have a rather unconventional question related to TDD and armcc (Keil).</p>\n\n<p>I understand TDD as compile -> link -> execute -> Test output.</p>\n\n<p>In my case I have to compile and link with armcc, but I can not execute the file without Keil (Simulation). I simple don't have a simulator for my device. At least there is no other way to my knowledge. You need to run the tests on your target. </p>\n\n<p>I think that is very inconvenient all in all and I am searching for a better solution. So I am thinking of compiling and linking with armcc but executing with gcc/g++ (depending on the test framework). </p>\n\n<p>Is this a viable option? To be honest I have no idea. </p>\n\n<p>I would really appreciate it if somebody could guide me to my messed perception. Any hint is more then welcome.</p>\n\n<p>I already know about \"Unity\", but still the target issue is not resolved.</p>\n"}, {"tags": ["c", "parallel-processing", "openmp"], "comments": [{"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1461166573, "post_id": 36747117, "comment_id": 61078104, "body": "Don&#39;t try and parallelize a print statement. Parallelization is inherently not ordered, so there&#39;s a very low probability that your print statements will be in the correct order. That being said, which compiler and version are you using? The syntax you used is correct, but your error makes me think that your compiler doesn&#39;t know OpenMP 3.0"}, {"owner": {"reputation": 2038, "user_id": 1046657, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ISxud.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/1046657/nasser"}, "reply_to_user": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1461167540, "post_id": 36747117, "comment_id": 61078937, "body": "@NoseKnowsAll How can I prevent parallelizing the print statement?"}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "edited": false, "score": 0, "creation_date": 1461168232, "post_id": 36747117, "comment_id": 61079412, "body": "Remove the <code>#pragma statement</code> and just print it on one thread.... I&#39;ll repeat what I said before: Don&#39;t parallelize a print statement."}], "answers": [{"tags": [], "owner": {"reputation": 608, "user_id": 4462877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e40ef77dcc62d93436a2a5ded444e517?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammed Li", "link": "https://stackoverflow.com/users/4462877/mohammed-li"}, "is_accepted": false, "score": 0, "last_activity_date": 1461165849, "last_edit_date": 1461165849, "creation_date": 1461164085, "answer_id": 36747660, "question_id": 36747117, "link": "https://stackoverflow.com/questions/36747117/openmp-error-in-loop-collapse/36747660#36747660", "title": "OpenMP error in loop collapse", "body": "<p>If you collapse loops, the results are not necessarily ordered the way you want.\nfor example if i replace </p>\n\n<pre><code>printf(\"%d\\t\", grid[i][j]);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>printf(\"%d %d\\n\", i, j);\n</code></pre>\n\n<p>You will see why you will not get an ordered grid printed out. In general I would say that parallel terminal output is a bad idea because racing conditions. What you could parallel is the setup of your grid.</p>\n\n<p>That aside your code gives an error</p>\n\n<pre><code>fancyFileName.c:23:9: error: collapsed loops not perfectly nested before \u2018printf\u2019\n</code></pre>\n\n<p>this is pretty self explanatory. You do not close the second loop directly after the first loop and hence those two cannot be collapsed into one. Without this line, it compiles fine (gcc 4.8.5).</p>\n\n<p>Besides I am not sure about the c99 standard and omp, but in case to be sure you should make your loop indices private.</p>\n"}], "owner": {"reputation": 2038, "user_id": 1046657, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ISxud.jpg?s=128&g=1", "display_name": "Nasser", "link": "https://stackoverflow.com/users/1046657/nasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1752, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461165849, "creation_date": 1461162797, "question_id": 36747117, "link": "https://stackoverflow.com/questions/36747117/openmp-error-in-loop-collapse", "title": "OpenMP error in loop collapse", "body": "<p>In the following code, I am trying to parallelize a nested loop that prints two dimensional array. I went through tutorials and I found out that I have to used collapse clause:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;omp.h&gt;\n\nint main(){\n\n    //int i = 10;\n\n    int grid[3][3];\n\n    for (int i = 0; i &lt; 3; i++){\n        for (int j = 0; j &lt; 3; j++){\n            grid[i][j] = i+j;\n        }\n    }\n\n    int i, j;\n#pragma omp parallel for collapse(2)\n    for (i = 0; i &lt; 3; i++){\n        for (j = 0; j &lt; 3; j++){\n            printf(\"%d\\t\", grid[i][j]);\n        }\n        printf(\"\\n\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that I got an error that says <code>C3005: 'collapse' : unexpected token encountered on OpenMP 'parallel for' directive</code>.</p>\n\n<p>Note: before I used collapse, I only used <code>#pragma omp parallel for</code> which gives incorrect results:</p>\n\n<pre><code>0       1       2       4\n1\n1\n</code></pre>\n\n<p>Is collapse the right solution to produce the correct results? If so, why do I get the mentioned error?</p>\n"}, {"tags": ["c", "linux", "nm"], "answers": [{"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 6, "last_activity_date": 1461162754, "last_edit_date": 1495535549, "creation_date": 1461162754, "answer_id": 36747100, "question_id": 36746688, "link": "https://stackoverflow.com/questions/36746688/how-to-read-nm-output/36747100#36747100", "title": "How to read nm output?", "body": "<blockquote>\n  <p>... i really dont know what is in the first column, whether it is the address or size?</p>\n</blockquote>\n\n<p>My local manpage (from <code>man nm</code>) says</p>\n\n<pre><code>DESCRIPTION\n       GNU nm lists the symbols from object files objfile....  If no object files are listed as arguments, nm assumes the file a.out.\n\n       For each symbol, nm shows:\n\n       \u00b7   The symbol value, in the radix selected by options (see below), or hexadecimal by default.\n</code></pre>\n\n<p>that is, the first column is the 'value' of the symbol. To understand what that means, it's helpful to know something about ELF and the runtime linker, but in general it will simply be an offset into the relevant section.</p>\n\n<p>Understanding something about ELF will also help with the other points: <code>man elf</code> tells us that the <code>.rodata</code> section is read-only data (that is: constant values hardcoded into the program that never change. String literals might go here).</p>\n\n<p><code>.eh_frame</code> is used for exception-handling and other call-stack-frame metadata (a search for <code>eh_frame</code> has <a href=\"https://stackoverflow.com/q/26300819/212858\">this question</a> as the first hit).</p>\n"}], "owner": {"reputation": 1244, "user_id": 5771474, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d72304402b6865856d86e1ab6282163c?s=128&d=identicon&r=PG&f=1", "display_name": "Ice", "link": "https://stackoverflow.com/users/5771474/ice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13587, "favorite_count": 0, "accepted_answer_id": 36747100, "answer_count": 1, "score": 13, "last_activity_date": 1561994392, "creation_date": 1461161890, "last_edit_date": 1561994392, "question_id": 36746688, "link": "https://stackoverflow.com/questions/36746688/how-to-read-nm-output", "title": "How to read nm output?", "body": "<p>Thats my code:</p>\n\n<pre><code>int const const_global_init = 2;\nint const const_global;\nint global_init = 4;\nint global;\n\nstatic int static_global_init = 3;\nstatic int static_global;\n\nstatic int static_function(){\n    return 2;\n}\n\ndouble function_with_param(int a){\n    static int static_local_init = 3;\n    static int static_local;\n\n    return 2.2;\n}\n\nint main(){\n}\n</code></pre>\n\n<p>I generate <code>main.o</code> and i try to understood <code>nm</code> output. After i use <code>nm main.o --printfile-name -a</code> i get this output:</p>\n\n<pre><code>main.o:0000000000000000 b .bss\nmain.o:0000000000000000 n .comment\nmain.o:0000000000000004 C const_global\nmain.o:0000000000000000 R const_global_init\nmain.o:0000000000000000 d .data\nmain.o:0000000000000000 r .eh_frame\nmain.o:000000000000000b T function_with_param\nmain.o:0000000000000004 C global\nmain.o:0000000000000000 D global_init\nmain.o:0000000000000027 T main\nmain.o:0000000000000000 a main.c\nmain.o:0000000000000000 n .note.GNU-stack\nmain.o:0000000000000000 r .rodata\nmain.o:0000000000000000 t static_function\nmain.o:0000000000000000 b static_global\nmain.o:0000000000000004 d static_global_init\nmain.o:0000000000000004 b static_local.1733\nmain.o:0000000000000008 d static_local_init.1732\nmain.o:0000000000000000 t .text\n</code></pre>\n\n<p>I understood 2nd and 3rd column but, i really dont know what is in the first column, whether it is the address or size? I know somethink about <code>.bbs</code>, <code>.comment</code>, <code>.data</code> and <code>.text</code> segments but what is it <code>.eh_frame</code>, <code>.note.GNU-stack</code> and <code>.rodata</code>? </p>\n"}, {"tags": ["c", "segmentation-fault", "pointer-to-pointer"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461161531, "post_id": 36746524, "comment_id": 61074040, "body": "Where does it crash ?"}, {"owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461161601, "post_id": 36746524, "comment_id": 61074092, "body": "in the <code>fill_map</code> function."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461161631, "post_id": 36746524, "comment_id": 61074132, "body": "Show the code where you call <code>ft_create_map</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461161668, "post_id": 36746524, "comment_id": 61074163, "body": "Which environnment do you use ? Linux, gcc, Windows, Turbo C, .... ??"}, {"owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461161780, "post_id": 36746524, "comment_id": 61074268, "body": "I use <code>clang</code> and <code>gcc</code> on <code>OS X</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461161845, "post_id": 36746524, "comment_id": 61074324, "body": "Use the gdb debugger which will tell you at which line the segfault occurs."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461161911, "post_id": 36746524, "comment_id": 61074391, "body": "Please provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1461162073, "post_id": 36746524, "comment_id": 61074544, "body": "could <code>size</code> be -1 after the <code>read()</code>? I would expect <code>buf[-1] = &#39;\\0&#39;;</code> to segfault"}, {"owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "edited": false, "score": 0, "creation_date": 1461162138, "post_id": 36746524, "comment_id": 61074592, "body": "no `i don&#39;t think so, the file is valid."}, {"owner": {"reputation": 94, "user_id": 5259626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a166b664e27be1190e271d401baf6de7?s=128&d=identicon&r=PG&f=1", "display_name": "loginn", "link": "https://stackoverflow.com/users/5259626/loginn"}, "edited": false, "score": 2, "creation_date": 1461162173, "post_id": 36746524, "comment_id": 61074625, "body": "That <code>if (size &lt; 1)</code> is super weird because the next condition is never gonna happen then. Also for the love of god, stop casting malloc returns. Also why do you only ever check the first character of buf ? is <code>BUF_SIZE = 2</code> ?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 2, "creation_date": 1461162362, "post_id": 36746524, "comment_id": 61074743, "body": "You should <b><i>really</i></b> add a test for <code>size == -1</code>! This is debugging for free ... <i>sigh</i>"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461163756, "post_id": 36746524, "comment_id": 61075879, "body": "Also you want to learn how to use a debugger, then step through the code inspecting all relevant variables to see what is <i>really</i> going on."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1461164197, "post_id": 36746524, "comment_id": 61076227, "body": "What&#39;s the content of the file you are reading?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 1, "creation_date": 1461164746, "post_id": 36746524, "comment_id": 61076708, "body": "Doubt it&#39;s related to the segfault, but it looks like you have a potential memory leak. In <code>ft_create_map</code> you have <code>map[0] = malloc(sizeof(int) * nb_cols);</code> Then in <code>fill_map</code> you have <code>map[row] = malloc(sizeof(int) * (col + 1));</code> where <code>row==0</code>. So this will be a mem leak if <code>buf[0] == &#39;\\n&#39;</code>."}, {"owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1461172910, "post_id": 36746524, "comment_id": 61082285, "body": "@yano that was the problem, thanks for pointing that out. can you please write that as an answer?"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1461175063, "post_id": 36746524, "comment_id": 61083589, "body": "oh interesting,, really wouldn&#39;t have expected that to segfault heh,, but I don&#39;t know your program flow."}], "answers": [{"comments": [{"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 2, "creation_date": 1461162830, "post_id": 36747014, "comment_id": 61075155, "body": "We don&#39;t know what <code>BUF_SIZE</code> is (maybe it&#39;s 0??), but with the code provided, shouldn&#39;t <code>buf[size] = &#39;\\0&#39;;</code> only get executed if size &lt; 1? As soon as <code>&#47;&#47; return (0)</code> is uncommented out I completely agree with this."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1461162942, "post_id": 36747014, "comment_id": 61075243, "body": "@yano: Correct, adjusted my answer. However, I know those guys ... ;-)"}, {"owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "edited": false, "score": 0, "creation_date": 1461162974, "post_id": 36747014, "comment_id": 61075276, "body": "the problem is not the <code>buf[size]</code>, this doesn&#39;t have any effect, I can remove or leave it, the program will still runs."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "edited": false, "score": 0, "creation_date": 1461163013, "post_id": 36747014, "comment_id": 61075303, "body": "@Phuti: If it continues running, that&#39;s just bad luck. It still might crash two years later ... assuming it ran so long. ;-)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "reply_to_user": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "edited": false, "score": 2, "creation_date": 1461163162, "post_id": 36747014, "comment_id": 61075396, "body": "@Phuti Well, that&#39;s a dangerous game, the whole point is it&#39;s UB, so when combined with Murphy&#39;s law that means it will <i>always</i> work when you run it for yourself and <i>never</i> work during a demo for your boss/customer or the TA who&#39;s grading it."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 3, "last_activity_date": 1461162909, "last_edit_date": 1461162909, "creation_date": 1461162584, "answer_id": 36747014, "question_id": 36746524, "link": "https://stackoverflow.com/questions/36746524/reading-file-into-double-int-pointer/36747014#36747014", "title": "Reading file into double int pointer", "body": "<p>Assuming this line gets commented in </p>\n\n<pre><code> // return (0); commented out for testing\n</code></pre>\n\n<p>the moment <code>read()</code> returns <code>BUF_SIZE</code>, this line</p>\n\n<pre><code>buf[size] = '\\0';\n</code></pre>\n\n<p>writes out of <code>buf</code>'s bounds and with this invokes undefined behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "is_accepted": true, "score": 0, "last_activity_date": 1461175222, "last_edit_date": 1461175222, "creation_date": 1461164089, "answer_id": 36747662, "question_id": 36746524, "link": "https://stackoverflow.com/questions/36746524/reading-file-into-double-int-pointer/36747662#36747662", "title": "Reading file into double int pointer", "body": "<p>It looks like you have a potential memory leak. In <code>ft_create_map you have map[0] = malloc(sizeof(int) * nb_cols);</code> Then in fill_map you have <code>map[row] = malloc(sizeof(int) * (col + 1));</code> where <code>row==0</code>. So this will be a mem leak if <code>buf[0] == '\\n'</code>.</p>\n\n<p>Actually kind of surprised to hear (from the OP) that this is also causing a segfault, but maybe that would become obvious if we knew the exact program flow.</p>\n"}], "owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 36747662, "answer_count": 2, "score": -1, "last_activity_date": 1461175222, "creation_date": 1461161513, "last_edit_date": 1461173614, "question_id": 36746524, "link": "https://stackoverflow.com/questions/36746524/reading-file-into-double-int-pointer", "title": "Reading file into double int pointer", "body": "<p>I'm trying to read a file into an array but I'm getting segmentation fault, I know I'm not allocating memory correctly. What am I doing wrong here?. I'm allowed to use <code>read()</code> and <code>while</code> loop.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>my complete function, before I split in into two parts</p>\n\n<pre><code>int     **ft_create_map(char *filename, int nb_cols, int nb_rows)\n{\n    int     **map;\n    int     fd;\n    int     row;\n    int     col;\n    ssize_t size;\n    char    buf[BUF_SIZE];\n\n    row = 0;\n    size = 0;\n    col = 0;\n    map = (int **)malloc(nb_rows * sizeof(int *));\n    if (!map)\n            return (map);\n            map[0] = malloc(sizeof(int) * nb_cols);\n            fd = open(filename, O_RDONLY);\n            if (!fd)\n                    return (NULL);\n                    while ((size = read(fd, buf, BUF_SIZE)))\n                    {\n                            if (size &lt; 1)\n                                    return (NULL);\n                            buf[size] = '\\0';\n                            if (buf[0] == '\\n')\n                            {\n                                    row += 1;\n                                    col = 0;\n                                    map[row] = malloc(sizeof(int) * nb_cols);\n                            }\n                            else\n                            {\n                                    if (buf[0] == '.')\n                                            map[row][col] = 1;\n                                    else if (buf[0] == 'o')\n                                            map[row][col] = 0;\n                                    col++;\n                            }\n                    }\n    return (map);\n }\n</code></pre>\n\n<p>Here I'm trying to split the previous function into two functions, because my functions needs to have less than 25 lines of code.</p>\n\n<pre><code>void fill_map(int **map,int fd, int row, int col)\n{\n    ssize_t size;\n    char    buf[BUF_SIZE];\n\n    size = 0;\n    while ((size = read(fd, buf, BUF_SIZE)))\n    {\n        if (size &lt; 1)\n           // return (0); commented out for testing\n        buf[size] = '\\0';\n        if (buf[0] == '\\n')\n        {\n            //this was the problem, allocating memory to map[0] twice.\n            row += 1;\n            map[row] = malloc(sizeof(int) * (col + 1));\n            col = 0;\n        }\n        else\n       {\n           if (buf[0] == '.')\n              map[row][col] = 1;\n           else if (buf[0] == 'o')\n              map[row][col] = 0;\n           col++;\n       }\n    }\n }\n\n int        **ft_create_map(char *filename, int nb_cols, int nb_rows)\n {\n    int     **map;\n    int     fd;\n    int     row;\n    int     col;\n    ssize_t size;\n    // char buf[BUF_SIZE];\n\n    row = 0;\n    size = 0;\n    col = 0;\n    map = (int **)malloc(nb_rows * sizeof(int *));\n    if (!map)\n       return (map);\n    map[0] = malloc(sizeof(int) * nb_cols);\n    fd = open(filename, O_RDONLY);\n    if (!fd)\n       return (NULL);\n    fill_map(map, fd, row, col);\n    return (map);\n }\n</code></pre>\n\n<p>in my main </p>\n\n<pre><code>int cols = count_cols(argv[1]);\nint rows = count_rows(argv[1]);\nint **arr;\n// int  j;\n// int i;\n\narr = ft_create_map(argv[1], cols, rows);\nprintf_max_square(arr, rows, cols);\n</code></pre>\n\n<p><a href=\"http://ideone.com/sft2Nb\" rel=\"nofollow\">code ideone</a></p>\n"}, {"tags": ["c", "struct", "swap", "items"], "comments": [{"owner": {"reputation": 5773, "user_id": 3525545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rge03.jpg?s=128&g=1", "display_name": "Mahonri Moriancumer", "link": "https://stackoverflow.com/users/3525545/mahonri-moriancumer"}, "edited": false, "score": 0, "creation_date": 1461161492, "post_id": 36746296, "comment_id": 61073996, "body": "In swap(), the code is taking the swapping pointers, not the end int values.  Perhaps the intent is to swap the int values not the pointers?"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1461162581, "post_id": 36746296, "comment_id": 61074932, "body": "Code does not compile even if issues with <code>swap</code> are solved: <code>buffer</code> is not variable, but <code>typedef</code>. <code>buffer.items</code> is thus illegal."}], "answers": [{"tags": [], "owner": {"reputation": 905, "user_id": 2638371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uZefP.png?s=128&g=1", "display_name": "imbearr", "link": "https://stackoverflow.com/users/2638371/imbearr"}, "is_accepted": false, "score": 0, "last_activity_date": 1461161414, "creation_date": 1461161414, "answer_id": 36746472, "question_id": 36746296, "link": "https://stackoverflow.com/questions/36746296/how-to-swap-struct-elements-of-array-inside-a-struct-c/36746472#36746472", "title": "How to swap struct elements of array inside a struct - C", "body": "<p>You can swap pointers but not structs!</p>\n\n<pre><code>item item0, item1, item2, item3, item4, item5, item6, item7, item8, item9;\n\ntypedef struct {\n    item * items[10] =  { &amp;item0, &amp;item1, &amp;item2, &amp;item3, &amp;item4, &amp;item5, &amp;item6, &amp;item7, &amp;item8, &amp;item9 };\n} buffer;\n\nitem **ps = &amp;(buffer.items[0]);\nitem **p = &amp;(buffer.items[1]);\n\nswap(ps, p);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4761299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OsMy7.jpg?s=128&g=1", "display_name": "the beginner", "link": "https://stackoverflow.com/users/4761299/the-beginner"}, "edited": false, "score": 0, "creation_date": 1461163059, "post_id": 36746544, "comment_id": 61075329, "body": "if it is an array of char* why does it need to pass in a pointer to a pointer to swap the char * but not for a struct? Thanks e.g. <a href=\"http://www.geeksforgeeks.org/swap-strings-in-c/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/swap-strings-in-c</a>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 41, "user_id": 4761299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OsMy7.jpg?s=128&g=1", "display_name": "the beginner", "link": "https://stackoverflow.com/users/4761299/the-beginner"}, "edited": false, "score": 0, "creation_date": 1461163370, "post_id": 36746544, "comment_id": 61075568, "body": "@thebeginner Because then the data is a <code>char *</code>, not an <code>item</code>. You need to pass a pointer to the <i>element data type</i>, and if that data type is a pointer you pass a pointer to a pointer."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 0, "last_activity_date": 1461161548, "creation_date": 1461161548, "answer_id": 36746544, "question_id": 36746296, "link": "https://stackoverflow.com/questions/36746296/how-to-swap-struct-elements-of-array-inside-a-struct-c/36746544#36746544", "title": "How to swap struct elements of array inside a struct - C", "body": "<p>Your function only swaps the <em>pointers</em> <code>ps</code> and <code>p</code>, not the actual structures they point to. For that you need to copy the structures, something like</p>\n\n<pre><code>void swap (item* p1, item* p2) {\n   item temp = *p1;\n  *p1 = *p2;\n  *p2 = temp;\n}\n</code></pre>\n\n<p>Call as</p>\n\n<pre><code>swap(&amp;buffer.items[0], &amp;buffer.items[1]);\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4761299, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OsMy7.jpg?s=128&g=1", "display_name": "the beginner", "link": "https://stackoverflow.com/users/4761299/the-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4665, "favorite_count": 1, "accepted_answer_id": 36746544, "answer_count": 2, "score": 1, "last_activity_date": 1461161548, "creation_date": 1461161045, "question_id": 36746296, "link": "https://stackoverflow.com/questions/36746296/how-to-swap-struct-elements-of-array-inside-a-struct-c", "title": "How to swap struct elements of array inside a struct - C", "body": "<p>I have 2 structs </p>\n\n<pre><code>typedef struct {\n    int i;\n    int p;\n} item;\n\ntypedef struct {\n    item items[10];\n} buffer;\n\nvoid swap (item** p1, item** p2) {\n   item* temp = *p1;\n  *p1 = *p2;\n  *p2 = temp;\n}\n</code></pre>\n\n<p>im trying to call</p>\n\n<pre><code>    item *ps = &amp;buffer.items[0];\n    item *p = &amp;buffer.items[1];\n\n    swap(&amp;ps, &amp;p);\n</code></pre>\n\n<p>but it is not swapping them? What am I doing wrong? Thanks\nwould there be any change if the struct buffer was local in main or global?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c", "arrays", "memory", "char"], "comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1461160755, "post_id": 36746142, "comment_id": 61073336, "body": "Try declaring <code>unsigned char buffer[2]</code>."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461160768, "post_id": 36746142, "comment_id": 61073346, "body": "To print a <code>char</code>&#39;s value in hex use <code>hhx</code> or <code>hhX</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1461160783, "post_id": 36746142, "comment_id": 61073363, "body": "Your characters are indeed 1 byte; what you&#39;re seeing is called <i>sign extension</i>."}, {"owner": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1461161367, "post_id": 36746142, "comment_id": 61073904, "body": "@SteveSummit Thanks &#39;unsigned char&#39; fixed the printing. But what about question 2? Do I have to worry if I&#39;m doing fancy bitwise manipulations in my buffer like shifting?"}, {"owner": {"reputation": 1369, "user_id": 5771399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c801f6ed43d6b594cfe250a6bf05333?s=128&d=identicon&r=PG&f=1", "display_name": "v7d8dpo4", "link": "https://stackoverflow.com/users/5771399/v7d8dpo4"}, "edited": false, "score": 0, "creation_date": 1461161616, "post_id": 36746142, "comment_id": 61074116, "body": "If you don&#39;t tell printf its second argument is 1 byte, printf will assume it is 4 bytes in this case. The same code would not work on big endian environments."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1461163665, "post_id": 36746142, "comment_id": 61075817, "body": "@NimrodMorag As to question 2, a char array really is a sequence of chars, not words."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461164307, "post_id": 36746142, "comment_id": 61076334, "body": "You probably wanted to check <code>printf(&quot;%d\\n&quot;, sizeof(int));</code> without the asterisk..."}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "edited": false, "score": 0, "creation_date": 1461162379, "post_id": 36746391, "comment_id": 61074756, "body": "The <code>%hhX</code> modifier fixed the printing, thank you. Can you answer my second question about array storage?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "edited": false, "score": 0, "creation_date": 1461162827, "post_id": 36746391, "comment_id": 61075153, "body": "@NimrodMorag See my answer. The interaction between arrays, pointers and <code>sizeof()</code> is the reason why objects always need exactly <code>sizeof()</code> space."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1461169640, "post_id": 36746391, "comment_id": 61080347, "body": "Pedantic detail:  Printing a negative <code>char</code> is not well defined with <code>&quot;%X&quot;</code>.  <code>&quot;%X&quot;</code> expects an <code>unsigned</code> and with a negative <code>char</code>, C11 exemption &#167;6.5.2.2 does not apply.  The <code>&quot;hh&quot;</code> does not prevent the <i>technical</i> problem.  Yet this UB typically &quot;works&quot; as desired on <i>so many</i> platforms that it is <i>practically</i> defined..  OTOH, OP&#39;s <code>buffer[1] = 0x80;</code> is not well defined either with a signed_ <code>char</code>."}], "tags": [], "owner": {"reputation": 137011, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": false, "score": 3, "last_activity_date": 1461161237, "creation_date": 1461161237, "answer_id": 36746391, "question_id": 36746142, "link": "https://stackoverflow.com/questions/36746142/is-a-char-saved-in-memory-as-an-entire-word-with-padding/36746391#36746391", "title": "Is a char saved in memory as an entire word with padding?", "body": "<p><code>printf</code> doesn't know how large each argument is; you have to tell it, in this case using the <code>hh</code> length specifier:</p>\n\n<pre><code>printf(\"%hhX\\n\", buffer[1]);\n</code></pre>\n\n<p>However, the behavior in your case is still well-specified, since arguments smaller than <code>int</code> are promoted to <code>int</code> or <code>unsigned int</code> in a manner that has to be equivalent to either 0-padding or sign extension.</p>\n"}, {"comments": [{"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 3, "creation_date": 1461161570, "post_id": 36746541, "comment_id": 61074064, "body": "Actually, strictly speaking, it&#39;s implementation-defined whether plain <code>char</code> is signed or unsigned."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1461161641, "post_id": 36746541, "comment_id": 61074141, "body": ".. yes, if you want a <code>char</code> that is always with sign, use <code>signed char</code>."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "reply_to_user": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1461161756, "post_id": 36746541, "comment_id": 61074254, "body": "@SteveSummit Yes, strictly speaking, that is correct. But it&#39;s clear that in this implementation, <code>char</code> is signed. I&#39;ll amend my answer accordingly."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1461162552, "post_id": 36746541, "comment_id": 61074909, "body": "@Logicrat Right.  Just say &quot;The <code>char</code> datatype is usually a signed integer quantity.&quot;"}], "tags": [], "owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "is_accepted": false, "score": 1, "last_activity_date": 1461161812, "last_edit_date": 1461161812, "creation_date": 1461161539, "answer_id": 36746541, "question_id": 36746142, "link": "https://stackoverflow.com/questions/36746142/is-a-char-saved-in-memory-as-an-entire-word-with-padding/36746541#36746541", "title": "Is a char saved in memory as an entire word with padding?", "body": "<p>The <code>char</code> datatype is a signed integer quantity. When integer types are put into a parameter list for a function call in C, they are passed as <code>int</code>. Since <code>char</code> is rated as signed by your compiler, and the value <code>0x80</code> has its high bit on, it is sign-extended when it is implicitly cast to an <code>int</code> for <code>printf</code>. </p>\n\n<p>To prevent that extension, tell the compiler that you want an <code>unsigned</code> value:</p>\n\n<pre><code>printf(\"%X\\n\", (unsigned char) buffer[1]);\n</code></pre>\n\n<p>The <code>char</code> will still be promoted to <code>int</code> for the parameter list, but in this case it will become <code>0x00000080</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1461181770, "last_edit_date": 1592644375, "creation_date": 1461162697, "answer_id": 36747072, "question_id": 36746142, "link": "https://stackoverflow.com/questions/36746142/is-a-char-saved-in-memory-as-an-entire-word-with-padding/36747072#36747072", "title": "Is a char saved in memory as an entire word with padding?", "body": "<h2>The Language</h2>\n<blockquote>\n<p>Is a char saved in memory as an entire word with padding?&quot;</p>\n</blockquote>\n<p><strong>No.</strong> An object always occupies <code>sizeof(type)</code> bytes.</p>\n<p>That is one of the fundamentals in C. It could not be otherwise, because arrays are accessed through pointers. In order to advance a pointer to the next array element the compiler adds <code>sizeof(type)</code> to its numerical value.</p>\n<p>This implies, by the way, that the alignment requirements for a type can not be larger than its size (because array elements cannot have padding between them). In particular, a char can be placed at an address of arbitrary alignment.</p>\n<p>Note that it is not required that all bits or bytes in a type are actually &quot;used&quot;, i.e. part of the determination of the value an object has. But any unused bytes will dutifully be reported as part of the object by <code>sizeof()</code>.</p>\n<p>Note also that the compiler may (and often does) choose to <em>place</em> objects strategically at well-aligned addresses.</p>\n<p>A common example for both caveats are struct members which often have padding <em>between</em> each other. The overall size of the struct then includes the padding bytes, even if they happen to be at the end.</p>\n<h2>The Details</h2>\n<p>As so often, the details are a bit involved. I'll do a step-by-step walk-through, citing <a href=\"http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">the last C ISO standard draft</a> as I go.</p>\n<p><strong>1. Calling a function with an ellipsis <code>...</code> in the prototype</strong></p>\n<p>When the function parameter types are not known because the function doesn't have a prototype or the prototype has an ellipsis like with <code>printf</code>, C prescribes a simplification of the argument types -- they are all converted to one of a smaller subset of types. These are the so-called <strong>&quot;default argument promotions&quot;</strong>.</p>\n<p>The first step in the default promotions is to perform the <strong>integer promotions.</strong><sup>1</sup> All integer arguments (<code>char</code>, <code>short</code> etc.) are converted to <code>int</code> if all values of the original type can be represented in an <code>int</code> (6.3.1.1/2). This is the case with your <code>char</code> argument.<sup>2</sup></p>\n<p><strong>2. Integer conversion</strong></p>\n<p>Your argument is a char with the value 0x80. This is in binary <code>1000 0000</code>, i.e. the highest bit is set and the other bits are zero. <code>char</code> on your system must be signed; the highest bit is therefore the sign bit, meaning 0x80 is a negative number. The value of this integer (not <code>int</code>!) argument is the smallest signed number representable in 8 bits in 2's-complement representation. It has the value of a positive number with all zero bits in the original number set to 1, plus one, and then changing the sign: 0x7f (127) plus 1, which is 128, negated: -128. -128 represented in 32 bit 2's-complement simply is 1111\u00a01111\u00a01111\u00a01111\u00a01111\u00a01111\u00a01111\u00a01000, or 0xff ff ff 80. No secret change of value, all to the contrary.</p>\n<p>If, on the other hand, you declare the argument <code>unsigned char</code>, the bit pattern 1000 0000 represents the value 128, whose 32 bit representation is, unsurprisingly, 0000\u00a00000\u00a00000\u00a00000\u00a00000\u00a00000\u00a01000\u00a00000, or 0x00\u00a000\u00a000\u00a080.</p>\n<p>One of these two bit patterns on the stack is what <code>printf()</code> receives as arguments<sup>3</sup>, depending on your argument type (signed or unsigned char).</p>\n<p><strong>3. Inside printf</strong></p>\n<p>As discussed, <code>printf()</code> always <em>receives</em> an <code>int</code> argument, no matter whether the <em>supplied</em> <code>char</code> argument was signed or unsigned. (The <code>int</code>\nwill have a different value though.)</p>\n<p><code>printf()</code> will then use the format string to determine (1) that the argument must be an <code>int</code>; and (2) how to convert it back to its original type before producing a textual representation from it. The length modifier <code>hh</code> &quot;specifies that a following d, i, o, u, x, or X conversion specifier applies to a signed char or unsigned char argument <strong>(the argument will have been promoted according to the integer promotions, but its value shall be converted to signed char or unsigned char before printing)&quot;.</strong><sup>6</sup></p>\n<p>Finally the <code>X</code> specifies to &quot;convert the <code>unsigned int</code> argument to unsigned hexadecimal notation&quot;.<sup>5</sup></p>\n<hr>\n<p><sup>1</sup>6.5.2.2/6. The second step is converting <code>float</code>s to <code>double</code>s.</p>\n<p><sup>2</sup>One interesting consequence of these rules is that <code>printf()</code> -- like any other function with variable argument lists -- can never see a parameter of type <code>char</code> (it will always have been converted to an <code>int</code>).</p>\n<p><sup>3</sup>On a 2's-complement architecture.</p>\n<p><sup>4</sup>7.21.6.1/7.</p>\n<p><sup>5</sup>7.21.6.1/8. I'm a bit unsure about this wording because my parsing of the draft leads me to believe that no <code>unsigned int</code> is ever involved (we may have an <code>unsigned char</code> which is always promoted to a (signed) <code>int</code>). No <code>unsigned int</code> in sight. (Did this change some time since 1989?) This would mean that <code>printf(&quot;%hhX&quot;, (unsigned char)0x80)</code> is UB because the conversion X is applied to something which is not an <code>unsigned int</code> (namely an <code>int</code>). The technically correct form would be <code>printf(&quot;%hhX&quot;, (unsigned int)(unsigned char)0x80)</code> -- an <code>unsigned int</code> argument will be left alone by the integer promotions. (I'm fairly sure nobody would write that, and the first form will produce the proper result on all machines.)</p>\n<p><sup>6</sup>7.29.2.1/7</p>\n"}], "owner": {"reputation": 805, "user_id": 6087248, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-2JVm7NK3kHs/AAAAAAAAAAI/AAAAAAAALJ0/e0Oh9JhnITQ/photo.jpg?sz=128", "display_name": "Nimrod Morag", "link": "https://stackoverflow.com/users/6087248/nimrod-morag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "accepted_answer_id": 36747072, "answer_count": 3, "score": 2, "last_activity_date": 1461181770, "creation_date": 1461160648, "question_id": 36746142, "link": "https://stackoverflow.com/questions/36746142/is-a-char-saved-in-memory-as-an-entire-word-with-padding", "title": "Is a char saved in memory as an entire word with padding?", "body": "<p>I'm working with char arrays in C and I came across a strange phenomenon.\nThe essential code:</p>\n\n<pre><code>char buffer[2];\nbuffer[0] = 0x7F; /*until this value I get normal behaviour*/\nbuffer[1] = 0x80; /*from this value I get leading ones*/\nprintf(\"%X\\n\", buffer[0]);\nprintf(\"%X\\n\", buffer[1]);\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>7F\nFFFFFF80\n</code></pre>\n\n<p>Just to make sure I checked</p>\n\n<pre><code>printf(\"%d\\n\", sizeof(char));\nprintf(\"%d\\n\", sizeof(int*));\n</code></pre>\n\n<p>And as expected I received:</p>\n\n<pre><code>1\n4\n</code></pre>\n\n<p>So a char is 1 byte and a word is 4 bytes on my machine (32-bit, x86, little endian, Ubuntu 12.04.5 VM).</p>\n\n<p>And when I send an entire word to <code>printf()</code> I get 1 padding.\nI could live with zero padding, but this is strange...</p>\n\n<ol>\n<li><p>Does anyone have an explanation?</p></li>\n<li><p>Is a char array not really a sequence of chars, but a sequence of words where we regard only the first byte?  (The implication is that a char array and an int array of the same length will take the same amount of space in memory)</p></li>\n</ol>\n"}, {"tags": ["c++", "c", "syntax", "visual-studio-2015", "highlighting"], "comments": [{"owner": {"reputation": 20017, "user_id": 2282011, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/p8sXJ.jpg?s=128&g=1", "display_name": "Devolus", "link": "https://stackoverflow.com/users/2282011/devolus"}, "edited": false, "score": 1, "creation_date": 1461160744, "post_id": 36745986, "comment_id": 61073327, "body": "<a href=\"http://stackoverflow.com/questions/17992686/visual-studio-2012-syntax-highlighting-is-turning-off-and-on\" title=\"visual studio 2012 syntax highlighting is turning off and on\">stackoverflow.com/questions/17992686/&hellip;</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461161639, "post_id": 36745986, "comment_id": 61074140, "body": "I finally found a way to defeat automatic syntax highlighting in Notepad++. In the style configurator select &quot;GUI4CLI&quot; and add <code>c</code> as a user extension. Now only the comments are highlighted ;)"}], "answers": [{"tags": [], "owner": {"reputation": 4326, "user_id": 4801801, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4Jzhl.jpg?s=128&g=1", "display_name": "shrike", "link": "https://stackoverflow.com/users/4801801/shrike"}, "is_accepted": false, "score": 0, "last_activity_date": 1461165097, "creation_date": 1461165097, "answer_id": 36748079, "question_id": 36745986, "link": "https://stackoverflow.com/questions/36745986/visual-studio-2015-syntax-highlighting-in-c-project/36748079#36748079", "title": "Visual Studio 2015 Syntax highlighting in C Project", "body": "<p>Start VS2015 with command-line options /ResetUserData or /ResetSettings, e.g.:</p>\n\n<pre><code>\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\devenv.exe\" /ResetUserData\n</code></pre>\n\n<p>and/or:</p>\n\n<pre><code>\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\devenv.exe\" /ResetSettings\n</code></pre>\n\n<p><b>Note:</b> You will lose all your user settings and recent projects/files list</p>\n"}], "owner": {"reputation": 11, "user_id": 6230572, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_eQ5HKNbaKw/AAAAAAAAAAI/AAAAAAAAABo/gf2iR7OHTEA/photo.jpg?sz=128", "display_name": "Schlapser", "link": "https://stackoverflow.com/users/6230572/schlapser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1461646924, "creation_date": 1461160256, "last_edit_date": 1461646924, "question_id": 36745986, "link": "https://stackoverflow.com/questions/36745986/visual-studio-2015-syntax-highlighting-in-c-project", "title": "Visual Studio 2015 Syntax highlighting in C Project", "body": "<p>I've got a big problem with VS2015. In .c files or .cpp there aren't a syntax highlighting. </p>\n\n<ol>\n<li>loaded settings from my friend -> didn't work</li>\n<li>reinstalled -> didn't work</li>\n<li>ask my Prof. -> he looked in my settings and haven't an idea because all is ok</li>\n</ol>\n\n<p>Can you help me?\n<a href=\"http://i.stack.imgur.com/1QSSP.jpg\" rel=\"nofollow\">It's like windows notepad.</a></p>\n\n<p>edit: I updated VS2015 now and the syntax highlighting works. :)</p>\n"}, {"tags": ["c", "assembly", "random", "carryflag", "65816"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1461159634, "post_id": 36745601, "comment_id": 61072375, "body": "What assembly language is this? The posts you linked are for different instruction sets. Please tag this appropriately."}, {"owner": {"reputation": 25756, "user_id": 925913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69de717f8f47bc852b7e452d890ef166?s=128&d=identicon&r=PG&f=1", "display_name": "slackwing", "link": "https://stackoverflow.com/users/925913/slackwing"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1461159771, "post_id": 36745601, "comment_id": 61072488, "body": "@interjay - As mentioned in my post, it&#39;s from a game cartridge from 1994, but I have no idea what language\u2014I was hoping someone could identify it, because today is literally my first day looking at assembly. I&#39;ve already tried Googling extensively, <i>e.g.</i> &quot;&lt;game&gt; assembly instruction set&quot;."}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 0, "creation_date": 1461159946, "post_id": 36745601, "comment_id": 61072628, "body": "Looks like 6502 assembly, or some sort of modification of it."}, {"owner": {"reputation": 25756, "user_id": 925913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69de717f8f47bc852b7e452d890ef166?s=128&d=identicon&r=PG&f=1", "display_name": "slackwing", "link": "https://stackoverflow.com/users/925913/slackwing"}, "edited": false, "score": 0, "creation_date": 1461160015, "post_id": 36745601, "comment_id": 61072681, "body": "It just hit me that the instruction set is obviously related to the CPU, not the game cartridge. I found <a href=\"https://en.wikibooks.org/wiki/Super_NES_Programming/Introduction_to_assembly\" rel=\"nofollow noreferrer\">here</a> that it might be the &quot;65816.&quot; Ah, <a href=\"https://en.wikibooks.org/wiki/Super_NES_Programming/65c816_reference#Addressing_modes\" rel=\"nofollow noreferrer\">here&#39;s the full instruction set</a>."}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "edited": false, "score": 1, "creation_date": 1461160120, "post_id": 36745601, "comment_id": 61072763, "body": "Now I know what that looked familiar. Has been a while since I&#39;ve worked with NES assembly."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1461160216, "post_id": 36745601, "comment_id": 61072860, "body": "Yep, that&#39;s 65C816 assembly, which is the CPU that the SNES&#39;s 5A22 was based on."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1461160345, "post_id": 36745601, "comment_id": 61072976, "body": "All the Motorola assemblers look pretty much like this."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1461160637, "post_id": 36745601, "comment_id": 61073225, "body": "The line <code>$80&#47;8137 38 SEC</code> is explicity setting the carry just before an <code>ADC</code> add-with-carry instruction, that&#39;s why the <code>+1</code> in the C code."}], "answers": [{"comments": [{"owner": {"reputation": 25756, "user_id": 925913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69de717f8f47bc852b7e452d890ef166?s=128&d=identicon&r=PG&f=1", "display_name": "slackwing", "link": "https://stackoverflow.com/users/925913/slackwing"}, "edited": false, "score": 0, "creation_date": 1461161695, "post_id": 36746270, "comment_id": 61074189, "body": "Ah, I&#39;ve realized why (2) was throwing me off. I mistakenly read the <code>LOW(mul_high) + HIGH(mul_low)</code> as concatenating two 8-bit strings (as if one of them were shifted) instead of simply being added. So I was under the impression that the <code>HIGH(v1)</code> could be any range of numbers, hence my whole &quot;non-zero&quot; thing. But your explanation cleared it up: only 1 bit can be set in this scenario. Thanks!"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 25756, "user_id": 925913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69de717f8f47bc852b7e452d890ef166?s=128&d=identicon&r=PG&f=1", "display_name": "slackwing", "link": "https://stackoverflow.com/users/925913/slackwing"}, "edited": false, "score": 0, "creation_date": 1461161822, "post_id": 36746270, "comment_id": 61074309, "body": "@Andrew Cheong it was done that way because C does not have a &quot;carry&quot;."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "is_accepted": true, "score": 4, "last_activity_date": 1461160986, "creation_date": 1461160986, "answer_id": 36746270, "question_id": 36745601, "link": "https://stackoverflow.com/questions/36745601/how-is-the-carry-flag-being-set-in-this-assembly-code/36746270#36746270", "title": "How is the carry flag being set in this assembly code?", "body": "<blockquote>\n  <ol>\n  <li>but how can we be sure that the carry flag is set to 1? What previous operation would guarantee this?</li>\n  </ol>\n</blockquote>\n\n<pre><code>$80/8137 38          SEC   ; SEt Carry flag\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><code>uint8_t  carry = HIGH(v1) ? 1 : 0;</code><br>\n  Why would it work this way? I read this as, \"Set the carry flag if and only if the high byte is non-zero.\" But wouldn't the indication of an overflow be only if the high byte is zero?</li>\n  </ol>\n</blockquote>\n\n<p>The addition <code>ADC #$0011</code> is using the carry from <code>ADC $02,s</code>. When <code>ADC $02,s</code> is performed, the accumulator is set to 8-bit (because of <code>SEP #$20</code>), so the carry flag will be set if the result of <code>ADC $02,s</code> would've exceeded 8 bits (i.e. if you would've got something >= $100 in 16-bit mode).<br>\nIn the C version you've got a 16-bit variable (<code>v1</code>) to hold the result, so your carry will be in bit 8 of <code>v1</code>, which you can test with <code>HIGH(v1) == 1</code>, or simply <code>HIGH(v1)</code> since it will either be 1 or 0.</p>\n"}, {"tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": false, "score": 3, "last_activity_date": 1461161063, "creation_date": 1461161063, "answer_id": 36746306, "question_id": 36745601, "link": "https://stackoverflow.com/questions/36745601/how-is-the-carry-flag-being-set-in-this-assembly-code/36746306#36746306", "title": "How is the carry flag being set in this assembly code?", "body": "<p>1) The line </p>\n\n<pre><code>$80/8137 38     SEC\n</code></pre>\n\n<p>is explicity setting the carry just before an <code>ADC</code> add-with-carry instruction, that's why the <code>+1</code> in the C code.</p>\n\n<p>2) The processor has an 8-bit accumulator, and the addition will overflow to the carry, ready for the next <code>ADC</code> instruction. However, the C code is using a 16-bit variable <code>v1</code>, and the carry remains in the upper 8 bits. Hence the test of those upper 8 bits to extract the so-called \"carry\".</p>\n"}], "owner": {"reputation": 25756, "user_id": 925913, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69de717f8f47bc852b7e452d890ef166?s=128&d=identicon&r=PG&f=1", "display_name": "slackwing", "link": "https://stackoverflow.com/users/925913/slackwing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 36746270, "answer_count": 2, "score": 1, "last_activity_date": 1461196910, "creation_date": 1461159405, "last_edit_date": 1495541772, "question_id": 36745601, "link": "https://stackoverflow.com/questions/36745601/how-is-the-carry-flag-being-set-in-this-assembly-code", "title": "How is the carry flag being set in this assembly code?", "body": "<p>Given the following assembly code for a 16-bit PRNG function,</p>\n\n<pre><code>$80/8111 E2 20       SEP #$20   ; set 8-bit mode accumulator\n$80/8113 AD E5 05    LDA $05E5  ; load low byte of last random number\n$80/8116 8D 02 42    STA $4202\n$80/8119 A9 05       LDA #$05   ; multiply it by 5\n$80/811B 8D 03 42    STA $4203\n$80/811E EA          NOP\n$80/811F C2 20       REP #$20   ; set 16-bit mode accumulator\n$80/8121 AD 16 42    LDA $4216  ; load the resultant product\n$80/8124 48          PHA        ; push it onto the stack\n$80/8125 E2 20       SEP #$20   ; 8-bit\n$80/8127 AD E6 05    LDA $05E6  ; load high byte of last random number\n$80/812A 8D 02 42    STA $4202\n$80/812D A9 05       LDA #$05   ; multiply by 5\n$80/812F 8D 03 42    STA $4203\n$80/8132 EB          XBA        ; exchange high and low bytes of accumulator\n$80/8133 EA          NOP\n$80/8134 AD 16 42    LDA $4216  ; load low byte of product\n$80/8137 38          SEC\n$80/8138 63 02       ADC $02,s  ; add to it the high byte of the original product\n$80/813A 83 02       STA $02,s  ; save it to the high byte of the original product\n$80/813C C2 20       REP #$20   ; 16-bit\n$80/813E 68          PLA        ; pull it from the stack\n$80/813F 69 11 00    ADC #$0011 ; add 11\n$80/8142 8D E5 05    STA $05E5  ; save as new random number\n$80/8145 6B          RTL\n</code></pre>\n\n<p>a user by the name of @sagara translated the code to C:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define LOW(exp)  ((exp) &amp; 0x00FF)\n#define HIGH(exp) (((exp) &amp; 0xFF00) &gt;&gt; 8)\n\nuint16_t prng(uint16_t v) {\n\n    uint16_t low  = LOW(v);\n    uint16_t high = HIGH(v);\n\n    uint16_t mul_low  = low  * 5;\n    uint16_t mul_high = high * 5;\n\n    // need to check for overflow, since final addition is adc as well\n    uint16_t v1    = LOW(mul_high) + HIGH(mul_low) + 1;\n    uint8_t  carry = HIGH(v1) ? 1 : 0;\n\n    uint16_t v2 = (LOW(v1) &lt;&lt; 8) + LOW(mul_low);\n\n    return (v2 + 0x11 + carry);\n}\n</code></pre>\n\n<p>I'm confused by two things.</p>\n\n<ol>\n<li><p>In this line...</p>\n\n<pre><code>uint16_t v1    = LOW(mul_high) + HIGH(mul_low) + 1;\n</code></pre>\n\n<p><strong>Why is there a <code>+ 1</code>? I think it's because of the <code>ADC</code> operation, but how can we be sure that the carry flag is set to 1?</strong> What previous operation would guarantee this? The <code>XBC</code>? I read a few posts such as <a href=\"https://stackoverflow.com/questions/4153852/assembly-adc-add-with-carry-to-c\">Assembly ADC (Add with carry) to C++</a> and <a href=\"https://stackoverflow.com/questions/8034566/overflow-and-carry-flags-on-z80\">Overflow and Carry flags on Z80</a> but it's not clear to me because <strike>the instruction set appears to be different</strike> I'm not familiar with <a href=\"https://en.wikibooks.org/wiki/Super_NES_Programming/65c816_reference#Addressing_modes\" rel=\"nofollow noreferrer\">65C816 assembly</a>. (This is from a popular 1994 SNES game whose NA release anniversary recently passed; free upvote to the correct guess :-)</p></li>\n<li><p>In the next line...</p>\n\n<pre><code>uint8_t  carry = HIGH(v1) ? 1 : 0;\n</code></pre>\n\n<p><strong>Why would it work this way? I read this as, <em>\"Set the carry flag if and only if the high byte is non-zero.\"</em> But wouldn't the indication of an overflow be only if the high byte <em>is</em> zero?</strong> (I'm probably misinterpreting what the line is doing.)</p></li>\n</ol>\n\n<p>Thanks in advance for any insights.</p>\n"}, {"tags": ["c", "pointers", "linked-list", "nodes"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1461160752, "post_id": 36745585, "comment_id": 61073333, "body": "An <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> might help here."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1461160935, "post_id": 36745585, "comment_id": 61073496, "body": "Yes, where is the rest of the code, or if you&#39;re going to post an abbreviated version, at least make sure it&#39;s compilable and exhibits the problem."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 6215255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b3d4f639d0c494d649311a1b728dec7?s=128&d=identicon&r=PG&f=1", "display_name": "Sheetal Shetty", "link": "https://stackoverflow.com/users/6215255/sheetal-shetty"}, "is_accepted": false, "score": 2, "last_activity_date": 1461161564, "last_edit_date": 1461161564, "creation_date": 1461160695, "answer_id": 36746165, "question_id": 36745585, "link": "https://stackoverflow.com/questions/36745585/delete-a-node-from-a-linked-list/36746165#36746165", "title": "Delete a node from a linked list", "body": "<p>Well there is no error in deletion part. Maybe the head is not initialized and passes the null value to 'n'. So, since 'n' has null value, deletion is not possible. Or updated value of n is not returned or passed properly to the main function.</p>\n"}, {"tags": [], "owner": {"reputation": 2337, "user_id": 829788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375c28070fc47d17c1bae8ad5396c8e0?s=128&d=identicon&r=PG", "display_name": "Muhammad Usama", "link": "https://stackoverflow.com/users/829788/muhammad-usama"}, "is_accepted": true, "score": 2, "last_activity_date": 1461161538, "creation_date": 1461161538, "answer_id": 36746540, "question_id": 36745585, "link": "https://stackoverflow.com/questions/36745585/delete-a-node-from-a-linked-list/36746540#36746540", "title": "Delete a node from a linked list", "body": "<p>You are not moving the head forward when first node is deleted.</p>\n\n<pre><code>while (n != NULL) {\n        if (strcmp(&amp;n-&gt;data.telephone, telNumber) == 0) {\n            if (previous == NULL) {\n                    n = n-&gt;next;\n                    free(head);\n                    head = n; /* missing*/\n            }\n            ...\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5595149, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01284f1a2f1ef96da03074bf299b2c58?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Sultana", "link": "https://stackoverflow.com/users/5595149/simon-sultana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 36746540, "answer_count": 2, "score": 1, "last_activity_date": 1461161564, "creation_date": 1461159365, "last_edit_date": 1461161519, "question_id": 36745585, "link": "https://stackoverflow.com/questions/36745585/delete-a-node-from-a-linked-list", "title": "Delete a node from a linked list", "body": "<p>I'm having trouble deleting a node from a linked list by inputting the telephone number of the record ...  This is the code that is supposed to do this:</p>\n\n<pre><code>typedef struct record\n{   \n    char name[20];\n    char surname[20];\n    char telephone[20];\n}Record;\n\ntypedef struct node\n{\n    Record data;\n    struct node *next;\n}Node;\n\nNode *head = NULL;\n\nvoid delete() { \n    Node *n = head; \n    Node* previous = NULL;\n    Node *next = n;\n\n    int length;\n    int valid;\n    char telNumber[20];\n    char confirm = 1;\n\n   do {\n    valid = 0;\n    printf(\"  TELEPHONE NO. (8 digits)   : \");\n    gets();\n    gets(telNumber);\n    length = strlen(telNumber); \n    for (int i = 0; i &lt; length; i++)\n    {\n        if (!isdigit(telNumber[i]) || (length != 8))\n        {\n            printf(\"You enterred an invalid number\\n\");\n            valid = 1; break;\n        }\n    }\n\n} while (valid == 1);   \n\nwhile (n != NULL) {\n            if (strcmp(&amp;n-&gt;data.telephone, telNumber) == 0) {\n                if (previous == NULL) {\n                    n = n-&gt;next;\n                    free(head);\n                }\n                else {\n                    previous-&gt;next = n-&gt;next;\n                    free(n);\n                    n = previous-&gt;next;\n                }\n            }\n            else {\n                previous = n;\n                n = n-&gt;next;\n            }\n        }\n        printf(\"You have successfully deleted the telephone record\");\n</code></pre>\n\n<p>.\n.\n.\nThe record still remains there. Also, when I have two records, if i try to delete the first record, the program doesn't find it</p>\n"}, {"tags": ["python", "c"], "comments": [{"owner": {"reputation": 6434, "user_id": 356307, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/G3ppl.jpg?s=128&g=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/356307/jens"}, "edited": false, "score": 3, "creation_date": 1461158826, "post_id": 36745242, "comment_id": 61071679, "body": "...because your command line shell interprets <code>$</code> and <code>(</code> and <code>)</code> as part of the command, not part of a single string argument. Using <code>&quot;</code> around your command line argument like you did first is correct."}, {"owner": {"reputation": 6855, "user_id": 3125194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ca2177750fa502328461e68d385e6d9?s=128&d=identicon&r=PG&f=1", "display_name": "Marian", "link": "https://stackoverflow.com/users/3125194/marian"}, "edited": false, "score": 1, "creation_date": 1461159774, "post_id": 36745242, "comment_id": 61072490, "body": "Very interesting. In the second case you get the first agument <code>&quot;Hello</code> and the second <code>world &quot;</code>. It seems that bash ignores quotes and escape characters when reparsing result of <code>$()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 5810495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ce085a49db70e9cd554a776b7f26bd?s=128&d=identicon&r=PG", "display_name": "tbobm", "link": "https://stackoverflow.com/users/5810495/tbobm"}, "is_accepted": false, "score": 0, "last_activity_date": 1461160059, "creation_date": 1461160059, "answer_id": 36745877, "question_id": 36745242, "link": "https://stackoverflow.com/questions/36745242/c-program-command-line-argument-with-spaces/36745877#36745877", "title": "C program command line argument with spaces", "body": "<blockquote>\n  <h1>Method 1:</h1>\n  \n  <p><code>./a.out \"$(python program.py)\"</code>\n  <br></p>\n</blockquote>\n\n<p>./a.out will use \"$(python program.py)\" as a string\n<br>\n<code>echo \"$(python program.py)\"\nprints \"$(python program.py)\"</code></p>\n\n<blockquote>\n  <h1>Method 2:</h1>\n  \n  <p><code>./a.out $(python program.py)</code></p>\n</blockquote>\n\n<p>./a.out will use the result of $(python program.py) as an argument.\n<br>\n<code>echo $(python program.py)</code>\nwill run the program, and what is printed will be used as an argument.<br><br>\nBecause you have printed <code>Hello world</code>, it will use Hello as the first argument, and world as the second argument.\nit will result in something like<br>\n<code>./a.out Hello World</code></p>\n"}, {"tags": [], "owner": {"reputation": 1401, "user_id": 5813357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XErIM.png?s=128&g=1", "display_name": "romain-aga", "link": "https://stackoverflow.com/users/5813357/romain-aga"}, "is_accepted": false, "score": 0, "last_activity_date": 1461163548, "last_edit_date": 1461163548, "creation_date": 1461161820, "answer_id": 36746658, "question_id": 36745242, "link": "https://stackoverflow.com/questions/36745242/c-program-command-line-argument-with-spaces/36746658#36746658", "title": "C program command line argument with spaces", "body": "<p>Apparently whenever you use a $something, it will always be split in several parameters if you have spaces in it.\nJust look at how $1 works, it's the same behavior.\nThen your $(command) will work the same.\nThis is why you have to put quotes around it.</p>\n\n<p>I tried:</p>\n\n<pre><code>ls $(echo '\"Hello World!\"')\n</code></pre>\n\n<p>It has the same behavior than your second method.</p>\n\n<p>And this:</p>\n\n<pre><code>ls \"$(echo 'Hello World!')\"\n</code></pre>\n\n<p>Is the same than your first method.</p>\n"}], "owner": {"reputation": 4810, "user_id": 831938, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/da74f94a1f60fceb744b45be1f4cc45a?s=128&d=identicon&r=PG&f=1", "display_name": "sir_thursday", "link": "https://stackoverflow.com/users/831938/sir-thursday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1461163548, "creation_date": 1461158580, "question_id": 36745242, "link": "https://stackoverflow.com/questions/36745242/c-program-command-line-argument-with-spaces", "title": "C program command line argument with spaces", "body": "<p>My python program <code>program.py</code> prints text with spaces, and my C program <code>a.out</code> is only expecting a single command line argument.  Why is there different behavior between these two methods... i.e. why does Method 1 work and not Method 2?</p>\n\n<p>Method 1:</p>\n\n<pre><code># program.py\nprint(\"Hello world\")\n</code></pre>\n\n<p>Terminal:</p>\n\n<pre><code>&gt; ./a.out \"$(python program.py)\"\n// Program successfully run\n</code></pre>\n\n<p>Method 2:</p>\n\n<pre><code># program.py\nprint(\"\\\"Hello world \\\"\")\n</code></pre>\n\n<p>Terminal:</p>\n\n<pre><code>&gt; ./a.out $(python program.py)\n// Error- only one command line argument expected\n</code></pre>\n"}, {"tags": ["c", "embedded", "microcontroller"], "comments": [{"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1461159763, "post_id": 36745036, "comment_id": 61072481, "body": "Explain the downvote."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461160150, "post_id": 36745036, "comment_id": 61072792, "body": "Just how would it make sense to DMA data to/from code memory? Of course they mean plain data RAM."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461161218, "post_id": 36745036, "comment_id": 61073767, "body": "It is physically possible actually to read and write into the code memory."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461161696, "post_id": 36745036, "comment_id": 61074191, "body": "According to the manual you linked, no. I don&#39;t see how it would make sense to do so either. Do you even have code SRAM to begin with? Sounds like a PC in disguise, rather than a microcontroller. Running code from RAM is very bad practice in any embedded system."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461164197, "post_id": 36745036, "comment_id": 61076230, "body": "Yes I have code SRAM. And i have seen many cases where the ram is used for code memory. Especially during firmware update."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461166307, "post_id": 36745036, "comment_id": 61077922, "body": "Non-paged.............."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461191227, "post_id": 36745036, "comment_id": 61092637, "body": "@Lundin: Not really. Faster Cortex-M MCU like STM32F7 have close-coupled code-RAM (IRAM) e.g. for interrupt handlers and other code which need fast execution. This simply because Flash is too slow and either they don&#39;t have instruction cache or to prevent such code from trashing other code from the cache and avoid the latency to prefetch the first instructions from Flash. Typically the RAM is loaded at startup (much like the <code>.data</code> section) and the area is write-protected, e.g. using the MPU."}], "answers": [{"comments": [{"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "edited": false, "score": 0, "creation_date": 1461161429, "post_id": 36746372, "comment_id": 61073941, "body": "the global variables are not residing into the heap, but they are guaranteed to be allocated for the entire life cycle of the program. So is it OK to put that structure into the ram allocated for the global variables?"}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1461165361, "post_id": 36746372, "comment_id": 61077194, "body": "The hardware wouldn&#39;t care, to be honest, if it was in .bss, .heap, or .data.   What&#39;s important is its in the right physical address range."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1461191491, "post_id": 36746372, "comment_id": 61092733, "body": "dma does not necessarily save any time for the cpu, it is design dependent, sometimes it only saves programmers time.  Depends on the bus conflicts created by the dma.  some dma designs the cpu is held off from any accesses until the dma transfer completes,  some designs the dma has the highest priority so the cpu suffers as a slave having to take what cycles it can get on the shared bus.  and some designs the dma is the slave so the cpu has some small hit but not as big as if it were doing everything."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1461191551, "post_id": 36746372, "comment_id": 61092760, "body": "sometimes dma is able to do more efficient transfers than the instruction set and the cpu is held off and waits.  so you have to for each time you see/use dma understand what the system impact is, it isnt automatically better than doing it in code."}], "tags": [], "owner": {"reputation": 469, "user_id": 6012315, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d7f2484ba51df08ea30569f351afe958?s=128&d=identicon&r=PG&f=1", "display_name": "Schafwolle", "link": "https://stackoverflow.com/users/6012315/schafwolle"}, "is_accepted": true, "score": 1, "last_activity_date": 1461161206, "creation_date": 1461161206, "answer_id": 36746372, "question_id": 36745036, "link": "https://stackoverflow.com/questions/36745036/what-do-they-mean-saying-system-memory/36746372#36746372", "title": "What do they mean saying SYSTEM MEMORY", "body": "<p>DMA measn Direct Memory Access. The idea is that a module like the ADC is not raising an iterrupt to ask the CPU to read its new data. Instead the module is directly writting on the memory of the uController. This saves performes time for the CPU. For configuration you must must create a heap structure and passing the pointer to the module. This allows the module directly change the memory content. So its your heap which is part of your SRAM. </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4899757, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IQfTzYklx-I/AAAAAAAAAAI/AAAAAAAAABs/jpbVbyL0Uzk/photo.jpg?sz=128", "display_name": "Andrew OConnor", "link": "https://stackoverflow.com/users/4899757/andrew-oconnor"}, "is_accepted": false, "score": 2, "last_activity_date": 1461161273, "creation_date": 1461161273, "answer_id": 36746409, "question_id": 36745036, "link": "https://stackoverflow.com/questions/36745036/what-do-they-mean-saying-system-memory/36746409#36746409", "title": "What do they mean saying SYSTEM MEMORY", "body": "<p>My understanding of it as I read it, is System Memory is allocated from the on chip  RAM Memory ( Fig 3.1) not external memory mapped or flash program memory.\nYou see in the Table 3.2 it show the chips have Flash and internal RAM. I'd say the System Memory is the RAM, not the Flash memory. \nSection 3.2 says the features of the chip is that is has 32KB of RAM on chip.\nCheck figure 5.2 for System Address Space. You'll need to allocate your\nDMA_CTRLBASE and DMA_ALTCTRLBASE register within that region, 0x20000000 - 0x20007fff  appropriately to fit the control structure.  Hope that helps.</p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 36746372, "answer_count": 2, "score": -1, "last_activity_date": 1461161728, "creation_date": 1461158126, "question_id": 36745036, "link": "https://stackoverflow.com/questions/36745036/what-do-they-mean-saying-system-memory", "title": "What do they mean saying SYSTEM MEMORY", "body": "<p>I am working on an embedded application. \nTrying to configure the DMA controller I came across to the statement:</p>\n\n<blockquote>\n  <p>You must provide an area\n   of system memory to contain the channel control data structure</p>\n</blockquote>\n\n<p>What do they mean saying <strong>system memory</strong>? Data SRAM? Code SRAM? Somewhere else?</p>\n\n<p>You can find that statement at the beginning of section <strong>8.4.3</strong> here: \n<a href=\"http://www.silabs.com/support%20documents/technicaldocs/efm32wg-rm.pdf\" rel=\"nofollow\">http://www.silabs.com/support%20documents/technicaldocs/efm32wg-rm.pdf</a> </p>\n"}, {"tags": ["c", "ipv6"], "comments": [{"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1461158103, "post_id": 36744731, "comment_id": 61071059, "body": "There are no standardized routines to get the EUI-64 part of an IPv6 address; however it&#39;s well defined, so writing a routine to do it would not be difficult."}, {"owner": {"reputation": 55, "user_id": 3518193, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/r31m9.gif?s=128&g=1", "display_name": "allicius", "link": "https://stackoverflow.com/users/3518193/allicius"}, "reply_to_user": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1461158379, "post_id": 36744731, "comment_id": 61071297, "body": "Thank Petesh for answering my question. In that case, I will do it by myself."}], "owner": {"reputation": 55, "user_id": 3518193, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/r31m9.gif?s=128&g=1", "display_name": "allicius", "link": "https://stackoverflow.com/users/3518193/allicius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461157928, "creation_date": 1461157463, "last_edit_date": 1461157928, "question_id": 36744731, "link": "https://stackoverflow.com/questions/36744731/how-to-get-the-eui-64-part-of-an-ipv6-address-in-c", "title": "How to get the EUI-64 part of an IPv6 address in C", "body": "<p>I wonder if there is a function or any effective way to get the EUI-64 part from my current IPv6 address using C?</p>\n"}, {"tags": ["c", "system", "backquote"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1461157583, "post_id": 36744707, "comment_id": 61070616, "body": "It seems your example does not contain any backquotes. Is that the problem?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 1, "creation_date": 1461157980, "post_id": 36744707, "comment_id": 61070971, "body": "&quot;it doesn&#39;t return the good value&quot; - which function?  what value?  What is the full string in <code>check_cmd</code> after <code>snprintf()</code>?"}, {"owner": {"reputation": 21, "user_id": 6230321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1911e014cf58c9b02957458680c39c15?s=128&d=identicon&r=PG&f=1", "display_name": "V. Pierre", "link": "https://stackoverflow.com/users/6230321/v-pierre"}, "edited": false, "score": 0, "creation_date": 1461158662, "post_id": 36744707, "comment_id": 61071533, "body": "For the return value, I should expect a 0 if it works, right ? but it&#39;s not the case. Then I put back quote and replace the &quot;$(&quot; and &quot;). But it doesn&#39;t work yet. In fact, I&#39;ve read that some shell doesn&#39;t support the &quot;$(&quot;.  Then I&#39;ve checked the value of check_cmd, it&#39;s the good one."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 1, "creation_date": 1461161694, "post_id": 36744707, "comment_id": 61074188, "body": "Read the documentation for <code>snprintf</code> again. That&#39;s not what it returns."}, {"owner": {"reputation": 21, "user_id": 6230321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1911e014cf58c9b02957458680c39c15?s=128&d=identicon&r=PG&f=1", "display_name": "V. Pierre", "link": "https://stackoverflow.com/users/6230321/v-pierre"}, "edited": false, "score": 0, "creation_date": 1461227726, "post_id": 36744707, "comment_id": 61106409, "body": "This is not snprintf() value return. I know that snprintf return the number of bytes written and I check it, this is good.  But when I put check_cmd in system(), system return a value != 0."}], "owner": {"reputation": 21, "user_id": 6230321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1911e014cf58c9b02957458680c39c15?s=128&d=identicon&r=PG&f=1", "display_name": "V. Pierre", "link": "https://stackoverflow.com/users/6230321/v-pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1461157447, "creation_date": 1461157396, "last_edit_date": 1461157447, "question_id": 36744707, "link": "https://stackoverflow.com/questions/36744707/backquote-in-system-function", "title": "backquote in system() function", "body": "<p>I have a problem with backquotes (it seems) in system() function in C.\nThis is my request :</p>\n\n<pre><code>snprintf (check_cmd, sizeof (check_cmd), \"[ $(echo -n '%.*s' | cksum | cut -d' ' -f1) -eq %\" PRIu32 \" ]\", (cfi_sys_int)data_array[i].size, data_array[i].bytes, crc_32 );\nsystem (check_cmd); \n</code></pre>\n\n<p>I check the value of snprintf and system() return value but it doesn't return the good value</p>\n"}, {"tags": ["c", "pointers", "struct", "linked-list", "nodes"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 5595149, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01284f1a2f1ef96da03074bf299b2c58?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Sultana", "link": "https://stackoverflow.com/users/5595149/simon-sultana"}, "edited": false, "score": 0, "creation_date": 1461157718, "post_id": 36744662, "comment_id": 61070747, "body": "That did solve part of the problem, thanks. However, when displaying the records, the record is still there. Maybe i need to return something?"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 0, "last_activity_date": 1461157306, "creation_date": 1461157306, "answer_id": 36744662, "question_id": 36744594, "link": "https://stackoverflow.com/questions/36744594/delete-a-node-from-a-linked-list-after-finding-it/36744662#36744662", "title": "Delete a node from a linked list after finding it", "body": "<p>This:</p>\n\n<pre><code>if (&amp;n-&gt;data.telephone == telNumber)\n</code></pre>\n\n<p>is not how to compare strings for equality in C. That will compare the addresses, which will never match.</p>\n\n<p>It should be:</p>\n\n<pre><code>if (strcmp(n-&gt;data.telephone, telNumber) == 0)\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 5595149, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01284f1a2f1ef96da03074bf299b2c58?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Sultana", "link": "https://stackoverflow.com/users/5595149/simon-sultana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461157351, "creation_date": 1461157157, "last_edit_date": 1461157351, "question_id": 36744594, "link": "https://stackoverflow.com/questions/36744594/delete-a-node-from-a-linked-list-after-finding-it", "title": "Delete a node from a linked list after finding it", "body": "<p>I'm having trouble deleting a node from a linked list by inputting the telephone number of the record. This is the code that is supposed to do this:</p>\n\n<pre><code>typedef struct record\n{   \n    char name[20];\n    char surname[20];\n    char telephone[20];\n}Record;\n\ntypedef struct node\n{\n    Record data;\n    struct node *next;\n}Node;\n\nNode *head = NULL;\n\nvoid delete() { \n    Node *n = head; \n    Node* previous = NULL;\n    Node *next = n;\n</code></pre>\n\n<p>.\n.\n. (here i wrote the code to enter the number (stored in telNumber[20])and find the record containing the number </p>\n\n<pre><code>while (n != NULL) {\n            if (&amp;n-&gt;data.telephone == telNumber) {\n                if (previous == NULL) {\n                    n = n-&gt;next;\n                    free(head);\n                }\n                else {\n                    previous-&gt;next = n-&gt;next;\n                    free(n);\n                    n = previous-&gt;next;\n                }\n            }\n            else {\n                previous = n;\n                n = n-&gt;next;\n            }\n        }\n        printf(\"You have successfully deleted the telephone record\");\n</code></pre>\n\n<p>The record still remains there.</p>\n"}, {"tags": ["c", "arrays", "function", "pointers", "malloc"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461157495, "post_id": 36744561, "comment_id": 61070547, "body": "There are no array pointers in your code, nor any 2D arrays."}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "reply_to_user": {"reputation": 3572, "user_id": 412044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WZZOJ.png?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/412044/martin"}, "edited": false, "score": 0, "creation_date": 1461157589, "post_id": 36744561, "comment_id": 61070621, "body": "@Martin  Could you tell me how?"}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461157661, "post_id": 36744561, "comment_id": 61070691, "body": "@Lundin Ok so there is pointer to pointer to int, but it can be used in as a pointer to 2Dim array, right?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461157919, "post_id": 36744561, "comment_id": 61070914, "body": "@Marcin No, it cannot. It&#39;s a common mistake, you&#39;ve been learning from bad sources. I&#39;ll post an answer."}], "answers": [{"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 2, "creation_date": 1461158190, "post_id": 36744785, "comment_id": 61071142, "body": "You should check all return values of <code>malloc</code>, not only the first one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1461158210, "post_id": 36744785, "comment_id": 61071164, "body": "There is no reason to create a segmented pointer-to-pointer thing. Instead, when you want a 2D array, use a 2D array."}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461158244, "post_id": 36744785, "comment_id": 61071191, "body": "Soo.. I can do it like this: void createArr(int*** arrPtr, int x, int y); And here arrPtr is a pointer which point to a **int, which can contain addresses for arrays. But it looks bad.  And another way ,more elegant, is the one you showed. Thank you very much for quick answers!"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 1, "creation_date": 1461158281, "post_id": 36744785, "comment_id": 61071213, "body": "@Marcin It looks bad because it is bad. You shouldn&#39;t use any pointer-to-pointer to begin with. You should use real 2D arrays, assuming 2D arrays is what you want."}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461158404, "post_id": 36744785, "comment_id": 61071320, "body": "@Lundin But I have to create this array dynamically (don&#39;t know the dimension before runtime), so I have to do it like this."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461158491, "post_id": 36744785, "comment_id": 61071382, "body": "Consider for example: <code>void crash_and_burn (void) { int** wannabe_array = createArr(5, 3); int** wannabe2 = createArr(5, 3); memcpy(wannabe2, wannabe_array, sizeof(int[5][3])); }</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461158551, "post_id": 36744785, "comment_id": 61071422, "body": "@Marcin No, see my example. VLAs (and more importantly pointers to VLAs) have been in C since the year 1999."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1461158734, "post_id": 36744785, "comment_id": 61071592, "body": "This may appear to work as a 2D array when using <code>[i][j]</code> access method but it is not the same as <code>int arr[x][y]</code>"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1461158812, "post_id": 36744785, "comment_id": 61071670, "body": "@4386427 No it may never work like a 2D array. Arrays are allocated in adjacent, contiguous memory. Just because you use the <code>[ ]</code> operator on a pointer, the pointer doesn&#39;t magically turn into an array. Run my &quot;crash_and_burn&quot; example above, for example. Disclaimer: it might cause your computer to crash and burn, since pointers are not arrays."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461159343, "post_id": 36744785, "comment_id": 61072139, "body": "@Lundin - That was actually what I tried to say in my comment. Since everything is ok as long accesses are done using <code>[i][j]</code>one migth considered it to be the same as <code>int arr[x][y]</code> but it isn&#39;t."}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461160676, "post_id": 36744785, "comment_id": 61073271, "body": "@Lundin To sum up all the information: 1) I don&#39;t really get why my version (void createArr(int** arrPtr, int x, int y)) didn&#39;t work. Assuming that want to allocate array like this, because I&#39;m stupid why it doesn&#39;t work. I pass the pointer, so why it&#39;s work in main function, but not in my function. If I will understand this, I promise I will allocate 2D arrays like this: int (<i>array)[y] = malloc( sizeof(int[x][y]) ); 2) Your crash_and_burn() example won&#39;t work because we start to copy the memory from  arr</i> (so not the data, but some random memory space)?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461160965, "post_id": 36744785, "comment_id": 61073525, "body": "@Marcin It won&#39;t work for the same reason as why <code>void func (int x) { x=5; }</code> won&#39;t change any variables in the caller. You didn&#39;t attempt a plain variable though, you attempted to allocate a pointer to an array of pointers. Yet your pointer to an array of pointers was only changed locally inside the function, like <code>x</code> in my example."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461161030, "post_id": 36744785, "comment_id": 61073585, "body": "@Marcin The crash and burn example will crash and burn because it used a pointer to an array of pointers instead of a real 2D array."}], "tags": [], "owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "is_accepted": true, "score": 2, "last_activity_date": 1461158912, "last_edit_date": 1461158912, "creation_date": 1461157567, "answer_id": 36744785, "question_id": 36744561, "link": "https://stackoverflow.com/questions/36744561/create-2d-array-by-passing-pointer-to-function-in-c/36744785#36744785", "title": "Create 2D array by passing pointer to function in c", "body": "<p>Yes, passing a pointer to <code>int **</code> (but 3 stars is considered bad style), I suggest to return an allocated variable from your function:</p>\n\n<pre><code>int **createArr(int x, int y)\n{\n    int **arrPtr;\n    int i, j;       //Loop indexes\n\n    arrPtr = malloc(x*sizeof(int*));\n    if (arrPtr == NULL) { /* always check the return of malloc */\n        perror(\"malloc\");\n        exit(EXIT_FAILURE);\n    }\n    for (i = 0; i &lt; x; ++i) {\n        arrPtr[i] = malloc(y*sizeof(int));\n        if (arrPtr[i] == NULL) {\n            perror(\"malloc\");\n            exit(EXIT_FAILURE);\n        }\n    }\n    for (i = 0; i &lt; x; ++i) {\n        for (j = 0; j &lt; y; ++j) {\n            arrPtr[i][j] = i + j;\n        }\n    }\n    return arrPtr;   \n}\n</code></pre>\n\n<p>Call it using:</p>\n\n<pre><code>arr = createArr(x, y);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 507, "user_id": 4993180, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/EAtti.jpg?s=128&g=1", "display_name": "Striker", "link": "https://stackoverflow.com/users/4993180/striker"}, "is_accepted": false, "score": 0, "last_activity_date": 1461157733, "creation_date": 1461157733, "answer_id": 36744866, "question_id": 36744561, "link": "https://stackoverflow.com/questions/36744561/create-2d-array-by-passing-pointer-to-function-in-c/36744866#36744866", "title": "Create 2D array by passing pointer to function in c", "body": "<p>Yes, an array can be initialized this way. As long as you pass a pointer, the memory address should remain the same. So, if you assign anything to the pointer it will valid.</p>\n\n<p>Think of an a[] as a* pointer to the first element</p>\n\n<p>a [][] will be a** pointer to a pointer of the first element or a pointer to the first array (first row of a table)</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 1, "creation_date": 1461161182, "post_id": 36745029, "comment_id": 61073738, "body": "When I try to use your version it say that : size_t y expression must have constant value. So you can&#39;t make arrays like this dynamically (as I said...)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 1, "creation_date": 1461161406, "post_id": 36745029, "comment_id": 61073927, "body": "@Marcin I did compile and test this code. You must use a compiler made after the year 1999 (why wouldn&#39;t you?). For example GCC. You can tell GCC to be a C compiler with the compiler options <code>gcc -std=c11 -pedantic-errors</code>."}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461265728, "post_id": 36745029, "comment_id": 61133174, "body": "I spent whole day today and can&#39;t figure out one think. Everything from your example seams to work but I can&#39;t figure out this. If I print table by function <code>print2DArray(xDim, yDim, arr);</code> I get all elements so it works fine. If I print one element like this <code>printf( &quot;%d\\n&quot;, arr[0][0])</code> it is fine to. BUT if I print like this <code>printf( &quot;%d\\n&quot;,old[1][1]);</code> or any other value different than 0, I get segmentation fault. Please help me."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461268170, "post_id": 36745029, "comment_id": 61134581, "body": "@Marcin What is &quot;old&quot;?"}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461269720, "post_id": 36745029, "comment_id": 61135476, "body": "Sorry. &quot;old&quot; is the name of array that I use in my code, but here i pasted it as <code>arr</code>. So it should be  <code>printf( &quot;%d\\n&quot;,arr[1][1])</code>. The names are fine in code."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461272119, "post_id": 36745029, "comment_id": 61136862, "body": "@Marcin Well, then something in the code is wrong :) Please post a separate question."}, {"owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "edited": false, "score": 0, "creation_date": 1461280500, "post_id": 36745029, "comment_id": 61140409, "body": "Here is the link to question: <a href=\"http://stackoverflow.com/questions/36782015/2d-array-pointer-access-segmentation-fault-in-c\" title=\"2d array pointer access segmentation fault in c\">stackoverflow.com/questions/36782015/&hellip;</a>"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 3, "last_activity_date": 1461158708, "last_edit_date": 1495539856, "creation_date": 1461158116, "answer_id": 36745029, "question_id": 36744561, "link": "https://stackoverflow.com/questions/36744561/create-2d-array-by-passing-pointer-to-function-in-c/36745029#36745029", "title": "Create 2D array by passing pointer to function in c", "body": "<p>Forget about pointer-to-pointers. They have nothing to do with 2D arrays.</p>\n\n<p>How to do it correctly: <a href=\"https://stackoverflow.com/questions/12462615/how-do-i-correctly-set-up-access-and-free-a-multidimensional-array-in-c\">How do I correctly set up, access, and free a multidimensional array in C?</a>.</p>\n\n<p>One of many reasons why it is wrong to use pointer-to-pointer: <a href=\"https://stackoverflow.com/questions/30117161/why-do-i-need-to-use-type-to-point-to-type\">Why do I need to use type** to point to type*?</a>.</p>\n\n<p>Example of how you could do it properly:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nvoid* create_2D_array (size_t x, size_t y)\n{\n  int (*array)[y] = malloc( sizeof(int[x][y]) );\n\n  for (size_t i = 0; i &lt; x; ++i) \n  {\n    for (size_t j = 0; j &lt; y; ++j) \n    {\n      array[i][j] = (int)(i + j);\n    }\n  }\n\n  return array;\n}\n\nvoid print_2D_array (size_t x, size_t y, int array[x][y])\n{\n  for (size_t i = 0; i &lt; x; ++i) \n  {\n    for (size_t j = 0; j &lt; y; ++j) \n    {\n      printf(\"%d \", array[i][j]);\n    }\n    printf(\"\\n\");\n  }\n}\n\n\nint main (void)\n{\n  size_t x = 5;\n  size_t y = 3;\n\n  int (*arr_2D)[y];\n\n  arr_2D = create_2D_array(x, y);\n\n  print_2D_array(x, y, arr_2D);\n\n  free(arr_2D);\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6230317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259164aefb0ec481eed55efa48215394?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin ", "link": "https://stackoverflow.com/users/6230317/marcin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 36744785, "answer_count": 3, "score": 3, "last_activity_date": 1461163462, "creation_date": 1461157084, "question_id": 36744561, "link": "https://stackoverflow.com/questions/36744561/create-2d-array-by-passing-pointer-to-function-in-c", "title": "Create 2D array by passing pointer to function in c", "body": "<p>So I read dozens of examples of passing an 2D array pointer to function to get/change values of that array in function. But is it possible to create (allocate memory) inside the function. Something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid createArr(int** arrPtr, int x, int y);\n\nint main() {\n\n    int x, y;       //Dimension\n    int i, j;       //Loop indexes\n    int** arr;      //2D array pointer\n    arr = NULL;\n    x=3;\n    y=4;\n\n    createArr(arr, x, y);\n\n    for (i = 0; i &lt; x; ++i) {\n        for (j = 0; j &lt; y; ++j) {\n            printf(\"%d\\n\", arr[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    _getch();    \n}\n\nvoid createArr(int** arrPtr, int x, int y) {\n    int i, j;       //Loop indexes\n    arrPtr = malloc(x*sizeof(int*));\n    for (i = 0; i &lt; x; ++i)\n        arrPtr[i] = malloc(y*sizeof(int));\n\n    for (i = 0; i &lt; x; ++i) {\n        for (j = 0; j &lt; y; ++j) {\n            arrPtr[i][j] = i + j;\n        }\n    }    \n}\n</code></pre>\n"}, {"tags": ["c", "posix", "system-calls"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1461156194, "post_id": 36744149, "comment_id": 61069464, "body": "You can <code>write(STDOUT_FILENO, &quot;Hello World&quot;, strlen(&quot;Hello World&quot;));</code>"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1461156309, "post_id": 36744149, "comment_id": 61069546, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, and learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1461156435, "post_id": 36744149, "comment_id": 61069651, "body": "As for your problem, start by tracing to see what system calls are actually made in your program, then learn the <code>syscall</code> interface and how to use it. And <i>experiment</i>."}, {"owner": {"reputation": 9, "user_id": 6230244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ee4b63c74055e0c2f8ac6c386de696?s=128&d=identicon&r=PG&f=1", "display_name": "Csgo Fresh", "link": "https://stackoverflow.com/users/6230244/csgo-fresh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1461156601, "post_id": 36744149, "comment_id": 61069782, "body": "@EOF thx, but <code>write</code> is built-in function as well, but I want to execute the system call directly."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1461156897, "post_id": 36744149, "comment_id": 61070032, "body": "<code>syscall(SYS_write, STDOUT_FILENO, &quot;Hello World&quot;, strlen(&quot;Hello World&quot;));</code> should work, but portability will be much worse."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 0, "creation_date": 1461157919, "post_id": 36744149, "comment_id": 61070913, "body": "<code>printf</code> is not a system call.  If you use <code>syscall</code> to call something here, it&#39;s going to have to be <code>write</code>.  (Depending on what you&#39;re trying to accomplish, it might be sufficient to use <code>sprintf</code> to format your string, then <code>syscall</code> to write it.)"}], "owner": {"reputation": 9, "user_id": 6230244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65ee4b63c74055e0c2f8ac6c386de696?s=128&d=identicon&r=PG&f=1", "display_name": "Csgo Fresh", "link": "https://stackoverflow.com/users/6230244/csgo-fresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461156116, "creation_date": 1461156116, "question_id": 36744149, "link": "https://stackoverflow.com/questions/36744149/c-explicit-syscall", "title": "C Explicit syscall()", "body": "<p>How can I rewrite the program below using <code>syscall()</code> function to do the system calls myself instead of using built-in <code>printf</code>? (I am interested in Linux, if that makes any difference.)</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nmain()\n{\n    printf(\"Hello World\");\n\n}\n</code></pre>\n"}, {"tags": ["c", "3d"], "comments": [{"owner": {"reputation": 7400, "user_id": 4391177, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zEh1N.jpg?s=128&g=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/4391177/sumeet"}, "edited": false, "score": 0, "creation_date": 1461156481, "post_id": 36744148, "comment_id": 61069687, "body": "Do you have co-ordinates of point B?"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 6230312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc3d11351a24c419b625ac5e877dfe4?s=128&d=identicon&r=PG&f=1", "display_name": "Keiji", "link": "https://stackoverflow.com/users/6230312/keiji"}, "is_accepted": false, "score": 1, "last_activity_date": 1461158761, "creation_date": 1461158761, "answer_id": 36745325, "question_id": 36744148, "link": "https://stackoverflow.com/questions/36744148/find-3d-coordinates-of-end-point-of-a-vector-given-the-distance-and-the-angle/36745325#36745325", "title": "Find 3D coordinates of end point of a vector given the distance and the angle", "body": "<p>To define a vector in 3D, given its length, you need 2 angles. These 3 coordinates (length + 2 angles) are named \"spherical coordinates\". There are 3 conventions for defining such angles. The most common one is the radius-elevation-azimuth. In this convention, expression of the cartesian coordinates of the vector, given the radius, elevation angle and azimuth angle are:</p>\n\n<pre><code>x = radius * sin(elevation) * cos(azimuth)\ny = radius * sin(elevation) * sin(azimuth)\nz = radius * cos(elevation)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3904916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d539a9a8802188d621326bb884e9a7?s=128&d=identicon&r=PG&f=1", "display_name": "Myriam", "link": "https://stackoverflow.com/users/3904916/myriam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461158761, "creation_date": 1461156115, "question_id": 36744148, "link": "https://stackoverflow.com/questions/36744148/find-3d-coordinates-of-end-point-of-a-vector-given-the-distance-and-the-angle", "title": "Find 3D coordinates of end point of a vector given the distance and the angle", "body": "<p>How can I find the coordinates of P ? I've seen other posts in 2D and also in 3D but they say that I need 3 angles for 3D and some say I only need two but I dont understand which ones, I suck at math. </p>\n\n<p><a href=\"http://i.stack.imgur.com/6iEQ9.jpg\" rel=\"nofollow\"> All See this image, I have is those two angles and the distance between B and P</a></p>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "reply_to_user": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1461156204, "post_id": 36744123, "comment_id": 61069471, "body": "@nhgrif I don&#39;t know what can I do to try this."}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1461156244, "post_id": 36744123, "comment_id": 61069497, "body": "How do you know &amp; understand the first half of this post then?"}, {"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "reply_to_user": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1461156297, "post_id": 36744123, "comment_id": 61069532, "body": "@nhgrif I understand all parts of the post. I just don&#39;t know what should I check for."}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1461156316, "post_id": 36744123, "comment_id": 61069554, "body": "The memory address (before &amp; after the arithmetic)?  How much space did <code>++</code> or <code>--</code> move it by for the various types of pointers?  I mean, this truly is basic addition and subtraction."}, {"owner": {"reputation": 724, "user_id": 4873907, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/744993b2ee1d447ea162c90a0e2e8af0?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Straccia", "link": "https://stackoverflow.com/users/4873907/francis-straccia"}, "edited": false, "score": 0, "creation_date": 1461156569, "post_id": 36744123, "comment_id": 61069759, "body": "&gt; So, do different types of higher order pointers have any differences? Generally speaking, yes: they are of different type."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1461156798, "post_id": 36744123, "comment_id": 61069958, "body": "There are no standard requirements about the size of a pointer"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 1, "creation_date": 1461157314, "post_id": 36744123, "comment_id": 61070380, "body": "Why the downvotes?"}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "reply_to_user": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 0, "creation_date": 1461157441, "post_id": 36744123, "comment_id": 61070490, "body": "@nhgrif Please don&#39;t tell him to try it.  That&#39;s like telling someone who&#39;s wondering what <code>i++ + i++</code> is supposed to do to try it on his compiler and find out."}, {"owner": {"reputation": 1093, "user_id": 1571801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b739aed4dad18fc8844f52352fd554a2?s=128&d=identicon&r=PG", "display_name": "atturri", "link": "https://stackoverflow.com/users/1571801/atturri"}, "edited": false, "score": 0, "creation_date": 1461157448, "post_id": 36744123, "comment_id": 61070500, "body": "I find it to be a good question. Trying on execution will not solve anything. The space moved by <code>++</code> for different pointer types might be the same for him, in HIS compiler and HIS machine. It might not be so for me. Or yes, if the standard specifies it that way. But that&#39;s what he is asking."}], "answers": [{"comments": [{"owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "edited": false, "score": 0, "creation_date": 1461156367, "post_id": 36744216, "comment_id": 61069596, "body": "But since pointer arithmetics will work the same for <code>char **</code> and <code>int **</code>, are they the same?"}, {"owner": {"reputation": 57830, "user_id": 2792531, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/teNzk.gif?s=128&g=1", "display_name": "nhgrif", "link": "https://stackoverflow.com/users/2792531/nhgrif"}, "edited": false, "score": 2, "creation_date": 1461156371, "post_id": 36744216, "comment_id": 61069601, "body": "I&#39;m not certain that this answer really adds anything that the question itself doesn&#39;t cover.  I might be wrong though...."}], "tags": [], "owner": {"reputation": 6309, "user_id": 717822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f7e6a550ddff2d2288933bfd21d49a14?s=128&d=identicon&r=PG", "display_name": "perror", "link": "https://stackoverflow.com/users/717822/perror"}, "is_accepted": false, "score": 0, "last_activity_date": 1461156371, "last_edit_date": 1461156371, "creation_date": 1461156278, "answer_id": 36744216, "question_id": 36744123, "link": "https://stackoverflow.com/questions/36744123/are-double-or-higher-order-pointers-of-different-types-have-any-differences/36744216#36744216", "title": "Are double (or higher order) pointers of different types have any differences?", "body": "<p>Basically, in C language, a pointer is more than a memory address. It is a <strong>memory address</strong> AND a <strong>type</strong>.</p>\n\n<p>The type is needed when you use pointer arithmetics. For example: <code>ptr + 2</code> means that you shift the current position of the pointer in memory by 2 <code>sizeof(pointed type by ptr)</code>.</p>\n\n<p>So, a pointer of pointer differ from a simple pointer by its type... That's all.</p>\n"}, {"tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 2, "last_activity_date": 1461157116, "last_edit_date": 1461157116, "creation_date": 1461156796, "answer_id": 36744434, "question_id": 36744123, "link": "https://stackoverflow.com/questions/36744123/are-double-or-higher-order-pointers-of-different-types-have-any-differences/36744434#36744434", "title": "Are double (or higher order) pointers of different types have any differences?", "body": "<p>Formally speaking, yes, these pointer types are different.  They have different types, types which are important to the programmer and which the compiler keeps intimate track of.  You can prove they're different by trying to compile </p>\n\n<pre><code>char **cdptr;\nint **idptr = NULL;\n\ncdptr = idptr;\n</code></pre>\n\n<p>Your compiler will complain.  (gcc says \"assignment from incompatible pointer type\".)  You can also convince yourself that they're different by noticing what happens when you indirect on them: <code>cdptr[1][2]</code> is of course a char, while <code>idptr[1][2]</code> is an int.</p>\n\n<p>Now, it's true, since <code>sizeof(*cdptr)</code> almost certainly equals <code>sizeof(*idptr)</code>, pointer arithmetic like <code>cdptr++</code> and <code>idptr++</code> will generate the same code.  But this doesn't strike me as a terribly useful fact -- it's about as interesting as observing that if we declare</p>\n\n<pre><code>int *iptr;\nchar **cdptr;\n</code></pre>\n\n<p>we get the same code for <code>iptr++</code> and <code>cdptr++</code> on a machine where ints and pointers happen to be the same size.  But this doesn't tell us anything we can use while writing C programs.  \"Generate the same code when incremented\" does not equal \"are the same\".</p>\n"}], "owner": {"reputation": 1697, "user_id": 3395831, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c76732996d10182885b6ac1046e13c95?s=128&d=identicon&r=PG&f=1", "display_name": "Utku", "link": "https://stackoverflow.com/users/3395831/utku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1461157116, "creation_date": 1461156049, "question_id": 36744123, "link": "https://stackoverflow.com/questions/36744123/are-double-or-higher-order-pointers-of-different-types-have-any-differences", "title": "Are double (or higher order) pointers of different types have any differences?", "body": "<p>AFAIK, the size occupied by <em>any</em> type of pointer is the same on a <em>given</em> architecture. That is, the only difference between different types of pointers is what will happen when we use an operation such as <code>ptr++</code> or <code>ptr--</code> on the pointer.</p>\n\n<p>As an example:</p>\n\n<p><code>char *cptr;</code></p>\n\n<p><code>int *iptr;</code></p>\n\n<p>occupy the same amount of memory (such as 4 bytes, or 8 bytes or something else). However, the difference is what will happen when we use the increment (or decrement) operator on the pointers. <code>cptr++</code> will increment <code>cptr</code> by 1, while <code>iptr++</code> will increase <code>iptr</code> by 4 (depending on the architecture, it can be a different value than 4 as well).</p>\n\n<h2>The Question</h2>\n\n<p>My question is, are there any differences between:</p>\n\n<p><code>char **cdptr;</code></p>\n\n<p><code>int **idptr;</code></p>\n\n<p>(Assume that for the machine under mention, pointers have a size of 4 bytes)</p>\n\n<p>Since both are pointers, both will occupy the same amount of space: 4 bytes. Also, since both point to something that occupy the same size (again, 4 bytes), operations <code>char cdptr++</code> and <code>int idptr++</code> will work exactly the same on these two pointers (incrementing them by 4 respectively).</p>\n\n<p>So, do different types of higher order pointers have any differences?</p>\n"}, {"tags": ["c", "stdout", "fifo", "dup", "execl"], "comments": [{"owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1461157014, "post_id": 36744091, "comment_id": 61070124, "body": "yeah, i just used it as an example"}], "answers": [{"tags": [], "owner": {"reputation": 27359, "user_id": 1141471, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/t1JZE.png?s=128&g=1", "display_name": "4pie0", "link": "https://stackoverflow.com/users/1141471/4pie0"}, "is_accepted": true, "score": 1, "last_activity_date": 1461165610, "last_edit_date": 1461165610, "creation_date": 1461156843, "answer_id": 36744456, "question_id": 36744091, "link": "https://stackoverflow.com/questions/36744091/print-to-screen-from-fifo-stdout-failed/36744456#36744456", "title": "print to screen from fifo stdout failed", "body": "<p>I am afraid your requirements conflict with each other.</p>\n\n<blockquote>\n  <p>I want only first child to make sure that everything he writes to my\n  FIFO will be printed out to the screen.</p>\n</blockquote>\n\n<p>Therefore FIFO must print to the console whatever it gets. FIFO doesn't distinguish between processes that have printed to it. It doesn't know that it is the first or the second child that called write at this time <sup>1</sup>.</p>\n\n<blockquote>\n  <p>preventing the other child to print messages to the screen, only to\n  the FIFO</p>\n</blockquote>\n\n<p>Therefore this contradicts above, because printing \"only to the fifo\" must print to the screen too if former requirement is to be met.\nYou can achieve what you want by printing separately to fifo and to the stdout.</p>\n\n<p><sup>1</sup> (unless you change kernel code to for example check the first byte of message to be printed, so you would then prefix each data with '1' or '2' or whatever you choose and take appropriate action in kernel based on that - but then what is going to happen to all other uses of fifo on your machine is nothing good most likely, so don't do it)</p>\n"}], "owner": {"reputation": 143, "user_id": 5585119, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55328b73f431c485a479b1e6d382238b?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar Argov", "link": "https://stackoverflow.com/users/5585119/zohar-argov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 36744456, "answer_count": 1, "score": 0, "last_activity_date": 1461165610, "creation_date": 1461155977, "question_id": 36744091, "link": "https://stackoverflow.com/questions/36744091/print-to-screen-from-fifo-stdout-failed", "title": "print to screen from fifo stdout failed", "body": "<p>I have a program which has 2 children (running 2 processes by execl), and one fifo.\nI can't use printf, and I want both children to write and read from fifo.\nproblem is, I want only <strong>first</strong> child to make sure that everything he writes to my FIFO will be printed out to the screen. \"fifoCommunication\" is the name of the fifo created by father.\nhere is the code inside the first child's process only:</p>\n\n<pre><code>int main()    {\nint fd_write = open(\"fifoCommunication\",O_WRONLY);\ndup(fd_write,0);\nwrite(fd_write,\"to be printed to screen!\" ,18);}\n</code></pre>\n\n<p>I know it's not the right syntax, but I don't know how to make sure the message is printed to the screen properly, and also preventing the other child to print messages to the screen, only to the FIFO.</p>\n"}, {"tags": ["c", "tizen-native-app"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1461156008, "post_id": 36743906, "comment_id": 61069317, "body": "OT: in <code>snprintf</code> the generated string has a length of at most n-1, use <code>sizeof tempbuf</code> instead of <code>1023</code>"}], "answers": [{"tags": [], "owner": {"reputation": 341, "user_id": 2589815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/840ddd64b5b99b7e0578e9e1c8c743eb?s=128&d=identicon&r=PG", "display_name": "nafser33", "link": "https://stackoverflow.com/users/2589815/nafser33"}, "is_accepted": false, "score": 2, "last_activity_date": 1461837788, "creation_date": 1461837788, "answer_id": 36911338, "question_id": 36743906, "link": "https://stackoverflow.com/questions/36743906/how-to-improve-gear-s2-acceleration-sensor-sample-rate/36911338#36911338", "title": "How to improve Gear S2 Acceleration Sensor sample rate", "body": "<p>The function you are referring for the interval is not appropriate.\nRather you should use the following function for this purpose:</p>\n\n<pre><code>error = sensor_listener_set_interval(listener, 10);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>error = sensor_listener_set_interval(listener, 100);\n</code></pre>\n\n<p>You can check the log by using the following code:</p>\n\n<pre><code>void on_sensor_event(sensor_h sensor, sensor_event_s * event, void * user_data) {\n\ndlog_print(DLOG_DEBUG, LOG_TAG, \"Sensor Called- %llu&lt;br/&gt;\", event-&gt;timestamp / 1000);\n// Select a specific sensor with a sensor handle\n\nsensor_type_e type;\nsensor_get_type(sensor,  &amp; type);\n\nswitch (type) {\ncase SENSOR_ACCELEROMETER:\n    dlog_print(DLOG_INFO, LOG_TAG, \"sensor data read successfully\");\n\n    char buf[1024];\n    char tempbuf[1024];\n    snprintf(buf, 1023, \"Sensor data read successfully detected.&lt;br/&gt;\");\n\n    for (int i = 0; i &lt; event-&gt;value_count; i++) {\n        snprintf(tempbuf, sizeof tempbuf, \"Sensor value[%d] is - %f&lt;br/&gt;\", i, event-&gt;values[i]);\n        strcat(buf, tempbuf);\n    }\n\n    snprintf(tempbuf, sizeof tempbuf, \"Sensor timestamp is - %llu&lt;br/&gt;\", event-&gt;timestamp);\n    strcat(buf, tempbuf);\n\n    snprintf(tempbuf, sizeof tempbuf, \"Sensor accuracy is - %d&lt;br/&gt;\", event-&gt;accuracy);\n    strcat(buf, tempbuf);\n    elm_object_text_set(event_label, buf);\n\n    break;\ndefault:\n    dlog_print(DLOG_ERROR, LOG_TAG, \"Not an Accelerometer event\");\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Hope this solution will serve your purpose.</p>\n"}], "owner": {"reputation": 147, "user_id": 3092763, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/87e57b9c32a5ace4a0bbba294cc166e9?s=128&d=identicon&r=PG&f=1", "display_name": "ossx", "link": "https://stackoverflow.com/users/3092763/ossx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461837788, "creation_date": 1461155499, "question_id": 36743906, "link": "https://stackoverflow.com/questions/36743906/how-to-improve-gear-s2-acceleration-sensor-sample-rate", "title": "How to improve Gear S2 Acceleration Sensor sample rate", "body": "<p>I want to calculate the acceleration sensor sample rate on a Samsung Gear S2.\nUsing the following code as example \n<a href=\"https://developer.tizen.org/ko/community/code-snippet/native-code-snippet/simple-sensors-application-wearable?langredirect=1\" rel=\"nofollow\">https://developer.tizen.org/ko/community/code-snippet/native-code-snippet/simple-sensors-application-wearable?langredirect=1</a>, I created the app.</p>\n\n<p>I register the callback with 10ms </p>\n\n<pre><code>    /* Register a callback if a sensor event is detected (sensor value changed) */\n    ret = sensor_listener_set_event_cb((ad-&gt;listener), 10, on_sensor_event, ad);\n</code></pre>\n\n<p>and I calculate the sampling rate with </p>\n\n<pre><code>unsigned long long int timestampArray[1000000];\nint i = 1;\nunsigned int samplingFreq = 1;\n\n/* Callback for whenever a sensor event is detected (such as value changed). It is called whenever such an event is detected */\nvoid on_sensor_event(sensor_h sensor, sensor_event_s *event, void *data) {\nappdata_s *ad = data;\n\nchar buf[1024]={0};\nchar tempbuf[1024]={0};\n\nsensor_type_e type;\nsensor_get_type(sensor, &amp;type);\n\n//Check the sensor type of the sensor event\nif(type == (ad-&gt;type)){\n\n    timestampArray[i] = event-&gt;timestamp/1000;\n    if(i == 2)\n    {\n        samplingFreq = timestampArray[i]-timestampArray[i-1];\n    }\n\n    i++;\n\n    snprintf(tempbuf, 1023, \"F= %d&lt;br/&gt;\", samplingFreq);\n    strcat(buf, tempbuf);\n\n    elm_object_text_set(ad-&gt;label, buf);\n}\n}\n</code></pre>\n\n<p>With this, the acceleration sampling frequency stays at around 50Hz (so one sample every 19-20 ms).</p>\n\n<p>Do you know why I can't get lower than that? (My goal would be 1 sample every 10ms - minimum supported)</p>\n\n<p>Thank you.</p>\n\n<p>This is my first question so I would be glad to receive improvement ideas as well.</p>\n\n<p>Knowledge: C - beginner, Tizen - beginner</p>\n"}, {"tags": ["c", "arrays", "teradata"], "comments": [{"owner": {"reputation": 7496, "user_id": 120504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/429eb788afefe150e1abcbddab57df8d?s=128&d=identicon&r=PG", "display_name": "Rob Paller", "link": "https://stackoverflow.com/users/120504/rob-paller"}, "edited": false, "score": 0, "creation_date": 1461154507, "post_id": 36743378, "comment_id": 61068190, "body": "Do you have any sample code for what you have tried thus far?"}, {"owner": {"reputation": 484, "user_id": 5047467, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-43T_KPm4C-A/AAAAAAAAAAI/AAAAAAAAACw/rOJzINeAqkE/photo.jpg?sz=128", "display_name": "Subbi reddy dwarampudi", "link": "https://stackoverflow.com/users/5047467/subbi-reddy-dwarampudi"}, "reply_to_user": {"reputation": 7496, "user_id": 120504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/429eb788afefe150e1abcbddab57df8d?s=128&d=identicon&r=PG", "display_name": "Rob Paller", "link": "https://stackoverflow.com/users/120504/rob-paller"}, "edited": false, "score": 0, "creation_date": 1461158704, "post_id": 36743378, "comment_id": 61071575, "body": "@RobPaller i updated question with my problem..Please let me know if you require any more details"}], "answers": [{"comments": [{"owner": {"reputation": 54566, "user_id": 2527905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aY8e6.jpg?s=128&g=1", "display_name": "dnoeth", "link": "https://stackoverflow.com/users/2527905/dnoeth"}, "edited": false, "score": 0, "creation_date": 1461848849, "post_id": 36912341, "comment_id": 61393227, "body": "The size of an <i>intermediate storage block</i> is limited to 64000 bytes and not 64 byte: <a href=\"http://www.info.teradata.com/htmlpubs/DB_TTU_15_10/index.html#page/SQL_Reference/B035_1147_151K/C_UDFs.045.073.html\" rel=\"nofollow noreferrer\">info.teradata.com/htmlpubs/DB_TTU_15_10/index.html#page/&hellip;</a>"}], "tags": [], "owner": {"reputation": 484, "user_id": 5047467, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-43T_KPm4C-A/AAAAAAAAAAI/AAAAAAAAACw/rOJzINeAqkE/photo.jpg?sz=128", "display_name": "Subbi reddy dwarampudi", "link": "https://stackoverflow.com/users/5047467/subbi-reddy-dwarampudi"}, "is_accepted": true, "score": -1, "last_activity_date": 1461840283, "creation_date": 1461840283, "answer_id": 36912341, "question_id": 36743378, "link": "https://stackoverflow.com/questions/36743378/irrinternal-rate-of-return-udf-in-teradata/36912341#36912341", "title": "IRR(Internal Rate of Return) UDF in TeraData", "body": "<p>We can declare arrays in Teradata as we do in C. But please keep in mind that for UDF each intermediate storage block space is limited to 64 bytes.so if you are defining an integer array you cant make array larger than 16 integers(integer takes 4 bytes 16*4=64). Same goes with other datatypes as well.</p>\n\n<p>So change your code to</p>\n\n<pre><code>typedef struct agr_storage {\n        int count;\n        int elements[*Number here*];\n} AGR_Storage;\n</code></pre>\n\n<p>The cumulative sum of all the declared datatypes should be less than 64 bytes. </p>\n"}], "owner": {"reputation": 484, "user_id": 5047467, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-43T_KPm4C-A/AAAAAAAAAAI/AAAAAAAAACw/rOJzINeAqkE/photo.jpg?sz=128", "display_name": "Subbi reddy dwarampudi", "link": "https://stackoverflow.com/users/5047467/subbi-reddy-dwarampudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 36912341, "answer_count": 1, "score": 0, "last_activity_date": 1461840283, "creation_date": 1461154255, "last_edit_date": 1461159106, "question_id": 36743378, "link": "https://stackoverflow.com/questions/36743378/irrinternal-rate-of-return-udf-in-teradata", "title": "IRR(Internal Rate of Return) UDF in TeraData", "body": "<p>i'm trying to create a UDF for <a href=\"http://www.investopedia.com/terms/i/irr.asp\" rel=\"nofollow\">IRR</a> in Teradata.</p>\n\n<p>I want store all the elements of row in my intermediate storage in the form of array(appending one at a time).This help me to use the elements multiple times(going with trial and error logic)</p>\n\n<p>I just want to know, which is the compatible data type to use in \"typedef\" for this requirement in teradata?</p>\n\n<p>As IRR logic is some what lengthy, im representing my problem here with the help of a new sum_redefined function.</p>\n\n<p>Im just trying to calculate sum the passed arguments(row elements) by storing them into a array and adding them afterwards.</p>\n\n<p>Here is my code:</p>\n\n<p>Note: The below is obviously wont compile because i'm still trying to understand the correct data type in Teradata for C Arrays.</p>\n\n<pre><code>#define SQL_TEXT Latin_Text\n#include &lt;sqltypes_td.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\ntypedef struct agr_storage {\n        int count;\n        ARRAY_HANDLE elements[100];\n} AGR_Storage;\n\nvoid SUM_REDEFINED( FNC_Phase phase,\n              FNC_Context_t *fctx,\n              FLOAT *x, //here im passing row element one by one\n              FLOAT *result,\n              int *x_i,\n              int *result_i,\n              char sqlstate[6],\n              SQL_TEXT fncname[129],\n              SQL_TEXT sfncname[129],\n              SQL_TEXT error_message[257] )\n{\n\n     AGR_Storage *s1 = fctx-&gt;interim1;\n\n     switch (phase)\n     {\n\n     case AGR_INIT:\n     s1 = FNC_DefMem(sizeof(AGR_Storage));\n     if (s1 == NULL)\n     {\n        strcpy(sqlstate, \"U0001\");\n        return;\n     }\n     s1-&gt;count = 0;\n     s1-&gt;elements[100]={0};\n\n     case AGR_DETAIL:\n     if (*x_i != -1)\n     {\n     s1-&gt;count++;\n     s1-&gt;elemnts[s1-&gt;count]=*x;//appending elemts one by one\n\n     break;\n\n     case AGR_COMBINE:\n\n\n     case AGR_FINAL:\n     {\n        int no_of_elements=s1-&gt;count;\n        int i=0;\n        FLOAT sum=0;\n        for(i=0;i&lt;no_of_elements;i++){\n                sum+=s1-&gt;elements[i];    //adding all the elements\n                }\n\n     *result = sum;  //returning the sum\n     break;\n     }\n\n     case AGR_NODATA:\n          *result_i = -1;\n          break;\n\n     default:\n             /* If it gets here there must be an error because this */\n             /* function does not accept any other phase options */\n             strcpy(sqlstate, \"U0005\");\n     }\n     return;\n} \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1461151637, "post_id": 36742354, "comment_id": 61066110, "body": "Why do you think your program would give the expected output? Do you understand the difference between <code>&quot;%s&quot;</code> and <code>&quot;%c&quot;</code> format specifier in <code>printf</code> and how to make array of C-strings?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 3, "creation_date": 1461152234, "post_id": 36742354, "comment_id": 61066532, "body": "The valid indexing values to <code>str2</code> range from <code>0</code> to <code>ln - 1</code>. The code accesses <code>str2</code> out of those bounds."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1461152863, "post_id": 36742354, "comment_id": 61066974, "body": "<code>scanf(&quot;%s&quot;,str);</code> --&gt; <code>scanf(&quot;%99s&quot;,str);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461152089, "post_id": 36742450, "comment_id": 61066435, "body": "Did you use a debugger to understand why?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6229858"}, "edited": false, "score": 0, "creation_date": 1461152178, "post_id": 36742450, "comment_id": 61066486, "body": "dev c++ force closes when i try to debug it !!"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461152252, "post_id": 36742450, "comment_id": 61066545, "body": "Are you building in <a href=\"http://eilat.sci.brooklyn.cuny.edu/cis1_5/HowToDebug.htm\" rel=\"nofollow noreferrer\">debug mode</a>?"}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 1, "last_activity_date": 1461151796, "creation_date": 1461151796, "answer_id": 36742450, "question_id": 36742354, "link": "https://stackoverflow.com/questions/36742354/why-this-c-program-gives-random-string-as-output-where-i-have-done-something-wro/36742450#36742450", "title": "Why This C program gives random string as output,where i have done something wrong", "body": "<p><strong>Problem</strong><BR>You assume <code>char str2[ln];</code> is an array of c-strings. But in reality it is array of <code>char</code> which can behave as single <code>C-string</code>.</p>\n\n<p><strong>Solution</strong><BR> One of the solution is to use 2 dimensional array of <code>char</code>s to behave as array of C-string.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6229858"}, "edited": false, "score": 0, "creation_date": 1461153386, "post_id": 36742818, "comment_id": 61067342, "body": "ya i changed it with 2 dimensional array but what i need to print is the strings in reverse order . Input :- what is your name  Output :- name your is what  without reverse order it works fine with for loop with <code>for(i=0;i&lt;ln;i++)</code> but with <code>for(i=ln;i&gt;1;i--)</code> it prints something unwanted ."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "edited": false, "score": 0, "creation_date": 1461153552, "post_id": 36742818, "comment_id": 61067473, "body": "reverse order in the case each word or characters from last to first?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "edited": false, "score": 0, "creation_date": 1461153660, "post_id": 36742818, "comment_id": 61067547, "body": "I have edited my answer, use: for(i=ln;i&gt;=0;i--) instead of for(i=0;i&lt;ln;i++)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6229858"}, "edited": false, "score": 0, "creation_date": 1461153864, "post_id": 36742818, "comment_id": 61067699, "body": "ya reverse order , last words comes at first place ,2nd last at 2nd place from begining and so on ..check out the image output <a href=\"http://s31.postimg.org/dfo8vs1jv/Untitled.png\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "reply_to_user": {"reputation": 6951, "user_id": 3475381, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b6a1c5d19f4ae8c6a1dbf097487c96d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Sehgal", "link": "https://stackoverflow.com/users/3475381/gaurav-sehgal"}, "edited": false, "score": 0, "creation_date": 1461167497, "post_id": 36742818, "comment_id": 61078895, "body": "@Gaurav, yes. I forgot. I have edited. Thanks for correcting me. :-)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "edited": false, "score": 0, "creation_date": 1461167559, "post_id": 36742818, "comment_id": 61078954, "body": "@Mahaveer, it prints the output like you want. I have tested it too."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6229858"}, "edited": false, "score": 0, "creation_date": 1461168097, "post_id": 36742818, "comment_id": 61079330, "body": "thanks buddys .. it worked without &quot;ln-1&quot; all i needed to change is 2dimensional array."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "edited": false, "score": 0, "creation_date": 1461168251, "post_id": 36742818, "comment_id": 61079424, "body": "Yes. But you need to include &quot;ln-1&quot; in order to stop run time error, out of bound error."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "edited": false, "score": 0, "creation_date": 1461168292, "post_id": 36742818, "comment_id": 61079463, "body": "why don&#39;t you hit the select answer :-)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "is_accepted": false, "score": 1, "last_activity_date": 1461167454, "last_edit_date": 1461167454, "creation_date": 1461152809, "answer_id": 36742818, "question_id": 36742354, "link": "https://stackoverflow.com/questions/36742354/why-this-c-program-gives-random-string-as-output-where-i-have-done-something-wro/36742818#36742818", "title": "Why This C program gives random string as output,where i have done something wrong", "body": "<p>In you code:</p>\n\n<pre><code>char str2[ln];//this declares an array with size 4 characters, not 4 arrays with dynamic size\nprintf(\"enter string 2\\n\");\nfor(i=1;i&lt;=ln;i++)//i should start from 0, better way to do, else we will be wasting the 1st byte\nscanf(\"%s\",&amp;str2[i]);//%s in scanf expect char array in 2nd parameter, but &amp;str2[i] indicates a character\nprintf(\"\\n____________\\n\");\nfor(i=ln;i&gt;=1;i--)\nprintf(\"%s \",&amp;str2[i]);//%s says to print a character array, but the second parameter passed,&amp;str2[i], is a character\n</code></pre>\n\n<p>try this instead, this will meet your requirements:</p>\n\n<pre><code>char str2[ln][20];//each sub array with 20 characters size\nprintf(\"enter string 2\\n\");\nfor(i=0;i&lt;ln;i++)\n{\n    scanf(\"%s\",str2[i]);\n}\nprintf(\"\\n____________\\n\");\nfor(i=ln-1;i&gt;=0;i--)\nprintf(\"%s \",str2[i]);\nprintf(\"\\n\");\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6229858"}, "edited": false, "score": 0, "creation_date": 1461154247, "post_id": 36743182, "comment_id": 61067993, "body": "even this one is not working properly see this <a href=\"http://s31.postimg.org/ukmjvao63/image.png\" rel=\"nofollow noreferrer\">link</a>  and what i want to know is why the program i have posted gives this type of output ??"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1461154644, "post_id": 36743182, "comment_id": 61068279, "body": "@Mahaveer your sample is <code>Mahaveer is my name</code> --&gt; <code>name is my mahaveer</code>.  Do you hope is to reverse the whole?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6229858"}, "edited": false, "score": 0, "creation_date": 1461156469, "post_id": 36743182, "comment_id": 61069673, "body": "ya i want output as you have written."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1461157183, "post_id": 36743182, "comment_id": 61070267, "body": "@Mahaveer I update answer. &quot;expected output :- name is my mahaveer&quot; should be modified."}], "tags": [], "owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "is_accepted": false, "score": 0, "last_activity_date": 1461157039, "last_edit_date": 1461157039, "creation_date": 1461153755, "answer_id": 36743182, "question_id": 36742354, "link": "https://stackoverflow.com/questions/36742354/why-this-c-program-gives-random-string-as-output-where-i-have-done-something-wro/36743182#36743182", "title": "Why This C program gives random string as output,where i have done something wrong", "body": "<p>try this</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main(void){\n    int i, j;\n    char str[100];\n    char *words[50], *word;\n\n    printf(\"Input :- \\n\");\n    fgets(str, sizeof str, stdin);\n    strlwr(str);//convert to lowcase\n\n    i = 0;\n    word = strtok(str, \" \\t\\n\");//split to word\n    while(word){\n        words[i++] = word;\n        word = strtok(NULL, \" \\t\\n\");\n    }\n#if 0\n    //swap head and tail\n    if(i){\n        word = words[i-1];\n        words[i-1] = words[0];\n        words[0] = word;\n    }\n    for(j = 0; j &lt; i; ++j){\n        if(j)\n            putchar(' ');\n        printf(\"%s\", words[j]);\n    }\n#else\n    //reverse word\n    for(j = i-1; j &gt;= 0; --j){\n        printf(\"%s\", words[j]);\n        if(j)\n            putchar(' ');\n    }\n#endif\n    puts(\"\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6229858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 3, "score": -6, "last_activity_date": 1461167454, "creation_date": 1461151542, "last_edit_date": 1461154297, "question_id": 36742354, "link": "https://stackoverflow.com/questions/36742354/why-this-c-program-gives-random-string-as-output-where-i-have-done-something-wro", "title": "Why This C program gives random string as output,where i have done something wrong", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid main()\n{\n    int i;\n    char str[100];\n    printf(\"Enter a string\\n\");\n    scanf(\"%s\",str);\n    int ln = strlen(str);\n\n    char str2[ln][ln];\n    printf(\"enter string 2\\n\");\n    for(i=1;i&lt;=ln;i++)\n    scanf(\"%s\",str2[i]);\n    printf(\"\\n____________\\n\");\n    for(i=ln;i&gt;=1;i--)\n    printf(\"%s \",str2[i]);\n\n\n}\n</code></pre>\n\n<p>is this program proper or am i missing something in it , it gives wrong output \n.<bR>\nInput :-  zero<br>\n          Mahaveer is my name<br>\nexpected output :- name is my mahaveer<br>\nbut output comes :- name mname imanme mimname .</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1461151231, "post_id": 36742198, "comment_id": 61065850, "body": "no standard datatype will be able to do, just FYI."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461151259, "post_id": 36742198, "comment_id": 61065873, "body": "What operations do you want to perform on this number?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1461151290, "post_id": 36742198, "comment_id": 61065893, "body": "<code>log_2(10) ~ 3.32</code>"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1461152166, "post_id": 36742198, "comment_id": 61066474, "body": "<i>The question is in Bengali. Therefore, most of the people here won&#39;t understand the question.</i> yes probably... not really necessary to mention this."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1482120890, "post_id": 36742198, "comment_id": 69630155, "body": "Can most of you delete/edit your comments? I have changed the question to meet the required standard."}, {"owner": {"reputation": 8550, "user_id": 3504007, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/8ksWq.png?s=128&g=1", "display_name": "Kraang Prime", "link": "https://stackoverflow.com/users/3504007/kraang-prime"}, "edited": false, "score": 0, "creation_date": 1482224243, "post_id": 36742198, "comment_id": 69676134, "body": "In this case, the accepted solution is correct; you only need to look at the last digit.  You did state however there is no way to work with really large numbers which is incorrect, it takes a bit of heavy lifting -- however you don&#39;t need to do the dirty work as there are libraries for whichever flavor of C/C++ you use.  See :  <a href=\"http://stackoverflow.com/questions/565150/bigint-in-c\">stackoverflow.com/questions/565150/bigint-in-c</a>"}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 0, "creation_date": 1482224620, "post_id": 36742198, "comment_id": 69676375, "body": "The program will take a number as input and determine whether it&#39;s odd or even."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "reply_to_user": {"reputation": 8550, "user_id": 3504007, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/8ksWq.png?s=128&g=1", "display_name": "Kraang Prime", "link": "https://stackoverflow.com/users/3504007/kraang-prime"}, "edited": false, "score": 0, "creation_date": 1482224785, "post_id": 36742198, "comment_id": 69676474, "body": "@SamuelJackson Thanks for the additional information. I did not know we <i>can</i> work with very large numbers."}], "answers": [{"tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": false, "score": 3, "last_activity_date": 1461151321, "creation_date": 1461151321, "answer_id": 36742259, "question_id": 36742198, "link": "https://stackoverflow.com/questions/36742198/bizarre-situation-100-digit-number-input-asked/36742259#36742259", "title": "Bizarre situation - 100 digit number input asked", "body": "<p>There is no standard numeric type guaranteed to hold that many digits. You need to store the value in a different way, e.g., as a string or other array. If you need to perform arithmetic on these numbers, you need to implement those operations for the types you use, or use some kind of arbitrary precision library.</p>\n\n<p>(Tip: You also don't necessarily need the entire number for certain operations, e.g., you can tell whether it is even or odd by looking only at the last digit\u2026)</p>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 3, "creation_date": 1461153030, "post_id": 36742284, "comment_id": 61067084, "body": "For completeness: Here &quot;<i>last</i>&quot; means &quot;least significant&quot;."}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461489398, "post_id": 36742284, "comment_id": 61214259, "body": "@chux :) I once reached 45% on <a href=\"http://stackoverflow.com/questions/29295427/why-is-a-fork-call-not-optimized-away-in-an-infinite-loop/29296483#29296483\">this one</a> too."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "edited": false, "score": 1, "creation_date": 1482686794, "post_id": 36742284, "comment_id": 69849826, "body": "Can you people please upvote this question? It has been thoroughly edited to meet the standard."}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": true, "score": 11, "last_activity_date": 1482229265, "last_edit_date": 1482229265, "creation_date": 1461151385, "answer_id": 36742284, "question_id": 36742198, "link": "https://stackoverflow.com/questions/36742198/bizarre-situation-100-digit-number-input-asked/36742284#36742284", "title": "Bizarre situation - 100 digit number input asked", "body": "<blockquote>\n  <p>The program will take a number as input and determine whether it's odd or even.</p>\n</blockquote>\n\n<p>Read the input in a string (<code>char [101])</code> and analyze only last digit to check whether number is odd or even. Rest of the digits are irrelevant for this task.</p>\n"}, {"tags": [], "owner": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "is_accepted": false, "score": 3, "last_activity_date": 1461156895, "last_edit_date": 1461156895, "creation_date": 1461151696, "answer_id": 36742411, "question_id": 36742198, "link": "https://stackoverflow.com/questions/36742198/bizarre-situation-100-digit-number-input-asked/36742411#36742411", "title": "Bizarre situation - 100 digit number input asked", "body": "<p>The exercise is to determine whether a whole number of up to 100 digits is odd or even. </p>\n\n<p>This does not require you to perform arbitrary arithmetic on the number, so if you need to handle numbers larger than the largest integer type on your system, you can treat them as a string of digits. </p>\n\n<p>Whether it is even or odd only depends on the last digit.</p>\n"}, {"comments": [{"owner": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "edited": false, "score": 0, "creation_date": 1461662162, "post_id": 36789553, "comment_id": 61288560, "body": "Using scanf is a bit dangerous as it will overflow the buffer if more than 101 characters are entered ( <a href=\"http://stackoverflow.com/a/7709467/1527\">stackoverflow.com/a/7709467/1527</a> ). Check the result from strlen for zero to avoid another buffer overflow. You also might want to check that the contents of N are actually digits - is &#39;aaaaa&#39; even? It&#39;s possibly better to use atoi rather than subtracting 48 as C doesn&#39;t guarantee ASCII character encoding ( though I don&#39;t know of one where the even digits aren&#39;t even ), or just skip that step and test whether the character is even or odd."}, {"owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "reply_to_user": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "edited": false, "score": 0, "creation_date": 1462548196, "post_id": 36789553, "comment_id": 61696656, "body": "Well, it is guaranteed that the given string wholly consists of upto 100 numerical digits. Therefore, I don&#39;t need to go through that trouble."}, {"owner": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "edited": false, "score": 1, "creation_date": 1462548443, "post_id": 36789553, "comment_id": 61696833, "body": "It&#39;s better not to get into bad habits which you have to relearn when you do real-world work."}], "tags": [], "owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "is_accepted": false, "score": 1, "last_activity_date": 1478850182, "last_edit_date": 1478850182, "creation_date": 1461316098, "answer_id": 36789553, "question_id": 36742198, "link": "https://stackoverflow.com/questions/36742198/bizarre-situation-100-digit-number-input-asked/36789553#36789553", "title": "Bizarre situation - 100 digit number input asked", "body": "<p>To all those who took the time and effort to answer this question,</p>\n\n<p>Thanks for the answers. And thanks for showing the way.  I greatly appreciate the help!</p>\n\n<hr>\n\n<p>The solution to the problem which I have coded is -</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    int T, i, j;\n    scanf(\"%d\", &amp;T);\n\n    for (i=1; i&lt;=T; i++)\n    {\n         char N[101];\n         scanf(\"%s\", N);\n         int k = strlen(N);\n         int p = N[k-1] - 48; //char to int conversion\n\n         if (p % 2 == 1)\n         {\n             printf(\"odd\\n\");\n         }\n\n         else \n         {\n             printf(\"even\\n\");\n         }\n     }\n\n     return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 5050060, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ku3yu.jpg?s=128&g=1", "display_name": "Soha Farhin Pine", "link": "https://stackoverflow.com/users/5050060/soha-farhin-pine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3078, "favorite_count": 1, "accepted_answer_id": 36742284, "answer_count": 4, "score": -4, "last_activity_date": 1483190213, "creation_date": 1461151170, "last_edit_date": 1483190213, "question_id": 36742198, "link": "https://stackoverflow.com/questions/36742198/bizarre-situation-100-digit-number-input-asked", "title": "Bizarre situation - 100 digit number input asked", "body": "<p>I need to make a program that can take numbers of up to 100 digits as input. No standard <code>int</code> datatype will be able to do that! I've never come across such a bizarre situation. </p>\n\n<p>I don't get it at all. How am I supposed to solve this?</p>\n\n<p>The question I'm working on is this: </p>\n\n<blockquote>\n  <p>A whole number will be given, and you have to make a program that will\n  determine whether it's an even or odd number.</p>\n  \n  <p><em>Input Specification</em></p>\n  \n  <p>In the first line, there will be an integer T denoting the number of\n  testcases. In the following T lines, a non-negative integer will be\n  given. The number can have a maximum of 100 digits.</p>\n  \n  <p><em>Output Specification</em></p>\n  \n  <p>For every whole number given, you will have to print whether it's odd\n  or even as output.</p>\n</blockquote>\n\n<p>Can anyone guide me on how to solve the problem (if it is even possible to do so)? </p>\n"}, {"tags": ["c", "fifo", "strcat"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461150312, "post_id": 36741825, "comment_id": 61065247, "body": "What is <code>whichCharIsIt</code>? Please tell in real code <code>graphic</code> is well initialized."}, {"owner": {"reputation": 53, "user_id": 5550419, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5fb746cdfb3977d0eb91bfa7750a5151?s=128&d=identicon&r=PG&f=1", "display_name": "aviadm71", "link": "https://stackoverflow.com/users/5550419/aviadm71"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461150413, "post_id": 36741825, "comment_id": 61065312, "body": "I put it back to its simple format. graphic is all good, i checked"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1461150519, "post_id": 36741825, "comment_id": 61065373, "body": "<code>strcat(graphic, buf[i]);</code> --&gt; <code>graphic[i] =  buf[i];</code> ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1461150581, "post_id": 36741825, "comment_id": 61065407, "body": "Check the data types atleast once before posting these questions. You&#39;ll save yourself the hassle of logging into SO altogether..."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5550419, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5fb746cdfb3977d0eb91bfa7750a5151?s=128&d=identicon&r=PG&f=1", "display_name": "aviadm71", "link": "https://stackoverflow.com/users/5550419/aviadm71"}, "edited": false, "score": 0, "creation_date": 1461150534, "post_id": 36741904, "comment_id": 61065379, "body": "so i should add a new char, which includes buf[i] +  &#39;\\0&#39; before inserting it to graphic array by strcat ???"}, {"owner": {"reputation": 53, "user_id": 5550419, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5fb746cdfb3977d0eb91bfa7750a5151?s=128&d=identicon&r=PG&f=1", "display_name": "aviadm71", "link": "https://stackoverflow.com/users/5550419/aviadm71"}, "edited": false, "score": 0, "creation_date": 1461150771, "post_id": 36741904, "comment_id": 61065542, "body": "but i need to insert some more chars between the chars of buf, meaning i have o change it sometimes. I do need to get it char by char"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 53, "user_id": 5550419, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5fb746cdfb3977d0eb91bfa7750a5151?s=128&d=identicon&r=PG&f=1", "display_name": "aviadm71", "link": "https://stackoverflow.com/users/5550419/aviadm71"}, "edited": false, "score": 0, "creation_date": 1461150807, "post_id": 36741904, "comment_id": 61065566, "body": "In that case, append the characters yourself."}, {"owner": {"reputation": 53, "user_id": 5550419, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5fb746cdfb3977d0eb91bfa7750a5151?s=128&d=identicon&r=PG&f=1", "display_name": "aviadm71", "link": "https://stackoverflow.com/users/5550419/aviadm71"}, "edited": false, "score": 0, "creation_date": 1461151851, "post_id": 36741904, "comment_id": 61066286, "body": "still, not working"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 53, "user_id": 5550419, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5fb746cdfb3977d0eb91bfa7750a5151?s=128&d=identicon&r=PG&f=1", "display_name": "aviadm71", "link": "https://stackoverflow.com/users/5550419/aviadm71"}, "edited": false, "score": 1, "creation_date": 1461151920, "post_id": 36741904, "comment_id": 61066323, "body": "<b>Not working</b>: Now I will check my crystal ball to read your mind and understand what exactly didn&#39;t work."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461155023, "post_id": 36741904, "comment_id": 61068571, "body": "This <code>if(len + 1 &gt; sizeof graphics)</code> should be <code>if(len + 1 &gt;= sizeof graphic)</code>, shouldn&#39;t it?"}, {"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461156670, "post_id": 36741904, "comment_id": 61069839, "body": "@alk Thanks, you are right. I will fix it."}], "tags": [], "owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "is_accepted": false, "score": 4, "last_activity_date": 1461156683, "last_edit_date": 1461156683, "creation_date": 1461150449, "answer_id": 36741904, "question_id": 36741825, "link": "https://stackoverflow.com/questions/36741825/passing-argument-2-of-strcat-makes-pointer-from-integer-without-a-cast-wint/36741904#36741904", "title": "passing argument 2 of \u2018strcat\u2019 makes pointer from integer without a cast [-Wint-conversion]", "body": "<p>Signature of <code>strcat</code> is:</p>\n\n<pre><code>char *strcat(char *dest, const char *src);\n</code></pre>\n\n<p>i.e. second argument should be pointer to <code>char</code> array that terminates with <code>'\\0'</code>. In your case you are passing a single <code>char</code>acter.</p>\n\n<p>Instead of <code>for(int i=0; i&lt;10; i++){ strcat(graphic, buf[i]); }</code>, you possibly need just: (Assuming <code>graphic</code> is initialized somewhere)</p>\n\n<pre><code>strcat(graphic, buf); /* Use strncat for limited number of characters */\n</code></pre>\n\n<p>Also make sure that <code>string.h</code> is included in your program.</p>\n\n<hr>\n\n<p>To append the characters by yourself, you can use just assignation than using a function.</p>\n\n<pre><code>/* Append one character (ith character of buf[i] ) */\nconst size_t len = strlen(graphic);\nif(len + 1 &gt;= sizeof graphics) { /* Error handling */ }\nelse {\n  graphic[len] = buf[i];\n  graphic[len + 1] = '\\0';\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461154689, "post_id": 36742210, "comment_id": 61068314, "body": "<code>strcat()</code>ing to an uninitialised buffer (<code>graphic</code> here) invokes the infamous Undefined Behaviour."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461168067, "post_id": 36742210, "comment_id": 61079313, "body": "@alk, yes. Garbage values will be present in the graphics array to which the buffer array is appended. I have edited my answer in order to remove such kind of behaviour. :-)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3511557"}, "is_accepted": false, "score": 0, "last_activity_date": 1461168474, "last_edit_date": 1495542251, "creation_date": 1461151206, "answer_id": 36742210, "question_id": 36741825, "link": "https://stackoverflow.com/questions/36741825/passing-argument-2-of-strcat-makes-pointer-from-integer-without-a-cast-wint/36742210#36742210", "title": "passing argument 2 of \u2018strcat\u2019 makes pointer from integer without a cast [-Wint-conversion]", "body": "<p>syntaxt of strcat():</p>\n\n<pre><code>char *strcat(char *dest, const char *src);\n</code></pre>\n\n<p>The two parameters should be character pointers. In your code, buf is a character pointer(or an array) but in the second parameter to the call to strcat, you didn't send the entire array(buf) thus making it as a character.</p>\n\n<p>try this instead, this might meet your requirements:</p>\n\n<pre><code>char graphic[100];\nchar buf[100];\nread(fd_read, &amp;buf, 50);\n\nstrcpy(graphic, \"\");\nstrncat(graphic, buf, 10); //last parameter tells you how many bytes to append\n</code></pre>\n\n<p>Once refer the below link for more information regarding the error:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19307600/c-strcat-warning-passing-arg-2-of-strcat-makes-pointer-from-integer-without\">C strcat - warning: passing arg 2 of `strcat&#39; makes pointer from integer without a cast</a></p>\n"}], "owner": {"reputation": 53, "user_id": 5550419, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5fb746cdfb3977d0eb91bfa7750a5151?s=128&d=identicon&r=PG&f=1", "display_name": "aviadm71", "link": "https://stackoverflow.com/users/5550419/aviadm71"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3442, "favorite_count": 0, "closed_date": 1461155305, "answer_count": 2, "score": -4, "last_activity_date": 1461168474, "creation_date": 1461150238, "last_edit_date": 1461150373, "question_id": 36741825, "link": "https://stackoverflow.com/questions/36741825/passing-argument-2-of-strcat-makes-pointer-from-integer-without-a-cast-wint", "closed_reason": "Duplicate", "title": "passing argument 2 of \u2018strcat\u2019 makes pointer from integer without a cast [-Wint-conversion]", "body": "<p>I am reading off a fifo, and then I try to make a another array in different format out of it.\nI know buf gets its values as expected, since printing it out is good.</p>\n\n<pre><code>char graphic[100];\nchar buf[100];\nread(fd_read,&amp;buf,50);\nfor(int i=0; i&lt;10; i++){\nstrcat(graphic, buf[i]); }\n</code></pre>\n\n<p>gives me error:</p>\n\n<blockquote>\n  <p>passing argument 2 of \u2018strcat\u2019 makes pointer from integer without a\n  cast [-Wint-conversion]</p>\n</blockquote>\n\n<p>I use eclipse on linux, on C.\n...HELP?</p>\n"}, {"tags": ["c", "algorithm"], "comments": [{"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1461148916, "post_id": 36741164, "comment_id": 61064371, "body": "When you use <code>Serial.print(seedP);</code> without ever updating <code>seedP</code> how can you expect that a different value than 6, the value you initialized seedP with, will be printed?"}, {"owner": {"reputation": 53, "user_id": 6229649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf6aba7fa6eafacce1468522d017dd5?s=128&d=identicon&r=PG&f=1", "display_name": "hig", "link": "https://stackoverflow.com/users/6229649/hig"}, "reply_to_user": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1461148992, "post_id": 36741164, "comment_id": 61064411, "body": "@flowit I don&#39;t expect different value I&#39;m looking for guidance because I know what the code is supposed to do as I described it I just don&#39;t know how to achieve it."}, {"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 3, "creation_date": 1461149152, "post_id": 36741164, "comment_id": 61064501, "body": "Your loop indices span a grid (0,0) to (layer-1,layer-1). You can calculate the distance from any point in this grid to its center. Depending on the distance you have to print a different value. If you choose a clever distance metric you can use a simple subtraction to calaculate the value you have to print."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 1, "creation_date": 1461150560, "post_id": 36741164, "comment_id": 61065398, "body": "Indeed, the desired metric is the so-called <a href=\"https://en.wiktionary.org/wiki/Manhattan_distance\" rel=\"nofollow noreferrer\">Manhattan distance</a> to the center."}, {"owner": {"reputation": 53, "user_id": 6229649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf6aba7fa6eafacce1468522d017dd5?s=128&d=identicon&r=PG&f=1", "display_name": "hig", "link": "https://stackoverflow.com/users/6229649/hig"}, "reply_to_user": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1461152870, "post_id": 36741164, "comment_id": 61066977, "body": "@flowit I do have distances but I&#39;m not sure how to properly use them now"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6229649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf6aba7fa6eafacce1468522d017dd5?s=128&d=identicon&r=PG&f=1", "display_name": "hig", "link": "https://stackoverflow.com/users/6229649/hig"}, "edited": false, "score": 0, "creation_date": 1461152011, "post_id": 36742098, "comment_id": 61066384, "body": "thank you very much for the solution, I almost got there myself I do have the values for distance between the middle value and other cells now I need to somehow use it properly."}], "tags": [], "owner": {"reputation": 1780, "user_id": 715363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a863a21a7ba2588adc3fc69d4949110b?s=128&d=identicon&r=PG", "display_name": "wkz", "link": "https://stackoverflow.com/users/715363/wkz"}, "is_accepted": true, "score": 4, "last_activity_date": 1461150920, "creation_date": 1461150920, "answer_id": 36742098, "question_id": 36741164, "link": "https://stackoverflow.com/questions/36741164/displaying-text-pyramid-from-topographic-view/36742098#36742098", "title": "Displaying text pyramid from topographic view", "body": "<p>Nice puzzle, here is my suggestion:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n/* get the depth relative to the pyramids center, which is at origo */\nint depth(int x, int y)\n{\n    x = abs(x);\n    y = abs(y);\n\n    return x &gt; y ? x : y;\n}\n\n/* walk from (-(size - 1), size - 1) along the x and y axis, and print\n * the center value minus the current depth */\nvoid pyramid(char center, int size)\n{\n    int x, y;\n\n    size--;\n\n    for (x = -size; x &lt;= size; x++) {\n        for (y = -size; y &lt;= size; y++)\n            putchar(center - depth(x, y));\n        putchar('\\n');\n    }\n}\n\nint main(int argc, char **argv)\n{\n    char seedP = argv[1][0];\n    int sizeP = strtol(argv[2], NULL, 0);\n\n    pyramid(seedP, sizeP);\n}\n</code></pre>\n\n<p>Note that there is <em>no</em> error handling of any kind here, you'd better run it with two arguments.</p>\n\n<p>Example:</p>\n\n<pre><code>$ gcc pyramid.c -o pyramid &amp;&amp; ./pyramid 6 7\n0000000000000\n0111111111110\n0122222222210\n0123333333210\n0123444443210\n0123455543210\n0123456543210\n0123455543210\n0123444443210\n0123333333210\n0122222222210\n0111111111110\n0000000000000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1221, "user_id": 6210312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kWA1n.png?s=128&g=1", "display_name": "Lacobus", "link": "https://stackoverflow.com/users/6210312/lacobus"}, "is_accepted": false, "score": 0, "last_activity_date": 1461163997, "last_edit_date": 1461163997, "creation_date": 1461163613, "answer_id": 36747452, "question_id": 36741164, "link": "https://stackoverflow.com/questions/36741164/displaying-text-pyramid-from-topographic-view/36747452#36747452", "title": "Displaying text pyramid from topographic view", "body": "<p>Since you are dealing with a serial output I suggest the implementation of a \"frame buffer\" object.</p>\n\n<p>The pyramid (a square within the previous square) is written to the \"frame buffer\".</p>\n\n<p>And finally, the \"frame buffer\" could be serialized to the serial port or to the text terminal.</p>\n\n<p>Check out my suggestion:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\n\ntypedef struct frame_buffer_s\n{\n    int ncols;\n    int nrows;\n    char ** buf;\n} frame_buffer_t;\n\n\nvoid frame_buffer_destroy( frame_buffer_t * frm )\n{\n    int i = 0;\n\n    if( frm-&gt;buf )\n    {\n        for( i = 0; i &lt; frm-&gt;nrows; i++ )\n            if( frm-&gt;buf[i] )\n                free( frm-&gt;buf[i] );\n\n        free( frm-&gt;buf );\n    }\n\n    free( frm );\n}\n\n\nframe_buffer_t * frame_buffer_create( int ncols, int nrows )\n{\n    frame_buffer_t * frm = NULL;\n    int i = 0;\n\n    frm = (frame_buffer_t*) calloc( 1, sizeof(frame_buffer_t) );\n\n    if( !frm )\n        return NULL;\n\n    frm-&gt;ncols = ncols;\n    frm-&gt;nrows = nrows;\n\n    frm-&gt;buf = (char**) calloc( nrows, sizeof(char*) );\n\n    if( !frm-&gt;buf )\n    {\n        frame_buffer_destroy( frm );\n        return NULL;\n    }\n\n    for( i = 0; i &lt; nrows; i++ )\n    {\n        frm-&gt;buf[i] = (char*) calloc( ncols, sizeof(char) );\n\n        if( !frm-&gt;buf[i] )\n        {\n            frame_buffer_destroy( frm );\n            return NULL;\n        }\n    }\n\n    return frm;\n}\n\n\nvoid frame_buffer_draw_square( frame_buffer_t * this, int row, int col, int size, char ch )\n{\n    int i = 0;\n\n    size--;\n\n    for( i = 0; i &lt;= size; i++ )\n    {\n        this-&gt;buf[col + i][row] = ch;\n        this-&gt;buf[col + i][row+size] = ch;\n        this-&gt;buf[col][row + i] = ch;\n        this-&gt;buf[col + size][row + i] = ch;\n    }\n}\n\n\nvoid frame_buffer_draw_pyramid( frame_buffer_t * frm, int col, int row, int size, char seed )\n{\n    int i = 0;\n\n    for( i = 1; i &lt;= size; i++ )\n        frame_buffer_draw_square( frm, row + size - i, col + size - i, (i * 2) - 1, seed-- );\n}\n\n\nvoid frame_buffer_render_terminal( frame_buffer_t * frm )\n{\n    int col = 0;\n    int row = 0;\n\n    for( row = 0; row &lt; frm-&gt;nrows; row++ )\n    {\n        for( col = 0; col &lt; frm-&gt;ncols; col++ )\n        {\n            char ch = frm-&gt;buf[col][row];\n\n            printf( \"%c\", (ch)?ch:' ' );\n        }\n\n        printf( \"\\n\" );\n    }\n}\n\n\nvoid frame_buffer_send_serial( frame_buffer_t * frm )\n{\n    int col = 0;\n    int row = 0;\n\n    /* Serial.begin(9600); */\n\n    for( row = 0; row &lt; frm-&gt;nrows; row++ )\n    {\n        for( col = 0; col &lt; frm-&gt;ncols; col++ )\n        {\n            char ch = frm-&gt;buf[col][row];\n\n            /* Serial.print( (ch)?ch:' ' ); */\n        }\n\n        /* Serial.println(); */\n    }\n}\n\n\nint main( int argc, char ** argv )\n{\n    frame_buffer_t * frm = NULL;\n\n    /* Read command line arguments */\n    char seed = argv[1][0];\n    int size = strtol(argv[2], NULL, 0);\n\n    /* Create a 20x20 frame buffer */\n    frm = frame_buffer_create( 20, 20 );\n\n    /* Draw Pyramid in the frame buffer */\n    frame_buffer_draw_pyramid( frm, 0, 0, size, seed );\n\n    /* Write our frame buffer to terminal */\n    frame_buffer_render_terminal( frm );\n\n    /* Write our frame buffer to serial output */\n    frame_buffer_send_serial( frm );\n\n    /* Destroy frame buffer */\n    frame_buffer_destroy( frm );\n\n    return 0;\n}\n\n/* eof */\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>$ ./pyramid 9 10\n0000000000000000000 \n0111111111111111110 \n0122222222222222210 \n0123333333333333210 \n0123444444444443210 \n0123455555555543210 \n0123456666666543210 \n0123456777776543210 \n0123456788876543210 \n0123456789876543210 \n0123456788876543210 \n0123456777776543210 \n0123456666666543210 \n0123455555555543210 \n0123444444444443210 \n0123333333333333210 \n0122222222222222210 \n0111111111111111110 \n0000000000000000000 \n\n$ ./pyramid E 5\nAAAAAAAAA           \nABBBBBBBA           \nABCCCCCBA           \nABCDDDCBA           \nABCDEDCBA           \nABCDDDCBA           \nABCCCCCBA           \nABBBBBBBA           \nAAAAAAAAA           \n</code></pre>\n\n<p>Hope it Helps!</p>\n"}], "owner": {"reputation": 53, "user_id": 6229649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf6aba7fa6eafacce1468522d017dd5?s=128&d=identicon&r=PG&f=1", "display_name": "hig", "link": "https://stackoverflow.com/users/6229649/hig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 36742098, "answer_count": 2, "score": 5, "last_activity_date": 1461163997, "creation_date": 1461148497, "last_edit_date": 1461151599, "question_id": 36741164, "link": "https://stackoverflow.com/questions/36741164/displaying-text-pyramid-from-topographic-view", "title": "Displaying text pyramid from topographic view", "body": "<p>I write in C on arduino uno. The idea is to display pyramid from topographic view so variables that I have is the 'seedP' - middle value, the size of pyramid 'sizeP' - the amount of layers and how many letters are in a row - 'layer'.</p>\n\n<p>The pyramid with those values in the code seedP = 6, sizeP = 3 would look like:</p>\n\n<pre><code>44444\n45554\n45654\n45554\n44444\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>void setup()\n   {\n     Serial.begin(9600);\n     int seedP = 6; //Centre value\n     int sizeP = 3; //Amount of layers\n     int layer = (sizeP*2)-1;\n\n     for(int i=0; i&lt;layer; i++){\n       for(int j=0; j&lt;layer; j++){\n           Serial.print(seedP);\n       }\n       Serial.println();\n     }\n   }\n</code></pre>\n\n<p>I still cannot fully grasp the concept of the algorithm I could potentially check for first and last layer then display a value full of '4' in this example but I'm not sure how to deal with other layers. The code right now displays only '6'es in 5 columns and 5 in a row.</p>\n\n<p>Edit: Updated code and below is the grid</p>\n\n<pre><code>void setup()\n   {\n     Serial.begin(9600);\n\n     int sizeP = 3; //Amount of layers\n     int layer = (sizeP*2)-1;\n\n     int seedP = 6; //Centre value\n     int seedX = sizeP-1;\n     int seedY = sizeP-1;\n\n     for(int i=0; i&lt;layer; i++){\n       for(int j=0; j&lt;layer; j++){\n           //i,j = x,y grid\n           int distanceX, distanceY, distance; //Distance between a cell and center value\n           distanceX = abs(seedX - j);\n           distanceY = abs(seedY - i);\n           distance = distanceX + distanceY;\n       }\n       Serial.println();\n     }\n   }\n</code></pre>\n\n<p>Values from each cell to the center</p>\n\n<pre><code>(0,0)=4, (0,1)=3,   (0,2)=2,  (0,3)=3,  (0,4)=4\n(1,0)=3, (1,1)=2,   (1,2)=1,  (1,3)=2,  (1,4)=3\n(2,0)=2, (2,1)=1,   (2,2)=0,  (2,3)=1,  (2,4)=2\n(3,0)=3, (3,1)=2,   (3,2)=1,  (3,3)=2,  (3,4)=3\n(4,0)=4, (4,1)=3,   (4,2)=2,  (4,3)=3,  (4,4)=4\n</code></pre>\n"}, {"tags": ["c", "math", "natural-logarithm"], "comments": [{"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461147096, "post_id": 36740491, "comment_id": 61063070, "body": "<a href=\"http://www.cplusplus.com/reference/cmath/log/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cmath/log</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3235832"}, "edited": false, "score": 0, "creation_date": 1461147687, "post_id": 36740491, "comment_id": 61063512, "body": "what&#39;s your taylor series? it shouldn&#39;t even converge for x = 1000"}, {"owner": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "edited": false, "score": 0, "creation_date": 1461148131, "post_id": 36740491, "comment_id": 61063848, "body": "reading it again i think he means 1000 digits or more. 1000 as a value makes no sense."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461151246, "post_id": 36740491, "comment_id": 61065860, "body": "Does your system support any function calculating the logarithm to another base, different to e  (Euler number)? If yes, then use <code>somelog(x)&#47;somelog(e)</code> to get the natural logarithm of <code>x</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "edited": false, "score": 0, "creation_date": 1461147561, "post_id": 36740635, "comment_id": 61063422, "body": "Edit: For that range <a href=\"http://en.cppreference.com/w/c/numeric/math/log\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/numeric/math/log</a> is just fine of course. But the above is what the homework is going for."}, {"owner": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "edited": false, "score": 0, "creation_date": 1461148998, "post_id": 36740635, "comment_id": 61064415, "body": "This got me a bit curious. And it is actually harder than I thought to compute log2 of a large number. See for example <a href=\"http://stackoverflow.com/questions/8232932/logarithm-of-the-very-very-large-number\" title=\"logarithm of the very very large number\">stackoverflow.com/questions/8232932/&hellip;</a>"}], "tags": [], "owner": {"reputation": 4682, "user_id": 360270, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1gH9s.jpg?s=128&g=1", "display_name": "starmole", "link": "https://stackoverflow.com/users/360270/starmole"}, "is_accepted": false, "score": 1, "last_activity_date": 1461147211, "creation_date": 1461147211, "answer_id": 36740635, "question_id": 36740491, "link": "https://stackoverflow.com/questions/36740491/what-is-the-c-program-implementation-of-natural-log-of-a-number-that-is-greater/36740635#36740635", "title": "what is the c program implementation of natural log of a number that is greater than 1000?", "body": "<p>Compute the log in base 2, then change it back to natural. </p>\n"}], "owner": {"reputation": 538, "user_id": 5561631, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-4KeXbKjV3mY/AAAAAAAAAAI/AAAAAAAAADU/DMH5UQZgItQ/photo.jpg?sz=128", "display_name": "sabari rangan", "link": "https://stackoverflow.com/users/5561631/sabari-rangan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "closed_date": 1461149149, "answer_count": 1, "score": -1, "last_activity_date": 1461147211, "creation_date": 1461146913, "question_id": 36740491, "link": "https://stackoverflow.com/questions/36740491/what-is-the-c-program-implementation-of-natural-log-of-a-number-that-is-greater", "closed_reason": "Not suitable for this site", "title": "what is the c program implementation of natural log of a number that is greater than 1000?", "body": "<p>i have tried implementing Taylor series but for greater number (1000 and more) it takes long time to calculate. i need a program that calculates natural log in less time.</p>\n"}, {"tags": ["c", "gcc", "error-handling", "gcc-warning"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 4, "creation_date": 1461146806, "post_id": 36740397, "comment_id": 61062866, "body": "Just asking, why do you have two <code>if (!err)</code> conditions?"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1461147603, "post_id": 36740397, "comment_id": 61063453, "body": "I agree that this is extremely annoying,  It&#39;s obvious to me that &#39;a&#39; has a valid address, it&#39;s not being dereferenced and the function is surely going to load &#39;a&#39;.   Not sure how to tell the compiler that, and I want to know how too:("}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1461147809, "post_id": 36740397, "comment_id": 61063613, "body": "@SouravGhosh, I just wanted to highlight and exemplify that usually there are multiple <code>if (!err)</code> blocks in the function. Additionally, I also wanted to make clear that the block where <code>a</code> becomes initialized normally is not the same where <code>a</code> is used."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 0, "creation_date": 1461148666, "post_id": 36740397, "comment_id": 61064217, "body": "Eh? GCC will never produce a warning about <code>a</code> being uninitialized in your example unless it inlines <code>func2</code> and knows that it wasn&#39;t actually initialized. There are complex edge cases where GCC gets confused, but this is definitely not even close to being one."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461148958, "post_id": 36740397, "comment_id": 61064391, "body": "Such warnings are false positives, that is: they are tool bugs. Just disable the buggy warning."}, {"owner": {"reputation": 1361, "user_id": 2556165, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fGy2y.jpg?s=128&g=1", "display_name": "wowofbob", "link": "https://stackoverflow.com/users/2556165/wowofbob"}, "edited": false, "score": 0, "creation_date": 1461149137, "post_id": 36740397, "comment_id": 61064491, "body": "I don&#39;t get this warning either. Tried to get it with flags <code>-Wall</code> and <code>-Wextra</code>."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "edited": false, "score": 4, "creation_date": 1461149251, "post_id": 36740397, "comment_id": 61064555, "body": "10-20 years ago false positives for uninitialized variables were indeed a problem with GCC, today you have to write some pretty convoluted code to trigger them. Majority of those warnings are actual proper bugs in your code and it&#39;s worth the occasional unnecessary initialization of a variable to cover them up to keep the warning enabled to catch real bugs."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1461149317, "post_id": 36740397, "comment_id": 61064602, "body": "Can&#39;t confirm. No warning with <code>extern int func2(int *arg);</code>, even if using <code>a</code> later; <code>gcc -c foo.c -Wall -Werror -Wuninitialized</code> 5.2.1-22ubuntu2"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1461149559, "post_id": 36740397, "comment_id": 61064739, "body": "Actually I didn&#39;t manage to get a warning <b>even with <code>static inline</code>, and <code>-O3</code></b>."}, {"owner": {"reputation": 18509, "user_id": 939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb161e6bf2e1dded07d3fd921f487334?s=128&d=identicon&r=PG", "display_name": "Art", "link": "https://stackoverflow.com/users/939410/art"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1461149735, "post_id": 36740397, "comment_id": 61064857, "body": "@AnttiHaapala Same here with static inline. That might actually be a GCC bug that it doesn&#39;t report that as uninitialized. The last thing I can think of is that func2() is actually a macro."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1461149901, "post_id": 36740397, "comment_id": 61064953, "body": "Actually even <code>printf(&quot;%p&quot;, &amp;a);</code> made the warning go away, so it seems that in GCC 5.2.1 the expectation is that any <code>int</code> var whose address is taken and passed to <i>any function at all</i> is initialized by that function; even if the compiler later could know that this wasn&#39;t the case."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461151024, "post_id": 36740397, "comment_id": 61065719, "body": "I&#39;m sorry, but yes, the pseudo code doesn&#39;t trigger the warning when compiled. The pseudo code is only intended as a demo, not a real code with a problem."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1461151117, "post_id": 36740397, "comment_id": 61065786, "body": "@Dummy00001: So you expect help diagnosing the cause of a problem we can&#39;t reproduce? Seems legit."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1461151334, "post_id": 36740397, "comment_id": 61065920, "body": "So, the pseudocode does not produce the warning you are asking about.   Can you provide an actual (small!) example that does?   If you don&#39;t, nobody can help you."}, {"owner": {"reputation": 6049, "user_id": 1595323, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2dd4e62d8f84c5dee2d68ba35393f266?s=128&d=identicon&r=PG", "display_name": "Konstantin Vladimirov", "link": "https://stackoverflow.com/users/1595323/konstantin-vladimirov"}, "edited": false, "score": 0, "creation_date": 1461153365, "post_id": 36740397, "comment_id": 61067325, "body": "I think, minimized compilable example with such warning will be good idea. Particularly, it will be useful to figure out possible optimizer bugs. Now even your edited code cease to reproduce anything."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 1, "creation_date": 1461156564, "post_id": 36740397, "comment_id": 61069753, "body": "I&#39;m not interested in a &quot;fix&quot; for a particular piece of code - I&#39;m capable of doing it myself. As I have expressed the notion in the question: I&#39;m interested in compiler features/methods/tactics one can use to deal with such warnings with this particular error handling. If you are not familiar with that type of the error handling, then please simply move on."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461158605, "post_id": 36740397, "comment_id": 61071474, "body": "I feel the description of this issue is clear, no matter whether the &quot;pseudo&quot;-code allows to reproduce it or not."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1461160363, "post_id": 36740397, "comment_id": 61072987, "body": "initializing the variables IS the elegant solution."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461166726, "post_id": 36740397, "comment_id": 61078231, "body": "@alk sure, but users have been wast.. spending time trying to reproduce it with the code given."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461166857, "post_id": 36740397, "comment_id": 61078336, "body": "@MartinJames: I agree, that the OP should have done better by initially mentioning this fact, this code is pseudo."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461168881, "post_id": 36740397, "comment_id": 61079859, "body": "OMG, the &quot;pseudo code&quot; stood there from the very beginning of the existence of this question. Reading fail."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461392036, "post_id": 36740397, "comment_id": 61188109, "body": "I forgot to add to my last comment &quot;<i>... and does _not_ produce the warning as mentioned.</i>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461159310, "post_id": 36745442, "comment_id": 61072115, "body": "You did read the full question and its comments, didn&#39;t you?"}, {"owner": {"reputation": 405, "user_id": 2960171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62124f22f491f7b62b08ca76f6b410cb?s=128&d=identicon&r=PG", "display_name": "esavier", "link": "https://stackoverflow.com/users/2960171/esavier"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461159490, "post_id": 36745442, "comment_id": 61072269, "body": "indeed, i forgot something (edit)"}, {"owner": {"reputation": 405, "user_id": 2960171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62124f22f491f7b62b08ca76f6b410cb?s=128&d=identicon&r=PG", "display_name": "esavier", "link": "https://stackoverflow.com/users/2960171/esavier"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461160451, "post_id": 36745442, "comment_id": 61073074, "body": "one more thing i remembered - try to google around about gcc/g++ translations units - if function you are unsing is in another translation unit compiler may fail to detect that function is mutating parameters and give you warning. also this is not answer but may be interesting to you <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.4.5/gcc/Function-Attributes.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc-3.4.5/gcc/Function-Attributes.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 22422, "user_id": 634919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4a87fe094961af20263d8e7ff445b2?s=128&d=identicon&r=PG", "display_name": "Nate Eldredge", "link": "https://stackoverflow.com/users/634919/nate-eldredge"}, "edited": false, "score": 0, "creation_date": 1461167238, "post_id": 36745442, "comment_id": 61078666, "body": "&quot;My young padawan&quot; - is that really necessary?  It seems rude and condescending."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 1, "creation_date": 1461224623, "post_id": 36745442, "comment_id": 61104195, "body": "A downvote, for (1st) failure to read the question, and (2nd) arrogance."}, {"owner": {"reputation": 405, "user_id": 2960171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62124f22f491f7b62b08ca76f6b410cb?s=128&d=identicon&r=PG", "display_name": "esavier", "link": "https://stackoverflow.com/users/2960171/esavier"}, "edited": false, "score": 1, "creation_date": 1461238503, "post_id": 36745442, "comment_id": 61114182, "body": "read comment before downvoting, i explained all there is to solve your problem. There is no mighty compiler settings to overstep translation unit becouse compiler (1st) dont know what other functions do, (2nd) dont care about other units while compiling. Either put them in one file or initialize before usage."}, {"owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "edited": false, "score": 0, "creation_date": 1461496232, "post_id": 36745442, "comment_id": 61216133, "body": "You failed to understand the problem. Please do not pretend to solve it. You wrote your answer with the (wrong and arrogant) assumption that I can&#39;t read compiler documentation and I lack experience. Just because you do not know the answer doesn&#39;t mean there isn&#39;t one."}], "tags": [], "owner": {"reputation": 405, "user_id": 2960171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62124f22f491f7b62b08ca76f6b410cb?s=128&d=identicon&r=PG", "display_name": "esavier", "link": "https://stackoverflow.com/users/2960171/esavier"}, "is_accepted": false, "score": -2, "last_activity_date": 1461240337, "last_edit_date": 1461240337, "creation_date": 1461159046, "answer_id": 36745442, "question_id": 36740397, "link": "https://stackoverflow.com/questions/36740397/compiler-warning-about-potentially-uninitialized-variable/36745442#36745442", "title": "Compiler warning about potentially uninitialized variable", "body": "<p>All non static variables prior to defining are undeclared, unless they have defined default constructor. Most basic types are considered primitives and may be inherited from C and follows C's architecture - in that case compiler will determine size, and will allocate this size on stack, nothing more, nothing less - underlying memory is random - or per se - undefined.</p>\n\n<p>if static, <strong>declared</strong> variable is initialized to zero if not defined\notherwise.</p>\n\n<p>all non static variables are left to whatever was in memory segment before claiming it - this can potentially lead to <strong>undefined behaviour</strong> and in extreme cases - information leaks.Also if using heap memory - its preferable to call calloc instead of malloc in C, in C++ you really make yourself sure that there is default constructor and its doing some defaulting after being called.</p>\n\n<p>What you are trying to accomplish is generic compiler functionality and its created to decect potential misuse of uninitialized variables, for example:\n<code>for (int a; i&lt;0; a++)</code> wchich are potentially dangerous</p>\n\n<p>Notice that compiler describes source file as translation unit - it does not know or care about other source files - this is linker jobs to produce usable binary file from compiled chunks. You can notify compiler (GNU) that you want or do some assumptions on function you are writting, but AFAIK there is notthing to suit your needs <a href=\"https://gcc.gnu.org/onlinedocs/gcc-5.3.0/gcc/Function-Attributes.html#Function-Attributes\" rel=\"nofollow\">link</a></p>\n\n<p>there is one elegant solution to all such problems and it is either default constructor in C++ or in C either basic initialization or calloc zeroing.</p>\n\n<p>If it annoys you, add <code>-w</code> to gcc/g++;</p>\n\n<p>example i did:</p>\n\n<pre><code>int err = 0;\nint a   = 0;\nint b   = 0;\n\nerr = func2( &amp;a ); // no warnings\nif (!err) b = 1;\nif (!err) err = stuff(a);\nif (!err) err = stuff(b)\n\nreturn err;\n</code></pre>\n\n<p>If its possible, revert function to take <code>err</code> as param, and produce <code>a</code> as out. If its impossible (lib?) make wrapper. If you are good with uninitialized parameter, you should be good with calloced parameter, and its fixing whatever problem you may ever have. This is good practice in, for example, microchips or linux kernelspace.</p>\n\n<pre><code>somecomplextype * x = (somecomplextype) calloc (1, sizeof(somecomplextype));\nif (!x) exit(1);\n</code></pre>\n"}], "owner": {"reputation": 14928, "user_id": 360695, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d2c44123afa326f8088914089161248e?s=128&d=identicon&r=PG", "display_name": "Dummy00001", "link": "https://stackoverflow.com/users/360695/dummy00001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 818, "favorite_count": 2, "closed_date": 1461166744, "answer_count": 1, "score": 2, "last_activity_date": 1461240337, "creation_date": 1461146670, "last_edit_date": 1461150903, "question_id": 36740397, "link": "https://stackoverflow.com/questions/36740397/compiler-warning-about-potentially-uninitialized-variable", "closed_reason": "Not suitable for this site", "title": "Compiler warning about potentially uninitialized variable", "body": "<p>Consider the following pseudo code, which employs the typical error handling tactics with an error code variable:</p>\n\n<p>(<em>Edit1</em>: I have added another use-case when the uninit var warnings appear. And no, this pseudo code, though is compilable doesn't actually trigger the GCC warning (v4.9.2). But the real (much larger) code which does is in spirit identical to this pseudo code.)</p>\n\n<pre><code>int func1()\n{\n    int err;\n    int a;\n    int b;  // *Edit1*\n\n    err = func2( &amp;a ); // init 'a' or fail with 'err'\n    if (!err)\n    {\n        b = 1; // *Edit1*\n    }\n\n    if (!err)\n    {\n        // use variable 'a'\n        // here compiler migth produce warning that 'a' might be uninitialized\n    }\n\n    if (!err) // *Edit1*\n    {\n        // use variable 'b'\n        // here compiler might produce warning that 'b' might be uninitialized\n    }\n\n    return err;\n}\n</code></pre>\n\n<p>The GCC would produce a warning that variable 'a' might be potentially uninitialized.</p>\n\n<p>Typical solution is to just add (for example) <code>a = 0;</code> at the beginning of the function. But I'm looking for something more generic/elegant. (Compiler fails to optimize away the redundant initializations. Not every variable has a sensible default value.)</p>\n\n<p>My question is: Are there any compiler features which might allow to tell compiler that <code>func1()</code> does initializes the <code>a</code> if <code>err</code> is not set? Or any other method to achieve that with the error handling tactics?</p>\n\n<p>P.S. Considering that this type of error handling is so commonplace, I'm confused that I failed to find ways to make a warning-free code without unnecessary assignments.</p>\n"}, {"tags": ["c", "bash", "execl"], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 1541616, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/59f65ef2bf28b3d06c8b1cabe973a756?s=128&d=identicon&r=PG", "display_name": "Ionut Marisca", "link": "https://stackoverflow.com/users/1541616/ionut-marisca"}, "edited": false, "score": 0, "creation_date": 1461147130, "post_id": 36740477, "comment_id": 61063090, "body": "Thank you! It&#39;s working. I didn&#39;t know I can call the <code>execl</code> function this way."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 147, "user_id": 1541616, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/59f65ef2bf28b3d06c8b1cabe973a756?s=128&d=identicon&r=PG", "display_name": "Ionut Marisca", "link": "https://stackoverflow.com/users/1541616/ionut-marisca"}, "edited": false, "score": 0, "creation_date": 1461147337, "post_id": 36740477, "comment_id": 61063255, "body": "You are welcome. Do not forget to validate the answer if it is ok."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1461147471, "post_id": 36740477, "comment_id": 61063344, "body": "This doesn&#39;t answer the first part of the question: <i>&quot;Why is this happening&quot;</i>"}, {"owner": {"reputation": 26541, "user_id": 188535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d04ab2422a8f061608f58708de9bb138?s=128&d=identicon&r=PG", "display_name": "detly", "link": "https://stackoverflow.com/users/188535/detly"}, "edited": false, "score": 1, "creation_date": 1461148094, "post_id": 36740477, "comment_id": 61063817, "body": "It&#39;s happening because adding a space between arguments is how the shell separates arguments, but when calling a function like <code>execlp()</code> in a C program, the space is just considered a part of the one arg. In the call, <i>every</i> argument needs to be a separated, which is why calling it as <code>execlp(..., &quot;-U&quot;, &quot;username&quot;,...)</code> works but <code>&quot;-U username&quot;</code> doesn&#39;t."}], "tags": [], "owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "is_accepted": true, "score": 2, "last_activity_date": 1461148372, "last_edit_date": 1461148372, "creation_date": 1461146869, "answer_id": 36740477, "question_id": 36740348, "link": "https://stackoverflow.com/questions/36740348/calling-ps-command-with-arguments-with-execl-has-unexpected-behaviour/36740477#36740477", "title": "Calling &quot;ps&quot; command with arguments with execl has unexpected behaviour", "body": "<p>It is a variadic function. Just call it like this :</p>\n\n<pre><code>execlp(\"command\", \"command\", \"first arg\", \"second arg\" /*, etc*/, NULL);\n</code></pre>\n\n<p>or in your case</p>\n\n<pre><code>execlp(\"/bin/ps\", \"/bin/ps\", \"-U\", \"username\", NULL);\n</code></pre>\n\n<p>The <code>NULL</code> says to the function : \"it is ok, there are no more arguments.\" If you forget it, there is an undefined behavior.</p>\n\n<p>To go further : <a href=\"http://manpagesfr.free.fr/man/man3/stdarg.3.html\" rel=\"nofollow\">http://manpagesfr.free.fr/man/man3/stdarg.3.html</a></p>\n\n<p>The line <code>execlp(\"/bin/ps\", \"/bin/ps\", \"-Uusername\", NULL);</code> works because <code>ps -Uusername</code> is the same as <code>ps -U username</code>. Just type it in the console, it will prove you that fact ;)</p>\n\n<p>The line <code>execlp(\"/bin/ps\", \"/bin/ps\", \"-U username\", NULL);</code> does not work because it is as if you type <code>ps '-U username'</code> in your shell. <code>'-U username'</code> is a single argument that is not a valid argument of <code>ps</code></p>\n"}], "owner": {"reputation": 147, "user_id": 1541616, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/59f65ef2bf28b3d06c8b1cabe973a756?s=128&d=identicon&r=PG", "display_name": "Ionut Marisca", "link": "https://stackoverflow.com/users/1541616/ionut-marisca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1748, "favorite_count": 0, "accepted_answer_id": 36740477, "answer_count": 1, "score": 1, "last_activity_date": 1461148372, "creation_date": 1461146565, "question_id": 36740348, "link": "https://stackoverflow.com/questions/36740348/calling-ps-command-with-arguments-with-execl-has-unexpected-behaviour", "title": "Calling &quot;ps&quot; command with arguments with execl has unexpected behaviour", "body": "<p>I wrote a simple C program that uses the execl function. What I'm expecting to see after running this program is the output of <code>ps -U myusername</code>.</p>\n\n<p>If writing <code>ps -U myusername</code> in terminal, I get the desired result.</p>\n\n<p>If calling <code>execl(\"/bin/ps\", \"/bin/ps\", \"-U myusername\", NULL)</code> I get the following error message <code>error: improper list</code>.</p>\n\n<p>However, if I remove the space from <code>-U myusername</code>, and call the function in the following way: <code>execl(\"/bin/ps\", \"/bin/ps\", \"-Umyusername\", NULL)</code>, I get the correct result.</p>\n\n<p>Why is this happening and how can I achieve the expected behaviour (this is just a simple example; what I actually want is to let the user input the command and split it in command and arguments and finally call something like <code>execlp(\"command\", \"command\", \"arguments\", NULL)</code>.)?</p>\n"}, {"tags": ["c", "linux", "segmentation-fault", "fopen", "scanf"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 4, "creation_date": 1461146826, "post_id": 36740108, "comment_id": 61062877, "body": "<code>char data = 0;</code> --&gt; <code>int data = 0;</code> because <code>%3d</code> for int."}, {"owner": {"reputation": 20484, "user_id": 521776, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/60dd3c3417791c535860abc76ec01f28?s=128&d=identicon&r=PG", "display_name": "BlackBear", "link": "https://stackoverflow.com/users/521776/blackbear"}, "edited": false, "score": 0, "creation_date": 1461147053, "post_id": 36740108, "comment_id": 61063034, "body": "I tested with gcc and it works fine (<code>gcc (Ubuntu 4.8.4-2ubuntu1~14.04.1) 4.8.4</code>)"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "edited": false, "score": 0, "creation_date": 1461147395, "post_id": 36740108, "comment_id": 61063290, "body": "compile it with <code>-Wall</code> <code>-Wextra</code> gcc should warn about wrong usage of <code>scanf</code> and <code>printf</code>"}, {"owner": {"reputation": 75, "user_id": 4948088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/451a9b25210ec5f77f37a0b027044fa2?s=128&d=identicon&r=PG&f=1", "display_name": "Domack", "link": "https://stackoverflow.com/users/4948088/domack"}, "edited": false, "score": 0, "creation_date": 1461147909, "post_id": 36740108, "comment_id": 61063688, "body": "Yep, changing type of &quot;data&quot; to int (and casting it as a char later when needed) seems to have solved it. Thanks a lot, even though I still don&#39;t get why this would set the file descriptor to NULL."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1461147976, "post_id": 36740108, "comment_id": 61063733, "body": "<i>I still don&#39;t get why this would set the file descriptor to NULL.</i>  Undefined behavior is <i>undefined</i>."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4948088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/451a9b25210ec5f77f37a0b027044fa2?s=128&d=identicon&r=PG&f=1", "display_name": "Domack", "link": "https://stackoverflow.com/users/4948088/domack"}, "edited": false, "score": 0, "creation_date": 1461148742, "post_id": 36741212, "comment_id": 61064262, "body": "As BLUEPIXY mentioned earlier, correct. Thanks for the additional explanation. :)"}], "tags": [], "owner": {"reputation": 2887, "user_id": 5845470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606531753afd42de16d82a1199fc4d45?s=128&d=identicon&r=PG&f=1", "display_name": "jdarthenay", "link": "https://stackoverflow.com/users/5845470/jdarthenay"}, "is_accepted": true, "score": 2, "last_activity_date": 1461148614, "creation_date": 1461148614, "answer_id": 36741212, "question_id": 36740108, "link": "https://stackoverflow.com/questions/36740108/file-descriptor-disappearing-nullifying/36741212#36741212", "title": "File descriptor disappearing/nullifying", "body": "<p>Those lines are inconsistent.</p>\n\n<pre><code>char data = 0;\n/* ... */\n    sscanf(buf, \"%5d,%3d\\n\", &amp;addr, &amp;data);\n</code></pre>\n\n<p><code>data</code> is a <code>char</code>, so it is 1 memory byte.\nYou're running on linux, if you have a 64-bit machine, <code>int</code> is probably 8 bytes. So your <code>sscanf()</code> does a memory overflow that can do anything: overwriting other variables, corrupting the stack, etc... Setting another variable to <code>null</code> is probably one of the less disastrous things it can do.</p>\n"}], "owner": {"reputation": 75, "user_id": 4948088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/451a9b25210ec5f77f37a0b027044fa2?s=128&d=identicon&r=PG&f=1", "display_name": "Domack", "link": "https://stackoverflow.com/users/4948088/domack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 36741212, "answer_count": 1, "score": 2, "last_activity_date": 1461148614, "creation_date": 1461146046, "question_id": 36740108, "link": "https://stackoverflow.com/questions/36740108/file-descriptor-disappearing-nullifying", "title": "File descriptor disappearing/nullifying", "body": "<p>I am using Debian and have written a veeeery simple file parsing program in C. The file I want to open is about 32k lines long, with a strict format:</p>\n\n<pre><code>number,number\\n\nnumber,number\\n\nand so on ...\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    char data = 0;\n    int addr = 0;\n    char buf[50] = {0};\n\n    FILE* myfile = fopen(\"eelocdump.txt\", \"r\");\n\n    if(myfile == NULL)\n    {\n        printf(\"File open error\\n\");\n        return 1;\n    }\n\n    while (fgets(buf, 50, myfile ) != NULL)\n    {\n        sscanf(buf, \"%5d,%3d\\n\", &amp;addr, &amp;data);\n        printf(\"%d,%d\\n\", addr, data);\n    }\n\n    fclose(myfile);\n\n    return 0;\n}\n</code></pre>\n\n<p>For some odd reasons I do not understand, my code reads the first line of the file, writes it out, then segfaults. After about an hour spent on it, I found out that the call to sscanf caused the file descriptor to be set to NULL.</p>\n\n<p>I have found a \"fix\" that I hardly dare to name so:</p>\n\n<pre><code>    while (fgets(buf, 50, myfile) != NULL)\n    {\n        sscanf(buf, \"%5d,%3d\\n\", &amp;addr, &amp;data);\n        printf(\"%d,%d\\n\", addr, data);\n\n        myfile = myfile;\n    }\n</code></pre>\n\n<p>Adding this obvious statement makes my code work, writing out all the 32k lines. This is all but satisfying, as this should not change anything. (nor should sscanf affect the file descriptor)</p>\n\n<p>Could you please help me solve this problem properly? I don't really like the idea to call it \"<a href=\"http://catb.org/jargon/html/magic-story.html\" rel=\"nofollow\">magic</a>\".</p>\n\n<p>Thanks in advance,</p>\n"}, {"tags": ["c", "linux", "linux-kernel", "sched-deadline"], "comments": [{"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461143744, "post_id": 36739005, "comment_id": 61060532, "body": "When using <code>#include &lt;linux&#47;sched.h&gt;</code>, I have <code>SCHED_DEADLINE</code> on my Debian (linux 4.4). What do you include exactly ?"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461144112, "post_id": 36739005, "comment_id": 61060781, "body": "You do not have it. I have the line <code>#define SCHED_DEADLINE 6 </code> after the <code>#define SCHED_IDLE 5</code>. Perhaps this is not the good linux version."}, {"owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461144121, "post_id": 36739005, "comment_id": 61060787, "body": "Using <code>&lt;linux&#47;sched.h&gt;</code> doesn&#39;t change anything, nor using both."}, {"owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461144193, "post_id": 36739005, "comment_id": 61060841, "body": "Yeah, I&#39;ve noticed that. But I can find this line in the <code>&#47;usr&#47;src&#47;linux-headers-3.17.0-031700&#47;include&#47;linux&#47;sched.h</code>. That&#39;s weird."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461144370, "post_id": 36739005, "comment_id": 61060970, "body": "Have you SCHED_DEADLINE in your /usr/src/linux-headers-3.17.0-031700/include/uapi/linux/sche&zwnj;&#8203;d.h ?"}, {"owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461144450, "post_id": 36739005, "comment_id": 61061046, "body": "Yes, and the <code>sched_attr</code> structure is also defined."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461144585, "post_id": 36739005, "comment_id": 61061167, "body": "So, I think you are using a default older version of the linux api. If you try removing the older versions, perhaps it will work."}, {"owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461144703, "post_id": 36739005, "comment_id": 61061271, "body": "what distro are you using?"}, {"owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "reply_to_user": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461144967, "post_id": 36739005, "comment_id": 61061490, "body": "@fluter I&#39;m using Ubuntu 14.04. Boiethios How can I perform that ?"}, {"owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461145154, "post_id": 36739005, "comment_id": 61061648, "body": "Try upgrade the kernel header package, your header package is older than the kernel package"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461145297, "post_id": 36739005, "comment_id": 61061744, "body": "And then just use <code>#include &lt;linux&#47;sched.h&gt;</code>"}, {"owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "edited": false, "score": 0, "creation_date": 1461145590, "post_id": 36739005, "comment_id": 61061970, "body": "After performing a <code>sudo apt-get install linux-headers-$(uname -r)</code> nothing changed, my headers seemed to be up to date."}, {"owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461149001, "post_id": 36739005, "comment_id": 61064418, "body": "Searched <a href=\"http://packages.ubuntu.com/search?suite=default&amp;section=all&amp;arch=any&amp;keywords=linux-headers&amp;searchon=names\" rel=\"nofollow noreferrer\">packages.ubuntu.com/&hellip;</a> it looks that Ubuntu 14.04 release is using kernel version 3.13.0-32. I guess that mean you will need to compile your own kernel from upstream source tarball."}, {"owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "reply_to_user": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461153299, "post_id": 36739005, "comment_id": 61067280, "body": "@fluter It may be a dumb question but... I changed the kernel for a 3.17 low latency one. So, it&#39;s not enough ?"}, {"owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461153376, "post_id": 36739005, "comment_id": 61067331, "body": "What about the Linux-headers?"}, {"owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "edited": false, "score": 0, "creation_date": 1461154606, "post_id": 36739005, "comment_id": 61068256, "body": "I found them in <code>&#47;usr&#47;src&#47;linux-headers-3.17.0-031700&#47;include</code>. If I manage to add them to my project, this should work (I hope)."}, {"owner": {"reputation": 11221, "user_id": 436559, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8d6b535e4fadefca3e9cab9b6b1ee49b?s=128&d=identicon&r=PG", "display_name": "fluter", "link": "https://stackoverflow.com/users/436559/fluter"}, "edited": false, "score": 0, "creation_date": 1461155118, "post_id": 36739005, "comment_id": 61068655, "body": "If /usr/src/linux-headers-3.17.0-031700/include are installed by Linux-headers package, it should work. On my system, the kernel headers will install under /usr/include. So in your case, I guess just add -I//usr/src/linux-headers-3.17.0-031700/include to your make file."}], "answers": [{"tags": [], "owner": {"reputation": 405, "user_id": 2960171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62124f22f491f7b62b08ca76f6b410cb?s=128&d=identicon&r=PG", "display_name": "esavier", "link": "https://stackoverflow.com/users/2960171/esavier"}, "is_accepted": false, "score": 0, "last_activity_date": 1461157918, "last_edit_date": 1461157918, "creation_date": 1461157545, "answer_id": 36744778, "question_id": 36739005, "link": "https://stackoverflow.com/questions/36739005/deadline-scheduling-policy-not-found/36744778#36744778", "title": "DEADLINE scheduling policy not found", "body": "<p>Answer may depend on distribution! this example is based on Debian 8.4</p>\n\n<p>ALso, you will find two tools usefull in those situations - both available on debian's repositories - ack (<strong>ack-grep</strong>) and <strong>locate</strong>\nack will help you find given string in all subdirectories, and locate will help you find actual file (after <code>updatedb</code>) if it exist on your system. For example you can find all files like sched.h starting from root with <code>locate sched.h</code></p>\n\n<p>firsts of all you should #include if you do not posses this particular include, try to download it from repositories, in case you are using Debian - this file can be found in (prefferably latest) <strong>libc6-dev</strong> (notice that dev packages will contain includes and headers for development purposes) or <strong>linux-headers</strong></p>\n\n<p>Also if your compiler cant find <em>linux/sched.h</em> try to give compiler a path hint, in my case it would be : <em>gcc -I/usr/include</em> (which is in this case completly useless - this is default include dir in linux)</p>\n\n<p>Notice that <strong>/usr/include/linux/sched.h</strong> and <strong>/usr/include/sched.h</strong> may differ slightly</p>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "is_accepted": true, "score": 1, "last_activity_date": 1586249993, "last_edit_date": 1586249993, "creation_date": 1461912893, "answer_id": 36931492, "question_id": 36739005, "link": "https://stackoverflow.com/questions/36739005/deadline-scheduling-policy-not-found/36931492#36931492", "title": "DEADLINE scheduling policy not found", "body": "<p>I actually upgraded to <code>Ubuntu 16.04 LTS</code> with a <code>kernel 4.4.0-21-lowlatency</code> and the key word <code>SCHED_DEADLINE</code> is now defined by default.</p>\n\n<p>The problem is <code>struct sched_attr</code> and methods <code>sched_getattr() / sched_setattr()</code> are still missing !</p>\n\n<p>After some research (thanks Google) I found this <a href=\"https://www.kernel.org/doc/Documentation/scheduler/sched-deadline.txt\" rel=\"nofollow noreferrer\">article</a> emitted by the kernel developpers. At the end of the document, it is describe how to use deadline scheduling policy. They simply define by themselves the structure and use <code>syscall</code> for the get/set methods.</p>\n"}, {"tags": [], "owner": {"reputation": 9347, "user_id": 2214693, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/9O4uT.jpg?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/2214693/claudio"}, "is_accepted": false, "score": 0, "last_activity_date": 1484823884, "last_edit_date": 1495542837, "creation_date": 1484823884, "answer_id": 41740246, "question_id": 36739005, "link": "https://stackoverflow.com/questions/36739005/deadline-scheduling-policy-not-found/41740246#41740246", "title": "DEADLINE scheduling policy not found", "body": "<p>Apparently, despite <code>SCHED_DEADLINE</code> being mainline since three years ago, libc's include files are still missing the interface to the deadline scheduler (i.e., <code>sched_setattr()</code>, <code>sched_getattr()</code> and <code>sched_attr</code>, etc.). A behavior that somehow resembles <a href=\"https://stackoverflow.com/q/9565177/2214693\">the time to get libc wrapping the <code>getttid()</code> syscall</a>.</p>\n\n<p>Therefore, at the moment, the best option is to <a href=\"https://github.com/scheduler-tools/rt-app\" rel=\"nofollow noreferrer\">download rt-app from GitHub</a> and use the <strong>libdl</strong> interface.</p>\n"}], "owner": {"reputation": 782, "user_id": 4260704, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-MpnXAqQKqWE/AAAAAAAAAAI/AAAAAAAAGAs/cg8EUjWOLbg/photo.jpg?sz=128", "display_name": "c.censier", "link": "https://stackoverflow.com/users/4260704/c-censier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1282, "favorite_count": 0, "accepted_answer_id": 36931492, "answer_count": 3, "score": 5, "last_activity_date": 1586249993, "creation_date": 1461143507, "last_edit_date": 1484821016, "question_id": 36739005, "link": "https://stackoverflow.com/questions/36739005/deadline-scheduling-policy-not-found", "title": "DEADLINE scheduling policy not found", "body": "<p>I want to implement the DEADLINE scheduling policy in C. I know the feature is implemented since <code>Linux 3.14.10</code> and I'm using Ubuntu 14.04 <code>Linux #### 3.17.0-031700-lowlatency #201410060605 SMP PREEMPT</code> which should be recent enough. I develop the program with Eclipse (launched as sudo).</p>\n\n<p>I've defined <code>_GNU_SOURCE</code> and included <code>sched.h</code> and I'm still unable to use the keyword <code>SCHED_DEADLINE</code>, to define a <code>struct sched_attr</code> or to use function like <code>sched_getattr</code>.</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;sched.h&gt;\n</code></pre>\n\n<p>None of these keywords nor functions are defined in my <code>/usr/include/</code> folder but I've managed to find them in <code>/usr/src/linux-headers-3.17.0-031700/include/</code>. \nI've tried to include this folder in my project's build options but it seems to generate link error.</p>\n\n<p>I'm not really used to C developpment (I'm originally a JS developper) so if someone can explain me what I'm doing wrong and how to fix this, that would be very nice.</p>\n\n<p>Content of the <code>/usr/include/linux/sched.h</code></p>\n\n<pre><code>#ifndef _LINUX_SCHED_H\n#define _LINUX_SCHED_H\n\n/*\n * cloning flags:\n */\n#define CSIGNAL     0x000000ff  /* signal mask to be sent at exit */\n#define CLONE_VM    0x00000100  /* set if VM shared between processes */\n#define CLONE_FS    0x00000200  /* set if fs info shared between processes */\n#define CLONE_FILES 0x00000400  /* set if open files shared between processes */\n#define CLONE_SIGHAND   0x00000800  /* set if signal handlers and blocked signals shared */\n#define CLONE_PTRACE    0x00002000  /* set if we want to let tracing continue on the child too */\n#define CLONE_VFORK 0x00004000  /* set if the parent wants the child to wake it up on mm_release */\n#define CLONE_PARENT    0x00008000  /* set if we want to have the same parent as the cloner */\n#define CLONE_THREAD    0x00010000  /* Same thread group? */\n#define CLONE_NEWNS 0x00020000  /* New namespace group? */\n#define CLONE_SYSVSEM   0x00040000  /* share system V SEM_UNDO semantics */\n#define CLONE_SETTLS    0x00080000  /* create a new TLS for the child */\n#define CLONE_PARENT_SETTID 0x00100000  /* set the TID in the parent */\n#define CLONE_CHILD_CLEARTID    0x00200000  /* clear the TID in the child */\n#define CLONE_DETACHED      0x00400000  /* Unused, ignored */\n#define CLONE_UNTRACED      0x00800000  /* set if the tracing process can't force CLONE_PTRACE on this clone */\n#define CLONE_CHILD_SETTID  0x01000000  /* set the TID in the child */\n/* 0x02000000 was previously the unused CLONE_STOPPED (Start in stopped state)\n   and is now available for re-use. */\n#define CLONE_NEWUTS        0x04000000  /* New utsname group? */\n#define CLONE_NEWIPC        0x08000000  /* New ipcs */\n#define CLONE_NEWUSER       0x10000000  /* New user namespace */\n#define CLONE_NEWPID        0x20000000  /* New pid namespace */\n#define CLONE_NEWNET        0x40000000  /* New network namespace */\n#define CLONE_IO        0x80000000  /* Clone io context */\n\n/*\n * Scheduling policies\n */\n#define SCHED_NORMAL        0\n#define SCHED_FIFO      1\n#define SCHED_RR        2\n#define SCHED_BATCH     3\n/* SCHED_ISO: reserved but not implemented yet */\n#define SCHED_IDLE      5\n/* Can be ORed in to make sure the process is reverted back to SCHED_NORMAL on fork */\n#define SCHED_RESET_ON_FORK     0x40000000\n\n\n#endif /* _LINUX_SCHED_H */\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Files I want are located in the <code>/usr/src/linux-headers-3.17.0-031700/include/</code> folder. Anyway, I tried to add the folder to my project using several methods. Firstly using <code>-I</code> flag of gcc and next using the <code>C_INCLUDE_PATH</code> environment variable.</p>\n\n<p>In both ways, gcc searched in priority in default locations and found the wrong <code>&lt;sched.h&gt;</code> file. I tried to used <code>-nostdinc</code> option to suppress default locations but this is even worse... I get a lot of errors.</p>\n"}, {"tags": ["c", "file", "codeblocks"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461143045, "post_id": 36738814, "comment_id": 61060021, "body": "Why did you even try <code>tyrboC++</code>? Give the exact error message."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 1, "creation_date": 1461143272, "post_id": 36738814, "comment_id": 61060199, "body": "It works on my computer, removing <code>#include &lt;conio.h&gt;</code> (Debian with gcc 5). Where is the trouble ? Use a debugger."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 2, "creation_date": 1461144215, "post_id": 36738814, "comment_id": 61060850, "body": "there is no buffer allocated to <code>c</code>"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1461144498, "post_id": 36738814, "comment_id": 61061095, "body": "@IngoLeonhardt Oh I did not saw it ^^ Will you write the answer ?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461144855, "post_id": 36738814, "comment_id": 61061399, "body": "@Boiethios: Having run the program using a memory checker like Valgrind (<a href=\"http://valgrind.org\" rel=\"nofollow noreferrer\">valgrind.org</a>) you would have seen it."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1461145450, "post_id": 36738814, "comment_id": 61061857, "body": "@alk Oh, yes, valgrind says <code>Use of uninitialised value of size 8</code> I am not (yet) familiar with it, but I see I must do."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1461149547, "post_id": 36738814, "comment_id": 61064729, "body": "You need to study arrays and pointers, before using arrays and pointers."}], "answers": [{"comments": [{"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1461145121, "post_id": 36739602, "comment_id": 61061618, "body": "I might be worth mentioning that the value <code>#define</code>d to be <code>SOME_LENGTH</code> should go into the format specified by <code>scanf()</code> as well. Like <code>fscanf(fp, &quot;%42s&quot;, c);</code> (assuming <code>#define SOME_LENGTH 42</code>)"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461145494, "post_id": 36739602, "comment_id": 61061893, "body": "Better : <code>fscanf( fp, &quot;%&quot; #SOME_LENGTH &quot;s&quot;, c );</code>"}, {"owner": {"reputation": 176, "user_id": 5646269, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aIJBksWgf3w/AAAAAAAAAAI/AAAAAAAAABc/mYLl1IT7B6A/photo.jpg?sz=128", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/5646269/gaurav-sharma"}, "edited": false, "score": 0, "creation_date": 1461146393, "post_id": 36739602, "comment_id": 61062558, "body": "@Ingo thanks, it work fine. As a issue i think c[ ] is same as *c. So I didn&#39;t try bother over there because i read it in K&amp;R."}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1461146469, "post_id": 36739602, "comment_id": 61062612, "body": "@Boiethos it&#39;s a little bit more complicated, look at my last edit"}], "tags": [], "owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "is_accepted": true, "score": 2, "last_activity_date": 1599470414, "last_edit_date": 1599470414, "creation_date": 1461144854, "answer_id": 36739602, "question_id": 36738814, "link": "https://stackoverflow.com/questions/36738814/file-handling-do-not-work-in-codeblocks-but-fine-in-turboc/36739602#36739602", "title": "File handling do not work in codeblocks but fine in turboC++", "body": "<p>You haven't allocated any memory to <code>c</code> before calling <code>fscanf(fp,&quot;%s&quot;,c);</code>.\nThus, <code>fscanf()</code> tries to write data to an arbitrary address which invokes Undefined Behaviour. you should either declare <code>c</code> as an array</p>\n<pre><code>char c[SOME_LENGTH+1];\n</code></pre>\n<p>or use <code>malloc()</code></p>\n<pre><code>c = malloc( SOME_LENGTH+1 );\n</code></pre>\n<p>Furthermore, as @alk hat mentioned in his comment, it's safer to use maximum length in <code>scanf()</code> as well:</p>\n<pre><code>#define SOME_LENGTH 42\n...\nfscanf( fp, &quot;%42s&quot;, c );\n</code></pre>\n<p>You could also use <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Stringification.html\" rel=\"nofollow noreferrer\">Stringifcation</a> but you will need two levels of macros</p>\n<pre><code>#define SOME_LENGTH     42\n#define STR(L)          #L\n#define SCANFFMT(L)     &quot;%&quot; STR(L) &quot;s&quot;\n...\nfscanf( fp, SCANFFMT(SOME_LENGTH), c );\n</code></pre>\n"}], "owner": {"reputation": 176, "user_id": 5646269, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aIJBksWgf3w/AAAAAAAAAAI/AAAAAAAAABc/mYLl1IT7B6A/photo.jpg?sz=128", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/5646269/gaurav-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 816, "favorite_count": 0, "accepted_answer_id": 36739602, "answer_count": 1, "score": -2, "last_activity_date": 1599470414, "creation_date": 1461143013, "question_id": 36738814, "link": "https://stackoverflow.com/questions/36738814/file-handling-do-not-work-in-codeblocks-but-fine-in-turboc", "title": "File handling do not work in codeblocks but fine in turboC++", "body": "<p>I am trying read file using fscanf in a loop but when i execute it, windows show that file.exe has stopped working. Literally, this program work fine in turboC++(<strong>use clrscr() instead of system(\"cls\")</strong>). I know there is a major difference between these two compilers, i am not able to figure it out. Please help me thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n   FILE *fp;\n    char *c;\n    system(\"cls\");\n   fp = fopen(\"test.txt\", \"w+\");\n   fprintf(fp, \"This is testing for fprintf...\\n\");\n   fputs(\"This is testing for fputs...\\n\", fp);\n   rewind(fp);\n   while(!feof(fp)){\n        fscanf(fp,\"%s\",c);\n        printf(\"%s\\n\",c);\n   }\n   fclose(fp);\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "matlab", "tree"], "comments": [{"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1461142388, "post_id": 36738457, "comment_id": 61059472, "body": "if <code>a</code> is not &lt; 5 then <code>a</code> is &gt;= 5, there is no reason to use the <code>else 1</code> part, use <code>node = a &lt; 5 ? 2 : 3;</code>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1461146426, "post_id": 36738457, "comment_id": 61062578, "body": "@AlterMann: The exception would be Not-A-Number which is neither &gt;5 nor &lt;=5."}, {"owner": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1461152353, "post_id": 36738457, "comment_id": 61066618, "body": "@MSalters, I don&#39;t get you, NaN is not defined for integer types"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 35932, "user_id": 1606345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/IwiIM.png?s=128&g=1", "display_name": "David Ranieri", "link": "https://stackoverflow.com/users/1606345/david-ranieri"}, "edited": false, "score": 0, "creation_date": 1461175461, "post_id": 36738457, "comment_id": 61083833, "body": "@AlterMann: Usually not, no. But Matlab defaults to floating point."}], "owner": {"reputation": 1, "user_id": 6228917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd61d48f2fceda051f9f9b213201e44d?s=128&d=identicon&r=PG&f=1", "display_name": "circeo", "link": "https://stackoverflow.com/users/6228917/circeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461143887, "creation_date": 1461142080, "last_edit_date": 1461143887, "question_id": 36738457, "link": "https://stackoverflow.com/questions/36738457/export-decision-tree", "title": "Export decision tree", "body": "<p>I analyse data with decision trees using Matlab. </p>\n\n<p>If I want to use my trees with another platform or language (C, C++, java...), do you know if there is a smart way to do it?</p>\n\n<p>The only thing I can export is a text file with the pseudo code of the tree:</p>\n\n<pre><code> 1  if a&lt;5 then node 2 elseif a&gt;=5 then node 3 else 1\n 2  if b&lt;1 then node 4 elseif b&gt;=1 then node 5 else 1\n ...\n</code></pre>\n\n<p>I can write a cascade of \"if, then, else\" but I wonder if something better already exist.</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 4, "creation_date": 1461141403, "post_id": 36738181, "comment_id": 61058754, "body": "Updating the histogram (frequency table). What else do you think it is?"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 1, "creation_date": 1461141457, "post_id": 36738181, "comment_id": 61058791, "body": "What are you trying to do ?"}, {"owner": {"reputation": 3, "user_id": 6116819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480004c21b22ce64286a3c650d96a45d?s=128&d=identicon&r=PG&f=1", "display_name": "asad", "link": "https://stackoverflow.com/users/6116819/asad"}, "edited": false, "score": 0, "creation_date": 1461141968, "post_id": 36738181, "comment_id": 61059151, "body": "Sorry I don&#39;t understand your question."}, {"owner": {"reputation": 3, "user_id": 6116819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480004c21b22ce64286a3c650d96a45d?s=128&d=identicon&r=PG&f=1", "display_name": "asad", "link": "https://stackoverflow.com/users/6116819/asad"}, "edited": false, "score": 0, "creation_date": 1461141988, "post_id": 36738181, "comment_id": 61059168, "body": "count[tm]=count[tm]+1;"}, {"owner": {"reputation": 3, "user_id": 6116819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480004c21b22ce64286a3c650d96a45d?s=128&d=identicon&r=PG&f=1", "display_name": "asad", "link": "https://stackoverflow.com/users/6116819/asad"}, "edited": false, "score": 0, "creation_date": 1461142020, "post_id": 36738181, "comment_id": 61059198, "body": "count[tm]=count[83]+1; count[83]=???"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 6, "creation_date": 1461142196, "post_id": 36738181, "comment_id": 61059325, "body": "You do not understand the code you wrote? :-S"}, {"owner": {"reputation": 28386, "user_id": 5666987, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/guTdN.jpg?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/5666987/ian"}, "edited": false, "score": 0, "creation_date": 1461142369, "post_id": 36738181, "comment_id": 61059453, "body": "Isn&#39;t that to count the number of people with certain marks?"}, {"owner": {"reputation": 3, "user_id": 6116819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480004c21b22ce64286a3c650d96a45d?s=128&d=identicon&r=PG&f=1", "display_name": "asad", "link": "https://stackoverflow.com/users/6116819/asad"}, "edited": false, "score": 0, "creation_date": 1461142410, "post_id": 36738181, "comment_id": 61059495, "body": "I did not understand just that line how to count use this count array?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1461142461, "post_id": 36738181, "comment_id": 61059536, "body": "Maybe it&#39;s time to open your C textbook."}, {"owner": {"reputation": 4709, "user_id": 2001149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SqsJM.png?s=128&g=1", "display_name": "Santosh A", "link": "https://stackoverflow.com/users/2001149/santosh-a"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461142468, "post_id": 36738181, "comment_id": 61059546, "body": "@asad : Refer @Mohit Jain&#39;s comment. That is what you are looking for. <code>count[tm]</code>  will hold the frequency of <code>marks</code> or number of times that given mark is repeated."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461143871, "post_id": 36738181, "comment_id": 61060612, "body": "Copying code from a site, or another student, then asking us to explain it, is not really helping anyone:(   It&#39;s obviously not &#39;my code&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 1, "creation_date": 1461142789, "post_id": 36738624, "comment_id": 61059813, "body": "<code>count[tm]=count[tm]+1; &#47;&#47; increment the count of mark i by one</code> How is this comment helpful? This is completely redundant. Many people who don&#39;t even understand any of the <code>C</code> dialect would get it."}, {"owner": {"reputation": 797, "user_id": 5093005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHlop.jpg?s=128&g=1", "display_name": "jboockmann", "link": "https://stackoverflow.com/users/5093005/jboockmann"}, "reply_to_user": {"reputation": 29294, "user_id": 2659313, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9828b91aef4c2b3cf14f3501e0a20e33?s=128&d=identicon&r=PG", "display_name": "Mohit Jain", "link": "https://stackoverflow.com/users/2659313/mohit-jain"}, "edited": false, "score": 0, "creation_date": 1461143014, "post_id": 36738624, "comment_id": 61059997, "body": "@MohitJain For me it seems that is new to C and maybe programming at all. I thought it might be helpful for him to add a more abstract description of what the code is doing."}], "tags": [], "owner": {"reputation": 797, "user_id": 5093005, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHlop.jpg?s=128&g=1", "display_name": "jboockmann", "link": "https://stackoverflow.com/users/5093005/jboockmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1461142563, "creation_date": 1461142563, "answer_id": 36738624, "question_id": 36738181, "link": "https://stackoverflow.com/questions/36738181/i-did-not-understand-what-is-happening-with-int-array-in-my-code/36738624#36738624", "title": "I did not understand what is happening with int array in my code", "body": "<p>I added some comments to your code such that you can easier understand what is happening. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void) // use void if your function has no parameters\n{\n    int marks[] = {83, 86, 97, 83, 93, 83, 86, 52, 49, 41, 42, 47, 90, 59, 63, 86, 40, 46, 92, 56, 51, 48, 67, 49, 42, 90, 42, 83, 47, 95, 69, 82, 82, 58, 69, 67, 53, 56, 71, 62}; // you can leave out the array size if you instantiate it afterwards\n\n    int i, tm; // j is never used, so leave it out\n    int count[101]; // count[i] tells you in the end how often the mark i occured in the marks array\n\n    for(i=0; i &lt; 101; i++) // initialize the count array with zeros\n    {\n        count[i]=0;\n    }\n    for(i=0;i&lt;40;i++) // loop over the marks array and increment thhe count array at the current mark position by one\n    {\n        tm=marks[i];\n        count[tm]=count[tm]+1; // increment the count of mark i by one\n    }\n    // marks[i] tells you how often i appears in the marks array -&gt; marks is a frequency table\n    for(i=0;i&lt;=100;i++) // print out how often a mark appeared, but only if it appeared at least once\n    {\n       if(count[i]!=0)\n       {\n            printf(\"Marks: %d count: %d\\n\",i,count[i]);\n       }\n    }\n    return (0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 0, "last_activity_date": 1461143571, "last_edit_date": 1461143571, "creation_date": 1461143095, "answer_id": 36738847, "question_id": 36738181, "link": "https://stackoverflow.com/questions/36738181/i-did-not-understand-what-is-happening-with-int-array-in-my-code/36738847#36738847", "title": "I did not understand what is happening with int array in my code", "body": "<p>Those two lines</p>\n\n<pre><code>tm=marks[i];\ncount[tm]=count[tm]+1; \n</code></pre>\n\n<p>do the following:</p>\n\n<ol>\n<li>get the value stored in <code>marks[i]</code> </li>\n<li>store the value pulled in 1. into <code>tm</code></li>\n<li>get the value of <code>count[tm]</code></li>\n<li>add <code>1</code> to what had been pulled in 3.</li>\n<li>store the result of the addition done in 4. into <code>count[tm]</code>, overwriting the value that had been pulled in 3..</li>\n</ol>\n\n<p>By adding 1 in step 4, you are counting the number of occurrences of a specific mark.</p>\n"}], "owner": {"reputation": 3, "user_id": 6116819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/480004c21b22ce64286a3c650d96a45d?s=128&d=identicon&r=PG&f=1", "display_name": "asad", "link": "https://stackoverflow.com/users/6116819/asad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36738624, "answer_count": 2, "score": -3, "last_activity_date": 1461143571, "creation_date": 1461141345, "last_edit_date": 1461142309, "question_id": 36738181, "link": "https://stackoverflow.com/questions/36738181/i-did-not-understand-what-is-happening-with-int-array-in-my-code", "title": "I did not understand what is happening with int array in my code", "body": "<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\n    int marks[40] = {83, 86, 97, 83, 93, 83, 86, 52, 49, 41, 42, 47, 90, 59, 63, 86, 40, 46, 92, 56, 51, 48, 67, 49, 42, 90, 42, 83, 47, 95, 69, 82, 82, 58, 69, 67, 53, 56, 71, 62};\n\n    int i,j,count[101],tm;\n\n    for(i=0;i&lt;101;i++)\n    {\n        count[i]=0;\n    }\n\n    for(i=0;i&lt;40;i++)\n    {\n        tm=marks[i];\n        count[tm]=count[tm]+1;\n    }\n\n    for(i=0;i&lt;=100;i++)\n    {\n       if(count[i]!=0)\n       {\n            printf(\"Marks: %d count: %d\\n\",i,count[i]);\n       }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>This is my code. I did not understand in this here.</p>\n\n<p><a href=\"https://i.stack.imgur.com/osWAX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/osWAX.png\" alt=\"enter image description here\"></a></p>\n\n<p>first <code>i=0</code>, <code>marks[i]</code>, <code>marks[0]</code> means <code>marks[0]=83</code>\nso\n <code>tm=marks[0]=83</code>\nand then \n<code>count[tm]=count[tm]+1;</code>\nAnd I did not understand in this line.</p>\n"}, {"tags": ["c", "linux-kernel", "filesystems", "inotify"], "comments": [{"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 1, "creation_date": 1461143462, "post_id": 36738157, "comment_id": 61060321, "body": "Perhaps vim is issuing 2 write() calls for your file ? Even though you did 1 change in a text editor, the text editor might perform a lot of work in order to store that change on the disk."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461144028, "post_id": 36738157, "comment_id": 61060723, "body": "Yeah - it might rename the old version to &#39;.tmp&#39; temporarily, as a kind of backup.  I&#39;m afraid that multiple notifications for what seem like simple operations are common.  Windows file systems are no different."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1461151941, "post_id": 36738157, "comment_id": 61066337, "body": "Can you use <code>strace</code> to find out what modifications are done by the editor?"}, {"owner": {"reputation": 4554, "user_id": 501778, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9c3a188a1a6116ee15bc9dda726ef19c?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/501778/manu"}, "edited": false, "score": 0, "creation_date": 1461151961, "post_id": 36738157, "comment_id": 61066348, "body": "So there is no issue or i have not made any mistake in the code that i have written ?"}], "owner": {"reputation": 4554, "user_id": 501778, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9c3a188a1a6116ee15bc9dda726ef19c?s=128&d=identicon&r=PG", "display_name": "Manu", "link": "https://stackoverflow.com/users/501778/manu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461141277, "creation_date": 1461141277, "question_id": 36738157, "link": "https://stackoverflow.com/questions/36738157/inotify-to-monitor-a-file-notifies-twice-even-if-the-file-is-modified-once", "title": "Inotify to monitor a file notifies twice, even if the file is modified once", "body": "<p>I am using inotify to monitor the a file, but am facing an issue when ever the monitored file is changed (file.xml), it notifies twice even though the modification is done once (am opening the file using vim writing to it and am closing the file),an i also see that sometimes it just notifies once and in majority times, it notifies twice, can i get some input regarding as to what i am doing wrong in the code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/inotify.h&gt;\n#include &lt;unistd.h&gt;\n\n#define EVENT_SIZE  ( sizeof (struct inotify_event) )\n#define BUF_LEN     ( 1024 * ( EVENT_SIZE + 16 ) )\n\nconst char *file_path = \"/home/file.xml\";\n\nint main( int argc, char **argv )\n{\nint length, i;\nint fd;\nint wd;\nchar buffer[BUF_LEN];\nfd = inotify_init();\n\nif ( fd &lt; 0 ) {\n    perror( \"inotify_init\" );\n}\n\nwd = inotify_add_watch(fd,\n        file_path,\n        IN_ALL_EVENTS);\n\nif(wd &lt; 0) {\n    perror (\"inotify_add_watch\");\n\n   exit(EXIT_FAILURE);\n}\n\nwhile(1)\n{\n    length = read( fd, buffer, BUF_LEN );\n\n    if ( length &lt; 0 ) {\n        perror( \"read\" );\n    }\n    i = 0;\n    while ( i &lt; length ) {\n        struct inotify_event *event = ( struct inotify_event * ) &amp;buffer[ i ];\n        if ( event-&gt;mask &amp; IN_MODIFY) {\n            printf( \"The file %s was modified.\\n\", file_path );\n            break;\n        }\n        i += EVENT_SIZE + event-&gt;len;\n    }\n}\n\n( void ) inotify_rm_watch( fd, wd );\n( void ) close( fd );\n\nexit( 0 );\n}\n</code></pre>\n"}, {"tags": ["c", "gcc", "linker", "attributes", "sections"], "comments": [{"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461142972, "post_id": 36738133, "comment_id": 61059965, "body": "Should not be <code>var1</code> <code>00404010</code> and <code>var2</code> <code>00404014</code> ?"}, {"owner": {"reputation": 11, "user_id": 4951002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1adfbac35ced3a5ecc3cd042fe068ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Ka\u011fan Tantan", "link": "https://stackoverflow.com/users/4951002/ka%c4%9fan-tantan"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461145511, "post_id": 36738133, "comment_id": 61061914, "body": "sorry my mistake. you are right. vay 1 should be 00404010 and var 2 00404014."}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461145764, "post_id": 36738133, "comment_id": 61062092, "body": "I just changed the order of variable declaration, and it worked (var1 and var2 after the others)."}, {"owner": {"reputation": 11, "user_id": 4951002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1adfbac35ced3a5ecc3cd042fe068ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Ka\u011fan Tantan", "link": "https://stackoverflow.com/users/4951002/ka%c4%9fan-tantan"}, "reply_to_user": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1461153983, "post_id": 36738133, "comment_id": 61067799, "body": "i tried to as you said. this time var3&#39;s address = 00403000 and var1&#39;s address = 00404000. So i think, section2 is not following section1 again. I expected, if var3&#39;s address is 00403000, var1&#39;s address should be 00403014. And also i can define variables in different .c files. so i think need to add some compiler or linker options."}], "owner": {"reputation": 11, "user_id": 4951002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1adfbac35ced3a5ecc3cd042fe068ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Ka\u011fan Tantan", "link": "https://stackoverflow.com/users/4951002/ka%c4%9fan-tantan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 657, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1461244090, "creation_date": 1461141230, "last_edit_date": 1461244090, "question_id": 36738133, "link": "https://stackoverflow.com/questions/36738133/is-there-a-way-to-adding-custom-sections-consecutively-with-gcc-linker", "title": "Is there a way to adding custom sections consecutively with gcc linker?", "body": "<p>I'm developing C on windows and build with mingw. I want to define some variables in custom sections. And these sections must be adding consecutively. I created new sections like that,</p>\n\n<pre><code>__attribute__ ((section(\".section2\")))\nvolatile int var1=1;\n__attribute__ ((section(\".section2\")))\nvolatile int var2=2;\n__attribute__ ((section(\".section1\")))\nvolatile int var3=3;\n__attribute__ ((section(\".section1\")))\nvolatile int var4=4;\n__attribute__ ((section(\".section1\")))\nvolatile int var5=5;\n__attribute__ ((section(\".section1\")))\nvolatile long int var6=6;\n</code></pre>\n\n<p>I checked the sections with objdump and result is</p>\n\n<pre><code>Contents of section .section2:\n 0000 01000000 02000000                    ........\nContents of section .section1:\n 0000 03000000 04000000 05000000 06000000  ................\n</code></pre>\n\n<p>As I said, i want to adding these sections consecutively. I printed variables addresses.</p>\n\n<pre><code>var1 : 00403000\nvar2 : 00403004\nvar3 : 00404000\nvar4 : 00404004\nvar5 : 00404008\nvar6 : 0040400C\n</code></pre>\n\n<p>My problem is section2 is not following section1. Var1's address has to be \"00404010\" and var2's address has to be \"00404014\".</p>\n\n<p>So what should i do for that? Does such compile options or linker options exist?</p>\n\n<p>Thanks in advance! and sorry for my sloppy english.</p>\n"}]