[{"tags": ["c", "arrays", "sorting", "multidimensional-array"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495670333, "post_id": 44170182, "comment_id": 75356264, "body": "1) It is necessary to make it a pointer when inputting <code>m</code> and <code>n</code> in function. E.g <code>void enterArray(int masiv[][50], int *n, int *m);</code> call <code>enterArray(a, &amp;n, &amp;m);</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1495670581, "post_id": 44170182, "comment_id": 75356332, "body": "What does merging two rows have to do with detecting if the row is in descending order?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1495688249, "post_id": 44170182, "comment_id": 75360493, "body": "All <i>input</i> should be <i>validated</i>, at minimum, <code>if (scanf(&quot;%d&quot;,&amp;n) != 1) {... handle error ...}</code> for each place you take input. Otherwise, you may be processing garbage from the point of a failed conversion forward (not to mention if input is canceled with <code>ctrl+d</code> [or <code>ctrl+z</code> on windoze])"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1495688666, "post_id": 44170182, "comment_id": 75360607, "body": "Moreover, what does &quot;<i>I need to merge two sorted by descending order rows</i>&quot; mean? Are you sure you are not supposed to simply sort the values in each <i>row</i> in decreasing order, then sort the array based on the initial value in each row. It is unclear what your goal is."}], "owner": {"reputation": 1, "user_id": 8062179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48cfb562b84ab0c24dc4b49f42da3be0?s=128&d=identicon&r=PG&f=1", "display_name": "squezzi", "link": "https://stackoverflow.com/users/8062179/squezzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1495687354, "creation_date": 1495669797, "last_edit_date": 1495687354, "question_id": 44170182, "link": "https://stackoverflow.com/questions/44170182/c-merging-two-sorted-rows-in-a-descending-order", "title": "C - Merging two sorted rows in a descending order", "body": "<p>I am sorry if my code looks stupid but I am kind of new to the coding world.\nThe task is - I need to input all the elements of a rectangular matrix (no idea if it is the right word in programming) by columns, then I have to check if the row is in a descending order and here comes my problem. I need to merge two sorted by descending order rows and then to print it on the screen but I have no idea how to do that. I am trying 2-3 hours already. I will be very thankful if someone helps me. Thank you.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nvoid enterArray(int masiv[][50],int n,int m);\nvoid checkArray(int masiv[][50], int n, int m);\nvoid merge(int masiv[][50], int n, int m);\n\nint main()\n{\n    int a[50][50];\n    int result, n, m;\n    enterArray(a, n, m);\n    checkArray(a, n, m);\n    return 0;\n}\n\nvoid enterArray(int masiv[][50], int n, int m){\n    int i,j;\n    do{\n        printf(\"Rows\");\n        scanf(\"%d\",&amp;n);\n        printf(\"Columns\");\n        scanf(\"%d\",&amp;m);\n        if(m==n){\n            printf(\"asd\\n\");\n        }\n    }while(n==m);\n\n    for(i=0;i&lt;n;i++)\n        for(j=0;j&lt;m;j++){\n            printf(\"Input the elements of the array by columns [%d][%d]\\n\",j,i);\n            scanf(\"%d\",&amp;masiv[j][i]);\n        }\n}\n\nvoid checkArray(int masiv[][50], int n, int m){\n    int i,j;\n    int flag=1;\n    for(i=0;i&lt;n;i++)\n        for(j=0;j&lt;m-1;j++)\n            if(masiv[i][j]&lt;masiv[i][j+1])\n                flag=0;\n    if(flag==1)\n        printf(\"\\nRow %d is in a descending order\",i);\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "group-policy"], "comments": [{"owner": {"reputation": 658, "user_id": 2372992, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/65e5b2cb3b356fe30143fe271d780f45?s=128&d=identicon&r=PG&f=1", "display_name": "amritanshu", "link": "https://stackoverflow.com/users/2372992/amritanshu"}, "edited": false, "score": 0, "creation_date": 1496592888, "post_id": 44170048, "comment_id": 75714234, "body": "if the ask is how to parse GPO struct <a href=\"https://msdn.microsoft.com/en-us/library/aa374173(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/aa374173(v=vs.85).aspx</a> why isn&#39;t this helpful? Aah I misread it. You&#39;re well past that."}, {"owner": {"reputation": 2472, "user_id": 141516, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/123b091d6b32d105b16d6979d986226e?s=128&d=identicon&r=PG", "display_name": "Will I Am", "link": "https://stackoverflow.com/users/141516/will-i-am"}, "reply_to_user": {"reputation": 658, "user_id": 2372992, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/65e5b2cb3b356fe30143fe271d780f45?s=128&d=identicon&r=PG&f=1", "display_name": "amritanshu", "link": "https://stackoverflow.com/users/2372992/amritanshu"}, "edited": false, "score": 0, "creation_date": 1496611603, "post_id": 44170048, "comment_id": 75719753, "body": "That tells  me how to get information about the goo. However I cannot get information about what the GPO contains. For example, in my extension, I want to check if the GOP modified a particular subkey."}, {"owner": {"reputation": 658, "user_id": 2372992, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/65e5b2cb3b356fe30143fe271d780f45?s=128&d=identicon&r=PG&f=1", "display_name": "amritanshu", "link": "https://stackoverflow.com/users/2372992/amritanshu"}, "edited": false, "score": 1, "creation_date": 1496637743, "post_id": 44170048, "comment_id": 75725240, "body": "Yes I understand in my current setup I don&#39;t have an ability to help you with this one directly, but chrome has a bit of code that parses and figures out Group policy you can have a look? <a href=\"https://chromium.googlesource.com/experimental/chromium/src/+/27658f3df0e55b6fb89ec56c2751f46fbc86a5ab/chrome/browser/policy\" rel=\"nofollow noreferrer\">chromium.googlesource.com/experimental/chromium/src/+/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2472, "user_id": 141516, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/123b091d6b32d105b16d6979d986226e?s=128&d=identicon&r=PG", "display_name": "Will I Am", "link": "https://stackoverflow.com/users/141516/will-i-am"}, "is_accepted": true, "score": 1, "last_activity_date": 1518933018, "last_edit_date": 1518933018, "creation_date": 1496687299, "answer_id": 44375405, "question_id": 44170048, "link": "https://stackoverflow.com/questions/44170048/processing-group-policy-with-gp-extension/44375405#44375405", "title": "Processing group policy with GP Extension", "body": "<p>So after squirreling through the Chromium code (per amritanshu comment), I found one way which seems to work, however I am not yet understanding what exceptions there may be (if any):</p>\n\n<ol>\n<li>get lpFileSysPath field of the pCurObj which will be a UNC path.</li>\n<li>Append \"\\Registry.pol\" to the path.</li>\n<li>Read and parse the resulting file, which will be a PReg file.</li>\n</ol>\n\n<p>The PReg file is documented here:\n<a href=\"https://msdn.microsoft.com/en-us/library/aa374407(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/aa374407(v=vs.85).aspx</a></p>\n\n<p>If anyone sees anything wrong with this approach, or knows of any exceptions for this algorithm, please let me know.</p>\n\n<p>EDIT:\nAlso found this blog with a better written, though similar explanation: <a href=\"https://redsigil.weebly.com/home/group-policy-callbacks-the-missing-documentation\" rel=\"nofollow noreferrer\">https://redsigil.weebly.com/home/group-policy-callbacks-the-missing-documentation</a></p>\n"}], "owner": {"reputation": 2472, "user_id": 141516, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/123b091d6b32d105b16d6979d986226e?s=128&d=identicon&r=PG", "display_name": "Will I Am", "link": "https://stackoverflow.com/users/141516/will-i-am"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 2, "accepted_answer_id": 44375405, "answer_count": 1, "score": 8, "last_activity_date": 1518933018, "creation_date": 1495668572, "last_edit_date": 1496008827, "question_id": 44170048, "link": "https://stackoverflow.com/questions/44170048/processing-group-policy-with-gp-extension", "title": "Processing group policy with GP Extension", "body": "<p>I created a Group Policy extension that implements ProcessGroupPolicyEx.\nI sucesfully am notified when I receive a group policy.</p>\n\n<p>I am however at a loss to how to read the policy from inside the GPO. The <a href=\"https://msdn.microsoft.com/en-us/library/aa373494(v=vs.85).aspx\" rel=\"noreferrer\">example</a> stops at looping through GPOs:</p>\n\n<pre><code> for( pCurGPO = pChangedGPOList; pCurGPO; pCurGPO = pCurGPO-&gt;pNext )\n   {\n       if( *pbAbort )\n       {\n           // Abort.\n           break;\n       }\n       // ...\n   }\n</code></pre>\n\n<p>That is fine, but how do I get the policy (the actual settings) inside the pCurGPO? I need to get either the settings that this GPO contains, or the registry key where it stores them.  This is because I created multiple ADMX templates that target my extension, so I need to tell them apart. </p>\n\n<p>So far, I've found some samples, but they assume that the extension knows what registries will be changed, in advance. However, in my case, I do not want the extension to make this assumption, I want it to check the updated GPO and determine exactly what is being changed.</p>\n\n<p>Any pointers would be greatly appreciated.</p>\n"}, {"tags": ["c", "assembly", "x86", "cpu-architecture", "micro-optimization"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 6, "creation_date": 1495664378, "post_id": 44169342, "comment_id": 75354607, "body": "The &quot;freeness&quot; is about latency, which you are not measuring here. Also 2% on that is significantly less than a cycle, so due to &quot;weird effects&quot; only"}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1495664420, "post_id": 44169342, "comment_id": 75354629, "body": "@harold: Can you explain what you mean? Or preferably give some example code that <i>does</i> measure latency? I have no idea how to measure anything that demonstrates anything about MOV being free. Sure, I can see it&#39;s cheaper than a cycle, but cheap doesn&#39;t mean free. Remove 10 moves in your code and your program might go ~20% faster..."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1495664797, "post_id": 44169342, "comment_id": 75354745, "body": "I&#39;ll give a test case, but free in this context never meant literally free, it meant &quot;about as free as a nop&quot; - though that&#39;s not entirely accurate either"}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1495665035, "post_id": 44169342, "comment_id": 75354832, "body": "@harold: I don&#39;t know if that&#39;s what most people who say this really mean... e.g. the latest instance was where I was just discussing this with someone and he was saying that after translation to microcode (I presume he meant micro-ops), the MOV instruction in a tight loop can get entirely removed. That seems to contradict what you&#39;re saying?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 2, "creation_date": 1495665323, "post_id": 44169342, "comment_id": 75354921, "body": "Well what does &quot;entirely removed&quot; even mean. Clearly it can&#39;t be removed before decoding, because it isn&#39;t even known what it is yet. Unsurprisingly the renaming trick can, at best, remove the mov during renaming and then not even always. Just by being there, the mov can&#39;t be <i>entirely</i> free."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1495665579, "post_id": 44169342, "comment_id": 75354983, "body": "@harold: Not on the first decoding, but it could be removed on subsequent decodings with a bit of caching right? It&#39;s a tight loop after all; the CPU sees all the code, so it can just jump ahead."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1495666235, "post_id": 44169342, "comment_id": 75355168, "body": "I guess so. From what I&#39;ve heard/guessed about how it works, a technique like that can&#39;t actually be applied, but it&#39;s pretty hard to know anything for sure."}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 8, "creation_date": 1495666764, "post_id": 44169342, "comment_id": 75355328, "body": "You added 25% more instructions, yet it is only 2% slower.  You can&#39;t explain that away with &quot;seems there is no MOV elimination&quot;.  A 2% difference requires another explanation, like the core getting too hot and throttling back."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "reply_to_user": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1495666843, "post_id": 44169342, "comment_id": 75355350, "body": "@HansPassant: The core getting too hot? You really think something like that is the difference between the two -- the core is getting too hot? I&#39;m not trying to explain it &quot;away&quot;, though; I&#39;m trying to prove a claim. Sure, the CPU is good at optimizing, but that&#39;s not the claim I see. The claim I hear is that MOVs can get eliminated, which is theoretically possible but which I cannot reproduce anywhere."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 6, "creation_date": 1495791857, "post_id": 44169342, "comment_id": 75409712, "body": "Register renaming effectively eliminates the MOV from the back-end, meaning it consists of 0 &#181;ops, does not consume an execution port, and has 0 latency. However, the instruction itself still has to be decoded, which isn&#39;t free. Furthermore, it takes up space in the code, which means space in the cache. So no, a MOV is never truly free, because there are costs in the front-end, but it is often <i>effectively</i> free in the context of a larger block of code that is doing some meaningful operation. A 2% difference in execution speed is clearly <i>far</i> less than a cycle, as one would naively expect."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 3, "creation_date": 1495943958, "post_id": 44169342, "comment_id": 75457697, "body": "@CodyGray: An eliminated MOV takes up space in the ROB until it retires (same as an xor-zeroing instruction or even a NOP), on Intel hardware (Without any branch mispredictions, <code>uops_retired.retire_slots</code> will almost exactly match <code>uops_issued.any</code>).  My mental model is that they enter the ROB (fused-domain) in an already-executed ready-to-retire state, with zero unfused-domain uops issued into the RS (scheduler).  Presumably there&#39;s something non-trivial about not having a uop to retire for an instruction, maybe something about updating RIP or just rolling back mis-speculation..."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1495944408, "post_id": 44169342, "comment_id": 75457768, "body": "...Anyway, this means that such instructions take up space in the out-of-order window on Intel, limiting the CPUs ability to hide latency.  IDK how it works on AMD.  In most cases the front-end cost is what&#39;s relevant, though.  (Intel could design a CPU that worked differently, and sort of macro-fused eliminated instructions into the preceding one when possible, since we already know it&#39;s possible for cmp/jcc to be represented by a single uop.  Retirement isn&#39;t a bottleneck, and fusing at issue time (not decode) would be more complexity and not worth the small gain in effective ROB capacity.)"}], "answers": [{"comments": [{"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495666736, "post_id": 44169609, "comment_id": 75355322, "body": "Hm, how is this supposed to be measuring something different from my example? I&#39;m also on Haswell (4700MQ) and I&#39;m seeing the same 2% difference (2650 ms compared to 2700 ms)..."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 4, "creation_date": 1495666852, "post_id": 44169609, "comment_id": 75355352, "body": "@Mehrdad because the <code>mov</code>s are now in the dependency chain, so if they had a latency it would have to add up. In your test case, the <code>mov</code> is just sort of dangling at the end of chain, nothing is waiting for it to happen. It might be eliminated or not, there is no way to tell."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495666976, "post_id": 44169609, "comment_id": 75355382, "body": "I mean it certainly can&#39;t be <i>harder</i> to eliminate it in my case, right? And regardless, I don&#39;t see any difference... so is it fair to say MOV is never eliminated entirely? (If so you might want to address the other parts of the question, given this current answer doesn&#39;t really add anything currently.)"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495667240, "post_id": 44169609, "comment_id": 75355468, "body": "@Mehrdad oh it&#39;s probably eliminated, but even without elimination you would barely notice that mov in the timing since nothing depends on it and there will be plenty of throughput to just execute it, dare I say, &quot;for free&quot; (close enough, right?). As for mov never being eliminated entirely, I don&#39;t think that&#39;s a fair conclusion to draw - it has 0 latency, what more would you want?"}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495667375, "post_id": 44169609, "comment_id": 75355497, "body": "I mean, I still don&#39;t see it having 0 of anything. You might say it has 0.02 latency, or maybe 500x throughput, or something like that, but 0 latency? How do you look those timings that consistently show a difference of 50 ms and see 0 of anything? I just don&#39;t get where you&#39;re pulling the zero from."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 3, "creation_date": 1495667500, "post_id": 44169609, "comment_id": 75355521, "body": "@Mehrdad the timings are different, yes. But latency can only ever (inb4 Netburst with its weird dual-pumped ALU) be an integer number of cycles, so <code>mov</code> either adds a cycle or it doesn&#39;t (in which case it must have been eliminated). That its mere presence has <i>other</i> (more subtle) effects, is really unrelated. You are absolutely right of course that those effects do exist."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495668016, "post_id": 44169609, "comment_id": 75355681, "body": "I see. But I assume you only say latency is an integer number of cycles because you&#39;re assuming the CPU doesn&#39;t do the kind of optimization I just mentioned above, right? Like if it just decides to skip an instruction (it shouldn&#39;t be so hard to do this for a loop of NOPs at least, if nothing else) then the average latency of the NOP would be far less than 1 cycle but still positive, since it would run the first time and every time there is a context switch."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495668614, "post_id": 44169609, "comment_id": 75355846, "body": "@Mehrdad the thing about latency is that it is the time it takes from when the instruction is issued to when a dependent instruction can be issued (a mildly fancy way to say &quot;how long it takes&quot;, but the difference matters). NOP doesn&#39;t work like that, it depends on nothing and nothing depends on it, so it has no latency (you can measure the throughput still). It may help to look at <a href=\"https://stackoverflow.com/a/28908567/555045\">this image</a>. With any sort of conventional architecture (any recent x86 is known to be like this too) that will always be a (whole) number of cycles."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495668826, "post_id": 44169609, "comment_id": 75355907, "body": "I see. What about <code>mov eax, eax</code>? Does it have a latency? If so, what if you pretend this is what I wrote instead of NOP in the previous comment? Wouldn&#39;t that still lower the average latency below 1 instruction?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 1, "creation_date": 1495669149, "post_id": 44169609, "comment_id": 75355986, "body": "@Mehrdad that&#39;s getting into odd cases a bit since it depends on how it is implemented, at least it is possible to <i>try</i> to measure it since it notionally reads something and writes something. Actually doing that (eg by adapting the code from my second test case) shows its latency to be 1 on Haswell (ie it is not eliminated). I can&#39;t think of a reason for that off the top of my head but that&#39;s how it is"}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495669269, "post_id": 44169609, "comment_id": 75356016, "body": "Right, but if hypothetically Haswell <i>was</i> smart enough to eliminate it on subsequent iterations of the loop, then wouldn&#39;t that imply its average latency is lower than 1 cycle? Like I&#39;m asking more about the definition of latency here (and whether it can on average be less than 1 cycle) rather than about the particular implementation."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495669755, "post_id": 44169609, "comment_id": 75356122, "body": "And if <code>mov eax, eax</code> really bothers you for this example, you can pretend I said <code>xchg eax, ebx; xchg ebx, eax</code>... basically any sequence of effective no-ops that a sufficiently-smart CPU might optimize out on subsequent runs."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 2, "creation_date": 1495669803, "post_id": 44169609, "comment_id": 75356135, "body": "@Mehrdad oh sorry yes, an average latency can be a non-integer. Under the hypothesis that what is happening is <i>occasional</i> failure to eliminate the mov, you might even say that the latency is on average some low but non-zero number. AFAIK it&#39;s just due to other effects but it&#39;s always worth a try. E: for example if the consistent small penalty for my second example changes significantly if &quot;other harmless junk&quot; is put in there instead of movs, that might indicate something interesting in that direction."}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495670233, "post_id": 44169609, "comment_id": 75356240, "body": "Ok thanks. Regarding your comment: I don&#39;t think this is an occasional failure to eliminate the mov, I think it&#39;s happening too frequently for that (2% of the time is a lot), so my conclusion is it&#39;s probably never eliminated completely. Though then again, 2% is too low for me to guess what might be actually taking 1/50th of a clock cycle on average..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1495680923, "post_id": 44169609, "comment_id": 75358599, "body": "are you running this baremetal?  with or without caches enabled?  you adjust the fetch alignment through at least 16 if not 32 bytes?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1495768606, "post_id": 44169609, "comment_id": 75399758, "body": "See also <a href=\"https://cs.stackexchange.com/questions/75811/why-is-addition-as-fast-as-bitwise-operations-in-modern-processors/75828?noredirect=1#comment161451_75828\">my comments on the discussion that inspired this question</a>.  I used perf counters to see that the total cycle count matched exactly with the number of <code>mov</code> instructions that weren&#39;t eliminated (by looking at <code>uops_executed.thread</code>).  SKL can do a somewhat better job of handling two dependent renames per clock."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1495774170, "post_id": 44169609, "comment_id": 75401080, "body": "@harold: I came up with an even cleaner test, see my answer.  It runs at the expected speeds to within measurement error (better than 1 part in 10000 for 1G iterations)."}], "tags": [], "owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "is_accepted": false, "score": 12, "last_activity_date": 1495665644, "creation_date": 1495665644, "answer_id": 44169609, "question_id": 44169342, "link": "https://stackoverflow.com/questions/44169342/can-x86s-mov-really-be-free-why-cant-i-reproduce-this-at-all/44169609#44169609", "title": "Can x86&#39;s MOV really be &quot;free&quot;? Why can&#39;t I reproduce this at all?", "body": "<p>Here are two small tests that I believe conclusively show evidence for mov-elimination:</p>\n\n<pre><code>__loop1:\n    add edx, 1\n    add edx, 1\n    add ecx, 1\n    jnc __loop1\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>__loop2:\n    mov eax, edx\n    add eax, 1\n    mov edx, eax\n    add edx, 1\n    add ecx, 1\n    jnc __loop2\n</code></pre>\n\n<p>If <code>mov</code> added a cycle to a dependency chain, it would be expected that the second version takes about 4 cycles per iteration. On my Haswell, both take about 2 cycles per iteration, which cannot happen without mov-elimination.</p>\n"}, {"comments": [{"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 2, "creation_date": 1495793930, "post_id": 44193770, "comment_id": 75410987, "body": "+1 great answer! Some of it actually went over my head (e.g. I hadn&#39;t heard of &quot;fused-domain&quot; before) but I think I grasped what&#39;s going on. Thanks!"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495832522, "post_id": 44193770, "comment_id": 75432630, "body": "@Mehrdad: Since <a href=\"http://stackoverflow.com/questions/26046634/micro-fusion-and-addressing-modes\">micro-fusion</a> is a thing, &quot;fused-domain&quot; is a convenient term to refer to the whole pipeline (after the decoders) except for the execution units and the scheduler that feeds them.  <code>uops_issued.any</code> is really just counting uops as they issue into the out-of-order core (the ROB and scheduler).  Since none of them are micro-fused, I could have just said that.  Branch mispredicts or other mis-speculation roll-backs will cause <code>uops_retired</code> to be less than issued/executed."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495838553, "post_id": 44193770, "comment_id": 75434386, "body": "@Mehrdad: I made an update to try to explain the loop in your question better.  I thought I was onto something, but it turned out not to really explain the 2% difference at all.  I didn&#39;t try running it myself with perf counters, but hopefully the answer is slightly more beginner-friendly now.  (I avoided the term &quot;fused-domain&quot; in the early part).  I think it might be worthy of being marked accepted, even though I haven&#39;t really explained the 2% diff you observed with your loop.  Is my explanation of the 50% difference in my artificial example clear enough?"}, {"owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 2, "creation_date": 1495841962, "post_id": 44193770, "comment_id": 75435156, "body": "Yeah I&#39;m pretty sure I understand it. You&#39;re saying dec + jnz get fused into 1 operation, and so if the mov is eliminated, you have 2 operations running every for 4 instructions, and each one takes a cycle, giving the 2.00 ins/cycle, and analogously with the 1.33 and 1.50 cases. The 2% is definitely curious, I agree. But it&#39;s a really good answer; I was going to accept it at some point, just wasn&#39;t in a hurry about it. Thanks for writing it."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495842605, "post_id": 44193770, "comment_id": 75435288, "body": "@Mehrdad: yup.  <code>dec&#47;jnz</code> macro-fusion isn&#39;t essential, BTW.  I only had to make a big deal out of it to explain the uop perf counters.  If the <code>jnz</code> was a separate uop, the uops_issued and executed counts would be 1G higher, and the front-end would be maxed out at 4 per clock.   e.g. <code>lea ecx, [rax-1]</code> <code>dec ecx</code> <code>mov eax,ecx</code> <code>jnz .loop</code> would decode to 4 uops, but only three of them would need execution units.  But it would be succeptible to the 2% or whatever slowdown if <code>dec</code> ever steals port6 from <code>jnz</code>.  (The LEA can only run on port 1 or 5, and the MOV doesn&#39;t need a port)."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "edited": false, "score": 0, "creation_date": 1495843291, "post_id": 44193770, "comment_id": 75435402, "body": "Just tested that loop without macro-fusion (with a <code>mov</code> between the <code>dec</code> and <code>jnz</code>).  No weird 2% slowdown there, it runs exactly as fast as the 3-uop loop.  But silly me, it doesn&#39;t need to max out the front-end because the bottleneck is still the 2 cycle latency of lea + dec."}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1505806297, "post_id": 44193770, "comment_id": 79551411, "body": "&#171;mov-elimination can be useful for zero-extending from 32 to 64 bits, and for 8 to 64.&#187; your example is 8 to <b>32</b> bits."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 1, "creation_date": 1505806461, "post_id": 44193770, "comment_id": 79551526, "body": "@JD\u0142ugosz: <code>movzx eax, bl</code> is 8 to 64.  The 32 -&gt; 64 part is implicit from writing a 32-bit register (<a href=\"https://stackoverflow.com/questions/11177137/why-do-most-x64-instructions-zero-the-upper-part-of-a-32-bit-register\" title=\"why do most x64 instructions zero the upper part of a 32 bit register\">stackoverflow.com/questions/11177137/&hellip;</a>).  Writing <code>movzx rax, bl</code> would make the code larger (REX prefix) for no benefit."}, {"owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 0, "creation_date": 1615409311, "post_id": 44193770, "comment_id": 117685056, "body": "FYI move elimination is disabled in Ice Lake with newer microcode. See erratum ICL065."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "edited": false, "score": 1, "creation_date": 1615418302, "post_id": 44193770, "comment_id": 117688028, "body": "@BeeOnRope: Oh, FFS Intel, test your CPUs better so we don&#39;t have to keep working around performance potholes introduced by mitigations. Especially since Intel&#39;s optimization advice for IvyBridge was to prefer overwriting the result of a <code>mov</code> right away to free up mov-elimination resources, making it more likely for the <code>mov</code> to be on the critical path without elimination.  (And compilers seem to prefer doing more with the copy instead of the original after making a copy.)"}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 45, "last_activity_date": 1586494096, "last_edit_date": 1592644375, "creation_date": 1495773786, "answer_id": 44193770, "question_id": 44169342, "link": "https://stackoverflow.com/questions/44169342/can-x86s-mov-really-be-free-why-cant-i-reproduce-this-at-all/44193770#44193770", "title": "Can x86&#39;s MOV really be &quot;free&quot;? Why can&#39;t I reproduce this at all?", "body": "<p><strong>The throughput of the loop in the question doesn't depend on the <em>latency</em> of MOV, or (on Haswell) the benefit of not using an execution unit.</strong></p>\n<p>The loop is still only 4 uops for the front-end to issue into the out-of-order back-end.  (<code>mov</code> still has to be tracked by the out-of-order back-end even if it doesn't need an execution unit, but <code>cmp/jc</code> macro-fuses into a single uop).</p>\n<p>Intel CPUs since Core 2 have had an issue width of 4 uops per clock, so the <code>mov</code> doesn't stop it from executing at (close to) one iter per clock on Haswell.  It would also run at one per clock on Ivybridge (with mov-elimination), but <em>not</em> on Sandybridge (no mov-elimination).  <strong>On SnB, it would be about one iter per 1.333c cycles, bottlenecked on ALU throughput because the <code>mov</code> would always need one</strong>.  (SnB/IvB have only three ALU ports, while Haswell has four).</p>\n<p>Note that special handling in the rename stage has been a thing for x87 FXCHG (swap <code>st0</code> with <code>st1</code>) for much longer than MOV.  Agner Fog lists FXCHG as 0 latency on PPro/PII/PIII (first-gen P6 core).</p>\n<hr />\n<p>The loop in the question has two interlocking dependency chains (the <code>add edi,esi</code> depends on EDI and on the loop counter ESI), which makes it more sensitive to imperfect scheduling.  A 2% slowdown vs. theoretical prediction because of seemingly-unrelated instructions isn't unusual, and small variations in order of instructions can make this kind of difference.  To run at exactly 1c per iter, every cycle needs to run an INC and an ADD.  Since all the INCs and ADDs are dependent on the previous iteration, out-of-order execution can't catch up by running two in a single cycle.  Even worse, the ADD depends on the INC in the previous cycle, which is what I meant by &quot;interlocking&quot;, so losing a cycle in the INC dep chain also stalls the ADD dep chain.</p>\n<p>Also, predicted-taken branches can only run on port6, so <strong>any cycle where port6 doesn't executed a cmp/jc is a cycle of lost throughput</strong>.  This happens every time an INC or ADD steals a cycle on port6 instead of running on ports 0, 1, or 5.  IDK if this is the culprit, or if losing cycles in the INC/ADD dep chains themselves is the problem, or maybe some of both.</p>\n<p><strong>Adding the extra MOV doesn't add any execution-port pressure, assuming it's eliminated 100%, but it does stop the front-end from running ahead of the back-end execution units</strong>.  (Only 3 of the 4 uops in the loop need an execution unit, and your Haswell CPU can run INC and ADD on any of its 4 ALU ports: 0, 1, 5, and 6.  So the bottlenecks are:</p>\n<ul>\n<li>the front-end max throughput of 4 uops per clock.  (The loop without MOV is only 3 uops, so the front-end can run ahead).</li>\n<li>taken-branch throughput of one per clock.</li>\n<li>the dependency chain involving <code>esi</code> (INC latency of 1 per clock)</li>\n<li>the dependency chain involving <code>edi</code> (ADD latency of 1 per clock, and also dependent on the INC from the previous iteration)</li>\n</ul>\n<p>Without the MOV, the front-end can issue the loop's three uops at 4 per clock until the out-of-order back-end is full.  (AFAICT, <a href=\"https://stackoverflow.com/questions/39311872/is-performance-reduced-when-executing-loops-whose-uop-count-is-not-a-multiple-of\">it &quot;unrolls&quot; tiny loops in the loop-buffer (Loop Stream Detector: LSD), so a loop with ABC uops can issue in an ABCA BCAB CABC ... pattern.</a>  The perf counter for <code>lsd.cycles_4_uops</code> confirms that it mostly issues in groups of 4 when it issues any uops.)</p>\n<p><a href=\"https://stackoverflow.com/questions/40681331/how-are-x86-uops-scheduled-exactly\">Intel CPUs assign uops to ports as they issue into the out-of-order back-end</a>.  The decision is based on counters that track how many uops for each port are already in the scheduler (aka Reservation Station, RS).  When there are lots of uops in the RS waiting to execute, this works well and should usually avoid scheduling INC or ADD to port6.  And I guess also avoids scheduling the INC and ADD such that time is lost from either of those dep chains.  But if the RS is empty or nearly-empty, the counters won't stop an ADD or INC from stealing a cycle on port6.</p>\n<p>I thought I was onto something here, but any sub-optimal scheduling should let the front-end catch up and keep the back-end full.  I don't think we should expect the front-end to cause enough bubbles in the pipeline to explain a 2% drop below max throughput, since the tiny loop should run from the loop buffer at a very consistent 4 per clock throughput.  Maybe there's something else going on.</p>\n<hr />\n<h1>A real example of the benefit of <code>mov</code> elimination.</h1>\n<p>I used <code>lea</code> to construct a loop that only has one <code>mov</code> per clock, creating a perfect demonstration where MOV-elimination succeeds 100%, or 0% of the time with <code>mov same,same</code> to demonstrate the latency bottleneck that produces.</p>\n<p><strong>Since the macro-fused <code>dec/jnz</code> is <em>part</em> of the dependency chain involving the loop counter, imperfect scheduling can't delay it.</strong>  This is different from the case where <code>cmp/jc</code> &quot;forks off&quot; from the critical-path dependency chain every iteration.</p>\n<pre><code>_start:\n    mov     ecx, 2000000000 ; each iteration decrements by 2, so this is 1G iters\nalign 16  ; really align 32 makes more sense in case the uop-cache comes into play, but alignment is actually irrelevant for loops that fit in the loop buffer.\n.loop:\n    mov eax, ecx\n    lea ecx, [rax-1]    ; we vary these two instructions\n\n    dec ecx             ; dec/jnz macro-fuses into one uop in the decoders, on Intel\n    jnz .loop\n\n.end:\n    xor edi,edi    ; edi=0\n    mov eax,231    ; __NR_exit_group from /usr/include/asm/unistd_64.h\n    syscall        ; sys_exit_group(0)\n</code></pre>\n<p>On Intel SnB-family, LEA with one or two components in the addressing mode runs with 1c latency (See <a href=\"http://agner.org/optimize/\" rel=\"noreferrer\">http://agner.org/optimize/</a>, and other links in the <a href=\"/questions/tagged/x86\" class=\"post-tag\" title=\"show questions tagged &#39;x86&#39;\" rel=\"tag\">x86</a> tag wiki).</p>\n<p>I built and ran this as a static binary on Linux, so user-space perf-counters for the whole process are measuring just the loop with negligible startup / shutdown overhead.  (<code>perf stat</code> is really easy compared to putting perf-counter queries into the program itself)</p>\n<pre><code>$ yasm -felf64 -Worphan-labels -gdwarf2 mov-elimination.asm &amp;&amp; ld -o mov-elimination mov-elimination.o &amp;&amp;\n  objdump -Mintel -drwC mov-elimination &amp;&amp;\n  taskset -c 1 ocperf.py stat -etask-clock,context-switches,page-faults,cycles,instructions,branches,uops_issued.any,uops_executed.thread  -r2 ./mov-elimination\n\nDisassembly of section .text:\n\n00000000004000b0 &lt;_start&gt;:\n  4000b0:       b9 00 94 35 77          mov    ecx,0x77359400\n  4000b5:       66 66 2e 0f 1f 84 00 00 00 00 00        data16 nop WORD PTR cs:[rax+rax*1+0x0]\n\n00000000004000c0 &lt;_start.loop&gt;:\n  4000c0:       89 c8                   mov    eax,ecx\n  4000c2:       8d 48 ff                lea    ecx,[rax-0x1]\n  4000c5:       ff c9                   dec    ecx\n  4000c7:       75 f7                   jne    4000c0 &lt;_start.loop&gt;\n\n00000000004000c9 &lt;_start.end&gt;:\n  4000c9:       31 ff                   xor    edi,edi\n  4000cb:       b8 e7 00 00 00          mov    eax,0xe7\n  4000d0:       0f 05                   syscall \n\nperf stat -etask-clock,context-switches,page-faults,cycles,instructions,branches,cpu/event=0xe,umask=0x1,name=uops_issued_any/,cpu/event=0xb1,umask=0x1,name=uops_executed_thread/ -r2 ./mov-elimination\n\n Performance counter stats for './mov-elimination' (2 runs):\n\n    513.242841      task-clock:u (msec)       #    1.000 CPUs utilized    ( +-  0.05% )\n             0      context-switches:u        #    0.000 K/sec                  \n             1      page-faults:u             #    0.002 K/sec                  \n 2,000,111,934      cycles:u                  #    3.897 GHz              ( +-  0.00% )\n 4,000,000,161      instructions:u            #    2.00  insn per cycle   ( +-  0.00% )\n 1,000,000,157      branches:u                # 1948.396 M/sec            ( +-  0.00% )\n 3,000,058,589      uops_issued_any:u         # 5845.300 M/sec            ( +-  0.00% )\n 2,000,037,900      uops_executed_thread:u    # 3896.865 M/sec            ( +-  0.00% )\n\n   0.513402352 seconds time elapsed                                          ( +-  0.05% )\n</code></pre>\n<p>As expected, the loop runs 1G times (<code>branches</code> ~= 1 billion).  The &quot;extra&quot; 111k cycles beyond 2G is overhead that's present in the other tests, too, including the one with no <code>mov</code>.  It's not from occasional failure of mov-elimination, but it does scale with the iteration count so it's not just startup overhead.  It's probably from timer interrupts, since IIRC Linux <code>perf</code> doesn't mess around with perf-counters while handling interrupts, and just lets them keep counting.  (<code>perf</code> virtualizes the hardware performance counters so you can get per-process counts even when a thread migrates across CPUs.)  Also, timer interrupts on the sibling logical core that shares the same physical core will perturb things a bit.</p>\n<p>The bottleneck is the loop-carried dependency chain involving the loop counter.  2G cycles for 1G iters is 2 clocks per iteration, or 1 clock per decrement.  This confirms that the length of the dep chain is 2 cycles.  <strong>This is only possible if <code>mov</code> has zero latency</strong>.  (I know it doesn't prove that there isn't some other bottleneck.  It really only <em>proves</em> that the latency is <em>at most</em> 2 cycles, if you don't believe my assertion that latency is the only bottleneck.  There's a <code>resource_stalls.any</code> perf counter, but it doesn't have many options for breaking down which microarchitectural resource was exhausted.)</p>\n<p>The loop has 3 fused-domain uops: <code>mov</code>, <code>lea</code>, and <a href=\"https://stackoverflow.com/questions/31771526/x86-64-assembly-loop-conditions-and-out-of-order/31778403#31778403\">macro-fused <code>dec/jnz</code></a>.  The 3G <code>uops_issued.any</code> count confirms that: It counts in the fused domain, which is all of the pipeline from decoders to retirement, except for the scheduler (RS) and execution units.  (macro-fused instruction-pairs stay as single uop everywhere.  It's only for micro-fusion of stores or ALU+load that 1 fused-domain uop in <a href=\"https://en.wikipedia.org/wiki/Re-order_buffer\" rel=\"noreferrer\">the ROB</a> tracks the progress of two unfused-domain uops.)</p>\n<p>2G <code>uops_executed.thread</code> (unfused-domain) tells us that all the <code>mov</code> uops were eliminated (i.e. handled by the issue/rename stage, and placed in the ROB in an already-executed state).  They still take up issue/retire bandwidth, and space in the uop cache, and code-size.  They take up space in the ROB, limiting out-of-order window size.  <strong>A <code>mov</code> instruction is never free.  There are many possible microarchitectural bottlenecks besides latency and execution ports, the most important often being the 4-wide issue rate of the front-end.</strong></p>\n<p>On Intel CPUs, being zero latency is often a bigger deal than not needing an execution unit, especially in Haswell and later where there are 4 ALU ports.  (But only 3 of them can handle vector uops, so non-eliminated vector moves would be a bottleneck more easily, especially in code without many loads or stores taking front-end bandwidth (4 fused-domain uops per clock) away from ALU uops.  Also, scheduling uops to execution units isn't perfect (more like oldest-ready first), so uops that aren't on the critical path can steal cycles from the critical path.)</p>\n<p>If we put a <code>nop</code> or an <code>xor edx,edx</code> into the loop, those would also issue but not execute on Intel SnB-family CPUs.</p>\n<p>Zero-latency mov-elimination can be useful for zero-extending from 32 to 64 bits, and for 8 to 64.  (<a href=\"https://stackoverflow.com/questions/45660139/how-exactly-do-partial-registers-on-haswell-skylake-perform-writing-al-seems-to\"><code>movzx eax, bl</code> is eliminated, <code>movzx eax, bx</code> isn't</a>).</p>\n<hr />\n<h3>Without mov-elimination</h3>\n<p>All current <strong>CPUs that support mov-elimination don't support it for <code>mov same,same</code></strong>, so pick different registers for zero-extending integers from 32 to 64-bit, or <code>vmovdqa xmm,xmm</code> to zero-extend to YMM in a rare case where that's necessary.  (Unless you <em>need</em> the result in the register it's already in.  Bouncing to a different reg and back is normally worse.)  And on Intel, the same applies for <code>movzx eax,al</code> for example.  (AMD Ryzen doesn't mov-eliminate movzx.)  Agner Fog's instruction tables show <code>mov</code> as <em>always</em> being eliminated on Ryzen, but I guess he means that it can't fail between two different regs the way it can on Intel.</p>\n<p>We can use this limitation to create a micro-benchmark that defeats it on purpose.</p>\n<pre><code>mov ecx, ecx      # CPUs can't eliminate  mov same,same\nlea ecx, [rcx-1]\n\ndec ecx\njnz .loop\n\n 3,000,320,972      cycles:u                  #    3.898 GHz                      ( +-  0.00% )\n 4,000,000,238      instructions:u            #    1.33  insn per cycle           ( +-  0.00% )\n 1,000,000,234      branches:u                # 1299.225 M/sec                    ( +-  0.00% )\n 3,000,084,446      uops_issued_any:u         # 3897.783 M/sec                    ( +-  0.00% )\n 3,000,058,661      uops_executed_thread:u    # 3897.750 M/sec                    ( +-  0.00% )\n</code></pre>\n<p><strong>This takes 3G cycles for 1G iterations, because the length of the dependency chain is now 3 cycles.</strong></p>\n<p>The fused-domain uop count didn't change, still 3G.</p>\n<p>What did change is that now the unfused-domain uop count is the same as fused-domain.  All the uops needed an execution unit; none of the <code>mov</code> instructions were eliminated, so they all added 1c latency to the loop-carried dep chain.</p>\n<p>(When there are micro-fused uops, like <code>add eax, [rsi]</code>, the <code>uops_executed</code> count can be <em>higher</em> than <code>uops_issued</code>.  But we don't have that.)</p>\n<hr />\n<h3>Without the <code>mov</code> at all:</h3>\n<pre><code>lea ecx, [rcx-1]\n\ndec ecx\njnz .loop\n\n\n 2,000,131,323      cycles:u                  #    3.896 GHz                      ( +-  0.00% )\n 3,000,000,161      instructions:u            #    1.50  insn per cycle         \n 1,000,000,157      branches:u                # 1947.876 M/sec                  \n 2,000,055,428      uops_issued_any:u         # 3895.859 M/sec                    ( +-  0.00% )\n 2,000,039,061      uops_executed_thread:u    # 3895.828 M/sec                    ( +-  0.00% )\n</code></pre>\n<p>Now we're back down to 2 cycle latency for the loop-carried dep chain.</p>\n<p>Nothing is eliminated.</p>\n<hr />\n<p>I tested on a 3.9GHz i7-6700k Skylake.  I get identical results on a Haswell i5-4210U (to within 40k out of 1G counts) for all the perf events.  That's about the same margin of error as re-running on the same system.</p>\n<p>Note that if I ran <code>perf</code> as root<sup>1</sup>, and counted <code>cycles</code> instead of <code>cycles:u</code> (user-space only), it measure the CPU frequency as exactly 3.900 GHz.  (IDK why Linux only obeys the bios-settings for max turbo right after reboot, but then drops to 3.9GHz if I leave it idle for a couple minutes.  Asus Z170 Pro Gaming mobo, Arch Linux with kernel 4.10.11-1-ARCH.  Saw the same thing with Ubuntu.  Writing <code>balance_performance</code> to each of <code>/sys/devices/system/cpu/cpufreq/policy[0-9]*/energy_performance_preference</code> from <code>/etc/rc.local</code> fixes it, but writing <code>balance_power</code> makes it drop back to 3.9GHz again later.)</p>\n<p>1: update: as a better alternative to running <code>sudo perf</code>, I set sysctl <code>kernel.perf_event_paranoid = 0</code> in <code>/etc/syctl.d/99-local.conf</code></p>\n<hr />\n<p>You should get the same results on AMD Ryzen, since it can eliminate integer <code>mov</code>.  AMD Bulldozer-family can only eliminate xmm register copies.  (According to Agner Fog, <code>ymm</code> register copies are an eliminated low-half and an ALU op for the high half.)</p>\n<p>For example, AMD Bulldozer and Intel Ivybridge can sustain a throughput of 1 per clock for</p>\n<pre><code> movaps  xmm0, xmm1\n movaps  xmm2, xmm3\n movaps  xmm4, xmm5\n dec\n jnz .loop\n</code></pre>\n<p>But Intel Sandybridge can't eliminate moves, so it would bottleneck on 4 ALU uops for 3 execution ports.  If it was <code>pxor xmm0,xmm0</code> instead of movaps, SnB could also sustain one iteration per clock.  (But Bulldozer-family couldn't, because xor-zeroing still needs an execution unit on AMD, even though is independent of the old value of the register.  And Bulldozer-family only has 0.5c throughput for PXOR.)</p>\n<hr />\n<h2>Limitations of mov-elimination</h2>\n<p>Two dependent MOV instructions in a row exposes a difference between Haswell and Skylake.</p>\n<pre><code>.loop:\n  mov eax, ecx\n  mov ecx, eax\n\n  sub ecx, 2\n  jnz .loop\n</code></pre>\n<p>Haswell: minor run-to-run variability (1.746 to 1.749 c / iter), but this is typical:</p>\n<pre><code> 1,749,102,925      cycles:u                  #    2.690 GHz                    \n 4,000,000,212      instructions:u            #    2.29  insn per cycle         \n 1,000,000,208      branches:u                # 1538.062 M/sec                  \n 3,000,079,561      uops_issued_any:u         # 4614.308 M/sec                  \n 1,746,698,502      uops_executed_core:u      # 2686.531 M/sec                  \n   745,676,067      lsd_cycles_4_uops:u       # 1146.896 M/sec                  \n  \n</code></pre>\n<p>Not all the MOV instructions are eliminated: about 0.75 of the 2 per iteration used an execution port.  Every MOV that executes instead of being eliminated adds 1c of latency to the loop-carried dep chain, so it's not a coincidence that <code>uops_executed</code> and <code>cycles</code> are very similar.  All the uops are part of a single dependency chain, so there's no parallelism possible.  <code>cycles</code> is always about 5M higher than <code>uops_executed</code> regardless of run-to-run variation, so I guess there are just 5M cycles being used up somewhere else.</p>\n<p>Skylake: more stable than HSW results, and more mov-elimination: only 0.6666 MOVs of every 2 needed an execution unit.</p>\n<pre><code> 1,666,716,605      cycles:u                  #    3.897 GHz\n 4,000,000,136      instructions:u            #    2.40  insn per cycle\n 1,000,000,132      branches:u                # 2338.050 M/sec\n 3,000,059,008      uops_issued_any:u         # 7014.288 M/sec\n 1,666,548,206      uops_executed_thread:u    # 3896.473 M/sec\n   666,683,358      lsd_cycles_4_uops:u       # 1558.739 M/sec\n</code></pre>\n<p>On Haswell, <code>lsd.cycles_4_uops</code> accounted for all of the uops. (0.745 * 4 ~= 3).  So in almost every cycle where any uops are issued, a full group of 4 is issued (from the loop-buffer.  I probably should have looked at a different counter that doesn't care where they came from, like <code>uops_issued.stall_cycles</code> to count cycles where no uops issued).</p>\n<p>But on SKL, <code>0.66666 * 4 = 2.66664</code> is less than 3, so in some cycles the front-end issued fewer than 4 uops.  (Usually it stalls until there's room in the out-of-order back-end to issue a full group of 4, instead of issuing non-full groups).</p>\n<p>It's weird, IDK what the exact microarchitectural limitation is.  Since the loop is only 3 uops, each issue-group of 4 uops is more than a full iteration.  So an issue group can contain up to 3 dependent MOVs.  Perhaps Skylake is designed to break that up sometimes, to allow more mov-elimination?</p>\n<p><strong>update</strong>: actually this is normal for 3-uop loops on Skylake.  <code>uops_issued.stall_cycles</code> shows that HSW and SKL issue a simple 3 uop loop with no mov-elimination the same way they issue this one.  So better mov-elimination is a side-effect of splitting up issue groups for some other reason.  (It's not a bottleneck because taken branches can't execute faster than 1 per clock regardless of how fast they issue).  I still don't know why SKL is different, but I don't think it's anything to worry about.</p>\n<hr />\n<p><strong>In a less extreme case, SKL and HSW are the same, with both failing to eliminate 0.3333 of every 2 MOV instructions:</strong></p>\n<pre><code>.loop:\n  mov eax, ecx\n  dec eax\n  mov ecx, eax\n\n  sub ecx, 1\n  jnz .loop\n</code></pre>\n\n<pre><code> 2,333,434,710      cycles:u                  #    3.897 GHz                    \n 5,000,000,185      instructions:u            #    2.14  insn per cycle         \n 1,000,000,181      branches:u                # 1669.905 M/sec                  \n 4,000,061,152      uops_issued_any:u         # 6679.720 M/sec                  \n 2,333,374,781      uops_executed_thread:u    # 3896.513 M/sec                  \n 1,000,000,942      lsd_cycles_4_uops:u       # 1669.906 M/sec                  \n</code></pre>\n<p>All of the uops issue in groups of 4.  Any contiguous group of 4 uops will contain exactly two MOV uops that are candidates for elimination.  Since it clearly succeeds at eliminating both in some cycles, IDK why it can't always do that.</p>\n<hr />\n<p><a href=\"https://software.intel.com/en-us/articles/intel-sdm#optimization\" rel=\"noreferrer\"><strong>Intel's optimization manual</strong></a> says that overwriting the result of mov-elimination as early as possible frees up the microarchitectural resources so it can succeed more often, at least for <code>movzx</code>.  See <em>Example 3-25. Re-ordering Sequence to Improve Effectiveness of Zero-Latency MOV Instructions</em>.</p>\n<p>So maybe it's tracked internally with a limited-size table of ref-counts?  Something has to stop the physical register file entry from being freed when it's no longer needed as the value of the original architectural register, if it's still needed as the value of the mov destination.  Freeing PRF entries as soon as possible is key, because <a href=\"http://blog.stuffedcow.net/2013/05/measuring-rob-capacity/\" rel=\"noreferrer\">PRF size can limit the out-of-order window</a> to smaller than ROB size.</p>\n<p>I tried the examples on Haswell and Skylake, and found that mov-elimination did in fact work significantly more of the time when doing that, but that it was actually slightly slower in total cycles, instead of faster.  The example was intended to show the benefit on IvyBridge, which probably bottlenecks on its 3 ALU ports, but HSW/SKL only bottleneck on resource conflicts in the dep chains and don't seem to be bothered by needing an ALU port for more of the <code>movzx</code> instructions.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/45766444/why-is-xchg-reg-reg-a-3-micro-op-instruction-on-modern-intel-architectures\">Why is XCHG reg, reg a 3 micro-op instruction on modern Intel architectures?</a> for more research + guesswork about how mov-elimination works, and whether it could work for <code>xchg eax, ecx</code>.  (In practice <code>xchg reg,reg</code> is 3 ALU uops on Intel, but 2 eliminated uops on Ryzen.  It's interesting to guess whether Intel could have implemented it more efficiently.)</p>\n<hr />\n<p>BTW, as a workaround for an erratum on Haswell, Linux doesn't provide <code>uops_executed.thread</code> when hyperthreading is enabled, only <code>uops_executed.core</code>.  The other core was definitely idle the whole time, not even timer interrupts, <a href=\"https://serverfault.com/a/489410/28665\">because I took it offline with <code>echo 0 &gt; /sys/devices/system/cpu/cpu3/online</code></a>.  Unfortunately this can't be done before <code>perf</code> decides that HT is enabled, and my Dell laptop doesn't have a BIOS option to disable HT.  So I can't get <code>perf</code> to use all 8 hardware PMU counters at once on that system, only 4.  :/</p>\n"}], "owner": {"reputation": 188394, "user_id": 541686, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f2d0d2c0f7a83e2f8797a5ae79a324b6?s=128&d=identicon&r=PG", "display_name": "user541686", "link": "https://stackoverflow.com/users/541686/user541686"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3805, "favorite_count": 15, "accepted_answer_id": 44193770, "answer_count": 2, "score": 32, "last_activity_date": 1586494096, "creation_date": 1495664162, "last_edit_date": 1583292996, "question_id": 44169342, "link": "https://stackoverflow.com/questions/44169342/can-x86s-mov-really-be-free-why-cant-i-reproduce-this-at-all", "title": "Can x86&#39;s MOV really be &quot;free&quot;? Why can&#39;t I reproduce this at all?", "body": "<p>I keep seeing people claim that the MOV instruction can be free in x86, because of register renaming.  </p>\n\n<p>For the life of me, I can't verify this in a single test case.  Every test case I try debunks it.</p>\n\n<p>For example, here's the code I'm compiling with Visual C++:</p>\n\n<pre><code>#include &lt;limits.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;time.h&gt;\n\nint main(void)\n{\n    unsigned int k, l, j;\n    clock_t tstart = clock();\n    for (k = 0, j = 0, l = 0; j &lt; UINT_MAX; ++j)\n    {\n        ++k;\n        k = j;     // &lt;-- comment out this line to remove the MOV instruction\n        l += j;\n    }\n    fprintf(stderr, \"%d ms\\n\", (int)((clock() - tstart) * 1000 / CLOCKS_PER_SEC));\n    fflush(stderr);\n    return (int)(k + j + l);\n}\n</code></pre>\n\n<p>This produces the following assembly code for the loop (feel free to produce this however you want; you obviously don't need Visual C++):</p>\n\n<pre><code>LOOP:\n    add edi,esi\n    mov ebx,esi\n    inc esi\n    cmp esi,FFFFFFFFh\n    jc  LOOP\n</code></pre>\n\n<p>Now I run this program several times, and I observe a pretty consistent 2% difference when the MOV instruction is removed:</p>\n\n<pre><code>Without MOV      With MOV\n  1303 ms         1358 ms\n  1324 ms         1363 ms\n  1310 ms         1345 ms\n  1304 ms         1343 ms\n  1309 ms         1334 ms\n  1312 ms         1336 ms\n  1320 ms         1311 ms\n  1302 ms         1350 ms\n  1319 ms         1339 ms\n  1324 ms         1338 ms\n</code></pre>\n\n<p>So what gives? Why isn't the MOV \"free\"? Is this loop too complicated for x86?<br>\nIs there a <em>single</em> example out there that can demonstrate MOV being free like people claim?<br>\nIf so, what is it? And if not, why does everyone keep claiming MOV is free?</p>\n"}, {"tags": ["c", "face-detection", "darknet"], "comments": [{"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1495664166, "post_id": 44168528, "comment_id": 75354531, "body": "Have you tried debugging it using <code>gdb</code> and <code>valgrind</code>?"}, {"owner": {"reputation": 1660, "user_id": 3551661, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dbde0d2418bd6946dbc397411975ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "A_Matar", "link": "https://stackoverflow.com/users/3551661/a-matar"}, "reply_to_user": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1495664524, "post_id": 44168528, "comment_id": 75354661, "body": "Honestly no, I would try valgrind now"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1495665225, "post_id": 44168528, "comment_id": 75354890, "body": "Did you compile yolo with opencv enabled? Do you have opencv? It&#39;s linked correctly? Which version?"}, {"owner": {"reputation": 1660, "user_id": 3551661, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dbde0d2418bd6946dbc397411975ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "A_Matar", "link": "https://stackoverflow.com/users/3551661/a-matar"}, "reply_to_user": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 1, "creation_date": 1495666593, "post_id": 44168528, "comment_id": 75355285, "body": "@ErikW added debugging trace."}, {"owner": {"reputation": 1660, "user_id": 3551661, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dbde0d2418bd6946dbc397411975ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "A_Matar", "link": "https://stackoverflow.com/users/3551661/a-matar"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1495666605, "post_id": 44168528, "comment_id": 75355290, "body": "@Miki no, I have not compiled yolo with opencv enabled"}], "answers": [{"comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1498837620, "post_id": 44849647, "comment_id": 76681368, "body": "I think this should be a comment, not an answer, since the main question is about the segmentation fault, and the final part is just a small addition."}, {"owner": {"reputation": 1, "user_id": 7697009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472c4d8024e919988a6bcdc9d941f8cf?s=128&d=identicon&r=PG&f=1", "display_name": "Gh.Ma", "link": "https://stackoverflow.com/users/7697009/gh-ma"}, "edited": false, "score": 0, "creation_date": 1498892181, "post_id": 44849647, "comment_id": 76696549, "body": "The draw_detections func was declared in the image.h, u can have a look for further debug."}], "tags": [], "owner": {"reputation": 1, "user_id": 7697009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472c4d8024e919988a6bcdc9d941f8cf?s=128&d=identicon&r=PG&f=1", "display_name": "Gh.Ma", "link": "https://stackoverflow.com/users/7697009/gh-ma"}, "is_accepted": false, "score": 0, "last_activity_date": 1498835436, "creation_date": 1498835436, "answer_id": 44849647, "question_id": 44168528, "link": "https://stackoverflow.com/questions/44168528/darknet-yolo-segmentation-fault-core-dumped-when-calling-draw-detections-func/44849647#44849647", "title": "Darknet Yolo: Segmentation fault (core dumped) when calling draw_detections function", "body": "<p>Adjust the nms value too. The nms value is a threshold for non-maximum-supp</p>\n"}], "owner": {"reputation": 1660, "user_id": 3551661, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dbde0d2418bd6946dbc397411975ac5e?s=128&d=identicon&r=PG&f=1", "display_name": "A_Matar", "link": "https://stackoverflow.com/users/3551661/a-matar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4802, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504778564, "creation_date": 1495660240, "last_edit_date": 1495666964, "question_id": 44168528, "link": "https://stackoverflow.com/questions/44168528/darknet-yolo-segmentation-fault-core-dumped-when-calling-draw-detections-func", "title": "Darknet Yolo: Segmentation fault (core dumped) when calling draw_detections function", "body": "<p>I am getting <code>Segmentation fault (core dumped)</code> error when I call the <code>draw_detections</code> function using the following parameters:</p>\n\n<pre><code>draw_detections(im, l.side*l.side*l.n, thresh, boxes, probs, voc_names, alphabet, 20);\n</code></pre>\n\n<p>It is my first time to use <code>Yolo</code>, and as a matter of fact I don't know which of the included <code>libs</code> define the <code>draw_detections</code> function. Here is the full thing:</p>\n\n<pre><code>#include \"network.h\"\n#include \"detection_layer.h\"\n#include \"cost_layer.h\"\n#include \"utils.h\"\n#include \"parser.h\"\n#include \"box.h\"\n#include \"demo.h\"\n\n#ifdef OPENCV\n#include \"opencv2/highgui/highgui_c.h\"\n#endif\n\nchar *voc_names[] = {\"face\"};\n\nvoid test_yolo(char *cfgfile, char *weightfile, char *filename, float thresh)\n{\n    printf(\"looking for faces\");\n    image **alphabet = load_alphabet();\n    network net = parse_network_cfg(cfgfile);\n    if(weightfile){\n        load_weights(&amp;net, weightfile);\n    }\n    detection_layer l = net.layers[net.n-1];\n    set_batch_network(&amp;net, 1);\n    srand(2222222);\n    clock_t time;\n    char buff[256];\n    char *input = buff;\n    int j;\n    float nms=.4;\n    box *boxes = calloc(l.side*l.side*l.n, sizeof(box));\n    float **probs = calloc(l.side*l.side*l.n, sizeof(float *));\n    for(j = 0; j &lt; l.side*l.side*l.n; ++j) probs[j] = calloc(l.classes, sizeof(float *));\n    while(1){\n        if(filename){\n            strncpy(input, filename, 256);\n        } else {\n            printf(\"Enter Image Path: \");\n            fflush(stdout);\n            input = fgets(input, 256, stdin);\n            if(!input) return;\n            strtok(input, \"\\n\");\n        }\n        image im = load_image_color(input,0,0);\n        image sized = resize_image(im, net.w, net.h);\n        float *X = sized.data;\n        time=clock();\n        network_predict(net, X);\n        printf(\"%s: Predicted in %f seconds.\\n\", input, sec(clock()-time));\n        get_detection_boxes(l, 1, 1, thresh, probs, boxes, 0);\n        if (nms) \n            do_nms_sort(boxes, probs, l.side*l.side*l.n, l.classes, nms);\n        printf(\"check1\\n\"); //this statement is reached fine\n        draw_detections(im, l.side*l.side*l.n, thresh, boxes, probs, voc_names, alphabet, 20);\n        printf(\"check2\\n\"); //this statement is never reached\n        save_image(im, \"predictions\");\n        printf(\"just saved the img\");\n        show_image(im, \"predictions\");\n\n        free_image(im);\n        free_image(sized);\n#ifdef OPENCV\n        cvWaitKey(0);\n        cvDestroyAllWindows();\n#endif\n        if (filename) break;\n    }\n}\n\nvoid run_yolo(int argc, char **argv)\n{\n    printf(\"\\n/nrunning Yolo....\");\n    char *prefix = find_char_arg(argc, argv, \"-prefix\", 0);\n    float thresh = find_float_arg(argc, argv, \"-thresh\", .2);\n    int cam_index = find_int_arg(argc, argv, \"-c\", 0);\n    int frame_skip = find_int_arg(argc, argv, \"-s\", 0);\n    if(argc &lt; 4){\n        fprintf(stderr, \"usage: %s %s [train/test/valid] [cfg] [weights (optional)]\\n\", argv[0], argv[1]);\n        return;\n    }\n\n    char *cfg = argv[3];\n    char *weights = (argc &gt; 4) ? argv[4] : 0;\n    char *filename = (argc &gt; 5) ? argv[5]: 0;\n    if(0==strcmp(argv[2], \"test\")) test_yolo(cfg, weights, filename, thresh);\n\n}\n</code></pre>\n\n<p>And I am running this using the following command:</p>\n\n<pre><code>./darknet yolo test cfg/yolo-face.cfg yolo-face_final.weights data/faces.jpg\n</code></pre>\n\n<p>It loads the weights and performs prediction but it crashes when it reaches the <code>draw_predictions()</code>. Any ideas why?</p>\n\n<p>Edit:\nHere is the trace I get when I debug using <code>Valgrind</code></p>\n\n<pre><code>   valgrind --leak-check=yes ./darknet yolo test cfg/yolo-face.cfg yolo-face_final.weights data/faces.jpg\n==8582== Memcheck, a memory error detector\n==8582== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==8582== Using Valgrind-3.11.0 and LibVEX; rerun with -h for copyright info\n==8582== Command: ./darknet yolo test cfg/yolo-face.cfg yolo-face_final.weights data/faces.jpg\n==8582== \nrunning Yolo....\nlayer     filters    size              input                output\n    0 Crop Layer: 448 x 448 -&gt; 448 x 448 x 3 image\nshift: Using default '0.000000'\n    1 conv     16  3 x 3 / 1   448 x 448 x   3   -&gt;   448 x 448 x  16\n    2 max          2 x 2 / 2   448 x 448 x  16   -&gt;   224 x 224 x  16\n    3 conv     32  3 x 3 / 1   224 x 224 x  16   -&gt;   224 x 224 x  32\n    4 max          2 x 2 / 2   224 x 224 x  32   -&gt;   112 x 112 x  32\n    5 conv     64  3 x 3 / 1   112 x 112 x  32   -&gt;   112 x 112 x  64\n    6 max          2 x 2 / 2   112 x 112 x  64   -&gt;    56 x  56 x  64\n    7 conv    128  3 x 3 / 1    56 x  56 x  64   -&gt;    56 x  56 x 128\n    8 max          2 x 2 / 2    56 x  56 x 128   -&gt;    28 x  28 x 128\n    9 conv    256  3 x 3 / 1    28 x  28 x 128   -&gt;    28 x  28 x 256\n   10 max          2 x 2 / 2    28 x  28 x 256   -&gt;    14 x  14 x 256\n   11 conv    512  3 x 3 / 1    14 x  14 x 256   -&gt;    14 x  14 x 512\n   12 max          2 x 2 / 2    14 x  14 x 512   -&gt;     7 x   7 x 512\n   13 conv   1024  3 x 3 / 1     7 x   7 x 512   -&gt;     7 x   7 x1024\n   14 conv   1024  3 x 3 / 1     7 x   7 x1024   -&gt;     7 x   7 x1024\n   15 conv   1024  3 x 3 / 1     7 x   7 x1024   -&gt;     7 x   7 x1024\n   16 connected                            50176  -&gt;   256\n   17 connected                             256  -&gt;  4096\n   18 dropout       p = 0.50               4096  -&gt;  4096\n   19 connected                            4096  -&gt;  1331\n   20 Detection Layer\nforced: Using default '0'\nLoading weights from yolo-face_final.weights...looking for facesDone!\ndata/faces.jpg: Predicted in 28.192593 seconds.\npre check\n==8582== Invalid read of size 4\n==8582==    at 0x407DA0: max_index (in /home/.../darknet/darknet)\n==8582==    by 0x429492: draw_detections (in /home/.../darknet/darknet)\n==8582==    by 0x456487: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582==  Address 0x7328f78 is 0 bytes after a block of size 8 alloc'd\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x456300: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== Invalid read of size 4\n==8582==    at 0x42949B: draw_detections (in /home/.../darknet/darknet)\n==8582==    by 0x456487: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582==  Address 0x7328fa0 is 32 bytes before a block of size 32 in arena \"client\"\n==8582== \nface: 6%\nface: 15%\nface: 18%\nface: 12%\nface: 5%\nface: 10%\nface: 8%\nface: 6%\nface: 21%\nface: 21%\nface: 37%\nface: 37%\nface: 23%\nface: 7%\nface: 33%\nface: 31%\nface: 20%\nface: 15%\nface: 37%\nface: 9%\nface: 36%\nface: 50%\nface: 49%\nface: 37%\nface: 5%\nface: 9%\nface: 6%\nface: 9%\nface: 19%\nface: 14%\nface: 25%\nface: 11%\nface: 6%\nface: 36%\nface: 13%\nface: 17%\nface: 8%\nface: 8%\nface: 6%\nAfter check\nNot compiled with OpenCV, saving to predictions.png instead\njust saved the img==8582== \n==8582== HEAP SUMMARY:\n==8582==     in use at exit: 550,317,244 bytes in 1,116 blocks\n==8582==   total heap usage: 98,171 allocs, 97,055 frees, 579,801,694 bytes allocated\n==8582== \n==8582== 4 bytes in 1 blocks are definitely lost in loss record 2 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x43E34D: make_network (in /home/.../darknet/darknet)\n==8582==    by 0x444ABE: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 4 bytes in 1 blocks are definitely lost in loss record 3 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x43E35F: make_network (in /home/.../darknet/darknet)\n==8582==    by 0x444ABE: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 24 bytes in 1 blocks are definitely lost in loss record 4 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x4447C3: parse_net_options (in /home/.../darknet/darknet)\n==8582==    by 0x444B12: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 24 bytes in 1 blocks are definitely lost in loss record 5 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x4447D5: parse_net_options (in /home/.../darknet/darknet)\n==8582==    by 0x444B12: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 3,872 bytes in 1 blocks are definitely lost in loss record 7 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x4562C1: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 3,872 (1,936 direct, 1,936 indirect) bytes in 1 blocks are definitely lost in loss record 8 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x4562D1: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 5,808 bytes in 1 blocks are definitely lost in loss record 9 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x445416: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 32,856 bytes in 1 blocks are possibly lost in loss record 18 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x42DC33: load_image_stb (in /home/.../darknet/darknet)\n==8582==    by 0x42DE1A: load_alphabet (in /home/.../darknet/darknet)\n==8582==    by 0x456209: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 3,211,264 bytes in 1 blocks are possibly lost in loss record 21 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x434D98: make_maxpool_layer (in /home/.../darknet/darknet)\n==8582==    by 0x4462BC: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 4,816,896 bytes in 1 blocks are definitely lost in loss record 23 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x445401: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 13,917,024 (192 direct, 13,916,832 indirect) bytes in 1 blocks are definitely lost in loss record 28 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x42DDB5: load_alphabet (in /home/.../darknet/darknet)\n==8582==    by 0x456209: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 25,690,112 bytes in 1 blocks are possibly lost in loss record 29 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x40AB15: make_convolutional_layer (in /home/.../darknet/darknet)\n==8582==    by 0x442203: parse_convolutional (in /home/.../darknet/darknet)\n==8582==    by 0x4456A6: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 28,901,376 bytes in 1 blocks are definitely lost in loss record 31 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x445435: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== 473,734,108 (18,144 direct, 473,715,964 indirect) bytes in 1 blocks are definitely lost in loss record 37 of 37\n==8582==    at 0x4C2FB55: calloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8582==    by 0x43E33B: make_network (in /home/.../darknet/darknet)\n==8582==    by 0x444ABE: parse_network_cfg (in /home/.../darknet/darknet)\n==8582==    by 0x456224: test_yolo (in /home/.../darknet/darknet)\n==8582==    by 0x401F41: main (in /home/.../darknet/darknet)\n==8582== \n==8582== LEAK SUMMARY:\n==8582==    definitely lost: 33,748,280 bytes in 11 blocks\n==8582==    indirectly lost: 487,634,732 bytes in 1,102 blocks\n==8582==      possibly lost: 28,934,232 bytes in 3 blocks\n==8582==    still reachable: 0 bytes in 0 blocks\n==8582==         suppressed: 0 bytes in 0 blocks\n==8582== \n==8582== For counts of detected and suppressed errors, rerun with: -v\n==8582== ERROR SUMMARY: 4573 errors from 16 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Oh and it gives me too many predictions with wrong box boundaries. What is the missing parameter to reduce the number of neighboring boxes (So that I get only the appropriate boxes)?\n<a href=\"https://i.stack.imgur.com/sl92R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sl92R.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "input"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1495659186, "post_id": 44168231, "comment_id": 75352515, "body": "In the last <code>printf</code> you have forgotten to put a format specifier for the number (<code>%f</code> I guess...)."}, {"owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1495659267, "post_id": 44168231, "comment_id": 75352563, "body": "forgot to add #include &lt;stdlib.h&gt; at top when I added system pause."}, {"owner": {"reputation": 31483, "user_id": 502381, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/74b99e687909be449e0130a50950eac7?s=128&d=identicon&r=PG&f=1", "display_name": "JJJ", "link": "https://stackoverflow.com/users/502381/jjj"}, "edited": false, "score": 1, "creation_date": 1495659352, "post_id": 44168231, "comment_id": 75352610, "body": "You also calculate the sums before getting any input."}, {"owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 0, "creation_date": 1495659389, "post_id": 44168231, "comment_id": 75352634, "body": "Thanks man. I didn&#39;t notice it.  Stayed up late last night, brain dead haha. Thank you and I will vote up when it allows."}, {"owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 1, "creation_date": 1495659543, "post_id": 44168231, "comment_id": 75352725, "body": "The code is still not functional.  I moved:  scanf(&quot;%f&quot;, &amp;firstNumber);             scanf(&quot;%f&quot;,&amp;secondNumber);             scanf(&quot;%f&quot;,&amp;thirdNumber);             scanf(&quot;%f&quot;,&amp;fourthNumber);             scanf(&quot;%f&quot;,&amp;fifthNumber);               float sumAverage1 = (firstNumber+secondNumber+thirdNumber);             float sumAverage2 = (fourthNumber+fifthNumber);             printf(&quot;Your numbers average out to:%f\\n&quot;, (sumAverage1+sumAverage2)/5);"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1495672623, "post_id": 44168231, "comment_id": 75356846, "body": "Save time.  Enable all compiler warnings."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 0, "creation_date": 1495659834, "post_id": 44168281, "comment_id": 75352864, "body": "I&#39;ve added those edits. The scanf isn&#39;t working for when it asks the user for the 5 scanf inputs."}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1495659275, "creation_date": 1495659275, "answer_id": 44168281, "question_id": 44168231, "link": "https://stackoverflow.com/questions/44168231/user-enter-5-characters-and-averge-sums-out-the-5-numbers-in-c/44168281#44168281", "title": "User enter 5 characters and averge sums out the 5 numbers in C", "body": "<p>The line:</p>\n\n<pre><code> printf(\"Your numbers average out to:\\n\", sumAverage1+sumAverage2/5);\n</code></pre>\n\n<p>Has an argument but no format specifier. Also, that expression is unparenthesized; the division has higher precedence than the addition, so what you're calculating is <code>sumAverage1+(sumAverage2/5)</code>, which is integer division, which is probably not what you want.</p>\n\n<p>What you probably want is:</p>\n\n<pre><code>printf(\"Your numbers average out to: %f\\n\", (double)(sumAverage1+sumAverage2)/5.0);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1495712844, "post_id": 44169135, "comment_id": 75373466, "body": "<code>scanf(&quot;%c&quot;)</code> gets the next character after the number, which <i>might</i> be a newline.  It might not.  It is simple the next character.  <code>fflush(stdin)</code> is a non-portable way to empty <code>stdin</code>.  &quot;scanf does not capture the extra dangling newline.&quot; misleads as <code>scanf(&quot;%f&quot;,&amp;secondNumber);</code> will consume any prior white-space first, including the previous line&#39;s leftover newline."}], "tags": [], "owner": {"reputation": 2622, "user_id": 1834967, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Fdxei.jpg?s=128&g=1", "display_name": "Felix Guo", "link": "https://stackoverflow.com/users/1834967/felix-guo"}, "is_accepted": false, "score": 0, "last_activity_date": 1495663047, "creation_date": 1495663047, "answer_id": 44169135, "question_id": 44168231, "link": "https://stackoverflow.com/questions/44168231/user-enter-5-characters-and-averge-sums-out-the-5-numbers-in-c/44169135#44169135", "title": "User enter 5 characters and averge sums out the 5 numbers in C", "body": "<p>You need to change the printf format specifier, but your <code>scanf</code> does not capture the extra dangling newline. You need to either clear the buffer, <code>fflush(stdin)</code> after each <code>scanf()</code> or you need an extra <code>scanf(\"%c\")</code> to get rid of the newline character. </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/5240789/scanf-leaves-the-new-line-char-in-buffer\">scanf() leaves the new line char in buffer?</a></p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 0, "creation_date": 1495693409, "post_id": 44171442, "comment_id": 75362402, "body": "Hey, the issue I am getting is a negative number as a output I need it to round up the numbers the user enters. I know there is a simple way to fix it, but I am a super novice in C."}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 0, "creation_date": 1495693867, "post_id": 44171442, "comment_id": 75362623, "body": "Please include what inputs you are entering and what output you are getting."}, {"owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 0, "creation_date": 1495694645, "post_id": 44171442, "comment_id": 75362996, "body": "inputs I enter is anything above 1 and below 100 and the output I get every time is -1.#QQ as the sumAverage"}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 0, "creation_date": 1495700648, "post_id": 44171442, "comment_id": 75366214, "body": "Did you try what i have written here? i ran it with different values and it is giving valid output. just copy my code and run it. say if it gives same error."}, {"owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "edited": false, "score": 0, "creation_date": 1495734609, "post_id": 44171442, "comment_id": 75387307, "body": "Yeah, I just tried yours out.  It shows it working. Thanks, for the help Vishwajeet."}], "tags": [], "owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "is_accepted": true, "score": 0, "last_activity_date": 1495693824, "last_edit_date": 1495693824, "creation_date": 1495680154, "answer_id": 44171442, "question_id": 44168231, "link": "https://stackoverflow.com/questions/44168231/user-enter-5-characters-and-averge-sums-out-the-5-numbers-in-c/44171442#44171442", "title": "User enter 5 characters and averge sums out the 5 numbers in C", "body": "<p>Here this will solve all your problem.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\nint main() {\nfloat firstNumber, secondNumber, thirdNumber,sumAverage1;\nfloat fourthNumber, fifthNumber,sumAverage2;\nlong a = 1000000000;\nlong b = 1250000000;\nlong c = 1500000000;\nlong d = 1750000000;\nlong e = 2000000000;\nprintf(\"Enter 5 Random numbers and guess what the total will be summed up when program runs.\\n\");\nprintf(\"You cannot enter a decimal integer and enter numbers below 100.\\n\");\nscanf(\"%f\",&amp;firstNumber);\nscanf(\"%f\",&amp;secondNumber);\nscanf(\"%f\",&amp;thirdNumber);\nscanf(\"%f\",&amp;fourthNumber);\nscanf(\"%f\",&amp;fifthNumber);\n\nsumAverage1 = (firstNumber+secondNumber+thirdNumber);\nsumAverage2 = (fourthNumber+fifthNumber);\n\n    printf(\"A is %li\\n\", a);\n    printf(\"B is %li\\n\", b);\n    printf(\"C is %li\\n\", c);\n    printf(\"D is %li\\n\", d);\n    printf(\"E is %li\\n\", e);\n        printf(\"Your numbers average out to:%f\\n\", (sumAverage1+sumAverage2)/5);\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>I ran this on my Visual Studio and it works just fine. Hope it Solves your Problem.</p>\n"}], "owner": {"reputation": 17, "user_id": 6846208, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10210513235578018/picture?type=large", "display_name": "Matthew Stone", "link": "https://stackoverflow.com/users/6846208/matthew-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 44171442, "answer_count": 3, "score": 0, "last_activity_date": 1495693824, "creation_date": 1495659087, "question_id": 44168231, "link": "https://stackoverflow.com/questions/44168231/user-enter-5-characters-and-averge-sums-out-the-5-numbers-in-c", "title": "User enter 5 characters and averge sums out the 5 numbers in C", "body": "<p>I been having issues having my C code work. I have 1 warning, which states Warning: too many arguments for format. I am a beginner in C so I haven't encountered this issue yet. Any ideas on how to fix it and I cannot use conditions as I am in the beginning segment of my course learning from the start. I just need to know what I did wrong so I can fix the issue. Here's the code below:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    float firstNumber, secondNumber, thirdNumber;\n    float fourthNumber, fifthNumber;\n\n    float sumAverage1 = (firstNumber+secondNumber+thirdNumber);\n    float sumAverage2 = (fourthNumber+fifthNumber);\n\n\n    long a = 1000000000;\n    long b = 1250000000;\n    long c = 1500000000;\n    long d = 1750000000;\n    long e = 2000000000;\n\n        printf(\"A is %li\\n\", a);\n        printf(\"B is %li\\n\", b);\n        printf(\"C is %li\\n\", c);\n        printf(\"D is %li\\n\", d);\n        printf(\"E is %li\\n\", e);\n\n        printf(\"Enter 5 Random numbers and guess what the total will be summed up when program runs.\\n\");\n        printf(\"You cannot enter a decimal integer and enter numbers below 100.\\n\");\n            scanf(\"%f\", &amp;firstNumber);\n            scanf(\"%f\",&amp;secondNumber);\n            scanf(\"%f\",&amp;thirdNumber);\n            scanf(\"%f\",&amp;fourthNumber);\n            scanf(\"%f\",&amp;fifthNumber);\n\n            printf(\"Your numbers average out to:\\n\", sumAverage1+sumAverage2/5);\n\n    system(\"pause\");\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 1, "creation_date": 1495658070, "post_id": 44167657, "comment_id": 75352025, "body": "C source files are not required to execute a program either, of course. Nor are they needed for users of a library."}], "tags": [], "owner": {"reputation": 1828, "user_id": 2584754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Q3gFD.jpg?s=128&g=1", "display_name": "sturcotte06", "link": "https://stackoverflow.com/users/2584754/sturcotte06"}, "is_accepted": false, "score": 5, "last_activity_date": 1495718322, "last_edit_date": 1495718322, "creation_date": 1495656804, "answer_id": 44167657, "question_id": 44167604, "link": "https://stackoverflow.com/questions/44167604/header-source-file-needed-after-compilation/44167657#44167657", "title": "header source file needed after compilation?", "body": "<p>Headers are not required to execute a program or to use a shared/static library. However, headers are required to write code that uses the interface of a library. Usually, under RedHat distros, you'd have rpms that install the library (<code>libuv</code>) and rpms that install the headers (<code>libuv-devel</code>).</p>\n\n<p>Therefore, without headers, you can execute a program, or you can link against a library. However, if you want to write code that uses the API of a library, you need the headers on your system.</p>\n\n<p>If you compile a program and put it on a USB drive, all you need is the executable. However, you might need to recompile your program as the compiler targeted the specific architecture of the system it ran on. If you move the executable to another computer, it might not work.</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 3, "creation_date": 1495658083, "post_id": 44167935, "comment_id": 75352033, "body": "C source files are not required to execute a program either, of course."}], "tags": [], "owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "is_accepted": false, "score": 3, "last_activity_date": 1495658120, "last_edit_date": 1592644375, "creation_date": 1495657733, "answer_id": 44167935, "question_id": 44167604, "link": "https://stackoverflow.com/questions/44167604/header-source-file-needed-after-compilation/44167935#44167935", "title": "header source file needed after compilation?", "body": "<h1>Short answer:</h1>\n<p>No, it is not needed.</p>\n<h1>Longer answer:</h1>\n<p>No it is not needed, because when you use <code>#include</code>, the content of the header file will basically be pasted in to the C file. Because of that, the executable will not need the header file nor the c file to run (they are compiled into the executable already by the compiler)</p>\n"}], "owner": {"reputation": 63, "user_id": 8056699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e44efff2563bef6f38cca029c5981a3f?s=128&d=identicon&r=PG&f=1", "display_name": "clawhammer1234", "link": "https://stackoverflow.com/users/8056699/clawhammer1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495718322, "creation_date": 1495656583, "last_edit_date": 1495665238, "question_id": 44167604, "link": "https://stackoverflow.com/questions/44167604/header-source-file-needed-after-compilation", "title": "header source file needed after compilation?", "body": "<p>If I make <code>headerfile.h</code> and then <code>headerfile.c</code> with the source code for the functions. Once I compile the main C file <code>sampleprogram.c</code></p>\n\n<pre><code>cc -o sampleprogram headerfile.c sampleprogram.c\n</code></pre>\n\n<p>Is that source file for the header still needed? \nIs <code>headerfile.c</code> and <code>sampleprogram.c</code> compiled and linked together?\nDo you need to include the <code>headerfile.h</code> along with <code>sampleprogram</code> if you were to put the program on a usb drive and put it on a different computer?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495656530, "post_id": 44167472, "comment_id": 75351309, "body": "C does not check whether you break the bounds of an array. You just have to get it right. When developing you could calculate the array index first, check it against a limit, and then use the index."}, {"owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "edited": false, "score": 0, "creation_date": 1495656927, "post_id": 44167472, "comment_id": 75351511, "body": "Note that your functions are supposed to return an integer, but they return a pointer to int ... and the return value is not used (this is not your bug, just an observation)"}, {"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1495658668, "post_id": 44167472, "comment_id": 75352303, "body": "Use <code>valgrind</code> and <code>gdb</code> to debug your code"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1495660515, "post_id": 44168000, "comment_id": 75353134, "body": "Lot&#39;s of good stuff, but C doesn&#39;t allow default arguments as in <code>char *lights_str(int light[N], int status_light = -1)</code> \u2014 that&#39;s a feature of C++."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495660621, "post_id": 44168000, "comment_id": 75353191, "body": "Toggling a light&#39;s status: instead of <code>light[i] = light[i] == 1 ? 0 : 1;</code>, consider <code>light[i] = !light[i];</code> \u2014 but remember that <code>!=</code> is not an assignment operator."}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495661365, "post_id": 44168000, "comment_id": 75353547, "body": "@JonathanLeffler Oh, thanks, you&#39;re right, c tag here :P . Btw, i doubt for a while whether i should have posted the 2nd refactor or not, I assume the OP&#39;s experience is c-begginner and function pointers is intermediate. I mean, i could go with more refactorings... but, is it worth? light struct, dynamic arrays instead using static ones as function arguments, ..."}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495661743, "post_id": 44168000, "comment_id": 75353696, "body": "@JonathanLeffler Ok, commited your suggestion about c-is-not-supporting-default-arguments :)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495664279, "post_id": 44168000, "comment_id": 75354568, "body": "I think function pointers might be a bit tricky, tempting though it is.  I&#39;d probably look at trying to use one function for all the iterations, but doing &#39;all off&#39; when current state is unknown is quite different from toggling state for the other three passes.  OTOH, maybe you can do it with one initializer function (it is so tempting not to do a first pass and just let the compiler set everything in the array to zero), and one function called with the &#39;step size&#39; for the other three passes.  There comes a point at which stopping is best.  I&#39;d say you&#39;d reached that point."}, {"owner": {"reputation": 61, "user_id": 7948259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5BliBP1n7Uw/AAAAAAAAAAI/AAAAAAAABUE/adywRJ10O_Y/photo.jpg?sz=128", "display_name": "Drat018", "link": "https://stackoverflow.com/users/7948259/drat018"}, "edited": false, "score": 0, "creation_date": 1495738443, "post_id": 44168000, "comment_id": 75389488, "body": "@BPL Hello ,I fixed the boundaries problem however I still get the error and there is another error - Warning treated as error - no &#39;object&#39; file generated . And for your code it has a lot of advanced functions that i have not learned yet . Do you have any simpler solution ? . Thanks"}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 61, "user_id": 7948259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5BliBP1n7Uw/AAAAAAAAAAI/AAAAAAAABUE/adywRJ10O_Y/photo.jpg?sz=128", "display_name": "Drat018", "link": "https://stackoverflow.com/users/7948259/drat018"}, "edited": false, "score": 0, "creation_date": 1495739090, "post_id": 44168000, "comment_id": 75389819, "body": "@Drat018 This doesn&#39;t work like that... usually in StackOverflow you post a question about some specific problem of your code, people help to you to figure out what&#39;s going on and then the best answer will be validated. In the current answer i&#39;ve already explained which one was the bugs. If you have a new different problem, you should open a new thread, show the code you&#39;ve got stuck with, prove people you&#39;ve put a little bit of effort trying to solve the new problem and then and just then people will help you to solve it. Requesting people directly to do your homework is not nice :)"}, {"owner": {"reputation": 61, "user_id": 7948259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5BliBP1n7Uw/AAAAAAAAAAI/AAAAAAAABUE/adywRJ10O_Y/photo.jpg?sz=128", "display_name": "Drat018", "link": "https://stackoverflow.com/users/7948259/drat018"}, "edited": false, "score": 0, "creation_date": 1495745793, "post_id": 44168000, "comment_id": 75393269, "body": "@BPL Ah sorry i might not have been clear before , but it is still not responding after fixing the boundaries . I am not asking for you to solve it as I already did i only need to know why is it not responding . (I changed the code above to the new code with the correct boundaries)."}, {"owner": {"reputation": 61, "user_id": 7948259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5BliBP1n7Uw/AAAAAAAAAAI/AAAAAAAABUE/adywRJ10O_Y/photo.jpg?sz=128", "display_name": "Drat018", "link": "https://stackoverflow.com/users/7948259/drat018"}, "edited": false, "score": 0, "creation_date": 1495746108, "post_id": 44168000, "comment_id": 75393434, "body": "@BPL Never mind , The problem was not with the code it was with the compiler just tried it on CodeBlocks and Codepad and it works . I dont know why they made visual studio so beginner unfriendly .Thanks again for everyone&#39;s effort :)"}], "tags": [], "owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "is_accepted": true, "score": 4, "last_activity_date": 1495661710, "last_edit_date": 1495661710, "creation_date": 1495658009, "answer_id": 44168000, "question_id": 44167472, "link": "https://stackoverflow.com/questions/44167472/when-running-the-code-it-does-not-respond-yet-it-runs-correctly-in-the-backgrou/44168000#44168000", "title": "When running the code it does not respond (yet it runs correctly in the background)", "body": "<p>The main bug in your code is basically the way you're accessing the arrays, you're going beyond the array boundaries all the time, here's a possible version fixing that:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N 10\n\nvoid show_lights_all(char *label, int light[N]);\nvoid show_lights_off(char *label, int light[N]);\nvoid firstwalk(int light[N]);\nvoid secondtwalk(int light[N]);\nvoid thirdtwalk(int light[N]);\nvoid fourthtwalk(int light[N]);\n\nint main() {\n    int light[N] = {0};\n    show_lights_all(\"Initial state of lights-  \", light);\n    firstwalk(light);\n    secondtwalk(light);\n    thirdtwalk(light);\n    fourthtwalk(light);\n    show_lights_off(\"\\nLights that were off are :-  \", light);\n}\n\nvoid show_lights_all(char *label, int light[N]) {\n    printf(label);\n    for (int i = 0; i &lt; N; i++) {\n        printf(\"%d \", light[i]);\n    }\n}\n\nvoid show_lights_off(char *label, int light[N]) {\n    printf(label);\n    for (int i = 0; i &lt; N; i++) {\n        if (light[i] == 0) printf(\"%d \", i + 1);\n    }\n}\n\nvoid firstwalk(int light[N]) {\n    show_lights_all(\"\\nLights before the first walk-  \", light);\n    for (int i = 0; i &lt; N; i++) {\n        light[i] = 0;\n    }\n    show_lights_all(\"Lights after the first walk-  \", light);\n}\n\nvoid secondtwalk(int light[N]) {\n    show_lights_all(\"\\nLights before the second walk-  \", light);\n    for (int i = 1; i &lt; N; i += 2) {\n        light[i] = 1;\n    }\n    show_lights_all(\"Lights after the second walk-  \", light);\n}\n\nvoid thirdtwalk(int light[N]) {\n    show_lights_all(\"\\nLights before the third walk-  \", light);\n    for (int i = 2; i &lt; N; i += 3) {\n        light[i] = light[i] == 1 ? 0 : 1;\n    }\n    show_lights_all(\"Lights after the third walk-  \", light);\n}\n\nvoid fourthtwalk(int light[N]) {\n    show_lights_all(\"\\nLights before the fourth walk-  \", light);\n    for (int i = 3; i &lt; N; i += 4) {\n        light[i] = light[i] == 1 ? 0 : 1;\n    }\n    show_lights_all(\"Lights after the fourth walk-  \", light);\n}\n</code></pre>\n\n<p>Think about it, let's say you're doing something like <code>for(int i=0;i&lt;N;i++) light[i * 3 + 2]</code>, now... when i=3->light[11], i=4->light[14], and so on... and you've allocated only memory for an array of 10 elements.</p>\n\n<p>A better pattern would be replacing something like:</p>\n\n<pre><code>for(int i=0;i&lt;N;i++) light[i*k1+k2]\n</code></pre>\n\n<p>by something like:</p>\n\n<pre><code>for(int i=k2;i&lt;N;i+=k1) light[i]\n</code></pre>\n\n<p>it's a safer version which guarantees not going beyond the array boundaries</p>\n\n<p>After you've understood the above explanation, the next step would be refactor the code into something less verbose:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define N 10\n\n#define LIGHTS_ALL -1\n#define LIGHTS_OFF 0\n#define LIGHTS_ON 1\n\nchar *lights_str(int light[N], int status_light) {\n    char s[256] = {0};\n    int n = 0;\n\n    for (int i = 0; i &lt; N; i++) {\n        if (status_light == LIGHTS_OFF) {\n            if (light[i] == LIGHTS_OFF) n += sprintf(&amp;s[n], \"%d \", i);\n            continue;\n        }\n        if (status_light == LIGHTS_ON) {\n            if (light[i] == LIGHTS_ON) n += sprintf(&amp;s[n], \"%d \", i);\n            continue;\n        }\n\n        n += sprintf(&amp;s[n], \"%d\", light[i]);\n    }\n\n    return s;\n}\n\nvoid firstwalk(int light[N]) {\n    for (int i = 0; i &lt; N; i++) {\n        light[i] = 0;\n    }\n}\n\nvoid secondtwalk(int light[N]) {\n    for (int i = 1; i &lt; N; i += 2) {\n        light[i] = 1;\n    }\n}\n\nvoid thirdtwalk(int light[N]) {\n    for (int i = 2; i &lt; N; i += 3) {\n        light[i] = light[i] == 1 ? 0 : 1;\n    }\n}\n\nvoid fourthtwalk(int light[N]) {\n    for (int i = 3; i &lt; N; i += 4) {\n        light[i] = light[i] == 1 ? 0 : 1;\n    }\n}\n\n\nint main() {\n    int light[N] = {0};\n    char *walks[256] = {\"first\", \"second\", \"third\", \"fourth\"};\n\n    void (*p[4])(int light[N]);\n    p[0] = firstwalk;\n    p[1] = secondtwalk;\n    p[2] = thirdtwalk;\n    p[3] = fourthtwalk;\n    for (int i = 0; i &lt; 4; i++) {\n        printf(\"\\nLights before the %s walk-\\t%s\", walks[i],\n               lights_str(light, LIGHTS_ALL));\n        p[i](light);\n        printf(\"\\tLights after the %s walk-\\t%s\", walks[i],\n               lights_str(light, LIGHTS_ALL));\n    }\n    printf(\"\\n\\nFinal status\\tLights on\\t%s\\tLights off\\t%s\",\n           lights_str(light, LIGHTS_OFF), lights_str(light, LIGHTS_ON));\n}\n</code></pre>\n\n<p>In fact, don't stop here, try to refactor further till the code becomes better and better... I'll leave that task to you :)</p>\n"}], "owner": {"reputation": 61, "user_id": 7948259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-5BliBP1n7Uw/AAAAAAAAAAI/AAAAAAAABUE/adywRJ10O_Y/photo.jpg?sz=128", "display_name": "Drat018", "link": "https://stackoverflow.com/users/7948259/drat018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 44168000, "answer_count": 1, "score": 2, "last_activity_date": 1495738631, "creation_date": 1495656023, "last_edit_date": 1495738631, "question_id": 44167472, "link": "https://stackoverflow.com/questions/44167472/when-running-the-code-it-does-not-respond-yet-it-runs-correctly-in-the-backgrou", "title": "When running the code it does not respond (yet it runs correctly in the background)", "body": "<p>I built a program that displays the action of a guard. First there are 100 (I put 10 in the code as it was easier to spot errors) (from 1 to 100) lamps in a street. At first they are all were on but :-</p>\n\n<ol>\n<li>after he passed by them for the first time he turned all of them off.</li>\n<li>after the second time that he passed by them he changed the lights\nthat were in place of 2 and its multiples (2 4 6 8 ...) \u2014 the\nones that were off now on and the opposite.</li>\n<li>third time he changed the ones in third place and multiples of\n3 (3 6 9 ....) \u2014 the ones that were off now on and the opposite.</li>\n<li>fourth time he changed the ones in fourth place and multiples of\n4 (4 8 12 ....)</li>\n</ol>\n\n<p>The program displays how many lamps were off at the end.\nNow I built the code the compiler shows no warning nor errors yet when run it it stops responding. (Compiler set to show all warnings.)</p>\n\n<p>Does anyone have an idea what is wrong with the code?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#define N 100\nint firstwalk(int light[N]);\nint secondtwalk(int light[N]);\nint thirdtwalk(int light[N]);\nint fourthtwalk(int light[N]);\nint main()\n{\n    int light[N] = {0};\n    int i;\n    for (i = 0;i &lt; N;i++)\n    {\n        light[i] = 1;\n    }\n    printf(\"Lights before the first walk-  \");\n    for (i = 0;i &lt; N;i++)\n    {\n        printf(\"%d \", light[i]);\n    }\n    firstwalk(light);\n    secondtwalk(light);\n    thirdtwalk(light);\n    fourthtwalk(light);\n    printf(\"the lights that were off are :-  \");\n    for (i = 0;i &lt; N;i++)\n    {\n        if (light[i] == 0)\n            printf(\"%d \", i+1);\n    }\n\n}\nint firstwalk(int light[N])\n{\n    int i;\n    for (i = 0;i &lt; N;i++)\n    {\n        light[i] = 0;\n    }\n    printf(\"Lights after the first walk-  \");\n    for (i = 0;i &lt; N;i++)\n    {\n        printf(\"%d \", light[i]);\n    }\n    printf(\"\\n\");\n    return light;\n\n}\nint secondtwalk(int light[N])\n{\n    int i;\n    for (i = 1;i &lt; N;i= i * 2 + 1)\n    {\n        light[i] = 1;\n\n    }\n    printf(\"Lights after the second walk-  \");\n    for (i = 0;i &lt; N;i++)\n    {\n        printf(\"%d \", light[i]);\n    }\n    printf(\"\\n\");\n    return light;\n}\nint thirdtwalk(int light[N])\n{\n    int i;\n    for (i = 2;i &lt; N;i= i * 3 + 2)\n    {\n        if (light[i] == 1)\n            light[i] = 0;\n        else light[i] = 1;\n    }\n    printf(\"Lights after the third walk-  \");\n    for (i = 0;i &lt; N;i++)\n    {\n        printf(\"%d \", light[i]);\n    }\n    printf(\"\\n\");\n    return light;\n}\nint fourthtwalk(int light[N])\n{\n    int i;\n    for (i = 3;i &lt; N;i= i * 4 + 3)\n    {\n        if (light[i] == 1)\n            light[i] = 0;\n        else light[i] = 1;\n    }\n    printf(\"Lights after the third walk-  \");\n    for (i = 0;i &lt; N;i++)\n    {\n        printf(\"%d \", light[i]);\n    }\n    printf(\"\\n\");\n    return light;\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "matrix", "system-calls"], "comments": [{"owner": {"reputation": 15176, "user_id": 390363, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/662dda87a8ad559dca5570b7786cf6fb?s=128&d=identicon&r=PG", "display_name": "aragaer", "link": "https://stackoverflow.com/users/390363/aragaer"}, "edited": false, "score": 0, "creation_date": 1495654392, "post_id": 44167007, "comment_id": 75350261, "body": "All your <code>snprintf</code> calls are overwriting the same 4 (maybe some other number depending on your system) bytes in the beginning of your buffer."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1495654447, "post_id": 44167007, "comment_id": 75350287, "body": "You&#39;ll need to allocate memory for the buffer, and <code>sizeof</code> a pointer is just that, the size of the pointer, not the allocated memory."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1495655181, "post_id": 44167007, "comment_id": 75350657, "body": "You&#39;re passing the wrong <code>sizeof</code> to <code>snprintf</code> : it&#39;s supposed to be the size of the target buffer, which isn&#39;t necessarily the size of the thing that you&#39;re printing."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1495668285, "post_id": 44167007, "comment_id": 75355757, "body": "After you write the integer values <code>1</code>, <code>2</code>, and <code>34</code> to the file, how are you going to tell the difference between <code>1</code>, <code>2</code>, <code>34</code> and <code>12</code>, <code>3</code>, <code>4</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1495668090, "post_id": 44167750, "comment_id": 75355703, "body": "Given <code>buffer = (char*)malloc(buf_len);</code>, both <code>strchr(buffer, &#39;\\0&#39;)</code> and <code>strlen(buffer)</code> are undefined behavior."}], "tags": [], "owner": {"reputation": 1382, "user_id": 5585657, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/MtHFK.png?s=128&g=1", "display_name": "digglemister", "link": "https://stackoverflow.com/users/5585657/digglemister"}, "is_accepted": false, "score": 0, "last_activity_date": 1495675771, "last_edit_date": 1495675771, "creation_date": 1495657145, "answer_id": 44167750, "question_id": 44167007, "link": "https://stackoverflow.com/questions/44167007/using-c-syscall-to-write-an-integer-matrix-into-a-text-file/44167750#44167750", "title": "Using C (syscall) to write an integer matrix into a text file?", "body": "<p>A few things. </p>\n\n<p>First, you need to allocate memory for your buffer. <code>sizeof(buffer)</code> will be the size of a pointer, not the buffer length, so you you store that in <code>buf_len</code>. Depending on how many digits the numbers in your matrix are, you might need more or less space in your buffer. </p>\n\n<p>Then, you don't want to write to the beginning of <code>buffer</code> with each <code>snprintf</code> call, but <code>strchr(buffer, '\\0')</code> will return a pointer to the spot you want to write to. The second argument should be the length of the buffer from the spot you're currently at, which is <code>buf_len - strlen(buffer)</code>. </p>\n\n<p>Finally, you only want to write <code>strlen(buffer)</code> bytes to the file so you don't write random bytes to your file.</p>\n\n<pre><code>char    *buffer;\nint     buf_len = 100;\n\n\nbuffer = (char*)malloc(buf_len);\nbuffer[0] = '\\0';\nfor (int i = 0 ; i &lt; N ; i++)\n{\n    for (int j = 0 ; j &lt; N ; j++)\n    {\n        snprintf(strchr(buffer, '\\0'), buf_len - strlen(buffer), \"%d\", matC[i][j]);\n    }\n}\n\nint fdC = open(\"fileC.txt\", O_RDWR);\nwrite(fdC, buffer, strlen(buffer));\nfree(buffer);\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7734836, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r8GyB.jpg?s=128&g=1", "display_name": "Michael Vigato", "link": "https://stackoverflow.com/users/7734836/michael-vigato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495675771, "creation_date": 1495654211, "question_id": 44167007, "link": "https://stackoverflow.com/questions/44167007/using-c-syscall-to-write-an-integer-matrix-into-a-text-file", "title": "Using C (syscall) to write an integer matrix into a text file?", "body": "<p>So, I have my matrix, let's say\n<strong>int matC[N][N],</strong>\nwhich is already filled with integer values.</p>\n\n<p>What I have to do is to save this matrix into a .txt file.\nI've tried this:</p>\n\n<p>1: convert the integers contained in the matrix into a string</p>\n\n<pre><code>char *buffer;\nfor (int i = 0 ; i &lt; N ; i++)\n{\n    for (int j = 0 ; j &lt; N ; j++)\n    {\n        snprintf(buffer, sizeof(matC[i][j]), \"%d\", matC[i][j]);\n    }\n}\n</code></pre>\n\n<p>2: write the string in a file (fileC.txt)</p>\n\n<pre><code>int fdC = open(\"fileC.txt\", O_RDWR);\nwrite(fdC, buffer, sizeof(buffer));\n</code></pre>\n\n<p>I do get something in my fileC.txt, but it's some sort of bunch of unintelegible symbols.\nThanks in anticipation for any help.</p>\n"}, {"tags": ["c", "stack-overflow"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1495653689, "post_id": 44166833, "comment_id": 75349916, "body": "It is <i>undefined</i> what it is supposed to do. That is, it is <i>undefined behavior</i>."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1495653706, "post_id": 44166833, "comment_id": 75349922, "body": "There are a few duplicates of this kind of UB question.  Well, OK, thousands :("}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495654057, "post_id": 44166833, "comment_id": 75350106, "body": "Nothing is &quot;supposed to crash a program&quot;."}, {"owner": {"reputation": 1, "user_id": 6696803, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vSven2YdhXY/AAAAAAAAAAI/AAAAAAAABFQ/s1LmOaERblw/photo.jpg?sz=128", "display_name": "Vicente Arnau Morales", "link": "https://stackoverflow.com/users/6696803/vicente-arnau-morales"}, "edited": false, "score": 0, "creation_date": 1495654146, "post_id": 44166833, "comment_id": 75350156, "body": "Well, not crash, but when the Frame Pointer loads again it won&#39;t be the right  one"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1495654231, "post_id": 44166833, "comment_id": 75350189, "body": "I am working for decades with systems <i>without</i> anything called &quot;frame pointer&quot;. So what will it do on my system? Anyway, if you insist, you can look at the disassembly and/or run an instruction-level debugger to see what is going on."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1495654355, "post_id": 44166833, "comment_id": 75350248, "body": "I don&#39;t even understand the example. You changed the order to the same as it was and get the same output."}, {"owner": {"reputation": 1, "user_id": 6696803, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vSven2YdhXY/AAAAAAAAAAI/AAAAAAAABFQ/s1LmOaERblw/photo.jpg?sz=128", "display_name": "Vicente Arnau Morales", "link": "https://stackoverflow.com/users/6696803/vicente-arnau-morales"}, "edited": false, "score": 0, "creation_date": 1495654716, "post_id": 44166833, "comment_id": 75350418, "body": "I&#39;ll do it, I&#39;m asking this just to know what I&#39;m missing here, the idea I have of the buffer overflow doesn&#39;t fit in here. I just want to know what really going on."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495654823, "post_id": 44166833, "comment_id": 75350471, "body": "The two comments from @EugeneSh. should tell you what is really going on."}, {"owner": {"reputation": 4501, "user_id": 1053930, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/EyjC7.jpg?s=128&g=1", "display_name": "Shashwat Kumar", "link": "https://stackoverflow.com/users/1053930/shashwat-kumar"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495655623, "post_id": 44166833, "comment_id": 75350837, "body": "Agree with @EugeneSh. Its completely undefined behavior and depends on the compiler. On gcc version 5.4.0 20160609 here, its giving same response 10.50000 in both the scenarios."}, {"owner": {"reputation": 1, "user_id": 6696803, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vSven2YdhXY/AAAAAAAAAAI/AAAAAAAABFQ/s1LmOaERblw/photo.jpg?sz=128", "display_name": "Vicente Arnau Morales", "link": "https://stackoverflow.com/users/6696803/vicente-arnau-morales"}, "edited": false, "score": 0, "creation_date": 1495655758, "post_id": 44166833, "comment_id": 75350905, "body": "Solved, it&#39;s the compiler, I&#39;ve checked the assembly code and it doesn&#39;t matter where you declare the variable, it&#39;s always gonna be first the float and after the buffer. Maybe some optimization..."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1495661852, "post_id": 44166833, "comment_id": 75353742, "body": "Although this is undefined behavior and every compiler might behave differently, on a lower level you should have about ~2Mb of reserved memory for the stack (not always true, but often true enough). Depending on your CPU, you are probably writing &quot;ahead&quot; of the stack (writing on your own reserved memory that you didn&#39;t claim just yet). This could be very bad if you were at the edge of the stack or if you used a different type of memory address scheme (there&#39;s a part in the CPU the translates your program&#39;s pointers into the actual memory address)."}], "answers": [{"tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 0, "last_activity_date": 1495662105, "creation_date": 1495662105, "answer_id": 44168931, "question_id": 44166833, "link": "https://stackoverflow.com/questions/44166833/stack-overflow-c-variable-position/44168931#44168931", "title": "Stack Overflow C variable position", "body": "<p>Although this is undefined behavior and every compiler might behave differently, on a lower level it makes sense.</p>\n\n<p>Depending on your OS and hardware, you should have about ~2Mb of reserved memory for the stack (not always true, but often true enough).</p>\n\n<p>Depending on your system (and the CPU), you are probably writing \"ahead\" of the stack - you're writing on memory that was reserved for your own stack and your program's use, even though you didn't \"claim\" it just yet.</p>\n\n<p>This could be very bad if you were at the edge of the stack or if your CPU used a different type of memory address resolution scheme (there's a part in the CPU the translates your program's pointers into the actual memory address)... especially on systems that have the stack memory going in a different direction or use a linked list for the stack.</p>\n"}], "owner": {"reputation": 1, "user_id": 6696803, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vSven2YdhXY/AAAAAAAAAAI/AAAAAAAABFQ/s1LmOaERblw/photo.jpg?sz=128", "display_name": "Vicente Arnau Morales", "link": "https://stackoverflow.com/users/6696803/vicente-arnau-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495662105, "creation_date": 1495653491, "last_edit_date": 1495654619, "question_id": 44166833, "link": "https://stackoverflow.com/questions/44166833/stack-overflow-c-variable-position", "title": "Stack Overflow C variable position", "body": "<p>This is probably a simple question about StackOverflow but it's getting me crazy.</p>\n\n<p>Let's take the example from wikipedia:</p>\n\n<pre><code>void foo (char *bar)\n{\n\n   char  c[28];        \n   float myVar = 10.5;  \n\n   printf(\"myVar value = %f\\n\", myVar);\n   memcpy(c, bar, strlen(bar)); \n\n   printf(\"myVar value = %f\\n\", myVar);\n}\n\nint main (int argc, char **argv)\n{\n   foo(\"my string is too long !!!!! \\x10\\x10\\xc0\\x42\");\n   return 0;\n}\n</code></pre>\n\n<p>If we run that piece of code(disabling all the compiler options) the output is:</p>\n\n<pre><code>myVar value = 10.500000\nmyVar value = 96.031372\n</code></pre>\n\n<p>Till this point everything is ok, Once memcpy reaches c[27], is gonna write on myVar space. </p>\n\n<p>Now let's say that we change where the variable myVar is defined:</p>\n\n<pre><code>   float myVar = 10.5;  \n   char  c[28];        \n</code></pre>\n\n<p>The output remains the same, how is this possible? Is not suppose to write the overflow values inside the \"Frame Pointer\" space. Moreover, let's say I print the memory address of this variables, now the output is:</p>\n\n<pre><code>myVar value = 10.500000\nmyVar value = 10.500000\n</code></pre>\n\n<p>How is that possible, is this like quantum mechanic(just a joke)?Is not suppose to rewrite the \"Frame Pointer\" and crash the program?</p>\n"}, {"tags": ["c", "gcc", "embedded", "elf", "stm32"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 1, "creation_date": 1495655021, "post_id": 44166799, "comment_id": 75350579, "body": "yes look at the binary file although it may be padded between the flash and ram addresses.  Or do a disassembly (arm-whatever-objdump -D file.elf) and then examine what is really in those sections and what is debug info, perhaps compare side by side with what is in the binary to see what is not really used."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495655057, "post_id": 44166799, "comment_id": 75350597, "body": "could also strip the elf file and see what changes, might get more clear."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1495709086, "post_id": 44166799, "comment_id": 75371150, "body": "binary file or uC resources consumption?"}], "owner": {"reputation": 428, "user_id": 2516697, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/3nNCJ.jpg?s=128&g=1", "display_name": "s.paszko", "link": "https://stackoverflow.com/users/2516697/s-paszko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 868, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1495653354, "creation_date": 1495653354, "question_id": 44166799, "link": "https://stackoverflow.com/questions/44166799/why-i-have-a-diffrence-between-code-size-in-arm-none-eabi-size-output-map-file", "title": "Why i have a diffrence between code size in arm-none-eabi-size, output.map file and arm-none-eabi-nm?", "body": "<p>In my ARM STM32 project(Eclipse and Gcc) output of command <code>arm-none-eabi-size</code> is </p>\n\n<pre><code>   text    data     bss     dec     hex filename\n 103784     232   75064  179080   2bb88 project.elf\n</code></pre>\n\n<p>To check code size I tried also diffrent approach. I have opened <code>output.map</code>, analyzed it and sumed up .text section, .bss section, .data section etc. Suprisingly I've received diffrent code summary</p>\n\n<pre><code># Sections :\n-----------------------\ncomment  :  8323  bytes.\nigot  :  0  bytes.\ndebug_ranges  :  17208  bytes.\ntext  :  277702  bytes.\nrodata  :  6048  bytes.\neh_frame  :  4  bytes.\nfini  :  12  bytes.\niplt  :  0  bytes.\ndebug_frame  :  76068  bytes.\ngroup  :  29528  bytes.\njcr  :  4  bytes.\ndebug_line  :  518087  bytes.\ndebug_macro  :  4878468  bytes.\ninit  :  12  bytes.\nrel  :  0  bytes.\nfini_array  :  8  bytes.\ndebug_str  :  13228775  bytes.\ndebug_info  :  334376  bytes.\npreinit_array  :  0  bytes.\nbss  :  143413  bytes.\ndebug_abbrev  :  52355  bytes.\nisr_vector  :  912  bytes.\ndata  :  451  bytes.\ninit_array  :  8  bytes.\ndebug_aranges  :  8248  bytes.\n</code></pre>\n\n<p>So my third approach was to check code size based on <code>arm-none-eabi-eabi-nm -S --size-sort --radix=d project.elf</code> output. I've sumed each 'tT', 'dD', 'wW' etc. sections and results are third time diffrent than <code>arm-none-eabi-size</code> and <code>output.map</code>.</p>\n\n<p>Who to belive? How to read these files(project.elf, output.map) to have real code size, memory usage etc. Maybe there is another way to achive this. I mean for example analyze binary file project.bin?</p>\n\n<p>P.S. Probably you think what i want to achive. My company want to add  new  library to project. I have to check how much binary file will be bigger with these library and check memory usage, static and dynamic allocation. I need to have reliable results of code sections size to check it.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 2, "creation_date": 1495653344, "post_id": 44166768, "comment_id": 75349737, "body": "Whatever your OS supplies."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1495653545, "post_id": 44166768, "comment_id": 75349841, "body": "Also, the amount of time is usually an issue since the granularity on OS sleep() style calls is in the order of ms.  Shorter sleeps are awkward for a general-purpose OS, whereas much longer &#39;sleeps&#39;, ie. in the order of days, are better provided by an out-of-process OS scheduler, eg. like cron or Windows Scheduler."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495653727, "post_id": 44166768, "comment_id": 75349930, "body": "There are many previous questions, <a href=\"https://stackoverflow.com/questions/14812233/sleeping-for-milliseconds-on-windows-linux-solaris-hpux-ibm-aix-vxworks-wi\">here is one</a>"}, {"owner": {"reputation": 12243, "user_id": 2192494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd4f75b6e9293967ba3c81f89edd68a?s=128&d=identicon&r=PG", "display_name": "Lee Daniel Crocker", "link": "https://stackoverflow.com/users/2192494/lee-daniel-crocker"}, "edited": false, "score": 0, "creation_date": 1495654788, "post_id": 44166768, "comment_id": 75350451, "body": "How do you propose to judge whether or not your chosen method of doing nothing is &quot;efficient&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495653902, "post_id": 44166863, "comment_id": 75350022, "body": "<code>usleep</code> is not a &quot;standard C function&quot;."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1495657585, "post_id": 44166863, "comment_id": 75351811, "body": "<code>usleep()</code> is an obsolete POSIX function; still available in POSIX are <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/sleep.html\" rel=\"nofollow noreferrer\"><code>sleep</code></a>, and <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/nanosleep.html\" rel=\"nofollow noreferrer\"><code>nanosleep</code></a>. There is also <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.26.5.7\" rel=\"nofollow noreferrer\"><code>thrd_sleep</code></a> from <code>threads.h</code>; standard in C11, but still unsupported in glibc."}], "tags": [], "owner": {"reputation": 317, "user_id": 7938316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2852dd164f7a6cbb88e472707e9b1cc?s=128&d=identicon&r=PG&f=1", "display_name": "Prithwish Jana", "link": "https://stackoverflow.com/users/7938316/prithwish-jana"}, "is_accepted": false, "score": 1, "last_activity_date": 1495654138, "last_edit_date": 1495654138, "creation_date": 1495653613, "answer_id": 44166863, "question_id": 44166768, "link": "https://stackoverflow.com/questions/44166768/what-is-the-most-efficient-way-to-sleep-for-an-arbitrary-amount-of-time-in-c/44166863#44166863", "title": "What is the most efficient way to &quot;sleep&quot; for an arbitrary amount of time in c?", "body": "<p>Presuming you are using Linux platform, there is a standard C function that can sleep for microseconds.</p>\n\n<pre><code>#include &lt;unistd.h&gt;\nunsigned int usec;\n...\nusleep(usec);\n</code></pre>\n\n<p>When Sleep is called, the program comes out from running state and re-enters to ready state when sleep time gets over, so no impact on CPU time. Other processes/threads may take advantage of CPU by then.\nIf <code>usleep</code> is not available on the Unix variant you use, alternately, you may use <code>sleep</code> is the granularity is in seconds,</p>\n\n<pre><code>unsigned int sleep(unsigned int seconds);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 1, "creation_date": 1495657951, "post_id": 44166873, "comment_id": 75351960, "body": "Note that <code>usleep</code> is obsolete"}], "tags": [], "owner": {"reputation": 5542, "user_id": 1076451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZTP3Q.jpg?s=128&g=1", "display_name": "Chimera", "link": "https://stackoverflow.com/users/1076451/chimera"}, "is_accepted": false, "score": 2, "last_activity_date": 1495659135, "last_edit_date": 1495659135, "creation_date": 1495653661, "answer_id": 44166873, "question_id": 44166768, "link": "https://stackoverflow.com/questions/44166768/what-is-the-most-efficient-way-to-sleep-for-an-arbitrary-amount-of-time-in-c/44166873#44166873", "title": "What is the most efficient way to &quot;sleep&quot; for an arbitrary amount of time in c?", "body": "<p>Unix variants generally provide <code>sleep(seconds)</code> and <code>usleep(microseconds)</code>. <code>usleep()</code> has been deprecated in favor of the POSIX <code>nanosleep()</code>. Windows provides <code>Sleep( sometime_in_millisecs )</code>;</p>\n\n<p>Windows:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n    printf( \"starting to sleep...\\n\" );\n    Sleep( 3000 );   // sleep three seconds\n    printf( \"sleep ended\\n\" );\n}\n</code></pre>\n\n<p>Linux (Unix):</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n\n//unsigned int sleep(unsigned int seconds);\n\nint main() {\n    sleep( 3 ); // sleep 3 seconds\n    usleep( 3000000 ); // sleep 3 seconds more\n    return( 0 );\n}\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 4135606, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/535ac76fd549c969d25c03e4c91ab363?s=128&d=identicon&r=PG&f=1", "display_name": "user37421", "link": "https://stackoverflow.com/users/4135606/user37421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495659135, "creation_date": 1495653231, "question_id": 44166768, "link": "https://stackoverflow.com/questions/44166768/what-is-the-most-efficient-way-to-sleep-for-an-arbitrary-amount-of-time-in-c", "title": "What is the most efficient way to &quot;sleep&quot; for an arbitrary amount of time in c?", "body": "<p>Is there a function that just sleeps. The amount of time is not an issue.\nWhat method should be used so that the computer performance is not disturbed?</p>\n"}, {"tags": ["c", "math", "unsigned", "signed"], "comments": [{"owner": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "edited": false, "score": 3, "creation_date": 1495653992, "post_id": 44166714, "comment_id": 75350071, "body": "It&#39;s been a long time since I&#39;ve dealt with 2&#39;s complement, but I think if you write <code>uint64_t diff = (x - y) &amp; 0x0000 ffff ffff ffff</code> then the answer will be correct as if you had 48-bit integers."}, {"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "reply_to_user": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "edited": false, "score": 0, "creation_date": 1495654300, "post_id": 44166714, "comment_id": 75350221, "body": "That looks terribly plausible and is nice to read. But it&#39;s always going to have 0 top bits, so how could it be a -ve value as an int64_t?"}, {"owner": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "edited": false, "score": 0, "creation_date": 1495654587, "post_id": 44166714, "comment_id": 75350344, "body": "It wouldn&#39;t be a negative <code>int64_t</code>, but when the top bit is set it will be a negative &quot;<code>int48_t</code>&quot;. -1 is 0xff..., so -1 in &quot;<code>int48_t</code>&quot; will be represented as 0x0000ff...  That would be tricky if you want to say something like <code>x &lt; 0</code>, which would have to be rewritten as <code>x &lt;= (((int64_t)-1) &amp; 0x0000ff...)</code>."}, {"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "reply_to_user": {"reputation": 1769, "user_id": 879997, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4c96ee08562add37a3a8923ff98d903f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/879997/andrew"}, "edited": false, "score": 0, "creation_date": 1495654681, "post_id": 44166714, "comment_id": 75350396, "body": "sure, so now I need to convert it to int64_t"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495670922, "post_id": 44166714, "comment_id": 75356414, "body": "To clarify the question -- it&#39;s possible that x was before y, and possible that x was after y, and you want a negative result to indicate the latter?   (As opposed to knowing that x was the initial measurement, and y was the final measurement, and the result should be unsigned)."}], "answers": [{"comments": [{"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 0, "creation_date": 1495654021, "post_id": 44166801, "comment_id": 75350086, "body": "No, but I think I can assume that the readings are fairly close, so of the two possible answers I think I can take the smallest. Edited question to clarify."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 0, "creation_date": 1495671199, "post_id": 44166801, "comment_id": 75356469, "body": "@JohnLawrenceAspden Taking the smallest would not work if the counter wrapped in between the two measurements, and it seems like the question was phrased to say that you want the code to be able to handle the counter wrapping in between the two measurements"}, {"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 0, "creation_date": 1495671487, "post_id": 44166801, "comment_id": 75356534, "body": "smallest in absolute value. if the two measurements are close to each other, then one possible difference will be enormous and can be ignored."}], "tags": [], "owner": {"reputation": 29791, "user_id": 120261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2f78d64b265cf0c1c5781c1ea7a39?s=128&d=identicon&r=PG", "display_name": "mtrw", "link": "https://stackoverflow.com/users/120261/mtrw"}, "is_accepted": false, "score": 2, "last_activity_date": 1495653911, "last_edit_date": 1495653911, "creation_date": 1495653362, "answer_id": 44166801, "question_id": 44166714, "link": "https://stackoverflow.com/questions/44166714/in-c-how-do-i-calculate-the-signed-difference-between-two-48-bit-unsigned-integ/44166801#44166801", "title": "In C, How do I calculate the signed difference between two 48-bit unsigned integers?", "body": "<p>Do you know which was the earlier reading and which was later? If so:</p>\n\n<pre><code>diff = (earlier &lt;= later) ? later - earlier : WRAPVAL - earlier + later;\n</code></pre>\n\n<p>where <code>WRAPVAL</code> is <code>(1 &lt;&lt; 48)</code> is pretty easy to read.</p>\n"}, {"comments": [{"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 0, "creation_date": 1495655006, "post_id": 44167098, "comment_id": 75350572, "body": "oh, that looks nice, let me think about it for a bit (tests under construction...)"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "reply_to_user": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 2, "creation_date": 1495655135, "post_id": 44167098, "comment_id": 75350631, "body": "Another idea I just came up with is to shift your 48-bit unsigned integers to the left by 16 before you do anything with them, so then your readings are all uint64_t numbers and they wrap at the expected place, and you don&#39;t have to right-shift any signed numbers ever."}, {"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 0, "creation_date": 1495656101, "post_id": 44167098, "comment_id": 75351079, "body": "Original answer doesn&#39;t work, I think we need an arithmetic right shift, but the code above is doing a logical one (gcc, I think the behaviour is undefined in general?). However the new idea looks very plausible!"}, {"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 1, "creation_date": 1495657489, "post_id": 44167098, "comment_id": 75351770, "body": "Oops, sorry, it does work in gcc, I&#39;d got some 0xffffffffff in my tests. But I think it only works because gcc does the sane thing. However it&#39;s probably good enough! We&#39;re fairly wedded to gcc and any other compiler that will do a logical shift right on a signed value can just crawl off and die."}, {"owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 1, "creation_date": 1495665942, "post_id": 44167098, "comment_id": 75355087, "body": "After a bit of boiling down and testing:  return ((int64_t)((x-y)&lt;&lt;16)&gt;&gt;16);   return ((int64_t)((x&lt;&lt;16)-(y&lt;&lt;16)))&gt;&gt;16; both work just fine. You don&#39;t need the mask in either case. Would you like to add either or both as an answer?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "reply_to_user": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "edited": false, "score": 0, "creation_date": 1495670760, "post_id": 44167098, "comment_id": 75356366, "body": "I added the first one, I think it&#39;s nicer."}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 5, "last_activity_date": 1495670748, "last_edit_date": 1495670748, "creation_date": 1495654563, "answer_id": 44167098, "question_id": 44166714, "link": "https://stackoverflow.com/questions/44166714/in-c-how-do-i-calculate-the-signed-difference-between-two-48-bit-unsigned-integ/44167098#44167098", "title": "In C, How do I calculate the signed difference between two 48-bit unsigned integers?", "body": "<p>You can simulate a 48-bit unsigned integer type by just masking off the top 16 bits of a <code>uint64_t</code> after any arithmetic operation.  So, for example, to take the difference between those two times, you could do:</p>\n\n<pre><code>uint64_t diff = (after - before) &amp; 0xffffffffffff;\n</code></pre>\n\n<p>You will get the right value even if the counter wrapped around during the procedure.  If the counter didn't wrap around, the masking is not needed but not harmful either.</p>\n\n<p>Now if you want this difference to be recognized as a signed integer by your compiler, you have to <em><a href=\"https://en.wikipedia.org/wiki/Sign_extension\" rel=\"nofollow noreferrer\">sign extend</a></em> the 48th bit.  That means that if the 48th bit is set, the number is negative, and you want to set the 49th through the 64th bit of your 64-bit integer.  I think a simple way to do that is:</p>\n\n<pre><code>int64_t diff_signed = (int64_t)(diff &lt;&lt; 16) &gt;&gt; 16;\n</code></pre>\n\n<p><strong>Warning:</strong> You should probably test this to make sure it works, and also beware there is implementation-defined behavior when I cast the <code>uint64_t</code> to an <code>int64_t</code>, and I think there is implementation-defined behavior when I shift a signed negative number to the right.  I'm sure a C language lawyer could some up with something more robust.</p>\n\n<p><strong>Update:</strong> The OP points out that if you combine the operation of taking the difference and doing the sign extension, there is no need for masking.  That would look like this:</p>\n\n<pre><code>int64_t diff = (int64_t)(x - y) &lt;&lt; 16 &gt;&gt; 16;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1495671151, "post_id": 44167557, "comment_id": 75356459, "body": "Note, it&#39;s implementation-defined whether bit-fields can be bigger than <code>unsigned int</code>"}], "tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": false, "score": 3, "last_activity_date": 1495657232, "last_edit_date": 1495657232, "creation_date": 1495656373, "answer_id": 44167557, "question_id": 44166714, "link": "https://stackoverflow.com/questions/44166714/in-c-how-do-i-calculate-the-signed-difference-between-two-48-bit-unsigned-integ/44167557#44167557", "title": "In C, How do I calculate the signed difference between two 48-bit unsigned integers?", "body": "<pre><code>struct Nanosecond48{\n    unsigned long long u48 : 48;\n//  int res : 12; // just for clarity, don't need this one really\n};\n</code></pre>\n\n<p>Here we just use the explicit width of the field to be 48 bits and with that (admittedly somewhat awkward) type you live it up to your compiler to properly handle different architectures/platforms/whatnot.</p>\n\n<p>Like the following:</p>\n\n<pre><code>Nanosecond48 u1, u2, overflow;\noverflow.u48 = -1L;\nu1.u48 = 3;\nu2.u48 = 5;\nconst auto diff = (u2.u48 + (overflow.u48 + 1) - u1.u48) &amp; 0x0000FFFFFFFFFFFF;\n</code></pre>\n\n<p>Of course in the last statement you can just do the remainder operation with <code>% (overflow.u48 + 1)</code> if you prefer.</p>\n"}], "owner": {"reputation": 15945, "user_id": 254837, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f52878ef686e52f2410d9f0829d0e100?s=128&d=identicon&r=PG", "display_name": "John Lawrence Aspden", "link": "https://stackoverflow.com/users/254837/john-lawrence-aspden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 2, "accepted_answer_id": 44167098, "answer_count": 3, "score": 8, "last_activity_date": 1495670748, "creation_date": 1495653006, "last_edit_date": 1495654492, "question_id": 44166714, "link": "https://stackoverflow.com/questions/44166714/in-c-how-do-i-calculate-the-signed-difference-between-two-48-bit-unsigned-integ", "title": "In C, How do I calculate the signed difference between two 48-bit unsigned integers?", "body": "<p>I've got two values from an unsigned 48bit nanosecond counter, which may wrap.</p>\n\n<p>I need the difference, in nanoseconds, of the two times.</p>\n\n<p>I think I can assume that the readings were taken at roughly the same time, so of the two possible answers I think I'm safe taking the smallest.</p>\n\n<p>They're both stored as <code>uint64_t</code>. Because I don't think I can have 48 bit types.</p>\n\n<p>I'd like to calculate the difference between them, as a signed integer (presumably <code>int64_t</code>), accounting for the wrapping.</p>\n\n<p>so e.g. if I start out with</p>\n\n<pre><code>x=5\n\ny=3\n</code></pre>\n\n<p>then the result of <code>x-y</code> is <code>2</code>, and will stay so if I increment both <code>x</code> and <code>y</code>, even as they wrap over the top of the max value <code>0xffffffffffff</code></p>\n\n<p>Similarly if x=3, y=5, then x-y is -2, and will stay so whenever x and y are incremented simultaneously.</p>\n\n<p>If I could declare <code>x</code>,<code>y</code> as <code>uint48_t</code>, and the difference as <code>int48_t</code>, then I think </p>\n\n<pre><code>int48_t diff = x - y; \n</code></pre>\n\n<p>would just work.</p>\n\n<p>How do I simulate this behaviour with the 64-bit arithmetic I've got available? </p>\n\n<p>(I think any computer this is likely to run on will use 2's complement arithmetic)</p>\n\n<p>P.S. I can probably hack this out, but I wonder if there's a nice neat standard way to do this sort of thing, which the next person to read my code will be able to understand.</p>\n\n<p>P.P.S Also, this code is going to end up in the tightest of tight loops, so something that will compile efficiently would be nice, so that if there has to be a choice, speed trumps readability.</p>\n"}, {"tags": ["c", "unix", "pthreads"], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1495653020, "post_id": 44166639, "comment_id": 75349573, "body": "Well, it does not work. I init the sem to 0,0 both, and it printed 112112"}, {"owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "reply_to_user": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1495653127, "post_id": 44166639, "comment_id": 75349628, "body": "I edited the answer before 1 min and added one more <code>sem_post(&amp;s1); </code> at the end of Monkey1 did you try this version ?? , also I forgot to mention that s1,s2 are initialized in 0...."}], "tags": [], "owner": {"reputation": 12253, "user_id": 6671342, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/22063dc94e4bdcb1b6fb634e5865f5aa?s=128&d=identicon&r=PG&f=1", "display_name": "coder", "link": "https://stackoverflow.com/users/6671342/coder"}, "is_accepted": false, "score": 1, "last_activity_date": 1495652759, "creation_date": 1495652759, "answer_id": 44166639, "question_id": 44166213, "link": "https://stackoverflow.com/questions/44166213/3-monkeys-printing-values-have-to-be-synced-with-semaphores/44166639#44166639", "title": "3 monkeys, printing values have to be synced with semaphores", "body": "<p>You could change a little the Monkey1,2,3 functions like:</p>\n\n<pre><code>void* Monkey1(void* param)\n{\n  int i;\n  //it starts to print first, two times number 1 and triggers Monkey 2\n  for(i = 0; i &lt; 2; i++){\n      printf(\"1\");\n  }\n  sem_post(&amp;s1);//start Monkey2\n  sem_wait(&amp;s2);\n   for(i = 0; i &lt; 2; i++){\n      printf(\"1\");\n  }\n sem_post(&amp;s1); //start Monkey2 and Monkey3 but Monkey3 waits also sem2\n sem_post(&amp;s1); \n}\nvoid* Monkey2()\n{\n     int i;\n    sem_wait(&amp;s1); //doesn't start until Monkey 1 allows \n    printf(\"2\");\n    sem_post(&amp;s2);\n    sem_post(&amp;s2); //allow both Monkey1 and Monkey2 but Monkey2 needs also s1 sem\n    sem_wait(&amp;s1); //wait Monkey 1\n    printf(\"2\");\n    sem_post(&amp;s2);\n}\nvoid* Monkey3()\n{\n   sem_wait(&amp;s2); \n   sem_wait(&amp;s1); \n   sem_wait(&amp;s2);\n   printf(\"3\");\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1495656283, "post_id": 44167514, "comment_id": 75351177, "body": "This does not work too. Assuming sem&#39;s init values are 0,0"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1495656365, "post_id": 44167514, "comment_id": 75351224, "body": "If it is 1,0 like in the post then it prints 22111"}, {"owner": {"reputation": 49, "user_id": 8032189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35af633e5025f90936c56819d5857d1?s=128&d=identicon&r=PG&f=1", "display_name": "codeinc", "link": "https://stackoverflow.com/users/8032189/codeinc"}, "reply_to_user": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1495657376, "post_id": 44167514, "comment_id": 75351716, "body": "@Ilan Aizelman WS Did you try to run it? My output is 1121123, and both semaphore should be initialized to 0"}], "tags": [], "owner": {"reputation": 49, "user_id": 8032189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f35af633e5025f90936c56819d5857d1?s=128&d=identicon&r=PG&f=1", "display_name": "codeinc", "link": "https://stackoverflow.com/users/8032189/codeinc"}, "is_accepted": false, "score": 0, "last_activity_date": 1495656182, "creation_date": 1495656182, "answer_id": 44167514, "question_id": 44166213, "link": "https://stackoverflow.com/questions/44166213/3-monkeys-printing-values-have-to-be-synced-with-semaphores/44167514#44167514", "title": "3 monkeys, printing values have to be synced with semaphores", "body": "<p>This is a little tricky to get it right. Monkey 1 can only be waken up by monkey 2 using semaphore 1, and monkey 3 can only be waken up by monkey 2 using semaphore 2. This will guarantee the print order. To repeat, simply putting inside a while loop.</p>\n\n<pre><code>void* Monkey1(void* param)\n{\n  int i;\n  //it starts to print first, two times number 1 and triggers Monkey 2\n  for(i = 0; i &lt; 2; i++){\n      printf(\"1\");\n  }\n  sem_post(&amp;s1);//start Monkey2\n  sem_wait(&amp;s1);\n  for(i = 0; i &lt; 2; i++){\n    printf(\"1\");\n  }\n  sem_post(&amp;s1);\n  sem_wait(&amp;s1); \n}\n\nvoid* Monkey2()\n{\n  sem_wait(&amp;s1); //doesn't start until Monkey 1 allows \n  printf(\"2\");\n  sem_post(&amp;s1);\n  sem_wait(&amp;s1); \n  printf(\"2\");\n  sem_post(&amp;s2);\n  sem_wait(&amp;s2);\n  sem_post(&amp;s1); \n}\n\nvoid* Monkey3()\n{\n  sem_wait(&amp;s2); \n  printf(\"3\");\n  sem_post(&amp;s2);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1495656822, "post_id": 44167575, "comment_id": 75351464, "body": "It almost works. It prints 211211231121123.. The first 2 has to be deleted. do you know how to fix that?"}, {"owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 0, "creation_date": 1495657028, "post_id": 44167575, "comment_id": 75351554, "body": "Also, I don&#39;t know how to follow it. :("}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "reply_to_user": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "edited": false, "score": 1, "creation_date": 1495657403, "post_id": 44167575, "comment_id": 75351729, "body": "Monkey 2 may or may not start - it depends on in what order are the threads are joining (it could be fixed using mutex). But from there, it works exactly like in your example."}], "tags": [], "owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "is_accepted": true, "score": 1, "last_activity_date": 1495656428, "creation_date": 1495656428, "answer_id": 44167575, "question_id": 44166213, "link": "https://stackoverflow.com/questions/44166213/3-monkeys-printing-values-have-to-be-synced-with-semaphores/44167575#44167575", "title": "3 monkeys, printing values have to be synced with semaphores", "body": "<p>This is how it can be implemented (I have included comments to explain how it works; not that both sempaphores are initialized with value 1 and that there are some <code>sleep(1)</code> calls to make thread interlacing visible on the screen):</p>\n\n<pre><code>#define N 3\n\nsem_t s1, s2;\n\nvoid *Monkey1(void *param) {\n  while (1) {\n    sleep(1);\n    for (int j = 0; j &lt; 2; j++) {\n      sleep(1);\n      sem_wait(&amp;s1);\n      for (int i = 0; i &lt; 2; i++) {\n        printf(\"1\\n\");\n      }\n      sem_post(&amp;s1);\n    }\n  }\n}\nvoid *Monkey2() {\n  while (1) {\n    sleep(1);\n    sem_wait(&amp;s2); // Wait for monkey 3\n    for (int i = 0; i &lt; 2; ++i) {\n      sleep(1);\n      sem_wait(&amp;s1); // Wait for monkey 1\n      printf(\"2\\n\");\n      sem_post(&amp;s1);\n    }\n    sem_post(&amp;s2);\n  }\n}\nvoid *Monkey3() {\n  while (1) {\n    sleep(1);\n    sem_wait(&amp;s2); // Wait for monkey 2\n    sleep(1);\n    sem_wait(&amp;s1); // Wait for monkey 1\n    printf(\"3\\n\");\n    sem_post(&amp;s2);\n    sem_post(&amp;s1);\n  }\n}\nint main() {\n  pthread_t thread[N];\n  int i, ans[N];\n\n  sem_init(&amp;s1, 0, 1);\n  sem_init(&amp;s2, 0, 1);\n\n  for (i = 0; i &lt; N; i++) {\n    ans[i] = i + 1;\n  }\n\n  if (pthread_create(&amp;thread[0], NULL, Monkey1, NULL) != 0) {\n    perror(\"Could not create thread\");\n    exit(1);\n  }\n\n  if (pthread_create(&amp;thread[1], NULL, Monkey2, NULL) != 0) {\n    perror(\"Could not create thread\");\n    exit(1);\n  }\n\n  if (pthread_create(&amp;thread[2], NULL, Monkey3, (void *)&amp;ans[2]) != 0) {\n    perror(\"Could not create thread\");\n    exit(1);\n  }\n\n  for (i = 0; i &lt; N; i++) {\n    pthread_join(thread[i], NULL);\n  }\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1542, "user_id": 2659892, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/675312914/picture?type=large", "display_name": "Ilan Aizelman WS", "link": "https://stackoverflow.com/users/2659892/ilan-aizelman-ws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 44167575, "answer_count": 3, "score": 2, "last_activity_date": 1496062047, "creation_date": 1495651106, "question_id": 44166213, "link": "https://stackoverflow.com/questions/44166213/3-monkeys-printing-values-have-to-be-synced-with-semaphores", "title": "3 monkeys, printing values have to be synced with semaphores", "body": "<p>3 Monkeys, everyone of them prints its value. Monkey1() prints 1, and so on. The first monkey is the strongest and he prints twice 1, then monkey2 prints 2, and then again monkey1 prints, then monkey2, and then monkey3 can print his value.</p>\n\n<p><strong>Expected output:</strong>\n<code>1 1 2 1 1 2 3 1 1 2 1 1 2 3 1 1 2</code> and so on..</p>\n\n<p><strong>I am allowed to use only 2 semaphores, each monkey is a thread.</strong></p>\n\n<p>Well, I have been thinking about it for over an hour and I am still not sure how to implement this. I would love to get some directions on how to approach this.</p>\n\n<p>Here how the code looks like, if this will help of what system/language I am using, the code isn't working at the moment of curse..</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;string.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n\n//3 monkeys so N = 3\n#define N 3\n\nsem_t s1,s2;\n\nvoid* Monkey1(void* param)\n{\n  int i;\n\n  for(i = 0; i &lt; 2; i++){\n      printf(\"1\");\n      sem_wait(&amp;s1);\n  }\n\n}\nvoid* Monkey2()\n{\n     int i;\n    for(i = 0; i &lt; 2; i++){\n        sem_post(&amp;s1);\n    }\n    printf(\"2\");\n    sem_wait(&amp;s2);\n}\nvoid* Monkey3()\n{\n    printf(\"3\");\n    //sem_wait(&amp;s1);\n}\n\n\nvoid main()\n{\n    pthread_t thread[N];\n    int i, ans[N];\n\n    sem_init(&amp;s1, 0, 1);\n    sem_init(&amp;s2,0,0);\n\n    for(i=0;i&lt;N;i++)\n    {\n        ans[i] = i + 1;\n    }   \n\n    if (pthread_create ( &amp;thread[0] , NULL , Monkey1 , (void*)&amp;ans[0])  != 0 )\n    {\n        perror( \"Could not create thread\" );\n        exit(1);\n    }\n\n\n    if (pthread_create ( &amp;thread[1] , NULL , Monkey2 , (void*)&amp;ans[1])  != 0 )\n    {\n        perror( \"Could not create thread\" );\n        exit(1);\n    }\n\n    if (pthread_create ( &amp;thread[2] , NULL , Monkey3 , (void*)&amp;ans[2])  != 0 )\n    {\n        perror( \"Could not create thread\" );\n        exit(1);\n    }\n\n\n    for(i=0;i&lt;N;i++)\n    {\n        pthread_join( thread[i], NULL );\n    }\n\n\n}\n</code></pre>\n"}, {"tags": ["c", "bitmap", "garbage-collection", "memory-address"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1495652555, "post_id": 44166206, "comment_id": 75349360, "body": "So each bit in the bitmap corresponds to one byte / address in the heap?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495652735, "post_id": 44166206, "comment_id": 75349438, "body": "What is the type of a physical address? Description says value_t*, code looks like void*."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1495652735, "post_id": 44166206, "comment_id": 75349439, "body": "But you seem to be asking why your own code is written as it is.  The most we could do is offer educated guesses.  Don&#39;t <i>you</i> know?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495652940, "post_id": 44166206, "comment_id": 75349538, "body": "Is this <i>your</i> code, or it is not?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1495653326, "post_id": 44166206, "comment_id": 75349722, "body": "Looking at your updated question, I guess you&#39;re asking &quot;will my proposed code work?&quot;  You haven&#39;t given us enough information to judge -- in particular we would need to see <i>at least</i> the type of <code>bitmap_start</code>.  But since you&#39;re posing the question in the first place, what&#39;s the nature of <i>your</i> uncertainty about it?"}, {"owner": {"reputation": 2322, "user_id": 5069802, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0d39cfdfa3a97d21908ae7f43171b41b?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5069802/rodrigo"}, "edited": false, "score": 0, "creation_date": 1495653649, "post_id": 44166206, "comment_id": 75349899, "body": "Actually the comments by John Bollinger and Yunnosch have made me think about the template I was given in a different way. I&#39;ll edit when I clarify my ideas on it. Thanks."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1495656907, "post_id": 44166206, "comment_id": 75351507, "body": "When you say that the virtual addresses have type <code>value_t</code> and are 32 bits, are you assuming that none of those 32 are padding bits?  And does this mean that <code>value_t</code> is certain to be an unsigned type?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495731310, "post_id": 44166206, "comment_id": 75385543, "body": "To use the suggested method of working with the heap, your code would need to know how the OS is handling the heap allocation and free functionality.  (Unless your planning on replacing all the heap allocation an free functions with your own functions.)"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1495657562, "creation_date": 1495657562, "answer_id": 44167878, "question_id": 44166206, "link": "https://stackoverflow.com/questions/44166206/referencing-heap-addresses-in-a-machine-independent-way-in-c/44167878#44167878", "title": "Referencing heap addresses in a machine independent way in C", "body": "<p>As I understand the question, your \"bitmap\" is intended to be sequence of bits, with a unique bit corresponding to each heap address.  Presumably you also want to minimize the number of unused bits.  You are asking about your proposed approach to mapping between heap addresses and bits.</p>\n\n<p>Furthermore, the conversion functions you present between virtual and physical addresses suggest that your memory model is byte-addressible, as opposed, say, to being addressible only with the granularity of a <code>value_t</code>.</p>\n\n<p>Since your bitmap is apparently accessed in units of type <code>value_t</code>, which I'm taking to be unsigned and without padding bits, the number of usable bits in each unit is <code>sizeof(value_t) * CHAR_BIT</code>.  That matches your <code>VALUE_BITS</code>, modulo spelling.  Still, if <code>bitmap_start</code> is going to be (or reasonably can be made to be) visible wherever <code>VALUE_BITS</code> is defined (if it is a variable) or used (if it is a macro), then I would be inclined to write its initializer / replacement text as <code>(sizeof(*bitmap_start) * CHAR_BIT)</code>.  That's clearer to me and adapts automatically if ever you change the type to which <code>bitmap_start</code> points.</p>\n\n<hr>\n\n<p>Now let's consider your code starting with this:</p>\n\n<blockquote>\n<pre><code>size_t index = ptr - heap_start;\n</code></pre>\n</blockquote>\n\n<p>There's nothing inherently wrong with that, but remember that pointer arithmetic is defined in terms of units of the pointed-to type.  Thus, that gives the number of units of type <code>value_t</code> in the half-open interval defined by the two pointers, supposing <code>ptr</code> points into or just past the end of the heap <em>and is properly aligned</em>.  That alignment caveat matters because your model is byte-addressible, therefore there are valid values that <code>ptr</code> can take that are misaligned.  In fact, the majority of valid <code>ptr</code> values are misaligned.  If you want the index in terms of a <em>byte</em> offset into the heap -- and it appears you do -- then you want something more like this:</p>\n\n<pre><code>ptrdiff_t index = (char *) ptr - (char *) heap_start;\n</code></pre>\n\n<hr>\n\n<p>Let's move on to the next part:</p>\n\n<blockquote>\n<pre><code>size_t word_index = index / VALUE_BITS;\n</code></pre>\n</blockquote>\n\n<p>It seems you're trying to determine the storage unit in the bitset that contains the <code>index</code><sup>th</sup> bit.  If we stipulate that each unit contains <code>VALUE_BITS</code> usable bits, and that you want every bit in each unit to correspond to a heap address, then this is fine.</p>\n\n<p>But you seem to have run out of steam there, as this ...</p>\n\n<blockquote>\n<pre><code>bitmap_start[word_index] = ...;\n</code></pre>\n</blockquote>\n\n<p>... is slightly lacking in detail.  You're going to need to use bit masking to select the appropriate bit of <code>bitmap_start[word_index]</code> to examine or set, and in doing so you'll need to take care to avoid modifying the other bits in the same unit.  That's not hard, but I'm not going to do it for you.</p>\n"}], "owner": {"reputation": 2322, "user_id": 5069802, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/0d39cfdfa3a97d21908ae7f43171b41b?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo", "link": "https://stackoverflow.com/users/5069802/rodrigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "accepted_answer_id": 44167878, "answer_count": 1, "score": 1, "last_activity_date": 1495657562, "creation_date": 1495651082, "last_edit_date": 1495653816, "question_id": 44166206, "link": "https://stackoverflow.com/questions/44166206/referencing-heap-addresses-in-a-machine-independent-way-in-c", "title": "Referencing heap addresses in a machine independent way in C", "body": "<p>I'm building a garbage collector for a compiler. I work with \"physical\" and \"virtual\" addresses. The virtual addresses have type <code>value_t</code> and are 32 bits. The physical addresses have type value_t* and are 32 or 64 bits pointers depending on the host machine. The conversion between the two is as follows:</p>\n\n<pre><code>static void* addr_v_to_p(value_t v_addr) {\n  assert(0 &lt;= v_addr);\n  return (char*)memory_start + v_addr;\n}\n\nstatic value_t addr_p_to_v(void* p_addr) {\n  assert(memory_start &lt;= p_addr &amp;&amp; p_addr &lt;= memory_end);\n  return (value_t)((char*)p_addr - (char*)memory_start);\n}\n</code></pre>\n\n<p>Then I set a memory lay out similar to this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ymkwf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ymkwf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where the bitmap has to reference values of the heap.</p>\n\n<p><strong>Problem</strong></p>\n\n<p>I want to give the index in the bitmap of an address in a machine independent way. (For that purposes it becomes handy to set <code>VALUE_BITS = sizeof(value_t) * CHAR_BITS</code> as the number of bits of the <code>value_t</code> type). I would write:</p>\n\n<pre><code>(ptr, heap_start, bitmap_start of type value_t*)\nsize_t index = ptr - heap_start;\nsize_t word_index = index / VALUE_BITS;\nbitmap_start[word_index] = ...;\n</code></pre>\n\n<p>But I'm not sure this is going to work.</p>\n"}, {"tags": ["c", "pointers", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 846, "user_id": 1137102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HOdwV.png?s=128&g=1", "display_name": "RoiHatam", "link": "https://stackoverflow.com/users/1137102/roihatam"}, "edited": false, "score": 2, "creation_date": 1495650704, "post_id": 44166072, "comment_id": 75348477, "body": "The implementation of <code>push</code> is missing"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1495650814, "post_id": 44166072, "comment_id": 75348536, "body": "<code>fast-&gt;next-&gt;next;</code> will fail if <code>fast-&gt;next</code> is <code>NULL</code>."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495650832, "post_id": 44166072, "comment_id": 75348548, "body": "provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1251, "user_id": 3700378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PeqNK.jpg?s=128&g=1", "display_name": "xsami", "link": "https://stackoverflow.com/users/3700378/xsami"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495662493, "post_id": 44166072, "comment_id": 75353996, "body": "@Yunnosch Apologizem, I can see it was me error <a href=\"https://stackoverflow.com/posts/44166072/revisions\">stackoverflow.com/posts/44166072/revisions</a>. ramit pahwa should try to fix this. Thanks"}, {"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 1, "creation_date": 1495663343, "post_id": 44166072, "comment_id": 75354273, "body": "In the future, you\u2019ll save yourself a lot of trouble if you run the program in the debugger and see which line crashes the program.  Another good technique is to add <code>assert()</code> statements that the operations you\u2019re doing are really valid. Here, that might include <code>assert(head_ref);</code> and <code>assert(slow);</code>."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 1251, "user_id": 3700378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PeqNK.jpg?s=128&g=1", "display_name": "xsami", "link": "https://stackoverflow.com/users/3700378/xsami"}, "edited": false, "score": 1, "creation_date": 1495685823, "post_id": 44166072, "comment_id": 75359780, "body": "@xsami I had temporarily a comment here, to add information (fast) which I also edited into the question (I had to wait for peer review). It was meant to be in a matter-of-fact way, but had to reason the &quot;small&quot; edit thoroughly to make sure it got accepted. No need to apologize for a little accident - that was not what I wanted to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8061269, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3AgjIdnAOCI/AAAAAAAAAAI/AAAAAAAAGx4/jlVLpwh2azA/photo.jpg?sz=128", "display_name": "ramit pahwa", "link": "https://stackoverflow.com/users/8061269/ramit-pahwa"}, "edited": false, "score": 0, "creation_date": 1495742096, "post_id": 44166175, "comment_id": 75391423, "body": "Thanks,I understood the issue here"}], "tags": [], "owner": {"reputation": 2107, "user_id": 3770881, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/9a575ab4e645630e948c8ae7eebeda74?s=128&d=identicon&r=PG&f=1", "display_name": "lpares12", "link": "https://stackoverflow.com/users/3770881/lpares12"}, "is_accepted": true, "score": 0, "last_activity_date": 1495651301, "last_edit_date": 1495651301, "creation_date": 1495650952, "answer_id": 44166175, "question_id": 44166072, "link": "https://stackoverflow.com/questions/44166072/segmentation-fault-while-finding-middle-element-in-a-linked-list/44166175#44166175", "title": "Segmentation fault while finding middle element in a linked list", "body": "<p>Your problem is in the line:</p>\n\n<pre><code>fast = fast-&gt;next-&gt;next;\n</code></pre>\n\n<p>Imagine you have two elements in the linked list: <code>A -&gt; B -&gt; NULL</code>, first you start by executing <code>fast = fast-&gt;next</code>, which results in fast pointing to <code>B</code> node.</p>\n\n<p>When you enter the while loop, you try to get <code>B-&gt;next-&gt;next</code>, which results in <code>NULL-&gt;next</code>, which clearly doesn't exist.</p>\n\n<p>The implementation is plain wrong, you should make sure to avoid this case. The while could be changed to:</p>\n\n<pre><code>while(fast!=NULL &amp;&amp; fast-&gt;next != NULL)\n</code></pre>\n\n<p>and this would fix it.</p>\n\n<p>Keep in mind that in case of a pair number of elements, you'll always get the middle one which is more left. So in <code>A -&gt; B -&gt; NULL</code> you'd get node <code>A</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 8061269, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3AgjIdnAOCI/AAAAAAAAAAI/AAAAAAAAGx4/jlVLpwh2azA/photo.jpg?sz=128", "display_name": "ramit pahwa", "link": "https://stackoverflow.com/users/8061269/ramit-pahwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 44166175, "answer_count": 1, "score": 0, "last_activity_date": 1495672068, "creation_date": 1495650605, "last_edit_date": 1495672068, "question_id": 44166072, "link": "https://stackoverflow.com/questions/44166072/segmentation-fault-while-finding-middle-element-in-a-linked-list", "title": "Segmentation fault while finding middle element in a linked list", "body": "<p>I'm trying to find the middle element of a linked List, but I'm getting a segmentation fault, and I'm not sure what is going wrong. This is my implementation of the hare rabbit algorithm:</p>\n\n<pre><code>//fast slow pointer method  \nvoid ptMiddle(struct node **head_ref)\n{   \n    struct node *fast = (*head_ref);\n    struct node *slow = (*head_ref);\n    fast = fast-&gt;next;\n\n    while(fast!=NULL)\n    {   \n        // printf(\"%d%d\",slow-&gt;data,fast-&gt;data);\n        slow = slow-&gt;next;\n        fast = fast-&gt;next-&gt;next;\n    }\n    printf(\"Middle elemnet is:%d\\n\",slow-&gt;data);\n}\n\nint main()\n{\n    struct node * head=NULL;\n    push(&amp;head,1);\n    push(&amp;head,2);\n    push(&amp;head,3);\n    push(&amp;head,4);\n    printList(&amp;head);\n    printf(\"M:%d\\n\",middleNode(&amp;head)-&gt;data);\n    printf(\"here\");\n    append(&amp;head,5);\n    append(&amp;head,6);\n    printList(&amp;head);\n    printf(\"M:%d\\n\",middleNode(&amp;head)-&gt;data);\n    printf(\"here\");\n    ptMiddle(&amp;head);\n\n    return 0;  \n}\n</code></pre>\n\n<p>Please help out.</p>\n"}, {"tags": ["c", "erlang", "hardware-acceleration", "erlang-nif"], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 7622576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce544656442560a57bb43669437a022c?s=128&d=identicon&r=PG&f=1", "display_name": "JeremiahB", "link": "https://stackoverflow.com/users/7622576/jeremiahb"}, "is_accepted": true, "score": 1, "last_activity_date": 1498948451, "last_edit_date": 1498948451, "creation_date": 1495752227, "answer_id": 44190903, "question_id": 44166025, "link": "https://stackoverflow.com/questions/44166025/creating-a-hardware-accelleration-pipeline-for-beam/44190903#44190903", "title": "Creating a hardware accelleration pipeline for BEAM", "body": "<p><code>erlang:fun_info/1</code> returns a list containing the tuple <code>{env, ...}</code> which contains an AST.   I can leverage this sto create my OpenCL code, and use an existing OpenCL binding and use an ETS table in a gen_server for caching, covering the while pipeline in pure Erlang.</p>\n"}], "owner": {"reputation": 845, "user_id": 7622576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce544656442560a57bb43669437a022c?s=128&d=identicon&r=PG&f=1", "display_name": "JeremiahB", "link": "https://stackoverflow.com/users/7622576/jeremiahb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 44190903, "answer_count": 1, "score": 1, "last_activity_date": 1498948451, "creation_date": 1495650434, "last_edit_date": 1498948366, "question_id": 44166025, "link": "https://stackoverflow.com/questions/44166025/creating-a-hardware-accelleration-pipeline-for-beam", "title": "Creating a hardware accelleration pipeline for BEAM", "body": "<p>I have a conceptual idea for a pipeline enabling GPU acceleration in Erlang.   The API would consist of higher order functions that take a fun, a binary and some flags, do a runtime check on the BEAM bytecode to see if the fun can be compiled to OpenCL, cache the result and then work similarly to higher order functions from the lists module. If the fun cannot be converted to OpenCL the process would fail.  </p>\n\n<p>All operations would be done on binaries as cons lists are not represented contiguously in memory, leading to a great deal of work to move them to and from GPU memory.  There would be options to interpret the binary as floats, doubles, integers or a mix, and to have a varying size of input and output for the fun.  Is it possible to do this in pure Erlang or C without hacking on BEAM?   If it is, links to relevant resources would be appreciated.</p>\n"}, {"tags": ["c", "data-structures", "struct", "nodes"], "comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1495649494, "post_id": 44165742, "comment_id": 75347863, "body": "Please give code example what is working/not-working"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1495649688, "post_id": 44165742, "comment_id": 75347975, "body": "Please <a href=\"https://stackoverflow.com/posts/44165742/edit\">edit</a> your question to provide more details regarding what you&#39;re asking. When you do so, please keep in mind that we can&#39;t read your mind or see your screen from where we&#39;re sitting, so the only information we have available to us is what you put in your question."}, {"owner": {"reputation": 26, "user_id": 5081354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edd4d11b4b86f127c72b08dfb728e2a?s=128&d=identicon&r=PG&f=1", "display_name": "ACN", "link": "https://stackoverflow.com/users/5081354/acn"}, "edited": false, "score": 0, "creation_date": 1495649949, "post_id": 44165742, "comment_id": 75348106, "body": "Question edited"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1495651282, "post_id": 44165742, "comment_id": 75348773, "body": "typedef struct? So you are writing C code, why do you use the C++ tag?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1495651982, "post_id": 44165742, "comment_id": 75349105, "body": "Make an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Get it compilable by making comments of anything which causes errors. Write in prose comments what those things are supposed to achieve. Make sure to include some code which demonstrates how you are intending to use your quaint structure types."}, {"owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1495652051, "post_id": 44165742, "comment_id": 75349134, "body": "It seems like you want to access both an instance of printOptions and an instance of printQuality from an instance of optNode. Is that correct?"}, {"owner": {"reputation": 26, "user_id": 5081354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edd4d11b4b86f127c72b08dfb728e2a?s=128&d=identicon&r=PG&f=1", "display_name": "ACN", "link": "https://stackoverflow.com/users/5081354/acn"}, "reply_to_user": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1495652250, "post_id": 44165742, "comment_id": 75349225, "body": "@JaysonBoubin I am trying to access instances of all the structs above, trough an instance of printOptions from an instance of optNode"}, {"owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1495652437, "post_id": 44165742, "comment_id": 75349307, "body": "So you want an optNode to contain an instance of printOptions which then contains an instance of all of your structs?"}, {"owner": {"reputation": 26, "user_id": 5081354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edd4d11b4b86f127c72b08dfb728e2a?s=128&d=identicon&r=PG&f=1", "display_name": "ACN", "link": "https://stackoverflow.com/users/5081354/acn"}, "reply_to_user": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1495652505, "post_id": 44165742, "comment_id": 75349338, "body": "@JaysonBoubin precisely. I can deal with one struct, one node, insertion and deletion of data in the struct and that&#39;s simple. But when I want to have multiple structs, that&#39;s where I need help. I do not want to write separate nodes, and separate functions for each."}, {"owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1495652832, "post_id": 44165742, "comment_id": 75349489, "body": "You&#39;re using a union for your print options which contains instances of all of these structs. Are you trying to access them all at the same time? or do you only need one struct value per option node? (I.E, does each node need a dpi, size, etc, or just one of those values)"}, {"owner": {"reputation": 26, "user_id": 5081354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edd4d11b4b86f127c72b08dfb728e2a?s=128&d=identicon&r=PG&f=1", "display_name": "ACN", "link": "https://stackoverflow.com/users/5081354/acn"}, "reply_to_user": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "edited": false, "score": 0, "creation_date": 1495652944, "post_id": 44165742, "comment_id": 75349539, "body": "@JaysonBoubin trying to access all of them at the same time. I know what a union is supposed to do. And I was trying to somewhat make the node interpret the structures as one."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495667622, "post_id": 44165742, "comment_id": 75355567, "body": "Somewhere along the line, you need a &#39;discriminator&#39; to tell you which value is stored in a given occurrence of the union \u2014 search on &#39;discriminated union c&#39; with Google shows Dr Dobbs articles and Stack Overflow questions high on the list."}], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 5081354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edd4d11b4b86f127c72b08dfb728e2a?s=128&d=identicon&r=PG&f=1", "display_name": "ACN", "link": "https://stackoverflow.com/users/5081354/acn"}, "edited": false, "score": 0, "creation_date": 1495653571, "post_id": 44166772, "comment_id": 75349859, "body": "Indeed this seemed a viable solution to my issues. And now, I have the opinion of the experts. Thank you."}], "tags": [], "owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "is_accepted": true, "score": 0, "last_activity_date": 1495653246, "creation_date": 1495653246, "answer_id": 44166772, "question_id": 44165742, "link": "https://stackoverflow.com/questions/44165742/c-multiple-struct-with-only-one-node/44166772#44166772", "title": "C multiple struct with only one node", "body": "<p>From your comments, I believe your issue has to do with the behavior of Unions in C vs structs. In C/C++, Unions are structures which can only instantiate one of their values at a given time. With your printOptions union, you have 5 variables. At any given time, only one of those variables (the last one you set) is guaranteed to hold a value. Here is a good article on how Unions work: <a href=\"https://www.programiz.com/c-programming/c-unions\" rel=\"nofollow noreferrer\">https://www.programiz.com/c-programming/c-unions</a>. Structs in C/C++ do not have this behavior. Whichever values you set remain set until the instance of the struct goes out of scope or is deleted. I think that if you make printOptions a struct, you will be able to access all of your other structs from your options pointer in your optNodes. </p>\n"}], "owner": {"reputation": 26, "user_id": 5081354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edd4d11b4b86f127c72b08dfb728e2a?s=128&d=identicon&r=PG&f=1", "display_name": "ACN", "link": "https://stackoverflow.com/users/5081354/acn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 44166772, "answer_count": 1, "score": -3, "last_activity_date": 1495653246, "creation_date": 1495649417, "last_edit_date": 1495651375, "question_id": 44165742, "link": "https://stackoverflow.com/questions/44165742/c-multiple-struct-with-only-one-node", "title": "C multiple struct with only one node", "body": "<p>After juggling and trying to learn how to get this done I thought it's time to ask the experts.</p>\n\n<p>I have more than one structures and would like to \"manipulate\" the data in them using only one node.</p>\n\n<p>What is the best way to do this?</p>\n\n<p>code example: </p>\n\n<pre><code>typedef struct printQuality{ int dpi; } quality ;\n    typedef struct paperSize{ char* dim; } sizes ; //this would be A3 , A4 this is why i picked char\n    typedef struct printColour{ char* color; } colors;\n    typedef struct printStyle{ char* side; } sides;\n    typedef struct printOrientation { char* orientation; } orientations;\n\ntypedef union printOptions{\n    quality dpi;\n    sizes size;\n    colors color;\n    sides side;\n    orientations orientation;\n\n} options;\n\nstruct optNode{\n    options* inf;\n    optNode* next;\n    optNode* prev;\n};\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1495649656, "post_id": 44165733, "comment_id": 75347956, "body": "<code>gets</code> is obsolete, please don&#39;t use it. With <code>fgets</code> only one of a pair of EOL markers becomes part of the input string (Windows)."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1495649673, "post_id": 44165733, "comment_id": 75347969, "body": "It stops when it hits a newline or overwrites something important and segfaults, which is why every C reference says don&#39;t use gets."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1495649794, "post_id": 44165733, "comment_id": 75348036, "body": "the question would be equally valid for <code>fgets()</code>, and yes, do yourself a favor and only use <code>fgets()</code>."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 3, "creation_date": 1495650191, "post_id": 44165733, "comment_id": 75348210, "body": "The answer <a href=\"https://stackoverflow.com/a/18383562/335858\">depends on the environment</a>."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 2, "creation_date": 1495650804, "post_id": 44165733, "comment_id": 75348529, "body": "<code>gets()</code> reads from <code>stdin</code>, which by default is open as a text stream.  One of the characteristics of a text stream is that some implementation-defined sense of line termination will be converted to newline characters on the fly."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495651396, "post_id": 44165733, "comment_id": 75348827, "body": "5.2.2 Character display semantics p2 \\n (new line) Moves the active position to the initial position of the next line. \\r (carriage return) Moves the active position to the initial position of the current line"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495653166, "post_id": 44165733, "comment_id": 75349642, "body": "Also 7.4.1.10 The isspace function ...new-line (&#39;\\n&#39;),..."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1497559288, "post_id": 44165733, "comment_id": 76141998, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1761051/difference-between-n-and-r\">Difference between \\n and \\r?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1495652017, "creation_date": 1495652017, "answer_id": 44166448, "question_id": 44165733, "link": "https://stackoverflow.com/questions/44165733/does-gets-stops-reading-when-it-reaches-r-or-n-or-r-n/44166448#44166448", "title": "Does gets() stops reading when it reaches &#39;\\r&#39; or &#39;\\n&#39; or &#39;\\r\\n&#39;?", "body": "<p>From the C Standard (5.2.2 Character display semantics)</p>\n\n<blockquote>\n  <p>\\n (new line) Moves the active position to the initial position of the\n  next line.</p>\n</blockquote>\n\n<p>And (7.21.2 Streams)</p>\n\n<blockquote>\n  <p>2 A text stream is an ordered sequence of characters composed into\n  lines, <strong>each line consisting of zero or more characters plus a\n  terminating new-line character</strong>. Whether the last line requires a\n  terminating new-line character is implementation-defined. Characters\n  may have to be added, altered, or deleted on input and output to\n  conform to differing conventions for representing text in the host\n  environment. Thus, <strong>there need not be a one-to-one correspondence\n  between the characters in a stream and those in the external\n  representation</strong>. Data read in from a text stream will necessarily\n  compare equal to the data that were earlier written out to that stream\n  only if: the data consist only of printing characters and the control\n  characters horizontal tab and new-line; no new-line character is\n  immediately preceded by space characters; and the last character is a\n  new-line character. Whether space characters that are written out\n  immediately before a new-line character appear when read in is\n  implementation-defined.</p>\n</blockquote>\n\n<p>Thus the new line character is the character <code>'\\n'</code>.</p>\n\n<p>Take into account that the function <code>gets</code> is unsafe and is not supported any more by the C Standard.</p>\n"}], "owner": {"reputation": 197, "user_id": 8041827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/44b352a4b5dc351fde5ccfa4b3060fb7?s=128&d=identicon&r=PG&f=1", "display_name": "user247763", "link": "https://stackoverflow.com/users/8041827/user247763"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 44166448, "answer_count": 1, "score": 1, "last_activity_date": 1495652017, "creation_date": 1495649382, "question_id": 44165733, "link": "https://stackoverflow.com/questions/44165733/does-gets-stops-reading-when-it-reaches-r-or-n-or-r-n", "title": "Does gets() stops reading when it reaches &#39;\\r&#39; or &#39;\\n&#39; or &#39;\\r\\n&#39;?", "body": "<p>The <a href=\"http://www.cplusplus.com/reference/cstdio/gets/\" rel=\"nofollow noreferrer\">documentation</a> for gets says:</p>\n\n<blockquote>\n  <p>Reads characters from the standard input (stdin) and stores them as a\n  C string into str until a newline character or the end-of-file is\n  reached.</p>\n</blockquote>\n\n<p>But it doesn't say what the <strong>newline character</strong> is. Are all of the following considered a newline character: '\\r' or '\\n' or '\\r\\n'? </p>\n"}, {"tags": ["c", "char", "text-files", "scanf", "getchar"], "comments": [{"owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "edited": false, "score": 0, "creation_date": 1495649193, "post_id": 44165540, "comment_id": 75347665, "body": "Pls elaborate with some code snippet"}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1495649541, "post_id": 44165540, "comment_id": 75347894, "body": "Are you just trying to read &quot;91h&quot; into a string buffer? Or &quot;91&quot; into a variable and then &quot;h&quot; into another variable?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495651530, "post_id": 44165540, "comment_id": 75348892, "body": "&quot;scan the entire 91h to a declared string.&quot; If the input line is <code>91h</code> what is wrong with using <code>char int_char[20]; scanf(&quot;%19s&quot;, int_char)</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1495683856, "post_id": 44165540, "comment_id": 75359247, "body": "What is the type of variable for the destination?"}], "answers": [{"comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495650127, "post_id": 44165840, "comment_id": 75348187, "body": "This won&#39;t work for with, for example <code>9Ah</code>, although the intent of the question is unclear."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495651305, "post_id": 44165840, "comment_id": 75348784, "body": "With his input it&#39;s fine.  But what does he want?"}], "tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1495649767, "creation_date": 1495649767, "answer_id": 44165840, "question_id": 44165540, "link": "https://stackoverflow.com/questions/44165540/how-would-i-scan-an-integer-value-followed-by-a-character-using-scanf-in-c/44165840#44165840", "title": "How would I scan an integer value followed by a character using scanf in C", "body": "<p>If you are simply reading them into a buffer:</p>\n\n<pre><code>char buff[128];\n(f)scanf(file, \"%s\", buff);\n</code></pre>\n\n<p>If you are reading them into 2 separate variables:</p>\n\n<pre><code>int num;\nchar var;\n(f)scanf(\"%2d%c\", &amp;num, &amp;var);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1485, "user_id": 138264, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mZr81.png?s=128&g=1", "display_name": "natersoz", "link": "https://stackoverflow.com/users/138264/natersoz"}, "is_accepted": false, "score": 1, "last_activity_date": 1495650272, "creation_date": 1495650272, "answer_id": 44165992, "question_id": 44165540, "link": "https://stackoverflow.com/questions/44165540/how-would-i-scan-an-integer-value-followed-by-a-character-using-scanf-in-c/44165992#44165992", "title": "How would I scan an integer value followed by a character using scanf in C", "body": "<p>This works:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    FILE *file = fopen(\"test.txt\", \"r\");\n\n    int x1 = 0;\n    int x2 = 0;\n    int x3 = 0;\n    int x4 = 0;\n    fscanf(file, \"%xh %xh %xh %xh\", &amp;x1, &amp;x2, &amp;x3, &amp;x4);\n\n    printf(\"x1: %x, x2: %x, x3: %x, x4: %x\\n\", x1, x2, x3, x4);\n}\n</code></pre>\n\n<p>Test data in file test.txt:</p>\n\n<pre><code>91h 82h 93h 94h\n91h 82h 93h 94h\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 3928326, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d7ad59a43fe2df044af956113c9d7e12?s=128&d=identicon&r=PG&f=1", "display_name": "dave_1234", "link": "https://stackoverflow.com/users/3928326/dave-1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495650272, "creation_date": 1495648798, "question_id": 44165540, "link": "https://stackoverflow.com/questions/44165540/how-would-i-scan-an-integer-value-followed-by-a-character-using-scanf-in-c", "title": "How would I scan an integer value followed by a character using scanf in C", "body": "<p>So I am trying to scan 91h from a text file. So far I have tried using getchar and also scanf but neither of them scans the entire 91h to a declared string. \nIs there a trick I am missing here? </p>\n"}, {"tags": ["c", "cmake", "cygwin", "bonjour"], "comments": [{"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 1, "creation_date": 1495648869, "post_id": 44165516, "comment_id": 75347472, "body": "cygwin import library are <code>*.dll.a</code> not <code>*.lib</code>"}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1495649284, "post_id": 44165516, "comment_id": 75347728, "body": "But with Bonjour SDK I have delivered *.lib, so what should I do? Couldn&#39;t I mix unix libraries with native Windows libraries?"}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1495650622, "post_id": 44165516, "comment_id": 75348427, "body": "You should not mix different libraries. Or you use Unix convention or Windows one. Mixing is a recipe for mulfunction. It is specially true on 64 bit where also the data type convention are different. <a href=\"https://cygwin.com/cygwin-ug-net/programming.html#gcc-64\" rel=\"nofollow noreferrer\">cygwin.com/cygwin-ug-net/programming.html#gcc-64</a>"}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 1, "creation_date": 1495651383, "post_id": 44165516, "comment_id": 75348823, "body": "But dnssd.lib is 3rd party library so how I can use? Couldn&#39;t I use 3rd party libraries with cygwin?"}, {"owner": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1495652992, "post_id": 44165516, "comment_id": 75349561, "body": "Cygwin has that library. Install libdns_sd-devel package.  <a href=\"https://cygwin.com/packages/x86_64/libdns_sd-devel/libdns_sd-devel-765.30.11-1\" rel=\"nofollow noreferrer\">cygwin.com/packages/x86_64/libdns_sd-devel/&hellip;</a>"}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "reply_to_user": {"reputation": 6281, "user_id": 5105383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2YCB5.jpg?s=128&g=1", "display_name": "matzeri", "link": "https://stackoverflow.com/users/5105383/matzeri"}, "edited": false, "score": 0, "creation_date": 1495654691, "post_id": 44165516, "comment_id": 75350398, "body": "How can I install it?"}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "edited": false, "score": 0, "creation_date": 1495657709, "post_id": 44165516, "comment_id": 75351878, "body": "I once had a similar problem when <code>cygwin</code> was using my Windows CMake version. Can you cross-check that you have the CMake Cygwin package installed (specialized CMake version for Cygwin, see e.g. <a href=\"https://stackoverflow.com/questions/3586210/cmake-building-for-cygwin\">here</a>)?"}, {"owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "edited": false, "score": 0, "creation_date": 1495712595, "post_id": 44165516, "comment_id": 75373325, "body": "Ok I found I can use Cygwin Setup :)  I forgot that there is such option to select packages/libraries"}], "answers": [{"tags": [], "owner": {"reputation": 533, "user_id": 5905670, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4beb8e51be447a64835741e3354c843?s=128&d=identicon&r=PG&f=1", "display_name": "PfunnyGuy", "link": "https://stackoverflow.com/users/5905670/pfunnyguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1505398460, "last_edit_date": 1505398460, "creation_date": 1505395705, "answer_id": 46220475, "question_id": 44165516, "link": "https://stackoverflow.com/questions/44165516/cmake-cygwin-and-find-library-not-finding-lib-library/46220475#46220475", "title": "CMake/cygwin and find_library not finding .lib library", "body": "<p>While this answer may not apply to the OP's specific situation, I believe it does apply to the question.  In my case I'm using cmake &amp; Cygwin, but am trying to run a cmake project that was originally done on Linux with cmake v2.8.  In my case, I'm using cmake v3.6.2, Cygwin v2.9.0-2, Windows 10.</p>\n\n<p>To get cmake to find the libraries, I added this statement:</p>\n\n<pre><code>IF (CYGWIN)\n  SET (CMAKE_FIND_LIBRARY_PREFIXES \"\")\n  SET (CMAKE_FIND_LIBRARY_SUFFIXES \".lib\" \".LIB\" \".dll\" \".DLL\")\nELSE()\n  SET (CMAKE_FIND_LIBRARY_PREFIXES \"lib\")\n  SET (CMAKE_FIND_LIBRARY_SUFFIXES \".so\" \".a\")\nENDIF (CYGWIN)\n</code></pre>\n\n<p>Note that I added lib and dll in all caps, because while windows isn't case sensitive, cmake is.</p>\n\n<p>Credit to Domen Vrankar for pointing out the prefix issue as well <a href=\"https://stackoverflow.com/questions/14243524/cmake-find-library-matching-behavior\">here</a></p>\n"}], "owner": {"reputation": 7138, "user_id": 4415642, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/253d1dc6571ed728099ff96b693f5b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 Ziobro", "link": "https://stackoverflow.com/users/4415642/micha%c5%82-ziobro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1505398460, "creation_date": 1495648714, "question_id": 44165516, "link": "https://stackoverflow.com/questions/44165516/cmake-cygwin-and-find-library-not-finding-lib-library", "title": "CMake/cygwin and find_library not finding .lib library", "body": "<p>I would like to use in my <strong>cygwin</strong> project <strong>Bonjour library for Windows</strong>. I have installed this library and I have <code>dnssd.lib</code> file but <strong>CMake</strong> doesn't find this library. </p>\n\n<p>If I use this code: </p>\n\n<pre><code>  find_path(BONJOUR_PATH dns_sd.h\n            PATHS \"$ENV{BONJOUR_SDK_HOME}/Include\")\n    find_library(BONJOUR_LIBRARY\n            NAMES dnssd.lib\n            PATHS \"$ENV{BONJOUR_SDK_HOME}/Lib/x64\")\n    include_directories(BONJOUR_PATH)\n</code></pre>\n\n<p>I am getting such error message: </p>\n\n<blockquote>\n  <p>CMake Error: The following variables are used in this project, but\n  they are set to NOTFOUND. Please set them or make sure they are set\n  and tested correctly in the CMake files: BONJOUR_LIBRARY (ADVANCED)</p>\n</blockquote>\n\n<p>It happens only when I wrap above code inside <code>if(CYGWIN) /* code */ endif()</code> but if I wrap it inside <code>if(WIN32) /* code */ endif()</code> then it finds library correctly. </p>\n\n<p>Why this happens? </p>\n"}, {"tags": ["c", "linux", "multithreading", "pthreads", "wait"], "answers": [{"comments": [{"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1495650230, "post_id": 44165864, "comment_id": 75348235, "body": "Tried those other ones, but I&#39;m getting ECHILD with them :(. Thanks for the answer."}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "reply_to_user": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 0, "creation_date": 1495650650, "post_id": 44165864, "comment_id": 75348449, "body": "ECHILD may also come if you have improper PID specified in waitpid(). Ensure you tried with pid as &quot;-1&quot; , to wait for any child irrespective of process groups."}], "tags": [], "owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1584951661, "last_edit_date": 1584951661, "creation_date": 1495649862, "answer_id": 44165864, "question_id": 44165495, "link": "https://stackoverflow.com/questions/44165495/usage-of-wall-in-waitid-on-linux/44165864#44165864", "title": "Usage of __WALL in waitid on Linux", "body": "<p><code>__WALL</code> cannot be used in <code>waitid()</code>. </p>\n\n<p>Based in what I read,  <code>__WALL</code> (wait for all children, regardless of clone or non-clone), can be used with only <code>waitpid()</code>, <code>wait3()</code> and <code>wait4()</code>.</p>\n"}], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1584951661, "creation_date": 1495648670, "last_edit_date": 1495650110, "question_id": 44165495, "link": "https://stackoverflow.com/questions/44165495/usage-of-wall-in-waitid-on-linux", "title": "Usage of __WALL in waitid on Linux", "body": "<p>This code sample is based on Michael Burr's answer in <a href=\"https://stackoverflow.com/questions/6154539/how-can-i-wait-for-any-all-pthreads-to-complete\">How can I wait for any/all pthreads to complete?</a>.</p>\n\n<p>I tried to modify the solution to rely on waitid, instead.\nThe documentation says that linux's waitid should accept a <code>__WALL</code> flag which should make it wait on thread children too, but I'm getting errors with it (EINVAL):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;time.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;unistd.h&gt;\n\nstatic\nvoid msleep(int ms)\n{\n    struct timespec waittime;\n\n    waittime.tv_sec = (ms / 1000);\n    ms = ms % 1000;\n    waittime.tv_nsec = ms * 1000 * 1000;\n\n    nanosleep( &amp;waittime, NULL);\n}\n\nvoid* threadfunc( void* c)\n{\n    int id = (int) c;\n    int i = 0;\n\n    for (i = 0 ; i &lt; 12; ++i) {\n        printf( \"thread %d, iteration %d\\n\", id, i);\n        msleep(10);\n    }\n\n    return 0;\n}\n\n\nint main()\n{\n    int i = 4;\n\n    for (; i; --i) {\n        pthread_t* tcb = malloc( sizeof(*tcb));\n\n        pthread_create( tcb, NULL, threadfunc, (void*) i);\n    }\n\n    msleep(40);\n\n    int r;\n    siginfo_t info;\n    while(0&lt;=(r=waitid(P_ALL, 0, &amp;info, WEXITED|__WALL)) || errno == EINTR)\n        ;\n    printf(\"r=%d %m\\n\", r);\n\n#if 0\n    pthread_exit(0);\n#endif\n\n    return 0;\n}\n</code></pre>\n\n<p>Any idea as to why it's not working? If it isn't obvious, I'd like to get the same result as with pthread_exit(0) from main -- all threads should run to completion.</p>\n"}, {"tags": ["c", "syntax-error"], "comments": [{"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1495648128, "post_id": 44165344, "comment_id": 75347050, "body": "the <code>+</code> operator doesn&#39;t work on strings like you would assume or expect."}, {"owner": {"reputation": 1855, "user_id": 5499540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XQpMe.png?s=128&g=1", "display_name": "tylerr147", "link": "https://stackoverflow.com/users/5499540/tylerr147"}, "reply_to_user": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1495648148, "post_id": 44165344, "comment_id": 75347057, "body": "I know that. &quot;It was just a guess&quot;"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1495648279, "post_id": 44165344, "comment_id": 75347129, "body": "Research string handling functions such as <code>strcat</code> although you cannot concatenate the argument to the literal <code>&quot;&#47;usr&#47;bin&#47;javac &quot;</code>. But you can initialise an array with adequate size to hold both strings (and terminator)."}], "answers": [{"comments": [{"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1495650459, "post_id": 44165399, "comment_id": 75348354, "body": "But you first better ensure that the target string is large enough to hold the new string"}], "tags": [], "owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1495648247, "creation_date": 1495648247, "answer_id": 44165399, "question_id": 44165344, "link": "https://stackoverflow.com/questions/44165344/how-to-add-two-strings/44165399#44165399", "title": "How to add two strings", "body": "<p>The <code>+</code> operator does not concat strings. You can call <code>strcat</code> to concat the two strings together.</p>\n"}, {"comments": [{"owner": {"reputation": 1855, "user_id": 5499540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XQpMe.png?s=128&g=1", "display_name": "tylerr147", "link": "https://stackoverflow.com/users/5499540/tylerr147"}, "edited": false, "score": 0, "creation_date": 1495648559, "post_id": 44165402, "comment_id": 75347284, "body": "What library do I need to to import/include?"}, {"owner": {"reputation": 527, "user_id": 7696140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cb513e8b2a5c6afb3383a722f9f7f?s=128&d=identicon&r=PG&f=1", "display_name": "Meccano", "link": "https://stackoverflow.com/users/7696140/meccano"}, "edited": false, "score": 0, "creation_date": 1495648596, "post_id": 44165402, "comment_id": 75347307, "body": "#include &lt;string.h&gt;"}, {"owner": {"reputation": 3817, "user_id": 2082884, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8c1a7c51faf6f8622ecdbb8b638d3550?s=128&d=identicon&r=PG", "display_name": "hetepeperfan", "link": "https://stackoverflow.com/users/2082884/hetepeperfan"}, "edited": false, "score": 0, "creation_date": 1495649779, "post_id": 44165402, "comment_id": 75348030, "body": "Wouldn&#39;t strncat be much safer, especially when the string is user input."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 3817, "user_id": 2082884, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8c1a7c51faf6f8622ecdbb8b638d3550?s=128&d=identicon&r=PG", "display_name": "hetepeperfan", "link": "https://stackoverflow.com/users/2082884/hetepeperfan"}, "edited": false, "score": 0, "creation_date": 1495655466, "post_id": 44165402, "comment_id": 75350776, "body": "@hetepeperfan: What is the length you pass to <code>strcnat()</code>?  Suppose you are concatenating onto a variable <code>char target[64];</code> \u2014 is it correct to write <code>strncat(target, user_provided_string, sizeof(target));</code>?  If you don&#39;t know, you should go look it up.  The answer is actually &quot;No \u2014 that&#39;s wrong, even if <code>target[0] == &#39;\\0&#39;;</code>&quot;!  And that&#39;s why <code>strncat()</code> is not safer; it has a weird interface and is far too easy to get wrong.  Don&#39;t use <code>strncat()</code>!"}, {"owner": {"reputation": 3817, "user_id": 2082884, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8c1a7c51faf6f8622ecdbb8b638d3550?s=128&d=identicon&r=PG", "display_name": "hetepeperfan", "link": "https://stackoverflow.com/users/2082884/hetepeperfan"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495658941, "post_id": 44165402, "comment_id": 75352414, "body": "@jonathanleffler Thanks for the warning! I see that <code>strncat</code> uses the size argument for the source and not for the destination. So <code>strncat</code> still happily writes beyond the allocated size of destination, thats a proper beginners pitfall!"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1495648262, "creation_date": 1495648262, "answer_id": 44165402, "question_id": 44165344, "link": "https://stackoverflow.com/questions/44165344/how-to-add-two-strings/44165402#44165402", "title": "How to add two strings", "body": "<p>You are probably used to high level languages where you can concatenate strings with the + sign.</p>\n\n<p>In C, you have to use <code>strcat</code>:</p>\n\n<pre><code>char buffer[100] = \"Hello\";\nstrcat(buffer, \" World\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 0, "last_activity_date": 1495731962, "creation_date": 1495731962, "answer_id": 44186064, "question_id": 44165344, "link": "https://stackoverflow.com/questions/44165344/how-to-add-two-strings/44186064#44186064", "title": "How to add two strings", "body": "<p>to concatenate two strings:  </p>\n\n<pre><code>char *buffer = malloc( strlen( stringOne ) + strlen( stringTwo ) + 1 );\nif( !buffer )\n{ // then malloc failed\n    perror( \"malloc failed\" );\n    exit( EXIT_FAILURE );\n}\n\n// implied else, malloc successful\n\nstrcpy( buffer, stringOne );\nstrcat( buffer, stringTwo );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5623841, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9aVMoAy3vLU/AAAAAAAAAAI/AAAAAAAAAP8/QDeSt4mw0io/photo.jpg?sz=128", "display_name": "Moshfiq Rony ID", "link": "https://stackoverflow.com/users/5623841/moshfiq-rony-id"}, "is_accepted": false, "score": 0, "last_activity_date": 1495732316, "creation_date": 1495732316, "answer_id": 44186149, "question_id": 44165344, "link": "https://stackoverflow.com/questions/44165344/how-to-add-two-strings/44186149#44186149", "title": "How to add two strings", "body": "<p>Thanks for your question.\nC is a structured language and here you cant use \".\"(Member operator) or +(Add operator) as like as c# java Cpp php or javascript.\nYou can simply use the string header file and the predefined functions to make it possible. </p>\n"}], "owner": {"reputation": 1855, "user_id": 5499540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XQpMe.png?s=128&g=1", "display_name": "tylerr147", "link": "https://stackoverflow.com/users/5499540/tylerr147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 44165402, "answer_count": 4, "score": 0, "last_activity_date": 1495732316, "creation_date": 1495648009, "last_edit_date": 1495648333, "question_id": 44165344, "link": "https://stackoverflow.com/questions/44165344/how-to-add-two-strings", "title": "How to add two strings", "body": "<p>I have a file, <code>cr.c</code>.</p>\n\n<pre><code>void main(int argCount, char **args) {\n    system(\"/usr/bin/javac \" + args[1]);\n}\n</code></pre>\n\n<p>When I try to compile, it gives me an error:</p>\n\n<p><code>cr.c: In function \u2018main\u2019:\ncr.c:6:30: error: invalid operands to binary + (have \u2018char *\u2019 and \u2018char *\u2019)\n\u00a0\u00a0\u00a0\u00a0 system(\"/usr/bin/javac \" + args[1]);\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 ^\n</code></p>\n\n<p>I have tried to fix it by replacing <code>+</code> with <code>.</code>, as I that is one way of joining strings in PHP. It was just a guess.</p>\n\n<p>I do not know why this is happening. Please explain why this is happening, and <strong>how to fix it</strong>. I would not like for somebody else to judt show me what to type instead, as I want to learn. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c", "arrays", "gcc"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1495647088, "post_id": 44165049, "comment_id": 75346520, "body": "You only care about gcc? (Or about gcc on a particular platform)? Because there is no <i>portable</i> way to do this."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495647163, "post_id": 44165049, "comment_id": 75346564, "body": "I don&#39;t think it is possible without padding.Either &quot;automatic&quot; or &quot;manual&quot;."}, {"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1495647184, "post_id": 44165049, "comment_id": 75346575, "body": "Assume <code>CACHE_LINE_SIZE</code> is already known  (I am primarily interested in gcc, but am curious in general...)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1495647597, "post_id": 44165049, "comment_id": 75346770, "body": "OK. In general, there is no guarantee that you can use an alignment declaration to force an alignment more stringent than that of the most stringently-aligned basic type. GCC allows more stringent alignments, but they will not be portable. If you want every element to be aligned, declare the element as having an alignment, not the container."}], "answers": [{"comments": [{"owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "edited": false, "score": 0, "creation_date": 1495647276, "post_id": 44165121, "comment_id": 75346622, "body": "Ok thanks.   That had occured to me as I was typing up the question, but I thought I would ask anyways in case there was something I didn&#39;t know."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 3, "last_activity_date": 1495647153, "creation_date": 1495647153, "answer_id": 44165121, "question_id": 44165049, "link": "https://stackoverflow.com/questions/44165049/cache-align-elements-of-array/44165121#44165121", "title": "cache align elements of array", "body": "<blockquote>\n  <p>Is there a way to force each element of an array to be cache-aligned without having to add padding to the end of each array element, or to the type itself?</p>\n</blockquote>\n\n<p>No, there is not.  The representation of an array is defined to be a <em>contiguous</em> series of representations of its elements.  You can align the start of the array, and hence its first element, but if the array has more than one element, and the element size is not divisible by the cache line size then some of the elements must fail to be cache-aligned.</p>\n"}], "owner": {"reputation": 1582, "user_id": 3185943, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TJBWJ.png?s=128&g=1", "display_name": "blackghost", "link": "https://stackoverflow.com/users/3185943/blackghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 44165121, "answer_count": 1, "score": 2, "last_activity_date": 1495647153, "creation_date": 1495646869, "question_id": 44165049, "link": "https://stackoverflow.com/questions/44165049/cache-align-elements-of-array", "title": "cache align elements of array", "body": "<p>Is there a way to force each element of an array to be cache-aligned without having to add padding to the end of each array element, or to the type itself?</p>\n\n<p>So if I had:</p>\n\n<pre><code>struct foo {\n    struct bar bar;\n}; \n\nstruct foo fooarray[100] __attribute__((aligned(CACHE_LINE_SIZE)));\n</code></pre>\n\n<p>This will declare an array fooarray, where the array itself is cache aligned, but the individual elements are not (so <code>fooarray[1]</code> is not on a cache line).   The structure itself is used outside of the array, and therefore I'd prefer not to automatically add padding to it.  At the same time I'd prefer not to have to do any extra casting/dereferences when I access the elements of the array...</p>\n"}, {"tags": ["c", "encoding", "cyrillic"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495646441, "post_id": 44164866, "comment_id": 75346177, "body": "There are 8-bit encodings like win1251, KOI-8, etc, having the Cyrillic charset at the codes &gt; 127. But it would really depend on the charset supported by the console."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1495646662, "post_id": 44164866, "comment_id": 75346282, "body": "To me, the obvious solution seems to be to set the encoding to UTF-8.  You should then be able to read and write Unicode text via the standard <code>char</code>-based functions, but be aware that that all non-ASCII Unicode characters will then be represented as two or more consecutive <code>char</code> objects.  If you&#39;re not careful, that can trip you up in various ways."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1495647599, "post_id": 44164866, "comment_id": 75346771, "body": "Why are the wchar_t functions &quot;not really an option&quot;?"}, {"owner": {"reputation": 157, "user_id": 5011875, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2e3d1d35875bb28ebd8b24ec2a6ab9e9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyojin", "link": "https://stackoverflow.com/users/5011875/kyojin"}, "reply_to_user": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1495648048, "post_id": 44164866, "comment_id": 75346999, "body": "So it&#39;s possible. But how do I set it to UTF8? The only way I know is using this: _setmode(_fileno(stdout), _O_U8TEXT); but that makes me use wchar_t  @Toby it&#39;s not an option because my university teacher said that must use only the functions that we used in which case are char based ones"}, {"owner": {"reputation": 157, "user_id": 5011875, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2e3d1d35875bb28ebd8b24ec2a6ab9e9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyojin", "link": "https://stackoverflow.com/users/5011875/kyojin"}, "edited": false, "score": 0, "creation_date": 1495649914, "post_id": 44164866, "comment_id": 75348099, "body": "Update: tried with <code>setlocale(LC_ALL, &quot;UTF-8&quot;);</code> and it works, but now the console output that I write with printf() is getting weird symbols. The input is ok.."}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1495650009, "post_id": 44164866, "comment_id": 75348128, "body": "Are you running this on Windows or Linux?  Which console are you using?"}, {"owner": {"reputation": 157, "user_id": 5011875, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2e3d1d35875bb28ebd8b24ec2a6ab9e9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyojin", "link": "https://stackoverflow.com/users/5011875/kyojin"}, "edited": false, "score": 0, "creation_date": 1495651073, "post_id": 44164866, "comment_id": 75348673, "body": "Windows 7, using the command prompt set with Lucida Console."}], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 5011875, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2e3d1d35875bb28ebd8b24ec2a6ab9e9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyojin", "link": "https://stackoverflow.com/users/5011875/kyojin"}, "is_accepted": true, "score": 2, "last_activity_date": 1495655987, "creation_date": 1495655987, "answer_id": 44167461, "question_id": 44164866, "link": "https://stackoverflow.com/questions/44164866/c-cyrillic-console-input-with-standard-char-data-type-instead-of-wchar-t/44167461#44167461", "title": "C Cyrillic console input with standard char data type instead of wchar_t", "body": "<p>Apparantly somehow with luck I managed to make it work using these two:</p>\n\n<p><code>\nsystem(\"chcp 1251\");\nsetlocale(LC_ALL, \"UTF8\");\n</code>\nSo this is the final solution:</p>\n\n<pre><code>int main(void) {\n\n    system(\"chcp 1251\");\n    setlocale(LC_ALL, \"UTF8\");\n\n    char str[80];\n\n    printf(\"\u0412\u044a\u0432\u0435\u0434\u0438 \u0442\u0435\u043a\u0441\u0442: \");\n    scanf(\"%s\", str);\n\n    printf(\"\u0422\u0438 \u0432\u044a\u0432\u0435\u0434\u0435: %s\", str);\n\n    getch();\n\n    return 0;\n}\n</code></pre>\n\n<p>Works like charm now</p>\n"}], "owner": {"reputation": 157, "user_id": 5011875, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2e3d1d35875bb28ebd8b24ec2a6ab9e9?s=128&d=identicon&r=PG&f=1", "display_name": "Kyojin", "link": "https://stackoverflow.com/users/5011875/kyojin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1570, "favorite_count": 0, "accepted_answer_id": 44167461, "answer_count": 1, "score": 1, "last_activity_date": 1495655987, "creation_date": 1495646198, "question_id": 44164866, "link": "https://stackoverflow.com/questions/44164866/c-cyrillic-console-input-with-standard-char-data-type-instead-of-wchar-t", "title": "C Cyrillic console input with standard char data type instead of wchar_t", "body": "<p>In my university I have a coursework to write a C project that supports cyrillic input and text on the console and writing to files. But they only allow to use char data type and printf scanf functions.</p>\n\n<p>For the past two days I've been researching how to do that, and found solutions that if you set the encoding to UTF16 and use wchar_t only then cyrillic characters are support. But that makes me use wchar_t functions wprintf, wscanf etc. Not really an option.</p>\n\n<p>Here's the code I have right now but it prints weird symbols on the console.</p>\n\n<pre><code>int main(void) {\n\nsetlocale(LC_ALL, \"bg-BG\");\n\nchar str[80];\n\nprintf(\"\u0412\u044a\u0432\u0435\u0434\u0438 \u0442\u0435\u043a\u0441\u0442: \"); //Enter text:\nscanf(\"%s\", str);\n\nprintf(\"\u0422\u0438 \u0432\u044a\u0432\u0435\u0434\u0435: %s\", str); //You entered: \n\ngetch();\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Is there something I'm missing or misunderstanding? As far as I know C/C++ ASCII table supports only english characters with range 0 - 127.</p>\n"}, {"tags": ["c", "arrays", "random"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 6, "creation_date": 1495646000, "post_id": 44164787, "comment_id": 75345922, "body": "Generate a random number in the range [0-5] and use it to pick the name..."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1495646093, "post_id": 44164787, "comment_id": 75345978, "body": "What is the difference between &quot;just one word&quot; and &quot;the full word&quot;?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1495646143, "post_id": 44164787, "comment_id": 75346003, "body": "@ScottHunter Hey, you won&#39;t ask it about &quot;one time job&quot; and &quot;full time job&quot; ? :)"}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495646152, "post_id": 44164787, "comment_id": 75346010, "body": "Going off of what @EugeneSh. said look at the accepted answer here <a href=\"https://stackoverflow.com/questions/822323/how-to-generate-a-random-number-in-c\" title=\"how to generate a random number in c\">stackoverflow.com/questions/822323/&hellip;</a>  BTW, you have 6 rows."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495646811, "post_id": 44164787, "comment_id": 75346365, "body": "Did you mean to pick three <i>different</i> names?"}, {"owner": {"reputation": 119, "user_id": 8060949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q44em.jpg?s=128&g=1", "display_name": "Mondial", "link": "https://stackoverflow.com/users/8060949/mondial"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495648959, "post_id": 44164787, "comment_id": 75347530, "body": "@WeatherVane To get the names from the array. 3 of them."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495649157, "post_id": 44164787, "comment_id": 75347650, "body": "I understand &quot;3&quot;. But suppose the names are Albert, Boris, Charlie, Dean and Edgar  (lets say 5 as originally posted, not the 6 you meant). Are you allowed to get Boris, Boris and Dean as the three (3) names? These are not three <i>different</i> names, there is some repetition. My question is: do you want three <i>different</i> names?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495666686, "post_id": 44164787, "comment_id": 75355314, "body": "If you search on Stack Overflow with the term &#39;<code>[c] random array</code>&#39;, there are many questions asking for roughly what you&#39;re looking for.  Many of them will have answers that will work for you, whether duplicate names are acceptable or not.  You can consider that you&#39;re generating an array with 3 entries that do not repeat, or you could be shuffling fairly an array of 6 entries with the values 0..5 and then using the first 3 entries in the shuffled array as the indexes of the names, or \u2026"}, {"owner": {"reputation": 119, "user_id": 8060949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q44em.jpg?s=128&g=1", "display_name": "Mondial", "link": "https://stackoverflow.com/users/8060949/mondial"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495740225, "post_id": 44164787, "comment_id": 75390427, "body": "@WeatherVane It need to be only 6 names, and 3 of them without repeating the names itself."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495666469, "post_id": 44166124, "comment_id": 75355241, "body": "This might produce the same name two or three times."}, {"owner": {"reputation": 191, "user_id": 8044954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BrKQ.jpg?s=128&g=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/8044954/vic"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495667754, "post_id": 44166124, "comment_id": 75355604, "body": "Indeed, but in the question, it is not specified not to have duplicates."}], "tags": [], "owner": {"reputation": 191, "user_id": 8044954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BrKQ.jpg?s=128&g=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/8044954/vic"}, "is_accepted": false, "score": 0, "last_activity_date": 1495650772, "creation_date": 1495650772, "answer_id": 44166124, "question_id": 44164787, "link": "https://stackoverflow.com/questions/44164787/how-to-randomly-pick-elements-from-an-array-in-c/44166124#44166124", "title": "How to randomly pick elements from an array in C?", "body": "<p>Here I wrote a simple solution for what you're trying to achieve.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define ROWS      6\n#define COL       20\n#define RND_NAMES 3\n\nint main()\n{\n    int i;\n    char name[ROWS][COL];\n\n    // init pseudo-random number generator\n    srand((unsigned)time(NULL));\n\n    puts(\"Enter with 6 names: \");\n\n    for (i=0; i &lt; ROWS; i++) {\n        scanf(\"%19[^\\n]%*c\", name[i]);\n    }\n\n    puts(\"Random names: \");\n\n    for (i=0; i &lt; RND_NAMES; i++) {\n        printf(\"%s\\n\", name[rand() % ROWS]);\n    }\n\n    return 0;   \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 8060949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q44em.jpg?s=128&g=1", "display_name": "Mondial", "link": "https://stackoverflow.com/users/8060949/mondial"}, "edited": false, "score": 0, "creation_date": 1495740395, "post_id": 44177396, "comment_id": 75390506, "body": "Thanks for the code, it worked amazing. I am new to C, and I don&#39;t know what this shuffle is doing, why there is 100 there ? Can you explain to me, please?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495740577, "post_id": 44177396, "comment_id": 75390605, "body": "The function shuffles the positions - 100 times, that might be overkill, perhaps once would be enough."}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 119, "user_id": 8060949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q44em.jpg?s=128&g=1", "display_name": "Mondial", "link": "https://stackoverflow.com/users/8060949/mondial"}, "edited": false, "score": 0, "creation_date": 1495741815, "post_id": 44177396, "comment_id": 75391251, "body": "@Mondial Sure, as Weather Vane suggested maybe shuffling 100 times is too much and shuffling only once is good enough. Imagine a card deck and a dealer, now... imagine he&#39;s shuffled once the whole deck... and you ask him to shuffle 99 more times because you&#39;re extra paranoid about cheating, here&#39;s the same :)"}], "tags": [], "owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "is_accepted": true, "score": 1, "last_activity_date": 1495705772, "creation_date": 1495705772, "answer_id": 44177396, "question_id": 44164787, "link": "https://stackoverflow.com/questions/44164787/how-to-randomly-pick-elements-from-an-array-in-c/44177396#44177396", "title": "How to randomly pick elements from an array in C?", "body": "<p>Here's a possible solution to your problem, assuming you've stored the array of names, just create an array of positions and then shuffle it few times so the positions will be random ones, finally pick 3 positions (for instance, the first 3 ones):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\n#define ROWS 6\n#define COL 20\n#define RND_NAMES 3\n\nvoid shuffle(int *array, int n, int num_shuffles) {\n    srand((unsigned)time(NULL));\n    for (int j = 0; j &lt; num_shuffles; j++) {\n        for (int i = 0; i &lt; n - 1; i++) {\n            size_t j = i + rand() / (RAND_MAX / (n - i) + 1);\n            int t = array[j];\n            array[j] = array[i];\n            array[i] = t;\n        }\n    }\n}\n\nint main() {\n    int i;\n    char name[ROWS][COL] = {\"name1\", \"name2\", \"name3\",\n                            \"name4\", \"name5\", \"name6\"};\n    int positions[ROWS] = {0, 1, 2, 3, 4, 5};\n    shuffle(positions, ROWS, 100);\n\n    printf(\"%s\\n\", name[positions[0]]);\n    printf(\"%s\\n\", name[positions[1]]);\n    printf(\"%s\\n\", name[positions[2]]);\n\n    return 0;\n}\n</code></pre>\n\n<p>With this way, you're guaranteed to pick up 3 random non-repeated names.</p>\n"}], "owner": {"reputation": 119, "user_id": 8060949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q44em.jpg?s=128&g=1", "display_name": "Mondial", "link": "https://stackoverflow.com/users/8060949/mondial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1587, "favorite_count": 0, "accepted_answer_id": 44177396, "answer_count": 2, "score": -1, "last_activity_date": 1495705772, "creation_date": 1495645926, "last_edit_date": 1495648007, "question_id": 44164787, "link": "https://stackoverflow.com/questions/44164787/how-to-randomly-pick-elements-from-an-array-in-c", "title": "How to randomly pick elements from an array in C?", "body": "<p>I have an array of 6 rows and 20 columns :</p>\n\n<pre><code>char name[6][20];\n</code></pre>\n\n<p>And I enter the <code>names</code> with <code>for</code> :</p>\n\n<pre><code>puts(\"Enter with 6 names :\");\n\nfor(i=0; i&lt; 6 ; i++)\n{\n   scanf(\"%19[^\\n]%*c\",name[i]);\n}\n</code></pre>\n\n<p>After that, I need to randomly choose three names of the array and display them in the screen. How can I do that ?</p>\n\n<p>PS : Different from the other questions similar to that, I want not to take just one word, but the full word of the array.</p>\n"}, {"tags": ["c", "arrays", "coordinates"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495647392, "post_id": 44164603, "comment_id": 75346665, "body": "Shouldn&#39;t the first <code>sizeof(int)</code> be <code>sizeof(int*)</code>? And please try to avoid being a <a href=\"http://wiki.c2.com/?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">3-star programmer</a>. Moreover (although here width = height = 30) there is no way tell from the parameter names <code>m</code> and <code>n</code> which is which."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495652255, "post_id": 44164603, "comment_id": 75349228, "body": "Welcome to StackOverflow.   Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.   An MCVE should include a variety of sample input (illustrating all aspects) and desired output.   If you are looking for help with debugging code see <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 13, "user_id": 8060723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e4a1525b12c58ee4cd7f4e5bbbbcef?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Diaz", "link": "https://stackoverflow.com/users/8060723/joe-diaz"}, "edited": false, "score": 0, "creation_date": 1495660481, "post_id": 44164603, "comment_id": 75353122, "body": "m=30, n=30 each cell&#39;s size is 10 units. I figured out x to be (index*cell size)+32 where 32 is the first x in the coordinate (32, 131) and (2*10)+32=52. 52 is the grid-x coordinate for (2,0). . Unfortunately, I have been unable to figure out the formula for y."}, {"owner": {"reputation": 13, "user_id": 8060723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e4a1525b12c58ee4cd7f4e5bbbbcef?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Diaz", "link": "https://stackoverflow.com/users/8060723/joe-diaz"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495660798, "post_id": 44164603, "comment_id": 75353271, "body": "@Weather-Vane, you&#39;re absolutely right! Thanks for pointing that out in regard to int*. I don&#39;t want to be a 3-star programmer, but I&#39;m following my professor&#39;s wishes..."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 8060723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e4a1525b12c58ee4cd7f4e5bbbbcef?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Diaz", "link": "https://stackoverflow.com/users/8060723/joe-diaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1495682609, "creation_date": 1495682609, "answer_id": 44171758, "question_id": 44164603, "link": "https://stackoverflow.com/questions/44164603/converting-on-screen-coordinates-to-array-grid-coordinates/44171758#44171758", "title": "Converting on-screen coordinates to array grid coordinates", "body": "<p>Well, after a lot of reading and exploring, I found the answer to this dilemma is taking the (coordinate-number of spaces after 0)/size of the cell. In the case of my previous formula, it's (52-32)/10=2. This formula works for both, x and y coordinates to convert them into i &amp; j indexes for a two-dimensional array.</p>\n"}], "owner": {"reputation": 13, "user_id": 8060723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e4a1525b12c58ee4cd7f4e5bbbbcef?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Diaz", "link": "https://stackoverflow.com/users/8060723/joe-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495682609, "creation_date": 1495645405, "last_edit_date": 1495645786, "question_id": 44164603, "link": "https://stackoverflow.com/questions/44164603/converting-on-screen-coordinates-to-array-grid-coordinates", "title": "Converting on-screen coordinates to array grid coordinates", "body": "<p>I'm using ANSI C and looking to convert on-screen borland graphics coordinates i.e. (35,134) to a grid coordinate of (0,0). My grid creation function is as follows:</p>\n\n<pre><code>void createGrid(int ***a, int m, int n)\n{\n    int i,j,color=0;\n\n    *a=(int**)malloc(sizeof(int)*n);    //reserves memory for n\n\n    for(i=0;i&lt;n;i++){   //external loop\n        *(*a+i)=(int*)malloc(sizeof(int)*m);    //reserves memory for m\n    if(a){\n         for(j=0;j&lt;m;j++){ //internal loop\n            *(*(*a+i)+j)=color;\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see, it is a dynamic grid and I have been unable to find the correct conversion method. All I've been able to find is a conversion method from array(0,1) to a single index. At this time, I'm working with a grid size of 30X30. My mouse follows on-screen coordinates and I need those coordinates to be converted to the grid position, so a color can be stored and read from such a position.</p>\n"}, {"tags": ["c", "string", "input"], "comments": [{"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 3, "creation_date": 1495645247, "post_id": 44164452, "comment_id": 75345495, "body": "Always compile with <code>-Wall</code> and <code>-Wextra</code>, and don&#39;t ignore the warnings."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495645416, "post_id": 44164452, "comment_id": 75345603, "body": "<code>name</code> is a string and you&#39;re using a function that should compare it to a string. But it does not: &#39;X&#39; is NOT a string."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5637429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/37c29e8f711c4ced52c78f683706e20b?s=128&d=identicon&r=PG", "display_name": "Mahmoud Hamra", "link": "https://stackoverflow.com/users/5637429/mahmoud-hamra"}, "edited": false, "score": 0, "creation_date": 1495646153, "post_id": 44164551, "comment_id": 75346011, "body": "why do we need name[1]==0 in the if condition ?!"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "reply_to_user": {"reputation": 51, "user_id": 5637429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/37c29e8f711c4ced52c78f683706e20b?s=128&d=identicon&r=PG", "display_name": "Mahmoud Hamra", "link": "https://stackoverflow.com/users/5637429/mahmoud-hamra"}, "edited": false, "score": 0, "creation_date": 1495655975, "post_id": 44164551, "comment_id": 75351009, "body": "<code>name[1] == 0</code> is necessary to check for single &quot;X&quot; letter. Otherwise if you check only <code>name[0]</code> the input can be &quot;XYZ&quot; and the program will terminate as well. With <code>name[1] == 0</code> it will stop only after &quot;X&quot; or &quot;x&quot; followed by Enter key. PS: I hope you have <code>while</code> loop around <code>printf</code> / <code>scanf</code> / <code>if</code> block, to ensure multiple calls until &quot;X&quot;."}], "tags": [], "owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "is_accepted": false, "score": 1, "last_activity_date": 1495655810, "last_edit_date": 1495655810, "creation_date": 1495645244, "answer_id": 44164551, "question_id": 44164452, "link": "https://stackoverflow.com/questions/44164452/how-can-i-terminate-my-program-with-one-character/44164551#44164551", "title": "How can I terminate my program with one character?", "body": "<p>You will close with 1 character but followed by new line (Enter):</p>\n\n<pre><code>if ( tolower( name[0] ) == 'x' &amp;&amp; name[1] == 0 )\n{\n    printf( \"BYE!\\n\" );\n    exit( 1 );\n}\n</code></pre>\n\n<p>No need from <code>while</code> loop and <code>strcmp</code> has to compare to <code>\"x\"</code> not <code>'x'</code> but it is longer than simple char comparison. PS: <code>tolower</code> will need <code>#include &lt;ctype.h&gt;</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "is_accepted": false, "score": 1, "last_activity_date": 1495645782, "last_edit_date": 1495645782, "creation_date": 1495645411, "answer_id": 44164608, "question_id": 44164452, "link": "https://stackoverflow.com/questions/44164452/how-can-i-terminate-my-program-with-one-character/44164608#44164608", "title": "How can I terminate my program with one character?", "body": "<p>Use a <code>do while</code> loop, this keeps asking for input until the user enters <code>\"x\"</code> or <code>\"X\"</code>. The <code>do while</code> loop is ideal as the while <strong>condition</strong> is at the <strong>end</strong> of the loop, meaning that the loop will always execute at <em>least</em> once per program execution. It will then continue to ask the user for input until the user inputs the mentioned strings (x or X). </p>\n\n<pre><code>do {\n    printf(\"\\nEnter the name and surname for WHR calculation (Exit - X): \");\n    scanf(\"%s %s\",name,surname);\n\n    // Do more work here...\n\n} while((strcmp(name, \"X\") != 0) &amp;&amp; (strcmp(name, \"x\") != 0));\n\n// Finish program\nprintf(\"BYE!!\\n\");\nexit(1);\n</code></pre>\n\n<p>Note that <code>strcmp()</code> requires <code>string.h</code> to be included.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5637429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/37c29e8f711c4ced52c78f683706e20b?s=128&d=identicon&r=PG", "display_name": "Mahmoud Hamra", "link": "https://stackoverflow.com/users/5637429/mahmoud-hamra"}, "edited": false, "score": 0, "creation_date": 1495647477, "post_id": 44165129, "comment_id": 75346709, "body": "the problem is that when I type in the first x and hit enter nothing happens until i type in x again and hit enter !!"}], "tags": [], "owner": {"reputation": 11, "user_id": 8060566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90378cac610f71de45f7998a80f3859d?s=128&d=identicon&r=PG&f=1", "display_name": "Tom_cook", "link": "https://stackoverflow.com/users/8060566/tom-cook"}, "is_accepted": false, "score": 1, "last_activity_date": 1495647178, "creation_date": 1495647178, "answer_id": 44165129, "question_id": 44164452, "link": "https://stackoverflow.com/questions/44164452/how-can-i-terminate-my-program-with-one-character/44165129#44165129", "title": "How can I terminate my program with one character?", "body": "<p>There are several basic mistake are here:- </p>\n\n<p>First instead of if you are using while , it is better to use if here</p>\n\n<p>second you are comparing character  'X' or 'x' with string</p>\n\n<p>I am running below code working for me</p>\n\n<pre><code>char name[100], surname[100];\nprintf(\"\\nEnter the name and surname for WHR calculation (Exit - X): \");\nscanf(\"%s %s\",name,surname);\n\nprintf(\"\\n%s surname %s \\n\", name ,surname);\nif(strcmp(name,\"X\")==0 ||strcmp(name,\"x\")==0){\n    printf(\"BYE!!\\n\");\n    exit(1);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5637429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/37c29e8f711c4ced52c78f683706e20b?s=128&d=identicon&r=PG", "display_name": "Mahmoud Hamra", "link": "https://stackoverflow.com/users/5637429/mahmoud-hamra"}, "edited": false, "score": 0, "creation_date": 1495649690, "post_id": 44165487, "comment_id": 75347977, "body": "You&#39;re a genius!!"}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1495648620, "creation_date": 1495648620, "answer_id": 44165487, "question_id": 44164452, "link": "https://stackoverflow.com/questions/44164452/how-can-i-terminate-my-program-with-one-character/44165487#44165487", "title": "How can I terminate my program with one character?", "body": "<p>This code waits for the user to enter two words, separated by spaces/newlines:</p>\n\n<pre><code>scanf(\"%s %s\",name,surname);\n</code></pre>\n\n<p>The system will not continue executing your other code until it gets from the user what it wants - two words - or an error happens (e.g. user can press <kbd>Ctrl</kbd>+<kbd>C</kbd>).</p>\n\n<p>It seems that you want to allow the user to supply \"x\" for <code>name</code> and exit immediately. So you should split your input code:</p>\n\n<pre><code>scanf(\"%s\",name);\nscanf(\"%s\",surname);\n</code></pre>\n\n<p>And cram the code that checks for <code>x</code> in-between:</p>\n\n<pre><code>scanf(\"%s\",name);\nif(strcmp(name,\"X\")==0 ||strcmp(name,\"x\")==0){\n    printf(\"BYE!!\\n\");\n    exit(1);\n}\nscanf(\"%s\",surname);\n</code></pre>\n\n<p>If you want to check both name and surname (maybe the user entered his surname as <code>x</code> in order to exit), you should either duplicate the code or stuff it into a function:</p>\n\n<pre><code>scanf(\"%s\",name);\ncheck_for_x(name);\nscanf(\"%s\",surname);\ncheck_for_x(surname);\n\n...\n\nvoid check_for_x(const char *str)\n{\n    if(strcmp(str,\"X\")==0 ||strcmp(str,\"x\")==0){\n        printf(\"BYE!!\\n\");\n        exit(1);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5637429, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/37c29e8f711c4ced52c78f683706e20b?s=128&d=identicon&r=PG", "display_name": "Mahmoud Hamra", "link": "https://stackoverflow.com/users/5637429/mahmoud-hamra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1495655810, "creation_date": 1495644929, "last_edit_date": 1495648823, "question_id": 44164452, "link": "https://stackoverflow.com/questions/44164452/how-can-i-terminate-my-program-with-one-character", "title": "How can I terminate my program with one character?", "body": "<p>I am asked to take the first and second name from a user and search for it in a file. I am also asked to terminate when the user enters the character 'x' or 'X'.</p>\n\n<pre><code>printf(\"\\nEnter the name and surname for WHR calculation (Exit - X): \");\nscanf(\"%s %s\",name,surname);\n\nwhile(strcmp(name,'X')==0 ||strcmp(name,'x')==0){\n    printf(\"BYE!!\\n\");\n    exit(1);\n}\n</code></pre>\n\n<p>It should display \"BYE\" and terminate the program but when I type in the first <code>x</code> and hit <kbd>enter</kbd> nothing happens until I type in <code>x</code> again and hit <kbd>enter</kbd>.</p>\n"}, {"tags": ["c", "file", "directory", "dirent.h"], "comments": [{"owner": {"reputation": 589, "user_id": 3942940, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/43f4f9480740f15a0107f93d710e54d4?s=128&d=identicon&r=PG&f=1", "display_name": "P.A", "link": "https://stackoverflow.com/users/3942940/p-a"}, "edited": false, "score": 0, "creation_date": 1495645166, "post_id": 44164436, "comment_id": 75345438, "body": "what&#39;s the problem that you got?"}, {"owner": {"reputation": 225, "user_id": 7182122, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/de372f08e078fcbcf70271dcd8818872?s=128&d=identicon&r=PG&f=1", "display_name": "Raz Omry", "link": "https://stackoverflow.com/users/7182122/raz-omry"}, "reply_to_user": {"reputation": 589, "user_id": 3942940, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/43f4f9480740f15a0107f93d710e54d4?s=128&d=identicon&r=PG&f=1", "display_name": "P.A", "link": "https://stackoverflow.com/users/3942940/p-a"}, "edited": false, "score": 0, "creation_date": 1495645210, "post_id": 44164436, "comment_id": 75345468, "body": "there is no function ent.is_folder() you know.. it&#39;s c. If you see I want to check if ent (which is read from the dir) is an directory (folder) or a file"}, {"owner": {"reputation": 589, "user_id": 3942940, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/43f4f9480740f15a0107f93d710e54d4?s=128&d=identicon&r=PG&f=1", "display_name": "P.A", "link": "https://stackoverflow.com/users/3942940/p-a"}, "edited": false, "score": 0, "creation_date": 1495645479, "post_id": 44164436, "comment_id": 75345641, "body": "take a look at <a href=\"https://stackoverflow.com/questions/4553012/checking-if-a-file-is-a-directory-or-just-a-file\" title=\"checking if a file is a directory or just a file\">stackoverflow.com/questions/4553012/&hellip;</a>"}, {"owner": {"reputation": 589, "user_id": 3942940, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/43f4f9480740f15a0107f93d710e54d4?s=128&d=identicon&r=PG&f=1", "display_name": "P.A", "link": "https://stackoverflow.com/users/3942940/p-a"}, "edited": false, "score": 0, "creation_date": 1495645866, "post_id": 44164436, "comment_id": 75345843, "body": "<a href=\"https://stackoverflow.com/questions/1036625/differentiate-between-a-unix-directory-and-file-in-c-and-c\" title=\"differentiate between a unix directory and file in c and c\">stackoverflow.com/questions/1036625/&hellip;</a>"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1495665019, "post_id": 44164436, "comment_id": 75354824, "body": "I&#39;m confused.  You&#39;re calling <code>opendir</code> and <code>readdir</code> to get a <code>dirent</code> (not <code>openfolder</code> and <code>readfolder</code> to get a <code>folderent</code>) and you want to know if the <code>dirent</code> is a &quot;directory&quot;, so why is the word &quot;folder&quot; even used in the question, and why do you want to implement <code>is_folder()</code> instead of <code>is_directory()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 6111040, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3u06-707SdU/AAAAAAAAAAI/AAAAAAAAGtk/FOCLaeW94dY/photo.jpg?sz=128", "display_name": "MIG-23", "link": "https://stackoverflow.com/users/6111040/mig-23"}, "is_accepted": true, "score": 6, "last_activity_date": 1495663580, "creation_date": 1495663580, "answer_id": 44169243, "question_id": 44164436, "link": "https://stackoverflow.com/questions/44164436/check-if-item-on-directory-is-folder-in-c/44169243#44169243", "title": "Check if item on directory is folder in C", "body": "<p>Readdir() returns a structure, in which you have a variable to check if your directory contains files and/or directories. Here is the structure :</p>\n\n<pre><code>struct dirent {\n    ino_t          d_ino;       /* num\u00e9ro d'in\u0153ud */\n    off_t          d_off;       /* d\u00e9calage jusqu'\u00e0 la dirent suivante \n*/\n    unsigned short d_reclen;    /* longueur de cet enregistrement */\n    unsigned char  d_type;      /* type du fichier */\n    char           d_name[256]; /* nom du fichier */\n};\n</code></pre>\n\n<p>So you will use in your code : ent->d_type to access this variable.\nThen with the flag DT_DIR you will check if it's a directory, and if it is a file with the flag DT_REG.</p>\n\n<p>The code below works :</p>\n\n<pre><code>DIR *dir;\nstruct dirent *ent;\n\nif ((dir = opendir (\"c:\\\\src\\\\\")) != NULL)\n{\n    /* print all the files and directories within directory */\n    while ((ent = readdir (dir)) != NULL) {\n        if (ent-&gt;d_type == DT_DIR)// here is what I want to implement\n            printf (\"Folder: %s\\n\", ent-&gt;d_name);\n        else if (ent-&gt;d_type == DT_REG)\n            printf(\"File %s\\n\", ent-&gt;d_name);\n    }\n    closedir (dir);\n}\nelse\n{\n/* could not open directory */\n    perror (\"\");\n        return EXIT_FAILURE;\n}\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 7182122, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/de372f08e078fcbcf70271dcd8818872?s=128&d=identicon&r=PG&f=1", "display_name": "Raz Omry", "link": "https://stackoverflow.com/users/7182122/raz-omry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3789, "favorite_count": 2, "closed_date": 1495803221, "accepted_answer_id": 44169243, "answer_count": 1, "score": 2, "last_activity_date": 1495663580, "creation_date": 1495644871, "question_id": 44164436, "link": "https://stackoverflow.com/questions/44164436/check-if-item-on-directory-is-folder-in-c", "closed_reason": "Duplicate", "title": "Check if item on directory is folder in C", "body": "<p>i'd like to check when I go over all files on directory, if one of the files/items on the directory is folder (another directory)</p>\n\n<p>code I have started from (using dirent.h):</p>\n\n<pre><code>DIR *dir;\nstruct dirent *ent;\nif ((dir = opendir (\"c:\\\\src\\\\\")) != NULL) {\n  /* print all the files and directories within directory */\n  while ((ent = readdir (dir)) != NULL) {\n    if (ent.is_folder()) // here is what I want to implement\n      printf (\"Folder: %s\\n\", ent-&gt;d_name);\n    else\n      printf(\"File %s\\n\", ent-&gt;d_name);\n  }\n  closedir (dir);\n} else {\n  /* could not open directory */\n  perror (\"\");\n  return EXIT_FAILURE;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1495644703, "post_id": 44164365, "comment_id": 75345185, "body": "Fix the indentation. It is unreadable"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1495644746, "post_id": 44164365, "comment_id": 75345208, "body": "Well, it&#39;s classic.. You can&#39;t use <code>==</code> to compare strings. Use <code>strcmp</code> and friends instead."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 7980830, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5dJ2s.jpg?s=128&g=1", "display_name": "The_dempa", "link": "https://stackoverflow.com/users/7980830/the-dempa"}, "edited": false, "score": 0, "creation_date": 1495645650, "post_id": 44164455, "comment_id": 75345735, "body": "And why are we equaling it to the 0? What does that mean?"}, {"owner": {"reputation": 588, "user_id": 2369473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFB7o.png?s=128&g=1", "display_name": "haltode", "link": "https://stackoverflow.com/users/2369473/haltode"}, "reply_to_user": {"reputation": 105, "user_id": 7980830, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5dJ2s.jpg?s=128&g=1", "display_name": "The_dempa", "link": "https://stackoverflow.com/users/7980830/the-dempa"}, "edited": false, "score": 0, "creation_date": 1495645721, "post_id": 44164455, "comment_id": 75345774, "body": "The <code>strcmp</code> function returns 0 if the two string are the same, &lt; 0 if the first character that differs has a lower value in str1 than in str2, and &gt; 0 if the character has a greater value in str1 than in str2."}], "tags": [], "owner": {"reputation": 588, "user_id": 2369473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFB7o.png?s=128&g=1", "display_name": "haltode", "link": "https://stackoverflow.com/users/2369473/haltode"}, "is_accepted": true, "score": 0, "last_activity_date": 1495644936, "creation_date": 1495644936, "answer_id": 44164455, "question_id": 44164365, "link": "https://stackoverflow.com/questions/44164365/how-to-check-if-the-user-entered-string-is-same-as-that-of-something/44164455#44164455", "title": "How to check if the User entered String is same as that of something", "body": "<p>Be careful when comparing two strings in C. You should use the <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow noreferrer\"><code>strcmp</code></a> function from the <code>string.h</code> library, like so:</p>\n\n<pre><code>if(strcmp(\"Lotus\", houseType) == 0)\n</code></pre>\n\n<p>When you write <code>if(houseType==\"Lotus\")</code> you are actually comparing the base address of the two strings and not their actual content.</p>\n"}, {"tags": [], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "is_accepted": false, "score": 0, "last_activity_date": 1495645308, "last_edit_date": 1495645308, "creation_date": 1495645001, "answer_id": 44164475, "question_id": 44164365, "link": "https://stackoverflow.com/questions/44164365/how-to-check-if-the-user-entered-string-is-same-as-that-of-something/44164475#44164475", "title": "How to check if the User entered String is same as that of something", "body": "<p>In C, strings cannot be compared using <code>==</code>. This is because strings are not a basic data type in C, that is C does not inherently understand how to compare them - you must use a function instead.</p>\n\n<p>A standard function for comparing strings in C is <code>strcmp()</code>, e.g.:</p>\n\n<pre><code>if (strcmp(houseType, \"Lotus\") == 0)\n{\n    // do some work if the strings are equal\n}\n</code></pre>\n\n<p>To explain further, your initial attempt to compare strings using <code>housetype == \"Lotus\"</code> actually compares the address where the first character of the character array <code>houseType</code> is stored with the address where the first character of the character array <code>\"Lotus\"</code> is stored.</p>\n\n<p>This happens because strings in C are just arrays of characters - they are not an inherent data type, C does not, as such, understand the difference between an array of integers and an array of characters, they are all just numbers arranged contiguously somewhere in memory and it treats them as such unless you specifically use code that operates on them as strings instead.</p>\n"}], "owner": {"reputation": 105, "user_id": 7980830, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5dJ2s.jpg?s=128&g=1", "display_name": "The_dempa", "link": "https://stackoverflow.com/users/7980830/the-dempa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 44164455, "answer_count": 2, "score": 0, "last_activity_date": 1495647353, "creation_date": 1495644654, "last_edit_date": 1495647353, "question_id": 44164365, "link": "https://stackoverflow.com/questions/44164365/how-to-check-if-the-user-entered-string-is-same-as-that-of-something", "title": "How to check if the User entered String is same as that of something", "body": "<p>I have this code sample. There is a <code>scanf</code> to hold the input <code>String</code> values from keyboard (i.e Lotus). But even if I type the word <strong>Lotus</strong> correctly It does not execute the relevant <code>if</code> statement. **Is there any problem with my <code>scanf</code> function???</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    int main()\n    {\n        char landType,houseType[100],wantToContinue,wantToContinue2;\n        float installment;\n        wantToContinue='Y';\n        while(wantToContinue == 'Y' || wantToContinue == 'y') {\n            printf(\"Land Type : \");\n            scanf(\" %c\",&amp;landType); \n            if(landType == 'A') {\n                printf(\"Type of House: \");\n                scanf(\" %s\", houseType);\n                if(houseType == \"Lotus\") { \n                   //this won't go inside if statement even if I type Lotus correctly\n                    installment=4000000-500000;\n                    printf(\"Monthly Installment : R.s %.2f\\n\",installment/120);\n                    printf(\"Do you want to Continue?(Y/y or N/n) : \");\n                    scanf(\" %c\",&amp;wantToContinue2);                  \n                    if(wantToContinue2 == 'Y' || wantToContinue2 == 'y') {\n                        wantToContinue=wantToContinue2;\n                        printf(\"\\n\");\n                    }else{\n                        wantToContinue='N';\n                    }\n                }   \n             }\n          }\n      }\n</code></pre>\n"}, {"tags": ["c", "posix"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1495644620, "post_id": 44164306, "comment_id": 75345140, "body": "You only read 9 characters from input: &quot;ow are you&quot; is next. The behaviour disappears when <code>getchar();</code> is uncommented because it reads up the next newline."}, {"owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495645369, "post_id": 44164306, "comment_id": 75345570, "body": "getchar( );  will read the next character, which is &#39;o&#39;, right ? There is still others characters in the input buffer at the end, no ?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495646681, "post_id": 44164306, "comment_id": 75346289, "body": "Sorry am on Windows console not Posix, where the <code>getchar</code> makes no difference because the input is cleared before returning to the command shell. So <code>ow are you</code> was never printed either."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1495648270, "post_id": 44164306, "comment_id": 75347120, "body": "The only correct way to NUL-terminate the string read by <code>read</code> is to use the return value of the <code>read</code>; first check that it is not negative and then <code>buf[ret] = &#39;\\0&#39;;</code>. NUL-terminating before the read (as you do) will result in garbage in the string if the <code>read</code> cannot provide the number of characters you requested."}, {"owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "edited": false, "score": 0, "creation_date": 1495648540, "post_id": 44164306, "comment_id": 75347276, "body": "Yep that&#39;s a good idea :D"}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "edited": false, "score": 0, "creation_date": 1495645704, "post_id": 44164372, "comment_id": 75345763, "body": "Okay, the streams functions (stdio.h) and read( ) are not the same at all ... because this behavior cannot happen with a stream function, right ? What is the difference between  read( )&#39;s input buffer, and let&#39;s say, fgets( )&#39;s input buffer ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "edited": false, "score": 0, "creation_date": 1495646059, "post_id": 44164372, "comment_id": 75345955, "body": "stdio has its own input buffer, which might be something like 1K or 4K. So it does something like <code>read(fileno(stdin), buffer, 1000);</code>. This is big enough to read the entire line."}, {"owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "edited": false, "score": 0, "creation_date": 1495647247, "post_id": 44164372, "comment_id": 75346605, "body": "Oh okay, so i suppose that if I enter a veryyy long string with fgets( ), longer than stdio&#39;s buffer, I will get the &quot;strange behavior shell&quot; again. Maybe there is a thing to prevent this behavior with stdio&#39;s function, but basically that&#39;s the idea"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "edited": false, "score": 0, "creation_date": 1495648098, "post_id": 44164372, "comment_id": 75347032, "body": "@gam: that&#39;s correct. You can make <code>stdin</code> unbuffered (see <code>setvbuf</code>). Or you can change the size of the buffer used for <code>stdin</code> (again, see <code>setvbuf</code>). But when the buffer is full, it&#39;s full and the library won&#39;t read ahead again until it needs to."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1495644676, "creation_date": 1495644676, "answer_id": 44164372, "question_id": 44164306, "link": "https://stackoverflow.com/questions/44164306/strange-behavior-with-read/44164372#44164372", "title": "Strange behavior with read()", "body": "<p>You typed about 20 characters, but you only read 9 characters with <code>read()</code>. Everything after that was left in the terminal driver's input buffer. So when the shell called <code>read()</code> after the program exited, it got the rest of the line, and tried to execute it as a command.</p>\n\n<p>To prevent this, you should keep reading until you get to the end of the line.</p>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 3, "last_activity_date": 1495644781, "creation_date": 1495644781, "answer_id": 44164401, "question_id": 44164306, "link": "https://stackoverflow.com/questions/44164306/strange-behavior-with-read/44164401#44164401", "title": "Strange behavior with read()", "body": "<p>Your call to <code>read</code> is reading in the first 9 characters of what you've type. Anything else will be left in the input buffer so that when you program exits, your shell will read it instead.</p>\n\n<p>You should check the return value of <code>read</code> so you know how much has been read as it's not guaranteed that it'll be the amount you ask for and also the value returned is used to indicate an error.</p>\n\n<p>The string read in won't be null-terminated either, so you also should use the return value (if positive) to put the NUL character in so that your string is valid.</p>\n\n<p>If you want to read in the whole line, you'll need to put in a loop and identify when there is an end of line character (most likely <code>'\\n'</code>).</p>\n"}], "owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 44164372, "answer_count": 2, "score": 0, "last_activity_date": 1495644788, "creation_date": 1495644503, "last_edit_date": 1495644788, "question_id": 44164306, "link": "https://stackoverflow.com/questions/44164306/strange-behavior-with-read", "title": "Strange behavior with read()", "body": "<p>I discovered the function <code>read()</code>, but I don't understand everything.\nHere is my code:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n\nint     main(void)\n{\n    char array[10];\n    int  ret;\n\n    printf(\"read : \");\n    fflush(stdout);\n\n    array[sizeof(array) - 1] = '\\0';\n    ret = read(STDIN_FILENO, array, sizeof(array) - 1);\n\n    printf(\"array = %s\\n\", array);\n    printf(\"characters read = %d\\n\", ret);\n\n    //getchar();\n\n    return (0);                 \n}\n</code></pre>\n\n<p>Here is an example of the running program :</p>\n\n<pre><code>$&gt; ./a.out\nread : hi guys how are you\narray = hi guys h\ncharacters read = 9\n$&gt; ow are you\nzsh: command not found: ow\n$&gt;\n</code></pre>\n\n<p>Why is it launching a shell command after the end of the program?\nI noticed that if I uncomment the <code>getchar()</code> line, this strange behavior disappears. I'd like to understand what is going on, if someone has an idea :)</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9846, "user_id": 1745544, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/92a0f69d86d214e0cffceb76c6e3f09f?s=128&d=identicon&r=PG", "display_name": "OldProgrammer", "link": "https://stackoverflow.com/users/1745544/oldprogrammer"}, "edited": false, "score": 5, "creation_date": 1495644059, "post_id": 44164021, "comment_id": 75344831, "body": "Now is a good time to start learning how to use a debugger.  Run each line of code, examine variable values, etc.  Also, please indent your code such that it is readable."}], "answers": [{"tags": [], "owner": {"reputation": 276, "user_id": 6524191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f45f1a420dfcb0039c6c180a1aae5013?s=128&d=identicon&r=PG&f=1", "display_name": "Graeme Cole", "link": "https://stackoverflow.com/users/6524191/graeme-cole"}, "is_accepted": true, "score": 1, "last_activity_date": 1495644371, "creation_date": 1495644371, "answer_id": 44164264, "question_id": 44164021, "link": "https://stackoverflow.com/questions/44164021/the-menu-of-a-program-appeared-twice/44164264#44164264", "title": "The menu of a program appeared twice", "body": "<p>Your firstn() function consumes the number, but not the newline on the end. This means the newline on the end of \"3\" gets consumed by the next call to first(). It doesn't recognise that as one of the options so it asks you the question again.</p>\n\n<p>Try adding:</p>\n\n<pre><code>while (getchar() != '\\n');\n</code></pre>\n\n<p>to the end of your firstn() function just before the return statement.</p>\n"}], "owner": {"reputation": 13, "user_id": 8060025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63b9d48a59a71af94693c78217c90683?s=128&d=identicon&r=PG&f=1", "display_name": "bbmewcat", "link": "https://stackoverflow.com/users/8060025/bbmewcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 44164264, "answer_count": 1, "score": 1, "last_activity_date": 1495650731, "creation_date": 1495643640, "last_edit_date": 1495650731, "question_id": 44164021, "link": "https://stackoverflow.com/questions/44164021/the-menu-of-a-program-appeared-twice", "title": "The menu of a program appeared twice", "body": "<p>I have written the following code that required the user to choose from a menu.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar start(void);\nchar first(void);\nfloat firstn(void);\nint main(void)\n{\n    int choice;\n    while((choice=start())!='q')\n    {\n        switch(choice)\n        {\n            case'a':\n                firstn();\n                printf(\"yeah\\n\");\n                break;\n            case's':\n                firstn();\n                printf(\"yeah\\n\");\n                break;\n            case'm':\n                firstn();\n                printf(\"yeah\\n\");\n                break;\n            case'd':\n                firstn();\n                printf(\"yeah\\n\");\n                break;\n        }\n    }\n    printf(\"Bye.\");\n    return 0;\n}\nchar start(void)\n{\n    int ch;\n    printf(\"Enter the operation of your choice:\\n\");\n    printf(\"a. add           s. subtract\\n\");\n    printf(\"m. multiply      d. divide\\n\");\n    printf(\"q. quit\\n\");\n    ch=first();\n    while(ch!='a' and ch!='s' and ch!='m' and ch!='d' and ch!='q' and ch!='\\n')\n    {\n        printf(\"Please respond with a, s, m, d or q.\\n\");\n        ch=first();\n    }\n    return ch;\n}\nchar first(void)\n{\n    int c;\n    c=getchar();\n    while (getchar()!='\\n')\n        continue;\n    return c;\n}\nfloat firstn(void)\n{\n    float first;\n    char ch;\n    printf(\"Enter first number:\");\n    while(scanf(\"%f\",&amp;first)!=1)\n    {\n        while((ch=getchar())!='\\n')putchar(ch);\n            printf(\" is not an number.\");\n        printf(\"Please enter a number, such as 2.5, -1.78E8, or 3:\");\n    }\n    return first;\n}\n</code></pre>\n\n<p>However, when the program is run, the menu will display two times like this:</p>\n\n<pre><code>Enter the operation of your choice:\na. add           s. subtract\nm. multiply      d. divide\nq. quit\na\nEnter first number:3\nyeah\nEnter the operation of your choice:\na. add           s. subtract\nm. multiply      d. divide\nq. quit\na\nEnter the operation of your choice:\na. add           s. subtract\nm. multiply      d. divide\nq. quit\na\nEnter first number:3\nyeah\nEnter the operation of your choice:\na. add           s. subtract\nm. multiply      d. divide\nq. quit\n</code></pre>\n\n<p>As shown above, the program works correctly in the first loop. It receives the character from the user, then ask for a number. However, in the second loop, the program has gone wrong. The menu has appeared, but no matter what the user entered, the menu will not receive the character and the menu appeared again. Only after the menu appeared two times, the menu receive the character. How can I solve this problem?</p>\n"}, {"tags": ["c", "arrays", "random"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1495643782, "post_id": 44163973, "comment_id": 75344648, "body": "Explain... what?"}, {"owner": {"reputation": 1, "user_id": 7979444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a50097a16002f517f4b54235f9dd7a4?s=128&d=identicon&r=PG&f=1", "display_name": "marten marteny", "link": "https://stackoverflow.com/users/7979444/marten-marteny"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495643836, "post_id": 44163973, "comment_id": 75344684, "body": "how to put the generated number in array"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495643887, "post_id": 44163973, "comment_id": 75344720, "body": "Asides: 1): you should call <code>srand</code> <i>before</i> the first use of <code>rand</code>. 2) having <code>#define max 1000</code> you should use it instead of <code>if(i==1000)</code>."}, {"owner": {"reputation": 1, "user_id": 7979444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a50097a16002f517f4b54235f9dd7a4?s=128&d=identicon&r=PG&f=1", "display_name": "marten marteny", "link": "https://stackoverflow.com/users/7979444/marten-marteny"}, "edited": false, "score": 0, "creation_date": 1495643977, "post_id": 44163973, "comment_id": 75344782, "body": "i&#39;ll try that ."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495644126, "post_id": 44163973, "comment_id": 75344868, "body": "Your second <code>while</code> loop will break because you didn&#39;t reset <code>i = 0;</code> before it. This is a reason to use a test such as <code>if(i &gt;= max)</code> instead of <code>if(i == max)</code> - to stop runaway code."}, {"owner": {"reputation": 1, "user_id": 7979444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a50097a16002f517f4b54235f9dd7a4?s=128&d=identicon&r=PG&f=1", "display_name": "marten marteny", "link": "https://stackoverflow.com/users/7979444/marten-marteny"}, "edited": false, "score": 0, "creation_date": 1495644306, "post_id": 44163973, "comment_id": 75344965, "body": "when i change the code as you mention it gives 0 for the second loop"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1495644438, "post_id": 44163973, "comment_id": 75345033, "body": "your array <code>gr1num1</code> doesn&#39;t need to be 2 dimensional and your second index only goes up to 0 (it only has a size of 1) so doing <code>gr1num1[i][1]</code> will have undefined behaviour."}, {"owner": {"reputation": 1, "user_id": 7979444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a50097a16002f517f4b54235f9dd7a4?s=128&d=identicon&r=PG&f=1", "display_name": "marten marteny", "link": "https://stackoverflow.com/users/7979444/marten-marteny"}, "edited": false, "score": 0, "creation_date": 1495644581, "post_id": 44163973, "comment_id": 75345113, "body": "i did this because i wanted to choose randomly number of 1000 group like if i make it from one dimensional i&#39;ll have the same number always"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495644799, "post_id": 44163973, "comment_id": 75345237, "body": "That&#39;s like a 100-word run-on sentence. Please try to write your questions well enough that people can read them without having to strain their eyes and brain to understand where the punctuation should be. Even then, I&#39;m not sure it&#39;s evident what you&#39;re asking."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495648182, "post_id": 44163973, "comment_id": 75347070, "body": "Also, you tagged this as <code>c</code>, but this line begs to differ: <code>#include&lt;ctime&gt;</code>. That&#39;s a C++ header. Which is it?"}], "answers": [{"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1495644271, "creation_date": 1495644271, "answer_id": 44164230, "question_id": 44163973, "link": "https://stackoverflow.com/questions/44163973/new-way-to-generet-random-numbers-but/44164230#44164230", "title": "New way to generet random numbers but", "body": "<p>First off you should go back and re-read your book on C for how to do loops as whilst syntactically correct, the way you're using those <code>while</code> loops isn't right.</p>\n\n<p>This is how your first <code>while</code> loop should look. The increment of <code>i</code> happens at the end of the loop since the index of arrays starts at 0.</p>\n\n<pre><code>i=0;\nwhile(i&lt;max)\n{\n    gr2num5[i][4]= rand() % 10+1 ;\n    i++;\n}\n</code></pre>\n\n<p>But really it would be better done as a <code>for</code> loop like this as it wraps up the initialisation, conditional and incrementation all in one neat package. The first part - the initialisation - is important as for your second <code>while</code> loop, your value of <code>i</code> is still 1000 as you don't reset it to 0.</p>\n\n<pre><code>for(i=0;i&lt;max;i++)\n{\n    gr2num5[i][4]= rand() % 10+1 ;\n}\n</code></pre>\n\n<p>But you're after 5 values, so you need to nest two loops within each other to populate the <code>gr2num5</code> array like this.</p>\n\n<pre><code>for(i=0;i&lt;max;i++)\n{\n    for(j=0;j&lt;5;j++)\n    {\n        gr2num5[i][j]=rand() % 10+1 ;\n    }\n}\n</code></pre>\n\n<p>(NB: you'll define <code>j</code> at the top along side <code>i</code>)</p>\n"}], "owner": {"reputation": 1, "user_id": 7979444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a50097a16002f517f4b54235f9dd7a4?s=128&d=identicon&r=PG&f=1", "display_name": "marten marteny", "link": "https://stackoverflow.com/users/7979444/marten-marteny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1495644271, "creation_date": 1495643519, "last_edit_date": 1495644116, "question_id": 44163973, "link": "https://stackoverflow.com/questions/44163973/new-way-to-generet-random-numbers-but", "title": "New way to generet random numbers but", "body": "<p>I am trying to find 6 number one is from 10-100 and the other five numbers are between 1-10\n the articles that I read  about generating new numbers was somehow complex for me to apply so I made a new simple way by obtaining a series of repetitions of these numbers  and put them in two-dimensional array after that I used rand() as index to the first array parameter so I could find the random numbers   but I have a problem ..I want to put the generated numbers  in array because I want to use them later.</p>\n\n<p>I'll be thankful if you explain in a simple way  </p>\n\n<pre><code>include&lt;sys/time.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;time.h&gt; \n#include&lt;ctime&gt;\n#define max 1000\n\nint main()\n{    \n    int o, gr1num1[max][1] ,n=6,q[max] ,i = 0, gr2num5[max][5];\n\n    while(1)\n    {       \n        i++;\n        gr2num5[i][4] = rand() % 10+1 ;\n        if(i == 1000)\n            break;\n    }\n\n    if (gr2num5 [i][4]!=0) \n        srand(time(NULL));\n\n    printf(\"\\ngroup 2 numbers %d  \",gr2num5 [rand()%500][4]);\n    printf(\"\\ngroup 2 numbers %d  \",gr2num5 [rand()%500][4]);\n    printf(\"\\ngroup 2 numbers %d  \",gr2num5 [rand()%500][4]);\n    printf(\"\\ngroup 2 numbers %d  \",gr2num5 [rand()%500][4]);\n    printf(\"\\ngroup 2 numbers %d  \",gr2num5 [rand()%500][4]);\n\n    printf(\"   \\n\\n\\n /// %d /// \",o);\n\n    while(1)\n    {       \n        i++;\n        gr1num1[i][1] = rand() % 100+10;\n        if(i == 1000)\n            break;\n    }\n\n    printf(\"group 1 number %d\",gr1num1 [rand()%500][1]);\n}\n</code></pre>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1495643574, "post_id": 44163939, "comment_id": 75344523, "body": "C99 supports Variable Length Arrays which makes this work."}, {"owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "edited": false, "score": 0, "creation_date": 1495643590, "post_id": 44163939, "comment_id": 75344531, "body": "That&#39;s C99. Variable-length arrays are illegal in C89, which despite it being 18 years since C99 is still in widespread use."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1495643632, "post_id": 44163939, "comment_id": 75344560, "body": "@SamiKuhmonen: VLAs are part of the standard. They are not only supported in C99, but any modern C11 compiler, too."}, {"owner": {"reputation": 641, "user_id": 2711654, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cntf6.jpg?s=128&g=1", "display_name": "Spidey", "link": "https://stackoverflow.com/users/2711654/spidey"}, "edited": false, "score": 1, "creation_date": 1495643674, "post_id": 44163939, "comment_id": 75344590, "body": "Lookup malloc, realloc, free."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495643685, "post_id": 44163939, "comment_id": 75344601, "body": "@Olaf Should&#39;ve phrased &quot;added support&quot;"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495643854, "post_id": 44163939, "comment_id": 75344697, "body": "@Olaf Nitpick: as of C11, VLAs are &quot;optional&quot;. I think C99 was the only standard that specified VLAs as being mandatory."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1495644013, "post_id": 44163939, "comment_id": 75344802, "body": "FWIW:  Even if you had said, <code>char array[100];</code> the memory still would not have been <i>allocated</i> at compile time.  That is because <code>array</code> is a local variable.  Even if the <i>size</i> of the allocation is known at compile time, the actual <i>allocation</i> of a local variable does not happen until the function (e.g., <code>main()</code> in this case) is called."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1495644227, "post_id": 44163939, "comment_id": 75344918, "body": "Yep, confirmed (optional): <code>ISO&#47;IEC 9899:201x: 6.7.6.2 Array declarators</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1495657581, "post_id": 44163939, "comment_id": 75351808, "body": "@DevNull: C99 is not C standard (read the foreword of the standard document)! And I wrote clearly &quot;modern C11 compiler&quot;. The reason to make VLAs optional - <b>despite the established practice to keep compatibility up to being idiculous (e.g. not bainning K&amp;R style function declarations)</b> were C90 compiler vendors to sell their C90 rubbish as &quot;standard C compiler&quot;. And guess which company has a major C compiler which never has been able to support C99 since 18 years \u2026"}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495658314, "post_id": 44163939, "comment_id": 75352142, "body": "@Olaf Hmmm, some kind of a software company, that&#39;s... Micro? lol. But on the note of C99, is it &quot;not C standard&quot; as in, &quot;it&#39;s a language specification, not a standard&quot;? I don&#39;t quite follow.  <code>C11 (formerly C1X) is an informal name for ISO&#47;IEC 9899:2011,[1] the current standard for the C programming language. It replaces the previous C standard, informally known as C99.</code>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1495671303, "post_id": 44163939, "comment_id": 75356492, "body": "@DevNull: As you informally state: C99 (resp. the second release of ISO9899) has been canceled with the release of the third release (aka C11). So it is not standard C (since ca. 6 years already)."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495677220, "post_id": 44163939, "comment_id": 75357935, "body": "@olaf oh, so you mean it is not <b>the</b> current standard. That is correct. I misunderstood as you noted that it was not <b>a</b> standard. Thanks for clearing this up."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1495720356, "post_id": 44163939, "comment_id": 75378516, "body": "@DevNull: As there is only one C standard, my statement should have been clear. Of course I did not comment from a historic position."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495728190, "post_id": 44163939, "comment_id": 75383827, "body": "@Olaf From a purely linguistic viewpoint, it was not clear. <code>C99 is not C standard</code>: isn&#39;t even proper English from a grammatical standpoint, unless it was <code>C99 is not C &quot;standard&quot;</code> (like saying <code>scotch &quot;neat&quot;</code>, as a post-subject qualifier). What would have made sense in this case would be <code>C99 is not the current C standard</code>. If it was a standard at one point, and is now superseded by another, it is still indeed a standard, albeit an outdated/deprecated one: further adding to the confusion. With quirks/confusion in the precise use of language, I&#39;ll leave it at <code>the Devil&#39;s in the details</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "edited": false, "score": 0, "creation_date": 1495728322, "post_id": 44163939, "comment_id": 75383897, "body": "@DevNull: I did not mean &quot;standard&quot;, but standard. The only thing I missed was the word <code>the</code> before &gt;standard&lt;. Using present tense should be enough; it does not imply it never has been. Reading things from a text not explicitly stated is not really a good idea. &quot;it is still indeed a standard&quot; is plain wrong. It <b>was</b> a standard, but it clearly has been canceled, so it <b>is</b> not standard (anymore). I don&#39;t see how that could be wrong."}, {"owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495728522, "post_id": 44163939, "comment_id": 75384011, "body": "@Olaf I agree, the missing <code>the</code> is what threw me off. FWIW, your technical contributions are accurate and helpful. Cheers!"}], "answers": [{"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1495643660, "creation_date": 1495643660, "answer_id": 44164033, "question_id": 44163939, "link": "https://stackoverflow.com/questions/44163939/defining-array-size-at-runtime/44164033#44164033", "title": "Defining array size at runtime", "body": "<p>This is valid code that makes use of Variable-Length Array feature of C99.</p>\n\n<p>As long as <code>r</code> is properly set by <code>scanf</code>, it is legal to use it in allocation of <code>char array[r]</code>.</p>\n\n<p>There are several issues that need to be addressed, though:</p>\n\n<ul>\n<li>If <code>scanf</code> returns zero, <code>r</code> remains uninitialized. Using it for specify array size in a declaration would be illegal.</li>\n<li>If <code>scanf</code> read a negative number, using it as array size would be illegal.</li>\n<li>If <code>scanf</code> read a number that is too large for your system's automatic memory space, you would run into undefined behavior.</li>\n</ul>\n\n<p>The last point is very important: your system may have enough memory for the array, but not enough space in the automatic memory (often called \"stack\") to allocate your array. This can result in a crash.</p>\n\n<p>A better approach is to allocate your array dynamically with <code>malloc</code>, and <code>free</code> it once you are done with it.</p>\n"}], "owner": {"reputation": 49, "user_id": 7281508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345476393361649588098dfd1de36bde?s=128&d=identicon&r=PG&f=1", "display_name": "ankit", "link": "https://stackoverflow.com/users/7281508/ankit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1495653539, "accepted_answer_id": 44164033, "answer_count": 1, "score": 1, "last_activity_date": 1495653470, "creation_date": 1495643374, "last_edit_date": 1495653470, "question_id": 44163939, "link": "https://stackoverflow.com/questions/44163939/defining-array-size-at-runtime", "closed_reason": "Duplicate", "title": "Defining array size at runtime", "body": "<p>I'd read that size specifier is mandatory while declaring an array if it is not explicitly initialized,\nbut the piece of code given  compiles and runs successfully?</p>\n\n<pre><code>main()\n{\n   int r;\n   scanf(\"%d\",&amp;r);\n  char array[r];      //memory is not allocated at compile as value of variable is not known\n  scanf(\"%s\",array);\n  printf(array);\n\n\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "cmake", "undefined-reference"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1495644099, "post_id": 44163794, "comment_id": 75344861, "body": "it looks ok on the face of it, except you don&#39;t need the <code>link_directories()</code> line - cmake knows where to find the library target. did you <code>extern &quot;C&quot;</code> the definitions of c functions?"}, {"owner": {"reputation": 1167, "user_id": 932786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49bf3465e918ef75eb511f089b833bb1?s=128&d=identicon&r=PG", "display_name": "Salahuddin", "link": "https://stackoverflow.com/users/932786/salahuddin"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1495650002, "post_id": 44163794, "comment_id": 75348126, "body": "Thanks @RichardHodges. <code>extern &quot;C&quot;</code> was missing. Now everything is working fine. Could you add this as an answer?"}], "owner": {"reputation": 1167, "user_id": 932786, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/49bf3465e918ef75eb511f089b833bb1?s=128&d=identicon&r=PG", "display_name": "Salahuddin", "link": "https://stackoverflow.com/users/932786/salahuddin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1495644632, "answer_count": 0, "score": 0, "last_activity_date": 1495643472, "creation_date": 1495642969, "last_edit_date": 1495643472, "question_id": 44163794, "link": "https://stackoverflow.com/questions/44163794/cmake-undefined-reference-to-function", "closed_reason": "Duplicate", "title": "Cmake - Undefined reference to function", "body": "<p>I'm trying to build my application. It's organized as following:</p>\n\n<pre><code>-ClipsCore\n  |-agenda.c\n  |-agenda.h\n  |-envrnmnt.c\n  |-engrnmnt.h\n  |-clips.h  \n  |-....\n-src\n  |-clipsDemo.cpp\n-build\n-CMakeLists.txt\n</code></pre>\n\n<p>Here is my CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required (VERSION 2.8)\nproject (clipsDemo)\nset(MY_CPP_FILES  src/clipsDemo.cpp)\nfile(GLOB CLIPS_SRC ${CMAKE_CURRENT_SOURCE_DIR}/ClipsCore/*.c)\ninclude_directories(${CMAKE_CURRENT_SOURCE_DIR}/ClipsCore)\nlink_directories(${CMAKE_CURRENT_SOURCE_DIR}/ClipsCore)\nadd_library(clipslib ${CLIPS_SRC})\nadd_executable(${PROJECT_NAME} ${MY_CPP_FILES})\ntarget_link_libraries(${PROJECT_NAME} clipslib)\n</code></pre>\n\n<p>When I build, I got errors like the following:</p>\n\n<pre><code>undefined reference to `CreateEnvironment()'\n</code></pre>\n\n<p>Although this function found in <strong>envrnmnt.c</strong> file which should be linked to the executable as far as I understand. I tried to build the ClipsCore library using <code>add_library</code> then tried to link it to the executable using <code>target_link_libraries</code>.\nWhat is wrong with my CMakeLists.txt?</p>\n"}, {"tags": ["c", "gcc", "assembly", "gnu-assembler", "powerpc"], "comments": [{"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495657826, "post_id": 44163406, "comment_id": 75351921, "body": "what assembler is this? gnu assembler?  (the program which then defines the language)"}, {"owner": {"reputation": 17, "user_id": 4081092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ee03f5332344af20705021869dbe384?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4081092/tyler"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495721506, "post_id": 44163406, "comment_id": 75379331, "body": "Yes, it&#39;s gnu. This part I believe I need to do in assembly. I&#39;m making code that will patch the system reset interrupt vector and I will have lost all of my register values including the TOC pointer when at this vector."}, {"owner": {"reputation": 17, "user_id": 4081092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ee03f5332344af20705021869dbe384?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4081092/tyler"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495729638, "post_id": 44163406, "comment_id": 75384614, "body": "Ah, well I guess I&#39;m doing assembly but it&#39;s running through the preprocessor first. It&#39;s defined as a <b>.S</b> file which I believe gcc treats as &quot;Assembler code which must be preprocessed.&quot; Thus using the #define works fine. I believe the error is specifically related to the reference to <code>- __head</code> seeing as <code>LOAD_32(%r3, file2_symbol_name)</code> compiles fine in file2, as does <code>LOAD_32(%r3, file1_symbol_name - __head)</code> in file1.  That said, it is assembly... so I don&#39;t think the #include could help me with the external reference here if you&#39;re suggesting including a c-function descriptor."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495735201, "post_id": 44163406, "comment_id": 75387652, "body": "either I dont understand the question or I solved it and tested it on two different backends in roughly 3-5 minutes, wasnt timing it...both an assembly solution and a C syntax solution."}, {"owner": {"reputation": 17, "user_id": 4081092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ee03f5332344af20705021869dbe384?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4081092/tyler"}, "reply_to_user": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495830824, "post_id": 44163406, "comment_id": 75431970, "body": "@old_timer It would be great if you did indeed solve it. I have edited my post above to include simplified code of the problem which I have verified produces the same error condition. Further if I comment out line 9 of other.S the project compiles fine despite line 8 of other.S and line 10 of head.S. I am looking for a way to reference <code>__head</code> from other.S in such a situation. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4081092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ee03f5332344af20705021869dbe384?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4081092/tyler"}, "edited": false, "score": 0, "creation_date": 1499179785, "post_id": 44421030, "comment_id": 76794449, "body": "Thanks a lot! I had thought that it would try going through a linking stage before complaining about an issue like this, but I guess that isn&#39;t the case"}], "tags": [], "owner": {"reputation": 46, "user_id": 7376072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9abcb67bceacae469e97aeab7eaaf4b9?s=128&d=identicon&r=PG", "display_name": "David Edelsohn", "link": "https://stackoverflow.com/users/7376072/david-edelsohn"}, "is_accepted": true, "score": 1, "last_activity_date": 1496862838, "creation_date": 1496862838, "answer_id": 44421030, "question_id": 44163406, "link": "https://stackoverflow.com/questions/44163406/referencing-symbols-in-other-files-using-ppc-assembly/44421030#44421030", "title": "Referencing symbols in other files using PPC assembly", "body": "<p>The assembler cannot know the placement / relative position of head.S and other.S at assembly time to be able to compute the relative displacement of the file2_symbol_name and __head labels.  This is a general assembly language question, not PPC specific.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 4081092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ee03f5332344af20705021869dbe384?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4081092/tyler"}, "edited": false, "score": 0, "creation_date": 1499179646, "post_id": 44444657, "comment_id": 76794366, "body": "Thanks so much for your addition! So even though I used <code>.section &quot;.head&quot;</code> in both files they aren&#39;t considered as part of the same &quot;section&quot; until linking?"}], "tags": [], "owner": {"reputation": 56, "user_id": 5286207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1659922ed26ce80c38aa6a34b8685de?s=128&d=identicon&r=PG&f=1", "display_name": "William Schmidt", "link": "https://stackoverflow.com/users/5286207/william-schmidt"}, "is_accepted": false, "score": 1, "last_activity_date": 1496952367, "creation_date": 1496952367, "answer_id": 44444657, "question_id": 44163406, "link": "https://stackoverflow.com/questions/44163406/referencing-symbols-in-other-files-using-ppc-assembly/44444657#44444657", "title": "Referencing symbols in other files using PPC assembly", "body": "<p>Regarding David's response, see <a href=\"https://sourceware.org/binutils/docs/as/Infix-Ops.html#Infix-Ops\" rel=\"nofollow noreferrer\">https://sourceware.org/binutils/docs/as/Infix-Ops.html#Infix-Ops</a>, where it specifies:  \"Subtraction. If the right argument is absolute, the result has the section of the left argument. If both arguments are in the same section, the result is absolute. You may not subtract arguments from different sections.\"  The error message indicates that the assembler has no idea which section contains __head, which indeed it cannot, since the symbol and its section are not defined in filescope.</p>\n\n<p>You might be able to get what you want by using the .weak and/or .weakref directives so that the symbol can be defined in two files, with the strong reference overriding the weak one at link time.  I haven't experimented with this.  See the manual (<a href=\"https://sourceware.org/binutils/docs/as/\" rel=\"nofollow noreferrer\">https://sourceware.org/binutils/docs/as/</a>) and hunt for .weak.</p>\n\n<p>Some background information on weak symbols is here:  <a href=\"https://en.wikipedia.org/wiki/Weak_symbol\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Weak_symbol</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 4081092, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2ee03f5332344af20705021869dbe384?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/4081092/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 1, "accepted_answer_id": 44421030, "answer_count": 2, "score": 0, "last_activity_date": 1496952367, "creation_date": 1495641731, "last_edit_date": 1495830675, "question_id": 44163406, "link": "https://stackoverflow.com/questions/44163406/referencing-symbols-in-other-files-using-ppc-assembly", "title": "Referencing symbols in other files using PPC assembly", "body": "<p>How can you reference a symbol external to the current file in ppc assembly? I've tried looking at the .extern keyword as well as adding a new symbol in the linker file but with no success.</p>\n\n<p>I have two ppc assembly files that are part of a larger project. I wish to reference a symbol (__head) in file1 from file2 in this way:</p>\n\n<p>file1.S:</p>\n\n<pre><code>    .section \".head\",\"ax\"\n\n    . = 0\n.global __head\n__head:\n</code></pre>\n\n<p>file2.S:</p>\n\n<pre><code>    .section \".head\",\"ax\"\n...\n    LOAD_32(%r3, file2_symbol_name - __head)\n</code></pre>\n\n<p>where LOAD_32 is</p>\n\n<pre><code>#define LOAD_32(r, e)           \\\n    lis     r,(e)@h;            \\\n    ori     r,r,(e)@l;      \n</code></pre>\n\n<p>...but am getting the following error:</p>\n\n<pre><code>file2.S: Assembler messages:\nfile2.S:113: Error: can't resolve `file2_symbol_name' {.head section} - `__head' {*UND* section}\nfile2.S:113: Error: expression too complex\n</code></pre>\n\n<p>When used in file1 <code>LOAD_32(%r3, file1_symbol_name - __head)</code> works just fine so I know I'm not importing the symbol name correctly.  How can I do this?</p>\n\n<p>EDIT:</p>\n\n<p>I have reduced my problem to the bare minimum parts so that I am clear about the problem. Below is all of the code, linker file, Makefile, and the terminal output for \"make quick\".</p>\n\n<p><strong>NB:</strong> When I comment out line 9 of other.S the project compiles without error.</p>\n\n<p>head.S:</p>\n\n<pre><code>#include \"asm-defines.h\"\n\n    .section \".head\",\"ax\"\n    .align 0x10\n\n    . = 0x0\n\n.global __head\n__head:\n    LOAD_32(%r3, file1_symbol_name - __head)\n    b   .\n\nfile1_symbol_name:\n    b   .\n</code></pre>\n\n<p>other.S</p>\n\n<pre><code>#include \"asm-defines.h\"\n\n    .section \".head\",\"ax\"\n    .align 0x10\n\n.global other\nother:\n    LOAD_32(%r3, file2_symbol_name)\n    LOAD_32(%r3, file2_symbol_name - __head)\n    b   .\n\nfile2_symbol_name:\n    b   .\n</code></pre>\n\n<p>asm-defines.h:</p>\n\n<pre><code>#ifndef ASM_DEFINES_H\n#define ASM_DEFINES_H\n\n/* Load an immediate 32-bit value into a register */\n#define LOAD_32(r, e)           \\\n    lis     r,(e)@h;            \\\n    ori     r,r,(e)@l;      \n\n#endif //ASM_DEFINES_H\n</code></pre>\n\n<p>quick.lds</p>\n\n<pre><code>ENTRY(__head);\n</code></pre>\n\n<p>Makefile</p>\n\n<pre><code>CC=$(CROSS)gcc\nQFLAGS := -Wl,--oformat,elf64-powerpc -pie -m64 -mbig-endian -nostdlib\n\nquick:\n    $(CC) $(QFLAGS) -T quick.lds head.S other.S -o quick.o\n</code></pre>\n\n<p>$(CROSS) is a path to the cross compiler which I have omitted.\nThe CC is powerpc64le-buildroot-linux-gnu-gcc</p>\n\n<p>Terminal</p>\n\n<pre><code>$ make quick\npowerpc64le-buildroot-linux-gnu-gcc -Wl,--oformat,elf64-powerpc -pie -m64 -mbig-endian -nostdlib -T quick.lds head.S other.S -o quick.o\nother.S: Assembler messages:\nother.S:9: Error: can't resolve `.head' {.head section} - `__head' {*UND* section}\nother.S:9: Error: expression too complex\nother.S:9: Error: can't resolve `.head' {.head section} - `__head' {*UND* section}\nother.S:9: Error: expression too complex\nmake: *** [quick] Error 1\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1495641081, "post_id": 44163156, "comment_id": 75342962, "body": "Even human won&#39;t be able to &quot;differentiate&quot; that. Because there is no difference. Is &quot;dead&quot; a hex string or a word?"}, {"owner": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "edited": false, "score": 2, "creation_date": 1495641091, "post_id": 44163156, "comment_id": 75342968, "body": "Seriously? How do you expect to tell the different between <code>f</code> and <code>f</code>? Can you tell me which of those is the hex, and which is the letter? (hint: you will get it wrong)"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1495684147, "post_id": 44163156, "comment_id": 75359324, "body": "Hmmm, maybe it is &quot;afe8&quot; is the hex value breaking &quot;MaterilStandardName&quot;`?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495643099, "post_id": 44163418, "comment_id": 75344237, "body": "Good catch on the chunked encoding thing."}, {"owner": {"reputation": 1, "user_id": 8060489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40910f57a4b4cf04301aec5a4cb91bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Purvang Shah", "link": "https://stackoverflow.com/users/8060489/purvang-shah"}, "edited": false, "score": 0, "creation_date": 1495728432, "post_id": 44163418, "comment_id": 75383968, "body": "Yes, the encoding is &quot;Chunked&quot; so the hex value introduced is defining the further expected size of characters or chunk. Got the idea, Thanks for the help."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 4, "last_activity_date": 1495641774, "creation_date": 1495641774, "answer_id": 44163418, "question_id": 44163156, "link": "https://stackoverflow.com/questions/44163156/differentiate-hex-value-among-string-char-array-in-c/44163418#44163418", "title": "Differentiate Hex value among string (char array) in C", "body": "<p>This seems to be a classic <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">xy-problem</a>. The problem is there is \"garbage\" in your content. But your attempted solution is futile. As you show the content, it is just broken XML.</p>\n\n<p>Nevertheless, I have a strong guess about the actual problem: You receive this data from a http server and this server sends it using <a href=\"https://en.wikipedia.org/wiki/Chunked_transfer_encoding\" rel=\"nofollow noreferrer\">Transfer-Encoding: chunked</a>. The <code>fe8</code> is inserted as the size of the next chunk sent over the wire.</p>\n\n<p>So instead of trying to somehow fix your garbled content, look at where you receive it and fix the transport layer to handle the server response correctly and only return actual payload.</p>\n"}], "owner": {"reputation": 1, "user_id": 8060489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40910f57a4b4cf04301aec5a4cb91bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Purvang Shah", "link": "https://stackoverflow.com/users/8060489/purvang-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495641774, "creation_date": 1495640981, "last_edit_date": 1495641505, "question_id": 44163156, "link": "https://stackoverflow.com/questions/44163156/differentiate-hex-value-among-string-char-array-in-c", "title": "Differentiate Hex value among string (char array) in C", "body": "<p>I am parsing an XML in C, and the server that returns me the response XML is introducing some hexadecimal values (in alphanumeric format) in between the actual XML. Since I parsing this in C, as char array, I am not able to differentiate between actual string of XML and the hex value, being (0-9, a-e and A-E). So is there any way I can identify these hex value?</p>\n\n<p>Note - <code>isxdigit()</code> didn't help, as it compares the character with actual characters of 0-9 a-e and A-E.</p>\n\n<p>Example of String - <code>&lt;a:Manufacturer&gt;Apple&lt;/a:Manufacturer&gt;&lt;a:Materiafe8lStandardName i:nil=\"true\"/&gt;&lt;a:Model&gt;iPhone 7 Plus 256GB Silver - ATT&lt;/a:Model&gt;</code></p>\n\n<p>\"fe8\" is the hex value breaking \"MaterialStandardName\"</p>\n"}, {"tags": ["c", "regex", "ide", "codeblocks"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1495640027, "post_id": 44162759, "comment_id": 75342160, "body": "Sounds like your library headers don&#39;t correspond to the standard library you&#39;re using. More details are needed about how you configured your toolchain (i.e., the IDE, the compiler(s), the standard library, etc.)"}, {"owner": {"reputation": 251, "user_id": 4333518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0260d4eaa7d7861a65cc551dd214b78f?s=128&d=identicon&r=PG&f=1", "display_name": "WakaChewbacca", "link": "https://stackoverflow.com/users/4333518/wakachewbacca"}, "edited": false, "score": 0, "creation_date": 1495640131, "post_id": 44162759, "comment_id": 75342242, "body": "Can you compile with flags &quot;-Wall -Werror&quot; and see what shows up?"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495640161, "post_id": 44162759, "comment_id": 75342265, "body": "My ide is codeblocks"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495640178, "post_id": 44162759, "comment_id": 75342281, "body": "The compiler is MingW"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495640353, "post_id": 44162759, "comment_id": 75342423, "body": "How do I make my library headers correspond to the standard library?"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495640630, "post_id": 44162759, "comment_id": 75342623, "body": "The same error shows"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 1, "creation_date": 1495640794, "post_id": 44162759, "comment_id": 75342742, "body": "MinGW uses Microsoft&#39;s C-Runtime (msvcrt.dll) as the C standard library. msvcrt doesn&#39;t include regular expressions, so you will have to link an additional library for that. See for example <a href=\"https://stackoverflow.com/questions/3781211/c-regex-library-with-mingw\">this question</a>"}, {"owner": {"reputation": 251, "user_id": 4333518, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0260d4eaa7d7861a65cc551dd214b78f?s=128&d=identicon&r=PG&f=1", "display_name": "WakaChewbacca", "link": "https://stackoverflow.com/users/4333518/wakachewbacca"}, "edited": false, "score": 0, "creation_date": 1495640914, "post_id": 44162759, "comment_id": 75342843, "body": "@Felix Palmen must be correct for this code runs successfully in any &quot;online IDE&quot; which I&#39;ve run the code on. Ideone, for example"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495642159, "post_id": 44162759, "comment_id": 75343645, "body": "I basically downloaded the pcre file and took the include files and lib files and placed them into the include and lib folders within MingW"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495642191, "post_id": 44162759, "comment_id": 75343672, "body": "And the problem still occurs"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495642421, "post_id": 44162759, "comment_id": 75343788, "body": "You have to link the library with <code>-lpcre</code>, maybe your IDE has an option for this"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495643665, "post_id": 44162759, "comment_id": 75344584, "body": "Is there any IDE which allows me to compile regex without linking libraries"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495643877, "post_id": 44162759, "comment_id": 75344713, "body": "That doesn&#39;t depend on the ide. You call functions that are neither in you own code nor in the standard library, so you must link against the library containing them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495644063, "post_id": 44162759, "comment_id": 75344834, "body": "Of course you could use linux or any other system with <code>glibc</code> as the standard library, <code>glibc</code> includes posix regex. But then you want curses or gtk or whatever .... find out how to link a library in your IDE or compile from the command line using the appropriate <code>-l</code> switch"}, {"owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "edited": false, "score": 0, "creation_date": 1495644237, "post_id": 44162759, "comment_id": 75344925, "body": "Now it says the program can&#39;t start because pcre3.dll is missing from your computer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495649690, "post_id": 44162759, "comment_id": 75347976, "body": "@savagesalllll On windows, <code>.dll</code>s are searched for in the same path as the <code>.exe</code>, as well as in the system <code>PATH</code>. So, simple solution, put <code>pcre3.dll</code> in the same directory as your compiled program."}], "owner": {"reputation": 1, "user_id": 8060416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84866eec3d3fe155e5b9a80cadfe8efd?s=128&d=identicon&r=PG&f=1", "display_name": "savagesalllll", "link": "https://stackoverflow.com/users/8060416/savagesalllll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495640376, "creation_date": 1495639807, "last_edit_date": 1495640376, "question_id": 44162759, "link": "https://stackoverflow.com/questions/44162759/specific-place-where-i-can-download-a-include-file-that-has-regex-h-in-it", "title": "Specific place where I can download a include file that has regex.h in it", "body": "<p>Currently I've been experiencing certain problems whenever I build code on Codeblocks. </p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;regex.h&gt;\n#include &lt;stdio.h&gt;\n\n#define MAX_MATCHES 1 //The maximum number of matches allowed in a single string\n\nvoid match(regex_t *pexp, char *sz) {\n    regmatch_t matches[MAX_MATCHES]; //A list of the matches in the string (a list of 1)\n    //Compare the string to the expression\n    //regexec() returns 0 on match, otherwise REG_NOMATCH\n    if (regexec(pexp, sz, MAX_MATCHES, matches, 0) == 0) {\n        printf(\"\\\"%s\\\" matches characters %d - %d\\n\", sz, matches[0].rm_so, matches[0].rm_eo);\n    } else {\n        printf(\"\\\"%s\\\" does not match\\n\", sz);\n    }\n}\n\nint main() {\n    int rv;\n    regex_t exp; //Our compiled expression\n    //1. Compile our expression.\n    //Our regex is \"-?[0-9]+(\\\\.[0-9]+)?\". I will explain this later.\n    //REG_EXTENDED is so that we can use Extended regular expressions\n    rv = regcomp(&amp;exp, \"-?[0-9]+(\\\\.[0-9]+)?\", REG_EXTENDED);\n    if (rv != 0) {\n        printf(\"regcomp failed with %d\\n\", rv);\n    }\n    //2. Now run some tests on it\n    match(&amp;exp, \"0\");\n    match(&amp;exp, \"0.\");\n    match(&amp;exp, \"0.0\");\n    match(&amp;exp, \"10.1\");\n    match(&amp;exp, \"-10.1\");\n    match(&amp;exp, \"a\");\n    match(&amp;exp, \"a.1\");\n    match(&amp;exp, \"0.a\");\n    match(&amp;exp, \"0.1a\");\n    match(&amp;exp, \"hello\");\n    //3. Free it\n    regfree(&amp;exp);\n    return 0;\n}\n</code></pre>\n\n<p>I always get an error on the line which says <code>if (regexec(pexp, sz, MAX_MATCHES, matches, 0) == 0) {</code> </p>\n\n<p>The error is an undefined reference to '_imp_regexec'</p>\n\n<p>So I was wondering if it's because I haven't setup the linker or if the regex.h file within my include folder is the problem or maybe even something else.</p>\n"}, {"tags": ["c", "windows", "process", "synchronization", "mutex"], "comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1495666978, "post_id": 44162758, "comment_id": 75355384, "body": "In the first process you are waiting for a mutex you already own, so the wait will be satisfied immediately; in the second process you are releasing a mutex that you <i>don&#39;t</i> own, which is illegal.  I think Eugene has it right, you should be using an event instead."}], "answers": [{"tags": [], "owner": {"reputation": 2668, "user_id": 647254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09869dbd44b7033b209bd38dcf6d7361?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/647254/eugene"}, "is_accepted": true, "score": 1, "last_activity_date": 1495643374, "creation_date": 1495643374, "answer_id": 44163938, "question_id": 44162758, "link": "https://stackoverflow.com/questions/44162758/usage-of-mutexes-in-interporcess-sync-in-c/44163938#44163938", "title": "Usage of mutexes in interporcess sync in c", "body": "<p>It seems that you have confused between two types of synchronization objects: <code>Mutexes</code> and <code>Events</code>.</p>\n\n<p><code>Mutexes</code> are generally used to protect access to shareable resource. At the entrance to the critical section the <code>WaitForSingleObject</code> on the <code>Mutex</code> should be called. If <code>Mutex</code> is not obtained by another execution unit (thread or process) this execution unit obtains it and continues running, otherwise it is locked until other process releases it. At the end of the critical section the <code>Mutex</code> should be released. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686927(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Using Mutexes</a>. That is why your process is not suspended.</p>\n\n<p><code>Events</code> on the other hand are used to synchronize execution units or to notify something. When one creates an event it specifies its signaled state. When <code>WaitForSingleObject</code> is called and the event is in the non-signaled state the execution unit will be suspended until something signals the event. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686915(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Using Events</a> </p>\n\n<p>Bottom line in your case you should use the <code>Event</code></p>\n"}], "owner": {"reputation": 25, "user_id": 8060165, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mdywERHBtWc/AAAAAAAAAAI/AAAAAAAAEbY/vmAop4TdW-Y/photo.jpg?sz=128", "display_name": "Manu Gal&#225;n", "link": "https://stackoverflow.com/users/8060165/manu-gal%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 44163938, "answer_count": 1, "score": 0, "last_activity_date": 1495643374, "creation_date": 1495639806, "question_id": 44162758, "link": "https://stackoverflow.com/questions/44162758/usage-of-mutexes-in-interporcess-sync-in-c", "title": "Usage of mutexes in interporcess sync in c", "body": "<p>I've been searching for a while and I've decided to ask as I'm unable to find a right answer.</p>\n\n<p>Actually I've got two processes</p>\n\n<p>Process 1:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\n// This process creates the mutex object.\n\nint main(void)\n{\n    HANDLE hMutex; \n\n    hMutex = CreateMutex( \n        NULL,                        // default security descriptor\n        TRUE,                       // mutex owned\n        TEXT(\"AnotherMutex\"));  // object name\n\n    if (hMutex == NULL) \n        printf(\"CreateMutex error: %d\\n\", GetLastError() ); \n    else \n        if ( GetLastError() == ERROR_ALREADY_EXISTS ) \n            printf(\"CreateMutex opened an existing mutex\\n\"); \n        else printf(\"CreateMutex created a new mutex.\\n\");\n\n    if(WaitForSingleObject(hMutex, INFINITE) == WAIT_FAILED)\n        printf(\"Error while waiting for the mutex.\\n\");\n    else\n        printf(\"Mutex openned by second process.\\n\");\n\n    CloseHandle(hMutex);\n\n    return 0;\n}\n</code></pre>\n\n<p>Process 2:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\n// This process opens a handle to a mutex created by another process.\n\nint main(void)\n{\n    HANDLE hMutex; \n\n    hMutex = OpenMutex( \n        MUTEX_ALL_ACCESS,            // request full access\n        FALSE,                       // handle not inheritable\n        TEXT(\"AnotherMutex\"));  // object name\n\n    if (hMutex == NULL) \n        printf(\"OpenMutex error: %d\\n\", GetLastError() );\n    else printf(\"OpenMutex successfully opened the mutex.\\n\");\n\n    if(!ReleaseMutex(hMutex)){\n        printf(\"Error while releasing the mutex.\\n\")\n    }\n\n    CloseHandle(hMutex);\n\n    return 0;\n}\n</code></pre>\n\n<p>So when I run the first process it just doesn't wait for the second process to release the mutex but; as the mutex is created owned, nonsignaled, it shouldn't wait till some process/thread releases it and then print the message?</p>\n"}, {"tags": ["c", "linux", "cmake", "shared-libraries"], "comments": [{"owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "edited": false, "score": 0, "creation_date": 1495639819, "post_id": 44162653, "comment_id": 75342002, "body": "Does your program make calls to routines in that .so for the usage you have tried? I am wondering if they only are needed when accessed, not on application startup."}, {"owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "edited": false, "score": 1, "creation_date": 1495640232, "post_id": 44162653, "comment_id": 75342324, "body": "It could also be that your program does not actually need that library, despite it&#39;s presence in the build files."}, {"owner": {"reputation": 301, "user_id": 8020705, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/41237e3aa506f0b25f5d0009e2a16572?s=128&d=identicon&r=PG&f=1", "display_name": "artic sol", "link": "https://stackoverflow.com/users/8020705/artic-sol"}, "reply_to_user": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "edited": false, "score": 1, "creation_date": 1495640784, "post_id": 44162653, "comment_id": 75342729, "body": "@Scooter sorry but the library is actually on the machine (I didn&#39;t install the library on it). Sorry for wasting your time with a silly question. But how does the application know where to find the shared lib on the machine because I don&#39;t specify the path?"}, {"owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "edited": false, "score": 0, "creation_date": 1495641774, "post_id": 44162653, "comment_id": 75343404, "body": "please update your question accordingly."}, {"owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "edited": false, "score": 0, "creation_date": 1495642355, "post_id": 44162653, "comment_id": 75343757, "body": "I always set LD_LIBRARY_PATH (like PATH is for executables, LD_LIBRARY_PATH is for dynamic libraries) but the answer below mentions another way."}], "answers": [{"tags": [], "owner": {"reputation": 17102, "user_id": 1022889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WZOSZ.jpg?s=128&g=1", "display_name": "Cloud", "link": "https://stackoverflow.com/users/1022889/cloud"}, "is_accepted": false, "score": 2, "last_activity_date": 1495641529, "creation_date": 1495641529, "answer_id": 44163318, "question_id": 44162653, "link": "https://stackoverflow.com/questions/44162653/does-a-so-library-need-to-be-present-at-run-time-in-all-cases/44163318#44163318", "title": "Does a .so library need to be present at run time in all cases", "body": "<p>In general, <a href=\"https://stackoverflow.com/questions/23485489/does-clang-gcc-really-support-a-delay-loading-feature\"><code>gcc</code> and <code>clang</code> support lazy linking/binding of <strong>symbols</strong>, but not for entire libraries</a>. This means that all of the shared objects (ie: <code>.so</code> files) should be present at application startup, at a minimum. <strong>The one exception to this</strong> is if you modified your makefile to not link against these libraries, and you manually call library functions via <code>dlopen()</code>/<code>dlsym()</code>, etc.</p>\n\n<p>The binding of individual symbols within those libraries can be postponed until they are needed, or you can force all the symbols to be resolved at startup, <a href=\"https://linux.die.net/man/1/ld\" rel=\"nofollow noreferrer\">using <code>-z lazy</code> or <code>-z now</code>, respectively</a>.</p>\n\n<p>It is strange that your application runs without <code>libmraa.so</code> being present. The two most likely reasons your application is running in the absence of the library is:</p>\n\n<ul>\n<li>Your application isn't using any symbols defined in the library, so the linker ignores the library at build time (try <code>ldd app_name</code> and see if your library is present in the list of libraries provided by <code>ldd</code>).</li>\n<li>Something is amiss in your build script, and you are statically linking against a <code>.a</code> archive of the library.</li>\n</ul>\n\n<p><strong>Edit</strong>: In response to how the application knows how to find the library, your linker (<code>ld</code> in this case) will use <code>rpath</code> lookup to decide which directories to use in its search for the appropriate library. You can see how this works by doing something like <code>LD_DEBUG=libs app_name</code> from the command line. You can also add an extra path via <code>LD_LIBRARY_PATH=/some/path app_name</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1495689597, "creation_date": 1495689597, "answer_id": 44172805, "question_id": 44162653, "link": "https://stackoverflow.com/questions/44162653/does-a-so-library-need-to-be-present-at-run-time-in-all-cases/44172805#44172805", "title": "Does a .so library need to be present at run time in all cases", "body": "<blockquote>\n  <p>Is my assumption correct?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>There are two likely explanations for why the application runs anyway:</p>\n\n<ol>\n<li>You are mistaken, and there <em>is</em> <code>libmraa.so</code> somewhere on the machine (though perhaps not in the place where you looked), or</li>\n<li>Your compiler defaults to <code>-Wl,--as-needed</code> by default, and your binary does not <em>in fact</em> depend on <code>libmraa.so</code> despite the fact that it appears on your link line.</li>\n</ol>\n\n<p>You can trivially confirm or disprove either of the above guesses.</p>\n\n<p>To confirm guess 2, do this:</p>\n\n<pre><code>readelf -d clientapp | grep NEED | grep libmraa\n# if there is no output, guess 2 is correct\n</code></pre>\n\n<p>If guess 2 is wrong, to confirm guess 1, do this (on machine without <code>libmrra.so</code>):</p>\n\n<pre><code>ldd clientapp | grep libmraa.so\n# if guess 2 is incorrect, and this command produces no output, then\n# your dynamic loader is broken, which is very unlikely.\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 8020705, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/41237e3aa506f0b25f5d0009e2a16572?s=128&d=identicon&r=PG&f=1", "display_name": "artic sol", "link": "https://stackoverflow.com/users/8020705/artic-sol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 1, "accepted_answer_id": 44172805, "answer_count": 2, "score": 1, "last_activity_date": 1495689597, "creation_date": 1495639552, "question_id": 44162653, "link": "https://stackoverflow.com/questions/44162653/does-a-so-library-need-to-be-present-at-run-time-in-all-cases", "title": "Does a .so library need to be present at run time in all cases", "body": "<p>My question is in relation to .so shared libraries. I am building a project that uses cmake on one ubuntu machine but running the application on another ubuntu machine.</p>\n\n<p>In the CMakeLists.txt file, I have the following lines:</p>\n\n<pre><code>project (clientapp)\n\nadd_executable(${PROJECT_NAME} ${SOURCES} ${WAKAAMA_SOURCES} ${SHARED_SOURCES})\n\nLINK_DIRECTORIES(/home/user//mraa-master-built/build/src)\ntarget_link_libraries (clientapp libmraa.so)\ntarget_link_libraries(clientapp m)\n</code></pre>\n\n<p>These lines add two libraries libmraa.so and the math library to the executable and it runs successfully on the other machine. </p>\n\n<p>My understanding of shared libraries is that they must be present at compile time, and when the application starts. But I do not have the libmraa.so file on the other machine and the application runs ok. I expected it not to work.</p>\n\n<p>Is my assumption correct? </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 1, "creation_date": 1495639389, "post_id": 44162567, "comment_id": 75341650, "body": "Ever thought of <code>break</code>?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1495639399, "post_id": 44162567, "comment_id": 75341660, "body": "I think the first thing you should figure out is <i>why</i> it is endless?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1495639442, "post_id": 44162567, "comment_id": 75341693, "body": "@narusin There is a stop condition already. It just should be hit."}, {"owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495639586, "post_id": 44162567, "comment_id": 75341811, "body": "@EugeneSh. I know there is a stop condition, but it appears like the user isn&#39;t able to break out of the loop"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "edited": false, "score": 0, "creation_date": 1495639649, "post_id": 44162567, "comment_id": 75341879, "body": "@narusin Yes, but apparently it&#39;s not like he is trapped there and want to break free at any cost :) The code still has to be correct."}], "answers": [{"tags": [], "owner": {"reputation": 1747, "user_id": 3726902, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/kV59z.png?s=128&g=1", "display_name": "Miket25", "link": "https://stackoverflow.com/users/3726902/miket25"}, "is_accepted": false, "score": 0, "last_activity_date": 1495645054, "last_edit_date": 1495645054, "creation_date": 1495642506, "answer_id": 44163658, "question_id": 44162567, "link": "https://stackoverflow.com/questions/44162567/how-to-get-out-from-endless-loop-in-c/44163658#44163658", "title": "How to get out from endless loop in c", "body": "<p>The infinite loop is caused by not having a condition to set <code>flag = 0</code>.</p>\n\n<p>Here is a cleaner version that depends on <code>i</code> and not <code>i</code> and <code>k</code>. I'll leave the spaces for you to implement. </p>\n\n<pre><code>do {\n  //Set flag to zero\n  flag = 0;\n  for(i = 0; angrm1[i] != '\\0'; i++){\n    if(angrm1[i+1] == '\\0'){\n       //If end of string, exit the loop by breaking\n       break;\n    }\n    if(angrm1[i] &gt; angrm1[i+1]){\n          temp = angrm1[i];\n          angrm1[i] = angrm1[i+1]; \n          angrm1[i+1] = temp;\n          flag = 1;\n       }\n    }\n    i = 0;\n} while (flag != 0);\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7905926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4711adc6eb1c3950d2dcc9e29212e75d?s=128&d=identicon&r=PG&f=1", "display_name": "sha", "link": "https://stackoverflow.com/users/7905926/sha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495645276, "creation_date": 1495639347, "question_id": 44162567, "link": "https://stackoverflow.com/questions/44162567/how-to-get-out-from-endless-loop-in-c", "title": "How to get out from endless loop in c", "body": "<p>i'm trying to bubble sort a string, and it's working, but i can't think of a way to exit this endless loop.\nplease help!</p>\n\n<pre><code>do {\n    for (k = i; angrm1[k + 1] != ' '&amp;&amp;angrm1[k + 1] != 0; k++) {\n        if (angrm1[i] &gt; angrm1[i + 1]) {\n            temp = angrm1[k];\n            angrm1[k] = angrm1[k + 1];\n            angrm1[k + 1] = temp;\n            flag = 1;\n        }i++;\n    }\n    if (angrm1[i+1] == ' ')\n        i = i + 2;\n    if (angrm1[i+1] == '\\0')\n        i = 0;\n} while (flag != 0);\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1495638415, "post_id": 44162199, "comment_id": 75340922, "body": "<code>curr -&gt; next = NULL;         curr = curr -&gt; next;</code> now <code>curr</code> is <code>NULL</code>."}, {"owner": {"reputation": 160515, "user_id": 1338292, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/11fcfcebf1ab436d5b59148ec13e9046?s=128&d=identicon&r=PG", "display_name": "Ja\u0362ck", "link": "https://stackoverflow.com/users/1338292/ja%cd%a2ck"}, "edited": false, "score": 1, "creation_date": 1495638444, "post_id": 44162199, "comment_id": 75340948, "body": "You need to <code>malloc()</code> each item, not only the first one."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1495638685, "post_id": 44162199, "comment_id": 75341120, "body": "This <code>curr -&gt; word = dic;</code> will mean each node in the list is pointing to the same string - you should use <code>strdup</code> to make a copy of <code>dic</code>"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 1, "creation_date": 1495638766, "post_id": 44162199, "comment_id": 75341183, "body": "Change <code>fscanf(fp, &quot;%s&quot;, dic)</code> to <code>fscanf(fp, &quot;%39s&quot;, dic)</code> if you want to avoid crashes and undefined behaviour."}, {"owner": {"reputation": 13, "user_id": 7872845, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/784e686ed79a2b0272a4d61db351999b?s=128&d=identicon&r=PG&f=1", "display_name": "ibp4", "link": "https://stackoverflow.com/users/7872845/ibp4"}, "edited": false, "score": 0, "creation_date": 1495639190, "post_id": 44162199, "comment_id": 75341515, "body": "BLUEPIXY i&#39;m sorry i changed that already but i forgot to changed it here sorry. I put curr = curr -&gt; next before the other one."}, {"owner": {"reputation": 13, "user_id": 7872845, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/784e686ed79a2b0272a4d61db351999b?s=128&d=identicon&r=PG&f=1", "display_name": "ibp4", "link": "https://stackoverflow.com/users/7872845/ibp4"}, "edited": false, "score": 0, "creation_date": 1495639263, "post_id": 44162199, "comment_id": 75341563, "body": "But dic is always changing right? In each cycle of the while the fscanf reads the next word. So why is it always reading the same?"}, {"owner": {"reputation": 13, "user_id": 7872845, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/784e686ed79a2b0272a4d61db351999b?s=128&d=identicon&r=PG&f=1", "display_name": "ibp4", "link": "https://stackoverflow.com/users/7872845/ibp4"}, "edited": false, "score": 0, "creation_date": 1495639388, "post_id": 44162199, "comment_id": 75341649, "body": "So i have to do malloc inside the while for each node? Ok it makes sense, i wasn&#39;t thinking right. But i think it continues on giving segmentation fault"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1495639899, "post_id": 44162199, "comment_id": 75342057, "body": "You must: malloc a new node on each iteration, and use strdup (or malloc) to allocate some memory for each word. And please learn to use a debugger! The problems are self evident if you run your program through a debugger..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495640085, "post_id": 44162199, "comment_id": 75342209, "body": "Also check if <code>fp</code> is <code>NULL</code> right after <code>fp = fopen(&quot;prob00&quot;, &quot;r&quot;);</code> and if yes, printf an error message and don&#39;t proceed further."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495639259, "post_id": 44162507, "comment_id": 75341561, "body": "This is more of a comment than an answer. Please elaborate, otherwise it will most likely be downvoted."}, {"owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495639579, "post_id": 44162507, "comment_id": 75341804, "body": "I have to get 50 reps to comment, i&#39;m almost there :)"}, {"owner": {"reputation": 13, "user_id": 7872845, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/784e686ed79a2b0272a4d61db351999b?s=128&d=identicon&r=PG&f=1", "display_name": "ibp4", "link": "https://stackoverflow.com/users/7872845/ibp4"}, "edited": false, "score": 0, "creation_date": 1495640383, "post_id": 44162507, "comment_id": 75342440, "body": "I know, i&#180;m sorry about that, i forgot to changed it here but i changed it in my code before. now it is first the curr = curr -&gt; next and then the curr -&gt; next = NULL"}], "tags": [], "owner": {"reputation": 634, "user_id": 8016390, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb8a7992f3527dc9d50d8ff87de9dc9b?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/8016390/gam"}, "is_accepted": false, "score": 2, "last_activity_date": 1495640642, "last_edit_date": 1495640642, "creation_date": 1495639166, "answer_id": 44162507, "question_id": 44162199, "link": "https://stackoverflow.com/questions/44162199/reading-words-from-a-file-to-a-linked-list-in-c/44162507#44162507", "title": "Reading words from a file to a linked list in c", "body": "<p>A linked list is several memory area linked by pointers. You have to create these memory areas with malloc(). In your code, the next element is NULL ... it does not exist </p>\n\n<pre><code>while(fscanf(fp, \"%s\", dic) != EOF){\n        curr -&gt; word = dic;\n        curr -&gt; pos = i;\n        curr -&gt; size = strlen(dic);\n        curr -&gt; next = NULL;\n        curr = curr -&gt; next;\n        i++;\n    }\n</code></pre>\n\n<p>You set cur->next to NULL, then you set curr to NULL. So in the next loop, the first line curr->word can't be possible because there is no word field in this NULL area</p>\n\n<p>Here is an example, a function to insert a new node in the list, at the end of the list. In this example you have to give to the function the address of the first element i called head (head or tail, it depends on you).</p>\n\n<pre><code>void    insert_at_end(struct node *head)\n{\n    struct node *new_element;\n\n    new_element = malloc(sizeof(*new_element)); // in real life you need to check malloc's return \n    new_element-&gt;next = NULL;    // because this is the new last element, next is NULL\n\n    // new_element-&gt;pos = x   // initialize datas\n    // new_element-&gt;size = x\n    // new_element-&gt;word = x\n\n    while (head-&gt;next != NULL) // we are going to the last element in the list\n        head = head-&gt;next;\n\n    head-&gt;next = new_element; // connection between the last element and the new one\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7872845, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/784e686ed79a2b0272a4d61db351999b?s=128&d=identicon&r=PG&f=1", "display_name": "ibp4", "link": "https://stackoverflow.com/users/7872845/ibp4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495640642, "creation_date": 1495638254, "question_id": 44162199, "link": "https://stackoverflow.com/questions/44162199/reading-words-from-a-file-to-a-linked-list-in-c", "title": "Reading words from a file to a linked list in c", "body": "<p>i want to read words from a file to a linked list. When i compile it there are no errors but when i run it it gives me segmentation fault. This is the first time that i'm using linked lists so it is probably a basic mistake, but i really don\u00b4t understand what i'm doing wrong. It is supposed to read the word from the file, its position and its length. This is what i have:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\ntypedef struct node{\n\n    int pos;\n    int size;\n    char *word;\n    struct node *next;\n\n}node;\n\n\nint main(int argc, char **argv){\n\n    int i = 1;\n    char dic[40];\n    FILE *fp;   \n    struct node *head;\n    struct node *curr, *ptr;\n\n    head = (struct node*) malloc(sizeof (struct node));\n    head -&gt; next = NULL;\n    curr = head;\n    ptr = head;\n\n    fp = fopen(\"prob00\", \"r\");  \n\n    while(fscanf(fp, \"%s\", dic) != EOF){\n        curr -&gt; word = dic;\n        curr -&gt; pos = i;\n        curr -&gt; size = strlen(dic);\n        curr -&gt; next = NULL;\n        curr = curr -&gt; next;\n        i++;\n    }\n\n\n    while(ptr != NULL){\n        printf(\"palavra: %s \\t tamanho: %d \\t posicao %d\\n\", ptr -&gt; word, ptr -&gt; size, ptr -&gt; pos);\n        ptr = ptr -&gt; next;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "unions", "bit-fields"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1495638822, "post_id": 44162053, "comment_id": 75341222, "body": "If that&#39;s your assignment, it is an awful one. Bit-field structures have hardly any guarantees about their layout. Use shifts and masking! And there is no guarantee you can use otherr than <code>int</code>, <code>unsigned int</code> and <code>_Bool</code> bitfleids. As a sidenote: none of the types you use guarantees a spicif representation or width! If you need fixed widths, use fixed width types!"}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495638865, "post_id": 44162053, "comment_id": 75341249, "body": "@Olaf it is my assignment. So my PS-Question at the end can be answered with &#39;Yes&#39;? :)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495639032, "post_id": 44162053, "comment_id": 75341391, "body": "Yes, but we are not a tutoring service. With that tutor get a good C book and filter the course material with the book&#39;s information. As a sidenote: Letting apart I never gave my students such an assignment: with the code: you would fail in my course. Some reasons: see above."}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495639149, "post_id": 44162053, "comment_id": 75341487, "body": "btw: thanks for the downvote, not.  Could the one who doesn&#39;t think i put enough effort into this (i think i realy have) please at least argue why he/she thinks this is a bad question? ..or how i could improve it?"}, {"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 2, "creation_date": 1495639212, "post_id": 44162053, "comment_id": 75341525, "body": "I think this is a good, clearly asked question and it doesn&#39;t matter if it is a student assignment or not."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 1, "creation_date": 1495641086, "post_id": 44162053, "comment_id": 75342963, "body": "Olaf is correct in saying that bit-field structures have very little in the way of guarantees, their layout may vary from compiler to compiler and from architecture to architecture and even depending where in memory the structure is located WRT boundaries etc."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1495646423, "post_id": 44162053, "comment_id": 75346163, "body": "Are you sure that &quot;9:0:0 30.5.2017 code:4195376&quot; is the correct decoded value?"}, {"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1495646595, "post_id": 44162053, "comment_id": 75346251, "body": "@dbush for the first part (the date)  i am very sure, because that&#39;s the exact date of the next session. Elems.code 4195376 ... Im not sure/don&#39;t know if it&#39;s correct."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1495647083, "post_id": 44162053, "comment_id": 75346515, "body": "@Gewure Taking the groups of bits from right to left, I&#39;m getting &quot;9:0:0 30.5.2127 code:479&quot;.  In particular, the 12 bits in the middle (26 before and 26 = 4 + 5 + 6 + 6 + 5 after) are 1000 0100 1111 = 2127.  There are 12 bits starting 20 from the left which are 0111 1110 0001 = 2017, but these are not at the expected offset."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1495684609, "post_id": 44162053, "comment_id": 75359433, "body": "Why code <code>unsigned long long int code : 26;</code> instead of <code>unsigned  int code : 26;</code>?  Do you have 16-bit <code>unsigned</code> concerns?"}], "answers": [{"tags": [], "owner": {"reputation": 625, "user_id": 3900723, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/8b383cec5d8b20db7c4faaaee53c5b06?s=128&d=identicon&r=PG&f=1", "display_name": "maxbit89", "link": "https://stackoverflow.com/users/3900723/maxbit89"}, "is_accepted": false, "score": 1, "last_activity_date": 1495639824, "creation_date": 1495639824, "answer_id": 44162765, "question_id": 44162053, "link": "https://stackoverflow.com/questions/44162053/bitfield-and-union-unexpected-result-in-c/44162765#44162765", "title": "Bitfield and Union - unexpected result in C", "body": "<p>The problem here lies in line 37 where you do:</p>\n\n<pre><code>m2.elems.code = 4195376;\n</code></pre>\n\n<p>You assigned a invalid type to your bit field:</p>\n\n<pre><code>struct Message {\n     unsigned int hour : 5;\n     unsigned int minutes : 6;\n     unsigned int seconds : 6;\n     unsigned int day : 5;\n     unsigned int month : 4;\n     unsigned int year : 12;\n     unsigned long long int code : 26; &lt;-- invalid\n};\n</code></pre>\n\n<p>see: <a href=\"https://www.tutorialspoint.com/cprogramming/c_bit_fields.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cprogramming/c_bit_fields.htm</a>\nin the Topic: <strong>Bit Field Declaration</strong></p>\n\n<p>There it says you can only use <strong>int</strong>, <strong>signed int</strong> and <strong>unsigned int</strong> as Type.</p>\n\n<p><strong>I think the Compiler interpretes m2.elems.code as int and i don't know what he exactly does with an assignment greater than max int</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "is_accepted": false, "score": 1, "last_activity_date": 1495642436, "creation_date": 1495642436, "answer_id": 44163638, "question_id": 44162053, "link": "https://stackoverflow.com/questions/44162053/bitfield-and-union-unexpected-result-in-c/44163638#44163638", "title": "Bitfield and Union - unexpected result in C", "body": "<p>To reiterate, the layout of bits within bit-field structs is not guaranteed (i.e. it is compiler dependent) and so this kind of bit manipulation is not good practice. To achieve such functionality bit manipulation should be used instead.</p>\n\n<p>A quick example of this might be:</p>\n\n<pre><code>#define HOUR_BIT_START 59 // The bit number where hour bits starts\n#define HOUR_BIT_MASK 0x1F // Mask of 5 bits for the hour bits\n\nunsigned int getHour(long long int blob)\n{\n    return (unsigned int)((blob &gt;&gt; HOUR_BIT_START) &amp; HOUR_BIT_MASK);\n}\n\nint main (int argc, char *argv[]) \n{\n    unsigned long long int datablob = 131809282883593;\n\n    printf(\"%d:%d:%d %d.%d.%d code:%lu\\n\", getHour(datablob), getMinutes(datablob), getSeconds(datablob), getDay(datablob), getMonth(datablob), getyear(datablob), getCode(datablob)); \n}\n</code></pre>\n\n<p>I'll leave the implementation of the other <code>get*()</code> functions to you</p>\n"}, {"comments": [{"owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "edited": false, "score": 0, "creation_date": 1496327412, "post_id": 44171708, "comment_id": 75625982, "body": "thank you for that very detailed answer, @dbush i aprreciate it very much. I tried to replicate this on another machine and got slightly different results, which was pretty enlightening.    Now i know why not to use bitfields - and &#39;unsigned&#39; if, possible."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1495714285, "last_edit_date": 1495714285, "creation_date": 1495682270, "answer_id": 44171708, "question_id": 44162053, "link": "https://stackoverflow.com/questions/44162053/bitfield-and-union-unexpected-result-in-c/44171708#44171708", "title": "Bitfield and Union - unexpected result in C", "body": "<p>The layout of bitfields within a <code>struct</code> and any padding that may exist between them is implementation defined.</p>\n\n<p>From section 6.7.2.1 of the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a>:</p>\n\n<blockquote>\n  <p><em>11</em> An implementation may allocate any addressable storage unit large enough to hold a bit- field.  If enough space remains, a bit-field\n  that immediately follows another bit-field in a structure shall be\n  packed into adjacent bits of the same unit.  If insufficient space\n  remains, whether  a  bit-field  that  does  not  fit  is  put  into \n  the  next  unit  or  overlaps  adjacent  units  is\n  implementation-defined.  The order of allocation of bit-fields within\n  a unit (high-order to low-order  or  low-order  to  high-order)  is \n  implementation-defined.  The  alignment  of  the addressable storage\n  unit is unspecified.</p>\n</blockquote>\n\n<p>This means that you can't rely on the layout in a standard-compliant manner.</p>\n\n<p>That being said, lets take a look at how the bits are being laid out in this particular case.  To reiterate, <strong>everything from here down is in the realm of implementation defined behavior</strong>.  We'll start with the second case where <code>m2.datablob</code> is 8662973939721 as that is easier to explain.</p>\n\n<p>First let's look at the bit representation of the values you assign to <code>m2</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> - hour:       9:   0 1001 (0x09)\n - minutes:    0:   00 0000 (0x00)\n - seconds:    0:   00 0000 (0x00)\n - day:       30:   11 1110 (0x3E)\n - month:      5:   0101 (0x05)\n - year:    2017:   0111 1110 0001 (0x7e1)\n - code: 4195376:   00 0100 0000 0000 0100 0011 0000 (0x0400430)\n</code></pre>\n\n<p>Now let's look at the blob values, first <code>m</code> which assigns to <code>blobvalue</code> then <code>m2</code> which assigns to each field individually with the above values:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>131809282883593  0x77E13D7C0009                        0111 0111 1110 0001 \n                                   0011 1101 0111 1100 0000 0000 0000 1001\n\n  8662973939721  0x07E1017C0009                        0000 0111 1110 0001 \n                                   0000 0001 0111 1100 0000 0000 0000 1001\n</code></pre>\n\n<p>If we start by looking at the values from the right going left, we can see the value 9, so there's our first 5 bits.  Next is two sets of 6 zero bits for the next two fields.  After that, we see the bit patterns for 30, then 5.<br>\nA little further up we see the bit pattern for the value 2017, but there are 6 bits set to zero between this value and the prior ones.  So it looks like the layout is as follows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>          year        ???  month  day   sec     min  hour\n      ------------   -----  ---  ----  ------  ----- -----\n     |            | |     ||   ||    ||      ||     |     |\n0000 0111 1110 0001 0000 0001 0111 1100 0000 0000 0000 1001\n</code></pre>\n\n<p>So there's some padding between the <code>year</code> and <code>month</code> fields.  Comparing the <code>m</code> and <code>m2</code> representations, the differences are in the 6 bits of padding between <code>month</code> and <code>year</code> as well as 4 bits to the left of <code>year</code>.</p>\n\n<p>What we don't see here are the bits for the <code>code</code> field.  So just how big is the struct?</p>\n\n<p>If we add this to the code:</p>\n\n<pre><code>printf(\"size = %zu\\n\", sizeof(struct Message));\n</code></pre>\n\n<p>We get:</p>\n\n<pre><code>size = 16\n</code></pre>\n\n<p>It's considerable bigger than we thought.  So let's make the <code>bytes</code> array <code>unsigned char [16]</code> and output it.  The code:</p>\n\n<pre><code>int i;\nprintf(\"m: \");\nfor (i=0; i&lt;16; i++) {\n    printf(\" %02x\", m.bytes[i]);\n}\nprintf(\"\\n\");\nprintf(\"m2:\");\nfor (i=0; i&lt;16; i++) {\n    printf(\" %02x\", m2.bytes[i]);\n}\nprintf(\"\\n\");\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>m:  09 00 7c 3d e1 77 00 00 00 00 00 00 00 00 00 00\nm2: 09 00 7c 01 e1 07 00 00 30 04 40 00 00 00 00 00\n</code></pre>\n\n<p>Now we see the 0x0400430 bit pattern corresponding to the code field in the representation for m2.  There are an additional 20 bits of padding before this field.  Also note that the bytes are in the reverse order of the value which tells us we're on a little-endian machine.  Given the way the values are laid out, it's also likely that the bits within each byte are also little-endian.</p>\n\n<p>So why the padding?  It's most likely related to alignment.  The first 5 fields are 8 bits or less, meaning they each fit into a byte.  There is no alignment requirement for single bytes, so they are packed.  The next field is 12 bits, meaning it needs to fit into a 16 bit (2 byte) field.  So 6 bits of padding are added so this field starts on a 2 byte offset.  The next field is 26 bits, which needs a 32 bit field.  This would mean it needs to start on a 4 byte offset and use 4 bytes, however since this field is declared <code>unsigned long long</code>, which in this case is 8 bytes, the field uses up 8 bytes.  Had you declared this field <code>unsigned int</code> it would probably still start on the same offset but only use up 4 more bytes instead of 8.</p>\n\n<p>Now what about the first case where the blob value is 131810088189961?  Let's look at its representation compared to the \"expected\" one:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>131809282883593  0x77E13D7C0009                        0111 0111 1110 0001 \n                                   0011 1101 0111 1100 0000 0000 0000 1001\n\n131810088189961  0x77E16D7C0009                        0111 0111 1110 0001 \n                                   0110 1101 0111 1100 0000 0000 0000 1001\n</code></pre>\n\n<p>These two representations have the same values in the bits that store the data.  The difference between them is in the 6 padding bits between the <code>month</code> and <code>year</code> fields.  As to why this representation is different, the compiler probably made some optimizations when it realized certain bits weren't or couldn't be read or written.  By adding a <code>char</code> array to the union, it because possible that those bits could be read or written so that optimization could no longer be made.</p>\n\n<p>With gcc, you could try using <code>__attribute((packed))</code> on the struct.  Doing that gives the following output (after adjusting the <code>bytes</code> array to 8 along with the loop limits when printing):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>size = 8\n9:0:0 30.5.2127 code:479\nm2.datablob: should: 131809282883593 is: 1153216309106573321\nm.datablob:  should: 131809282883593 is: 131809282883593\n9:0:0 30.5.2017 code:4195376\nm:  09 00 7c 3d e1 77 00 00\nm2: 09 00 7c 85 1f 0c 01 10\n</code></pre>\n\n<p>And the bit representation:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1153216309106573321 0x10010C1F857C0009   0001 0000 0000 0001 0000 1100 0001 1111\n                                         1000 0101 0111 1100 0000 0000 0000 1001\n\n    131810088189961 0x77E16D7C0009       0000 0000 0000 0000 0111 0111 1110 0001 \n                                         0110 1101 0111 1100 0000 0000 0000 1001\n</code></pre>\n\n<p>But even with this, <a href=\"https://stackoverflow.com/questions/8568432/is-gccs-attribute-packed-pragma-pack-unsafe\">you could run into issues</a>.</p>\n\n<p>So to summarize, with bitfields there's no guarantee of the layout.  You're better off using bit shifting and masking to get the values in and out of the bitfields rather than attempting to overlay it.</p>\n"}], "owner": {"reputation": 1072, "user_id": 3488735, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8DatZ.jpg?s=128&g=1", "display_name": "Gewure", "link": "https://stackoverflow.com/users/3488735/gewure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1745, "favorite_count": 0, "accepted_answer_id": 44171708, "answer_count": 3, "score": 3, "last_activity_date": 1496766678, "creation_date": 1495637877, "last_edit_date": 1496766678, "question_id": 44162053, "link": "https://stackoverflow.com/questions/44162053/bitfield-and-union-unexpected-result-in-c", "title": "Bitfield and Union - unexpected result in C", "body": "<p>I've been given the following assignment in a C-course:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eb28b.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eb28b.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I've implemented the assignment to decode the <em>8 byte long long int 131809282883593</em> as follows:</p>\n\n<pre><code>    #include  &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n\n    struct Message {\n         unsigned int hour : 5;\n         unsigned int minutes : 6;\n         unsigned int seconds : 6;\n         unsigned int day : 5;\n         unsigned int month : 4;\n         unsigned int year : 12;\n         unsigned long long int code : 26;\n    };  // 64 bit in total\n\n    union Msgdecode {\n        long long  int datablob;\n        struct Message elems;\n    };\n\n    int main(void) {\n\n        long long int datablob = 131809282883593;\n        union Msgdecode m;\n\n        m.datablob = datablob;\n\n        printf(\"%d:%d:%d %d.%d.%d code:%lu\\n\", m.elems.hour, m.elems.minutes,\n        m.elems.seconds, m.elems.day, m.elems.month, m.elems.year,(long unsigned int) m.elems.code); \n\n        union Msgdecode m2;\n        m2.elems.hour = 9;\n        m2.elems.minutes = 0;\n        m2.elems.seconds = 0;\n        m2.elems.day = 30;\n        m2.elems.month = 5;\n        m2.elems.year = 2017;\n        m2.elems.code = 4195376;\n\n        printf(\"m2.datablob: should: 131809282883593 is: %lld\\n\", m2.datablob); //WHY does m2.datablob != m.datablob?! \n        printf(\"m.datablob:  should: 131809282883593 is: %lld\\n\", m.datablob);\n\n        printf(\"%d:%d:%d %d.%d.%d code:%lu\\n\", m2.elems.hour, m2.elems.minutes,\n          m2.elems.seconds, m2.elems.day, m2.elems.month, m2.elems.year, (long unsigned int) m2.elems.code);\n\n    }\n</code></pre>\n\n<p><a href=\"http://rextester.com/TDOM63724\" rel=\"nofollow noreferrer\">TRY IT ONLINE.</a> </p>\n\n<p>..what gives me a hard time is the output. The decoding/encoding works nicely so far. <em>9:0:0 30.5.2017 and code 4195376 is expected</em>, but the difference in the 'datablob' really isn't - and i can't figure out why/where it stems from: </p>\n\n<pre><code>9:0:0 30.5.2017 code:4195376\nm2.datablob: should: 131809282883593 is: 131810088189961\nm.datablob:  should: 131809282883593 is: 131809282883593\n9:0:0 30.5.2017 code:4195376\n</code></pre>\n\n<p>As you can see the datablob is <em>close</em> to the original - but not the original. I've consulted a coworker whos fluent in C about this - but we couldn't figure out the reason for this behaviour.  </p>\n\n<p><strong>Q: Why do the blobs differ from each other?</strong></p>\n\n<p>Bonus-Q: When manipulating the union <code>Msgdecode</code> to include another field, a strange thing happens:</p>\n\n<pre><code>union Msgdecode {\n    long long  int datablob;\n    struct Message elems;\n    char bytes[8];  // added this\n};\n</code></pre>\n\n<p>Outcome: </p>\n\n<pre><code>9:0:0 30.5.2017 code:0\nm2.datablob: should: 131809282883593 is: 8662973939721\nm.datablob:  should: 131809282883593 is: 131809282883593\n9:0:0 30.5.2017 code:4195376\n</code></pre>\n\n<p>PS: reading on SO about bitfields+union questions gave me the impression that they are rather unreliable. Can this be generally said?</p>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 2, "creation_date": 1495637497, "post_id": 44161856, "comment_id": 75340146, "body": "try <code>(*array)[2] = 666;</code> and compile with all warnings on."}, {"owner": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "edited": false, "score": 0, "creation_date": 1495637521, "post_id": 44161856, "comment_id": 75340169, "body": "I&#39;m familiar with C++ but I thing you need to use the <code>new</code> operator or what ever to declare an object and then create the values in the specified address."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1495637549, "post_id": 44161856, "comment_id": 75340191, "body": "there&#39;s no new in C."}, {"owner": {"reputation": 4817, "user_id": 513034, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/29ebc95bcc5d5aec8ad0d583e0d69aa1?s=128&d=identicon&r=PG", "display_name": "pandoragami", "link": "https://stackoverflow.com/users/513034/pandoragami"}, "edited": false, "score": 0, "creation_date": 1495637564, "post_id": 44161856, "comment_id": 75340206, "body": "Oh alright Jean, wasn&#39;t sure!"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 3, "last_activity_date": 1495637915, "last_edit_date": 1495637915, "creation_date": 1495637566, "answer_id": 44161924, "question_id": 44161856, "link": "https://stackoverflow.com/questions/44161856/initialize-values-of-dynamic-array-in-a-function-c-language/44161924#44161924", "title": "Initialize values of dynamic array in a function (C language)", "body": "<p>You have the address of a pointer passed to the function:</p>\n\n<pre><code>array\n</code></pre>\n\n<p>You want to dereference that to get the pointer:</p>\n\n<pre><code>*array\n</code></pre>\n\n<p>Then apply the array subscript operator to the result:</p>\n\n<pre><code>(*array)[2]\n</code></pre>\n\n<p>Or equivalently:</p>\n\n<pre><code>*((*array) + 2)\n</code></pre>\n\n<p>The parenthesis are required because the array subscript operator <code>[]</code> has higher precedence than the dereference operator <code>*</code>.</p>\n\n<p>Generally speaking, you should use the array subscript operator whenever possible, as it tends to be easier to read.</p>\n"}], "owner": {"reputation": 55, "user_id": 5538380, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e4f1d95d7e5a1240862e5ca57a607434?s=128&d=identicon&r=PG&f=1", "display_name": "Billy Ray", "link": "https://stackoverflow.com/users/5538380/billy-ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 44161924, "answer_count": 1, "score": 1, "last_activity_date": 1495637915, "creation_date": 1495637347, "last_edit_date": 1495637697, "question_id": 44161856, "link": "https://stackoverflow.com/questions/44161856/initialize-values-of-dynamic-array-in-a-function-c-language", "title": "Initialize values of dynamic array in a function (C language)", "body": "<p>this is my code:</p>\n\n<pre><code>void init_array(int** array) {\n\n  *array = (int*) malloc(3 * sizeof(int));\n\n  /* ???? **(array+2) = 666; */\n\n  return;\n}\n\nvoid init(int* array, int* length) {\n\n  *length = 3;\n\n  *(array+0) = 0;\n  *(array+1) = 1;\n  *(array+2) = 2;\n\n  return;\n\n}\n\nint main(void) {\n\n  /* Variables */\n\n  int array_length;\n  int* array;\n\n  /* Initialize */\n\n  init_array(&amp;array);\n  init(array, &amp;array_length);\n\n  free(array);\n\n  return 0;\n\n}\n</code></pre>\n\n<p>My question is: How can I initialize values of the array in a function init_array().</p>\n\n<p>I have attempted things such as: </p>\n\n<ul>\n<li><code>**(array+2) = 666;</code></li>\n<li><code>*(*(array+2)) = 666;</code></li>\n<li><code>*array[2] = 666;</code></li>\n<li><code>**array[2] = 666;</code></li>\n</ul>\n\n<p>When I used pencil and paper I came to result that <code>**(array+2)</code> should work but it gives me a segmentation fault.</p>\n\n<p>I would appreciate your answer because I am confused how pointers in C actually work.</p>\n"}, {"tags": ["c", "memory-management"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1495637069, "post_id": 44161699, "comment_id": 75339777, "body": "In what range are the values <code>m</code> and <code>n</code>? And when is the segfault thrown? During the call to <code>malloc</code> or later?"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495637103, "post_id": 44161699, "comment_id": 75339815, "body": "They are row size and column size, typically equal to each other."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495637148, "post_id": 44161699, "comment_id": 75339853, "body": "N o, what is their value ? 10, 100, 1000, 10000, ...?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1495637162, "post_id": 44161699, "comment_id": 75339871, "body": "If you&#39;re getting a segfault, simply attempting to allocate memory, even a large amount, shouldn&#39;t cause that.  There&#39;s probably something else causing it.  Please update your question with a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>."}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495637199, "post_id": 44161699, "comment_id": 75339899, "body": "I start them with 10, and they can go upto a million. I would like the code to run for m,n upto 10M."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495637250, "post_id": 44161699, "comment_id": 75339945, "body": "Please answer my second question. It&#39;s essential, so we can answer."}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1495637342, "post_id": 44161699, "comment_id": 75340023, "body": "@AdityaGrover A square matrix with a side length of 10M seems completely unreasonable, surely you understand that? You&#39;re talking about around 363 TB per matrix, at that point."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495637377, "post_id": 44161699, "comment_id": 75340055, "body": "BTW if n = 10M you would allocate 10M * 10M = 100&#39;000&#39;000 Mb. In that case <code>malloc</code> will probbaly return <code>NULL</code> as your computer will not have enough memory."}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495637515, "post_id": 44161699, "comment_id": 75340161, "body": "Is there any workaround? I mean, I want them to go as high as possible. I am doing a comparison of running times b/w C and CUDA. I want to see how the difference changes with higher values."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495637534, "post_id": 44161699, "comment_id": 75340181, "body": "Please check if <code>malloc</code> returns <code>NULL</code>. If yes, then <code>malloc</code> is unable to allocate the quantity of memory you are asking for."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495637618, "post_id": 44161699, "comment_id": 75340260, "body": "<i>I am doing a comparison of running times b/w C and CUDA</i>: you don&#39;t need allocate that much memory for comparing execution times."}, {"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1495637747, "post_id": 44161699, "comment_id": 75340381, "body": "You should never cast the return of <code>malloc</code>"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495637800, "post_id": 44161699, "comment_id": 75340434, "body": "@MichaelWalz TIt does."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495637850, "post_id": 44161699, "comment_id": 75340468, "body": "What does <code>malloc</code> return`? Why don&#39;t you check the result? Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>!"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495637897, "post_id": 44161699, "comment_id": 75340500, "body": "@Olaf malloc throws a null. I just checked."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495638046, "post_id": 44161699, "comment_id": 75340622, "body": "1) C does not support exceptions, so there is nothing <b>thrown</b>. 2) <code>malloc</code> returns a pointer. This can be a <i>null pointer</i>. What is &quot;null&quot;? So where is your segfault? I don&#39;t see any code which can generate one."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495638053, "post_id": 44161699, "comment_id": 75340625, "body": "@AdityaGrover you mean <i><code>malloc</code> <b>returns</b> <code>NULL</code></i> I suppose. Functions don&#39;t <i>throw</i> anything in C. (In C++ the may throw an exception though),"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495638116, "post_id": 44161699, "comment_id": 75340681, "body": "@MichaelWalz: As we are nit-picking (both of us:-): <code>NULL</code> is a macro. macros cannot be returned by functions."}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638186, "post_id": 44161699, "comment_id": 75340733, "body": "Guys I am getting overwhelmed with all the information I am being provided. Thanks, but I am not a C programmer, and mostly work in Java. So, excuse my naive mistakes."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495638458, "post_id": 44161699, "comment_id": 75340961, "body": "You will have the same problems in Java. Did you even calculate how much memory <code>3 * 10000 * 10000</code> <code>float</code>s require?? And if you write code in C, get a good book and learn the basics first. C is not a language to learn by trial&amp;error!"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495638559, "post_id": 44161699, "comment_id": 75341035, "body": "@Olaf Yeah, I guess that&#39;s a pretty big number. Never did such things in Java."}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1495638568, "post_id": 44161699, "comment_id": 75341045, "body": "in java if you exceed maximum heap memory allowed it will throw <code>OutOfMemoryError</code> , how would you solve that ? you know how then that&#39;s mostly the answer to your problem, just needs conversion to C"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638640, "post_id": 44161699, "comment_id": 75341085, "body": "Guys, I guess the problem is with malloc. So, I&#39;ll keep the value of m and n under 10000,"}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "edited": false, "score": 0, "creation_date": 1495638644, "post_id": 44161699, "comment_id": 75341086, "body": "by the way on my system when I exceed RAM my OS begins to swap but believe me you don&#39;t want that"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495637392, "post_id": 44161774, "comment_id": 75340069, "body": "I typed 1000 by mistake. It runs fine with m,n=10000. But when m,n=100000, it throws the error. Sorry for the naive mistake."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638348, "post_id": 44161774, "comment_id": 75340857, "body": "@AdityaGrover: Even <b>iff</b> <code>malloc</code> returns a valid pointer (read about optimistic allocation): does your machine have ca. 100GiB virtual memory available??"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495638435, "post_id": 44161774, "comment_id": 75340942, "body": "@Olaf I doubt that since I have a 128G SSD and 4G RAM. lol."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638574, "post_id": 44161774, "comment_id": 75341052, "body": "@AdityaGrover So why do you write such code? Do you use a 64 bit OS at least? Otherwise you have other problems, too."}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638721, "post_id": 44161774, "comment_id": 75341146, "body": "Yeah, I use 64b Ubuntu. I&#39;ll be more careful in future."}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 3, "last_activity_date": 1495637603, "last_edit_date": 1495637603, "creation_date": 1495637143, "answer_id": 44161774, "question_id": 44161699, "link": "https://stackoverflow.com/questions/44161699/segmentation-fault-on-initializing-large-arrays-using-malloc-in-c/44161774#44161774", "title": "Segmentation Fault on Initializing Large Arrays Using malloc() in C", "body": "<p>Okay, so <code>m == n == 100000</code> would give a matrix size of 100000 * 100000 * 4, or around 37 GB. That's approaching \"large\", even on modern server and desktop class machines.</p>\n\n<p>Are you sure it's the <code>malloc()</code> that's segfaulting, and not some later code where you dereference a <code>NULL</code> pointer, or something? Could be that the allocation simply fails, returning <code>NULL</code>, but you don't check.</p>\n\n<p>The code as shown really shouldn't segfault. The only typical case where <code>malloc()</code> segfaults is when earlier code has overrun an allocation, trashing the heap's internal data. Use Valgrind to help find those, if available.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638063, "post_id": 44162055, "comment_id": 75340639, "body": "I don&#39;t understand. For m,n=100000, it sometimes prints &quot;Can&#39;t allocate...&quot;. At other times, it just throws a segmentation fault error."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495638215, "post_id": 44162055, "comment_id": 75340766, "body": "Don&#39;t cast <code>void *</code>. And that is possibly not the problem. OP already stated he knows it returns a null pointer."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 1, "creation_date": 1495638224, "post_id": 44162055, "comment_id": 75340775, "body": "After all the admonitions to never cast the result of an allocation why do you do it here?"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "reply_to_user": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1495638363, "post_id": 44162055, "comment_id": 75340869, "body": "@KevinDTimm I have removed all the casts, but the result remains the same."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638559, "post_id": 44162055, "comment_id": 75341034, "body": "@AdityaGrover - my question is for this answer"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638687, "post_id": 44162055, "comment_id": 75341122, "body": "@AdityaGrover I edited this answer and added a <code>printf</code> at the end. Please do the same in your program and report what <b>exactly</b> is printed on the screen when the segfault happens."}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638796, "post_id": 44162055, "comment_id": 75341208, "body": "Alright, @MichaelWalz. I modified the code, as specified by you, and here is the output: All mallocs are OK Segmentation fault (core dumped)"}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638840, "post_id": 44162055, "comment_id": 75341234, "body": "@MichaelWalz Please note that this is for m=n=100000."}, {"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638901, "post_id": 44162055, "comment_id": 75341279, "body": "@AdityaGrover can you post the code that access&#39;s those variables ? you said you&#39;re summing matrices, is it a simple nested for-loop ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495638922, "post_id": 44162055, "comment_id": 75341302, "body": "@AdityaGrover OK, in that case Weather Vane&#39;s answer is probably what you are looking for."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 0, "last_activity_date": 1495639032, "last_edit_date": 1495639032, "creation_date": 1495637883, "answer_id": 44162055, "question_id": 44161699, "link": "https://stackoverflow.com/questions/44161699/segmentation-fault-on-initializing-large-arrays-using-malloc-in-c/44162055#44162055", "title": "Segmentation Fault on Initializing Large Arrays Using malloc() in C", "body": "<p>Modify your code like this:</p>\n\n<pre><code>printf(\"m = %d, n = %d, size = %d\\n\", m, n, size);\nh_A = malloc(size);\nif (h_A == NULL)\n{\n  printf(\"Can't allocate memory for h_A\\n\");\n  exit(1);\n}\n\nh_B = malloc(size);\nif (h_B == NULL)\n{\n  printf(\"Can't allocate memory for h_B\\n\");\n  exit(1);\n}\n\nh_C = malloc(size);\nif (h_C == NULL)\n{\n  printf(\"Can't allocate memory for h_C\\n\");\n  exit(1);\n}\n\nprintf(\"All mallocs are OK\\n\");\n</code></pre>\n\n<p>This way you will get a correct diagnostic.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495639032, "post_id": 44162270, "comment_id": 75341390, "body": "I guess that&#39;s exactly what&#39;s happening. Thanks @Weather Vane."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495639079, "post_id": 44162270, "comment_id": 75341434, "body": "@AdityaGrover you commented you use 64-bit Ubuntu, does the compiler also generate 64-bit code? I use 64-bit Windows but my version of MSVC is 32-bit. I suggest printing the value of <code>size</code> to confirm there is no overflow in the multiplications."}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495639278, "post_id": 44162270, "comment_id": 75341575, "body": "for m,n=10, it prints a value of 400. So, I guess float&#39;s size is 32b in the generated code."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495639306, "post_id": 44162270, "comment_id": 75341597, "body": "I mean, for the larger values which fail."}, {"owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495639368, "post_id": 44162270, "comment_id": 75341630, "body": "For m,n=100000, the value of size is 1345294336."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495639620, "post_id": 44162270, "comment_id": 75341845, "body": "That is because <code>100000 * 100000 * 4 == 4000000000000</code> and <code>4000000000000 % 4294967296 == 1345294336</code> so QED you have an overflow."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "edited": false, "score": 0, "creation_date": 1495640118, "post_id": 44162270, "comment_id": 75342233, "body": "P.S. I presume you did print <code>size</code> with <code>printf(&quot;%zu\\n&quot;, size);</code>"}], "tags": [], "owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "is_accepted": true, "score": 2, "last_activity_date": 1495638410, "creation_date": 1495638410, "answer_id": 44162270, "question_id": 44161699, "link": "https://stackoverflow.com/questions/44161699/segmentation-fault-on-initializing-large-arrays-using-malloc-in-c/44162270#44162270", "title": "Segmentation Fault on Initializing Large Arrays Using malloc() in C", "body": "<p>If <code>size_t</code> is 32 bits, then when <code>m</code> and <code>n</code> are <code>&gt;= 32768</code></p>\n\n<pre><code>size_t size = m * n * sizeof(float);\n</code></pre>\n\n<p>will overflow yet produce a valid 32-bit number. This is then passed to <code>malloc</code> successfully, yet when you attempt to use the memory you imagine you have, but don't, it segfaults.</p>\n\n<p>In the particular example where <code>n = m = 32768</code>, the product is <code>4294967296</code> so <code>0</code> is passed to <code>malloc</code> and indexing <em>any</em> of the supposed memory is illegal.</p>\n"}], "owner": {"reputation": 93, "user_id": 7810926, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9ff89ae5176aa52af5551499c1c398b8?s=128&d=identicon&r=PG&f=1", "display_name": "Aditya Grover", "link": "https://stackoverflow.com/users/7810926/aditya-grover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "closed_date": 1495907294, "accepted_answer_id": 44162270, "answer_count": 3, "score": -3, "last_activity_date": 1495639032, "creation_date": 1495636946, "last_edit_date": 1495637344, "question_id": 44161699, "link": "https://stackoverflow.com/questions/44161699/segmentation-fault-on-initializing-large-arrays-using-malloc-in-c", "closed_reason": "Not suitable for this site", "title": "Segmentation Fault on Initializing Large Arrays Using malloc() in C", "body": "<p>I am writing a simple code to add two very large matrices in C. Here is the code that I am using for memory allocation:</p>\n\n<pre><code>float *h_A, *h_B, *h_C;\nsize_t size=m*n*sizeof(float);\n\nh_A = (float*) malloc(size);\nh_B = (float*) malloc(size);\nh_C = (float*) malloc(size);\n</code></pre>\n\n<p>However, on having m,n values >1000, it throws a segmentation fault. I have tried most of the other answers given on SO regarding this, but the error does not seem to go away. Can someone help me with this? </p>\n\n<p>Thanks!</p>\n\n<p>Edit: It throws this error on m,n>100000, not 1000.</p>\n"}, {"tags": ["c", "list", "struct", "typedef"], "comments": [{"owner": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "edited": false, "score": 0, "creation_date": 1495636496, "post_id": 44161471, "comment_id": 75339250, "body": "Linked lists: <a href=\"http://www.cprogramming.com/tutorial/c/lesson15.html\" rel=\"nofollow noreferrer\">cprogramming.com/tutorial/c/lesson15.html</a>"}, {"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "edited": false, "score": 0, "creation_date": 1495636658, "post_id": 44161471, "comment_id": 75339394, "body": "Please google &quot;typedef&quot;, there are lots of answers..."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495636933, "post_id": 44161471, "comment_id": 75339657, "body": "Note: <b>Never ever</b> <code>typedef</code> a pointer to a datatype!"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1495637348, "post_id": 44161471, "comment_id": 75340031, "body": "Too short for an answer; but consider how you can actually create an empty list: <code>listelement *list1 = NULL</code>. The last line of code, with the <code>typedef</code>, makes it possible to shorten this to <code>list list1 = NULL</code>."}, {"owner": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495641660, "post_id": 44161471, "comment_id": 75343334, "body": "@Olaf <code>PVOID</code>, <code>PWCSTR</code>?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "edited": false, "score": 0, "creation_date": 1495642460, "post_id": 44161471, "comment_id": 75343812, "body": "@arminb: Are they standard C names? What do you want to say?"}, {"owner": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495642583, "post_id": 44161471, "comment_id": 75343900, "body": "@Olaf No, but a popular OS defined them (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>)"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "edited": false, "score": 0, "creation_date": 1495642735, "post_id": 44161471, "comment_id": 75344004, "body": "@arminb: And that means \u2026 what? The more than 30 year old WinAPI is an example for bad coding style? That&#39;s the opposite of news (and wide-spread is not the same as &quot;popular&quot;). How does that be a counter-argument for what I wrote? Heck, when those were defined, there was not even the <code>const</code> wualifer in C. Try writing qualtifier-correct code with such <code>typedef</code>s! You ned at least two names. All this just to save typing a <code>*</code>? Do you have <b>any</b> reasonable argument for such a <code>typedef</code> (I mean something other than &quot;I don&#39;t like stars&quot;?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 1778, "user_id": 1110642, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c9330d13cc8dcc109f541b4eed800e8e?s=128&d=identicon&r=PG", "display_name": "arminb", "link": "https://stackoverflow.com/users/1110642/arminb"}, "edited": false, "score": 0, "creation_date": 1495643038, "post_id": 44161471, "comment_id": 75344194, "body": "@arminb: Btw: Most devices do <b>not</b> use Windows. The systems without this outnumber the systems with by multiple decades."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495637119, "post_id": 44161537, "comment_id": 75339824, "body": "A data-type pointer should <b>never</b> be <code>typedef</code>ed. Readability is just one aspect, but there is a simple functional aspect much more important: If you want qualifier-correct code, you need much more <code>typedef</code>s. Otherwise you cannot write e.g. const-correct code. And that makes the file-namespace explode."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1495637235, "post_id": 44161537, "comment_id": 75339927, "body": "@Olaf Agreed, but it&#39;s not the really an issue with the answer if the question is the source of this <code>typedef</code>? =)"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 1, "last_activity_date": 1495636556, "creation_date": 1495636556, "answer_id": 44161537, "question_id": 44161471, "link": "https://stackoverflow.com/questions/44161471/how-exactly-does-this-code-work/44161537#44161537", "title": "How exactly does this code work?", "body": "<p>Well, basically a <code>typedef</code>  creates a type alias.</p>\n\n<p>So the first one creates the alias <code>listelement</code> for <code>struct list_element</code>.</p>\n\n<p>The second builds upon that, and creates the alias <code>list</code> for <code>listelement *</code> (which of course is just a <code>struct list_element *</code>).</p>\n\n<p>In general, using <code>typedef</code> to \"hide\" pointers can be clumsy and annoying, since in C you really need to care quite often whether something is a pointer or not.</p>\n"}], "owner": {"reputation": 13, "user_id": 8060117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58fdd36e1a99bae6cf6b22aa3d7388b0?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8060117/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 44161537, "answer_count": 1, "score": -2, "last_activity_date": 1495636871, "creation_date": 1495636378, "last_edit_date": 1495636871, "question_id": 44161471, "link": "https://stackoverflow.com/questions/44161471/how-exactly-does-this-code-work", "title": "How exactly does this code work?", "body": "<p>I have this code:</p>\n\n<pre><code>struct list_element {\n    int value;\n    struct list_element *next;\n};\n\ntypedef struct list_element listelement;\n</code></pre>\n\n<p>The above is not the problem. I get that. But what does the following do?</p>\n\n<pre><code>typedef listelement * list;\n</code></pre>\n\n<p>I want to create a struct list, that is similar to the empty list in python. I was told that the above does that, but I don't get how this works.</p>\n"}, {"tags": ["c", "text"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 3, "creation_date": 1495636026, "post_id": 44161256, "comment_id": 75338871, "body": "For starters, <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\"><code>while(!feof())</code></a>  is always wrong."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495636112, "post_id": 44161256, "comment_id": 75338931, "body": "What is the <b>exact</b> contents of the text file being used? Paste it into your question using the code formatting option. Now run the program in the debugger. <b>When</b> does it fail? Get a backtrace from that point, and put that in your question too. Also, please indent your code properly, and put spaces around operators. Right now it&#39;s basically a solid, unreadable mass. Apart from the extra blank lines in some places for no apparent reason."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 2, "creation_date": 1495636292, "post_id": 44161256, "comment_id": 75339078, "body": "Check return value of <code>fopen</code>."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1495636406, "post_id": 44161256, "comment_id": 75339178, "body": "you have to check that <code>i</code> is below 10, why not compute sum directly into the while loop. You have to open only once the file and rewind it"}, {"owner": {"reputation": 23, "user_id": 8018056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2c7701dee935952a09819cdb48e04?s=128&d=identicon&r=PG&f=1", "display_name": "Szima L.", "link": "https://stackoverflow.com/users/8018056/szima-l"}, "edited": false, "score": 0, "creation_date": 1495636444, "post_id": 44161256, "comment_id": 75339209, "body": "i edited my sourcecode like this:  FILE *f1=fopen(&quot;in1feladat.txt&quot;,&quot;r&quot;);     if(f1){     etc...       it gives 0 so basically the fopen is wrong..."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495636551, "post_id": 44161256, "comment_id": 75339306, "body": "<code>my txt is located next to the main.c</code> - and wherever <code>main.c</code> is is not guaranteed to be where the compiled executable runs from, possibly explaining why it can&#39;t open the file. You need to ensure that the file gets put in the same folder as the executable, or in your <code>PATH</code>, or instead <code>fopen()</code> it using an absolute path."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1495636812, "post_id": 44161256, "comment_id": 75339552, "body": "Better yet, pass the path to the file as a command line argument."}, {"owner": {"reputation": 23, "user_id": 8018056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2c7701dee935952a09819cdb48e04?s=128&d=identicon&r=PG&f=1", "display_name": "Szima L.", "link": "https://stackoverflow.com/users/8018056/szima-l"}, "edited": false, "score": 0, "creation_date": 1495636912, "post_id": 44161256, "comment_id": 75339632, "body": "FILE *f1=fopen(&quot;C:\\Users\\lszima\\Desktop\\proggg\\fannikahelp\\in1fel&zwnj;&#8203;adat.txt&quot;,&quot;r&quot;);                          i have put the aboslute path it gives error: incomplete universal character name\\U     warning: universal chacater names are only valid in C++"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495637149, "post_id": 44161256, "comment_id": 75339854, "body": "Quoted code only has <code>while(!feof(f1)){</code> near line 16, not <code>while(feof(f1)</code>."}, {"owner": {"reputation": 23, "user_id": 8018056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2c7701dee935952a09819cdb48e04?s=128&d=identicon&r=PG&f=1", "display_name": "Szima L.", "link": "https://stackoverflow.com/users/8018056/szima-l"}, "edited": false, "score": 0, "creation_date": 1495637342, "post_id": 44161256, "comment_id": 75340022, "body": "corrected.sorry it was a typo"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495643070, "post_id": 44161256, "comment_id": 75344218, "body": "the function: <code>fopen()</code> returns a pointer, not an integer.  so it never returns 0,  but if it failed, it will return NULL.   When it returns NULL, then call <code>perror( &quot;fopen failed&quot; );</code> this results in output to <code>stderr</code> of &quot;fopen failed&quot; followed by the error message supplied by the system. The error message tells why the system thinks the call to <code>fopen()</code> failed."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495643260, "post_id": 44161256, "comment_id": 75344333, "body": "did you ever actually compile the posted code?  When compiling, always enable all the warnings.  Then, amongst other warnings would be: a warning about the second declaration of the variable <code>f1</code> and the undefined variable <code>f2</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495643705, "post_id": 44161256, "comment_id": 75344610, "body": "in the path(s) to the target input file, the \\ characters must be doubled. I.E. \\\\"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495644015, "post_id": 44161256, "comment_id": 75344803, "body": "the posted code contains several &#39;magic&#39; numbers.  &#39;magic&#39; numbers are numbers with no basis.  I.E. 10, 100.  &#39;magic&#39; numbers make the code much more difficult to understand, debug, etc.  Suggest using a <code>enum</code> statement or <code>#define</code> statements to give those &#39;magic&#39; numbers meaningful names, then use those meaningful names throughout the code.  Note: in general, the max characters (second parameter of <code>fgets()</code> ) should be something similar to <code>sizeof(szavak)</code> rather than a hard coded number"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495644338, "post_id": 44161256, "comment_id": 75344986, "body": "regarding: <code>double atlag=0;</code>  the &#39;0&#39;  literal is an integer, but it is being assigned to a double.  (the implicit conversion feature may save you, but you should not depend on such conversions.  Suggest: <code>double atlag=0.0;</code>  Similar considerations exist for: <code>t[i]=strlen(szo);</code> where a <code>size_t</code> is being assigned to an <code>int</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495646129, "post_id": 44161256, "comment_id": 75345997, "body": "the call to <code>fgets()</code> inputs everything on the line, including the trailing newline sequence.  So after every call to <code>fgets()</code> there needs to be something like: <code>char *newline = NULL;  if( NULL != (newline = strchr( szo,  &#39;\\n&#39; ) ) ) { *newline = &#39;\\0&#39;; }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495645147, "post_id": 44162505, "comment_id": 75345429, "body": "strongly suggest: <code>instead of the first call to </code>fclose( f1 )<code>, replace with </code>rewind(f1)` the remove the second call to <code>fopen()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495645294, "post_id": 44162505, "comment_id": 75345519, "body": "strongly suggest: follow the axiom: *only one statement per line and (at most) one variable declaration per statement.   This kind of thing: <code>{sum+=strlen(szo);</code> makes the code much more difficult to read/understand/debug"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495645467, "post_id": 44162505, "comment_id": 75345630, "body": "for ease of readabiliy and understanding: 1) consistently indent the code. indent after every opening brace &#39;{&#39;.  unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces.  2) separate code blocks (for, if, else, while, do...while, switch, case, default) via a single blank line."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495645552, "post_id": 44162505, "comment_id": 75345684, "body": "this answer still fails to check (!=NULL) the returned value from <code>fopen()</code> to assure the operation was successful."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495645713, "post_id": 44162505, "comment_id": 75345766, "body": "leaving out common horizontal spacing is one of the ways to obscure C code.  That is a poor programming practice. The code will execute exactly the same  if it is written to be very readable.  At a minimum insert a space inside parens, after <code>;</code> (semicolons) and after <code>,</code> (commas)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495665819, "post_id": 44162505, "comment_id": 75355043, "body": "<code>if(strlen(szo)&gt;avg)</code> --&gt; <code>if(strlen(szo)&lt;avg)</code>"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495784577, "post_id": 44162505, "comment_id": 75405639, "body": "@user3629249, Strongly suggest, use a temporary file to store words.  This is a two pass algorithm, and sometimes (as working with input redirected from a pipe, for example) that you have no access to <code>rewind(f1)</code> to make the second pass."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1495784675, "post_id": 44162505, "comment_id": 75405685, "body": "@szimaL, if you want to illustrate something, and you take the time to write it as a response, please, read the SO documentation about how to format the source code and edit your answer to make it readable at all.  Thanks."}], "tags": [], "owner": {"reputation": 23, "user_id": 8018056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2c7701dee935952a09819cdb48e04?s=128&d=identicon&r=PG&f=1", "display_name": "Szima L.", "link": "https://stackoverflow.com/users/8018056/szima-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1495639161, "creation_date": 1495639161, "answer_id": 44162505, "question_id": 44161256, "link": "https://stackoverflow.com/questions/44161256/print-words-which-are-shorter-than-the-average-length-of-the-words-in-a-text-fil/44162505#44162505", "title": "print words which are shorter than the average length of the words in a text file in C", "body": "<p>I have found an another - simplier solution, thank you very much for your help all.</p>\n\n<p>cheers.</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n    #include&lt;stdlib.h&gt;\n   #include&lt;string.h&gt;\n\nint main(){\n\nchar szo[50];\n int db=0, sum=0;\nFILE * fin=fopen(\"in1feladat.txt\",\"r\");\n\nwhile(fscanf(fin,\"%s\",szo)!=EOF)\n{sum+=strlen(szo);\ndb++;\n\n}\ndouble avg=sum*1.0/db;\n\nfclose(fin);\nfin=fopen(\"in1feladat.txt\",\"r\");\nwhile(fscanf(fin,\"%s\",szo)!=EOF)\n{if(strlen(szo)&gt;avg)\nprintf(\"%s\\n\",szo);\n\n}\n\n\nfclose(fin);\n\nreturn 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8018056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2c7701dee935952a09819cdb48e04?s=128&d=identicon&r=PG&f=1", "display_name": "Szima L.", "link": "https://stackoverflow.com/users/8018056/szima-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495639161, "creation_date": 1495635946, "last_edit_date": 1495637321, "question_id": 44161256, "link": "https://stackoverflow.com/questions/44161256/print-words-which-are-shorter-than-the-average-length-of-the-words-in-a-text-fil", "title": "print words which are shorter than the average length of the words in a text file in C", "body": "<p>I would like to print the words to the screen, which length's is shorter than the average length of the all words which are in a text file.</p>\n\n<p>My text file : in1feladat.txt</p>\n\n<p>words are here:</p>\n\n<pre><code>negy\n\u00f6t\u00f6t\u00f6\nhathat\nhetheth\nnyolcnyo\n</code></pre>\n\n<p>so the average length is 6 (4+5+6+7+8 / 5 = 6) so the program should write to the screen :  negy \u00f6t\u00f6t\u00f6</p>\n\n<p>my txt is located next to the main.c so its in the project folder.\nC:\\Users\\lszima\\Desktop\\proggg\\fannikahelp\\in1feladat.txt </p>\n\n<p>codeblocks returns with the following error:\nProcess terminated with status -1073741819 (0 minute(s), 1 second(s))</p>\n\n<p>debug : Program received signal SIGSEGV, Segmentation fault.\n 0x4013dd line 16 which is the while(!feof(f1)</p>\n\n<p>Can somebody help me out, what did i do wrong?</p>\n\n<p>Thank you very much.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n int main()\n {\n     FILE *f1=fopen(\"c:\\users\\lszima\\desktop\\proggg\\fannikahelp\\in1feladat.txt\",\"r\");\n     double atlag=0;\n     int sum=0;\n     int t[10];\n     int i=0;\n     char szo[100];\n     while(!feof(f1)){\n         // szavak hossza belerak\u00e1sa a t\u00f6mbbe\n         //fscanf(f1,\"%s\",szo);\n         fgets(szo,100,f1);\n         t[i]=strlen(szo);\n         i++;\n     }\n\n     int j=0;\n     for (j=0;j&lt;i;j++)\n          sum+=t[j];\n     atlag=(double)sum/(i+1);\n\n     printf(\"atlag= %lf\",atlag);\n     fclose(f1);\n\n     FILE *f1=fopen(\"c:\\users\\lszima\\desktop\\proggg\\fannikahelp\\in1feladat.txt\",\"r\");\n\n     char szavak[100];\n     while(!feof(f2)){\n          //fscanf(f2,\"%s\",szavak);\n          fgets(szavak,100,f2);\n          if(strlen(szavak)&lt;atlag)\n              printf(\"%s \",szavak);\n     }\n     return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "operator-keyword", "operator-precedence"], "comments": [{"owner": {"reputation": 4649, "user_id": 5601284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qVVND.jpg?s=128&g=1", "display_name": "byxor", "link": "https://stackoverflow.com/users/5601284/byxor"}, "edited": false, "score": 2, "creation_date": 1495635649, "post_id": 44161078, "comment_id": 75338566, "body": "Add some parentheses and you won&#39;t need to rely on operator precedence. Problem solved. (although there may be undefined behaviour with ++)"}, {"owner": {"reputation": 703, "user_id": 7959503, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jZhz50YXYTc/AAAAAAAAAAI/AAAAAAAA5pU/fdQ_dA-dKSE/photo.jpg?sz=128", "display_name": "Chris Rouffer", "link": "https://stackoverflow.com/users/7959503/chris-rouffer"}, "edited": false, "score": 2, "creation_date": 1495635804, "post_id": 44161078, "comment_id": 75338697, "body": "The answer is simple:  Don&#39;t write code like that.  Write it with parentheses, or separate lines, then let the compiler optimize it."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1495644789, "post_id": 44161078, "comment_id": 75345233, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior\">Why are these constructs (using ++) undefined behavior?</a>"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1495645447, "post_id": 44161078, "comment_id": 75345617, "body": "When I compile your code under HP-UX it runs as you expected. This comes down to &quot;implementation-defined behavior&quot;, specifically &quot;when is the ++ operator invoked?&quot;. VS is apparently not incrementing the pointer until after the statement has completed, which is reasonable as there&#39;s no sequence point in the middle of the statement. Conversely, the HP-UX C compiler increments the pointer immediately after each access (apparently - I didn&#39;t disassemble the code to check), which is allowed but not required."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1495705739, "post_id": 44161078, "comment_id": 75369160, "body": "If you write code that is difficult to fathom out when you are writing, it is best to try a different style. Think of the poor person doing maintenance (this could be you) in a few months time"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1495706716, "post_id": 44161078, "comment_id": 75369744, "body": "last line is undefined behaviour  (<code>ptr</code> written twice without a sequence point)"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1495711125, "post_id": 44161078, "comment_id": 75372455, "body": "<code>len = (u16)*ptr++ &lt;&lt;8 | *ptr++;</code> Why would you want to write code like that?  Even if it weren&#39;t undefined behavior, it&#39;s hard to understand - at best.  Good code is simple, clear, and <i>easy to understand</i>.  Who&#39;s the better coder?  The one who goes off into the weeds of the language specification and produces one line of obscure code no one else can understand, or the one who produces the same result in four lines of code a six-year-old can understand?  If you can&#39;t do the latter, <b>you don&#39;t really understand your programming language nor know how to write code</b>."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1495706859, "post_id": 44177002, "comment_id": 75369826, "body": "Side-effect of <code>++</code> is not ordered, and an operand may be evaluated earlier than you give in your list"}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1495707623, "post_id": 44177002, "comment_id": 75370301, "body": "@M.M Op said he&#39;s using visual studio 2013, i&#39;ve tested and i&#39;ve referred to that compiler, could you please elaborate what do you mean?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495708215, "post_id": 44177002, "comment_id": 75370614, "body": "There does not exist the ordering that you claim (in standard c++).  The behaviour you observe on a particular run of vc++ may or may not be replicated on other runs, even with the same compiler"}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1495710855, "post_id": 44177002, "comment_id": 75372293, "body": "@M.M Edited the answer... could you please provide the link/reference of the c/c++ standard supporting your comment? it&#39;d be cool to add it in order to provide more relevant info about the subject"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1495711771, "post_id": 44177002, "comment_id": 75372868, "body": "<a href=\"https://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior\">See here</a>"}], "tags": [], "owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "is_accepted": false, "score": 1, "last_activity_date": 1495710618, "last_edit_date": 1495710618, "creation_date": 1495704586, "answer_id": 44177002, "question_id": 44161078, "link": "https://stackoverflow.com/questions/44161078/in-c-operator/44177002#44177002", "title": "in C, *, =, ++, &lt;&lt; | operator", "body": "<p>Regarding operator precedence, I'd suggest you first take a look to this <a href=\"http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm\" rel=\"nofollow noreferrer\">table</a>. </p>\n\n<p>Now, the <code>++/--</code> can be tricky operators because you need to identify whether they're prefix or postfix operators, as you can see in the table if they were prefix ones they'd have the same precedence than <code>*</code> (Dereference).</p>\n\n<p>So, let's analize what's going with your last line <code>len = (u16)*ptr++ &lt;&lt;8 | *ptr++;</code> , there is this set of operators <code>{=, (cast), *(dereference), ++(postfix), &lt;&lt;, |}</code>, so the order of evaluation according to this <a href=\"http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm\" rel=\"nofollow noreferrer\">table</a> would be <code>++(postfix), *dereference, (type), &lt;&lt;, |, =</code></p>\n\n<p>That'd be regarding to the order of evaluation, but you need to consider:</p>\n\n<blockquote>\n  <p>Postfix increment/decrement have high precedence, but the\n  actual increment or decrement of the operand is delayed (to be\n  accomplished sometime before the statement completes execution).</p>\n</blockquote>\n\n<p>That said, here's a couple of ways to achieve what you want:</p>\n\n<pre><code>ptr[1]&lt;&lt;8 | ptr[2]\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>*(ptr+1) &lt;&lt;8 | *(ptr+2)\n</code></pre>\n\n<p>One last advice, be careful when you're dealing with operators with the same precedence, as you can see in the table, the associativity could be either left-to-right or right-to-left.</p>\n\n<p>PS: Of course, the asm code generated will depend by the compiler &amp; config used, here's an example of vs2015 in debug mode of that line:</p>\n\n<pre><code>; 7    :     u16 len = (u16)*ptr++ &lt;&lt;8 | *ptr++;\n\n    mov ecx, DWORD PTR _ptr$[ebp]\n    movzx   edx, BYTE PTR [ecx]\n    shl edx, 8\n    mov eax, DWORD PTR _ptr$[ebp]\n    movzx   ecx, BYTE PTR [eax]\n    or  edx, ecx\n    mov WORD PTR _len$[ebp], dx\n    mov edx, DWORD PTR _ptr$[ebp]\n    add edx, 1\n    mov DWORD PTR _ptr$[ebp], edx\n    mov eax, DWORD PTR _ptr$[ebp]\n    add eax, 1\n    mov DWORD PTR _ptr$[ebp], eax\n</code></pre>\n\n<p>Happy coding.</p>\n"}], "owner": {"reputation": 85, "user_id": 1395438, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8e400e18f229f8ab66c498a5f6c307c?s=128&d=identicon&r=PG", "display_name": "user1395438", "link": "https://stackoverflow.com/users/1395438/user1395438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 3, "answer_count": 1, "score": 1, "last_activity_date": 1495710618, "creation_date": 1495635479, "last_edit_date": 1495644118, "question_id": 44161078, "link": "https://stackoverflow.com/questions/44161078/in-c-operator", "title": "in C, *, =, ++, &lt;&lt; | operator", "body": "<pre><code>u8 num[] = {0x00, 0x00, 0x40};\n\nu8*ptr = num;\n\nu8 tag;\n\nu16 len;\n\ntag = *ptr++;\n\nlen = (u16)*ptr++ &lt;&lt;8 | *ptr++;\n</code></pre>\n\n<p>I expect <code>len = 0x0040</code> but len is setted with <code>0x0000</code> in visual studio 2013.\nI don't know why this is occured.\nWoud you explain with operator precedence viewpoint?</p>\n"}, {"tags": ["c", "struct", "typedef"], "comments": [{"owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 0, "creation_date": 1495635660, "post_id": 44160862, "comment_id": 75338574, "body": "You shouldn&#39;t bother at all with typedefs for structs. They are useless. They only save you typing &quot;struct&quot; here and there but obfuscate that something is a struct and needs to be operated on with <code>.</code> or <code>-&gt;</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "edited": false, "score": 2, "creation_date": 1495635799, "post_id": 44160862, "comment_id": 75338691, "body": "@Jens: that&#39;s one view \u2014 held by respected programmers.  It is not the only view \u2014 other respected programmers prefer the alternative."}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1495635546, "last_edit_date": 1495635546, "creation_date": 1495635242, "answer_id": 44160978, "question_id": 44160862, "link": "https://stackoverflow.com/questions/44160862/typedef-with-and-without-struct-name/44160978#44160978", "title": "Typedef with and without struct name", "body": "<p>If you have</p>\n\n<pre><code>typedef struct structname {\n   ..\n} typename;\n</code></pre>\n\n<p>you can write this to declare a variable <code>a</code>:</p>\n\n<pre><code>struct structname a;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>typename a; \n</code></pre>\n\n<hr>\n\n<p>If you have</p>\n\n<pre><code>typedef struct {\n   ..\n} typename;\n</code></pre>\n\n<p>you can only write this to declare a variable <code>a</code>:</p>\n\n<pre><code>typename a; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1496047438, "post_id": 44160980, "comment_id": 75485775, "body": "Then GCCXML is buggy, because it reports a named struct and no typedef? The right would be a struct with no name and a typedef with name."}], "tags": [], "owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "is_accepted": false, "score": 3, "last_activity_date": 1495635581, "last_edit_date": 1495635581, "creation_date": 1495635247, "answer_id": 44160980, "question_id": 44160862, "link": "https://stackoverflow.com/questions/44160862/typedef-with-and-without-struct-name/44160980#44160980", "title": "Typedef with and without struct name", "body": "<p>The 1st snippet defines two types:</p>\n\n<ul>\n<li><code>struct xcb_window_iterator_t</code></li>\n<li><code>xcb_window_iterator_t</code></li>\n</ul>\n\n<p>the latter one:</p>\n\n<ul>\n<li><code>xcb_void_cookie_t</code></li>\n</ul>\n\n<blockquote>\n  <p>Is the lat[t]er a type with a name and a struct without a name</p>\n</blockquote>\n\n<p>Yes, the <code>typedef</code> defines an <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html\" rel=\"nofollow noreferrer\">\"unnamed\" (or \"anonymous\") structure</a></p>\n\n<pre><code>struct\n{\n  unsigned int sequence;\n}\n</code></pre>\n\n<p>as the type <code>xcb_void_cookie_t</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1495635280, "creation_date": 1495635280, "answer_id": 44160997, "question_id": 44160862, "link": "https://stackoverflow.com/questions/44160862/typedef-with-and-without-struct-name/44160997#44160997", "title": "Typedef with and without struct name", "body": "<p>The name after the <code>struct</code> keyword is optional.  In the context of a <code>typedef</code>, that means an instance of the struct can only be declared with the given <code>typedef</code>.</p>\n\n<p>In the case of the first <code>typedef</code>, you can declare a variable of this type in either of these ways:</p>\n\n<ul>\n<li><code>struct xcb_window_iterator_t var</code></li>\n<li><code>xcb_window_iterator_t var</code>.  </li>\n</ul>\n\n<p>In the latter case, a variable of that type must be declared as:</p>\n\n<ul>\n<li><code>xcb_void_cookie_t var</code></li>\n</ul>\n"}], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "closed_date": 1495635741, "answer_count": 3, "score": 2, "last_activity_date": 1496047488, "creation_date": 1495634958, "last_edit_date": 1496047488, "question_id": 44160862, "link": "https://stackoverflow.com/questions/44160862/typedef-with-and-without-struct-name", "closed_reason": "Duplicate", "title": "Typedef with and without struct name", "body": "<p>I saw the following oddity in the XCB API header. Most types are defined with a type alias and a struct name in this way:</p>\n\n<pre><code>typedef struct xcb_window_iterator_t {\n    xcb_window_t *data;\n    int rem;\n    int index;\n} xcb_window_iterator_t;\n</code></pre>\n\n<p>But some typedefs omit the struct name.</p>\n\n<pre><code>typedef struct {\n    unsigned int sequence;\n} xcb_void_cookie_t;\n</code></pre>\n\n<p>What does this mean from the C point of view?</p>\n\n<p>Is the latter a type with a name and a struct without a name? Or is it no type but only a struct with a name?</p>\n\n<p>My confusion comes from the output of the <code>gccxml</code>. </p>\n\n<p>For <code>xcb_window_iterator_t</code> it generates a <code>Struct</code> node:</p>\n\n<pre><code>$ xmllint --format --xpath '//Struct[@name=\"xcb_window_iterator_t\"]' xcb.xml \n&lt;Struct id=\"_199\" name=\"xcb_window_iterator_t\" context=\"_1\" mangled=\"21xcb_window_iterator_t\" demangled=\"xcb_window_iterator_t\" location=\"f0:43\" file=\"f0\" line=\"43\" artificial=\"1\" size=\"128\" align=\"64\" members=\"_2240 _2241 _2242 _2243 _2244 _2245 _2246 \" bases=\"\"/&gt;\n</code></pre>\n\n<p>and a <code>Typedef</code> node:</p>\n\n<pre><code>$ xmllint --format --xpath '//Typedef[@name=\"xcb_window_iterator_t\"]' xcb.xml \n&lt;Typedef id=\"_200\" name=\"xcb_window_iterator_t\" type=\"_199\" context=\"_1\" location=\"f0:47\" file=\"f0\" line=\"47\"/&gt;\n</code></pre>\n\n<p>But for <code>xcb_void_cookie_t</code> it generates just a <code>Struct</code> node:</p>\n\n<pre><code>$ xmllint --format --xpath '//Struct[@name=\"xcb_void_cookie_t\"]' xcb.xml \n&lt;Struct id=\"_967\" name=\"xcb_void_cookie_t\" context=\"_1\" mangled=\"17xcb_void_cookie_t\" demangled=\"xcb_void_cookie_t\" location=\"f14:189\" file=\"f14\" line=\"189\" size=\"32\" align=\"32\" members=\"_3655 _3656 _3657 _3658 _3659 \" bases=\"\"/&gt;\n</code></pre>\n\n<p>But no <code>Typedef</code> node:</p>\n\n<pre><code>$ xmllint --format --xpath '//Typedef[@name=\"xcb_void_cookie_t\"]' xcb.xml \nXPath set is empty\n</code></pre>\n\n<p>Does this mean <code>xcb_void_cookie_t</code> is no type but just a struct, although the code contains the <code>typedef</code>? Or is it a bug in <code>gccxml</code>?</p>\n"}, {"tags": ["python", "c", "interpreter"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1495634687, "post_id": 44160727, "comment_id": 75337783, "body": "at some point everything is machine code language, even compiled C++... C code of python implements object oriented concepts. that&#39;s all."}, {"owner": {"reputation": 938, "user_id": 5502325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pXFxy.jpg?s=128&g=1", "display_name": "Silveris", "link": "https://stackoverflow.com/users/5502325/silveris"}, "edited": false, "score": 3, "creation_date": 1495634999, "post_id": 44160727, "comment_id": 75338031, "body": "You could do object oriented C if you wanted to, using function pointers as methods and structures as classes."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1495635039, "post_id": 44160727, "comment_id": 75338069, "body": "My bicycle is composed of  wheels and frame. But neither wheels are bicycle, nor the frame is. How can it be? See <a href=\"https://en.wikipedia.org/wiki/Fallacy_of_division\" rel=\"nofollow noreferrer\">Fallacy of Division</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1495635368, "post_id": 44160727, "comment_id": 75338326, "body": "... which says &quot;If a system as a whole has some property that none of its constituents has, this is sometimes called an <i>emergent</i> property of the system.&quot;"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495638072, "post_id": 44160727, "comment_id": 75340649, "body": "@EugeneSh. Arguably the <a href=\"https://en.wikipedia.org/wiki/Fallacy_of_composition\" rel=\"nofollow noreferrer\">Fallacy of Composition</a> applies here, depending on whether you look at &quot;(supposed) inability to do object-oriented&quot; or &quot;is object-oriented&quot; as the property. =)"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1495638750, "post_id": 44160727, "comment_id": 75341173, "body": "@Arkku Well, these two are tightly related. I presume the basic OP&#39;s premise is &quot;If python is OO then stuff python is build of has to be OO&quot;. That&#39;s division. Anyway, we are not on logic or philosophy site, so we cane loosen the strictness of the semantics:)"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 7011317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435ffdcad8ad13a7df810ee505e34aaf?s=128&d=identicon&r=PG&f=1", "display_name": "ben bitdiddle ", "link": "https://stackoverflow.com/users/7011317/ben-bitdiddle"}, "edited": false, "score": 0, "creation_date": 1495640158, "post_id": 44161267, "comment_id": 75342261, "body": "Thank you for this awesome response"}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 9, "last_activity_date": 1495636340, "last_edit_date": 1592644375, "creation_date": 1495635975, "answer_id": 44161267, "question_id": 44160727, "link": "https://stackoverflow.com/questions/44160727/why-is-everything-in-python-language-an-object-if-python-is-written-in-c/44161267#44161267", "title": "Why is everything in python language an object if python is written in C?", "body": "<p>First of all, there is nothing forcing a Python compiler written in C to have OO design internally. To assuming that the compiler must have that, is kind of like saying &quot;in order to paint a house red, you must use a brush with a red handle&quot;. There is no relation between how a tool looks and the result produced with the aid of that tool.</p>\n<p>Similarly, nothing is stopping you from using the red brush to paint your house blue. That is, nothing is stopping you from using a Python compiler to write non-OO programs.</p>\n<p>For the same reasons, the first C++ compilers were written in C.</p>\n<hr />\n<p>Regarding the subject of OO, there is no such thing as &quot;object-oriented languages&quot;. Object-orientation is a way to do <em>program design</em> and it is not related to a specific language.</p>\n<p>There are languages with support for OO features and there are languages that lack such support. Your program does not automatically turn OO just because you wrote it in Python. It is perfectly possible for your design to be a complete mess. Similarly, it is quite possible to write OO programs in C.</p>\n<p>Contrary to popular belief, C actually does support all of the most important OO features:</p>\n<ul>\n<li><p>Autonomous objects only concerned about their own designated task, with limited coupling to the outside world. This is the single-most important thing in OO and completely language-independent, as it is 100% program design.</p>\n</li>\n<li><p>Private encapsulation. Done through &quot;opaque type&quot;/&quot;opaque pointers&quot;. You can achieve full private/protected encapsulation with these. Not nearly as convenient as in languages with built-in OO support through <code>class</code> + <code>private</code>, but quite possible.</p>\n<p>(Also, far more crude, there is &quot;poor man's private&quot; with <code>static</code> file scope variables, which may or may not be an acceptable means to do private encapsulation, depending on the application.)</p>\n</li>\n<li><p>Inheritance and polymorphism. Again through &quot;opaque type&quot; combined with function pointers. By using function pointers, you kind of generate the whole virtual function look-up table manually, instead of having the compiler fixing this for you. Again, it is not nearly as pretty as in other languages but possible.</p>\n</li>\n</ul>\n<p>What C does not support is various other convenient language features such as constructors/destructors/RAII, that make OO programming a whole lot easier.</p>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 7011317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435ffdcad8ad13a7df810ee505e34aaf?s=128&d=identicon&r=PG&f=1", "display_name": "ben bitdiddle ", "link": "https://stackoverflow.com/users/7011317/ben-bitdiddle"}, "edited": false, "score": 0, "creation_date": 1495639784, "post_id": 44161571, "comment_id": 75341976, "body": "I meant the python interpreter is written in C."}, {"owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "reply_to_user": {"reputation": 35, "user_id": 7011317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435ffdcad8ad13a7df810ee505e34aaf?s=128&d=identicon&r=PG&f=1", "display_name": "ben bitdiddle ", "link": "https://stackoverflow.com/users/7011317/ben-bitdiddle"}, "edited": false, "score": 0, "creation_date": 1585658877, "post_id": 44161571, "comment_id": 107833668, "body": "@benbitdiddle Nope. The <i>CPython</i> runtime is written in C - but there ARE other Python runtimes are written in other languages. FWIW the first C compilers where written in assembly (now they are most written in C), and you could perfectly write a C compiler in Python or Java or whatever turing-complete language. In the end, it all ends up as electric current in logical circuits. Is electric current &quot;object oriented&quot; ?"}], "tags": [], "owner": {"reputation": 68674, "user_id": 41316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c31ca37c09ab42763f690e0d1355d7?s=128&d=identicon&r=PG", "display_name": "bruno desthuilliers", "link": "https://stackoverflow.com/users/41316/bruno-desthuilliers"}, "is_accepted": false, "score": 0, "last_activity_date": 1495636662, "creation_date": 1495636662, "answer_id": 44161571, "question_id": 44160727, "link": "https://stackoverflow.com/questions/44160727/why-is-everything-in-python-language-an-object-if-python-is-written-in-c/44161571#44161571", "title": "Why is everything in python language an object if python is written in C?", "body": "<p>Python is a language - that is, a grammar and syntax. As such it's not \"written\" in C nor in any other programming language. </p>\n\n<p>Implementations of the Python language (of any language actually) can be written in mostly any other turing-complete language,  there are Python implementations in C (the reference one also known as CPython), Java (named Jython), one for the .net runtime (don't ask me which language it was implemented with - probably C# but...), and Pypy which is implemented in RPython which itself is a subset of Python. </p>\n\n<p>To make a long story short: a language has nothing to do with the (possibly various) technologies used to implement that language.</p>\n"}], "owner": {"reputation": 35, "user_id": 7011317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/435ffdcad8ad13a7df810ee505e34aaf?s=128&d=identicon&r=PG&f=1", "display_name": "ben bitdiddle ", "link": "https://stackoverflow.com/users/7011317/ben-bitdiddle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 1, "closed_date": 1495651671, "answer_count": 2, "score": -1, "last_activity_date": 1495636662, "creation_date": 1495634602, "question_id": 44160727, "link": "https://stackoverflow.com/questions/44160727/why-is-everything-in-python-language-an-object-if-python-is-written-in-c", "closed_reason": "Opinion-based", "title": "Why is everything in python language an object if python is written in C?", "body": "<p>It is said: \"Everything in python is an object.\" But python is written in C and C is not an object-oriented programming language. I am aware that C has the capabilty to implement some object-oriented concepts, but shouldn't it be called a struct or somethin instead of object?</p>\n\n<p>Please clear up this mystery for me. Thank you.</p>\n"}, {"tags": ["c", "arrays", "initialization", "string-comparison"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1495634790, "post_id": 44160718, "comment_id": 75337867, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. There is not enough information in the question."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1495635005, "post_id": 44160718, "comment_id": 75338042, "body": "We need to know how the variables uses are defined and initialised."}], "answers": [{"comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1495636368, "post_id": 44161076, "comment_id": 75339142, "body": "A C string must by definition be terminated by a <code>\\0</code> character, which is itself part of the string. <code>max</code> should be of type <code>size_t</code>, which is the correct type for array indices, and <code>my_strnlen()</code> should return type <code>size_t</code>; this is also the type returned by the library <code>strlen()</code> family of functions. Code may or may not segfault after out-of-bounds access; behavior is undefined."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1495636589, "post_id": 44161076, "comment_id": 75339334, "body": "Why is this function called <code>my_strnlen()</code>? It does not return a length, but is a comparison function."}, {"owner": {"reputation": 575, "user_id": 5372951, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10154278269606110/picture?type=large", "display_name": "Samuel Faure", "link": "https://stackoverflow.com/users/5372951/samuel-faure"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1495636711, "post_id": 44161076, "comment_id": 75339454, "body": "Thanks ! Updated answer with your comments"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1495637625, "post_id": 44161076, "comment_id": 75340269, "body": "With my initial comment I had not realized that you had written a string comparison function (hasty reading, and <code>my_strnlen()</code> function name). Note that the <a href=\"http://port70.net/~nsz/c/c11/n1570.html#7.24.4.4\" rel=\"nofollow noreferrer\"><code>strcmp()</code></a> family of functions return an <code>int</code>: negative, zero, or positive, which indicates the ordering of the strings. Also note that there is no need for the stop character <code>c</code>, since strings must be null-terminated."}, {"owner": {"reputation": 575, "user_id": 5372951, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10154278269606110/picture?type=large", "display_name": "Samuel Faure", "link": "https://stackoverflow.com/users/5372951/samuel-faure"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1495638943, "post_id": 44161076, "comment_id": 75341324, "body": "Fixed the return value; I think OP want some kind of strncmp which work for non-terminated arrays of char, so the name strncmp is indeed ill-advised, since OP doesn&#39;t seem to be talking about strings, im not sure what to call it."}], "tags": [], "owner": {"reputation": 575, "user_id": 5372951, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10154278269606110/picture?type=large", "display_name": "Samuel Faure", "link": "https://stackoverflow.com/users/5372951/samuel-faure"}, "is_accepted": true, "score": 1, "last_activity_date": 1495638859, "last_edit_date": 1495638859, "creation_date": 1495635469, "answer_id": 44161076, "question_id": 44160718, "link": "https://stackoverflow.com/questions/44160718/compare-the-content-of-two-char-arrays-in-c/44161076#44161076", "title": "Compare the content of two char arrays in C", "body": "<p>I'm not sure if that's what you're asking, but there is no way to browse an array of chars in C without giving the code a stop sequence, like a \\0, or you will browse it forever (well, until a wild segfault appear...)</p>\n\n<p>You can write your own strncmp function for this, something like :</p>\n\n<pre><code>int my_strncmp(char *str1, char *str2, size_t max, char c)\n{\n    size_t n = 0;\n    while (n &lt; max)\n    {\n         if ((str1[n] != str2[n]) || (str1[n] == c) || (str2[n] == c))\n             return 0;\n         n++;\n    }\n    return 1;\n}\n</code></pre>\n\n<p>This will return 0 if your char c is met, or if the strings are different, or 1 if the string are the same until max char. Just be sure that one of the two conditions is met or you code will crash into a segfault / have undefined behavior, since you will browse out of your allowed memory range.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1495638870, "creation_date": 1495638870, "answer_id": 44162424, "question_id": 44160718, "link": "https://stackoverflow.com/questions/44160718/compare-the-content-of-two-char-arrays-in-c/44162424#44162424", "title": "Compare the content of two char arrays in C", "body": "<p>the function <code>strcmp()</code>  and the <code>strncmp()</code> are made for this exact operation,.</p>\n\n<p>You can read the <code>man</code> page for those two functions for all the details.</p>\n"}], "owner": {"reputation": 227, "user_id": 8013975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaf1024f50f718cff5dcd62b01bfa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "Jox", "link": "https://stackoverflow.com/users/8013975/jox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2092, "favorite_count": 0, "accepted_answer_id": 44161076, "answer_count": 2, "score": 0, "last_activity_date": 1495638870, "creation_date": 1495634578, "question_id": 44160718, "link": "https://stackoverflow.com/questions/44160718/compare-the-content-of-two-char-arrays-in-c", "title": "Compare the content of two char arrays in C", "body": "<p>I have a problem when I try to compare the content of two char arrays.\nSometimes \nIf the string is less than the actual size of the array, in it there is no sequence of '\\0' but often there are unexpected characters (in the xcode debug there was the '\\x01' character and in the control loop I use To check if a memory cell of the array was the same as the other, it was not the same). So to overcome this problem I decided to force the user to write the array content exactly as array size(-1): ex. array[3], the users write \"hi\" (without the \"\"). So I was wondering if there is a way to compare the two strings (I'm not talking about length but content) without fully filling the array in order to compare the content ofenter code here the two arrays through a simple cycle. (I was thinking of initializing the vector with \\ 0 but I do not know if there can be problems)\nthanks for the answers</p>\n\n<p>this is an example of the code</p>\n\n<pre><code>}while(sent !=1);\n\n\nfor(contatore=0; contatore&lt;MAXNOME; contatore++){\n\n    if(UserName[contatore] ==  persona.username[contatore]){\n\n        controlloUsr++;\n    }\n\n}\n\n\nfor(contatore=0; contatore&lt;MAXNOME; contatore++){\n\n    if(password[contatore] ==  persona.password[contatore]){\n\n                    controlloPsw++;\n    }\n\n}\n\n\nif(controlloUsr == MAXNOME &amp;&amp; controlloPsw == MAXPSW){\n\n   return 1;\n\n} else {\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "dpdk"], "comments": [{"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "edited": false, "score": 0, "creation_date": 1495635333, "post_id": 44160477, "comment_id": 75338294, "body": "Do you add an ethernet header you you just send the buffer as is?"}, {"owner": {"reputation": 29, "user_id": 8009376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d7a71f0ba15c73521fef26640ac805?s=128&d=identicon&r=PG&f=1", "display_name": "K.Xu", "link": "https://stackoverflow.com/users/8009376/k-xu"}, "reply_to_user": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "edited": false, "score": 0, "creation_date": 1495636136, "post_id": 44160477, "comment_id": 75338950, "body": "I use rte_eth_promiscuous_enable() in code to enable all used port&#39;s promiscuous mode, and i used to do experiment on two server whose NICs linked directly and find that they can communicate correctly without ethernet header."}, {"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "edited": false, "score": 0, "creation_date": 1495636573, "post_id": 44160477, "comment_id": 75339318, "body": "Well, that is the issue then, because depending on the Ethertype some frames might be dropped/consumed by the NIC. You can check the rte_eth_stats_get() to confirm if the packets were dropped by the NIC."}, {"owner": {"reputation": 29, "user_id": 8009376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d7a71f0ba15c73521fef26640ac805?s=128&d=identicon&r=PG&f=1", "display_name": "K.Xu", "link": "https://stackoverflow.com/users/8009376/k-xu"}, "reply_to_user": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "edited": false, "score": 0, "creation_date": 1495639133, "post_id": 44160477, "comment_id": 75341473, "body": "OK, i will try this. Thank you very much!"}], "answers": [{"tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": true, "score": 0, "last_activity_date": 1495635550, "creation_date": 1495635550, "answer_id": 44161106, "question_id": 44160477, "link": "https://stackoverflow.com/questions/44160477/dpdk-send-customized-pkt-but-fail-to-receive/44161106#44161106", "title": "DPDK send customized pkt but fail to receive", "body": "<p>While it is not clear from your description, you probably should add an Ethernet header at the beginning of you buffer, i.e.:</p>\n\n<pre><code>union my_pkt{\n   struct hdr{\n       struct ether_hdr; // Ethernet header\n       uint32_t id;\n       uint32_t name_len;\n       uint64_t tsc;\n       uint8_t name[100];\n   }__attribute__((__packed__)) pkt_hdr;\n   char buff[500];\n};\n</code></pre>\n\n<p>And then fill it with destination/source MACs and type in your code.</p>\n"}], "owner": {"reputation": 29, "user_id": 8009376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8d7a71f0ba15c73521fef26640ac805?s=128&d=identicon&r=PG&f=1", "display_name": "K.Xu", "link": "https://stackoverflow.com/users/8009376/k-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 44161106, "answer_count": 1, "score": 1, "last_activity_date": 1495639650, "creation_date": 1495634027, "last_edit_date": 1495639650, "question_id": 44160477, "link": "https://stackoverflow.com/questions/44160477/dpdk-send-customized-pkt-but-fail-to-receive", "title": "DPDK send customized pkt but fail to receive", "body": "<p>I'm trying to send customized packages with dpdk, but i find that some package structure will make it fail to receive. For example, i define the package structure like this:</p>\n\n<pre><code>union my_pkt{\n   struct hdr{\n       uint32_t id;\n       uint32_t name_len;\n       uint64_t tsc;\n       uint8_t name[100];\n   }__attribute__((__packed__)) pkt_hdr;\n   char buff[500];\n};\n</code></pre>\n\n<p>My server running dpdk can only receive 1st batch of pkts, but the returned value of rte_eth_tx_burst() shows much more packages which have been sent.<br>\nHowever , if i modify the structure as below:</p>\n\n<pre><code>union my_pkt{\n   struct hdr{\n       uint32_t id;\n       uint32_t name_len;\n       uint32_t tsc[2];//modify this line\n       uint8_t name[100];\n   }__attribute__((__packed__)) pkt_hdr;\n   char buff[500];\n};\n</code></pre>\n\n<p>Sending and receiving both work correctly. The only difference between two structures is that the uint64_t timestamp were replace by an uint32_t array consisting of 2 items. I debug into the i40e driver code but can not understand where it goes wrong. </p>\n\n<p>Can anybody help me? thanks!</p>\n"}, {"tags": ["c", "embedded", "stm32", "keil"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1495633343, "post_id": 44160091, "comment_id": 75336613, "body": "Do you not have <code>&quot;\\r\\n&quot;</code> in the outgoing command buffer to the modem?"}, {"owner": {"reputation": 9, "user_id": 7495051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a425080e31044107b1720a778324ff53?s=128&d=identicon&r=PG&f=1", "display_name": "Into_Embedded", "link": "https://stackoverflow.com/users/7495051/into-embedded"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1495633700, "post_id": 44160091, "comment_id": 75336930, "body": "i tried to add line send_usart2(&quot;\\r\\n&quot;); after send_usart2(Command_buffer); line, but nothing happens."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1495633995, "post_id": 44160091, "comment_id": 75337201, "body": "What makes you think it is a software problem? Have you verified that data is present on the UART lines, all the way to the GSM module? Have you measured the baudrate with your oscilloscope?"}, {"owner": {"reputation": 9, "user_id": 7495051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a425080e31044107b1720a778324ff53?s=128&d=identicon&r=PG&f=1", "display_name": "Into_Embedded", "link": "https://stackoverflow.com/users/7495051/into-embedded"}, "edited": false, "score": 0, "creation_date": 1495637040, "post_id": 44160091, "comment_id": 75339758, "body": "Baud rate is given in manual. I know that Usart1 sends everything perfectly, but i am not sure if Usart2 does. Maybe you could suggest me how could i debugg Usart2?"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1496137167, "post_id": 44160091, "comment_id": 75525387, "body": "First of all, remove the modem and connect [Terminal1 --&gt; USART1--&gt;USART2--&gt;Terminal2] and write a simple program for Rx and Tx of data for both USART i.e. a simple loopback program. Such that whatever you enter in Terminal1 window should appear on Terminal2 window and vice-versa."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 7495051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a425080e31044107b1720a778324ff53?s=128&d=identicon&r=PG&f=1", "display_name": "Into_Embedded", "link": "https://stackoverflow.com/users/7495051/into-embedded"}, "is_accepted": false, "score": 0, "last_activity_date": 1496230698, "creation_date": 1496230698, "answer_id": 44283755, "question_id": 44160091, "link": "https://stackoverflow.com/questions/44160091/sending-at-command-with-usart2-to-gsm-modemembedded-c/44283755#44283755", "title": "Sending AT command with USART2 to GSM modem[Embedded C]", "body": "<p>All i needed to configure this line form:</p>\n\n<pre><code>USART_HardwareFlowControl = USART_HardwareFlowControl_None;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>USART_HardwareFlowControl = USART_HardwareFlowControl_RTS;\n</code></pre>\n\n<p>This means that USART2 and Modem needs \"handshake\" connection type.</p>\n"}], "owner": {"reputation": 9, "user_id": 7495051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a425080e31044107b1720a778324ff53?s=128&d=identicon&r=PG&f=1", "display_name": "Into_Embedded", "link": "https://stackoverflow.com/users/7495051/into-embedded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1587, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564833617, "creation_date": 1495633190, "last_edit_date": 1564833617, "question_id": 44160091, "link": "https://stackoverflow.com/questions/44160091/sending-at-command-with-usart2-to-gsm-modemembedded-c", "title": "Sending AT command with USART2 to GSM modem[Embedded C]", "body": "<p>I am trying to send AT command thought USART1 from terminal and then using USART2 to the GSM modem[Terminal -> USART1 -> USART2 -> modem]. After sending AT command, modem do not send me back anything. What problem could it be? USART1 is working perfectly. I am using STM32 Nucleo and Keil uVision4.</p>\n\n<p>Sending function</p>\n\n<pre><code>void send_usart2(char *msg){\nsend_usart1(\"USART2 sending...\");   send_usart1(\"\\r\\n\");\nwhile (*msg){\n    while(USART_GetFlagStatus(USART2, USART_FLAG_TXE) == RESET);\n    USART_SendData(USART2, *msg++);\n    }\n    send_usart1(\"USART2 sending successful\");   send_usart1(\"\\r\\n\");\n}\n</code></pre>\n\n<p>USART2 Handler</p>\n\n<pre><code>void USART2_IRQHandler(void){\nint index = 0;\nif(USART_GetITStatus(USART2, USART_IT_RXNE) != RESET){\n    USART_ClearITPendingBit(USART2, USART_IT_RXNE);\n    Received_values[index++] = USART_ReceiveData(USART2);\n    }\n}\n</code></pre>\n\n<p>Interrupt initialization</p>\n\n<pre><code>void InitInterrupt2(void) {\nNVIC_InitTypeDef NVIC_InitStruct2;                             \nNVIC_InitStruct2.NVIC_IRQChannel = USART2_IRQn;\nNVIC_InitStruct2.NVIC_IRQChannelPreemptionPriority = 0;\nNVIC_InitStruct2.NVIC_IRQChannelSubPriority = 0;           \nNVIC_InitStruct2.NVIC_IRQChannelCmd = ENABLE;\nNVIC_Init(&amp;NVIC_InitStruct2);\n}\n</code></pre>\n\n<p>UART initialization</p>\n\n<pre><code>void InitUART2(void) {      \nGPIO_InitTypeDef GPIO_InitStructure;\nUSART_InitTypeDef USART_InitStructure;\nRCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);\nRCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);\n\nUSART_InitStructure.USART_BaudRate = 115200; \nUSART_InitStructure.USART_WordLength = USART_WordLength_8b ;\nUSART_InitStructure.USART_StopBits = USART_StopBits_1;\nUSART_InitStructure.USART_Parity = USART_Parity_No;\nUSART_InitStructure.USART_HardwareFlowControl = \nUSART_HardwareFlowControl_None;\nUSART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;\n\nUSART_Init(USART2,&amp;USART_InitStructure);         /* Configure USAR1 */                    \nUSART_ITConfig(USART2, USART_IT_RXNE, ENABLE);\nUSART_Cmd(USART2,ENABLE);                       /* Enable the USART1 */                                             \n\nGPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; \nGPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;\nGPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;\nGPIO_Init(GPIOA, &amp;GPIO_InitStructure);\n\nGPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;\nGPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;\n//GPIO_InitStructure.GPIO_Speed = GPIO_Speed_2MHz;\nGPIO_Init(GPIOA, &amp;GPIO_InitStructure);\n}\n</code></pre>\n\n<p>And this looks like how i am sending it.</p>\n\n<pre><code>    .....\n    send_usart2(Command_buffer);                \n    send_usart1(\"Command: \");\n    send_usart1(Command_buffer);\n    send_usart1(\"\\r\\n\");    \n    memset(Command_buffer, NULL, sizeof(Command_buffer));\n    os_dly_wait(500);\n    send_usart1(\"Received values: \");\n    send_usart1(Received_values);\n    send_usart1(\"\\r\\n\");\n    memset(Received_values, NULL, sizeof(Received_values));\n    .......\n</code></pre>\n"}, {"tags": ["c", "sdl"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1495630823, "post_id": 44158776, "comment_id": 75334551, "body": "This makes absolutely no sense. You are not executing the correct program."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1495633792, "post_id": 44158776, "comment_id": 75337023, "body": "thank you for your helpful comment."}, {"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "edited": false, "score": 0, "creation_date": 1495645449, "post_id": 44158776, "comment_id": 75345618, "body": "I wouldn&#39;t recommend using SDL1 when SDL2 is out and stable"}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495658232, "post_id": 44158776, "comment_id": 75352108, "body": "I followed the instructions on this site: loka.developpez.com/tutoriel/sdl/installation/linux, I see that it hasn&#39;t been updated in the last 11 years! Like you say, I must have installed an older version of SDL and it may be the reason why my program doesn&#39;t work... I&#39;ll search for a way to get SDL2 via linux bash."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495715414, "post_id": 44158776, "comment_id": 75375158, "body": "I have installed SDL2 via the command <code>sudo apt-get install libsdl2-dev</code>, I have all the .h files in <code>usr&#47;include&#47;SDL2</code>, and I use the header <code>#include &lt;SDL2&#47;SDL.h&gt;</code>. Yet the  problem remains, so I guess it&#39;s not a problem of version. the answer below my question makes me think that my code is not executed by the correct program. I don&#39;t know, it is highly unclear to me."}], "answers": [{"comments": [{"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495633892, "post_id": 44159462, "comment_id": 75337107, "body": "I typed &quot;xterm&quot; in my shell and it told me this: <a href=\"http://zupimages.net/up/17/21/87rt.png\" rel=\"nofollow noreferrer\">zupimages.net/up/17/21/87rt.png</a>"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495634482, "post_id": 44159462, "comment_id": 75337619, "body": "@nounoursnoir Well, that is probably the reason why SDL chooses libcaca over x11.  You will have to fix your environment to get it working. A <code>export DISPLAY=:0</code> might be worth a try."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495638020, "post_id": 44159462, "comment_id": 75340601, "body": "I tried <code>export DISPLAY=:0</code> and then tried to use my program again. The good thing is that it didn&#39;t do the weird screen that I had before (the one which you can see in a screenshot in the original question). The bad thing is that after 1 or 2 seconds of waiting, the <code>SDL_Init</code> line is doing a segfault :("}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495638317, "post_id": 44159462, "comment_id": 75340837, "body": "@nounoursnoir Hm, you will really have to make the xterm command work, then chances are good that your SDL-Program will work, too"}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495639390, "post_id": 44159462, "comment_id": 75341654, "body": "After using <code>export DISPLAY=:0</code>, I tried using <code>SDL_VIDEODRIVER=x11 .&#47;sdl1</code> and my program didn&#39;t segfault anymore. The thing is: I have no idea what changed, I have no idea what this command is supposed to do. I can only tell what I see... Another detail that, I think, I should bring to your attention is that the call <code>SDL_Init</code> failed: <code>(SDL_Init(SDL_INIT_VIDEO) == -1)</code> evaluated <code>true</code>..."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495639642, "post_id": 44159462, "comment_id": 75341869, "body": "How do I do to make the xterm command work? I am lost I don&#39;t really understand what xterm is even after reading the manual."}, {"owner": {"reputation": 2470, "user_id": 4262157, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DIi0C.jpg?s=128&g=1", "display_name": "Erik W", "link": "https://stackoverflow.com/users/4262157/erik-w"}, "reply_to_user": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495645590, "post_id": 44159462, "comment_id": 75345701, "body": "@nounoursnoir Are you saying that SDL fails to initialize?"}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1495657375, "post_id": 44159462, "comment_id": 75351715, "body": "yes it did, since the return value of <code>SDL_Init</code> is -1"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 1, "last_activity_date": 1495631600, "creation_date": 1495631600, "answer_id": 44159462, "question_id": 44158776, "link": "https://stackoverflow.com/questions/44158776/sdl-window-does-not-open-correctly/44159462#44159462", "title": "SDL window does not open correctly", "body": "<p>It looks like the SDL library tries to display your window using <a href=\"http://caca.zoy.org/wiki/libcaca\" rel=\"nofollow noreferrer\">libcaca</a></p>\n\n<p>First try, if you can open a connection to your XServer by executing for example <code>xterm</code> in your shell. If that works, try to start it with</p>\n\n<pre><code>SDL_VIDEODRIVER=x11 ./sdl1\n</code></pre>\n\n<p>to force the usage of the x11 video driver and see, if it works properly.</p>\n"}], "owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 473, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1495631600, "creation_date": 1495629838, "question_id": 44158776, "link": "https://stackoverflow.com/questions/44158776/sdl-window-does-not-open-correctly", "title": "SDL window does not open correctly", "body": "<p>I am learning to use the SDL library. However, amongst the many problems I faced, there is one for which I find no solution on the Internet. I set the video mode characteristics with <code>SDL_SetVideoMode</code>, but there is no new window that appears when I run the program. The only thing that happens is that my terminal shows a strange pattern but that does not look like the window I should have, and even if it did, it <strong>does not</strong> open a new window. This happens in the shell window in which I tried to run the program.</p>\n\n<p>Here is the program:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;SDL/SDL.h&gt;\n\nvoid    pause(void)\n{\n    int     on = 1;\n    SDL_Event event;\n\n    while (on == 1)\n    {\n        SDL_WaitEvent(&amp;event);\n        switch(event.type)\n        {\n            case SDL_QUIT:\n                on = 0;\n        }\n    }\n}\n\nint     main(void)\n{\n    if (SDL_Init(SDL_INIT_VIDEO) == -1)\n        return EXIT_FAILURE;\n    else\n    {\n        SDL_SetVideoMode(1024, 576, 32, SDL_HWSURFACE);\n        SDL_WM_SetCaption(\"SDL TEST\", NULL);\n        pause();\n        SDL_Quit();\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>I use a Makefile, this is what is inside of it:</p>\n\n<pre><code>FLAGS=-Wall -Wextra -Werror\nSDLFLAG=-lSDL\nNAME=sdl1\n\nall: ${NAME} clean\n\n${NAME}: ${NAME}.o\n    gcc -o ${NAME} ${NAME}.o ${FLAGS} ${SDLFLAG}\n\n${NAME}.o: ${NAME}.c\n    gcc -o ${NAME}.o -c ${NAME}.c ${FLAGS} ${SDLFLAG}\n\nclean:\n    rm -rf *.o\n\nmrproper: clean\n    rm -rf ${NAME}\n</code></pre>\n\n<p>And the result of running the program is the following:\n<a href=\"https://i.stack.imgur.com/L3NZf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L3NZf.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is happening? Why don't I have a new, empty window, named, \"SDL TEST\"?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495629733, "post_id": 44158597, "comment_id": 75333693, "body": "<code>tmp-&gt;AM&lt;CODE</code> : Use <code>strcmp</code> instead of <code>&lt;</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1495631201, "post_id": 44158597, "comment_id": 75334858, "body": "Not using all-uppercase names for anything else than macros or enum-constants is one of the few well accepted naming conventions. And don&#39;t cast the result of <code>malloc</code> &amp; friends or <code>void *</code> in general. Your prof spreads bad coding style."}, {"owner": {"reputation": 13866, "user_id": 54200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6261c8ab215b8069e8290516c80445d8?s=128&d=identicon&r=PG", "display_name": "KevinDTimm", "link": "https://stackoverflow.com/users/54200/kevindtimm"}, "edited": false, "score": 0, "creation_date": 1495636741, "post_id": 44158597, "comment_id": 75339486, "body": "What happens when you single step debug through the code for insert and search?"}], "answers": [{"tags": [], "owner": {"reputation": 276, "user_id": 6524191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f45f1a420dfcb0039c6c180a1aae5013?s=128&d=identicon&r=PG&f=1", "display_name": "Graeme Cole", "link": "https://stackoverflow.com/users/6524191/graeme-cole"}, "is_accepted": false, "score": 0, "last_activity_date": 1495630519, "creation_date": 1495630519, "answer_id": 44159048, "question_id": 44158597, "link": "https://stackoverflow.com/questions/44158597/calling-insert-function-in-c-from-a-header-file/44159048#44159048", "title": "Calling insert function in c from a header file", "body": "<p>I think your problem is in the Search() and Search2() functions, where you've got things like this:</p>\n\n<pre><code>while (tmp!=NULL &amp;&amp; tmp-&gt;AM&lt;CODE)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (tmp-&gt;AM==CODE)\nreturn tmp;\n</code></pre>\n\n<p>You're comparing the pointers, rather than the contents of the strings. If you want to compare the strings, or find which is first alphabetically, use strcmp().</p>\n\n<pre><code>while (tmp!=NULL &amp;&amp; strcmp(tmp-&gt;AM, CODE) &lt; 0)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (!strcmp(tmp-&gt;AM, CODE))\n    return tmp;\n</code></pre>\n\n<p>The same goes for the comparison between tmp->name and name in Search2().</p>\n"}], "owner": {"reputation": 205, "user_id": 7938632, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/93df02026e4ebe6223ece9b8c02f2002?s=128&d=identicon&r=PG&f=1", "display_name": "John M.", "link": "https://stackoverflow.com/users/7938632/john-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495630519, "creation_date": 1495629358, "question_id": 44158597, "link": "https://stackoverflow.com/questions/44158597/calling-insert-function-in-c-from-a-header-file", "title": "Calling insert function in c from a header file", "body": "<p>My professor send me a library to insert,delete and search elements in a linked list:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\nstruct NODE\n{\n    char AM[12];\n    char name[40];\n    int semester;\n    struct NODE *head;\n    struct NODE *next;\n    struct NODE *prev;\n};\n\nvoid init(struct NODE **head)\n{\n    *head=NULL;\n}\n\nstruct NODE *Search (struct NODE *head,char CODE[],struct NODE **prev)\n{\n    struct NODE *tmp;\n    *prev=NULL;\n    tmp=head;\n    while (tmp!=NULL &amp;&amp; tmp-&gt;AM&lt;CODE)\n    {\n        *prev=tmp;\n        tmp=tmp-&gt;next;\n    }\n    if (tmp==NULL)\n    return NULL;\n    if (tmp-&gt;AM==CODE)\n    return tmp;\n    return NULL;\n}\n\nstruct NODE *Search2 (struct NODE *head,char name[],struct NODE **prev)\n{\n    struct NODE *tmp;\n    *prev=NULL;\n    tmp=head;\n    while (tmp!=NULL &amp;&amp; tmp-&gt;name&lt;name)\n    {\n        *prev=tmp;\n        tmp=tmp-&gt;next;\n    }\n    if (tmp==NULL)\n    return NULL;\n    if (tmp-&gt;name==name)\n    return tmp;\n    return NULL;\n}\n\nint Insert (struct NODE **H,struct NODE P)\n{\n    struct NODE *cur,*prev;\n    cur=Search(*H,P.AM,&amp;prev);\n    if (cur)\n    return 0;\n    cur=(struct NODE *)malloc(sizeof P);\n    *cur=P;\n    if (prev==NULL)\n    {\n        cur-&gt;next=*H;\n        *H=cur;\n    }\n    else\n    {\n        cur -&gt; next = prev -&gt; next;\n        prev -&gt; next = cur;\n    }\n    return 1;\n}\n\nint Delete (struct NODE **H,char AM[])\n{\n    struct NODE *cur,*prev,*next;\n    cur=Search(*H,AM,&amp;prev);\n    if (!cur)\n    return 0;\n    if (prev==NULL)\n    cur=next;\n    else\n    prev-&gt;next=cur-&gt;next;\n    free(cur);\n    return 1;\n}\n\nvoid traverse (struct NODE *head)\n{\n    struct NODE *cur;\n    cur=head;\n    while (cur)\n    {\n        printf (\"%p\\n\",cur);\n        cur=cur-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Now here is a piece of code from the source file that i created in an attempt to insert an element in the linked list:</p>\n\n<pre><code>case 1:printf (\"Input AM,name and semester of student: \"); \ntmp=(struct NODE *)malloc(sizeof(struct NODE)); \nif (tmp==NULL) \nexit(1); \nscanf(\"%s %s %d\",tmp-&gt;AM,tmp-&gt;name,&amp;tmp-&gt;semester); \n_flag=Insert(&amp;head,*tmp); \nif(_flag) \nprintf (\"Student inserted succesfully!\\n\"); \nfree(tmp);\nbreak;\n</code></pre>\n\n<p>When i insert the element i get the \"Student inserted succesfully\" message,but when i call the search function to find that element,it returns NULL (meaning that the element is not in the list).How should i call the Insert function from the header file? (I assume the problem must be in the Insert function).Also in main() i have declared the following two:</p>\n\n<pre><code>struct NODE *head;\nstruct NODE *tmp;\n</code></pre>\n\n<p>Should i change something regarding those two?</p>\n"}, {"tags": ["c", "visual-studio-2017"], "comments": [{"owner": {"reputation": 1260, "user_id": 1602184, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/9a65b4b6de5bf00c8dca49d833195ae4?s=128&d=identicon&r=PG", "display_name": "How Chen", "link": "https://stackoverflow.com/users/1602184/how-chen"}, "edited": false, "score": 0, "creation_date": 1495629567, "post_id": 44158335, "comment_id": 75333564, "body": "Move cmd[] define out of header file, place it in your local c file, namely complex.c and access it by API"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1495630875, "post_id": 44158335, "comment_id": 75334590, "body": "complex.h is a standard library header. Do not name your own headers the same thing as existing libraries, or you might get all manner of weird errors."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1495638176, "post_id": 44158335, "comment_id": 75340728, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34748913/lnk2005-error-in-clr-windows-form\">LNK2005 Error in CLR Windows Form</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7346473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40b3cf5b0f4f340089252cd71286abf4?s=128&d=identicon&r=PG&f=1", "display_name": "Gedaan", "link": "https://stackoverflow.com/users/7346473/gedaan"}, "edited": false, "score": 0, "creation_date": 1495631143, "post_id": 44158459, "comment_id": 75334812, "body": "Hi Ctx and thank you for your answer, i got this error when correcting the the code as you wrote : Error C2372\t&#39;cmd&#39;: redefinition; different types of indirection\tmman22\tc:\\users\\sofi lt3\\desktop\\documents\\visual studio 2017\\projects\\mman13\\mman13\\complex.c\t3"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 2, "last_activity_date": 1495628964, "creation_date": 1495628964, "answer_id": 44158459, "question_id": 44158335, "link": "https://stackoverflow.com/questions/44158335/c-error-lnk2005-cmd-already-defined-in-complex/44158459#44158459", "title": "C - error LNK2005, _cmd already defined in complex", "body": "<p>Since you define the struct <code>cmd</code> in complex.h it will be instantiated in both object files, which then leads to the linking error.</p>\n\n<p>You should define the struct only in one of the two files and <em>declare it extern</em> it in your header file.</p>\n\n<p>This goes into your header file:</p>\n\n<pre><code>struct STR{\n    char* name;\n    void(*func)(void);/*pointer to function*/\n};\nextern struct STR *cmd;\n</code></pre>\n\n<p>And this for example in complex.c:</p>\n\n<pre><code>struct STR cmd[] = {\n  { \"read_comp\", read_comp },\n  { \"print_comp\", print_comp },\n  { \"add_comp\", add_comp },\n  { \"sub_comp\", sub_comp },\n  { \"mult_comp_real\", mult_comp_real },\n  { \"mult_comp_img\", mult_comp_img },\n  { \"mult_comp_comp\", mult_comp_comp },\n  { \"abs_comp\", abs_comp },\n  { \"halt\", halt },\n  { \"stop\", stop }\n};\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7346473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/40b3cf5b0f4f340089252cd71286abf4?s=128&d=identicon&r=PG&f=1", "display_name": "Gedaan", "link": "https://stackoverflow.com/users/7346473/gedaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495629224, "creation_date": 1495628592, "last_edit_date": 1495629224, "question_id": 44158335, "link": "https://stackoverflow.com/questions/44158335/c-error-lnk2005-cmd-already-defined-in-complex", "title": "C - error LNK2005, _cmd already defined in complex", "body": "<p>I got this error when compiling my code in visual studio and i need help please :\n<code>Error LNK2005: _cmd already defined in complex.obj</code></p>\n\n<p>I have the following C Files :</p>\n\n<pre><code>### File name: Main.c ###\n\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"complex.h\"\n\n\nint main()\n{\n    char command[30];\n    int i;\n    FOREVER \n        if (scanf(\"%s\", command) == 1)\n        {\n            for (i = 0; cmd[i].func != NULL; i++)/*searcing the relevant function*/\n            {\n                if (strcmp(command, cmd[i].name) == 0)\n                    break;\n            }\n            if (cmd[i].func == NULL)\n                printf(\"Command does not exist: %s\\n\", command);\n            else\n                (*(cmd[i]).func)();\n        }\n}\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>### File name: Complex.h ###\n#define FOREVER for(;;)\n\ntypedef struct complex\n{\n    double real;\n    double imag;\n}complex;\n\n\nvoid read_comp(void);\nvoid print_comp(void);\nvoid add_comp(void);\nvoid sub_comp(void);\nvoid mult_comp_real(void);\nvoid mult_comp_img(void);\nvoid mult_comp_comp(void);\nvoid abs_comp(void);\nvoid halt(void);\nvoid empty_string(void);\nvoid stop(void);\n\nstruct STR{\n    char* name;\n    void(*func)(void);/*pointer to function*/\n}cmd[] = {\n    { \"read_comp\", read_comp },\n    { \"print_comp\", print_comp },\n    { \"add_comp\", add_comp },\n    { \"sub_comp\", sub_comp },\n    { \"mult_comp_real\", mult_comp_real },\n    { \"mult_comp_img\", mult_comp_img },\n    { \"mult_comp_comp\", mult_comp_comp },\n    { \"abs_comp\", abs_comp },\n    { \"halt\", halt },\n    { \"stop\", stop }\n};\n</code></pre>\n\n<p>and this:</p>\n\n<pre><code>### File name: Complex.c ###    \n#include \"complex.h\"\n\n    void stop(void)\n    {\n        exit(1);\n    }\n\n    void read_comp(void)\n    {\n        printf(\"read_comp\\n\");\n    }\n    void print_comp(void)\n    {\n        printf(\"print_comp\\n\");\n    }\n    void add_comp(void)\n    {\n        printf(\"add_comp\\n\");\n    }\n    void sub_comp(void)\n    {\n        printf(\"sub_comp\\n\");\n    }\n    void mult_comp_real(void)\n    {\n        printf(\"mult_comp_real\\n\");\n    }\n    void mult_comp_img(void)\n    {\n        printf(\"mult_comp_img\\n\");\n    }\n    void mult_comp_comp(void)\n    {\n        printf(\"mult_comp_comp\\n\");\n    }\n    void abs_comp(void)\n    {\n        printf(\"abs_comp\\n\");\n    }\n    void halt(void)\n    {\n        printf(\"halt\\n\");\n    }\n    void empty_string(void)\n    {\n        printf(\"Empty sting, Please try again\\n\");\n    }\n</code></pre>\n\n<p>We have here some functions that get some parameters as inputs through the command line. The functions implementation is not finished yet.\nPlease i need help with solving the error.</p>\n"}, {"tags": ["c", "stack"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1495627034, "post_id": 44157718, "comment_id": 75331676, "body": "Unrelated to your problem, but even though strings are null-terminated it doesn&#39;t mean <code>NULL</code>. <code>NULL</code> is used for null <i>pointers</i>. The null-termination character is either <code>&#39;\\0&#39;</code> or its integer equivalent <code>0</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1495627104, "post_id": 44157718, "comment_id": 75331726, "body": "As for your problem, please take some time to read about <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">how to debug small programs</a>, and learn how to use a debugger to step through your code line by line while monitoring variables and their values. Also I recommend you to print out e.g. <code>pos2</code> to make sure the postfix expression is correct."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 5, "creation_date": 1495627782, "post_id": 44157718, "comment_id": 75332204, "body": "Hmm... interesting that <code>-61 + 256 == 195</code>. Signed overflow?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7814919"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495628527, "post_id": 44157718, "comment_id": 75332808, "body": "@Someprogrammerdude Thank you for your advice! The code was from a tutorial book for Data Structure in C. And I added some parts to make a prgoram which has the function by myself."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7814919"}, "edited": false, "score": 0, "creation_date": 1495628425, "post_id": 44158108, "comment_id": 75332738, "body": "Thak you! I changed &#39;char&#39; into &#39;int&#39; and it works well. I was forgetting that I didn&#39;t change the part to make the program..."}], "tags": [], "owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "is_accepted": true, "score": 3, "last_activity_date": 1495628364, "last_edit_date": 1495628364, "creation_date": 1495627933, "answer_id": 44158108, "question_id": 44157718, "link": "https://stackoverflow.com/questions/44157718/wrong-answer-from-a-program-infix-notation-postfix-notation-in-c/44158108#44158108", "title": "Wrong answer from a program (infix notation-&gt;postfix notation) in C", "body": "<p>The clue is <code>61+195 = 256</code>. Which means that somewhere, your computations are being saved to chars.  Looks like it is <code>element</code>.</p>\n\n<pre><code>typedef element int;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7814919"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 44158108, "answer_count": 1, "score": 0, "last_activity_date": 1495628364, "creation_date": 1495626911, "last_edit_date": 1592644375, "question_id": 44157718, "link": "https://stackoverflow.com/questions/44157718/wrong-answer-from-a-program-infix-notation-postfix-notation-in-c", "title": "Wrong answer from a program (infix notation-&gt;postfix notation) in C", "body": "<p>I made a program which changes infix notation to postfix notation with using stack in C.</p>\n<p>I made a function which prints the result of the postfix notation(from infix notaton).</p>\n<p>But, the result of a notation is wrong. This should be '195' but its result is '-61'.</p>\n<p>The results of the other notations are right but only the notation(op2) has this problem.</p>\n<p>What should I do to fix this problem?</p>\n<p><strong>This is my code:</strong></p>\n<pre><code>typedef char element;\n \ntypedef struct {\n    element stack[MAX_STACK_SIZE];\n    int top;\n} StackType;\n \n\nvoid init(StackType *s) {\n    s-&gt;top = -1;\n}\n\nint is_empty(StackType *s) {\n    return (s-&gt;top == -1);\n}\n\nint is_full(StackType *s) {\n    return (s-&gt;top == (MAX_STACK_SIZE - 1));\n}\n\n \nvoid push(StackType *s, element item) {\n    if (is_full(s)) {\n        fprintf(stderr, &quot;FULL STACK ERROR\\n&quot;);\n        return;\n    }\n    else s-&gt;stack[++(s-&gt;top)] = item;\n}\n \nelement pop(StackType *s) {\n    if (is_empty(s)) {\n        fprintf(stderr, &quot;EMPTY STACK ERROR\\n&quot;);\n        exit(1);\n    }\n    else return s-&gt;stack[(s-&gt;top)--];\n}\n \n \nint eval(char exp[]) {\n    int op1, op2, value, i = 0;\n    int len = strlen(exp);\n    char ch;\n    StackType s;\n    init(&amp;s);\n    for (i = 0; i &lt; len; i++) {\n        ch = exp[i];\n        if (ch != '+' &amp;&amp; ch != '-' &amp;&amp; ch != '*' &amp;&amp; ch != '/') {\n            value = ch - '0';        \n            push(&amp;s, value);\n        }\n        else {                          \n            op2 = pop(&amp;s);\n            op1 = pop(&amp;s);\n            switch (ch) {            \n            case '+': push(&amp;s, op1 + op2); break;\n            case '-': push(&amp;s, op1 - op2); break;\n            case '*': push(&amp;s, op1 * op2); break;\n            case '/': push(&amp;s, op1 / op2); break;\n            }\n        }\n    }\n    return pop(&amp;s);\n}\n \nchar* infix_to_postfix(char exp[]) {\n    int i = 0, j = 0;\n    char ch, top_op;\n    int len = strlen(exp);\n    char *ex = (char *)malloc(sizeof(char)*(len + 1));\n    StackType s;\n\n    init(&amp;s);\n    for (i = 0; i &lt; len; i++) {\n        ch = exp[i];\n        switch (ch) {\n        case '+': case '-': case '*': case '/': \n            while (!is_empty(&amp;s) &amp;&amp; (prec(ch) &lt;= prec(peek(&amp;s)))) {\n                ex[j++] = pop(&amp;s);\n            }\n            push(&amp;s, ch);\n            break;\n        case '(':       \n            push(&amp;s, ch);\n            break;\n        case ')':       \n            top_op = pop(&amp;s);\n            while (top_op != '(') {\n                ex[j++] = top_op;\n                top_op = pop(&amp;s);\n            }\n            break;\n        default:\n            ex[j++] = ch;\n            break;\n        }\n    }\n    while (!is_empty(&amp;s)) {\n        ex[j++] = pop(&amp;s);\n    }\n    ex[j] = NULL;           \n    return ex;\n}\n\nvoid main() {\n    char *op1 = &quot;(9-(3+2))*3+4*((4+2)/3)-1&quot;;\n    char *op2 = &quot;(4*5-3)/3+((2+5*7)-8+9)*5&quot;;          \n    char *op3 = &quot;7*3-7-4+1/3+6-8*2&quot;;\n    char *pos1, *pos2, *pos3;\n \n    pos1 = infix_to_postfix(op1);\n    pos2 = infix_to_postfix(op2);\n    pos3 = infix_to_postfix(op3);\n \n    printf(&quot; Result : %d\\n&quot;, eval(pos1));\n    printf(&quot; Result : %d\\n&quot;, eval(pos2));\n    printf(&quot; Result : %d\\n&quot;, eval(pos3));\n}\n</code></pre>\n<p><strong>[RESULT]</strong></p>\n<blockquote>\n<p>Result : 19</p>\n<p>Result : -61   // This should be '195'.</p>\n<p>Result : 0</p>\n</blockquote>\n"}, {"tags": ["c", "printf", "scanf"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 9, "creation_date": 1495626676, "post_id": 44157594, "comment_id": 75331394, "body": "<code>scanf(&quot;%d&quot;,&amp;ch);</code>--- undefined behaviour."}, {"owner": {"reputation": 29, "user_id": 8059163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b72da731e2ea53600285464aa02f2d?s=128&d=identicon&r=PG", "display_name": "Pranjal Kanyal", "link": "https://stackoverflow.com/users/8059163/pranjal-kanyal"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495626842, "post_id": 44157594, "comment_id": 75331533, "body": "but how can scanf(&quot;%d&quot;,&amp;ch); alter the value of variable num"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495626878, "post_id": 44157594, "comment_id": 75331566, "body": "Read the linked article in the answer."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1495627191, "post_id": 44157594, "comment_id": 75331787, "body": "Next time enable all warnings &amp; debug info in the compiler. With <a href=\"http://gcc.gnu.org/\" rel=\"nofollow noreferrer\">GCC</a> use <code>gcc -Wall -Wextra -g</code>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1495627564, "post_id": 44157594, "comment_id": 75332047, "body": "@PranjalKanyal please read Sourav&#39;s <a href=\"https://stackoverflow.com/a/44157669/2411320\">answer</a>, which answers your question, and do not forget to <i>accept</i> it, if you like it. =)"}, {"owner": {"reputation": 29, "user_id": 8059163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b72da731e2ea53600285464aa02f2d?s=128&d=identicon&r=PG", "display_name": "Pranjal Kanyal", "link": "https://stackoverflow.com/users/8059163/pranjal-kanyal"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1495628115, "post_id": 44157594, "comment_id": 75332483, "body": "@BasileStarynkevitch thanks for the information, great help"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1495633908, "post_id": 44157594, "comment_id": 75337115, "body": "ooh someone got angry and downvoted all the answers ... but why?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495639677, "post_id": 44157594, "comment_id": 75341904, "body": "lets start with the posted code does not cleanly compile.  That is ALL you need to look at.  Fix the compiler warnings!   This is yet another example of why compiler warnings need to be fixed.  When compiling, always enable the warnings.  (for <code>gcc</code>, at a minimum use: <code>-Wall -Wextra -pedantic&#39;</code>  I also use: <code>-Wconversion -std=gnu11</code> )"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1515899871, "post_id": 44157594, "comment_id": 83475443, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16864552/what-happens-when-i-use-the-wrong-format-specifier\">What happens when I use the wrong format specifier?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 2, "last_activity_date": 1495626778, "creation_date": 1495626778, "answer_id": 44157667, "question_id": 44157594, "link": "https://stackoverflow.com/questions/44157594/why-printf-with-d-specifier-giving-wrong-result/44157667#44157667", "title": "why printf with %d specifier giving wrong result?", "body": "<p>This</p>\n\n<pre><code>char ch;\nscanf(\"%d\", &amp;ch);\n</code></pre>\n\n<p>will invoke <strong>Undefined Behavior</strong>, since you are using the format for an integer, to store it in a character.</p>\n"}, {"comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1495639962, "post_id": 44157669, "comment_id": 75342107, "body": "I didn&#39;t down vote this answer, but (as I see it) this answer is not correct.  The real problem is the posted code does not cleanly compile.  The OP should not have ask this question.  Rather the OP should have compiled with warnings enable, fixed the warnings, and the &#39;problem&#39; goes away."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 1, "creation_date": 1495640690, "post_id": 44157669, "comment_id": 75342668, "body": "@user3629249 so that is a problem with the question, that&#39;s not a reason to downvote a valid answer. Just my two cents. Though I know it all starts from missing keys...."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1495660912, "post_id": 44157669, "comment_id": 75353345, "body": "@SouravGhosh your answer is valid, do not mind for the downvote...It was probably the one we all the answers received here! :/"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495724706, "post_id": 44157669, "comment_id": 75381573, "body": "@SouravGhosh,  As I stated, I did not downvote this answer.  However, this answer is not the aimed at the source of the problem."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495778429, "post_id": 44157669, "comment_id": 75402674, "body": "@user3629249, why the problem being that it does not cleanly compile is enough reason to mark this question as <i>should not be asked</i> here?   Most probably the OP has not been able to interpret the compiler message, or does not fully understand the peculiarities of <code>scanf()</code>.  Don&#39;t be so strict."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495906333, "post_id": 44157669, "comment_id": 75450173, "body": "When a program does not cleanly compile, the results could be anything.  In this case, the observed problems are from the program NOT cleanly compiling"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1495627270, "last_edit_date": 1495627270, "creation_date": 1495626782, "answer_id": 44157669, "question_id": 44157594, "link": "https://stackoverflow.com/questions/44157594/why-printf-with-d-specifier-giving-wrong-result/44157669#44157669", "title": "why printf with %d specifier giving wrong result?", "body": "<p>It's not specifically with <code>printf()</code>, the issue is caused by the erroenous call to <code>scanf()</code>. </p>\n\n<p>Quoting <code>C11</code>, chapter \u00a77.21.6.2</p>\n\n<blockquote>\n  <p>[...] Unless assignment suppression was indicated by a <code>*</code>, the\n  result of the conversion is placed in the object pointed to by the first argument following\n  the format argument that has not already received a conversion result. If this object\n  does not have an appropriate type, or if the result of the conversion cannot be represented\n  in the object, the behavior is undefined.</p>\n</blockquote>\n\n<p>For <code>%d</code> conversion specifier, the expected type of argument is</p>\n\n<blockquote>\n  <p><code>d</code>  [....]  The corresponding argument shall be a pointer to\n  signed integer.</p>\n</blockquote>\n\n<p>But, all you're supplying is a pointer to a <code>char</code>. Mismatch. <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">Undefined behavior</a>.</p>\n\n<p>OTOH, for <code>%c</code> conversion specifier, </p>\n\n<blockquote>\n  <p><code>c</code> Matches a sequence of characters of exactly the number specified by the field\n  width <strong>(1 if no field width is present in the directive)</strong>.\n  If no <code>l</code> length modifier is present, the corresponding argument shall be a\n  <strong>pointer to the initial element of a character array large enough to accept the\n  sequence. No null character is added.</strong></p>\n</blockquote>\n\n<p>so using </p>\n\n<pre><code> scanf(\"%c\",&amp;ch);\n</code></pre>\n\n<p>is correct. Alternatively, you can also use</p>\n\n<pre><code> scanf(\"%hhd\",&amp;ch);    //char is signed\n scanf(\"%hhu\",&amp;ch);   //char is unsigned\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495626899, "post_id": 44157676, "comment_id": 75331575, "body": "<i>%s/probably/surely</i>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495627009, "post_id": 44157676, "comment_id": 75331660, "body": "@SouravGhosh it was intended as a comment as first. Will edit."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1495627039, "last_edit_date": 1495627039, "creation_date": 1495626791, "answer_id": 44157676, "question_id": 44157594, "link": "https://stackoverflow.com/questions/44157594/why-printf-with-d-specifier-giving-wrong-result/44157676#44157676", "title": "why printf with %d specifier giving wrong result?", "body": "<p>What you observe is very likely because second <code>scanf</code> with the wrong (tool large for <code>char</code>) format specifier overwrites the automatic variables memory where <code>num</code> is located.</p>\n\n<p>Making <code>num</code> static moves it to the global variables memory and it (kind of) works, but it's still <em>undefined behaviour</em>, some memory have been overwritten somewhere and you may pay the price later on. So the only option is to specify the correct format specifier, here <code>%c</code> as you noted.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10549618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8b6b7705d85034622f54e53fc0f2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Kuangeek", "link": "https://stackoverflow.com/users/10549618/kuangeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1553565711, "last_edit_date": 1553565711, "creation_date": 1553565249, "answer_id": 55348773, "question_id": 44157594, "link": "https://stackoverflow.com/questions/44157594/why-printf-with-d-specifier-giving-wrong-result/55348773#55348773", "title": "why printf with %d specifier giving wrong result?", "body": "<p>Try to add <code>\\n</code>, like <code>scanf(\"%d\\n\", &amp;num);</code>. Maybe it could help.\nAnd compiler cannot pass if you use that expression, like <code>scanf(\"%d\", &amp;ch);</code></p>\n"}], "owner": {"reputation": 29, "user_id": 8059163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b72da731e2ea53600285464aa02f2d?s=128&d=identicon&r=PG", "display_name": "Pranjal Kanyal", "link": "https://stackoverflow.com/users/8059163/pranjal-kanyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 44157669, "answer_count": 4, "score": -2, "last_activity_date": 1553565711, "creation_date": 1495626639, "last_edit_date": 1495627285, "question_id": 44157594, "link": "https://stackoverflow.com/questions/44157594/why-printf-with-d-specifier-giving-wrong-result", "title": "why printf with %d specifier giving wrong result?", "body": "<p>This code here gives incorrect value of int num if my input for num is for example 11,the printf function will output 0. However if I add static to int num the output produced by printf is correct. Can someone please explain the reason.Also if I make the format specifier for second scanf as %c , then also int value is printed correctly.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n    int main()\n     {\n      int num;//making it static gives correct result\n      char ch;int c;\n      printf(\"enter the value of num and ch:\\n\");\n      scanf(\"%d\",&amp;num);    \n      scanf(\"%d\",&amp;ch);\n      printf(\"num = %d and ch = %c\",num,ch);\n      return 0;\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495625968, "post_id": 44157317, "comment_id": 75330849, "body": "<code>freeing your whole program upon exit </code>...what is that?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1495626040, "post_id": 44157317, "comment_id": 75330906, "body": "Yes, it&#39;s good practice, if <i>freeing your whole program upon exit</i> means <i>freeing all memory that has been allocated with <code>malloc</code> and similar functions</i>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495626071, "post_id": 44157317, "comment_id": 75330934, "body": "How is not opinion-based?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495626113, "post_id": 44157317, "comment_id": 75330970, "body": "@SouravGhosh see Bathsheba&#39;s answer."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 2, "creation_date": 1495626123, "post_id": 44157317, "comment_id": 75330981, "body": "@SouravGhosh Since there are valid rational arguments for it, I do not consider it opinion based."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1495626197, "post_id": 44157317, "comment_id": 75331034, "body": "@Ctx There are counter arguments too, I&#39;ve read them. It goes like what&#39;s the point of cleaning the floor while the house is burning down?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495626260, "post_id": 44157317, "comment_id": 75331076, "body": "@SouravGhosh It&#39;s the same with our old discussion about casting malloc, there are also arguments for and against it. So it&#39;s primarily opinion based?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1495626330, "post_id": 44157317, "comment_id": 75331132, "body": "@Ctx Nopes, not casting malloc atleast saves you from not having header included. Anything for <code>free(p);</code> before <code>exit(0);</code>?"}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 1, "creation_date": 1495626445, "post_id": 44157317, "comment_id": 75331200, "body": "SouravGhosh: Yes, valid pro and con arguments are listed in the answer below and in the answers of the duplicate question linked."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "edited": false, "score": 0, "creation_date": 1495626540, "post_id": 44157317, "comment_id": 75331281, "body": "@Ctx I already left a comment there, thanks. ;)"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495635782, "post_id": 44157317, "comment_id": 75338675, "body": "It is opinion-based.  Many skilled, experienced and high-rep developers believe in explicitly freeing resources on process termination, even though they cannot guaranteee to do so safely, have no answer to shutting down complex multi-threaded code running on multiple cores, are already using libraries that acknolwdge this and don&#39;t free stuff, and are just wrong :)"}], "answers": [{"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495626356, "post_id": 44157371, "comment_id": 75331149, "body": "<code>an environment where the memory is not freed for you</code>...an example sir, if I may ask?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495626640, "post_id": 44157371, "comment_id": 75331364, "body": "@SouravGhosh: take AmigaOS for instance. There&#39;s no resource tracking on exiting processes. Ok it&#39;s ancient history, but it exists."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495626944, "post_id": 44157371, "comment_id": 75331610, "body": "@SouravGhosh as the question is not specifically about memory but resources than you should always release resources you own. For ex. try not to clean some COM objects and you will end up for ex. with black screen, not editable files etc."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495635396, "post_id": 44157371, "comment_id": 75338348, "body": "On most OS, you should not clean up memory unless there is an overriding reason to do so.  The main reason?  You cannot do it safely from user code.  Only the OS can guarantee to stop all threads before releasing memory.  Modern OS have hundreds of thousands of hours of testing, a hardware inter-core comms system and other massive advantages over your bits of user code.  Don&#39;t do yourself what something else can already do for you safely."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495636050, "post_id": 44157371, "comment_id": 75338887, "body": "On thing is.. on many non-trivial apps, you don&#39;t know where the memory is.  Something owns it at that picosecond, but what?  Thread A owns it, it&#39;s on a queue, it&#39;s in a pool, thread B owns it, the OS owns it, it&#39;s referenced in a callback....  You can&#39;t free it in user code - you just can&#39;t, you don&#39;t know who or what is using it, so don&#39;t try:)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495636904, "post_id": 44157371, "comment_id": 75339627, "body": "@ThingyWotsit: I&#39;m going to be naughty and re-open this question so you can answer. The dupe is not particularly exact anyway, and you add an interesting perspective. Get in quickly though lest it&#39;s closed again."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1495626025, "creation_date": 1495626025, "answer_id": 44157371, "question_id": 44157317, "link": "https://stackoverflow.com/questions/44157317/freeing-upon-exit-a-good-practice/44157371#44157371", "title": "Freeing upon exit: a good practice?", "body": "<p>You should <em>always</em> clean up your memory. Don't rely on an operating system to do it.</p>\n\n<p>Going forward, you might find your program being part of an environment where the memory is <em>not</em> freed for you, and retro-fitting such code could prove tricky.</p>\n"}], "owner": {"reputation": 789, "user_id": 7868795, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/471c6f01b994a5aadf85dc6cfec40fc4?s=128&d=identicon&r=PG", "display_name": "Ra&#39;Jiska", "link": "https://stackoverflow.com/users/7868795/rajiska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 44157371, "answer_count": 1, "score": 0, "last_activity_date": 1495636909, "creation_date": 1495625903, "question_id": 44157317, "link": "https://stackoverflow.com/questions/44157317/freeing-upon-exit-a-good-practice", "title": "Freeing upon exit: a good practice?", "body": "<p>I'd like to know if freeing your whole program upon exit is a good practice or not. Of course I know memory is reclaimed by the system anyway.</p>\n\n<p>Here, I'd like to know if quite experienced C developers tend to encourage such practice or not.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c", "function", "inline"], "comments": [{"owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1495625686, "post_id": 44157188, "comment_id": 75330638, "body": "I edited the question"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1495626927, "post_id": 44157188, "comment_id": 75331597, "body": "The <code>inline</code> keyword and function inlining became unrelated long ago. See <a href=\"https://stackoverflow.com/questions/27042935/inline-keyword-vs-inlining-concept\">here</a> for more info."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1495627009, "post_id": 44157188, "comment_id": 75331659, "body": "@Quentin they are closely related. Just not strictly dependent on each other."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1495625861, "creation_date": 1495625861, "answer_id": 44157297, "question_id": 44157188, "link": "https://stackoverflow.com/questions/44157188/are-parameters-copied-twice-for-inline-in-c/44157297#44157297", "title": "Are parameters copied twice for inline in c?", "body": "<p>Both C and C++ specify behavior of your program in terms of an abstract machine.</p>\n\n<p><code>my_func</code>'s <code>int param</code> exists in this abstract machine, and it is distinct from the <code>my_inner_func</code>'s <code>int param</code>.  They have separate identities.  If you take the address of one and the address of the other, they are guaranteed to compare not-equal.</p>\n\n<p>But if you don't take the address of either, neither need have an address.</p>\n\n<p>If all you do to an <code>int</code> is assign or initialize it, then use it to assign or initialize another <code>int</code>, and the compiler can prove there is no defined way to reach the intermediate <code>int</code> through indirection (like a pointer), then the intermediate <code>int</code> need not exist on the actual target machine.</p>\n\n<p>Some compilers have problems with doing this at link-time.  Others do not.</p>\n\n<p>Some operations will block the existence of that <code>int</code> from being elided.  Others will not.</p>\n\n<p>I see nothing in your example that would require that intermediate <code>int</code> to exist on the target machine.</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1495628170, "post_id": 44157301, "comment_id": 75332537, "body": "Looks like I remembered something spectacularly wrong with the definitive &quot;<code>inline</code> is ignored&quot;... My bad. It is quite a murky subject to be fair, since it reaches over both standard wording and implementation details."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1495628423, "post_id": 44157301, "comment_id": 75332734, "body": "I don&#39;t think <i>&quot;suggestion&quot;</i> is very descriptive of what <code>inline</code> does. It relaxes ODR by allowing definition in multiple translation units, and in fact adds new requirement for definition in all translation units that use the function. This new requirement has the <i>intended</i> side-effect of allowing inline expansion across translation units. Which on the other hand is not a strict requirement, if LTO is used. It&#39;s a suggestion for inlining in the same way as granting a drivers license is a suggestion to drive a car (bad analogy, doesn&#39;t work on all levels)."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1495631641, "post_id": 44157301, "comment_id": 75335222, "body": "@user2079303 ..bad as my worst english... ;)"}], "tags": [], "owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "is_accepted": false, "score": 2, "last_activity_date": 1495625870, "creation_date": 1495625870, "answer_id": 44157301, "question_id": 44157188, "link": "https://stackoverflow.com/questions/44157188/are-parameters-copied-twice-for-inline-in-c/44157301#44157301", "title": "Are parameters copied twice for inline in c?", "body": "<p><code>inline</code> it is only a \"suggestion\" to the compiler, that can or cannot <code>inline</code> your function. Obviously can also choose to <code>inline</code> a function you didn't explicitly declare <code>inline</code>.</p>\n\n<p>In other words, based on your compiler and your optimization settings, you should look at the generated assembler to have an answer.</p>\n"}, {"tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 4, "last_activity_date": 1495625978, "creation_date": 1495625978, "answer_id": 44157343, "question_id": 44157188, "link": "https://stackoverflow.com/questions/44157188/are-parameters-copied-twice-for-inline-in-c/44157343#44157343", "title": "Are parameters copied twice for inline in c?", "body": "<p>The compiler can do what the heck it wants, as long as it follows the <code>as if</code> rule.</p>\n\n<p>The rule states that at any point you try and measure the state of the program, it gives the correct answer.</p>\n\n<p>Where you are not measuring it, it can re-order operations.</p>\n\n<p>When the compiler is optimizing, it would be able to remove the second copy of parameters for both inline and non- inline code, unless there was code which tried to spot this.  Then it would have to produce code which met the as-if rule, and possibly increase the number of copies.</p>\n"}, {"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1495627528, "post_id": 44157356, "comment_id": 75332017, "body": "Since the outer function no longer uses the value after the call to the inner function, it would be safe for the compiler to use the same object even if the inner function does write to it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1495628083, "post_id": 44157356, "comment_id": 75332449, "body": "I consider the OP snipped pseudo-code; of course, what you describe would be another corner case that can be optimized."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1495628191, "post_id": 44157356, "comment_id": 75332557, "body": "Well, if you cannot assume that OP doesn&#39;t read from <code>param</code> after the call, I don&#39;t think you can assume that OP doesn&#39;t take the address of either param at any point, which is another requirement for the optimization to take place."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": false, "score": 2, "last_activity_date": 1495626002, "creation_date": 1495626002, "answer_id": 44157356, "question_id": 44157188, "link": "https://stackoverflow.com/questions/44157188/are-parameters-copied-twice-for-inline-in-c/44157356#44157356", "title": "Are parameters copied twice for inline in c?", "body": "<p>It depends. An inlined function (btw, it's best to let the compiler decide whether to do this or not) must expose the same observable behavior as the normal, not inlined version. So the easiest approach would be to copy the parameter twice. The compiler could be smart enough to optimize out the second copy <strong>if</strong> the inner function doesn't write to it.</p>\n"}, {"tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 0, "last_activity_date": 1495628932, "creation_date": 1495628932, "answer_id": 44158449, "question_id": 44157188, "link": "https://stackoverflow.com/questions/44157188/are-parameters-copied-twice-for-inline-in-c/44158449#44158449", "title": "Are parameters copied twice for inline in c?", "body": "<p>If the functions are not inlined, on most architectures the cost of the function call itself will be significantly higher than copying an <code>int</code>. </p>\n\n<p>On systems where parameters are passed in registers, the register for passing single <code>int</code> parameters will already hold the value when entering the first function and it can just pass it on to the next function without creating a new copy.</p>\n\n<p>Don't sweat the small stuff!</p>\n"}, {"comments": [{"owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "edited": false, "score": 0, "creation_date": 1495777369, "post_id": 44194374, "comment_id": 75402220, "body": "There is no problem, just curiosity."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "edited": false, "score": 0, "creation_date": 1495777904, "post_id": 44194374, "comment_id": 75402477, "body": "@Bremen, in that case i&#39;m afraid this is not the correct forum to ask."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1495777300, "creation_date": 1495777300, "answer_id": 44194374, "question_id": 44157188, "link": "https://stackoverflow.com/questions/44157188/are-parameters-copied-twice-for-inline-in-c/44194374#44194374", "title": "Are parameters copied twice for inline in c?", "body": "<p>Well, in inline functions, the compiler has access to all the code involved <em>to inline</em>, so it can detect if you are actually modifying the parameters, so it can avoid copying if your function does not modify the parameters.  Said this, what's the problem you are facing to?</p>\n"}], "owner": {"reputation": 2255, "user_id": 1036082, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a291efdfec6f8802d64589cd992131fb?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Przenios\u0142o", "link": "https://stackoverflow.com/users/1036082/%c5%81ukasz-przenios%c5%82o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 44157297, "answer_count": 6, "score": 2, "last_activity_date": 1495777300, "creation_date": 1495625598, "last_edit_date": 1495625678, "question_id": 44157188, "link": "https://stackoverflow.com/questions/44157188/are-parameters-copied-twice-for-inline-in-c", "title": "Are parameters copied twice for inline in c?", "body": "<p>I have a question regarding inline functions in c/c++ and parameters copying. Lets assume I want to run this function without inline specifier:</p>\n\n<pre><code>void my_func(int param)\n{\n    my_inner_func(param);\n}\n</code></pre>\n\n<p>param will be first copied to <code>my_func</code> and then again to <code>my_inner_func</code>. If the function <code>my_func</code> were <code>inline</code>, would the compiller copy <code>param</code> only once for the <code>my_inner_func</code> parameter or twice anyway.\nI would appreciate all help.</p>\n\n<p>Edit: I would like to ask for explanation for both c and c++ if it differs.</p>\n"}, {"tags": ["c", "function", "compilation", "constants", "function-prototypes"], "comments": [{"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1495625454, "post_id": 44157072, "comment_id": 75330477, "body": "Did <code>code.c</code> remember to <code>#include &quot;code.h&quot;</code>?"}, {"owner": {"reputation": 399, "user_id": 3917668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84299f045e392b674feaae1fa97374c0?s=128&d=identicon&r=PG&f=1", "display_name": "Oded Sayar", "link": "https://stackoverflow.com/users/3917668/oded-sayar"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1495625507, "post_id": 44157072, "comment_id": 75330510, "body": "yes it does, I&#39;ll add it here so there&#39;s no mistake"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 0, "creation_date": 1495625635, "post_id": 44157072, "comment_id": 75330601, "body": "At least with GCC (on Ideone.com) I get errors for this, perhaps you should specify what compiler you&#39;re using?"}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1495625643, "post_id": 44157072, "comment_id": 75330608, "body": "Rename <code>code.c</code> to <code>code.cpp</code> and you will find the difference with and without <code>const</code>."}, {"owner": {"reputation": 524, "user_id": 4328846, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BWqeua7Pjss/AAAAAAAAAAI/AAAAAAAABeo/7Ca4f6TRP7c/photo.jpg?sz=128", "display_name": "Gustavo Laureano", "link": "https://stackoverflow.com/users/4328846/gustavo-laureano"}, "edited": false, "score": 0, "creation_date": 1495625757, "post_id": 44157072, "comment_id": 75330681, "body": "Which compiler and target? My gess is that could be architecture dependent, PCs and ARMs for example use Von Neumann, where RAM and ROM code goes in the same adressing space, so your value could be const or non-const that it will be acessed in same way (just differing in the possibility to be edited), but PICs uses Harvard architecture (where the address and accessing is different for ROM or RAM) so in these devices you NEED to know what you are trying to read so you can go fetch in the right bus"}, {"owner": {"reputation": 399, "user_id": 3917668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84299f045e392b674feaae1fa97374c0?s=128&d=identicon&r=PG&f=1", "display_name": "Oded Sayar", "link": "https://stackoverflow.com/users/3917668/oded-sayar"}, "edited": false, "score": 0, "creation_date": 1495625954, "post_id": 44157072, "comment_id": 75330837, "body": "I use GCC on Ubuntu 16.04 x64. I didn&#39;t configure a target so I guess it&#39;s the default"}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 3917668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84299f045e392b674feaae1fa97374c0?s=128&d=identicon&r=PG&f=1", "display_name": "Oded Sayar", "link": "https://stackoverflow.com/users/3917668/oded-sayar"}, "edited": false, "score": 0, "creation_date": 1495631840, "post_id": 44158233, "comment_id": 75335375, "body": "I updated my compiler and now it works (gives me error). It showed no warnings as well before that"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 399, "user_id": 3917668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84299f045e392b674feaae1fa97374c0?s=128&d=identicon&r=PG&f=1", "display_name": "Oded Sayar", "link": "https://stackoverflow.com/users/3917668/oded-sayar"}, "edited": false, "score": 0, "creation_date": 1495631919, "post_id": 44158233, "comment_id": 75335443, "body": "Good job @OdedSayar! =)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 4, "last_activity_date": 1495633168, "last_edit_date": 1495633168, "creation_date": 1495628278, "answer_id": 44158233, "question_id": 44157072, "link": "https://stackoverflow.com/questions/44157072/const-in-c-function-declaration-and-implementation/44158233#44158233", "title": "Const in C function declaration and implementation", "body": "<blockquote>\n  <p>What happens if declaration and definition of a function don't agree on whether an argument is <code>const</code> or not?</p>\n</blockquote>\n\n<p>You should get a compilation <em>error</em>.</p>\n\n<blockquote>\n  <p>What to do?</p>\n</blockquote>\n\n<p><em>Update</em> your compiler.</p>\n\n<hr>\n\n<p>With gcc 4.2.1, I am receiving an error, if I remove <code>const</code> from either the header or the source file:</p>\n\n<pre><code>Georgioss-MacBook-Pro:~ gsamaras$ gcc -Wall main.c code.c\ncode.c:3:6: error: conflicting types for 'someFunc'\nvoid someFunc(const char* str){ printf(\"%s\\n\", str); }\n     ^\n./code.h:1:6: note: previous declaration is here\nvoid someFunc(char*);\n     ^\n1 error generated.\n</code></pre>\n\n<p>With gcc version 4.9.2 (Debian 4.9.2-10), I am getting the same behavior.</p>\n\n<p>Same behavior with gcc's 7.1.0 version, online in <a href=\"https://wandbox.org/\" rel=\"nofollow noreferrer\">Wandbox</a>:<a href=\"https://i.stack.imgur.com/Y8IeK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y8IeK.png\" alt=\"enter image description here\"></a></p>\n\n<p>My guess is that the behavior your are experiencing is architecture/compiler's version dependent.</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1495633760, "creation_date": 1495633760, "answer_id": 44160358, "question_id": 44157072, "link": "https://stackoverflow.com/questions/44157072/const-in-c-function-declaration-and-implementation/44160358#44160358", "title": "Const in C function declaration and implementation", "body": "<p>In C, a diagnostic is required if function declaration and function definition are both visible to the compiler, and don't match.</p>\n\n<p>If your compiler is actually a C++ compiler, the declaration and definition need not match - since they will be considered overloads.   However, if both overloads are not defined, there will be linker errors  (compilation units call the overload they see a declaration for, and linking fails since that function is not defined).</p>\n\n<p>Other compilation units which have visibility of the declaration from the header but not of the definition will compile if arguments being passed are correct, and fail otherwise.   In both C and C++.</p>\n\n<p>If your code consistently builds and runs, then your compiler is not behaving in a standard way (e.g. compilation options that make it not comply in this regard).    Or there is some problem with the build process (such as an object not being rebuilt if a header or source file it depends on changes - which means the executable corresponds to an older version of your source).</p>\n"}], "owner": {"reputation": 399, "user_id": 3917668, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84299f045e392b674feaae1fa97374c0?s=128&d=identicon&r=PG&f=1", "display_name": "Oded Sayar", "link": "https://stackoverflow.com/users/3917668/oded-sayar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1812, "favorite_count": 0, "accepted_answer_id": 44158233, "answer_count": 2, "score": 3, "last_activity_date": 1495633760, "creation_date": 1495625311, "last_edit_date": 1495628322, "question_id": 44157072, "link": "https://stackoverflow.com/questions/44157072/const-in-c-function-declaration-and-implementation", "title": "Const in C function declaration and implementation", "body": "<p>I have a function declared in <code>code.h</code> and implemented in <code>code.c</code>.\nit goes like:</p>\n\n<pre><code>void someFunc(const char*);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#include \"code.h\"\nvoid someFunc(const char* str){ printf(\"%s\\n\", str); }\n</code></pre>\n\n<p>Now I found out I can remove the <code>const</code> in any <em>one</em> of the files (leaving it there in the other) and it compiles &amp; runs with no errors.\nI wonder what's the meaning of this?\nIs one of the files the only one that matters?</p>\n\n<p>It might sound like just an unimportant niche behaviour, but this fact means that a missed <code>const</code> can go unnoticed.</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 0, "creation_date": 1495625633, "post_id": 44156977, "comment_id": 75330600, "body": "That seems great, but for some reason when trying to call the method the compiler says :  conflict types of  uint_from_string. Not sure why but it&#39;s running on a small ARM chip."}, {"owner": {"reputation": 1771, "user_id": 5644874, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AlXxH.jpg?s=128&g=1", "display_name": "Seek Addo", "link": "https://stackoverflow.com/users/5644874/seek-addo"}, "reply_to_user": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "edited": false, "score": 1, "creation_date": 1495625875, "post_id": 44156977, "comment_id": 75330778, "body": "@Curnelious You need to put the function before the <code>main</code> or try to put the function prototype <code>uint32_t uint_from_string(const char *s)</code>"}], "tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": true, "score": 5, "last_activity_date": 1495626859, "last_edit_date": 1495626859, "creation_date": 1495625073, "answer_id": 44156977, "question_id": 44156910, "link": "https://stackoverflow.com/questions/44156910/put-a-string-as-hex-inside-a-uint32-t/44156977#44156977", "title": "Put a string as hex inside a Uint32_t", "body": "<p>This is trivial, you just need to grab the character values and combine them:</p>\n\n<pre><code>uint32_t uint_from_string(const char *s)\n{\n  uint32_t x = 0;\n  for (int i = 0; *s != '\\0' &amp;&amp; i &lt; 4; ++i)\n  {\n    x &lt;&lt;= 8;\n    x |= (uint32_t) *s++;\n  }\n  return x;\n}\n</code></pre>\n\n<p>If you use this like so:</p>\n\n<pre><code>const uint32_t m_deadbeef = uint_from_string(\"LALA\");\n</code></pre>\n\n<p>you will get the value <code>0x4c414c41</code> in there.</p>\n\n<p>Also, <em>please note</em> that there is no \"putting as hex\" going on here, the number just as well be printed in decimal (it's <code>1279347777</code>). Numbers are not in hex, only their representation when printed out.</p>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 3645308, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2nZYZ.png?s=128&g=1", "display_name": "Slaiyer", "link": "https://stackoverflow.com/users/3645308/slaiyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1495626908, "last_edit_date": 1495626908, "creation_date": 1495626155, "answer_id": 44157422, "question_id": 44156910, "link": "https://stackoverflow.com/questions/44156910/put-a-string-as-hex-inside-a-uint32-t/44157422#44157422", "title": "Put a string as hex inside a Uint32_t", "body": "<pre><code>#include &lt;stdint.h&gt;\n#include &lt;stdio.h&gt;\n\nunion str32b\n{\n    uint32_t hex;\n    char str[4];\n\n    str32b(const char* in, int big_end = 0)\n    {\n        if (big_end)\n            for (int i = 0; i &lt; 4; ++i)\n                str[i] = in[i];\n        else\n            for (int i = 0; i &lt; 4; ++i)\n                str[4 - i - 1] = in[i];\n    }\n};\n\nint main()\n{\n    const char* input = \"ABCD\";\n\n    str32b l_end = str32b(input);\n    printf(\"Little endian:\\t0x%x\\n\", l_end.hex);\n\n    str32b b_end = str32b(input, 1);\n    printf(\"Big endian:\\t0x%x\\n\", b_end.hex);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Little-endian:  0x41424344\nBig-endian:     0x44434241\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 44156977, "answer_count": 2, "score": 0, "last_activity_date": 1495626908, "creation_date": 1495624889, "question_id": 44156910, "link": "https://stackoverflow.com/questions/44156910/put-a-string-as-hex-inside-a-uint32-t", "title": "Put a string as hex inside a Uint32_t", "body": "<p>I would like to get this result :</p>\n\n<pre><code>static uint32_t const m_deadbeef = 0x4c414c41 ; //this hex is \"LALA\"\n</code></pre>\n\n<p>from this input :</p>\n\n<pre><code>char data[]=\"LALA\";\n</code></pre>\n\n<p>So I need to put <code>data</code> inside the <code>unint32_t</code> so it looks like the first line.\nHow would I do it efficiently ?</p>\n"}, {"tags": ["c", "compiler-warnings", "gcc4.9"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1495624513, "post_id": 44156721, "comment_id": 75329783, "body": "Demons could fly out of your nose"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495624562, "post_id": 44156721, "comment_id": 75329818, "body": "What could go wrong...everything...."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495624616, "post_id": 44156721, "comment_id": 75329864, "body": "Are you sure you make sense? First you say...<code>with return-type warning on [-Wreturn-type].</code> and then you say...<code>Since warnings were suppressed,</code>...what are you upto?"}, {"owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 2, "creation_date": 1495624645, "post_id": 44156721, "comment_id": 75329882, "body": "Just out of curiosity, why are you running gcc 2.95 in 2017?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "edited": false, "score": 1, "creation_date": 1495624687, "post_id": 44156721, "comment_id": 75329909, "body": "@unwind if old code was written to gcc 2.95 conformance instead of ISO C conformance, then changing compilers could be a major undertaking.  In those days the linux kernel, for example, could only be compiled with a specific version of specific compiler. If you want to recompile that kernel today then that&#39;s your only realistic option"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1495624792, "post_id": 44156721, "comment_id": 75329997, "body": "Also , unclear why the question is tagged &quot;gcc4.9&quot; when it&#39;s about gcc 2.95"}, {"owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "edited": false, "score": 0, "creation_date": 1495631021, "post_id": 44156721, "comment_id": 75334709, "body": "I had some typos, for example gcc version and warning suppressed, corrected"}, {"owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "edited": false, "score": 0, "creation_date": 1495650876, "post_id": 44156721, "comment_id": 75348567, "body": "I just shared by experience while going through a legacy code and my post analysis"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495624572, "post_id": 44156722, "comment_id": 75329832, "body": "It&#39;s only an error if the caller uses the value; so the compiler should (in conforming mode) not flag the function.  Actually it is impossible to always flag the function without false positives (halting problem)."}, {"owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1495653994, "post_id": 44156722, "comment_id": 75350073, "body": "@M.M yes true, I just shared my experience while trying to track a critical bug from a legacy code that missed explicit return statement, and after setting -Wreturn-type and going through trillions of warnings came out to this observation, you are 100% correct, so am I."}], "tags": [], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "is_accepted": true, "score": 1, "last_activity_date": 1495653791, "last_edit_date": 1495653791, "creation_date": 1495624420, "answer_id": 44156722, "question_id": 44156721, "link": "https://stackoverflow.com/questions/44156721/implicit-return-value-in-c-with-no-explicit-return-in-a-function-that-should-ret/44156722#44156722", "title": "implicit return value in C with no explicit return in a function that should return non-void", "body": "<p>I compiled with gcc version 4.9.2 on Linux with return-type warning on <code>[-Wreturn-type]</code>\nThe caller expected a true (in C, interpreted as non-zero) for success and 0 for failure. This is what was happening. Since a function that returns non-void, when called, space is created on the stack for the return value, then context is switched to the callee, and finally, when the control comes back to the caller, context is switched back popping all local variables from stack and keeping the return value there on stack to be popped by the caller after return from callee. Thus, having no explicit return statement caused some value to be returned. That is equivalent to having explicit return statement as \u2018return 1;\u2019 or 'return 0;' as appropriate. So, better (of course) would be to have explicit return statement e.g.</p>\n\n<pre><code>int somefn() {\n   // .. do something ..\n   if (..somecond..)\n    return 0; // failure\n   else\n    return 1; // success\n}\n</code></pre>\n\n<p>To avoid surprises, I would say, compilers should flag <code>'no return statement in function returning non-void'</code> as error.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1495625373, "creation_date": 1495625373, "answer_id": 44157089, "question_id": 44156721, "link": "https://stackoverflow.com/questions/44156721/implicit-return-value-in-c-with-no-explicit-return-in-a-function-that-should-ret/44157089#44157089", "title": "implicit return value in C with no explicit return in a function that should return non-void", "body": "<p>Quoting <code>C11</code>, chapter \u00a76.9.1, Function Definitions, <em>Semantics</em></p>\n\n<blockquote>\n  <p>If the <code>}</code> that terminates a function is reached, and the value of the function call is used by\n  the caller, the behavior is undefined.</p>\n</blockquote>\n\n<p>So, the standard specifies the semantics of the function definition and it clearly states that (for a non-void function return type) a function which terminates  without a return statement and the returned value is used in caller  causes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<p>So, it accepts that syntactically writing a function as such will be possible, but attempt to make use of that will be UB. It does not state this as a constraint violation and I see no reason for a conforming compiler to produce an \"error\".</p>\n\n<p>In case you want strict check (which is recommended, by the way), use <code>-Werror</code> option.</p>\n"}], "owner": {"reputation": 6643, "user_id": 2032021, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/c1c31bca855c458b3f218ef6a303184d?s=128&d=identicon&r=PG", "display_name": "Dr. Debasish Jana", "link": "https://stackoverflow.com/users/2032021/dr-debasish-jana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 44156722, "answer_count": 2, "score": -1, "last_activity_date": 1495653791, "creation_date": 1495624420, "last_edit_date": 1495630983, "question_id": 44156721, "link": "https://stackoverflow.com/questions/44156721/implicit-return-value-in-c-with-no-explicit-return-in-a-function-that-should-ret", "title": "implicit return value in C with no explicit return in a function that should return non-void", "body": "<p>I have some legacy C code that I compiled with gcc version 4.9.2 on Linux with return-type warning on [-Wreturn-type]. I have a function as below:</p>\n\n<pre><code>int somefn() {\n   // .. do something ..\n   // no explicit return statement\n}\n</code></pre>\n\n<p>and the caller had the call as below:</p>\n\n<pre><code>if (somefn()){\n   // handling of success\n}\nelse {\n  // handling of failure\n}\n</code></pre>\n\n<p>When warnings were suppressed, compilation+linking went all ok, and at runtime, we may get surprises, What could go wrong? </p>\n"}, {"tags": ["c", "opencv"], "owner": {"reputation": 11, "user_id": 8058623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e59f13dc12c9360cb977a78540888e1?s=128&d=identicon&r=PG&f=1", "display_name": "totoro", "link": "https://stackoverflow.com/users/8058623/totoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495623867, "creation_date": 1495623867, "question_id": 44156519, "link": "https://stackoverflow.com/questions/44156519/opencv-in-c-image-structure-empty-at-the-exit-of-pipe", "title": "OpenCv in C : Image structure empty at the exit of pipe", "body": "<p>i try to film with my webcam and get frame to send them into a pipe. First i have just tried to take only one picture and send it.\nI send into the pipe a pointeur of the structure picture\nBut the pointeur of the structure was full at the entrance of the pipe but is empty at the exit.</p>\n\n<p>I have looked for solution about send structure in pipe, and i read that i have to initialize a pointeur of the structure picture with malloc before reading the exit.I try it but this not work.  </p>\n\n<p>This the documentation of the structure of the image that i use with opencv :</p>\n\n<p><a href=\"http://docs.opencv.org/trunk/d6/d5b/structIplImage.html#a004c6e47e73b4196d019e935620448e9\" rel=\"nofollow noreferrer\">http://docs.opencv.org/trunk/d6/d5b/structIplImage.html#a004c6e47e73b4196d019e935620448e9</a> </p>\n\n<p>I compile with this commande : </p>\n\n<pre><code>gcc -ggdb `pkg-config --cflags opencv` -o `basename opencv_v3.c .c` opencv_v3.c `pkg-config --libs opencv`\n</code></pre>\n\n<p>And i have this result : </p>\n\n<pre><code>open webcam \ntake picture\n\nsize struct : 144        \nsize picture : 921600\n\nsend picture\nreceive picture\n\nsize struct : -1386173560\nsize picture : 0\n</code></pre>\n\n<p>this is my code : </p>\n\n<pre><code>#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n#include &lt;unistd.h&gt;\n\nint take_picture(CvCapture *capture,int fd[]){\n\n   IplImage* img = cvQueryFrame(capture);\n\n    printf(\"take picture\\n\\n\");\n\n    printf(\"size struct : %d\\n\",img-&gt;nSize);\n    printf(\"size picture : %d\\n\\n\",img-&gt;imageSize);\n\n    close(fd[0]);\n    write(fd[1], img,img-&gt;nSize);\n    close(fd[1]);\n\n    printf(\"send picture\\n\");\n\n   return img-&gt;nSize;\n}\n\n\n\nvoid reception(int fd[],int size){\n\n  IplImage* img = malloc(size);\n\n  close(fd[1]);\n  read(fd[0],img,size);\n  close(fd[0]);\n\n  printf(\"receive picture\\n\\n\");\n\n  printf(\"size struct : %d\\n\",img-&gt;nSize);\n  printf(\"size picture : %d\\n\\n\",img-&gt;imageSize);\n\n free(img);\n}\n\nint main(int argc, char *argv[]){\n\n   int fd[2];\n   int size;\n   int pid;\n\n   if (pipe(fd) == -1){\n      printf(\"pipe failed\\n\");\n      return -1;\n   }\n\n   if((pid = fork()) &lt; 0){\n     printf(\"fork failed\\n\");\n     return -1;\n   }\n\n   if (pid == 0){\n      /* child */\n      printf(\"open webcam \\n\");\n      CvCapture *capture=cvCreateCameraCapture(0);\n      size = take_picture(capture,fd);\n\n   }        \n   else{\n      /* parent */\n      waitpid(pid,0,WUNTRACED);\n      reception(fd,size);\n   }\n\n   return 0;\n }\n</code></pre>\n"}, {"tags": ["c", "xcode", "windows", "macos", "sublimetext3"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 1, "creation_date": 1495623754, "post_id": 44156438, "comment_id": 75329329, "body": "<code>int  i,  j;</code> is redundant, since you declare them again in the loops, and they are only used in the loops."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1495623941, "post_id": 44156438, "comment_id": 75329443, "body": "When doing C programming, you can&#39;t just &quot;guess the syntax&quot; through trial and error. That will never work out. Instead, you must actually know what you are doing, at each and every line of code you write. This code doesn&#39;t make any sense - you need to study strings and characters in your beginner-level programming book."}], "answers": [{"tags": [], "owner": {"reputation": 362958, "user_id": 28169, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ec9385dc533f1a6a93769077f852503e?s=128&d=identicon&r=PG", "display_name": "unwind", "link": "https://stackoverflow.com/users/28169/unwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1495623954, "creation_date": 1495623954, "answer_id": 44156559, "question_id": 44156438, "link": "https://stackoverflow.com/questions/44156438/counting-values-in-a-2d-array-c/44156559#44156559", "title": "Counting Values in a 2D array - C", "body": "<p>Two things stand out:</p>\n\n<ul>\n<li>You use uninitialized character variables (<code>M</code>, <code>B</code>, <code>S</code> and <code>A</code>) like they meant something; this is very confusing.</li>\n<li>This line: <code>if (survey[i][j] == M, 1)</code> makes no sense at all. It will always take the <code>if</code>, since the comma operator makes the condition equivalent to a single <code>1</code>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 1, "last_activity_date": 1495624706, "last_edit_date": 1495624706, "creation_date": 1495624004, "answer_id": 44156572, "question_id": 44156438, "link": "https://stackoverflow.com/questions/44156438/counting-values-in-a-2d-array-c/44156572#44156572", "title": "Counting Values in a 2D array - C", "body": "<p>This loop...</p>\n\n<pre><code>for (int j = 0; j == 2; j++)\n</code></pre>\n\n<p>...does nothing. It only runs whilst <code>j</code> is <code>2</code>. Since it's initialised to <code>0</code> that is never the case, so the code within will never be executed.</p>\n\n<p>If you want it to loop over the values of the inner array (<code>0</code> and <code>1</code>) you want to check if <code>j</code> is less than <code>2</code> like this, just like you've done with your outer loop.</p>\n\n<pre><code>for (int j = 0; j &lt; 2; j++)\n</code></pre>\n\n<p>Although given you appear to be trying to check both values at the same time in the <code>if</code> within those loops, maybe what you want to do is replace that loop with a different <code>if</code> statement like this?</p>\n\n<pre><code>if ((survey[i][0] == M) &amp;&amp; (survey[i][1]== 1))\n</code></pre>\n\n<p>Also if you're intention with the <code>M</code>, <code>B</code>, <code>S</code> and <code>A</code> variables is to put in characters into your array you just need to put single quotes around like <code>'M'</code> as currently they aren't assigned a value so will potentially have any value. Same would also apply to the <code>if</code> statement too.</p>\n\n<p>So to summarise your code should look like this:</p>\n\n<pre><code>#include  &lt;stdio.h&gt;\nint main()\n   {\n   int m_cricket = 0, m_footy = 0, m_tennis = 0, m_soccer = 0;\n   int s_cricket = 0, s_footy = 0, s_tennis = 0, s_soccer = 0\n   int b_cricket = 0, b_footy = 0, b_tennis = 0, b_soccer = 0\n   int a_cricket = 0, a_footy = 0, a_tennis = 0, a_soccer = 0\n   int survey[36][2] = {{'M', 1}, {'S', 2}, {'B', 1}, {'B', 3}, {'M', 2}, {'B', 4}, {'S', 1}, {'A', 3}, {'M', 4}, {'B', 2}, {'B', 1}, {'S', 3}, {'B', 4}, {'B', 4}, {'M', 1}, {'M', 1}, {'B', 3}, {'B', 3}, {'S', 1}, {'S', 1}, {'S', 2}, {'M', 4}, {'M', 4}, {'S', 2}, {'A', 1}, {'S', 2}, {'B', 3}, {'M', 1}, {'B', 1}, {'S', 2}, {''A'', 3}, {'M', 4}, {'S', 1}, {'B', 2}, {'M', 3}, {'B', 4}};\n\n   for (int i = 0; i &lt; 36; i++)\n      {\n      if ((survey[i][0] == 'M') &amp;&amp; (survey[i][1]==1))\n         {\n         m_cricket++;\n         }\n      }\n\n    printf(\"\\tCity  Cricket Footy  Tennis  Soccer\\n\");\n    printf(\"------------------------------------------------\\n\");\n    printf(\"Melbourne:\\t %d\\t %d\\t %d\\t %d\\t\\n\", m_cricket, m_footy, m_tennis, m_soccer);\n    printf(\"Sydney:\\t %d\\t %d\\t %d\\t %d\\t\\n\", s_cricket, s_footy, s_tennis, s_soccer);\n    printf(\"Brisbane:\\t %d\\t %d\\t %d\\t %d\\t\\n\", b_cricket, b_footy, b_tennis, b_soccer);\n    printf(\"Adelaide:\\t %d\\t %d\\t %d\\t %d\\t\\n\", a_cricket, a_footy, a_tennis, a_soccer);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7945714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ad9b46c91fe676a3c760bbf5c5925a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex P", "link": "https://stackoverflow.com/users/7945714/alex-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 44156572, "answer_count": 2, "score": -1, "last_activity_date": 1495624706, "creation_date": 1495623634, "question_id": 44156438, "link": "https://stackoverflow.com/questions/44156438/counting-values-in-a-2d-array-c", "title": "Counting Values in a 2D array - C", "body": "<p>So I've been trying to work my way through an assignment learning C, and was just hoping for some sort of correction for where i'm going wrong</p>\n\n<p>The scenario is a survey, and this is the output i'm expected to produce</p>\n\n<pre><code>     POPULARITY TABLE\n     ----------------------------------------------------\n     City Cricket Footy Tennis Soccer\n     -----------------------------------------------------\n     Melbourne 4 1 1 4\n     Sydney 4 5 1 0\n     Brisbane 2 2 4 4\n     Adelaide 1 0 2 0\n    ----------------------------------------------------- \n</code></pre>\n\n<p>Variables being M, S, B, A and 1,2,3,4 for the table</p>\n\n<p>Everytime I execute my code, it either doesn't count the values or it says theres 36 of one value</p>\n\n<pre><code>   #include  &lt;stdio.h&gt;\n   int main()\n    {\n        int  i,  j;\n        char M, B, S, A;\n        int m_cricket = 0, m_footy = 0, m_tennis = 0, m_soccer = 0;\n        int s_cricket = 0, s_footy = 0, s_tennis = 0, s_soccer = 0\n        int b_cricket = 0, b_footy = 0, b_tennis = 0, b_soccer = 0\n        int a_cricket = 0, a_footy = 0, a_tennis = 0, a_soccer = 0\n        int survey[36][2] = {{M, 1}, {S, 2}, {B, 1}, {B, 3}, {M, 2}, {B, 4}, {S, 1}, {A, 3}, {M, 4}, {B, 2}, {B, 1}, {S, 3}, {B, 4}, {B, 4}, {M, 1}, {M, 1}, {B, 3}, {B, 3}, {S, 1}, {S, 1}, {S, 2}, {M, 4}, {M, 4}, {S, 2}, {A, 1}, {S, 2}, {B, 3}, {M, 1}, {B, 1}, {S, 2}, {A, 3}, {M, 4}, {S, 1}, {B, 2}, {M, 3}, {B, 4}};\n\nfor (int i = 0; i &lt; 36; i++)\n{\n        for (int j = 0; j == 2; j++)\n        {\n            if (survey[i][j] == M, 1)\n            {\n                m_cricket++;\n            }\n        }\n\n}\n\n    printf(\"\\tCity  Cricket Footy  Tennis  Soccer\\n\");\n    printf(\"------------------------------------------------\\n\");\n    printf(\"Melbourne:\\t %d\\t %d\\t %d\\t %d\\t\\n\", m_cricket, m_footy, m_tennis, m_soccer);\n    printf(\"Sydney:\\t %d\\t %d\\t %d\\t %d\\t\\n\", s_cricket, s_footy, s_tennis, s_soccer);\n    printf(\"Brisbane:\\t %d\\t %d\\t %d\\t %d\\t\\n\", b_cricket, b_footy, b_tennis, b_soccer);\n    printf(\"Adelaide:\\t %d\\t %d\\t %d\\t %d\\t\\n\", a_cricket, a_footy, a_tennis, a_soccer);\n\n    return 0;\n}   \n</code></pre>\n\n<p>Where have I gone wrong? Is there a better way I could code this?</p>\n\n<p>I only coded for Melbourne as when coding this, i was going under the logic that if i could get one city working, the rest would be straightforward</p>\n"}, {"tags": ["c", "openssl", "java-native-interface"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1495661674, "post_id": 44155498, "comment_id": 75353668, "body": "What signature algorithm do you want to use? <b><i><code>CN=10.1.1.12</code></i></b> is probably wrong. Hostnames always go in the <i>SAN</i>. If its present in the <i>CN</i>, then it must be present in the <i>SAN</i> too (you have to list it twice in this case). For more rules and reasons, see <a href=\"http://stackoverflow.com/a/21340898/608639\">How do you sign Certificate Signing Request with your Certification Authority</a> and <a href=\"http://stackoverflow.com/q/10175812/608639\">How to create a self-signed certificate with openssl?</a> You will also need to place the self-signed certificate in the appropriate trust store."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8058706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c273552ac286545a1ffdf537c957cc?s=128&d=identicon&r=PG&f=1", "display_name": "F.Vince", "link": "https://stackoverflow.com/users/8058706/f-vince"}, "edited": false, "score": 0, "creation_date": 1495622264, "post_id": 44155823, "comment_id": 75328351, "body": "thank you, but how can i create X509_name object, and what does the flags mean."}, {"owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "reply_to_user": {"reputation": 11, "user_id": 8058706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c273552ac286545a1ffdf537c957cc?s=128&d=identicon&r=PG&f=1", "display_name": "F.Vince", "link": "https://stackoverflow.com/users/8058706/f-vince"}, "edited": false, "score": 0, "creation_date": 1495622492, "post_id": 44155823, "comment_id": 75328514, "body": "I gave you a full example, there is no real manpage for it, so I deleted the link"}], "tags": [], "owner": {"reputation": 17054, "user_id": 5636775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GC9DT.gif?s=128&g=1", "display_name": "Ctx", "link": "https://stackoverflow.com/users/5636775/ctx"}, "is_accepted": false, "score": 0, "last_activity_date": 1495622415, "last_edit_date": 1495622415, "creation_date": 1495621926, "answer_id": 44155823, "question_id": 44155498, "link": "https://stackoverflow.com/questions/44155498/how-can-i-create-a-certifacate-file-contain-signature-algorithm-use-openssl-ap/44155823#44155823", "title": "how can i create a certifacate file contain &#39;Signature Algorithm&#39; use openssl api", "body": "<p>You can use the function <code>X509_print_ex()</code>, which is designed for that purpose:</p>\n\n<pre><code>X509 *x509 = NULL;\nRSA *rsa = NULL;\n\nPEM_read_X509(stdin, &amp;x509, NULL, NULL);\nx509_print_ex_fp(stdout, x509, XN_FLAG_COMPAT, XN_FLAG_COMPAT);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8058706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68c273552ac286545a1ffdf537c957cc?s=128&d=identicon&r=PG&f=1", "display_name": "F.Vince", "link": "https://stackoverflow.com/users/8058706/f-vince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495661562, "creation_date": 1495621039, "last_edit_date": 1495661562, "question_id": 44155498, "link": "https://stackoverflow.com/questions/44155498/how-can-i-create-a-certifacate-file-contain-signature-algorithm-use-openssl-ap", "title": "how can i create a certifacate file contain &#39;Signature Algorithm&#39; use openssl api", "body": "<p>I created self-signed certificate in my server, but I want create client cert by program code, not linux command. I use openssl api <code>PEM_write_X509(fp, x509)</code> to create a <code>client.crt</code> file,the final result is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>-----BEGIN CERTIFICATE-----\nMIIDiDCCAnCgAwIBAgIBAzANBgkqhkiG9w0BAQUFADCBqTELMAkGA1UEBhMCQ04x\nDzANBgNVBAgMBmZ1amlhbjEPMA0GA1UEBwwGZnV6aG91MRcwFQYDVQQKDA5sYW5o\nYWl0aWFud2FuZzEXMBUGA1UECwwObGFuaGFpdGlhbndhbmcxGjAYBgNVBAMMEWRh\ndGEud2Fuc2hpcHMuY29tMSowKAYJKoZIhvcNAQkBFht3ZW5jaGVuZ0BsYW5oYWl0\naWFud2FuZy5jb20wHhcNMTcwNTExMDkxMDE3WhcNMjcwNTA5MDkxMDE3WjBsMQsw\nCQYDVQQGEwJDTjEPMA0GA1UECAwGZnVqaWFuMRcwFQYDVQQKDA5sYW5oYWl0aWFu\nd2FuZzEXMBUGA1UECwwObGFuaGFpdGlhbndhbmcxGjAYBgNVBAMMEWRhdGEud2Fu\nc2hpcHMuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDYqJD7F1wVKbKl\nQLbkZYXhVMosHd9CVYNauaCJlU6HP9lTox8QCE201vTkfzQasADosBTDB3txm6RB\nwq5pAM2xCtk634GIEj4p+BarOUFcR4ZWgv+qO/XAi/45kbrYT5ItxJBtU/tU5p47\n80ZXkeqMYNHMxR2FRPY5feijF4UxKwIDAQABo3sweTAJBgNVHRMEAjAAMCwGCWCG\nSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRlZCBDZXJ0aWZpY2F0ZTAdBgNVHQ4E\nFgQUg86QuULuqFwOy7y3jgQprT8myRwwHwYDVR0jBBgwFoAUDGbHscvgKDbCbKDU\n1pIGhy7uODYwDQYJKoZIhvcNAQEFBQADggEBAIvjmzE3dW4aQ33actg54f/TDAgz\nSj9N9aENK530eXjlda4J9GB24rGOR6pnPHRQsUxQNKZx217k+LKFZaCgsQAKvipM\nBWdUFvSfSRuKUKnAJitFV5Z5UrkoPRpAIoSDrxoyh6FWl9hQCfPfbvLpJuM/kxuI\n2FdoWzEWQE75W2tlAx1d7qKYgMB7saYjzETxXoQCwcfp2ruKAaKe/n5cI1Beouj+\nrRmjinOYjSwe8X3kR33v1FInnAUfOho89nper48NaV4+Uk9+Ze7m9IB1xDqnUE8P\nNCX/nU80jt9O3ya5jqth1feUs9yIDx9YSF1Db0QTFrQJbp3B4t1Ov9WsVEc=\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>But the effect i need is that:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Certificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 3 (0x3)\n    Signature Algorithm: sha1WithRSAEncryption\n        Issuer: C=AA, ST=ab, L=abc, O=abc, OU=abc, CN=10.1.1.12/emailAddress=aaaa@abc.com\n        Validity\n            Not Before: May 11 09:10:17 2017 GMT\n            Not After : May  9 09:10:17 2027 GMT\n        Subject: C=AA, ST=ab, O=abc, OU=abc, CN=10.1.1.12\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: (1024 bit)\n                Modulus:\n                    00:d8:a8:90:fb:17:5c:15:29:b2:a5:40:b6:e4:65:\n                    85:e1:54:ca:2c:1d:df:42:55:83:5a:b9:a0:89:95:\n                    4e:87:3f:d9:53:a3:1f:10:08:4d:b4:d6:f4:e4:7f:\n                    34:1a:b0:00:e8:b0:14:c3:07:7b:71:9b:a4:41:c2:\n                    ae:69:00:cd:b1:0a:d9:3a:df:81:88:12:3e:29:f8:\n                    16:ab:39:41:5c:47:86:56:82:ff:aa:3b:f5:c0:8b:\n                    fe:39:91:ba:d8:4f:92:2d:c4:90:6d:53:fb:54:e6:\n                    9e:3b:f3:46:57:91:ea:8c:60:d1:cc:c5:1d:85:44:\n                    f6:39:7d:e8:a3:17:85:31:2b\n                Exponent: 65537 (0x10001)\n        X509v3 extensions:\n            X509v3 Basic Constraints: \n                CA:FALSE\n            Netscape Comment: \n                OpenSSL Generated Certificate\n            X509v3 Subject Key Identifier: \n                83:CE:90:B9:42:EE:A8:5C:0E:CB:BC:B7:8E:04:29:AD:3F:26:C9:1C\n            X509v3 Authority Key Identifier: \n                keyid:0C:66:C7:B1:CB:E0:28:36:C2:6C:A0:D4:D6:92:06:87:2E:EE:38:36\n\n    Signature Algorithm: sha1WithRSAEncryption\n         8b:e3:9b:31:37:75:6e:1a:43:7d:da:72:d8:39:e1:ff:d3:0c:\n         08:33:4a:3f:4d:f5:a1:0d:2b:9d:f4:79:78:e5:75:ae:09:f4:\n         60:76:e2:b1:8e:47:aa:67:3c:74:50:b1:4c:50:34:a6:71:db:\n         5e:e4:f8:b2:85:65:a0:a0:b1:00:0a:be:2a:4c:05:67:54:16:\n         f4:9f:49:1b:8a:50:a9:c0:26:2b:45:57:96:79:52:b9:28:3d:\n         1a:40:22:84:83:af:1a:32:87:a1:56:97:d8:50:09:f3:df:6e:\n         f2:e9:26:e3:3f:93:1b:88:d8:57:68:5b:31:16:40:4e:f9:5b:\n         6b:65:03:1d:5d:ee:a2:98:80:c0:7b:b1:a6:23:cc:44:f1:5e:\n         84:02:c1:c7:e9:da:bb:8a:01:a2:9e:fe:7e:5c:23:50:5e:a2:\n         e8:fe:ad:19:a3:8a:73:98:8d:2c:1e:f1:7d:e4:47:7d:ef:d4:\n         52:27:9c:05:1f:3a:1a:3c:f6:7a:5e:af:8f:0d:69:5e:3e:52:\n         4f:7e:65:ee:e6:f4:80:75:c4:3a:a7:50:4f:0f:34:25:ff:9d:\n         4f:34:8e:df:4e:df:26:b9:8e:ab:61:d5:f7:94:b3:dc:88:0f:\n         1f:58:48:5d:43:6f:44:13:16:b4:09:6e:9d:c1:e2:dd:4e:bf:\n         d5:ac:54:47\n\n-----BEGIN CERTIFICATE-----\nMIIDiDCCAnCgAwIBAgIBAzANBgkqhkiG9w0BAQUFADCBqTELMAkGA1UEBhMCQ04x\nDzANBgNVBAgMBmZ1amlhbjEPMA0GA1UEBwwGZnV6aG91MRcwFQYDVQQKDA5sYW5o\nYWl0aWFud2FuZzEXMBUGA1UECwwObGFuaGFpdGlhbndhbmcxGjAYBgNVBAMMEWRh\ndGEud2Fuc2hpcHMuY29tMSowKAYJKoZIhvcNAQkBFht3ZW5jaGVuZ0BsYW5oYWl0\naWFud2FuZy5jb20wHhcNMTcwNTExMDkxMDE3WhcNMjcwNTA5MDkxMDE3WjBsMQsw\nCQYDVQQGEwJDTjEPMA0GA1UECAwGZnVqaWFuMRcwFQYDVQQKDA5sYW5oYWl0aWFu\nd2FuZzEXMBUGA1UECwwObGFuaGFpdGlhbndhbmcxGjAYBgNVBAMMEWRhdGEud2Fu\nc2hpcHMuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDYqJD7F1wVKbKl\nQLbkZYXhVMosHd9CVYNauaCJlU6HP9lTox8QCE201vTkfzQasADosBTDB3txm6RB\nwq5pAM2xCtk634GIEj4p+BarOUFcR4ZWgv+qO/XAi/45kbrYT5ItxJBtU/tU5p47\n80ZXkeqMYNHMxR2FRPY5feijF4UxKwIDAQABo3sweTAJBgNVHRMEAjAAMCwGCWCG\nSAGG+EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRlZCBDZXJ0aWZpY2F0ZTAdBgNVHQ4E\nFgQUg86QuULuqFwOy7y3jgQprT8myRwwHwYDVR0jBBgwFoAUDGbHscvgKDbCbKDU\n1pIGhy7uODYwDQYJKoZIhvcNAQEFBQADggEBAIvjmzE3dW4aQ33actg54f/TDAgz\nSj9N9aENK530eXjlda4J9GB24rGOR6pnPHRQsUxQNKZx217k+LKFZaCgsQAKvipM\nBWdUFvSfSRuKUKnAJitFV5Z5UrkoPRpAIoSDrxoyh6FWl9hQCfPfbvLpJuM/kxuI\n2FdoWzEWQE75W2tlAx1d7qKYgMB7saYjzETxXoQCwcfp2ruKAaKe/n5cI1Beouj+\nrRmjinOYjSwe8X3kR33v1FInnAUfOho89nper48NaV4+Uk9+Ze7m9IB1xDqnUE8P\nNCX/nU80jt9O3ya5jqth1feUs9yIDx9YSF1Db0QTFrQJbp3B4t1Ov9WsVEc=\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>How can i do it? What method should i use in OpenSSL API?</p>\n\n<p>Thank you </p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1495621151, "post_id": 44155408, "comment_id": 75327541, "body": "<code>I expected both functions to print same values.</code> Why? You seem to misunderstand how pointers work."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1495623216, "post_id": 44155408, "comment_id": 75328961, "body": "<a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\" title=\"what is the strict aliasing rule\">stackoverflow.com/questions/98650/&hellip;</a>"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1495624165, "post_id": 44155408, "comment_id": 75329568, "body": "You are casting <i>pointer to unsigned int</i> to <i>unsigned long long pointer</i>, <b>not</b> a <i>unsigned int</i> as you mentioned in the title. Please fix the title."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495624564, "post_id": 44155408, "comment_id": 75329820, "body": "Well, because, in this case, size matters :)"}], "answers": [{"tags": [], "owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "is_accepted": false, "score": 0, "last_activity_date": 1495621310, "creation_date": 1495621310, "answer_id": 44155599, "question_id": 44155408, "link": "https://stackoverflow.com/questions/44155408/why-do-i-see-a-bigger-value-when-i-cast-pointer-to-unsigned-int-as-unsigned-long/44155599#44155599", "title": "Why do I see a bigger value when I cast pointer to unsigned int as unsigned long long pointer?", "body": "<p>In func1 you are copying the value into a long long and so the value is maintained.\nIn func you are copying the memory address and then telling the compiler to just treat it as though it's pointing to 64bits of memory when it's not. It is reading memory you have not set. </p>\n\n<p>The compiler would stop/warn you if you remove the cast when you call it like this:</p>\n\n<pre><code>func(&amp;a);\nfunc1(a);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1495621339, "creation_date": 1495621339, "answer_id": 44155610, "question_id": 44155408, "link": "https://stackoverflow.com/questions/44155408/why-do-i-see-a-bigger-value-when-i-cast-pointer-to-unsigned-int-as-unsigned-long/44155610#44155610", "title": "Why do I see a bigger value when I cast pointer to unsigned int as unsigned long long pointer?", "body": "<p>You're hitting undefined behaviour because the size of an unsigned int is smaller than an unsigned long long. As far as <code>func</code> is concerned the memory pointed to by <code>dat</code> is 8 bytes long when in actual fact it's only 4 bytes - so it's accessing an extra 4 bytes that contain random values. You're casting it back down to an unsigned int for the %u portion of the <code>printf</code> so it doesn't use the extra 4 bytes and so you're getting the right value.</p>\n\n<p>The second function works properly because it's casting the value to an unsigned long long so the size difference isn't an issue.</p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 6160020, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YKm7XmRRzWk/AAAAAAAAAAI/AAAAAAAABMA/0SMhweWTkPY/photo.jpg?sz=128", "display_name": "aneesh jose", "link": "https://stackoverflow.com/users/6160020/aneesh-jose"}, "is_accepted": false, "score": 1, "last_activity_date": 1495621352, "creation_date": 1495621352, "answer_id": 44155617, "question_id": 44155408, "link": "https://stackoverflow.com/questions/44155408/why-do-i-see-a-bigger-value-when-i-cast-pointer-to-unsigned-int-as-unsigned-long/44155617#44155617", "title": "Why do I see a bigger value when I cast pointer to unsigned int as unsigned long long pointer?", "body": "<p>Suppose int is 4 bytes and long long is 8 bytes in your platform. \nWhen you cast an integer pointer to a long long pointer, the program will try to read 8 bytes from the address pointed by the pointer. </p>\n"}, {"tags": [], "owner": {"reputation": 80047, "user_id": 169346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645dbb4f7ba1ff9d7ff2de02f68fbe9c?s=128&d=identicon&r=PG", "display_name": "JeremyP", "link": "https://stackoverflow.com/users/169346/jeremyp"}, "is_accepted": false, "score": 1, "last_activity_date": 1495621582, "creation_date": 1495621582, "answer_id": 44155705, "question_id": 44155408, "link": "https://stackoverflow.com/questions/44155408/why-do-i-see-a-bigger-value-when-i-cast-pointer-to-unsigned-int-as-unsigned-long/44155705#44155705", "title": "Why do I see a bigger value when I cast pointer to unsigned int as unsigned long long pointer?", "body": "<p>Technically nobody knows what is happening because your program exhibits undefined behaviour. However, we can make educated guesses based on common architectures e.g. x86 or x86_64.</p>\n\n<p>The first problem is the cast here:</p>\n\n<pre><code>func((unsigned long long *) &amp;a);\n</code></pre>\n\n<p>You cast the pointer but not the value to which it points. On many common machines, <code>int</code> would be a 32 bit value and <code>unsigned long long</code> is 64 bits. <code>a</code> is 32 bits long but you pass a pointer to a 64 bit block. The 32 bits above <code>a</code> in memory could be anything. This is the reason why the first print prints that really long binary number. </p>\n\n<p>In <code>func1</code>, you correctly cast <code>a</code> so the program will extend <code>a</code> to 64 bits when it puts it on the stack. </p>\n\n<p>In both cases, the format specifier for the last argument of the <code>printf</code> is incorrect. <code>printf</code> assumes it has been passed a 32 bit value and is somehow ignoring the top 32 bits of what has been passed, probably because it is being passed in a 64 bit register. It's undefined behaviour, it can do what it likes.</p>\n"}], "owner": {"reputation": 51, "user_id": 1662780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c85a1f6cf9bbc0ed1eadbb94a8ee395?s=128&d=identicon&r=PG", "display_name": "user1662780", "link": "https://stackoverflow.com/users/1662780/user1662780"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1495628043, "creation_date": 1495620777, "last_edit_date": 1495628043, "question_id": 44155408, "link": "https://stackoverflow.com/questions/44155408/why-do-i-see-a-bigger-value-when-i-cast-pointer-to-unsigned-int-as-unsigned-long", "title": "Why do I see a bigger value when I cast pointer to unsigned int as unsigned long long pointer?", "body": "<p>Output for the below program is :</p>\n\n<p>dat : 18446721190124690902 892374</p>\n\n<p>dat : 892374 892374</p>\n\n<p>What is happening when I pass variable \"a\" as pointer ? I expected both functions to print same values. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid func(unsigned long long * dat) {\n        printf(\"dat : %llu %u \\n\",*dat,*dat);\n}\n\nvoid func1(unsigned long long dat) {\n        printf(\"dat : %llu %u \\n\",dat,dat);\n}\n\nint main(void)\n{\n        unsigned int a;\n        a = 892374;\n        func((unsigned long long *) &amp;a);\n        func1((unsigned long long) a);\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1495620584, "post_id": 44155239, "comment_id": 75327169, "body": "IMO no. You need at least <code>opendir</code> and <code>readdir</code>, otherwise how could you read the directory? For reading/writing the files you can use standard <code>fopen</code>/<code>fread</code> C functions, but even they end up calling <code>read</code>/<code>write</code> etc. So what are you <i>actually</i>  trying to achieve? Do you want to write a platform independent program?"}, {"owner": {"reputation": 1008, "user_id": 1518661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f4837de83793bf897a324260dec671?s=128&d=identicon&r=PG&f=1", "display_name": "kjohri", "link": "https://stackoverflow.com/users/1518661/kjohri"}, "edited": false, "score": 4, "creation_date": 1495620831, "post_id": 44155239, "comment_id": 75327329, "body": "If you wish to do I/O operation, you have to use system calls or a function built upon system calls."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495624948, "post_id": 44155239, "comment_id": 75330102, "body": "Your requirement/s are still unrealistic.  Clarify/fix them.  Some OS may offer calls like &#39;CopyFile()&#39;, but that ties you to a specific API."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 1, "creation_date": 1495625021, "post_id": 44155239, "comment_id": 75330152, "body": "@ThingyWotsit: the question is tagged <code>linux</code> so I guess that <code>codify</code> wants a Linux specific answer."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495625128, "post_id": 44155239, "comment_id": 75330233, "body": "&#39;I looked online for help and got a few solutions but they did either of the following that I do not want to do&#39; well, that should have been your first clue that what you want is not available."}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1495625276, "post_id": 44155239, "comment_id": 75330350, "body": "@BasileStarynkevitch OK:)  Is there anything in the linux API&#39;s that umm.. copies files without explicitly reading and writing them, (don&#39;t ask me - it&#39;s OP&#39;s requirement:)?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1495625826, "post_id": 44155239, "comment_id": 75330735, "body": "Now that you have edited the question the answer has changed from <b>NO</b> to <b>YES</b>. BTW the <code>cp</code> command is written in C."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8050801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa25de101a29fbc615809445d6eedf0?s=128&d=identicon&r=PG&f=1", "display_name": "codify", "link": "https://stackoverflow.com/users/8050801/codify"}, "edited": false, "score": 0, "creation_date": 1495624430, "post_id": 44156154, "comment_id": 75329728, "body": "Thanks! i have edited the question as there were confusions between Linux system calls and C system libraries. I hope the question is unambiguous now."}, {"owner": {"reputation": 1, "user_id": 8050801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa25de101a29fbc615809445d6eedf0?s=128&d=identicon&r=PG&f=1", "display_name": "codify", "link": "https://stackoverflow.com/users/8050801/codify"}, "edited": false, "score": 0, "creation_date": 1495700862, "post_id": 44156154, "comment_id": 75366346, "body": "Thanks for your response!  I understand we can walk through a given directory using nftw and perform an operation on each entry individually BUT the problem is- we are still &#39;<b>opening every file</b> in the directory for copying the contents&#39; (am i getting it right?). I need a way to skip this. Say, there are 50 files (with a lot of data in them) in dir1 that need to be replicated in dir2,  We just should be able to copy them w/o bothering about the contents of the files (and opening those). Can that not be achieved?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 1, "user_id": 8050801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa25de101a29fbc615809445d6eedf0?s=128&d=identicon&r=PG&f=1", "display_name": "codify", "link": "https://stackoverflow.com/users/8050801/codify"}, "edited": false, "score": 0, "creation_date": 1495708333, "post_id": 44156154, "comment_id": 75370698, "body": "You can&#39;t avoid open(2) to copy a file.You look confused. I recommend taking days to read the material I linked to. I don&#39;t have time or space to explain much more, and you need to takes several days (or weeks) in reading and learning."}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 2, "last_activity_date": 1495709960, "last_edit_date": 1495709960, "creation_date": 1495622867, "answer_id": 44156154, "question_id": 44155239, "link": "https://stackoverflow.com/questions/44155239/recursively-copying-a-directory-using-native-c-code/44156154#44156154", "title": "Recursively copying a directory using native C code", "body": "<blockquote>\n  <p>I was looking to implement the behavior of linux system commands</p>\n  \n  <p>1) cp   that copies everything inside the 'src_dir' into 'dst_dir' recursively, </p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>Can the above be achieved using C (and no linux system calls)?</p>\n</blockquote>\n\n<p>Of course not; remember that a <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system call</a> is the main way an application can interact with the Linux kernel: look on <a href=\"http://man7.org/linux/man-pages/man2/syscalls.2.html\" rel=\"nofollow noreferrer\">syscalls(2)</a> for an exhaustive list of system calls (you are likely to need <a href=\"http://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\">stat(2)</a>...). Do not confuse system calls with calls to the C library <a href=\"http://man7.org/linux/man-pages/man3/system.3.html\" rel=\"nofollow noreferrer\">system(3)</a> function (which uses <a href=\"http://man7.org/linux/man-pages/man2/fork.2.html\" rel=\"nofollow noreferrer\">fork(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/execve.2.html\" rel=\"nofollow noreferrer\">execve(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/waitpid.2.html\" rel=\"nofollow noreferrer\">waitpid(2)</a> etc....)</p>\n\n<p>However, you might be interested in <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\">nftw(3)</a> (which of course is implemented above several system calls). Look also into <a href=\"http://man7.org/linux/man-pages/man3/opendir.3.html\" rel=\"nofollow noreferrer\">opendir(3)</a> &amp; <a href=\"http://man7.org/linux/man-pages/man3/readdir.3.html\" rel=\"nofollow noreferrer\">readdir(3)</a></p>\n\n<p>You cannot change anything on the file systems without going thru system calls.</p>\n\n<h3>addenda</h3>\n\n<p>(the question has changed to)</p>\n\n<blockquote>\n  <p>Can the above be achieved with C without using system(\"cp -Rf /* \")?</p>\n</blockquote>\n\n<p>Yes; you could use <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\">nftw(3)</a> first to scan the file tree (or play appropriately with <a href=\"http://man7.org/linux/man-pages/man3/readdir.3.html\" rel=\"nofollow noreferrer\">readdir(3)</a> etc...), then detect the directories to be made (using <a href=\"http://man7.org/linux/man-pages/man2/mkdir.2.html\" rel=\"nofollow noreferrer\">mkdir(2)</a>...); you'll make appropriately the directories and you'll explicitly copy file contents (e.g. using <a href=\"http://man7.org/linux/man-pages/man3/stdio.3.html\" rel=\"nofollow noreferrer\">stdio(3)</a> functions or <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow noreferrer\">open(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/read.2.html\" rel=\"nofollow noreferrer\">read(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/write.2.html\" rel=\"nofollow noreferrer\">write(2)</a>, <a href=\"http://man7.org/linux/man-pages/man2/close.2.html\" rel=\"nofollow noreferrer\">close(2)</a> system calls....). Notice that <a href=\"http://man7.org/linux/man-pages/man2/open.2.html\" rel=\"nofollow noreferrer\">open(2)</a> (called by <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow noreferrer\">fopen(3)</a>...) is required to read or write any content from a file (even using <a href=\"http://man7.org/linux/man-pages/man2/mmap.2.html\" rel=\"nofollow noreferrer\">mmap(2)</a>...) Of course, to copy a file, you need to open it, open its fresh copy, read it and write to the copy in a loop, and close both source and destination files. But you should close (both source &amp; destination files) once the copy is done. BTW, a given <a href=\"https://en.wikipedia.org/wiki/Process_(computing)\" rel=\"nofollow noreferrer\">process</a> could have several hundreds (or thousands of) open file descriptors (see <a href=\"http://man7.org/linux/man-pages/man2/setrlimit.2.html\" rel=\"nofollow noreferrer\">setrlimit(2)</a>...) and <a href=\"http://man7.org/linux/man-pages/man3/opendir.3.html\" rel=\"nofollow noreferrer\">opendir(3)</a> also consume one.</p>\n\n<p><sup>(your number of opened file descriptors (most of them being directories, with  <a href=\"http://man7.org/linux/man-pages/man3/opendir.3.html\" rel=\"nofollow noreferrer\">opendir(3)</a>) is bounded by the file tree depth so is practically likely to be small, less than a hundred; and using clever caching with <a href=\"http://man7.org/linux/man-pages/man3/nftw.3.html\" rel=\"nofollow noreferrer\">nftw(3)</a> you could even avoid that)</sup></p>\n\n<p>BTW, <code>cp</code> is part of GNU <a href=\"https://www.gnu.org/software/coreutils/coreutils.html\" rel=\"nofollow noreferrer\">coreutils</a> which is <a href=\"https://en.wikipedia.org/wiki/Free_software\" rel=\"nofollow noreferrer\">free software</a>, so you can study its source code.  And you might also use <a href=\"http://man7.org/linux/man-pages/man1/strace.1.html\" rel=\"nofollow noreferrer\">strace(1)</a> to understand what <code>cp</code> is doing.</p>\n\n<p>Read <a href=\"http://advancedlinuxprogramming.com/\" rel=\"nofollow noreferrer\"><em>Advanced Linux Programming</em></a> and also <a href=\"http://pages.cs.wisc.edu/~remzi/OSTEP/\" rel=\"nofollow noreferrer\"><em>Operating System : Three Easy Pieces</em></a> (both are freely downloadable, as chapters in PDF)</p>\n\n<p>There is no way to copy the content of one file with a single <a href=\"https://en.wikipedia.org/wiki/System_call\" rel=\"nofollow noreferrer\">system call</a>. You need a loop. But look also into the Linux specific <a href=\"http://man7.org/linux/man-pages/man2/copy_file_range.2.html\" rel=\"nofollow noreferrer\">copy_file_range(2)</a> which I don't recommend, better loop on POSIX  <a href=\"http://man7.org/linux/man-pages/man2/read.2.html\" rel=\"nofollow noreferrer\">read(2)</a> and <a href=\"http://man7.org/linux/man-pages/man2/write.2.html\" rel=\"nofollow noreferrer\">write(2)</a></p>\n"}], "owner": {"reputation": 1, "user_id": 8050801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa25de101a29fbc615809445d6eedf0?s=128&d=identicon&r=PG&f=1", "display_name": "codify", "link": "https://stackoverflow.com/users/8050801/codify"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1301, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1495709960, "creation_date": 1495620337, "last_edit_date": 1495625713, "question_id": 44155239, "link": "https://stackoverflow.com/questions/44155239/recursively-copying-a-directory-using-native-c-code", "title": "Recursively copying a directory using native C code", "body": "<p>I was looking to implement the behavior of Linux command <code>cp -Rf &lt;src_dir&gt;/* &lt;dst_dir&gt;</code> that copies everything inside the 'src_dir' into 'dst_dir' recursively </p>\n\n<p>I looked online for help and got a few solutions but they did either of the following that I do not want to do:</p>\n\n<ol>\n<li><p>using <code>rename(src_dir, dst_dir)</code>, which essentially 'moves' the contents and not copies.\nI need to keep the contents of the 'src_dir' intact. </p></li>\n<li><p>Opening to read each file int the 'src_dir'.\nI would like to do this w/o opening the files and reading the content.</p></li>\n</ol>\n\n<p>Can the above be achieved with C without using <code>system(\"cp -Rf &lt;src_dir&gt;/* &lt;dst_dir&gt;\")</code>?</p>\n\n<p>(Edited the original question after realising from a few initial comments that the original lang was confusing)</p>\n"}, {"tags": ["c", "cs50"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495620429, "post_id": 44155226, "comment_id": 75327062, "body": "how is <code>i</code> treated?"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1495620435, "post_id": 44155226, "comment_id": 75327065, "body": "Is this <code>C</code>? What does <code>string P</code> does? What <code>get_string()</code> function does?"}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "reply_to_user": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 6, "creation_date": 1495620466, "post_id": 44155226, "comment_id": 75327084, "body": "@GauravPathak cs50.h, yes we all hate it. It is typedefed to char*."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1495620484, "post_id": 44155226, "comment_id": 75327095, "body": "And what is the problem with the code you show? For some example input, what is the expected and actual output? Have you tried stepping through the code line by line while monitoring variables in a debugger?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1495620541, "post_id": 44155226, "comment_id": 75327131, "body": "@Someprogrammerdude (<i>being sarcastic</i>) why? aren&#39;t you suppose to do my work for me? for free? :P"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "reply_to_user": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 0, "creation_date": 1495620561, "post_id": 44155226, "comment_id": 75327148, "body": "@AjayBrahmakshatriya I heard about <code>cs50.h</code> for the first time. Thanks!"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1495620731, "post_id": 44155226, "comment_id": 75327256, "body": "Even if you are self-taught, you have heard about <i>loops</i>? It seems that&#39;s what you&#39;re looking for. And a <a href=\"http://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list\">good beginners book</a>."}, {"owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "edited": false, "score": 1, "creation_date": 1495620738, "post_id": 44155226, "comment_id": 75327264, "body": "What is the issue? <a href=\"https://ideone.com/ive1AB\" rel=\"nofollow noreferrer\">Demo</a> works fine in my opinion? Are you compiling your code before running? (Assuming you want to check if the report begins with H or T or .)"}, {"owner": {"reputation": 19, "user_id": 8018778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dcd862fe040f07a2b79f73b842072c1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Raslan", "link": "https://stackoverflow.com/users/8018778/mohamed-raslan"}, "edited": false, "score": 0, "creation_date": 1495623245, "post_id": 44155226, "comment_id": 75328974, "body": "The main problem is in <code>scanf </code>when i use cs50 functions the code runs well . I will try to focus more on the problem Thank you all"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1495642326, "post_id": 44155226, "comment_id": 75343749, "body": "off topic:  when the user runs this program, all the user sees is &quot;Please enter the lenght of report&quot; with a blinking cursor on the second line.  You should always tell the user what they are expected to do. (BTW: <code>lenght</code> should be: <code>length</code>)  Suggest: the prompt be: &quot;Please enter the length of report (range: 1...500 inclusive)&quot;.  Similar considerations exist for &quot;Please enter the Reoprt&quot; (BTW: <code>Reoprt</code> should be: <code>Report</code>) where the only valid characters are: <code>H</code>, <code>T</code>, and <code>.</code>   When ever there is a problem with the input, output a error message and loop to try again."}], "answers": [{"tags": [], "owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "is_accepted": false, "score": 0, "last_activity_date": 1495639347, "last_edit_date": 1495639347, "creation_date": 1495622486, "answer_id": 44156004, "question_id": 44155226, "link": "https://stackoverflow.com/questions/44155226/strange-behavior-if-condition/44156004#44156004", "title": "Strange behavior if condition", "body": "<p>The reason you're having this problem is because <code>scanf(\"%d\", &amp;L)</code> will fetch one or more digits from the input <em>and nothing else</em>. As a result, it will leave behind the newline character that you entered after typing in your number.</p>\n\n<p>When you call <code>get_string()</code> (I assume this is the same as <code>GetString()</code> in the CS50 library?), the first character it sees is this residual newline character, so all you're getting back is an empty string.</p>\n\n<p>You can fix this easily enough. Just replace <code>scanf (\"%d\" , &amp;L);</code> with <code>L = GetInt();</code>.</p>\n\n<p>Or, alternatively, replace <code>scanf (\"%d\" , &amp;L);</code> with <code>scanf (\"%d%c\" , &amp;L, &amp;newline);</code>, with <code>newline</code> declared as a <code>char</code> variable at the top of your <code>main()</code> function. This will consume the line break that follows the number, so that <code>GetString()</code> won't treat it as an empty string. For more details on how <code>scanf()</code> works, type <code>man scanf</code> at the command line.</p>\n"}], "owner": {"reputation": 19, "user_id": 8018778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dcd862fe040f07a2b79f73b842072c1?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Raslan", "link": "https://stackoverflow.com/users/8018778/mohamed-raslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495639347, "creation_date": 1495620297, "last_edit_date": 1495620504, "question_id": 44155226, "link": "https://stackoverflow.com/questions/44155226/strange-behavior-if-condition", "title": "Strange behavior if condition", "body": "<p>i am self taught programmer\ni face a problem here that if condition to enter only  ( H OR T OR . )\ndoesn't get the string . go to the (<code>printf (\"Enter valid characters please  \\n\");</code>)</p>\n\n<p>below is my code :</p>\n\n<pre><code>int i = 0 ;\nint L ;\n\nprintf (\"Please enter the lenght of report \\n\"); \nscanf (\"%d\" , &amp;L);\n\nif ( L&gt;=1 &amp;&amp; L&lt;=500 )\n{\n        printf (\"Please enter the Reoprt \\n\");\n        string P = get_string ();\n        if (P[i] !='H' &amp;&amp; P[i] != 'T' &amp;&amp; P[i] != '.')\n        {\n                printf (\"Enter valid characters please  \\n\");\n        }\n        else \n        {\n                printf (\"GOOD3 \\n\");\n        }\n}\nelse \n{\n        printf (\"Please enter valid Length \\n\"); \n}\n</code></pre>\n"}, {"tags": ["c", "recursion"], "comments": [{"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495618837, "post_id": 44154608, "comment_id": 75325855, "body": "We do not have line number in SO messages."}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1495619366, "post_id": 44154608, "comment_id": 75326271, "body": "Inside the while loop <code>while (left&lt;right)</code> you are incrementing and decrementing the variables left and right but the new values are not getting assigned."}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "edited": false, "score": 0, "creation_date": 1495619429, "post_id": 44154754, "comment_id": 75326327, "body": "Why does it goes infinite loop if i remove <code>return;</code> under the recursion?"}, {"owner": {"reputation": 186, "user_id": 7862303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-rH3Oi5xG3XA/AAAAAAAAAAI/AAAAAAAALOo/mn3nPWKl15c/photo.jpg?sz=128", "display_name": "Darkpingouin", "link": "https://stackoverflow.com/users/7862303/darkpingouin"}, "reply_to_user": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "edited": false, "score": 0, "creation_date": 1495619507, "post_id": 44154754, "comment_id": 75326381, "body": "Because it never ends the condition of the while."}, {"owner": {"reputation": 793, "user_id": 67792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b8cde931bb4b4a3ccf11fbc247b6298?s=128&d=identicon&r=PG", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/67792/jeroen"}, "edited": false, "score": 1, "creation_date": 1495619615, "post_id": 44154754, "comment_id": 75326475, "body": "What does the fact that the function is void have to do with whether or not it enters the while loop?"}, {"owner": {"reputation": 186, "user_id": 7862303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-rH3Oi5xG3XA/AAAAAAAAAAI/AAAAAAAALOo/mn3nPWKl15c/photo.jpg?sz=128", "display_name": "Darkpingouin", "link": "https://stackoverflow.com/users/7862303/darkpingouin"}, "edited": false, "score": 0, "creation_date": 1495619646, "post_id": 44154754, "comment_id": 75326493, "body": "Try replacing your statement <code>while (left&lt;right)</code> with <code>if(left&lt;right)</code> and get rid of the <code>return</code>. You should not have any infinite loop after that. Teh reason is in the while loop the function will enter till <code>left&lt;right</code> with recursion. On the last call it wont enter the function but still be in the first while loop and without any return it wont left the while loop."}], "tags": [], "owner": {"reputation": 186, "user_id": 7862303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-rH3Oi5xG3XA/AAAAAAAAAAI/AAAAAAAALOo/mn3nPWKl15c/photo.jpg?sz=128", "display_name": "Darkpingouin", "link": "https://stackoverflow.com/users/7862303/darkpingouin"}, "is_accepted": false, "score": 0, "last_activity_date": 1495619163, "creation_date": 1495619163, "answer_id": 44154754, "question_id": 44154608, "link": "https://stackoverflow.com/questions/44154608/why-does-recursion-work-even-if-theres-no-base-case/44154754#44154754", "title": "Why does recursion work even if there&#39;s no base case?", "body": "<p>Well your function is a <code>void</code>. So the last time you call it in your recursion. It won't enter the while loop and so it won't call the function again, therefore ending the recursion. And because ypu have a return in your while loop I guess you could just replace it by an <code>if</code> statement and it would basicaly do the same and you could get rid of the <code>return</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "edited": false, "score": 0, "creation_date": 1495619760, "post_id": 44154823, "comment_id": 75326573, "body": "I got it, one more thing i wanna ask, why everytime the program enter the recursion, it check to the &quot;while&quot; statement, skipping the &quot;if&quot; statement? the recursion didn&#39;t start the loop from the beginning of the function? correct me if my statement above is wrong"}, {"owner": {"reputation": 539, "user_id": 2805824, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tBgwo.gif?s=128&g=1", "display_name": "Gaurav Pathak", "link": "https://stackoverflow.com/users/2805824/gaurav-pathak"}, "edited": false, "score": 0, "creation_date": 1495620076, "post_id": 44154823, "comment_id": 75326815, "body": "Simply because the values of <code>left</code> and <code>right</code> are not getting updated. Are you familiar with reentrant code and reentrancy?"}], "tags": [], "owner": {"reputation": 793, "user_id": 67792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b8cde931bb4b4a3ccf11fbc247b6298?s=128&d=identicon&r=PG", "display_name": "Jeroen", "link": "https://stackoverflow.com/users/67792/jeroen"}, "is_accepted": false, "score": 2, "last_activity_date": 1495619333, "creation_date": 1495619333, "answer_id": 44154823, "question_id": 44154608, "link": "https://stackoverflow.com/questions/44154608/why-does-recursion-work-even-if-theres-no-base-case/44154823#44154823", "title": "Why does recursion work even if there&#39;s no base case?", "body": "<p>Suppose left=2 and right=1. What happens if you leave line 11 in, the condition will be true, and you will exit the function (return) immediately. When you remove line 11, you will get to the while loop. The while statement checks if left is less than right, which it is not. Therefore, it will skip all the code inside the while loop which brings you to the end of the function, and hence it will return automatically. This is identical behaviour to the case where you leave line 11 in place.</p>\n\n<p>The reason it loops infinitely when you remove line 16 is because you are not updating \"left\" and \"right\" to a new value. So if left is indeed less than right, it will enter the loop and since the value of left and right never change, the next time it gets to the line with the \"while\" statement, \"left\" will still be less than \"right\" and hence the loop will continue indefinitely.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 2, "last_activity_date": 1495620352, "creation_date": 1495620352, "answer_id": 44155248, "question_id": 44154608, "link": "https://stackoverflow.com/questions/44154608/why-does-recursion-work-even-if-theres-no-base-case/44155248#44155248", "title": "Why does recursion work even if there&#39;s no base case?", "body": "<p>This code pattern:</p>\n\n<pre><code>while (condition)\n{\n    // do something\n    return;\n}\n</code></pre>\n\n<p>is exactly equivalent to</p>\n\n<pre><code>if (condition)\n{\n    // do something\n    return;\n}\n</code></pre>\n\n<p>In other words, your base case is <code>!condition</code>.</p>\n\n<hr>\n\n<p>You could replace your implementation with</p>\n\n<pre><code>void revcur(int arr[], int left, int right)\n{\n    if (left&gt;=right) return;\n\n    swap(&amp;arr[left],&amp;arr[right]);\n    revcur(arr,left+1,right-1);\n}\n</code></pre>\n\n<p>and that would be exactly equivalent (the <code>while</code> was never actually looping).</p>\n\n<hr>\n\n<p>Your version seems to have vestiges of the iterative equivalent:</p>\n\n<pre><code>void revcur(int arr[], int left, int right)\n{\n    while (left&lt;right) {\n        swap(&amp;arr[left++],&amp;arr[right--]);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1495620410, "creation_date": 1495620410, "answer_id": 44155266, "question_id": 44154608, "link": "https://stackoverflow.com/questions/44154608/why-does-recursion-work-even-if-theres-no-base-case/44155266#44155266", "title": "Why does recursion work even if there&#39;s no base case?", "body": "<p>Your function is overly complicated, actually it is simply doing this:</p>\n\n<pre><code>void revcur(int arr[], int left, int right)\n{\n  if (left&lt;right)\n  {\n    swap(&amp;arr[left], &amp;arr[right]);\n    revcur(arr, left + 1, right - 1);\n  }\n}\n</code></pre>\n\n<p>The <code>while</code> loop in your original function never loops more than once, so having \n<code>while</code> is actually pointless; it's just a weird way to write <code>if</code>.</p>\n\n<p>Consider following functions.</p>\n\n<pre><code>void foo(int x)\n{\n  printf(\"x = %d\\n\",x );\n\n  if (x &gt; 0)\n    foo(x - 1);\n}\n\n\nvoid bar(int x)\n{\n  printf(\"x = %d\\n\", x);\n\n  while (x &gt; 0)\n  {\n    bar(x - 1);\n    return;\n  }\n}\n</code></pre>\n\n<p><code>foo</code> and <code>bar</code> do exactly the same thing, except that <code>bar</code> is abusing the <code>while</code> loop using it as an <code>if</code> just like you did in your function.</p>\n\n<p>Now try to remove the <code>return</code> from the <code>bar</code> function and see what happens.</p>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "edited": false, "score": 0, "creation_date": 1495677565, "post_id": 44155895, "comment_id": 75357992, "body": "How it works? That&#39;s interesting recursion for me. I couldn&#39;t figure it out, why it works even if <code>n-2</code> i mean, when the right index becomes 8 6 4 2 0, how could the swapping doesn&#39;t skip some index?"}, {"owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "edited": false, "score": 0, "creation_date": 1495699422, "post_id": 44155895, "comment_id": 75365559, "body": "@owenizedd The function at first check whether the array has at least two elements. If for example the array has only one element then there are nothing to swap. If there are more than or equal to 2 elements then the first and the last elements are swapped that is 2 elements were swapped and the function called for the array with the elements without these two elements."}], "tags": [], "owner": {"reputation": 219634, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1495622841, "last_edit_date": 1495622841, "creation_date": 1495622096, "answer_id": 44155895, "question_id": 44154608, "link": "https://stackoverflow.com/questions/44154608/why-does-recursion-work-even-if-theres-no-base-case/44155895#44155895", "title": "Why does recursion work even if there&#39;s no base case?", "body": "<p>This statement</p>\n\n<pre><code>if (left&gt;=right) return; //This program still works even if i delete this line or comment \n</code></pre>\n\n<p>is just redundant.</p>\n\n<p>If <code>left &gt;= right</code> is true then the condition of the while statement <code>left &lt; right</code>is false and the while loop will not be executed.</p>\n\n<p>So you may remove the if statement.</p>\n\n<pre><code>void revcur (int arr[], int left, int right)\n{\n    while (left&lt;right)\n    {\n        swap(&amp;arr[left],&amp;arr[right]);\n        revcur(arr,left+1,right-1);\n        return; //This program will go to infinite recursive if i delete this\n    }\n}\n</code></pre>\n\n<p>However you may not remove the return statement because in this case the loop will be infinite due to the fact that inside the loop the values of the variables <code>left</code> and <code>right</code> themselves are not changed and the condition of the while statement will always evaluate to true if it is initially evaluates to true. </p>\n\n<p>On the other hand there is no sense to use the while statement because in any case it is assumed that the body of the loop will be executed only once due to the return statement. It is the condition of the while statement that is important.</p>\n\n<p>So you may substitute the while statement for an if statement.</p>\n\n<p>For example</p>\n\n<pre><code>void revcur (int arr[], int left, int right)\n{\n    if ( left &lt; right)\n    {\n        swap(&amp;arr[left],&amp;arr[right]);\n        revcur(arr,left+1,right-1);\n    }\n}\n</code></pre>\n\n<p>Take into account that if the array contains only one element then it will be swapped with itself that is the function will be have one more redundant recursive call.</p>\n\n<p>The function can be rewritten as having only two parameters and without the redundant recursive call of itself.</p>\n\n<p>Below is a demonstrative program that shows how the function can be written with two parameters.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid swap( int *a, int *b )\n{\n    int temp= *b;\n    *b = *a;\n    *a = temp;\n}\n\nvoid reverse( int a[], size_t n )\n{\n    if ( !( n &lt; 2 ) )\n    {\n        swap( &amp;a[0], &amp;a[n-1] );\n        reverse( a + 1, n - 2 );\n    }\n}\n\nint main(void) \n{\n    int a[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n    const size_t N = sizeof( a ) / sizeof( *a );\n\n    for ( size_t i = 0; i &lt; N; i++) printf( \"%d \", a[i] );\n    putchar( '\\n' );\n\n    reverse( a, N );\n\n    for ( size_t i = 0; i &lt; N; i++) printf( \"%d \", a[i] );\n    putchar( '\\n' );\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9 10 \n10 9 8 7 6 5 4 3 2 1 \n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1653, "favorite_count": 1, "answer_count": 5, "score": 2, "last_activity_date": 1495622841, "creation_date": 1495618730, "last_edit_date": 1495618957, "question_id": 44154608, "link": "https://stackoverflow.com/questions/44154608/why-does-recursion-work-even-if-theres-no-base-case", "title": "Why does recursion work even if there&#39;s no base case?", "body": "<p>I'm learning recursion , so i'm trying to create a program that reverse a number in array recursively and using divide and conquer technique (i'm not sure this is divide and conquer or not), so what my problem is, i want to know why if i delete line 11 the program still work properly, but if i delete line 16, it will goes infinitely.<br>\nAnd i checked through my debugger, i know why it's infinite loop, because each stacked frames index left is still less than right, this makes the loop goes infinitely, so my question, why recursive call start from check the while condition and skip the line 11? this is weird for me because i just learn some basics of recursive, so this is abit confusing for me. so in my code, the line 16 is considered as the base case? because i learn from tutorial that recursive need a base case.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define size 10\nvoid swap(int *a, int *b)\n{\n    int temp= *b;\n    *b = *a;\n    *a = temp;\n}\nvoid revcur (int arr[], int left, int right)\n{\n    if (left&gt;=right) return; //This program still works even if i delete this line or comment \n    while (left&lt;right)\n    {\n        swap(&amp;arr[left],&amp;arr[right]);\n        revcur(arr,left+1,right-1);\n        return; //This program will go to infinite recursive if i delete this\n    }\n}\nint main()\n{\n    int arr[size]={1,2,3,4,5,6,7,8,9,10};\n    revcur(arr,0,size-1);\n    int i; for (i=0; i&lt;size; i++)\n    {\n        printf(\"%d \",arr[i]);\n    }\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1495618694, "post_id": 44154526, "comment_id": 75325749, "body": "Why don&#39;t you memcpy() it back in the same manner?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495618769, "post_id": 44154526, "comment_id": 75325800, "body": "Your edit just removed the parts that causes you problem. Please don&#39;t remove code that is crucial to understand the problem you have."}, {"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "edited": false, "score": 0, "creation_date": 1495618790, "post_id": 44154526, "comment_id": 75325820, "body": "Hey, your code is fine, put it back. I just posted the answer ;)"}, {"owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1495619070, "post_id": 44154526, "comment_id": 75326030, "body": "Thanks a lot, @Lundin how would I do it in the same manner? can you show ? Thanks."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1495619778, "post_id": 44154526, "comment_id": 75326592, "body": "<code>memcpy(there, here, 4);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": true, "score": 4, "last_activity_date": 1495618707, "creation_date": 1495618707, "answer_id": 44154601, "question_id": 44154526, "link": "https://stackoverflow.com/questions/44154526/reading-and-writing-string-using-uint32-t/44154601#44154601", "title": "Reading and writing string using Uint32_t", "body": "<p>The issue is here:</p>\n\n<pre><code>char n =  data[i];\n</code></pre>\n\n<p>it should be</p>\n\n<pre><code>uint32_t n = data[i];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 721925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/V8n57.jpg?s=128&g=1", "display_name": "Curnelious", "link": "https://stackoverflow.com/users/721925/curnelious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 44154601, "answer_count": 1, "score": 1, "last_activity_date": 1495618876, "creation_date": 1495618479, "last_edit_date": 1495618876, "question_id": 44154526, "link": "https://stackoverflow.com/questions/44154526/reading-and-writing-string-using-uint32-t", "title": "Reading and writing string using Uint32_t", "body": "<p>Using some chip, I am trying to save C strings , where the chip only works with Uint32_t numbers.</p>\n\n<p>So to save a char array I use this :</p>\n\n<pre><code>            char data[]=\"lala\"; \n            uint32_t save;       //save this to memo\n            memcpy(&amp;save, data, 4);\n</code></pre>\n\n<p>Then, when I read it I get a <strong>pointer</strong> to <code>Uint32_t</code> numbers where every number is a <strong>string</strong>(e.g first is \"lala), and I have to extract the strings from these Uint32_t, but I get empty result :</p>\n\n<pre><code>uint32_t *data;\ndata = (uint32_t *) flash_record; //data pointer from some flash\n\n//now loop over all numbers to read them:\n   for (uint8_t i=0;i&lt;flash_len;i++)\n        {\n                   char bytes[6];\n                                   char n = data[i];\n                                   bytes[0] = (n &gt;&gt; 24) &amp; 0xFF;\n                                   bytes[1] = (n &gt;&gt; 16) &amp; 0xFF;\n                                   bytes[2] = (n &gt;&gt; 8) &amp; 0xFF;\n                                   bytes[3] = n &amp; 0xFF;\n                                   for (int k=0;k&lt;4;k++)\n                                      printf(message:%c,bytes[k]\n\n        }\n</code></pre>\n\n<p>How would I loop to extract the words back  ?</p>\n"}, {"tags": ["c", "syntax", "post-increment"], "comments": [{"owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "edited": false, "score": 0, "creation_date": 1495619290, "post_id": 44154436, "comment_id": 75326196, "body": "Didn&#39;t saw that question. I wanted to detele this one because it&#39;s useless, but I can&#39;t do it."}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 7862303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-rH3Oi5xG3XA/AAAAAAAAAAI/AAAAAAAALOo/mn3nPWKl15c/photo.jpg?sz=128", "display_name": "Darkpingouin", "link": "https://stackoverflow.com/users/7862303/darkpingouin"}, "edited": false, "score": 1, "creation_date": 1495618551, "post_id": 44154507, "comment_id": 75325628, "body": "<code>Other compilers might eat your cat.</code> I wasn&#39;t ready for that. You made my day xD"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1495618900, "post_id": 44154507, "comment_id": 75325914, "body": "This has been asked a million times before. Instead of answering the same old question over and over, please vote to close it as duplicate. A list of good duplicates can be found here: <a href=\"https://stackoverflow.com/tags/c/info\">stackoverflow.com/tags/c/info</a>. In this case FAQ -&gt; operators -&gt; <a href=\"https://stackoverflow.com/questions/949433/why-are-these-constructs-using-undefined-behavior\">Why are these constructs (using ++) undefined behavior?</a>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1495622055, "post_id": 44154507, "comment_id": 75328193, "body": "@Lundin: The common duplicates on this are centred around the <code>=</code> operator, which is chiefly why I felt it appropriate to answer this one. <code>*</code> is more subtle, IMHO at least anyway. (And the reputation is immaterial: now I have the T shirt, the pen, and the mug ;-))"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1495622580, "post_id": 44154507, "comment_id": 75328572, "body": "Could also use <a href=\"https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior\" title=\"undefined unspecified and implementation defined behavior\">stackoverflow.com/questions/2397984/&hellip;</a> or <a href=\"https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\" title=\"undefined behavior and sequence points\">stackoverflow.com/questions/4176328/&hellip;</a>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1495622683, "post_id": 44154507, "comment_id": 75328631, "body": "Alternatively you could just link to the C standard ;-). Personally I set the criteria for a duplicate as the <i>question</i> being an exact duplicate of another <i>question</i>. The fact that an answer to another question can serve to answer another question is not, to me at least, a test of &quot;duplicateness&quot;."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1495618427, "creation_date": 1495618427, "answer_id": 44154507, "question_id": 44154436, "link": "https://stackoverflow.com/questions/44154436/post-incrementation-used-with-multiplication-in-while-loop/44154507#44154507", "title": "Post incrementation used with multiplication in while loop", "body": "<p>The behaviour of <code>x * x++</code> is <em>undefined</em>. This is because you are essentially reading from and writing to <code>x</code> in an <em>unsequenced</em> step; multiplication is not a <em>sequence point</em> in C.</p>\n\n<p>Don't do this in C. Your compiler is warning you of this out of common courtesy. Other compilers might eat your cat.</p>\n"}], "owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1495618476, "accepted_answer_id": 44154507, "answer_count": 1, "score": 0, "last_activity_date": 1495618475, "creation_date": 1495618254, "question_id": 44154436, "link": "https://stackoverflow.com/questions/44154436/post-incrementation-used-with-multiplication-in-while-loop", "closed_reason": "Duplicate", "title": "Post incrementation used with multiplication in while loop", "body": "<p>The odd numbers array is grouped in this way: <code>first</code> number is the first group, the next <code>2</code> numbers form the 2nd group, the next <code>3</code> numbers form the 3rd group and so on. </p>\n\n<p>Groups:</p>\n\n<ol>\n<li>1</li>\n<li>3 5</li>\n<li>7 9 11</li>\n<li>13 15 17 19</li>\n<li>21 23 25 27 29</li>\n</ol>\n\n<p>Now I want to find if a given number is the sum of the numbers in a group and find the order number of that group.</p>\n\n<p>I wrote the next code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main()\n{\n    int k;\n    scanf(\"%d\", &amp;k);\n\n    int x = 1;\n    while( x * x * x &lt; k )\n        x++;\n\n    if( x * x * x != k )\n        x = 0;\n\n    printf(\"%d\", x);\n    return 0;\n}\n</code></pre>\n\n<p>Then I tried to change the <code>while</code> loop to the next one:</p>\n\n<pre><code>while( x * x * x++ &lt; k )\n    ;\n</code></pre>\n\n<p>The program is not working and I get the next warning in <code>codeblocks</code>:</p>\n\n<p><code>operation on 'x' may be undefined</code></p>\n\n<p>Why does it is not working?</p>\n"}, {"tags": ["c", "server", "client", "buffer", "circular-buffer"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 7805427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/462317d25b7455e93bbe93b1c2ce3d60?s=128&d=identicon&r=PG&f=1", "display_name": "ezviagintcev", "link": "https://stackoverflow.com/users/7805427/ezviagintcev"}, "edited": false, "score": 0, "creation_date": 1495620418, "post_id": 44154279, "comment_id": 75327052, "body": "Thank you, I&#39;ll study that. I think I need something simple based on my structures and functions"}, {"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "reply_to_user": {"reputation": 97, "user_id": 7805427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/462317d25b7455e93bbe93b1c2ce3d60?s=128&d=identicon&r=PG&f=1", "display_name": "ezviagintcev", "link": "https://stackoverflow.com/users/7805427/ezviagintcev"}, "edited": false, "score": 0, "creation_date": 1495620550, "post_id": 44154279, "comment_id": 75327138, "body": "@GeorgeZ. just change the array of ints to array of pointers and pass the buffers, not ints?"}, {"owner": {"reputation": 97, "user_id": 7805427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/462317d25b7455e93bbe93b1c2ce3d60?s=128&d=identicon&r=PG&f=1", "display_name": "ezviagintcev", "link": "https://stackoverflow.com/users/7805427/ezviagintcev"}, "edited": false, "score": 0, "creation_date": 1495621032, "post_id": 44154279, "comment_id": 75327453, "body": "Maybe it will work, I&#39;ll try, thanks. I want to debug it in a separate project (not using send(), recv(), etc). So as I got I just need to send data when buffer is full, (if buffsize = 8 bytes, for example) and then other 8 bytes till my string length in my message ( 50 bytes) will be reached. That&#39;s right?"}, {"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "reply_to_user": {"reputation": 97, "user_id": 7805427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/462317d25b7455e93bbe93b1c2ce3d60?s=128&d=identicon&r=PG&f=1", "display_name": "ezviagintcev", "link": "https://stackoverflow.com/users/7805427/ezviagintcev"}, "edited": false, "score": 0, "creation_date": 1495622475, "post_id": 44154279, "comment_id": 75328505, "body": "@GeorgeZ. send() and recv()? Your client and server are different hosts?"}, {"owner": {"reputation": 97, "user_id": 7805427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/462317d25b7455e93bbe93b1c2ce3d60?s=128&d=identicon&r=PG&f=1", "display_name": "ezviagintcev", "link": "https://stackoverflow.com/users/7805427/ezviagintcev"}, "edited": false, "score": 0, "creation_date": 1495627716, "post_id": 44154279, "comment_id": 75332151, "body": "There are 2 different projects: server.c and client.c, the can exchange with messages with fixed buffer size. That&#39;s why I want to write it using circular buffer"}, {"owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "reply_to_user": {"reputation": 97, "user_id": 7805427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/462317d25b7455e93bbe93b1c2ce3d60?s=128&d=identicon&r=PG&f=1", "display_name": "ezviagintcev", "link": "https://stackoverflow.com/users/7805427/ezviagintcev"}, "edited": false, "score": 0, "creation_date": 1495629546, "post_id": 44154279, "comment_id": 75333549, "body": "Ok, sorry, I did not get it. IMO you just malloc a buffer, read some data there and push the pointer to the ring buffer you already have. Just change the ints to void *."}], "tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": true, "score": 2, "last_activity_date": 1495617876, "creation_date": 1495617876, "answer_id": 44154279, "question_id": 44153822, "link": "https://stackoverflow.com/questions/44153822/data-exchange-between-server-and-client-with-ring-buffer-circular-buffer-in-c/44154279#44154279", "title": "Data exchange between Server and Client with Ring Buffer (Circular Buffer) in C", "body": "<p>Basically, you need two things:</p>\n\n<ol>\n<li>A shared ring of pointers between your clients and server.</li>\n<li>A shared pool of buffers between your clients and server.</li>\n</ol>\n\n<p>There are a variety of flavors for the ring buffer: lockless, multi-consumer, multi-producer etc.</p>\n\n<p>Have a look at DPDK's ring library as an example or lockless rings. Here is a detailed description of algorithms:\n<a href=\"http://dpdk.org/doc/guides/prog_guide/ring_lib.html\" rel=\"nofollow noreferrer\">http://dpdk.org/doc/guides/prog_guide/ring_lib.html</a></p>\n\n<p>And here is the code:\n<a href=\"http://dpdk.org/browse/dpdk/tree/lib/librte_ring\" rel=\"nofollow noreferrer\">http://dpdk.org/browse/dpdk/tree/lib/librte_ring</a></p>\n"}], "owner": {"reputation": 97, "user_id": 7805427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/462317d25b7455e93bbe93b1c2ce3d60?s=128&d=identicon&r=PG&f=1", "display_name": "ezviagintcev", "link": "https://stackoverflow.com/users/7805427/ezviagintcev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 0, "accepted_answer_id": 44154279, "answer_count": 1, "score": 1, "last_activity_date": 1495617876, "creation_date": 1495616775, "question_id": 44153822, "link": "https://stackoverflow.com/questions/44153822/data-exchange-between-server-and-client-with-ring-buffer-circular-buffer-in-c", "title": "Data exchange between Server and Client with Ring Buffer (Circular Buffer) in C", "body": "<p>I wrote client-server chat for multiple clients (multiplexing i/o with non-blocking sockets). </p>\n\n<p>Now I have fixed bufferSize (for example, length = 64).\nI want to make data exchange between client and server with Ring Buffer. I also wrote a few functions (buffer inisialisation, popFront and pushBack) to write into a buffer.</p>\n\n<p>How is it possible to realize this idea? For example, I suppose I need 2 structures: the first structure has bufferlength and pointer to data in the other buffer, the second buffer has data. But now I have no idea what I should do with it. Could you give me an advice and maybe show with code? Thanks.</p>\n\n<p>Here are my ringBuffer structures and function (I suppose the function bufferSize is wrong):</p>\n\n<pre><code>struct ringBuffer\n{\n    int *bufferData;\n    int head;\n    int tail;\n    int size;\n};\n\nvoid bufferFree(struct ringBuffer *buffer)\n{\n    free(buffer-&gt;bufferData);\n}\n\nvoid bufferInitialization(struct ringBuffer *buffer, int size)\n{\n    buffer-&gt;size = size;\n    buffer-&gt;head = 0;\n    buffer-&gt;tail = 0;\n    buffer-&gt;bufferData = (int*)malloc(sizeof(int) * size);\n}\n\nint pushBack(struct ringBuffer *buffer, int data)\n{\n    buffer-&gt;bufferData[buffer-&gt;tail++] = data;\n    if (buffer-&gt;tail == buffer-&gt;size)\n    {\n        buffer-&gt;tail = 0;\n    }\n    return 0;\n}\n\nint popFront(struct ringBuffer *buffer)\n{\n    if (buffer-&gt;head != buffer-&gt;tail)\n    {\n        buffer-&gt;head++;\n        if (buffer-&gt;head == buffer-&gt;size)\n        {\n            buffer-&gt;head = 0;\n        }\n    }\n    return 0;\n}\n\nint bufferSize(struct ringBuffer *buffer)\n{\n    if (buffer-&gt;head &gt;= buffer-&gt;tail)\n    {\n        return (buffer-&gt;head - buffer-&gt;tail);\n    }\n    else\n    {\n        return buffer-&gt;size - ((buffer-&gt;size - buffer-&gt;tail) + buffer-&gt;head);\n    }\n    /*for (int i = buffer-&gt;head; buffer-&gt;head &lt; buffer-&gt;tail; i++)\n    {\n    printf(\"head[%d] and tail[%d] --&gt; bufferData = %d\", buffer-&gt;head, buffer-&gt;tail, buffer-&gt;bufferData);\n    }*/\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "sdk", "vivado-hls"], "comments": [{"owner": {"reputation": 4583, "user_id": 5379496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9fOgDREqOyM/AAAAAAAAAAI/AAAAAAAAAU8/8dNQx8FK4hY/photo.jpg?sz=128", "display_name": "Ovidiu Dolha", "link": "https://stackoverflow.com/users/5379496/ovidiu-dolha"}, "edited": false, "score": 0, "creation_date": 1495623721, "post_id": 44153606, "comment_id": 75329309, "body": "And your code is?"}, {"owner": {"reputation": 13, "user_id": 7861851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2154347586330f97810b2842fc27085?s=128&d=identicon&r=PG&f=1", "display_name": "Thaus", "link": "https://stackoverflow.com/users/7861851/thaus"}, "reply_to_user": {"reputation": 4583, "user_id": 5379496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9fOgDREqOyM/AAAAAAAAAAI/AAAAAAAAAU8/8dNQx8FK4hY/photo.jpg?sz=128", "display_name": "Ovidiu Dolha", "link": "https://stackoverflow.com/users/5379496/ovidiu-dolha"}, "edited": false, "score": 0, "creation_date": 1495624468, "post_id": 44153606, "comment_id": 75329756, "body": "void Numberseries1(ap_uint&lt;32&gt; seed, ap_uint&lt;32&gt; &amp;dout)        {     static ap_uint&lt;32&gt; reg[15];  \tint result=1;  \tint i;  \tfor(i=0;  i &lt; 15;i++)   \t\tif (result&lt;seed) \t\t{             result *= 2;             reg[i] =result;             dout= reg[i];          }   }"}, {"owner": {"reputation": 13, "user_id": 7861851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2154347586330f97810b2842fc27085?s=128&d=identicon&r=PG&f=1", "display_name": "Thaus", "link": "https://stackoverflow.com/users/7861851/thaus"}, "reply_to_user": {"reputation": 4583, "user_id": 5379496, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9fOgDREqOyM/AAAAAAAAAAI/AAAAAAAAAU8/8dNQx8FK4hY/photo.jpg?sz=128", "display_name": "Ovidiu Dolha", "link": "https://stackoverflow.com/users/5379496/ovidiu-dolha"}, "edited": false, "score": 0, "creation_date": 1495628677, "post_id": 44153606, "comment_id": 75332912, "body": "Please refer this <a href=\"https://forums.xilinx.com/t5/Welcome-Join/Returning-only-Last-value-in-XSDK-From-HLS-IP-Instead-of-series/m-p/767339#M45214\" rel=\"nofollow noreferrer\">link</a>"}], "owner": {"reputation": 13, "user_id": 7861851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2154347586330f97810b2842fc27085?s=128&d=identicon&r=PG&f=1", "display_name": "Thaus", "link": "https://stackoverflow.com/users/7861851/thaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495628604, "creation_date": 1495616201, "last_edit_date": 1495628604, "question_id": 44153606, "link": "https://stackoverflow.com/questions/44153606/returning-only-first-value-in-xsdk-from-hls-ip-instead-of-number-series", "title": "Returning only First value in XSDK From HLS IP Instead of number series", "body": "<p>Just start learning HLS and XSDk.  Currently I am working with number series. </p>\n\n<p>My goal is to print number series sequentially as for <code>N</code> times in Tera Terminal. While compiling the program codes, it's returning only last value. </p>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>void Numberseries1(ap_uint&lt;32&gt; seed, ap_uint&lt;32&gt; &amp;dout) { \n    static ap_uint&lt;32&gt; reg[15]; \n    int result=1; \n    int i; \n    for(i=0; i &lt; 15;i++) if (result&lt;seed) { \n        result *= 2; reg[i] =result; dout= reg[i]; \n    } \n} \n</code></pre>\n\n<p>FOR EXAMPLE : <code>N=10</code>, it's returning only value <code>1024</code>. Instead of EXPECTED RESULT : <code>16,32,64,128,256,512,1024,</code></p>\n\n<p>What do I need to do to get \"number series\" to print sequentially like <code>16,32,64,128,256,512,1024</code>, in Tera Terminal. </p>\n"}, {"tags": ["c", "assembly", "operating-system", "gdb"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1495614267, "post_id": 44152858, "comment_id": 75322676, "body": "What about <code>push</code>, <code>pop</code>, <code>call</code>, <code>ret</code>?"}, {"owner": {"reputation": 2230, "user_id": 2570677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPgNo.jpg?s=128&g=1", "display_name": "Liran Funaro", "link": "https://stackoverflow.com/users/2570677/liran-funaro"}, "edited": false, "score": 0, "creation_date": 1495615359, "post_id": 44152858, "comment_id": 75323399, "body": "It seems weird that this code compiled successfully because <code>sum()</code> is not defined in <code>main.c</code>. Is this the actual code you compiled?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 2230, "user_id": 2570677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QPgNo.jpg?s=128&g=1", "display_name": "Liran Funaro", "link": "https://stackoverflow.com/users/2570677/liran-funaro"}, "edited": false, "score": 0, "creation_date": 1495615532, "post_id": 44152858, "comment_id": 75323531, "body": "@LiranFunaro I think with C and bad compiler settings it&#39;ll just warn &quot;undefined, I&#39;ll assume it returns int and actually takes these arguments&quot;"}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1495625041, "post_id": 44152858, "comment_id": 75330169, "body": "There was recently this question: <a href=\"https://stackoverflow.com/q/44129645/4271923\">stackoverflow.com/q/44129645/4271923</a> ... may help with <code>call&#47;ret</code> vs stack understanding (but you should also read <a href=\"http://x86.renejeschke.de/html/file_module_x86_id_26.html\" rel=\"nofollow noreferrer\"><code>call&#47;ret</code> instruction details</a>). The &quot;<code>ebp</code> = frame-pointer&quot; is just convention, it is not mandatory. The C++ compiler in certain optimization modes may not do that for better performance. <i>&quot;Or is sum inlined by the compiler?&quot;</i> - in your <code>main</code> disassembly is <code>0x08048414 &lt;+24&gt;:   call   0x80483ed &lt;sum&gt;</code> =&gt; definitely not inlined, if there&#39;s <code>call</code>."}], "answers": [{"tags": [], "owner": {"reputation": 6709, "user_id": 7969900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FRmSKJ3-SLE/AAAAAAAAAAI/AAAAAAAAR3I/9HHcvlfBbNg/photo.jpg?sz=128", "display_name": "Andriy Berestovskyy", "link": "https://stackoverflow.com/users/7969900/andriy-berestovskyy"}, "is_accepted": false, "score": 1, "last_activity_date": 1495615918, "creation_date": 1495615918, "answer_id": 44153496, "question_id": 44152858, "link": "https://stackoverflow.com/questions/44152858/why-esp-gets-changed-imexplitcitly/44153496#44153496", "title": "Why %esp gets changed imexplitcitly?", "body": "<blockquote>\n  <p>Why isn't there any saving %ebp or moving %esp when calling the function sum as the book describes?</p>\n</blockquote>\n\n<p>You might have enabled option to omit frame pointer, most probably with -Ox compiler option. You can force GCC to still keep it with -fno-omit-frame-pointer GCC command line argument:</p>\n\n<p><a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-O\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#index-O</a></p>\n\n<blockquote>\n  <p>But inside the sum, the first instruction retrieves M[%esp + 8], which is actually 3, while the M[%esp + 4] stores the value 1. How come?</p>\n</blockquote>\n\n<p>Call instruction pushes eip register to the stack and moves esp. You compiled it in 32 bit mode, so the offset is 4 bytes.</p>\n"}], "owner": {"reputation": 11, "user_id": 8057939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cff450a08c0f129f592831d7a6698d08?s=128&d=identicon&r=PG&f=1", "display_name": "Alien", "link": "https://stackoverflow.com/users/8057939/alien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495615918, "creation_date": 1495614071, "question_id": 44152858, "link": "https://stackoverflow.com/questions/44152858/why-esp-gets-changed-imexplitcitly", "title": "Why %esp gets changed imexplitcitly?", "body": "<p>The title is actually my second problem.\n2 problems arose when I was learning the CSAPP 2nd edition, chapter 3. There're 2 relative simple files. Here's the first one:</p>\n\n<pre><code>    // code.c\n    int accum = 0;\n\n    int sum(int x, int y)\n    {\n         int     t = x + y;\n         accum += t;\n         return t;\n    }\n</code></pre>\n\n<p>The second one:</p>\n\n<pre><code>    // main.c\n    int main() {\n         return sum(1, 3);\n    }\n</code></pre>\n\n<p>I used gcc to compile them, following the book. In order to get a 32-bit program, I added an -m32 option(Mine is 64-bit Ubuntu):</p>\n\n<pre><code>   $ gcc -m32 -O1 -O prog code.c main.c\n</code></pre>\n\n<p>Things were good up to this far. But when I disassembled it using GDB, it really confused me. I got the following result that conflicted with what the book says:</p>\n\n<pre><code>    (gdb) disas sum\n    Dump of assembler code for function sum:\n        0x080483ed &lt;+0&gt;:    mov    0x8(%esp),%eax\n        0x080483f1 &lt;+4&gt;:    add    0x4(%esp),%eax\n        0x080483f5 &lt;+8&gt;:    add    %eax,0x804a020\n        0x080483fb &lt;+14&gt;:   ret    \n    End of assembler dump.\n    (gdb) disas main\n    Dump of assembler code for function main:\n        0x080483fc &lt;+0&gt;:    push   %ebp\n        0x080483fd &lt;+1&gt;:    mov    %esp,%ebp\n        0x080483ff &lt;+3&gt;:    and    $0xfffffff0,%esp\n        0x08048402 &lt;+6&gt;:    sub    $0x10,%esp\n        0x08048405 &lt;+9&gt;:    movl   $0x3,0x4(%esp)\n        0x0804840d &lt;+17&gt;:   movl   $0x1,(%esp)\n        0x08048414 &lt;+24&gt;:   call   0x80483ed &lt;sum&gt;\n        0x08048419 &lt;+29&gt;:   leave  \n        0x0804841a &lt;+30&gt;:   ret    \n   End of assembler dump.\n</code></pre>\n\n<p>Now here are my problems:</p>\n\n<ol>\n<li>Why isn't there any saving %ebp or moving %esp when calling the function <em>sum</em> as the book describes? Or is <em>sum</em> inlined by the compiler? </li>\n<li><p>The value 3 &amp; 1 were already stored in the M[%esp + 4] &amp; M[%esp], respectively. And after calling the <em>sum</em>, there's no instruction that alters the value stored in %esp. But inside the <em>sum</em>, the first instruction retrieves M[%esp + 8], which is actually 3(I set the breakpoint using GDB &amp;checked the value), while the M[%esp + 4] stores the value 1. How come? Later I set 2 breakpoints:</p>\n\n<pre><code> (gdb) break *0x08048414\n (gdb) break sum\n</code></pre></li>\n</ol>\n\n<p>Then I found the value stored in %esp was different at these 2 breakpoints:</p>\n\n<pre><code>     Breakpoint 6, 0x08048414 in main ()\n     (gdb) print $esp\n     $8 = (void *) 0xffffd020\n     (gdb) continue\n     Continuing.\n\n     Breakpoint 5, 0x080483ed in sum ()\n     (gdb) print $esp\n     $9 = (void *) 0xffffd01c\n</code></pre>\n\n<p>Why would this occur?</p>\n"}, {"tags": ["c", "algorithm", "sorting", "mergesort"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495614532, "post_id": 44152850, "comment_id": 75322846, "body": "&#39;what is wrong with the following code&#39; - you didn&#39;t debug it?"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495614581, "post_id": 44152850, "comment_id": 75322886, "body": "I did but i am unable to determine that"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495614793, "post_id": 44152850, "comment_id": 75323038, "body": "Why not?  What happens if you just pass 2 values and step through with your debugger?"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495614846, "post_id": 44152850, "comment_id": 75323074, "body": "well it still is very confusing"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495614876, "post_id": 44152850, "comment_id": 75323098, "body": "although i have determined it down to this the pointer location are not working like indexes"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495615100, "post_id": 44152850, "comment_id": 75323234, "body": "not thats not it"}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "edited": false, "score": 1, "creation_date": 1495615766, "post_id": 44152850, "comment_id": 75323682, "body": "Try debugging you program with a good debugger, After having a look at your program you increment the a pointer with the <code>sizeof(int)</code> in this kind of situation <code>(a+(i*sizeof(int)))</code> if you increase a pointer by one it automatically increment by the size of four. you can try by replacing it with <code>(a+i)</code>. Hope this helps."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495615854, "post_id": 44152850, "comment_id": 75323735, "body": "the pointer is working fine and no matter how good of a debugger i try since it is in recursion it does not help"}, {"owner": {"reputation": 152, "user_id": 6106810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1692b8d1b0a2a95fa0b47568cae003?s=128&d=identicon&r=PG&f=1", "display_name": "asp", "link": "https://stackoverflow.com/users/6106810/asp"}, "edited": false, "score": 0, "creation_date": 1495616679, "post_id": 44152850, "comment_id": 75324283, "body": "you might also want to check your indices again. E.g. you always work with the offset from 0 in a, except when calling sort recursively, and you don&#39;t increment i in the two while-loops in merge"}, {"owner": {"reputation": 152, "user_id": 6106810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1692b8d1b0a2a95fa0b47568cae003?s=128&d=identicon&r=PG&f=1", "display_name": "asp", "link": "https://stackoverflow.com/users/6106810/asp"}, "edited": false, "score": 0, "creation_date": 1495619009, "post_id": 44152850, "comment_id": 75325990, "body": "also, you never do a comparison on the value of <code>a</code> at position <code>mid</code>, as your condition in the for loop has <code>l1&lt;mid</code> and starts with <code>l2=mid+1</code>. So neither <code>l1</code> nor <code>l2</code> ever take the value mid. The condition should be <code>l1&lt;= mid</code> (at two places)."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1495620987, "post_id": 44152850, "comment_id": 75327428, "body": "It is difficult to offer solutions when the problem statement is simply, &quot;it doesn&#39;t work&quot;.  Please <a href=\"https://stackoverflow.com/posts/44152850/edit\">edit</a> your question to give a more complete description of what you expected to happen and how that differs from the actual results.  See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for hints on what makes a good explanation."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495623723, "post_id": 44152850, "comment_id": 75329310, "body": "1) <code>low*sizeof(int)</code> : It is a mistake to multiply the index by <code>sizeof(int)</code>. In pointer arithmetic it is not necessary to multiply such object sizes. 2) <code>i&lt;=6</code> --&gt; <code>i&lt;6</code>"}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495624003, "post_id": 44152850, "comment_id": 75329479, "body": "&#39;the pointer is working fine and no matter how good of a debugger i try since it is in recursion it does not help&#39; which is why, two hours ago, before all the thrashing about with &#39;it doesn&#39;t work&#39; and guesswork, I asked &#39;What happens if you just pass 2 values and step through with your debugger?&#39;.  That question was not for fun.  It was a suggestion to restrict the recursion and make debug easier.  As afer as I can see, you have done no debugging at all, merely issued code and some guesses to try an elicit a complete debug and test from other SO users:(("}, {"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495624148, "post_id": 44152850, "comment_id": 75329554, "body": "If, as you suggest, you have an IDE, you have no excuse for not using the integrated debugger to follow one or two levels of recursion, making notes of var values while stepping through, and so identifying bugs and fixing them, (apart from &quot;it&#39;s hard, boring work&quot;)."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495628751, "post_id": 44152850, "comment_id": 75332963, "body": "@ThingyWotsit I did not see the comment with two values I will certainly try and get back to you"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495629323, "post_id": 44152850, "comment_id": 75333377, "body": "after trying i still cannot figure out as it works witth an array of size 2 and my point is that the I only implemented pointers in a working version of the code that uses global variable which i posted above"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495630430, "post_id": 44152850, "comment_id": 75334236, "body": "@BLUEPIXY what do you suggest then instead of multiplying by sizeof(int)"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495631015, "post_id": 44152850, "comment_id": 75334703, "body": "E.g <code>int a[]={ 1,2,3 }, *p;</code> , <code>p = &amp;a[1];</code>. now pointer <code>p</code> point to <code>a[1]</code>(<code>2</code>) ,  <code>p = p + 1;</code> now <code>p</code> point to <code>a[2]</code> (<code>3</code>). It is not necessary to multiply by <code>sizeof(int)</code>."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495631918, "post_id": 44152850, "comment_id": 75335440, "body": "@BLUEPIXY how would that be implemented in the code?Also read the edut in the question"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495632798, "post_id": 44152850, "comment_id": 75336200, "body": "I think that it is clear how to correct this mistake. Let&#39;s do it yourself.  Also There are  many examples on this site about the implementation of merge sort."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495632887, "post_id": 44152850, "comment_id": 75336272, "body": "@BLUEPIXY which mistake?and i could not find any that used pointers.....I am talking about the error that the value is not being copied"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495633247, "post_id": 44152850, "comment_id": 75336538, "body": "I talk about <i>multiply by sizeof(int)</i>"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495633360, "post_id": 44152850, "comment_id": 75336627, "body": "@BLUEPIXY  okay but m approach should not be wrong either should it?and if so why?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495633605, "post_id": 44152850, "comment_id": 75336851, "body": "I already showed examples about it. If you used <code>1*sizeof(int)</code> instead of <code>+1</code> it is obviously a mistake."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495633660, "post_id": 44152850, "comment_id": 75336893, "body": "@BLUEPIXY not as to why my approach is wrong"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495633780, "post_id": 44152850, "comment_id": 75337013, "body": "First, Stop using <code>sizeof(int)</code> for index calculation."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495633836, "post_id": 44152850, "comment_id": 75337058, "body": "@BLUEPIXY I appreciate that you are trying to help but please also state the reasons as to why ?I use it because for eg; a[0] is located at 123, then a[1] should be located after an interval of the size of an int like this if size of an int is 4 then a[1] should be at 123+1*4 i.e 127 and a[2] at 123+2*4 i.e 131"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495633963, "post_id": 44152850, "comment_id": 75337169, "body": "If the size of <code>int</code> is 4 bytes it is obviously different to add 4 instead of 1."}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495634226, "post_id": 44152850, "comment_id": 75337411, "body": "See <a href=\"http://ideone.com/XvZTqS\" rel=\"nofollow noreferrer\">DEMO</a> The pointer knows the size of the pointing object, and its size is taken into account in pointer arithmetic, so it is not necessary to explicitly multiply the size."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495634340, "post_id": 44152850, "comment_id": 75337506, "body": "@BLUEPIXY Thank you that does solve the not assigning error however it still is not giving the correct output"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495634869, "post_id": 44152850, "comment_id": 75337924, "body": "That is a mistake in your correction."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495634937, "post_id": 44152850, "comment_id": 75337985, "body": "@BLUEPIXY The one I just updated now?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495635022, "post_id": 44152850, "comment_id": 75338056, "body": "<code>debug  pritnf(&quot;%d\\n&quot;,(*(b+(i ))));</code> can&#39;t compile this. Also <code>int *b=malloc(n );</code> --&gt; <code>int *b=malloc(n * sizeof(int));</code> or <code>int *b=malloc(n*sizeof(*b) );</code>"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495635276, "post_id": 44152850, "comment_id": 75338250, "body": "<code>( *(a+(l1 )))=(*(b+(i )));</code> is wrong."}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495635386, "post_id": 44152850, "comment_id": 75338336, "body": "Okay.. but why?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495635466, "post_id": 44152850, "comment_id": 75338409, "body": "What are you asking about?"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495635532, "post_id": 44152850, "comment_id": 75338462, "body": "@BLUEPIXY Why is ( *(a+(l1 )))=(*(b+(i ))); this wrong?"}, {"owner": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495635600, "post_id": 44152850, "comment_id": 75338517, "body": "<code>l1</code>  does not change in this loop. And what is that index?"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495635686, "post_id": 44152850, "comment_id": 75338596, "body": "@BLUEPIXY Thank you you have been most helpful it now works and that was a stupid mistake"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "reply_to_user": {"reputation": 38136, "user_id": 971127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6289285bbe25ce36ef68fe4932256350?s=128&d=identicon&r=PG&f=1", "display_name": "BLUEPIXY", "link": "https://stackoverflow.com/users/971127/bluepixy"}, "edited": false, "score": 0, "creation_date": 1495638959, "post_id": 44152850, "comment_id": 75341331, "body": "@BLUEPIXY any idea....it works with a predefined array no matter what"}, {"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495642624, "post_id": 44152850, "comment_id": 75343926, "body": "Nevermind there was something wrong in the code wrote it again works"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495638913, "post_id": 44161010, "comment_id": 75341292, "body": "Any suggestions?"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495659284, "post_id": 44161010, "comment_id": 75352570, "body": "@7h3wh173r48817 - as mentioned in my answer, using pointers for low, mid, high would be more &quot;pointer&quot; oriented."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495659476, "post_id": 44161010, "comment_id": 75352681, "body": "@7h3wh173r48817 - A more optimized merge sort does a one time allocation of a working array in an entry/helper function that calls the merge sort function, but this is simpler to implement using indices and not pointers. The copy back can be avoided by changing the direction of the merge (orginal-&gt;working or working-&gt;original), based of level of recursion either using two functions for the mergesort split part (each one calls the other) or a flag to keep track of even / odd recursion depth."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "edited": false, "score": 0, "creation_date": 1495659687, "post_id": 44161010, "comment_id": 75352796, "body": "@7h3wh173r48817 - A <a href=\"https://en.wikipedia.org/wiki/Merge_sort#Bottom-up_implementation\" rel=\"nofollow noreferrer\">bottom up merge sort</a> would be a bit faster.  I&#39;m not sure if these optimizations are worth the effort for a class room program."}], "tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 0, "last_activity_date": 1495635302, "creation_date": 1495635302, "answer_id": 44161010, "question_id": 44152850, "link": "https://stackoverflow.com/questions/44152850/merge-sort-not-giving-correct-output-c/44161010#44161010", "title": "merge sort not giving correct output, c", "body": "<p>Just looking at the code, the copy back loop needs to be fixed:</p>\n\n<pre><code>    for(i=low;i&lt;=high;i++){\n       ( *(a+(i )))=(*(b+(i )));   /* a+(i) not a+(l1) */\n    }\n</code></pre>\n\n<p>The code isn't really pointer based, it's just using the alternate syntax for a[i] which is *(a+i). For a pointer based version of merge sort, low, mid, high should be pointers, not indices.</p>\n"}], "owner": {"reputation": 19, "user_id": 6690897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f15cb74d6a1468e3a52d13ff1f94e5a?s=128&d=identicon&r=PG", "display_name": "7h3wh173r48817", "link": "https://stackoverflow.com/users/6690897/7h3wh173r48817"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 2, "accepted_answer_id": 44161010, "answer_count": 1, "score": -2, "last_activity_date": 1495638883, "creation_date": 1495614049, "last_edit_date": 1495638883, "question_id": 44152850, "link": "https://stackoverflow.com/questions/44152850/merge-sort-not-giving-correct-output-c", "title": "merge sort not giving correct output, c", "body": "<p>i have made a merge sort code using pointers since i would like to make the code dynamic once it works and its giving the wrong output.Could it be done using dynamic global arrays,if so how?and what is wrong with the following code:</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\nvoid merge(int *a,int low,int mid,int high,int n){\n    int l1=low,l2=mid+1,i;\n    int b[n];\n\n    for(i=low;l1&lt;=mid&amp;&amp;l2&lt;=high;i++){\n        if((*(a+(l1 )))&lt;(*(a+(l2 )))){\n            b[i]=*(a+(l1 ));\n            l1++;\n        }\n        else{\n            b[i]=*(a+(l2 ));\n            l2++;\n\n        }\n    }\n    while(l1&lt;=mid){\n        b[i++]=(*(a+(l1 )));\n        l1++;\n    }\n  while(l2&lt;=mid){\n        b[i++]=(*(a+(l1 )));\n        l2++;\n    }\n    for(i=low;i&lt;=high;i++){\n       ( *(a+(l1 )))=b[i];\n    }\n}\nvoid sort(int *a,int low,int high,int n){\n    if(low&lt;high){\n        int mid=(low+high)/2;\n        sort(a,low,mid,n);\n        sort(a,mid+1,high,n);\n        merge(a,low,mid,high,n);\n\n    }\n    else {\n        return;\n\n    }\n}\nint main(void){\n        int a[3]={5,2,1};\n\n    sort(&amp;a[0],0,2,3);\n    for(int i=0;i&lt;3;i++){\n        printf(\"%d \",a[i]);\n    }\n}   \n</code></pre>\n\n<p>or if anyone has any ideas to make this program using a dynamic sized array i am fine with that.I also made a code for this without pointers which works but uses global variables and hence fixed arrays.I am posting it below just for reference as all I did was implement pointers in that code.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint a[6]={5,2,1,6,3,4};\nint b[6];\nvoid merge(int low,int mid,int high){\n    int l1=low,l2=mid+1,i;\n    for(i=low;l1&lt;=mid&amp;&amp;l2&lt;=high;i++){\n        if(a[l1]&lt;a[l2]){\n            b[i]=a[l1++];\n        }\n        else{\n            b[i]=a[l2++];\n\n        }\n    }\n    while(l1&lt;=mid){\n        b[i++]=a[l1++];\n    }\n  while(l2&lt;=mid){\n        b[i++]=a[l2++];\n    }\n    for(i=low;i&lt;=high;i++){\n        a[i]=b[i];\n    }\n}\nvoid sort(int low,int high){\n    if(low&lt;high){\n        int mid=(low+high)/2;\n        sort(low,mid);\n        sort(mid+1,high);\n        merge(low,mid,high);\n\n    }\n    else {\n        return;\n\n    }\n}\nint main(void){\n    sort(0,5);\n    for(int i=0;i&lt;=6;i++){\n        printf(\"%d \",a[i]);\n    }\n}    \n</code></pre>\n\n<p>after changing the code to the following to debug better:I founnd that b is not being assigned the value and nor is a :</p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nvoid merge(int *a,int low,int mid,int high,int n){\n    int l1=low,l2=mid+1,i;\n    int *b=malloc(n );\n\n    for(i=low;l1&lt;=mid&amp;&amp;l2&lt;=high;i++){\n        if((*(a+(l1 )))&lt;(*(a+(l2 )))){\n            (*(b+(i )))=*(a+(l1 ));\n        debug  pritnf(\"%d\\n\",(*(b+(i ))));\n            l1++;\n        }\n        else{\n            (*(b+(i )))=*(a+(l2 ));\n\n            l2++;\n\n        }\n    }\n    while(l1&lt;=mid){\n        (*(b+(i )))=(*(a+(l1 )));\n        l1++;\n        i++;\n    }\n  while(l2&lt;=mid){\n        (*(b+(i )))=(*(a+(l1 )));\n        l2++;\n        i++;\n    }\n    for(i=low;i&lt;=high;i++){\n       ( *(a+(l1 )))=(*(b+(i )));\n    }\n}\nvoid sort(int *a,int low,int high,int n){\n    if(low&lt;high){\n        int mid=(low+high)/2;\n        sort(a,low,mid,n);\n        sort(a,mid+1,high,n);\n        merge(a,low,mid,high,n);\n\n    }\n    else {\n        return;\n\n    }\n}\nint main(void){\n        int a[3]={5,2,1};\n\n    sort(&amp;a[0],0,2,3);\n    for(int i=0;i&lt;3;i++){\n        printf(\"%d \",a[i]);\n    }\n}      \n</code></pre>\n\n<p>After this started working and it works completely i tried dynamic array and it is not providing me with the right output as in theere are zeroes int he middle and the biggest number(s) are not there.The code is as follows:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nvoid merge(int *a,int low,int mid,int high,int n){\n    int l1=low,l2=mid+1,i;\n    int *b=malloc((n-1) *sizeof(int));\n\n    for(i=low;l1&lt;=mid&amp;&amp;l2&lt;=high;i++){\n        if((*(a+(l1 )))&lt;=(*(a+(l2 )))){\n            (*(b+(i )))=*(a+(l1 ));\n            l1++;\n        }\n        else{\n            (*(b+(i )))=*(a+(l2 ));\n\n            l2++;\n\n        }\n    }\n    while(l1&lt;=mid){\n        (*(b+(i )))=(*(a+(l1 )));\n        l1++;\n        i++;\n    }\n  while(l2&lt;=mid){\n        (*(b+(i )))=(*(a+(l1 )));\n        l2++;\n        i++;\n    }\n    for(i=low;i&lt;=high;i++){\n       ( *(a+(i )))=(*(b+(i )));\n    }\n}\nvoid sort(int *a,int low,int high,int n){\n    if(low&lt;high){\n        int mid=(low+high)/2;\n        sort(a,low,mid,n);\n        sort(a,mid+1,high,n);\n        merge(a,low,mid,high,n);\n\n    }\n    else {\n        return;\n\n    }\n}\nint main(void){\n    int n;\n    scanf(\"%d\",&amp;n);\n        int a[n];\n\n\n    for(int i=0;i&lt;n;i++){\n        scanf(\"%d\",&amp;a[i]);\n    }\n\n    for(int i=0;i&lt;n;i++){\n        printf(\"%d \",a[i]);\n    }\n\n    sort(&amp;a[0],0,n-1,n);\n    for(int i=0;i&lt;n;i++){\n        printf(\"%d \",a[i]);\n    }\n}   \n</code></pre>\n"}, {"tags": ["c", "pointers"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 1, "creation_date": 1495613377, "post_id": 44152558, "comment_id": 75322066, "body": "Why don&#39;t you just run it and check the result? From the look of it, it won&#39;t damage your computer. Also, do something with the returned value."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1495613389, "post_id": 44152558, "comment_id": 75322074, "body": "No, what you did is not correct. Which a simple test would have revealed to you. What is <code>ptr</code> <i>pointing at</i>, do you think?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1495613435, "post_id": 44152558, "comment_id": 75322098, "body": "What if the condition <code>s[i]==c</code> is never true? What do you return then?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495613524, "post_id": 44152558, "comment_id": 75322153, "body": "Also, when you do <code>*ptr=i</code>, where does <code>ptr</code> point? And should you return the index or the current position in <code>s</code> (which is <code>&amp;s[i]</code>)?"}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1495613731, "post_id": 44152558, "comment_id": 75322299, "body": "Should be <code>int main(void)</code>.  <code>void main()</code> is not C standard."}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1495613859, "post_id": 44152558, "comment_id": 75322381, "body": "This is what GDB says: <code>0  0x00000000004005e2 in foo (s=0x7fffffffe170 &quot;Error404&quot;, c=114 &#39;r&#39;) at xx.c:11         i = 1         ptr = 0x0</code>"}, {"owner": {"reputation": 417, "user_id": 5809466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0oXKe.png?s=128&g=1", "display_name": "Error 404", "link": "https://stackoverflow.com/users/5809466/error-404"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495613904, "post_id": 44152558, "comment_id": 75322419, "body": "@Someprogrammerdude  if the condition <code>s[i]==c</code> is never true, return <code>null</code> or something similiar"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1495613971, "post_id": 44152558, "comment_id": 75322459, "body": "But if the condition is never true, you don&#39;t return <i>anything</i> right now, and that will lead to <i>undefined behavior</i>. Just like dereferencing an uninitialized pointer like <code>ptr</code>."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1495614066, "last_edit_date": 1495614066, "creation_date": 1495613892, "answer_id": 44152789, "question_id": 44152558, "link": "https://stackoverflow.com/questions/44152558/return-pointer-from-a-function-in-c/44152789#44152789", "title": "return pointer from a function in c", "body": "<p>First of all, your specification is unclear. Before you start coding, make sure that the specification makes sense. It doesn't say what to do if you <em>don't</em> find the character, so you can't write this function before you know that.</p>\n\n<p>Your function must always return something, even if the character was not found. A common way to implement this would be to return a null pointer in that case.</p>\n\n<p>Your pointer should point at the found character, not at <code>i</code> which is an integer, that doesn't make any sense. </p>\n\n<p>Correct the code into something like this:</p>\n\n<pre><code>char* foo (char s[], char c)\n{\n    char *ptr = NULL;\n\n    for(int i=0; s[i]!='\\0'; i++)\n    {\n        if(s[i]==c)\n        {\n            ptr = &amp;s[i]; // point at the address of item number i in s\n            break;\n        }\n    }\n\n    return ptr; // will return NULL if not found, otherwise a pointer to the found item\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1495613935, "post_id": 44152791, "comment_id": 75322439, "body": "This is not enough to fix all bugs in the function though."}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1495616101, "post_id": 44152791, "comment_id": 75323902, "body": "Here&#39;s what I find odd. If you return <code>ptr</code> right after setting it, why bother having it at all"}], "tags": [], "owner": {"reputation": 1382, "user_id": 5585657, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/MtHFK.png?s=128&g=1", "display_name": "digglemister", "link": "https://stackoverflow.com/users/5585657/digglemister"}, "is_accepted": false, "score": 1, "last_activity_date": 1495657859, "last_edit_date": 1495657859, "creation_date": 1495613897, "answer_id": 44152791, "question_id": 44152558, "link": "https://stackoverflow.com/questions/44152558/return-pointer-from-a-function-in-c/44152791#44152791", "title": "return pointer from a function in c", "body": "<p>If <code>s</code> is a string, then <code>s[i]</code> represents the ith char in the string, while <code>s + i</code> represents a pointer to the ith char in the string. So you want to return <code>s + i</code>. You probably also want to return <code>NULL</code> if the char is not found.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nchar *foo(char s[], char c)\n{\n    int i;\n\n    for(i = 0; s[i]; i++)\n    {\n        if(s[i] == c)\n            return (s + i);\n    }\n    return (NULL);\n}\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 5809466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0oXKe.png?s=128&g=1", "display_name": "Error 404", "link": "https://stackoverflow.com/users/5809466/error-404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 44152789, "answer_count": 2, "score": 0, "last_activity_date": 1495657859, "creation_date": 1495613279, "last_edit_date": 1495613518, "question_id": 44152558, "link": "https://stackoverflow.com/questions/44152558/return-pointer-from-a-function-in-c", "title": "return pointer from a function in c", "body": "<blockquote>\n  <p>Write function that gets a string <code>s</code> and char <code>c</code> that checks whether the char shows in <code>s</code>, if yes return a pointer to the first place that <code>c</code> shows in <code>s</code></p>\n</blockquote>\n\n<p>Here is my code. I am not sure what I did about \"return the pointer\", is this correct?:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nchar *foo(char s[], char c)\n{\n    int i;\n    char *ptr;\n    for(i=0;s[i];i++)\n    {\n        if(s[i]==c)\n        {\n            printf(\"result: %d\",i);\n            *ptr=i;\n            return ptr;\n        }\n    }\n}\nvoid main()\n{\n    char s[]=\"Error404\";// some string\n    char c='r';// some char\n    foo(s,c);\n}\n</code></pre>\n"}, {"tags": ["c", "gcc"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1495613289, "post_id": 44152468, "comment_id": 75322016, "body": "What kind of executable is <code>ltrace</code>?  Perhaps it can&#39;t be linked against the 32-bit preload?  If so, you might have to trace <code>env LD_PRELOAD=&#47;path&#47;to&#47;lib&#47;strcmp.so .&#47;exec</code> instead (assuming that <code>ltrace</code> will work across the <code>exec()</code>).  Or just accept that <code>ltrace</code> can ignore the preload."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1495640339, "post_id": 44152468, "comment_id": 75342407, "body": "Could it be that <i>ltrace</i> is 64bit and can&#39;t &quot;handle&quot; 32bit process (you could check that by <code>ltrace .exec</code> - without <code>LD_PRELOAD</code>). If so, you need to rebuild <i>exec</i> and <i>strcmp.so</i> for 64bit and try again. Or (if possible) install 32bit <i>ltrace</i>?"}], "answers": [{"tags": [], "owner": {"reputation": 789, "user_id": 6491182, "user_type": "registered", "accept_rate": 58, "profile_image": "https://lh4.googleusercontent.com/-DYtsdb7vwgI/AAAAAAAAAAI/AAAAAAAAAJk/1L0O9F_LEu0/photo.jpg?sz=128", "display_name": "Haydentech", "link": "https://stackoverflow.com/users/6491182/haydentech"}, "is_accepted": false, "score": 4, "last_activity_date": 1529507944, "creation_date": 1529507944, "answer_id": 50951696, "question_id": 44152468, "link": "https://stackoverflow.com/questions/44152468/wrong-elf-class-with-both-32-and-64bits-lib/50951696#50951696", "title": "Wrong ELF class with both 32 and 64bits lib", "body": "<p>As you noticed, if you have a single 32-bit shared library, you will get that warning when 64-bit programs are run.  If you have a single 64-bit library, you get that warning when you run 32-binaries.  We need your system to have both 32- and 64-bit versions of your libraries, and to allow the system to choose which one to use as needed.  You can accomplish that with the following changes:</p>\n\n<ul>\n<li>Compile both a 32-bit and 64-bit version of your library, and put them in /usr/lib and /usr/lib64 respectively on RedHat-based systems.  Debian uses a different library naming scheme which unfortunately is not very consistent, so I'll leave it an exercise for the reader to determine the right place to put the two libraries on Debian systems.</li>\n<li>Change your preload to remove all paths, like so: <code>export LD_PRELOAD=strcmp.so</code>  This will allow the system to search only the correct library directory when it looks for a 32-bit or 64-bit library.</li>\n<li>If you want to patch only one architecture, say 32-bit, then compile a 32-bit version of your library, and then compile an empty file into a 64-bit shared library of the same name.  Place them both as described above.</li>\n</ul>\n\n<p>Note that this only works if you use the system library directories.  Even /usr/local/lib and /usr/local/lib64 are not allowed.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 14386470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c240e43a93902522eed056fa6b2c90?s=128&d=identicon&r=PG&f=1", "display_name": "ArturZ", "link": "https://stackoverflow.com/users/14386470/arturz"}, "is_accepted": false, "score": 0, "last_activity_date": 1601759367, "creation_date": 1601759367, "answer_id": 64189026, "question_id": 44152468, "link": "https://stackoverflow.com/questions/44152468/wrong-elf-class-with-both-32-and-64bits-lib/64189026#64189026", "title": "Wrong ELF class with both 32 and 64bits lib", "body": "<p>You should run 32-bit dynamic linker directly:</p>\n<pre><code>ltrace /lib/ld-linux.so.2 --preload /path/to/lib/strcmp.so ./exec\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7401782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bc57fe4a32058d9a71ff8e199c2aa9?s=128&d=identicon&r=PG&f=1", "display_name": "Aeinot", "link": "https://stackoverflow.com/users/7401782/aeinot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3949, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1601759367, "creation_date": 1495613049, "question_id": 44152468, "link": "https://stackoverflow.com/questions/44152468/wrong-elf-class-with-both-32-and-64bits-lib", "title": "Wrong ELF class with both 32 and 64bits lib", "body": "<p>I am trying to solve a challenge by using LD_PRELOAD to load my own strcmp library.<br>\nI first tried to compile my library with <code>gcc -shared -fPIC strcmp.c -o strcmp.so</code>, but when I tried to execute my file with <code>LD_PRELOAD=/path/to/lib/strcmp.so ltrace ./exec</code>, I had a the error :  </p>\n\n<pre><code>object '/path/strcmp.so' from LD_PRELOAD cannot be preloaded (wrong ELF class: ELFCLASS64): ignored\n</code></pre>\n\n<p>By comparing <code>file /path/to/strcmp.so</code> and  <code>file exec</code>, I found out that my exec file was a ELF 32-bit LSB  executable and that my lib was a ELF 64-bit LSB  shared object.  </p>\n\n<p>Then I tried to compile my lib with <code>gcc -m32 -shared -fPIC strcmp.c -o strcmp.so</code>, but when executing I have the same error (but this time with ELFCLASS32) :  </p>\n\n<pre><code>object '/path/strcmp.so' from LD_PRELOAD cannot be preloaded (wrong ELF class: ELFCLASS32): ignored\n</code></pre>\n\n<p>Any suggestions? How can I have the same error with both 32 and 64 bits version of my lib?</p>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 336, "user_id": 7761980, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/1d0b835989e13bd56acf5c18117d4c47?s=128&d=identicon&r=PG", "display_name": "ThingyWotsit", "link": "https://stackoverflow.com/users/7761980/thingywotsit"}, "edited": false, "score": 0, "creation_date": 1495612216, "post_id": 44152035, "comment_id": 75321303, "body": "&#39;I downloaded apue.h... does it not need an actual library linked in as well?"}], "answers": [{"comments": [{"owner": {"reputation": 2311, "user_id": 6032010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCbzrdp-8HI/AAAAAAAAAAI/AAAAAAAAAAA/g1GQeurueXA/photo.jpg?sz=128", "display_name": "SHG", "link": "https://stackoverflow.com/users/6032010/shg"}, "edited": false, "score": 0, "creation_date": 1495613478, "post_id": 44152272, "comment_id": 75322123, "body": "These functions might already be compiled into a static or a dynamic library, then you&#39;ll have to link with them."}, {"owner": {"reputation": 63, "user_id": 8056699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e44efff2563bef6f38cca029c5981a3f?s=128&d=identicon&r=PG&f=1", "display_name": "clawhammer1234", "link": "https://stackoverflow.com/users/8056699/clawhammer1234"}, "reply_to_user": {"reputation": 2311, "user_id": 6032010, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCbzrdp-8HI/AAAAAAAAAAI/AAAAAAAAAAA/g1GQeurueXA/photo.jpg?sz=128", "display_name": "SHG", "link": "https://stackoverflow.com/users/6032010/shg"}, "edited": false, "score": 0, "creation_date": 1495777225, "post_id": 44152272, "comment_id": 75402168, "body": "@SHG I emailed the author and was told to use the make file. He said there was no .c source file. I am trying to learn all this. I went into the directory with the file that says make and I typed make on the terminal. A bunch of things happened but I do not know what to do now. I don&#39;t know if I did it right."}], "tags": [], "owner": {"reputation": 983, "user_id": 6930173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11ff29bfe2d76ec7a6caae5849dc4be2?s=128&d=identicon&r=PG", "display_name": "Harun", "link": "https://stackoverflow.com/users/6930173/harun"}, "is_accepted": false, "score": 1, "last_activity_date": 1495612440, "creation_date": 1495612440, "answer_id": 44152272, "question_id": 44152035, "link": "https://stackoverflow.com/questions/44152035/advanced-programming-in-the-unix-example-ls1-command-error/44152272#44152272", "title": "advanced programming in the unix example ls(1) command error", "body": "<p>I'm not familiar with the examples you are using, but the error you see is a linker error: it means that, although the header file <code>apue.h</code> has declared that the functions exist, nothing has actually defined the functions.</p>\n\n<p>They should be provided in another <code>.c</code> file, perhaps <code>apue.c</code>? Then you would include it in your compiled program by listing it on the clang command-line along with your <code>lsnew.c</code>:</p>\n\n<pre><code>clang -o lsnew apue.c lsnew.c\n</code></pre>\n\n<p>I can't tell you where you might find the required file, but it should probably be in the same place that you found <code>apue.h</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 395, "user_id": 4733625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8cac13c7f4ec54a01fbf7669ef24ded?s=128&d=identicon&r=PG&f=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/4733625/mykola"}, "is_accepted": false, "score": 0, "last_activity_date": 1579772861, "creation_date": 1579772861, "answer_id": 59875582, "question_id": 44152035, "link": "https://stackoverflow.com/questions/44152035/advanced-programming-in-the-unix-example-ls1-command-error/59875582#59875582", "title": "advanced programming in the unix example ls(1) command error", "body": "<p>Both undefined symbols can be replaced with own implementation.</p>\n\n<p>Lines</p>\n\n<pre><code>if(argc != 2)\n    err_quit(\"usage: ls directory_name\");\n</code></pre>\n\n<p>can be written as:</p>\n\n<pre><code>if(argc != 2) {\n    printf(\"usage: ls directory_name\");\n    return 1;\n}\n</code></pre>\n\n<p>Lines</p>\n\n<pre><code>if((dp=opendir(argv[1])) == NULL)\n    err_sys(\"can't open %s\", argv[1]);\n</code></pre>\n\n<p>can be written as:</p>\n\n<pre><code>if((dp=opendir(argv[1])) == NULL) {\n    printf(\"can't open %s\", argv[1]);\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8056699, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e44efff2563bef6f38cca029c5981a3f?s=128&d=identicon&r=PG&f=1", "display_name": "clawhammer1234", "link": "https://stackoverflow.com/users/8056699/clawhammer1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1579772861, "creation_date": 1495611782, "question_id": 44152035, "link": "https://stackoverflow.com/questions/44152035/advanced-programming-in-the-unix-example-ls1-command-error", "title": "advanced programming in the unix example ls(1) command error", "body": "<pre><code>#include \"apue.h\"\n#include &lt;dirent.h&gt;\n\nint main(int argc, char *argv[])\n{\n    DIR     *dp;\n    struct dirent *dirp;\n\n    if(argc != 2)\n        err_quit(\"usage: ls directory_name\");\n\n    if((dp=opendir(argv[1])) == NULL)\n        err_sys(\"can't open %s\", argv[1]);\n\n    while((dirp = readdir(dp)) !=NULL)\n        printf(\"%s\\n\", dirp-&gt;d_name);\n\n    closedir(dp);\n\n    exit(0);\n\n}\n</code></pre>\n\n<p>I downloaded apue.h file and it is in the current directory as my source file. when I try to compile with clang and OS X the following error occurs.</p>\n\n<pre><code>    1 warning generated.\n    Undefined symbols for architecture x86_64:\n        \"_err_quit\", referenced from:\n            _main in lsnew-cbcc3e.o\n        \"_err_sys\", referenced from:\n            _main in lsnew-cbcc3e.o\n    ld: symbol(s) not found for architecture x86_64\n    clang error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Can someone steer me in the right direction as to what is wrong? does this code only work on 32bit systems?</p>\n\n<p>thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 1, "creation_date": 1495611774, "post_id": 44151978, "comment_id": 75320959, "body": "What&#39;s with the <code>&quot;d%&quot;</code>?"}, {"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "reply_to_user": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 1, "creation_date": 1495611892, "post_id": 44151978, "comment_id": 75321053, "body": "@&#212;rel please, tone it down a notch"}, {"owner": {"reputation": 5535, "user_id": 1173638, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Mq0Io.gif?s=128&g=1", "display_name": "Adder", "link": "https://stackoverflow.com/users/1173638/adder"}, "edited": false, "score": 0, "creation_date": 1495612129, "post_id": 44151978, "comment_id": 75321233, "body": "this <a href=\"https://stackoverflow.com/questions/5157333/problem-writing-in-file/5157380\" title=\"problem writing in file\">stackoverflow.com/questions/5157333/problem-writing-in-file/&zwnj;&#8203;&hellip;</a> shows how to open a file in different modes using fopen and writing to it using fprintf."}, {"owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "edited": false, "score": 0, "creation_date": 1495612834, "post_id": 44151978, "comment_id": 75321720, "body": "You should compile like this <code>gcc -g &quot;yourfile.c&quot;</code>  then debug line by line, that would help you to understand the problem."}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 7300030, "user_type": "registered", "profile_image": "https://graph.facebook.com/1806010662970324/picture?type=large", "display_name": "Nam Nguyen Hoang", "link": "https://stackoverflow.com/users/7300030/nam-nguyen-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1495612923, "last_edit_date": 1495612923, "creation_date": 1495612007, "answer_id": 44152116, "question_id": 44151978, "link": "https://stackoverflow.com/questions/44151978/program-not-working-correctly/44152116#44152116", "title": "Program not working correctly", "body": "<p>Change the \"$%f\" to \"%f\", and \"d%\" to \"%d\", see if it helps</p>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 1, "last_activity_date": 1495621718, "last_edit_date": 1495621718, "creation_date": 1495613327, "answer_id": 44152579, "question_id": 44151978, "link": "https://stackoverflow.com/questions/44151978/program-not-working-correctly/44152579#44152579", "title": "Program not working correctly", "body": "<p>You need to check if <code>scanf()</code> \"worked\".</p>\n\n<p>Taking two of your scanfs as an example</p>\n\n<pre><code>if (scanf(\"$%f\", &amp;unit_price) != 1) {\n    fprintf(stderr, \"scanf error at line %d.\\n\", __LINE__ - 1);\n    exit(EXIT_FAILURE);\n}\n\nif (scanf(\"d%/d%/d%\", &amp;month, &amp;day, &amp;year) != 3) {\n    fprintf(stderr, \"scanf error at line %d.\\n\", __LINE__ - 1);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4031, "user_id": 7640269, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/szGUJ.png?s=128&g=1", "display_name": "danglingpointer", "link": "https://stackoverflow.com/users/7640269/danglingpointer"}, "is_accepted": false, "score": 1, "last_activity_date": 1495613623, "creation_date": 1495613623, "answer_id": 44152699, "question_id": 44151978, "link": "https://stackoverflow.com/questions/44151978/program-not-working-correctly/44152699#44152699", "title": "Program not working correctly", "body": "<p>These are the warnings you get. I would recommend you to go through these warning and it will help you to understand the problem:</p>\n\n<pre><code>warning: unknown conversion type character \u2018/\u2019 in format [-Wformat=]\n         scanf(\"d%/d%/d%\", &amp;month, &amp;day, &amp;year);\n               ^\n:17:15: warning: unknown conversion type character \u2018/\u2019 in format [-Wformat=]\n:17:15: warning: spurious trailing \u2018%\u2019 in format [-Wformat=]\n:17:15: warning: too many arguments for format [-Wformat-extra-args]\n:21:16: warning: '0' flag ignored with '-' flag in gnu_printf format [-Wformat=]\n         printf(\"%-d $%.2f%-02d/%02d/%02d\\n\", item_number, unit_price, month, da\n</code></pre>\n\n<hr>\n\n<p>You need to know the usage of STDIN an STDOUT <code>printf()</code> and <code>scanf()</code> <a href=\"https://wpollock.com/CPlus/PrintfRef.htm\" rel=\"nofollow noreferrer\">format specifier usage</a>. Go through this link it will help you. </p>\n\n<p><strong>Just modified your code:</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main (void) {\n\n        int item_number, month, day, year;\n        float unit_price;\n\n        printf(\"Enter item number: \");\n        scanf(\"%d\", &amp;item_number);\n\n        printf(\"Enter unit price: \");\n        scanf(\"$%f\", &amp;unit_price);\n\n        printf(\"Enter purchase date (mm/dd/yy): \");\n        scanf(\"%d, %d, %d\", &amp;month, &amp;day, &amp;year);\n\n        printf(\"Item Unit Purchase\\n\");\n        printf(\"Price Date\\n\");\n        printf(\"%d $:%.2f /%d/ %02d, %02d\\n\", item_number, unit_price, month, day, year);\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Enter item number: 10\nEnter unit price: Enter purchase date (mm/dd/yy): 2/6/8\nItem Unit Purchase\nPrice Date\n10 $:0.00 /2/ 00, 1183423824\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8057964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3549068c86e5ea9ebe1d62b529fb682?s=128&d=identicon&r=PG&f=1", "display_name": "nonameisbetter", "link": "https://stackoverflow.com/users/8057964/nonameisbetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1495621718, "creation_date": 1495611629, "last_edit_date": 1495611675, "question_id": 44151978, "link": "https://stackoverflow.com/questions/44151978/program-not-working-correctly", "title": "Program not working correctly", "body": "<p>When I enter 10 in the input, the program comes out like this: </p>\n\n<p><code>Enter item number: 10</code></p>\n\n<p><code>Enter unit price: Enter purchase date (mm/dd/yy): Item Unit Purchase</code></p>\n\n<p><code>Price Date</code></p>\n\n<p><code>10 $0.000 /32764/-572332368</code></p>\n\n<p>Do I have to create a txt file and enter the input values?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main (void)\n\n{\n\n        int item_number, month, day, year;\n        float unit_price;\n\n        printf(\"Enter item number: \");\n        scanf(\"%d\", &amp;item_number);\n\n        printf(\"Enter unit price: \");\n        scanf(\"$%f\", &amp;unit_price);\n\n        printf(\"Enter purchase date (mm/dd/yy): \");\n        scanf(\"d%/d%/d%\", &amp;month, &amp;day, &amp;year);\n\n        printf(\"Item Unit Purchase\\n\");\n        printf(\"Price Date\\n\");\n        printf(\"%-d $%.2f%-02d/%02d/%02d\\n\", item_number, unit_price, month, day, year);\n\n  return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "floating-point", "char", "converter"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495611673, "post_id": 44151968, "comment_id": 75320889, "body": "Please show what you already tried"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495611738, "post_id": 44151968, "comment_id": 75320928, "body": "same way you went from float to string, just backward?"}, {"owner": {"reputation": 101058, "user_id": 318758, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9870a37447a4ae811096e8e7d10ed3f9?s=128&d=identicon&r=PG", "display_name": "Joni", "link": "https://stackoverflow.com/users/318758/joni"}, "edited": false, "score": 1, "creation_date": 1495611769, "post_id": 44151968, "comment_id": 75320951, "body": "&quot;converted a float into an char array&quot; - how? more than one way to do it"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495611819, "post_id": 44151968, "comment_id": 75320986, "body": "need to see not only what you tried but how you got from float to this array, as that will determine how you get back."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495612323, "post_id": 44151968, "comment_id": 75321376, "body": "so you want to use sprintf to go from float to ascii then use scanf to go from ascii to float."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495612376, "post_id": 44151968, "comment_id": 75321415, "body": "<a href=\"http://www.manpagez.com/man/3/scanf/\" rel=\"nofollow noreferrer\">manpagez.com/man/3/scanf</a>"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495612434, "post_id": 44151968, "comment_id": 75321456, "body": "you do understand the accuracy you are throwing away by doing that?"}, {"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1495612457, "post_id": 44151968, "comment_id": 75321473, "body": "I dont want to convert the whole array though since i added other data. If i am not mistaken it will try to convert my whole array?"}, {"owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "edited": false, "score": 0, "creation_date": 1495612635, "post_id": 44151968, "comment_id": 75321587, "body": "old_timer thanks. Actually not really, my biggest concern right now is to have  the server to sync my player x and y cordinates. This is my first time trying to build a simple game. However, if you have a more accurate way to send the data i&#39;m happy to listen :D"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1495613408, "creation_date": 1495613408, "answer_id": 44152615, "question_id": 44151968, "link": "https://stackoverflow.com/questions/44151968/how-do-you-convert-sections-of-char-array-into-float/44152615#44152615", "title": "How do you convert sections of char array into float?", "body": "<p>Reading the comments, what you probably want to do is to serialize and de-serialize the data, so that it can be sent as raw data over some form of communication media. </p>\n\n<p>For that purpose, it does not make sense any sense to convert to ASCII. Instead, you'll want a raw data format, which is most compact. This is possible if both computers have the same floating point format and the same endianess. If so, you can simply do:</p>\n\n<pre><code>memcpy(buf, &amp;my_float, sizeof(float)); // transmitter side\nmemcpy(&amp;my_float, buf, sizeof(float)); // receiver side\n</code></pre>\n\n<p>where \"buf\" is whatever data buffer you use to send/receive data through.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1495683322, "last_edit_date": 1495683322, "creation_date": 1495683019, "answer_id": 44171813, "question_id": 44151968, "link": "https://stackoverflow.com/questions/44151968/how-do-you-convert-sections-of-char-array-into-float/44171813#44171813", "title": "How do you convert sections of char array into float?", "body": "<p>To convert a <em>string</em> to a <code>float</code>, <code>atof()</code>, or better, <code>strtod()</code> is sufficient.</p>\n\n<p>To convert a <code>float</code> to a string, code needs to insure enough precision is used and a large enough buffer to save and distinguish all <code>float</code> - about 17 <code>char</code>.  Best to use some exponential format like <code>\"%e\"</code> or <code>\"%a\"</code>.</p>\n\n<pre><code>//                    -  dig  .     digs               e   -  expo \\0\n#define FLT_STR_SIZE (1 + 1 + 1 + (FLT_DECIMAL_DIG-1) + 1 + 1 + 3 + 1)\nchar s[FLT_STR_SIZE];\nsprintf(s, \"%.*e\", FLT_DECIMAL_DIG-1, some_float);\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/q/16839658/2410359\">Details</a></p>\n"}], "owner": {"reputation": 241, "user_id": 6788029, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/eff9e8d639eddf05d904813953425345?s=128&d=identicon&r=PG&f=1", "display_name": "xxFlashxx", "link": "https://stackoverflow.com/users/6788029/xxflashxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 44171813, "answer_count": 2, "score": -1, "last_activity_date": 1495683322, "creation_date": 1495611599, "last_edit_date": 1495612004, "question_id": 44151968, "link": "https://stackoverflow.com/questions/44151968/how-do-you-convert-sections-of-char-array-into-float", "title": "How do you convert sections of char array into float?", "body": "<p>I've converted a float into an char array that will be sent over to a server. I want to be able to convert the char array, say from buffer[10]... to buffer [20] converted back into a single float. How can i accomplish this? I only know how to convert entire buffer using atoi but since my char buffer will contain other irrelevent data how can i selecetively do this for certain part of my array?</p>\n\n<p>This is how i converted my float into an char array.</p>\n\n<pre><code>  sprintf(game-&gt;buffer,\"%f\",game-&gt;man[playerNumber-48].x);\n\n    //printf(\"%s\\n\", game-&gt;buffer);\n\n    for(int i = 0; i&lt;11;i++)\n    {\n        game-&gt;send_key_to_server[i+8] = game-&gt;buffer[i];\n    }\n\n    sprintf(game-&gt;buffer,\"%f\",game-&gt;man[playerNumber-48].y);\n\n    for(int i = 0; i&lt;11;i++)\n    {\n        game-&gt;send_key_to_server[i+19] = game-&gt;buffer[i];\n    }\n</code></pre>\n\n<p>Basically im sending my players x and y cordinates over to the server as chars.</p>\n"}, {"tags": ["c++", "c", "visual-c++", "msdn", "setupapi"], "comments": [{"owner": {"reputation": 71, "user_id": 7545307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bRbocsaVCfE/AAAAAAAAAAI/AAAAAAAAAF4/RUfKxmWIwoA/photo.jpg?sz=128", "display_name": "Sneh Shikhar", "link": "https://stackoverflow.com/users/7545307/sneh-shikhar"}, "reply_to_user": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1495612478, "post_id": 44151207, "comment_id": 75321488, "body": "done :) can u help me or suggest something"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1495640922, "post_id": 44151207, "comment_id": 75342852, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa376947(v=vs.85).aspx\" rel=\"nofollow noreferrer\">&#91;MSDN&#93;: SetupAPI Functions</a> could be a starting point. I remember that in the past I did something similar (I&#39;m not sure about this exact property), but I don&#39;t have the code right now. Would it make sense to take a look? Note that it might require a hybrid approach between <i>SetupAPI</i> and reading from the driver <i>.inf</i> file."}, {"owner": {"reputation": 71, "user_id": 7545307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bRbocsaVCfE/AAAAAAAAAAI/AAAAAAAAAF4/RUfKxmWIwoA/photo.jpg?sz=128", "display_name": "Sneh Shikhar", "link": "https://stackoverflow.com/users/7545307/sneh-shikhar"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1495688874, "post_id": 44151207, "comment_id": 75360671, "body": "yes you are right , setupDi can be used but i am not able to access this particular property using that @CristiFati"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7545307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bRbocsaVCfE/AAAAAAAAAAI/AAAAAAAAAF4/RUfKxmWIwoA/photo.jpg?sz=128", "display_name": "Sneh Shikhar", "link": "https://stackoverflow.com/users/7545307/sneh-shikhar"}, "edited": false, "score": 0, "creation_date": 1495629670, "post_id": 44158238, "comment_id": 75333637, "body": "I didn&#39;t find as such entry in registry .There must be some API ."}, {"owner": {"reputation": 71, "user_id": 7545307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bRbocsaVCfE/AAAAAAAAAAI/AAAAAAAAAF4/RUfKxmWIwoA/photo.jpg?sz=128", "display_name": "Sneh Shikhar", "link": "https://stackoverflow.com/users/7545307/sneh-shikhar"}, "edited": false, "score": 0, "creation_date": 1495640154, "post_id": 44158238, "comment_id": 75342257, "body": "<a href=\"https://stackoverflow.com/questions/5989993/how-to-get-device-properties-in-windows-in-c\" title=\"how to get device properties in windows in c\">stackoverflow.com/questions/5989993/&hellip;</a> this link could be helpful if someone is not able to decode ."}], "tags": [], "owner": {"reputation": 1670, "user_id": 7341904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3fly.jpg?s=128&g=1", "display_name": "Santosh Dhanawade", "link": "https://stackoverflow.com/users/7341904/santosh-dhanawade"}, "is_accepted": false, "score": 0, "last_activity_date": 1495628289, "creation_date": 1495628289, "answer_id": 44158238, "question_id": 44151207, "link": "https://stackoverflow.com/questions/44151207/how-to-retrieve-the-rollback-driver-node-strong-name/44158238#44158238", "title": "How to Retrieve the Rollback driver node strong name?", "body": "<p>Windows information can be retrieve using registry or WMI. I would suggest you to retrieve driver information from registry.</p>\n\n<blockquote>\n  <p>HKLM\\SYSTEM\\DriverDatabase</p>\n</blockquote>\n\n<p>Another way to read system information is using <a href=\"https://msdn.microsoft.com/en-us/library/aa394558(v=vs.85).aspx\" rel=\"nofollow noreferrer\">WMI</a>.</p>\n\n<p>Hope this will help.</p>\n"}], "owner": {"reputation": 71, "user_id": 7545307, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bRbocsaVCfE/AAAAAAAAAAI/AAAAAAAAAF4/RUfKxmWIwoA/photo.jpg?sz=128", "display_name": "Sneh Shikhar", "link": "https://stackoverflow.com/users/7545307/sneh-shikhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495628289, "creation_date": 1495609428, "last_edit_date": 1495610449, "question_id": 44151207, "link": "https://stackoverflow.com/questions/44151207/how-to-retrieve-the-rollback-driver-node-strong-name", "title": "How to Retrieve the Rollback driver node strong name?", "body": "<p>I want to retrieve the Rollback driver node strong name  device property from device manager  .</p>\n\n<p>Attached image for reference .</p>\n\n<p>How can i do that programmatically ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/cnQVK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cnQVK.png\" alt=\"enter image jhere\"></a></p>\n"}, {"tags": ["c", "collision", "stdio"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495609091, "post_id": 44150988, "comment_id": 75319110, "body": "No it&#39;s not safe. If you have a compile-time fixed format string then use it directly in your <a href=\"http://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code> (and family)</a> call, and definitely don&#39;t use the same buffer as both the format string and destination."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495609168, "post_id": 44150988, "comment_id": 75319146, "body": "Your first parameter doesn&#39;t contain any conversions (remember, <b>only</b> the first parameter is the format string), so this is &quot;safe&quot;, it just won&#39;t do anything except consuming &quot;hello&quot; from stdin if it is there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495609266, "post_id": 44150988, "comment_id": 75319208, "body": "@Someprogrammerdude misread it ... ok, totally unsafe. btw, question title is wrong then"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495609305, "post_id": 44150988, "comment_id": 75319237, "body": "@FelixPalmen If this is safe, how about extending it? Like <code>char pattern[32] = &quot;%5s %d&quot;; sscanf(&quot;hey 32&quot;,pattern,pattern, &amp;someInt);</code>?"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1495609346, "post_id": 44150988, "comment_id": 75319263, "body": "Side note: sscanf(&quot;hello&quot;,pattern,pattern);  This will overwrite <code>pattern</code>.  Isn&#39;t the third argument supposed to be a different variable name?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495609366, "post_id": 44150988, "comment_id": 75319272, "body": "@SouravGhosh the question title says <code>scanf</code> and I didn&#39;t look close enough at the code, just forget it ..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1495609377, "post_id": 44150988, "comment_id": 75319279, "body": "@Nguaial You&#39;re right, but I guess OP is asking <i>if</i> we can use the same.."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495609566, "post_id": 44150988, "comment_id": 75319416, "body": "@SouravGhosh - Yup.  That is the question.  Thanks. (00)"}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 1, "creation_date": 1495609804, "post_id": 44150988, "comment_id": 75319550, "body": "One hint of this being UB is the function prototype: <code>int sscanf(const char * restrict s, const char * restrict format, ...);</code>. Parameter <code>format</code> is qualified with <code>restrict</code>, limiting all access to this pointer."}, {"owner": {"reputation": 26421, "user_id": 343721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b8ad1d8e899bd63166450473531f65b6?s=128&d=identicon&r=PG", "display_name": "Jan Turo\u0148", "link": "https://stackoverflow.com/users/343721/jan-turo%c5%88"}, "edited": false, "score": 0, "creation_date": 1495610085, "post_id": 44150988, "comment_id": 75319731, "body": "Sorry for the misleading typo in the title."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495611098, "post_id": 44150988, "comment_id": 75320476, "body": "Don&#39;t do weird things, just because you <i>can</i>. :)"}, {"owner": {"reputation": 26421, "user_id": 343721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b8ad1d8e899bd63166450473531f65b6?s=128&d=identicon&r=PG", "display_name": "Jan Turo\u0148", "link": "https://stackoverflow.com/users/343721/jan-turo%c5%88"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495614227, "post_id": 44150988, "comment_id": 75322652, "body": "@SouravGhosh se the use case at the end of the question. It could be useful to save memory if the format is long and in many different instances. Alas it is undefined behaviour as Jonathan explained us."}], "answers": [{"comments": [{"owner": {"reputation": 26421, "user_id": 343721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b8ad1d8e899bd63166450473531f65b6?s=128&d=identicon&r=PG", "display_name": "Jan Turo\u0148", "link": "https://stackoverflow.com/users/343721/jan-turo%c5%88"}, "edited": false, "score": 0, "creation_date": 1495610191, "post_id": 44151443, "comment_id": 75319803, "body": "Perfect answer - I haven&#39;t met <code>restrict</code> before. Thanks."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495610261, "post_id": 44151443, "comment_id": 75319848, "body": "Sir, <code>If copying takes place between objects that overlap, the behavior is undefined.</code>...isn&#39;t this with reference to the &quot;source&quot; and &quot;destination&quot;? How does that involve the format string, exactly?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495610453, "post_id": 44151443, "comment_id": 75319984, "body": "@SouravGhosh: The complete paragraph is: <i>The <code>sscanf</code> function is equivalent to <code>fscanf</code>, except that input is obtained from a string (specified by the argument <code>s</code>) rather than from a stream. Reaching the end of the string is equivalent to encountering end-of-file for the <code>fscanf</code> function. If copying takes place between objects that overlap, the behavior is undefined.</i>  The objects that could overlap are <code>s</code>, <code>format</code>, and any of the arguments in the <code>...</code> section of the call.  The ban on overlapping copies covers them all, I believe.  <i>[\u2026continued\u2026]</i>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495610561, "post_id": 44151443, "comment_id": 75320047, "body": "<i>[\u2026continuation\u2026]</i> You&#39;re allowed to do something like: <code>if (sscanf(source, &quot;%s %s %s&quot;, target, target, target) != 3) \u2026</code> \u2014 it&#39;s one way of getting the third word, but <code>if (sscanf(source, &quot;%*s %*s %s&quot;, target) == 1) \u2026</code> would do the job more cleanly.  The assignments to the <code>target</code> are done sequentially."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495610575, "post_id": 44151443, "comment_id": 75320064, "body": "@JonathanLeffler exactly....I was trying to understand...in the whole process, where the &quot;copying&quot; action fits? the process is , read the input, match with format specifier, if match, write to argument which has not received the result of conversion, right? So, copying.....is from source to destination....right? Not between the format string and destination.."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495610675, "post_id": 44151443, "comment_id": 75320134, "body": "Yes, copying is from source to destination, with the caveat the code in the question seems to be treating the format string as one of the destinations too, so there is copying to overlapping objects."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495610708, "post_id": 44151443, "comment_id": 75320168, "body": "As a sidenote sir, the <code>restrict</code> says it all. I&#39;m just trying to get my concepts clear about the language used in the spec, that&#39;s all, and thanks for your time. :)"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495610798, "post_id": 44151443, "comment_id": 75320239, "body": "Sir, sorry if i&#39;m missing something obvious, but how the copying is overlapping, the source is the string literal and the destination is the <code>pattern</code> array. How the copying is overlapping?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495610878, "post_id": 44151443, "comment_id": 75320317, "body": "In the question, first example, you have: <code>sscanf(&quot;hello&quot;, pattern, pattern);</code>.  The role of <code>format</code> is played by the same variable that is receiving the scanned text \u2014 <code>pattern</code>.  That&#39;s the no-no that <code>restrict</code> says is not allowed."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495610963, "post_id": 44151443, "comment_id": 75320383, "body": "@JonathanLeffler Right, that&#39;s the very point and <b>the</b> answer, but since you mentioned the overlapping as part of your answer, i&#39;m just trying to link these two things. In this case, do we actually hit the overlapping issue?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495611009, "post_id": 44151443, "comment_id": 75320421, "body": "FWIW, in <a href=\"https://stackoverflow.com/questions/44150988/is-it-safe-to-use-format-parameter-as-additional-argument-in-sscanf/44151443?noredirect=1#comment75319237_44150988\">my previous comment under question</a>, there&#39;s a scenario wher overlapping makes sens, but what about this specifiec case, sir?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495611113, "post_id": 44151443, "comment_id": 75320490, "body": "Very much so.  Empirically, you might get away with it this time, but it&#39;s not a good idea to rely on that.  The standard says it is undefined behaviour, so don&#39;t play with fire."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 3, "last_activity_date": 1495610077, "last_edit_date": 1592644375, "creation_date": 1495610077, "answer_id": 44151443, "question_id": 44150988, "link": "https://stackoverflow.com/questions/44150988/is-it-safe-to-use-format-parameter-as-additional-argument-in-sscanf/44151443#44151443", "title": "Is it safe to use format parameter as additional argument in sscanf?", "body": "<p>The C11 standard (ISO/IEC 9899:2011) covers this. It says:</p>\n<blockquote>\n<h3>7.21.6.7 The <code>sscanf</code> function</h3>\n<pre><code>int sscanf(const char * restrict s, const char * restrict format, ...);\n</code></pre>\n</blockquote>\n<p>The <code>restrict</code> means that the format can't be the same as any of the arguments.</p>\n<p>The description says:</p>\n<blockquote>\n<p>If copying\ntakes place between objects that overlap, the behavior is undefined.</p>\n</blockquote>\n<p>What you're trying to do is 'undefined behaviour'.  Don't do that.</p>\n"}], "owner": {"reputation": 26421, "user_id": 343721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b8ad1d8e899bd63166450473531f65b6?s=128&d=identicon&r=PG", "display_name": "Jan Turo\u0148", "link": "https://stackoverflow.com/users/343721/jan-turo%c5%88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44151443, "answer_count": 1, "score": 0, "last_activity_date": 1495610548, "creation_date": 1495608809, "last_edit_date": 1495610548, "question_id": 44150988, "link": "https://stackoverflow.com/questions/44150988/is-it-safe-to-use-format-parameter-as-additional-argument-in-sscanf", "title": "Is it safe to use format parameter as additional argument in sscanf?", "body": "<p>Is the following code safe to use? I mean if the pattern might be scanned and overwriten in one loop, or if such collision never occurs, or if it is implementation dependent.</p>\n\n<pre><code>char pattern[32] = \"%31s\";\nsscanf(\"hello\",pattern,pattern);\n</code></pre>\n\n<p>I didn't find any note about that <a href=\"http://www.cplusplus.com/reference/cstdio/sscanf/?kw=sscanf\" rel=\"nofollow noreferrer\">here</a> nor <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>(Use case: sometimes I use <code>pattern</code> as temporary buffer.)</p>\n"}, {"tags": ["c", "linux", "elf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495608854, "post_id": 44150923, "comment_id": 75318953, "body": "And if you run in a debugger, what are the values of all involved variables when the crash happens? Do they look valid?"}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 0, "creation_date": 1495608905, "post_id": 44150923, "comment_id": 75318990, "body": "Are you sure that what start at <code>&amp;strtab[dtag_table[j].d_un.d_val]</code> is a nul-terminated string?"}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1495609194, "post_id": 44150923, "comment_id": 75319169, "body": "Use <code>valgrind</code> to find your memory issue"}, {"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1495609198, "post_id": 44150923, "comment_id": 75319172, "body": "Try commenting in english, otherwise your comments will often be useless for everyone but you"}, {"owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495609710, "post_id": 44150923, "comment_id": 75319500, "body": "I&#39;ve updated the comments to English. @Someprogrammerdude The variables look valid to me, yes. But I must have missed something. @LPs it should be, the strtab is supposed to be a series of null-terminated strings according to the ELF spec. I&#39;m assuming that the system&#39;s <code>&#47;bin&#47;ls</code> conforms to the spec. @&#212;rel I&#39;ve tried that, it says the error is at line 78, more precisely within the call to <code>printf</code>."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1495611077, "post_id": 44150923, "comment_id": 75320462, "body": "@conradkdotcom what is the error, invalid read ? Not sure of what is the line 78, but I think <code>&amp;strtab[dtag_table[j].d_un.d_val]</code> is strange mainly the <code>&amp;</code>"}, {"owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "edited": false, "score": 0, "creation_date": 1495633770, "post_id": 44150923, "comment_id": 75337006, "body": "The error is actually within the <code>printf</code> call. <code>&amp;strtab[dtag_table[j].d_un.d_val]</code> is the same as <code>strtab + dtag_table[j].d_un.d_val</code> which basically says &quot;Go to the string at index <code>d_val</code> in <code>strtab</code>&quot;. And yes, the error is invalid read."}], "answers": [{"comments": [{"owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "edited": false, "score": 0, "creation_date": 1495706752, "post_id": 44173164, "comment_id": 75369763, "body": "Thanks a lot, two answers within 2 days !"}, {"owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "edited": false, "score": 0, "creation_date": 1495715980, "post_id": 44173164, "comment_id": 75375557, "body": "From what I understand, this works because <code>PT_LOAD</code>&#39;s <code>p_offset</code> is <code>0</code>. To make the program more reliable, I suppose one would have to take <code>p_offset</code> into account, resulting in something like <code>strtab = ls + load_offset + (strtab_addr - load_addr)</code>. Is that assumption correct?"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1495691216, "creation_date": 1495691216, "answer_id": 44173164, "question_id": 44150923, "link": "https://stackoverflow.com/questions/44150923/segfault-when-reading-dynstr-strtab-in-an-elf-file/44173164#44173164", "title": "Segfault when reading .dynstr (strtab) in an ELF file", "body": "<blockquote>\n  <p>What am I doing wrong?</p>\n</blockquote>\n\n<p>For a non-PIE binary, this:</p>\n\n<pre><code>strtab = (const char *)dtag_table[j].d_un.d_ptr;\n</code></pre>\n\n<p>points to where the <code>.dynstr</code> <em>would have been if that binary was actually running in current process</em>.</p>\n\n<p>If the binary is <em>not</em> running, you need to relocate this value by <code>$where_mmaped - $load_addr</code>. The <code>$where_mmaped</code> is your <code>ls</code> variable. The <code>$load_addr</code> is the address where the binary was statically linked to load (usually it's the <code>p_vaddr</code> of the first <code>PT_LOAD</code> segment; for x86_64 binary the typical value is <code>0x400000</code>).</p>\n\n<p>You'll note that this neatly explains why <code>./a.out a.out</code> works: you read <code>.dynstr</code> from your own address space, while using <code>a.out</code> to figure out correct offsets.</p>\n"}], "owner": {"reputation": 5307, "user_id": 1127635, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/386b2a9bdc91823e4688f0dcbdd2f9fb?s=128&d=identicon&r=PG", "display_name": "conradkleinespel", "link": "https://stackoverflow.com/users/1127635/conradkleinespel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 44173164, "answer_count": 1, "score": 0, "last_activity_date": 1495691216, "creation_date": 1495608551, "last_edit_date": 1495609536, "question_id": 44150923, "link": "https://stackoverflow.com/questions/44150923/segfault-when-reading-dynstr-strtab-in-an-elf-file", "title": "Segfault when reading .dynstr (strtab) in an ELF file", "body": "<p>I'm trying to read the names of shared libraries used in binaries, using the C language. So far, I have the following program in <code>test.c</code>:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;sys/mman.h&gt;\n#include &lt;elf.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main(int argc, char **argv) {\n    const char *ls = NULL;\n    int fd = -1;\n    struct stat stat = {0};\n\n    if (argc != 2) {\n      printf(\"Missing arg\\n\");\n      return 0;\n    }\n\n    // open the file in readonly mode\n    fd = open(argv[1], O_RDONLY);\n    if (fd &lt; 0) {\n        perror(\"open\");\n        goto cleanup;\n    }\n\n    // get the file size\n    if (fstat(fd, &amp;stat) != 0) {\n        perror(\"stat\");\n        goto cleanup;\n    }\n\n    // put the file in memory\n    ls = mmap(NULL, stat.st_size, PROT_READ, MAP_PRIVATE, fd, 0);\n    if (ls == MAP_FAILED) {\n        perror(\"mmap\");\n        goto cleanup;\n    }\n\n    Elf64_Ehdr *eh = (Elf64_Ehdr *)ls;\n    // looking for the PT_DYNAMIC segment\n    for (int i = 0; i &lt; eh-&gt;e_phnum; i++) {\n        Elf64_Phdr *ph = (Elf64_Phdr *)((char *)ls + (eh-&gt;e_phoff + eh-&gt;e_phentsize * i));\n        const char *strtab = NULL;\n        if (ph-&gt;p_type == PT_DYNAMIC) {\n            const Elf64_Dyn *dtag_table = (const Elf64_Dyn *)(ls + ph-&gt;p_offset);\n\n            // looking for the string table\n            for (int j = 0; 1; j++) {\n                // the end of the dtag table is marked by DT_NULL\n                if (dtag_table[j].d_tag == DT_NULL) {\n                    break;\n                }\n\n                if (dtag_table[j].d_tag == DT_STRTAB) {\n                  strtab = (const char *)dtag_table[j].d_un.d_ptr;\n                  printf(\"string table addr: %p\\n\", strtab);\n                }\n            }\n\n            // no string table ? we're stuck, bail out\n            if (strtab == NULL) {\n              printf(\"no strtab, abort\\n\");\n              break;\n            }\n\n            // now, i print shared libraries\n            for (int j = 0; 1; j++) {\n                // the end of the dtag table is marked by DT_NULL\n                if (dtag_table[j].d_tag == DT_NULL) {\n                    break;\n                }\n\n                if (dtag_table[j].d_tag == DT_NEEDED) {\n                  printf(\"too long: %d\\n\", &amp;strtab[dtag_table[j].d_un.d_val] &gt;= ls + stat.st_size);\n                  printf(\"string offset in strtab: %lu\\n\", dtag_table[j].d_un.d_val);\n                  printf(\"string from strtab: %s\\n\", &amp;strtab[dtag_table[j].d_un.d_val]);\n                }\n            }\n\n            // only go through the PT_DYNAMIC segment we found,\n            // other segments dont matter\n            break;\n        }\n    }\n\n    // cleanup memory\n    cleanup:\n    if (fd != -1) {\n        close(fd);\n    }\n    if (ls != MAP_FAILED) {\n        munmap((void *)ls, stat.st_size);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I compile it with:</p>\n\n<pre><code>gcc -g -Wall -Wextra test.c\n</code></pre>\n\n<p>When I run <code>./a.out a.out</code> (so reading the shared libraries of itself), it seems to work fine, I get the following output:</p>\n\n<pre><code>string table addr: 0x4003d8\ntoo long: 0\nstring offset in strtab: 1\nstring from strtab: libc.so.6\n</code></pre>\n\n<p>However, when I run it against system binaries, like <code>/bin/ls</code>, with <code>./a.out /bin/ls</code>, then I get a segfault at line 78.</p>\n\n<pre><code>string table addr: 0x401030\ntoo long: 0\nstring offset in strtab: 1\nSegmentation fault (core dumped)\n</code></pre>\n\n<p>I don't know why. Reading the <code>/bin/ls</code> with <code>readelf</code>, the adresses I use seem right and the string offset seems right too:</p>\n\n<pre><code>$ readelf -a /bin/ls | grep dynstr\n...\n[ 6] .dynstr           STRTAB           0000000000401030  00001030\n...\n\n$ readelf -p .dynstr /bin/ls\nString dump of section '.dynstr':\n  [     1]  libselinux.so.1\n  ...\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c", "memory-management", "operating-system", "malloc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495607398, "post_id": 44150549, "comment_id": 75318141, "body": "Are you sure the allocation and free are not optimized out? I&#39;d do that if I was a compiler. :)"}, {"owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "edited": false, "score": 1, "creation_date": 1495607461, "post_id": 44150549, "comment_id": 75318165, "body": "Memory manager could allocate memory on the first use. Try adding <code>memset</code> call to your code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1495607658, "post_id": 44150549, "comment_id": 75318267, "body": "large allocations are served by glibc&#39;s <code>malloc</code> directly through <code>mmap</code>, this might be the explanation (and the heap you see is maybe somehow used by <code>printf</code>)"}, {"owner": {"reputation": 966, "user_id": 1386127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/01cef9fb064e908463d83e6cb1f08cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Soumen", "link": "https://stackoverflow.com/users/1386127/soumen"}, "edited": false, "score": 0, "creation_date": 1495608660, "post_id": 44150549, "comment_id": 75318844, "body": "@FelixPalmen that seems to be the case. I ran the program with strace and there is this call to mmap - mmap(NULL, 4294971392, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f243fa1f000. Thanks a lot!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495608986, "post_id": 44150549, "comment_id": 75319055, "body": "@SouravGhosh: Can&#39;t optimize them out; library calls are observable side effects."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495609433, "post_id": 44150549, "comment_id": 75319310, "body": "@SouravGhosh ...and even if the compiler knows about <code>malloc</code> and <code>free</code> it can&#39;t be optimized out anyway because we use the return value of <code>malloc</code>."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495609757, "post_id": 44150549, "comment_id": 75319518, "body": "@MichaelWalz right, without the <code>if</code> statement, in can be optimized out, I believe."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1495609782, "post_id": 44150549, "comment_id": 75319537, "body": "@MSalters not if we don;t use the return value. Correct me if i&#39;m wrong."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495609874, "post_id": 44150549, "comment_id": 75319588, "body": "The returned pointer is used in the call to <code>free()</code> in any case, so I don&#39;t think it can be optimized out."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495609881, "post_id": 44150549, "comment_id": 75319592, "body": "@SouravGhosh: You&#39;re wrong. Classical example would be <code>printf()</code> where the return value is commonly ignored."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1495610153, "post_id": 44150549, "comment_id": 75319784, "body": "@MSalters <a href=\"https://godbolt.org/g/kSUJGI\" rel=\"nofollow noreferrer\">can you sir please help me understand? thanks</a>"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1495611066, "post_id": 44150549, "comment_id": 75320455, "body": "@MSalters <i>a gentle notification sir, comment will self-destruct....</i>"}, {"owner": {"reputation": 966, "user_id": 1386127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/01cef9fb064e908463d83e6cb1f08cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Soumen", "link": "https://stackoverflow.com/users/1386127/soumen"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495613624, "post_id": 44150549, "comment_id": 75322219, "body": "@SouravGhosh what you have shown in compiler explorer, that is with -O3 flag. Remove that flag and it will show call to malloc() function."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495615964, "post_id": 44150549, "comment_id": 75323807, "body": "@Soumen Nice find!! However, the discussion was about optimization, so.... :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495649600, "post_id": 44150549, "comment_id": 75347919, "body": "@SouravGhosh what MSalters probably wants to express is a compiler can&#39;t optimize out a library call even if its return value is never used, because that call <i>could</i> have observable side-effects. I&#39;d like to add: Even if the compiler knows the semantics of <code>malloc()</code> and can verify it links against the standard lib, with shared dynamic objects, someone could later exchange the library with a version that <i>does</i> have relevant side-effects."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "is_accepted": true, "score": 3, "last_activity_date": 1495609699, "creation_date": 1495609699, "answer_id": 44151292, "question_id": 44150549, "link": "https://stackoverflow.com/questions/44150549/why-heap-area-not-shown-in-case-of-large-memory-allocation/44151292#44151292", "title": "Why heap area not shown in case of large memory allocation?", "body": "<p>The C standard doesn't say anything about a heap, so, an implementation of <code>malloc()</code> is free to allocate memory in any suitable way. This could for example be from a fixed large buffer in a data segment on platforms that don't provide memory management.</p>\n\n<p>In the case of <code>glibc</code>, <code>malloc</code> by default allocates memory using <code>mmap</code> if the requested chunk is sufficiently large. The traditional heap (through <code>sbrk</code>) is only used for smaller allocations.</p>\n"}], "owner": {"reputation": 966, "user_id": 1386127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/01cef9fb064e908463d83e6cb1f08cf8?s=128&d=identicon&r=PG&f=1", "display_name": "Soumen", "link": "https://stackoverflow.com/users/1386127/soumen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 44151292, "answer_count": 1, "score": 2, "last_activity_date": 1495609699, "creation_date": 1495607327, "question_id": 44150549, "link": "https://stackoverflow.com/questions/44150549/why-heap-area-not-shown-in-case-of-large-memory-allocation", "title": "Why heap area not shown in case of large memory allocation?", "body": "<p>After allocating large memory area using malloc, I am trying to check the span of heap area in <strong>/proc/[pid]/maps</strong> file. Below is the code that I wrote.</p>\n\n<pre><code>#include &lt;stdio.h&gt;                                                              \n#include &lt;stdlib.h&gt;                                                             \n#include &lt;unistd.h&gt;                                                             \n\nint main()                                                                      \n{                                                                               \n  void *p = malloc(1024LL * 1024LL * 1024LL * 4);                                                    \n\n  if (p == NULL)                                                                \n  {                                                                             \n    printf(\"alloc fail\\n\");                                                     \n  }\n  //else                                                                        \n  //{                                                                           \n     //printf(\"memory allocated at %p\\n\", p);                                    \n  //}                                                                             \n\n  while (1) sleep(1);                                                           \n  free(p);                                                                      \n  return 0;                                                                     \n}    \n</code></pre>\n\n<p>When I check <strong>/proc/[pid]/maps</strong> file, there is no mapping shown for the heap area.</p>\n\n<pre><code>00400000-00401000 r-xp 00000000 08:01 20185722                           /home/soumen/a.out\n00600000-00601000 r--p 00000000 08:01 20185722                           /home/soumen/a.out\n00601000-00602000 rw-p 00001000 08:01 20185722                           /home/soumen/a.out\n7f19f98df000-7f1af98e0000 rw-p 00000000 00:00 0 \n7f1af98e0000-7f1af9a9f000 r-xp 00000000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7f1af9a9f000-7f1af9c9f000 ---p 001bf000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7f1af9c9f000-7f1af9ca3000 r--p 001bf000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7f1af9ca3000-7f1af9ca5000 rw-p 001c3000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7f1af9ca5000-7f1af9ca9000 rw-p 00000000 00:00 0 \n7f1af9ca9000-7f1af9ccf000 r-xp 00000000 08:01 23462295                   /lib/x86_64-linux-gnu/ld-2.23.so\n7f1af9ea4000-7f1af9ea7000 rw-p 00000000 00:00 0 \n7f1af9ecc000-7f1af9ece000 rw-p 00000000 00:00 0 \n7f1af9ece000-7f1af9ecf000 r--p 00025000 08:01 23462295                   /lib/x86_64-linux-gnu/ld-2.23.so\n7f1af9ecf000-7f1af9ed0000 rw-p 00026000 08:01 23462295                   /lib/x86_64-linux-gnu/ld-2.23.so\n7f1af9ed0000-7f1af9ed1000 rw-p 00000000 00:00 0 \n7ffe71fe1000-7ffe72002000 rw-p 00000000 00:00 0                          [stack]\n7ffe72094000-7ffe72096000 r--p 00000000 00:00 0                          [vvar]\n7ffe72096000-7ffe72098000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n</code></pre>\n\n<p>Now I <strong>uncomment the else section</strong> in the code and run it again. This time the heap area appears in <strong>/proc/[pid]/maps</strong> file. But it is much smaller than what is being allocated. </p>\n\n<p>Also, the starting address of the allocated region does not fall inside the heap area limit shown in <strong>/proc/[pid]/maps</strong> file.</p>\n\n<p>Program output:</p>\n\n<pre><code>memory allocated at 0x7fcab87e2010\n</code></pre>\n\n<p>Contents of <strong>/proc/[pid]/maps</strong> file</p>\n\n<pre><code>00400000-00401000 r-xp 00000000 08:01 20185722                           /home/soumen/a.out\n00600000-00601000 r--p 00000000 08:01 20185722                           /home/soumen/a.out\n00601000-00602000 rw-p 00001000 08:01 20185722                           /home/soumen/a.out\n00bba000-00bdb000 rw-p 00000000 00:00 0                                  [heap]\n7fcab87e2000-7fcbb87e3000 rw-p 00000000 00:00 0 \n7fcbb87e3000-7fcbb89a2000 r-xp 00000000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7fcbb89a2000-7fcbb8ba2000 ---p 001bf000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7fcbb8ba2000-7fcbb8ba6000 r--p 001bf000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7fcbb8ba6000-7fcbb8ba8000 rw-p 001c3000 08:01 23462292                   /lib/x86_64-linux-gnu/libc-2.23.so\n7fcbb8ba8000-7fcbb8bac000 rw-p 00000000 00:00 0 \n7fcbb8bac000-7fcbb8bd2000 r-xp 00000000 08:01 23462295                   /lib/x86_64-linux-gnu/ld-2.23.so\n7fcbb8da7000-7fcbb8daa000 rw-p 00000000 00:00 0 \n7fcbb8dcf000-7fcbb8dd1000 rw-p 00000000 00:00 0 \n7fcbb8dd1000-7fcbb8dd2000 r--p 00025000 08:01 23462295                   /lib/x86_64-linux-gnu/ld-2.23.so\n7fcbb8dd2000-7fcbb8dd3000 rw-p 00026000 08:01 23462295                   /lib/x86_64-linux-gnu/ld-2.23.so\n7fcbb8dd3000-7fcbb8dd4000 rw-p 00000000 00:00 0 \n7fff2df8f000-7fff2dfb0000 rw-p 00000000 00:00 0                          [stack]\n7fff2dfec000-7fff2dfee000 r--p 00000000 00:00 0                          [vvar]\n7fff2dfee000-7fff2dff0000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n</code></pre>\n\n<p>So what is being done here by the OS? Can malloc call defer memory allocation until it is being referred to?</p>\n\n<p>Configuration I am using</p>\n\n<ol>\n<li><p>Linux nightfury 4.4.0-78-generic #99-Ubuntu SMP Thu Apr 27 15:29:09 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</p></li>\n<li><p>gcc (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609</p></li>\n</ol>\n"}, {"tags": ["c", "gcc", "embedded"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495607235, "post_id": 44150495, "comment_id": 75318036, "body": "Create a small test program using both methods, compile it, and look at the generated code."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 3, "creation_date": 1495607245, "post_id": 44150495, "comment_id": 75318044, "body": "The general tip is to make everything as local as possible."}, {"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 4, "creation_date": 1495607293, "post_id": 44150495, "comment_id": 75318082, "body": "I think that passing a global context variable in parameter, regardless of resources, is something you shouldn&#39;t do. If it is global, then use it as a global variable. If you don&#39;t need it to be global, avoid it"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1495607926, "post_id": 44150495, "comment_id": 75318424, "body": "Your context is single-instance anyway,  so passing a pointer just wastes stack space -&gt; access it directly. And btw globals are often fine for embedded code"}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "edited": false, "score": 0, "creation_date": 1495630468, "post_id": 44150495, "comment_id": 75334273, "body": "with a global on a constrained system your memory usage is fixed/known.  declaring it as local and passing it on, the passing it on is just a pointer, doesnt cost much but even there your stack usage (from the struct and maybe the pointers) is more variable than it would have been.  one structure no biggie but do this habitually and you have a problem of determining chip size (memory) and insuring the stack doesnt crash into data.  so slightly slower passing the pointer, and some/slight variability with stack consumption.  most likely a wash if you focus on this one struct, in the noise."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1495652378, "post_id": 44150495, "comment_id": 75349281, "body": "Required reading if you believe that a global is ever acceptable: <a href=\"http://www.embedded.com/electronics-blogs/break-points/4025723/A-pox-on-globals\" rel=\"nofollow noreferrer\">embedded.com/electronics-blogs/break-points/4025723/&hellip;</a>.  But if you made a decision to make it global, ill-advised as that may be, you gain nothing by accessing it through a local reference."}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1495608506, "post_id": 44150710, "comment_id": 75318779, "body": "How would passing references/pointers make the code smaller??? Accessing globals directly is just reading from or writing to the memory - using a pointer - well, again we want to read/write memory, but before being able to do that, we need to dereference the pointer first, which needs additional instructions..."}, {"owner": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1495637684, "post_id": 44150710, "comment_id": 75340322, "body": "@Aconcagua it depends on the compiler and architecture, but if you pass a reference and you can encode all loads as [Rn + #imm] (reference plus an offset small enough to fit in encoded instruction) then it may be smaller than repeatedly loading the address of the variable+offset.  This requires the compiler to be poor enough that it can&#39;t recognize the addresses being loaded and condense them all."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 2030, "user_id": 550235, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/934de7ad57af9a8f6a37e0c78017f942?s=128&d=identicon&r=PG", "display_name": "Russ Schultz", "link": "https://stackoverflow.com/users/550235/russ-schultz"}, "edited": false, "score": 0, "creation_date": 1496039986, "post_id": 44150710, "comment_id": 75481799, "body": "@RussSchultz That must be a <i>very</i> poor compiler not being able to compile <code>global.member</code> into the same immediate load instruction as in your comment..."}, {"owner": {"reputation": 653, "user_id": 7948972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c7532feae477f9afbb10247cb6cfece?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Houle", "link": "https://stackoverflow.com/users/7948972/paul-houle"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1496098841, "post_id": 44150710, "comment_id": 75510966, "body": "@Aconcagua Registers are often a very limited resource, and the compiler won&#39;t want to spill them to memory to free one for use unless necessary.  There is no reason to load the <code>global.</code> address into a register because it is <i>constant</i> and there&#39;s zero or minimal performance penalty directly embedding a constant address in an instruction -- the instruction merely becomes a few bytes larger.  Passing the <code>global.</code> address as an argument <i>forces</i> the compiler to register it and use the typically smaller [base-reg+offset] addressing mode in all references to <code>global.</code> ."}], "tags": [], "owner": {"reputation": 653, "user_id": 7948972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c7532feae477f9afbb10247cb6cfece?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Houle", "link": "https://stackoverflow.com/users/7948972/paul-houle"}, "is_accepted": false, "score": 0, "last_activity_date": 1495607855, "creation_date": 1495607855, "answer_id": 44150710, "question_id": 44150495, "link": "https://stackoverflow.com/questions/44150495/does-use-structs-direct-in-functions-uses-more-resources-than-pass-them-in-param/44150710#44150710", "title": "Does use structs direct in functions uses more resources than pass them in parameters in C?", "body": "<p>Much better to pass a reference to the structure than modify the structure as a global.  Passing a reference makes it visible the function is (potentially) changing the structure.</p>\n\n<p>From a performance standpoint there won't be a measurable difference.</p>\n\n<p>If the number of structure accesses is significant, passing the reference can also result in significantly smaller code.</p>\n"}, {"tags": [], "owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "is_accepted": false, "score": 0, "last_activity_date": 1495608130, "last_edit_date": 1495608130, "creation_date": 1495607911, "answer_id": 44150729, "question_id": 44150495, "link": "https://stackoverflow.com/questions/44150495/does-use-structs-direct-in-functions-uses-more-resources-than-pass-them-in-param/44150729#44150729", "title": "Does use structs direct in functions uses more resources than pass them in parameters in C?", "body": "<p>Global variables are generally preferred to be avoided, there are plenty of reasons to it. While with global variables some find it easy to share a single resource between many functions, but there are flipsides to it. Be it ease of code understanding, be it dependencies and tight coupling of variables. Many a times we end up using libraries, and with modules that are linked <em>dynamically</em>, it is troublesome if different libraries have their own instances of global variables.</p>\n\n<p>So, with direct reference to your question, I would prefer </p>\n\n<pre><code>void function1(Context_t *ctx)  \n</code></pre>\n\n<p>against anything that involves changing a global variable.\nBut again, if the necessary precautions are taken in terms of tight coupling of global variables and functions, it is okay to go with existing implementation which has global variables, rather than scrapping the whole tested thing and start off again.</p>\n"}, {"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1495609540, "post_id": 44150980, "comment_id": 75319398, "body": "Not only a matter of RTOS, but of any multithreading capable OS/environment... And: the remaining globals (if not thread_local) must be protected against race conditions - via mutexes, semaphores, ..., by use of lock-less algorithms, or by assuring that these are only accessed by one single thread -- the latter likely being the most difficult/dangerous to apply..."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1495609631, "post_id": 44150980, "comment_id": 75319450, "body": "@Aconcagua This is tagged embedded, so multi-threading environments are unlikely. Depends on your definition of &quot;embedded&quot; of course."}, {"owner": {"reputation": 131, "user_id": 7861400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dExjz.png?s=128&g=1", "display_name": "LOSnel", "link": "https://stackoverflow.com/users/7861400/losnel"}, "edited": false, "score": 0, "creation_date": 1495609861, "post_id": 44150980, "comment_id": 75319579, "body": "Thanks for answers, in my case I talk about embedded system with no RTOS, no multi threading system."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1495652054, "post_id": 44150980, "comment_id": 75349136, "body": "It is not a matter of &quot;modern systems&quot; and &quot;old stuff&quot;, just a matter of architecture and high-end vs low-end devices. PIC, AVR and 8051derivitives are still used in current production and frequently used in new designs.  The code should suit the architecture that is true, and most 8 bit devices have significant resource and architectural constraints and were designed long ago, but that does not mean all code on them is in legacy maintenance or that the compilers are antique and incapable of sophisticated optimisation."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 5, "last_activity_date": 1495608788, "creation_date": 1495608788, "answer_id": 44150980, "question_id": 44150495, "link": "https://stackoverflow.com/questions/44150495/does-use-structs-direct-in-functions-uses-more-resources-than-pass-them-in-param/44150980#44150980", "title": "Does use structs direct in functions uses more resources than pass them in parameters in C?", "body": "<p><strong>Where to allocate variables is a program design decision, not a performance decision.</strong> </p>\n\n<p>On modern systems there is not going to be much of a performance difference between your two versions.</p>\n\n<p>When passing a lot of different parameters, rather than just one single pointer as in this case, there could be a performance difference. Older systems, most notably 8 bit MCUs with crappy compilers, could benefit quite a lot from using file scope variables when it comes to performance. Mostly since old legacy architectures like PIC, AVR, HC08, 8051 etc had very limited stack and register resources. If you have to maintain such old stuff, then file scope variables <em>will</em> improve performance.</p>\n\n<p>That being said, you should allocate variables where it makes since. If the purpose of your code unit is to process <code>Context_t</code> allocated elsewhere, it should get passed as a pointer. If <code>Context_t</code> is private data that the caller does not need to know about, you could allocate it at file scope.</p>\n\n<p>Please note that there is never a reason to declare \"global\" variables at file scope. All your file scope variables should have internal linkage. That is, they should be declared as <code>static</code>. This is perfectly fine practice in most embedded systems, particularly single core, bare metal MCU applications.</p>\n\n<p>However, note that file scope variables are not thread-safe and causes complications on multi-process systems. If you are for example using a RTOS, you should minimize the amount of such variables. </p>\n"}, {"tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 1, "last_activity_date": 1495632668, "creation_date": 1495632668, "answer_id": 44159877, "question_id": 44150495, "link": "https://stackoverflow.com/questions/44150495/does-use-structs-direct-in-functions-uses-more-resources-than-pass-them-in-param/44159877#44159877", "title": "Does use structs direct in functions uses more resources than pass them in parameters in C?", "body": "<p>Strictly to your question.  If you are going to have the global then use it as a global directly.  Having one function use it as a global and then pass it down requires setup on the caller, the consumption of the resource (register or stack) for the parameter, and slight savings on the function itself:</p>\n\n<pre><code>typedef struct\n{\n    unsigned int a;\n    unsigned int b;\n    unsigned int c;\n    unsigned int d;\n    unsigned int e;\n    unsigned int f;\n    unsigned int g;\n    unsigned int h;\n    unsigned int i;\n    unsigned int j;\n} SO_STRUCT;\nSO_STRUCT so;\n\n\nunsigned int fun1 ( SO_STRUCT s )\n{\n    return(s.a+s.g);\n}\nunsigned int fun2 ( SO_STRUCT *s )\n{\n    return(s-&gt;a+s-&gt;g);\n}\nunsigned int fun3 ( void )\n{\n    return(so.a+so.g);\n}\n\n\nDisassembly of section .text:\n\n00000000 &lt;fun1&gt;:\n   0:   e24dd010    sub sp, sp, #16\n   4:   e24dc004    sub r12, sp, #4\n   8:   e98c000f    stmib   r12, {r0, r1, r2, r3}\n   c:   e59d3018    ldr r3, [sp, #24]\n  10:   e59d0000    ldr r0, [sp]\n  14:   e28dd010    add sp, sp, #16\n  18:   e0800003    add r0, r0, r3\n  1c:   e12fff1e    bx  lr\n\n00000020 &lt;fun2&gt;:\n  20:   e5902000    ldr r2, [r0]\n  24:   e5900018    ldr r0, [r0, #24]\n  28:   e0820000    add r0, r2, r0\n  2c:   e12fff1e    bx  lr\n\n00000030 &lt;fun3&gt;:\n  30:   e59f300c    ldr r3, [pc, #12]   ; 44 &lt;fun3+0x14&gt;\n  34:   e5930000    ldr r0, [r3]\n  38:   e5933018    ldr r3, [r3, #24]\n  3c:   e0800003    add r0, r0, r3\n  40:   e12fff1e    bx  lr\n  44:   00000000    andeq   r0, r0, r0\n</code></pre>\n\n<p>the caller to fun2 would have to load the address of the struct to pass it in so in this case the extra consumption is we lost a register as a parameter, since there were so few parameters, it was a wash, for a single call from a single higher function.  if you continued to nest this the best you could do is keep handing down the register:</p>\n\n<pre><code>unsigned int funx ( SO_STRUCT *s );\nunsigned int fun2 ( SO_STRUCT *s )\n{\n    return(funx(s)+3);\n}\n\nDisassembly of section .text:\n\n00000000 &lt;fun2&gt;:\n   0:   e92d4010    push    {r4, lr}\n   4:   ebfffffe    bl  0 &lt;funx&gt;\n   8:   e8bd4010    pop {r4, lr}\n   c:   e2800003    add r0, r0, #3\n  10:   e12fff1e    bx  lr\n</code></pre>\n\n<p>so no matter whether the struct was originally global or local to some function, in this case if I call the next function and pass by reference the first caller has to setup the parameter, in this case with arm that is a register r0, so stack pointer math or a load of an address into r0.  r0 goes to fun2() and can be used directly by reference to get at items assuming the function is simple enough it doesnt have to evict out to the stack.  Then calling funx() with the same pointer, fun2 does NOT have to load r0 (in this simplified doesnt get too much better than this case) and funx() can reference items from r0 directly.  had fun2 and funx used the global directly they both would resemble fun3 above where each function would have a load to get the address and a word to store the address</p>\n\n<p>one would hope multiple functions in a file would share but dont make that assumption:</p>\n\n<pre><code>unsigned int fun3 ( void )\n{\n    return(so.a+so.g);\n}\nunsigned int funz ( void )\n{\n    return(so.a+so.h);\n}\n\n00000000 &lt;fun3&gt;:\n   0:   e59f300c    ldr r3, [pc, #12]   ; 14 &lt;fun3+0x14&gt;\n   4:   e5930000    ldr r0, [r3]\n   8:   e5933018    ldr r3, [r3, #24]\n   c:   e0800003    add r0, r0, r3\n  10:   e12fff1e    bx  lr\n  14:   00000000    andeq   r0, r0, r0\n\n00000018 &lt;funz&gt;:\n  18:   e59f300c    ldr r3, [pc, #12]   ; 2c &lt;funz+0x14&gt;\n  1c:   e5930000    ldr r0, [r3]\n  20:   e593301c    ldr r3, [r3, #28]\n  24:   e0800003    add r0, r0, r3\n  28:   e12fff1e    bx  lr\n  2c:   00000000    andeq   r0, r0, r0\n</code></pre>\n\n<p>as your function gets more complicated though this optimization goes away (simply passing r0 down as the first parameter).  So you end up storing and then retreiving the address to the struct so it costs a stack location and a store and some loads where direct to the global would be a flash/.text location and a load, so slightly cheaper.</p>\n\n<p>if on a system where the parameters are on the stack then continuing to pass the pointer does not have a chance at that optimization you have to keep copying the pointer to the stack for each nested call...</p>\n\n<p>So as far as your direct question there is no correct answer other than it depends.  And you would need to be really really tight on a performance or resource budget to worry about a premature optimization like that.</p>\n\n<p>As far as consumption, globals have the benefit on a very tightly constrained system of being fixed and known at compile time what their consumption is.  Where having local variables as a habit in particular structures, is going to create a lot of stack use which is dynamic and much harder to measure (can change each line of code you add or remove too, so spend a week trying to determine the use, then add a line and you could gain nothing to a few percent to tens of percent).  At the same time a one time or few time use variable or structure MIGHT be better served locally, depends on how deep in the nested functions, if at the end then doesnt cost much if declared locally at the top function then it costs the same as being global but is now on the stack and not measured at compile time.  One struct, ehhh, no biggie, a habit, that is when it matters.</p>\n\n<p>So to your specific question it cannot be determined ahead of time and cannot make a general rule that it is \"faster\" to pass by reference or use directly as one can easily create use cases that demonstrate each being true.  The wee bitty improvement would come from knowing your memory consumption at compile time (global) vs runtime (local).  But your question was not about local vs global was about access to the global.</p>\n"}], "owner": {"reputation": 131, "user_id": 7861400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dExjz.png?s=128&g=1", "display_name": "LOSnel", "link": "https://stackoverflow.com/users/7861400/losnel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 1, "accepted_answer_id": 44150980, "answer_count": 4, "score": 1, "last_activity_date": 1495632668, "creation_date": 1495607145, "last_edit_date": 1495616837, "question_id": 44150495, "link": "https://stackoverflow.com/questions/44150495/does-use-structs-direct-in-functions-uses-more-resources-than-pass-them-in-param", "title": "Does use structs direct in functions uses more resources than pass them in parameters in C?", "body": "<p>here is my question.</p>\n\n<p>Is there a good way to uses global context structures in embedded c program ?</p>\n\n<p>I mean is it better to pass them in parameters of function or directly use the global reference inside the function ? Or there is no differences ?</p>\n\n<p>Example: </p>\n\n<pre><code>Context_t myContext; // is a structure with a lot of members\n\nvoid function1(Context_t *ctx)\n{\n  ctx-&gt;x = 1;\n}\n\nor\n\nvoid function2(void)\n{\n   myContext.x = 1;\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c", "matrix", "transpose", "matrix-transform"], "comments": [{"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1495606323, "post_id": 44150248, "comment_id": 75317583, "body": "What exactly do you mean by &#39;it did not work&#39;? Is there an error message?"}, {"owner": {"reputation": 35, "user_id": 6582465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d53543c786f1cebe53cbc1ee7270736?s=128&d=identicon&r=PG&f=1", "display_name": "kkk", "link": "https://stackoverflow.com/users/6582465/kkk"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1495606443, "post_id": 44150248, "comment_id": 75317634, "body": "It did not generate the correct matrix @Codor"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495606503, "post_id": 44150248, "comment_id": 75317665, "body": "Show snippet to generate output, actual output and expected output."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495606508, "post_id": 44150248, "comment_id": 75317669, "body": "Transposing a matrix is similar to swapping the values of two variables. think about that simple case and what could go wrong there. Then check your code for the complicated way of making the same mistake."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495606921, "post_id": 44150248, "comment_id": 75317865, "body": "Unless <code>column == row</code>, you need to use different multipliers when copying."}], "answers": [{"tags": [], "owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "is_accepted": true, "score": 5, "last_activity_date": 1495606925, "creation_date": 1495606925, "answer_id": 44150426, "question_id": 44150248, "link": "https://stackoverflow.com/questions/44150248/matrix-transpose-in-c/44150426#44150426", "title": "Matrix Transpose in C", "body": "<p>The indexing should be done in the following way.</p>\n\n<pre><code>double B[column * row];\n\nfor (int j = 0; j &lt; row; j++){\n    for (int i = 0; i &lt; column; i++){\n        B[j*column + i] = A[i*row + j];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6582465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d53543c786f1cebe53cbc1ee7270736?s=128&d=identicon&r=PG&f=1", "display_name": "kkk", "link": "https://stackoverflow.com/users/6582465/kkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 44150426, "answer_count": 1, "score": 1, "last_activity_date": 1495607106, "creation_date": 1495606145, "last_edit_date": 1495607106, "question_id": 44150248, "link": "https://stackoverflow.com/questions/44150248/matrix-transpose-in-c", "title": "Matrix Transpose in C", "body": "<p>Suppose I define a matrix and assign the value in the following way:</p>\n\n<pre><code> double A[row * column];\n\n for (int j = 0; j &lt; column; j++){\n     for (int i = 0; i &lt; row; i++){\n       A[j*row + i] = ((double)rand())/RAND_MAX; // random value\n     }\n   }\n</code></pre>\n\n<p>How can I compute the transpose of this matrix? I have tried the following but the resulting matrix is not correct.</p>\n\n<pre><code>double B[column * row]; \n\nfor(int j = 0; j &lt; row; j++){\n     for(int i = 0; i &lt; column; i++){\n       B[j*row + i] = A[i*row + j];\n     }\n   }\n</code></pre>\n"}, {"tags": ["c++", "c", "arduino", "strcmp"], "comments": [{"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1495735546, "post_id": 44150230, "comment_id": 75387830, "body": "If an answer solved your problem, you should mark it as accepted."}], "answers": [{"comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 2, "creation_date": 1495606475, "post_id": 44150262, "comment_id": 75317648, "body": "I would also remove useless extra parenthesis: <code>if(strcmp(WiFi.SSID(i).c_str(), ReadWifiSSID(j).c_str()) == 0)</code>"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 5, "last_activity_date": 1495606674, "last_edit_date": 1495606674, "creation_date": 1495606217, "answer_id": 44150262, "question_id": 44150230, "link": "https://stackoverflow.com/questions/44150230/arduino-string-comparison-not-working/44150262#44150262", "title": "Arduino String comparison not working", "body": "<p>Read the <a href=\"https://linux.die.net/man/3/strcmp\" rel=\"nofollow noreferrer\">man page</a>, <strong>once again</strong>.</p>\n\n<p>Also, quoting <code>C11</code>, chapter \u00a77.24.4.2 , (<em>emphasis mine</em>)</p>\n\n<blockquote>\n<pre><code>int strcmp(const char *s1, const char *s2);\n</code></pre>\n  \n  <p>The <code>strcmp</code> function returns an integer greater than, <strong>equal to</strong>, or less than <strong>zero</strong>,\n  accordingly <strong>as the string pointed to by <code>s1</code> is</strong> greater than, <strong>equal to</strong>, or less than <strong>the string pointed to by <code>s2</code></strong>.</p>\n</blockquote>\n\n<p><code>strcmp()</code> returns a <code>0</code> when both the strings match. So, </p>\n\n<pre><code> if (strcmp(((WiFi.SSID(i)).c_str()),((ReadWifiSSID(j)).c_str()))==1)\n</code></pre>\n\n<p>should better be</p>\n\n<pre><code> if (strcmp (((WiFi.SSID(i)).c_str()),((ReadWifiSSID(j)).c_str())) == 0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14671, "user_id": 2317490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ypoen.png?s=128&g=1", "display_name": "dandavis", "link": "https://stackoverflow.com/users/2317490/dandavis"}, "edited": false, "score": 0, "creation_date": 1495699573, "post_id": 44166197, "comment_id": 75365633, "body": "much more readable; let the compiler do the work! (this is actually as fast on arduino)"}], "tags": [], "owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "is_accepted": false, "score": 2, "last_activity_date": 1495651051, "creation_date": 1495651051, "answer_id": 44166197, "question_id": 44150230, "link": "https://stackoverflow.com/questions/44150230/arduino-string-comparison-not-working/44166197#44166197", "title": "Arduino String comparison not working", "body": "<p>As already said, you are using <code>strcmp</code> wrong.</p>\n\n<p>But you don't need to use that.<br>\nYou can compare <code>String</code> objects directly with <code>==</code>.</p>\n\n<pre><code>if (WiFi.SSID(i) == ReadWifiSSID(j))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8057470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db379a0b6236fa759e1b95264eff8bb?s=128&d=identicon&r=PG", "display_name": "Venkatesh Ravi", "link": "https://stackoverflow.com/users/8057470/venkatesh-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3204, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495651118, "creation_date": 1495606100, "last_edit_date": 1495651118, "question_id": 44150230, "link": "https://stackoverflow.com/questions/44150230/arduino-string-comparison-not-working", "title": "Arduino String comparison not working", "body": "<p>I tried to compare a EEPROM stored SSID that returns a string to the <code>WiFi.SSID()</code> function. </p>\n\n<p>Although it is literally the same in the Serial Monitor I don't get a match and it never reaches the <code>if</code> statement. </p>\n\n<p>I tried using <code>==</code> operator without the <code>.str()</code> and used <code>if( strcmp ( a.c_str(),b.c_str)==1)</code></p>\n\n<p>Nothing seems to work. What am I missing here?</p>\n\n<pre><code>void ConnectToBestWifi()\n{\n  int apnos = WiFi.scanNetworks();\n  int loc[3];\n  int no=0;\n  for(int i=0;i&lt;apnos;i++)\n  {\n    for(int j=0;j&lt;3;j++)\n    {\n      Serial.println(\"\");\n      Serial.println(\"Wifi SSID\");\n      Serial.println(WiFi.SSID(i).c_str());\n      Serial.println(\"\");\n      Serial.println(\"Read SSID\");\n      Serial.println(ReadWifiSSID(j).c_str());\n      Serial.println(\"\");\n\n    if (strcmp(((WiFi.SSID(i)).c_str()),((ReadWifiSSID(j)).c_str()))==1)\n    {\n      Serial.println(\"gotcha\");\n      loc [no]=i;\n      no++;        \n    }\n  }\n</code></pre>\n\n<p>Image of Serial Monitor attached below</p>\n\n<p><img src=\"https://i.stack.imgur.com/sMizl.png\" alt=\"Serial Monitor\"></p>\n"}, {"tags": ["c", "string", "verification"], "comments": [{"owner": {"reputation": 541, "user_id": 659841, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e870e028a77ab05aac6ea6f6a026596f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/659841/eric"}, "edited": false, "score": 0, "creation_date": 1495605732, "post_id": 44150111, "comment_id": 75317290, "body": "Are you getting an error? If so, what is it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 0, "creation_date": 1495605935, "post_id": 44150111, "comment_id": 75317384, "body": "You want to compare two strings. It doesn&#39;t matter that one of them is const. == would only compare their addresses, so always evaluates false for different objects."}, {"owner": {"reputation": 13, "user_id": 8057374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207046aab1bc21ed99422133930aef6b?s=128&d=identicon&r=PG&f=1", "display_name": "Speyke", "link": "https://stackoverflow.com/users/8057374/speyke"}, "edited": false, "score": 0, "creation_date": 1495605952, "post_id": 44150111, "comment_id": 75317400, "body": "No errors, but the program simply don&#39;t do what is expected, it keeps on the do while and don&#39;t go further on the code. So the program gets stuck there you see..."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1495606744, "post_id": 44150111, "comment_id": 75317784, "body": "Don&#39;t <a href=\"https://stackoverflow.com/a/7898516/694733\"><code>fflush(stdin)</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8057374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207046aab1bc21ed99422133930aef6b?s=128&d=identicon&r=PG&f=1", "display_name": "Speyke", "link": "https://stackoverflow.com/users/8057374/speyke"}, "edited": false, "score": 0, "creation_date": 1495606225, "post_id": 44150200, "comment_id": 75317533, "body": "Thanksssss! How I give you reputation?? I cant vote yet, sorry!"}], "tags": [], "owner": {"reputation": 191, "user_id": 8044954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BrKQ.jpg?s=128&g=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/8044954/vic"}, "is_accepted": false, "score": 0, "last_activity_date": 1495607100, "last_edit_date": 1495607100, "creation_date": 1495605969, "answer_id": 44150200, "question_id": 44150111, "link": "https://stackoverflow.com/questions/44150111/how-can-i-verify-if-one-string-variable-is-equal-to-a-specific-string-that-is-no/44150200#44150200", "title": "How can I verify if one string variable is equal to a specific string that is not a variable in a do while in C language?? (not compare two strings)", "body": "<p>Here I wrote a simple solution for what you're trying to achieve.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char input[4];\n\n    do {\n        printf (\"You want to continue??\");\n        fflush(stdin);\n        gets(input);\n    } while (strcmp(input, \"yes\") == 0 || strcmp(input, \"Yes\") == 0);\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 8057374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207046aab1bc21ed99422133930aef6b?s=128&d=identicon&r=PG&f=1", "display_name": "Speyke", "link": "https://stackoverflow.com/users/8057374/speyke"}, "edited": false, "score": 0, "creation_date": 1495606213, "post_id": 44150202, "comment_id": 75317525, "body": "Thanks a lot! You sure the extra char is needed cuz of the null &quot;\\0&quot; stuff about arrays? How I give you reputation?? I cant vote yet, sorry!"}, {"owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "reply_to_user": {"reputation": 13, "user_id": 8057374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207046aab1bc21ed99422133930aef6b?s=128&d=identicon&r=PG&f=1", "display_name": "Speyke", "link": "https://stackoverflow.com/users/8057374/speyke"}, "edited": false, "score": 0, "creation_date": 1495606909, "post_id": 44150202, "comment_id": 75317860, "body": "@Speyke every string ends with the terminating character <code>\\0</code>, yes :) Glad I helped! You gave me reputation by accepting my answer, if you want to upvote, you can press the upper triangle at the left of the answer :)"}], "tags": [], "owner": {"reputation": 4751, "user_id": 5649326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a82Se.jpg?s=128&g=1", "display_name": "Marievi", "link": "https://stackoverflow.com/users/5649326/marievi"}, "is_accepted": true, "score": 1, "last_activity_date": 1495605977, "creation_date": 1495605977, "answer_id": 44150202, "question_id": 44150111, "link": "https://stackoverflow.com/questions/44150111/how-can-i-verify-if-one-string-variable-is-equal-to-a-specific-string-that-is-no/44150202#44150202", "title": "How can I verify if one string variable is equal to a specific string that is not a variable in a do while in C language?? (not compare two strings)", "body": "<p>If you want to make string comparison, use <code>strcmp</code>. You will compare just one variable, as you want it, but with two different values. Change line :</p>\n\n<pre><code>while (input == \"yes\" || \"Yes\");\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>while ( strcmp(input,\"yes\") == 0 || strcmp(input, \"Yes\") == 0);\n</code></pre>\n\n<p>Also, change :</p>\n\n<pre><code>char input[3];\n</code></pre>\n\n<p>to :</p>\n\n<pre><code>char input[4];\n</code></pre>\n\n<p>as you need to take into account the terminating <code>\\0</code> character.</p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "is_accepted": false, "score": 0, "last_activity_date": 1495607114, "creation_date": 1495607114, "answer_id": 44150482, "question_id": 44150111, "link": "https://stackoverflow.com/questions/44150111/how-can-i-verify-if-one-string-variable-is-equal-to-a-specific-string-that-is-no/44150482#44150482", "title": "How can I verify if one string variable is equal to a specific string that is not a variable in a do while in C language?? (not compare two strings)", "body": "<p>Most likely you are going run into newline character that gets carried over\nto next input.  Here is a solution for that.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint\nmain(void)\n{\n   char input[4], garbage[50];\n   do \n   {\n      //important code\n      printf (\"You want to continue??\");\n      scanf(\"%s\", input);\n      fgets(garbage, sizeof(garbage), stdin); //Newline char is now stored into garbage.\n    } while (strcmp(input,\"yes\") == 0 || strcmp(input,\"Yes\") == 0 );\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8057374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207046aab1bc21ed99422133930aef6b?s=128&d=identicon&r=PG&f=1", "display_name": "Speyke", "link": "https://stackoverflow.com/users/8057374/speyke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 44150202, "answer_count": 3, "score": 1, "last_activity_date": 1495607114, "creation_date": 1495605589, "question_id": 44150111, "link": "https://stackoverflow.com/questions/44150111/how-can-i-verify-if-one-string-variable-is-equal-to-a-specific-string-that-is-no", "title": "How can I verify if one string variable is equal to a specific string that is not a variable in a do while in C language?? (not compare two strings)", "body": "<p>[Help]\nHey guys, I'm a newbie at programming and at the website, but I know it for a long time and it always help me, but just now I decided to make the account because I really need to ask for help in this BIG problem I always had:</p>\n\n<p>I have already gone through the commands you have to deal with strings in C, but the best thing I found was \"strcmp\" and \"strncmp\", but that's not what I want, cuz it compares two strings. I just want to compare one like this...</p>\n\n<pre><code>char input[3];\n    do {\n        //important code\n        printf (\"You want to continue??);\n        fflush(stdin);\n        gets(input);\n       } while (input == \"yes\" || \"Yes);\n</code></pre>\n\n<p>It doesn't work, I would need to not use string and just a char like: \"y\" for yes. There's any way I can do what I want?? How I compare just this one string with these values?\nBtw, why I can't use tab inside the  code part? Sorry for newbie questions...</p>\n\n<p>Thanks for the help, I really appreciate it. I know many students have this same doubt, so mods keep it please.</p>\n\n<p>Bye!</p>\n"}, {"tags": ["c", "linux-kernel", "kernel-module", "netfilter"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8056101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a240d0c94a4cf38e6552834e2aaac3?s=128&d=identicon&r=PG&f=1", "display_name": "DataScienceExplorer", "link": "https://stackoverflow.com/users/8056101/datascienceexplorer"}, "edited": false, "score": 0, "creation_date": 1495691301, "post_id": 44153129, "comment_id": 75361531, "body": "Thank you! That helped me solve the issue. However, can you tell me more about the first and the third parameters? I can&#39;t find any related documentation online (I do know the information about the second parameter though)."}], "tags": [], "owner": {"reputation": 7497, "user_id": 1213227, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78179ef730f268752c0f6fdde3943b99?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1213227/matthias"}, "is_accepted": false, "score": 5, "last_activity_date": 1495614901, "creation_date": 1495614901, "answer_id": 44153129, "question_id": 44150093, "link": "https://stackoverflow.com/questions/44150093/nfhook-netfilter-error-assignment-from-incompatible-pointer-type/44153129#44153129", "title": "nfhook (netfilter) error: assignment from incompatible pointer type", "body": "<p>In the (IMHO) latest (released) netfilter <a href=\"http://elixir.free-electrons.com/linux/latest/source/include/linux/netfilter.h#L60\" rel=\"noreferrer\">version</a>, <code>nf_hookfn</code> (the base type of <code>nf_hook_ops.hook</code>) is defined as follows:</p>\n\n<pre><code>typedef unsigned int nf_hookfn(void *priv,\n                   struct sk_buff *skb,\n                   const struct nf_hook_state *state);\n</code></pre>\n\n<p>Your function <code>hook_func_incoming</code> does not match this signature, you should adopt it.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2755904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f6e9206fbab243b2b480f7406ce3f0?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Sezgin", "link": "https://stackoverflow.com/users/2755904/murat-sezgin"}, "is_accepted": false, "score": 0, "last_activity_date": 1517642378, "creation_date": 1517642378, "answer_id": 48594969, "question_id": 44150093, "link": "https://stackoverflow.com/questions/44150093/nfhook-netfilter-error-assignment-from-incompatible-pointer-type/48594969#48594969", "title": "nfhook (netfilter) error: assignment from incompatible pointer type", "body": "<p>Third parameter is this data structure. In the new definition of the hook function, they wanted to combine the old parameters in a single data structure. So, if you need the out device, you can get it from this state parameter.</p>\n\n<pre><code>struct nf_hook_state {\n        unsigned int hook;\n        int thresh;\n        u_int8_t pf;\n        struct net_device *in;\n        struct net_device *out;\n        struct sock *sk;\n        struct net *net;\n        struct nf_hook_entry __rcu *hook_entries;\n        int (*okfn)(struct net *, struct sock *, struct sk_buff *);\n};\n</code></pre>\n\n<p>priv is a field inside the struct nf_hook_ops. You can set it to any value in your own module and access it in your hook function.</p>\n\n<pre><code>struct nf_hook_ops {\n        struct list_head        list;\n\n        /* User fills in from here down. */\n        nf_hookfn               *hook;\n        struct net_device       *dev;\n        void                    *priv;\n        u_int8_t                pf;\n        unsigned int            hooknum;\n        /* Hooks are ordered in ascending priority. */\n        int                     priority;\n};\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8056101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a240d0c94a4cf38e6552834e2aaac3?s=128&d=identicon&r=PG&f=1", "display_name": "DataScienceExplorer", "link": "https://stackoverflow.com/users/8056101/datascienceexplorer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1517642378, "creation_date": 1495605534, "question_id": 44150093, "link": "https://stackoverflow.com/questions/44150093/nfhook-netfilter-error-assignment-from-incompatible-pointer-type", "title": "nfhook (netfilter) error: assignment from incompatible pointer type", "body": "<p>I have seen this page with similar error message: <a href=\"https://stackoverflow.com/questions/43741943/nf-hook-ops-returns-incompatible-pointer-when-assigning-to-hook-func-c-linux/44145678#44145678\">Nf_hook_ops returns incompatible pointer when assigning to hook_func -C -Linux -Netfilter</a></p>\n\n<p>However, it didn't give a clear answer to how to solve the issue. The author for that question says that he found out his netfilter.h is located elsewhere which caused the trouble, but for me I found out that all the four files included are in the correct directory (usr/src/linux-headers-4.8.0-22-generic/include/linux in my case).</p>\n\n<p>Following is my code which should help clarify better.</p>\n\n<pre><code>#include &lt;linux/kernel.h&gt;\n#include &lt;linux/module.h&gt;\n#include &lt;linux/netfilter.h&gt;\n#include &lt;linux/netfilter_ipv4.h&gt;\n\nstatic struct nf_hook_ops nfho;\n\nunsigned int hook_func_incoming(unsigned int hooknum, struct sk_buff *sskb, \nconst struct net_device *in, const struct net_device *out, int (*okfn)\n(struct sk_buff *)){\n    return NF_DROP;\n}\n\nint init_module(){\n    nfho.hook = hook_func_incoming;\n    nfho.hooknum = NF_INET_PRE_ROUTING;\n    nfho.pf = PF_INET;\n    nfho.priority = NF_IP_PRI_FIRST;\n    nf_register_hook(&amp;nfho);\n    printk(KERN_INFO \"SIMPLE FIREWALL LOADED\\n\");\n    return 0;\n}\n</code></pre>\n\n<p>The exact error message is this: </p>\n\n<p><strong>error: assignment from incompatible pointer type [-Werror=incompatible-pointer-types]\n  nfho.hook = hook_func_incoming;\n            ^\ncc1: some warnings being treated as errors</strong></p>\n\n<p>Please let me know what I should do to be able to compile my netfilter, any help is appreciated!</p>\n"}, {"tags": ["c", "memory", "memory-management"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 5, "creation_date": 1495604974, "post_id": 44149955, "comment_id": 75316919, "body": "Once the process consuming the memory is killed, all the memory is released. Nothing is permanently consumed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 3, "creation_date": 1495605105, "post_id": 44149955, "comment_id": 75316978, "body": "Any modern OS will reclaim all memory from a process after its exit, so memory leaks are only a problem during the execution of the process."}, {"owner": {"reputation": 117, "user_id": 7882597, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTqZT.jpg?s=128&g=1", "display_name": "SamC", "link": "https://stackoverflow.com/users/7882597/samc"}, "edited": false, "score": 0, "creation_date": 1495605762, "post_id": 44149955, "comment_id": 75317309, "body": "Oh okay, thanks. So, I am correct in thinking that as I shut down the virtual os, it returns all the memory back and also when I restart it later on, it does not have any blocked memory from previous session, right?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495605885, "post_id": 44149955, "comment_id": 75317362, "body": "@SamC basically yes."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1495606283, "post_id": 44149955, "comment_id": 75317562, "body": "Trying to see the worst case, or a way how you could get what you fear: If your virtual OS (and maybe also the VM engine) supports persistence (including running processes and their memory) it might have the same memory issue after restoring the situation before it was shut down. I.e. a &quot;shut down&quot; with the meaning &quot;hobernate&quot;. Otherwise I agree with the other comments."}, {"owner": {"reputation": 117, "user_id": 7882597, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTqZT.jpg?s=128&g=1", "display_name": "SamC", "link": "https://stackoverflow.com/users/7882597/samc"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495606504, "post_id": 44149955, "comment_id": 75317666, "body": "@Yunnosch Might be a silly question but does Virtualbox support persistence?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495606652, "post_id": 44149955, "comment_id": 75317746, "body": "Not a silly question, but something of a silly answer: I do not know. (And I missed a specification of environment.) Just thinking generally of the edge cases (maybe leaving OPs exact usecase, I admit). I meant &quot;VM engine&quot; as a generic term, hope I did not hit a specific prodcut name. (And I meant &quot;hibernate&quot; by the way ;-) )"}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1495607280, "post_id": 44150273, "comment_id": 75318071, "body": "Notice however that you <i>can</i> have &quot;persistent&quot; (=until next reboot) leaks if you leak shared memory."}, {"owner": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1495607629, "post_id": 44150273, "comment_id": 75318255, "body": "That&#39;s true, all add it to the answer however the OP&#39;s question indicated a permanent damage which can&#39;t be fixed, and allocating a shared memory (without freeing it) is certainly nastier but it will still be solved with a reboot as you mentioned, so I considered these cases the worst case scenario."}], "tags": [], "owner": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "is_accepted": true, "score": 3, "last_activity_date": 1495607839, "last_edit_date": 1495607839, "creation_date": 1495606273, "answer_id": 44150273, "question_id": 44149955, "link": "https://stackoverflow.com/questions/44149955/what-if-there-is-a-memory-leak-in-virtual-environment/44150273#44150273", "title": "What If There Is A Memory Leak In Virtual Environment?", "body": "<p>Memory leak can occur when you allocate some memory (with <code>malloc</code> in C) and you never free that memory, this can happen for a number of reasons.</p>\n\n<p>Now the important thing to understand is that this <strong>allocated memory will be released once the process is finished running</strong>. </p>\n\n<p>When you setup your VM you set the maximum amount of memory it can consume. When you shut down your VM it will also be released.</p>\n\n<p>You can't cause a \"permanent\" memory leakage if the program you write doesn't run. If the OS has some always running service with memory leak than it will slow down when it is out of memory but when you restart, all the memory will be released again.</p>\n\n<p>So don't let this stop you, you can't damage your computer and you can always recover it by exiting the program. (or restarting the PC in a worst case scenario\n)</p>\n\n<p>EDIT:</p>\n\n<p>As it was mentioned in the comments there is a special scenario when you leak shared memory, in this case exiting the program might not release the memory but I consider this the worst case scenario and a reboot will solve this problem as well. (still not permanent)</p>\n"}, {"comments": [{"owner": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "edited": false, "score": 0, "creation_date": 1495608511, "post_id": 44150796, "comment_id": 75318783, "body": "If you run out of memory the OS will start to use your drive as memory (HDD, SSD) which is significantly slower, in this stage if you start a new process you will definitely see a major slowdown (but no damage at all), and this can still be fixed by rebooting the virtual machine, or if such thing occurs on the host rebooting the host. My point is whatever you do nothing is permanent and nothing will damage your computer (in terms of memory leakage)."}, {"owner": {"reputation": 117, "user_id": 7882597, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTqZT.jpg?s=128&g=1", "display_name": "SamC", "link": "https://stackoverflow.com/users/7882597/samc"}, "reply_to_user": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "edited": false, "score": 0, "creation_date": 1495608881, "post_id": 44150796, "comment_id": 75318975, "body": "@MrBlaise so, even against persistence? Like if it is set successfully as Yunnosch said?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "edited": false, "score": 0, "creation_date": 1495609165, "post_id": 44150796, "comment_id": 75319145, "body": "@MrBlaise I agree with what you say, but do not see a conflict with my answer. Either see swap memory as part of available memory (and it is used up within the constraints of the virtual OS) or the slow-down is the undesirable but not emergency triggering effect OP is afraid of and is saved/restored with persistence. (Oh, SamC said something similar, thanks.)"}, {"owner": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "reply_to_user": {"reputation": 117, "user_id": 7882597, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTqZT.jpg?s=128&g=1", "display_name": "SamC", "link": "https://stackoverflow.com/users/7882597/samc"}, "edited": false, "score": 0, "creation_date": 1495609274, "post_id": 44150796, "comment_id": 75319214, "body": "@SamC What Yunnosch said will only occur inside the VM and it will only consume the maximum amount of memory that you gave it, this issue caused by &#39;persistence&#39; can easily be fixed with a reboot on the VM, rebooting the VM frees the VM&#39;s memory just like rebooting the host frees the memory. Also shutting down the VM will always free the memory, this can only occur if you make your VM go to sleep (hibernate), in this case the memory will be written to the hard drive and the actual memory will be released."}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "edited": false, "score": 0, "creation_date": 1495609384, "post_id": 44150796, "comment_id": 75319282, "body": "@MrBlaise Also true, but also no conflict with my answer. This I actually state explicitly in my answer. But I will edit to clarify."}, {"owner": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "edited": false, "score": 0, "creation_date": 1495609455, "post_id": 44150796, "comment_id": 75319335, "body": "@Yunnosch I didn&#39;t comment because I think what you have written is wrong I just wanted to add my thoughts and clarify some things. :)"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "edited": false, "score": 0, "creation_date": 1495609600, "post_id": 44150796, "comment_id": 75319430, "body": "@MrBlaise I know, and I appreciate and am using your feedback. Thanks."}, {"owner": {"reputation": 117, "user_id": 7882597, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTqZT.jpg?s=128&g=1", "display_name": "SamC", "link": "https://stackoverflow.com/users/7882597/samc"}, "reply_to_user": {"reputation": 782, "user_id": 2674359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc781cdc96e50b1209a4b2f7985cf96?s=128&d=identicon&r=PG", "display_name": "MrBlaise", "link": "https://stackoverflow.com/users/2674359/mrblaise"}, "edited": false, "score": 0, "creation_date": 1495612549, "post_id": 44150796, "comment_id": 75321540, "body": "@MrBlaise Ah got it, thanks."}, {"owner": {"reputation": 117, "user_id": 7882597, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTqZT.jpg?s=128&g=1", "display_name": "SamC", "link": "https://stackoverflow.com/users/7882597/samc"}, "edited": false, "score": 0, "creation_date": 1495612567, "post_id": 44150796, "comment_id": 75321550, "body": "@Yunnosch, thanks for bringing the interesting topic up :)"}], "tags": [], "owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "is_accepted": false, "score": 1, "last_activity_date": 1495609537, "last_edit_date": 1495609537, "creation_date": 1495608142, "answer_id": 44150796, "question_id": 44149955, "link": "https://stackoverflow.com/questions/44149955/what-if-there-is-a-memory-leak-in-virtual-environment/44150796#44150796", "title": "What If There Is A Memory Leak In Virtual Environment?", "body": "<p>This answer is meant to provide a different view point, in addition to the good answer(s) and comments, which I agree with.</p>\n\n<p>I am trying to see the worst case, i.e a way how you could get what you fear.\nYou probably have an environment which does not match the following assumptions, in that case my construct does of course not apply.</p>\n\n<ul>\n<li>your virtual OS supports \"persistence\"<br>\n(i.e. you can shut it down in a \"hibernate\" way, it can start with the same running processes and their restored memory content)</li>\n<li>your virtualisation engine also supports persistence of the virtual OS</li>\n<li>shutting down for persistence in virtual OS is possible with a process occupying a critical amount of memory (sanity checks could prevent this)</li>\n<li>virtualisation engine also does not mind the depleted memory and allows persistence</li>\n<li>you choose to use persistent shutdown,<br>\nrebooting the virtual OS normally would include killing the evil process and reclaiming the memory  (this is discussed by other answers and comments, but thanks to MrBlaise for proposing the clarification here)</li>\n</ul>\n\n<p>In this circumstance I imagine that you can have:  </p>\n\n<ul>\n<li>a process which has taken (and ran out of) all avaiable memory</li>\n<li>but has not crashed or otherwise triggered emergency measures</li>\n<li>then this situation is saved for persistence before shutting down, successfully</li>\n<li>then you restart the virtual OS</li>\n<li>it restores the previous situation, i.e. returns from hiberantion</li>\n<li>the restored previous situation contains a still/again running process which has taken all memory</li>\n</ul>\n\n<p>I think this will still only affect the virtual OS, not the host.</p>\n\n<p>Please note that I intentionally made all necessary assumptions just to get the situation you are afraid of. Some of the assumptions are quite \"daring\".<br>\nI imagine for example that anything supporting persistence should have sanity checks, which at least detect the memory issue and ask how to handle.</p>\n\n<p><em>(By the way, I do not know about virtualisation engines which support persistence, neither whether any do not support it. I am thinking in the generic, theoretical area.<br>\nIn case I have invented the persistence for virtualisation engines (can't believe it), I claim this as prior art. ;-))</em></p>\n"}], "owner": {"reputation": 117, "user_id": 7882597, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wTqZT.jpg?s=128&g=1", "display_name": "SamC", "link": "https://stackoverflow.com/users/7882597/samc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "closed_date": 1495612125, "accepted_answer_id": 44150273, "answer_count": 2, "score": 3, "last_activity_date": 1495609537, "creation_date": 1495604901, "question_id": 44149955, "link": "https://stackoverflow.com/questions/44149955/what-if-there-is-a-memory-leak-in-virtual-environment", "closed_reason": "Not suitable for this site", "title": "What If There Is A Memory Leak In Virtual Environment?", "body": "<p>What I understood from reading some web articles is that just like any other program, the host OS allocates X amount of memory to virtual OS and when I start any program on virtual OS, the virtual OS fetches the exact amount of memory needed for the program. </p>\n\n<p>When I shut the virtual OS down, it returns the allocated memory to the host OS. </p>\n\n<p>But what happens if there is a memory leakage in the virtual OS environment? I am starting to learn C, and my professor says that in dynamic memory allocation operations, permanent leakage can happen in the host OS. </p>\n\n<p>But what if it happens in virtual environment? I guess the program will give back ALL of the memory allocated to the host OS when I shut it down, right? What happens when I start the virtual host again the next time? Does the memory leakage show up there permanently? </p>\n\n<p>Just getting afraid before I even start writing my first program in C. </p>\n\n<p>P. S. If I use websites like Repl.it and use memory allocation over there, will it cause damage to my system still?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 541, "user_id": 659841, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e870e028a77ab05aac6ea6f6a026596f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/659841/eric"}, "edited": false, "score": 0, "creation_date": 1495602808, "post_id": 44149429, "comment_id": 75315985, "body": "I think the point of doing a question like this on HackerRank, etc, is to figure it out yourself?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1495602844, "post_id": 44149429, "comment_id": 75315996, "body": "For what input does it fail? What is the actual and expected output? Have you tried stepping through the code, line by line while monitoring variables and their values, in a debugger?"}, {"owner": {"reputation": 4070, "user_id": 2006333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/140d350dfc5e8e5d587c220dc153c04a?s=128&d=identicon&r=PG&f=1", "display_name": "Keshava GN", "link": "https://stackoverflow.com/users/2006333/keshava-gn"}, "edited": false, "score": 0, "creation_date": 1495602971, "post_id": 44149429, "comment_id": 75316051, "body": "And the output you are getting is ?"}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1495603267, "post_id": 44149429, "comment_id": 75316183, "body": "What is the question here?"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495603373, "post_id": 44149429, "comment_id": 75316226, "body": "Is the test case ot fails related to negative &quot;n&quot;? In that case, you need to use float values and instead of looping up loop down and instead of multiplying divide. I doubt however that n&lt;-32 and n &gt;32 can easily be handled."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495607395, "post_id": 44149429, "comment_id": 75318138, "body": "What value does your code print for n = 999?  For n = -999?  Why didn&#39;t you take care of these extreme cases?  I&#39;m also not clear how your description maps to the example input and output.  You state &quot;returns the values ranging from that of 2(two) raised to power 0(zero) to 2(two) raised to power n(the number specified in input)&quot; but the output appears to be 2 to the power of <i>x</i> for <i>x</i> in the range 0 to n."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8057270"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495608067, "post_id": 44149429, "comment_id": 75318512, "body": "@Jonathan Leffler - n=positive extreme cases works fine.But not sure about output format of negative cases."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1495603902, "post_id": 44149599, "comment_id": 75316435, "body": "This is more a comment than an answer. You should elaborate, otherwise no upvotes."}, {"owner": {"reputation": 699, "user_id": 7562074, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mYiplUjiang/AAAAAAAAAAI/AAAAAAAAASg/IuJhDArg780/photo.jpg?sz=128", "display_name": "Roy Avidan", "link": "https://stackoverflow.com/users/7562074/roy-avidan"}, "edited": false, "score": 0, "creation_date": 1495604239, "post_id": 44149599, "comment_id": 75316569, "body": "can i guess hackerrank?"}], "tags": [], "owner": {"reputation": 37, "user_id": 8002174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f32948f446dfcda35ca73ed3393a89?s=128&d=identicon&r=PG&f=1", "display_name": "DineshB", "link": "https://stackoverflow.com/users/8002174/dineshb"}, "is_accepted": false, "score": 1, "last_activity_date": 1495603362, "creation_date": 1495603362, "answer_id": 44149599, "question_id": 44149429, "link": "https://stackoverflow.com/questions/44149429/my-code-fails-in-one-test-case-am-i-doing-wrong/44149599#44149599", "title": "my code fails in one test case. am i doing wrong?", "body": "<p>You should take care of negative values of 'n'.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8057270"}, "edited": false, "score": 0, "creation_date": 1495607147, "post_id": 44149993, "comment_id": 75317975, "body": "Still one test case fails.Sorry I dont know the failed test case input."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1495607156, "post_id": 44149993, "comment_id": 75317980, "body": "That code is unreadable because of the lack of indentation.  As such, it is no help to anyone on SO \u2014 what you do elsewhere is your business, but here, you need to write legible code.  Indent as you&#39;d like it to look, making sure you use no tabs at all.  Copy&#39;n&#39;paste the code into the edit box, ignoring the preview.  Make sure it looks correct.  Then select the code and use the <b><code>{}</code></b> button above the edit box to indent it.  Now check that it looks correct in the preview too, then submit it."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495609506, "post_id": 44149993, "comment_id": 75319365, "body": "The code as posted is also buggy \u2014 it doesn&#39;t compile."}], "tags": [], "owner": {"reputation": 70, "user_id": 5398479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f5f989c43330053a90166dd9020c0b?s=128&d=identicon&r=PG&f=1", "display_name": "A.Bau", "link": "https://stackoverflow.com/users/5398479/a-bau"}, "is_accepted": false, "score": -3, "last_activity_date": 1495610637, "last_edit_date": 1495610637, "creation_date": 1495605052, "answer_id": 44149993, "question_id": 44149429, "link": "https://stackoverflow.com/questions/44149429/my-code-fails-in-one-test-case-am-i-doing-wrong/44149993#44149993", "title": "my code fails in one test case. am i doing wrong?", "body": "<pre><code>#include &lt;stdio.h&gt; \nint main(void){ \nint n;\ndouble p=1; \nscanf(\"%d\",&amp;n); \nif(n&gt;0){ \nfor(int i=0;i&lt;n;i++,p*=2) \nprintf(\"%.0lf,\",p); \nprintf(\"%.0lf\",p); \n} else if(n==0) printf(\"1\"); \nelse {\nfor (int i=0; i&gt;n; i--, p/=2)\nprintf(\"%.0lf,\",p); \nprintf(\"%.0lf\",p); \n}\nreturn 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8057270"}, "edited": false, "score": 0, "creation_date": 1495607130, "post_id": 44150151, "comment_id": 75317967, "body": "Still one test case fails.Sorry I dont know the failed test case input."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1495607235, "post_id": 44150151, "comment_id": 75318037, "body": "@Ajith - Need to know the output format for the case n &lt; 0.  Need to know  test case failed.  Need to know what is the expected results supposed to be."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8057270"}, "edited": false, "score": 0, "creation_date": 1495607561, "post_id": 44150151, "comment_id": 75318215, "body": "The challange is at dcoder android app.i dont know about n&lt;0 output format.sample output is given only for n&gt;0."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1495607729, "post_id": 44150151, "comment_id": 75318304, "body": "Is this from hackerank? If so, there is a way to find out the inputs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8057270"}, "edited": false, "score": 0, "creation_date": 1495608158, "post_id": 44150151, "comment_id": 75318569, "body": "no it is not from hackerrank.it is from Dcoder Android app."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1495608507, "post_id": 44150151, "comment_id": 75318780, "body": "@Ajith - The output is from C executable.  However this output is displayed on Android App is beyond the scope.  If the output display is the reason for the test to fail, there isn&#39;t much I can do to help."}], "tags": [], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "is_accepted": false, "score": 0, "last_activity_date": 1495605778, "creation_date": 1495605778, "answer_id": 44150151, "question_id": 44149429, "link": "https://stackoverflow.com/questions/44149429/my-code-fails-in-one-test-case-am-i-doing-wrong/44150151#44150151", "title": "my code fails in one test case. am i doing wrong?", "body": "<p>For N&lt;0, the format specifier should allow decimal points since all the numbers will be between 0 and 1. So for N&lt;0, use double as the data type.\nFor N>0, use long long data type since all the numbers will be whole integers.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint \nmain(void)\n{\n   int n;\n   double p=1.0;\n   long long llp = 1;\n\n   scanf(\"%d\",&amp;n);\n\n   if(n&gt;0){\n       for(int i=0;i&lt;=n;i++){\n          printf(\"%lld\",llp);\n          if( i&lt;n) printf(\",\");\n          llp*=2;\n       }\n   } else if(n&lt;0){\n        for(int i=n;i&lt;=0;i++){\n           printf(\"%.5lf\",p);\n           if( i&lt;0) printf(\",\");\n           p*=0.5;\n        } \n   }else\n       printf(\"1\");\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8057270"}, "is_accepted": true, "score": 0, "last_activity_date": 1564902545, "creation_date": 1564902545, "answer_id": 57344576, "question_id": 44149429, "link": "https://stackoverflow.com/questions/44149429/my-code-fails-in-one-test-case-am-i-doing-wrong/57344576#57344576", "title": "my code fails in one test case. am i doing wrong?", "body": "<p>Negative cases not handled</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(void){\n     int n,p=1;\n     scanf(\"%d\",&amp;n);\n     if(n&gt;0){\n        for(int i=0;i&lt;n;i++,p*=2)\n            printf(\"%d,\",p);\n        printf(\"%d\",p);\n     }\n     else if(n==0) printf(\"1\");\n     else{\n        for(int i=n;i&lt;0;i--,p*=2)\n            printf(\"-%d,\",p);\n        printf(\"-%d\",p);\n        }\n    return 0;\n }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8057270"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 57344576, "answer_count": 4, "score": -4, "last_activity_date": 1564902545, "creation_date": 1495602553, "question_id": 44149429, "link": "https://stackoverflow.com/questions/44149429/my-code-fails-in-one-test-case-am-i-doing-wrong", "title": "my code fails in one test case. am i doing wrong?", "body": "<p>Create a code that allows people to learn about exponents.\nThe task is to write a code which takes an integer number as an input and returns the values ranging from that of 2(two) raised to power 0(zero) to 2(two) raised to power n(the number specified in input).</p>\n\n<p><strong>Input</strong><p>Input contains the number 'n' for which all the values are returned from power of 2 from 0 to n.\n</p>\n<strong>Output</strong></p>\n\n<p>Output contains the values ranging from 2(two) raised to power 0(zero) to 2(two) raised to power n(input) separated by a comma.</p>\n\n<p><strong>Constraints</strong></p>\n\n<p>-1000 \u2264 n \u2264 1000</p>\n\n<p><strong>Sample Input</strong></p>\n\n<p>5</p>\n\n<p><strong>Sample Output</strong></p>\n\n<p>1,2,4,8,16,32</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main(void){\n   int n;double p=1;\n   scanf(\"%d\",&amp;n);\n   if(n&gt;0){\n      for(int i=0;i&lt;n;i++,p*=2)\n          printf(\"%.0lf,\",p);\n      printf(\"%.0lf\",p);\n   }\n   else if(n==0) \n       printf(\"1\");\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "ubuntu", "syslog"], "comments": [{"owner": {"reputation": 967, "user_id": 210623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf8760319801c4e5ebec5c4f1489ded9?s=128&d=identicon&r=PG", "display_name": "Cheatah", "link": "https://stackoverflow.com/users/210623/cheatah"}, "edited": false, "score": 2, "creation_date": 1495602403, "post_id": 44149276, "comment_id": 75315846, "body": "Don&#39;t just assume that LOG_CONS does what you want it to do. Read the documentation for the syslog function. The LOG_PERROR flag is more like what you want to do."}, {"owner": {"reputation": 2929, "user_id": 6481121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8w4Hk.png?s=128&g=1", "display_name": "Ipor Sircer", "link": "https://stackoverflow.com/users/6481121/ipor-sircer"}, "edited": false, "score": 0, "creation_date": 1495602432, "post_id": 44149276, "comment_id": 75315856, "body": "Look at <a href=\"https://en.wikipedia.org/wiki/Printk\" rel=\"nofollow noreferrer\">printk</a> settings."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 2929, "user_id": 6481121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8w4Hk.png?s=128&g=1", "display_name": "Ipor Sircer", "link": "https://stackoverflow.com/users/6481121/ipor-sircer"}, "edited": false, "score": 1, "creation_date": 1495619154, "post_id": 44149276, "comment_id": 75326086, "body": "@Ipor, what does <code>printk</code> have to do with user-mode programs?"}, {"owner": {"reputation": 2929, "user_id": 6481121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8w4Hk.png?s=128&g=1", "display_name": "Ipor Sircer", "link": "https://stackoverflow.com/users/6481121/ipor-sircer"}, "edited": false, "score": 0, "creation_date": 1495679624, "post_id": 44149276, "comment_id": 75358328, "body": "It can be configured which type of syslog messages will go to the terminal. You can disable it completely and enable more."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495604025, "post_id": 44149480, "comment_id": 75316477, "body": "This is a comment, not an answer, get 3 more rep and you&#39;ll be able to comment. Not (yet) downvoted."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1495619068, "post_id": 44149480, "comment_id": 75326024, "body": "Thank you for this code snippet, which may provide some immediate help.  A proper explanation <a href=\"//meta.stackexchange.com/q/114762\">would greatly improve</a> its educational value by showing <i>why</i> this is a good solution to the problem, and would make it more useful to future readers with similar, but not identical, questions.  Please <a href=\"https://stackoverflow.com/posts/44149480/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 35, "user_id": 5141643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ef2ed63074f1fd1760e9d148824f6ab?s=128&d=identicon&r=PG&f=1", "display_name": "vivekn", "link": "https://stackoverflow.com/users/5141643/vivekn"}, "is_accepted": false, "score": -1, "last_activity_date": 1495623572, "last_edit_date": 1495623572, "creation_date": 1495602781, "answer_id": 44149480, "question_id": 44149276, "link": "https://stackoverflow.com/questions/44149276/how-to-use-syslog-to-log-some-message-on-terminal/44149480#44149480", "title": "How to use syslog to log some message on terminal?", "body": "<p>This should work: <code>openlog(\"slog\", LOG_PID|LOG_CONS, LOG_DAEMON);</code></p>\n"}, {"tags": [], "owner": {"reputation": 195, "user_id": 7738155, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c689dc98bc750ef50b82a5eb857d3e1e?s=128&d=identicon&r=PG&f=1", "display_name": "ams", "link": "https://stackoverflow.com/users/7738155/ams"}, "is_accepted": true, "score": 1, "last_activity_date": 1495776642, "creation_date": 1495776642, "answer_id": 44194253, "question_id": 44149276, "link": "https://stackoverflow.com/questions/44149276/how-to-use-syslog-to-log-some-message-on-terminal/44194253#44194253", "title": "How to use syslog to log some message on terminal?", "body": "<p>Thanks to all for comments and answers.</p>\n\n<p>Now, I am able to print a message on the terminal by using LOG_PERROR option in openlog() function.There is no need of LOG_CONS option to print on console.\nThanks to @Cheatah for the help.\nopenlog(\"slog\", LOG_PID|LOG_PERROR, LOG_USER);</p>\n\n<p>Thank you.</p>\n"}], "owner": {"reputation": 195, "user_id": 7738155, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c689dc98bc750ef50b82a5eb857d3e1e?s=128&d=identicon&r=PG&f=1", "display_name": "ams", "link": "https://stackoverflow.com/users/7738155/ams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 44194253, "answer_count": 2, "score": 0, "last_activity_date": 1495776642, "creation_date": 1495601782, "question_id": 44149276, "link": "https://stackoverflow.com/questions/44149276/how-to-use-syslog-to-log-some-message-on-terminal", "title": "How to use syslog to log some message on terminal?", "body": "<p>I have to use syslog to log a message on terminal.\nI found a code on internet but it is not working.\ncode: </p>\n\n<pre><code> #include &lt;stdio.h&gt;\n #include &lt;unistd.h&gt;\n #include &lt;syslog.h&gt;\n\nint main(void) \n{    \nopenlog(\"slog\", LOG_PID|LOG_CONS, LOG_USER);  \nsyslog(LOG_INFO, \"A different kind of Hello world ... \");\ncloselog();  \n return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 8, "creation_date": 1495601558, "post_id": 44149200, "comment_id": 75315543, "body": "both are undefined behaviour. Which means anything can happen and it does not have to be consistent."}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 3, "creation_date": 1495601695, "post_id": 44149200, "comment_id": 75315591, "body": "This is a side note: (char *) typecast is not needed with <code>malloc</code>."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1495604131, "post_id": 44149296, "comment_id": 75316520, "body": "BTW: it&#39;s <code>NUL</code> and not <code>NULL</code>, these two are very different things."}, {"owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1495606504, "post_id": 44149296, "comment_id": 75317667, "body": "Thank u. I know the difference. I have mentioned &quot;character&quot; after it. which is \\0. If I could have just said NULL and not NUL then it wold have created confusion. which is pointer and which is character"}], "tags": [], "owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "is_accepted": false, "score": 0, "last_activity_date": 1495601878, "creation_date": 1495601878, "answer_id": 44149296, "question_id": 44149200, "link": "https://stackoverflow.com/questions/44149200/what-if-memory-is-not-allocated-to-0-in-char-array-and-char-pointer/44149296#44149296", "title": "What if memory is not allocated to &#39;\\0&#39; in char array and char pointer", "body": "<p>The array that you used in Ex B is only of length 2. whenever you store a string in a array <code>\"ls\"</code> automatically a null character is added with is '\\0' so \"ls\" will become <code>l s \\0</code> when it is stored in memory. Most of the algorithm are based on this NULL character to find the length of string of value of string.</p>\n\n<p>So just declare your array of length 3 and you will be good to go.</p>\n\n<p>Thanks.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2371524"}, "edited": false, "score": 2, "creation_date": 1495605739, "post_id": 44149324, "comment_id": 75317294, "body": "What you cite as second case <b>is</b> defined, it initializes the char array to [l,s] (without <code>\\0</code>), it is <b>not</b> an assignment. UB occurs later when using this array as a string, because the terminating <code>\\0</code> is missing."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1495605944, "post_id": 44149324, "comment_id": 75317395, "body": "<code>This assignment itself is wrong</code>... -1, my downvote."}], "tags": [], "owner": {"reputation": 37, "user_id": 8002174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f32948f446dfcda35ca73ed3393a89?s=128&d=identicon&r=PG&f=1", "display_name": "DineshB", "link": "https://stackoverflow.com/users/8002174/dineshb"}, "is_accepted": false, "score": -1, "last_activity_date": 1495602036, "creation_date": 1495602036, "answer_id": 44149324, "question_id": 44149200, "link": "https://stackoverflow.com/questions/44149200/what-if-memory-is-not-allocated-to-0-in-char-array-and-char-pointer/44149324#44149324", "title": "What if memory is not allocated to &#39;\\0&#39; in char array and char pointer", "body": "<p>In the first case:</p>\n\n<pre><code>ptr = (char *)malloc(2);\n</code></pre>\n\n<p>memory is allocated for two bytes but strcpy stored 3 bytes at this location. So it is basically a memory corruption case but still \"ls\" command with \\0 at the end is stored at the location which makes system command to work.</p>\n\n<p>In the second case:</p>\n\n<pre><code>char ptr[2] = \"ls\";\n</code></pre>\n\n<p>This assignment itself is wrong and is not supposed to work. Behaviour is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 3, "last_activity_date": 1495606080, "last_edit_date": 1495606080, "creation_date": 1495604765, "answer_id": 44149927, "question_id": 44149200, "link": "https://stackoverflow.com/questions/44149200/what-if-memory-is-not-allocated-to-0-in-char-array-and-char-pointer/44149927#44149927", "title": "What if memory is not allocated to &#39;\\0&#39; in char array and char pointer", "body": "<p><strong>TL;DR</strong> both the codes cause <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a>.</p>\n\n<ul>\n<li><p><strong>In first case</strong></p>\n\n<pre><code>ptr = (char *)malloc(2);\nstrcpy(ptr, \"ls\");\n</code></pre>\n\n<p>you're off-by-one, as mentioned in <code>C11</code>, chapter \u00a77.24.2.3,</p>\n\n<blockquote>\n  <p>The <code>strcpy</code> function copies the string pointed to by <code>s2</code> <strong>(including the terminating null\n  character)</strong> into the array pointed to by <code>s1</code>.</p>\n</blockquote>\n\n<p>So, the <em>size</em> of <code>s1</code> should at least be <code>strlen(s2)+ 1</code>.</p></li>\n<li><p><strong>In second case</strong> </p>\n\n<pre><code>char ptr[2] = \"ls\";\n</code></pre>\n\n<p><code>ptr</code> does not have a null-terminator which in essence, causes out of bound access which again causes UB.</p>\n\n<p>Related, quoting the <a href=\"http://man7.org/linux/man-pages/man3/system.3p.html\" rel=\"nofollow noreferrer\">POSIX manual</a>,</p>\n\n<blockquote>\n  <p>[...] If <code>command</code> is\n     not a null pointer, the <code>system()</code> function shall pass <strong>the string\n     pointed to by <code>command</code></strong> to that command processor to be executed in an\n     implementation-defined manner; [...]</p>\n</blockquote>\n\n<p>A <code>char</code> array, without a null-terminator in place, is <strong><em>not considered a string</em></strong>.</p></li>\n</ul>\n\n<hr>\n\n<p>Having said that, there are a few sggestions,</p>\n\n<ul>\n<li>For a hosted environment, <code>void main()</code> should at least be <code>int main(void)</code> to conform to the standard.</li>\n<li><a href=\"https://stackoverflow.com/q/605845/2173917\">See this discussion on why not to cast the return value of <code>malloc()</code> and family in <code>C</code>.</a>.</li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 7126393, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/e92V8.png?s=128&g=1", "display_name": "Akaash", "link": "https://stackoverflow.com/users/7126393/akaash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1495606080, "creation_date": 1495601340, "last_edit_date": 1495605565, "question_id": 44149200, "link": "https://stackoverflow.com/questions/44149200/what-if-memory-is-not-allocated-to-0-in-char-array-and-char-pointer", "title": "What if memory is not allocated to &#39;\\0&#39; in char array and char pointer", "body": "<p>The following two programs are almost similar. In the two programs, memory is not allocated for null(<code>'\\0'</code>) character. </p>\n\n<p><strong>Ex A:</strong></p>\n\n<pre><code>void main()\n{\n        char *ptr;\n        ptr = (char *)malloc(2);\n        strcpy(ptr, \"ls\");\n        printf(\"%s\\n\",ptr);\n        system(ptr);\n        free(ptr);\n}\n</code></pre>\n\n<p><strong>Ex B:</strong></p>\n\n<pre><code>void main()\n{\n        char ptr[2] = \"ls\"; \n        system(ptr);\n}\n</code></pre>\n\n<p>1.The first program(Ex. A) is working But i have seen error only with valgrind tool.</p>\n\n<p><strong>output</strong></p>\n\n<pre><code>[root@localhost tmp]# valgrind --leak-check=full ./a.out \n==8619== Memcheck, a memory error detector\n==8619== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.\n==8619== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info\n==8619== Command: ./a.out\n==8619== \n==8619== Invalid write of size 1\n==8619==    at 0x400635: main (in /home/gen4linux/Projects/Cprgm/tmp/a.out)\n==8619==  Address 0x51f2042 is 0 bytes after a block of size 2 alloc'd\n==8619==    at 0x4C29C4F: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8619==    by 0x400627: main (in /home/gen4linux/Projects/Cprgm/tmp/a.out)\n==8619== \n==8619== Invalid read of size 1\n==8619==    at 0x4C2CC14: strlen (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8619==    by 0x4EA4D3B: puts (in /usr/lib64/libc-2.20.so)\n==8619==    by 0x400644: main (in /home/gen4linux/Projects/Cprgm/tmp/a.out)\n==8619==  Address 0x51f2042 is 0 bytes after a block of size 2 alloc'd\n==8619==    at 0x4C29C4F: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8619==    by 0x400627: main (in /home/gen4linux/Projects/Cprgm/tmp/a.out)\n==8619== \nls\n==8620== Syscall param execve(argv[i]) points to unaddressable byte(s)\n==8620==    at 0x4EF9537: execve (in /usr/lib64/libc-2.20.so)\n==8620==    by 0x4E77D18: do_system (in /usr/lib64/libc-2.20.so)\n==8620==    by 0x400650: main (in /home/gen4linux/Projects/Cprgm/tmp/a.out)\n==8620==  Address 0x51f2042 is 0 bytes after a block of size 2 alloc'd\n==8620==    at 0x4C29C4F: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==8620==    by 0x400627: main (in /home/gen4linux/Projects/Cprgm/tmp/a.out)\n==8620== \na.out  test37.c\n==8619== \n==8619== HEAP SUMMARY:\n==8619==     in use at exit: 0 bytes in 0 blocks\n==8619==   total heap usage: 1 allocs, 1 frees, 2 bytes allocated\n==8619== \n==8619== All heap blocks were freed -- no leaks are possible\n==8619== \n==8619== For counts of detected and suppressed errors, rerun with: -v\n==8619== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>2.But the second one is not working</p>\n\n<p><strong>Ex B</strong></p>\n\n<pre><code>[root@localhost Cprgm]# ./a.out \nsh: $'ls%\\211\\376\\177': command not found\n</code></pre>\n\n<p>Why this happens?</p>\n"}, {"tags": ["c", "struct", "memory-leaks", "malloc", "dynamic-memory-allocation"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1495600149, "post_id": 44148954, "comment_id": 75315110, "body": "Valgrind is a good tool for checking whether your program leaks memory or does other unwise things with memory. Using valgrind on your program may reveal several issues."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1495600228, "post_id": 44148954, "comment_id": 75315130, "body": "Since someone else will point it out, I&#39;ll do it: <a href=\"https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc\">do not cast the return value of malloc</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1495600410, "post_id": 44148954, "comment_id": 75315183, "body": "Note: <code>strcpy</code> (or even <code>strncpy</code>) may be clearer in your intent than <code>memcpy</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1495600536, "post_id": 44148954, "comment_id": 75315218, "body": "As for the actual question: you run <code>malloc</code> in the loop, which happens three times. Thus, you have three <code>malloc</code>-ed memory items. You do free them, though I think you&#39;re off by one: <code>loopcount &gt; REMAINING</code> will miss the third lunch item (index <code>[2]</code>), whose name was dynamically assigned with malloc."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495600877, "post_id": 44148954, "comment_id": 75315333, "body": "Setting a pointer to null and then <code>free</code>ing it is clearly not correct"}, {"owner": {"reputation": 13, "user_id": 7764659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161693642ce196295a86c9dec2ac957b?s=128&d=identicon&r=PG&f=1", "display_name": "Donner", "link": "https://stackoverflow.com/users/7764659/donner"}, "edited": false, "score": 0, "creation_date": 1495601699, "post_id": 44148954, "comment_id": 75315592, "body": "@Evert Thank you for the responses! unfortunately memcpy is the mandatory function given in the instructions."}, {"owner": {"reputation": 13, "user_id": 7764659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161693642ce196295a86c9dec2ac957b?s=128&d=identicon&r=PG&f=1", "display_name": "Donner", "link": "https://stackoverflow.com/users/7764659/donner"}, "edited": false, "score": 0, "creation_date": 1495601881, "post_id": 44148954, "comment_id": 75315661, "body": "@Evert When I run the program currently it finishes and has all the answers correct but the email submission corrector for the class says I have the dynamic memory errors. when I do change the code under the DISPLAY comment in the if block to &gt;= REMAINING there is an error message about the point I am trying to deallocate has not been allocated"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1495602069, "post_id": 44148954, "comment_id": 75315738, "body": "See MM&#39;s comment about that error."}, {"owner": {"reputation": 13, "user_id": 7764659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161693642ce196295a86c9dec2ac957b?s=128&d=identicon&r=PG&f=1", "display_name": "Donner", "link": "https://stackoverflow.com/users/7764659/donner"}, "edited": false, "score": 0, "creation_date": 1495604530, "post_id": 44148954, "comment_id": 75316706, "body": "Great! Got rid of the setting to null. Might I ask, what is Valgrind?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7764659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161693642ce196295a86c9dec2ac957b?s=128&d=identicon&r=PG&f=1", "display_name": "Donner", "link": "https://stackoverflow.com/users/7764659/donner"}, "edited": false, "score": 0, "creation_date": 1495602072, "post_id": 44149048, "comment_id": 75315740, "body": "When I run the program currently it finishes and has all the answers correct but the email submission corrector for the class says I have the dynamic memory errors. when I do change the code under the DISPLAY comment in the if block to &gt;= REMAINING there is an error message about the point I am trying to deallocate has not been allocated. Is the error not in the Display area but in my first block with setting loopCount to &#39;2&#39;?"}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1495600451, "creation_date": 1495600451, "answer_id": 44149048, "question_id": 44148954, "link": "https://stackoverflow.com/questions/44148954/struct-and-memory-allocation-with-loop/44149048#44149048", "title": "Struct and memory allocation with loop", "body": "<p>I think your instructor's comment about 3 malloc'ed strings is a pretty strong clue. I notice you have an array of 5 items, with 2 items pre-populated. 5 - 2 is 3.</p>\n\n<p>Also, please be aware that indexes in C start from 0. The 2 items you pre-initialize your array with will have index 0 and index 1. Index 2 will be the first entered data. Comparing that index using > 2 will actually cause you to skip over the index of the first piece of user supplied data.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7764659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161693642ce196295a86c9dec2ac957b?s=128&d=identicon&r=PG&f=1", "display_name": "Donner", "link": "https://stackoverflow.com/users/7764659/donner"}, "edited": false, "score": 0, "creation_date": 1495606443, "post_id": 44149995, "comment_id": 75317633, "body": "Thank you for your detailed explanation. My instructor had made it seem as though I had initialized 3 separate pointers with malloc (rather than being created by the use of malloc). I then became very confused and tore everything to shreds and started over a few times. Thank you very much for the detailed explanation on how things are used by malloc and free. I was not understanding the way malloc would behave after I set my pointer to a member of a struct. Also thanks for the very informative way of how to use NULL correctly, I researched a lot and must have misinterpreted syntax on SO."}, {"owner": {"reputation": 13, "user_id": 7764659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161693642ce196295a86c9dec2ac957b?s=128&d=identicon&r=PG&f=1", "display_name": "Donner", "link": "https://stackoverflow.com/users/7764659/donner"}, "edited": false, "score": 0, "creation_date": 1495607311, "post_id": 44149995, "comment_id": 75318087, "body": "Also your explanation really cleared up how I view the free() function. Really helped me understand the code I was writing in a very straight-forward way."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 0, "last_activity_date": 1495605058, "creation_date": 1495605058, "answer_id": 44149995, "question_id": 44148954, "link": "https://stackoverflow.com/questions/44148954/struct-and-memory-allocation-with-loop/44149995#44149995", "title": "Struct and memory allocation with loop", "body": "<p>Look at the initialization loop:</p>\n\n<pre><code>for (loopCount = REMAINING; loopCount &lt; LUNCH_ITEMS; ++loopCount)\n{\n    // The code inside the loop will be executed for\n    // loopCount being equal to \n    //     REMAINING\n    //     REMAINING + 1\n    //     ....\n    //     LUNCH_ITEMS - 1\n    //\n    // So in your case, you execute this code for\n    // loopCount equal to 2, 3 and 4\n}\n</code></pre>\n\n<p>In other words, the code inside the loop is executed 3 times, i,e, <strong>you call malloc 3 times</strong>.</p>\n\n<p>In the same way, look at the loop where you release the memory.</p>\n\n<pre><code>for (loopCount = 0; loopCount &lt; LUNCH_ITEMS; loopCount++)\n{\n    // you execute this code for\n    // loopCount equal to 0, 1, 2, 3 and 4\n\n    // ....\n\n    if (loopCount &gt; REMAINING)\n    {\n        // Since REMAINING is 2, you execute this code for\n        // loopCount equal 3 and 4\n    }\n}\n</code></pre>\n\n<p>So the code in the body of the <code>if</code> is only executed <strong>2</strong> times. You really want to do it <strong>3</strong> times (i.e. for loopCount equal 2, 3 and 4). So you need to change the code to:</p>\n\n<pre><code>    if (loopCount &gt;= REMAINING)  // Notice the = sign\n    {\n        // Since REMAINING is 2, you execute this code for\n        // loopCount equal 2, 3 and 4\n    }\n</code></pre>\n\n<p>Now regarding <code>malloc</code> and <code>free</code>. When you release memory, i.e. using <code>free</code>, <strong>you must pass exactly the value returned to you by malloc</strong></p>\n\n<p>In the initialization you saved the pointer like this:</p>\n\n<pre><code>namePtr = (char *)malloc(exactMemory * sizeof(char));\n// ...\n(lunch + loopCount)-&gt;name = namePtr;  // Save pointer\n</code></pre>\n\n<p>So it is <code>(lunch + loopCount)-&gt;name</code> that shall be used for <code>free</code>. Like:</p>\n\n<pre><code>    if (loopCount &gt;= REMAINING)  // Notice the = sign\n    {\n        free((lunch + loopCount)-&gt;name);\n\n        // Optional part but always after calling free\n        (lunch + loopCount)-&gt;name = NULL;\n    }\n</code></pre>\n\n<p>BTW: Notice that</p>\n\n<pre><code>(lunch + loopCount)-&gt;name\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>lunch[loopCount].name\n</code></pre>\n\n<p>which many consider easier to read.</p>\n"}], "owner": {"reputation": 13, "user_id": 7764659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161693642ce196295a86c9dec2ac957b?s=128&d=identicon&r=PG&f=1", "display_name": "Donner", "link": "https://stackoverflow.com/users/7764659/donner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 1, "accepted_answer_id": 44149995, "answer_count": 2, "score": 0, "last_activity_date": 1505089588, "creation_date": 1495599772, "last_edit_date": 1505089588, "question_id": 44148954, "link": "https://stackoverflow.com/questions/44148954/struct-and-memory-allocation-with-loop", "title": "Struct and memory allocation with loop", "body": "<p>I have been trying to free() the memory at the end however my instructor stated that I have created 3 malloc'd pointers (with the current settings).</p>\n\n<p>NOTE: I would like as detailed explanation possible regarding the malloc/what's actually going on in memory.</p>\n\n<p>I would appreciate guidance on what I can do to make sure there is no memory leak.</p>\n\n<p>I have written the following.</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n\n    #define LUNCH_ITEMS 5\n    #define REMAINING 2\n    #define CHAR_SIZE 256\n\n    int main(void)\n    {\n        struct Food\n        {\n            char *name; //name attribute of food\n            int weight, calories;\n        } lunch[LUNCH_ITEMS] = {{\"apple\", 4, 100}, {\"salad\", 2, 80},};\n        int loopCount;\n        //INPUT\n        char *namePtr = NULL;\n        for (loopCount = REMAINING; loopCount &lt; LUNCH_ITEMS; ++loopCount)\n        {\n            char tempBuffer[CHAR_SIZE];\n            printf(\"Enter name of item,the weight of item, and the calories in that item: \\n\");\n            // store name string in a tempBuffer. weight and calories directly into lunch structure array address\n            scanf(\"%255s %d %d\", tempBuffer, &amp;lunch[loopCount].weight, &amp;lunch[loopCount].calories);\n            // get the exact size of (memory of) the input string including add one for null char\n            size_t exactMemory = strlen(tempBuffer) + 1;\n            //dynamically allocate the exact amount of memory determined in the previous step\n            namePtr = (char *)malloc(exactMemory * sizeof(char));\n            // check if no memory is allocated for foodPtr\n    if (namePtr == NULL)\n    {\n        fprintf(stderr, \"Not enough memory available***\\n Terminating Program\");\n        exit(1);\n    }\n    //store the pointer to it in the name member of the structure in\n    //the current lunch array element.\n    (lunch + loopCount)-&gt;name = namePtr;\n    // Copy the food name (stored in tempbuffer) into the dynamically-allocated\n    // memory using the memcpy function\n\n            memcpy(namePtr, tempBuffer, exactMemory);\n    //(lunch + loopCount)-&gt;name = namePtr;\n        }\n    //DISPLAY\n        printf(\"Item                        Weight       Cals\\n---------------------------------------------\\n\");\n        for (loopCount = 0; loopCount &lt; LUNCH_ITEMS; loopCount++)\n        {\n            int weight = lunch[loopCount].weight;\n            int cals = lunch[loopCount].calories;\n            printf(\"%-12.20s%22d%11d\\n\", (lunch + loopCount)-&gt;name, weight, cals);\n            if (loopCount &gt; REMAINING)\n            {\n                //(lunch+loopCount)-&gt;name = NULL;\n                namePtr = NULL;\n                free(namePtr);\n                //free((lunch + loopCount)-&gt;name);\n            }\n        }\n        //De-allocate all malloc'd memory\n        return EXIT_SUCCESS;\n    }\n</code></pre>\n\n<p>My output -</p>\n\n<pre><code>Item Weight Cals\n-----------------\napple  4   100\nsalad  2    80\nhello  22   33\nmaybe  44   45\nright 100   200\n</code></pre>\n"}, {"tags": ["c++", "c", "function-pointers", "declaration"], "comments": [{"owner": {"reputation": 1856, "user_id": 3221630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda71e95543a97a0b8c75f79bdc1df62?s=128&d=identicon&r=PG&f=1", "display_name": "arboreal84", "link": "https://stackoverflow.com/users/3221630/arboreal84"}, "edited": false, "score": 0, "creation_date": 1495596558, "post_id": 44148406, "comment_id": 75314121, "body": "where did you define <code>ptr_f</code>?"}, {"owner": {"reputation": 1856, "user_id": 3221630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda71e95543a97a0b8c75f79bdc1df62?s=128&d=identicon&r=PG&f=1", "display_name": "arboreal84", "link": "https://stackoverflow.com/users/3221630/arboreal84"}, "edited": false, "score": 0, "creation_date": 1495596612, "post_id": 44148406, "comment_id": 75314136, "body": "btw I strongly suggest the following tutorial: <a href=\"http://www.newty.de/fpt/fpt.html#defi\" rel=\"nofollow noreferrer\">newty.de/fpt/fpt.html#defi</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495596636, "post_id": 44148406, "comment_id": 75314142, "body": "1. yes, 2. <code>pf</code> is initialized to null pointer (if at global scope), 3.yes  4. using <code>extern</code> on <code>pf</code> would make it a declaration and not a definition. 5. C and C++ are usually compiled, not interpreted"}, {"owner": {"reputation": 1510, "user_id": 3067276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf2400db0d0c0a7ceabe81a19f04c693?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/3067276/fonini"}, "reply_to_user": {"reputation": 1856, "user_id": 3221630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda71e95543a97a0b8c75f79bdc1df62?s=128&d=identicon&r=PG&f=1", "display_name": "arboreal84", "link": "https://stackoverflow.com/users/3221630/arboreal84"}, "edited": false, "score": 0, "creation_date": 1495596776, "post_id": 44148406, "comment_id": 75314170, "body": "@arboreal84 typo, corrected it. And thanks, will look at that tutorial!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 2, "creation_date": 1495596781, "post_id": 44148406, "comment_id": 75314171, "body": "You should prefer <a href=\"http://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">alias declarations</a> to typedefs."}, {"owner": {"reputation": 1510, "user_id": 3067276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf2400db0d0c0a7ceabe81a19f04c693?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/3067276/fonini"}, "edited": false, "score": 0, "creation_date": 1495596856, "post_id": 44148406, "comment_id": 75314180, "body": "@RawN I know! I&#39;m using typedefs because this I&#39;m putting these inside <code>extern &quot;C&quot; {}</code>"}, {"owner": {"reputation": 1510, "user_id": 3067276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf2400db0d0c0a7ceabe81a19f04c693?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/3067276/fonini"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1495596976, "post_id": 44148406, "comment_id": 75314206, "body": "@M.M I meant &quot;interpreted&quot; as in english, not as in computer science hehe, but ok, I changed the wording"}, {"owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 0, "creation_date": 1495597755, "post_id": 44148406, "comment_id": 75314389, "body": "I don&#39;t see real benefit of <code>fcn_t typedef</code>.  I understand that  function pointer can be used as an alternative name to call the function.  But what is the purpose of <code>fcn_t typedef</code>?"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "edited": false, "score": 2, "creation_date": 1495609094, "post_id": 44148406, "comment_id": 75319115, "body": "@Nguaial - If you give the type a descriptive name, then forward declaring those functions with <code>fcn_t</code> documents their purpose right at the top of the source file. So you know that those will be passed as callbacks to library X without having to look for the code that registers them.  Furthermore, you can have <code>std::function&lt;fcn_t&gt;</code> parameters. Again being more descriptive than <code>std::function&lt;Ret(Arg1, Arg2)&gt;</code>. To summarize, it can have great boons for code readability."}], "answers": [{"comments": [{"owner": {"reputation": 1510, "user_id": 3067276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf2400db0d0c0a7ceabe81a19f04c693?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/3067276/fonini"}, "edited": false, "score": 1, "creation_date": 1495601538, "post_id": 44148629, "comment_id": 75315537, "body": "I tried it! I just wanted to know if this was standard C++ or my GCC was just being nice to me :)"}, {"owner": {"reputation": 147719, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1510, "user_id": 3067276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf2400db0d0c0a7ceabe81a19f04c693?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/3067276/fonini"}, "edited": false, "score": 1, "creation_date": 1495609233, "post_id": 44148629, "comment_id": 75319189, "body": "@fonini - It&#39;s standard C++ (and C coincidentally)"}], "tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": true, "score": 5, "last_activity_date": 1495598303, "last_edit_date": 1495598303, "creation_date": 1495597739, "answer_id": 44148629, "question_id": 44148406, "link": "https://stackoverflow.com/questions/44148406/typedef-function-vs-function-pointer/44148629#44148629", "title": "Typedef function vs function pointer", "body": "<p>Yes you are right on all three counts.  The only thing that would change if you marked them <code>extern</code> are the function pointers.  Function declarations are by default <code>extern</code> in C++.</p>\n\n<p>Try and compile the following program </p>\n\n<pre><code>template &lt;typename...&gt;\nstruct WhichType;\n\ntypedef void fcn_t(void);\ntypedef void (*ptr_t)(void);\n\n// constexpr auto one = WhichType&lt;fcn_t&gt;{};\n// constexpr auto two = WhichType&lt;fcn_t*&gt;{};\n// constexpr auto three = WhichType&lt;ptr_t&gt;{};\n\nfcn_t f;\n\nvoid f() {}\n\nint main() {\n    f();\n}\n</code></pre>\n\n<p>Uncommenting the commented lines will likely give you a compiler error that tells you what types the <code>WhichType</code> instance is being instantiated with, and as a result it should show you the exact types of all three things you asked about.  It's a trick I picked up from Scott Meyers' book \"Effective Modern C++\". </p>\n\n<hr>\n\n<p>To test whether the declarations are extern or not, write two simple implementation files, with one containing the definition of the variable</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>template &lt;typename...&gt;\nstruct WhichType;\n\ntypedef void fcn_t(void);\ntypedef void (*ptr_t)(void);\n\nfcn_t f;\n\nint main() {\n    f();\n}\n</code></pre>\n\n<p><strong>definition.cpp</strong></p>\n\n<pre><code>void f() {}\n</code></pre>\n\n<p>and then compile, link and run <code>definition.cpp</code> and <code>main.cpp</code> (via <code>g++ -std=c++14 definition.cpp main.cpp</code> and then <code>./a.out</code>).  If the declaration was not extern then the compile would fail with an undefined symbol error. </p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "is_accepted": false, "score": -2, "last_activity_date": 1495598043, "creation_date": 1495598043, "answer_id": 44148684, "question_id": 44148406, "link": "https://stackoverflow.com/questions/44148406/typedef-function-vs-function-pointer/44148684#44148684", "title": "Typedef function vs function pointer", "body": "<p>Here is a simple illustration of these <code>typedef</code></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\ntypedef void fcn_t(void);\ntypedef void (*ptr_t)(void);\n\nfcn_t f;\nfcn_t *pf;\nptr_t pf2;\n\nvoid\nf(void)\n{\n  printf(\"I am void\\n\");\n}\n\nvoid \nvSayHi(void)\n{\n   printf( \"Hi\\n\" );\n}\n\nint\nmain(void)\n{\n\n   pf2 = vSayHi;\n   pf2();\n\n   pf = vSayHi;\n   pf();\n\n   f();\n\n   return 0;\n}\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>Hi\nHi\nI am void\n</code></pre>\n"}], "owner": {"reputation": 1510, "user_id": 3067276, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/cf2400db0d0c0a7ceabe81a19f04c693?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/3067276/fonini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3960, "favorite_count": 4, "accepted_answer_id": 44148629, "answer_count": 2, "score": 8, "last_activity_date": 1495598303, "creation_date": 1495596167, "last_edit_date": 1495596911, "question_id": 44148406, "link": "https://stackoverflow.com/questions/44148406/typedef-function-vs-function-pointer", "title": "Typedef function vs function pointer", "body": "<p>I'm trying to understand function declaration using typedefs.</p>\n\n<p>What does this code do in C++?</p>\n\n<pre><code>typedef void fcn_t(void);\ntypedef void (*ptr_t)(void);\n\nfcn_t f;\nfcn_t *pf;\nptr_t pf2;\n</code></pre>\n\n<p>In my understanding:</p>\n\n<ul>\n<li><code>fcn_t</code> is the type of a function, and so the line with <code>f</code> is a function <em>declaration</em> (not a definition), and I could later define it like <code>void f(void) { blabla(); bleble(); }</code> just as if I had declared <code>void f(void);</code> instead of <code>fcn_t f;</code>; </li>\n<li><code>fcn_t *</code> is the type of a function pointer, and the line with <code>pf</code> is a pointer variable <em>definition</em>, and <code>pf</code> is default-initialized (assuming the code excerpt is from the global scope);</li>\n<li>There is no difference between <code>fcn_t*</code> and <code>ptr_t</code>, thus everything I said about <code>pf</code> applies to <code>pf2</code>.</li>\n</ul>\n\n<p>Did I get it right? Would any of the three declarations have its meaning changed if I marked them <code>extern</code>? What would change if the code was compiled as C instead of as C++?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "edited": false, "score": 0, "creation_date": 1495596375, "post_id": 44148347, "comment_id": 75314087, "body": "#include &quot;ring.h&quot; ?? while your header file says ring_buffer.h"}], "answers": [{"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 1, "last_activity_date": 1495596700, "creation_date": 1495596700, "answer_id": 44148473, "question_id": 44148347, "link": "https://stackoverflow.com/questions/44148347/error-in-c-program-ring-buffer/44148473#44148473", "title": "error in C program ring buffer", "body": "<pre><code>buff_ptr = (ring_buffer*)malloc(sizeof(ring_buffer));                   // assign address to the uart_ring_buffer of size ring_buffer\nmemset(&amp;buff_ptr, 0x00, sizeof(buff_ptr));                              // set all locations to NULL so that if read before write conditions occur, garbage data is not read\n</code></pre>\n\n<p>that buff_ptr is already a pointer passing reference of buff_ptr to memset doesn't do any good remove the &amp; </p>\n\n<pre><code>memset(&amp;buff_ptr, 0x00, sizeof(buff_ptr));                              // \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 8044954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BrKQ.jpg?s=128&g=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/8044954/vic"}, "is_accepted": true, "score": 1, "last_activity_date": 1495605399, "last_edit_date": 1495605399, "creation_date": 1495596748, "answer_id": 44148480, "question_id": 44148347, "link": "https://stackoverflow.com/questions/44148347/error-in-c-program-ring-buffer/44148480#44148480", "title": "error in C program ring buffer", "body": "<p>I found the issue:</p>\n\n<pre><code>memset(&amp;buff_ptr, 0x00, sizeof(buff_ptr));\n</code></pre>\n\n<p>Has to be:</p>\n\n<pre><code>memset(buff_ptr, 0x00, sizeof(ring_buffer));\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6195689, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rIEdiya3-34/AAAAAAAAAAI/AAAAAAAAAH4/T9rEo0fZ7AE/photo.jpg?sz=128", "display_name": "omkar joshi", "link": "https://stackoverflow.com/users/6195689/omkar-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 44148480, "answer_count": 2, "score": 0, "last_activity_date": 1495605399, "creation_date": 1495595816, "question_id": 44148347, "link": "https://stackoverflow.com/questions/44148347/error-in-c-program-ring-buffer", "title": "error in C program ring buffer", "body": "<p>The code below crashes during runtime. I used a couple of online references to come up with the code, and since it compiles thought the issue was somewhere else. But I went over the rest of it and that seems to work fine. </p>\n\n<p>ring_buffer.h</p>\n\n<pre><code>#ifndef RING_BUFFER_H    /* Guard against multiple inclusion */\n#define RING_BUFFER_H\n\n#include &lt;stddef.h&gt;                     // Defines NULL\n#include &lt;stdbool.h&gt;                    // Defines true\n#include &lt;stdlib.h&gt;                     // Defines EXIT_FAILURE\n#include &lt;stdint.h&gt;                     // Defines uint32_t\n#include &lt;string.h&gt;\n\n\ntypedef struct{\n    uint8_t * buffer;\n    uint8_t head;\n    uint8_t tail;\n    uint8_t max_length;\n}ring_buffer;\n\nvoid buffer_init(ring_buffer *buff_ptr);\n\nbool buffer_full(ring_buffer *buff_ptr);\n\nbool buffer_empty(ring_buffer *buff_ptr);\n\nbool buffer_write(ring_buffer *buffer, uint8_t data);\n\nbool buffer_read(ring_buffer *buffer, uint8_t * data);\n\n#endif /* _EXAMPLE_FILE_NAME_H */\n</code></pre>\n\n<p>ring_buffer.c</p>\n\n<pre><code>    #include \"ring.h\"\n\n//ring_buffer UART_buffer; this goes in UART.h\n\n#define UART_RING_BUFFER_SIZE 16\n\nvoid buffer_init(ring_buffer *buff_ptr)\n{                                                                           // type casting cause malloc returns void pointer\n    buff_ptr = (ring_buffer*)malloc(sizeof(ring_buffer));                   // assign address to the uart_ring_buffer of size ring_buffer\n    memset(&amp;buff_ptr, 0x00, sizeof(buff_ptr));                              // set all locations to NULL so that if read before write conditions occur, garbage data is not read\n\n    buff_ptr-&gt;buffer = (uint8_t*)malloc(UART_RING_BUFFER_SIZE * sizeof(uint8_t));   // data buffer assigned of size max_length\n    memset(&amp;buff_ptr-&gt;buffer, 0x00, sizeof(uint8_t));\n\n    buff_ptr-&gt; head = 0;\n    buff_ptr-&gt; tail = 0;\n    buff_ptr-&gt; max_length = UART_RING_BUFFER_SIZE;\n}\n\n\nbool buffer_write(ring_buffer *buff_ptr, uint8_t data)\n{\n    int next = buff_ptr-&gt;head + 1; // increment head to point to location in which data will be written to\n    if(next &gt;= buff_ptr-&gt;max_length)\n        next = 0;\n    if(next == buff_ptr-&gt;tail) //check for buffer full condition\n        return -1;              // indicate write failed, buffer full\n\n    buff_ptr-&gt;buffer[buff_ptr-&gt;head] = data;\n    buff_ptr-&gt;head = next; // update head to point to current location\n\n    return 0;                   // indicates buffer write success\n}\n\nbool buffer_read(ring_buffer *buff_ptr, uint8_t *data)\n{\n    int next = buff_ptr-&gt;tail+1;\n\n    if(next &gt;= buff_ptr-&gt;max_length)\n        next = 0;\n\n    if(buff_ptr-&gt;head == buff_ptr-&gt;tail) // check for buffer empty\n        return -1; // indicates read failed, buffer empty\n\n    *data = buff_ptr-&gt;buffer[buff_ptr-&gt;tail];\n    buff_ptr-&gt;tail = next;\n    return 0;\n}\n\nbool buffer_full(ring_buffer *buff_ptr) //NOT PROPER LOGIC\n{\n    int next = buff_ptr-&gt;head + 1; // increment head to point to location in which data will be written to\n    if(next &gt;= buff_ptr-&gt;max_length)\n        next = 0;\n    if(next == buff_ptr-&gt;tail) //check for buffer full condition\n        return 1;\n    else\n        return 0;\n}\n\nbool buffer_empty(ring_buffer *buff_ptr)\n{\n    if(buff_ptr-&gt;head == buff_ptr-&gt;tail) // check for buffer empty\n        return 1; // indicates read failed, buffer empty\n    return 0;\n}\n</code></pre>\n\n<p>main.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"ring.h\"\n\n\nring_buffer UART_FIFO;\nint main()\n{\n\n    char x;\n    buffer_init(&amp;UART_FIFO);\n\n\n\n    printf(\"data in goes here: \");\n    while (1)\n        {\n            scanf(\"%c\",&amp;x);\n            buffer_write(&amp;UART_FIFO, x);\n        }\n}\n</code></pre>\n\n<p>let me know if there are any obvious mistakes, kinda new to using pointers, have done verilog and FPGA related stuff previously.</p>\n"}, {"tags": ["c", "for-loop"], "comments": [{"owner": {"reputation": 1725, "user_id": 6524169, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XpWT.png?s=128&g=1", "display_name": "Aditya", "link": "https://stackoverflow.com/users/6524169/aditya"}, "edited": false, "score": 0, "creation_date": 1495594532, "post_id": 44148165, "comment_id": 75313687, "body": "It is also a rectangle of side side-2"}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1495594570, "post_id": 44148165, "comment_id": 75313697, "body": "Have a think about the 4 boundary conditions for a minute. They are (0) x = 0 (1) x = maxX (2) y = 0 and (3) y = maxY. If none of these conditions are fulfilled, then you have a point somewhere in the inside of the square. ;)"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495597417, "post_id": 44148165, "comment_id": 75314316, "body": "You don&#39;t need the special case for <code>width == 1 &amp;&amp; breadth == 1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 5513731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cAiqh.jpg?s=128&g=1", "display_name": "nic3ts", "link": "https://stackoverflow.com/users/5513731/nic3ts"}, "edited": false, "score": 0, "creation_date": 1495595500, "post_id": 44148238, "comment_id": 75313882, "body": "If my answer helped you, you can upvote it and accept it as best answer to help me back :)"}], "tags": [], "owner": {"reputation": 327, "user_id": 5513731, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cAiqh.jpg?s=128&g=1", "display_name": "nic3ts", "link": "https://stackoverflow.com/users/5513731/nic3ts"}, "is_accepted": false, "score": 1, "last_activity_date": 1495596990, "last_edit_date": 1495596990, "creation_date": 1495594941, "answer_id": 44148238, "question_id": 44148165, "link": "https://stackoverflow.com/questions/44148165/making-rectangle-based-on-input/44148238#44148238", "title": "Making rectangle based on input", "body": "<p>You should use counters. For example, one counter should be refering to which line you're printing and another one the column you're printing on. </p>\n\n<p>If the line counter is 0, print all the line as '#' cause it's going to be the upper boundary line \n(this creates -> #######)</p>\n\n<p>Else If the line counter is same as the height of the shape, then it's the finishing border line\n(#######)</p>\n\n<p>Else if it's >0, print the first character as '#', then print '.' until another counter reaches the width of the shape -1 (for example in 7 7 that would be 5 (since 0 also counts)) and then another '#' \n(#.....#)</p>\n\n<p>I think this is enough help for you to get it done by yourself, should you require further assistance tho, just ask.</p>\n"}, {"tags": [], "owner": {"reputation": 484, "user_id": 5834521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QBMYVTwXyGs/AAAAAAAAAAI/AAAAAAAAA8M/y7HIjlZQRVA/photo.jpg?sz=128", "display_name": "Vishwajeet Vishu", "link": "https://stackoverflow.com/users/5834521/vishwajeet-vishu"}, "is_accepted": true, "score": 2, "last_activity_date": 1495596480, "creation_date": 1495596480, "answer_id": 44148447, "question_id": 44148165, "link": "https://stackoverflow.com/questions/44148165/making-rectangle-based-on-input/44148447#44148447", "title": "Making rectangle based on input", "body": "<p>You want to replace non-boundary area with \".\". To achieve that you need a condition that satisfies your boundary.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main()\n{\nint width;\nint breadth;\nscanf(\"%d\", &amp;width);\nscanf(\"%d\", &amp;breadth);\nif (width == 1 &amp;&amp; breadth == 1)\n{printf (\"#\\n\");}\nelse{\nfor(int i = 0; i&lt;breadth; i++){\nfor(int j = 0; j&lt;width;j++)\n{\nif(i==0||j==0)    \n   printf(\"#\");\nelse if(i==(breadth-1)||j==(width-1))\n   printf(\"#\"); \nelse\n   printf(\".\");\n}\nprintf(\"\\n\");}\n}\nreturn 0;\n}\n</code></pre>\n\n<p>Hope this works. Let me know if it does not or any problem is there. </p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 6572460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3c0888e8617ae4a4c18fc6b3cba6d517?s=128&d=identicon&r=PG&f=1", "display_name": "Nguai al", "link": "https://stackoverflow.com/users/6572460/nguai-al"}, "is_accepted": false, "score": 1, "last_activity_date": 1495596587, "creation_date": 1495596587, "answer_id": 44148458, "question_id": 44148165, "link": "https://stackoverflow.com/questions/44148165/making-rectangle-based-on-input/44148458#44148458", "title": "Making rectangle based on input", "body": "<p>Here is the working code.\nYou were almost there.  You need the condition statement to check the boundary..\nPlease see the line that checks the boundary</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int width;\n    int breadth;\n\n    scanf(\"%d %d\", &amp;width, &amp;breadth);\n\n    if (width == 1 &amp;&amp; breadth == 1)\n       printf (\"#\\n\");\n    else\n    {\n       for(int i = 0; i&lt;breadth; i++)\n       {\n          for(int j = 0; j&lt;width;j++)\n              //Check for boundary.\n              if( j == 0 || j == width - 1 || i == 0 || i == breadth - 1 )\n                 printf(\"#\");\n              else \n                 printf(\".\");\n          printf(\"\\n\");\n       }\n    }\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8204, "user_id": 2858773, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/5iGps.jpg?s=128&g=1", "display_name": "Ajay Brahmakshatriya", "link": "https://stackoverflow.com/users/2858773/ajay-brahmakshatriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1495685544, "last_edit_date": 1495685544, "creation_date": 1495598349, "answer_id": 44148742, "question_id": 44148165, "link": "https://stackoverflow.com/questions/44148165/making-rectangle-based-on-input/44148742#44148742", "title": "Making rectangle based on input", "body": "<p>Using conditions as suggested by other answers is the ideal way but if that is unclear, you can break down the printing into smaller loops as</p>\n\n<pre><code>for (i=0; i&lt;width; i++)          // prints the first line\n    printf(\"#\");                 //\nprintf(\"\\n\");                    // \n\nfor (j=0; j&lt;breadth-2; j++){     // prints middle breadth-2 lines\n    printf(\"#\");                 // prints the starting hash in middle lines\n    for (i=0; i&lt;width-2; i++)    // prints the '.'s  \n        printf(\".\");\n    printf(\"#\\n\");               // prints the last hash in middle lines \n}\n\nfor (i=0; i&lt;width; i++)          // prints the last line  \n    printf(\"#\");                 // \nprintf(\"\\n\");                    // \n</code></pre>\n\n<p>Although not very efficient, the logic is very easy to understand.\nLet me know if further explanation is required.</p>\n\n<p><strong>Edit</strong>: Actually after writing this answer I later realized that this code will infact be faster than the ones with branches. Since we have split the iteration domains ourselves, there are no branches. This reduces any chance of branch prediction failing, which would certainly happen in the solution with if conditions since the condition is true for small cases. Ofcourse it wouldn't matter for small iterations like 6x6, but just putting the thought out there.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 1416443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46751bd61ec8f494b53ecacd0f611635?s=128&d=identicon&r=PG", "display_name": "Andyliu", "link": "https://stackoverflow.com/users/1416443/andyliu"}, "is_accepted": false, "score": 1, "last_activity_date": 1495604732, "creation_date": 1495604732, "answer_id": 44149918, "question_id": 44148165, "link": "https://stackoverflow.com/questions/44148165/making-rectangle-based-on-input/44149918#44149918", "title": "Making rectangle based on input", "body": "<p>I have check it by gcc ,it works.Please see the notes in code\uff1a</p>\n\n<pre><code>   int main()\n {\n   int width;\n   int breadth;\n\n   scanf(\"%d\",&amp;width);\n   scanf(\"%d\",&amp;breadth);\n   for(int i = 0; i &lt; width; i++){\n    for(int j = 0; j &lt; breadth; j++ ){\n       //first line and last line \n        if((i == 0)||i == (width - 1)){\n        printf(\"#\");\n       //first column and last column\n    }else if((j == 0)||(j == (breadth -1))){\n        printf(\"#\");\n       //other case \n    }else{\n        printf(\".\");\n    }   \n    }\n    printf(\"\\n\");\n }\n return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 7803320, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cb6ec3317e3bc44cc28fbdf2a86d5c5f?s=128&d=identicon&r=PG&f=1", "display_name": "stanley cho", "link": "https://stackoverflow.com/users/7803320/stanley-cho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 44148447, "answer_count": 5, "score": 2, "last_activity_date": 1495685544, "creation_date": 1495594409, "question_id": 44148165, "link": "https://stackoverflow.com/questions/44148165/making-rectangle-based-on-input", "title": "Making rectangle based on input", "body": "<p>input</p>\n\n<pre><code>6 6 4\n</code></pre>\n\n<p>output</p>\n\n<pre><code>######\n#....#\n#....#\n#....#\n#....#\n######\n</code></pre>\n\n<p>input</p>\n\n<pre><code>7 7 4\n</code></pre>\n\n<p>output</p>\n\n<pre><code>#######\n#.....#\n#.....#\n#.....#\n#.....#\n#.....#\n#######\n</code></pre>\n\n<p>This is the code I have so far.</p>\n\n<pre><code> #include &lt;stdio.h&gt;\n\nint main()\n{\nint width;\nint breadth;\n\nscanf(\"%d\", &amp;width);\nscanf(\"%d\", &amp;breadth);\nif (width == 1 &amp;&amp; breadth == 1)\n{printf (\"#\\n\");}\nelse{\nfor(int i = 0; i&lt;breadth; i++){\n    for(int j = 0; j&lt;width;j++)\n    {\n        {printf(\"#\");}\n\n    }\n    printf(\"\\n\");}\n}\n\nreturn 0;}\n</code></pre>\n\n<p>Does anyone know how to replace the non boundary area with \".\"?</p>\n\n<p>ps:there is no need to worry about the third input, it does not affect the shape of rectangles since its just going to be used next task. </p>\n\n<p>I am guessing that I could perhaps change my for loops but I ran out of ideas at this point.</p>\n\n<p>It would be greatly appreciated if someone could help me return identical output from above.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c", "pointers", "gcc", "struct"], "answers": [{"comments": [{"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1495598582, "post_id": 44148391, "comment_id": 75314614, "body": "+1 for giving not so trivial example on how it can fail and also showing the spec. I was looking in the wrong place."}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495639349, "post_id": 44148391, "comment_id": 75341621, "body": "@M.M Is it though? Doesn&#39;t the given citation show that it has to work this way according to the standard?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "edited": false, "score": 0, "creation_date": 1495662099, "post_id": 44148391, "comment_id": 75353848, "body": "@sepp2k No, the quotation only talks about struct layout"}, {"owner": {"reputation": 339851, "user_id": 149392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a561ec0875fcbbe3066ea8fe288ec77?s=128&d=identicon&r=PG", "display_name": "sepp2k", "link": "https://stackoverflow.com/users/149392/sepp2k"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495662641, "post_id": 44148391, "comment_id": 75354050, "body": "@M.M It says the address of the struct will always equal the address of the first member, right? So doesn&#39;t it follow from that, that a valid pointer to a struct will also be a valid pointer to the first memberwhen cast to the member&#39;s type?"}, {"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1506995914, "post_id": 44148391, "comment_id": 80026842, "body": "sepp2k, I reached the conclusion that sepp2k is wrong. This code is correct. Searching for &quot;Objected Oriented C pdf&quot; shows results with similar techniques."}], "tags": [], "owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "is_accepted": true, "score": 1, "last_activity_date": 1495596098, "creation_date": 1495596098, "answer_id": 44148391, "question_id": 44148135, "link": "https://stackoverflow.com/questions/44148135/gcc-casting-pointer-to-incompatible-type/44148391#44148391", "title": "GCC Casting Pointer to Incompatible Type", "body": "<p>C11 standard 6.7.2.1 Structure and union specifiers:</p>\n\n<blockquote>\n  <p>Within  a  structure  object,  the  non-bit-field  members  and  the \n  units  in  which  bit-fields reside have addresses that increase in\n  the order in which they are declared.  A pointer to a structure \n  object,  suitably  converted,  points  to  its  initial  member  (or \n  if  that  member  is  a bit-field,  then  to  the  unit  in  which  it\n  resides),  and  vice  versa.   There  may  be  unnamed padding within\n  a structure object, but not at its beginning.</p>\n</blockquote>\n\n<p>So it should work as long, as you access only first structure member. However, I believe you understand, that this is pretty bad idea. Should you port this code to C++ and make some <code>Obj1</code> member virtual, this will immediately fail. </p>\n"}], "owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 44148391, "answer_count": 1, "score": 1, "last_activity_date": 1495639359, "creation_date": 1495594217, "last_edit_date": 1495639359, "question_id": 44148135, "link": "https://stackoverflow.com/questions/44148135/gcc-casting-pointer-to-incompatible-type", "title": "GCC Casting Pointer to Incompatible Type", "body": "<p>I have a working C code when compiled using GCC, but I am trying to find out if the code works because of pure luck or because GCC handles this code as I expect by design.</p>\n\n<p><strong>NOTE</strong>\n<strong>I am not trying to \"fix\" it. I am trying to understand the compiler</strong></p>\n\n<p>Here is what I have:</p>\n\n<p><strong>iexample.h</strong></p>\n\n<pre><code>#ifndef IEXAMPLE_H_\n#define IEXAMPLE_H_\n\n\n/* The interface */\nstruct MyIf\n{\n  int (* init)(struct MyIf* obj);\n  int (* push)(struct MyIf* obj, int x);\n  void (* sort)(struct MyIf* obj);\n\n};\n\n\n/* The object, can be in different header */\nstruct Obj1\n{\n  struct MyIf myinterface;\n  int val1;\n  int val2;\n\n};\n\nstruct Obj1* newObj1();\n\n#endif\n</code></pre>\n\n<p><strong>iexample.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include  &lt;stdlib.h&gt;\n\n#include \"iexample.h\"\n\n/* Functions here are \"equivalent\" to methods on the Obj1 struct */\n\nint Obj1_init(struct Obj1* obj)\n{\n  printf(\"Obj1_init()\\n\");\n  return 0;\n}\n\nint Obj1_push(struct Obj1* obj, int x)\n{\n  printf(\"Obj1_push()\\n\");\n  return 0;\n}\n\nvoid Obj1_sort(struct Obj1* obj)\n{\n  printf(\"Obj1_sort()\\n\");\n}\n\nstruct Obj1* newObj1()\n{\n  struct Obj1* obj = malloc(sizeof(struct Obj1));\n  obj-&gt;myinterface.init = Obj1_init;\n  obj-&gt;myinterface.push = Obj1_push;\n  obj-&gt;myinterface.sort = Obj1_sort;\n  return obj;\n\n}\n</code></pre>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>#include \"iexample.h\"\n\nint main(int argc, char* argv[])\n{\n\n  struct MyIf* myIf = (struct MyIf*) newObj1();\n  myIf-&gt;init(myIf);\n  myIf-&gt;push(myIf, 3);\n  myIf-&gt;sort(myIf);\n  /* ... free, return ... */\n}\n</code></pre>\n\n<p>When I compile, <strong>as I expect</strong>, I get for assigning the pointers in newObj1(), </p>\n\n<pre><code>warning: assignment from incompatible pointer type \n</code></pre>\n\n<p>The code works as long as I have the \"struct MyIf myinterface\" to be the first member of the struct, which is by design (I like to shoot myself in the foot)</p>\n\n<p>Now, although I am assigning incompatible pointer types, and the C spec says behavior is undefined, does GCC or other compilers make any design claim on how this case is handled? I can almost swear that this OUGHT TO WORK due to how struct memory is laid out, but I cannot find the proof.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 3, "creation_date": 1495594063, "post_id": 44148079, "comment_id": 75313561, "body": "<code>lower</code> and <code>upper</code> never change value inside the while loop, so the condition is always true, and the loop never terminates. At some point, the values for celsius or fahr probably becomes too large, causing the crash. (Or rather, I interpret &quot;crashes the terminal&quot; as &quot;makes the terminal unresponsive&quot;. The program doesn&#39;t crash, but there is so much output you can&#39;t interact normally with the terminal anymore.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1495600229, "post_id": 44148079, "comment_id": 75315131, "body": "both programs use incorrect calculation <code>(9&#47;5)</code>"}, {"owner": {"reputation": 593, "user_id": 8055011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m9gmF.jpg?s=128&g=1", "display_name": "Harshit Jindal", "link": "https://stackoverflow.com/users/8055011/harshit-jindal"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1495633376, "post_id": 44148079, "comment_id": 75336642, "body": "@M.M I corrected that mistake. It&#39;s now (9.0/5.0). Thanks for pointing it out."}], "answers": [{"comments": [{"owner": {"reputation": 593, "user_id": 8055011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m9gmF.jpg?s=128&g=1", "display_name": "Harshit Jindal", "link": "https://stackoverflow.com/users/8055011/harshit-jindal"}, "edited": false, "score": 0, "creation_date": 1495594656, "post_id": 44148138, "comment_id": 75313711, "body": "I wanted to ask another thing. In the first code (which was working), the terminal gave output values such as 1.000, 2.000, 3.000, and no values in between of 2 natural numbers such as 2.485. Basically it is giving float values but still something is wrong. What could it be?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 593, "user_id": 8055011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m9gmF.jpg?s=128&g=1", "display_name": "Harshit Jindal", "link": "https://stackoverflow.com/users/8055011/harshit-jindal"}, "edited": false, "score": 1, "creation_date": 1495597104, "post_id": 44148138, "comment_id": 75314235, "body": "@HarshitJindal: Use floating point arithmetic \u2014  <code>celsius * (9.0&#47;5.0) + 32.0</code> or similar.  (Personally, I prefer <code>fahrenheit = (celsius + 40.0) * (9.0&#47;5.0) - 40.0;</code> because the reverse is <code>celsius = (fahrenheit + 40) * (5.0&#47;9.0) - 40.0;</code>, but that&#39;s a whole separate discussion.)  What&#39;s crucial is that one of <code>9</code> and <code>5</code> is treated as floating point; then the rest will follow suit."}], "tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": true, "score": 3, "last_activity_date": 1495594233, "creation_date": 1495594233, "answer_id": 44148138, "question_id": 44148079, "link": "https://stackoverflow.com/questions/44148079/issue-using-multiple-assignments-in-a-single-line-in-c/44148138#44148138", "title": "Issue using multiple assignments in a single line in C", "body": "<p>In the second example, you set <code>lower</code> to 0 and never change it. Therefore, the loop that compares <code>lower &lt;= upper</code> will run forever.</p>\n"}], "owner": {"reputation": 593, "user_id": 8055011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/m9gmF.jpg?s=128&g=1", "display_name": "Harshit Jindal", "link": "https://stackoverflow.com/users/8055011/harshit-jindal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 44148138, "answer_count": 1, "score": 0, "last_activity_date": 1495635153, "creation_date": 1495593888, "last_edit_date": 1495635153, "question_id": 44148079, "link": "https://stackoverflow.com/questions/44148079/issue-using-multiple-assignments-in-a-single-line-in-c", "title": "Issue using multiple assignments in a single line in C", "body": "<p>I need help with these 2 pieces of code. Both of them are identical except for one change.\n<br>\nI used <code>while (celsius &lt;= upper)</code> in the first case and <code>while (lower &lt;= upper)</code> in the second case.\n<br>\nCase 1 works fine but Case 2 isn't working as expected, ie: the loop never ends.\n<br></p>\n\n<h3>Case 1</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//program to print celsius to fahrenheit table\n\nint main (void)\n{\n    float celsius, fahr;\n    int lower, upper, step;\n\n    celsius = lower = 0;\n    upper = 100;\n\n    while (celsius &lt;= upper)\n    {\n        fahr = celsius * (9.0/5.0) + 32.0;\n        printf(\"%5.3f\\t=\\t%5.3f\\n\", celsius, fahr);\n        celsius = celsius + 1;\n    }\n}\n</code></pre>\n\n<p>This worked fine. </p>\n\n<h3>Case 2</h3>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n//program to print celsius to fahrenheit table\n\nint main (void)\n{\n    float celsius, fahr;\n    int lower, upper, step;\n\n    celsius = lower = 0;\n    upper = 100;\n\n    while (lower &lt;= upper)\n    {\n        fahr = celsius * (9.0/5.0) + 32.0;\n        printf(\"%5.3f\\t=\\t%5.3f\\n\", celsius, fahr);\n        celsius = celsius + 1;\n    }\n}\n</code></pre>\n\n<p>Didn't work.</p>\n\n<p><br>\n<code>celsius = lower = 0;</code>\n<br>\nIn the 2 cases, 'celsius' and 'lower' are both assigned the value 0, and both are also assigned to be equal to each other, so why don't the programs run the same when 'celsius' and 'lower' are interchanged?</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["c", "list", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1495595681, "post_id": 44148055, "comment_id": 75313932, "body": "` stdn_aux-&gt;next` can be null"}, {"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1495604362, "post_id": 44148055, "comment_id": 75316627, "body": "Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  An MCVE should include a variety of sample input (illustrating all aspects) and desired output.   If you are looking for help with debugging code see <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5858, "user_id": 1530549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9acb42e69fdeeaf6474022411fe61725?s=128&d=identicon&r=PG", "display_name": "Scooter", "link": "https://stackoverflow.com/users/1530549/scooter"}, "is_accepted": true, "score": 1, "last_activity_date": 1495611948, "last_edit_date": 1495611948, "creation_date": 1495611632, "answer_id": 44151981, "question_id": 44148055, "link": "https://stackoverflow.com/questions/44148055/c-passing-sub-linked-list-to-functions/44151981#44151981", "title": "C - passing sub linked list to functions", "body": "<p>When you delete a student node that is at the head of the Student List, you need to re-assign to root_aux->stdn_list as you are deleting the node it currently points to. That must be why it appers you are not deleting a student node.</p>\n\n<pre><code>root_aux-&gt;stdn_list = stdn_aux-&gt;next; \n</code></pre>\n\n<p>There are other issues with regard to processing that should be wrapped in if statements to prevent the program from core dumping:</p>\n\n<p>Before you begin processing the student list, you need to first check that there is a student list. That is, check that the class variable pointing to the student list - root_aux->stdn_list - is not NULL.</p>\n\n<p>Before doing the following statements, make sure that stdn_aux->next is not NULL, that is, there is stuff beyond the root node you are deleting.</p>\n\n<pre><code>stdn_aux = stdn_aux-&gt;next;\nstdn_aux-&gt;prev = NULL;\n</code></pre>\n\n<p>Before making this assignment </p>\n\n<pre><code>stdn_aux-&gt;next-&gt;prev = stdn_aux-&gt;prev;\n</code></pre>\n\n<p>check that stdn_aux->next is not null because this is the last node in the student list.</p>\n"}], "owner": {"reputation": 316, "user_id": 5431704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207650762528057/picture?type=large", "display_name": "Zero23ku", "link": "https://stackoverflow.com/users/5431704/zero23ku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 44151981, "answer_count": 1, "score": 0, "last_activity_date": 1495611948, "creation_date": 1495593686, "question_id": 44148055, "link": "https://stackoverflow.com/questions/44148055/c-passing-sub-linked-list-to-functions", "title": "C - passing sub linked list to functions", "body": "<p>I'm working in this simple program with list but I'm having a bad time passing pointers.</p>\n\n<p>Let's say I have a struct for students</p>\n\n<pre><code>typedef struct student{\n    char lastname[50];\n    int age;\n    int std_id;\n    struct student * next;\n    struct student * prev;\n}stdn;\n</code></pre>\n\n<p>and I have another struct for classes</p>\n\n<pre><code>typedef struct class{\n    char class_id[3];\n    struct class * next;\n    struct class * prev;\n    struct student * stdn_list;\n}clss;\n</code></pre>\n\n<p>so basically I have this list with classes, and each class contain a sublist with students.</p>\n\n<p>so, here is the function creating the class list, and it works!</p>\n\n<pre><code>void create_class_list(clss ** root, clss * node){\n    clss * root_aux;\n    if(!(*root)){\n        (*root) = node;\n    }\n    else{\n        root_aux = (*root);\n        while(root_aux-&gt;next != NULL){\n            root_aux = root_aux-&gt;next;\n        }\n        node-&gt;prev = root_aux;\n        root_aux-&gt;next = node;\n    }\n}\n</code></pre>\n\n<p>my problem is when I need to work with the sublist in each node of the class list.</p>\n\n<p>Here is the function in charge of creating the sublist, and it works</p>\n\n<pre><code>    void assign_student(clss ** root, stdn * node, char * class_id){\n        clss * root_aux;\n        stdn * stdn_aux;\n        root_aux = (*root);\n\n        while(root_aux != NULL){\n            if(strcmp(root_aux-&gt;class_id,class_id) == 0) \n                break;\n            root_aux = root_aux-&gt;next;\n        }\n        if(root_aux != NULL){\n            if(root_aux-&gt;stdn_list == NULL){\n                root_aux-&gt;stdn_list = node;\n            }\n            else{\n                stdn_aux = root_aux-&gt;stdn_list;\n                while(stdn_aux-&gt;next != NULL){\n                    stdn_aux = stdn_aux-&gt;next;\n                }\n                node-&gt;prev = stdn_aux;\n                stdn_aux-&gt;next = node;\n            }\n        }\n    }\n</code></pre>\n\n<p>Basically this function looks for the specific class and add the student to that class.</p>\n\n<p>My problem is when I want to delete a student, or sort the list using an algorithm like bubblesort, here's an example of a function to delete a student.</p>\n\n<pre><code>void delete_student(clss ** root, int stdn_id){\n    clss * root_aux;\n    stdn * stdn_aux;\n    stdn * temp;\n    int deleted=0;\n\n    root_aux = (*root);\n    while(root_aux != NULL){\n        stdn_aux = root_aux-&gt;stdn_list;\n        //try with root first//\n        if(stdn_aux-&gt;std_id == stdn_id){\n            temp = stdn_aux;\n            stdn_aux = stdn_aux-&gt;next;\n            stdn_aux-&gt;prev = NULL;\n            free(temp);\n            deleted = 1;\n        }\n        //if the student isn't the root\n        if(deleted == 0){\n            stdn_aux = stdn_aux-&gt;next;\n            while(stdn_aux != NULL){\n                if(stdn_aux-&gt;std_id == stdn_id){\n                    temp = stdn_aux;\n                    //link the prev element with the next element\n                    stdn_aux-&gt;prev-&gt;next = stdn_aux-&gt;next;\n                    //link the next element with the prev element\n                    stdn_aux-&gt;next-&gt;prev = stdn_aux-&gt;prev;\n                    stdn_aux = stdn_aux-&gt;next;\n                    free(temp);\n                    deleted = 1;\n                    break;\n                }\n                stdn_aux = stdn_aux-&gt;next;\n            }\n        } \n        if(deleted == 1){\n            break;\n        }\n        root_aux = root_aux-&gt;next;\n    }\n}\n</code></pre>\n\n<p>The function just looks like don't delete the element from the list and I'm not sure if is something with how I pass the pointer to the function, or how I create the list in first place.</p>\n"}]