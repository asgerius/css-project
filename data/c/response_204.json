[{"tags": ["linux", "c"], "comments": [{"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1544054440, "post_id": 53646103, "comment_id": 94150702, "body": "OT: regarding: <code>int main(int argc, char *argv[]){</code>  when the parameters to <code>main()</code> are not being used, then use the signature: <code>int main( void )</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1544054618, "post_id": 53646103, "comment_id": 94150703, "body": "OT: for ease of readability and understanding: 1)  consistently indent the code.  Indent after every opening brace &#39;{&#39;.  Unindent before every closing brace &#39;}&#39;.  Suggest each indent level be 4 spaces."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1544055439, "post_id": 53646103, "comment_id": 94150704, "body": "OT: the posted code contains some &#39;magic&#39; number.  I.E. 3.  &#39;magic&#39; numbers make the code more difficult to understand, debug, etc.  Suggest using an <code>enum</code> statement or a <code>#define</code> statement to give that &#39;magic&#39; number a meaningful name, then use that meanindful name throughout the code."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1544055594, "post_id": 53646103, "comment_id": 94150705, "body": "regarding: <code>if(pid &lt; 0){         perror(&quot;Error&quot;);         exit(1);</code>  This will have the parent exiting while one or more children processes are still running.  (a handy  to create zombie processes.)  Suggest inserting a <code>wait()</code> or <code>waitpid()</code> for each child process before calling <code>exit()</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1544055853, "post_id": 53646103, "comment_id": 94150706, "body": "Regarding: <code>for(int num_process = 0; num_process &lt; 3; num_process++) \t\t\t{ \t\t\t\twait(NULL); \t\t\t}</code>  This loop is inside the loop that is creating the child processes.  It should be after all the children are created"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1544055988, "post_id": 53646103, "comment_id": 94150707, "body": "the posted code is missing the following header include statement for the function: <code>wait()</code>  <code>#include &lt;sys&#47;wait.h&gt;</code>"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1544056109, "post_id": 53646103, "comment_id": 94150708, "body": "there is no need to have the header file: <code>stdio.h</code> included twice"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 7802118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7f749e887418ae2ea8929eb536af25?s=128&d=identicon&r=PG&f=1", "display_name": "Chariot", "link": "https://stackoverflow.com/users/7802118/chariot"}, "edited": false, "score": 0, "creation_date": 1544055136, "post_id": 53646104, "comment_id": 94150709, "body": "So, what&#39;s the purpose of close pipes?"}, {"owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "reply_to_user": {"reputation": 315, "user_id": 7802118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7f749e887418ae2ea8929eb536af25?s=128&d=identicon&r=PG&f=1", "display_name": "Chariot", "link": "https://stackoverflow.com/users/7802118/chariot"}, "edited": false, "score": 1, "creation_date": 1544055376, "post_id": 53646104, "comment_id": 94150710, "body": "You should only do the <code>close(fd[1])</code> <i>in the child</i>."}], "tags": [], "owner": {"reputation": 2385, "user_id": 10306503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31c5d6c9b08dd045f4876591d703bda6?s=128&d=identicon&r=PG", "display_name": "mosvy", "link": "https://stackoverflow.com/users/10306503/mosvy"}, "is_accepted": true, "score": 1, "last_activity_date": 1544054551, "creation_date": 1544054551, "answer_id": 53646104, "question_id": 53646103, "link": "https://stackoverflow.com/questions/53646103/pipe-with-multiple-child-process/53646104#53646104", "title": "Pipe with multiple child process", "body": "<blockquote>\n<pre><code>read(fd[0], buff, sizeof(buff)); //read from pipe\nprintf(\"Read child = %s\\n\", buff);\n</code></pre>\n</blockquote>\n\n<p>If you did check the return value of <code>read</code> (as you always should) you would've seen that the 2nd and 3rd time it returns -1 and sets <code>errno</code> to <code>EBADF</code>. That's because you've already closed the read end of the pipe in the first iteration of the loop, in the \"parent\" part, here:</p>\n\n<blockquote>\n<pre><code>   printf(\"Im parent %i\\n\",getpid());\n   close(fd[0]);\n</code></pre>\n</blockquote>\n\n<p>The same thing with the <code>write</code> following it:</p>\n\n<blockquote>\n<pre><code>   write(fd[1], str,strlen(str)+1);\n   printf(\"Parent send %s\\n\", str);\n   close(fd[1]);\n</code></pre>\n</blockquote>\n\n<p><code>fd[1]</code> will be closed in the 1st iteration of the loop, and the <code>write</code> will fail with <code>EBADF</code> the 2nd and 3rd time.</p>\n"}, {"tags": [], "owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "is_accepted": false, "score": 1, "last_activity_date": 1544057780, "creation_date": 1544057780, "answer_id": 53646105, "question_id": 53646103, "link": "https://stackoverflow.com/questions/53646103/pipe-with-multiple-child-process/53646105#53646105", "title": "Pipe with multiple child process", "body": "<p>the following proposed code:</p>\n\n<ol>\n<li>handles each child separately</li>\n<li>performs the desired functionality</li>\n<li>incorporates the comments to the OPs question</li>\n<li>caveat: the closing of the pipe ends is somewhat careless in the proposed code</li>\n</ol>\n\n<p>and now the proposed code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/wait.h&gt;\n\n#define MAX_CHILDREN 3\n\nint main( void )\n{\n    pid_t pid;\n\n    int fd[2];\n\n\n    char str[] = \"Hello\";\n\n    for(int num_process = 0; num_process &lt; MAX_CHILDREN; num_process++)\n    {\n        if(pipe(fd) == -1)\n        {\n            perror( \"pipe Failed\" );\n            continue;\n        }\n\n        pid = fork();\n\n        if(pid &lt; 0)\n        {\n            perror(\"fork failed\");\n            exit(1);\n        }\n\n        if(pid == 0)\n        { //child code\n            char buff[50];\n            printf(\"Child %i (pid= %i)\\n\", num_process, getpid());\n            close(fd[1]);\n\n            if ( read( fd[0], buff, sizeof(buff)) &lt;= 0) //read from pipe\n            {\n                perror( \"read failed\" );\n                exit( EXIT_FAILURE );\n            }\n\n            printf(\"Read child = %s\\n\", buff);\n            exit(0);\n        }\n\n        else{//parent\n            printf(\"Im parent %i\\n\",getpid());\n            close(fd[0]);\n            write(fd[1], str,strlen(str)+1);\n            printf(\"Parent send %s\\n\", str);\n            wait(NULL);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>A typical run of the code results in:</p>\n\n<pre><code>Im parent 26451\nParent send Hello\nChild 0 (pid= 26452)\nRead child = Hello\nIm parent 26451\nParent send Hello\nChild 1 (pid= 26453)\nRead child = Hello\nIm parent 26451\nParent send Hello\nChild 2 (pid= 26454)\nRead child = Hello\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1544079557, "question_id": 486256}, "owner": {"reputation": 315, "user_id": 7802118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b7f749e887418ae2ea8929eb536af25?s=128&d=identicon&r=PG&f=1", "display_name": "Chariot", "link": "https://stackoverflow.com/users/7802118/chariot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4743, "favorite_count": 0, "accepted_answer_id": 53646104, "answer_count": 2, "score": 1, "last_activity_date": 1544079557, "creation_date": 1544052879, "question_id": 53646103, "link": "https://stackoverflow.com/questions/53646103/pipe-with-multiple-child-process", "title": "Pipe with multiple child process", "body": "<p>I want to create N processes from one parent and this child processes have to read that parent write, but what i have only the first process reads correctly:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char *argv[]){\n\n\npid_t pid;\n\nint fd[2];\nchar buff[50];\n\nchar str[] = \"Hello\";\n\nif(pipe(fd) == -1){\n    fprintf(stderr, \"pipe Failed\");\n    return 1;\n}\n\nfor(int num_process = 0; num_process &lt; 3; num_process++){\n    pid = fork();\n    if(pid &lt; 0){\n        perror(\"Error\");\n        exit(1);\n    }\n\n    if(pid == 0){ //child code\n        printf(\"Child %i (pid= %i)\\n\", num_process, getpid());\n\n\n    close(fd[1]);\n    read(fd[0], buff, sizeof(buff)); //read from pipe\n    printf(\"Read child = %s\\n\", buff);\n    close(fd[0]);\n    exit(0);\n    }\n\n    else{//parent\n        printf(\"Im parent %i\\n\",getpid());\n        close(fd[0]);\n        write(fd[1], str,strlen(str)+1);\n        printf(\"Parent send %s\\n\", str);\n        close(fd[1]);\n        for(int num_process = 0; num_process &lt; 3; num_process++){\n        wait(NULL);\n        }\n    }\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Im parent 5863\nParent send Hello\nChild 0 (pid= 5864)\nRead child = Hello\nIm parent 5863\nParent send Hello\nChild 1 (pid= 5865)\nRead child = \nIm parent 5863\nParent send Hello\nChild 2 (pid= 5866)\nRead child = \n</code></pre>\n"}, {"tags": ["c", "java-native-interface", "gdb", "valgrind"], "comments": [{"owner": {"reputation": 9461, "user_id": 8422330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c0f90445d03447c587d1e595d531f69?s=128&d=identicon&r=PG&f=1", "display_name": "prl", "link": "https://stackoverflow.com/users/8422330/prl"}, "edited": false, "score": 0, "creation_date": 1544153813, "post_id": 53642134, "comment_id": 94183688, "body": "I suggest that you move the complex part of the method into a separate C function. Write test code in C to test it. The JNI method can just convert the java parameters and call the C function. Unless the complexity of the code is mostly related to the JNI interface rather than the actual work the code is doing, this should be a better way to develop, test, and debug the code."}], "answers": [{"tags": [], "owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "is_accepted": true, "score": 2, "last_activity_date": 1544089637, "creation_date": 1544089637, "answer_id": 53648529, "question_id": 53642134, "link": "https://stackoverflow.com/questions/53642134/how-to-call-a-c-mehod-of-jni-in-another-c-task/53648529#53648529", "title": "How to call a C mehod of JNI in another C task?", "body": "<p>You will need to actually create the VM first, see <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/invocation.html#wp9502\" rel=\"nofollow noreferrer\">Chapter 5 of the JNI documentation</a>.\nThis will give you a <code>jvm</code> from which you can grab a <code>JNIEnv *env</code> and call your function.</p>\n\n<p>That said, you can also just start your Java process normally, attach a debugger to it and put a breakpoint on your function as you would with any other native program.</p>\n"}], "owner": {"reputation": 45, "user_id": 1381021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f814a8a77858132771c20ef104dc193?s=128&d=identicon&r=PG", "display_name": "Caio", "link": "https://stackoverflow.com/users/1381021/caio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 53648529, "answer_count": 1, "score": 0, "last_activity_date": 1544089637, "creation_date": 1544051056, "question_id": 53642134, "link": "https://stackoverflow.com/questions/53642134/how-to-call-a-c-mehod-of-jni-in-another-c-task", "title": "How to call a C mehod of JNI in another C task?", "body": "<p>I had implemented a JNI method for processing an object and returning a value.</p>\n\n<p>This method is a little bit complex and has a lot of JNI allocations.</p>\n\n<p>I want to debug my JNI method using GDB and check its memory using Valgrind, but using javam this task sounds complicated.</p>\n\n<p>So my question is, is it possible to create a C function that calls a JNI function close to how java would call?</p>\n\n<p>like this example:</p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_test_Test_func (JNIEnv *env, jobject obj, jstring jstr){\n    const char *p_str;\n    p_str = (*env)-&gt;GetStringUTFChars(env, jstr, 0);\n    return char[2];\n}\n\nint main(int argc, char **argv){\n    JNIEnv env;\n    jstring test = env-&gt;NewStringUTF(env, \"vals\");\n    printf(\"%d\\n\", Java_test_Test_func(&amp;env, NULL, test));\n    //Expects: 108\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "matlab"], "comments": [{"owner": {"reputation": 3032, "user_id": 4288113, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jyQRc.png?s=128&g=1", "display_name": "Nicky Mattsson", "link": "https://stackoverflow.com/users/4288113/nicky-mattsson"}, "edited": false, "score": 3, "creation_date": 1544051478, "post_id": 53642091, "comment_id": 94143757, "body": "<a href=\"https://se.mathworks.com/help/matlab/matlab_external/introducing-mex-files.html\" rel=\"nofollow noreferrer\">se.mathworks.com/help/matlab/matlab_external/&hellip;</a>"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1544052230, "post_id": 53642091, "comment_id": 94143957, "body": "Looks like you need to make sure that folder is on your PATH."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1544052367, "post_id": 53642091, "comment_id": 94143989, "body": "As Nicky said, you likely need to compile the C file into a MEX-file. Typically <code>mex slicmex.c</code> is enough. Doesn&#39;t the toolbox you downloaded have some documentation for how to install it?"}, {"owner": {"reputation": 61, "user_id": 7779148, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-40xwPBD4nMk/AAAAAAAAAAI/AAAAAAAAAIU/6fz8LnAt-lM/photo.jpg?sz=128", "display_name": "Redion Xhepa", "link": "https://stackoverflow.com/users/7779148/redion-xhepa"}, "edited": false, "score": 0, "creation_date": 1544052439, "post_id": 53642091, "comment_id": 94144009, "body": "I don&#39;t see any meaningful example there . Anyway I want to know did these EPFL guys compile this piece of code? They do not seem to be using any of the mentioned functions there."}, {"owner": {"reputation": 61, "user_id": 7779148, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-40xwPBD4nMk/AAAAAAAAAAI/AAAAAAAAAIU/6fz8LnAt-lM/photo.jpg?sz=128", "display_name": "Redion Xhepa", "link": "https://stackoverflow.com/users/7779148/redion-xhepa"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1544052500, "post_id": 53642091, "comment_id": 94144031, "body": "@AustinMullins Indeed at first I thought it was because of that.But I added the files to my path and still it did not work."}, {"owner": {"reputation": 61, "user_id": 7779148, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-40xwPBD4nMk/AAAAAAAAAAI/AAAAAAAAAIU/6fz8LnAt-lM/photo.jpg?sz=128", "display_name": "Redion Xhepa", "link": "https://stackoverflow.com/users/7779148/redion-xhepa"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1544052753, "post_id": 53642091, "comment_id": 94144119, "body": "@CrisLuengo Thank you I did as you said. In the command window I typed : mex slicmex.c  .Now it works. Issue solved."}], "owner": {"reputation": 61, "user_id": 7779148, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-40xwPBD4nMk/AAAAAAAAAAI/AAAAAAAAAIU/6fz8LnAt-lM/photo.jpg?sz=128", "display_name": "Redion Xhepa", "link": "https://stackoverflow.com/users/7779148/redion-xhepa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544051624, "creation_date": 1544050839, "last_edit_date": 1544051624, "question_id": 53642091, "link": "https://stackoverflow.com/questions/53642091/how-to-use-a-c-function-in-matlab", "title": "How to use a C function in MATLAB?", "body": "<p>I am trying to use  SLIC Superpixels method written by a group in EPFL.In the demo MATLAB file it is written the following code :</p>\n\n<pre><code>img = imread('bee.jpg');\n[labels, numlabels] = slicmex(img,500,20);\n%numlabels is the same as number of superpixels\nimagesc(labels);\n</code></pre>\n\n<p>Indeed in the folder file, there is only this <code>slicmex.c</code> file. When I try to run the MATLAB code. There is an error because it does not recognize the <code>slicmex</code> function. So in a kind of a way, I should load <code>slicmex.c</code> to MATLAB  How can I do it? </p>\n"}, {"tags": ["c", "char", "cyrillic"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1544051042, "post_id": 53642076, "comment_id": 94143601, "body": "Octal numbers strike again."}, {"owner": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1544051071, "post_id": 53642076, "comment_id": 94143611, "body": "No c is a char and can only store 1 byte."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 1220, "user_id": 5878272, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14e96159153b67fab5222b7c5fa18c71?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik", "link": "https://stackoverflow.com/users/5878272/fredrik"}, "edited": false, "score": 0, "creation_date": 1544051485, "post_id": 53642076, "comment_id": 94143760, "body": "@Fredrik A <code>char</code> can store <i>at least</i> one byte."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1544051840, "post_id": 53642076, "comment_id": 94143861, "body": "@Broman No. A byte is a unit of memory, a <code>char</code> is a type, capable of representing a character from the implementation&#39;s basic character set."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1544051951, "post_id": 53642076, "comment_id": 94143889, "body": "@EOF I don&#39;t see how that contradicts what I said."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1544052243, "post_id": 53642076, "comment_id": 94143962, "body": "@Broman A <code>char</code> doesn&#39;t store <i>anything</i>. An <i>object</i> stores something, and so the correct way around would be to say that a byte can store <i>exactly</i> one <code>char</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1544052386, "post_id": 53642076, "comment_id": 94143997, "body": "The debugger isn&#39;t showing two numbers. It&#39;s showing two representations of the same value, one in decimal and the other as a character with an escape sequence."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1544052420, "post_id": 53642076, "comment_id": 94144003, "body": "@EOF Ok, an object of type char can store at least one byte."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1544052629, "post_id": 53642076, "comment_id": 94144082, "body": "@Broman That sentence is meaningless."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1544052707, "post_id": 53642076, "comment_id": 94144102, "body": "@EOF Do you agree that 1 byte = 8 bits?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1544052790, "post_id": 53642076, "comment_id": 94144132, "body": "@Broman Of course not. <code>CHAR_BIT</code> is implementation-defined and must be equal <b>or larger</b> than 8."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1544052880, "post_id": 53642076, "comment_id": 94144155, "body": "@EOF I just found that in the documentation. Disregard everything I said."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1544052895, "post_id": 53642076, "comment_id": 94144163, "body": "@Broman: as far as the standard is concerned, <code>char</code> is pretty much the definition of a byte, however large it is. You two are mixing the two definitions - &quot;byte = octet&quot; (what is generally intended nowadays in general in the software community) and &quot;byte = minimum addressable quantity = <code>char</code>&quot; (what the C and C++ standards mean with byte)."}], "answers": [{"comments": [{"owner": {"reputation": 264, "user_id": 7248819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fbca2c28960829c50c21ac2574676bd?s=128&d=identicon&r=PG&f=1", "display_name": "V. Dalechyn", "link": "https://stackoverflow.com/users/7248819/v-dalechyn"}, "edited": false, "score": 0, "creation_date": 1544052296, "post_id": 53642240, "comment_id": 94143974, "body": "So, how does that char is located in memory? Is C able to make char 2-byte when it comes to cyrillic? Does that mean that i can assign to <code>char c</code> cyrillic \u0431? Allthough it&#39;s one byte?"}, {"owner": {"reputation": 264, "user_id": 7248819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fbca2c28960829c50c21ac2574676bd?s=128&d=identicon&r=PG&f=1", "display_name": "V. Dalechyn", "link": "https://stackoverflow.com/users/7248819/v-dalechyn"}, "edited": false, "score": 0, "creation_date": 1544052515, "post_id": 53642240, "comment_id": 94144040, "body": "Well I actually just understood how <code>scanf(&quot;%c&quot;)</code> actually worked, it took one byte from cyrillic <b>\u0431</b>, which is actually two-byte. But what is <code>&#47;320</code> then?"}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": 3, "last_activity_date": 1544062489, "last_edit_date": 1544062489, "creation_date": 1544051661, "answer_id": 53642240, "question_id": 53642076, "link": "https://stackoverflow.com/questions/53642076/how-can-char-store-two-numbers/53642240#53642240", "title": "How can char store two numbers?", "body": "<p>Cyrillic characters [using <code>utf-8</code>] are <em>multibyte</em> <code>char</code>s. Your \"character\" in hex is the string/array:</p>\n\n<pre><code>D0B1\n</code></pre>\n\n<p>So, you <em>can't</em> use <code>%c</code> to retrieve it. You need to use <code>%s</code>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint\nmain(void)\n{\n    char utf[1000];\n    char *cp;\n\n    scanf(\"%s\", utf);\n    printf(\"%s\\n\", utf);\n\n    for (cp = utf;  *cp != 0;  ++cp)\n        printf(\" %2.2X\",*cp &amp; 0xFF);\n    printf(\"\\n\");\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Here is the output:</p>\n\n<pre><code>\u0431\n D0 B1\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<blockquote>\n  <p>So, how does that char is located in memory? Is C able to make char 2-byte when it comes to cyrillic?</p>\n</blockquote>\n\n<p>First and foremost, see: <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/UTF-8</a></p>\n\n<p>When you enter a cyrillic character via your keyboard, it is a combination of your keyboard hardware, terminal emulator program, and text editor that convert the keyboard sequence into the <code>utf-8</code> sequence which ends up in the text file you're editing.</p>\n\n<p>What you're calling a cyrillic character is what <code>utf-8</code> calls a \"code point\".</p>\n\n<p>When placed in a text file, the code point becomes a multibyte sequence as mentioned above.</p>\n\n<p><code>scanf</code> and <code>printf</code> have no knowledge of this. For example, <code>printf</code> just sends out the string: <code>XXXXXXX\\0</code> where X can be a single ASCII char or part of a multichar code point.</p>\n\n<p>It is up to the terminal emulator to make sense of this and output the correct character from the utf-8 font set [which contains cyrillic chars, greek chars, french chars, etc.]</p>\n\n<p>Functions such as <code>strlen</code> and <code>strcpy</code> <em>only</em> care about the trailing 0x00 EOS char. So, technically, they work and can usually pass through a <code>utf-8</code> string just as easily as an ASCII one as the EOS is the same regardless.</p>\n\n<p>But, <code>strlen</code> will give you the number of <code>char</code> in the string. For example, in the above <code>strlen</code> will return 2 because it counts <code>D0</code> and <code>B1</code> as separate <code>char</code> values in a <code>char</code> array.</p>\n\n<p>And, <code>strchr</code> [probably] would not work. You'd probably want to use <code>strstr</code> in its place for <code>utf-8</code>.</p>\n\n<p>Of course, there is only <em>one</em> code point for the cyrillic character in it, so <code>utf-8</code> aware functions have to process the array differently. For example, when counting the number of code points, they need to see that <code>D0B1</code> is a <em>single</em> code point, so the resulting count is <em>one</em></p>\n\n<p>The general rule is that ASCII (<code>0x01-0x7F</code>) maps directly onto <code>utf-8</code> as single <code>char</code>s. Anything that has the high bit (<code>0x80</code>) set is part of a <code>utf-8</code> multibyte code point. The <code>0x40</code> is used to indicate the <em>start</em> [leftmost] byte of the sequence. All remaining bytes in the sequence are of the form (in bits): <code>10xxxxxx</code>. The number of remaining bytes in the sequence is denoted by the number of prefix 1 bits in the start byte. In the table below, it shows how to decode the byte sequence (<code>x</code> denotes a bit that is part of code point value):</p>\n\n<pre><code># of    Start       Remaining Bytes\nbytes   Byte\n1       0xxxxxxx\n2       110xxxxx    10xxxxxx\n3       1110xxxx    10xxxxxx    10xxxxxx\n4       11110xxx    10xxxxxx    10xxxxxx    10xxxxxx\n</code></pre>\n\n<p>Thus, a <code>utf-8</code> aware function can detect and skip over code points when scanning in either a forward or reverse direction. And, can distinguish between two [or more] adjacent multibyte code points.</p>\n"}, {"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 5, "last_activity_date": 1544081857, "last_edit_date": 1544081857, "creation_date": 1544053956, "answer_id": 53642570, "question_id": 53642076, "link": "https://stackoverflow.com/questions/53642076/how-can-char-store-two-numbers/53642570#53642570", "title": "How can char store two numbers?", "body": "<p>A <code>char</code> variable may either be used to store a small<sup>1</sup> integer, or a character (more properly, code unit) in some not-so-well-defined, generally-ASCII-based encoding. Here the debugger is just trying to be helpful by displaying two (disputably) meaningful representations of the content of <code>c</code>.</p>\n\n<hr>\n\n<p>Let's imagine for a moment that you actually wrote <code>a</code> instead of <code>\u0431</code>; in that case, the debugger would write something like</p>\n\n<pre><code>c = {char} 97 'a'\n</code></pre>\n\n<p>because the actual number stored in <code>c</code> is 97, and, decoded as ASCII, it corresponds to the letter <code>a</code>.</p>\n\n<p>Unfortunately, the idea that you can fit every possible character in a single 8-bit <code>char</code> value is completely flawed, so the most widespread encoding used nowadays (UTF-8), which happens to be the one in use on your machine, requires multiple <em>code units</em> (\u2248bytes) to represent a single code point (\u2248logical character) (some more details <a href=\"https://stackoverflow.com/q/44995008/214671\">in this question</a>). In particular, \u0431 is represented as a string of <em>two</em> bytes, namely byte 0xD0 and 0xB1.</p>\n\n<p>C knows nothing about UTF-8 or code points; if you specify <code>%c</code> to <code>scanf</code>, it reads in a single byte, regardless of the fact that it suffices or not to represent a full UTF-8 code point. So, only the first of those bytes got read, and <code>c</code> just contains the 0xD0 value; the 0xB1 is still in the buffer, yet to be read.</p>\n\n<p>Coming back to the value displayed by the debugger, first of all it must be noted that on your platform (as, unfortunately, on many platforms), <code>char</code> is signed. Hence, the 0xD0 byte is interpreted as a signed value as -48 (indeed, 0xD0 = 208, which \"wraps around\" at 127; 208 - 256 = -48).</p>\n\n<p>As for <code>'\\320'</code>: the debugger here would like to display the ASCII representation of that value; however, the byte 0xD0 is outside the ASCII character range<sup>2</sup>, so here it gets displayed with an escape sequence. You may be familiar with <code>'\\n'</code> to represent the newline character or <code>\\0</code> for the NUL character; in general, a <code>\\</code> followed by one to three digits in C means the byte with the corresponding <em>octal</em> value; <code>0320</code> is indeed octal for 208, which is decimal for 0xD0.</p>\n\n<p>So, no mystery here: <code>c</code> still contains a single value (which is just \"half\" of your character); what you are seeing are just two (equally inconvenient) representations of its content.</p>\n\n<hr>\n\n<p><strong><em>Notes</em></strong></p>\n\n<ol>\n<li>On most platforms, [-128, 127] or [0, 255], depending on the signedness of <code>char</code> (which, unfortunately, is implementation-defined).</li>\n<li>Indeed, UTF-8 <em>extends</em> ASCII by using only bytes with the high bit set (unused by ASCII) for its multibyte sequences; this makes sure that they cannot be misinterpreted for ASCII text.</li>\n</ol>\n"}], "owner": {"reputation": 264, "user_id": 7248819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fbca2c28960829c50c21ac2574676bd?s=128&d=identicon&r=PG&f=1", "display_name": "V. Dalechyn", "link": "https://stackoverflow.com/users/7248819/v-dalechyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 0, "accepted_answer_id": 53642570, "answer_count": 2, "score": 4, "last_activity_date": 1544081857, "creation_date": 1544050746, "question_id": 53642076, "link": "https://stackoverflow.com/questions/53642076/how-can-char-store-two-numbers", "title": "How can char store two numbers?", "body": "<p>The case in next: I have cyrillic symbol \"\u0431\". Running next code:</p>\n\n<pre><code>int main() {\n    char c;\n    scanf(\"%c\", &amp;c);\n    printf(\"%d\\n\", c);\n    return 0;\n}\n</code></pre>\n\n<p>Shows <code>-48</code>. BUT when i am debugging this variable <code>c</code>, it shows me next: <code>-48 '\\320'</code><a href=\"https://i.stack.imgur.com/6fkcz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6fkcz.png\" alt=\"enter image description here\"></a>.</p>\n\n<p>So how does this work? Is this a pointer to a 2-length array? Or how is it able to store two numbers?</p>\n"}, {"tags": ["c++", "c", "pthreads", "conditional-statements", "mutex"], "comments": [{"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1544049832, "post_id": 53641838, "comment_id": 94143193, "body": "You&#39;re retrieving a random number from 100, and checking if it&#39;s below 13, which it has a ~10% chance of being, whereas when you are checking for it being above 8, you&#39;ve got a 90% chance of it being correct. I&#39;d say you haven&#39;t got your thread running correctly, or perhaps it&#39;s just very slow. You should try to attach your debugger and step through the code and see what&#39;s going on. It&#39;s likely you have some deadlock going on, which happens rarely but is more visible when the value isn&#39;t added"}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1544049867, "post_id": 53641838, "comment_id": 94143206, "body": "Also consider ditching <code>pthread</code> and just use <code>std::thread</code> and <code>std::mutex</code> instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1544050061, "post_id": 53641838, "comment_id": 94143279, "body": "Are you sure you are asking about C++ rather than C? Except for some omitted <code>struct</code> specifiers you are using no C++ specific features or standard library at all."}, {"owner": {"reputation": 13, "user_id": 9597744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Svijlg1XBeo/AAAAAAAAAAI/AAAAAAAAAYU/ti4h1hTwCsc/photo.jpg?sz=128", "display_name": "Branislav Kram&#225;r", "link": "https://stackoverflow.com/users/9597744/branislav-kram%c3%a1r"}, "edited": false, "score": 0, "creation_date": 1544050576, "post_id": 53641838, "comment_id": 94143450, "body": "in variable randomValue should be values from 1 to 20, so probability of value greater than 8 should be the same to probability of value less than 13, shouldn&#180;t it?"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1544050992, "post_id": 53641838, "comment_id": 94143587, "body": "It sort of suggests that <code>rand()</code> is not very random (a known issue). Also this is really C code. Nearly everything you do has a better C++ alternative. <code>std::vector</code>, <code>std::thread</code>, <code>std::mutex</code>, <code>std::conditional_variable</code>, <code>std::random</code>"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1544051566, "post_id": 53641838, "comment_id": 94143785, "body": "Also your <code>funProducent()</code> stops after a hundred numbers. If the <code>funKonzument()</code> is in the condition variable at this time there is no way to release it. So its can get stuck (because the <code>pthread_cond_signal()</code> is only conditionally called in <code>funProducent()</code>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1544052871, "post_id": 53641838, "comment_id": 94144151, "body": "You are also not protecting yourself agaist spurious wakes on the <code>pthread_cond_wait</code>calls. &quot;<i>Spurious wakeups from the pthread_cond_wait() or pthread_cond_timedwait() functions may occur. Since the return from pthread_cond_wait() or pthread_cond_timedwait() does not imply anything about the value of this predicate, the predicate should be re-evaluated upon such return</i>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1544055341, "creation_date": 1544055341, "answer_id": 53642747, "question_id": 53641838, "link": "https://stackoverflow.com/questions/53641838/c-c-threads-magic-difference-in-condition/53642747#53642747", "title": "C/C++ threads magic difference in condition", "body": "<p>You are probably suffering from spurious wakes and some problem with the junk counter. I just removed that counter and added a cond wait loop function (and a little lock context manager) and then the hangings seems to have stopped.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdexcept&gt;\n#include &lt;functional&gt;\n\n#define BUFFER_LIMIT 20\n\nstruct struktura{\n    pthread_mutex_t mutex;\n    pthread_cond_t bufferNotFull;\n    pthread_cond_t bufferNotEmpty;\n    int bufferIndex;\n    char * buffer;\n};\n\n// a lock context manager\nclass mlock {\n    pthread_mutex_t* mtx;\npublic:\n    mlock(pthread_mutex_t&amp; Mtx) :\n        mtx(&amp;Mtx)\n    {\n        int rv=pthread_mutex_lock(mtx);\n        if(rv) throw std::runtime_error(std::to_string(rv));\n    }\n    mlock(const mlock&amp;) = delete;\n    mlock(mlock&amp;&amp;) = delete;\n    mlock&amp; operator=(const mlock&amp;) = delete;\n    mlock&amp; operator=(mlock&amp;&amp;) = delete;\n    ~mlock() {\n        pthread_mutex_unlock(mtx);\n    }\n};\n\n// silly loop to take care of spurious wakes\nvoid cwait(pthread_cond_t&amp; c, pthread_mutex_t&amp; m, std::function&lt;bool()&gt; f) {\n    while(f()) pthread_cond_wait(&amp;c, &amp;m);\n}\n\nvoid* funProducent(void *arg){\n    struktura* data = static_cast&lt;struktura*&gt;(arg);\n    int i = 0;\n    while(i &lt; 100) {\n        mlock dummy(data-&gt;mutex);\n        cwait(data-&gt;bufferNotFull, data-&gt;mutex, [&amp;](){return data-&gt;bufferIndex == BUFFER_LIMIT - 1;});\n\n        int randomValue = (rand() % 20) + 1;\n        if( randomValue &lt; 13 ){\n            data-&gt;buffer[++data-&gt;bufferIndex] = 'a';\n            printf(\"%2d : Producent at index %d added %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n            i++;\n            pthread_cond_signal(&amp;data-&gt;bufferNotEmpty);\n        }\n    }\n    printf(\"producent is done\\n\");\n    return nullptr;\n}\n\nvoid* funKonzument(void *arg){\n    struktura* data = static_cast&lt;struktura*&gt;(arg);\n    int i = 0;\n    while(i &lt; 100) {\n        mlock dummy(data-&gt;mutex);\n        cwait(data-&gt;bufferNotEmpty, data-&gt;mutex, [&amp;](){return data-&gt;bufferIndex&lt;0;});\n\n        printf(\"\\t\\t\\t%2d : Konzument at index %d consumed %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n        data-&gt;bufferIndex--;\n        i++;\n        pthread_cond_signal(&amp;data-&gt;bufferNotFull);\n    }\n    printf(\"\\t\\t\\tkonzument is done\\n\");\n    return nullptr;\n}\n\nint main() {\n    pthread_t threadProducent, threadKonzument;\n    struktura threadData;\n    threadData.buffer = (char *) malloc(sizeof(char) * BUFFER_LIMIT);\n    threadData.bufferIndex = -1;\n    threadData.bufferNotFull = PTHREAD_COND_INITIALIZER;\n    threadData.bufferNotEmpty = PTHREAD_COND_INITIALIZER;\n    threadData.mutex = PTHREAD_MUTEX_INITIALIZER;\n\n    pthread_create(&amp;threadProducent, NULL, funProducent, &amp;threadData);\n    pthread_create(&amp;threadKonzument, NULL, funKonzument, &amp;threadData);\n\n    pthread_join(threadProducent, NULL);\n    pthread_join(threadKonzument, NULL);\n\n    free(threadData.buffer);\n    pthread_mutex_destroy(&amp;threadData.mutex);\n    pthread_cond_destroy(&amp;threadData.bufferNotFull);\n    pthread_cond_destroy(&amp;threadData.bufferNotEmpty);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9597744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Svijlg1XBeo/AAAAAAAAAAI/AAAAAAAAAYU/ti4h1hTwCsc/photo.jpg?sz=128", "display_name": "Branislav Kram&#225;r", "link": "https://stackoverflow.com/users/9597744/branislav-kram%c3%a1r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53642747, "answer_count": 1, "score": 0, "last_activity_date": 1544088095, "creation_date": 1544049482, "last_edit_date": 1544088095, "question_id": 53641838, "link": "https://stackoverflow.com/questions/53641838/c-c-threads-magic-difference-in-condition", "title": "C/C++ threads magic difference in condition", "body": "<p>I wanted to write simple multithread app in C/C++. Function funProducent produces 100 values and if random generated value is in given range, char is added to buffer. Function funKonzument comsumes values from buffer. Here is my code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n\n#define BUFFER_LIMIT 20\n\nstruct struktura{\n    pthread_mutex_t mutex;\n    pthread_cond_t bufferNotFull;\n    pthread_cond_t bufferNotEmpty;\n    int bufferIndex;\n    char * buffer;\n    int junk;\n};\n\nvoid * funProducent(void *arg){\n    struktura * data = (struktura *) arg;\n    int i = 0;\n    while (i &lt; 100) {\n        pthread_mutex_lock(&amp;data-&gt;mutex);\n        if(data-&gt;bufferIndex == BUFFER_LIMIT - 1){\n            pthread_cond_wait(&amp;data-&gt;bufferNotFull, &amp;data-&gt;mutex);\n        }\n        int randomValue = (rand() % 20) + 1;\n        if( randomValue &lt; 13 ){\n            data-&gt;buffer[++data-&gt;bufferIndex] = 'a';\n            printf(\"%2d : Producent at index %d added %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n            pthread_cond_signal(&amp;data-&gt;bufferNotEmpty);\n        } else {\n            data-&gt;junk++;\n        }\n        pthread_mutex_unlock(&amp;data-&gt;mutex);\n        i++;\n    }\n    printf(\"producent is done\\n\");\n}\n\nvoid * funKonzument(void *arg){\n    struktura * data = (struktura *) arg;\n    int i = 0;\n    while (i + data-&gt;junk &lt; 100) {  \n        printf(\"%d\\n\", i + data-&gt;junk);\n        pthread_mutex_lock(&amp;data-&gt;mutex);\n        if(data-&gt;bufferIndex &lt; 0){\n            pthread_cond_wait(&amp;data-&gt;bufferNotEmpty, &amp;data-&gt;mutex);\n        }\n        printf(\"%2d : Konzument at index %d consumed %c\\n\", i, data-&gt;bufferIndex, data-&gt;buffer[data-&gt;bufferIndex]);\n        data-&gt;bufferIndex--;\n        pthread_cond_signal(&amp;data-&gt;bufferNotFull);\n        pthread_mutex_unlock(&amp;data-&gt;mutex);\n        i++;\n    }\n    printf(\"konzument is done\\n\");\n}\n\nint main(int argc, char** argv) {\n\npthread_t threadProducent, threadKonzument;\nstruktura threadData;\nthreadData.buffer = (char *) malloc(sizeof(char) * BUFFER_LIMIT);\nthreadData.bufferIndex = -1;\nthreadData.bufferNotFull = PTHREAD_COND_INITIALIZER;\nthreadData.bufferNotEmpty = PTHREAD_COND_INITIALIZER;\nthreadData.mutex = PTHREAD_MUTEX_INITIALIZER;\nthreadData.junk = 0;\n\npthread_create(&amp;threadProducent, NULL, funProducent, &amp;threadData);\npthread_create(&amp;threadKonzument, NULL, funKonzument, &amp;threadData);\n\npthread_join(threadProducent, NULL);\npthread_join(threadKonzument, NULL);\n\nfree(threadData.buffer);\npthread_mutex_destroy(&amp;threadData.mutex);\npthread_cond_destroy(&amp;threadData.bufferNotFull);\npthread_cond_destroy(&amp;threadData.bufferNotEmpty);\nreturn 0;\n}\n</code></pre>\n\n<p>When I try to run this code, sometimes it stucks in funKonzument at this line:</p>\n\n<pre><code>pthread_cond_wait(&amp;data-&gt;bufferNotEmpty, &amp;data-&gt;mutex);\n</code></pre>\n\n<p>But...when I change condition in funProducent method from:</p>\n\n<pre><code>if( randomValue &lt; 13 )\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if( randomValue &gt; 8 )\n</code></pre>\n\n<p>everything works fine. Is anyone able to explain me what magic difference is between this two conditions?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1544049737, "post_id": 53641832, "comment_id": 94143165, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1544050104, "post_id": 53641832, "comment_id": 94143293, "body": "Try &quot;%d.%d.%d.%d&quot;. Scanf needs to know the actual format of the data you expect."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 10002495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db884d036267c8ec839d607e060b396?s=128&d=identicon&r=PG&f=1", "display_name": "macaato", "link": "https://stackoverflow.com/users/10002495/macaato"}, "edited": false, "score": 0, "creation_date": 1544050396, "post_id": 53641966, "comment_id": 94143389, "body": "I read the article and will work on debugging. As of now, this worked perfectly. Thank you"}], "tags": [], "owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "is_accepted": true, "score": 2, "last_activity_date": 1544050149, "creation_date": 1544050149, "answer_id": 53641966, "question_id": 53641832, "link": "https://stackoverflow.com/questions/53641832/issues-with-ip-address-program-involving-structures-in-c/53641966#53641966", "title": "Issues with ip address program involving structures in C", "body": "<p>Please do read @melpomene's link to Eric Lippert's excellent article on debugging small programs.</p>\n\n<hr>\n\n<p>You have two issues. The first is that your <code>scanf()</code> format string does not allow for the decimals between IP address octets. The presence in the file of unexpected delimiters (the decimals) causes all the scan conversions after the first to fail, so it returns 1, triggering the print you're seeing. Change the format string to <code>\"%d.%d.%d.%d %s\"</code>.</p>\n\n<p>The second is that in <code>scan_address()</code> you're incrementing <code>i</code> <em>before</em> you test for the terminating line. In other words, when this check runs:</p>\n\n<pre><code>if(adds[i].xx==0 &amp;&amp; adds[i].yy==0 &amp;&amp; adds[i].zz==0 &amp;&amp; adds[i].mm==0)\n</code></pre>\n\n<p>You've already incremented <code>i</code> to point to the next record, and you're testing uninitialized memory. This is actually undefined behavior, but it's likely that \"by chance\" this memory contains zeroes, triggering the end-of-input check. You can move the <code>if</code> (and the <code>break</code>) up into the <code>if (status == 5)</code> code block before incrementing <code>i</code>.</p>\n\n<hr>\n\n<p>With these changes I get:</p>\n\n<pre><code>ipaddress.txt was succesfully imported with 8 record\n\nMachines green and red are on the same local network\n111 22 3 44  green\n111 22 6 77  red\n\nMachines blue and yellow are on the same local network\n222 33 4 55  blue\n222 33 8 99  yellow\n\nMachines cyan and black are on the same local network\n333 44 1 22  cyan\n333 44 2 33  black\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 10002495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db884d036267c8ec839d607e060b396?s=128&d=identicon&r=PG&f=1", "display_name": "macaato", "link": "https://stackoverflow.com/users/10002495/macaato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 53641966, "answer_count": 1, "score": -1, "last_activity_date": 1544050149, "creation_date": 1544049456, "question_id": 53641832, "link": "https://stackoverflow.com/questions/53641832/issues-with-ip-address-program-involving-structures-in-c", "title": "Issues with ip address program involving structures in C", "body": "<p>I am learning about structures in C and I have written a program that is supposed to read in a list of up to 100 addresses and nicknames and print a list of messages identifying each pair of computers from the same locality, that is, each pair of computers with matching values in the first two components of the address. For some reason, my program will always print that I have less than 5 items. I can't seem to figure out what I did wrong. Any help is appreciated.</p>\n\n<p>C code:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string.h&gt;\n\ntypedef struct {\n    unsigned int xx,yy,zz,mm;\n    char name[10];\n}address_t;\n\nint scan_address(address_t add[]);\nvoid print_address(address_t);\nint local_address(address_t, address_t);\n\nint main(void)\n{\n    address_t adds[100];\n    int count=0, res=0, i, j;\n\n    count = scan_address(adds);\n\n    for(i=0; i&lt;count; i++)\n    {\n        for(j=i+1; j&lt;count; j++)\n        {\n            res = local_address(adds[i], adds[j]);\n            if(res)\n            {\n                printf(\"\\nMachines %s and %s are on the same local network\\n\", adds[i].name, adds[j].name);\n                print_address(adds[i]);\n                print_address(adds[j]);\n            }\n        }\n    }\nreturn(0);\n}\n\nint scan_address(address_t adds[100])\n{\n    int status=1, i=0;\n    FILE *info;\n\n    info = fopen(\"ipaddresses.txt\", \"r\");\n\n    if(info==NULL)\n    printf(\"\\nipaddresses.txt does not exist. Try again\\n\");\n    else{\n        while(status&gt;0)\n        {\n            status=fscanf(info, \"%d %d %d %d %s\", &amp;adds[i].xx, &amp;adds[i].yy, &amp;adds[i].zz, &amp;adds[i].mm, adds[i].name);\n            if(status==5)\n            {\n                i++;\n            }else if(status&lt;5 &amp;&amp; status&gt;0){\n                //This is the issue. This message is being printed for some reason\n                printf(\"\\nInvalid input, the total number of items is less than 5\\n\"); \n            }\n            if(adds[i].xx==0 &amp;&amp; adds[i].yy==0 &amp;&amp; adds[i].zz==0 &amp;&amp; adds[i].mm==0)\n            break;\n        }\n    }\n    if(i&gt;0)\n    printf(\"\\nipaddress.txt was succesfully imported with %d record\\n\", i);\n    fclose(info);\n    return(i-1);\n}\n\n//Function that returns True if the addresses are on the same local network\nint local_address(address_t add1, address_t add2)\n{\n    int result=0;\n    if(add1.xx == add2.xx &amp;&amp; add1.yy == add2.yy)\n    {\n        result = 1;\n    }\n    return(result);\n}\n\nvoid print_address(address_t add)\n{\n    printf(\"%d %d %d %d\\t %s\\n\", add.xx, add.yy, add.zz, add.mm, add.name);\n}\n</code></pre>\n\n<p>Text file:</p>\n\n<pre><code>111.22.3.44 green\n222.33.4.55 blue\n111.22.6.77 red\n222.33.8.99 yellow\n333.44.1.22 cyan\n444.55.1.22 purple\n333.44.2.33 black\n444.55.4.55 white\n0.0.0.0 none\n</code></pre>\n"}, {"tags": ["c", "header-files"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544049384, "post_id": 53641768, "comment_id": 94143051, "body": "If you use angle brackets it probably won&#39;t work unless these are system headers."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 4, "creation_date": 1544049443, "post_id": 53641768, "comment_id": 94143072, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename\">What is the difference between #include &lt;filename&gt; and #include &quot;filename&quot;?</a>"}, {"owner": {"reputation": 6668, "user_id": 610505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/782ed01c10b1b6850242d6e4eeb73aa9?s=128&d=identicon&r=PG", "display_name": "eepp", "link": "https://stackoverflow.com/users/610505/eepp"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1544049522, "post_id": 53641768, "comment_id": 94143092, "body": "@usr2564301 I know the technical difference, I&#39;m looking for the good practice when writing a library&#39;s public headers."}], "answers": [{"tags": [], "owner": {"reputation": 716, "user_id": 5544978, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dbe98674942def813b2476b3ceb5317e?s=128&d=identicon&r=PG", "display_name": "Don Hosek", "link": "https://stackoverflow.com/users/5544978/don-hosek"}, "is_accepted": false, "score": 2, "last_activity_date": 1544049323, "creation_date": 1544049323, "answer_id": 53641806, "question_id": 53641768, "link": "https://stackoverflow.com/questions/53641768/should-a-c-librarys-public-header-include-other-headers-with-double-quotes-or/53641806#53641806", "title": "Should a C library&#39;s public header #include other headers with double quotes or angle brackets?", "body": "<p>The general rule is to use angled brackets to include header files that are part of the system includes and quotes for everything else.</p>\n"}, {"comments": [{"owner": {"reputation": 6668, "user_id": 610505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/782ed01c10b1b6850242d6e4eeb73aa9?s=128&d=identicon&r=PG", "display_name": "eepp", "link": "https://stackoverflow.com/users/610505/eepp"}, "edited": false, "score": 1, "creation_date": 1544049802, "post_id": 53641819, "comment_id": 94143182, "body": "<i>If you use angle brackets and there are to files at (in different include directories) you can get the wrong one.</i> I don&#39;t agree. The search path is always the same for a given compiler instance, so you will always get the same one. For example, with my question&#39;s example, <code>&lt;mylib&#47;file.h&gt;</code> will be located in the same <code>mylib</code> directory that is used when including the file which has this directive (through <code>&lt;mylib&#47;other-file.h&gt;</code>)."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "reply_to_user": {"reputation": 6668, "user_id": 610505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/782ed01c10b1b6850242d6e4eeb73aa9?s=128&d=identicon&r=PG", "display_name": "eepp", "link": "https://stackoverflow.com/users/610505/eepp"}, "edited": false, "score": 1, "creation_date": 1544051564, "post_id": 53641819, "comment_id": 94143784, "body": "That assumes your library was included with <code>&lt;mylib&#47;whatever.h&gt;</code>.  You can tell people to do it that way, but they don&#39;t always listen.  Sure, then their code is broken, but odds are good your going to have to explain how to fix it, and there isn&#39;t really any benefit in doing it that way\u2026"}], "tags": [], "owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "is_accepted": false, "score": -1, "last_activity_date": 1544049393, "creation_date": 1544049393, "answer_id": 53641819, "question_id": 53641768, "link": "https://stackoverflow.com/questions/53641768/should-a-c-librarys-public-header-include-other-headers-with-double-quotes-or/53641819#53641819", "title": "Should a C library&#39;s public header #include other headers with double quotes or angle brackets?", "body": "<p>If you use angle brackets and there are to files at  (in different include directories) you can get the wrong one.  If you use \"file.h\" you have a better chance of getting the one you expect.</p>\n\n<p>Double-quotes may also make it possible for people to use your library without adding any include dirs.</p>\n\n<p>Basically, if you have a choice I'd recommend double quotes.</p>\n"}], "owner": {"reputation": 6668, "user_id": 610505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/782ed01c10b1b6850242d6e4eeb73aa9?s=128&d=identicon&r=PG", "display_name": "eepp", "link": "https://stackoverflow.com/users/610505/eepp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1544049461, "creation_date": 1544049093, "last_edit_date": 1544049461, "question_id": 53641768, "link": "https://stackoverflow.com/questions/53641768/should-a-c-librarys-public-header-include-other-headers-with-double-quotes-or", "title": "Should a C library&#39;s public header #include other headers with double quotes or angle brackets?", "body": "<p>Is there a known benefit of using <code>#include \"...\"</code> instead of <code>#include &lt;...&gt;</code> for include directives placed into public headers?</p>\n\n<p>For example, given a public header file which needs to include a file besides it, should it use:</p>\n\n<pre><code>#include \"file.h\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include &lt;mylib/file.h&gt;\n</code></pre>\n\n<p>(assuming the headers are installed in the <code>mylib</code> subdirectory of the include install directory)?</p>\n\n<p>Amongst the common practice, <a href=\"https://github.com/GNOME/libxml2/blob/f8e3db0445a1bc8cfe3f77326b07ec161482caa2/include/libxml/parser.h#L15\" rel=\"nofollow noreferrer\">libxml2 uses angle brackets</a> while <a href=\"https://github.com/curl/curl/blob/bae0d473f5912d38fc8da1f9850a70b015b53c9e/include/curl/multi.h#L49\" rel=\"nofollow noreferrer\">curl uses double quotes</a>.</p>\n"}, {"tags": ["c", "sockets"], "comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1544049220, "post_id": 53641623, "comment_id": 94142987, "body": "Maybe <a href=\"https://en.wikipedia.org/wiki/Spanning_Tree_Protocol\" rel=\"nofollow noreferrer\">Spanning Tree Protocol (STP) Topology Change Notification (TCN) messages</a>. What are you passing to <code>getaddrinfo()</code>... is this something you would expect to see?"}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1544050940, "post_id": 53641623, "comment_id": 94143569, "body": "Added some more information to the question (it&#39;s actually someone else who found this, haven&#39;t reproduced this myself). We&#39;re not expecting this, the code really only wants to deal with IPV4/IPV6"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1544051458, "post_id": 53641623, "comment_id": 94143749, "body": "Got me! Might be interesting to see what happens if you explicitly (for test purposes) set <code>hint.ai_family</code> to <code>AF_INET</code> (or <code>AF_INET6</code>), or if you pass <code>NULL</code> for the hint. And it&#39;d be worth capturing <i>exactly</i> what&#39;s being passed for the node and service parameters."}, {"owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1544051546, "post_id": 53641623, "comment_id": 94143781, "body": "Yeah, I&#39;ll try to get a small reproducer"}], "owner": {"reputation": 3716, "user_id": 331059, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dcddae70351aff62451086cd399801f9?s=128&d=identicon&r=PG", "display_name": "Bwmat", "link": "https://stackoverflow.com/users/331059/bwmat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1544058558, "creation_date": 1544048339, "last_edit_date": 1544058558, "question_id": 53641623, "link": "https://stackoverflow.com/questions/53641623/what-does-af-tcnmessage-returned-from-getaddrinfo-as-the-value-of-the-ai-fami", "title": "What does AF_TCNMESSAGE (Returned from getaddrinfo() as the value of the ai_family field) mean?", "body": "<p>I've googled for it, but found nothing other than <code>#define</code>'s for the constant.</p>\n\n<p>This is happening on an OSX 10.11 machine.</p>\n\n<p>Here's a small reproducer (the host originally came from the hostname() function, there was some issue with using that so that's why it was hardcoded)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n\ntypedef struct addrinfo     ADRINFO;\n\nint main(void)\n{\n    const char* host = \"Romi-Mac-Mini.local\";\n    const char* port = \"1543\";\n    ADRINFO *aip, hint = { AI_NUMERICSERV, AF_UNSPEC, SOCK_STREAM, IPPROTO_TCP,\n        /*addrlen*/0, /*addr*/0, /*canonname*/0, /*next*/0 };\n    const int ret = getaddrinfo(host, port, &amp;hint, &amp;aip);\n    if (!aip)\n    {\n        printf(\"aip is NULL\\n\");\n    }\n    else\n    {\n        printf(\"ret=%d ai_family=%d\\n\", ret, aip-&gt;ai_family);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>On the problematic machine, it outputs\n<code>ret=0 ai_family=30</code></p>\n"}, {"tags": ["c", "oracle", "plsql", "oracle11g"], "comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1544047592, "post_id": 53641312, "comment_id": 94142431, "body": "Run <code>exec osutil.RunOsCmd(&#39;&#47;usr&#47;bin&#47;env&#39;)</code> to see the environment the shell inherits from the Oracle process.  It is quite possible that Oracle unsets the <code>PATH</code> environment variable for some inane reason; it is Oracle after all.  BTW, your links are swapped, the first one points to the wrapper."}, {"owner": {"reputation": 53, "user_id": 472642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b470212216954a6d91f07bf992ee328?s=128&d=identicon&r=PG", "display_name": "Miguel Martins", "link": "https://stackoverflow.com/users/472642/miguel-martins"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1544048153, "post_id": 53641312, "comment_id": 94142622, "body": "<code>exec osutil.RunOsCmd(&#39;&#47;usr&#47;bin&#47;env&#39;)</code> also yields an empty <code>PATH</code> variable, as seen <a href=\"https://pastebin.com/s9idM8wJ\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1544048444, "post_id": 53641312, "comment_id": 94142719, "body": "<code>echo</code> is a shell builtin, that&#39;s why it works. Try in a bash the following two command lines <code>PATH= &#47;bin&#47;bash -c &quot;echo TEST&quot;</code> and <code>PATH= &#47;bin&#47;bash -c &quot;ps -A&quot;</code>. @NominalAnimal the &quot;inane&quot; reason is probably called &quot;security&quot;, i.e. not falling into traps when somebody can manipulate your <code>$PATH</code>"}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544048560, "post_id": 53641312, "comment_id": 94142757, "body": "@StefanBecker: That &quot;somebody&quot; is the user the oracle server runs as. Which is already trusted. That &quot;security&quot; is equivalent to removing tires from a bicycle, to avoid puncturing them."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1544048625, "post_id": 53641312, "comment_id": 94142776, "body": "@MiguelMartins: I recommend you modify the wrapper to preprend a configurable <code>export PATH=&#47;sbin:&#47;bin:&#47;usr&#47;sbin:&#47;usr&#47;bin:&#47;usr&#47;local&#47;sbin:&#47;usr&#47;loca&zwnj;&#8203;l&#47;bin ;</code> to the string executed."}, {"owner": {"reputation": 53, "user_id": 472642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b470212216954a6d91f07bf992ee328?s=128&d=identicon&r=PG", "display_name": "Miguel Martins", "link": "https://stackoverflow.com/users/472642/miguel-martins"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544048719, "post_id": 53641312, "comment_id": 94142806, "body": "@StefanBecker the two command lines yield as follows: <code>TEST</code> and <code>&#47;bin&#47;bash: ps: No such file or directory</code>"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 472642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b470212216954a6d91f07bf992ee328?s=128&d=identicon&r=PG", "display_name": "Miguel Martins", "link": "https://stackoverflow.com/users/472642/miguel-martins"}, "is_accepted": true, "score": 0, "last_activity_date": 1544125353, "creation_date": 1544125353, "answer_id": 53658553, "question_id": 53641312, "link": "https://stackoverflow.com/questions/53641312/oracle-11g-osutil-package-no-path-on-centos-7/53658553#53658553", "title": "Oracle 11g: osutil package; no PATH on CentOS 7?", "body": "<p>I managed to solve my problem by adding the following line to my <code>extproc.ora</code> file, which, in my case, is located under <code>/home/oracle/app/oracle/product/11.2.0/dbhome_1/hs/admin</code>:</p>\n\n<pre><code>SET PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin\n</code></pre>\n\n<p>It would seem Oracle 11g's <code>extproc</code> does indeed unset the <code>PATH</code> environment variable; in fact, it seems <code>extproc</code> has its own environment, which is only configurable through the <code>extproc.ora</code> file mentioned above.</p>\n"}], "owner": {"reputation": 53, "user_id": 472642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8b470212216954a6d91f07bf992ee328?s=128&d=identicon&r=PG", "display_name": "Miguel Martins", "link": "https://stackoverflow.com/users/472642/miguel-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 53658553, "answer_count": 1, "score": 0, "last_activity_date": 1544125353, "creation_date": 1544046748, "last_edit_date": 1544048067, "question_id": 53641312, "link": "https://stackoverflow.com/questions/53641312/oracle-11g-osutil-package-no-path-on-centos-7", "title": "Oracle 11g: osutil package; no PATH on CentOS 7?", "body": "<p>I am trying to invoke external programs via PL/SQL in Oracle 11g. <a href=\"https://www.akadia.com/services/libosint_code.txt\" rel=\"nofollow noreferrer\">This</a> is the C code of the shared library and <a href=\"https://www.akadia.com/services/libosint_plsql_package.txt\" rel=\"nofollow noreferrer\">this</a> is the corresponding PL/SQL wrapper for it.</p>\n\n<p>Let's suppose I want to execute Unix's <code>ps -A</code> command. Here's what I got:</p>\n\n<pre><code>Connected to Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 \nConnected as sys@orcl AS SYSDBA\n\nSQL&gt; set serveroutput on;\nSQL&gt; exec osutil.RunOsCmd('ps -A');\n\nERROR, bad command or no output returned...\nERROR, bad command or no output returned...\n\nPL/SQL procedure successfully completed\n</code></pre>\n\n<p>What I find odd about it is that, should I <code>exec osutil.RunOsCmd('echo This works, but ps does not?!?');</code> instead, it gives me the command's output, like it should:</p>\n\n<pre><code>This works, but ps does not?!?\n\nPL/SQL procedure successfully completed\n</code></pre>\n\n<p>Let's try echoing $ORACLE_HOME...</p>\n\n<pre><code>SQL&gt; exec osutil.RunOsCmd('echo $ORACLE_HOME');\n\n/home/oracle/app/oracle/product/11.2.0/dbhome_1\n\nPL/SQL procedure successfully completed\n</code></pre>\n\n<p>Now let's try echoing $PATH...</p>\n\n<pre><code>SQL&gt; exec osutil.RunOsCmd('echo $PATH');\n\n\n\nPL/SQL procedure successfully completed\n</code></pre>\n\n<p>It would seem to me that the library's <code>popen</code> command, when executed via Oracle's <code>extproc</code>, invokes an <code>sh</code> shell without anything in its $PATH.</p>\n\n<p>Any idea why this is happening? I'd like to execute <code>ps -A</code> from Oracle without specifying the full path to the command, i.e. <code>/bin/ps -A</code>.</p>\n"}, {"tags": ["c", "process", "fork", "shared-memory"], "comments": [{"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544045843, "post_id": 53641072, "comment_id": 94141806, "body": "What is the variable <code>size</code> in the second code block? Is it the <code>sizeof(Paths)</code>?"}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1544045935, "post_id": 53641072, "comment_id": 94141848, "body": "The <code>path</code> field of your <code>struct Paths</code> is a <b>pointer</b>.  What memory do you think <code>shmem-&gt;path</code> points to?"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544046041, "post_id": 53641072, "comment_id": 94141900, "body": "If you want to use shared memory, then does this mean that you have another process(thread) tries to read this?"}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544046071, "post_id": 53641072, "comment_id": 94141914, "body": "<code>shmem-&gt;path</code> is a pointer to an array of integer, not an array. I guess <code>size</code> is big enough for the struct and the array, so I guess after the allocation you should do <code>shmem-&gt;path = (int *)(shmem + 1)</code> which will put the array after the struct in the shared memory"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544046191, "post_id": 53641072, "comment_id": 94141949, "body": "@Stefan Becker If the shared memory is used in another process(thread), it won&#39;t be able to access <code>path</code>. The OP has to clarify how he will use <code>shmem</code>."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544047297, "post_id": 53641072, "comment_id": 94142330, "body": "@JiaHaoXu that problem can simply be solved by removing <code>path</code> from the struct and use <code>int *path = (int *)(shmem + 1)</code> everywhere where <code>shmem</code> is accessed."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544047514, "post_id": 53641072, "comment_id": 94142406, "body": "Of course another solution is to re-order the struct and put the array at the end, i.e. <code>{ int totalDistance; int size; int path[0]; }</code> and then allocate <code>sizeof(struct ...) + (size - 1)*sizeof(int)</code> of shared memory. Then the OP code should work unmodified."}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544047528, "post_id": 53641072, "comment_id": 94142418, "body": "@Stefan Becker If the shared memory is mapped tonother address, this method will immediately fail. Either the other process(thread) use <code>mmap</code> to load it (though it can&#39;t be done here) or its child process use <code>mremap</code> to change the size."}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544047764, "post_id": 53641072, "comment_id": 94142487, "body": "It is better to rewrite the structure to adjust to the requirements of shared memory than placing assumptions on how it is used."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "reply_to_user": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544047873, "post_id": 53641072, "comment_id": 94142527, "body": "@JiaHaoXu only if you forget to recalculate <code>path</code> after you re-mapped the shared memory."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "reply_to_user": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048640, "post_id": 53641072, "comment_id": 94142778, "body": "@JiaHaoXu Size is equals to size of array(which is defined as number of cities)+2(because of the other 2 attribute i have on that struct) * sizeof(int)"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048719, "post_id": 53641072, "comment_id": 94142807, "body": "No, you needed another <code>sizeof(int*)</code> for storing the pointer to the array."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1544048753, "post_id": 53641072, "comment_id": 94142820, "body": "@AndrewHenle i think it points like a normal array, i mean, when i call createPath() it allocates the memory that i need to use the array normally, so after that ill be able to use like the &quot;newPath&quot; ex.: shmem-&gt;path[0]"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048773, "post_id": 53641072, "comment_id": 94142824, "body": "It is better to let <code>size</code> = <code>sizeof(Paths) + &#47;* sizeof array path*&#47;</code>."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "reply_to_user": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048781, "post_id": 53641072, "comment_id": 94142828, "body": "@JiaHaoXu ahhhh ok, thanks!!"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048843, "post_id": 53641072, "comment_id": 94142852, "body": "And you add tag <code>fork</code> to this question, does this mean that the shared memory will be used by its child (from the way you setup shared memory, I guess you want to use it this way)?"}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "reply_to_user": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048859, "post_id": 53641072, "comment_id": 94142855, "body": "@JiaHaoXu about the second comment you did, yes, i have 1 parent process, and x child processes, and i need to &quot;share&quot; a shortestPath with the parent"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048872, "post_id": 53641072, "comment_id": 94142862, "body": "Better to edit your question and clarify all of them."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "reply_to_user": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048896, "post_id": 53641072, "comment_id": 94142869, "body": "@JiaHaoXu i didnt post the whole code because i though it was too big to post it here"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544048968, "post_id": 53641072, "comment_id": 94142900, "body": "Just clarify what is <code>size</code> and how are you gonna to use the shared memory."}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544050828, "post_id": 53641072, "comment_id": 94143529, "body": "BTW, the sizeof the array path is not <code>nCities</code>, it is <code>nCities * sizeof(int)</code>."}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544052324, "post_id": 53641072, "comment_id": 94143979, "body": "Another advice: You may want to use thread instead of process so that you won&#39;t have to use shared memory any more and you don&#39;t have to worry about recording them and terminating threads one by one, simply <code>exit_group(&#47;* status_code *&#47;)</code> will do the job. And it is more lightweight."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "reply_to_user": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "edited": false, "score": 0, "creation_date": 1544053022, "post_id": 53641072, "comment_id": 94144191, "body": "@JiaHaoXu i know that Jia, but this is a college project and in this version of the project i am not allowed, yet, to use threads"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544049124, "post_id": 53641670, "comment_id": 94142957, "body": "Inside the struct, why is it better to use int path[0] rather than int *path?"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "reply_to_user": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544049250, "post_id": 53641670, "comment_id": 94142999, "body": "Because you don&#39;t need pointer. This is actually a dynamically-sized struct."}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "reply_to_user": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544049284, "post_id": 53641670, "comment_id": 94143013, "body": "The <code>path</code> is stored inlined with <code>Paths</code>, they are continuous."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544049409, "post_id": 53641670, "comment_id": 94143062, "body": "Ahhhh ok, thanks, i edited my post and added more code if it helps solving the problem."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544049720, "post_id": 53641670, "comment_id": 94143158, "body": "i have another question, with the new changes of the struct, don&#39;t i have to change the way i allocate memory for the path array in my createPath()?"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "reply_to_user": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544050611, "post_id": 53641670, "comment_id": 94143463, "body": "I think the answer is yes."}, {"owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544051410, "post_id": 53641670, "comment_id": 94143730, "body": "I never used size_t, is there any difference between int and size_t?"}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "reply_to_user": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544051769, "post_id": 53641670, "comment_id": 94143839, "body": "See <a href=\"https://stackoverflow.com/questions/19732319/difference-between-size-t-and-unsigned-int\">Difference between size_t and unsigned int</a>. Difference between <code>size_t</code> and <code>int</code> is similar, except that <code>int</code> is not intended to represent positive value only."}, {"owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "reply_to_user": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "edited": false, "score": 0, "creation_date": 1544051827, "post_id": 53641670, "comment_id": 94143857, "body": "You should consider to search on <code>stackoverflow</code> (which you must can, since you can ask a  question) and`google``` before asking."}], "tags": [], "owner": {"reputation": 1526, "user_id": 8375400, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b4137a39b4c1a7f0f08d017a10b785d?s=128&d=identicon&r=PG&f=1", "display_name": "JiaHao Xu", "link": "https://stackoverflow.com/users/8375400/jiahao-xu"}, "is_accepted": false, "score": 1, "last_activity_date": 1544051014, "last_edit_date": 1544051014, "creation_date": 1544048523, "answer_id": 53641670, "question_id": 53641072, "link": "https://stackoverflow.com/questions/53641072/how-do-i-change-the-value-of-a-position-of-an-array-inside-a-struct-that-is-allo/53641670#53641670", "title": "How do i change the value of a position of an array inside a struct that is allocated in shared memory(mmap) in c?", "body": "<p>Since you want to use shared memory, then I recommand you to rewrite the structure since the address of the shared memory can be changed when <code>mmap</code>ing (not possible here) or <code>mremap</code>.</p>\n\n<p>IMHO, it is always better to use offset inside shared memory than using pointer and assuming the address won't be changed, even if you can sure the address won't change now.</p>\n\n<p>So:</p>\n\n<pre><code>struct Paths\n{\n    int totalDistance;\n    int quantity;\n    int path[0];\n};\n</code></pre>\n\n<p>Since <code>path</code> is stored inlined with <code>Paths</code> continuously, there is no need for <code>int *path</code>.</p>\n\n<p>When you allocate memory using <code>mmap</code>, the <code>size</code> should be <code>sizeof(Paths)</code> plus the size you need for storing <code>path</code>.</p>\n\n<pre><code>size_t size = sizeof(Paths) + /* Additional size needed for storing path */;\nint protection = PROT_READ | PROT_WRITE;\nint visibility = MAP_ANONYMOUS | MAP_SHARED; \nPtPath shmem = (PtPath) mmap(NULL, size, protection, visibility, -1, 0);\n</code></pre>\n\n<p>When you accessing <code>path</code> from <code>Paths</code>, the compiler will use offset from the address of <code>Paths</code> to access it, so as long as you hold a valid pointer to a shared memory with valid <code>Paths</code>, you can access it no matter it is <code>mmap</code>ed or<code>mremap</code>ed.</p>\n\n<p>Coping the data from <code>newPath</code> will be just:</p>\n\n<pre><code>Path newPath = createPath();\nfor(int i = 0 ; i &lt; shmem-&gt;quantity ; i++)\n    shmem-&gt;path[i] = newPath.path[i];\n</code></pre>\n\n<p>This method has a slight advantage over the method used in the question: it does not need any additional pointer, which might be useful if you allocate a lot of <code>Path</code>.</p>\n\n<p>Now, it is better to use <code>void initializePath(Path*, int)</code> instead of <code>Path createPath(int)</code>:</p>\n\n<pre><code>void initializePath(Path *newPath, int quantity)\n{\n    if (quantity &lt; 0)\n        quantity = 0;\n    newPath-&gt;quantity = quantity;\n    newPath-&gt;totalDistance = 0;\n\n    randomPath(shmem);       \n    setPathTotalDistance(shmem, distances);\n}\n</code></pre>\n\n<p>And you can have another function <code>Path* allocatePath(int)</code> to allocate <code>Path</code>:</p>\n\n<pre><code>Path* allocateSharedPath(int quantity)\n{\n    size_t size = sizeof(Paths) + quantity * sizeof(int);\n    int protection = PROT_READ | PROT_WRITE;\n    int visibility = MAP_ANONYMOUS | MAP_SHARED; \n\n    Path *shmem = (Path*) mmap(NULL, size, protection, visibility, -1, 0);\n\n    if (shmem == NULL)\n        /* Handle failure */;\n\n    return shmem;\n}\n\nPath* allocatePath(int quantity)\n{\n    size_t size = sizeof(Paths) + quantity * sizeof(int);\n\n    Path *mem = (Path*) calloc(size, 1);\n\n    if (mem == NULL)\n        /* Handle failure */;\n\n    return mem;\n}\n</code></pre>\n\n<p>BTW, if you want to store something else between <code>quantity</code> and <code>path</code> or you want to store <code>path</code> before <code>Paths</code> you can do this:</p>\n\n<pre><code>struct Paths\n{\n    int totalDistance;\n    int quantity;\n    offset_t offset_to_path;\n};\n</code></pre>\n\n<p>The <code>size</code> required to allocate is <code>sizeof(Paths) + /* Additional size needed for storing path */ + /* sizeof whatever else you need to store */</code>. When initializing, initialize <code>offset_to_path</code> to <code>pointer_to_path - pointer_to_Paths</code> so that you can access it by adding <code>offset_to_path</code> to the pointer to <code>Paths</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 7819988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c803a92c522ddc5e0e90b5ebd0c612c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Modesto", "link": "https://stackoverflow.com/users/7819988/hugo-modesto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544051014, "creation_date": 1544045504, "last_edit_date": 1544050364, "question_id": 53641072, "link": "https://stackoverflow.com/questions/53641072/how-do-i-change-the-value-of-a-position-of-an-array-inside-a-struct-that-is-allo", "title": "How do i change the value of a position of an array inside a struct that is allocated in shared memory(mmap) in c?", "body": "<p>I am trying to change the value of a position of an array inside a struct that is allocated in shared memory\nI have this struct:</p>\n\n<pre><code>typedef struct Paths {\n     int *path;\n     int totalDistance;\n     int quantity;\n}Path;\n</code></pre>\n\n<p>And i have this algorithm:</p>\n\n<pre><code>void runAlgorithm(int** distances,int nCities, int executionTime, int nProcesses){\nint size = nCities+2 * sizeof(int);\nint protection = PROT_READ | PROT_WRITE;\nint visibility = MAP_ANONYMOUS | MAP_SHARED;\nPtPath shmem = (PtPath)mmap(NULL, size, protection, visibility, 0, 0);\n*shmem = createPath(nCities);\nrandomPath(shmem);\nsetPathTotalDistance(shmem, distances);\nsem_unlink(\"job_ready\");\nsem_unlink(\"job_done\");\nsem_t *job_ready = sem_open(\"job_ready\", O_CREAT, 0644, 0);\nsem_t *job_done = sem_open(\"job_done\", O_CREAT, 0644, 0);\n\nint *pids = (int*)calloc(nProcesses, sizeof(int));\nPath path, shortestPath;\n\n//Workers Processes\nfor(int i = 0 ; i &lt; nProcesses ; i++){\n    pids[i] = fork();\n    if(pids[i] == 0){\n        shortestPath = createPath(nCities);\n        randomPath(&amp;shortestPath); //inicializa caminho aleatorio\n        setPathTotalDistance(&amp;shortestPath, distances); //problema aqui \n        while(1){\n            sem_wait(job_ready);                \n            mutation(&amp;shortestPath, distances);\n            if(shortestPath.totalDistance &lt; shmem-&gt;totalDistance){\n                printPath(shmem);\n                printPath(&amp;shortestPath);\n                copyPath(&amp;shortestPath, shmem);\n            }\n            sem_post(job_done);\n        }\n        exit(0);\n    }\n}\n\n//Parent Process\nint elapsed, terminate = 1;\ntime_t start = time(NULL), end;\nprintf(\"Elapsed time: \\n\");\nwhile(terminate){\n    end = time(NULL);\n    elapsed = difftime(end,start);\n    printElapsedTime(elapsed);\n    if(elapsed &gt;= executionTime)\n        terminate = 0;\n    else{\n        sem_post(job_ready);\n        sem_wait(job_done);\n    }\n}\nprintPath(shmem);\nsem_close(job_ready);\nsem_close(job_done);\n\n// Kill worker processes\nfor (int i=0; i&lt;nProcesses; i++) {\n    printf(\"Killing %d\\n\", pids[i]);\n    kill(pids[i], SIGKILL);\n}\n}\n</code></pre>\n\n<p>This is the code of createPath:</p>\n\n<pre><code>Path createPath(int quantity){\nPath newPath;\n\nif(quantity &lt; 0)\n    quantity = 0;\nnewPath.path = (int*)calloc(quantity, sizeof(int));\nnewPath.quantity = quantity;\nnewPath.totalDistance = 0;\n\nreturn newPath;\n}\n</code></pre>\n\n<p>And this is the copyPath code:</p>\n\n<pre><code>void copyPath(PtPath from, PtPath to){\nfor(int i = 0 ; i &lt; from-&gt;quantity ; i++){\n    //printf(\"posI: %d\\n\",to-&gt;path[i]);\n    to-&gt;path[i] = from-&gt;path[i];\n}\nto-&gt;totalDistance = from-&gt;totalDistance;\nto-&gt;quantity = from-&gt;quantity;\n}\n</code></pre>\n\n<p>So my problem is i'm trying to copy the shortestPath to the shared memory and it copies nothing, but it does copy the totalDistance\nWhat am i doing wrong and where?</p>\n"}, {"tags": ["php", "c"], "comments": [{"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1544045193, "post_id": 53640983, "comment_id": 94141521, "body": "<a href=\"https://secure.php.net/manual/en/function.proc-open.php\" rel=\"nofollow noreferrer\"><code>proc_open</code></a>"}, {"owner": {"reputation": 1530, "user_id": 4537662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J-m-vtVhNA4/AAAAAAAAAAI/AAAAAAAAAAA/M95yySU-EJg/photo.jpg?sz=128", "display_name": "Sakura Kinomoto", "link": "https://stackoverflow.com/users/4537662/sakura-kinomoto"}, "edited": false, "score": 0, "creation_date": 1544045287, "post_id": 53640983, "comment_id": 94141568, "body": "You have two options: First, use shell_exec() function to invoke a program in the command line. Second, open a socket on your database engine, and send request through it."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "reply_to_user": {"reputation": 1530, "user_id": 4537662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J-m-vtVhNA4/AAAAAAAAAAI/AAAAAAAAAAA/M95yySU-EJg/photo.jpg?sz=128", "display_name": "Sakura Kinomoto", "link": "https://stackoverflow.com/users/4537662/sakura-kinomoto"}, "edited": false, "score": 0, "creation_date": 1544045940, "post_id": 53640983, "comment_id": 94141851, "body": "@Sakura Kinomoto: he&#39;s asking about communicating with a database engine he wrote, which communicates over stdin/stdout.  Neither of those options would do what he wants."}, {"owner": {"reputation": 1530, "user_id": 4537662, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J-m-vtVhNA4/AAAAAAAAAAI/AAAAAAAAAAA/M95yySU-EJg/photo.jpg?sz=128", "display_name": "Sakura Kinomoto", "link": "https://stackoverflow.com/users/4537662/sakura-kinomoto"}, "edited": false, "score": 0, "creation_date": 1544046129, "post_id": 53640983, "comment_id": 94141932, "body": "shell_exec are valid for what he wants. The function returns the output to the program on stdout, but the program needs to accept parameters from call parameters. The second option requires to code a change on the engine, but its a better option to do it."}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1544046888, "post_id": 53640983, "comment_id": 94142198, "body": "It doesn&#39;t sound like the program accepts arguments, because then you would obviously need to restart it to send new requests.  <code>proc_open</code> would work similarly to what you&#39;re describing (though simpler), and wouldn&#39;t require a code change in the engine.  You get a set of handles for stdin/stdout (and stderr) and you use them to communicate with a long-running process\u2026"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 8385176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ojojs.png?s=128&g=1", "display_name": "ebcode", "link": "https://stackoverflow.com/users/8385176/ebcode"}, "is_accepted": true, "score": 1, "last_activity_date": 1544067091, "creation_date": 1544067091, "answer_id": 53644229, "question_id": 53640983, "link": "https://stackoverflow.com/questions/53640983/calling-c-program-with-php/53644229#53644229", "title": "Calling C program with PHP", "body": "<p>You say you want the PHP to send and receive messages to your program <em>without restarting</em> the compiled program.</p>\n\n<p>So I don't think using shell_exec or proc_open will work how you want, since these commands both load a fresh instance of the compiled program.</p>\n\n<p>Instead, I suggest you look into <a href=\"https://dwheeler.com/secure-programs/Secure-Programs-HOWTO/sockets.html\" rel=\"nofollow noreferrer\">sockets</a>, and how you would rewrite your database engine to use those instead of STDIN/STDOUT. Then you can use PHP's <a href=\"https://secure.php.net/manual/en/ref.sockets.php\" rel=\"nofollow noreferrer\">socket functions</a> to communicate between your applications. And you'll have just one instance of your compiled program running in the background, even with multiple hits to your PHP script.</p>\n"}], "owner": {"reputation": 33, "user_id": 10751703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/440f6244bb1ed70187949ca6a85157fe?s=128&d=identicon&r=PG&f=1", "display_name": "Tr8n", "link": "https://stackoverflow.com/users/10751703/tr8n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 53644229, "answer_count": 1, "score": 3, "last_activity_date": 1544067091, "creation_date": 1544045040, "question_id": 53640983, "link": "https://stackoverflow.com/questions/53640983/calling-c-program-with-php", "title": "Calling C program with PHP", "body": "<p>I\u2019ve written a small database engine in C that works by reading commands you input in the console and it outputs the result. \nIs there any way of me writting some PHP code that could send arguments to the console and recieve the output back to PHP without restarting the compiled program.\nIs there a better way of doing this?</p>\n"}, {"tags": ["c", "file", "c99"], "comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544165882, "post_id": 53640897, "comment_id": 94186983, "body": "Your makefile does not match your example, e.g. <code>C_FILES</code> does not include threads.c and myCityFromInput.c."}], "answers": [{"comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1544045173, "post_id": 53640921, "comment_id": 94141514, "body": "@EugeneSh.It appears his makefile is first compiling and then linking."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1544044792, "creation_date": 1544044792, "answer_id": 53640921, "question_id": 53640897, "link": "https://stackoverflow.com/questions/53640897/how-to-link-multiple-c-files/53640921#53640921", "title": "How to link multiple .c files", "body": "<p>It looks like this</p>\n\n<pre><code>gcc -ggdb -std=c99 -Wall -Wextra -pthread  -c threads.c\ngcc -ggdb -std=c99 -Wall -Wextra -pthread  -c makeCityFromInput.c\ngcc -ggdb -std=c99 -Wall -Wextra -pthread -o threads threads.o makeCityFromInput.o -lm -lncursesw -pthread\n</code></pre>\n\n<p>If you show your make file we can also help with that...</p>\n"}, {"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1544045729, "last_edit_date": 1544045729, "creation_date": 1544045361, "answer_id": 53641051, "question_id": 53640897, "link": "https://stackoverflow.com/questions/53640897/how-to-link-multiple-c-files/53641051#53641051", "title": "How to link multiple .c files", "body": "<p>I guess what you are actually asking is \"What is wrong with my makefile?\". As you have not provided it I can only take an educated guess. Here is a GNUmake snippet to build your program:</p>\n\n<pre><code>.PHONY: default\ndefault: threads\n\nCC      := ...\nLD      := ...\n\nCFLAGS  := ...\nLDFLAGS := ...\nLIBS    := ...\n\nSRCS    := threads.c makeCityFromInput.c\nOBJS    := $(SRCS:%.c=%.o)\n\n$(OBJS): %.o: %.c\n        $(CC) $(CFLAGS) -o $@ -c $&lt;\n\nthreads: $(OBJS)\n        $(LD) $(LDFLAGS) -o $@ $^ $(LIBS)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 146, "user_id": 9598885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25Amk.png?s=128&g=1", "display_name": "Onyrew", "link": "https://stackoverflow.com/users/9598885/onyrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1544049160, "creation_date": 1544049160, "answer_id": 53641781, "question_id": 53640897, "link": "https://stackoverflow.com/questions/53640897/how-to-link-multiple-c-files/53641781#53641781", "title": "How to link multiple .c files", "body": "<p>Maybe my idea is wrong, but I cannot find the</p>\n\n<pre><code>#include \"makeCityFromInput.h\"\n</code></pre>\n\n<p>In your \"makeCityFromInput.c\".</p>\n\n<p>Do you have the \"makeCityFromInput.h\" included in the \"makeCityFromInput.c\"?</p>\n"}], "owner": {"reputation": 11, "user_id": 10751687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-E5X3pXYAo50/AAAAAAAAAAI/AAAAAAAAAMc/SFdvDuFAxlE/photo.jpg?sz=128", "display_name": "Jack Hyland", "link": "https://stackoverflow.com/users/10751687/jack-hyland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1544049160, "creation_date": 1544044683, "last_edit_date": 1544049005, "question_id": 53640897, "link": "https://stackoverflow.com/questions/53640897/how-to-link-multiple-c-files", "title": "How to link multiple .c files", "body": "<p>I know that you have to create a header file and #include it in your main. I have done that and when I compile my code for some reason it is unable to figure out where one of my functions are.</p>\n\n<p>The layout of my project is a: threads.c makeCityFromInput.h and makeCityFromInput.c</p>\n\n<p>I have the threads.c #including the makeCityFromInput.h</p>\n\n<p>This is what happens when I try to compile:</p>\n\n<pre><code>make\ngcc -ggdb -std=c99 -Wall -Wextra -pthread  -c threads.c\ngcc -ggdb -std=c99 -Wall -Wextra -pthread -o threads threads.o  -lm -lncursesw -pthread\nthreads.o: In function `main':\n/home/project3/threads.c:183: undefined reference to `readConfig'\ncollect2: error: ld returned 1 exit status\nMakefile:71: recipe for target 'threads' failed\nmake: *** [threads] Error 1\n</code></pre>\n\n<p>It is unable to find my readconfig file even though it is in my header file</p>\n\n<p>my threads.c file</p>\n\n<pre><code>#define _DEFAULT_SOURCE\n\n#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ncurses.h&gt;  //displays the cars\n#include &lt;pthread.h&gt;  //threading\n#include &lt;unistd.h&gt;\n\n#include \"makeCityFromInput.h\"\n\n#define MAX 2048\nint main(int argc, char *argv[]){\n    //Expected input: Name of config file\n\n    // If the config file is not given; or too many config files are given\n    if (argc != 2){\n        endwin();\n        fprintf(stderr, \"Usage: Enter a configuration file\");\n        exit( EXIT_FAILURE );\n    }\n\n    FILE *fp = NULL;\n    fp = fopen(argv[1], \"r\");\n    assert( fp );\n    readConfig(fp);\n    fclose( fp );\n\n    return 0;\n}\n</code></pre>\n\n<p>my makeCityFromInput.h file:</p>\n\n<pre><code>#ifndef _MAKECITYFROMINPUT_H\n#define _MAKECITYFROMINPUT_H\n\nvoid readConfig(FILE *fp);\n\nint *parse_line(char *line, int *numInts);\n\nvoid create_skyline(int *ground, int size, int maxMissiles);\n\n\n\n#endif\n</code></pre>\n\n<p>my makeCityFromInput.c file:</p>\n\n<pre><code>#include &lt;assert.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ncurses.h&gt;  //displays the cars\n#include &lt;pthread.h&gt;  //threading\n#include &lt;unistd.h&gt;\nvoid readConfig(FILE *fp){\n    ...\n}\n</code></pre>\n\n<p>My make file</p>\n\n<pre><code>#\n# Created by gmakemake (Ubuntu Jul 25 2014) on Wed Nov 14 20:05:05 2018\n#\n\n#\n# Definitions\n#\n\n.SUFFIXES:\n.SUFFIXES:  .a .o .c .C .cpp .s .S\n.c.o:\n        $(COMPILE.c) $&lt;\n.C.o:\n        $(COMPILE.cc) $&lt;\n.cpp.o:\n        $(COMPILE.cc) $&lt;\n.S.s:\n        $(CPP) -o $*.s $&lt;\n.s.o:\n        $(COMPILE.cc) $&lt;\n.c.a:\n        $(COMPILE.c) -o $% $&lt;\n        $(AR) $(ARFLAGS) $@ $%\n        $(RM) $%\n.C.a:\n        $(COMPILE.cc) -o $% $&lt;\n        $(AR) $(ARFLAGS) $@ $%\n        $(RM) $%\n.cpp.a:\n        $(COMPILE.cc) -o $% $&lt;\n        $(AR) $(ARFLAGS) $@ $%\n        $(RM) $%\n\nCC =        gcc\nCXX =       g++\n\nRM = rm -f\nAR = ar\nLINK.c = $(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS)\nLINK.cc = $(CXX) $(CXXFLAGS) $(CPPFLAGS) $(LDFLAGS)\nCOMPILE.c = $(CC) $(CFLAGS) $(CPPFLAGS) -c\nCOMPILE.cc = $(CXX) $(CXXFLAGS) $(CPPFLAGS) -c\nCPP = $(CPP) $(CPPFLAGS)\n########## Flags from header.mak\n\n\nCFLAGS =        -ggdb -Wall -Wextra -pedantic -std=c99 -pthread\n# program uses pthreads and curses libraries\nCLIBFLAGS =     -lncursesw -lpthread -lrt\n\n\n########## End of flags from header.mak\n\n\nCPP_FILES = \nC_FILES =   pt-cruisers.c racer.c\nPS_FILES =  \nS_FILES =   \nH_FILES =   racer.h\nSOURCEFILES =   $(H_FILES) $(CPP_FILES) $(C_FILES) $(S_FILES)\n.PRECIOUS:  $(SOURCEFILES)\nOBJFILES =  racer.o \n\n#\n# Main targets\n#\n\nall:    pt-cruisers \n\npt-cruisers:    pt-cruisers.o $(OBJFILES)\n    $(CC) $(CFLAGS) -o pt-cruisers pt-cruisers.o $(OBJFILES) $(CLIBFLAGS)\n\n#\n# Dependencies\n#\n\npt-cruisers.o:  racer.h\nracer.o:    racer.h\n\n#\n# Housekeeping\n#\n\nArchive:    archive.tgz\n\narchive.tgz:    $(SOURCEFILES) Makefile\n    tar cf - $(SOURCEFILES) Makefile | gzip &gt; archive.tgz\n\nclean:\n    -/bin/rm -f $(OBJFILES) pt-cruisers.o core\n\nrealclean:        clean\n    -/bin/rm -f pt-cruisers \n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1544043982, "post_id": 53640715, "comment_id": 94140956, "body": "Learn about <i>loops</i>."}, {"owner": {"reputation": 17, "user_id": 10699261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qTAYldn_Tio/AAAAAAAAAAI/AAAAAAAAAAg/2P8CavQj7is/photo.jpg?sz=128", "display_name": "John Abbrams", "link": "https://stackoverflow.com/users/10699261/john-abbrams"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1544044029, "post_id": 53640715, "comment_id": 94140982, "body": "@EugeneSh. as I said, some simple loops wont work"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1544044048, "post_id": 53640715, "comment_id": 94140993, "body": "I cannot possibly see why a loop would not work."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1544044075, "post_id": 53640715, "comment_id": 94141003, "body": "How a number of functions affect the enclosing loop?"}, {"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 1, "creation_date": 1544044149, "post_id": 53640715, "comment_id": 94141038, "body": "<code>over 30 different functions in use</code> to calculate the sum of two numbers?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 0, "creation_date": 1544045414, "post_id": 53640715, "comment_id": 94141623, "body": "You can use a <code>goto</code>"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1544045490, "post_id": 53640715, "comment_id": 94141652, "body": "@Broman Why not go all out and recursively call <code>main</code>?"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1544045925, "post_id": 53640715, "comment_id": 94141843, "body": "@ChristianGibbons Because it is undefined behavior."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "reply_to_user": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 1, "creation_date": 1544047408, "post_id": 53640715, "comment_id": 94142373, "body": "@Broman Are you sure about that?  My cursory research shows it to be legal in C, while being illegal in C++."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1544049509, "post_id": 53640715, "comment_id": 94143086, "body": "@ChristianGibbons You seem to be right."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 2914647, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dfb0b321a0d814c9792893aed837f4ed?s=128&d=identicon&r=PG&f=1", "display_name": "Ison Thomas", "link": "https://stackoverflow.com/users/2914647/ison-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1544071421, "creation_date": 1544071421, "answer_id": 53644800, "question_id": 53640715, "link": "https://stackoverflow.com/questions/53640715/how-to-reload-a-program-in-c/53644800#53644800", "title": "How to reload a program in C?", "body": "<p>What about a thread that handles this feature of the program? You can move the sum functionality exclusively to a thread and loop it there.</p>\n"}], "owner": {"reputation": 17, "user_id": 10699261, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qTAYldn_Tio/AAAAAAAAAAI/AAAAAAAAAAg/2P8CavQj7is/photo.jpg?sz=128", "display_name": "John Abbrams", "link": "https://stackoverflow.com/users/10699261/john-abbrams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1544071421, "creation_date": 1544043907, "question_id": 53640715, "link": "https://stackoverflow.com/questions/53640715/how-to-reload-a-program-in-c", "title": "How to reload a program in C?", "body": "<p>For example I have a program that adds two numbers. Once I input the two numbers and calculate their sum, I want to go back to the beginning of main, and be able to give other 2 numbers. This is a minimal example, using a simple loop wont work because I am working on a program that has over 30 different functions in use.</p>\n"}, {"tags": ["javascript", "c", "react-native", "google-signin", "expo"], "owner": {"reputation": 93, "user_id": 10056259, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kkSHzyMqvlA/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7osee-dauPgwFbBubJ5WmnVkcWgyg/mo/photo.jpg?sz=128", "display_name": "Will", "link": "https://stackoverflow.com/users/10056259/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544042784, "creation_date": 1544042784, "question_id": 53640480, "link": "https://stackoverflow.com/questions/53640480/error-when-trying-to-get-oauth-google-signin-to-work-in-ejected-expo-project-i", "title": "Error when trying to get OAuth Google SignIn to work in ejected expo project. I&#39;ve tried everything", "body": "<p>Okay, I know this issue has come up a ton so I\u2019m just looking for a little direction since I\u2019ve searched practically every thread and tried every solution to get this working. The app is created in create-react-native-app and uses a node.js backend and PGSQL server, not that any of that should matter\u2026 I have this function that is called on button press in my login component:</p>\n\n<pre><code> _GoogleSignInAsync = async () =&gt; {\n    try {\n        const result = await Expo.Google.logInAsync({\n          iosClientId: \"717150291405-59od49j7rliuqt96n3v2dcc4gbkfhh37.apps.googleusercontent.com\",\n          scopes: ['profile', 'email'],\n        });\n\n        if (result.type === 'success') {\n          this.setState({\n              signedIn: true,\n              name: result.user.name,\n              photoURL: result.user.photoUrl\n          });\n        } else {\n          console.log(\"cancelled\");\n        }\n      } catch(e) {\n        console.log(\"error\",e);\n      }\n}\n</code></pre>\n\n<p>which I copied from expo\u2019s documentation. I then proceeded to \u201cexpo eject\u201d my project because I saw that the error could be from expo not being able to connect to google\u2019s API server in the first place (it's not native?). Which I predict might be true, because before I ejected the button would simply not do anything - now that it\u2019s ejected and I\u2019m running the simulator through XCode it throws an error:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Exception 'You must specify |clientID| for |GIDSignIn|' was thrown \r\nwhile invoking \r\nlogInAsync on target ExponentGoogle with params \r\n( behavior = system; scopes = ( profile, email ); [etc..]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My app.json looks like:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>{\r\n  \"expo\": {\r\n    \"name\": \"nativesolemate\",\r\n    \"description\": \"This project is really great.\",\r\n    \"slug\": \"nativesolemate\",\r\n    \"privacy\": \"public\",\r\n    \"sdkVersion\": \"30.0.0\",\r\n    \"platforms\": [\r\n      \"ios\",\r\n      \"android\"\r\n    ],\r\n    \"version\": \"1.0.0\",\r\n    \"orientation\": \"portrait\",\r\n    \"icon\": \"./assets/icon.png\",\r\n    \"splash\": {\r\n      \"image\": \"./assets/splash.png\",\r\n      \"resizeMode\": \"contain\",\r\n      \"backgroundColor\": \"#ffffff\"\r\n    },\r\n    \"updates\": {\r\n      \"fallbackToCacheTimeout\": 0\r\n    },\r\n    \"assetBundlePatterns\": [\r\n      \"**/*\"\r\n    ],\r\n    \"ios\": {\r\n      \"supportsTablet\": true,\r\n      \"bundleIdentifier\": \"SoleMateIOS\",\r\n      \"publishBundlePath\": \"ios/nativesolemate/Supporting/shell-app.bundle\",\r\n      \"publishManifestPath\": \"ios/nativesolemate/Supporting/shell-app-manifest.json\"\r\n    },\r\n    \"isDetached\": true,\r\n    \"detach\": {\r\n      \"iosExpoViewUrl\": \"https://s3.amazonaws.com/exp-exponent-view-code/ios-v2.8.4-sdk30.0.0-3de13133-1adc-4ba1-8569-a84011e570b4.tar.gz\",\r\n      \"androidExpoViewUrl\": \"https://s3.amazonaws.com/exp-exponent-view-code/android-v2.8.1-sdk30.0.0-271c32ab-0715-4dfb-8270-ecead3679bb4.tar.gz\"\r\n    },\r\n    \"scheme\": \"exp64ed007d25db40ae8496b69aa354ab61\",\r\n    \"android\": {\r\n      \"package\": \"solemate.android.me\",\r\n      \"publishBundlePath\": \"android/app/src/main/assets/shell-app.bundle\",\r\n      \"publishManifestPath\": \"android/app/src/main/assets/shell-app-manifest.json\"\r\n    }\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here\u2019s the real catch: on the google documentation for implementing this (<a href=\"https://developers.google.com/identity/sign-in/ios/\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sign-in/ios/</a>) it says to send your request in this way, keep in mind I don\u2019t code in C, nor have I ever used CocoaPods:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>  - (BOOL)application:(UIApplication *)application    \r\n    didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {   \r\n    [GIDSignIn sharedInstance].clientID = @\"YOUR_CLIENT_ID\";  \r\n    [GIDSignIn sharedInstance].delegate = self;    \r\n    return YES;\r\n  } </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>So the closest thing in my compiled IOS files, I find a document labeled EXGoogle.m in Pods folder. I found the code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>-(void)systemLogInWithIosClientId:(NSString *)clientId\r\n                      webClientId:(NSString *)webClientId\r\n                           scopes:(NSArray&lt;NSString *&gt; *)scopes\r\n{\r\n  [GIDSignIn sharedInstance].delegate = self;\r\n  [GIDSignIn sharedInstance].uiDelegate = self;\r\n  [GIDSignIn sharedInstance].clientID = @\"717150291405-59od49j7rliuqt96n3v2dcc4gbkfhh37.apps.googleusercontent.com\";\r\n  if (webClientId != nil) {\r\n    [GIDSignIn sharedInstance].serverClientID = webClientId;\r\n  }\r\n  [GIDSignIn sharedInstance].scopes = scopes;\r\n  [GIDSignIn sharedInstance].shouldFetchBasicProfile = YES;\r\n  [[GIDSignIn sharedInstance] signIn];\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Which seemed like where I was supposed to insert the ClientID I got form google although in the snippet I posted I went ahead and added the literal clientID, and before it was:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>[GIDSignIn sharedInstance].clientID = clientID </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I think I\u2019m doing this right, but clearly I\u2019m missing some reference point, don\u2019t have some package installed, didn\u2019t eject properly, or something. I hate to make y\u2019all troubleshoot this but can someone give me a little headway?</p>\n\n<p>Thanks x1,000,000 in advance, y\u2019all</p>\n"}, {"tags": ["c", "masm"], "comments": [{"owner": {"reputation": 323, "user_id": 6567423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3900c5cbb1e5aa19a8311f4114dd72?s=128&d=identicon&r=PG&f=1", "display_name": "user6567423", "link": "https://stackoverflow.com/users/6567423/user6567423"}, "edited": false, "score": 1, "creation_date": 1544042804, "post_id": 53640304, "comment_id": 94140415, "body": "You are passing no args to scanf and specifying %d. You are also forgetting to correct the stack after calling a __cdecl, you need add esp, 12 after the call funcName and before the ret. If you&#39;re going to be writing code like this I highly suggest you learn how to use a debugger/disassembler that can step through the assembly."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1544042924, "post_id": 53640304, "comment_id": 94140463, "body": "Also, try this: <code>printf(&quot;Result: %d\\n&quot;, FUN());</code>"}, {"owner": {"reputation": 323, "user_id": 6567423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3900c5cbb1e5aa19a8311f4114dd72?s=128&d=identicon&r=PG&f=1", "display_name": "user6567423", "link": "https://stackoverflow.com/users/6567423/user6567423"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1544042973, "post_id": 53640304, "comment_id": 94140481, "body": "What difference would that make? @TimRandall he is segfaulting on the scanf call. Although yes, the way he is doing it now via %s and passing &quot;Result&quot; as an argument is convoluted and unnecessary. You should be doing what Tim said but that won&#39;t fix your error."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1544043081, "post_id": 53640304, "comment_id": 94140529, "body": "It was just a comment. I&#39;m not answering the question..."}], "owner": {"reputation": 11, "user_id": 10751560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/977a8079590ef0fa02631a8dfafdf272?s=128&d=identicon&r=PG&f=1", "display_name": "rogey2", "link": "https://stackoverflow.com/users/10751560/rogey2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544042030, "creation_date": 1544042030, "question_id": 53640304, "link": "https://stackoverflow.com/questions/53640304/c-and-masm-program", "title": "C and Masm program", "body": "<p>I need to write a function <code>funcName (int a, int b, int c)</code> on C, which calculates the value using the formula <code>a * b-c</code> and returns it. Then I need to write a function on masm, which calls this function with arguments that are specified in the data segment and returns the value that the first function returns after its call. A function written in masm must be called in main and output the resulting value. I wrote a program, but when I run it, a window pops up in which it is written <code>Unhandled exception at 0x0014000a in labvpd.exe: 0xC0000005: Access violation writing location 0x8d4e00eb.</code> What am I doing wrong?</p>\n\n<p>C code:</p>\n\n<pre><code>#include &lt;stdio.h&gt; \n#include &lt;stdlib.h&gt; \n\n\nextern \"C\" \nint __cdecl funcName(int a, int b, int c);\n\nextern \"C\"\nint FUN();\n\n\nint main()\n{ \n    printf(\"%s\", \"Result: \");\n    printf(\"%d\", FUN());\n    scanf(\"%d\"); \n    return 0; \n\n\n} \nextern \"C\" \nint __cdecl funcName(int a, int b, int c){ \n    int result = a*b-c;\n    return result;\n}\n</code></pre>\n\n<p>MASM code:</p>\n\n<pre><code>.686 \n.MODEL C, FLAT\n.STACK \n.DATA\na dw 10\nb dw 20\nd dw 30\n.CODE \n\nEXTRN funcName : proc\n\nFUN PROC\npush d\npush b\npush a\ncall funcName\nret\nFUN ENDP\nEND\n</code></pre>\n"}, {"tags": ["c", "fgets"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1544041462, "post_id": 53640128, "comment_id": 94139778, "body": "Warning: <code>char* x[16]</code> is an array of <i>sixteen character pointers</i>, not an array of sixteen characters. If this code compiles quietly you need to turn on more warnings because that <code>fgets</code> call is invalid."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 2, "creation_date": 1544041660, "post_id": 53640128, "comment_id": 94139893, "body": "<a href=\"https://linux.die.net/man/3/fopen\" rel=\"nofollow noreferrer\">man fopen</a>"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544042214, "post_id": 53640128, "comment_id": 94140161, "body": "Your question states the text file is in the same directory as the C source file. There is in general no way for the running program to know the directory of the C source file from which it was compiled. You will have to make some sort of arrangement to convey this information or to put the text file in a known location. (Keeping it in the same directory as the executable file is a possibility, as that directory can be derived from the <code>argv[0]</code> passed to <code>main</code>.)"}, {"owner": {"reputation": 8810, "user_id": 1023553, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/EzEeL.png?s=128&g=1", "display_name": "NoDataFound", "link": "https://stackoverflow.com/users/1023553/nodatafound"}, "edited": false, "score": 0, "creation_date": 1544045087, "post_id": 53640128, "comment_id": 94141465, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/410980/include-a-text-file-in-a-c-program-as-a-char\">&quot;#include&quot; a text file in a C program as a char&#91;&#93;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "reply_to_user": {"reputation": 8810, "user_id": 1023553, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/EzEeL.png?s=128&g=1", "display_name": "NoDataFound", "link": "https://stackoverflow.com/users/1023553/nodatafound"}, "edited": false, "score": 1, "creation_date": 1544046875, "post_id": 53640128, "comment_id": 94142194, "body": "@NoDataFound How is it even remotely a duplicate?"}, {"owner": {"reputation": 8810, "user_id": 1023553, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/EzEeL.png?s=128&g=1", "display_name": "NoDataFound", "link": "https://stackoverflow.com/users/1023553/nodatafound"}, "edited": false, "score": 1, "creation_date": 1544049386, "post_id": 53640128, "comment_id": 94143052, "body": "Because you say <i>suppose there is a text file in the same directory as the c file. How can I make the printf function print the contents of the text file?</i> You don&#39;t ask <i>how to read the content of any file on the filesystem</i> (which is answered by ryyker). And if you want to read the whole file that&#39;s another matter involving buffer and reallocation which is answered by this one: <a href=\"https://stackoverflow.com/questions/3381080/reading-all-content-from-a-text-file-c\" title=\"reading all content from a text file c\">stackoverflow.com/questions/3381080/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1544042104, "post_id": 53640235, "comment_id": 94140114, "body": "The question states the file to be read is in the same directory as the C source file. The code in this answer opens a file in the current working directory. There is no reason to expect those to be the same."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "edited": false, "score": 0, "creation_date": 1544042173, "post_id": 53640235, "comment_id": 94140140, "body": "i get the error: error: initializer element is not constant  FILE *fp = fopen(&quot;.//txt.txt&quot;, &quot;r&quot;); the fopen part is highlighted"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544042223, "post_id": 53640235, "comment_id": 94140165, "body": "@Eric - will modify my comments etc.  Thank you."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544042297, "post_id": 53640235, "comment_id": 94140191, "body": "@Asadefa: That error message reveals you put the <code>FILE *fp = \u2026;</code> statement at file scope (that is, outside of any function). Non-constant initializers are not allowed there. Put it inside a function instead."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "edited": false, "score": 0, "creation_date": 1544042630, "post_id": 53640235, "comment_id": 94140338, "body": "I do that and when I try to print it, I get no warnings but I get a segmentation fault."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1544043015, "post_id": 53640235, "comment_id": 94140498, "body": "@Asadefa - Change <code>char *TextFromFile[16];</code> to <code>char TextFromFile[16];</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "edited": false, "score": 0, "creation_date": 1544043022, "post_id": 53640235, "comment_id": 94140503, "body": "I gave it plenty of space"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1544043234, "post_id": 53640235, "comment_id": 94140599, "body": "@Asadefa - Actually, you gave it no space.  See my edit above,     <code>char TextFromFile[16]; &#47;&#47;note &quot;*&quot; has been removed</code>.  As is in the original, <code>fgets()</code> is given a pointer with no memory to write to.  Segmentation fault is usually the result, if you are lucky."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "edited": false, "score": 0, "creation_date": 1544043727, "post_id": 53640235, "comment_id": 94140841, "body": "still gives me segmentation fault. Probably because it is not recognizing. How do I make a path to a file on a unix based operating system?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1544044014, "post_id": 53640235, "comment_id": 94140968, "body": "@Asadefa - <code>const char path[] = {&quot;.&#47;file.txt&quot;};</code> With the correct file name, and if the file is located in the same directory from which you are executing the executable, then this will work."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1544044322, "post_id": 53640235, "comment_id": 94141130, "body": "@Asadefa: Sorry, but you should stop posting follow-up questions in comments. Stack Overflow is not a code-writing service, and comments such as \u201cI gave it plenty of space\u201d do not show the actual code you tried. You can post a new question with a <a href=\"https://stackoverflow.com/help/mcve\">Minimal Complete and Verifiable Example</a>, but do not expect to write your program by asking about every little thing.There are other resources for learning to program that are more suitable."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": false, "score": 2, "last_activity_date": 1544044088, "last_edit_date": 1544044088, "creation_date": 1544041718, "answer_id": 53640235, "question_id": 53640128, "link": "https://stackoverflow.com/questions/53640128/how-can-i-refer-to-a-file-as-the-stream-for-fgets/53640235#53640235", "title": "How can I refer to a file as the stream for fgets()?", "body": "<p>Given the following is defined;</p>\n\n<p><s>char *TextFromFile[16];</s> </p>\n\n<pre><code>char TextFromFile[16]; //note \"*\" has been removed \nconst char fileSpecToSource[] = {\"some path location\\\\someFileName.txt\"};//Windows\nconst char fileSpecToSource[] = {\"some path location/someFileName.txt\"};//Linux\n</code></pre>\n\n<p>From within a function, the statement:</p>\n\n<pre><code>FILE *fp = fopen(fileSpecToSource, \"r\");//file location is local to source directory.\n</code></pre>\n\n<p>if successful (i.e. fp != NULL), <code>fp</code> can be used as the <em>stream</em> argument in:</p>\n\n<pre><code>fgets(TextFromFile, 16, fp);\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10307643"}, "edited": false, "score": 0, "creation_date": 1544236891, "post_id": 53678924, "comment_id": 94215917, "body": "Why <code>memset</code>? Why a loop that will overwrite lines as soon as they are read? Why no <code>fclose</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "edited": false, "score": 0, "creation_date": 1544236986, "post_id": 53678924, "comment_id": 94215927, "body": "Its purpose is to make sure all the allocated memory is empty before using it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "edited": false, "score": 0, "creation_date": 1544237144, "post_id": 53678924, "comment_id": 94215955, "body": "I know it is not critical, but I do it just in case"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1544252949, "post_id": 53678924, "comment_id": 94218129, "body": "@Asadefa Just in case what? And no, it&#39;s not really stupid; current directory notation works fine as long as it&#39;s actually correct."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1544305303, "post_id": 53678924, "comment_id": 94230868, "body": "You should check the return value of <code>fopen</code> and do something if it&#39;s NULL, indicating that opening the file failed (instead of getting a segfault and wondering why)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1544305377, "post_id": 53678924, "comment_id": 94230890, "body": "@M.M &quot;doing something if it&#39;s NULL&quot; Doing what?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1544305567, "post_id": 53678924, "comment_id": 94230959, "body": "Print an error message and exit the program would be one option"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1544305749, "post_id": 53678924, "comment_id": 94231019, "body": "@M.M like using exit(1)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "is_accepted": true, "score": 1, "last_activity_date": 1544304200, "last_edit_date": 1544304200, "creation_date": 1544235023, "answer_id": 53678924, "question_id": 53640128, "link": "https://stackoverflow.com/questions/53640128/how-can-i-refer-to-a-file-as-the-stream-for-fgets/53678924#53678924", "title": "How can I refer to a file as the stream for fgets()?", "body": "<p>Later I found out the problem. <code>fopen</code> is stupid. Using <code>./file.txt</code> or others will not work. I need to use the whole file path to do it. </p>\n\n<pre><code>FILE (*File) = fopen(\"/home/asadefa/Desktop/txt.txt\", \"r\");\nchar FData[0x100];\nmemset(FData, '\\0', 0x100);\nfor(z = 0; z &lt; 0x100; ++z) {\n    fgets(FData, 0x100, File);\n}\nfclose(File);\n</code></pre>\n\n<p>I should have noted that the full file path is used.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12211554"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 53678924, "answer_count": 2, "score": 0, "last_activity_date": 1544304200, "creation_date": 1544041290, "last_edit_date": 1544041739, "question_id": 53640128, "link": "https://stackoverflow.com/questions/53640128/how-can-i-refer-to-a-file-as-the-stream-for-fgets", "title": "How can I refer to a file as the stream for fgets()?", "body": "<p>fgets() returns a string from a provided stream. One is stdin, which is the user input from the terminal. I know how to do this, but if I am using compiled c code in applications, this is not very useful. It would be more useful if I could get a string from a file. That would be cool. Apparently, there is some way to provide a text file as the stream. Suppose I have the following code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(int argc, const char *argv){\n    char *TextFromFile[16];\n    fgets(TextFromFile, 16, /*stream that refers to txt file*/);\n    printf(\"%s\\n\", TextFromFile);\n    return 0;\n}\n</code></pre>\n\n<p>Suppose there is a text file in the same directory as the c file. How can I make the printf() function print the contents of the text file? </p>\n"}, {"tags": ["c", "function", "testing", "pow"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1544041421, "post_id": 53640096, "comment_id": 94139757, "body": "&quot;Not working&quot; means what? Please give us something concrete to build on here."}, {"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544041634, "post_id": 53640096, "comment_id": 94139880, "body": "So the function does not calculate at all for pow(-111, INT_MAX) meaning my function xpow does not give any result for those values or they are not equal to the values from the real pow function..does that help ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544041947, "post_id": 53640096, "comment_id": 94140032, "body": "It&#39;s going to give a <code>double</code> result regardless. Do you have a test case for this code are you just hammering at it randomly? Test-driven development, where you have well-defined tests for all your boundary conditions, is key here."}, {"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544042145, "post_id": 53640096, "comment_id": 94140125, "body": "yeah i will edit the test function...and the function is a bit complicated i know...i don&#39;t know how to improve it though because i&#39;m still learning..."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 2, "creation_date": 1544042414, "post_id": 53640096, "comment_id": 94140251, "body": "Are you familiar with the concept of overflow?  And what maximum size that a double could possibly represent accurately?  I&#39;d suggest starting at a lower exponent and increasing it until your result is garbage, then step through in a debugger to determine why."}, {"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544042604, "post_id": 53640096, "comment_id": 94140325, "body": "yeah that&#39;s what I am trying to test for with DBL_MAX and DBL_MIN... I have to test for overflow and underflow so if the value is too big to be represented as a double or too small so it&#39;s basically 0 but still positive or almost 0 but negative"}, {"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544043383, "post_id": 53640096, "comment_id": 94140682, "body": "I guess the problem is that y is of type int and then I can&#39;t test it for pow(-111, INT_MAX) because then y is exactly the maximum or I&#39;m not sure what is going wrong here...a friend told me i have to somehow test if y is a even number or not ? but i didn&#39;t really understand at all what he meant by that or why or how to do it.."}, {"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544043757, "post_id": 53640096, "comment_id": 94140861, "body": "so I am testing if my function xpow give the same values as the real pow function and in almost every case I test it does. Exept for xpow(-111, INT_MAX) which is to the same as pow(-111, INT_MAX) my own xpow function gives me 1.#INF00 I am surprized it works for xpow(-111, -INT_MAX)"}, {"owner": {"reputation": 323, "user_id": 6567423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3900c5cbb1e5aa19a8311f4114dd72?s=128&d=identicon&r=PG&f=1", "display_name": "user6567423", "link": "https://stackoverflow.com/users/6567423/user6567423"}, "edited": false, "score": 0, "creation_date": 1544043776, "post_id": 53640096, "comment_id": 94140871, "body": "Code is incomplete the xfabs function is missing and could be the culprit, unlikely, but please include this function in the post"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544047578, "post_id": 53641025, "comment_id": 94142428, "body": "I was thinking about adding a case for x &amp;&amp; y = 0 but 0 at the power of 0 should be 1 and I have a case for which y = 0 that already returns 1. I know the code is pretty messy and inneficient but i first wanted to make it work. I will try to improve it if I can."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544049564, "post_id": 53641025, "comment_id": 94143102, "body": "@Saty Why should it be 1? Mathematically 0^0 is not defined."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1544049971, "post_id": 53641025, "comment_id": 94143247, "body": "I think the exercise is to create <code>xpow</code> so that it exactly replicates <code>pow</code>. And, <code>pow(0,0)</code> returns <code>1</code>"}, {"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1544119359, "post_id": 53641025, "comment_id": 94172859, "body": "@CraigEstey yes that is correct.  idk google says it&#39;s 1. Also i have since thought about how i could implement the code and improve it. Basically i will try to make everything with a single loop not 4 and i need to check if y so the exponent is even or odd. If x is negative for example but y is even, the result will be HUGE_VAL positive, but if x is negative and y is odd, then it will be negative so -HUGE_VAL. This will also solve the issue for xpow(-111, INT_MAX)"}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544121443, "post_id": 53641025, "comment_id": 94173730, "body": "@Saty If that&#39;s the reason it makes sense. The reason it is undefined in mathematics is that 0^x=0 and x^0=1, and you cannot satisfy both for 0^0."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 0, "last_activity_date": 1544045238, "creation_date": 1544045238, "answer_id": 53641025, "question_id": 53640096, "link": "https://stackoverflow.com/questions/53640096/checking-limits-of-own-pow-function-in-c/53641025#53641025", "title": "Checking limits of own pow function in C?", "body": "<p>For correctness, you should add the special case <code>if (y == 0 &amp;&amp; x == 0) { errno = EDOM;</code></p>\n\n<p>You have a lot of duplicated code. You should add <code>if(y&lt;0) return 1.0/xpow(x, -y);</code> to get rid of those.</p>\n\n<p>The code is also pretty inefficient with longer loops than necessary. You should utilize that x^y=(x^(y/2))^2. Doing that recursively would save a lot of iterations. Of course, you have to treat odd numbers with a little addon.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544046020, "post_id": 53641030, "comment_id": 94141889, "body": "yes the xpow(0, -3) should return an error because you can&#39;t calculate 0 at the power of negative numbers. Also thanks for cleaning up my code a bit."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544049475, "post_id": 53641030, "comment_id": 94143078, "body": "You&#39;re welcome. I had thought about comparing <code>errno</code> values as well, so I&#39;ve edited the code to include that as part of test pass. The bulk of your function logic seems to produce good results, so I think you&#39;re very close."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "edited": false, "score": 0, "creation_date": 1544050371, "post_id": 53641030, "comment_id": 94143376, "body": "BTW, <code>TEST(0,-1)</code> should be added. It [currently] produces a mismatch."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": true, "score": 1, "last_activity_date": 1544049291, "last_edit_date": 1544049291, "creation_date": 1544045249, "answer_id": 53641030, "question_id": 53640096, "link": "https://stackoverflow.com/questions/53640096/checking-limits-of-own-pow-function-in-c/53641030#53641030", "title": "Checking limits of own pow function in C?", "body": "<p><em>Caveat:</em> This isn't a solution to your failing test case per se.</p>\n\n<p>But, I simplified your function a bit--this may help.</p>\n\n<p>And I greatly simplified/enhanced your test case function [using some preprocessor trickery].</p>\n\n<p>However, in addition to your failed test <code>-111,INT_MAX</code>, when I ran it here, the <code>0,-3</code> test reports failure.</p>\n\n<hr>\n\n<p>Here's the modified source:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;math.h&gt;\n#include &lt;float.h&gt;\n#include &lt;limits.h&gt;\n//#include \"xmath.h\"\n\ndouble\nxfabs(double x)\n{\n\n    if (x &lt; 0)\n        x = -x;\n\n    return x;\n}\n\ndouble\nxpow(double x, int y)\n{\n    errno = 0;\n    int i;\n    double lim;\n    double prod = 1;\n    double abs_x;\n\n    if (y == 0)\n        return 1.0;\n    if ((x == 0) &amp;&amp; (y &lt; 0)) {\n        errno = EDOM;\n        return 0.0;\n    }\n\n    abs_x = xfabs(x);\n\n    if (abs_x &gt;= 1) {\n        if (y &gt; 0) {\n            lim = DBL_MAX / abs_x;\n            for (i = 0; i &lt; y; i++) {\n                if (xfabs(prod) &gt; lim) {\n                    errno = ERANGE;\n                    return HUGE_VAL;\n                }\n                prod *= x;\n            }\n        }\n\n        if (y &lt; 0) {\n            lim = DBL_MIN / abs_x;\n            for (i = 0; i &gt; y; i--) {\n                if (xfabs(prod) &lt; lim) {\n                    errno = ERANGE;\n                    return -0.0;\n                }\n                prod *= 1 / x;\n            }\n        }\n\n        return prod;\n    }\n\n    if (y &gt; 0) {\n        lim = DBL_MIN / abs_x;\n        for (i = 0; i &lt; y; i++) {\n            if (xfabs(prod) &lt; lim) {\n                errno = ERANGE;\n                return +0.0;\n            }\n            prod *= x;\n        }\n    }\n\n    if (y &lt; 0) {\n        lim = DBL_MAX / abs_x;\n        for (i = 0; i &gt; y; i--) {\n            if (xfabs(prod) &lt; lim) {\n                errno = ERANGE;\n                return -HUGE_VAL;\n            }\n            prod *= 1 / x;\n        }\n    }\n\n    return prod;\n}\n\nint passcnt = 0;\nint failcnt = 0;\n\nvoid\ndotest(const char *name,double x,int y)\n{\n    int sverr_pow;\n    int sverr_xpow;\n    double expected;\n    double actual;\n    int passflg;\n\n    printf(\"\\n\");\n    printf(\"%s\\n\",name);\n\n    errno = 0;\n    expected = pow(x,y);\n    sverr_pow = errno;\n\n    printf(\"%.16g (pow)\\n\",expected);\n    if (sverr_pow)\n        printf(\"errno: %d (%s)\\n\",sverr_pow,strerror(sverr_pow));\n\n    errno = 0;\n    actual = xpow(x,y);\n    sverr_xpow = errno;\n\n    printf(\"%.16g (xpow)\\n\",actual);\n    if (sverr_xpow)\n        printf(\"errno: %d (%s)\\n\",sverr_xpow,strerror(sverr_xpow));\n\n    if ((actual == expected) &amp;&amp; (sverr_xpow == sverr_pow))\n        passcnt += 1;\n    else\n        failcnt += 1;\n\n    printf(\"Result: Value:%s errno:%s\\n\",\n        (actual == expected) ? \"PASS\" : \"FAIL\",\n        (sverr_xpow == sverr_pow) ? \"PASS\" : \"FAIL\");\n}\n\n#define TEST(x,y) \\\n    dotest(#x \",\" #y,x,y)\n\nvoid xpow_tests(void)\n{\n    printf(\"XPOW TESTS (SUCCESS == 1 / FAILURE == 0)\\n\");\n    printf(\"=================================================\\n\");\n\n    TEST(2, 5);\n    TEST(-2, -4);\n    TEST(1, 15);\n    TEST(-4, 414);\n    TEST(-5, 303);\n    TEST(0, -3);\n    TEST(1.0e-10, 100);\n    TEST(-1.0e-10, 101);\n    TEST(-111, INT_MAX);\n    TEST(-111, INT_MAX-1);\n    TEST(-111, -INT_MAX);\n    TEST(-111, -INT_MAX+1);\n\n    printf(\"=================================================\\n\");\n    printf(\"errno (EDOM: %i / ERANGE: %i)\\n\\n\", EDOM, ERANGE);\n\n    printf(\"PASSED: %d, FAILED: %d\\n\",passcnt,failcnt);\n}\n\nint\nmain(void)\n{\n    xpow_tests();\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Here's the output of the tests:</p>\n\n<pre><code>XPOW TESTS (SUCCESS == 1 / FAILURE == 0)\n=================================================\n\n2,5\n32 (pow)\n32 (xpow)\nResult: Value:PASS errno:PASS\n\n-2,-4\n0.0625 (pow)\n0.0625 (xpow)\nResult: Value:PASS errno:PASS\n\n1,15\n1 (pow)\n1 (xpow)\nResult: Value:PASS errno:PASS\n\n-4,414\n1.789931494904685e+249 (pow)\n1.789931494904685e+249 (xpow)\nResult: Value:PASS errno:PASS\n\n-5,303\n-6.136366831622158e+211 (pow)\n-6.136366831622158e+211 (xpow)\nResult: Value:PASS errno:PASS\n\n0,-3\ninf (pow)\nerrno: 34 (Numerical result out of range)\n0 (xpow)\nerrno: 33 (Numerical argument out of domain)\nResult: Value:FAIL errno:FAIL\n\n1.0e-10,100\n0 (pow)\nerrno: 34 (Numerical result out of range)\n0 (xpow)\nerrno: 34 (Numerical result out of range)\nResult: Value:PASS errno:PASS\n\n-1.0e-10,101\n-0 (pow)\nerrno: 34 (Numerical result out of range)\n0 (xpow)\nerrno: 34 (Numerical result out of range)\nResult: Value:PASS errno:PASS\n\n-111,INT_MAX\n-inf (pow)\nerrno: 34 (Numerical result out of range)\ninf (xpow)\nerrno: 34 (Numerical result out of range)\nResult: Value:FAIL errno:PASS\n\n-111,INT_MAX-1\ninf (pow)\nerrno: 34 (Numerical result out of range)\ninf (xpow)\nerrno: 34 (Numerical result out of range)\nResult: Value:PASS errno:PASS\n\n-111,-INT_MAX\n-0 (pow)\nerrno: 34 (Numerical result out of range)\n-0 (xpow)\nerrno: 34 (Numerical result out of range)\nResult: Value:PASS errno:PASS\n\n-111,-INT_MAX+1\n0 (pow)\nerrno: 34 (Numerical result out of range)\n-0 (xpow)\nerrno: 34 (Numerical result out of range)\nResult: Value:PASS errno:PASS\n=================================================\nerrno (EDOM: 33 / ERANGE: 34)\n\nPASSED: 10, FAILED: 2\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 10541500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iVyZfTvnir4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW8ixGcnfxmYOkm9kJzBM4-rArkJg/mo/photo.jpg?sz=128", "display_name": "Saty", "link": "https://stackoverflow.com/users/10541500/saty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 53641030, "answer_count": 2, "score": 2, "last_activity_date": 1544049291, "creation_date": 1544041097, "last_edit_date": 1544043923, "question_id": 53640096, "link": "https://stackoverflow.com/questions/53640096/checking-limits-of-own-pow-function-in-c", "title": "Checking limits of own pow function in C?", "body": "<p>So I have am trying to implement my own pow function. To make things somewhat simpler I am allowed to use type int for the exponent. So the code is working...mostly. I have a file called xmath.c in which I implement my pow function and another test.c to test the limits. The only case in which it's not working is for <code>pow(-111, INT_MAX)</code>. How could I improve my code ? Also tell me if I should post the test.c code as well. <code>xfabs</code> is another function that I had to implement on my own instead of using <code>fabs</code>.</p>\n\n<p>Forgot to include xfabs in my post:</p>\n\n<pre><code>#define xfabs(x) (((x) &gt; 0) ? (x) : (-(x)))\n\n#include &lt;stdio.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;math.h&gt;\n#include &lt;float.h&gt;\n#include \"xmath.h\"\n\ndouble xpow(double x, int y)\n{\n    errno = 0;\n    double product = 1;\n    double prod = 1;\n    int i;\n\n    if (y == 0) {\n        return 1.0;\n    } else if (x == 0 &amp;&amp; y &lt; 0) {\n        errno = EDOM;\n        return 0.0;\n    }\n\n    if (xfabs(x) &gt;= 1) {\n        if (y &gt; 0) {\n            for (i = 0; i &lt; y; i++) {\n                if (xfabs(product) &gt; DBL_MAX / xfabs(x)) {\n                        errno = ERANGE;\n                        return HUGE_VAL;\n                    }\n                    product *= x;\n                }\n            return product;\n        } else if (y &lt; 0) {\n            for (i = 0; i &gt; y; i--) {\n                if (xfabs(product) &lt; DBL_MIN / xfabs(x)) {\n                    errno = ERANGE;\n                    return -0.0;\n                }\n                product *= 1 / x;\n            }\n            return product;\n        }\n\n    } else if (xfabs(x) &lt; 1) {\n        if (y &gt; 0) {\n            for (i = 0; i &lt; y; i++) {\n                if (xfabs(prod) &lt; DBL_MIN / xfabs(x)) {\n                    errno = ERANGE;\n                    return +0.0;\n                }\n                prod *= x;\n            }\n            return prod;\n        } else if (y &lt; 0) {\n            for (i = 0; i &gt; y; i--) {\n                if (xfabs(prod) &lt; DBL_MAX / xfabs(x)) {\n                    errno = ERANGE;\n                    return -HUGE_VAL;\n                }\n                prod *= 1 / x;\n            }\n            return prod;\n        }\n    }\n}\n</code></pre>\n\n<p>Here is the test function. Also I am creating an object file for xmath.c which I use in test.c: </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;float.h&gt;\n#include &lt;math.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;limits.h&gt;\n\n#include \"xmath.h\"\n\nvoid xpow_tests(void)\n{\n    printf(\"XPOW TESTS (SUCCESS == 1 / FAILURE == 0)\\n\");\n    printf(\"=================================================\\n\");\n    printf(\"Test (xpow(2, 5)): \\t\\t%i\\t\", xpow(2, 5) == pow(2, 5));\n    xpow(2, 5);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-2, -4)): \\t\\t%i\\t\", xpow(-2, -4) == pow(-2, -4));\n    xpow(-2, -4);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(1, 15)): \\t\\t%i\\t\", xpow(1, 15) == pow(1, 15));\n    xpow(1, 15);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-4, 414)): \\t\\t%i\\t\", xpow(-4, 414) == pow(-4, 414));\n    xpow(-4, 414);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-5, 303)): \\t\\t%i\\t\", xpow(-5, 303) == pow(-5, 303));\n    xpow(-5, 303);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(0, -3)): \\t\\t%i\\t\", xpow(0, -3) == 0);\n    xpow(0, -3);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(1.0e-10, 100)): \\t%i\\t\", xpow(1.0e-10, 100) == pow(1.0e-10, 100));\n    xpow(1.0e-10, 100);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-1.0e-10, 101)): \\t%i\\t\", xpow(-1.0e-10, 101) == pow(-1.0e-10, 101));\n    xpow(-1.0e-10, 101);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-111, INT_MAX)): \\t%i\\t\", xpow(-111, INT_MAX) == pow(-111, INT_MAX));\n    xpow(-111, INT_MAX);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-111, INT_MAX-1)): \\t%i\\t\", xpow(-111, INT_MAX-1) == pow(-111, INT_MAX-1));\n    xpow(-111, INT_MAX-1);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-111, -INT_MAX)): \\t%i\\t\", xpow(-111, -INT_MAX) == pow(-111, -INT_MAX));\n    xpow(-111, -INT_MAX);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"Test (xpow(-111, -INT_MAX+1)): \\t%i\\t\", xpow(-111, -INT_MAX+1) == pow(-111, -INT_MAX+1));\n    xpow(-111, -INT_MAX+1);\n    printf(\"errno: %i\\n\", errno);\n    printf(\"=================================================\\n\");\n    printf(\"errno (EDOM: %i / ERANGE: %i)\\n\\n\", EDOM, ERANGE);\n}\n\nint main(void)\n{\n    xpow_tests();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "unix"], "comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1544048253, "post_id": 53639948, "comment_id": 94142657, "body": "Your <code>copy_from_user()</code> is incorrect, it should be <code>copy_from_user(&amp;j, buf, sizeof (int))</code>. Your userspace code should check and report errors, as well.  Also, you&#39;ll want to ensure <code>SIDES != 0</code> at all times, to avoid division by zero.  I&#39;d use <code>if (j &gt; 0) SIDES = j; else return -EINVAL;</code>."}, {"owner": {"reputation": 1, "user_id": 10751421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84291214becf26db515efe496d0dc0e?s=128&d=identicon&r=PG&f=1", "display_name": "Auryn", "link": "https://stackoverflow.com/users/10751421/auryn"}, "reply_to_user": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 0, "creation_date": 1544131437, "post_id": 53639948, "comment_id": 94178002, "body": "Thanks, that got it to actually go into the write function. In addition I had to add some code to the project file to get it to fully work, you&#39;re a lifesaver."}], "owner": {"reputation": 1, "user_id": 10751421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84291214becf26db515efe496d0dc0e?s=128&d=identicon&r=PG&f=1", "display_name": "Auryn", "link": "https://stackoverflow.com/users/10751421/auryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1544040355, "creation_date": 1544040355, "question_id": 53639948, "link": "https://stackoverflow.com/questions/53639948/how-should-i-implement-my-device-write-function", "title": "How should I implement my device write function?", "body": "<p>I'm having trouble with part of a game project. For the project we're supposed to create a device driver for a dice that we implement later in the project. My problem is that my dice_write() function doesn't seem to be working, or even being reached at all. I'm wondering if it's due to the driver code, or the way I'm implementing it within the project. </p>\n\n<p>Here is the relevant part of the driver .c file:</p>\n\n<pre><code>static int SIDES = 6;\n\nunsigned char get_random_byte(int max)\n{\n    unsigned char c;\n    get_random_bytes(&amp;c, 1);\n    return ((c%max)+1);\n}\n\n//dice_read omitted (it works fine)\n\nstatic ssize_t dice_write(struct file * file, const char * buf, size_t count, loff_t *ppos)\n{\n    printk(KERN_ERR \"WRITE\");\n    int j;\n    int len = sizeof(int);\n    if(*ppos != 0)\n    {\n        return 0;\n    }\n    if(copy_from_user(buf, j, 1))\n    {\n        return -EINVAL;\n    }\n    *ppos = len;\n    SIDES = j;\n    printk(KERN_ERR \"\\nSides: %d\",SIDES);\n    //printk(KERN_ERR \"write(file, 0x%p, %d, %lld)\\n\", buf, count, *ppos);\n    return len;\n}\n</code></pre>\n\n<p>And here is how I implemented it within the project:</p>\n\n<pre><code>int roll(int sides)\n{\n    unsigned int roll;\n    int i = open(\"/dev/dice\", O_RDWR);\n    write(i, &amp;sides, sizeof(int));\n    read(i, &amp;roll, sizeof(int));\n    close(i);\n    printf(\"ROLL: %d\\n\",roll);\n    return roll;\n}\n</code></pre>\n\n<p>Currently read works, but write doesn't so SIDES is never updated and there is no output from the printks, which is what I want (the program is a game where the sides of the dice differ so I need to write a new number to sides). Can anyone help me figure out how to implement write correctly?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1544040013, "post_id": 53639747, "comment_id": 94139156, "body": "Can you explain you logic behind the for loop: <code>for(z=height-(2*x);z&gt;0;z=z-2)</code> when x is 1, you need to print out 8 spaces, yet you only print 2 (z=5-2*1=3, z=3-2=1 and then the end condition is met when z=1-2=-1)."}], "answers": [{"comments": [{"owner": {"reputation": 756, "user_id": 1218593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba149a8d749cc0352786563361d96288?s=128&d=identicon&r=PG", "display_name": "Adeel Mughal", "link": "https://stackoverflow.com/users/1218593/adeel-mughal"}, "edited": false, "score": 0, "creation_date": 1544040246, "post_id": 53639906, "comment_id": 94139265, "body": "Yes Its perfect"}, {"owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "reply_to_user": {"reputation": 756, "user_id": 1218593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba149a8d749cc0352786563361d96288?s=128&d=identicon&r=PG", "display_name": "Adeel Mughal", "link": "https://stackoverflow.com/users/1218593/adeel-mughal"}, "edited": false, "score": 0, "creation_date": 1544040545, "post_id": 53639906, "comment_id": 94139393, "body": "@AdeelMughal As a side note, you asked about C++, but you actually only use C. C++ is a very different language from C, but C programs can often be compiled as C++, because C is almost a subset of C++."}], "tags": [], "owner": {"reputation": 10901, "user_id": 578749, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/40231a11da5f1c627fd21d6700edddff?s=128&d=identicon&r=PG", "display_name": "lvella", "link": "https://stackoverflow.com/users/578749/lvella"}, "is_accepted": true, "score": 1, "last_activity_date": 1544040111, "creation_date": 1544040111, "answer_id": 53639906, "question_id": 53639747, "link": "https://stackoverflow.com/questions/53639747/how-to-draw-shape-using-stars-in-c/53639906#53639906", "title": "how to draw shape using stars in C", "body": "<p>I guess you just got the middle section wrong. Try this to print the spaces:</p>\n\n<pre><code>    for(z=0 ;z &lt; height - x; ++z)\n        printf(\"  \"); // &lt;- Notice there are 2 spaces being printed here.\n</code></pre>\n"}], "owner": {"reputation": 756, "user_id": 1218593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba149a8d749cc0352786563361d96288?s=128&d=identicon&r=PG", "display_name": "Adeel Mughal", "link": "https://stackoverflow.com/users/1218593/adeel-mughal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 53639906, "answer_count": 1, "score": -3, "last_activity_date": 1544040822, "creation_date": 1544039480, "last_edit_date": 1544040822, "question_id": 53639747, "link": "https://stackoverflow.com/questions/53639747/how-to-draw-shape-using-stars-in-c", "title": "how to draw shape using stars in C", "body": "<p>I am trying to print starts like Image attached in nested for loop, but after writing code, I am getting the result like below</p>\n\n<p><a href=\"https://i.stack.imgur.com/qnTBU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qnTBU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Following is code</p>\n\n<pre><code>int main() {\n    int height = 5, y, z;\n    for(int x=1; x&lt;=height; x++)\n    {\n        for(y=1;y&lt;=x;y++)\n            printf(\"*\");\n\n        for(z=height-(2*x);z&gt;0;z=z-2)\n            printf(\" \");\n        for(y=1;y&lt;=x;y++)\n            printf(\"*\");\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>The result is following, but I need exact print like showing in the image.</p>\n\n<pre><code>*  *\n** **\n******\n********\n**********\n</code></pre>\n"}, {"tags": ["c", "pointers", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1544039376, "post_id": 53639700, "comment_id": 94138896, "body": "There&#39;s no pointer arithmetic here."}, {"owner": {"reputation": 33, "user_id": 8070445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fca67a973054db05471b2ac35c042ae2?s=128&d=identicon&r=PG", "display_name": "user8070445", "link": "https://stackoverflow.com/users/8070445/user8070445"}, "reply_to_user": {"reputation": 613, "user_id": 3112926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b33809c5d0f78b110e8613c9e5972dd5?s=128&d=identicon&r=PG&f=1", "display_name": "JGroven", "link": "https://stackoverflow.com/users/3112926/jgroven"}, "edited": false, "score": 0, "creation_date": 1544039623, "post_id": 53639700, "comment_id": 94138982, "body": "@JGroven I have updated the snippet."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1544039826, "post_id": 53639700, "comment_id": 94139074, "body": "More likely a shift than a division as the size of integer types is usually a power of 2. This is different from the converse: computing an address from an array index, where a processor might have an instruction that inherently does the multiply. But as @Yunnosch says that is an implementation detail."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1544040029, "post_id": 53639700, "comment_id": 94139167, "body": "You set <code>q = p + 1</code>. Why are you surprised that <code>q - p</code> is <code>1</code>, since that&#39;s what you added?"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1544040045, "post_id": 53639700, "comment_id": 94139177, "body": "@Yunnosch What if OP had done: <code>int arr[2]; int *p = &amp;arr[0]; int *q = p + 1; unsigned long r = q - p;</code> I believe OP is more interested why the value of <code>r</code> is 1 and not 4 [and if a division by 4 is done to get 1--which can be optimized to a shift]."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1544040912, "post_id": 53639700, "comment_id": 94139546, "body": "@Barmar: The question is about the underlying implementation, not the result. The OP expresses no surprise at the result, so it is wrong to infer it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544041349, "post_id": 53639700, "comment_id": 94139723, "body": "The specific method will be implementation-dependent, although it&#39;s arithmetically equivalent to division."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 4, "last_activity_date": 1544041224, "last_edit_date": 1544041224, "creation_date": 1544040016, "answer_id": 53639878, "question_id": 53639700, "link": "https://stackoverflow.com/questions/53639700/division-during-pointer-subtraction-in-c/53639878#53639878", "title": "division during pointer subtraction in C", "body": "<p>The <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C standard</a> states the following regarding pointer subtraction (section 6.5.6p9):</p>\n\n<blockquote>\n  <p>When two pointers are subtracted, both shall point to elements of the\n  same array object, or  one  past  the  last  element  of  the  array \n  object;  <strong>the  result  is  the  difference  of  the subscripts  of  the\n  two array  elements</strong>.  The  size  of  the  result  is \n  implementation-defined, and its type (a signed integer type) is\n  ptrdiff_t defined in the  header. If  the  result  is  not \n  representable  in  an  object  of  that  type,  the  behavior  is \n  undefined.  In other words, if the expressions P and Q point to,\n  respectively, the i\n  -th and j\n  -th elements of an array object, the expression (P)-(Q) has the value i\u2212j provided the value fits in an object of type ptrdiff_t . Moreover,\n  if the  expression P points either to an element of an array object or\n  one past the last element of an array object, and the expression Q\n  points to the last element of the same array object, the expression\n  ((Q)+1)-(P) has the same value  as ((Q)-(P))+1 and  as\n  -((P)-((Q)+1)) ,  and  has  the  value  zero  if  the expression P points  one  past  the  last  element  of  the  array  object,  even \n  though  the expression (Q)+1 does not point to an element of the array\n  object. <sup>106)</sup></p>\n</blockquote>\n\n<p>Footnote 106 states:</p>\n\n<blockquote>\n  <p><strong>Another way to approach pointer arithmetic is first to convert the\n  pointer(s) to character pointer(s)</strong>: In this scheme the integer\n  expression added to or subtracted from the converted pointer is first\n  multiplied by  the  size  of  the  object  originally  pointed  to, \n  and  the  resulting  pointer  is  converted  back  to  the original \n  type.  <strong>For pointer  subtraction,  the  result  of  the  difference \n  between  the  character  pointers  is similarly divided by the size of\n  the object originally pointed to.</strong> When  viewed  in  this  way, an\n  implementation  need  only  provide  one  extra  byte  (which  may \n  overlap another object in the program) just after the end of the\n  object in order to satisfy the \"one past the last element\"\n  requirements.</p>\n</blockquote>\n\n<p>So the footnote states that pointer subtraction <em>may</em> be implemented by subtracting the raw pointer values and dividing by the size of the pointed-to object.  It doesn't have to be implemented this way, however.</p>\n\n<p>Note also that the standard requires that pointer subtraction is performed between pointers pointing to elements of the same array object (or one element past the end).  If they don't then the behavior is undefined.  In practice, if you're working on a system with a flat memory model you'll probably still get the \"expected\" values but you can't depend on that.</p>\n"}, {"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1544044395, "creation_date": 1544044395, "answer_id": 53640829, "question_id": 53639700, "link": "https://stackoverflow.com/questions/53639700/division-during-pointer-subtraction-in-c/53640829#53640829", "title": "division during pointer subtraction in C", "body": "<p>See @dbush answer for the explanation on how pointer substraction works.</p>\n\n<p>If, instead, you are programming something low-level, say a kernel, driver, debugger or similar and you need to have actual subtraction of addresses, cast the pointers to <code>char *</code>:</p>\n\n<pre><code>(char *)q - (char *)p\n</code></pre>\n\n<p>The result will be of <code>ptrdiff_t</code> type, an implementation defined signed integer.</p>\n\n<p>Of course, this is not defined/portable C, but will work on most architectures/environments.</p>\n"}], "owner": {"reputation": 33, "user_id": 8070445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fca67a973054db05471b2ac35c042ae2?s=128&d=identicon&r=PG", "display_name": "user8070445", "link": "https://stackoverflow.com/users/8070445/user8070445"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 53639878, "answer_count": 2, "score": -1, "last_activity_date": 1544044395, "creation_date": 1544039285, "last_edit_date": 1544039450, "question_id": 53639700, "link": "https://stackoverflow.com/questions/53639700/division-during-pointer-subtraction-in-c", "title": "division during pointer subtraction in C", "body": "<p>Consider below code snippet :</p>\n\n<pre><code>int *p;\n/* Lets say p points to address 100 \n   and sizeof(int) is 4 bytes. */\nint *q = p+1;\nunsigned long r = q-p;\n/* r results in 1, hence for r = q-p \n   something is happening similar to r=(104-100)/4 */\n</code></pre>\n\n<p>Is there a real division by sizeof(datatype) going on during runtime when two pointers of same type are subtracted, or there is some other mechanism through which pointer subtraction works.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1544039462, "post_id": 53639674, "comment_id": 94138927, "body": "Simple question is where is it failing and what is it doing when you run it in a debugger - also what is the current output?  Finally, what compiler warning are being generated as they will give you some hints as well."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1544039785, "post_id": 53639674, "comment_id": 94139059, "body": "To start with, I know warnings will be generated on your first for loop about type assignment.  What do you think <code>rand(10)</code> does?  Right now it generates 1 weird ASCII character or a <code>NUL</code> character per string - not 10 characters like you may think.  And it doesn&#39;t assign it like you think either."}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1544040015, "post_id": 53639674, "comment_id": 94139159, "body": "I think that rand(10) will generate 10 random numbers."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1544040069, "post_id": 53639674, "comment_id": 94139194, "body": "<a href=\"https://en.cppreference.com/w/cpp/numeric/random/rand\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/random/rand</a>"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1544040155, "post_id": 53639674, "comment_id": 94139225, "body": "This could should not even compile.  Ok, new step 1, try actually compiling your code and fix the syntax errors."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544040158, "post_id": 53639674, "comment_id": 94139226, "body": "You don&#39;t use <code>&quot;&quot;</code> to embed quotes inside a string, you escape it with <code>\\&quot;</code>"}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1544040280, "post_id": 53639674, "comment_id": 94139279, "body": "I can&#39;t run debugging, because code isn&#39;t want to compile. So if I use propely this function, still numbers don&#39;t be unique..."}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544040330, "post_id": 53639674, "comment_id": 94139308, "body": "@Barmar But <code>&quot;&quot;</code> is same as <code>\\&quot;</code> in GNU Compiler."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544040337, "post_id": 53639674, "comment_id": 94139309, "body": "You can&#39;t assign to arrays in C, so you can&#39;t assign to <code>x[z]</code>. If you want to copy a string, you use <code>strcpy()</code>. But <code>rand()</code> doesn&#39;t return a string, it returns a single number."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544040497, "post_id": 53639674, "comment_id": 94139377, "body": "@SebastianBiega\u0144ski I can&#39;t find any documentation of that extension in the GCC manual. Do you have a reference?"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1544040503, "post_id": 53639674, "comment_id": 94139378, "body": "@Barmar - stop.  This code won&#39;t compile as-is.  OP needs to go back to hello world and start from there.  The assumption on <code>rand()</code> means there has been no research into functions.  The assignment across array type means there is no knowledge yet here either.  OP, please re-review arrays, strings, and other uses and hopefully get some help from your professor if you are in a class."}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544040671, "post_id": 53639674, "comment_id": 94139435, "body": "@Barmar Because i want to make 5000 random numbers (rows cannot duplicate) in double-array in this loop. Just like that:  1 row<code>3 9 2 6 2 6 3 3 2 1</code> 2 row <code>7 8 1 3 6 1 3 5 6 2</code>"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1544040765, "post_id": 53639674, "comment_id": 94139475, "body": "Please tell me you are not attempting to write production level hashing code and that this is an assignment?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544040869, "post_id": 53639674, "comment_id": 94139518, "body": "If you want 5000 random numbers you need to call <code>rand()</code> 5000 times, not 500 times. Why do you think <code>rand(10)</code> returns 10 random numbers? You seem to be programming by guessing what things do, not by actually learning the language and reading documentation."}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "edited": false, "score": 1, "creation_date": 1544040908, "post_id": 53639674, "comment_id": 94139543, "body": "I want to make my own game anti-cheatengine system."}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544041283, "post_id": 53639674, "comment_id": 94139692, "body": "@Barmar Look i have a[5][5] array: a[0] - return: ABCD(NULL) a[0][0] - return: A"}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1544041740, "post_id": 53639674, "comment_id": 94139937, "body": "@MichaelDorgan He using CheatEngine, huh."}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544041776, "post_id": 53639674, "comment_id": 94139949, "body": "@Barmar In C language double-array is not the same as double-array in JavaScript, remember."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544041858, "post_id": 53639674, "comment_id": 94139988, "body": "@SebastianBiega\u0144ski That&#39;s correct. C has true 2-dimensional arrays, while in JavaScript they&#39;re just arrays of arrays, similar to pointer arrays in C."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544041935, "post_id": 53639674, "comment_id": 94140021, "body": "That&#39;s why you can&#39;t assign to <code>x[z]</code>, because it&#39;s an array and arrays can&#39;t be assigned to."}, {"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1544043452, "post_id": 53639674, "comment_id": 94140709, "body": "Look: <a href=\"https://imgur.com/Zz8gC6W\" rel=\"nofollow noreferrer\">imgur.com/Zz8gC6W</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1544042002, "post_id": 53640234, "comment_id": 94140061, "body": "Thank you. I&#39;m going to change the world with my new anti-cheat system."}], "tags": [], "owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "is_accepted": true, "score": 0, "last_activity_date": 1544041716, "creation_date": 1544041716, "answer_id": 53640234, "question_id": 53639674, "link": "https://stackoverflow.com/questions/53639674/print-500-time-string-with-concatated-unique-random-number-in-text-file-in-c/53640234#53640234", "title": "Print 500 time string with concatated unique random number in text file in C", "body": "<p>Before this post closes and for giving me such entertainment, here is a small piece of your puzzle that is missing</p>\n\n<pre><code>char x[500][11];\nchar b[100];\nint a, z, i;\nfor(z = 0; z &lt; 500; z++)\n{\n    for(i=0; i&lt;10;i++)\n    {\n        x[z][i] = '0' + rand() % 10;\n    }\n    x[z][10] = '\\0';\n    printf(\"%s \\n\", x[z]);\n}\n</code></pre>\n\n<p>This does not check for uniqueness.  You will have to figure that out along with everything else.</p>\n"}], "owner": {"reputation": 3, "user_id": 10114760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6sqh6jbiUXc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rVEVmUyXNvN9Q6Cpct4edRao0lMg/mo/photo.jpg?sz=128", "display_name": "Sebastian Biega\u0144ski", "link": "https://stackoverflow.com/users/10114760/sebastian-biega%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 53640234, "answer_count": 1, "score": -3, "last_activity_date": 1544041716, "creation_date": 1544039193, "last_edit_date": 1544040481, "question_id": 53639674, "link": "https://stackoverflow.com/questions/53639674/print-500-time-string-with-concatated-unique-random-number-in-text-file-in-c", "title": "Print 500 time string with concatated unique random number in text file in C", "body": "<p>i want to write code that will print 500 line with this string:</p>\n\n<pre><code>if(strstr(\"\"token: XXXXXXXXXX\"\", token_read)){ token_num = X; }\n</code></pre>\n\n<p>So XXXXXXXXXX must be a unique (non-repeated) random number, and X must be number incremented by 1. And text file will be look like this:</p>\n\n<pre><code>if(strstr(\"\"token: 1312312412\"\", token_read)){ token_num = 1; }\nif(strstr(\"\"token: 5829572542\"\", token_read)){ token_num = 2; }\n</code></pre>\n\n<p>etc.</p>\n\n<p>But my code don't working, and if it would work code don't generate a unique numbers. So in double-array must be 500<strong>x</strong>10 random numbers</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nint main()\n{\n    char x[500][11];\n    char b[100];\n    int a, z;\n    for(z = 0; z &lt; 499; z++){\n        x[z] = rand(10);\n    }\n    FILE *fptr;\n    fptr = fopen(\"a.txt\", \"rb+\");\n    if(fptr == NULL){\n        fptr = fopen(\"a.txt\", \"wb\");\n        if (fptr == NULL)\n            return -1;\n        else\n            for(a = 2; a &lt; 500; a++){\n                snprintf(b, sizeof(b), \"if(strstr(\"\"token: %d\"\", token_read)){ token_num = a; }\", x[a])\n                fputs(b, fptr);\n            }\n    }\n    fclose(fptr);\n}\n</code></pre>\n\n<p>And sorry for my bad English.</p>\n"}, {"tags": ["c", "arrays", "struct"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 3, "creation_date": 1544038143, "post_id": 53639406, "comment_id": 94138351, "body": "<code>scanf(&quot;%d&quot;, p[counter].pid);</code> -&gt; <code>scanf(&quot;%d&quot;, &amp;p[counter].pid);</code>.  Same for the next two."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "edited": false, "score": 2, "creation_date": 1544038165, "post_id": 53639406, "comment_id": 94138368, "body": "Turn on your compiler warnings."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 5, "creation_date": 1544038186, "post_id": 53639406, "comment_id": 94138375, "body": "<code>if(argv[2] = &quot;FCFS&quot;){</code> <b>--&gt;&gt;</b> <code>if(!strcmp(argv[2] , &quot;FCFS&quot;)){</code>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1544038615, "post_id": 53639406, "comment_id": 94138546, "body": "<code>p[counter];</code> does nothing."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1544038623, "post_id": 53639406, "comment_id": 94138553, "body": "You are starting at 1, but arrays start at 0."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1544041756, "post_id": 53639406, "comment_id": 94139942, "body": "Turn on verbose warnings of your compiler, you should get messages about all these problems."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1544072374, "post_id": 53639406, "comment_id": 94148562, "body": "To turn on compiler warnings with gcc/clang add (at minimum) <code>-Wall -Wextra -pedantic</code> to your compiler options. For VS, e.g. <code>cl.exe</code>, add <code>&#47;W3</code> -- and do not accept code until it compiles without a single warning. That alone will go far to end your suffering... (that and... <i>Validate Every Single User Input...</i>)"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 2914647, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dfb0b321a0d814c9792893aed837f4ed?s=128&d=identicon&r=PG&f=1", "display_name": "Ison Thomas", "link": "https://stackoverflow.com/users/2914647/ison-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1544072082, "creation_date": 1544072082, "answer_id": 53644885, "question_id": 53639406, "link": "https://stackoverflow.com/questions/53639406/adding-structs-to-an-array-and-changing-their-attributes/53644885#53644885", "title": "Adding structs to an array and changing their attributes", "body": "<p>I am seeing mulitple issues in the code:</p>\n\n<ol>\n<li>if(argv[2] = \"FCFS\")</li>\n</ol>\n\n<p>A. I assume the objective is to compare things. It has to be \"==\" instead of \"=\". But again that doesn't work for strings</p>\n\n<p>B. For strings, you have to write it as if(!strcmp(argv[2], \"FCFS\")</p>\n\n<ol start=\"2\">\n<li><p>The line p[counter]; is not needed. It does not have any action.</p></li>\n<li><p>Counter has to be initialized to 0 instead of 1</p></li>\n<li><p>I am not sure of the members of struct process, but I am assuming they are all integers. In scanf you have to pass the address of the members</p></li>\n</ol>\n\n<p>scanf(\"%d\", &amp;p[counter].pid);</p>\n\n<p>scanf(\"%d\", &amp;p[counter].burstTime);</p>\n\n<p>scanf(\"%d\", &amp;p[counter].arrivalTime);</p>\n\n<p>If they are pointers to integers, then also segmentation fault will occur since they are not initialized anywhere in the code</p>\n"}], "owner": {"reputation": 1, "user_id": 10586896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a7eaa0a87404c2bebf231ad4925174?s=128&d=identicon&r=PG&f=1", "display_name": "SufferingCoder", "link": "https://stackoverflow.com/users/10586896/sufferingcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1544072082, "creation_date": 1544037962, "question_id": 53639406, "link": "https://stackoverflow.com/questions/53639406/adding-structs-to-an-array-and-changing-their-attributes", "title": "Adding structs to an array and changing their attributes", "body": "<pre><code>    int numOfProcesses = 0;\nprintf(\"How many processes would you like to enter: \");\nscanf(\"%d\",&amp;numOfProcesses);\nstruct process p[numOfProcesses];\nint counter = 1;\n// This is the quantum printf(argv[1]);\n// This is the type to run printf(argv[2]);\nif(argv[2] = \"FCFS\"){\n  while(counter &lt; numOfProcesses){\n    int temp;\n    p[counter];\n    printf(\"For process %d: \\n\",counter);\n    printf(\"Enter the pid: \");\n    scanf(\"%d\", p[counter].pid);\n    printf(\"Enter the burst time: \");\n    scanf(\"%d\",p[counter].burstTime);\n    printf(\"Enter the arrival time: \");\n    scanf(\"%d\",p[counter].arrivalTime);\n\n    counter++;\n  }\n</code></pre>\n\n<p>I am trying to get my code to hold an array of structs and allow me to edit the attributes of the structs in the array but everything keeps resulting in a seg fault. What am I doing worng?</p>\n"}, {"tags": ["c", "shell"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1544036974, "post_id": 53639029, "comment_id": 94137873, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (and fix your indentation)."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1544037210, "post_id": 53639029, "comment_id": 94137993, "body": "I am not sure how relevant <i><a href=\"https://stackoverflow.com/questions/11515399/implementing-shell-in-c-and-need-help-handling-input-output-redirection\">this post is</a></i> but it may help..."}, {"owner": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "reply_to_user": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1544037617, "post_id": 53639029, "comment_id": 94138154, "body": "@ryyker thanks i tried before but it gives same result."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "edited": false, "score": 0, "creation_date": 1544106947, "post_id": 53641356, "comment_id": 94165842, "body": "Thank you for your answer. I&#39;ve tried what you tell me. I tried to set arrow null yesterday but never thought to make the other parts null. So today i&#39;ve tried to set them null too.  But i still get the same result. I added my setNull method and where i used them. Could you help me?"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "edited": false, "score": 0, "creation_date": 1544113596, "post_id": 53641356, "comment_id": 94169880, "body": "What&#39;s the contents of the file if you run <code>echo hello &gt; myfile.txt</code> ?"}, {"owner": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "edited": false, "score": 0, "creation_date": 1544114487, "post_id": 53641356, "comment_id": 94170352, "body": "<code>hello myfile.txt</code>"}, {"owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "reply_to_user": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "edited": false, "score": 0, "creation_date": 1544115742, "post_id": 53641356, "comment_id": 94171030, "body": "Sounds like <code>&gt;</code> is removed while <code>myfile.txt</code> is not. You can check this with a debugger or <code>strace -f</code>"}, {"owner": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "edited": false, "score": 0, "creation_date": 1544115885, "post_id": 53641356, "comment_id": 94171104, "body": "i just noticed that my program never enters if statement in set Null method. I have exactly same method for checking &#39;&amp;&#39; for background processes and works properly."}, {"owner": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "edited": false, "score": 0, "creation_date": 1544116893, "post_id": 53641356, "comment_id": 94171609, "body": "I finally did it. In somewhere make <code>&#39;\\0&#39;</code> argument arrray make this problem occur. So array be trimmed so much earlier before execution and some arguments can&#39;t make it to <code>exec</code> function. Thank you so much."}], "tags": [], "owner": {"reputation": 100758, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "is_accepted": true, "score": 1, "last_activity_date": 1544046920, "creation_date": 1544046920, "answer_id": 53641356, "question_id": 53639029, "link": "https://stackoverflow.com/questions/53639029/my-custom-shell-program-redirects-only-one-line/53641356#53641356", "title": "My custom shell program redirects only one line", "body": "<p>Based on your description and glimpses of the code, I'm guessing you don't remove <code>&gt;</code> and <code>myfile.txt</code> from the arguments array.</p>\n\n<p>If you enter:</p>\n\n<pre><code>ls &gt; myfile.txt\n</code></pre>\n\n<p>then the argument array you execute the program with must be:</p>\n\n<pre><code>{\"ls\", NULL}\n</code></pre>\n\n<p>It CANNOT be:</p>\n\n<pre><code>{\"ls\", \"&gt;\", \"myfile.txt\", NULL}\n</code></pre>\n\n<p>because in the that case, it'll just show an error and the output file will just contain itself, just like you're seeing.</p>\n"}], "owner": {"reputation": 131, "user_id": 7120372, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/67ec6b76f0d6db196fa0270653743dba?s=128&d=identicon&r=PG&f=1", "display_name": "M. Aktas", "link": "https://stackoverflow.com/users/7120372/m-aktas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 53641356, "answer_count": 1, "score": -1, "last_activity_date": 1544106818, "creation_date": 1544036314, "last_edit_date": 1544106818, "question_id": 53639029, "link": "https://stackoverflow.com/questions/53639029/my-custom-shell-program-redirects-only-one-line", "title": "My custom shell program redirects only one line", "body": "<p>We are trying to make a simple shell. In this shell currently every built-in linux commands works properly. For example <code>ls</code> prints: </p>\n\n<pre><code>bbb.txt  cccc.txt  cmake-build-debug  CMakeLists.txt  e444.txt  library.c  library.h  mainSetup  mainSetup.c  nnnn.txt  qwe.txt  wqeqwe.txt  yyyy.txt\n</code></pre>\n\n<p>When i try to redirect this output to a file it only writes currently created file. For example i write <code>ls &gt; myfile.txt</code> content of the myfile.txt will be <code>myfile.txt</code>. I don't know why it prints only its line and ignore other lines. Here is my redirection code:</p>\n\n<pre><code>    int fd = open(findTheLastArg(args, 0), O_RDWR | O_CREAT | O_APPEND, S_IRUSR | S_IWUSR);\n                    dup2(fd, 1);   // make stdout go to file\n                    close(fd);\n splitter(args);\n</code></pre>\n\n<p><code>findTheLastArg(args, 0)</code> returns the file name in the command line.</p>\n\n<p><code>splitter(args)</code> containts execl function and works properly when i'm not trying to redirect anything.</p>\n\n<p>Edit: my <strong>set</strong> <strong>NULL</strong> method is:</p>\n\n<pre><code>void setFileAndArrowNull(char *args[], int counter){\n\n    for(int i=0; i &lt; counter; i++){\n\n        if (strcmp(args[i], \"&gt;\") == 0) {\n            args[i] = NULL;\n            args[i+1] = NULL;\n            args[i+2] = NULL;\n            return;\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>I'm calling this method in here:</p>\n\n<pre><code>  if(redirect){\n                    setFileAndArrowNull(argv, 0);\n                }\nexec(....);\n</code></pre>\n\n<p><strong>Redirect</strong> becomes 1 when line contains '>'. The program enters in this if.</p>\n"}, {"tags": ["c", "linux", "evdev", "input-devices"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1544037955, "post_id": 53639022, "comment_id": 94138272, "body": "Do you have a device driver (maybe module) for your functionality? 2) why not just listen on a (unix-domain) socket?"}, {"owner": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1544038780, "post_id": 53639022, "comment_id": 94138626, "body": "@wildplasser I think I don&#39;t need any driver. The drivers are those providing the devices (keyboard, mouse, trackpad, etc.). I&#39;m just listening at those devices using libevdev."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1544040851, "post_id": 53639022, "comment_id": 94139512, "body": "In that case, you dont have to create a device-special inode with mknod.Everything you need is allready there."}], "answers": [{"comments": [{"owner": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "edited": false, "score": 0, "creation_date": 1544049877, "post_id": 53640024, "comment_id": 94143209, "body": "I think you misunderstood my question. I certainly don&#39;t express my needs correctly. I need a way to setup a fake device file to allow my tested library to read on it. Think about creating regular files on a temporary directory to use them as fixtures for unit tests. Then, by settings access rights and content, you can test your library behavior for different kinds of file. I want to do the same with device files (character special files handling some ioctl requests specific to devices)."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "edited": false, "score": 0, "creation_date": 1544052783, "post_id": 53640024, "comment_id": 94144128, "body": "@DamienFlament: Then, follow the above procedure, and write a small <a href=\"https://www.kernel.org/doc/html/v4.16/input/uinput.html\" rel=\"nofollow noreferrer\">uinput</a> daemon to create the virtual device.  I&#39;ll write, test, and append one to my answer in a little bit."}, {"owner": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "edited": false, "score": 0, "creation_date": 1544053953, "post_id": 53640024, "comment_id": 94144433, "body": "Yes. I&#39;m currently reading the <i>uinput</i> documentation. It seems to be the right solution. Moreover, <i>libevdev</i> provide helper functions to create uinput devices easilly. See <a href=\"https://www.freedesktop.org/software/libevdev/doc/latest/group__uinput.html\" rel=\"nofollow noreferrer\">libevdev-uinput</a>."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "edited": false, "score": 1, "creation_date": 1544055768, "post_id": 53640024, "comment_id": 94144904, "body": "@DamienFlament: If you want to, be my quest. I wouldn&#39;t.  Although Benjamin Tissoires (original author) is one of the better developers involved in systemd, he e.g. <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/drivers/input/misc/uinput.c?id=052876f8e5aec887d22c4d06e54aa5531ffcec75\" rel=\"nofollow noreferrer\">added</a> the ioctl interface to the Linux input subsystem (&quot;deprecating&quot; the write() one) for typical systemd reasons (i.e, bullshit). Thus far, there has been nothing to require that addition. To me, his contributions look ... odd."}, {"owner": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "edited": false, "score": 0, "creation_date": 1544096150, "post_id": 53640024, "comment_id": 94159181, "body": "@NominalAnimal I was not expecting a so detailed answer. Thanks."}, {"owner": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "edited": false, "score": 0, "creation_date": 1544096580, "post_id": 53640024, "comment_id": 94159398, "body": "@NominalAnimal Looking at the uinput documentation, I admit that the ioctl does not simplify the user code. It&#39;s just like putting ioctl calls instead of a simple write. But the libevdev-uinput is really amazing at a user point of view (if you are already using libevdev in your project)."}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 7, "last_activity_date": 1544061254, "last_edit_date": 1544061254, "creation_date": 1544040791, "answer_id": 53640024, "question_id": 53639022, "link": "https://stackoverflow.com/questions/53639022/faking-an-input-device-for-testing-purpose/53640024#53640024", "title": "Faking an input device for testing purpose", "body": "<p>Create a group for users who are allowed to access the device, and an udev rule to set the ownership of that input event device to that group.</p>\n\n<hr>\n\n<p>I use <code>teensy</code> (system) group:</p>\n\n<pre><code>sudo groupadd -r teensy\n</code></pre>\n\n<p>and add each user into it using e.g.</p>\n\n<pre><code>sudo usermod -a -g teensy my-user-name\n</code></pre>\n\n<p>or whatever graphical user interface I have available.</p>\n\n<p>By managing which users and service daemons belong to the <code>teensy</code> group, you can easily manage the access to the devices.</p>\n\n<hr>\n\n<p>For my Teensy microcontrollers (that have native USB, and I use for HID testing), I have the following <code>/lib/udev/rules.d/49-teensy.rules</code>:</p>\n\n<pre><code>ATTRS{idVendor}==\"16c0\", ATTRS{idProduct}==\"04[789B]?\", ENV{ID_MM_DEVICE_IGNORE}=\"1\"\nATTRS{idVendor}==\"16c0\", ATTRS{idProduct}==\"04[789A]?\", ENV{MTP_NO_PROBE}=\"1\"\nSUBSYSTEMS==\"usb\", ATTRS{idVendor}==\"16c0\", ATTRS{idProduct}==\"04[789ABCD]?\", GROUP:=\"teensy\", MODE:=\"0660\"\nKERNEL==\"ttyACM*\", ATTRS{idVendor}==\"16c0\", ATTRS{idProduct}==\"04[789B]?\", GROUP:=\"teensy\", MODE:=\"0660\"\n</code></pre>\n\n<p>You only need the third line (<code>SUBSYSTEMS==\"usb\",</code> one) for HID devices, though. Make sure the <code>idVendor</code> and <code>idProduct</code> match your USB HID device. You can use <code>lsusb</code> to list the currently connected USB devices vendor and product numbers. The matching uses glob patterns, just like file names.</p>\n\n<p>After adding the above, don't forget running <code>sudo udevadm control --reload-rules &amp;&amp; sudo udevadm trigger</code> to reload the rules. Next time you plug in your USB HID device, all members of your group (<code>teensy</code> in the above) can access it directly.</p>\n\n<hr>\n\n<p>Note that by default in most distributions, udev also creates persistent symlinks in <code>/dev/input/by-id/</code> using the USB device type and serial. In my case, one of my Teensy LC's (serial 4298820) with a combined keyboard-mouse-joystic device provides <code>/dev/input/by-id/usb-Teensyduino_Keyboard_Mouse_Joystick_4298820-event-kbd</code> for the keyboard event device, <code>/dev/input/by-id/usb-Teensyduino_Keyboard_Mouse_Joystick_4298820-if01-event-mouse</code> for the mouse event device, and <code>/dev/input/by-id/usb-Teensyduino_Keyboard_Mouse_Joystick_4298820-if03-event-joystick</code> and <code>/dev/input/by-id/usb-Teensyduino_Keyboard_Mouse_Joystick_4298820-if04-event-joystick</code> for the two joystick interfaces.</p>\n\n<p>(By \"persistent\", I do not mean these symlinks always exist; I mean that whenever that particular device is plugged in, the symlink of exactly that name exists, and points to the actual Linux input event character device.)</p>\n\n<hr>\n\n<p>The Linux <a href=\"https://www.kernel.org/doc/html/latest/input/uinput.html\" rel=\"noreferrer\">uinput</a> device can be used to implement a virtual input event device using a simple privileged daemon.</p>\n\n<p>The process to create a new virtual USB input event device goes as follows.</p>\n\n<ol>\n<li><p>Open <code>/dev/uinput</code> for writing (or reading and writing):</p>\n\n<pre><code>fd = open(\"/dev/uinput\", O_RDWR);\nif (fd == -1) {\n    fprintf(stderr, \"Cannot open /dev/uinput: %s.\\n\", strerror(errno));\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>The above requires superuser privileges. However, immediately after opening the device, you can drop all privileges, and have your daemon/service run as a dedicated user instead.<br>&nbsp;</p></li>\n<li><p>Use the <code>UI_SET_EVBIT</code> ioctl for each event type allowed.</p>\n\n<p>You will want to allow at least <code>EV_SYN</code>; and <code>EV_KEY</code> for keyboards and mouse buttons, and <code>EV_REL</code> for mouse movement, and so on.</p>\n\n<pre><code>if (ioctl(fd, UI_SET_EVBIT, EV_SYN) == -1 ||\n    ioctl(fd, UI_SET_EVBIT, EV_KEY) == -1 ||\n    ioctl(fd, UI_SET_EVBIT, EV_REL) == -1) {\n    fprintf(stderr, \"Uinput event types not allowed: %s.\\n\", strerror(errno));\n    close(fd);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>I personally use a static constant array with the codes, for easier management.<br>&nbsp;</p></li>\n<li><p>Use the <code>UI_SET_KEYBIT</code> ioctl for each key code the device may emit, and <code>UI_SET_RELBIT</code> ioctl for each relative movement code (mouse code). For example, to allow space, left mouse button, horizontal and vertical mouse movement, and mouse wheel:</p>\n\n<pre><code>if (ioctl(fd, UI_SET_KEYBIT, KEY_SPACE) == -1 ||\n    ioctl(fd, UI_SET_KEYBIT, BTN_LEFT) == -1 ||\n    ioctl(fd, UI_SET_RELBIT, REL_X) == -1 ||\n    ioctl(fd, UI_SET_RELBIT, REL_Y) == -1 ||\n    ioctl(fd, UI_SET_RELBIT, REL_WHEEL) == -1) {\n    fprintf(stderr, \"Uinput event types not allowed: %s.\\n\", strerror(errno));\n    close(fd);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>Again, static const arrays (one for <code>UI_SET_KEYBIT</code> and one for <code>UI_SET_RELBIT</code> codes) is much easier to maintain.<br>&nbsp;</p></li>\n<li><p>Define a <code>struct uinput_user_dev</code>, and write it to the device.</p>\n\n<p>If you have <code>name</code> containing the device name string, <code>vendor</code> and <code>product</code> with the USB vendor and product ID numbers, <code>version</code> with a version number (0 is fine), use</p>\n\n<pre><code>struct uinput_user_dev  dev;\n\nmemset(&amp;dev, 0, sizeof dev);\nstrncpy(dev.name, name, UINPUT_MAX_NAME_SIZE);\ndev.id.bustype = BUS_USB;\ndev.id.vendor = vendor;\ndev.id.product = product;\ndev.id.version = version;\n\nif (write(fd, &amp;dev, sizeof dev) != sizeof dev) {\n    fprintf(stderr, \"Cannot write an uinput device description: %s.\\n\", strerror(errno));\n    close(fd);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>Later kernels have an ioctl to do the same thing (apparently being involved in systemd development causes this kind of drain bamage);</p>\n\n<pre><code>struct uinput_setup  dev;\n\nmemset(&amp;dev, 0, sizeof dev);\nstrncpy(dev.name, name, UINPUT_MAX_NAME_SIZE);\ndev.id.bustype = BUS_USB;\ndev.id.vendor = vendor;\ndev.id.product = product;\ndev.id.version = version;\n\nif (ioctl(fd, UI_DEV_SETUP, &amp;dev) == -1) {\n    fprintf(stderr, \"Cannot write an uinput device description: %s.\\n\", strerror(errno));\n    close(fd);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>The idea seems to be that instead of using the former, you can try the latter first, and if it fails, do the former instead.  You know, because a single interface might some day not be enough. (That's what the <a href=\"https://www.kernel.org/doc/html/latest/input/uinput.html\" rel=\"noreferrer\">documentation</a> and <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/drivers/input/misc/uinput.c?id=052876f8e5aec887d22c4d06e54aa5531ffcec75\" rel=\"noreferrer\">commit</a> say, anyway.)</p>\n\n<p>I might sound a bit cranky, here, but that's just because I do subscribe to both the <a href=\"https://en.wikipedia.org/wiki/Unix_philosophy#Do_One_Thing_and_Do_It_Well\" rel=\"noreferrer\">Unix philosophy</a> and the <a href=\"https://en.wikipedia.org/wiki/KISS_principle\" rel=\"noreferrer\">KISS principle</a> (or <a href=\"https://en.wikipedia.org/wiki/Minimalism_(computing)\" rel=\"noreferrer\">minimalist</a> approach), and see such warts completely unnecessary.  And too often coming from the same loosely related group of developers.  Ahem.  No personal insult intended; I just think they are doing poor job.<br>&nbsp;</p></li>\n<li><p>Create the virtual device, by issuing an <code>UI_DEV_CREATE</code> ioctl:</p>\n\n<pre><code>if (ioctl(fd, UI_DEV_CREATE) == -1) {\n    fprintf(stderr, \"Cannot create the virtual uinput device: %s.\\n\", strerror(errno));\n    close(fd);\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>At this point, the kernel will construct the device, provide the corresponding event to the udev daemon, and the udev daemon will construct the device node and symlink(s) according to its configuration.  All this will take a bit of time -- a fraction of a second in the real world, but enough that trying to emit events immediately might cause some of them to be lost.<br>&nbsp;</p></li>\n<li><p>Emit the input events (<code>struct input_event</code>) by writing to the uinput device.</p>\n\n<p>You can write one or more <code>struct input_event</code>s at a time, and should never see short writes (unless you try to write a partial event structure). Partial event structures are completely ignored. (See <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/drivers/input/misc/uinput.c\" rel=\"noreferrer\">drivers/input/misc/uinput.c:uinput_write() uinput_inject_events()</a> for how the kernel handles such writes.)</p>\n\n<p>Many actions consists of more than one <code>struct input_event</code>. For example, you might move the mouse diagonally (emitting both <code>{ .type == EV_REL, .code == REL_X, .value = xdelta }</code> and <code>{ .type == EV_REL, .code == REL_Y, .value = ydelta }</code> for that single movement). The synchronization events (<code>{ .type == EV_SYN, .code == 0, .value == 0 }</code>) are used as a sentinel or separator, denoting the end of related events.</p>\n\n<p>Because of this, you'll need to append an <code>{ .type == EV_SYN, .code == 0, .value == 0 }</code> input event after each individual action (mouse movement, key press, key release, and so on).  Think of it as the equivalent of a newline, for line-buffered input.</p>\n\n<p>For example, the following code moves the mouse diagonally down right by a single pixel.</p>\n\n<pre><code>struct input_event  event[3];\nmemset(event, 0, sizeof event);\n\nevent[0].type  = EV_REL;\nevent[0].code  = REL_X;\nevent[0].value = +1; /* Right */\n\nevent[1].type  = EV_REL;\nevent[1].code  = REL_Y;\nevent[1].value = +1; /* Down */\n\nevent[2].type  = EV_SYN;\nevent[2].code  = 0;\nevent[2].value = 0;\n\nif (write(fd, event, sizeof event) != sizeof event)\n    fprintf(stderr, \"Failed to inject mouse movement event.\\n\");\n</code></pre>\n\n<p>The failure case is not fatal; it only means the events were not injected (although I don't see how that could happen in current kernels; better be defensive, just in case).  You can simply retry the same again, or ignore the failure (but letting the user know, so they can investigate, if it ever happens).  So log it or output a warning, but no need for it to cause the daemon/service to exit.<br>&nbsp;</p></li>\n<li><p>Destroy the device:</p>\n\n<pre><code>ioctl(fd, UI_DEV_DESTROY);\nclose(fd);\n</code></pre>\n\n<p>The device does get automatically destroyed when the last duplicate of the original opened descriptor gets closed, but I recommend doing it explicitly as above.<br>&nbsp;</p></li>\n</ol>\n\n<p>Putting steps 1-5 in a function, you get something like</p>\n\n<pre><code>#define  _POSIX_C_SOURCE 200809L\n#define  _GNU_SOURCE\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;linux/uinput.h&gt;\n#include &lt;string.h&gt;\n#include &lt;errno.h&gt;\n#include &lt;stdio.h&gt;\n\nstatic const unsigned int  allow_event_type[] = {\n    EV_KEY,\n    EV_SYN,\n    EV_REL,\n};\n#define  ALLOWED_EVENT_TYPES  (sizeof allow_event_type / sizeof allow_event_type[0])\n\nstatic const unsigned int  allow_key_code[] = {\n    KEY_SPACE,\n    BTN_LEFT,\n    BTN_MIDDLE,\n    BTN_RIGHT,\n};\n#define  ALLOWED_KEY_CODES  (sizeof allow_key_code / sizeof allow_key_code[0])\n\nstatic const unsigned int  allow_rel_code[] = {\n    REL_X,\n    REL_Y,\n    REL_WHEEL,\n};\n#define  ALLOWED_REL_CODES  (sizeof allow_rel_code / sizeof allow_rel_code[0])\n\nstatic int uinput_open(const char *name, const unsigned int vendor, const unsigned int product, const unsigned int version)\n{\n    struct uinput_user_dev  dev;\n    int                     fd;\n    size_t                  i;\n\n    if (!name || strlen(name) &lt; 1 || strlen(name) &gt;= UINPUT_MAX_NAME_SIZE) {\n        errno = EINVAL;\n        return -1;\n    }\n\n    fd = open(\"/dev/uinput\", O_RDWR);\n    if (fd == -1)\n        return -1;\n\n    memset(&amp;dev, 0, sizeof dev);\n    strncpy(dev.name, name, UINPUT_MAX_NAME_SIZE);\n    dev.id.bustype = BUS_USB;\n    dev.id.vendor  = vendor;\n    dev.id.product = product;\n    dev.id.version = version;\n\n    do {\n\n        for (i = 0; i &lt; ALLOWED_EVENT_TYPES; i++)\n            if (ioctl(fd, UI_SET_EVBIT, allow_event_type[i]) == -1)\n                break;\n        if (i &lt; ALLOWED_EVENT_TYPES)\n            break;\n\n        for (i = 0; i &lt; ALLOWED_KEY_CODES; i++)\n            if (ioctl(fd, UI_SET_KEYBIT, allow_key_code[i]) == -1)\n                break;\n        if (i &lt; ALLOWED_KEY_CODES)\n            break;\n\n        for (i = 0; i &lt; ALLOWED_REL_CODES; i++)\n            if (ioctl(fd, UI_SET_RELBIT, allow_rel_code[i]) == -1)\n                break;\n        if (i &lt; ALLOWED_REL_CODES)\n            break;\n\n        if (write(fd, &amp;dev, sizeof dev) != sizeof dev)\n            break;\n\n        if (ioctl(fd, UI_DEV_CREATE) == -1)\n            break;\n\n        /* Success. */\n        return fd;\n\n    } while (0);\n\n    /* FAILED: */\n    {\n        const int saved_errno = errno;\n        close(fd);\n        errno = saved_errno;\n        return -1;\n    }\n}\n\nstatic void uinput_close(const int fd)\n{\n    ioctl(fd, UI_DEV_DESTROY);\n    close(fd);\n}\n</code></pre>\n\n<p>which seem to work fine, and requires no libraries (other than the standard C library).</p>\n\n<p>It is important to realize that the Linux input subsystem, including uinput and <code>struct input_event</code>, are <em>binary interfaces</em> to the Linux kernel, and therefore will be kept backwards compatible (except for pressing technical reasons, like security issues or serious conflicts with other parts of the kernel). (The desire to wrap everything under the freedesktop.org or systemd umbrella is not one.) </p>\n"}], "owner": {"reputation": 1003, "user_id": 427157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691a741079b16fe45e33f518dc4f8611?s=128&d=identicon&r=PG", "display_name": "Damien Flament", "link": "https://stackoverflow.com/users/427157/damien-flament"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1932, "favorite_count": 0, "accepted_answer_id": 53640024, "answer_count": 1, "score": 0, "last_activity_date": 1544061254, "creation_date": 1544036291, "last_edit_date": 1544050099, "question_id": 53639022, "link": "https://stackoverflow.com/questions/53639022/faking-an-input-device-for-testing-purpose", "title": "Faking an input device for testing purpose", "body": "<h2>What I want to do</h2>\n\n<p>I'm writing a daemon which listen to the input devices for keys presses and send signals via D-Bus. The main goal is to manage audio volume and screen backlight level by requesting changes or informing about changes.\nI use <em>libevdev</em> to handle the input device events.</p>\n\n<p>I wrote a function for opening an input device located at a specified path:</p>\n\n<pre><code>Device device_open(const char *path);\n</code></pre>\n\n<p>That function works well, but while I'm writing unit tests for it, I wanted to create file fixtures with different properties (existence of the file, read access, etc.) to check the error handling of my function and memory management (as I store data in a structure).</p>\n\n<h2>What I have already done</h2>\n\n<p>But testing it with a real input device (located at /dev/input/event*) needs <em>root</em> access rights. Setting read access for everyone on /dev/input/event* files works but seems risky to me. Executing my tests as root is worse !</p>\n\n<p>Creating a device using <code>mknod</code> works but needs to be done as root.</p>\n\n<p>I also tried to use character special files (because input devices are one of those) allowing read for everyone (like /dev/random, /dev/zero, /dev/null and even the terminal device i'm currently using: /dev/tty2).</p>\n\n<p>But those devices does not handles <code>ioctl</code> requests needed by libevdev: <em>EVIOCGBIT</em> is the first request returning an error \"Inappropriate ioctl for device\".</p>\n\n<h2>What I'm looking for</h2>\n\n<p>I want to be able to create device files as a regular user (the user executing the unit tests). Then, by setting access rights I should be able to test my function behavior for different kinds of file (read only, no read allowed, bad device type, etc.).\nIf it appears to be impossible, I will certainly refactor my function using private helpers. But how to do it. Any examples ?</p>\n\n<p>Thanks.</p>\n\n<p>Edit: I tried to express better my needs.</p>\n"}, {"tags": ["c", "assembly", "system-calls", "buffer-overflow"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 1, "creation_date": 1544040272, "post_id": 53638845, "comment_id": 94139274, "body": "For starters, using 390 is a very bad idea because that isn&#39;t even a multiple of 4. Probably not the reason for the crash. What do you mean by &quot;I can&#39;t see my bytecode&quot;? What is the location of the crash and what do you see there? Also did you try single stepping the program instead of examining core dump? Furthermore, this is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. How does your vulnerable program look? How do you pass the shellcode to it?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1544045003, "post_id": 53638845, "comment_id": 94141421, "body": "Running inside gdb can produce different results for various reasons such as different memory layout. You should attach gdb to a process instead of running your program inside gdb. Also depending on how you are overwriting the stack and what compiler and options are used you might get the segfault before the printf output is shown since that may be buffered. You still have not shown what gdb tells you about the faulting instruction. I guess it is some random location due to overwritten return address."}, {"owner": {"reputation": 127, "user_id": 3038315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc1f5e4e5d2e38827a321b20f8f8e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "xampla", "link": "https://stackoverflow.com/users/3038315/xampla"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1544045305, "post_id": 53638845, "comment_id": 94141578, "body": "@Jester I think I am attaching it as I start gdb like this: <i>gdb program</i>. Is that correct?"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1544045785, "post_id": 53638845, "comment_id": 94141782, "body": "No that will create the process inside gdb (as child of gdb)."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1544046589, "post_id": 53638845, "comment_id": 94142102, "body": "Looking at your stack output it doesn&#39;t seem to match the shell code you are using?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1544047056, "post_id": 53638845, "comment_id": 94142248, "body": "Just comparing the bytes for example I see a value 0x64 in the stack dump but there isn&#39;t a <code>\\x64</code> in the shell code bytes you show. It seems as if you have munged the code somehow reading it in?"}, {"owner": {"reputation": 127, "user_id": 3038315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc1f5e4e5d2e38827a321b20f8f8e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "xampla", "link": "https://stackoverflow.com/users/3038315/xampla"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1544048018, "post_id": 53638845, "comment_id": 94142573, "body": "@MichaelPetch Ok, I am checking that"}, {"owner": {"reputation": 127, "user_id": 3038315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc1f5e4e5d2e38827a321b20f8f8e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "xampla", "link": "https://stackoverflow.com/users/3038315/xampla"}, "reply_to_user": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 0, "creation_date": 1544048709, "post_id": 53638845, "comment_id": 94142800, "body": "@MichaelPetch now it is correct. I got the output from a previous version"}, {"owner": {"reputation": 127, "user_id": 3038315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc1f5e4e5d2e38827a321b20f8f8e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "xampla", "link": "https://stackoverflow.com/users/3038315/xampla"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1544050780, "post_id": 53638845, "comment_id": 94143514, "body": "@Jester the <i>printf</i> of the vulnerable function is done before the segment fault is thrown. Also I&#39;m trying to attach doing: <i>gdb program</i> and <i>(gdb) attach PID</i> but I don&#39;t know how to pass the input <i>byteCodeFile</i> once there because <i>run</i> or <i>start</i> command kills it."}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 3038315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc1f5e4e5d2e38827a321b20f8f8e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "xampla", "link": "https://stackoverflow.com/users/3038315/xampla"}, "is_accepted": true, "score": 0, "last_activity_date": 1544094039, "last_edit_date": 1544094039, "creation_date": 1544054086, "answer_id": 53642593, "question_id": 53638845, "link": "https://stackoverflow.com/questions/53638845/uname-syscall-in-buffer-overflow/53642593#53642593", "title": "Uname syscall in buffer overflow", "body": "<p>The final assembly code looks like this (only changed -390 to -500):</p>\n\n<pre><code>//uname(*buf)\n\"addl $-500, %esp;\" //save space for buffer\n\"movl %esp, %ebx;\"  //ebx point to buffer\n\"xorl %eax, %eax;\"  //erase data in register\n\"addb $0x7a, %al;\"  //syscall number\n\"int $0x80;\"        //raise interruption\n\n\n//write(fd, *buf, size)\n\"movb $0x04, %al;\"  //syscall number\n\"xorl %ebx, %ebx;\"  //erase data in register\n\"movb $0x01, %bl;\"  //add 1 as file descriptor     \n\"lea 0x41(%esp), %ecx;\"  //get address where hostname is   \n\"xorl %edx, %edx;\"  //erase data in register\n\"addb $0x05, %dl;\"  //set buffer size    \n\"int $0x80;\"        //raise interruption\n\n//exit(0)\n\"movb   $0x01, %al;\"    //syscall number\n\"xorl %ebx, %ebx;\"  //set 0 in register\n\"int    $0x80;\"     //raise interruption\n</code></pre>\n\n<p>So the final bytecode:</p>\n\n<pre><code>\\x81\\xc4\\x0c\\xfe\\xff\\xff\\x89\\xe3\\x31\\xc0\\x04\\x7a\\xcd\\x80\\xb0\\x04\\x31\\xdb\\xb3\\x01\\x8d\\x4c\\x24\\x41\\x31\\xd2\\x80\\xc2\\x05\\xcd\\x80\\xb0\\x01\\x31\\xdb\\xcd\\x80\n</code></pre>\n\n<blockquote>\n  <p>1.- When gdb is not used to execute the vulnerable program why the segmentation fault is triggered and why the bytecode is not shown anywhere in the stack when analysing the core dump?</p>\n</blockquote>\n\n<p>It seem that the problem was 390 is not a multiple of 4 so it caused some errors. Also the entire bytecode size was wrong.</p>\n\n<blockquote>\n  <p>2.- When gdb is used to execute the program (run &lt; byteCodeFile) why it gets different results? Uname will fill the buffer from esp (which is only modified at the begining) always with the same information so write should do it correctly always, isn't it?</p>\n</blockquote>\n\n<p>The address in gdb has to be different from the one used to exploit the program through the terminal as it loads environment varibles. This is better explaint here: <a href=\"https://stackoverflow.com/questions/17775186/buffer-overflow-works-in-gdb-but-not-without-it\">Buffer overflow works in gdb but not without it</a></p>\n"}], "owner": {"reputation": 127, "user_id": 3038315, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc1f5e4e5d2e38827a321b20f8f8e3e3?s=128&d=identicon&r=PG&f=1", "display_name": "xampla", "link": "https://stackoverflow.com/users/3038315/xampla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 53642593, "answer_count": 1, "score": -1, "last_activity_date": 1544094039, "creation_date": 1544035563, "last_edit_date": 1544052811, "question_id": 53638845, "link": "https://stackoverflow.com/questions/53638845/uname-syscall-in-buffer-overflow", "title": "Uname syscall in buffer overflow", "body": "<p>I am trying to learn the basics in buffer overflow so I have written the following code to inject it in a buffer:</p>\n\n<pre><code>//uname(*buf)\n\"addl $-390, %esp;\" //save space for buffer\n\"movl %esp, %ebx;\"  //ebx point to buffer\n\"xorl %eax, %eax;\"  //erase data in register\n\"addb $0x7a, %al;\"  //syscall number\n\"int $0x80;\"        //raise interruption\n\n\n//write(fd, *buf, size)\n\"movb $0x04, %al;\"  //syscall number\n\"xorl %ebx, %ebx;\"  //erase data in register\n\"movb $0x01, %bl;\"  //add 1 as file descriptor     \n\"lea 0x41(%esp), %ecx;\"  //get address where hostname is   \n\"xorl %edx, %edx;\"  //erase data in register\n\"addb $0x05, %dl;\"  //set buffer size (as I only want \"Kali\" string)   \n\"int $0x80;\"        //raise interruption\n\n//exit(0)\n\"movb   $0x01, %al;\"    //syscall number\n\"xorl %ebx, %ebx;\"  //set 0 in register\n\"int    $0x80;\"     //raise interruption\n</code></pre>\n\n<p>The above code works and has the following bytecode (which also works):</p>\n\n<pre><code>\\x81\\xc4\\x7a\\xfe\\xff\\xff\\x89\\xe3\\x31\\xc0\\x04\\x7a\\xcd\\x80\\xb0\\x04\\x31\\xdb\\xb3\\x01\\x8d\\x4c\\x24\\x41\\x31\\xd2\\x80\\xc2\\x05\\xcd\\x80\\xb0\\x01\\x31\\xdb\\xcd\\x80\n</code></pre>\n\n<p>This string, with some NOPs and the address at the end pointing to the stack, is passed to the target program through the vulnerable <em>get()</em> function. When executed it can be seen that the uname syscall is called in the following output from <em>strace</em> command:</p>\n\n<pre><code>(...)\nuname({sysname=\"Linux\", nodename=\"kali\", ...}) = 0\n--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=NULL} ---\n+++ killed by SIGSEGV (core dumped) +++\nSegmentation fault\n</code></pre>\n\n<p>What I don't understand is why when checking the core dump in gdb to see why is throwing a segmentation fault I can't see my bytecode anywhere of the entire stack. Could be that uname is overwriting it? Because in theory there is enough space, 390 bytes. Am I missing something?</p>\n\n<p>Thank you</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>The vulnerable function called by main looks like this:</p>\n\n<pre><code>void function() {\n    char buf[100];\n    gets(buf);\n    printf(buf);\n}\n</code></pre>\n\n<p>I have done single stepping debug with gdb and the byte code is placed correctly in the stack but I can't (don't know how) debug instructions executed in the stack.</p>\n\n<p>As can be seen in the output of <em>strace</em> (which indicates which syscalles are called by the binary) the last thing done is the <em>uname</em> call. That's why the theory that it is overwriting the instructions in the stack (the eip when the segmentation fault is triggered is: 0xbffff350).</p>\n\n<p>Here the stack values when just before returning to main (in fact, it will return to the the top of the stack address):</p>\n\n<pre><code>(gdb) x/100bx 0xbffff300\n0xbffff2f8: 0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90\n0xbffff300: 0x90    0x90    0x81    0xc4    0x7a    0xfe    0xff    0xff\n0xbffff308: 0x89    0xe3    0x31    0xc0    0x04    0x7a    0xcd    0x80\n0xbffff310: 0xb0    0x04    0x31    0xdb    0xb3    0x01    0x8d    0x4c\n0xbffff318: 0x24    0x41    0x31    0xd2    0x80    0xc2    0x05    0xcd\n0xbffff320: 0x80    0xb0    0x01    0x31    0xdb    0xcd    0x80    0x90\n0xbffff328: 0x90    0x90    0x90    0x90    0x90    0x90    0x90    0x90\n</code></pre>\n\n<p>Also when running the executable and passing the bytecode in gdb (run &lt; byteCodeFile) the segmentation fault is not triggered but an \"exited normally\" althought it doesn't print anything.</p>\n\n<p><strong>UPDATE2:</strong></p>\n\n<blockquote>\n  <p>Also when running the executable and passing the bytecode in gdb (run &lt; byteCodeFile) the segmentation fault is not triggered but an \"exited normally\" althought it doesn't print anything.</p>\n</blockquote>\n\n<p>In fact it is printing something. Sometimes the word \"kali\" (so it works properly) and other times just a byte or two.</p>\n\n<p><strong>UPDATE3:</strong></p>\n\n<p>The ouput of gdb when started with the core dump is:</p>\n\n<pre><code>Program terminated with signal SIGSEGV, Segmentation fault.\n#0  0xbffff350 in ?? ()\n</code></pre>\n\n<p>It calls <em>uname</em> function and throws segmentation fault.</p>\n\n<p>The ouput of gdb when running the program inside (run &lt; byteCodeFile):</p>\n\n<pre><code>\ufffd\ufffd[Inferior 1 (process 5271) exited normally]\n</code></pre>\n\n<p>So it prints something and then it exits.</p>\n\n<p>The compilation of the program is done with this options:</p>\n\n<pre><code>gcc -ggdb -mpreferred-stack-boundary=2 -fno-stack-protector -o program program.c\n</code></pre>\n\n<p><strong>UPDATE4:</strong></p>\n\n<p>I have changed <em>390</em> to <em>500</em> to be multiple of 4 as @Jester has pointed in the comments. Now it works in the terminal but not in the gdb and in a new terminal. I think it is related as the fact that they have another memory layout so the address at the end of the bytecode has to be changed. </p>\n\n<p><strong>Questions</strong></p>\n\n<p>1.- When gdb is not used to execute the vulnerable program why the segmentation fault is triggered and why the bytecode is not shown anywhere in the stack when analysing the core dump?</p>\n\n<p>2.- When gdb is used to execute the program (run &lt; byteCodeFile) why it gets different results? Uname will fill the buffer from esp (which is only modified at the begining) always with the same information so write should do it correctly always, isn't it?</p>\n"}, {"tags": ["c", "applescript", "macos-carbon", "appleevents"], "answers": [{"tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1544038496, "last_edit_date": 1544038496, "creation_date": 1544035977, "answer_id": 53638937, "question_id": 53638803, "link": "https://stackoverflow.com/questions/53638803/translate-into-apple-events-applescript/53638937#53638937", "title": "Translate into Apple Events AppleScript", "body": "<blockquote>\n  <p>would expect to see calls to functions defined here</p>\n</blockquote>\n\n<p>Well, stop expecting that. What you have is the Apple event <em>itself</em>, expressed in AEPrint notation, as explained here:</p>\n\n<p><a href=\"https://developer.apple.com/library/archive/technotes/tn/tn2045.html\" rel=\"nofollow noreferrer\">https://developer.apple.com/library/archive/technotes/tn/tn2045.html</a></p>\n\n<p>You can use that to construct the same Apple event, or you can form it in pieces using higher level commands. But either way, it is not up to the system to write your code for you! That is the Apple event, built for you by AppleScript. Learning to read AEPrint notation, learning the structure of an Apple event, learning to build the same Apple event by hand, is all something you must do yourself. </p>\n\n<p>Just to give an example of the reasoning you will use:</p>\n\n<ul>\n<li><p>Your Apple event starts with the verb <code>coregetd</code>. That is the Apple event equivalent of <code>get</code> (the first word in your AppleScript), as you learn from looking in the application's SDEF dictionary. </p></li>\n<li><p>OK, now we know the verb; what's the direct object? It's an <code>URL\u00a0</code> (note the space, these are four-letter codes); that is the Apple event equivalent of your <code>URL</code> (again, we learn this through the dictionary). </p></li>\n<li><p>OK, but what <code>URL</code>? It's the <code>URL</code> of the <code>acTa</code>, which is the <code>active tab</code> (again, the dictionary shows us this equivalence). </p></li>\n<li><p>OK, but the <code>acTa</code> of what? ...</p></li>\n</ul>\n\n<p>And so on. Once you have broken down the Apple event into properties and elements and objects specifiers in this way, you can build it up again through Carbon or Cocoa commands.</p>\n\n<p>You have chosen, for reasons that escape me, to embark on a very long journey. You have elected to throw away the simplicity of AppleScript notation and construct an Apple event yourself. You have chosen a long road involving much learning. There is no shortcut; the runtime is not going to write your code for you. The longest journey begins with the first step. Begin!</p>\n"}], "owner": {"reputation": 677, "user_id": 3283414, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2c3b8ae04c67a36ff3cecade8702071b?s=128&d=identicon&r=PG&f=1", "display_name": "RuLoViC", "link": "https://stackoverflow.com/users/3283414/rulovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 53638937, "answer_count": 1, "score": 0, "last_activity_date": 1544038496, "creation_date": 1544035379, "question_id": 53638803, "link": "https://stackoverflow.com/questions/53638803/translate-into-apple-events-applescript", "title": "Translate into Apple Events AppleScript", "body": "<p>I have an very simple applescript:</p>\n\n<pre><code>tell application \"Opera\"\n   get URL of active tab of window 1\nend tell\n</code></pre>\n\n<p>I want to see Apple Events underlying. So I have launched it with these two environment variables enabled:</p>\n\n<pre><code>export AEDebugSends=1;\nexport AEDebugReceives=1\n</code></pre>\n\n<p>Now I am getting this output:</p>\n\n<pre><code>osascript browser.scpt \n{core,getd target='psn '[Opera] {----={form=prop,want=prop,seld=URL ,from={form=prop,want=prop,seld=acTa,from={form=indx,want=cwin,seld=1,from=NULL-impl}}}} attr:{csig=65536 returnID=15130}\n</code></pre>\n\n<p>I would expect to see calls to functions defined here: <a href=\"https://developer.apple.com/documentation/coreservices/apple_events?language=objc\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/coreservices/apple_events?language=objc</a></p>\n\n<p>My final goal is to translate that Applescript into c or Obj-C code.</p>\n\n<p>Could someone help me to understand the meaning of the output?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c", "segmentation-fault", "text-files", "realloc"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1544035689, "post_id": 53638480, "comment_id": 94137324, "body": "<code>split -l 2 filename temp</code>"}, {"owner": {"reputation": 45, "user_id": 10379717, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cDrKAT58Mfw/AAAAAAAAAAI/AAAAAAAAAHY/yGP1Uglx4QU/photo.jpg?sz=128", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/10379717/stefano-raneri"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1544036202, "post_id": 53638480, "comment_id": 94137543, "body": "ty for the hint, i did a workaround and now it works"}, {"owner": {"reputation": 45, "user_id": 10379717, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cDrKAT58Mfw/AAAAAAAAAAI/AAAAAAAAAHY/yGP1Uglx4QU/photo.jpg?sz=128", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/10379717/stefano-raneri"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1544036569, "post_id": 53638480, "comment_id": 94137695, "body": "One additional file gets created, i need to still adjust some things in the code"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10379717, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cDrKAT58Mfw/AAAAAAAAAAI/AAAAAAAAAHY/yGP1Uglx4QU/photo.jpg?sz=128", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/10379717/stefano-raneri"}, "edited": false, "score": 0, "creation_date": 1544035873, "post_id": 53638678, "comment_id": 94137406, "body": "Yeah, that&#39;s becuase i already know that my file has a large amount of lines"}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": false, "score": 0, "last_activity_date": 1544034870, "creation_date": 1544034870, "answer_id": 53638678, "question_id": 53638480, "link": "https://stackoverflow.com/questions/53638480/how-to-split-a-text-file-into-multiple-parts-in-c/53638678#53638678", "title": "How to split a text file into multiple parts in c", "body": "<p>There are a few problems in your code. But first I think you need to fix the most important thing</p>\n\n<pre><code>int step = lines/N;\n</code></pre>\n\n<p>Here <code>step</code> is 0 if your input file has less than N lines of text.  This is because <code>lines</code> and <code>N</code> both are integer and integer division is rounding down.</p>\n"}, {"tags": [], "owner": {"reputation": 6544, "user_id": 451601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/164602d512ce01f188e5a50593b46c5f?s=128&d=identicon&r=PG", "display_name": "James K. Lowden", "link": "https://stackoverflow.com/users/451601/james-k-lowden"}, "is_accepted": false, "score": 0, "last_activity_date": 1544045915, "creation_date": 1544045915, "answer_id": 53641137, "question_id": 53638480, "link": "https://stackoverflow.com/questions/53638480/how-to-split-a-text-file-into-multiple-parts-in-c/53641137#53641137", "title": "How to split a text file into multiple parts in c", "body": "<p>I won't fix your code, but I'll help you with it.  Some changes I\nsuggest:</p>\n\n<ul>\n<li>Instead of <strong>getlines</strong>, use <strong>getline</strong>(3) from the standard\nlibrary.</li>\n<li><code>fseek(fp, 0 , SEEK_SET)</code> is pointless. </li>\n<li>In <code>char * filename = malloc(sizeof(char)*64)</code>, note that\nboth arguments to malloc are constant, and the size is arbitrary.\nThese days, it's safe to allocate filename buffers statically,\neither on the stack or with <em>static</em>: <code>char filename[PATH_MAX]</code>.\nYou'll want to use <code>limits.h</code> to get that constant.</li>\n<li>Similarly you have no need to dynamically allocate your FILE\npointers.  </li>\n<li><p>Instead of</p>\n\n<p><code>itoa(i+1, number,10);\nstrcpy(filename, \"temp\");\nstrcat(filename, number);\nstrcat(filename, ext);</code></p>\n\n<p>use <code>sprintf(filename, \"temp%d%s\", i+1, ext)</code></p></li>\n<li>get familiar with <strong>err</strong>(3) and friends, for your own convenience.</li>\n</ul>\n\n<p>Finally, your recursive <strong>Split</strong> is -- how shall we say it? -- a nightmare.  Your whole program\nshould be something like:</p>\n\n<pre><code>open input\nwhile getline input\n  if nlines % N == 0\n      create output filename with 1 + n/N\n      open output\n  write output\n  nlines++    \n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10379717, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cDrKAT58Mfw/AAAAAAAAAAI/AAAAAAAAAHY/yGP1Uglx4QU/photo.jpg?sz=128", "display_name": "Stefano Raneri", "link": "https://stackoverflow.com/users/10379717/stefano-raneri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1544045915, "creation_date": 1544034055, "last_edit_date": 1592644375, "question_id": 53638480, "link": "https://stackoverflow.com/questions/53638480/how-to-split-a-text-file-into-multiple-parts-in-c", "title": "How to split a text file into multiple parts in c", "body": "<p>What i need to do, is to take a file of n lines, and for every x lines, create a new file with the lines of the original file. An example would be this:</p>\n<p>Original File:</p>\n<blockquote>\n<p>stefano</p>\n<p>angela</p>\n<p>giuseppe</p>\n<p>lucrezia</p>\n</blockquote>\n<p>In this case, if x == 2,  3 file would be created, in order:</p>\n<p>First file:</p>\n<blockquote>\n<p>stefano</p>\n<p>angela</p>\n</blockquote>\n<p>Second FIle:</p>\n<blockquote>\n<p>giuseppe</p>\n<p>lucrezia</p>\n</blockquote>\n<p>Third File:</p>\n<blockquote>\n<p>lorenzo</p>\n</blockquote>\n<p>What i've done so far is this:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define  N 10\n\nint getlines(FILE *fp)\n{\n  int c = 0;\n  int ch;\n  do{\n  ch = fgetc(fp);\n    if(ch == '\\n')\n    {\n      c++;\n    }\n  }while(ch != EOF);\n  fseek(fp, 0 , SEEK_SET);\n  return c;\n}\n\nint ix = 0;\n\nvoid Split(FILE *fp, FILE **fpo, int step, int lines, int *mem)\n{\nFILE **fpo2 = NULL;\nchar * filename = malloc(sizeof(char)*64);\nchar * ext = &quot;.txt&quot;;\nchar  number[2];\nfor(int i = ix; i &lt; *mem; i++)\n{\n  itoa(i+1, number,10);\n  strcpy(filename, &quot;temp&quot;);\n  strcat(filename, number);\n  strcat(filename, ext);\n\nif(!(fpo[i] = fopen(filename, &quot;w&quot;)))\n{\n  fprintf(stderr, &quot;Error in writing\\n&quot;);\n  exit(EXIT_FAILURE);\n}\n\n}\n  char ch;\n  int  c = 0;\n  do{\n    ch = fgetc(fp);\n    printf(&quot;%c&quot;, ch);\n    if(ch == '\\n')\n    {\n      c++;\n    }\n    if(c &gt;= step)\n    {\n      c = 0;\n      ix++;\n      if(ix &gt;= *mem &amp;&amp; (ix*step) &lt;= lines)\n      {\n      *mem = *mem + 1;\n      fpo2 = realloc(fpo, sizeof(FILE*)*(*mem));\n      Split(fp, fpo2, step, lines, mem);\n      }\n    }\n    putc(ch, fpo[ix]);\n  }while(ch != EOF);\n\n}\n\n\n\nint main()\n{\nFILE * fp;\nif(!(fp = fopen(&quot;file.txt&quot;, &quot;r&quot;)))\n{\n  fprintf(stderr, &quot;Error in opening file\\n&quot;);\n  exit(EXIT_FAILURE);\n}\nint mem = N;\nint lines = getlines(fp);\nint step = lines/N;\n\nFILE **fpo = malloc(sizeof(FILE *)*N);\n\nSplit(fp, fpo, step, lines, &amp;mem);\n\n\nexit(EXIT_SUCCESS);\n}\n</code></pre>\n<p>I'm stack with segmentation error, i couldn't find the bug doing</p>\n<p><code>gdb myprogram</code></p>\n<pre><code>run\n\nbt\n</code></pre>\n<p>I really appreciate any help.</p>\n<p>EDIT:</p>\n<p>I've changed some things and now it works, but it creates an additional file that contains strange characters. I need to still adjust some things:</p>\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define  N 10\n\nint getlines(FILE *fp)\n{\n  int c = 0;\n  int ch;\n  do{\n  ch = fgetc(fp);\n    if(ch == '\\n')\n    {\n      c++;\n    }\n  }while(ch != EOF);\n  fseek(fp, 0 , SEEK_SET);\n  return c;\n}\n\nint ix = 0;\n\nvoid Split(FILE *fp, FILE **fpo, int step, int lines, int *mem)\n{\nFILE **fpo2 = NULL;\nchar * ext = &quot;.txt&quot;;\nfor(int i = ix; i &lt; *mem; i++)\n{\n  char * filename = malloc(sizeof(char)*64);\n  char * number = malloc(sizeof(char)*64);\n\n  itoa(i+1, number,10);\n  strcpy(filename, &quot;temp&quot;);\n  strcat(filename, number);\n  strcat(filename, ext);\n\nif(!(fpo[i] = fopen(filename, &quot;w&quot;)))\n{\n  fprintf(stderr, &quot;Error in writing\\n&quot;);\n  exit(EXIT_FAILURE);\n}\nfree(number);\nfree(filename);\n}\n  char ch;\n  int  c = 0;\n  do{\n    ch = fgetc(fp);\n    printf(&quot;%c&quot;, ch);\n    if(ch == '\\n')\n    {\n      c++;\n    }\n    if(c &gt;= step)\n    {\n      c = 0;\n      ix++;\n      if(ix &gt;= *mem &amp;&amp; ((ix-1)*step) &lt;= lines)\n      {\n      *mem = *mem + 1;\n      fpo2 = realloc(fpo, sizeof(FILE*)*(*mem));\n      Split(fp, fpo2, step, lines, mem);\n      }\n    }\n    putc(ch, fpo[ix]);\n  }while(ch != EOF);\n\n}\n\n\n\nint main()\n{\nFILE * fp;\nif(!(fp = fopen(&quot;file.txt&quot;, &quot;r&quot;)))\n{\n  fprintf(stderr, &quot;Error in opening file\\n&quot;);\n  exit(EXIT_FAILURE);\n}\nint mem = N;\nint lines = getlines(fp);\nint step = lines/N;\n\nFILE **fpo = malloc(sizeof(FILE *)*N);\n\nSplit(fp, fpo, step, lines, &amp;mem);\n\n\nexit(EXIT_SUCCESS);\n}\n</code></pre>\n"}, {"tags": ["c", "malloc", "dirent.h"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1544033465, "post_id": 53638222, "comment_id": 94136278, "body": "How are you compiling this code? What command do you use?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1544033898, "post_id": 53638222, "comment_id": 94136472, "body": "Are you compiling this with a C++ compiler?  A conforming C compiler should not complain about assigning the return value of <code>malloc()</code> to an object of any object pointer type."}, {"owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "reply_to_user": {"reputation": 1924, "user_id": 2669042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c66a47707c3d1748c9977727ddfa4d50?s=128&d=identicon&r=PG", "display_name": "xing", "link": "https://stackoverflow.com/users/2669042/xing"}, "edited": false, "score": 0, "creation_date": 1544035067, "post_id": 53638222, "comment_id": 94137039, "body": "@xing good catch, but does not solve allocation error. New error is <code>a.out(3319,0x7fff74201300) malloc: *** error for object 0x7fb772003218: pointer being freed was not allocated *** set a breakpoint in malloc_error_break to debug ...Abort trap: 6</code>"}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544035222, "post_id": 53638720, "comment_id": 94137105, "body": "Thanks for the answer. I fixed the index issue, but unfortunately, it is not solving my allocation problem, even when forcing the compiler to use c. I get the following error now: <code>a.out(3319,0x7fff74201300) malloc: *** error for object 0x7fb772003218: pointer being freed was not allocated *** set a breakpoint in malloc_error_break to debug ...Abort trap: 6</code>"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 1, "creation_date": 1544035337, "post_id": 53638720, "comment_id": 94137160, "body": "@Hierophect, the indexing issue is only one of several I pointed out.  Some of the others involve pointers that indeed you should not attempt to free.  However, there are one or two more things I perhaps should mention."}, {"owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544035341, "post_id": 53638720, "comment_id": 94137161, "body": "Additionally, while I can force the program to compile in C now, I would ideally like to include this code in a C++ program (due to the requirements of other libraries). Is there another way to avoid this error?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544035404, "post_id": 53638720, "comment_id": 94137192, "body": "@Hierophect The whole structure of this code is broken. If you&#39;re using C++, you should just read the entry names into a <code>vector&lt;string&gt;</code> and forget about copying <code>struct dirent</code>s around."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1544035661, "post_id": 53638720, "comment_id": 94137310, "body": "The <code>readdir</code> man page explicitly says you can&#39;t copy <code>struct dirent</code>s like that: &quot;<i>POSIX.1 explicitly notes that [d_name] should not be used as an lvalue. [...] (On some systems, this field is defined as <code>char d_name[1]</code>!)</i>&quot;"}, {"owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1544035662, "post_id": 53638720, "comment_id": 94137311, "body": "@melpomene, well, be that as it may, now that I&#39;ve fixed my index error, deleted the erroneous free statements, and continued to comment out the malloc... it works. Should I be worried about leaving it as is? This is embedded systems firmware so I avoid vectors wherever possible."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544035696, "post_id": 53638720, "comment_id": 94137328, "body": "@Hierophect, you tagged your question [c].  Kudos on <i>not</i> tagging both [c] and [c++], which is almost never correct, but if you want a C++ solution then that would be an altogether different question and answer."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544035734, "post_id": 53638720, "comment_id": 94137351, "body": "@Hierophect Then use <code>strdup(dir-&gt;d_name)</code> or whatever. But don&#39;t mess with <code>struct dirent</code>s."}, {"owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544035756, "post_id": 53638720, "comment_id": 94137358, "body": "I apologize - I did not realize this would end up being a compiler compatibility issue."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544035819, "post_id": 53638720, "comment_id": 94137386, "body": "@Hierophect, there is no a &quot;compiler compatibility&quot; issue here.  There is a &quot;what language are you programming in?&quot; issue.  C and C++ are different languages, with some overlap."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1544036065, "post_id": 53638720, "comment_id": 94137485, "body": "@melpomene, I don&#39;t see that text about using <code>d_name</code> as an lvalue in <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/readdir.html\" rel=\"nofollow noreferrer\">the current version of POSIX</a>, and it does not seem compatible with the existence of <code>readdir_r()</code> (because how, then, could the user create an appropriate buffer into which that function could write directory entries?)."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1544036405, "post_id": 53638720, "comment_id": 94137629, "body": "@JohnBollinger As for <code>readdir_r</code>: &quot;<i>The storage pointed to by <code>entry</code> shall be large enough for a <code>dirent</code> with an array of <code>char d_name</code> members containing at least {NAME_MAX}+1 elements.</i>&quot; I read this as a requirement on the application programmer to make sure they allocate at least <code>sizeof (struct dirent) + NAME_MAX + 1</code> bytes for <code>entry</code>."}, {"owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544037313, "post_id": 53638720, "comment_id": 94138045, "body": "@JohnBollinger referring to your Addendum, and comment on C/C++. I tend to program as close to C as possible but I typically have to use a C++ compiler because of the platforms I work on. I&#39;m not 100% versed on the cases where C is not a subset of C++, so I missed this issue. Would you describe your suggested solution as a decent one, or would you recommend I seek a C++ solution given the circumstances?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544037861, "post_id": 53638720, "comment_id": 94138244, "body": "@Hierophect, the answer to &quot;What language are you programming in?&quot; can be &quot;the common subset of C and C++&quot;, but that&#39;s a tricky exercise.  If your circumstances require you to use a C++ compiler, then I say embrace it.  Use natural C++ idioms, even if you don&#39;t go wild with making a class for everything."}, {"owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "edited": false, "score": 0, "creation_date": 1544038229, "post_id": 53638720, "comment_id": 94138393, "body": "I will try Vector then - my more recent research suggests my universal avoidance of it on microprocessors may be misplaced anyway. I appreciate your polite responses."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 0, "last_activity_date": 1544035604, "last_edit_date": 1544035604, "creation_date": 1544035029, "answer_id": 53638720, "question_id": 53638222, "link": "https://stackoverflow.com/questions/53638222/segfault-incompatible-type-error-when-attempting-to-create-an-array-of-directory/53638720#53638720", "title": "Segfault/incompatible type error when attempting to create an array of directory structures", "body": "<blockquote>\n  <p>Running the above code results in a Segmentation fault: 11.</p>\n</blockquote>\n\n<p>This could be because of </p>\n\n<pre><code>    printf(d_array[n]-&gt;d_name);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    free(d_array[n]);\n</code></pre>\n\n<p>, because <code>n</code> is the number of directory entries, and <code>d_array[n]</code> is uninitialized.  (You appear to have meant <code>d_array[i]</code>)  Note, too, that you should not attempt to free the pointer returned by <code>readdir()</code>, as it does not belong to you.  The documentation specifically says that you should not attempt to free it.  That would potentially apply in the version in which you just assign the pointer itself to the array.</p>\n\n<p>It could also be  because of</p>\n\n<pre><code>free(d_array);\n</code></pre>\n\n<p>, since <code>d_array</code> itself is not dynamically allocated.  You could reasonably hope that your compiler would warn about that one.  Mine does.</p>\n\n<blockquote>\n  <p>I don't understand why <code>d_array[n] = malloc(sizeof(struct dirent))</code>,\n  which is verbatim from multiple posts about this topic, is having this\n  incompatible type error.</p>\n</blockquote>\n\n<p>That would be because your compiler is non-conforming.  Perhaps you are using a C++ compiler instead of a C compiler -- these are not interchangeable.  That statement is perfectly valid C, given the declarations that are in scope where it appears in your code.</p>\n\n<p><strong>Addendum:</strong>\nAs for what you actually should do, if you are going to dynamically allocate memory for the elements of d_array to point to (and you should, if you use an array of pointers at all) then you need to copy the <em>pointed-to</em> <code>struct dirent</code> structures into the allocated space, not assign the returned pointers directly to the array.  That would be</p>\n\n<pre><code>    *d_array[i] = *dir;\n</code></pre>\n\n<p>as Paul Ogilvie first pointed out in a now-deleted answer.</p>\n"}], "owner": {"reputation": 317, "user_id": 1772750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8b1f9acdf2ad630d948350d60c4de238?s=128&d=identicon&r=PG", "display_name": "Hierophect", "link": "https://stackoverflow.com/users/1772750/hierophect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 53638720, "answer_count": 1, "score": -4, "last_activity_date": 1544035604, "creation_date": 1544033024, "question_id": 53638222, "link": "https://stackoverflow.com/questions/53638222/segfault-incompatible-type-error-when-attempting-to-create-an-array-of-directory", "title": "Segfault/incompatible type error when attempting to create an array of directory structures", "body": "<p>I'm using the dirent.h library to scan a directory for all the files it contains and store pointers to the resulting objects in an array. I've been following this <a href=\"https://stackoverflow.com/questions/15397728/c-pointer-to-array-of-pointers-to-structures-allocation-deallocation-issues\">old SO question</a> describing the storage of structure pointers in arrays, but I'm running into issues during my implementation.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dirent.h&gt;\n\nint main(int argc, char **argv) \n{\n    DIR *d = NULL;\n    struct dirent *dir = NULL;\n    struct dirent *d_array[50]; //big overkill array to avoid realloc\n    size_t n = 0; //number of items\n\n    d = opendir(\"scandir\"); //name of directory to search\n    if(d)\n    { \n        while((dir = readdir(d))!=NULL) {\n            //d_array[n] = malloc(sizeof(struct dirent));\n            d_array[n++] = dir;\n        }\n        closedir(d);\n    }\n    for(size_t i = 0;i&lt;n;i++) {\n        printf(d_array[n]-&gt;d_name);\n        free(d_array[n]);\n    }\n    free(d_array);\n    return 0;\n}\n</code></pre>\n\n<p>Running the above code results in a Segmentation fault: 11. I thought this was probably because I was properly allocating the memory for the structures (as seen in the commented out malloc), but including that gives the following error:</p>\n\n<pre><code>error: assigning to 'struct dirent *' from incompatible type\n  'void *'\n</code></pre>\n\n<p>I don't understand why <code>d_array[n] = malloc(sizeof(struct dirent))</code>, which is verbatim from multiple posts about this topic, is having this incompatible type error. And if it's inappropriate to use, why am I getting a segfault? </p>\n"}, {"tags": ["c", "operating-system", "pipe"], "answers": [{"comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544069580, "post_id": 53638225, "comment_id": 94147918, "body": "Actually, output to <code>stdout</code> is <i>line</i> buffered &quot;by default&quot;, But when connected to a pipe it&#39;s <i>fully</i> buffered."}], "tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": true, "score": 2, "last_activity_date": 1544033031, "creation_date": 1544033031, "answer_id": 53638225, "question_id": 53637578, "link": "https://stackoverflow.com/questions/53637578/process-synchronization-with-2-pipes/53638225#53638225", "title": "process synchronization with 2 pipes", "body": "<p>The <code>printf</code> output might not get written immediately but get delayed until a buffer is full because <code>printf</code> and other functions from <code>stdio.h</code> use buffered output by default.</p>\n\n<p>Try one of the following:</p>\n\n<ul>\n<li>add <code>setbuf(stdout, NULL);</code> before the <code>fork()</code> to disable buffering or</li>\n<li>use <code>fflush(stdout)</code> after <code>printf</code> or</li>\n<li>use <code>write</code> instead of <code>printf</code>.</li>\n</ul>\n"}], "owner": {"reputation": 160, "user_id": 9746523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31fb5d6b67792e1fd42bc858b562a263?s=128&d=identicon&r=PG&f=1", "display_name": "Simone De Vita", "link": "https://stackoverflow.com/users/9746523/simone-de-vita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 53638225, "answer_count": 1, "score": 2, "last_activity_date": 1544033031, "creation_date": 1544030364, "question_id": 53637578, "link": "https://stackoverflow.com/questions/53637578/process-synchronization-with-2-pipes", "title": "process synchronization with 2 pipes", "body": "<p>I'm doing an assignment. I need to write a C program with one child, and then father and child have to print to stdout one line for each.\nBasically I want something like this:</p>\n\n<pre><code>I'm the father\nI'm the child\nI'm the father\nI'm the child\nI'm the father\nI'm the child\n...\n</code></pre>\n\n<p>I'm allowed to only use two pipes for process communication.\nThis is what I've written:</p>\n\n<pre><code>int par_read = pipe1[0];\nint par_write = pipe2[1];\nint cld_read = pipe2[0];\nint cld_write = pipe1[1];\n\nchar w;\n\nif (fork()) // par\n{\n    close(cld_read);\n    close(cld_write);\n\n    while(1)\n    {\n        printf(\"I'm the father\\n\");\n\n        if (write(par_write, &amp;w, 1) == -1)\n        {\n            fprintf(stderr, \"Error on par_write: %s\\n\", strerror(errno));\n            exit(EXIT_FAILURE);\n        }\n\n        if (read(par_read, &amp;w, 1) == -1)\n        {\n            fprintf(stderr, \"Error on par_read: %s\\n\", strerror(errno));\n            exit(EXIT_FAILURE);\n        }\n    }\n\n}\nelse    // cld\n{\n    close(par_read);\n    close(par_write);\n\n    while(1)\n    {\n        if (read(cld_read, &amp;w, 1) == -1)\n        {\n            fprintf(stderr, \"Error on cld_read: %s\\n\", strerror(errno));\n            exit(EXIT_FAILURE);\n        }\n\n        printf(\"I'm the child\\n\");\n\n        if (write(cld_write, &amp;w, 1) == -1)\n        {\n            fprintf(stderr, \"Error on cld_write: %s\\n\", strerror(errno));\n            exit(EXIT_FAILURE);\n        }\n    }\n</code></pre>\n\n<p>Full code <a href=\"https://pastebin.com/AA1R17m7\" rel=\"nofollow noreferrer\">here</a>.\nThe problem is that the two processes start working correctly only after a few hundred lines. The first lines are full of \"I'm the father\". I also checked it counting the lines:</p>\n\n<pre><code>$ ./ex &gt; ex_out\n$ cat ex_out | wc -l\n40960\n$ cat ex_out | uniq | wc - l\n255\n</code></pre>\n\n<p>What I'm doing wrong?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1544030167, "post_id": 53637492, "comment_id": 94134727, "body": "It is best to use the natural <code>int</code> size of the machine unless you have good reason not to. I would say using different integer types for different quantities will make the code less readable, not more. Uh: the question was since edited."}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 1, "creation_date": 1544030214, "post_id": 53637492, "comment_id": 94134747, "body": "Your system may be very bad/slow at manipulating, say, 16 bit quantities."}, {"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544030356, "post_id": 53637492, "comment_id": 94134819, "body": "you will need more casting when you always use the most narrow type for each variable"}, {"owner": {"reputation": 103, "user_id": 9470762, "user_type": "registered", "profile_image": "https://graph.facebook.com/575185296170576/picture?type=large", "display_name": "Galan Lucian", "link": "https://stackoverflow.com/users/9470762/galan-lucian"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1544030497, "post_id": 53637492, "comment_id": 94134888, "body": "@WeatherVane Sorry for that, I don&#39;t know how I messed up that part when I wrote that those types simplify and improve readability, I edited it! Thanks for noticing, my bad!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1544030523, "post_id": 53637492, "comment_id": 94134905, "body": "My rule of thumb: Use fixed width types when your code depends on the size of the type.  After that use the type who&#39;s minimum mandated value is enough for you."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1544030524, "post_id": 53637492, "comment_id": 94134908, "body": "@WeatherVane: it was a long time ago when <code>int</code> meant word size of the CPU. Most (all?) 64-bit compilers use 32-bit <code>int</code>, for example."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1544030928, "post_id": 53637492, "comment_id": 94135091, "body": "In case you need a counter where you don&#39;t care if it overflows as 32 or 64 bit you might be better off using just <code>int</code> or <code>long</code> for best performance instead of saying int32_t (unnecessarily restricting yourself on 64 bit platform) or int64_t (being slow on 32 bit platform)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1544030939, "post_id": 53637492, "comment_id": 94135097, "body": "My rule of thumb: I use <code>size_t</code> for all container size/index related stuff. And I use fixed width types everywhere else (with sorter alias, like <code>s32</code>, etc.)."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "edited": false, "score": 1, "creation_date": 1544031029, "post_id": 53637492, "comment_id": 94135136, "body": "Inside of a function it doesn&#39;t really matter. Compilers will likely promote it to the CPU&#39;s wordsize &amp; work with that regardless of what you use. Might as well accept that and use <code>int&#47;long</code> to make it less surprising there. In interfaces where you might wish to communicate what range of values you accept &amp; in structs you expect to have a lot of, I think the minimal-width typedefs are a great idea. The fixed-width typedefs are theoretically less portable because the standard doesn&#39;t guarantee their existence, &amp; I&#39;d avoid the fast typedefs because different libcs might define them differently."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1544034939, "post_id": 53637492, "comment_id": 94136984, "body": "Your code might not compile for a 36-bit mainframe?"}], "answers": [{"tags": [], "owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "is_accepted": false, "score": 4, "last_activity_date": 1544031538, "creation_date": 1544031538, "answer_id": 53637872, "question_id": 53637492, "link": "https://stackoverflow.com/questions/53637492/are-there-any-non-readability-related-reasons-to-not-specifically-use-fixed-widt/53637872#53637872", "title": "Are there any non-readability related reasons to NOT specifically use fixed width integers every single time?", "body": "<p>Compatibility with other code, and not imposing arbitrary restrictions.</p>\n\n<p>A large portion of the integer variables you use in a typical C program are array indices, object counts, etc. Such values are inherently <em>not representable</em> as fixed-width integer types whose width is known at the time of writing the program; the possible range varies by implementation. (This is related to the fact that a given C implementation is not Turing-equivalent; only an infinite family of implementations, via the <a href=\"https://en.wikipedia.org/wiki/Transdichotomous_model\" rel=\"nofollow noreferrer\">Transdichotomous model</a> is). Cetainly you could <em>decide</em> that you only want to support up to 2^32 (for example) of a given thing, and thereby get by with using a fixed-width type, but it's anti-idiomatic, and such code won't be compatible with typical (including std lib) interfaces that use <code>size_t</code> and might be passing or accepting larger objects.</p>\n"}, {"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 8, "last_activity_date": 1544035818, "last_edit_date": 1544035818, "creation_date": 1544035448, "answer_id": 53638821, "question_id": 53637492, "link": "https://stackoverflow.com/questions/53637492/are-there-any-non-readability-related-reasons-to-not-specifically-use-fixed-widt/53638821#53638821", "title": "Are there any non-readability related reasons to NOT specifically use fixed width integers every single time?", "body": "<p>Performance is another reason.</p>\n\n<p>Narrow operands require additional narrowing/widening instructions. This can't always be optimized away without side effects. And sometimes the optimizer just isn't smart enough and plays it safe.</p>\n\n<p>Take the following contrived example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\nusing namespace std::chrono_literals;\n\nint main()\n{\n    auto tm1 = chrono::high_resolution_clock::now();\n    unsigned int n = 0;\n    unsigned int x = 0;  // though, uint8_t would have been enough!\n    for (unsigned int i = 0; i &lt; 1000000000; i++) {\n        n += (x * i);\n        x = (n + 1) &amp; 0x7F;\n    }\n    auto tm2 = chrono::high_resolution_clock::now();\n    cout &lt;&lt; n &lt;&lt; \", \" &lt;&lt; (tm2 - tm1) / 1.0s &lt;&lt; \" s\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>If we change the type of <code>x</code> from <code>unsigned int</code> to <code>uint8_t</code>, the application becomes 15% slower (2s instead of 1.7s run time on x86-64 when compiled with GCC 7.2 <code>-O3</code> full optimization on).</p>\n\n<p>Assembly with a <a href=\"https://gcc.godbolt.org/z/4es8pl\" rel=\"noreferrer\">32-bit</a> <code>x</code>:</p>\n\n<pre><code>.L2:\n  imul eax, edx\n  inc edx\n  add ebx, eax\n  lea eax, [rbx+1]\n  and eax, 127\n  cmp edx, 1000000000\n  jne .L2\n</code></pre>\n\n<p>Assembly with an <a href=\"https://gcc.godbolt.org/z/UwuqO8\" rel=\"noreferrer\">8-bit</a> <code>x</code>:</p>\n\n<pre><code>.L2:\n  movzx eax, al    ; owww!\n  imul eax, edx\n  inc edx\n  add ebp, eax\n  lea eax, [rbp+1]\n  and eax, 127\n  cmp edx, 1000000000\n  jne .L2\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 9470762, "user_type": "registered", "profile_image": "https://graph.facebook.com/575185296170576/picture?type=large", "display_name": "Galan Lucian", "link": "https://stackoverflow.com/users/9470762/galan-lucian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 53638821, "answer_count": 2, "score": 7, "last_activity_date": 1544035818, "creation_date": 1544030036, "last_edit_date": 1544030277, "question_id": 53637492, "link": "https://stackoverflow.com/questions/53637492/are-there-any-non-readability-related-reasons-to-not-specifically-use-fixed-widt", "title": "Are there any non-readability related reasons to NOT specifically use fixed width integers every single time?", "body": "<p>Let's say that we have <code>uint_least8_t var</code>, where, hypothetically speaking, <code>var</code> won't possibly ever exceed the value 255.\nI know that's not how programming works and \"possibly\" and \"ever\" are a blasphemy, but, aside from complicating the code and making it less readable, what makes always using fixed width integers a bad idea?</p>\n"}, {"tags": ["c", "string", "indexing", "c-preprocessor"], "comments": [{"owner": {"reputation": 21147, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1544036456, "post_id": 53637440, "comment_id": 94137653, "body": "Please elaborate. &quot;I have sources&quot;, please show examples. &quot;a generated file&quot; please show. &quot;I want to ...&quot;, please show some desired output for the sample input. Also please describe what you tried, in order to demonstrate some own research effort. Maybe you can show something you did which is kind of but not copmletely what you want. Generally try to avoid the impression &quot;here are requirements, please give code&quot;."}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1544048750, "post_id": 53637440, "comment_id": 94142819, "body": "What are you trying to achieve by doing this?  Could it be something that the compiler macro <code>__LINE__</code> or maybe <code>__FILE__</code> can help with?"}, {"owner": {"reputation": 1, "user_id": 6346338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58edfa222f8c3645e664e0be1d6c45c?s=128&d=identicon&r=PG", "display_name": "Thomas H&#246;henleitner", "link": "https://stackoverflow.com/users/6346338/thomas-h%c3%b6henleitner"}, "edited": false, "score": 0, "creation_date": 1544049264, "post_id": 53637440, "comment_id": 94143006, "body": "It is a software tracer for very small embedded systems. The trace strings are not going into the target. They are loaded dynamically by a PC tool. The target sends a 23 and the host knows it is &quot;abc&quot;. I know <code>__LINE__</code> and <code>__FILE__</code> but I have no idea how they can help me in this case."}], "answers": [{"tags": [], "owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "is_accepted": false, "score": 1, "last_activity_date": 1544049763, "last_edit_date": 1544049763, "creation_date": 1544048896, "answer_id": 53641731, "question_id": 53637440, "link": "https://stackoverflow.com/questions/53637440/how-to-exchange-a-string-with-an-index-during-c-preprocess/53641731#53641731", "title": "How to exchange a string with an index during C preprocess", "body": "<hr>\n\n<p>The preprocessor supplies the automagic macros <code>__FILE__</code> and <code>__LINE__</code> (and a few others) which you can use:</p>\n\n<hr>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define TRACE(m) fprintf(stderr, \"%s,%d: %s\\n\", __FILE__ , __LINE__, m)\n\nint main(void)\n{\nint a;\n\nif(a) TRACE(\"a\");\nelse TRACE(\"no\");\n\nTRACE(\"returning\");\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6346338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58edfa222f8c3645e664e0be1d6c45c?s=128&d=identicon&r=PG", "display_name": "Thomas H&#246;henleitner", "link": "https://stackoverflow.com/users/6346338/thomas-h%c3%b6henleitner"}, "is_accepted": false, "score": 0, "last_activity_date": 1544096431, "creation_date": 1544096431, "answer_id": 53650658, "question_id": 53637440, "link": "https://stackoverflow.com/questions/53637440/how-to-exchange-a-string-with-an-index-during-c-preprocess/53650658#53650658", "title": "How to exchange a string with an index during C preprocess", "body": "<p>I have this idea now: Let the preprocessor generate this output:</p>\n\n<pre><code>trace(\"abc\"); \ntrace(\"def\");\n</code></pre>\n\n<p>Than write a tool (i.e. a bash script with awk) exchanging the strings with their line number from the generated list file:</p>\n\n<pre><code>...\n\"abc\"\n\"def\"\n...\n</code></pre>\n\n<p>And finally let the compiler do his work. I am not really happy with it, because it needs to be adapted for each compiler. Any better idea?</p>\n"}], "owner": {"reputation": 1, "user_id": 6346338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58edfa222f8c3645e664e0be1d6c45c?s=128&d=identicon&r=PG", "display_name": "Thomas H&#246;henleitner", "link": "https://stackoverflow.com/users/6346338/thomas-h%c3%b6henleitner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544096431, "creation_date": 1544029880, "last_edit_date": 1544048794, "question_id": 53637440, "link": "https://stackoverflow.com/questions/53637440/how-to-exchange-a-string-with-an-index-during-c-preprocess", "title": "How to exchange a string with an index during C preprocess", "body": "<p>I have in several C-sources trace statements, like</p>\n\n<pre><code>TRACE(23, \"abc\"); \nTRACE(24, \"def\");\n</code></pre>\n\n<p>The numbers 23 and 24 are identifiers counted out of an automatically generated list containing in each line one string</p>\n\n<pre><code>...\n\"abc\"\n\"def\"\n...\n</code></pre>\n\n<p>\"abc\" is in line 23 and so I write 23 in the appropriate trace statement.</p>\n\n<p>The preprocessor generates me this wanted output</p>\n\n<pre><code>trace(23);\ntrace(24);\n</code></pre>\n\n<p>I think it should be possible to automate it in that way that I only write</p>\n\n<pre><code>TRACE(\"abc\"); \nTRACE(\"def\");\n</code></pre>\n\n<p>During C preprocessing i want to exchange the strings with the appropriate line number of my generated file automatically, so that I get in the preprocessor output</p>\n\n<pre><code>trace(23);\ntrace(24);\n</code></pre>\n\n<p>I can write a function which returns me the line number 23 for the string \"abc\" but I need to activate it during the preprocessing process. Are there any preprocessor hooks or other ideas?</p>\n"}, {"tags": ["c", "matrix"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1544029843, "post_id": 53637322, "comment_id": 94134570, "body": "You generate a random value for each matrix element, so naturally the result is not symmetric.  Instead, generate elements only for the lower (or upper) triangle, and set the values in the other triangle symmetrically from the first."}], "answers": [{"comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1550722151, "post_id": 53637497, "comment_id": 96375519, "body": "That&#39;s an unrelated mistake in the original code, and fixing it doesn&#39;t help to make the matrix symmetric."}], "tags": [], "owner": {"reputation": 62, "user_id": 8527440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uCRIJ.jpg?s=128&g=1", "display_name": "Sahil Singh", "link": "https://stackoverflow.com/users/8527440/sahil-singh"}, "is_accepted": false, "score": -1, "last_activity_date": 1544030065, "creation_date": 1544030065, "answer_id": 53637497, "question_id": 53637322, "link": "https://stackoverflow.com/questions/53637322/how-to-make-simmetric-matrix-in-c-language/53637497#53637497", "title": "How to make simmetric matrix in C language", "body": "<p>Line #7:\nuse</p>\n\n<pre><code>int matrix[size][size];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1544031133, "post_id": 53637705, "comment_id": 94135170, "body": "You should also consider to call <code>srand()</code> to make sure that each invocation for the same size doesn&#39;t return the same result."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1544031400, "last_edit_date": 1544031400, "creation_date": 1544030862, "answer_id": 53637705, "question_id": 53637322, "link": "https://stackoverflow.com/questions/53637322/how-to-make-simmetric-matrix-in-c-language/53637705#53637705", "title": "How to make simmetric matrix in C language", "body": "<p>Two mistakes:</p>\n\n<ul>\n<li>off-by-one error in the matrix size: accesses will go to wrong place</li>\n<li>you overwrite all columns in all lines, instead of filling just a triangle</li>\n</ul>\n\n<p>Corrected code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nint main(int argc, char **argv) {\n  (void) argc;\n  (void) argv;\n\n  int size;\n\n  printf(\"Build a symmetric matrix using random numbers\\n\\n\");\n  printf(\"Insert matrix size: \");\n  scanf(\"%d\", &amp;size);\n\n  /* ensure different result every time program is executed */ \n  srand(time(NULL));\n\n  int matrix[size][size];\n  for (int   i = 0; i &lt; size;  i++) {\n    for (int j = 0; j &lt; i + 1; j++) {\n      int num = rand() % 100 + 1;\n      matrix[i][j] = num;\n      matrix[j][i] = num;\n    }\n  }\n\n  for (int i = 0;   i &lt; size; i++) {\n    printf(\"\\n\\t\");\n    for (int j = 0; j &lt; size; j++) {\n      printf(\"%03d \", matrix[i][j]);\n    }\n  }\n  printf(\"\\n\");\n\n  return(0);\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>Build a symmetric matrix using random numbers\n\nInsert matrix size: 5\n\n        084 087 016 087 063 \n        087 078 094 093 028 \n        016 094 036 050 091 \n        087 093 050 022 060 \n        063 028 091 060 064 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1558, "user_id": 2346131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/igvgA.jpg?s=128&g=1", "display_name": "Lavish Kothari", "link": "https://stackoverflow.com/users/2346131/lavish-kothari"}, "is_accepted": true, "score": 0, "last_activity_date": 1544031905, "creation_date": 1544031905, "answer_id": 53637973, "question_id": 53637322, "link": "https://stackoverflow.com/questions/53637322/how-to-make-simmetric-matrix-in-c-language/53637973#53637973", "title": "How to make simmetric matrix in C language", "body": "<p>You are not getting symmetric matrix because you are accessing the index of matrix not properly. Let me explain in a bit detail.</p>\n\n<p>The matrix that you are using is of size <code>size-1 x size-1</code>, so if <code>size=5</code> then the matrix that you are allocating is of size <code>4x4</code>, so you effectively have only 16 elements in your matrix. (And you actually want 25 elements).</p>\n\n<p>But when traversing the matrix to populate it, you are accessing index like<code>[4,4]</code> which means your matrix should (logically) have 25 elements. (But it is not having).</p>\n\n<p>So there are two ways to get rid of this mistake:</p>\n\n<ul>\n<li>You can change your <code>for</code> loop to <code>for(int i=0;i&lt;size-1;i++)</code> so you don't access elements in an unexpected way.</li>\n<li>You can increase the size of your array to <code>size x size</code> instead of <code>size-1 x size-1</code>.</li>\n</ul>\n\n<p>The final code will look something like this (I'm posting only the core part):</p>\n\n<pre><code>int matrix[size][size];\nfor(int i=0;i&lt;size;i++){\n    for(int j=i;j&lt;size;j++){\n        num = rand()%100+1;\n        matrix[i][j]=num;\n        matrix[j][i]=num;\n    }\n}\n</code></pre>\n\n<p>As an optimization you can avoid re-writing the values by putting starting the inner-loop for <code>j</code> from <code>i</code> itself, so that the values in the upper triangle of matrix are generated by random number and the lower triangle values are filled by the value in the corresponding symmetric cell in the upper triangle.</p>\n\n<p>I think your intention for asking the question is to learn and get better, so I answered in detail with some extra comments. I hope this was helpful. :)</p>\n"}], "owner": {"reputation": 11, "user_id": 10750681, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CKlDsn8oXGc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jBbhZQRUIUsmRIDoTo0sQCugLVBQ/mo/photo.jpg?sz=128", "display_name": "David Abreu", "link": "https://stackoverflow.com/users/10750681/david-abreu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 53637973, "answer_count": 3, "score": 0, "last_activity_date": 1544031905, "creation_date": 1544029471, "question_id": 53637322, "link": "https://stackoverflow.com/questions/53637322/how-to-make-simmetric-matrix-in-c-language", "title": "How to make simmetric matrix in C language", "body": "<p>For a school project of the features asked is to build a symmetric matrix using random number in [1,100], I know how to build a matrix and how to do it using the rand() function in C however I'm not being able to do a symmetric one, this is my code:</p>\n\n<pre><code>int size, num;\nfflush(stdin);\nsystem(\"cls\");\nprintf(\"Build a simmetric matrix using random numbers\\n\\n\");\nprintf(\"Insert matrix size: \");\nscanf(\"%d\", &amp;size);\nint matrix[size-1][size-1];\nfor(int i=0;i&lt;size;i++){\n    for(int j=0;j&lt;size;j++){\n        num = rand()%100+1;\n        matrix[i][j]=num;\n        matrix[j][i]=num;\n    }\n}\nfor(int i=0;i&lt;size;i++){\n    printf(\"\\n\\t\");\n    for(int j=0;j&lt;size;j++){\n        printf(\"%03d \", matrix[i][j]);\n    }\n}\nprintf(\"\\n\\nPress Enter to continue...\");\nsystem(\"pause &gt;nul /nobreak\");\n</code></pre>\n\n<p>It builds a square matrix as requested but it isn't symmetric.</p>\n\n<p>I would appreciate and be thankful for any help with the code to do it or pointing me to the right direction.</p>\n"}, {"tags": ["c", "arrays", "scanf"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1544027853, "post_id": 53636785, "comment_id": 94133403, "body": "You need to read the value of <code>a</code> <i>before</i> allocating the arrays <code>a_u</code> and <code>a_s</code> ! (In your code above these arrays have a size of 0 !)"}, {"owner": {"reputation": 3, "user_id": 10750438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vdjn9swIDOs/AAAAAAAAAAI/AAAAAAAAAD4/_bAXXRJW1P0/photo.jpg?sz=128", "display_name": "Taufik Nurhidayat", "link": "https://stackoverflow.com/users/10750438/taufik-nurhidayat"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1544028249, "post_id": 53636785, "comment_id": 94133635, "body": "you are right, thanks !"}], "answers": [{"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1544031566, "post_id": 53636875, "comment_id": 94135383, "body": "VLAs were introduced with C99 (although gcc had them somewhat before this)."}], "tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 1, "last_activity_date": 1544033041, "last_edit_date": 1544033041, "creation_date": 1544027989, "answer_id": 53636875, "question_id": 53636785, "link": "https://stackoverflow.com/questions/53636785/input-for-array-not-scanned-missing/53636875#53636875", "title": "input for array not scanned/missing", "body": "<p>There's an issue here:</p>\n\n<pre><code>int a = 0, b = 0, c = 0, a_u[a], a_s[a];\n</code></pre>\n\n<p>Your arrays <code>a_u</code> and <code>a_s</code> are variable length. Variable length arrays are not necessarily standard C (you probably need at least a C99 compiler to take advantage of that feature). But let's assume for now that your compiler does support it.</p>\n\n<p>More importantly, you have used the value of <code>a</code>, which is 0, as the size of those arrays.</p>\n\n<p>This means that <em>any</em> code accessing <code>a_u</code> or <code>a_s</code> will exhibit <strong>undefined behavior</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 8960549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/accddb51274cbba93c7f5a58be73ee4b?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Weirdo", "link": "https://stackoverflow.com/users/8960549/mr-weirdo"}, "is_accepted": false, "score": 0, "last_activity_date": 1544366636, "creation_date": 1544366636, "answer_id": 53693452, "question_id": 53636785, "link": "https://stackoverflow.com/questions/53636785/input-for-array-not-scanned-missing/53693452#53693452", "title": "input for array not scanned/missing", "body": "<p>Have a look at your arrays. At line 4, the 2 arrays that you have defined, <strong>a_u</strong> and <strong>a_s</strong> would have <strong>\"0\"</strong> size which is not a smart thing to do. This would further cause an undefined behavior leading to varying in executions. I don't understand the point of such declaration.</p>\n"}], "owner": {"reputation": 3, "user_id": 10750438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Vdjn9swIDOs/AAAAAAAAAAI/AAAAAAAAAD4/_bAXXRJW1P0/photo.jpg?sz=128", "display_name": "Taufik Nurhidayat", "link": "https://stackoverflow.com/users/10750438/taufik-nurhidayat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53636875, "answer_count": 2, "score": 0, "last_activity_date": 1544366636, "creation_date": 1544027672, "question_id": 53636785, "link": "https://stackoverflow.com/questions/53636785/input-for-array-not-scanned-missing", "title": "input for array not scanned/missing", "body": "<p>input : \n8\n(2 5 6 9 10 2 7 4)\nexpected output :\n(2 7 9 9 12 5 7 6)\nreal output : (2 7 9 9)</p>\n\n<p>this is for my college assignment and my first time asking here.\nI dont know why, but 10 not scanned, any help ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main ()\n{\nint a = 0, b = 0, c = 0, a_u[a], a_s[a];\nprintf(\"jumlah inputan : \");\nscanf(\"%d\", &amp;a);\n\nprintf(\"\\nmasukkan bilangan : \");\n\nfor(b = 0; b &lt; a; b++) {\n    scanf(\"%d\", &amp;a_u[b]);\n}\n\nprintf (\"\\n\");\nfor(b = 0; b &lt; a; b++) {\n    if (b % 3 == 0){\n        a_s[b] = a_u[b];\n    }\n    else if (b % 3 == 1){\n        a_s[b] = a_u[b] + 2;\n    }\n    else if (b % 3 == 2) {\n        a_s[b] = a_u[b] + 3;\n    }\n}\n\nfor(b = 0; b &lt; a; b++) {\n    printf(\"%d \", a_s[b]);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "file", "input"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1544027354, "post_id": 53636581, "comment_id": 94133095, "body": "See: <a href=\"http://stackoverflow.com/q/5431941/253056\">Why is \u201cwhile ( !feof (file) )\u201d always wrong?</a>"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 1, "creation_date": 1544027384, "post_id": 53636581, "comment_id": 94133112, "body": "Your first <code>malloc</code> should be <code>*sizeof(char *)</code> as you want to allocate room for pointers."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 5, "creation_date": 1544027407, "post_id": 53636581, "comment_id": 94133130, "body": "Also, why are you opening the file twice ?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 1, "creation_date": 1544032426, "post_id": 53636581, "comment_id": 94135803, "body": "I rolled your post back to its original content.  In general, It is not a good idea to edit your post to <i>make corrections</i> using content from either comments or answers.  (other than formatting, or additional information that clarifies your question(s))   It causes people to have to <i>chase</i> the solution.  That is, when you edit other peoples suggestions into your answer, the problem becomes a moving target."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 10489209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CCSSJPuzWyA/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUAF-vsOgHOI3S28ZN_Lu9S4AyJ6w/mo/photo.jpg?sz=128", "display_name": "Just another student", "link": "https://stackoverflow.com/users/10489209/just-another-student"}, "edited": false, "score": 0, "creation_date": 1544031014, "post_id": 53636965, "comment_id": 94135128, "body": "Hi, i appreciated your answer. Can i ask you what last two while cycles do? When does while(buf) stops and why?"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 59, "user_id": 10489209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CCSSJPuzWyA/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUAF-vsOgHOI3S28ZN_Lu9S4AyJ6w/mo/photo.jpg?sz=128", "display_name": "Just another student", "link": "https://stackoverflow.com/users/10489209/just-another-student"}, "edited": false, "score": 0, "creation_date": 1544032333, "post_id": 53636965, "comment_id": 94135759, "body": "@GiacomoMasciarelli -  Both loops exit when seeing a <code>NULL</code>.  Specifically, <code>fgets()</code> returns a <code>NULL</code> when there is nothing else to read, ( i.e. <code>EOF</code>), so the outer loop will continue until it sees a <code>NULL</code>.  The inner loop, similarly, also continues until it sees a <code>NULL</code>, but in this case it is looking at the return value of the <code>strtok()</code> function.  I included links to both of these functions (<code>fgets()</code> and <code>strtok()</code>) in the post above.  Be sure to take a look at both of them, in particular read about their <code>return</code> types."}, {"owner": {"reputation": 59, "user_id": 10489209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CCSSJPuzWyA/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUAF-vsOgHOI3S28ZN_Lu9S4AyJ6w/mo/photo.jpg?sz=128", "display_name": "Just another student", "link": "https://stackoverflow.com/users/10489209/just-another-student"}, "edited": false, "score": 0, "creation_date": 1544032881, "post_id": 53636965, "comment_id": 94136009, "body": "mb i didn&#39;t know that NULL automatically ends while cycles, thanks"}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "reply_to_user": {"reputation": 59, "user_id": 10489209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CCSSJPuzWyA/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUAF-vsOgHOI3S28ZN_Lu9S4AyJ6w/mo/photo.jpg?sz=128", "display_name": "Just another student", "link": "https://stackoverflow.com/users/10489209/just-another-student"}, "edited": false, "score": 0, "creation_date": 1544033471, "post_id": 53636965, "comment_id": 94136280, "body": "@GiacomoMasciarelli - You are welcome.  Yes, the <code>while(condition){...}</code> construct continues to loop as long as <code>condition</code> is <code>TRUE</code>.  As soon as <code>condition</code> becomes <code>FALSE</code>,  it exits the construct.  <code>NULL</code> by definition evaluates to <code>FALSE</code>.  BTW,  Thank you for accepting!"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1544256636, "post_id": 53636965, "comment_id": 94218725, "body": "<code>char c;</code> should be <code>int c;</code>, otherwise EOF detection may not work."}], "tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 1, "last_activity_date": 1544032703, "last_edit_date": 1544032703, "creation_date": 1544028291, "answer_id": 53636965, "question_id": 53636581, "link": "https://stackoverflow.com/questions/53636581/how-do-i-read-an-array-of-strings-from-a-file/53636965#53636965", "title": "How do i read an array of strings from a file?", "body": "<p>Addressing your title question:  <em>How do i read an array of strings from a file?</em>  </p>\n\n<p>There are many approaches to do this.  Here is a list of basic steps that could be used.    </p>\n\n<p>1) Using <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fopen.htm\" rel=\"nofollow noreferrer\">fopen()</a></em>, open file and scan to determine the following:<br>\n       - Maximum word length.<br>\n       - Count of words in file.  </p>\n\n<p>2) Create container: - Use <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_calloc.htm\" rel=\"nofollow noreferrer\">calloc()</a></em> to create an array of strings for words.  </p>\n\n<p>3) Using <code>fopen()</code> (again), <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_fgets.htm\" rel=\"nofollow noreferrer\">fgets()</a></em> and <em><a href=\"https://www.tutorialspoint.com/c_standard_library/c_function_strtok.htm\" rel=\"nofollow noreferrer\">strtok()</a></em> (or variant) to parse content of file into string array.  </p>\n\n<p><strong><em>Note</em></strong>, The sample implementation snippets below use particular functions and techniques, but you should not limit your implementation to only these.  There are many paths that would work just as well, so do not be afraid to experiment.  For example, either <code>fgets()</code> <em>or</em> <code>fscanf()</code> could be used to solve this problem.  The methods highlighted below are just examples of one way to do the task.</p>\n\n<p><strong><em>Scan example</em></strong>  </p>\n\n<pre><code>// provides count of words, and longest word\n\nint longestWord(char *file, int *nWords)\n{\n    FILE *fp=0;\n    int cnt=0, longest=0, numWords=0;\n    char c;\n    fp = fopen(file, \"r\");\n    if(fp)\n    {\n\n     // if((strlen(buf) &gt; 0) &amp;&amp; (buf[0] != '\\t') &amp;&amp; (buf[0] != '\\n') &amp;&amp; (buf[0] != '\\0')&amp;&amp; (buf[0] &gt; 0))\n\n        while ( (c = fgetc(fp) ) != EOF )\n        {\n            if ( isalnum (c) ) cnt++;\n            else if ( ( ispunct (c) ) || ( isspace(c) ) || (c == '\\0' ))\n            {\n                (cnt &gt; longest) ? (longest = cnt, cnt=0) : (cnt=0);\n                numWords++;\n            }\n        }\n        *nWords = numWords;\n        fclose(fp);\n    }\n    else return -1;\n\n    return longest;\n}\n\n//in main eg:\nint longest;\nint count;\n...\nlongest = longestWord(\".\\\\file.txt\", &amp;count);//longest and count will be \n                                             //used to create string arrays\n</code></pre>\n\n<p><strong><em>Create string array example</em></strong> </p>\n\n<pre><code>//Create string arrays to contain words using result from original scan of file\nchar ** Create2DStr(ssize_t numStrings, ssize_t maxStrLen)\n{\n    int i;\n    char **a = {0};\n    a = calloc(numStrings, sizeof(char *));\n    for(i=0;i&lt;numStrings; i++)\n    {\n      a[i] = calloc(maxStrLen + 1, 1);\n    }\n    return a;\n}\n// in main(): Create array of words\nchar **words = Create2DStr(count, longest);//Using values obtained from scan section above\nif(words) { //continue\n</code></pre>\n\n<p><strong><em>Parse into word strings example</em></strong></p>\n\n<pre><code>// in main(), after performing scan and array creation:\nconst char delim[] = {\" \\n\\t\"};\nchar line[260];\nchar *buf = NULL;\n\nfp = fopen(\".\\\\file.txt\", \"r\");\ncnt=0;\nwhile(fgets(line, 260, fp))//keep reading lines until EOF\n{\n    buf = strtok(line, delim);\n    while(buf)//continue until last word in line is parsed\n    {    \n        if((strlen(buf) &gt; 0) \n        {\n            strcpy(words[cnt], buf);\n            cnt++; //use as accurate count of words.\n        }\n        buf = strtok(NULL, DELIM);\n    }\n}\nfclose(fp);\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10489209, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CCSSJPuzWyA/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUAF-vsOgHOI3S28ZN_Lu9S4AyJ6w/mo/photo.jpg?sz=128", "display_name": "Just another student", "link": "https://stackoverflow.com/users/10489209/just-another-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 53636965, "answer_count": 1, "score": 1, "last_activity_date": 1544032703, "creation_date": 1544026990, "last_edit_date": 1544031982, "question_id": 53636581, "link": "https://stackoverflow.com/questions/53636581/how-do-i-read-an-array-of-strings-from-a-file", "title": "How do i read an array of strings from a file?", "body": "<p>I have a file with different words separated by newlines. How can i read and store each word in an array of strings?\n1 word, 1 row of the array.\nI'm posting this code, but im pretty sure it doesnt work, because i can't understand if i should use fgets or fscanf and how i can write each word in each line of my array.</p>\n\n<pre><code>int file_string_temp_number_rows=200;\nint file_string_temp_number_cols=200;\nchar **file_string_arr = (char**)malloc (file_string_temp_number_rows*sizeof(char));\n\nfor ( i = 0 ; i &lt; file_string_temp_number_rows ; i++){\n    file_string_arr[i] = (char*)malloc(file_string_temp_number_cols*sizeof(char));\n}\n\n\nif ((file_ptr= fopen(filename, \"r\"))){\n\n    if((file_ptr=fopen(filename,\"r\"))==NULL)\n    {\n       printf(\"errore apertura file\");\n       return 1;  \n    }\n    else{\n        while(!feof(file_ptr)){\n            for(i = 0 ; i &lt; file_string_temp_number_rows ; i++){\n                    for(j = 0 ; j &lt; file_string_temp_number ; j++){\n                        fgets(file_string_arr , 40 , filename);\n                        }\n                    }\n                }   \n            }\n        }\n    }\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1544027015, "post_id": 53636538, "comment_id": 94132872, "body": "Undefined behaviour is undefined. Anything could happen. For exmple, what is this <code>sprintf(buffer + strlen(buffer), &quot;%s &quot;, text);</code> supposed to do?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1544027054, "post_id": 53636538, "comment_id": 94132898, "body": "<code>text</code> is not allocated in <code>deleteWords</code>"}, {"owner": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1544028496, "post_id": 53636538, "comment_id": 94133768, "body": "@NeilButterworth It will mostly act like a strcat ? no ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 2244, "user_id": 5520680, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/C1jQH.png?s=128&g=1", "display_name": "Tom&#39;s", "link": "https://stackoverflow.com/users/5520680/toms"}, "edited": false, "score": 0, "creation_date": 1544029103, "post_id": 53636538, "comment_id": 94134110, "body": "@Tom buffer+strlen(buffer) is a pointer to the null terminator at the end of buffer, or would be, if buffer were null-terminated correctly. sprintf applied to that pointer will overwrite memory that is not part of buffer."}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 6151775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0a2857f3305ef322e5e6ab1dab989?s=128&d=identicon&r=PG&f=1", "display_name": "Titas B", "link": "https://stackoverflow.com/users/6151775/titas-b"}, "edited": false, "score": 0, "creation_date": 1544034327, "post_id": 53636783, "comment_id": 94136696, "body": "Thanks a lot. By the way, I found that the main reason why the code didn&#39;t work as I intended was that I allocated memory for <code>*text</code> in <code>memAlloc()</code> and then forgot to pass that pointer with allocated memory into <code>deleteWords</code>."}], "tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 4, "last_activity_date": 1544028057, "last_edit_date": 1544028057, "creation_date": 1544027666, "answer_id": 53636783, "question_id": 53636538, "link": "https://stackoverflow.com/questions/53636538/deleting-a-redundant-parameter-results-in-a-segmentation-fault-seemingly-for-no/53636783#53636783", "title": "Deleting a redundant parameter results in a segmentation fault, seemingly for no reason", "body": "<pre><code>char *text;\nwhile (fscanf(fp, \"%s\", text) == 1) {\n</code></pre>\n\n<p><code>scanf</code> needs the buffer to be allocated. Here it dereferences an uninitialized pointer <code>text</code> and writes to it. <code>scanf</code> tries to write to <code>text[0]</code>, <code>text[1]</code>.. and so on, so accesses text out of bounds and undefined behavior happen.</p>\n\n<pre><code>*buffer = malloc(fileLength * sizeof(char));\n...\nsprintf(buffer + strlen(buffer), \"%s \", text);\n</code></pre>\n\n<p><code>buffer</code> is uninitialized, so <code>strlen(buffer)</code> will result in some undefined value. Explicitly initialize <code>buffer[0] = '\\0'</code> if you wish to use strlen later. Also you don't include memory for terminating <code>'\\0'</code> character inside your buffer.</p>\n\n<p>As you are trying to read the file into a buffer, that is allocated using the file size</p>\n\n<pre><code>if (fread(buffer, fileLenght, 1, fp) != fileLength) { /* handle error */ }\n</code></pre>\n\n<p>If you have to, use <code>snprintf</code> instead of <code>sprintf</code> just to be safe. <code>snprinttf(buffer+strlen(buffer), fileLength - strlen(buffer), ...);</code></p>\n\n<p>Also, try to never use <code>scanf</code> without specifing field length inside <code>%s</code> modifier. You can try:</p>\n\n<pre><code>char text[256]; // or other maximum word length\nwhile (fscanf(fp, \"%255s\", text) == 1) {\n</code></pre>\n\n<p>As you already have allocated memory for the file, you can use it as a parameter to scanf, if you have to. One would need to prepare the format string for scanf as argument - it is a bit hard. See below:</p>\n\n<pre><code> for (;;) {\n      // prepare scanf %s format modifier to use with printf to write to buffer end\n      char fmt[20];\n      size_t buffer_size = fileLenght;\n      size_t free_in_buffer = buffer_size - strlen(buffer);\n      snprintf(fmt, 20, \"%%%ds\", free_in_buffer);\n      // we will write here: up to free_in_buffer\n      char *in = buffer + strlen(buffer);\n      if (fscanf(fp, fmt, in) != 1) break;\n      // we now check the last readed word form the file\n      if (!checker(in)) { \n         // if the last readed word is bad, we can revert it\n         in[0] = '\\0'\n      }\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 46, "user_id": 6151775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0a2857f3305ef322e5e6ab1dab989?s=128&d=identicon&r=PG&f=1", "display_name": "Titas B", "link": "https://stackoverflow.com/users/6151775/titas-b"}, "edited": false, "score": 0, "creation_date": 1544033133, "post_id": 53636856, "comment_id": 94136137, "body": "You&#39;re right. I meant to write:          *fp = fopen(fileName, &quot;r&quot;);         fseek(*fp, 0L, SEEK_END);         fileLength = (int) ftell(*fp);         fseek(*fp, 0L, SEEK_SET);"}], "tags": [], "owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 3, "last_activity_date": 1544027920, "creation_date": 1544027920, "answer_id": 53636856, "question_id": 53636538, "link": "https://stackoverflow.com/questions/53636538/deleting-a-redundant-parameter-results-in-a-segmentation-fault-seemingly-for-no/53636856#53636856", "title": "Deleting a redundant parameter results in a segmentation fault, seemingly for no reason", "body": "<p>This is wrong:</p>\n\n<pre><code>fileLength = fseek(*fp, 0L, SEEK_SET);\n</code></pre>\n\n<p>Per <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/fseek.html\" rel=\"nofollow noreferrer\">POSIX</a>:</p>\n\n<blockquote>\n  <p><strong>RETURN VALUE</strong></p>\n  \n  <p>The <code>fseek()</code> and <code>fseeko()</code> functions shall return 0 if they\n  succeed.</p>\n  \n  <p>Otherwise, they shall return -1 and set errno to indicate the error.</p>\n</blockquote>\n"}], "owner": {"reputation": 46, "user_id": 6151775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a0a2857f3305ef322e5e6ab1dab989?s=128&d=identicon&r=PG&f=1", "display_name": "Titas B", "link": "https://stackoverflow.com/users/6151775/titas-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544028057, "creation_date": 1544026872, "last_edit_date": 1544026937, "question_id": 53636538, "link": "https://stackoverflow.com/questions/53636538/deleting-a-redundant-parameter-results-in-a-segmentation-fault-seemingly-for-no", "title": "Deleting a redundant parameter results in a segmentation fault, seemingly for no reason", "body": "<p>The following program finds and deletes words that begin and end with the same character. It works just fine, except I decided to take the code for printing result text in from <code>deleteWords()</code> and put it inside of <code>main()</code>. Therefore, the <code>*fpOut</code> parameter in became redundant in <code>deleteWords()</code>. Deleting the parameter results in </p>\n\n<p><code>/bin/sh: line 1:  1371 Segmentation fault: 11  ./main duom.txt rez.txt make: *** [main] Error 139</code></p>\n\n<p>However if I compile it and run it any third parameter (e.g. <code>int useless</code> argument instead of <code>FILE *fpOut</code>), it works without errors.</p>\n\n<p>Has anybody have a clue what could be causing this problem?</p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;stdlib.h&gt;\n\n    int checker (char zodis[]) {\n        size_t last = strlen(zodis);\n        if (zodis[0] == zodis[last-1])\n            return 0;\n        return 1;\n    }\n\n    void memAlloc (char **text, char **buffer, FILE **fp, char *fileName) {\n        int fileLength;\n        *fp = fopen(fileName, \"r\");\n        fseek(*fp, 0L, SEEK_END);\n        fileLength = fseek(*fp, 0L, SEEK_SET);\n        *text = malloc(fileLength * sizeof(char));\n        *buffer = malloc(fileLength * sizeof(char));\n    }\n\n    void deleteWords (FILE *fp, int anyUselessParameter, char *buffer) {\n        char *text;\n        while (fscanf(fp, \"%s\", text) == 1) {\n            if (checker(text)) {\n                printf(\"%s \", text);\n                sprintf(buffer + strlen(buffer), \"%s \", text);\n            }\n        }\n\n        printf(\"\\n\");\n    }\n\n    int main(int argc, char *argv[]) {\n        FILE *fp, *fpOut;\n        int anyUselessParameter;\n        char *text, *buffer, *inputFileName = argv[1], *outputFileName = argv[2];\n\n        if (argc &lt; 2)\n            return 0;\n\n        fpOut = fopen(outputFileName, \"w\");\n\n        memAlloc(&amp;text, &amp;buffer, &amp;fp, inputFileName);\n        deleteWords(fp, anyUselessParameter, buffer);\n        fputs(buffer, fpOut);\n\n        fclose(fp);\n        fclose(fpOut);\n        free(text);\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c", "gnu-indent"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 9, "creation_date": 1544026840, "post_id": 53636488, "comment_id": 94132755, "body": "In <code>int* a, b;</code> What type does the variable <code>b</code> has in your opinion?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1544026848, "post_id": 53636488, "comment_id": 94132760, "body": "&quot;<code>*i</code> is of type <code>int</code>&quot; is correct. Also <code>int *i, j;</code> clearly shows that <code>j</code> is not a pointer whereas <code>int* i, j;</code> makes <code>j</code> look like a pointer. Anyways, consider using <code>clang-format</code>."}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 1, "creation_date": 1544027228, "post_id": 53636488, "comment_id": 94133010, "body": "i agree but what is the actual variable type being created? is it an <code>int*</code> or <code>int</code>?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 6, "creation_date": 1544027254, "post_id": 53636488, "comment_id": 94133031, "body": "Is the question here &quot;How do I use gnu indent?&quot; or &quot;Which style is better?&quot;"}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544027361, "post_id": 53636488, "comment_id": 94133101, "body": "question is about how to get the desired format. I have to put some additional lines to make stackoverflow happy"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1544027827, "post_id": 53636488, "comment_id": 94133382, "body": "Did you read the documentation to see if there&#39;s an option that controls it?"}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544027869, "post_id": 53636488, "comment_id": 94133410, "body": "yeah I checked but couldn&#39;t find. what to look for to find it?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 4, "creation_date": 1544027906, "post_id": 53636488, "comment_id": 94133425, "body": "This question is about getting <b>the result desired by the OP</b> from GNU indent. Please do not discuss whether that result is good or bad in your opinion."}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544028118, "post_id": 53636488, "comment_id": 94133559, "body": "@shawn i&#39;ve searched the words <code>astrik</code>, <code>pointer</code> and <code>dereference</code> but none or found. please suggest me a keyword."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1544029887, "post_id": 53636488, "comment_id": 94134587, "body": "@AlgirdasPreid\u017eius How often do you write code like that? Still don&#39;t understand why people keep anchoring themselves to one edge case in this debate."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1544030007, "post_id": 53636488, "comment_id": 94134646, "body": "@LightnessRacesinOrbit I, personally, never. I only was giving a reason, why some write it like so, to the (now edited out) statement &quot;<i>I don&#39;t understand why many write as <code>int *i</code></i>&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1544030022, "post_id": 53636488, "comment_id": 94134654, "body": "@AlgirdasPreid\u017eius Okay"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1544031532, "post_id": 53636488, "comment_id": 94135366, "body": "fyi in <code>C++</code> it has <i>always</i> been recommended that you declare variables individually as and when you use them. Declaring multiple variables in one go has always been considered bad practice. Bunching all declarations together at the top of a function was due to <code>C</code> being limited in that way. <code>C++</code> never had that restriction. So please don&#39;t get in the habit of doing <code>int a, b, c;</code> as some suggest here."}], "answers": [{"comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1544028343, "post_id": 53636966, "comment_id": 94133681, "body": "Should be a comment really, as it does not exactly answer the question..."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1544028375, "post_id": 53636966, "comment_id": 94133701, "body": "But this option is horrible clang-format does not make the difference between the * inside a ptr-declarator and the * of the indirection expression. I don&#39;t use clang format just for that!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1544028397, "post_id": 53636966, "comment_id": 94133715, "body": "@DevSolar well, I think it does, as OP has somewhat like an XY problem. The tool chosen by OP doesn&#39;t have this functionality, but there is a replacement tool. I believe, it is a valid answer, which doesn&#39;t really fit into comment.,"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1544028466, "post_id": 53636966, "comment_id": 94133753, "body": "@Oliv it does not??? I can&#39;t believe it! I will test myself and will delete this answer if find it to be true."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1544028512, "post_id": 53636966, "comment_id": 94133778, "body": "Valid answers to the question &quot;how do I,,,?&quot; include &quot;you cannot&quot; \u2014unless incorrect."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1544028621, "post_id": 53636966, "comment_id": 94133841, "body": "It would be surprising for GNU indent to have that option <i>for C++</i>, seeing as its C++ support is very experimental and there are plenty of cases in C++ where you need a bunch of context to even decide whether something is a declaration or not. Templates + dependent vs non-dependent names for example."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1544029252, "post_id": 53636966, "comment_id": 94134186, "body": "I&#39;ll field AStyle as an answer then as well. ;-)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1544029449, "post_id": 53636966, "comment_id": 94134310, "body": "@DevSolar and I believe, this is a valid answer to, which I upvoted :)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1544029480, "last_edit_date": 1544029480, "creation_date": 1544028294, "answer_id": 53636966, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int/53636966#53636966", "title": "with gnu indent how to make int * to int*", "body": "<p>I believe, gnu ident doesn't have this option. CLang format, on the other hand, seems to have it as <strong>PointerAlignment</strong> option, which can take following options:</p>\n\n<p>Possible values:\n<code>PAS_Left</code> (in configuration: Left) Align pointer to the left.</p>\n\n<pre><code>int* a;\n</code></pre>\n\n<p><code>PAS_Right</code> (in configuration: Right) Align pointer to the right.</p>\n\n<pre><code>int *a;\n</code></pre>\n\n<p><code>PAS_Middle</code> (in configuration: Middle) Align pointer in the middle.</p>\n\n<pre><code>int * a;\n</code></pre>\n\n<p>More details can be found here: <a href=\"https://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/docs/ClangFormatStyleOptions.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 2, "last_activity_date": 1544079539, "last_edit_date": 1544079539, "creation_date": 1544029171, "answer_id": 53637234, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int/53637234#53637234", "title": "with gnu indent how to make int * to int*", "body": "<p>I did not find any corresponding option in the <a href=\"https://www.gnu.org/software/indent/manual/indent.html\" rel=\"nofollow noreferrer\">GNU indent manual</a>. An alternative would be to use <a href=\"http://astyle.sourceforge.net/\" rel=\"nofollow noreferrer\">AStyle</a>, which offers the <a href=\"http://astyle.sourceforge.net/astyle.html#_align-pointer\" rel=\"nofollow noreferrer\"><code>--align-pointer</code></a> option:</p>\n\n<p>With <code>--align-pointer=type</code> / <code>-k1</code>:</p>\n\n<pre><code>int* a;\n</code></pre>\n\n<p>With <code>--align-pointer=middle</code> / <code>-k2</code>:</p>\n\n<pre><code>int * a;\n</code></pre>\n\n<p>With <code>--align-pointer=name</code> / <code>-k3</code>:</p>\n\n<pre><code>int *a;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1544029276, "creation_date": 1544029276, "answer_id": 53637270, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int/53637270#53637270", "title": "with gnu indent how to make int * to int*", "body": "<blockquote>\n  <p>How can I go about doing that?</p>\n  \n  <p>If not possible how to at least make kernighan&amp;ritchie style</p>\n</blockquote>\n\n<p>The documentation for GNU indent does not clearly describe any option specifically affecting the whitespace around the asterisk in a pointer declaration, but it does have an umbrella option <code>-kr</code> for requesting K&amp;R style, and I find that that does cause <code>indent</code> to perform the formatting you request, snuggling up the asterisk next to the identifier.  Of course it has many other effects, as well, though these can be overridden by additional explicit options.</p>\n\n<p>The <code>-gnu</code> general style option, which is the default, <em>also</em> has this effect.  That makes it tricky to sort out which detail option controls this specific behavior, but certainly one answer to your question is that <code>indent</code> will convert your pointer declarations to the K&amp;R style you describe with no options at all.</p>\n\n<p>In fact, as far as I can tell, <code>indent</code> will perform that particular formatting regardless of what options you provide.  There does not seem to be any option to modulate that behavior.</p>\n"}], "owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1544079539, "creation_date": 1544026705, "last_edit_date": 1544027689, "question_id": 53636488, "link": "https://stackoverflow.com/questions/53636488/with-gnu-indent-how-to-make-int-to-int", "title": "with gnu indent how to make int * to int*", "body": "<p>I want to change</p>\n\n<pre><code>int *i;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int* i;\n</code></pre>\n\n<p>using gnu indent. How can I go about doing that?</p>\n\n<p>If not possible how to at least make\nkernighan&amp;ritchie style</p>\n\n<pre><code>int * i;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int *i;\n</code></pre>\n"}, {"tags": ["c", "int", "bit"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1544026140, "post_id": 53636278, "comment_id": 94132383, "body": "Instead of combining multiple operations into a few set of statements, use lots of temporary variables to store each intermediate result. Then it&#39;s much easier to <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug your program</a> and see exactly which operation (or operation<b>s</b>) is wrong."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 1, "creation_date": 1544026524, "post_id": 53636278, "comment_id": 94132585, "body": "Note that <code>x &gt;&gt; 31</code> is implementation defined if <code>x</code> is negative (or undefined if <code>int</code> has fewer than 32 bits), therefore the code you found is not strictly conforming."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1544026746, "post_id": 53636278, "comment_id": 94132703, "body": "What is <code>+(~1+1)</code> supposed to avaluate to? If you want to get <code>-1</code>, you could simply use <code>+(~0)</code> or maybe <code>+(-1)</code>."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1544026778, "post_id": 53636278, "comment_id": 94132723, "body": "Counter question: Can you tell us why you wrote your code the way you did?"}, {"owner": {"reputation": 1, "user_id": 9100419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d68423e8a5f44e171d8b7f7fd34ab09?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Hunter", "link": "https://stackoverflow.com/users/9100419/vincent-hunter"}, "edited": false, "score": 0, "creation_date": 1544026922, "post_id": 53636278, "comment_id": 94132799, "body": "Because this question is restricted to only use + not -, my thought was    Variable a checks if x is power of 2, x and x - 1 won&#39;t have a 1    in the same place if it&#39;s power of 2. Variable b checks if x is    negative or zero. Use &amp; to combine !a and b to complete the function."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1544424693, "post_id": 53636278, "comment_id": 94256275, "body": "Sorry, I don&#39;t see the list of allowed operators to use.  What about <code>int result = x &lt;= 0;</code> ???  I assume that I cannot use <code>&lt;=</code>, but I don&#39;t see the list of valid operators there."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9100419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d68423e8a5f44e171d8b7f7fd34ab09?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Hunter", "link": "https://stackoverflow.com/users/9100419/vincent-hunter"}, "edited": false, "score": 0, "creation_date": 1544653612, "post_id": 53701758, "comment_id": 94357448, "body": "Dear Mr.Colorado, firstly I want to thank you sincerely, for your remarkable patience and time. I am a Chinese student, to be honest, in China almost nobody will spend much time to give a detailed explanation for a question which might not be properly posted. Thank you again for you help, I will try to ask question with suitable and detailed technical explanation next time."}, {"owner": {"reputation": 1, "user_id": 9100419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d68423e8a5f44e171d8b7f7fd34ab09?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Hunter", "link": "https://stackoverflow.com/users/9100419/vincent-hunter"}, "edited": false, "score": 0, "creation_date": 1544654031, "post_id": 53701758, "comment_id": 94357620, "body": "As you can see, to check whether a positive number is a power of 2, take an ex ample,   1000000,  you minis one it will be 01111111, so x&amp;(x-1) will be 0 if the int is a power of 2."}, {"owner": {"reputation": 1, "user_id": 9100419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d68423e8a5f44e171d8b7f7fd34ab09?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Hunter", "link": "https://stackoverflow.com/users/9100419/vincent-hunter"}, "edited": false, "score": 0, "creation_date": 1544654218, "post_id": 53701758, "comment_id": 94357694, "body": "What I learned from your answer is how to check &lt;=0  with bit manipulation properly, just using the sign bit, I am new to C, so sorry for my little ignorance."}, {"owner": {"reputation": 1, "user_id": 9100419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d68423e8a5f44e171d8b7f7fd34ab09?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Hunter", "link": "https://stackoverflow.com/users/9100419/vincent-hunter"}, "edited": false, "score": 0, "creation_date": 1544654490, "post_id": 53701758, "comment_id": 94357800, "body": "My pretend for int b is,  for zero and negative number,  after minus one, the sign bit will be 1, for positive number, their sign  bit will remain 0.  So after you right shift 31bits,  for negative number and zero it will be 0x11111111111(-1),  positve going to be 0x000000000(0),  adding one then you just get the right booelan .  But it seems it doesn&#39;t properly work in my code, so that&#39;s what I am confusing. But I think it is not so significant, any way :)"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 1, "user_id": 9100419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d68423e8a5f44e171d8b7f7fd34ab09?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Hunter", "link": "https://stackoverflow.com/users/9100419/vincent-hunter"}, "edited": false, "score": 0, "creation_date": 1544693915, "post_id": 53701758, "comment_id": 94369727, "body": "I&#39;ve tested the code... Have you tested it?  What&#39;s exactly the point where it doesn&#39;t work?  The sign check is done before doing anything with the number."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1544432058, "last_edit_date": 1544432058, "creation_date": 1544429663, "answer_id": 53701758, "question_id": 53636278, "link": "https://stackoverflow.com/questions/53636278/problems-about-check-a-integer-is-zero-or-negative-with-only-operator-in-c/53701758#53701758", "title": "Problems about check a integer is zero or negative with only operator in C?", "body": "<p>Several things to note (in your code):</p>\n\n<ul>\n<li>first, <code>(~1 + 1)</code> is the same as <code>~0</code>, and the same as <code>-1</code> (in two's complement).  Simpler, right?</li>\n<li><code>x + (~0)</code>  is the same as <code>x - 1</code>.  Simpler, right?</li>\n<li><code>x &amp; (x - 1)</code> is <code>1</code> all the bits that <strong>don't</strong> change <strong>and are 1</strong>, when <code>x</code> is decremented.  I think what you pretend here is to write <code>x ^ (x - 1)</code> that is, the set of bits that carry to the next on a decrement.  This is the bits that change in a decrement.  It happens that all bits change iff the number is a power of two.   In case you want the bits that don't change, instead of using <code>^</code>, just use <code>&amp;</code> (bits that <em>are <code>1</code> and don't change on a decrement</em> which must be the empty set in case of a power of two ---we have to complement the result, as this boolean gives the opposite)  This expression could be the result to get a power of two, if you consider the special case of <code>0</code> that is returned as a power of two.  As with negatives, and 0, the logarithm does not exist, so we can simply say <code>if (x &lt;= 0) return 0; else return !(x &amp; (x - 1));</code>  (THIS CAN BE THE REQUESTED SOLUTION) or more compact <code>return x &lt;= 0 ? 0 : !(x&amp;(x-1));</code>.</li>\n<li><code>~a</code> as a consequence is _all the bits that <strong>do change OR are 0</strong> when <code>x</code> is decremented.  I'm lost completely here on what you pretend. I think you want to get if <code>x &lt;= 0</code> but that's so easy to write in C, instead of the complications you show.</li>\n</ul>\n\n<p>So, your intentions (I guess) is to use the number of 1 bits that don't change on a decrement, because <em>all bits do change for powers of two.</em>  Then, a possible implementation should be:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/*\n * isPower2 - returns 1 if x is a power of 2, and 0 otherwise\n *   Examples: isPower2(5) = 0, isPower2(8) = 1, isPower2(0) = 0\n *   Note that no negative number is a power of 2.  (and zero also, there's no logarithm of zero)\n *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;\n *   Max ops: 20\n *   Rating: 4\n */\nint isPower2(int x) {\n    return x &lt;= 0\n        ? 0\n        : !(x&amp;(x-1));\n}\n\n/* please, always post complete and verifiable code, with header files,\n * and the like, so we can test it without having to first modify it.\n */\nint main()\n{\n    for (;;) {\n        int a;\n        scanf(\"%d\", &amp;a);\n        printf(\"isPower2(a=%d) =&gt; %d\\n\", a, isPower2(a));\n    }\n}\n</code></pre>\n\n<h1>NOTE</h1>\n\n<p>Anyway, I don't have a clear idea of the result you want to get, as you entitle the question as <em>Problems about check a integer is zero or negative...</em> and then you show partial code (see <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>) about <em>how to detect if some given integer is a power of two</em> but then, you show then some strange code to check if a number is negative.  It suffices to do:</p>\n\n<pre><code>if (x &lt;= 0) do_bla_bla();\n</code></pre>\n\n<p>and this doesn't produce undefined behaviour with 31 bit right shifts.</p>\n\n<h1>NOTE</h1>\n\n<p>if you need to use only the operators in the list, just change <code>&lt;=</code> by the following:</p>\n\n<pre><code>#define SIGNBIT (~(~0&gt;&gt;1))   /* ALL ONES, SHIFTED ONE BIT RIGHT AND COMPLEMENTED */\n\nreturn \n    x &amp; SIGNBIT      /* sign bit on, negative number */\n || !x               /* OR x == 0 */\n    ? 0\n    : !(x&amp;(x-1));\n</code></pre>\n\n<p>The final code is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n/*\n * isPower2 - returns 1 if x is a power of 2, and 0 otherwise\n *   Examples: isPower2(5) = 0, isPower2(8) = 1, isPower2(0) = 0\n *   Note that no negative number is a power of 2.  (and zero also, there's no logarithm of zero)\n *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;\n *   Max ops: 20\n *   Rating: 4\n */\n#define SIGNBIT (~(~0&gt;&gt;1))\nint isPower2(int x) {\n    return x &amp; SIGNBIT || !x ? 0 : !(x&amp;(x-1));\n    /* if anybody tells you are using ? and || operators, just write:\n     * if (x &amp; SIGNBIT) return 0;\n     * if (!x) return 0;\n     * return !(x&amp;(x-1));\n     */\n}\n\n/* please, always post complete and verifiable code, with header files,\n * and the like, so we can test it without having to first modify it.\n */\nint main()\n{\n    for (;;) {\n        int a;\n        scanf(\"%d\", &amp;a);\n        printf(\"isPower2(a=%d) =&gt; %d\\n\", a, isPower2(a));\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9100419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d68423e8a5f44e171d8b7f7fd34ab09?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Hunter", "link": "https://stackoverflow.com/users/9100419/vincent-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544432058, "creation_date": 1544025908, "last_edit_date": 1544026784, "question_id": 53636278, "link": "https://stackoverflow.com/questions/53636278/problems-about-check-a-integer-is-zero-or-negative-with-only-operator-in-c", "title": "Problems about check a integer is zero or negative with only operator in C?", "body": "<pre><code>     /*\n     * isPower2 - returns 1 if x is a power of 2, and 0 otherwise\n     *   Examples: isPower2(5) = 0, isPower2(8) = 1, isPower2(0) = 0\n     *   Note that no negative number is a power of 2.\n     *   Legal ops: ! ~ &amp; ^ | + &lt;&lt; &gt;&gt;\n     *   Max ops: 20\n     *   Rating: 4\n     */\n    int isPower2(int x) {\n      /*\n   * Variable a checks if x is power of 2, x and x - 1 won't have a 1\n   * in the same place if it's power of 2. Variable b checks if x is\n   * negative or zero. Use &amp; to combine !a and b to complete the function.\n   */\n        int a = x &amp;(x+(~1+1));\n        int b = ((x+(~1+1))&gt;&gt; 31)+1;\n        return (!a)&amp;b;\n\n    }\n</code></pre>\n\n<p>Hello every one, I am self-learning a course called CSE351 form Washton University and am finishing the lab1 about data manipulation in C. As you \ncan see about this question, I need to use the variable b to tell whether or not\nthe int x is zero. </p>\n\n<p>And then I think that for zero or negative, if you minus one and then right shift 31 bits, adding one, you will get zero if the int is 0, and 1 if it is positive. </p>\n\n<p>But however, my code didn't work,  but I found a line of code works.</p>\n\n<pre><code>  int b = ((!(x &gt;&gt; 31)) &amp; (~(!x)));\n</code></pre>\n\n<p>I am really confused why my code don't work, can somebody tell me why?</p>\n\n<p>Edit: Sorry, I didn't mention the environment of  this lab is based on int with 32 bits and 2's complement for negative.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1544025054, "post_id": 53636013, "comment_id": 94131704, "body": "You do know that <code>scanf</code> returns a value - that you should check! (i.e. <code>if (scanf(....</code>"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 3, "creation_date": 1544025110, "post_id": 53636013, "comment_id": 94131749, "body": "You&#39;re adding to array elements that you haven&#39;t previously initialized to zero, e.g. <code>gradeArr[4][4]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 2, "last_activity_date": 1544025104, "creation_date": 1544025104, "answer_id": 53636052, "question_id": 53636013, "link": "https://stackoverflow.com/questions/53636013/why-am-i-getting-random-numbers-in-my-result/53636052#53636052", "title": "Why am I getting random numbers in my result?", "body": "<p>You need to initialize the array.</p>\n\n<p>Try</p>\n\n<pre><code>int gradeArr[5][5] = {0};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10580385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9328da45a321b93aa00dcdcc93667c42?s=128&d=identicon&r=PG&f=1", "display_name": "YY Kim", "link": "https://stackoverflow.com/users/10580385/yy-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53636052, "answer_count": 1, "score": -1, "last_activity_date": 1544025167, "creation_date": 1544024987, "last_edit_date": 1544025167, "question_id": 53636013, "link": "https://stackoverflow.com/questions/53636013/why-am-i-getting-random-numbers-in-my-result", "title": "Why am I getting random numbers in my result?", "body": "<p>I am trying to 4x4 input in an 5x5 array and get the sum of each lines on the fifth lines.\nI'm sure if you read my code below, you'll know what I am trying to talk about.\nFor example if I type in:</p>\n\n<pre><code>1 2 3 4\n5 6 7 8\n9 10 11 12\n13 14 15 16\n</code></pre>\n\n<p>The expected Result should be:</p>\n\n<pre><code>1 2 3 4 10\n5 6 7 8 26\n9 10 11 12 42\n13 14 15 16 58\n28 32 36 40 136\n</code></pre>\n\n<p>Instead, I am getting a result like:</p>\n\n<pre><code>1 2 3 4 10\n5 6 7 8 32792\n9 10 11 12 42\n13 14 15 16 58\n28 32 36 40 -501277720\n</code></pre>\n\n<p>I thought about why I get these random values, but couldn't find a solution. Why am I getting these values and what can I do to solve it?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nint main ()\n{\n    int gradeArr[5][5];\n    int i,j;\n    printf(\"Input grades:\\n\");\n    for(i=0;i&lt;4;i++)\n    {\n        for(j=0;j&lt;4;j++)\n        {\n            scanf(\"%d\",&amp;gradeArr[i][j]);\n            gradeArr[i][4] += gradeArr[i][j];\n        }\n    }\n    printf(\"%d\\n\", gradeArr[1][4]);\n    for(i=0;i&lt;4;i++)\n    {\n        for(j=0;j&lt;4;j++)\n        {\n            gradeArr[4][i] += gradeArr[j][i];\n        }\n        gradeArr[4][4] += gradeArr[4][i];\n    }\n    printf(\"Result: \\n\");\n    for(i=0;i&lt;5;i++)\n    {\n        for(j=0;j&lt;5;j++)\n        {\n            printf(\"%d \",gradeArr[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "windows", "network-programming", "smb"], "answers": [{"tags": [], "owner": {"reputation": 2647, "user_id": 147673, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fc0e56c4e869653308f42a9378097b96?s=128&d=identicon&r=PG", "display_name": "Houtman", "link": "https://stackoverflow.com/users/147673/houtman"}, "is_accepted": true, "score": 0, "last_activity_date": 1544711751, "creation_date": 1544711751, "answer_id": 53764221, "question_id": 53635984, "link": "https://stackoverflow.com/questions/53635984/c-call-to-netshareenum-fails-with-5-access-denied-on-win-10-while-same-user-ca/53764221#53764221", "title": "C call to NetShareEnum fails with 5 &#39;Access Denied&#39; on Win 10 while same user can browse the SMB shares", "body": "<p>I found it ! :) It was because someone pressed [cancel] on the next popup\n<a href=\"https://i.stack.imgur.com/0YZ4e.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0YZ4e.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 2647, "user_id": 147673, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fc0e56c4e869653308f42a9378097b96?s=128&d=identicon&r=PG", "display_name": "Houtman", "link": "https://stackoverflow.com/users/147673/houtman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "accepted_answer_id": 53764221, "answer_count": 1, "score": 1, "last_activity_date": 1544711751, "creation_date": 1544024894, "question_id": 53635984, "link": "https://stackoverflow.com/questions/53635984/c-call-to-netshareenum-fails-with-5-access-denied-on-win-10-while-same-user-ca", "title": "C call to NetShareEnum fails with 5 &#39;Access Denied&#39; on Win 10 while same user can browse the SMB shares", "body": "<p>We're running Win10 LTS-B.\nUsing SMB shares and no domain.</p>\n\n<p>The user is able to access the remote share using file explorer.\nBut the signed executable which runs as the same user\nfails with code 5 'access denied' when calling the function \"netShareEnum\".</p>\n\n<p>The code is a direct copy from the msdn example.\n<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/lmshare/nf-lmshare-netshareenum\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/lmshare/nf-lmshare-netshareenum</a></p>\n\n<p>When starting the executable,\nThe remote systen with the SMB share shows in the Eventlog \"security\" a successful login, and approx 10 seconds later a logoff entry.(seems triggered by my call)\nSo something else is wrong.</p>\n\n<p>I dont know where to look next..\nI also enabled dcom/ole access- and failure-logging on the remote system in the hope of finding something, but nothing.</p>\n"}, {"tags": ["c", "fwrite"], "comments": [{"owner": {"reputation": 61304, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1544024641, "post_id": 53635870, "comment_id": 94131453, "body": "Please pick one language. What else did you expect to appear in the file?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1544024666, "post_id": 53635870, "comment_id": 94131473, "body": "It is because you are writing binary data to a text file. You need to examine a memory dump instead."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1544024675, "post_id": 53635870, "comment_id": 94131478, "body": "What do you expect to see? Your text editor is trying to interpret the bytes of the numbers as characters."}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1544024692, "post_id": 53635870, "comment_id": 94131486, "body": "See <a href=\"https://www.webopedia.com/TERM/B/binary_file.html\" rel=\"nofollow noreferrer\">binary files</a>... You are supposed to <b>have those <i>undefined symbols</i>... and those are actually bytes which you have opened using a text editor... use a <a href=\"https://en.wikipedia.org/wiki/Hex_editor\" rel=\"nofollow noreferrer\">hex editor</a> instead...</b>"}, {"owner": {"reputation": 1162, "user_id": 7834288, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/SlidV.jpg?s=128&g=1", "display_name": "Andrii H.", "link": "https://stackoverflow.com/users/7834288/andrii-h"}, "edited": false, "score": 0, "creation_date": 1544024755, "post_id": 53635870, "comment_id": 94131520, "body": "Oh, so that is correct? Cause I am not familiar with binary files. If that is fine - let me know."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1544024758, "post_id": 53635870, "comment_id": 94131525, "body": "It does the same thing for any <code>int</code> and any <code>float</code>.  Being inside a <code>struct</code> isn&#39;t affecting the behavior at all."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1544024758, "post_id": 53635870, "comment_id": 94131526, "body": "@WeatherVane: no, it&#39;s the other way around. It is because [you] are opening a binary file as if it&#39;s a text file."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544024853, "post_id": 53635870, "comment_id": 94131582, "body": "@usr2564301 yes, I saw &quot;I want to write a struct to the txt file&quot; and didn&#39;t notice the <code>&quot;wb&quot;</code>."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1544024898, "post_id": 53635870, "comment_id": 94131605, "body": "If you want to read/write a text file then you need to print and scan your values as text. If you want a binary file, you can read/write the raw data without needing to do any special handling\u2014but you won&#39;t be able to easily look at it using a text editor."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1544024969, "post_id": 53635870, "comment_id": 94131653, "body": "Why not fread the file back into a second struct  Product and print or compare that?"}], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 938740, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWhew.png?s=128&g=1", "display_name": "torstenvl", "link": "https://stackoverflow.com/users/938740/torstenvl"}, "is_accepted": true, "score": 3, "last_activity_date": 1544025278, "creation_date": 1544025278, "answer_id": 53636099, "question_id": 53635870, "link": "https://stackoverflow.com/questions/53635870/why-does-fwrite-with-struct-writes-unknown-symbols/53636099#53636099", "title": "Why does fwrite (with struct) writes unknown symbols?", "body": "<p>You can't write binary data and expect it to be text. The behavior you're seeing is normal, expected, and correct. </p>\n\n<p>As an example, think of the number <code>30000</code>.  This will easily fit inside a two-byte <code>short int</code>. However, in text format you have at least five bytes. If you <code>fwrite()</code> two bytes to external storage, it will be two bytes containing the numerical value of those bytes, not a text representation of each digit. </p>\n\n<p>In the example of <code>30000</code> the binary representation is <code>01110101 00110000</code>. This is reversed in Intel machines because they are <a href=\"https://en.m.wikipedia.org/wiki/Endianness#Little-endian\" rel=\"nofollow noreferrer\">little-endian</a>. That means those two bytes in your file are probably decimal 48 and 118. If you view those as characters on a PC that used ASCII natively, they should show up as <code>0</code> and <code>v</code>, respectively. </p>\n"}], "owner": {"reputation": 1162, "user_id": 7834288, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/SlidV.jpg?s=128&g=1", "display_name": "Andrii H.", "link": "https://stackoverflow.com/users/7834288/andrii-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 53636099, "answer_count": 1, "score": 2, "last_activity_date": 1544025278, "creation_date": 1544024581, "last_edit_date": 1544024724, "question_id": 53635870, "link": "https://stackoverflow.com/questions/53635870/why-does-fwrite-with-struct-writes-unknown-symbols", "title": "Why does fwrite (with struct) writes unknown symbols?", "body": "<p>I want to write a struct to the txt file with fwrite function. When I run my program I see a lot of undefined symbols in the txt file. Why does it happen and how can I fix it?\nMy code:</p>\n\n<pre><code>FILE *file = NULL;\n\nfile = fopen(TASK1_2_FILENAME, \"wb\");\n\nif (!file) {\n    printf(\"FATAL: File does not exist, exiting.\");\n    exit(EXIT_FAILURE);\n}\n\nProducts product;\nstrcpy(product.date, \"00:00:0000\");\nproduct.code = 12345;\nproduct.quantity = 10;\nproduct.price = 10.5;\n\nfwrite(&amp;product, sizeof(Products), 1, file);\n\nfclose(file);\n</code></pre>\n\n<p>And the structure in headers file:</p>\n\n<pre><code>typedef struct Product {\n    char date[11];\n    int code;\n    int quantity;\n    float price;\n} Products;\n</code></pre>\n\n<p>The result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CwizB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CwizB.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c", "gnu-indent"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 5, "creation_date": 1544023049, "post_id": 53635322, "comment_id": 94130468, "body": "Why would you want that?!"}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1544023948, "post_id": 53635322, "comment_id": 94131031, "body": "just to minimize the patch and also I like. English got the space between word and braces."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1544023960, "post_id": 53635322, "comment_id": 94131040, "body": "<i>Why</i> is actually important here.  There&#39;s nothing inherently wrong with such code formatting, but be aware that code comprehension by persons not familiar with your code depends on the viewer&#39;s brain deciphering patterns - human brains don&#39;t see details well, they see patterns, and they see and understand familiar patterns better.  Using a rare formatting style will make your code a bit less easy to understand for others, and will also make it a bit harder for you to understand formats you don&#39;t use often as you&#39;re not as familiar with the pattern."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1544025277, "post_id": 53635322, "comment_id": 94131870, "body": "Well, the language is called &quot;C&quot;, not &quot;English&quot;. ;) Applying rules of a natural language to some artificial language just feels so ... wrong."}, {"owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "edited": false, "score": 2, "creation_date": 1544025817, "post_id": 53635322, "comment_id": 94132195, "body": "Only one question per post, please.  It is considered especially rude around these parts to add questions or make other major revisions to a post that has already been answered; make a whole new post for follow-up questions. Also, please read the <code>indent</code> documentation carefully and only ask further questions about specific formatting knobs if you really can&#39;t find them in there.  We&#39;ve already done you one favor looking up <code>-pcs</code>."}, {"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544026021, "post_id": 53635322, "comment_id": 94132313, "body": "gnu documentation is a crap. I think they twist for business"}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": false, "score": 1, "last_activity_date": 1544023286, "creation_date": 1544023286, "answer_id": 53635471, "question_id": 53635322, "link": "https://stackoverflow.com/questions/53635322/how-do-i-set-space-between-function-name-and-parenthesis-with-gnu-indent/53635471#53635471", "title": "how do I set space between function name and parenthesis with gnu indent?", "body": "<p>I believe the option you want is <code>-pcs</code> or, in long form, <code>--space-after-procedure-calls</code>.  The most convenient place to find this information is the <a href=\"https://www.gnu.org/software/indent/manual/html_node/indent_17.html#SEC17\" rel=\"nofollow noreferrer\">long list of options to GNU indent</a> from its official manual.</p>\n"}, {"comments": [{"owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "edited": false, "score": 0, "creation_date": 1544025634, "post_id": 53635475, "comment_id": 94132086, "body": "how to make <code>int *i</code> to <code>int* i</code>? I have updated my question."}], "tags": [], "owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "is_accepted": false, "score": 1, "last_activity_date": 1544023294, "creation_date": 1544023294, "answer_id": 53635475, "question_id": 53635322, "link": "https://stackoverflow.com/questions/53635322/how-do-i-set-space-between-function-name-and-parenthesis-with-gnu-indent/53635475#53635475", "title": "how do I set space between function name and parenthesis with gnu indent?", "body": "<p><code>-pcs</code> is the switch that adds space after the name of a function. Thus <code>-kr -pcs</code> will do what you want.</p>\n"}], "owner": {"reputation": 2031, "user_id": 1114498, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/28c184063aa5fb8ab1303de158fa9bc8?s=128&d=identicon&r=PG", "display_name": "Necktwi", "link": "https://stackoverflow.com/users/1114498/necktwi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544026261, "creation_date": 1544022722, "last_edit_date": 1544026261, "question_id": 53635322, "link": "https://stackoverflow.com/questions/53635322/how-do-i-set-space-between-function-name-and-parenthesis-with-gnu-indent", "title": "how do I set space between function name and parenthesis with gnu indent?", "body": "<p>With gnu-<code>indent</code> how to change</p>\n\n<pre><code>int i = fact(n);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>int i = fact (n);\n</code></pre>\n\n<p><code>-gnu</code> formats it so but I use <code>-kr</code>.</p>\n"}, {"tags": ["c", "shell", "ffmpeg"], "comments": [{"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1544023159, "post_id": 53635310, "comment_id": 94130540, "body": "<i>&quot;will there be a noticeable performance difference between the 2 approaches?&quot;</i> I don&#39;t think that we can answer that, since we don&#39;t know how you are using it. We also don&#39;t what you consider <i>noticeable</i> enough."}, {"owner": {"reputation": 13762, "user_id": 694733, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0a3de8cd40d9ffb86cc1fed0c8cf2e19?s=128&d=identicon&r=PG", "display_name": "user694733", "link": "https://stackoverflow.com/users/694733/user694733"}, "edited": false, "score": 0, "creation_date": 1544023353, "post_id": 53635310, "comment_id": 94130655, "body": "I suggest that you start with simplest approach that meets your requirements, and then increase complexity if necessary."}, {"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1544023499, "post_id": 53635310, "comment_id": 94130748, "body": "<i>Obviously the first will be simpler to implement, but will I pay a big performance cost?</i>  Why is any potential performance improvement important? That&#39;s the important question. If what you have now is fast enough, don&#39;t bother.  If this is job-related, you can always just buy faster hardware and not spend days or weeks improving software performance when you can just throw faster hardware at the problem.  If you just want to spend some of your own time to find out if you can make it faster, go ahead and try - you&#39;ll learn.  FWIW, if you do try, don&#39;t ignore the IO."}, {"owner": {"reputation": 553, "user_id": 5455661, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ae2b0f296e84a77140e79ce57ed6e3b4?s=128&d=identicon&r=PG&f=1", "display_name": "toastedDeli", "link": "https://stackoverflow.com/users/5455661/toasteddeli"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1544061621, "post_id": 53635310, "comment_id": 94146142, "body": "@AndrewHenle I&#39;m going to attempt to use ffmpeg to generate small video files ready to be live streamed over HTTP with HLS. I&#39;m making a live video streaming service for my university final year project. I just want to do the best I&#39;m capable of but also don&#39;t want to spend too much time on something if it&#39;s not going to really benefit me. Thanks for the advice."}], "answers": [{"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 1, "last_activity_date": 1544029979, "creation_date": 1544029979, "answer_id": 53637467, "question_id": 53635310, "link": "https://stackoverflow.com/questions/53635310/using-ffmpeg-in-c-system-or-c-api/53637467#53637467", "title": "using ffmpeg in C: system() or C api?", "body": "<p>It's quite typical these days to use the executable (<strong>system()</strong>) version even on mobile phones. If time-to-start is not critical for you, don't bother. If it is, consider making ffmpeg executable available for immediate start, e.g. with <a href=\"https://en.wikipedia.org/wiki/Prelink\" rel=\"nofollow noreferrer\">prelink</a>.</p>\n"}], "owner": {"reputation": 553, "user_id": 5455661, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ae2b0f296e84a77140e79ce57ed6e3b4?s=128&d=identicon&r=PG&f=1", "display_name": "toastedDeli", "link": "https://stackoverflow.com/users/5455661/toasteddeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 53637467, "answer_count": 1, "score": 0, "last_activity_date": 1544029979, "creation_date": 1544022690, "question_id": 53635310, "link": "https://stackoverflow.com/questions/53635310/using-ffmpeg-in-c-system-or-c-api", "title": "using ffmpeg in C: system() or C api?", "body": "<p>I want to use ffmpeg's transcoding features multiple times in my program. This can be achieved by doing</p>\n\n<pre><code>ffmpeg -i input output\n</code></pre>\n\n<p>in a terminal. I believe I can use some shell or C code to execute these commands programmatically. </p>\n\n<p>I could also directly use ffmpeg's c libraries to do this. My question is, will there be a noticeable performance difference between the 2 approaches? Obviously the first will be simpler to implement, but will I pay a big performance cost?</p>\n"}, {"tags": ["c", "arrays", "algorithm", "sudoku"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1544022356, "post_id": 53635187, "comment_id": 94130040, "body": "To begin with, only call <code>srand</code> <i>once</i>."}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 0, "creation_date": 1544022422, "post_id": 53635187, "comment_id": 94130086, "body": "Or just refrain from using the default random, it&#39;s pretty bad."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 5, "creation_date": 1544022496, "post_id": 53635187, "comment_id": 94130127, "body": "<i>i think there is an infinite loop but I don&#39;t know where it can come from!</i> - this is where a debugger could help."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1544022543, "post_id": 53635187, "comment_id": 94130152, "body": "I&#39;m voting to close this question as off-topic because OP needs to use the debugger: <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1544022580, "post_id": 53635187, "comment_id": 94130182, "body": "After OP sucessfully used debugger and found out where the program loops, the question <b>why</b> it happens would be appropriate, but it would be a separate question."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1544024756, "post_id": 53635187, "comment_id": 94131521, "body": "@SergeyA the problem here that the issue will not be easily reproducible with a debugger. It is timing-dependent."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1544032023, "post_id": 53635187, "comment_id": 94135595, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. StackOverflow is not a coding, review, or tutorial resource.   See this lovely <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debug</a> blog for help."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1544032179, "post_id": 53635187, "comment_id": 94135667, "body": "More to the point, <i>why</i> don&#39;t you know where you have an infinite loop, or whether you have one at all?  As the guidelines show, we <i>expect</i> you to perform &quot;due diligence&quot; before you post here.  If nothing else, put in <code>print</code> statements to trace the data and logic flow.  Posting your entire program exercise without any debugging attempt is beyond the posting guidelines.  Do your part, and we&#39;ll be happy to do ours."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1544104852, "post_id": 53635187, "comment_id": 94164438, "body": "@Prune I was able to reproduce the problem directly from the code as posted. Expected and actual output are also clear (a valid sudoku puzzle and nothing, respectively). This is an MCVE if I ever saw one. Furthermore, debugging a timing-dependent problem, of which this is an example, could be rather frustrating even for seasoned developers. Is it reasonable to request that one shows their debugging effort if we know that it is very likely to be fruitless?"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1544023772, "post_id": 53635523, "comment_id": 94130898, "body": "Minor: Resolution of <code>(unsigned) time_t</code> is more often 1 sec than 17ms. ,  Still UV"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 4, "last_activity_date": 1544024836, "last_edit_date": 1544024836, "creation_date": 1544023412, "answer_id": 53635523, "question_id": 53635187, "link": "https://stackoverflow.com/questions/53635187/generate-valid-sudoku-puzzle-in-c/53635523#53635523", "title": "Generate valid sudoku puzzle in C", "body": "<p>Probably the infinite loop is caused by:</p>\n\n<pre><code>int randomGenerator(int num) {\n  srand(time(NULL));\n  return (int) ( rand() % num ) + 1;\n}\n</code></pre>\n\n<p>Because <code>srand</code> is called for the generation of every \"random\" number, the same number will be generated over and over again. Since that number will already be in use, the loop <code>while (!unUsedInBox(row, col, num));</code> will loop forever (or at least until <code>time(NULL)</code> returns a new value). So every second (about the resultion of <code>time</code>) there will be one step progress, and then another second need to pass, etcetera, seeming to take infinitely.</p>\n\n<p><sup>(See comment by Some programmer dude)</sup></p>\n"}], "owner": {"reputation": 53, "user_id": 7400254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/975219a22eb90f25209f34cf9b6a624c?s=128&d=identicon&r=PG&f=1", "display_name": "akali leona", "link": "https://stackoverflow.com/users/7400254/akali-leona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544024836, "creation_date": 1544022267, "last_edit_date": 1544022314, "question_id": 53635187, "link": "https://stackoverflow.com/questions/53635187/generate-valid-sudoku-puzzle-in-c", "title": "Generate valid sudoku puzzle in C", "body": "<p>I try to generate a valid sudoku puzzle in C, when i compile, nothing happend, i think there is an infinite loop but I don't know where it can come from! I think I need help! In my reasoning, i try to :\nRandomly take any number 1-9.\nCheck if it is safe to put in the cell.(row , column and box)\nIf safe, place it and increment to next location and go to step 1.\nIf not safe, then without incrementing go to step 1.\nOnce matrix is fully filled, remove k no. of elements randomly to complete game.\nHere my code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;limits.h&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\n\n#define N 9 // row and col \n#define SRN 3 // square and row\n#define K 20 //missing digits \n\nint mat[N][N];\n\nbool unUsedInBox(int rowStart, int colStart, int num) {\n  for (int i = 0; i &lt; SRN; i++)\n    for (int j = 0; j &lt; SRN; j++)\n      if (mat[rowStart + i][colStart + j] == num)\n        return false;\n\n  return true;\n}\n\nint randomGenerator(int num) {\n  srand(time(NULL));\n  return (int) ( rand() % num ) + 1;\n}\n\nbool unUsedInRow(int i, int num) {\n  for (int j = 0; j &lt; N; j++)\n    if (mat[i][j] == num)\n      return false;\n  return true;\n}\n\n// check in the row for existence \nbool unUsedInCol(int j, int num) {\n  for (int i = 0; i &lt; N; i++)\n    if (mat[i][j] == num)\n      return false;\n  return true;\n}\n\nbool CheckIfSafe(int i, int j, int num) {\n  return (unUsedInRow(i, num) &amp;&amp;\n    unUsedInCol(j, num) &amp;&amp;\n    unUsedInBox(i - i % SRN, j - j % SRN, num));\n}\n\nvoid fillBox(int row, int col) {\n  int num;\n  for (int i = 0; i &lt; SRN; i++) {\n    for (int j = 0; j &lt; SRN; j++) {\n      do {\n        num = randomGenerator(N);\n      }\n      while (!unUsedInBox(row, col, num));\n\n      mat[row + i][col + j] = num;\n    }\n  }\n}\n\nvoid fillDiagonal() {\n  for (int i = 0; i &lt; N; i = i + SRN)\n    fillBox(i, i);\n}\n\nbool fillRemaining(int i, int j) {\n  if (j &gt;= N &amp;&amp; i &lt; N - 1) {\n    i = i + 1;\n    j = 0;\n  }\n  if (i &gt;= N &amp;&amp; j &gt;= N)\n    return true;\n\n  if (i &lt; SRN) {\n    if (j &lt; SRN)\n      j = SRN;\n  } else if (i &lt; N - SRN) {\n    if (j == (int)(i / SRN) * SRN)\n      j = j + SRN;\n  } else {\n    if (j == N - SRN) {\n      i = i + 1;\n      j = 0;\n      if (i &gt;= N)\n        return true;\n    }\n  }\n\n  for (int num = 1; num &lt;= N; num++) {\n    if (CheckIfSafe(i, j, num)) {\n      mat[i][j] = num;\n      if (fillRemaining(i, j + 1))\n        return true;\n\n      mat[i][j] = 0;\n    }\n  }\n  return false;\n}\n\nvoid removeKDigits() {\n  int count = K;\n  while (count != 0) {\n    int cellId = randomGenerator(N * N);\n\n    int i = (cellId / N);\n    int j = cellId % 9;\n    if (j != 0)\n      j = j - 1;\n\n    if (mat[i][j] != 0) {\n      count--;\n      mat[i][j] = 0;\n    }\n  }\n}\n\nvoid fillValues() {\n  // Fill the diagonal of SRN x SRN matrices \n  fillDiagonal();\n\n  // Fill remaining blocks \n  fillRemaining(0, SRN);\n\n  // Remove Randomly K digits to make game \n  removeKDigits();\n}\n\nvoid printSudoku() {\n  for (int i = 0; i &lt; N; i++) {\n    for (int j = 0; j &lt; N; j++){\n        printf(\"%d\",mat[i][j]);\n        printf(\" \");\n    }\n      printf(\"\\n\");\n  }\n  printf(\"\\n\");\n}\n\nint main() {\n  fillValues();\n  printSudoku();\n}\n</code></pre>\n"}, {"tags": ["c", "arrays", "string", "loops"], "comments": [{"owner": {"reputation": 6020, "user_id": 7199668, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e47d89b0ada41bf07a3d80b0002f0386?s=128&d=identicon&r=PG&f=1", "display_name": "mast3rd3mon", "link": "https://stackoverflow.com/users/7199668/mast3rd3mon"}, "edited": false, "score": 0, "creation_date": 1544021714, "post_id": 53635000, "comment_id": 94129609, "body": "you could strip the spaces out first?"}, {"owner": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "reply_to_user": {"reputation": 6020, "user_id": 7199668, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e47d89b0ada41bf07a3d80b0002f0386?s=128&d=identicon&r=PG&f=1", "display_name": "mast3rd3mon", "link": "https://stackoverflow.com/users/7199668/mast3rd3mon"}, "edited": false, "score": 0, "creation_date": 1544021746, "post_id": 53635000, "comment_id": 94129632, "body": "but I still want to print them"}, {"owner": {"reputation": 6020, "user_id": 7199668, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e47d89b0ada41bf07a3d80b0002f0386?s=128&d=identicon&r=PG&f=1", "display_name": "mast3rd3mon", "link": "https://stackoverflow.com/users/7199668/mast3rd3mon"}, "edited": false, "score": 1, "creation_date": 1544021785, "post_id": 53635000, "comment_id": 94129662, "body": "you could count the spaces then subtract that from the length?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1544021797, "post_id": 53635000, "comment_id": 94129675, "body": "Then you need a separate loop to count the number of spaces, and subtract it in the calculation of <code>key</code>."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544021897, "post_id": 53635000, "comment_id": 94129733, "body": "By the way, <code>array[i] + key</code> could lead to arithmetic overflow. And depending on if the type <code>char</code> is signed or unsigned (which is implementation defined) that could lead to <i>undefined behavior</i>. It could also lead to the value of <code>array[i]</code> to become unprintable."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1544022500, "post_id": 53635000, "comment_id": 94130131, "body": "Minor: Code should avoid <code>key = key % length;</code> when <code>length==0</code>."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544022728, "post_id": 53635000, "comment_id": 94130284, "body": "@Someprogrammerdude How does <code>array[i] + key</code> lead to arithmetic overflow. and UB?  Worse case sums are in the range of [-a_few_100 ... +a_few_100].  Or are you concerned about <code>CHAR_BIT &gt; 8</code>?"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1544025100, "post_id": 53635000, "comment_id": 94131736, "body": "@chux You&#39;re right, there won&#39;t be any arithmetic overflow since <code>array[i]</code> will undergo usual arithmetic conversion and be promoted to an <code>int</code>. However, the result might be larger than <code>127</code> which will be truncated when assigned back to <code>array[i]</code> if <code>char</code> is signed (IIRC)."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1544026215, "post_id": 53635000, "comment_id": 94132424, "body": "Fun fact: <code>if (array[i] == &#39; &#39;)printf(&quot;%c&quot;, array[i]);</code> can be optimized."}], "answers": [{"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1544026291, "post_id": 53635548, "comment_id": 94132453, "body": "If you&#39;re going to iterate through every character in a string checking to see if each one is a space, why would you also call <code>strlen</code>?"}, {"owner": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544028567, "post_id": 53635548, "comment_id": 94133807, "body": "thanks I have tried it and it works however if I increase the array size to 100 and the input has 26 characters it counts the space as a character. so length is 27. I have been trying to fix it but can&#39;t find the solution"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1544028743, "post_id": 53635548, "comment_id": 94133905, "body": "@TimRandall The length including spaces are still need for the loop that prints the result. The code be probably be rewritten for better performance but I prefer to keep it as close to OPs orginal code as possible."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544028802, "post_id": 53635548, "comment_id": 94133934, "body": "@momonosuke What is the exact input in the case where you observe that?"}, {"owner": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544029068, "post_id": 53635548, "comment_id": 94134086, "body": "notverysecure thiscaeserwas. when i type this i get unprintable chracters"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544029452, "post_id": 53635548, "comment_id": 94134314, "body": "@momonosuke Well... yes, you get unprintable characters - that true - but there is nothing wrong with the length calculation or the calculation of spaces. See <a href=\"https://ideone.com/8XaaSG\" rel=\"nofollow noreferrer\">ideone.com/8XaaSG</a>"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544029565, "post_id": 53635548, "comment_id": 94134386, "body": "@momonosuke The reason you get unprintable characters is that the key will be 22 and when you add 22 to &#39;w&#39; (which is 119) you be above the normal range of printable characters (which up to 127). See <a href=\"https://www.google.com/search?q=ascii+table&amp;tbm=isch&amp;tbo=u&amp;source=univ&amp;sa=X&amp;ved=2ahUKEwjavpfGlYnfAhUI2SwKHZJ0D9UQsAR6BAgAEAE&amp;biw=1920&amp;bih=963#imgrc=8TZS0UxreQ2XgM\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>: This is a general problem with your algorithm - it&#39;s not related to bugs in the implementation"}, {"owner": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544030904, "post_id": 53635548, "comment_id": 94135082, "body": "yeah I just realized it now ,i tried adding an if clause like&quot;  if(array[i]&gt;&#39;z&#39;){ \t\t\t array[i]=array[i]-&#39;z&#39;+&#39;a&#39;-1; \t\t }&quot;                                                             but it only works for z"}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544031429, "post_id": 53635548, "comment_id": 94135315, "body": "@momonosuke well, you can&#39;t really do much about it. The algorithm (i.e. just adding <code>key</code> to the input) will always result in non-printable values. Just consider <code>&#39;~&#39;</code> (which is 126). What can be added so that you still have a printable character?"}, {"owner": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "edited": false, "score": 0, "creation_date": 1544031602, "post_id": 53635548, "comment_id": 94135397, "body": "98 so i can get back to &#39;a&#39; which has ascii value &#39;97&#39;"}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": true, "score": 2, "last_activity_date": 1544024234, "last_edit_date": 1544024234, "creation_date": 1544023493, "answer_id": 53635548, "question_id": 53635000, "link": "https://stackoverflow.com/questions/53635000/spaces-shouldnt-be-counted-to-string-length/53635548#53635548", "title": "Spaces shouldn&#39;t be counted to string length", "body": "<p>1) If you don't want to include the spaces in the calculation of the key, you have to make your own function to calculate the number of spaces.</p>\n\n<p>2) The code <code>length = strlen(array) - 1;</code> seems to \"take care\" of a <code>'\\n'</code> in the end of the string. However, you can't be sure that there is a <code>'\\n'</code>. You need to check for that first.</p>\n\n<p>3) Doing <code>key % 0</code> will be \"bad\" so check for that as well</p>\n\n<p>The code could look something like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; \n#include &lt;stdlib.h&gt;\n\nint cnt_spaces(char* arr)\n{\n    int res = 0;\n    while(*arr)\n    {\n        if (*arr == ' ')\n        {\n            ++res;\n        }\n        ++arr;\n    }\n    return res;\n}\n\nint main() {\n    char array[20];\n    int length = 0;\n    int i;\n    int key = 256;\n\n    printf(\"input:  \");\n\n    fgets(array, 20, stdin);\n    length = strlen(array);\n    if (strlen(array) == 0) return 0;  // or add error handling\n\n    // Remove \\n if present\n    if (array[length-1] == '\\n')\n    {\n        array[length-1] = '\\0';\n        --length;\n    }\n    printf(\"len = %d\\n\", length);\n\n    int spaces = cnt_spaces(array);\n    printf(\"spaces = %d\\n\", spaces);\n\n    if (length == spaces) return 0;  // or add error handling\n    key = key % (length - spaces);\n\n    printf(\"key = %d\\n\", key);\n\n    if (key &gt; 0) {\n        for (i = 0; i &lt; length; i++) {\n            if (array[i] != ' ') {\n                array[i] = array[i] + key;\n            }\n            printf(\"%c\", array[i]);\n        }\n    }\n\n    return 0;\n  }\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>input:  a b c\nlen = 5\nspaces = 2\nkey = 1\nb c d\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10750066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6bb34d9fa6aa58acfbe782f8aa06df4?s=128&d=identicon&r=PG", "display_name": "momonosuke", "link": "https://stackoverflow.com/users/10750066/momonosuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 1, "accepted_answer_id": 53635548, "answer_count": 1, "score": 0, "last_activity_date": 1544024234, "creation_date": 1544021599, "question_id": 53635000, "link": "https://stackoverflow.com/questions/53635000/spaces-shouldnt-be-counted-to-string-length", "title": "Spaces shouldn&#39;t be counted to string length", "body": "<p>This code gets user input then 256 % length of string is used. If the result is 3 and the input is abc the output is bcd. This works fine. However if the input is for example \"hey whatsup\" the length is 11 and it should be 10 because the space shouldn't be included for the length.</p>\n\n<p>How can I programm this code so it dosen't count space to the length?</p>\n\n<p>Is it even possible to implement it while using fgets?</p>\n\n<p>Thank you in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt; \n#include &lt;stdlib.h&gt;\n\n  int main() {\n\n    char array[20];\n    int length = 0;\n    int i;\n    int key = 256;\n\n    printf(\"input:  \");\n\n    fgets(array, 20, stdin);\n\n    length = strlen(array) - 1;\n\n    key = key % length;\n\n    if (key &gt; 0) {\n\n      for (i = 0; i &lt; length; i++) {\n\n        if (array[i] == ' ') {\n\n          printf(\"%c\", array[i]);\n\n          continue;\n\n        }\n        array[i] = array[i] + key;\n\n        printf(\"%c\", array[i]);\n      }\n\n    }\n\n    return 0;\n  }\n</code></pre>\n"}, {"tags": ["c", "hashtable"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544021264, "post_id": 53634834, "comment_id": 94129283, "body": "You have an array of pointers. But <i>where do the pointers actually point?</i>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1544021366, "post_id": 53634834, "comment_id": 94129358, "body": "You have an array of pointers to nodes, but none of the elements are initialized to point to anything before you use them."}, {"owner": {"reputation": 3, "user_id": 6618357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUSLS.jpg?s=128&g=1", "display_name": "Pexan", "link": "https://stackoverflow.com/users/6618357/pexan"}, "edited": false, "score": 0, "creation_date": 1544021480, "post_id": 53634834, "comment_id": 94129431, "body": "I don&#39;t need them to point to anything now. I did table[0]-&gt;next=NULL; but still got SegFault."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544021527, "post_id": 53634834, "comment_id": 94129462, "body": "But that dereferences the pointer <code>table[0]</code>! You can&#39;t dereference a pointer unless it points to something valid. Perhaps you should spend a little more time reading books or tutorials about pointers?"}, {"owner": {"reputation": 3, "user_id": 6618357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUSLS.jpg?s=128&g=1", "display_name": "Pexan", "link": "https://stackoverflow.com/users/6618357/pexan"}, "edited": false, "score": 0, "creation_date": 1544021915, "post_id": 53634834, "comment_id": 94129747, "body": "Ohhh okay. I think it clicked now! I wanted to do that table[i] = malloc! Thank you so much."}, {"owner": {"reputation": 3, "user_id": 6618357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUSLS.jpg?s=128&g=1", "display_name": "Pexan", "link": "https://stackoverflow.com/users/6618357/pexan"}, "edited": false, "score": 0, "creation_date": 1544022030, "post_id": 53634834, "comment_id": 94129818, "body": "Yes I will read them!"}], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 6618357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUSLS.jpg?s=128&g=1", "display_name": "Pexan", "link": "https://stackoverflow.com/users/6618357/pexan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544022206, "creation_date": 1544022206, "answer_id": 53635169, "question_id": 53634834, "link": "https://stackoverflow.com/questions/53634834/i-have-a-hashtable-of-nodes-how-to-print-each-individual-values-of-each-node-in/53635169#53635169", "title": "I have a hashtable of nodes. How to print each individual values of each node in the hashtable?", "body": "<p>Here are two ways I to make it right:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(void)\n{\n    typedef struct node\n    {\n        char word[50];\n        struct node *next;\n    } node;\n\n    node table[2];\n\n    strcpy(table[0].word, \"Goal\");\n    strcpy(table[1].word, \"Jonas\");\n\n    printf(\"%s\\n\", table[0].word);\n    printf(\"%s\\n\", table[1].word);\n}\n</code></pre>\n\n<p>Or using malloc():</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\n\nint main(void)\n{\n    typedef struct node\n    {\n        char word[50];\n        struct node *next;\n    } node;\n\n    node *table[2];\n\n    table[0] = malloc(sizeof *table[0]);\n    table[1] = malloc(sizeof *table[0]);\n\n    table[0]-&gt;next = NULL;\n    table[1]-&gt;next = NULL;\n\n\n    strcpy(table[0]-&gt;word, \"Goal\");\n    strcpy(table[1]-&gt;word, \"Jonas\");\n\n    printf(\"%s\\n\", table[0]-&gt;word);\n    printf(\"%s\\n\", table[1]-&gt;word);\n\n    free(table[0]);\n    free(table[1]);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6618357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUSLS.jpg?s=128&g=1", "display_name": "Pexan", "link": "https://stackoverflow.com/users/6618357/pexan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544022206, "creation_date": 1544021074, "last_edit_date": 1544021233, "question_id": 53634834, "link": "https://stackoverflow.com/questions/53634834/i-have-a-hashtable-of-nodes-how-to-print-each-individual-values-of-each-node-in", "title": "I have a hashtable of nodes. How to print each individual values of each node in the hashtable?", "body": "<p>I'm getting a Segmentation Fault. This is really basic but I don't know how.</p>\n\n<p>From my understanding this is what I'm doing:</p>\n\n<ul>\n<li><p>I made a struct named node. A node has two values: string WORD and pointer NEXT.</p></li>\n<li><p>I made a table which is an array of two nodes.</p></li>\n<li><p>node1 has value WORD equal \"Goal\". node2 has value WORD equal \"Jonas\".</p></li>\n<li><p>I tried to print the value WORD of both nodes.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(void)\n{\n    typedef struct node\n    {\n        char word[50];\n        struct node *next;\n    } node;\n\n    node *table[2];\n\n    strcpy(table[0]-&gt;word, \"Goal\");\n    strcpy(table[1]-&gt;word, \"Jonas\");\n\n    printf(\"%s\\n\", table[0]-&gt;word);\n    printf(\"%s\\n\", table[1]-&gt;word);\n\n}\n</code></pre></li>\n</ul>\n\n<p>In my mind this is what I wanted to do:</p>\n\n<p>TABLE:</p>\n\n<pre><code>________________\n|        |      |\n| \"Goal\" | NULL | -&gt; this is node1\n|________|______|\n|        |      |\n|\"Jonas\" | NULL | -&gt; this is node2\n|________|______|\n</code></pre>\n"}, {"tags": ["c", "printf"], "comments": [{"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 2, "creation_date": 1544021118, "post_id": 53634701, "comment_id": 94129186, "body": "The code seems to be working fine, as to why the final <code>printf</code> gets truncated, that&#39;s hard to say. It could have something to do with PowerShell."}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 2, "creation_date": 1544021230, "post_id": 53634701, "comment_id": 94129255, "body": "Try adding <a href=\"https://stackoverflow.com/a/1716621/243245\"><code>fflush(stdout);</code></a> to the end, although I&#39;m not sure why you&#39;d need that."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1544021257, "post_id": 53634701, "comment_id": 94129275, "body": "Your code is correct and should work, like <a href=\"http://tpcg.io/J1VCv8\" rel=\"nofollow noreferrer\">here</a> it does. Strange."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1544021286, "post_id": 53634701, "comment_id": 94129294, "body": "Try running it outside of powershell."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 3, "creation_date": 1544022615, "post_id": 53634701, "comment_id": 94130208, "body": "What compiler are you using? You might try adding an explicit <code>return 0</code> at the end."}, {"owner": {"reputation": 31, "user_id": 10748857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qCji93PAa0k/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jUjztXqCqOTBf-hfLmY5dP__PRBg/mo/photo.jpg?sz=128", "display_name": "htskll", "link": "https://stackoverflow.com/users/10748857/htskll"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1544025552, "post_id": 53634701, "comment_id": 94132042, "body": "@RetiredNinja If I understood your question correctly then it&#39;s &quot;MinGW32-base&quot;.   I&#39;ve tried adding <code>return 0;</code>  as I usually do for my programs (this was copied from the book) but it made no difference."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1544025763, "post_id": 53634701, "comment_id": 94132164, "body": "Something is broken in your compiler or the environment. the code is correct. Try running under MSYS/MinGw console"}], "owner": {"reputation": 31, "user_id": 10748857, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qCji93PAa0k/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jUjztXqCqOTBf-hfLmY5dP__PRBg/mo/photo.jpg?sz=128", "display_name": "htskll", "link": "https://stackoverflow.com/users/10748857/htskll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1544022471, "creation_date": 1544020662, "last_edit_date": 1544022471, "question_id": 53634701, "link": "https://stackoverflow.com/questions/53634701/printf-inconsistent-results-the-c-programming-language-chapter-1-6-arrays", "title": "Printf inconsistent results [The C Programming Language - Chapter 1.6 Arrays]", "body": "<p>When running the program provided in chapter 1.6 Arrays of The C Programming Language I get some very inconsistent results from the final printf.</p>\n\n<p>Here is the program:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  int c, i, nwhite, nother;\n  int ndigit[10];\n\n  nwhite = nother = 0;\n\n  for (i = 0; i &lt; 10; ++i)\n    ndigit[i] = 0;\n\n  while ((c = getchar()) != EOF)\n  {\n    if (c &gt;= '0' &amp;&amp; c &lt;= '9')\n        ++ndigit[c-'0'];\n    else if (c == ' ' || c == '\\n' || c == '\\t')\n        ++nwhite;\n    else\n        ++nother;\n  }\n\n  printf(\"digits =\");\n\n  for (i = 0; i &lt; 10; ++i)      \n    printf(\" %d\", ndigit[i]);\n\n  printf(\" white space = %d \\n nother = %d \\n\", nwhite, nother);\n}\n</code></pre>\n\n<p>Here's the execution:\n<a href=\"https://i.stack.imgur.com/5Ka2e.png\" rel=\"nofollow noreferrer\">Windows PowerShell</a></p>\n\n<p>I'm greatly confused by the apparent randomness of it. I'd be very grateful to anyone who can highlight what I'm missing here, especially considering this isn't even a program of my own making: this is provided by the book itself.</p>\n\n<p>Thank you.</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>I've tried running the program in Command Prompt as opposed to Windows PowerShell. No difference in the results.</p>\n\n<p>Also I've tried adding an int at the beginning of the main</p>\n\n<pre><code>  int k = 99;\n</code></pre>\n\n<p>and two printf's, before and after, the final printf</p>\n\n<pre><code>  printf(\"%d\", k);\n  printf(\" white space = %d \\n nother = %d \\n\", nwhite, nother);\n  printf(\"%d\", k);\n</code></pre>\n\n<p>Only the first one of the two extra printf's is printed but at the expense of 2 more characters from the middle one.</p>\n"}, {"tags": ["c", "tree", "big-o", "binary-search-tree", "complexity-theory"], "comments": [{"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1544020989, "post_id": 53634659, "comment_id": 94129090, "body": "You need to post your bst implementation. What you&#39;re reporting looks to me that you&#39;re getting an unbalanced BST due to sorted value insertion (you&#39;ll get a tree with depth = n). This looks more like a linked list than a tree. There are Balanced BST data structures that can accomodate such sorted inserts but it has a rebalance mechanism built-in."}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1544021097, "post_id": 53634659, "comment_id": 94129176, "body": "See this so you know what an unbalanced BST looks like when you insert ordered or semi-ordered values: <a href=\"https://s3.amazonaws.com/hr-challenge-images/24100/1473289501-fe15119ffb-UnbalancedBST.png\" rel=\"nofollow noreferrer\">s3.amazonaws.com/hr-challenge-images/24100/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6710403"}, "reply_to_user": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1544021163, "post_id": 53634659, "comment_id": 94129211, "body": "@AlexandreJuma Exactly, i am using Unbalanced BST, this is only a simple BST, if you want i will add the code and test scenarios as well, but the problem is that i do not understand their complexities."}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1544022079, "post_id": 53634659, "comment_id": 94129847, "body": "You just need to know if the value you&#39;re searching is either lower, higher or equal to the current node you&#39;re checking. Everytime you turn right or left you&#39;re bypassing a lot of possible values to analyze because you know for sure that the value you&#39;re looking is impossible to exist on the other side of the tree leaf. That&#39;s why balanced bst for search, insert and delete is O(log n). Now if you have an unbalanced tree (like when you insert values pre-sorted), you&#39;ll only have values to the right or left, so you end up with O(n) in the worst case because you need to check all values"}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1544022159, "post_id": 53634659, "comment_id": 94129907, "body": "Check this animation for sorted vs non sorted in unbalanced binary tree <a href=\"https://cdn-images-1.medium.com/max/1600/1%2AOmRV7P0YluY2ToRj44jKGA.gif\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6710403"}, "reply_to_user": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1544022674, "post_id": 53634659, "comment_id": 94130245, "body": "got it somehow, and can i search inside all these random and sorted values, if yes what will be the complexity then for both? i mean what if i just want to know how much does it take to search in all nodes?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6710403"}, "edited": false, "score": 0, "creation_date": 1544022407, "post_id": 53634877, "comment_id": 94130076, "body": "after i have inserted random values to my BST, then i am calling the free function, i mean inserting the second scenario, which is inserting sorted values is completely new BST, i.e these values are not inserted after those random values. now you mean BST constructed from random values will has less depth than BST constructed from sorted values, that is why searching in sorted values in a BST is taking longer. right?"}, {"owner": {"reputation": 2119, "user_id": 7095751, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0kkD4YDw7Gw/AAAAAAAAAAI/AAAAAAAAAEk/ZwcaKyyr9M8/photo.jpg?sz=128", "display_name": "Alexandre Juma", "link": "https://stackoverflow.com/users/7095751/alexandre-juma"}, "edited": false, "score": 0, "creation_date": 1544025457, "post_id": 53634877, "comment_id": 94131988, "body": "That&#39;s right. If you understand that higher depths require more node check operations, than you understand why it takes longer. With a lower depth you&#39;ll need less node checks until you find your value. You need to do a value check at each depth level of your tree. If you have a higher depth, you have more checks, hence more time to perform the search."}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": true, "score": 1, "last_activity_date": 1544021231, "creation_date": 1544021231, "answer_id": 53634877, "question_id": 53634659, "link": "https://stackoverflow.com/questions/53634659/binary-search-tree-complexity-based-on-values/53634877#53634877", "title": "Binary Search Tree Complexity based on Values", "body": "<p>If you don't balance the tree, its structure depends on the insertion order, and a \"fully unbalanced\" binary search tree is equivalent to a sorted linked list.<br>\nThus, the worst case time complexity for your operations is linear in the tree's size, not logarithmic as it would be in a balanced tree.</p>\n\n<p>For instance, if you insert from 1 and incrementing, you'll end up with</p>\n\n<pre><code> 1\n/\\\n  2\n  /\\\n    3\n    /\\\n     ...\n</code></pre>\n\n<p>where the right \"spine\" is a linked list.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9753126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9180a6cc8bdee70a36ba2d9fdb21b504?s=128&d=identicon&r=PG&f=1", "display_name": "Vaibhav", "link": "https://stackoverflow.com/users/9753126/vaibhav"}, "is_accepted": false, "score": 0, "last_activity_date": 1544034628, "creation_date": 1544034628, "answer_id": 53638609, "question_id": 53634659, "link": "https://stackoverflow.com/questions/53634659/binary-search-tree-complexity-based-on-values/53638609#53638609", "title": "Binary Search Tree Complexity based on Values", "body": "<p>Use AVL Tree. It will keep your tree balanced and you will always get search time of log(n)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6710403"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 53634877, "answer_count": 2, "score": 0, "last_activity_date": 1544034628, "creation_date": 1544020499, "last_edit_date": 1544020784, "question_id": 53634659, "link": "https://stackoverflow.com/questions/53634659/binary-search-tree-complexity-based-on-values", "title": "Binary Search Tree Complexity based on Values", "body": "<p>I have created a binary search tree in C language, when i am testing my tree, the insertion and search operations take different times to execute. for example, i have two scenarios, inserting random values from 1 to 10000 and inserting sorted values from 1 to 10000. when i insert random values from 1 to 10000 into my BST then it takes less time than inserting sorted values from 1 to 10000 into my BST.<br>\nthe same for search operation to be executed in my BST it takes less time while i am searching in those random values, but takes too long while searching in sorted values in my BST.\nNow, the problem is the time complexity, can anyone explain, how is this handled? what is the time complexity for all four cases?</p>\n\n<p><strong>Note:</strong> Inserting and searching those sorted values almost take the same time, still searching takes a bit longer!</p>\n"}, {"tags": ["c", "multithreading", "message-queue", "shared-memory", "multiple-processes"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1544032839, "last_edit_date": 1544032839, "creation_date": 1544032534, "answer_id": 53638104, "question_id": 53634605, "link": "https://stackoverflow.com/questions/53634605/shared-variable-only-changing-in-one-process/53638104#53638104", "title": "Shared variable only changing in one process", "body": "<p>The shared memory is created with <code>IPC_PRIVATE</code> key, which means the memory is private to the process. The child processes get their own private copy of that memory.</p>\n\n<p>Instead of obsolete System V calls <code>shmget</code> and <code>shmat</code> do one call:</p>\n\n<pre><code>shm = mmap(NULL, sizeof(shared_mem), PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);\nif(MMAP_FAILED == shm)\n    perror('mmap');\n</code></pre>\n\n<p>This creates an anonymous memory that is shared between the parent and its child processes.</p>\n\n<hr>\n\n<p>The mutex needs to be in the shared memory as well, otherwise each process has its own copy.</p>\n"}], "owner": {"reputation": 1, "user_id": 10749376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd41cf803c4f3754994eeb548790f2fd?s=128&d=identicon&r=PG&f=1", "display_name": "stelyt", "link": "https://stackoverflow.com/users/10749376/stelyt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544032839, "creation_date": 1544020319, "last_edit_date": 1544020987, "question_id": 53634605, "link": "https://stackoverflow.com/questions/53634605/shared-variable-only-changing-in-one-process", "title": "Shared variable only changing in one process", "body": "<p>I'm having an issue in my project for university. I have a shared variable with products and the quantity of each product in a warehouse. In intervals of \"I\" seconds there is a supply of Q in a random product. It sends a message to process \"Warehouse\" which adds that quantity to shared memory. In central it prints the product and its quantity. However, in central, the quantity is always the same and it doesn't increment.\nHere's the code:</p>\n\n<pre><code>//Struct for Shared Memory\ntypedef struct Warehouse{\n    char name[50];\n    int W_NO;\n    pid_t pid;\n    double x;\n    double y;\n    char products[3][50];\n    int quantity[3];\n}shared_mem;\n\n//Struct for Message Queue\ntypedef struct Message_QUeue{\n\n    long type;\n    char product[50];\n}message_queue;\n\nshared_mem *shm;\nint shmid;\npthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\nvoid* receive_supply(void* id){\n    int W_NO = *((int *)id);\n    message_queue msg;\n    while(1){\n        //Receive messamge\n        msgrcv(mq_id,&amp;msg,sizeof(msg) - sizeof(long),1,0);\n        for(int i = 0; i &lt; (sizeof(shm.products)/sizeof(shm.products[0])); i++){  \n            if(strcmp(msg.produto,shm.products[i]) == 0){ //Sees which product was randomizem\n                pthread_mutex_lock(&amp;mutex);\n                shm.quantity[i] += Q;  //add quantity Q\n                pthread_mutex_unlock(&amp;mutex);   \n                break;\n            }\n        }\n    }\n}\n\nvoid warehouse(int W_NO){\n    ids_supply[0] = W_NO;\n    pthread_t supply;\n    pthread_create(&amp;supply,NULL,receive_supply,&amp;W_NO);\n}\n\nvoid central(){\n    while(1){\n        for(int j = 0; j &lt; (sizeof(shm.products)/sizeof(shm.products[0]));j++){\n            printf(\"Warehouse: %d Quantity of product %s: %d\\n\",shm.W_NO,shm.products[j],shm.quantity[j]);\n        }\n        sleep(10);\n    }\n}\n\nint main(){\n\n    //Initialize shared memory\n    if((shmid = shmget(IPC_PRIVATE,sizeof(shared_mem),IPC_CREAT | 0766)) &lt; 0)\n    {\n      perror(\"Error in shmget with IPC_CREAT\\n\");\n      exit(1);\n    }\n\n    if((shm = (shared_mem*)shmat(shmid, NULL, 0)) == (shared_mem*)-1)\n    {\n       perror(\"Shmat error\");\n       exit(1);\n    }\n\n    //Create process for Warehouse\n    pid_t child_ID;\n    switch(child_ID = fork()){\n        case -1:\n            printf(\"Error creating new process\\n\");\n            break;\n        case 0 :\n            pthread_mutex_lock(&amp;mutex);\n            shm.W_NO = 1;\n            pthread_mutex_unlock(&amp;mutex);\n            warehouse(1);\n            exit(0);\n            break;\n        default:\n            pthread_mutex_lock(&amp;mutex);\n            shm.pid = child_ID;\n            shm.W_NO = 1;\n            pthread_mutex_unlock(&amp;mutex);\n            break;\n    }\n\n    //Create Process Central\n    id_central = fork();\n    if (id_central == 0){\n         central();\n         exit(0);\n    }\n\n    srand(getpid());\n    //send message to process Warehouse every S seconds with a random product\n    while(1){\n        message_queue msg;\n        strcpy(msg.product,shm -&gt; info_wh.produtos[rand()%(sizeof(shm.products)/sizeof(shm.products[0]))]);\n        msg.type = 1;\n        msgsnd(mq_id,&amp;msg,sizeof(msg) - sizeof(long),0);\n        sleep(S);\n    }\n</code></pre>\n\n<p>Some variables like Q, S, products and quantity are taken from a text file. All that works perfectly, just shared memory is not updating in central and I'm not seeing what's wrong. Any help would be appreciated. Soma code might be wrong because I've taken it from the original file and tried to adapt it to this post. If you get any doubt, feel free to ask.</p>\n"}, {"tags": ["c", "linux", "kernel", "userspace"], "comments": [{"owner": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1544020243, "post_id": 53634486, "comment_id": 94128524, "body": "Do you have all warnings enabled when you compile your code?  You should, and you should pay attention to them.  Hint - if you have to cast something to make a warning go away, you have a problem."}, {"owner": {"reputation": 23, "user_id": 4466510, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YOWL7HSixA4/AAAAAAAAAAI/AAAAAAAAAJc/fDFWpunyQr8/photo.jpg?sz=128", "display_name": "anmol sandhu", "link": "https://stackoverflow.com/users/4466510/anmol-sandhu"}, "reply_to_user": {"reputation": 27420, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1544119907, "post_id": 53634486, "comment_id": 94173064, "body": "yes, I don&#39;t have any warnings is the file supposed to be able to be readable and in what format is it going to be."}], "owner": {"reputation": 23, "user_id": 4466510, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YOWL7HSixA4/AAAAAAAAAAI/AAAAAAAAAJc/fDFWpunyQr8/photo.jpg?sz=128", "display_name": "anmol sandhu", "link": "https://stackoverflow.com/users/4466510/anmol-sandhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544023161, "creation_date": 1544019953, "last_edit_date": 1544023161, "question_id": 53634486, "link": "https://stackoverflow.com/questions/53634486/vfs-write-kernel-to-user-space-file", "title": "vfs_write kernel to user space file", "body": "<p>I am trying to write a file in user space from keyboard interrupt module\nI am using vfs_write to write to file.</p>\n\n<pre><code>static char *key_names_caps[] = {\n   \"-\", \"&lt;ESC&gt;\",\n   \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"-\", \"=\",\n   \"&lt;Backspace&gt;\", \"&lt;Tab&gt;\",\n   \"Q\", \"W\", \"E\", \"R\", \"T\", \"Y\", \"U\", \"I\", \"O\", \"P\",\n   \"[\", \"]\", \"&lt;Enter&gt;\", \"&lt;LCtrl&gt;\",\n   \"A\", \"S\", \"D\", \"F\", \"G\", \"H\", \"J\", \"K\", \"L\", \";\",\n   \"'\", \"`\", \"&lt;LShift&gt;\",\n   \"\\\\\", \"Z\", \"X\", \"C\", \"V\", \"B\", \"N\", \"M\", \",\", \".\", \"/\",\n   \"&lt;RShift&gt;\",\n   \"&lt;KP*&gt;\",\n   \"&lt;LAlt&gt;\", \" \", \"&lt;CapsLock&gt;\",\n   \"&lt;F1&gt;\", \"&lt;F2&gt;\", \"&lt;F3&gt;\", \"&lt;F4&gt;\", \"&lt;F5&gt;\", \"&lt;F6&gt;\", \"&lt;F7&gt;\", \"&lt;F8&gt;\", \"&lt;F9&gt;\", \"&lt;F10&gt;\",\n   \"&lt;NumLock&gt;\", \"&lt;ScrollLock&gt;\",\n   \"&lt;KP7&gt;\", \"&lt;KP8&gt;\", \"&lt;KP9&gt;\",\n   \"&lt;KP-&gt;\",\n   \"&lt;KP4&gt;\", \"&lt;KP5&gt;\", \"&lt;KP6&gt;\",\n   \"&lt;KP+&gt;\",\n   \"&lt;KP1&gt;\", \"&lt;KP2&gt;\", \"&lt;KP3&gt;\", \"&lt;KP0&gt;\",\n   \"&lt;KP.&gt;\",\n   \"-\", \"-\", \"-\",\n   \"&lt;F11&gt;\", \"&lt;F12&gt;\",\n   \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\",\n   \"&lt;KPEnter&gt;\", \"&lt;RCtrl&gt;\", \"&lt;KP/&gt;\", \"&lt;SysRq&gt;\", \"&lt;RAlt&gt;\", \"-\",\n   \"&lt;Home&gt;\", \"&lt;Up&gt;\", \"&lt;PageUp&gt;\", \"&lt;Left&gt;\", \"&lt;Right&gt;\", \"&lt;End&gt;\", \"&lt;Down&gt;\",\n   \"&lt;PageDown&gt;\", \"&lt;Insert&gt;\", \"&lt;Delete&gt;\"\n};\n\n\n\n    int file_write(struct file *file, unsigned long long offset, const char *data, unsigned int size) \n    {\n        mm_segment_t oldfs;\n        int ret;\n\n        oldfs = get_fs();\n        set_fs(get_ds());\n\n        ret = vfs_write(file, data, size, &amp;offset);\n\n        set_fs(oldfs);\n        return ret;\n    }\n\n\n    static void write_byte_by_byte(char *pos[]) {\n\n       unsigned int count = 0;\n         while (*pos != '\\0') {\n            count += 1;\n          pos++;\n           //printf(\"%c\\n\", *(pos++));\n          }\n       file_write(fp,0,  (const char *)&amp;pos, count);\n    }\n</code></pre>\n\n<p>But I am not able to read the file that is output by this vfs_write function. The file output is giving me garbage value. Also, can you tell me how I can write strings in the given array into the file written by vfs_write</p>\n\n<p>I need to able to write <code>&lt;DELETE&gt;</code>  <code>9</code> as characters into the file.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1544020098, "post_id": 53634461, "comment_id": 94128411, "body": "you check if <code>count</code>, the amount of characters read on that line, is equal to <code>WRAP</code>, which is <code>40</code>.  if it is, then you do whatever you do in that block and then proceed to reset <code>count</code> at the end of the <code>if(count == WRAP)</code> block."}, {"owner": {"reputation": 43, "user_id": 6646811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477c5becc725c107cb502d2e81e520e6?s=128&d=identicon&r=PG&f=1", "display_name": "MMM", "link": "https://stackoverflow.com/users/6646811/mmm"}, "reply_to_user": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1544020576, "post_id": 53634461, "comment_id": 94128791, "body": "@Tau Yes, That is what I did. How should it be then?"}, {"owner": {"reputation": 458, "user_id": 8420233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JX6a.png?s=128&g=1", "display_name": "absoluteAquarian", "link": "https://stackoverflow.com/users/8420233/absoluteaquarian"}, "edited": false, "score": 0, "creation_date": 1544020947, "post_id": 53634461, "comment_id": 94129055, "body": "If you see that you have more characters on a line than you had originally intended there to be, you could increase <code>WRAP</code> to, let&#39;s say, 50.  If that doesn&#39;t fix the problem then you may need to rethink how your method works."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1544022106, "post_id": 53634461, "comment_id": 94129870, "body": "<code>int getLine(char line[])</code> is irreparable here.  When a wrap needs to occur along space/tab boundaries, in essence, a number of characters need to be &quot;put back&quot; and saved for the next line.  You need a new approach."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6646811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477c5becc725c107cb502d2e81e520e6?s=128&d=identicon&r=PG&f=1", "display_name": "MMM", "link": "https://stackoverflow.com/users/6646811/mmm"}, "edited": false, "score": 0, "creation_date": 1544024180, "post_id": 53635399, "comment_id": 94131202, "body": "Yes, True. I came into realize that the code is a mess :). I&#39;ll rewrite it with another approach."}], "tags": [], "owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "is_accepted": true, "score": 1, "last_activity_date": 1544023013, "creation_date": 1544023013, "answer_id": 53635399, "question_id": 53634461, "link": "https://stackoverflow.com/questions/53634461/problem-with-kr-exercise-1-22-some-lines-go-beyond-wrap-limit/53635399#53635399", "title": "Problem with K&amp;R exercise 1.22, some lines go beyond wrap limit", "body": "<p>You reset <code>count = 0</code> when you inserted a <code>'\\n'</code> somewhere. This may be correct if you inserted it at <code>line[i]</code>. If you inserted it at <code>line[j]</code> (with <code>j!=i</code>) you must take into account the number of characters after <code>line[j]</code> up to <code>line[i]</code>. So if there are e.g. 10 characters after <code>line[j]</code> you might have to set <code>count = 10</code> instead of 0. (Of course you have to calculate the number.)</p>\n\n<p>I'm not sure if everything will always work as expected because in</p>\n\n<pre><code>for (j = i; j &gt;= 0 &amp;&amp; line[j] != ' '; --j)\n            ;\n</code></pre>\n\n<p>you compare <code>line[i]</code> but have not yet written the character <code>c</code> to this position. (You do this after the checks for wrapping.)</p>\n\n<p>If there is no space in the last <code>WRAP</code> characters, this loop will even run over a <code>'\\n'</code> you inserted before and insert <code>'\\n'</code> for a space before this.\nTry entering a long line like\n<code>12345 12345 12345 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</code> (all in one line).</p>\n"}], "owner": {"reputation": 43, "user_id": 6646811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/477c5becc725c107cb502d2e81e520e6?s=128&d=identicon&r=PG&f=1", "display_name": "MMM", "link": "https://stackoverflow.com/users/6646811/mmm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 53635399, "answer_count": 1, "score": -2, "last_activity_date": 1544023013, "creation_date": 1544019862, "last_edit_date": 1544021165, "question_id": 53634461, "link": "https://stackoverflow.com/questions/53634461/problem-with-kr-exercise-1-22-some-lines-go-beyond-wrap-limit", "title": "Problem with K&amp;R exercise 1.22, some lines go beyond wrap limit", "body": "<p>I'm reading the K&amp;R book (The C Programming Language) and I'm having a hard time finding out what is wrong with my code for exercise 1.22:</p>\n\n<blockquote>\n  <p>Write a program to \"fold\" long input lines into two or more\n  shorter lines after the last non-blank character that occurs before the n-th column of input. Make sure your program does something intelligent with very long lines, and if there are no blanks or tabs before the specified column.</p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define WRAP 40       // maximum output line length limit\n#define MAXLINE 1000  // maximum input line length limit\n\nint getLine(char line[]);\n\n/* test getLine fuction */\nint main(void) {\n    int len;\n    char line[MAXLINE];\n\n    while ((len = getLine(line)) &gt; 0) {\n        printf(\"%s\", line);\n    }\n}\n\n/* getLine: read input and save it in line array; return its length.\n * folds long input lines into two or more shorter lines\n * after the last non-blank character that occurs before\n * the n-th column of input. */\nint getLine(char line[]) {\n    int c, i, j, count;\n\n    i = 0;\n    count = 0;\n    while (i &lt; MAXLINE &amp;&amp; (c = getchar()) != EOF &amp;&amp; c != '\\n') {\n        if (count == WRAP) {\n            for (j = i; j &gt;= 0 &amp;&amp; line[j] != ' '; --j)\n                ;\n\n            // this line is to demonstrate the current c, j, i and count values\n            printf(\"c: -%c-, j: %d, i: %d, count: %d\\n\", c, j, i, count);\n\n            if (line[j] == ' ')\n                line[j] = '\\n';\n            else {\n                line[i] = '\\n';\n                ++i;\n            }\n\n            line[i] = c;\n            ++i;\n            count = 0;\n\n        } else {\n            line[i] = c;\n            ++i;\n        }\n\n        ++count;\n    }\n\n    if (c == '\\n') {\n        line[i] = c;\n        ++i;\n    }\n\n    line[i] = '\\0';\n    return i;\n}\n</code></pre>\n\n<p>For example, I use a simple lorem ipsum pragraph to test it:</p>\n\n<blockquote>\n  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>\n</blockquote>\n\n<p>The result is:</p>\n\n<pre><code>c: -p-, j: 39, i: 40, count: 40\nc: - -, j: 74, i: 80, count: 40\nc: -d-, j: 119, i: 120, count: 40\nc: - -, j: 157, i: 160, count: 40\nc: -n-, j: 198, i: 200, count: 40\nc: -b-, j: 239, i: 240, count: 40\nc: -u-, j: 275, i: 280, count: 40\nc: - -, j: 309, i: 320, count: 40\nc: -a-, j: 355, i: 360, count: 40\nc: -i-, j: 398, i: 400, count: 40\nc: -i-, j: 434, i: 440, count: 40\nc: -e-, j: 476, i: 480, count: 40\nc: -i-, j: 518, i: 520, count: 40\nc: -f-, j: 558, i: 560, count: 40\nLorem Ipsum is simply dummy text of the\nprinting and typesetting industry.\nLorem Ipsum has been the industry's standard\ndummy text ever since the 1500s, when\nan unknown printer took a galley of type\nand scrambled it to make a type specimen\nbook. It has survived not only five\ncenturies, but also the leap into\nelectronic typesetting, remaining essentially\nunchanged. It was popularised in the 1960s\nwith the release of Letraset sheets\ncontaining Lorem Ipsum passages, and more\nrecently with desktop publishing software\nlike Aldus PageMaker including versions\nof Lorem Ipsum.\n</code></pre>\n\n<p>As you can see, some lines go beyond 40 characters, for example the 3rd line is 44 characters long, but the count variable does not catch it! What is wrong with it?</p>\n"}, {"tags": ["c", "string", "function"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 9771202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LfqnrP9DuOM/AAAAAAAAAAI/AAAAAAAAAGQ/CxMkQnBkv_4/photo.jpg?sz=128", "display_name": "mahin hossen", "link": "https://stackoverflow.com/users/9771202/mahin-hossen"}, "edited": false, "score": 0, "creation_date": 1544018698, "post_id": 53634058, "comment_id": 94127507, "body": "output is showing same string like the inserted one"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 175, "user_id": 9771202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LfqnrP9DuOM/AAAAAAAAAAI/AAAAAAAAAGQ/CxMkQnBkv_4/photo.jpg?sz=128", "display_name": "mahin hossen", "link": "https://stackoverflow.com/users/9771202/mahin-hossen"}, "edited": false, "score": 0, "creation_date": 1544018748, "post_id": 53634058, "comment_id": 94127534, "body": "Yes @mahinhossen I understand that. I am asking what would <i>you</i> like the function to do a given string. For example, if I give &quot;FOO&quot; to your function, what would you like the output to be?"}, {"owner": {"reputation": 175, "user_id": 9771202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LfqnrP9DuOM/AAAAAAAAAAI/AAAAAAAAAGQ/CxMkQnBkv_4/photo.jpg?sz=128", "display_name": "mahin hossen", "link": "https://stackoverflow.com/users/9771202/mahin-hossen"}, "edited": false, "score": 0, "creation_date": 1544019063, "post_id": 53634058, "comment_id": 94127725, "body": "first of all sorry for editing the question,i will edit now it to original one.And secondly there will be two sting input,so i want both string to be changed permanently in same case."}, {"owner": {"reputation": 175, "user_id": 9771202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LfqnrP9DuOM/AAAAAAAAAAI/AAAAAAAAAGQ/CxMkQnBkv_4/photo.jpg?sz=128", "display_name": "mahin hossen", "link": "https://stackoverflow.com/users/9771202/mahin-hossen"}, "edited": false, "score": 0, "creation_date": 1544019230, "post_id": 53634058, "comment_id": 94127845, "body": "i want it to convert string to any particular case,either uppercase or lowercase"}, {"owner": {"reputation": 175, "user_id": 9771202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LfqnrP9DuOM/AAAAAAAAAAI/AAAAAAAAAGQ/CxMkQnBkv_4/photo.jpg?sz=128", "display_name": "mahin hossen", "link": "https://stackoverflow.com/users/9771202/mahin-hossen"}, "edited": false, "score": 1, "creation_date": 1544019505, "post_id": 53634058, "comment_id": 94128016, "body": "i want the function to convert in any case,as given example i want it to convert it to lowercase,got the answer,thanks though.My syntax was wrong"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1544019970, "post_id": 53634058, "comment_id": 94128329, "body": "Not only clearer to use the character constants, but now also more portable.  Everyone&#39;s a winner!"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 3, "creation_date": 1544020861, "post_id": 53634058, "comment_id": 94128996, "body": "@TobySpeight The &quot;more portable&quot; gets into deeper issues.  1) Aside from ubiquitous ASCII, using <code>&#39;A&#39;</code> with EBCDIC, does not help as [A-Z] is not continuous, so the <code>if()</code> is broken code.  2) The character encoding of source code and encoding file characters may differ.  Still for learners, <code>&#39;A&#39;</code> vs <code>65</code> is best."}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1544029644, "post_id": 53634058, "comment_id": 94134440, "body": "<code>+=32</code> isn&#39;t portable either. It&#39;s much more straightforward to have an explicit mapping table for a particular character encoding and culture. And, if the character encoding can be (or be compatible with) the execution-charset, literals can be used. It&#39;s unfortunate that text-domain exercises are used to teach syntax."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 4, "last_activity_date": 1544020936, "last_edit_date": 1544020936, "creation_date": 1544018416, "answer_id": 53634058, "question_id": 53633963, "link": "https://stackoverflow.com/questions/53633963/problem-in-a-program-to-convert-upper-case-string-to-lowercase-using-function-in/53634058#53634058", "title": "Problem in a program to convert upper case string to lowercase using function in C", "body": "<p>Change this:</p>\n\n<pre><code>if(input[i]&gt;'65' &amp;&amp; input[i]&lt;'92')\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>if(input[i] &gt;= 65 &amp;&amp; input[i] &lt;= 90)\n</code></pre>\n\n<p>since you want to check for the ASCII codes of A and Z. Notice that because you used magic numbers, you made a mistake for both. I had to check an ASCII table to figure that out that you needed the equality sign as well, and 90 (code for Z), instead of 92 (code for '\\').</p>\n\n<p>I suggest you then to use characters constants, like this:</p>\n\n<pre><code>if(input[i] &gt;= 'A' &amp;&amp; input[i] &lt;= 'Z')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 175, "user_id": 9771202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LfqnrP9DuOM/AAAAAAAAAAI/AAAAAAAAAGQ/CxMkQnBkv_4/photo.jpg?sz=128", "display_name": "mahin hossen", "link": "https://stackoverflow.com/users/9771202/mahin-hossen"}, "edited": false, "score": 1, "creation_date": 1544018859, "post_id": 53634140, "comment_id": 94127592, "body": "sorry,was trying to do that so that it can take string as lowercase,but it didn&#39;t work.forgot to change it while posting here"}], "tags": [], "owner": {"reputation": 625, "user_id": 6306974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b61638b9f74d48c2149d93e96f5d974?s=128&d=identicon&r=PG&f=1", "display_name": "Abhyudaya Sharma", "link": "https://stackoverflow.com/users/6306974/abhyudaya-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1544019932, "last_edit_date": 1544019932, "creation_date": 1544018686, "answer_id": 53634140, "question_id": 53633963, "link": "https://stackoverflow.com/questions/53633963/problem-in-a-program-to-convert-upper-case-string-to-lowercase-using-function-in/53634140#53634140", "title": "Problem in a program to convert upper case string to lowercase using function in C", "body": "<p>You're trying to pass a <code>char*</code> to the <code>tolower</code> in <code>scanf(\"%s\",tolower(input1));</code>.</p>\n\n<p>Change it to <code>scanf(\"%s\", input1);</code></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2661766/c-convert-a-mixed-case-string-to-all-lower-case\">c - convert a mixed-case string to all lower case</a> should tell you how to convert a string to lower case.</p>\n\n<p>Take a look at <a href=\"https://linux.die.net/man/3/tolower\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/tolower</a> and <a href=\"https://linux.die.net/man/3/toupper\" rel=\"nofollow noreferrer\">https://linux.die.net/man/3/toupper</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1544020147, "last_edit_date": 1544020147, "creation_date": 1544019088, "answer_id": 53634242, "question_id": 53633963, "link": "https://stackoverflow.com/questions/53633963/problem-in-a-program-to-convert-upper-case-string-to-lowercase-using-function-in/53634242#53634242", "title": "Problem in a program to convert upper case string to lowercase using function in C", "body": "<p>Constant and off-by-1 errors.</p>\n\n<ul>\n<li><p><code>'65'</code> is a multi byte constant and certainly <code>65</code> was meant.  <a href=\"https://stackoverflow.com/users/2411320/gsamaras\">@gsamaras</a>.  ASCII <code>Z</code> is 90.</p>\n\n<pre><code>// if(input[i]&gt;'65' &amp;&amp; input[i]&lt;'92')\nif(input[i]&gt;65 &amp;&amp; input[i]&lt; Zee)\n</code></pre></li>\n<li><p>Off by 1 due to <code>&gt;</code> vs. <code>&gt;=</code></p>\n\n<pre><code>// if(input[i]&gt;'65' &amp;&amp; input[i]&lt;'92')\n// if(input[i]&gt;65 &amp;&amp; input[i]&lt; Zee)\nif(input[i] &gt;= 65 &amp;&amp; input[i] &lt;= 90)\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>Character constants are more self documenting.  Consider <code>'A'</code></p>\n\n<pre><code>    if(input[i] &gt;= 'A' &amp;&amp; input[i] &lt;= 'Z')\n</code></pre>\n\n<p>Ideally code would use standard C library functions to detect case.</p>\n\n<pre><code>    if(isupper((unsigned char) input[i]))\n</code></pre>\n\n<p>Yet code could call <code>toupper()</code> directly and skip the <code>if()</code>.</p>\n\n<pre><code>while(input[i]) {\n  input[i] = tolower((unsigned char) input[i]);\n  i++;\n}\n\n// or \n\nfor (size_t i = 0; input[i]; i++) {\n  input[i] = tolower((unsigned char) input[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 9771202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LfqnrP9DuOM/AAAAAAAAAAI/AAAAAAAAAGQ/CxMkQnBkv_4/photo.jpg?sz=128", "display_name": "mahin hossen", "link": "https://stackoverflow.com/users/9771202/mahin-hossen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 53634058, "answer_count": 3, "score": 3, "last_activity_date": 1544020936, "creation_date": 1544018092, "last_edit_date": 1544020454, "question_id": 53633963, "link": "https://stackoverflow.com/questions/53633963/problem-in-a-program-to-convert-upper-case-string-to-lowercase-using-function-in", "title": "Problem in a program to convert upper case string to lowercase using function in C", "body": "<p>I am trying to write a program which will only compare same case letter, but first it should convert any case to a particular case.</p>\n\n<p>But I am having trouble converting the string to any particular case using a function, though I have figured out how to do that without a function. Here's my code.  Can anyone help me find out where I am going wrong?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\nvoid order(char input[])\n{\n    int i=0;\n\n    while(input[i]!='\\0')\n    {\n        if(input[i]&gt;'65' &amp;&amp; input[i]&lt;'92')\n        {\n            input[i]+=32;\n           // printf(\"WORKING\\n\");\n        }\n\n        i++;\n\n    }\n}\nint main()\n{\n    char input1[101], output1[101];\n    char input2[101], output2[101];\n    int r;\n\n    scanf(\"%s\",tolower(input1));\n    scanf(\"%s\",input2);\n\n    order(input1);\n    order(input2);\n\n    printf(\"%s\\n\",input1);\n    printf(\"%s\\n\",input2);\n\n    /*\n\n    r=strcmp(output1,output2);\n\n\n    if(r&lt;0)\n        printf(\"-1\\n\");\n    else if(r&gt;0)\n        printf(\"1\\n\");\n    else\n        printf(\"0\\n\");\n\n    */\n\n}\n</code></pre>\n"}, {"tags": ["c", "linux", "makefile", "pthreads"], "comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1544017875, "post_id": 53633837, "comment_id": 94127037, "body": "It usually has to do with the whitespace.  Try adding some before <code>obj-m := thread.o</code> and <code>$(MAKE) -C $(KERNELDIR) M=$(PWD) modules</code>"}], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 5363894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418dfe42347f29d52228f734fa877c57?s=128&d=identicon&r=PG&f=1", "display_name": "Noble", "link": "https://stackoverflow.com/users/5363894/noble"}, "is_accepted": false, "score": 0, "last_activity_date": 1544017900, "creation_date": 1544017900, "answer_id": 53633902, "question_id": 53633837, "link": "https://stackoverflow.com/questions/53633837/linux-compliation-make-error-missing-separator/53633902#53633902", "title": "Linux compliation Make error: missing separator", "body": "<p>I believe I've had this issue before, especially when using windriver. Typically I just nano the specific file its complaining about, delete the first space in the line then add it back. It's a weird fix but usually works for me. </p>\n"}, {"comments": [{"owner": {"reputation": 312, "user_id": 7249301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KZcNT.jpg?s=128&g=1", "display_name": "Ido Segal", "link": "https://stackoverflow.com/users/7249301/ido-segal"}, "edited": false, "score": 0, "creation_date": 1544019273, "post_id": 53634070, "comment_id": 94127872, "body": "Thank you! , I&#39;ve added a &quot;tab&quot; on the first line and under the default and it&#39;s working."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1544018454, "creation_date": 1544018454, "answer_id": 53634070, "question_id": 53633837, "link": "https://stackoverflow.com/questions/53633837/linux-compliation-make-error-missing-separator/53634070#53634070", "title": "Linux compliation Make error: missing separator", "body": "<p>The commands in a rule's recipe must each start with a tab character.  More or other whitespace may follow, but the leading tab is essential.</p>\n\n<p>Your file contains a rule for target <code>default</code>, but the single command in its recipe does not begin with a tab (or any whitespace, for that matter).  It turns out that that's line 10 (supposing that you have presented the whole file), which is indeed the line number implicated by <code>make</code>'s diagnostic.  Just insert the tab.  Personally, I would also add a blank line before the <code>endif</code>, but that's a style recommendation, not a requirement.  To wit:</p>\n\n<pre><code>ifneq ($(KERNELRELEASE),)\n\nobj-m := thread.o\n\nelse\n\nKERNELDIR ?= /lib/modules/$(shell uname -r)/build\nPWD := $(shell pwd)\n\ndefault:\n    $(MAKE) -C $(KERNELDIR) M=$(PWD) modules\n\nendif\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 7249301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KZcNT.jpg?s=128&g=1", "display_name": "Ido Segal", "link": "https://stackoverflow.com/users/7249301/ido-segal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544019034, "creation_date": 1544017701, "last_edit_date": 1544019034, "question_id": 53633837, "link": "https://stackoverflow.com/questions/53633837/linux-compliation-make-error-missing-separator", "title": "Linux compliation Make error: missing separator", "body": "<p>I'm trying to compile my program <code>thread.c</code> with the following Makefile:</p>\n\n<pre><code>ifneq ($(KERNELRELEASE),)\nobj-m := thread.o\nelse\n\nKERNELDIR ?= /lib/modules/$(shell uname -r)/build\n\nPWD := $(shell pwd)\n\ndefault:\n       $(MAKE) -C $(KERNELDIR) M=$(PWD) modules\nendif\n</code></pre>\n\n<p>When I run <code>make</code> I've got the error </p>\n\n<blockquote>\n  <p>Makefile:10: *** missing separator.  Stop.</p>\n</blockquote>\n\n<p>I'm not found the cause of this issue, someone can help me with this one ?</p>\n"}, {"tags": ["c", "list", "sentinel"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1544017031, "post_id": 53633567, "comment_id": 94126544, "body": "Welcome to Stack Overflow. Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, take <a href=\"http://stackoverflow.com/tour\">the SO tour</a>, read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "reply_to_user": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544017098, "post_id": 53633567, "comment_id": 94126586, "body": "I cannot provide an example since it is not initalized :("}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "edited": false, "score": 0, "creation_date": 1544021411, "post_id": 53633929, "comment_id": 94129384, "body": "thank you very much, but can you explain me why you did       list-&gt;data = -1;  why set it to -1 ?"}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "reply_to_user": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "edited": false, "score": 0, "creation_date": 1544021483, "post_id": 53633929, "comment_id": 94129433, "body": "that was just a random value"}, {"owner": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "edited": false, "score": 0, "creation_date": 1544021752, "post_id": 53633929, "comment_id": 94129637, "body": "but then, what if in the list i have other values of -1 how do we know which one is the sentinel ? what is the point of using a sentinel"}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "reply_to_user": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "edited": false, "score": 0, "creation_date": 1544022448, "post_id": 53633929, "comment_id": 94130100, "body": "the int is not the sentinel, the next pointer is. The int is just useless for the first node"}, {"owner": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "edited": false, "score": 0, "creation_date": 1544022690, "post_id": 53633929, "comment_id": 94130258, "body": "i don&#39;t understand what actually is a &quot;sentinel&quot; ? it is a node ? what is its role"}, {"owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "reply_to_user": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "edited": false, "score": 0, "creation_date": 1544079403, "post_id": 53633929, "comment_id": 94150645, "body": "sentinel is a node with a special value which has no meaning to the program. Google &quot;sentinel C&quot;"}], "tags": [], "owner": {"reputation": 7937, "user_id": 1866300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dab16abeddf6aa51bb13e7fe06d70b2c?s=128&d=identicon&r=PG", "display_name": "Serve Laurijssen", "link": "https://stackoverflow.com/users/1866300/serve-laurijssen"}, "is_accepted": true, "score": 2, "last_activity_date": 1544017977, "creation_date": 1544017977, "answer_id": 53633929, "question_id": 53633567, "link": "https://stackoverflow.com/questions/53633567/c-using-sentinels-on-lists/53633929#53633929", "title": "C: using sentinels on lists", "body": "<p>A linked list node always has a next member</p>\n\n<pre><code>struct list\n{\n    int data;\n    struct list *next;\n};\n</code></pre>\n\n<p>When you create your sentinel you initialize next to NULL</p>\n\n<pre><code>void list_init(struct list *list)\n{\n    list-&gt;data = -1;\n    list-&gt;next = NULL;\n}\n\n\nstruct list *head = malloc(sizeof(struct list));\nlist_init(head);\n</code></pre>\n\n<p>Now the head has a next member of NULL so all you have to do is check if next equals NULL</p>\n\n<pre><code>int list_is_empty(struct list *list)\n{\n    if (list-&gt;next == NULL) return 1;\n\n    return 0;\n}\n</code></pre>\n\n<p>One you add one node head->next becomes NOT NULL and you will know the list is not empty. But you have to make sure that you always pass the head to the list_functions.</p>\n"}], "owner": {"reputation": 23, "user_id": 10749712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/826896dc3b7de588c01feb7c4736063c?s=128&d=identicon&r=PG&f=1", "display_name": "sltcv", "link": "https://stackoverflow.com/users/10749712/sltcv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 1, "accepted_answer_id": 53633929, "answer_count": 1, "score": 2, "last_activity_date": 1544017977, "creation_date": 1544016860, "question_id": 53633567, "link": "https://stackoverflow.com/questions/53633567/c-using-sentinels-on-lists", "title": "C: using sentinels on lists", "body": "<p>Hello so I am learning linked lists and I have to write several functions by using a sentinel. I have this definition: A sentinel is a fake element that is the first element of the list. An empty list is then a single sentinel and not a NULL pointer.</p>\n\n<p>I need initialise the sentinel of an empty list</p>\n\n<pre><code>void list_init(struct list *list);\n</code></pre>\n\n<p>and check if the list is empty (return true is empty)</p>\n\n<pre><code>int list_is_empty(struct list *list);\n</code></pre>\n\n<p>but I am completely lost, could you help me out, thanks!</p>\n"}, {"tags": ["c++", "c", "ffmpeg"], "comments": [{"owner": {"reputation": 805, "user_id": 10424245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0504daecf094f9efeb1e1cf6d231588?s=128&d=identicon&r=PG&f=1", "display_name": "Loufi", "link": "https://stackoverflow.com/users/10424245/loufi"}, "edited": false, "score": 0, "creation_date": 1544016979, "post_id": 53633552, "comment_id": 94126511, "body": "Is it C or C++ ?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1544017406, "post_id": 53633552, "comment_id": 94126775, "body": "Run it in a debugger, break it when its paused and look at the callstack. Its fairly likely this&#39;ll tell you what is happening and how to solve it."}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 805, "user_id": 10424245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0504daecf094f9efeb1e1cf6d231588?s=128&d=identicon&r=PG&f=1", "display_name": "Loufi", "link": "https://stackoverflow.com/users/10424245/loufi"}, "edited": false, "score": 0, "creation_date": 1544019580, "post_id": 53633552, "comment_id": 94128069, "body": "@Loufi Most of my code is C++"}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544020643, "post_id": 53633552, "comment_id": 94128846, "body": "@MikeVine I added a stack trace, I&#39;m looking over it, but it looks like its just waiting on the data? The weirdness is only my app has these interrupts with the link. Vlc and ffplay don&#39;t seem to have this issue."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544025592, "post_id": 53633552, "comment_id": 94132062, "body": "Well that pretty much definitely blocked on a network read. Is the file local? If not how good is your connection to the remote? What kinda of playlist are you playing? Is there DRM enabled? Use a packet monitoring tool (or even task manager) to see how much bandwidth its using. It may be trying to donwload the whole file at once before processing or somehting."}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1544025930, "post_id": 53633552, "comment_id": 94132268, "body": "@MikeVine Its coming from YouTube as in directly from them on a 200M connection. As I mentioned only my player shows this issue, ffplay doesn&#39;t seem to and neither does playing the video through the browser and I think thats what has me the most confused."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1544030649, "post_id": 53633552, "comment_id": 94134963, "body": "Might be better to ask on their mailing list instead?"}, {"owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "reply_to_user": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1544034546, "post_id": 53633552, "comment_id": 94136799, "body": "@Shark I did. Several days ago. I decided to cross post here since there were no responses there."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1544092187, "post_id": 53633552, "comment_id": 94156965, "body": "Good luck then :) best thing i can say is - cross reference the ffplay&#39;s code against your own, maybe you missed something or found a bug somewhere :/"}], "owner": {"reputation": 96, "user_id": 2824379, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/556f8836d390d20a1c67a0f1a1171863?s=128&d=identicon&r=PG&f=1", "display_name": "comwizz2", "link": "https://stackoverflow.com/users/2824379/comwizz2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544020562, "creation_date": 1544016818, "last_edit_date": 1544020562, "question_id": 53633552, "link": "https://stackoverflow.com/questions/53633552/ffmpeg-long-pause-in-av-read-frame", "title": "FFMPEG - Long pause in av_read_frame", "body": "<p>I am trying to write a service that converts a m3u8 link from youtube.</p>\n\n<p>I am loading the stream info then setting all but 1 video and 1 audio stream to AVDISCARD_ALL.</p>\n\n<p>Everything works fine except after several seconds of playing av_read_frame blocks for 30 seconds to a couple minutes.</p>\n\n<p>I'm not the best versed in ffmpeg so I'm not exactly sure what to do from here.\nExtracting one of these links into ffplay works fine it seems, but I don't see what they may be doing differently? I'm just hoping someone can point me in the right direction of anything to try.</p>\n\n<p>Attached is a callstack from when this is happening. I am not sure if anything here looks amiss.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3WYI6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3WYI6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "arrays", "structure"], "comments": [{"owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1544015889, "post_id": 53633128, "comment_id": 94125866, "body": "please show the typedef for list."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "edited": false, "score": 0, "creation_date": 1544016016, "post_id": 53633128, "comment_id": 94125942, "body": "@Mike: <code>list</code> is not a type, and the syntax error the compiler complains about comes at the <code>&amp;</code>, before <code>list</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544016127, "post_id": 53633128, "comment_id": 94125993, "body": "Technically, there is no question in your question. I deduce you are asking about the error message a compiler generates for the line <code>void hardcode(count, &amp;list[SIZE])</code>, but you should be clearer about asking a specific question."}, {"owner": {"reputation": 2238, "user_id": 3810510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65Qrj.jpg?s=128&g=1", "display_name": "Denis Sablukov", "link": "https://stackoverflow.com/users/3810510/denis-sablukov"}, "edited": false, "score": 0, "creation_date": 1544018696, "post_id": 53633128, "comment_id": 94127506, "body": "@Horyd you should add types to arguments there (at least): <code>void hardcode(count, &amp;list[SIZE]) </code>"}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 0, "creation_date": 1544019144, "post_id": 53633128, "comment_id": 94127790, "body": "What is <code>&amp;list[SIZE]</code> supposed to mean? Should this be <code>struct family *list[SIZE]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10749563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156865012719935/picture?type=large", "display_name": "Horyd", "link": "https://stackoverflow.com/users/10749563/horyd"}, "edited": false, "score": 0, "creation_date": 1544021730, "post_id": 53633299, "comment_id": 94129621, "body": "Still confused...  my code:  &#39;typedef test { char fname[20]; char lname[20] } list[SIZE];&#39;   prototype delaration &#39;void hardcode (int count, struct test list[SIZE]; changed my function call to &#39;void hardcode (int counter, struct test list[SIZE]);&#39; still generates same error.."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1, "user_id": 10749563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156865012719935/picture?type=large", "display_name": "Horyd", "link": "https://stackoverflow.com/users/10749563/horyd"}, "edited": false, "score": 0, "creation_date": 1544021958, "post_id": 53633299, "comment_id": 94129769, "body": "@Horyd: Do not put types in the function call. Types go in the declaration; they are declaring what types the function takes. In the actual call, you supply values, not types."}, {"owner": {"reputation": 1, "user_id": 10749563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156865012719935/picture?type=large", "display_name": "Horyd", "link": "https://stackoverflow.com/users/10749563/horyd"}, "edited": false, "score": 0, "creation_date": 1544022579, "post_id": 53633299, "comment_id": 94130181, "body": "ok so the prototype is&lt;/br&gt;void hardcode (int counter, struct test list[SIZE]);     &lt;/br&gt;then the fuction and the function call is &lt;/br&gt;void hardcode(count, list[SIZE])"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1, "user_id": 10749563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156865012719935/picture?type=large", "display_name": "Horyd", "link": "https://stackoverflow.com/users/10749563/horyd"}, "edited": false, "score": 0, "creation_date": 1544022923, "post_id": 53633299, "comment_id": 94130397, "body": "@Horyd: No, the function call would be <code>hardcode(count, list)</code>. You do not put the <code>void</code> before the function when calling it; that is for a declaration. Similarly, <code>[SIZE]</code> is used in a declaration to specify the size of an array. In an expression, it does not specify the size; it indexes the array to get a single element. You do not want a single element; you want the entire array (which will be converted to a pointer to its first element for the call)."}, {"owner": {"reputation": 1, "user_id": 10749563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156865012719935/picture?type=large", "display_name": "Horyd", "link": "https://stackoverflow.com/users/10749563/horyd"}, "edited": false, "score": 0, "creation_date": 1544023967, "post_id": 53633299, "comment_id": 94131046, "body": "Thanks for your help so far!  I think im getting closer.  now getting a &quot;conflicting type for &#39;hardcode&#39;...     The prototype is: void hardcode (int count, struct test list[]);  my new function is: void hardcode(count, list), and the call is hardcode(count, list)..."}, {"owner": {"reputation": 1, "user_id": 10749563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156865012719935/picture?type=large", "display_name": "Horyd", "link": "https://stackoverflow.com/users/10749563/horyd"}, "edited": false, "score": 0, "creation_date": 1544025820, "post_id": 53633299, "comment_id": 94132197, "body": "Im getting another error, that i think is linked to the conflicting error I mention above... Not only am I getting a conflicting type for the function, but I&#39;m getting a subscripted value is not an array, pointer, or vector when I use the array in the function.. for example: printf(&quot;last name: %s\\n&quot;, list[i].fname);"}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": false, "score": 1, "last_activity_date": 1544016974, "last_edit_date": 1544016974, "creation_date": 1544015979, "answer_id": 53633299, "question_id": 53633128, "link": "https://stackoverflow.com/questions/53633128/define-variable-with-a-structure-member/53633299#53633299", "title": "define variable with a structure member", "body": "<p><code>void hardcode(count, &amp;list[SIZE])</code> is not a valid declaration in C for two reasons:</p>\n\n<ul>\n<li><p>You must specify the types of the parameters, such as <code>void hardcode(int count, struct test list[SIZE])</code>. (Notice the insertion of <code>int</code> for <code>count</code> and <code>struct test</code> for <code>list</code>.)</p></li>\n<li><p>C does not have built-in references; you cannot use <code>&amp;</code> to describe the type of a a parameter. When you are passing an array, it will automatically be converted to a pointer to its first element, and that serves as a reference to the array. So you can simply declare the function as above. (Although <code>struct test list[SIZE]</code> declares an array, when it is a function parameter, it is automatically adjusted to have the type of a pointer to an element of the array. So passing an array argument actually passes a pointer, and receiving an array parameter actually receives a pointer.)</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 10749563, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156865012719935/picture?type=large", "display_name": "Horyd", "link": "https://stackoverflow.com/users/10749563/horyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544019270, "creation_date": 1544015431, "last_edit_date": 1544019270, "question_id": 53633128, "link": "https://stackoverflow.com/questions/53633128/define-variable-with-a-structure-member", "title": "define variable with a structure member", "body": "<p>I'm a beginner, taking a class.  Knowledge level = very minimal.  </p>\n\n<blockquote>\n  <p>Error is expedected identifier or '(' at the l of list[0] (and list[1] etc..</p>\n</blockquote>\n\n<pre><code>void hardcode(count, &amp;list[SIZE]) \n{\n    struct family list1 = { \"test\", \"case\", 'F', '1', '1', '1', 2500, 2000 };\n    list[0] = list1;\n    struct family list2 = { \"test2\", \"case2\",'M', '4', '4', '2', 5000,1970 };\n    list[1] = list2; \n}\n</code></pre>\n\n<p>I have declared the structure in my <code>main()</code>.. <code>struct test list[SIZE]</code>, then called this function passing it a counter, and the structure.</p>\n"}, {"tags": ["c++", "c", "arrays", "pointers", "types"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1544015521, "post_id": 53633122, "comment_id": 94125642, "body": "Maybe <a href=\"https://cdecl.org/?q=int+%2Ap%5B%5D\" rel=\"nofollow noreferrer\">this site</a> helps. The book is wrong by the way, <code>p</code> is not a pointer."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1544016342, "post_id": 53633122, "comment_id": 94126119, "body": "@nwp: <code>p</code> is a pointer if this declaration occurs in a function parameter. But then the book is wrong in a different way; <code>p</code> is then a pointer to a pointer (which may be the first of an array of pointers)."}, {"owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "edited": false, "score": 0, "creation_date": 1544017276, "post_id": 53633122, "comment_id": 94126693, "body": "When the <code>[]</code> are used as a function parameter, they are absolutely the same as a <code>*</code>: <code>void display_array(int *q[])</code> is the same as <code>void display_array(int **q)</code>; <code>int main(int argc, char **argv)</code> is the same as <code>int main(int argc, char *argv[])</code>; <code>void foo(int a[])</code> is the same as <code>void foo(int *a)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1544015673, "post_id": 53633168, "comment_id": 94125743, "body": "I&#39;m sorry but <a href=\"https://en.cppreference.com/w/cpp/language/array#Arrays_of_unknown_bound\" rel=\"nofollow noreferrer\">C++ has a dark corner to offer</a> yet again :)"}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1544015870, "post_id": 53633168, "comment_id": 94125859, "body": "@Quentin The big point there is that unbounded arrays are <i>incomplete</i>. You can have <i>declarations</i> using them, but you can&#39;t <i>define</i> an array without the size."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544016603, "post_id": 53633168, "comment_id": 94126293, "body": "Re \u201cArrays must have a size\u201d: Well, maybe somewhere, but not necessarily inside a translation unit. You can even use the contents of an object with incomplete type: <code>extern int *p[]; int foo(void) { return *p[3]; }</code> is strictly conforming C and compiles without complaint."}], "tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1544019092, "last_edit_date": 1544019092, "creation_date": 1544015589, "answer_id": 53633168, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53633168#53633168", "title": "ELI5: What is the data type of `int *p[]`", "body": "<blockquote>\n  <p>... pointer to an array of pointers to integers</p>\n</blockquote>\n\n<p>No it's not. <code>q</code> is the type <code>int *[]</code>. Which is an invalid (or possibly incomplete, depending on context) type in C++, and only valid in some places in C. Arrays must have a size.</p>\n\n<p>The type <code>int *[]</code> is an (unsized) array of pointers to <code>int</code>. It is itself not a pointer.</p>\n\n<hr>\n\n<p>The confusion probably comes from the fact that an array can <em>decay</em> to a pointer to its first element.</p>\n\n<p>For example, lets say we have this array:</p>\n\n<pre><code>int a[20];\n</code></pre>\n\n<p>When plain <code>a</code> is used, it decays to a pointer to its first element: <code>a</code> is equal to <code>&amp;a[0]</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1544018170, "post_id": 53633222, "comment_id": 94127202, "body": "What you are failing to mention is that you <i>can&#39;t</i> declare an array with empty size. Apart from a few special cases."}], "tags": [], "owner": {"reputation": 3183, "user_id": 3063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94037fcc56672e711673c00feba9d62a?s=128&d=identicon&r=PG", "display_name": "palotasb", "link": "https://stackoverflow.com/users/3063/palotasb"}, "is_accepted": true, "score": 3, "last_activity_date": 1544015731, "creation_date": 1544015731, "answer_id": 53633222, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53633222#53633222", "title": "ELI5: What is the data type of `int *p[]`", "body": "<p>This is how it's built up:</p>\n\n<ul>\n<li><code>int</code> is the <em>type</em> \"int\".</li>\n<li><code>int*</code> is the <em>type</em> \"pointer to int\"</li>\n<li><code>int* []</code> is the <em>type</em> \"array (of unknown bound/length) of pointer to int\"</li>\n<li><code>int* p[]</code> is the <em>declaration</em> of a variable or parameter named <em>p</em> of the type above.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 97942, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 2, "last_activity_date": 1544015982, "creation_date": 1544015982, "answer_id": 53633303, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53633303#53633303", "title": "ELI5: What is the data type of `int *p[]`", "body": "<pre><code>   int *p[]\n//      ^\n</code></pre>\n\n<p><strong>p</strong> is</p>\n\n<pre><code>   int *p[]\n//       ^^\n</code></pre>\n\n<p>p is <strong>an array of unspecified size</strong> <em>(possibly illegal, depends on context)</em></p>\n\n<pre><code>   int *p[]\n// ^^^^^\n</code></pre>\n\n<p>p is an array of unspecified size of <strong>pointers to int</strong></p>\n\n<p>Meaning each element of <code>p</code> is a pointer:</p>\n\n<pre><code>int foobar = 42;\np[0] = NULL;\np[1] = &amp;foobar;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 1, "creation_date": 1544024070, "post_id": 53634179, "comment_id": 94131118, "body": "@DavidBowling Sadly, it&#39;s a well-known term that was invented many decades ago. And yet here we are, still suffering from these books."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 2, "last_activity_date": 1544018863, "creation_date": 1544018863, "answer_id": 53634179, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p/53634179#53634179", "title": "ELI5: What is the data type of `int *p[]`", "body": "<blockquote>\n  <p>I don't understand what the datatype of this is</p>\n</blockquote>\n\n<p>If it's any comfort, neither does the author of the book you are reading.</p>\n\n<blockquote>\n  <p>Remember, q is not a pointer to integers, but rather a pointer to an array of pointers to integers. </p>\n</blockquote>\n\n<p>This is <a href=\"http://catb.org/jargon/html/B/bullschildt.html\" rel=\"nofollow noreferrer\">bullschildt</a>. </p>\n\n<ul>\n<li><em>Before</em> adjustment of parameters, <code>q</code> is an array of pointers to integers.</li>\n<li><em>After</em> adjustment of parameters, <code>q</code> is a pointer to the first element of an array of pointers to integers. Equivalent to <code>int** q</code>, a pointer to pointer to an <code>int</code>.</li>\n</ul>\n\n<p>Nowhere is it \"a pointer to an array of pointers to integers\". That would have been  <code>int* (*q)[]</code>.</p>\n\n<p>I would advise to stop reading that book.</p>\n\n<p>The key here is that any array that is part of a parameter list of a function, gets adjusted (\"decays\") into a pointer to the first element. So it doesn't matter if you type <code>int* q[666]</code> or <code>int* q[]</code>, either will be silently replaced by the compiler with <code>int**</code> \"behind the lines\".</p>\n\n<p>This is actually the reason why we can write <code>[]</code> in a parameter list - normally an empty array would be an incomplete type that can't be used before completion elsewhere. But since parameters always get adjusted, they are never of array type, and it doesn't matter that the original type was incomplete.</p>\n"}], "owner": {"reputation": 113, "user_id": 5864207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e0tZi1RE1wY/AAAAAAAAAAI/AAAAAAAAA34/OyxqKUpcWPQ/photo.jpg?sz=128", "display_name": "Abhyas29", "link": "https://stackoverflow.com/users/5864207/abhyas29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 53633222, "answer_count": 4, "score": 2, "last_activity_date": 1544019092, "creation_date": 1544015419, "last_edit_date": 1544016723, "question_id": 53633122, "link": "https://stackoverflow.com/questions/53633122/eli5-what-is-the-data-type-of-int-p", "title": "ELI5: What is the data type of `int *p[]`", "body": "<p>I don't understand what the datatype of this is. If its a pointer or an array. Please explain in simple terms. To quote what was in the book-</p>\n\n<blockquote>\n  <p>If you want to pass an array of pointers into a function, you can use the same method that you use to pass other arrays\u2014simply call the function with the array name without any indexes. For example, a function that can receive array x looks like this:</p>\n</blockquote>\n\n<pre><code>void display_array(int *q[])\n{\n  int t;\n  for(t=0; t&lt;10; t++)\n    printf(\"%d \", *q[t]);\n}\n</code></pre>\n\n<blockquote>\n  <p>Remember, q is not a pointer to integers, but rather a pointer to an array of pointers to\n  integers. Therefore you need to declare the parameter q as an array of integer pointers,\n  as just shown. You cannot declare q simply as an integer pointer because that is not\n  what it is.</p>\n</blockquote>\n\n<p>cite: C++: The Complete Reference, 4th Edition by Herbert Schildt, Page 122-123</p>\n"}, {"tags": ["python", "c", "python-c-api"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9034714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a456125239c8af5136491b19adfca65d?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastien M", "link": "https://stackoverflow.com/users/9034714/sebastien-m"}, "edited": false, "score": 0, "creation_date": 1544017704, "post_id": 53633272, "comment_id": 94126941, "body": "Ok, then i&#39;ll follow this way."}], "tags": [], "owner": {"reputation": 90691, "user_id": 51685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vVhK5.jpg?s=128&g=1", "display_name": "AKX", "link": "https://stackoverflow.com/users/51685/akx"}, "is_accepted": false, "score": 0, "last_activity_date": 1544015888, "creation_date": 1544015888, "answer_id": 53633272, "question_id": 53633102, "link": "https://stackoverflow.com/questions/53633102/python-convert-pyint-into-c-int/53633272#53633272", "title": "Python - Convert PyInt into C int", "body": "<p>Simply said: no, that's the way to go about it. There is no separate <code>PyInt_AsInt</code> function.</p>\n"}], "owner": {"reputation": 21, "user_id": 9034714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a456125239c8af5136491b19adfca65d?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastien M", "link": "https://stackoverflow.com/users/9034714/sebastien-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1508, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544015888, "creation_date": 1544015364, "question_id": 53633102, "link": "https://stackoverflow.com/questions/53633102/python-convert-pyint-into-c-int", "title": "Python - Convert PyInt into C int", "body": "<p>i'm currently facing a problem when trying to retrieve the value returned by my python code.</p>\n\n<p>A draft of my code is : </p>\n\n<pre><code># I call a function that returns a PyObject\nPyObject* pyObj_val = call_binding(...);\n\n# This PyObject seems to be a PyInt as PyInt_Check returns 1\nassert(PyInt_Check(pyObj_val) == 1);\n\n# Now the only way i found to convert this PyInt to a [C] int is:\nint my_val = (int) PyInt_AsLong(pyObj_val);\n</code></pre>\n\n<p>I suppose there is a way to perform this without going through a long convertion and int cast. Does anyone know about it ?</p>\n\n<p>Thanks for considering my request.</p>\n"}, {"tags": ["c", "asn.1", "ss7", "asn1"], "answers": [{"tags": [], "owner": {"reputation": 911, "user_id": 2315085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/coGrM.jpg?s=128&g=1", "display_name": "Vasil Velichkov", "link": "https://stackoverflow.com/users/2315085/vasil-velichkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1544025408, "creation_date": 1544025408, "answer_id": 53636134, "question_id": 53632962, "link": "https://stackoverflow.com/questions/53632962/problem-in-compiling-c-code-generated-by-osmocom-asn1c/53636134#53636134", "title": "Problem in compiling C code generated by osmocom asn1c", "body": "<p>You have several options:</p>\n\n<ol>\n<li><p>Use a <a href=\"https://github.com/vlm/asn1c/pull/295\" rel=\"nofollow noreferrer\">newer version of asn1c from this PR</a>  (still not merged)</p></li>\n<li><p>Copy the <a href=\"http://git.osmocom.org/libosmo-asn1-tcap/tree/include/EXTERNAL.h\" rel=\"nofollow noreferrer\">EXTERNAL.h</a> from the osmocom repository </p></li>\n<li><p>Rename <code>EXTERNAL</code> to <code>EXTERNALt</code> in all asn files and add the following in the asn files that has EXTERNALt.</p>\n\n<pre><code>--\n-- From \"ITU-T Recommendation X.208\", \"34 The external type\"\n--\nEXTERNALt ::= [UNIVERSAL 8] IMPLICIT SEQUENCE\n{direct-reference OBJECT IDENTIFIER OPTIONAL,\n    indirect-reference INTEGER OPTIONAL,\n    data-value-descriptor ObjectDescriptor OPTIONAL,\n    encoding CHOICE\n    {single-ASN1-type [0] ANY,\n        octet-aligned [1] IMPLICIT OCTET STRING,\n        arbitrary [2] IMPLICIT BIT STRING}}\n</code></pre>\n\n<p>Or add it in a separate asn file and import where needed.</p></li>\n</ol>\n"}], "owner": {"reputation": 351, "user_id": 6148781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zygn2.png?s=128&g=1", "display_name": "Abolfazl Diyanat", "link": "https://stackoverflow.com/users/6148781/abolfazl-diyanat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 53636134, "answer_count": 1, "score": 2, "last_activity_date": 1544025408, "creation_date": 1544014884, "last_edit_date": 1544015303, "question_id": 53632962, "link": "https://stackoverflow.com/questions/53632962/problem-in-compiling-c-code-generated-by-osmocom-asn1c", "title": "Problem in compiling C code generated by osmocom asn1c", "body": "<p>I have installed the <a href=\"https://github.com/osmocom/asn1c/tree/aper-prefix\" rel=\"nofollow noreferrer\">osmocom asn1c compiler</a>, the <code>aper-prefix</code> branch, to obtain an implementation of the TCAP protocol.\nI have used the <a href=\"http://git.osmocom.org/libosmo-asn1-tcap/tree/src/rebuild-from-asn.sh\" rel=\"nofollow noreferrer\">respective script</a> to compile the \".asn\" files.\nThe C files are generated successfully, but when compiling the obtained C code, an error is raised, which is related to this line of code:</p>\n\n<pre><code>#include &lt;EXTERNAL.h&gt;\n</code></pre>\n\n<p>In fact, the file EXTERNAL.h is missing (seemingly, the EXTERNAL type is not supported by this compiler). \nIs anyone aware of this problem and a possible solution?</p>\n"}, {"tags": ["c", "bit-manipulation", "operators"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 4, "creation_date": 1544014708, "post_id": 53632847, "comment_id": 94125137, "body": "Please look at &quot;operator precedence&quot; and pay attention to compiler warnings. The bitwise operators <code>&amp;</code> and <code>|</code> etc have a lower precendence than the relational or equality operators. so <code>i&amp;j &lt; k</code> is compiled as <code>i &amp; (j &lt; k)</code>."}, {"owner": {"reputation": 11, "user_id": 10667118, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I42XsYUF42Q/AAAAAAAAAAI/AAAAAAAAB8o/uJtWClwoV5U/photo.jpg?sz=128", "display_name": "Aditya Datta", "link": "https://stackoverflow.com/users/10667118/aditya-datta"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1544015245, "post_id": 53632847, "comment_id": 94125467, "body": "thanks for the help!"}], "answers": [{"tags": [], "owner": {"reputation": 610, "user_id": 8979940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmzYf.jpg?s=128&g=1", "display_name": "Omer Dagan", "link": "https://stackoverflow.com/users/8979940/omer-dagan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544086292, "creation_date": 1544086292, "answer_id": 53647663, "question_id": 53632847, "link": "https://stackoverflow.com/questions/53632847/bitwise-operators-wrong-output/53647663#53647663", "title": "Bitwise Operators wrong output", "body": "<p>I don't like putting complete answeres but since I had it solved i hope it can help you.<br>\nI broke it down so it will be easier to understand<br>\nwatch the shortened if statment <code>(condition) ? True_val : False_val</code></p>\n\n<pre><code>void calculate_the_maximum(int n, int k) {\n  int max_and = 0;\n  int max_or = 0;\n  int max_xor = 0;\n  int tOr, tAnd, tXor;\n  for (int i = 1; i &lt;= n ; i++)\n    for (int j = 1; j &lt;= n; j++) {\n        if ( i &lt;= j ) continue;\n        tAnd = (i &amp; j);\n        tOr = (i | j);\n        tXor = (i ^ j);\n\n        max_and = ((tAnd &gt; max_and) &amp;&amp; (tAnd &lt;k)) ? tAnd : max_and;\n        max_or = ((tOr &gt; max_or) &amp;&amp; (tOr &lt;k)) ? tOr : max_or;\n        max_xor = ((tXor &gt; max_xor) &amp;&amp; (tXor &lt; k)) ? tXor : max_xor;\n    }\n\n  printf(\"%d\\n%d\\n%d\", max_and, max_or, max_xor);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10667118, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I42XsYUF42Q/AAAAAAAAAAI/AAAAAAAAB8o/uJtWClwoV5U/photo.jpg?sz=128", "display_name": "Aditya Datta", "link": "https://stackoverflow.com/users/10667118/aditya-datta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544086292, "creation_date": 1544014513, "last_edit_date": 1544015283, "question_id": 53632847, "link": "https://stackoverflow.com/questions/53632847/bitwise-operators-wrong-output", "title": "Bitwise Operators wrong output", "body": "<p>Problem : <a href=\"https://www.hackerrank.com/challenges/bitwise-operators-in-c/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/bitwise-operators-in-c/problem</a></p>\n\n<p>I tried the problem using C but the output comes out to be </p>\n\n<pre><code>1\n5\n1\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>2\n3\n3\n</code></pre>\n\n<p>I cant find the fault in this code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n//Complete the following function.\n\n\nvoid calculate_the_maximum(int n, int k)\n{\n\n    int answer1=0;\n    int answer2=0;\n    int answer3=0;\n\n      for(int i=1;i&lt;n;i++)\n      {\n          for(int j=i+1; j&lt;=n;j++)\n          {\n              if((i&amp;j &gt;=answer1) &amp;&amp; (i&amp;j &lt; k))\n              {\n                  answer1 = (i&amp;j);\n              }\n\n              if((i|j &gt;=answer2) &amp;&amp; (i|j &lt; k))\n              {\n                  answer2 = (i|j);\n              }\n\n              if((i^j &gt;=answer3) &amp;&amp; (i^j &lt; k))\n              {\n                  answer3 = (i^j);\n              }\n          }\n      }\n\n    printf(\"%d\\n%d\\n%d\",answer1,answer2,answer3);\n}\n\n\nint main()\n{\n    int n, k;\n\n    scanf(\"%d %d\", &amp;n, &amp;k);\n    calculate_the_maximum(n, k);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "static", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1544014650, "post_id": 53632512, "comment_id": 94125109, "body": "I am not sure <code>static</code> in your question really means <code>static</code>. If you have a <code>static</code> pointer, you can easily make it point to a dynamically allocated chunk of memory at any time."}], "answers": [{"tags": [], "owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "is_accepted": true, "score": 2, "last_activity_date": 1544021203, "last_edit_date": 1544021203, "creation_date": 1544014964, "answer_id": 53632982, "question_id": 53632512, "link": "https://stackoverflow.com/questions/53632512/is-it-possible-to-intialise-a-static-variable-dynamically-in-c/53632982#53632982", "title": "Is it possible to intialise a static variable dynamically in c?", "body": "<p>Regarding your title question: <em>Is it possible to intialise a static variable dynamically in c?</em>  The answer is no.  Details of why below...  </p>\n\n<p>The answer to your next question:  </p>\n\n<p><em>\"So can we say that its not possible to initialize a static variable using dynamic memory allocation...\"</em>    </p>\n\n<p>is <em>yes, we can say that</em>,  because:</p>\n\n<pre><code>static int *array = calloc(5, sizeof(int)); \n</code></pre>\n\n<p>will fail to compile, as the initializer element is not a compile-time constant. </p>\n\n<p>The reason it will fail to compile is given in the <em><a href=\"https://port70.net/~nsz/c/c11/n1570.html#5.1.2\" rel=\"nofollow noreferrer\">C standard, N1570 paragraph 5.1.2</a></em> where it clearly states:</p>\n\n<blockquote>\n  <p>All objects with static storage duration shall be initialized (set to their\n  initial values) before program startup. </p>\n</blockquote>\n\n<p>However, dynamically allocating memory to a properly initialized <code>static</code> variable <em>is</em> legal:</p>\n\n<pre><code>static int *array = NULL; //properly initialized static pointer variable.\n...\narray = calloc(5, sizeof(int));// legal\n</code></pre>\n\n<p>Answers to your final question: <em>why the value of the static variable must be known before main starts running?</em></p>\n\n<p>can be derived from <em><a href=\"https://www.geeksforgeeks.org/static-variables-in-c/\" rel=\"nofollow noreferrer\">These statements...</a></em>   </p>\n\n<blockquote>\n  <p>1) Static variables have a property of preserving their value even after they are out of their scope!  Hence, static variables preserve their <strong><em>previous value</em></strong> in their <strong><em>previous scope</em></strong> and are not initialized again in the new scope. <em>[emphasis mine]</em></p>\n  \n  <p>2) Static variables are <strong><em>allocated memory in data segment, not stack segment</em></strong>. See memory layout of C programs for details.  <em>[emphasis mine]</em></p>\n  \n  <p>3) Static variables (like global variables) are initialized as 0 if not initialized explicitly. For example in the below program, value of x is printed as 0, while value of y is something garbage.<em>[see link for referenced program]</em> </p>\n</blockquote>\n\n<p>So, by definition, because variables with <em><a href=\"https://www.tutorialspoint.com/cprogramming/c_storage_classes.htm\" rel=\"nofollow noreferrer\">static storage scope</a></em> are required to keep a local variable in existence during the life-time of the program, it makes sense that a known value exist in that memory space during the onset of run-time. (When <code>main()</code> starts running.)</p>\n"}, {"tags": [], "owner": {"reputation": 3183, "user_id": 3063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94037fcc56672e711673c00feba9d62a?s=128&d=identicon&r=PG", "display_name": "palotasb", "link": "https://stackoverflow.com/users/3063/palotasb"}, "is_accepted": false, "score": 1, "last_activity_date": 1544015511, "creation_date": 1544015511, "answer_id": 53633150, "question_id": 53632512, "link": "https://stackoverflow.com/questions/53632512/is-it-possible-to-intialise-a-static-variable-dynamically-in-c/53633150#53633150", "title": "Is it possible to intialise a static variable dynamically in c?", "body": "<p>What you are referring to as <code>static</code> is <strong><em><a href=\"https://en.cppreference.com/w/c/language/static_storage_duration\" rel=\"nofollow noreferrer\">static storage duration.</a></em></strong>.</p>\n\n<p>Declaring a variable with static storage duration practically means that during linking, the linker will be the one allocating storage for the variable. When the linker is the one allocating storage, that means the variable will have a single address in the <code>.rodata</code> section (for constants) or the \u02d9.data\u02d9, or <code>.bss</code> section. </p>\n\n<p>The initial value of each static variable is written (hard-coded) in the executable and simply copied to the correct address by the loader before the <code>main()</code> function is called. This is mechanism is the reason these variables must be initialized by a constant value (or else they are zero-initialized).</p>\n"}], "owner": {"reputation": 78, "user_id": 10547235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92d457af2d1840f3eb953b92f57e663?s=128&d=identicon&r=PG&f=1", "display_name": "AnshulP10", "link": "https://stackoverflow.com/users/10547235/anshulp10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 1, "accepted_answer_id": 53632982, "answer_count": 2, "score": 2, "last_activity_date": 1544021203, "creation_date": 1544013397, "last_edit_date": 1544017537, "question_id": 53632512, "link": "https://stackoverflow.com/questions/53632512/is-it-possible-to-intialise-a-static-variable-dynamically-in-c", "title": "Is it possible to intialise a static variable dynamically in c?", "body": "<p>I know that a <strong>static variable</strong> must be initialized with a <strong>constant</strong> because the value of the static variable must be known before the program starts running.</p>\n\n<p>So can we say that <strong>its not possible to initialize a static variable using dynamic memory allocation</strong> as that means that the variable will be initialized while the program is running.</p>\n\n<p>Also can someone please explain why the value of the <strong>static variable</strong> must be known before main starts running? </p>\n"}, {"tags": ["c", "linux", "shell", "pipe", "fork"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1544011979, "post_id": 53631920, "comment_id": 94123525, "body": "What do you mean with &quot;nothing is returned&quot;?"}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1544012488, "post_id": 53631920, "comment_id": 94123783, "body": "Side notes: Is there any reason for the asymmetry after both forks? Once you close the file descriptor that you want to <code>dup</code> to, the other time not. And is there a reason why you don&#39;t close the pipe file descriptors in the parent process? And what is the reason to pass <code>0</code> as second parameter <code>int *status</code> to <code>waitpid</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 121127, "user_id": 388520, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dd7cc06b1b1c347e172c6ba532937173?s=128&d=identicon&r=PG", "display_name": "zwol", "link": "https://stackoverflow.com/users/388520/zwol"}, "is_accepted": true, "score": 1, "last_activity_date": 1544014950, "creation_date": 1544014950, "answer_id": 53632976, "question_id": 53631920, "link": "https://stackoverflow.com/questions/53631920/c-pipe-stdout-to-fork/53632976#53632976", "title": "C pipe stdout to fork", "body": "<p>You didn't clearly explain what this program was doing that you considered to be wrong.  However, when I run this program myself (after adding the appropriate headers -- in the future, please don't leave those out of your question), it hangs until I press control-C.  I'm going to assume that this is what you didn't want, and that what you <em>did</em> want is for it to print the output of <code>wc</code> and then exit.</p>\n\n<p>The program hangs because <code>fd1[1]</code> is still open in the parent process at the point when it calls <code>wait</code>.  <code>wc</code> will not receive an EOF indication until <em>all</em> of the file descriptors referring to the write side of the pipe are closed.  But the parent process is not going to close the write side of the pipe until both of its child processes exit, and <code>wc</code> is not going to exit until it gets an EOF, so you have a deadlock.</p>\n\n<p>You need to add <code>close(fd1[1])</code> on the parent side of the first <code>if</code>, immediately before <code>p2 = fork()</code>.  That is sufficient to clear the deadlock.  You <em>should</em> also add <code>close(fd1[0])</code> on the parent side of the <em>second</em> <code>if</code>, immediately before the <code>waitpid</code> calls.  And you should also check all operations for errors.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9876248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53632976, "answer_count": 1, "score": 0, "last_activity_date": 1544014950, "creation_date": 1544011499, "question_id": 53631920, "link": "https://stackoverflow.com/questions/53631920/c-pipe-stdout-to-fork", "title": "C pipe stdout to fork", "body": "<p>I am trying to write a C program that execute <code>ls | wc</code> using pipe and fork but I can't figure out what is wrong with my code. When I run the code below nothing is returned.</p>\n\n<pre><code>int main() {\n    pid_t p1, p2;\n    int fd1[2];\n\n    pipe(fd1);\n\n    p1 = fork();\n    if (p1 == 0) {\n        close(STDOUT_FILENO);\n        dup2(fd1[1], STDOUT_FILENO);\n        close(fd1[0]);\n        execlp(\"ls\", \"ls\", (char *)NULL);\n    } else {\n        p2 = fork();\n\n        if (p2 == 0) {\n            dup2(fd1[0], STDIN_FILENO);\n            close(fd1[0]);\n            close(fd1[1]);\n\n            execlp(\"wc\", \"wc\", (char *)NULL);\n        } else {\n            waitpid(p2, 0, WUNTRACED);\n            waitpid(p1, 0, WUNTRACED);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c", "caesar-cipher"], "comments": [{"owner": {"reputation": 5631, "user_id": 1198321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f792e733fbf4e4edd6d64842093b7691?s=128&d=identicon&r=PG", "display_name": "lxop", "link": "https://stackoverflow.com/users/1198321/lxop"}, "edited": false, "score": 1, "creation_date": 1544009318, "post_id": 53631158, "comment_id": 94121896, "body": "Are you sure the key is supposed to be <code>256 % (strlen (string) - 1)</code>, and not <code>(strlen (string) - 1) % 256</code>?"}, {"owner": {"reputation": 5631, "user_id": 1198321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f792e733fbf4e4edd6d64842093b7691?s=128&d=identicon&r=PG", "display_name": "lxop", "link": "https://stackoverflow.com/users/1198321/lxop"}, "edited": false, "score": 1, "creation_date": 1544009417, "post_id": 53631158, "comment_id": 94121962, "body": "In any case, your key calculation is definitely including the space when calculating the string length, because why wouldn&#39;t it? The space is a regular part of the string"}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1544009530, "post_id": 53631158, "comment_id": 94122034, "body": "A space is not lowercase - just saying (re your first paragraph above)."}, {"owner": {"reputation": 17446, "user_id": 311635, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0d4907cea9d97688aa7a5e722d742f71?s=128&d=identicon&r=PG", "display_name": "Rudi", "link": "https://stackoverflow.com/users/311635/rudi"}, "edited": false, "score": 0, "creation_date": 1544010124, "post_id": 53631158, "comment_id": 94122405, "body": "Just as a side note: check what your program does if you don&#39;t enter any text at all."}], "answers": [{"tags": [], "owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "is_accepted": true, "score": 1, "last_activity_date": 1544009820, "creation_date": 1544009820, "answer_id": 53631416, "question_id": 53631158, "link": "https://stackoverflow.com/questions/53631158/spaces-in-caesar-cipher-in-c/53631416#53631416", "title": "Spaces in caesar cipher in C", "body": "<p>You have to check for spaces manually in this case while calculating the key</p>\n\n<pre><code>int stringLength = 0;\n\nfor(int i=0;i&lt;strlen (string);i++){\n    if(string[i]!=' '){\n        stringLength++;\n    }\n}\n\nKey = 256 % (stringLength - 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1544424441, "creation_date": 1544424441, "answer_id": 53700714, "question_id": 53631158, "link": "https://stackoverflow.com/questions/53631158/spaces-in-caesar-cipher-in-c/53700714#53700714", "title": "Spaces in caesar cipher in C", "body": "<p>Of course, as you have written the code, the <code>key</code> is calculated as a function that depends on the original string length (<code>Key = 256 % (strlen (string) - 1);</code>)  Two things about this:</p>\n\n<ul>\n<li><p>Caesar cipher adds the key to each encrypted char <code>mod alphabet_size</code>, so if you encrypt letters, you always get a letter.  This means Key should be in <code>[0..alphabet_size-1]</code>  (this is not a requirement, but adding the key to the input char <strong>is</strong>, so be careful here).  In your case <code>alphabet_size</code> is 26, so better:</p>\n\n<pre><code>Key = some_value_input_from_the_user % alphabet_size;\n</code></pre></li>\n<li><p>Your key depends on the string length of the original input string, so if you insert spaces, you are changing the string length, and so, the key changes.  It is better to ask first for the key value, or pass it as a parameter. Don't overcomplicate things.</p></li>\n</ul>\n"}], "owner": {"reputation": 27, "user_id": 10748962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8pZ6IlcRXh8/AAAAAAAAAAI/AAAAAAAAADk/9PLndojIHTM/photo.jpg?sz=128", "display_name": "James Toaster", "link": "https://stackoverflow.com/users/10748962/james-toaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "accepted_answer_id": 53631416, "answer_count": 2, "score": 0, "last_activity_date": 1544424441, "creation_date": 1544008922, "last_edit_date": 1544011812, "question_id": 53631158, "link": "https://stackoverflow.com/questions/53631158/spaces-in-caesar-cipher-in-c", "title": "Spaces in caesar cipher in C", "body": "<p>This code must encrypt all lowercase letters and show error messages if the input is anything but lowercase. If <code>Key</code> is zero, then the input will be reversed.</p>\n\n<p>It works good, but when it comes to spaces, things are going wrong.</p>\n\n<p>What must appear:</p>\n\n<pre><code>plain text: notverysecure thiscaeserwas\n\nencrypted text: jkpranuoayqna pdeoywaoanswo\n</code></pre>\n\n<p>What appears:</p>\n\n<pre><code>plain text: notverysecure thiscaeserwas\n\nencrypted text: abgirelfrpher guvfpnrfrejnf\n</code></pre>\n\n<p>However if the input is: </p>\n\n<pre><code>plain text: notverysecurethiscaeserwas\n\nencrypted text: jkpranuoayqnapdeoywaoanswo\n</code></pre>\n\n<p>My guess is that the space is involved into calculation of <code>Key</code>, but my attempts to fix this are doing nothing. </p>\n\n<p>My question is how to make the code to read spaces in the input, but to not involve them into any kind of manipulation</p>\n\n<p>The code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;ctype.h&gt;\n//*******************************************************************\n// Function to reverse the input string\nvoid rev (const char *const c)\n{\nif (*c)\n{\n\n  rev (c + 1);\n  putchar (*c);\n\n }\n}\n//*******************************************************************\n\nint main (void)\n{\nchar string[350];\nint Key;\n\nprintf (\"plain text: \");\nfgets (string, sizeof (string), stdin);\nKey = 256 % (strlen (string) - 1);\n//***************************************************************\n//ERROR CHECK\n\nif (strlen (string) &gt; 256)\n {\n  printf (\"[ERR] too many characters\\n\");\n  return -1;\n}\n\n\nfor (int counter = 0; string[counter] != '\\n'; counter++)\n{\n\n  if ( !(islower (string[counter])) &amp;&amp; string[counter] != ' ')\n{\n  printf (\"[ERR] invalid characters\\n\");\n  return -2;\n}\n\n//**************************************************************\n\nint difference = 0, shift = 0;\nfor (int counter = 0; string[counter] != '\\0'; counter++)\n{\n\n  if (string[counter] &gt;= 'a' &amp;&amp; string[counter] &lt;= 'z') \n{\n\n\n  difference = 'z' - string[counter];\n\n  if (Key &gt; difference)\n    {\n      shift = Key - (difference + 1);\n      string[counter] = 'a';\n      string[counter] += shift;\n    }\n  else\n    {\n      string[counter] += Key;\n    }\n}\n}\nprintf (\"encrypted text: \");\n\nif (Key == 0)\n{\n      string[strlen(string) - 1] = '\\0';\n      string[-1] = '\\n';\n  rev (string);\n\n  return 0;\n}\nfor (int counter = 0; string[counter] != '\\0'; counter++)\n{\n  printf (\"%c\", string[counter]);\n}\n}\n</code></pre>\n"}, {"tags": ["c", "bin"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544009037, "post_id": 53631137, "comment_id": 94121721, "body": "<code>temp</code> is an <i>array</i> of <code>char</code>. Returning <code>temp</code> will return a pointer to its first element (because arrays naturally decays to that), i.e. you return <code>&amp;temp[0]</code>. That&#39;s not a valid <code>char</code>, which the compiler should have warned you about (if not then enable more warnings)."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1544009139, "post_id": 53631137, "comment_id": 94121779, "body": "Also, the solution is <i>not</i> to change the return type to <code>char *</code>, since the life-time of <code>temp</code> ends with the function. Then the pointer would immediately become invalid. You need to think of another way to &quot;return&quot; the string."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1544011859, "post_id": 53631137, "comment_id": 94123436, "body": "&quot;ACGTT -&gt; XXXXXX11 11100100 from right to left for A=0 C=1 G=2 T=3&quot; Maybe I&#39;m dense, but I don&#39;t understand a thing of this explanation. Is each letter corresponding to 2 bits? Also, why do you need binary strings instead of binary numbers?"}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 2, "last_activity_date": 1544014477, "creation_date": 1544014477, "answer_id": 53632840, "question_id": 53631137, "link": "https://stackoverflow.com/questions/53631137/c-compresing-dna-sequence-into-binary/53632840#53632840", "title": "C: Compresing DNA sequence into binary", "body": "<p>I take it that you want each letter (they are called nucleotide iirc?) to represent 2 binary digits.</p>\n\n<p>To begin with, <code>char temp[8]=\"XXXXXXXX\";</code> doesn't make sense because strings in C are null terminated and you don't allocate room for the null terminator, should be <code>[8+1]</code>. And you want 16 bits, not 8.</p>\n\n<p>Your function returns a <code>char</code> which is incorrect, you would need to return a whole array. Which has to be done through a parameter, since you can't return arrays in C. Not can you return a pointer to local data, so it would have been better to leave allocation to the caller. Anyway... scratch that function.</p>\n\n<p>In addition, it doesn't make much sense to convert this into a \"binary string\". It is better to convert it into a binary number, and then as needed, convert that number into a string.</p>\n\n<p>The conversion, included the \"backwards order\", could then be done like this:</p>\n\n<pre><code>uint16_t dna_to_bin (const char* str)\n{\n  uint16_t result = 0;\n  size_t i;\n\n  for(i=0; i&lt;16; i+=2)       // loop over bits in the resulting binary number\n  {\n    typedef enum             // local enum just for readability\n    {\n      A = 0,\n      C = 1,\n      G = 2,\n      T = 3,\n    } dna_t;\n    dna_t type=0;            // default is 0 if nothing to decode\n\n    if(*str != '\\0')         // keep decoding string until reaching the end\n    {\n      switch(*str)\n      {\n        case 'A':     type = A; break;\n        case 'C':     type = C; break;\n        case 'G':     type = G; break;\n        case 'T':     type = T; break;\n      }\n      str++;\n    }\n\n    result |= (uint16_t)type &lt;&lt; i; // store data at correct position in the result\n  }\n\n  return result;\n}\n</code></pre>\n\n<p>Full example including a function that prints binary and discards leading zeroes below. If you want to replace leading zeroes with X, it should be trivial to modify.</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;inttypes.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n\nuint16_t dna_to_bin (const char* str)\n{\n  uint16_t result = 0;\n  size_t i;\n\n  for(i=0; i&lt;16; i+=2)\n  {\n    typedef enum\n    {\n      A = 0,\n      C = 1,\n      G = 2,\n      T = 3,\n    } dna_t;\n    dna_t type=0;\n\n    if(*str != '\\0')\n    {\n      switch(*str)\n      {\n        case 'A':     type = A; break;\n        case 'C':     type = C; break;\n        case 'G':     type = G; break;\n        case 'T':     type = T; break;\n      }\n      str++;\n    }\n    result |= (uint16_t)type &lt;&lt; i;\n  }\n\n  return result;\n}\n\n\nvoid print_bin (uint16_t bin)\n{\n  bool remove_zeroes = true;\n\n  for(size_t i=0; i&lt;16; i++)\n  {\n    uint16_t mask = 1u &lt;&lt; (16-1-i);\n    uint16_t bit = bin &amp; mask;\n\n    if(bit == 0)\n    {\n      if(!remove_zeroes)\n      {\n        printf(\"0\");\n      }\n    }\n    else\n    {\n      remove_zeroes = false;\n      printf(\"1\");\n    }\n  }\n}\n\n\nint main (void)\n{\n  const char STR_DNA[] = \"ACGTT\";\n  uint16_t bin = dna_to_bin(STR_DNA);\n\n  puts(STR_DNA);\n  printf(\"Hex: %.4\"PRIX16 \"\\n\", bin);\n  printf(\"Bin: \");\n  print_bin(bin);\n\n  return (0);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ACGTT\nHex: 03E4\nBin: 1111100100\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8907173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0230105d14f1628f0d53d5a292e39604?s=128&d=identicon&r=PG&f=1", "display_name": "Wesix", "link": "https://stackoverflow.com/users/8907173/wesix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 53632840, "answer_count": 1, "score": -2, "last_activity_date": 1544014477, "creation_date": 1544008858, "question_id": 53631137, "link": "https://stackoverflow.com/questions/53631137/c-compresing-dna-sequence-into-binary", "title": "C: Compresing DNA sequence into binary", "body": "<p>Hi im trying to work out how to get a function to convert a DNA code into binary bits, need to make it look like this :ACGTT -> XXXXXX11 11100100 from right to left\nfor A=0 C=1 G=2 T=3. now i was thinking to do it by character and then moving it by >>2 out of function but i cant figure out the function itself...\ni tried like this and this way it returns NULL.</p>\n\n<pre><code>char CompressChar(char c){\nchar temp[8]=\"XXXXXXXX\";\nif (c=='A'){\n temp[7] = '0';\n temp[6] = '0';\n}\nif (c=='C'){\n    temp[7]='1';\n    temp[6]='0';\n}\nif(c=='G'){\n\n    temp[7]='0';\n    temp[6]='1';\n}\n\nif(c=='T'){\n   temp[7]='1';\n   temp[6]='1';\n}\nreturn temp;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c", "arrays", "function", "struct", "return"], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 0, "last_activity_date": 1544007370, "last_edit_date": 1544007370, "creation_date": 1544007048, "answer_id": 53630593, "question_id": 53630391, "link": "https://stackoverflow.com/questions/53630391/returning-structure-containing-int-array-from-structure-function/53630593#53630593", "title": "Returning structure containing int array from Structure Function", "body": "<p>Two problems.</p>\n\n<ol>\n<li>You cannot use <code>strlen</code> for <code>int</code> array.</li>\n<li><code>memcpy</code> needs number of bytes to be copied.</li>\n</ol>\n\n<p>Hence change </p>\n\n<pre><code> memcpy (result.output, input, sizeof(strlen(input)));\n</code></pre>\n\n<p>to </p>\n\n<pre><code>  memcpy (result.output, input, sizeof(input[0])*(length+1)); //length+1 since your passing array length-1\n</code></pre>\n\n<blockquote>\n  <p>Note: <code>sizeof(input)</code> is <code>sizeof(pointer)</code> when array is passed as parameter to function.</p>\n</blockquote>\n"}], "owner": {"reputation": 45, "user_id": 6916005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4206d7d30f5e51215ba86b7dc5a8c436?s=128&d=identicon&r=PG&f=1", "display_name": "Shubham Dalal", "link": "https://stackoverflow.com/users/6916005/shubham-dalal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53630593, "answer_count": 1, "score": 3, "last_activity_date": 1544007370, "creation_date": 1544006359, "question_id": 53630391, "link": "https://stackoverflow.com/questions/53630391/returning-structure-containing-int-array-from-structure-function", "title": "Returning structure containing int array from Structure Function", "body": "<p>main function is not printing same o/p as structure function Why?</p>\n\n<p>or </p>\n\n<p>memcpy is not copying whole array</p>\n\n<p>please help.</p>\n\n<p><strong>expected o/p</strong></p>\n\n<p><em>7 4 5 6 2</em></p>\n\n<p><em>7 4 5 6 2</em></p>\n\n<p>but</p>\n\n<p><strong>getting o/p</strong></p>\n\n<p><em>7 4 5 6 2</em></p>\n\n<p><em>7 4 garbage garbage garbage</em></p>\n\n<p>thanks in advance.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\nstruct Result {\n    int output[100];\n};\n\nstruct Result my(int length, int path, int input[]){\n    int temp=input[path-1];\n    for(int i=path-1; i&gt;0; --i){\n        input[i]=input[i-1];\n        }\n        input[0]=temp;\n\n        for (int i = 0; i &lt;= length; i++) {\n            printf(\" %d\",input[i]);\n        }\n\n        struct Result result;\n        memcpy (result.output, input, sizeof(strlen(input)));\n    return result;\n}\n\nint main(void){\n    int a[]={4,5,6,7,2};\n    struct Result res = my(4,4,a);\n\n    printf(\"\\n\");\n\n    for (int i = 0; i &lt;= 4; i++) {\n        printf(\" %d\",res.output[i]);\n    }\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c", "multidimensional-array", "strtod"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1544008055, "post_id": 53630097, "comment_id": 94121141, "body": "This mixture of German and English lets hurt my eyes. It&#39;s just like what I hear in Radio ads (before I switch it off). ;-)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1544008154, "post_id": 53630097, "comment_id": 94121188, "body": "I&#39;m not sure but if <code>strtod()</code> does not accept <code>1.50</code> then it might be a localization issue. To become sure about this you could try <code>1,50</code>. To improve your question, it would be nice if you could expose a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1544008590, "post_id": 53630097, "comment_id": 94121441, "body": "<code>strtod(getraenkeListe[getraenkeWahl-1][1], rueckgabewert=-1)</code> looks strange somehow. Please, have a look at <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtof\" rel=\"nofollow noreferrer\"><code>strtod()</code></a>. The 2nd parameter is <code>char**</code> which is dedicated to get an address of a <code>char*</code> to store the pointer to text position where parsing ended. No idea how <code>rueckgabewert=-1</code> could fit into this. (<a href=\"https://stackoverflow.com/a/4105123/1505939\">Undefined Behavior</a>?) (You may pass <code>nullptr</code> if you don&#39;t want to use it.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1544008777, "post_id": 53630097, "comment_id": 94121556, "body": "The error value of <code>strtod()</code> does not get lost. If the returned pointer in 2nd argument is just the begin of your text, it means, <code>strtod()</code> couldn&#39;t read anything. (In this case, the returned value of <code>strtod()</code> is 0.0 but more or less useless.)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1544009213, "post_id": 53630097, "comment_id": 94121831, "body": "Sorry for the <code>nullptr</code>. In C, it should be <code>NULL</code>, of course. (I forgot about the language tag.)"}], "owner": {"reputation": 1, "user_id": 10748715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hysXEi9rD7w/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hQCP9_v9zETrWCeFLot-QDHaQjsQ/mo/photo.jpg?sz=128", "display_name": "Ede&#39;s Mutter", "link": "https://stackoverflow.com/users/10748715/edes-mutter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544007677, "creation_date": 1544005517, "last_edit_date": 1544007677, "question_id": 53630097, "link": "https://stackoverflow.com/questions/53630097/how-to-handle-failure-value-in-strtod", "title": "how to handle failure value in strtod?", "body": "<p>i have a bit of code consisting of an equation that should substract a specific value in an multidimensional string array off of a double-variable and immediately write it back in the double-variable. It's for a uni-project and i tried searching for a solution here which led me strtod() but it doesn't seem to work.</p>\n\n<p><code>double einwurf;</code></p>\n\n<p><strong><em>User can only enter a positive value over 10 for einwurf (this section works)</em></strong></p>\n\n<p><strong><em>array</em></strong></p>\n\n<p><code>char *getraenkeListe[3][2]={\"Wasser\", \"1.20\", \"Cola\", \"1.50\", \"Kaffe\", \"1.50\"};</code></p>\n\n<p><strong><em>the equation is</em></strong></p>\n\n<p><code>einwurf=einwurf-strtod(getraenkeListe[getraenkeWahl-1][1], rueckgabewert=-1);</code></p>\n\n<p><strong><em>getraenkeWahl can only be 1, 2 or 3</em></strong></p>\n\n<p><strong><em>so getraenkeListe[getraenkeWahl-1][1] should give back 1.20 or 1.50</em></strong></p>\n\n<p><strong><em>In the example it stated NULL instead of rueckgabewert=-1, but i thought it's just the value it returns when it fails and if something fails in this project we should return a value of -1 so i swapped it out</em></strong></p>\n\n<p>is it just not possible to reassigne a variable within the strtod()-function? how do i get it in rueckgabewert without writing a new line so the error-value of strtod() won't get lost?</p>\n\n<p>thanks</p>\n"}, {"tags": ["c"], "answers": [{"comments": [{"owner": {"reputation": 648, "user_id": 5083784, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6dcd25741a5ad26bd8198ed0e081b75a?s=128&d=identicon&r=PG&f=1", "display_name": "sniper", "link": "https://stackoverflow.com/users/5083784/sniper"}, "edited": false, "score": 0, "creation_date": 1544009344, "post_id": 53630297, "comment_id": 94121913, "body": "My main query is given a box_t **, and size_t n, number of elements in it, how should I access it?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 648, "user_id": 5083784, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6dcd25741a5ad26bd8198ed0e081b75a?s=128&d=identicon&r=PG&f=1", "display_name": "sniper", "link": "https://stackoverflow.com/users/5083784/sniper"}, "edited": false, "score": 0, "creation_date": 1544009592, "post_id": 53630297, "comment_id": 94122065, "body": "@sniper As written in the answer, &quot;You can&#39;t use a <code>box_t**</code> to point at any array.&quot;. You can however use it to emulate a 2D array, but that&#39;s not the case here either. Just forget all about <code>box_t**</code>, it is the wrong tool for a different problem."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1544006122, "creation_date": 1544006122, "answer_id": 53630297, "question_id": 53630035, "link": "https://stackoverflow.com/questions/53630035/pointer-to-array-of-pointer-vs-pointer-to-an-array/53630297#53630297", "title": "Pointer to array of pointer vs pointer to an array", "body": "<p>Both cases are incorrect. You can't use a <code>box_t**</code> to point at any array. Nor can it point to an array of type <code>box_t boxarray[10]</code>, because they are incompatible types. There is no need for several levels of indirection anywhere in your code.</p>\n\n<p>You can however use a <code>box_t*</code> to point at the first element in an array, and that's what your code does here: <code>*box_bundle = boxarray;</code>. But in an obfuscated way.</p>\n\n<p>Correct code should be: <code>box_t* box_bundle;</code>. If it should point at the original array, there is no need for malloc. If it should hold a copy of the original array, you need to alloc and copy the data: </p>\n\n<pre><code>box_t* box_bundle = malloc (sizeof(*box_bundle)*10);\nmemcpy(box_bundle, boxarray, sizeof boxarray);\n</code></pre>\n"}], "owner": {"reputation": 648, "user_id": 5083784, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6dcd25741a5ad26bd8198ed0e081b75a?s=128&d=identicon&r=PG&f=1", "display_name": "sniper", "link": "https://stackoverflow.com/users/5083784/sniper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1544006122, "creation_date": 1544005333, "question_id": 53630035, "link": "https://stackoverflow.com/questions/53630035/pointer-to-array-of-pointer-vs-pointer-to-an-array", "title": "Pointer to array of pointer vs pointer to an array", "body": "<p>I have been given a .o file which creates a box_t ** and I have to use it.\nNow, I don't know if it is \n<strong>case 1:</strong><br>\nan pointer to an array of box_t or<br>\n<strong>case 2:</strong><br>\nan pointer to an array of box_t *</p>\n\n<p>I wrote a simple code myself in creating box_t** in both the ways and accessed differently. It seems to be working fine in both the cases. \nNow, given a box_t **, and size_t n, number of elements in it, is it possible to know if it is case 1 or case 2 without any further information. </p>\n\n<pre><code>struct box_tag{\n    int pencils;\n    int pens;\n};\n\ntypedef struct box_tag box_t;\n\nbox_t boxarray[10] = {{1,2},{3,4},\n         {5,6},{7,8},\n         {9,10},{11,12},\n         {13,14},{15,16},\n         {17,18},{19,20}};\n\nbox_t ** box_bundle;\n</code></pre>\n\n<p><strong>Creation Version1:</strong></p>\n\n<pre><code>box_t** create_dp(void)\n{\n  box_bundle = (box_t **)malloc(sizeof(box_t **));\n  *box_bundle = boxarray;\n}\n</code></pre>\n\n<p><strong>Accessing Version 1:</strong></p>\n\n<pre><code>int main ()\n{\n  box_t * tmp = *box_bundle;\n\n  for (int i =0; i&lt;10; i++)\n    {\n      printf(\"%d\\n\",tmp[i].pencils);\n    }\n\n  return 0;\n}\n</code></pre>\n\n<p><strong>Creation Version 2:</strong></p>\n\n<pre><code>box_t** create_dp (void)\n{\n  box_bundle = (box_t **)malloc(sizeof(box_t **));\n  *box_bundle = (box_t *)malloc (sizeof(box_t *) * 10);\n\n  for(int i=0; i&lt;10;i++)\n    {\n      *(box_bundle +i )  = &amp;boxarray[i];\n    }\n}\n</code></pre>\n\n<p><strong>Accessing Version 2:</strong></p>\n\n<pre><code>int main ()\n{\n  create_dp();\n\n  for(int i=0; i&lt;10; i++)\n    {\n      box_t * tmp =*box_bundle++;\n      printf(\"pencils %d \\n\", tmp-&gt;pencils);\n    }\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1544005213, "post_id": 53629973, "comment_id": 94119452, "body": "What do you mean how?"}, {"owner": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1544005318, "post_id": 53629973, "comment_id": 94119515, "body": "Look at this: <a href=\"https://en.wikipedia.org/wiki/Comma_operator\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Comma_operator</a> It&#39;s an operator not often used because it can lead to confusing code. The for loop is the most common place where you can find it."}, {"owner": {"reputation": 56, "user_id": 5123084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOj4q.jpg?s=128&g=1", "display_name": "crappyprog", "link": "https://stackoverflow.com/users/5123084/crappyprog"}, "edited": false, "score": 0, "creation_date": 1544005727, "post_id": 53629973, "comment_id": 94119751, "body": "the &quot;how&quot; is as in how does the compiler process this, what are the brackets ( ) actually doing here"}, {"owner": {"reputation": 56, "user_id": 5123084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOj4q.jpg?s=128&g=1", "display_name": "crappyprog", "link": "https://stackoverflow.com/users/5123084/crappyprog"}, "reply_to_user": {"reputation": 765, "user_id": 10143388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e95f5ed267f8601015469bc5617750a?s=128&d=identicon&r=PG&f=1", "display_name": "A.R.C.", "link": "https://stackoverflow.com/users/10143388/a-r-c"}, "edited": false, "score": 0, "creation_date": 1544005882, "post_id": 53629973, "comment_id": 94119840, "body": "thanks a lot @A.R.C. it all makes sense now. It was my first time seeing this syntax outside of a for loop."}], "answers": [{"tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": true, "score": 4, "last_activity_date": 1544005516, "creation_date": 1544005516, "answer_id": 53630096, "question_id": 53629973, "link": "https://stackoverflow.com/questions/53629973/value-assignment-in-c/53630096#53630096", "title": "Value Assignment in C", "body": "<p>See <a href=\"https://stackoverflow.com/questions/52550/what-does-the-comma-operator-do\">What does the comma operator , do?</a></p>\n\n<p>After understanding how the comma operator works, we can tell that this code is equivalent to:</p>\n\n<pre><code>int a,b=5;\nb++;\n++b;\nb*4; // nonsense, the result isn't stored anywhere\na=b-3;\nprintf(\"%d\",a);\n</code></pre>\n\n<p>5 + 1 + 1 - 3 = 4. The <code>b*4</code> part does nothing and is just obfuscation.</p>\n"}, {"comments": [{"owner": {"reputation": 56, "user_id": 5123084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOj4q.jpg?s=128&g=1", "display_name": "crappyprog", "link": "https://stackoverflow.com/users/5123084/crappyprog"}, "edited": false, "score": 0, "creation_date": 1544006778, "post_id": 53630176, "comment_id": 94120377, "body": "Thanks a lot for explaining both the usages. I was missing this and was having a really hard time trying to figure out what was happening."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1544072928, "last_edit_date": 1544072928, "creation_date": 1544005715, "answer_id": 53630176, "question_id": 53629973, "link": "https://stackoverflow.com/questions/53629973/value-assignment-in-c/53630176#53630176", "title": "Value Assignment in C", "body": "<p><strong>comma</strong> acts both as a separator (in declaration of variables) and operator (evaluation of expressions).</p>\n\n<p>In this case, comma acts as an operator. The comma operator introduces a sequence point between expressions.</p>\n\n<blockquote>\n  <p>The left operand of a comma operator is evaluated as a void expression; there is a sequence point between its evaluation and that of the right operand. Then the right operand is evaluated; the result has its type and value.</p>\n</blockquote>\n\n<p>So your code is:    </p>\n\n<pre><code>a = (b++, ++b, b*4, b-3);\n</code></pre>\n\n<p>Which is as if you had written this:  </p>\n\n<pre><code>a = (5, 7, 28, 4);\n</code></pre>\n\n<p>So <code>a</code> is 4.</p>\n"}], "owner": {"reputation": 56, "user_id": 5123084, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jOj4q.jpg?s=128&g=1", "display_name": "crappyprog", "link": "https://stackoverflow.com/users/5123084/crappyprog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 53630096, "answer_count": 2, "score": -1, "last_activity_date": 1544072928, "creation_date": 1544005143, "question_id": 53629973, "link": "https://stackoverflow.com/questions/53629973/value-assignment-in-c", "title": "Value Assignment in C", "body": "<p>I came across this question and expected it to show up as a compile time error but to my surprise each statement separated by comma is executed and the final value is assigned to the variable.</p>\n\n<pre><code>int a,b=5;\na=(b++,++b,b*4,b-3);\nprintf(\"%d\",a);\n\nOutput is 4\n</code></pre>\n\n<p>This output is exactly what should be the printed when each of those comma separated statements are executed separately. What I am not understanding is how and why does C allow this and how does compiler process this.  </p>\n"}, {"tags": ["c", "macos", "permissions", "acl"], "comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544016855, "post_id": 53629596, "comment_id": 94126441, "body": "At the command-line, type \u201cman acl\u201d to see the manual page for the ACL routines. Somebody more conversant than I with them might answer further, but that could get you started. There are several routines to get ACLs from file system objects and a routine named <code>acl_to_text</code> that seems like it might be very helpful in generating the text to describe ACLs."}], "owner": {"reputation": 61, "user_id": 10687367, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7XzCqBXtZpw/AAAAAAAAAAI/AAAAAAAAABM/iS6JWwLuDs0/photo.jpg?sz=128", "display_name": "sorasenpai", "link": "https://stackoverflow.com/users/10687367/sorasenpai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1581680260, "creation_date": 1544004020, "last_edit_date": 1544006315, "question_id": 53629596, "link": "https://stackoverflow.com/questions/53629596/mac-os-print-the-access-control-list-acl-in-c", "title": "Mac os: Print the Access Control List (ACL) in C", "body": "<p>I want to print ACL text like the on in \"ls\" command, but I have no idea how to get these permissions, any lead?</p>\n\n<p><a href=\"https://i.stack.imgur.com/7ntKK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7ntKK.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c", "sockets", "udp", "broadcast", "fifo"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1544024582, "post_id": 53629410, "comment_id": 94131411, "body": "It not clear exactly what it happening.  Are you saying that if 10 packets get sent while you&#39;re sleeping that you&#39;ll read 10 packets?  That&#39;s to be expected, as the OS has a buffer for received packets so a small delay doesn&#39;t result in dropped packets.  Are you only interested in the most recent?"}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1544029373, "post_id": 53629410, "comment_id": 94134256, "body": "Given the code you posted above, I don&#39;t see that you would ever execute <code>sleep</code>. You set <code>g=0</code>. Then, in the loop, you have the statement: <code>if(g==10)</code> which guards your <code>sleep</code>. But <code>g</code> never gets modified so that block will never be entered."}, {"owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1544029539, "post_id": 53629410, "comment_id": 94134363, "body": "In any case, there is no way you will get more than one datagram from a single <code>recvfrom</code> with UDP. So it isn&#39;t clear what you mean by &quot;10 stream in 1&quot;. It <i>is</i> quite possible, as @dbush said, that you could receive 10 separate queued datagrams in short order if you had been sleeping while they arrived."}, {"owner": {"reputation": 147, "user_id": 6180869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acadef5bcec74c11f44af5a79ccda4f6?s=128&d=identicon&r=PG&f=1", "display_name": "HacHac", "link": "https://stackoverflow.com/users/6180869/hachac"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1544082771, "post_id": 53629410, "comment_id": 94151969, "body": "@dbush That&#39;s exaclty what happened ! And yes i don&#39;t want to read packet sent during the sleep time, only the most recent ... i have no idea the linux OS has a small buffer, how do i get only the last one ? Thnak you !"}, {"owner": {"reputation": 147, "user_id": 6180869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acadef5bcec74c11f44af5a79ccda4f6?s=128&d=identicon&r=PG&f=1", "display_name": "HacHac", "link": "https://stackoverflow.com/users/6180869/hachac"}, "reply_to_user": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "edited": false, "score": 0, "creation_date": 1544082942, "post_id": 53629410, "comment_id": 94152037, "body": "@GilHamilton During the time i sleep, my equipement keep sending every second data packets of size 58. So i sleep 10seconds it will send 10 packets that i will not read. At the 11th second i read the packets, i want to read only the 11th, but i read the 10packets+11th ... sorry for not beiign clear enough ... So how do i get rid of this &quot;buffer&quot; ? Thank you !"}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1544104362, "creation_date": 1544104362, "answer_id": 53652931, "question_id": 53629410, "link": "https://stackoverflow.com/questions/53629410/data-accumulates-fifo-in-broadcast-udp-socket/53652931#53652931", "title": "Data accumulates (FIFO?) in broadcast UDP socket", "body": "<p>You're not actually getting 10 or 11 packets from a single <code>recvfrom</code>.  You're calling <code>recvfrom</code> in a loop, and each iteration of the loop reads a packet.  So you need some way of knowing that the most recent packet you read is the \"last\" one.</p>\n\n<p>The way to do this is to continuously read until there's nothing to read, then you know the most recent is the last one.  The way your code is current written however, if there are no packets to read then <code>recvfrom</code> will block until a packet becomes available.  You can change this by putting the socket in non-blocking mode:</p>\n\n<pre><code>int fd_flag;\nif ((fdflag = fcntl(sock, F_GETFL)) == -1) {\n    perror(\"Error getting socket descriptor flags\");\n    exit(1);\n}\nfdflag |= O_NONBLOCK;\nif (fcntl(sock, F_SETFL, fdflag) == -1) {\n    perror(\"Error setting non-blocking option\");\n    exit(1); \n}\n</code></pre>\n\n<p>Now when you call <code>recvfrom</code> if there is no data available it will return -1 and set <code>errno</code> to <code>EAGAIN</code>.  You can use this to check for the \"last\" packet:</p>\n\n<pre><code>while(1)\n{\n    while(time_to_sleep)\n    {\n        printf(\"sleep for %d\\n\", time_to_sleep);\n        time_to_sleep=sleep(time_to_sleep);\n    }//after that my next read is 10 data stream of 58 in one !!\n\n    int read_one = 0;\n    while (1) {\n        if ((recvStringLen = recvfrom(sock, recvString, MAXRECVSTRING, 0, NULL, 0)) &lt; 0)\n        {\n            if (errno == EAGAIN) {\n                // nothing more to read\n                break;\n            } else {\n                perror(\"recvfrom() failed\");\n            }\n        } else {\n            read_one = 1;\n            if (recvStringLen==58){ printf(\"Read okay bc Size = %d \\n\", recvStringLen); }\n        }\n    }\n\n    if (read_one) {\n        // process last packet read\n    } else {\n        // nothing read, so do nothing\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1544114267, "creation_date": 1544114267, "answer_id": 53655884, "question_id": 53629410, "link": "https://stackoverflow.com/questions/53629410/data-accumulates-fifo-in-broadcast-udp-socket/53655884#53655884", "title": "Data accumulates (FIFO?) in broadcast UDP socket", "body": "<blockquote>\n  <p>I must misunderstand something in socket ... can you help me ?</p>\n</blockquote>\n\n<p>There are receive and send socket buffers in the kernel. The kernel receives datagrams for your listening socket and stores them in the kernel socket receive buffer. <code>recvfrom</code> call copies the oldest datagram from the kernel socket buffer into your user-space buffer. The fact that you do not call <code>recvfrom</code> doesn't mean the kernel stops receiving datagrams (you would need to close the socket for the kernel to stop receiving data).</p>\n"}], "owner": {"reputation": 147, "user_id": 6180869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acadef5bcec74c11f44af5a79ccda4f6?s=128&d=identicon&r=PG&f=1", "display_name": "HacHac", "link": "https://stackoverflow.com/users/6180869/hachac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 53655884, "answer_count": 2, "score": 3, "last_activity_date": 1544114267, "creation_date": 1544003422, "last_edit_date": 1544083328, "question_id": 53629410, "link": "https://stackoverflow.com/questions/53629410/data-accumulates-fifo-in-broadcast-udp-socket", "title": "Data accumulates (FIFO?) in broadcast UDP socket", "body": "<p>I have a device that sends me a stream of monitoring data (size of 58) every second, in broadcast. I'm reading this stream with a C program. \nMy problem is if i don't read this stream for a few seconds, the next time i read it, i got much more datas that i needed, like if i had a FIFO that keeps filling during the time i'm not reading the stream.</p>\n\n<p>I tried using different methods of reading, like using select, non-blocking socket ... always the same. Maybe there is just a detail that i miss ...\nHere is an example code :</p>\n\n<pre><code>#include &lt;stdio.h&gt;      /* for printf() and fprintf() */\n#include &lt;sys/socket.h&gt; /* for socket(), connect(), sendto(), and recvfrom() */\n#include &lt;arpa/inet.h&gt;  /* for sockaddr_in and inet_addr() */\n#include &lt;stdlib.h&gt;     /* for atoi() and exit() */\n#include &lt;string.h&gt;     /* for memset() */\n#include &lt;unistd.h&gt;     /* for close() */\n\n#define MAXRECVSTRING 58  /* Longest string to receive */\n\n\nint main(int argc, char *argv[])\n{\n    int sock;                         /* Socket */\n    struct sockaddr_in broadcastAddr; /* Broadcast Address */\n    unsigned short broadcastPort;     /* Port */\n    char recvString[MAXRECVSTRING+1]; /* Buffer for received string */\n    int recvStringLen;                /* Length of received string */\n\n    if (argc != 2)    /* Test for correct number of arguments */\n    {\n        fprintf(stderr,\"Usage: %s &lt;Broadcast Port&gt;\\n\", argv[0]);\n        exit(1);\n    }\n\n    broadcastPort = atoi(argv[1]);   /* First arg: broadcast port */\n\n    /* Create a best-effort datagram socket using UDP */\n    if ((sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) &lt; 0)\n        perror(\"socket() failed\");\n\n    /* Construct bind structure */\n    memset(&amp;broadcastAddr, 0, sizeof(broadcastAddr));   /* Zero out structure */\n    broadcastAddr.sin_family = AF_INET;                 /* Internet address family */\n    broadcastAddr.sin_addr.s_addr = htonl(INADDR_ANY);  /* Any incoming interface */\n    broadcastAddr.sin_port = htons(broadcastPort);      /* Broadcast port */\n\n    /* Bind to the broadcast port */\n    if (bind(sock, (struct sockaddr *) &amp;broadcastAddr, sizeof(broadcastAddr)) &lt; 0)\n        perror(\"bind() failed\");\n\n    /* Receive datagram from the server */\n    int g=0;\n    int time_to_sleep=10; \n    while(1)\n    {\n        if(g==10)\n        {\n            while(time_to_sleep)\n            {\n                printf(\"sleep for %d\\n\", time_to_sleep);\n                time_to_sleep=sleep(time_to_sleep);\n            }//after that my next read is 10 data stream of 58 in one !!\n        }\n\n\n        if ((recvStringLen = recvfrom(sock, recvString, MAXRECVSTRING, 0, NULL, 0)) &lt; 0)\n        {\n             perror(\"recvfrom() failed\");\n        }\n        //later will check the header but for now just the size is enough\n        if (recvStringLen==58){ printf(\"Read okay bc Size = %d \\n\", recvStringLen); }\n\n\n    }\n\n    close(sock);\n    exit(0);\n}\n</code></pre>\n\n<p>So i will try to explain my problem :\nMy equipment sends me UDP packets (size 58) every seconds that i keep reading continuously. After x time (g==10) i decide to sleep during 10seconds. During these 10seconds my equipment keeps sending UDP packets, but i don't read them and don't want to. At the 11th seconds, when i wake up i want to read my (g==10)+11th packets and not the 11th + the 10 i did not read during i slept.\nUnfortunately, when i read the 11th with a single recvfrom i get all the 10 previous one ...</p>\n\n<p>I tried with and without an ethernet switch in case, but same problem. I must misunderstand something in socket ... can you help me ?</p>\n\n<p>By the way, my code may be pure disaster, i'm a beginner. Do not hesitate to correct me !</p>\n\n<p>Thank you !</p>\n"}, {"tags": ["c", "unions", "extern"], "comments": [{"owner": {"reputation": 4124, "user_id": 2828480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/30ce285bfd170cf3834d9591fab207e0?s=128&d=identicon&r=PG&f=1", "display_name": "Konrad", "link": "https://stackoverflow.com/users/2828480/konrad"}, "edited": false, "score": 0, "creation_date": 1544001156, "post_id": 53628711, "comment_id": 94117040, "body": "extern keyword?"}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1544003766, "post_id": 53628915, "comment_id": 94118562, "body": "<code>typedef</code> is <b>never</b> required and not the relevant part here, but a red herring."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1544004555, "post_id": 53628915, "comment_id": 94119064, "body": "@toohonestforthissite - In any case the union needs to be declared in the header file to allow it to be extern. <code>typedef</code> or a union tag are two ways."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1544006302, "post_id": 53628915, "comment_id": 94120058, "body": "@RishikeshRaje There is no need to use <code>extern</code>, that&#39;s just a super strong indication of bad design."}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1544007019, "post_id": 53628915, "comment_id": 94120544, "body": "@Lundin - If you are talking in general about global variables, I totally agree."}], "tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": -1, "last_activity_date": 1544001749, "creation_date": 1544001749, "answer_id": 53628915, "question_id": 53628711, "link": "https://stackoverflow.com/questions/53628711/can-i-access-a-union-in-my-source-c-from-main-c-in-pic-c18/53628915#53628915", "title": "Can I access a union in my source.c from main.c in PIC C18?", "body": "<p>The easiest way is to typedef the union</p>\n\n<blockquote>\n  <p>in header.h</p>\n</blockquote>\n\n<pre><code>typedef union\n{\n    struct\n    {\n        ...\n    };\n    unsigned char STRUCT_ARRAY[6];\n}MyUnionType;\n\nextern MyUnionType MY_UNION;\n</code></pre>\n\n<p>Then in source.c define the variable</p>\n\n<pre><code>MyUnionType MY_UNION;\n</code></pre>\n\n<p>This variable now can be used in any source file. (main.c etc)</p>\n"}, {"comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1544004855, "post_id": 53629741, "comment_id": 94119235, "body": "In the OP&#39;s code <code>MY_UNION</code> is the variable name. It would be easier to keep the same convention."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1544006255, "post_id": 53629741, "comment_id": 94120037, "body": "@RishikeshRaje They shouldn&#39;t declare variables in the header, so the original code can&#39;t be preserved."}, {"owner": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 0, "creation_date": 1544006730, "post_id": 53629741, "comment_id": 94120343, "body": "I haven&#39;t declared any variables in the header, which is why I didn&#39;t give any code for <code>header.h</code> in my question. Does the code I wrote here imply this?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 0, "creation_date": 1544006867, "post_id": 53629741, "comment_id": 94120444, "body": "@J\u01ddss\u01dd <code>union{ ... }MY_UNION;</code> declares a variable called MY_UNION. How it compiles without a union tag or typedef, you&#39;ll have to ask the wonderful PIC compiler."}, {"owner": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "reply_to_user": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1544009770, "post_id": 53629741, "comment_id": 94122174, "body": "I accepted the other answer because it seemed logical, it worked and looked &#39;correct&#39;. Your answer provides better background and advice. (I&#39;m not saying that your answer is bad @RishikeshRaje). However, I don&#39;t like to remove an accept once I have given it, so I have just upvoted. I apologise for being too hasty."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 0, "creation_date": 1544010602, "post_id": 53629741, "comment_id": 94122700, "body": "@J\u01ddss\u01dd Please note that there are a whole lot of people in embedded who have &quot;lots of experience&quot;, while they are really just EE who have picked up dabbling with C programming and actually don&#39;t know what they are doing. Creating global variables all over the place would be a strong indicator that the original programmer is a quack (with the exception of constants and MCU registers, which isn&#39;t the case here). In addition, I doubt that the PIC crapilers follow C11 but maybe they do?"}, {"owner": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 0, "creation_date": 1544010852, "post_id": 53629741, "comment_id": 94122845, "body": "In my limited experience they don&#39;t. PIC hardware is great, but the compilers are terrible. C18 at least follows the standard most of the time, while others like CCS throw it all out the window and ask you to learn a new C."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "edited": false, "score": 0, "creation_date": 1544011456, "post_id": 53629741, "comment_id": 94123184, "body": "@J\u01ddss\u01dd Ok I just downloaded the C18 manual and they admit it being a PoS. They partially follow the &quot;X3-159&quot; ANSI C draft from the 1980s. Their anonymous struct is a non-standard extension to that draft standard, but as it happens it is compatible with standard C11. Just as the compiler, the PIC hardware is also ancient 1980s stuff, but that&#39;s another story."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 1, "last_activity_date": 1544004431, "creation_date": 1544004431, "answer_id": 53629741, "question_id": 53628711, "link": "https://stackoverflow.com/questions/53628711/can-i-access-a-union-in-my-source-c-from-main-c-in-pic-c18/53629741#53629741", "title": "Can I access a union in my source.c from main.c in PIC C18?", "body": "<p>Fundamental program design:</p>\n\n<ul>\n<li>Never declare variables in header files.</li>\n<li>Never use spaghetti programming with <code>extern</code>.</li>\n<li>Don't directly expose internals such as this protocol struct outside the translation unit that handles the protocol. You need to have an abstraction layer in between.</li>\n</ul>\n\n<p>Quick &amp; dirty solution:</p>\n\n<ul>\n<li><p>Change the union definition in the h file to be a typedef:</p>\n\n<pre><code>typedef union \n{\n    struct\n    {\n        unsigned char COMMAND;      //STRUCT_ARRAY[0]\n        unsigned char ADDR_H;       //STRUCT_ARRAY[1]\n        unsigned char ADDR_M;       //STRUCT_ARRAY[2]\n        unsigned char ADDR_L;       //STRUCT_ARRAY[3]\n        unsigned char DATA;         //STRUCT_ARRAY[4]\n        unsigned char CHECKSUM;     //STRUCT_ARRAY[5]\n    };\n    unsigned char STRUCT_ARRAY[6];\n    //all of the struct members can be accessed from STRUCT_ARRAY by index\n} MY_UNION;\n</code></pre></li>\n<li><p>Declare the actual variable locally in the .c file: <code>static MY_UNION my_union;</code>.</p></li>\n<li><p>Access the variable with setter/getters, example:</p>\n\n<pre><code>uint8_t get_address_h (void)\n{\n  return my_union.ADDR_H;\n}\n\nvoid set_address_h (uint8_t addr_h)\n{\n  my_union.ADDR_H = addr_h;\n}\n</code></pre></li>\n</ul>\n\n<p>Proper solution:</p>\n\n<p>In a proper program you should be hiding the internals of this protocol entirely from other files, including the typedef union.</p>\n\n<p>Nobody but the protocol converter should access this union. You will have functions like <code>set_address</code>, <code>set_data</code> etc which the caller can know without knowing the protocol internals.</p>\n"}], "owner": {"reputation": 705, "user_id": 8359764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZZGPy.jpg?s=128&g=1", "display_name": "hat", "link": "https://stackoverflow.com/users/8359764/hat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 53628915, "answer_count": 2, "score": -2, "last_activity_date": 1544004431, "creation_date": 1544001046, "last_edit_date": 1544003709, "question_id": 53628711, "link": "https://stackoverflow.com/questions/53628711/can-i-access-a-union-in-my-source-c-from-main-c-in-pic-c18", "title": "Can I access a union in my source.c from main.c in PIC C18?", "body": "<p>I am in a position in which I have got an anonymous structure containing several elements. In order to access them by index I have placed them in a union, like this:</p>\n\n<pre><code>union\n{\n    struct\n    {\n        unsigned char COMMAND;      //STRUCT_ARRAY[0]\n        unsigned char ADDR_H;       //STRUCT_ARRAY[1]\n        unsigned char ADDR_M;       //STRUCT_ARRAY[2]\n        unsigned char ADDR_L;       //STRUCT_ARRAY[3]\n        unsigned char DATA;         //STRUCT_ARRAY[4]\n        unsigned char CHECKSUM;     //STRUCT_ARRAY[5]\n    };\n    unsigned char STRUCT_ARRAY[6];\n    //all of the struct members can be accessed from STRUCT_ARRAY by index\n}MY_UNION;\n</code></pre>\n\n<p>This union currently resides inside a file <code>source.c</code>. I need to access it from <code>main.c</code>. I have a header which both files include, lets call it <code>header.h</code>.</p>\n\n<p>How can I read the value of, for instance, <code>ADDR_H</code> and <code>ADDR_M</code> in main.c while modifying it periodically from source.c?</p>\n\n<p>The code works a bit like this:</p>\n\n<p>source.c:</p>\n\n<pre><code>#include \"header.h\"\n\nunion\n{\n    struct\n    {\n        unsigned char COMMAND;      //STRUCT_ARRAY[0]\n        unsigned char ADDR_H;       //STRUCT_ARRAY[1]\n        unsigned char ADDR_M;       //STRUCT_ARRAY[2]\n        unsigned char ADDR_L;       //STRUCT_ARRAY[3]\n        unsigned char DATA;         //STRUCT_ARRAY[4]\n        unsigned char CHECKSUM;     //STRUCT_ARRAY[5]\n    };\n    unsigned char STRUCT_ARRAY[6];\n    //all of the struct members can be accessed from STRUCT_ARRAY by index\n}MY_UNION;\n\nvoid modify(void)\n{\n    MY_UNION.ADDR_H = somevalue;\n    MY_UNION.ADDR_M = somevalue;\n    MY_UNION.ADDR_L = somevalue;\n}\n</code></pre>\n\n<p>In main.c:</p>\n\n<pre><code>#include \"header.h\"\n\nvoid main(void)\n{\n    modify();\n    print(MY_UNION.ADDR_H);    //custom function to print values to a screen\n    print(MY_UNION.ADDR_M);\n    print(MY_UNION.ADDR_L);\n}\n</code></pre>\n"}, {"tags": ["c", "pointers", "free"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1543998618, "post_id": 53628034, "comment_id": 94115818, "body": "Setting it to <code>NULL</code> (which is just <code>0</code>, by the way) takes CPU time. Sometimes it&#39;s simply not necessary (because you&#39;re not using the pointer anymore), so why force the program to waste a few split nanoseconds there?"}, {"owner": {"reputation": 501, "user_id": 2623183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f681c02a87bdc9d1320f2ca5f36767d4?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/2623183/phil"}, "edited": false, "score": 1, "creation_date": 1543998703, "post_id": 53628034, "comment_id": 94115867, "body": "It&#39;s c. The main aim is to go fast. I often free a pointer only to malloc a bigger chunk of memory to the same variable immediatley"}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "edited": false, "score": 1, "creation_date": 1543998943, "post_id": 53628034, "comment_id": 94115978, "body": "if you don&#39;t like how <code>free()</code> and <code>delete</code> work, why not write a function or macro which extends it&#39;s functionality? <code>#define free2(x) (free(x); x=NULL;)</code>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1543998962, "post_id": 53628034, "comment_id": 94115995, "body": "It&#39;s not in <code>C++</code> because it wasn&#39;t in <code>C</code>, it wasn&#39;t in <code>C</code> because references were not possible and <code>ptr = NULL</code> has a runtime cost. Effectively <code>free</code> would have to take a double ptr or be implemented as a macro in <code>C</code>."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1544065305, "post_id": 53628034, "comment_id": 94146968, "body": "Another option taken by Objective C with Zombies enabled is to keep the pointer and memory, but move it to another list and mark it as &quot;released&quot;. When a program touches the memory associated with the &quot;released&quot; pointer then diagnostics flag the access and alert the programmer."}, {"owner": {"reputation": 80, "user_id": 4381299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d623a9ae5dc74c950bd06641315f1fb?s=128&d=identicon&r=PG&f=1", "display_name": "Subhodeep Maji", "link": "https://stackoverflow.com/users/4381299/subhodeep-maji"}, "edited": false, "score": 0, "creation_date": 1544076981, "post_id": 53628034, "comment_id": 94149758, "body": "Thank you all for your answers and different perspectives. I am satisfied with them :D"}], "answers": [{"comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1543999251, "post_id": 53628169, "comment_id": 94116128, "body": "&quot;and more generally the approach of C/C++ is to do things manually by programmer&quot; not really so much in modern C++."}, {"owner": {"reputation": 80, "user_id": 4381299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d623a9ae5dc74c950bd06641315f1fb?s=128&d=identicon&r=PG&f=1", "display_name": "Subhodeep Maji", "link": "https://stackoverflow.com/users/4381299/subhodeep-maji"}, "edited": false, "score": 0, "creation_date": 1544077257, "post_id": 53628169, "comment_id": 94149840, "body": "Thank you for your answer. I had been through the first 3 links."}], "tags": [], "owner": {"reputation": 2309, "user_id": 8039858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05a1367657700f0980a87767d797273?s=128&d=identicon&r=PG&f=1", "display_name": "nullqube", "link": "https://stackoverflow.com/users/8039858/nullqube"}, "is_accepted": false, "score": 1, "last_activity_date": 1543999153, "creation_date": 1543999153, "answer_id": 53628169, "question_id": 53628034, "link": "https://stackoverflow.com/questions/53628034/seting-null-value-to-xin-the-language-implementation-in-freex/53628169#53628169", "title": "Seting null value to x(in the language implementation) in free(x)", "body": "<p>Generally it's not for the code but us. cause <strong><em>free</em></strong> doesn't set the pointer to NULL, as if may be needed in some low level situation for some, and  more generally the approach of C/C++ is to do things manually by programmer as if they may need specific requirements and this is one the being so <strong>pro</strong> of <strong>C/C++</strong>.</p>\n\n<p>Anyway, by setting the pointer to NULL , now if it's happened to be used later in code now we can check if it's NULL or not, and this prevent from dangling and using unallocated memory pointers.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1025589/setting-variable-to-null-after-free\">Setting variable to NULL after free</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/7608714/why-is-my-pointer-not-null-after-free?rq=1\">Why is my pointer not null after free?</a></p>\n\n<p><a href=\"https://www.quora.com/Why-should-we-assign-NULL-to-the-elements-pointer-after-freeing-them\" rel=\"nofollow noreferrer\">https://www.quora.com/Why-should-we-assign-NULL-to-the-elements-pointer-after-freeing-them</a></p>\n\n<p><a href=\"https://www.acodersjourney.com/top-20-c-pointer-mistakes/\" rel=\"nofollow noreferrer\">https://www.acodersjourney.com/top-20-c-pointer-mistakes/</a></p>\n\n<p><a href=\"https://wiki.sei.cmu.edu/confluence/pages/viewpage.action?pageId=87152148\" rel=\"nofollow noreferrer\">https://wiki.sei.cmu.edu/confluence/pages/viewpage.action?pageId=87152148</a></p>\n"}], "owner": {"reputation": 80, "user_id": 4381299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d623a9ae5dc74c950bd06641315f1fb?s=128&d=identicon&r=PG&f=1", "display_name": "Subhodeep Maji", "link": "https://stackoverflow.com/users/4381299/subhodeep-maji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1544102648, "answer_count": 1, "score": 0, "last_activity_date": 1544003910, "creation_date": 1543998486, "last_edit_date": 1544003910, "question_id": 53628034, "link": "https://stackoverflow.com/questions/53628034/seting-null-value-to-xin-the-language-implementation-in-freex", "closed_reason": "Opinion-based", "title": "Seting null value to x(in the language implementation) in free(x)", "body": "<p>It is generally advised to assign NULL to a freed up pointer as otherwise it may lead to dangling pointer. I want to know if there is any case where not assigning NULL has some use?</p>\n\n<p>If not, why is it not implemented in the call to 'free()' itself? I understand that the pointer is passed by value and thus cannot be modified. Could the function free() have been be implemented to accept pointer to a pointer(i.e reference to the pointer) where the pointer(not pointer to pointer) points to NULL in the end?</p>\n\n<p>I am asking this since we have to always keep in mind about assigning NULL to pointer after freeing which is a very commonly called function(I am assuming).</p>\n"}, {"tags": ["c", "generic-programming", "structure-packing"], "comments": [{"owner": {"reputation": 4522, "user_id": 5157478, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bBcym.png?s=128&g=1", "display_name": "Frankie_C", "link": "https://stackoverflow.com/users/5157478/frankie-c"}, "edited": false, "score": 0, "creation_date": 1543999690, "post_id": 53627980, "comment_id": 94116331, "body": "To my knowledge it packs elements of structures, unions, and, in C++, class members."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1543999823, "post_id": 53627980, "comment_id": 94116401, "body": "What do you mean by &quot;pragmapack()&quot;?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544001599, "post_id": 53627980, "comment_id": 94117283, "body": "Did the interviewer frown? Make a note? Laugh dismissively? In other words: why would you think your answer was wrong? Did you check the documentation for your compiler?"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 2, "creation_date": 1544001934, "post_id": 53627980, "comment_id": 94117468, "body": "Could it have been <code>#pragma pack</code>, i.e., was it a spoken question?"}, {"owner": {"reputation": 870061, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1544002048, "post_id": 53627980, "comment_id": 94117525, "body": "Yes.  I suppose you could have followed up by explaining why non-standard structure packing might be useful.  Knowledge they really want to test you on."}], "answers": [{"tags": [], "owner": {"reputation": 455, "user_id": 4899025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YGgvb.jpg?s=128&g=1", "display_name": "Ajith C Narayanan", "link": "https://stackoverflow.com/users/4899025/ajith-c-narayanan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544002423, "last_edit_date": 1544002423, "creation_date": 1544001975, "answer_id": 53628983, "question_id": 53627980, "link": "https://stackoverflow.com/questions/53627980/does-pragmapack-in-c-programming-have-any-usage-apart-from-structure-packing/53628983#53628983", "title": "Does pragmapack() in C programming have any usage apart from structure packing?", "body": "<pre><code>#pragma pack(size)\n</code></pre>\n\n<p>is a preprocessor directive used for altering structure padding schemes. Usually a structure adds padding bytes between it's members to speed up the memory fetch operations.\nthe number of padding bytes it used is depends on machine architecture. \nfor example,</p>\n\n<pre><code>struct sample {\n    int a;\n    char b;\n    int c;\n};\n</code></pre>\n\n<p>When we see the above structure it requires only 9 bytes ( 4 + 1 + 4) to hold members a, b and c, but for a 32 bit architecture, a variable of this structure takes 16 bytes (4 + 4 + 4) of memory. even though char b only requires 1 byte, it takes 4 bytes 1 for storing value of b and other three as padding bytes.</p>\n\n<pre><code>padding_size = (word_size of machine architecture &gt; highest sized structure member datatype's size) ? highest sized structure member datatype's size : word_size of machine architecture;\n</code></pre>\n\n<p>we can forcefully assign padding size using preprocessor directive <code>#pragma pack(size)</code> , <code>size</code> should be a power of 2 less than the word_size of machine architecture.</p>\n\n<p>If we use like</p>\n\n<pre><code>#pragma pack(1)\n</code></pre>\n\n<p>for the above structure then the total amount of memory required for holding a variable of type <code>struct sample</code> will be (4 + 1 + 4) 9 bytes.</p>\n"}], "owner": {"reputation": 11, "user_id": 8493799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9edd869d1fd7c63fc6e7350bd36a34b?s=128&d=identicon&r=PG&f=1", "display_name": "Meganathan", "link": "https://stackoverflow.com/users/8493799/meganathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544002423, "creation_date": 1543998252, "last_edit_date": 1543999802, "question_id": 53627980, "link": "https://stackoverflow.com/questions/53627980/does-pragmapack-in-c-programming-have-any-usage-apart-from-structure-packing", "title": "Does pragmapack() in C programming have any usage apart from structure packing?", "body": "<p>While I'm on an interview the interviewer asked me are there any other usage of pragmapack() in C apart from structure packing? So I answered that I don't know apart from structure packing. So are there any other usage of it?</p>\n"}, {"tags": ["c", "fonts"], "comments": [{"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1543996828, "post_id": 53627594, "comment_id": 94115022, "body": "The answers in the link you provided say: It is not possible to change the size, and I think this applies to weight etc. You can only set attributes like bold, blinking, underline etc."}, {"owner": {"reputation": 4251, "user_id": 4605105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh4.googleusercontent.com/-_cFfGx1khYs/AAAAAAAAAAI/AAAAAAAAGt0/vfQ_28nwAEE/photo.jpg?sz=128", "display_name": "&#212;rel", "link": "https://stackoverflow.com/users/4605105/%c3%94rel"}, "edited": false, "score": 0, "creation_date": 1543998494, "post_id": 53627594, "comment_id": 94115762, "body": "If you need to improve the output, you will need to use a third party lib like ncurses for example"}], "owner": {"reputation": 509, "user_id": 3487040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qS36g.jpg?s=128&g=1", "display_name": "eapetcho", "link": "https://stackoverflow.com/users/3487040/eapetcho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544007763, "creation_date": 1543996543, "last_edit_date": 1544007763, "question_id": 53627594, "link": "https://stackoverflow.com/questions/53627594/how-to-set-different-font-attributes-to-a-text-output-in-c-c", "title": "How to set different font attributes to a text output in C/C++?", "body": "<p>Given the following basic C program:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n\nint main(int argc, char **argv)\n{\n     printf(\"Hellow World!\");\n\n     return 0;\n}\n</code></pre>\n\n<p>How to set different font attributes (size, weight, slope) for the output <code>Hello World!</code>? I have read answers to related questions like <a href=\"https://stackoverflow.com/questions/15316455/how-to-change-font-size-in-console-application-using-c\">this link</a> but suggested solutions do not answer my question.</p>\n\n<p>I will appreciate your help. Thank in advance.</p>\n\n<p>Note: I am working under Mac OS (macOS High Sierra) and Ubuntu 18.04 LTS; using the terminal.</p>\n"}, {"tags": ["c", "string", "stack"], "comments": [{"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 1, "creation_date": 1543996961, "post_id": 53627578, "comment_id": 94115077, "body": "<code>strcmp(a[i],a[j])</code> is wrong simply use i<code>f(a[i] == a[j])</code>. <code>strcmp</code> is for <code>string</code> not for <code>char</code>."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1544000233, "post_id": 53627578, "comment_id": 94116597, "body": "<code>warning: xxx makes pointer from integer without a cast </code> is almost always an error"}], "answers": [{"tags": [], "owner": {"reputation": 3478, "user_id": 9061264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPing.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/9061264/mike"}, "is_accepted": true, "score": 1, "last_activity_date": 1543997667, "creation_date": 1543997667, "answer_id": 53627837, "question_id": 53627578, "link": "https://stackoverflow.com/questions/53627578/stack-problem-want-to-check-if-expression-is-correctly-parenthesized-and-balanc/53627837#53627837", "title": "stack problem: want to check if expression is correctly parenthesized and balancing and matching", "body": "<p>You are comparing two <code>char</code>  with <code>strcmp</code> (string compare)  </p>\n\n<p>Just compare the chars directly:</p>\n\n<pre><code>int checkmatching(char a[])\n{\n    int i=0,j=top;\n    int count = top;\n    while(i+1&lt;=count)\n    {\n        if((a[i] == a[j]))\n        {\n            pop(a[i]);\n            pop(a[j]);\n            i++;\n            j--;\n        }\n        else return -1;\n    }\n   return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38, "user_id": 10737796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f3c8381549495ccf7e3832a2faa5952?s=128&d=identicon&r=PG&f=1", "display_name": "A. Guy", "link": "https://stackoverflow.com/users/10737796/a-guy"}, "is_accepted": false, "score": 1, "last_activity_date": 1543997684, "creation_date": 1543997684, "answer_id": 53627843, "question_id": 53627578, "link": "https://stackoverflow.com/questions/53627578/stack-problem-want-to-check-if-expression-is-correctly-parenthesized-and-balanc/53627843#53627843", "title": "stack problem: want to check if expression is correctly parenthesized and balancing and matching", "body": "<p><code>strcmp()</code> compares strings, and you're passing it chars (notice that a is a string) you can compare chars with regular <code>==</code></p>\n\n<p>from a brief look you're also trying to use pop with an argument, and I'm not sure what are you trying to achieve.</p>\n\n<p>are you trying to check if the expiration is a palindrome? why using a stack for that? clear your question please</p>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 10045255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aca28d9389803f339b4a557ac01d5375?s=128&d=identicon&r=PG&f=1", "display_name": "Sandipan", "link": "https://stackoverflow.com/users/10045255/sandipan"}, "is_accepted": false, "score": 1, "last_activity_date": 1544007830, "creation_date": 1544007830, "answer_id": 53630813, "question_id": 53627578, "link": "https://stackoverflow.com/questions/53627578/stack-problem-want-to-check-if-expression-is-correctly-parenthesized-and-balanc/53630813#53630813", "title": "stack problem: want to check if expression is correctly parenthesized and balancing and matching", "body": "<p>Don't use strcmp(), use if().</p>\n\n<pre><code>If(a[i] == a[j])\n{\n     pop(a[i]);\n     pop(a[j]);\n     i++;\n     j--;\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10748135, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r5m0MkLOPzI/AAAAAAAAAAI/AAAAAAAAAF4/X7NtPToV-bs/photo.jpg?sz=128", "display_name": "Dip Chakraborty", "link": "https://stackoverflow.com/users/10748135/dip-chakraborty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 53627837, "answer_count": 3, "score": 2, "last_activity_date": 1544007830, "creation_date": 1543996501, "last_edit_date": 1543999018, "question_id": 53627578, "link": "https://stackoverflow.com/questions/53627578/stack-problem-want-to-check-if-expression-is-correctly-parenthesized-and-balanc", "title": "stack problem: want to check if expression is correctly parenthesized and balancing and matching", "body": "<pre><code>#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n\nint stack[20];\nint top=-1;\nvoid push(int x)\n{\n    stack[top]=x;\n    top++;\n}\n\nint pop()\n{\n    return stack[top--];\n}\n\nint checkmatching(char a[])\n{\n    int i=0,j=top;\n    int count = top;\n    while(i+1&lt;=count)\n    {\n        if(strcmp(a[i],a[j])==0)\n        {\n            pop(a[i]);\n            pop(a[j]);\n            i++;\n            j--;\n        }\n        else return -1;\n    }\n   return 1;\n}\n\nint main()\n{\n    char exp[20],i,m;\n    printf(\"give the expression: \");\n    scanf(\"%s\", &amp;exp);\n    for(i=0;exp[i]!='\\0';i++)\n    {\n        push(exp[i]);\n    }\n    m=checkmatching(exp);\n    if(m&gt;0)\n        printf(\"matched\");\n    else printf(\"no match\");\n  return 0;\n}\n</code></pre>\n\n<p>I have a warning for this code:</p>\n\n<blockquote>\n  <p>|21|warning: passing argument 1 of 'strcmp' makes pointer from integer without a cast\n  |43|note: expected 'const char *' but argument is of type 'char'\n  |21|warning: passing argument 2 of 'strcmp' makes pointer from integer without a cast|\n  |43|note: expected 'const char *' but argument is of type 'char'|</p>\n</blockquote>\n"}, {"tags": ["c", "parsing", "split"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 5, "creation_date": 1543996376, "post_id": 53627536, "comment_id": 94114813, "body": "Use <code>fgets</code> to read a line, and <code>strtok</code> to split the line."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1543996492, "post_id": 53627536, "comment_id": 94114865, "body": "The three arrays need to be <code>char *object[3] = { \u2026 };</code> etc."}, {"owner": {"reputation": 10846, "user_id": 1673776, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/0llsY.jpg?s=128&g=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/1673776/victor"}, "edited": false, "score": 0, "creation_date": 1543996686, "post_id": 53627536, "comment_id": 94114951, "body": "Why not save them in <code>struct</code>s?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543996995, "post_id": 53627536, "comment_id": 94115091, "body": "You can either manually parse with a pair of pointers, or use <code>strtok</code> with a delimiter of <code>&quot;;\\n&quot;</code>. There are many examples of how to do both on this site. Search <code>&quot;C strtok split string&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1544003165, "post_id": 53627885, "comment_id": 94118173, "body": "You do not need <code>[3]</code>. Use <code>[]</code> instead and let the compiler work out the size of the array"}, {"owner": {"reputation": 99, "user_id": 10673387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3578c8e29b8ffe62989972c3f03b60d?s=128&d=identicon&r=PG&f=1", "display_name": "Ramya Muralidharan", "link": "https://stackoverflow.com/users/10673387/ramya-muralidharan"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1544003397, "post_id": 53627885, "comment_id": 94118309, "body": "@ Ed Heal I agree.If we are doing direct initialization."}], "tags": [], "owner": {"reputation": 99, "user_id": 10673387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3578c8e29b8ffe62989972c3f03b60d?s=128&d=identicon&r=PG&f=1", "display_name": "Ramya Muralidharan", "link": "https://stackoverflow.com/users/10673387/ramya-muralidharan"}, "is_accepted": false, "score": 1, "last_activity_date": 1544006294, "last_edit_date": 1544006294, "creation_date": 1543997902, "answer_id": 53627885, "question_id": 53627536, "link": "https://stackoverflow.com/questions/53627536/how-to-parse-in-c/53627885#53627885", "title": "How to parse in C", "body": "<p>U should not declare char array if u want to store like this.</p>\n\n<pre><code> char object[3] = {\"Cat\", \"Dog\", \"Tea\"};\n char description[3] = {\"Small\", \"Big\", \"Warm\"};\n char type[3] = {\"Animal\", \"Animal\", \"Drink\"};\n</code></pre>\n\n<p>U should declare array of char pointer</p>\n\n<pre><code>char *object[] = {\"Cat\", \"Dog\", \"Tea\"};\nchar *description[] = {\"Small\", \"Big\", \"Warm\"};\nchar *type[] = {\"Animal\", \"Animal\", \"Drink\"};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1544026707, "post_id": 53629292, "comment_id": 94132681, "body": "Nit - saving <code>size_t len = strlen(next_token);</code> allows <code>memcpy (object[counter], next_token, len + 1);</code> avoiding scanning for the end-of-string a second time with <code>strcpy</code> (you already scanned for the end-of-string with <code>strlen</code>). <code>sizeof(char)</code> is always <code>1</code>."}, {"owner": {"reputation": 2026, "user_id": 1406083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1gC8p.jpg?s=128&g=1", "display_name": "Billy Brown", "link": "https://stackoverflow.com/users/1406083/billy-brown"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1544482115, "post_id": 53629292, "comment_id": 94284235, "body": "@DavidC.Rankin Well noticed. I haven&#39;t written C in a while, and <code>strcpy</code> and <code>memmove</code> (for overlapping memory). I just used <code>strlen</code> for simplicity, but with <code>length</code> already saved, I agree that <code>memcpy</code> is better. As to <code>sizeof(char)</code>, I use it because it matches all other uses of the <code>malloc</code> family, for <code>void *</code>, <code>int</code>, etc\u2026"}], "tags": [], "owner": {"reputation": 2026, "user_id": 1406083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1gC8p.jpg?s=128&g=1", "display_name": "Billy Brown", "link": "https://stackoverflow.com/users/1406083/billy-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1544482950, "last_edit_date": 1544482950, "creation_date": 1544003017, "answer_id": 53629292, "question_id": 53627536, "link": "https://stackoverflow.com/questions/53627536/how-to-parse-in-c/53629292#53629292", "title": "How to parse in C", "body": "<p>With a function to read lines from a file, such as <code>get_line</code> (POSIX), or <a href=\"https://gist.github.com/Druid-of-Luhn/d1a85f366ceecfc3c2dc5491e3d25cb4\" rel=\"nofollow noreferrer\">this portable <code>read_line</code> function</a> that I just wrote for this, you can then split the line into tokens using <code>strtok</code> with the delimiter set to <code>\";\"</code> (make sure to remove the trailing <code>\\n</code> from the line first). You can then copy each token into the relevant array.</p>\n\n<p>However, as your file format is essentially a CSV file, and you might end up wanting to add more columns or rows in the future, you could use something like <a href=\"https://github.com/rgamble/libcsv\" rel=\"nofollow noreferrer\"><code>libcsv</code></a> (<a href=\"https://github.com/rgamble/libcsv/blob/master/csv.pdf\" rel=\"nofollow noreferrer\">documentation</a>).</p>\n\n<p>A quick solution to this might look something like this:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nextern size_t read_line(FILE *file, char **line);\n\ntypedef enum Category {\n    OBJECT, DESCRIPTION, TYPE\n} Category;\n\nCategory next_category(const Category category)\n{\n    return (Category) ((category + 1) % 3);\n}\n\nint main(void)\n{\n    char *object[3];\n    char *description[3];\n    char *type[3];\n    size_t counter = 0;\n\n    FILE *file = fopen(\"example.csv\", \"r\");\n    char *line = NULL;\n    size_t length = 0;\n    while ((length = read_line(file, &amp;line)) &gt; 0 &amp;&amp; counter &lt; sizeof(object)) {\n        Category token_category = 0;\n        char *next_token = strtok(line, \";\");\n        while (next_token != NULL) {\n            size_t token_length = strlen(next_token);\n            switch (token_category) {\n                case OBJECT:\n                    object[counter] = calloc(token_length, sizeof(char));\n                    memcpy(object[counter], next_token, token_length);\n                    break;\n                case DESCRIPTION:\n                    description[counter] = calloc(token_length, sizeof(char));\n                    memcpy(description[counter], next_token, token_length);\n                    break;\n                case TYPE:\n                    type[counter] = calloc(token_length, sizeof(char));\n                    memcpy(type[counter], next_token, token_length);\n                    break;\n            }\n            // Read the next token from the same string\n            next_token = strtok(NULL, \";\");\n            token_category = next_category(token_category);\n        }\n        free(next_token);\n        free(line);\n        ++counter;\n    }\n    fclose(file);\n    printf(\"Objects:      %s, %s, %s\\n\", object[0], object[1], object[2]);\n    printf(\"Descriptions: %s, %s, %s\\n\", description[0], description[1], description[2]);\n    printf(\"Types:        %s, %s, %s\\n\", type[0], type[1], type[2]);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 6395569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e2b0b772294c1aa4d332f535aa1593a?s=128&d=identicon&r=PG", "display_name": "Fernando P&#233;rez Lara", "link": "https://stackoverflow.com/users/6395569/fernando-p%c3%a9rez-lara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7339, "favorite_count": 1, "closed_date": 1544003163, "accepted_answer_id": 53629292, "answer_count": 2, "score": 0, "last_activity_date": 1544482950, "creation_date": 1543996289, "question_id": 53627536, "link": "https://stackoverflow.com/questions/53627536/how-to-parse-in-c", "closed_reason": "Needs more focus", "title": "How to parse in C", "body": "<p>My idea is to save in multiple variables the data from a file. This file has the followin structure:</p>\n\n<pre><code>Cat;Small;Animal\nDog;Big;Animal\nTea;Warm;Drink\n</code></pre>\n\n<p>For that I need to split the text in the ';' and in the '\\n'.</p>\n\n<p>Then I want to save in an array this data like in this example:</p>\n\n<pre><code>char object[3] = {\"Cat\", \"Dog\", \"Tea\"};\nchar description[3] = {\"Small\", \"Big\", \"Warm\"};\nchar type[3] = {\"Animal\", \"Animal\", \"Drink\"};\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c", "arrays"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1543995366, "post_id": 53627151, "comment_id": 94114340, "body": "How is <code>i</code>, <code>j</code>, <code>L</code>,<code>R</code> <code>k</code>, <code>temp</code> and <code>a</code> declared and defined? How do you call this function? Can you give an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>? Can you post example input? Example output? Expected output for the sample input? Example API? What is your question? <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 12925, "user_id": 4668606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V9l7Y.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4668606/paul"}, "edited": false, "score": 0, "creation_date": 1543995714, "post_id": 53627151, "comment_id": 94114504, "body": "The output for your testcase is correct. The code isn&#39;t useable for anything except paper-and-pen-debugging, since it&#39;s incomplete. I.e. how are <code>i</code>, <code>j</code> initialized?"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10559509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7678cad131cb1ed5a80078e33ec75b0?s=128&d=identicon&r=PG&f=1", "display_name": "Elgernon", "link": "https://stackoverflow.com/users/10559509/elgernon"}, "edited": false, "score": 1, "creation_date": 1543995824, "post_id": 53627384, "comment_id": 94114552, "body": "Sorry, but the thing is that it is a 2D array."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "reply_to_user": {"reputation": 43, "user_id": 10559509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7678cad131cb1ed5a80078e33ec75b0?s=128&d=identicon&r=PG&f=1", "display_name": "Elgernon", "link": "https://stackoverflow.com/users/10559509/elgernon"}, "edited": false, "score": 0, "creation_date": 1543996317, "post_id": 53627384, "comment_id": 94114792, "body": "@Elgernon then just use <code>a[i][i]</code> whenever the answer says <code>a[i]</code>. The diagonal that you want to sort is the one where column index equals row index, right?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10662764"}, "is_accepted": true, "score": 2, "last_activity_date": 1543995630, "creation_date": 1543995630, "answer_id": 53627384, "question_id": 53627151, "link": "https://stackoverflow.com/questions/53627151/sort-main-diagonal-of-array-by-shaker-sort/53627384#53627384", "title": "Sort main diagonal of array by Shaker sort", "body": "<p>A function to swap values using call by reference.</p>\n\n<pre><code>    void swap(int *a, int *b)\n{\n    int temp;\n    temp = *a;\n    *a = *b;\n    *b = temp;\n}\n</code></pre>\n\n<p>A function implementing shaker sort</p>\n\n<pre><code>    void ShakerSort(int a[], int n)\n{\n    int i, j, k;\n    for(i = 0; i &lt; n;)\n    {\n        // First phase for ascending highest value to the highest unsorted index.\n        for(j = i+1; j &lt; n; j++)\n        {\n            if(a[j] &lt; a[j-1])\n                swap(&amp;a[j], &amp;a[j-1]);\n        }\n        // Decrementing highest index. \n        n--;\n\n        // Second phase for descending lowest value to the lowest unsorted index.\n        for(k = n-1; k &gt; i; k--)\n        {\n            if(a[k] &lt; a[k-1])\n                swap(&amp;a[k], &amp;a[k-1]);\n        }\n        // Incrementing lowest index.\n        i++;\n    }\n}\n</code></pre>\n\n<p>The main function looks like this </p>\n\n<pre><code>    int main()\n{\n    int n, i;\n    cout&lt;&lt;\"\\nEnter the number of data element to be sorted: \";\n    cin&gt;&gt;n;\n\n    int arr[n];\n    for(i = 0; i &lt; n; i++)\n    {\n        cout&lt;&lt;\"Enter element \"&lt;&lt;i+1&lt;&lt;\": \";\n        cin&gt;&gt;arr[i];\n    }\n\n    ShakerSort(arr, n);\n\n    // Printing the sorted data.\n    cout&lt;&lt;\"\\nSorted Data \";\n    for (i = 0; i &lt; n; i++)\n        cout&lt;&lt;\"-&gt;\"&lt;&lt;arr[i];\n\n    return 0;\n}\n</code></pre>\n\n<p>The above code is written in <code>c++</code> refer it and make the changes according to your requirment</p>\n"}], "owner": {"reputation": 43, "user_id": 10559509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7678cad131cb1ed5a80078e33ec75b0?s=128&d=identicon&r=PG&f=1", "display_name": "Elgernon", "link": "https://stackoverflow.com/users/10559509/elgernon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 53627384, "answer_count": 1, "score": 0, "last_activity_date": 1543995907, "creation_date": 1543994577, "last_edit_date": 1543995907, "question_id": 53627151, "link": "https://stackoverflow.com/questions/53627151/sort-main-diagonal-of-array-by-shaker-sort", "title": "Sort main diagonal of array by Shaker sort", "body": "<p>So that's my task. I don't know how to realize it in 2D.</p>\n\n<p>All variables (i, j, L, R, etc. are integer)</p>\n\n<pre><code>    while (L &lt; R)\n{\n    for(i, j = L; i &lt; R; i++, j++)\n    {\n        if (a[i][j] &gt; a[i + 1][j + 1])\n        {\n            temp = a[i][j];\n            a[i][j] = a[i + 1][j + 1];\n            a[i + 1][j + 1] = temp;\n            k = i;\n        }\n    }\n    R = k;\n    for(i, j = R - 1; i &gt;= L; i--, j--)\n    {\n        if(a[i][j] &gt; a[i + 1][j + 1])\n        {\n            temp = a[i][j];\n            a[i][j] = a[i + 1][j + 1];\n            a[i + 1][j + 1] = temp;\n            k = i;  \n        }\n    }\n    L = k + 1;\n}\n</code></pre>\n\n<p>I tried this code but I think that something is wrong with that.</p>\n\n<p>Input:</p>\n\n<pre><code>1 10 5\n4 0 8\n8 18 3\n</code></pre>\n\n<p>Output: (That should be)</p>\n\n<pre><code>0 10 5\n4 1 8\n8 18 3\n</code></pre>\n\n<p>But current Output is</p>\n\n<pre><code>1 10 5\n4 0 8\n8 18 3\n</code></pre>\n"}, {"tags": ["c", "bpf", "ebpf"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1543994789, "post_id": 53627094, "comment_id": 94114045, "body": "Literal strings aren&#39;t passed or stored on the stack. What is being passed to your <code>ameba</code> function is a <i>pointer</i> to the first character of the long string. It then returns a <i>pointer</i> to the first element of data allocated on the heap. The only thing stored on the stack (traditionally) is the pointer variables themselves, not the data they point to."}, {"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1543994795, "post_id": 53627094, "comment_id": 94114052, "body": "You have a memory leak though."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1543995500, "post_id": 53627094, "comment_id": 94114406, "body": "<code>s = (char *) malloc(128);</code> just allocate more memory... <code>s = malloc(strlen(s1) + 1);</code>"}, {"owner": {"reputation": 178, "user_id": 1367644, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f13449555c3fbc245cda582fe0464f5?s=128&d=identicon&r=PG", "display_name": "lesovsky", "link": "https://stackoverflow.com/users/1367644/lesovsky"}, "edited": false, "score": 0, "creation_date": 1544020121, "post_id": 53627094, "comment_id": 94128438, "body": "Maybe I explained wrong, in general I trying to save pointer into ameba_event_t struct in BPF program and dereference it in go program. Currently it&#39;s done through Arg1 variable which is limited by 80 bytes.  (Memory leak and over-allocation are not the things about which I&#39;m worrying here and now)"}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 1367644, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f13449555c3fbc245cda582fe0464f5?s=128&d=identicon&r=PG", "display_name": "lesovsky", "link": "https://stackoverflow.com/users/1367644/lesovsky"}, "edited": false, "score": 0, "creation_date": 1544078584, "post_id": 53641864, "comment_id": 94150319, "body": "I booted into 4.18 kernel and implement your solution, but long args are still truncated to arg1 limitation to 80 bytes. I think I need a way to replace arg1[80] to something that have no such limitation. But I checked a lot of &quot;bcc&quot; tools and everywhere used variables with fixed length."}, {"owner": {"reputation": 178, "user_id": 1367644, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f13449555c3fbc245cda582fe0464f5?s=128&d=identicon&r=PG", "display_name": "lesovsky", "link": "https://stackoverflow.com/users/1367644/lesovsky"}, "edited": false, "score": 0, "creation_date": 1544082855, "post_id": 53641864, "comment_id": 94152003, "body": "Anyway it&#39;s impossible to guess what length of the string will be passed in traced function. So it&#39;s reasonable to set appropriate limit and discard too long strings. Thank you."}, {"owner": {"reputation": 7068, "user_id": 6884590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0b52ad2211a26c4e1cefb472e09cbe?s=128&d=identicon&r=PG", "display_name": "pchaigno", "link": "https://stackoverflow.com/users/6884590/pchaigno"}, "reply_to_user": {"reputation": 178, "user_id": 1367644, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f13449555c3fbc245cda582fe0464f5?s=128&d=identicon&r=PG", "display_name": "lesovsky", "link": "https://stackoverflow.com/users/1367644/lesovsky"}, "edited": false, "score": 0, "creation_date": 1544117886, "post_id": 53641864, "comment_id": 94172134, "body": "That&#39;s right, you have to set a fixed length for <code>struct ameba_event_t</code>. You can set <code>arg1</code> to a very large size though. Not sure about the performance impact of using a very large <code>arg1</code>."}, {"owner": {"reputation": 178, "user_id": 1367644, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f13449555c3fbc245cda582fe0464f5?s=128&d=identicon&r=PG", "display_name": "lesovsky", "link": "https://stackoverflow.com/users/1367644/lesovsky"}, "edited": false, "score": 0, "creation_date": 1544121492, "post_id": 53641864, "comment_id": 94173752, "body": "What size would be normal? 8Kb is it ok?"}, {"owner": {"reputation": 7068, "user_id": 6884590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0b52ad2211a26c4e1cefb472e09cbe?s=128&d=identicon&r=PG", "display_name": "pchaigno", "link": "https://stackoverflow.com/users/6884590/pchaigno"}, "reply_to_user": {"reputation": 178, "user_id": 1367644, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f13449555c3fbc245cda582fe0464f5?s=128&d=identicon&r=PG", "display_name": "lesovsky", "link": "https://stackoverflow.com/users/1367644/lesovsky"}, "edited": false, "score": 0, "creation_date": 1544122117, "post_id": 53641864, "comment_id": 94174017, "body": "That&#39;s not something I can answer for you. If you know most strings you want to capture are less than 8Kb and you&#39;ve checked that any overhead it creates is acceptable for you, then sure!"}], "tags": [], "owner": {"reputation": 7068, "user_id": 6884590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b0b52ad2211a26c4e1cefb472e09cbe?s=128&d=identicon&r=PG", "display_name": "pchaigno", "link": "https://stackoverflow.com/users/6884590/pchaigno"}, "is_accepted": true, "score": 1, "last_activity_date": 1544117534, "last_edit_date": 1544117534, "creation_date": 1544049627, "answer_id": 53641864, "question_id": 53627094, "link": "https://stackoverflow.com/questions/53627094/ebpf-track-values-longer-than-stack-size/53641864#53641864", "title": "eBPF, track values longer than stack size?", "body": "<blockquote>\n  <p>I read about BPF_MAP_TYPE_PERCPU_ARRAY could help in such case, but it's not clear for me how to use it.</p>\n</blockquote>\n\n<p>You're right. Peeps usually rely on per-cpu arrays to overcome stack size limitations. The following implements that sort of solution, whereby I'm using a per-cpu array to store <code>struct ameba_event_t</code> instead of storing it on the stack.</p>\n\n<p>I think you're going to need Linux v4.18 to be able to do this (you need commit <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d71962f3e627b5941804036755c844fabfb65ff5\" rel=\"nofollow noreferrer\">d71962f</a>). I haven't tested the code as I don't have the right setup at hand, but can later if you run into any issue.</p>\n\n<pre><code>#include &lt;uapi/linux/ptrace.h&gt;\n#include &lt;linux/sched.h&gt;\n\nstruct ameba_event_t {\n    u32 pid;\n    char comm[TASK_COMM_LEN];\n    char arg1[512];\n} __attribute__((packed));\n\nBPF_PERF_OUTPUT(ameba_events);\nBPF_PERCPU_ARRAY(ameba_struct, struct ameba_event_t, 1);\n\nint get_input_args(struct pt_regs *ctx) {\n    int zero = 0;\n    if (!PT_REGS_PARM1(ctx))\n        return 0;\n    struct ameba_event_t* event = ameba_struct.lookup(&amp;zero);\n    if (!event)\n        return 0;\n    event-&gt;pid = bpf_get_current_pid_tgid();\n    bpf_get_current_comm(&amp;event-&gt;comm, sizeof(event-&gt;comm));\n    bpf_probe_read(&amp;event-&gt;arg1, sizeof(event-&gt;arg1), (void *)PT_REGS_PARM1(ctx));\n    ameba_events.perf_submit(ctx, event, sizeof(*event));\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 1367644, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f13449555c3fbc245cda582fe0464f5?s=128&d=identicon&r=PG", "display_name": "lesovsky", "link": "https://stackoverflow.com/users/1367644/lesovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 53641864, "answer_count": 1, "score": 0, "last_activity_date": 1551978136, "creation_date": 1543994391, "last_edit_date": 1551978136, "question_id": 53627094, "link": "https://stackoverflow.com/questions/53627094/ebpf-track-values-longer-than-stack-size", "title": "eBPF, track values longer than stack size?", "body": "<p>I'm extending a program which take arguments of traced function and print it. Everything works fine with numeric arguments and short strings. But it's not clear how to handle with long string that longer than stack size in eBPF (which is limited with 512 byte).</p>\n\n<p>In example below, string is limited by 80 bytes, of course it can be increased up to 512, but how to track more longer strings?</p>\n\n<p>Example of C program with traced function which called \"ameba\"</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;strings.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n#include &lt;unistd.h&gt;\n\nchar * ameba(char * s1);\n\nint main(void) {\n    printf(\"%s\\n\", ameba(\"verylonglongstring...1111111111111111111111111111111111111111111111111111111111111111111111111111\"));\n}\n\nchar * ameba(char * s1) {\n    char *s;\n    s = (char *) malloc(128);\n    sleep(1);\n    snprintf(s, 128, \"ameba: %s\", s1);\n    return s;\n}\n</code></pre>\n\n<p>Example of Go code</p>\n\n<pre><code>package main\n\nimport \"C\"\nimport (\n    \"bytes\"\n    \"encoding/binary\"\n    \"fmt\"\n    \"os\"\n    \"os/signal\"\n    \"unsafe\"\n\n    bpf \"github.com/iovisor/gobpf/bcc\"\n)\n\nconst source string = `\n#include &lt;uapi/linux/ptrace.h&gt;\n#include &lt;linux/sched.h&gt;\n\nstruct ameba_event_t {\n        u32 pid;\n        char comm[TASK_COMM_LEN];\n        char arg1[80];\n} __attribute__((packed));\n\nBPF_PERF_OUTPUT(ameba_events);\n\nint get_input_args(struct pt_regs *ctx) {\n        struct ameba_event_t event = {};\n        if (!PT_REGS_PARM1(ctx))\n                return 0;\n        event.pid = bpf_get_current_pid_tgid();\n        bpf_get_current_comm(&amp;event.comm, sizeof(event.comm));\n        bpf_probe_read(&amp;event.arg1, sizeof(event.arg1), (void *)PT_REGS_PARM1(ctx));\n        ameba_events.perf_submit(ctx, &amp;event, sizeof(event));\n\n        return 0;\n}\n`\n\ntype amebaEvent struct {\n    Pid uint32\n    Comm [16]byte\n    Arg1 [80]byte\n}\n\nfunc main() {\n    m := bpf.NewModule(source, []string{})\n    defer m.Close()\n\n    amebaUprobe, err := m.LoadUprobe(\"get_input_args\")\n    if err != nil {\n        fmt.Fprintf(os.Stderr, \"Failed to load get_input_args: %s\\n\", err)\n        os.Exit(1)\n    }\n\n    err = m.AttachUprobe(\"/home/lesovsky/Git/sandbox/ameba\", \"ameba\", amebaUprobe, -1)\n    if err != nil {\n        fmt.Fprintf(os.Stderr, \"Failed to attach input_args: %s\\n\", err)\n        os.Exit(1)\n    }\n\n    table := bpf.NewTable(m.TableId(\"ameba_events\"), m)\n\n    channel := make(chan []byte)\n\n    perfMap, err := bpf.InitPerfMap(table, channel)\n    if err != nil {\n        fmt.Fprintf(os.Stderr, \"Failed to init perf map: %s\\n\", err)\n        os.Exit(1)\n    }\n\n    sig := make(chan os.Signal, 1)\n    signal.Notify(sig, os.Interrupt, os.Kill)\n\n    fmt.Printf(\"%10s\\t%s\\t%s\\n\", \"PID\", \"COMMAND\", \"ARG1\")\n    go func() {\n        var event amebaEvent\n        for {\n            data := &lt;-channel\n            err := binary.Read(bytes.NewBuffer(data), binary.LittleEndian, &amp;event)\n            if err != nil {\n                fmt.Printf(\"failed to decode received data: %s\\n\", err)\n                continue\n            }\n\n            comm := (*C.char)(unsafe.Pointer(&amp;event.Comm))\n            query := (*C.char)(unsafe.Pointer(&amp;event.Query))\n            fmt.Printf(\"%10d\\t%s\\t%s\\n\", event.Pid, C.GoString(comm), C.GoString(query))\n        }\n    }()\n\n    perfMap.Start()\n    &lt;-sig\n    perfMap.Stop()\n}\n</code></pre>\n\n<p>I read about BPF_MAP_TYPE_PERCPU_ARRAY could help in such case, but it's not clear for me how to use it.</p>\n\n<p>EDIT: Go program has been modified to using \"C\" and \"unsafe\".</p>\n"}, {"tags": ["c", "valgrind"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543993811, "post_id": 53626904, "comment_id": 94113614, "body": "Don&#39;t <code>realloc</code> the pointer itself, e.g. don&#39;t <code>*str = (wchar_t*)realloc(*str, avl_sy * sizeof(wchar_t));</code>, instead <code>void *tmp = ealloc(*str, avl_sy * sizeof(wchar_t)); if (!tmp) { &#47;* handle error *&#47; } *str = tmp;</code>"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1543993966, "post_id": 53626904, "comment_id": 94113692, "body": "<code>if (!str)         return 1;</code> is meaningless as you already deferenced <code>str</code>. May be you wanted to check <code>if(!*str)</code> after mallocing."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543994179, "post_id": 53626904, "comment_id": 94113794, "body": "I suspect your 4-byte problem is due to being one or two <code>wchar_t</code> too short on one of your allocations and then attempting to write to that location and a similar read thereafter. It is almost impossible to know for sure without something I can compile and test. Please provide <a href=\"http://stackoverflow.com/help/mcve\">A Minimal, Complete, and Verifiable Example (MCVE)</a>."}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1543994226, "post_id": 53626904, "comment_id": 94113813, "body": "<code>temp[wcslen(temp) - 1] = L&#39;\\0&#39;;</code> are you sure <code>temp</code> is already terminated with <code>\\0</code>? as I see you are terminating the <code>temp</code> after calling <code>wcslen</code> which is wrong. <code>wcslen</code> needs input <code>wchar *</code> to be <code>\\0</code> terminated."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543994304, "post_id": 53626904, "comment_id": 94113839, "body": "(that would also go to explaining the Invalid Read - <code>at 0x483FE24: wcslen (vg_replace_strmem.c:1868)</code>)"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543994522, "post_id": 53626904, "comment_id": 94113925, "body": "@DavidC.Rankin I believe so."}, {"owner": {"reputation": 79, "user_id": 10498948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baba144f3e3d0c9e95933da642075235?s=128&d=identicon&r=PG&f=1", "display_name": "po4yka", "link": "https://stackoverflow.com/users/10498948/po4yka"}, "reply_to_user": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "edited": false, "score": 0, "creation_date": 1543994679, "post_id": 53626904, "comment_id": 94113995, "body": "@kiranBiradar I use it to delete &#39;\\n&#39; from input str. And yes, I was already terminated. Is correct this way?"}, {"owner": {"reputation": 79, "user_id": 10498948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baba144f3e3d0c9e95933da642075235?s=128&d=identicon&r=PG&f=1", "display_name": "po4yka", "link": "https://stackoverflow.com/users/10498948/po4yka"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543995111, "post_id": 53626904, "comment_id": 94114207, "body": "@DavidC.Rankin I&#39;m sorry, can you pls tell how to do this temp correct? Because then I make &#39;void *tmp&#39; and &#39;tmp = realloc(*str, avl_sy * sizeof(wchar_t));&#39; I start to have a lot errors like  &quot;Conditional jump or move depends on uninitialised value(s)&quot;."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543995397, "post_id": 53626904, "comment_id": 94114360, "body": "Sure, you are protecting against <code>realloc</code> returning <code>NULL</code> and overwriting your pointer causing a memory leak. You simply use a temporary pointer, e.g. <code>void *tmp = realloc(*str, avl_sy * sizeof(wchar_t));</code>. You then validate <code>tmp</code> is not <code>NULL</code> or handle the error, e.g. <code>if (tmp == NULL) { perror (&quot;realloc-str&quot;); break; }</code> (or use <code>goto</code>) Now if <code>tmp</code> passes and is not <code>NULL</code>, just assign the reallocated block to <code>*str</code>, e.g. <code>*str = tmp;</code>. This allows you to validate the <code>realloc</code> call while avoiding the memory leak in case of failure."}], "answers": [{"tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 1, "last_activity_date": 1543995341, "last_edit_date": 1543995341, "creation_date": 1543994931, "answer_id": 53627236, "question_id": 53626904, "link": "https://stackoverflow.com/questions/53626904/valgrind-errors-with-dynamic-arrays-of-struct-in-other-strust/53627236#53627236", "title": "Valgrind errors with dynamic arrays of struct in other strust", "body": "<p>You access out bound here.</p>\n\n<pre><code>   while (input != L'\\n'){\n        wscanf(L\"%lc\", &amp;input);\n        if (avl_sy &lt;= symb){\n            avl_sy += MAKE_BIG;\n            *str = (wchar_t*)realloc(*str, avl_sy * sizeof(wchar_t));\n            if (!str)\n                return 1;\n        }\n        (*str)[symb] = input;\n        symb++;\n    }\n    (*str)[symb] = L'\\0';\n</code></pre>\n\n<p>Consider you inputted <code>\\n</code> when <code>symb=9</code> and <code>if (avl_sy &lt;= symb)</code> condition is false and you will not re-allocate.</p>\n\n<p>Now <code>symb++;</code> will make <code>symb=10</code> and break out of the loop as <code>input == '\\n'</code>.</p>\n\n<pre><code>    (*str)[symb] = L'\\0';//(*str)[10] out of bound access.\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10498948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baba144f3e3d0c9e95933da642075235?s=128&d=identicon&r=PG&f=1", "display_name": "po4yka", "link": "https://stackoverflow.com/users/10498948/po4yka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 53627236, "answer_count": 1, "score": 1, "last_activity_date": 1543995341, "creation_date": 1543993495, "question_id": 53626904, "link": "https://stackoverflow.com/questions/53626904/valgrind-errors-with-dynamic-arrays-of-struct-in-other-strust", "title": "Valgrind errors with dynamic arrays of struct in other strust", "body": "<p>I have struct like:</p>\n\n<pre><code>typedef struct Sentense{\n    long int length;\n    wchar_t *str;\n    wchar_t **splword;\n    long int count_words;\n    long long int prod;\n} sentense_s;\n\ntypedef struct Text{\n    long int quant;\n    sentense_s *sent;\n} text_s;\n</code></pre>\n\n<p>And functions for reading text and working with it:</p>\n\n<pre><code>#ifndef MAKE_BIG\n#define MAKE_BIG 10\n#endif\n\nint read_str(wchar_t **str){\n    int avl_sy = MAKE_BIG;\n    int symb = 0;\n    *str = (wchar_t *)malloc(avl_sy * sizeof(wchar_t));\n    if (!str)\n        return 1;\n    wchar_t input = '.';\n    while (input != L'\\n'){\n        wscanf(L\"%lc\", &amp;input);\n        if (avl_sy &lt;= symb){\n            avl_sy += MAKE_BIG;\n            *str = (wchar_t*)realloc(*str, avl_sy * sizeof(wchar_t));\n            if (!str)\n                return 1;\n        }\n        (*str)[symb] = input;\n        symb++;\n    }\n    (*str)[symb] = L'\\0';\n    return 0;\n}\n\nint make_arr(wchar_t *temp, text_s *text){\n    temp[wcslen(temp) - 1] = L'\\0';\n    text-&gt;quant = 0;\n    long int avl_sent = MAKE_BIG;\n    text-&gt;sent = (sentense_s *)malloc(avl_sent * sizeof(sentense_s));\n    if (!text-&gt;sent)\n        return 1;\n    wchar_t *token = NULL;\n    wchar_t *buffer = NULL;\n    token = wcstok(temp, L\".\", &amp;buffer);\n    while (token != NULL){\n        if (avl_sent &lt;= text-&gt;quant){\n            avl_sent += MAKE_BIG;\n            text-&gt;sent = (sentense_s *)realloc(text-&gt;sent, avl_sent * sizeof(sentense_s));\n            if (!text-&gt;sent)\n                return 1;\n        }\n        text-&gt;sent[text-&gt;quant].str = (wchar_t *)malloc( (wcslen(token) + 2) * sizeof(wchar_t));\n        if (!text-&gt;sent[text-&gt;quant].str)\n            return 1;\n        wmemcpy(text-&gt;sent[text-&gt;quant].str, token, wcslen(token) + 1);\n        text-&gt;quant++;\n        token = wcstok(NULL, L\".\", &amp;buffer);\n    }\n    token = NULL;\n    buffer = NULL;\n    free(temp);\n    return 0;\n}\n</code></pre>\n\n<p>And there are two problems:\n1) In some test it crashes at the begging of program with:</p>\n\n<pre><code>main: malloc.c:2385: sysmalloc: Assertion `(old_top == initial_top (av) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;= MINSIZE &amp;&amp; prev_inuse (old_top) &amp;&amp; ((unsigned long) old_end &amp; (pagesize - 1)) == 0)' failed.\n</code></pre>\n\n<p>But then I start is second time it works.\n2) Valgrind show me this errors:</p>\n\n<pre><code>==11408== Invalid write of size 4\n==11408==    at 0x109462: read_str (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==    by 0x109296: main (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==  Address 0x4a86878 is 0 bytes after a block of size 680 alloc'd\n==11408==    at 0x4839D7B: realloc (vg_replace_malloc.c:826)\n==11408==    by 0x109410: read_str (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==    by 0x109296: main (in /home/nikita/GitHub/Course-work/Code/main)\n==11408== \n==11408== Invalid read of size 4\n==11408==    at 0x483FE24: wcslen (vg_replace_strmem.c:1868)\n==11408==    by 0x1094AE: make_arr (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==    by 0x1092C1: main (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==  Address 0x4a86878 is 0 bytes after a block of size 680 alloc'd\n==11408==    at 0x4839D7B: realloc (vg_replace_malloc.c:826)\n==11408==    by 0x109410: read_str (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==    by 0x109296: main (in /home/nikita/GitHub/Course-work/Code/main)\n==11408== \n==11408== Invalid free() / delete / delete[] / realloc()\n==11408==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==11408==    by 0x1092E5: main (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==  Address 0x4a865d0 is 0 bytes inside a block of size 680 free'd\n==11408==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==11408==    by 0x1096B7: make_arr (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==    by 0x1092C1: main (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==  Block was alloc'd at\n==11408==    at 0x4839D7B: realloc (vg_replace_malloc.c:826)\n==11408==    by 0x109410: read_str (in /home/nikita/GitHub/Course-work/Code/main)\n==11408==    by 0x109296: main (in /home/nikita/GitHub/Course-work/Code/main)\n==11408== \n</code></pre>\n\n<p>Where is my mistakes? Why it works strange with dynamic array of structs?</p>\n\n<p>It's temp from main:</p>\n\n<pre><code>wchar_t *temp;\n</code></pre>\n"}, {"tags": ["c", "string", "pointers", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 2558, "user_id": 527088, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5859af3feb3e6929ff46501982fa812e?s=128&d=identicon&r=PG", "display_name": "Hack Saw", "link": "https://stackoverflow.com/users/527088/hack-saw"}, "edited": false, "score": 0, "creation_date": 1543993663, "post_id": 53626724, "comment_id": 94113556, "body": "The functions return a string, but your call of the function doesn&#39;t store the returned string. Also, your realloc in strconcat seems to make the source string the size of the destination string, instead of the size of both strings."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543995158, "post_id": 53626724, "comment_id": 94114230, "body": "Not to mention if <code>atoi(argv[1])</code> fails. <code>atoi</code> provides zero error reporting. Use <code>strtol</code> instead and validate the conversion before creating the VLA of pointers."}], "answers": [{"tags": [], "owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 0, "last_activity_date": 1543993492, "last_edit_date": 1543993492, "creation_date": 1543993048, "answer_id": 53626800, "question_id": 53626724, "link": "https://stackoverflow.com/questions/53626724/c-incorporating-realloc-with-string-pointers/53626800#53626800", "title": "C- Incorporating realloc with string pointers", "body": "<p>One <em>major</em> problem is how you read the string:</p>\n\n<pre><code>scanf(\"%s\", &amp;pstring[b])\n</code></pre>\n\n<p>Here <code>pstring[b]</code> is of type <code>char *</code>, and due to the <code>malloc</code> call it points to some memory (unless <code>malloc</code> fails, which you forget to check for).</p>\n\n<p><strong><em>But</em></strong> <code>&amp;pstring[b]</code> is a pointer <em>to the pointer</em>, and is of type <code>char **</code>. This is hardly what you want, and will cause <code>scanf</code> to write to memory somewhere it wasn't supposed to write, and can even write out of bounds of allocated memory. This of course leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a>.</p>\n\n<p>Once you solve that, you need to remember that <code>char</code> strings in C are really called <strong><em>null-terminated</strong> byte strings</em>. The <em>null-terminator</em> is what all standard string functions look for to find the end of the string. Of course, that means that a string for <code>x</code> characters needs space for <code>x + 1</code> to fit the terminator. So if the user says he or she want a string of length <code>6</code> (for example) and then give <code>foobar</code> as input, that needs space for <em><code>7</code></em> characters with the terminator. This terminator problem (or rather missing to allocate space for it) you have in other places as well (like the <code>strcopy</code> function).</p>\n\n<p>Your <code>scanf</code> call also doesn't hinder the user to input a string longer that the user said. If the user said that the string should be <code>3</code> characters, but then enter <code>foobar</code>, that will write out of bounds. Unfortunately there's no way to solve this with only <code>scanf</code>, as the field width modifier must be part of the format string. You could use the <code>scanf_s</code> function which solves this problem, but it's not mandated by the C specification, and needs you to define a specific macro for it to be available if the implementation have it (see e..g <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\">this <code>scanf</code> and family reference</a> for details). Otherwise you need to programatically construct the format string to include a field width.</p>\n\n<p>You <em>also</em> do <code>free(pstring)</code> which is invalid, since you didn't allocate <code>pstring</code> itself, it's an array. You do need to loop over all the strings <em>in</em> the array <code>pstring</code> and <code>free</code> them. Trying to pass a pointer not returned by <code>malloc</code> (et al) to <code>free</code> also leads to <em>undefined behavior</em>.</p>\n\n<p>Lastly, in C you <a href=\"https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858\">should not cast the result of <code>malloc</code> (and related functions)</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 10747632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b47527ecdd3d2a06ff981a41b89e8f?s=128&d=identicon&r=PG&f=1", "display_name": "Sinclair ", "link": "https://stackoverflow.com/users/10747632/sinclair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543993492, "creation_date": 1543992758, "question_id": 53626724, "link": "https://stackoverflow.com/questions/53626724/c-incorporating-realloc-with-string-pointers", "title": "C- Incorporating realloc with string pointers", "body": "<p>I'm working on a problem about modifying strings with dynamic memory allocation. The applicable parts of my code are as follows: </p>\n\n<pre><code>./dma 5\n    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n\nchar* strcopy(char* destination, char* source);\nchar *strconcat(char* destination, char* source);\n\nint main(int argc, char *argv[]) {\n\nint cmd, a=1, b, length_of_str, n, n2;\nchar* pstring[atoi(argv[1])];\n\nfor (b=0; b&lt;atoi(argv[1]); b++) {\n    printf(\"Enter the length of string %d: \", b+1);\n    scanf(\"%d\", &amp;length_of_str);\n    pstring[b]=(char *)malloc(length_of_str*sizeof(char));\n    printf(\"Please enter string %d: \", b+1);\n    scanf(\"%s\", &amp;pstring[b]);\n}\n\nwhile (a!=0) {\nprintf(\"Your strings are: \\n\");\nfor (b=0; b&lt;atoi(argv[1]); b++) {\n    printf(\"String number %d - \\\"%s\\\"\\n\", b+1, &amp;pstring[b]);\n}\n\nprintf(\"Options:\\n\");\nprintf(\"1 - Find string length\\n\");\nprintf(\"2 - Compare strings\\n\");\nprintf(\"3 - Copy strings\\n\");\nprintf(\"4 - Concatenate strings\\n\");\nprintf(\"5 - Quit\\n\");\nprintf(\"Please enter your option: \");\nscanf(\"%d\", &amp;cmd);\n\nswitch (cmd) {\n\ncase 3:\n    printf(\"Enter the number of the source string: \");\n    scanf(\"%d\", &amp;n); \n    printf(\"Enter the number of the destination string: \");\n    scanf(\"%d\", &amp;n2);\n    strcopy(pstring[n-1], pstring[n2-1]);\n    break;\ncase 4:\n    printf(\"Enter the number of the source string: \");\n    scanf(\"%d\", &amp;n); \n    printf(\"Enter the number of the destination string: \");\n    scanf(\"%d\", &amp;n2);\n    strconcat(pstring[n-1], pstring[n2-1]);\n    break;\ncase 5:\n    a=0;\n    break;\ndefault:\n    printf(\"Invalid Option.\\n\");\n    break;\n}\n}\n\nfree(pstring);\nreturn 0; \n}\nchar* strcopy(char* destination, char* source) {\ndestination=(char *)realloc(*source, sizeof(char)*strlength(destination));\nfor (; *source!='\\0'; source++) {\n    *destination=*source;\n    destination++;\n    }\n*destination='\\0';\nreturn destination;\n}\n\nchar* strconcat(char* destination, char* source) {\ndestination=(char *)realloc(*source, sizeof(char)*strlength(destination));\nfor (; *destination!='\\0'; destination++) {\n    }\nfor (; *source!='\\0'; source++) {\n    *destination=*source;\n    destination++;\n    }\n*destination='\\0';\nreturn destination;\n}\n</code></pre>\n\n<p>I need to incorporate realloc into my concatenation and copy functions (which should be fine since they worked in a separate problem). I've tried a number of ways and I've tried different syntax but I only seem to get segmentation faults or invalid pointers. How exactly am I supposed to incorporate realloc? The intended result should look like this:</p>\n\n<pre><code>Your strings are:\nString number 1 \u2013 \u201cfirst\u201d\nString number 2 \u2013 \u201csecond\u201d\nString number 3 \u2013 \u201cthird\u201d\nString number 4 \u2013 \u201cfourth\u201d\nString number 5 \u2013 \u201cfifth\u201d\nOptions:\n1 \u2013 Find string length\n2 \u2013 Compare strings\n3 \u2013 Copy strings\n4 \u2013 Concatenate strings\n5 \u2013 Quit\nPlease enter your option: 3\nEnter the number of the source string: 2\nEnter the number of the destination string: 5\nYour strings are:\nString number 1 \u2013 \u201cfirst\u201d\nString number 2 \u2013 \u201csecond\u201d\nString number 3 \u2013 \u201cthird\u201d\nString number 4 \u2013 \u201cfourth\u201d\nString number 5 \u2013 \u201csecond\u201d\nOptions:\n1 \u2013 Find string length\n2 \u2013 Compare strings\n3 \u2013 Copy strings\n4 \u2013 Concatenate strings\n5 \u2013 Quit\nPlease enter your option:\n</code></pre>\n"}, {"tags": ["c", "string", "function", "return"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "reply_to_user": {"reputation": 364, "user_id": 7509749, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rxLEX6MIjCI/AAAAAAAAAAI/AAAAAAAACFo/gjdXg-DjNj8/photo.jpg?sz=128", "display_name": "Luv", "link": "https://stackoverflow.com/users/7509749/luv"}, "edited": false, "score": 3, "creation_date": 1543992032, "post_id": 53626487, "comment_id": 94112878, "body": "@Luv: they are returning a string literal, that has static storage duration."}, {"owner": {"reputation": 364, "user_id": 7509749, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-rxLEX6MIjCI/AAAAAAAAAAI/AAAAAAAACFo/gjdXg-DjNj8/photo.jpg?sz=128", "display_name": "Luv", "link": "https://stackoverflow.com/users/7509749/luv"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1543992305, "post_id": 53626487, "comment_id": 94113004, "body": "@Mat you are right. The problem seems to be the free here"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1543992555, "post_id": 53626487, "comment_id": 94113112, "body": "WHat does the function return if n &gt; 1 ? This is relevant."}, {"owner": {"reputation": 45, "user_id": 6386408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f2abaceff27ce1cfc9cceab8fe262c6?s=128&d=identicon&r=PG&f=1", "display_name": "Lachlan", "link": "https://stackoverflow.com/users/6386408/lachlan"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1543993300, "post_id": 53626487, "comment_id": 94113386, "body": "@Jabberwocky It returns the correct answer (the expected strings in the Test function) .  I pass those tests, its just the -1 test I fail but now I know this was due to the free statement.  That&#39;s why that code is irrelevant"}], "answers": [{"tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1543993175, "last_edit_date": 1543993175, "creation_date": 1543992331, "answer_id": 53626619, "question_id": 53626487, "link": "https://stackoverflow.com/questions/53626487/error-when-returning-a-string-from-a-function/53626619#53626619", "title": "Error when returning a string from a function", "body": "<p>The challenge seem to require that the function returns a dynamic allocated string. This can be seen from:</p>\n\n<pre><code>char* actual = sc(n);\n...\nfree(actual);  // free is for dynamic allocated memory\n</code></pre>\n\n<p>Therefore the function must use a <code>malloc</code> type function to allocate the string. <code>strdup</code> does that, i.e. it allocates dynamic memory and makes a copy of the string (i.e. <code>\"\"</code> in this code)  into that memory.</p>\n\n<p>Just doing <code>return \"\";</code> will return the address to a string (i.e. <code>\"\"</code>) with static storage duration, i.e. some memory that can't be freed. Calling <code>free</code> on memory with static storage duration leads to undefined behavior which may be a program crash.</p>\n"}, {"tags": [], "owner": {"reputation": 1805, "user_id": 6284997, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/1376431542382698/picture?type=large", "display_name": "MayurK", "link": "https://stackoverflow.com/users/6284997/mayurk"}, "is_accepted": false, "score": 2, "last_activity_date": 1543992436, "creation_date": 1543992436, "answer_id": 53626644, "question_id": 53626487, "link": "https://stackoverflow.com/questions/53626487/error-when-returning-a-string-from-a-function/53626644#53626644", "title": "Error when returning a string from a function", "body": "<p>The fucntion sc() is returning a string constant \"\". String constants automatically allocated in a separate memory.</p>\n\n<p>sc() is returning address of this string constant. In do test(), you are storing the address in actual variable and freeing it.</p>\n\n<p>You are not suppose to free that memory. Just remove <code>free(actual);</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1543993069, "last_edit_date": 1543993069, "creation_date": 1543992594, "answer_id": 53626677, "question_id": 53626487, "link": "https://stackoverflow.com/questions/53626487/error-when-returning-a-string-from-a-function/53626677#53626677", "title": "Error when returning a string from a function", "body": "<p>For usage of <code>free()</code>, from <code>C11</code>, chapter \u00a77.22.3.3 (<em>emphasis mine</em>)</p>\n\n<blockquote>\n  <p>The <code>free</code> function causes the space pointed to by <code>ptr</code> to be deallocated, that is, made\n  available for further allocation. If <code>ptr</code> is a null pointer, no action occurs. Otherwise, <strong>if\n  the argument does not match a pointer earlier returned by a memory management\n  function,</strong> or if the space has been deallocated by a call to <code>free</code> or <code>realloc</code>, <strong>the\n  behavior is undefined.</strong></p>\n</blockquote>\n\n<p>and, for <a href=\"https://linux.die.net/man/3/strdup\" rel=\"nofollow noreferrer\"><code>strdup()</code></a> (<em>again emphasis mine</em>)</p>\n\n<blockquote>\n  <p>The <code>strdup()</code> function returns a pointer to a new string which is a duplicate of the string <code>s</code>. <strong>Memory for the new string is obtained with <code>malloc()</code>, and can be freed with <code>free()</code>.</strong></p>\n</blockquote>\n\n<p>So, when you use <code>return strdup(\"\");</code>, the pointer which is returned is eligible to be passed to <code>free()</code> - everything is alright.</p>\n\n<p>OTOH, by saying <code>return \"\";</code>, you're returning a pointer to the first element of a string literal which is not a suitable candidate to be passed to <code>free()</code>, as mentioned above, it invokes <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behaviour</a>.</p>\n\n<p>The crash or segmentation fault is <strong><em>one of the many</em></strong> side effects of UB.</p>\n"}], "owner": {"reputation": 45, "user_id": 6386408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f2abaceff27ce1cfc9cceab8fe262c6?s=128&d=identicon&r=PG&f=1", "display_name": "Lachlan", "link": "https://stackoverflow.com/users/6386408/lachlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 53626677, "answer_count": 3, "score": 1, "last_activity_date": 1543993175, "creation_date": 1543991789, "last_edit_date": 1543993036, "question_id": 53626487, "link": "https://stackoverflow.com/questions/53626487/error-when-returning-a-string-from-a-function", "title": "Error when returning a string from a function", "body": "<p>This is from a Codewars challenge so I'll leave out unnecessary code from this function.  Basically if <code>n &lt;= 1</code>, I need to return an empty string.</p>\n\n<pre><code>char* sc(int n)\n{\n    if(n &gt; 1) {\n        //irrelevant code\n    }\n\n    //return strdup(\"\");\n    return \"\";\n}\n</code></pre>\n\n<p>If the value being passed is <code>-1</code>, when I use <code>return \"\";</code> I get a \"Test crashed\" message but when I use <code>return strdup(\"\");</code> I pass the test.  Just wondering why this is?</p>\n\n<p>Edit:\nThis is how the function is called.  It is only the last test that fails.</p>\n\n<pre><code>#include &lt;criterion/criterion.h&gt;\n#include &lt;string.h&gt;\n\nchar* sc(int);\n\nvoid dotest(int n, const char* expect)\n{\n  char* actual = sc(n);\n  cr_expect(!strcmp(actual, expect), \"Expected: '%s', got: '%s'\\n\", expect, actual);\n  free(actual);\n}\n\nTest(the_multiply_function, should_pass_all_the_tests_provided) {\n    dotest(2,\"Aa~ Pa! Aa!\");\n    dotest(6, \"Aa~ Aa~ Aa~ Aa~ Aa~ Pa! Aa!\");\n    dotest(7, \"Aa~ Aa~ Aa~ Aa~ Aa~ Aa~ Pa!\");\n    dotest(10, \"Aa~ Aa~ Aa~ Aa~ Aa~ Aa~ Aa~ Aa~ Aa~ Pa!\");\n    dotest(1, \"\");\n    dotest(-1, \"\");\n}\n</code></pre>\n"}, {"tags": ["c", "objective-c", "hid"], "comments": [{"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "edited": false, "score": 0, "creation_date": 1543992368, "post_id": 53626439, "comment_id": 94113032, "body": "you mean want to call objective-c function inside C function as callback ?? or you looking something related to <a href=\"https://stackoverflow.com/questions/7190852/using-iohidmanager-to-get-modifier-key-events\">this</a>"}, {"owner": {"reputation": 1, "user_id": 10747787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cc2ea84253c4c2a0ee77be8913ec33?s=128&d=identicon&r=PG&f=1", "display_name": "Marlin Liggett", "link": "https://stackoverflow.com/users/10747787/marlin-liggett"}, "reply_to_user": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "edited": false, "score": 0, "creation_date": 1543993425, "post_id": 53626439, "comment_id": 94113441, "body": "I&#39;ve just checked that <a href=\"https://stackoverflow.com/questions/7190852/using-iohidmanager-to-get-modifier-key-events\">post</a>. I just want to match the objective-c function to the callback in <code>IOHIDManagerRegisterInputValueCallback</code>."}], "owner": {"reputation": 1, "user_id": 10747787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97cc2ea84253c4c2a0ee77be8913ec33?s=128&d=identicon&r=PG&f=1", "display_name": "Marlin Liggett", "link": "https://stackoverflow.com/users/10747787/marlin-liggett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "closed_date": 1543996819, "answer_count": 0, "score": 0, "last_activity_date": 1543991576, "creation_date": 1543991576, "question_id": 53626439, "link": "https://stackoverflow.com/questions/53626439/c-callback-function-to-objective-c", "closed_reason": "Duplicate", "title": "c callback function to objective-c", "body": "<p>I am using xcode 9 in osx 13 (High Sierra). I wanted to create device manager (osx console executable) by using hid api.</p>\n\n<p>So I've used <code>IOHIDManagerCreate</code> function like the following:</p>\n\n<p><code>manager = IOHIDManagerCreate(kCFAllocatorDefault, kIOHIDManagerOptionNone);</code></p>\n\n<p>After that, I used <code>IOHIDManagerSetDeviceMatching</code> function to match the device to <code>manager</code>.</p>\n\n<p>And I tried to <code>IOHIDManagerRegisterInputValueCallback</code> function to register the callback. But I'am using objective-c now.</p>\n\n<p>How can I register the objective-c callback to <code>IOHIDManagerRegisterInputValueCallback</code> function, not the c callback function?</p>\n\n<p>e.g. <code>IOHIDManagerRegisterInputValueCallback(manager, [DeviceController MyCallback], nil);</code> like this.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 4, "creation_date": 1543991201, "post_id": 53626346, "comment_id": 94112575, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9210528/split-string-with-delimiters-in-c\">Split string with delimiters in C</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1543994463, "post_id": 53626346, "comment_id": 94113898, "body": "In order to read your argument as a single string in Linux -- you must <b>quote</b> the string, e.g. <code>&quot;10 20 30, 20 54 12, 31 42 51&quot;</code> -- then you can split <code>argv[1]</code> on the <code>&#39;,&#39;</code> delimiters. Otherwise you end up with 9 program arguments (two of which have a <code>&#39;,&#39;</code> tacked onto the end)"}, {"owner": {"reputation": 63, "user_id": 10747782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d18a15e502477d6b7f77d4845da3e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/10747782/andrew"}, "edited": false, "score": 1, "creation_date": 1544115590, "post_id": 53626346, "comment_id": 94170949, "body": "Thank you everyone for your support! :D"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10747782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d18a15e502477d6b7f77d4845da3e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/10747782/andrew"}, "edited": false, "score": 1, "creation_date": 1544115533, "post_id": 53627030, "comment_id": 94170923, "body": "Thank you very much for your help. I finally sorted it out!"}], "tags": [], "owner": {"reputation": 372, "user_id": 10669066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zo0wL.jpg?s=128&g=1", "display_name": "Holy semicolon", "link": "https://stackoverflow.com/users/10669066/holy-semicolon"}, "is_accepted": true, "score": 0, "last_activity_date": 1543994102, "creation_date": 1543994102, "answer_id": 53627030, "question_id": 53626346, "link": "https://stackoverflow.com/questions/53626346/separating-a-string-into-a-substring-then-that-substring-into-another-string-in/53627030#53627030", "title": "Separating a string into a substring then that substring into another string in C", "body": "<p>Here I make this code to separate the arguments into a substring.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nint main()\n{\n    char *str = \"10 20 30, 20 54 12, 31 42 51\";\n    char **a = calloc(sizeof(char*),strlen(str));\n    int x = 0;\n    int y = 0;\n    int i = 0;\n\n    while (str[i] != '\\0')\n    {\n        x = 0;\n        a[y] = calloc(sizeof(char),9);\n        while(str[i] != ',' &amp;&amp; str[i] != '\\0')\n        {\n            a[y][x] = str[i];\n            i++;\n            x++;\n        }\n        y++;\n        i += 2;\n    }\n    //this code below for test\n    y--;\n    for (int t = 0; t &lt; y; t++)\n            printf(\"%s\\n\",a[t]);\n\n}\n</code></pre>\n\n<p>now try to make the other one :).</p>\n"}], "owner": {"reputation": 63, "user_id": 10747782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d18a15e502477d6b7f77d4845da3e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/10747782/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53627030, "answer_count": 1, "score": 0, "last_activity_date": 1543994102, "creation_date": 1543991114, "last_edit_date": 1543991289, "question_id": 53626346, "link": "https://stackoverflow.com/questions/53626346/separating-a-string-into-a-substring-then-that-substring-into-another-string-in", "title": "Separating a string into a substring then that substring into another string in C", "body": "<p>I have to read the arguments that I introduce when I run a program on linux.</p>\n\n<pre><code>./myprog 10 20 30, 20 54 12, 31 42 51\n</code></pre>\n\n<p>I have a problem finding out how to separate the arguments into a substring and then that substring in other string.</p>\n\n<pre><code>10 20 30, 20 54 12, 31 42 51\n</code></pre>\n\n<p>I want to separate this string into another string with \",\" being the separator and then that substring to separate into another string with \" \" being the separator.</p>\n\n<pre><code> a[0]=\"10 20 30\"\n a[1]=\"20 55 12\"\n a[2]=\"31 42 51\"\n</code></pre>\n\n<p>Then I want it to be like that:</p>\n\n<pre><code> b[0]=\"10\" b[1]=\"20\" b[2]=\"30\" and so on...\n</code></pre>\n"}, {"tags": ["c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1543991108, "post_id": 53626312, "comment_id": 94112548, "body": "Can you tell me why you think that code should reverse an array?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1543991124, "post_id": 53626312, "comment_id": 94112551, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 2, "creation_date": 1543991208, "post_id": 53626312, "comment_id": 94112579, "body": "Just take a paper sheet and a pencil, and follow the algo <i>by hand</i>. The cause will be self evident (a[1] and a[0] have already been changed when you use them)."}], "answers": [{"comments": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1543991316, "post_id": 53626352, "comment_id": 94112618, "body": "Hmm, if you use swapping (which is good here) you only need to process half of the array..."}, {"owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1543991454, "post_id": 53626352, "comment_id": 94112662, "body": "Ah, yeah I forgot you need to change n. Also you should be using a for loop for this"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 2, "creation_date": 1543992794, "post_id": 53626352, "comment_id": 94113192, "body": "Chuckling... yes, it&#39;s a real shocker to swap over the full array only to end up right back where you started <code>:)</code>"}], "tags": [], "owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "is_accepted": false, "score": 2, "last_activity_date": 1543991474, "last_edit_date": 1543991474, "creation_date": 1543991145, "answer_id": 53626352, "question_id": 53626312, "link": "https://stackoverflow.com/questions/53626312/unexpected-output-for-rerverse-array-element-using-pointer/53626352#53626352", "title": "unexpected output for rerverse array element using pointer", "body": "<pre><code>while(j != n)\n{   \n    a[j] = *(ptr+i);\n    j++;\n    i--;\n}\n</code></pre>\n\n<p>This isn't actually swapping the two values. It's simple setting the first half. In order to swap them you'd add a line like:</p>\n\n<pre><code>while(j != n / 2)\n{   \n    int temp = a[j];\n    a[j] = *(ptr+i);\n    *(ptr + i) = temp;\n    j++;\n    i--;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "edited": false, "score": 0, "creation_date": 1543992785, "post_id": 53626453, "comment_id": 94113188, "body": "Instead just mark negative, have patience to put a comment, so that will help some one.. Read question and my answer.. suggest why it&#39;s not right answer"}, {"owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 1, "creation_date": 1544017056, "post_id": 53626453, "comment_id": 94126559, "body": "Your answer is needlessly complex for his solution, and is inefficient"}, {"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "reply_to_user": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1544065386, "post_id": 53626453, "comment_id": 94146990, "body": "@MatthewKerian i don&#39;t think the question talks about efficiency and more over he want achieve with pointers. In that context is the solution is wrong ?"}, {"owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1544072088, "post_id": 53626453, "comment_id": 94148488, "body": "If I asked you the directions to a restaraunt down the street would you take me all over the place? For arrays you&#39;re always using pointers"}, {"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "reply_to_user": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1544076789, "post_id": 53626453, "comment_id": 94149696, "body": "@MatthewKerian off-course yes if all the roads blocked or customer wants. Is that the crime ??"}, {"owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1544077450, "post_id": 53626453, "comment_id": 94149900, "body": "Except in this case there was a wide open rode he wanted to take that you ignored. The other answer posted solves it much cleaned while also being more efficient"}, {"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "reply_to_user": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1544077618, "post_id": 53626453, "comment_id": 94149972, "body": "that Edited with note, but if you don&#39;t know <code>xor operation</code>, it means is not cleaner ??"}, {"owner": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1544080552, "post_id": 53626453, "comment_id": 94151069, "body": "<a href=\"https://stackoverflow.com/questions/36906/what-is-the-fastest-way-to-swap-values-in-c\" title=\"what is the fastest way to swap values in c\">stackoverflow.com/questions/36906/&hellip;</a>"}, {"owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "reply_to_user": {"reputation": 783, "user_id": 8890692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d73b1bb439acfca597990e5eea101a?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew Kerian", "link": "https://stackoverflow.com/users/8890692/matthew-kerian"}, "edited": false, "score": 0, "creation_date": 1544081098, "post_id": 53626453, "comment_id": 94151266, "body": "That&#39;s comes when efficiency matters not the methods to explore."}], "tags": [], "owner": {"reputation": 1052, "user_id": 3698648, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/199b49d13342baa233c08aac5793ed4d?s=128&d=identicon&r=PG&f=1", "display_name": "ntshetty", "link": "https://stackoverflow.com/users/3698648/ntshetty"}, "is_accepted": false, "score": -1, "last_activity_date": 1544077474, "last_edit_date": 1544077474, "creation_date": 1543991625, "answer_id": 53626453, "question_id": 53626312, "link": "https://stackoverflow.com/questions/53626312/unexpected-output-for-rerverse-array-element-using-pointer/53626453#53626453", "title": "unexpected output for rerverse array element using pointer", "body": "<p>In your code you are overwriting the values..</p>\n\n<p>In order to reverse numbers in place by using pointers, replace the <code>while-loop</code> as below in your code.  </p>\n\n<pre><code>int* ptr_start = a;\nint* ptr_end = a + (sizeof(a) / sizeof(a[0])) - 1;\n while (ptr_start &lt; ptr_end) {\n        *ptr_end   ^= *ptr_start;\n        *ptr_start ^= *ptr_end ;\n        *ptr_end   ^= *ptr_start;\n        ptr_start++;\n        ptr_end--;\n      }\n</code></pre>\n\n<p><strong>Note:</strong> There will be an -ve impact on performance.    </p>\n"}], "owner": {"reputation": 44, "user_id": 9554058, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tOOr_Uv__0M/AAAAAAAAAAI/AAAAAAAACXI/8XFCzkQpMbs/photo.jpg?sz=128", "display_name": "Joy Kumar Bera", "link": "https://stackoverflow.com/users/9554058/joy-kumar-bera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1544077474, "creation_date": 1543990927, "question_id": 53626312, "link": "https://stackoverflow.com/questions/53626312/unexpected-output-for-rerverse-array-element-using-pointer", "title": "unexpected output for rerverse array element using pointer", "body": "<p>I want to reverse an array element using pointer But\nwhy i getting out-put as 4 3 3 4\nwhen i  give input 1 2 3 4</p>\n\n<p>here my code </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char const *argv[])\n{\n    int n, a[100], *ptr;\n    printf(\"enter array size: \");   \n    scanf(\"%d\",&amp;n);\n    printf(\"enter array element: \");\n    for(int i=0; i&lt;n; i++)\n    {\n        scanf(\"%d\",&amp;a[i]);\n    }\n\n    ptr = &amp;a[0];\n    int j=0;\n    int i = n-1;\n\n    while(j != n)\n    {   \n        a[j] = *(ptr+i);\n        j++;\n        i--;\n    }\n\n    // for printing output\n\n    printf(\"\\nin reverse: \\n\");\n    for(int k=0; k&lt;n; k++)\n    {\n        printf(\"%d, \",a[k]);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>can anybody tell me what is the problem here ?</p>\n"}, {"tags": ["c", "linux", "exception", "process", "kernel"], "answers": [{"comments": [{"owner": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "edited": false, "score": 0, "creation_date": 1543995028, "post_id": 53626942, "comment_id": 94114166, "body": "So in step 11, do u mean Kernel knows that there was an SIGINT signal and resume the process? But how does Kernel know that? since the pending bit has been cleared? Does it mean that Kernel also manage a history of signals it sends?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "edited": false, "score": 0, "creation_date": 1543995331, "post_id": 53626942, "comment_id": 94114324, "body": "@amjad The kernel knows that because the code that&#39;s running at that time is the signal dispatcher. At step 5, the kernel&#39;s signal dispatcher was invoked in kernel mode for that process. When 9 and 10 happens, they return to the code that was just running in step 5 and step 11 is the next thing that code does."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "edited": false, "score": 0, "creation_date": 1543995395, "post_id": 53626942, "comment_id": 94114359, "body": "The code for the kernel&#39;s signal dispatcher is something like: 1) Check if the signal is caught. 2) If so, arrange to invoke the handler. 3) Return to userspace. (then userspace does stuff and returns to kernel space) 4) Decide whether to resume the system call or not. It&#39;s a function call. Userspace does steps 7-9, 10 transitions back to kernel."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1543993660, "creation_date": 1543993660, "answer_id": 53626942, "question_id": 53626179, "link": "https://stackoverflow.com/questions/53626179/receiving-sigint-and-exception-handles-in-linux/53626942#53626942", "title": "Receiving SIGINT and exception Handles in Linux", "body": "<p>Your understanding is correct.</p>\n\n<p>Think about it. The process is blocked in the kernel. We need to return to user space to run the handler. How can we do that without interrupting whatever blocking kernel call was running? We only have one process/thread context to work with here. The process can't be both sleeping and running a signal handler.</p>\n\n<p>The sequence is:</p>\n\n<ol>\n<li>Process blocks in some blocking kernel call.</li>\n<li>Signal is sent to it.</li>\n<li>Bit is set, process is made ready-to-run.</li>\n<li>Process resumes running in kernel mode, checks for pending non-blocked signals.</li>\n<li>Signal dispatcher is invoked.</li>\n<li>Process context is modified to execute signal handler upon resumption.</li>\n<li>Process is resumed in user space</li>\n<li>Signal handler runs.</li>\n<li>Signal handler returns.</li>\n<li>Kernel is invoked by end of signal handler.</li>\n<li>Kernel makes decision whether to resume system call or return interruption error.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 25733, "user_id": 559737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5de249db6565b87a2699e131974268a?s=128&d=identicon&r=PG", "display_name": "Brendan", "link": "https://stackoverflow.com/users/559737/brendan"}, "is_accepted": false, "score": 2, "last_activity_date": 1543994348, "creation_date": 1543994348, "answer_id": 53627090, "question_id": 53626179, "link": "https://stackoverflow.com/questions/53626179/receiving-sigint-and-exception-handles-in-linux/53627090#53627090", "title": "Receiving SIGINT and exception Handles in Linux", "body": "<blockquote>\n  <p>Q3- Since SIGINT's corresponging pending bit is cleared, then how can sleep() function gets return?</p>\n</blockquote>\n\n<p>Imagine the <code>sleep()</code> function in the kernel as a function that:</p>\n\n<ul>\n<li>allocates and sets fields in some kind of \"timer event\" structure</li>\n<li>adds the \"timer event\" to a list of timer events for the timer's IRQ handler to worry about later (when the expiry time has elapsed)</li>\n<li>moves the task from the \"RUNNING\" state to the \"SLEEPING\" state (so the scheduler knows not to give the task CPU time), causing scheduler to do a task switch to some other task</li>\n<li>configures return parameters for user-space (the amount of time remaining or <code>0</code> if the time expired) </li>\n<li>figures out why the scheduler gave it CPU time again (did the time expire or was the sleep interrupted by a signal?)</li>\n<li>potentially mangles the stack a bit (so that the kernel returns to the signal handler if the <code>sleep()</code> was interrupted by a signal instead of returning to the code that called <code>sleep()</code>)</li>\n<li>returns to user-space</li>\n</ul>\n\n<p>Also imagine that there's a second function (that I'm going to call <code>wake()</code> for no particular reason) that:</p>\n\n<ul>\n<li>removes the \"timer event\" from the list of timer events (for the timer's IRQ handler to worry)</li>\n<li>moves the task from the \"SLEEPING\" state to the \"READY TO RUN\" state (so the scheduler knows that the task can be given CPU time again)</li>\n</ul>\n\n<p>Naturally, if the timer's IRQ handler notices that the \"timer event\" has expired then the timer's IRQ handler would call the <code>wake()</code> function to wake the task up again.</p>\n\n<p>Now imagine there's a third function (that I'm going to call <code>send_signal()</code>) which might be called by other functions (e.g. called by <code>kill()</code>). This function might set a \"pending signal\" flag for the task that's supposed to receive the signal, then check what state the receiving task is in; and if the receiving task is in the \"SLEEPING\" state it calls the <code>wake()</code> function to wake it up (and then lets the latter part of the <code>sleep()</code> function worry about delivering the signal back to user-space whenever the scheduler feels like giving the task CPU time later).</p>\n"}, {"comments": [{"owner": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "edited": false, "score": 0, "creation_date": 1544400209, "post_id": 53670061, "comment_id": 94251168, "body": "so when will Kernel block a signal? and what does another system call to unblock a signal mean? does it mean that when you make a system call, Kernel will unblock all signals?"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "edited": false, "score": 0, "creation_date": 1544420498, "post_id": 53670061, "comment_id": 94254907, "body": "kernel normally doesn&#39;t block a signal, a signal is a user feature.  Check <code>sigaction(2)</code> for the syscall to allow a process to block signals and hold them while accessing a critical region shared with the signal handler."}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "reply_to_user": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "edited": false, "score": 0, "creation_date": 1544420968, "post_id": 53670061, "comment_id": 94255036, "body": "A process in kernel mode that is awaken by means of a received signal, can simply detect this condition because the condition that should cause the <i>normal</i> awakening has not happened.  If it has, processing the signal as correct and all call the signal handler is possible upon return of system call, anyway.  In this case you don&#39;t get a <code>SIGINT</code>, but a normal ret value."}], "tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": true, "score": 2, "last_activity_date": 1544188179, "last_edit_date": 1592644375, "creation_date": 1544187493, "answer_id": 53670061, "question_id": 53626179, "link": "https://stackoverflow.com/questions/53626179/receiving-sigint-and-exception-handles-in-linux/53670061#53670061", "title": "Receiving SIGINT and exception Handles in Linux", "body": "<ul>\n<li><p><strong>Q1:</strong> the kernel checks if the process has blocked the received signal, if so, it updates the pending signal bit (unreliable, on systems with relable signals, this should be a counter) in the process entry, for the signal handler to be called when signals are unblocked again (see below).  If not blocked, the system call prepares the return value and <code>errno</code> value and returns to user mode with a special code installed in the program's virtual stack that makes it to call the signal handler (already in user mode) before returning from the generic <code>syscall</code> code.  The return from the system call gives <code>-1</code> to the caller code, and the <code>errno</code> variable is set to <code>EINTR</code>.  This requires the process to have installed a signal handler, because by default the action is to abort the process, so it will not return from the system call it is waiting on.  Think that when one says <em>the kernel</em> the actual code executed is in the system call being awaken and notified of the special condition (a signal received)  The interrupted call, detects that a signal handler is to be called, and prepares the user stack to jump to the proper place (the interrupt handler in user code) before returning from the <code>syscall()</code> wrapper.</p>\n</li>\n<li><p><strong>Q2:</strong> pending bit is <em>only</em> used to save that a pending signal handler is to be called, so this is not the case.  In the execution part of the process, the unix program loader installs some basic code to jump to the signal handler before returning from the system call.  This is because the signal handler has to execute in user mode (not in kernel mode) so everything happens upon termination of system call.  The signal handler executed is the <code>SIGINT</code>, but the code interrupted is a system call, and nothing happens until the system call returns (with the return code and the <code>errno</code> variable already fixed)</p>\n</li>\n<li><p><strong>Q3:</strong> well, your reasoning was based on a wrong premise, that is, <em>the interrupt pending flag is indicating that an interrupt has been received</em>.  This bit <strong>only</strong> signals that an unprocessed interrupt has been marked for delivery <strong>as soon as you unblock it</strong>, and this only happens in another system call (to unblock a signal).  As soon as the signal is unblocked, the return code of the <code>sigsetmask(2)</code> syscall will execute the signal handler.  In this case, the signal will be delivered to the process as soon as the timer elapses, the system call will be interrupted and, if you have not installed a signal handler for the  <code>SIGALRM</code> signal (but <code>sleep(2)</code> implementation does this ---at least, old implementations did) the program will be aborted.</p>\n</li>\n</ul>\n<h1>NOTE</h1>\n<p>When I say that the program is aborted by the kernel but in both cases, the signals involved (<code>SIGINT</code> and <code>SIGALRM</code>) don't make it to dump a core file.  The program is aborted without generating <code>core</code>.  <em>This is different to the behaviour of the <code>abort()</code> routine, which sends a <code>SIGABRT</code> and so, it makes de kernel to dump a core file of the process.</em></p>\n"}], "owner": {"reputation": 2896, "user_id": 9623401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fc011e4b0c3f14ea473726be49db282?s=128&d=identicon&r=PG&f=1", "display_name": "amjad", "link": "https://stackoverflow.com/users/9623401/amjad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 1, "accepted_answer_id": 53670061, "answer_count": 3, "score": 1, "last_activity_date": 1580457027, "creation_date": 1543990272, "last_edit_date": 1580457027, "question_id": 53626179, "link": "https://stackoverflow.com/questions/53626179/receiving-sigint-and-exception-handles-in-linux", "title": "Receiving SIGINT and exception Handles in Linux", "body": "<p>Let's say we have a program in C that uses the sleep() function</p>\n\n<p>The program executes and goes to sleep. Then we type <kbd>Ctrl</kbd>+<kbd>C</kbd> to send a SIGINT signal to the process.</p>\n\n<p>We know that the default action upon receipt of a SIGINT is to terminate the process, we also know that the sleep() function resume the process whenever the sleeping process receives a signal.</p>\n\n<p>And my textbook says in order to allow sleep() function to return, we must install a SIGINT handler like this:</p>\n\n<pre><code>void handler(int sig){\n    return; /* Catch the signal and return */\n}\n...\nint main(int argc, char **argv) {\n   ...\n   if (signal(SIGINT, handler) == SIG_ERR) /* Install SIGINT handler */\n      unix_error(\"signal error\\n\");\n   ...\n   sleep(1000)\n}\n</code></pre>\n\n<p>Althouth the code seems to be straightforward, I still have questions if I want to dig deeper:</p>\n\n<p>Background: When the process is sleeping and we type <kbd>Ctrl</kbd>+<kbd>C</kbd> to send SIGINT</p>\n\n<p>Q1-My understanding is, Kernel sends SIGINT to the process by updating the SIGINT's corresponging pending bit in the pend bit vector, is my understanding correct?</p>\n\n<p>Q2-The processor detects the existance of SIGINT, but since we overwrite the handler to make it return in stead of terminating the process, so our handler get executed, and then Kernel clears SIGINT's corresponging pending bit, is my understanding correct?</p>\n\n<p>Q3- Since SIGINT's corresponging pending bit is cleared, then how can sleep() function gets return? I think it should be in sleep still because in theory, sleep() function has no way of knowing the existance of SIGINT(has been cleared)</p>\n"}, {"tags": ["javascript", "c", "algorithm"], "comments": [{"owner": {"reputation": 13161, "user_id": 2498782, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4ed0cbcc27c492d6742337ac1ce0b19e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Guan", "link": "https://stackoverflow.com/users/2498782/eric-guan"}, "edited": false, "score": 2, "creation_date": 1543989475, "post_id": 53625977, "comment_id": 94111948, "body": "It should, based on my googling. In this link: <a href=\"http://download.redis.io/redis-stable/redis.conf\" rel=\"nofollow noreferrer\">download.redis.io/redis-stable/redis.conf</a>, it says &quot;A random number R between 0 and 1 is extracted.&quot;. It goes into more detail if you want to read it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1543990206, "post_id": 53625977, "comment_id": 94112192, "body": "Random observation: In the C code <code>r</code> is in [0,1] whereas in JS <code>r</code> is in [0,1)."}, {"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1543991587, "post_id": 53625977, "comment_id": 94112703, "body": "Are you sure that <code>LFU_INIT_VAL</code> is the same for both?"}, {"owner": {"reputation": 13161, "user_id": 2498782, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4ed0cbcc27c492d6742337ac1ce0b19e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Guan", "link": "https://stackoverflow.com/users/2498782/eric-guan"}, "edited": false, "score": 0, "creation_date": 1543993411, "post_id": 53625977, "comment_id": 94113436, "body": "Yes, it should be 5. <a href=\"https://github.com/antirez/redis/blob/c1689166b71f298aec40db877e125c76c178b0ba/src/server.h#L1912\" rel=\"nofollow noreferrer\">github.com/antirez/redis/blob/&hellip;</a>"}], "owner": {"reputation": 13161, "user_id": 2498782, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4ed0cbcc27c492d6742337ac1ce0b19e?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Guan", "link": "https://stackoverflow.com/users/2498782/eric-guan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1543999230, "creation_date": 1543989261, "last_edit_date": 1543999230, "question_id": 53625977, "link": "https://stackoverflow.com/questions/53625977/converting-c-function-into-javascript", "title": "Converting C function into Javascript", "body": "<p>FINAL EDIT: <strong>I'm wrong</strong>. Nothing in the Redis docs suggest that the counter only reaches 255 around 1 million. Just that by the time 1 million hits are reached, the counter is at 255. Case closed. Look no further.</p>\n\n<hr>\n\n<p>I'm trying to port <a href=\"https://redis.io/topics/lru-cache\" rel=\"nofollow noreferrer\">Redis' LFU algorithm</a> from C to JS. It uses a Morris Counter.</p>\n\n<p>Constants:</p>\n\n<p><code>LFU_INIT_VAL = 5</code>. Seen <a href=\"https://github.com/antirez/redis/blob/c1689166b71f298aec40db877e125c76c178b0ba/src/server.h#L1912\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><code>lfu_log_factor = 10</code>. Seen <a href=\"https://github.com/antirez/redis/search?q=CONFIG_DEFAULT_LFU_LOG_FACTOR&amp;unscoped_q=CONFIG_DEFAULT_LFU_LOG_FACTOR\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The C function, found <a href=\"https://github.com/antirez/redis/blob/a2131f907a752e62c78ea6bb719daf9fe2f91402/src/evict.c#L313-L323\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>/* Logarithmically increment a counter. The greater is the current counter value\n * the less likely is that it gets really implemented. Saturate it at 255. */\nuint8_t LFULogIncr(uint8_t counter) {\n    if (counter == 255) return 255;\n    double r = (double)rand()/RAND_MAX;\n    double baseval = counter - LFU_INIT_VAL;\n    if (baseval &lt; 0) baseval = 0;\n    double p = 1.0/(baseval*server.lfu_log_factor+1);\n    if (r &lt; p) counter++;\n    return counter;\n}\n</code></pre>\n\n<p>My JS port:</p>\n\n<pre><code>LFU_INIT_VAL = 5\nlfu_log_factor = 10\n\nfunction LFULogIncr(counter) {\n    if (counter == 255) return 255;\n    let r = Math.random();\n    let baseval = counter - LFU_INIT_VAL;\n    if (baseval &lt; 0) baseval = 0;\n    let p = 1.0/(baseval*lfu_log_factor+1);\n    if (r &lt; p) counter++;\n    return counter;\n}\n</code></pre>\n\n<p>Running the algorithm 1 million times, and recording the iteration index when the counter increments:</p>\n\n<pre><code>let hitFreq = 5\nfor (let i = 0; i &lt; 1000000; i++) {\n    let newHitFreq = LFULogIncr(hitFreq)\n    if (newHitFreq &gt; hitFreq) {\n        console.log(`New counter: ${newHitFreq}, i = ${i}`)\n    }\n    hitFreq = newHitFreq\n}\n</code></pre>\n\n<p>Based on this table which can be found in the link...</p>\n\n<pre><code>+--------+------------+------------+------------+------------+------------+\n| factor | 100 hits   | 1000 hits  | 100K hits  | 1M hits    | 10M hits   |\n+--------+------------+------------+------------+------------+------------+\n| 0      | 104        | 255        | 255        | 255        | 255        |\n+--------+------------+------------+------------+------------+------------+\n| 1      | 18         | 49         | 255        | 255        | 255        |\n+--------+------------+------------+------------+------------+------------+\n| 10     | 10         | 18         | 142        | 255        | 255        |\n+--------+------------+------------+------------+------------+------------+\n| 100    | 8          | 11         | 49         | 143        | 255        |\n+--------+------------+------------+------------+------------+------------+\n</code></pre>\n\n<p>According to the above table, with an <code>lfu_log_factor</code> of 10, when 1 million hits are reached, the counter should be 255. However, when running my JS code, the counter consistently reaches 255 in ~300k hits. What am I doing wrong?</p>\n\n<p>Here's the result of one run of the JS code, comparing the # of actual hits with the expected # of hits with a <code>factor</code> of 10:</p>\n\n<ul>\n<li><code>New counter: 10, i = 149</code> (Expected ~100, over by 49)</li>\n<li><code>New counter: 18, i = 652</code> (Expected ~1000, under by 348)</li>\n<li><code>New counter: 142, i = 96383</code> (Expected ~100k, under by 3617)</li>\n<li><code>New counter: 255, i = 275361</code> (Expected ~1M, under by 724,639 !!!)</li>\n</ul>\n\n<p><strong>EDIT:</strong> Hmmm... I'm getting the same results in C as I am in JS. A counter of 255 ends up with ~300k hits.</p>\n\n<p><a href=\"https://onlinegdb.com/Sy8Y8-SJN\" rel=\"nofollow noreferrer\">https://onlinegdb.com/Sy8Y8-SJN</a></p>\n\n<p>Either the table is wrong/outdated, or I'm conducting the test wrong, or the code is correct and I'm misinterpreting the results.</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1543989472, "post_id": 53625931, "comment_id": 94111945, "body": "Please try using English identifiers and comments, you will reach wider audience"}], "answers": [{"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": true, "score": 1, "last_activity_date": 1543989580, "creation_date": 1543989580, "answer_id": 53626049, "question_id": 53625931, "link": "https://stackoverflow.com/questions/53625931/how-to-handle-an-array-of-strings-in-c/53626049#53626049", "title": "How to handle an array of Strings in c", "body": "<p>For an array of strings you need a 2D array. Initially you can allocate it to a known number of tokens and <code>realloc</code> if required.</p>\n\n<pre><code>char ** tokens = malloc(noTokens * sizeof(char*));\n</code></pre>\n\n<p>Then you need to allocate memory for each token.</p>\n\n<pre><code>// Replace below line with\n// strncpy (tokens+zaehlertokens, input+lastspace, zaehler-lastspace-1);\n\ntokens[zaehlertokens] = malloc(zaehler + 1);\nstrncpy (tokens[zaehlertokens], input+lastspace, zaehler-lastspace-1);\ntokens[zaehlertokens][zaehler] = '\\0';  // null termination\n</code></pre>\n\n<p>If the memory initially allocated is not enough, you can reallocate it </p>\n\n<pre><code>if (zaehlertokens &gt;= noTokens)\n{\n    noTokens *= 2;\n    char ** tokens = realloc(noTokens * sizeof(char*));\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8558648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e33e426e33958ebc063cece87fe5f0d1?s=128&d=identicon&r=PG&f=1", "display_name": "user8558648", "link": "https://stackoverflow.com/users/8558648/user8558648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 53626049, "answer_count": 1, "score": 0, "last_activity_date": 1543989580, "creation_date": 1543988991, "question_id": 53625931, "link": "https://stackoverflow.com/questions/53625931/how-to-handle-an-array-of-strings-in-c", "title": "How to handle an array of Strings in c", "body": "<p>I have written a c program which is passed <code>*input</code> as parameter and should act as a shell. Thus, I need to split input into an array of strings which I am aiming to do in <code>char * tokens</code>. However, e.g. token+2 does not seem to refer to the whole String which I wanted to save at the second position in the array. Could you help me how I would need to change it? Thank you!</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n\nint parse(char *input)\n{   \n    char * tokens = (char *) malloc(1024);\n    //Zaehler, an welcher aktuellen Stelle im Array tokens das Token ist\n    int zaehlertokens=0;\n    //zaehler der Stelle im Array input:\n    int zaehler=0;\n    //Zaehler, welche Stelle im Array input die erste nach einem Leerzeichen war:\n    int lastspace=0;\n    while(input[zaehler]!='\\0')\n    {\n        //Input durchlaufen und bei Leerzeichen in Elemente aufteilen:\n        if(input[zaehler]==' ')\n        {\n            //Alle Buchstaben seit letzem Leerzeichen als neuen Eintrag in tokens speichern:\n            strncpy (tokens+zaehlertokens, input+lastspace, zaehler-lastspace-1);\n\n            zaehlertokens++;\n            lastspace=zaehler;\n            //damit umgehen, dass mehrere Leerzeichen nacheinander kommen:\n            while(input[zaehler]==' ')\n            {\n                zaehler++;\n                lastspace++;\n                printf(\"Leerzeichen. Zaehler: %i, Lastspace: %i\\n\", zaehler, lastspace);\n            }\n        }\n        //Zeiger auf das naechste Element im input Array\n        zaehler++;\n    }\n    //Wenn \\0 aufgetreten ist, muss das letzte Elemente noch als token gespeichert werden:\n    if(input[zaehler]=='\\0')\n    {\n        //Alle Buchstaben seit letzem Leerzeichen als neuen Eintrag in tokens speichern:\n        strncpy (tokens+zaehlertokens, input+lastspace, zaehler-lastspace-1);\n        zaehlertokens++;\n        lastspace=zaehler;\n    }\n\n    int zaehlerAusgabe=0;\n    ///Schleife, die die Befehle nacheinander ausgibt\n    printf(\"Vor Ausgabe. Zaehlertokens: %i\\n\", zaehlertokens);\n    while(zaehlerAusgabe&lt;zaehlertokens)\n    {\n        //row number:token\n        printf(\"%i: %s\\n\", zaehlerAusgabe, tokens+zaehlerAusgabe, sizeof(zaehlerAusgabe)+1+sizeof(tokens+zaehlerAusgabe));\n        fflush(stdout);\n        zaehlerAusgabe++;\n        //Ueberpruefen, ob exit eingegeben wurde:\n        printf(\"Comparison with exit, %s\\n\", tokens+zaehlerAusgabe-2 /*-1?*/);\n        if(strcmp(tokens+zaehlerAusgabe-1, \"exit\")==0)\n        {\n            printf(\"exit\\n\");\n            exiteingegeben=1;\n        }\n    }\n    return exiteingegeben;\n}\n</code></pre>\n"}, {"tags": ["c", "string", "sizeof"], "comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 3, "creation_date": 1543986396, "post_id": 53625458, "comment_id": 94111026, "body": "<code>sizeof</code> doesn&#39;t evaluate it&#39;s arguments, it just determines the size of the result. Hence the name. In other words, don&#39;t do that."}, {"owner": {"reputation": 603, "user_id": 4931620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54459cdef20530035b489929e0307cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Kumar Jha", "link": "https://stackoverflow.com/users/4931620/sunil-kumar-jha"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1543986466, "post_id": 53625458, "comment_id": 94111046, "body": "@user3386109 but isn&#39;t s++ implicitly increments s?"}, {"owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "edited": false, "score": 0, "creation_date": 1543986523, "post_id": 53625458, "comment_id": 94111062, "body": "10 printf and only 8 lines of output ?"}, {"owner": {"reputation": 603, "user_id": 4931620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54459cdef20530035b489929e0307cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Kumar Jha", "link": "https://stackoverflow.com/users/4931620/sunil-kumar-jha"}, "edited": false, "score": 0, "creation_date": 1543986558, "post_id": 53625458, "comment_id": 94111074, "body": "i didn&#39;t snip first 8"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 0, "creation_date": 1543986614, "post_id": 53625458, "comment_id": 94111094, "body": "I think what user... says is that for any expression <code>e</code> of type <code>t</code> the expression <code>e</code> is completely thrown away, and you just compute <code>sizeof(t)</code>."}, {"owner": {"reputation": 603, "user_id": 4931620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54459cdef20530035b489929e0307cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Kumar Jha", "link": "https://stackoverflow.com/users/4931620/sunil-kumar-jha"}, "edited": false, "score": 0, "creation_date": 1543986704, "post_id": 53625458, "comment_id": 94111119, "body": "@dyukha yes exactly"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1543986705, "post_id": 53625458, "comment_id": 94111121, "body": "Do not use <code>%d</code> to format <code>sizeof</code> values. Use <code>%zu</code>."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1543986871, "post_id": 53625458, "comment_id": 94111160, "body": "@user3386109: The operand of <code>sizeof</code> is evaluated if it is a variable length array type."}, {"owner": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1543987520, "post_id": 53625458, "comment_id": 94111340, "body": "Is not <code>sizeof</code> evaluated at compile time? See <a href=\"https://stackoverflow.com/a/2615205/2826535\">this answer</a>. Then it work as expected. It can not do something at runtime, since there is only a constant in the binary code."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1544013103, "post_id": 53625458, "comment_id": 94124169, "body": "@Julo: C 2018 6.5.3.4 2: \u201cIf the type of the operand is a variable length array type, the operand is evaluated; otherwise, the operand is not evaluated and the result is an integer constant.\u201d"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1544020203, "post_id": 53625458, "comment_id": 94128497, "body": "@Julo: Also the answer you link to is for C++. This is a C question."}, {"owner": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "reply_to_user": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1544027038, "post_id": 53625458, "comment_id": 94132883, "body": "@EricPostpischil as far as I know, there are things that are identical in C and C++. Are you saying, that the keyword <code>sizeof</code> is one that has different behaviour in C and C++? It is runtime evaluation in C? I know it is my mistake, since I did not have enough time to answer before I had to left to work."}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "edited": false, "score": 0, "creation_date": 1544030061, "post_id": 53625458, "comment_id": 94134676, "body": "@Julo: I quoted the C standard. That is authoritative. It says if the operand is a variable length array type, it is evaluated. The C++ answer is irrelevant to C, and, no, <code>sizeof</code> is not the same in C and C++, because C++ does not have variable length arrays."}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 4931620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54459cdef20530035b489929e0307cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Kumar Jha", "link": "https://stackoverflow.com/users/4931620/sunil-kumar-jha"}, "edited": false, "score": 1, "creation_date": 1543987153, "post_id": 53625527, "comment_id": 94111238, "body": "what do you mean by size of expression?size of variables it uses?"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1544002084, "post_id": 53625527, "comment_id": 94117542, "body": "It&#39;d likely be more appropriate to say &quot;sizeof(s=s+2) gives the size of the type of the expression (s=s+2)&quot;"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1544014620, "post_id": 53625527, "comment_id": 94125090, "body": "I&#39;m only suggesting a wording that is easier for people to understand. The very next sentence in the C standard is &quot; The size is determined from the type of the operand.&quot;"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1544015701, "post_id": 53625527, "comment_id": 94125760, "body": "Because the phrase &quot;size of expression&quot; is ambiguous. When someone not well versed in C see &quot;sizeof s = s+1&quot; , and are told sizeof yields the size of that expression, it is not at all clear to everyone what that means - even if it is obvious to you what it has to mean. Does it mean you get the code size of the expression ? Does it mean you get any temporary storage/stack size that expression might use ?"}, {"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "reply_to_user": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1544190354, "post_id": 53625527, "comment_id": 94198901, "body": "@nos: I added a note about the meaning of the size of an expression or type."}], "tags": [], "owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "is_accepted": true, "score": 1, "last_activity_date": 1544190334, "last_edit_date": 1544190334, "creation_date": 1543986651, "answer_id": 53625527, "question_id": 53625458, "link": "https://stackoverflow.com/questions/53625458/output-of-sizeof-not-as-expected/53625527#53625527", "title": "Output of sizeof() not as expected", "body": "<p><code>sizeof(s=s+2)</code> gives the size of the expression <code>(s=s+2)</code>. (The \u201csize\u201d of an expression or type is the number of bytes used to represent a value of that type, including padding.)</p>\n\n<p><code>(s=s+2)</code> is <code>s=s+2</code>.</p>\n\n<p>An assignment expression, besides setting the left operand to a value, has a value itself. That value is the value put into the left operand, and its type is the type of the left operand.</p>\n\n<p>The type of <code>s</code> is <code>char *</code> (pointer to <code>char</code>).</p>\n\n<p>So <code>sizeof(s=s+2)</code> is the size of a <code>char *</code>.</p>\n"}], "owner": {"reputation": 603, "user_id": 4931620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54459cdef20530035b489929e0307cf6?s=128&d=identicon&r=PG&f=1", "display_name": "Sunil Kumar Jha", "link": "https://stackoverflow.com/users/4931620/sunil-kumar-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1543987886, "accepted_answer_id": 53625527, "answer_count": 1, "score": 0, "last_activity_date": 1544190334, "creation_date": 1543986189, "last_edit_date": 1544001892, "question_id": 53625458, "link": "https://stackoverflow.com/questions/53625458/output-of-sizeof-not-as-expected", "closed_reason": "Duplicate", "title": "Output of sizeof() not as expected", "body": "<pre><code> #include &lt;stdio.h&gt;\n int main(void) \n {\n    // your code goes here\n    char *s = \"Hello world!\"; \n    printf(\"%d\\n\", sizeof(s=s+2)); \n    printf(\"%d\\n\", sizeof(++s)); \n    printf(\"%s\\n\",s);\n    printf(\"%s\\n\",s=s+3);\n    printf(\"%s\\n\",s++);\n    printf(\"%s\\n\",++s);\n    printf(\"%s\\n\",s++);\n    printf(\"%s\\n\",s++);\n    printf(\"%s\\n\",s++);\n    printf(\"%s\\n\",s++);\n    return 0; \n}\n</code></pre>\n\n<p>I know sizeof() operator takes operand as input(unary operator) and prints it's size.For eg. in case of pointers, it prints it's size say 4(based on machine),for data type it's respected size and so on for structure and union operands.But in above code <code>sizeof(s++)</code> and <code>sizeof(s=s+2)</code> isn't working as i expected.I thought next <code>printf(\"%s\",s)</code> would print the given string after skipping few characters but it didn't. Isn't s incremented inside when<code>sizeof(s=s+2)</code> like in the later <code>printf(\"%s\",++s)</code> statements.</p>\n\n<p><strong><em>Output</em></strong><br>\n8<br>\n8<br>\nHello world!<br>\nlo world!<br>\nlo world!<br>\n world!<br>\n world!<br>\nworld!<br>\norld!<br>\nrld!  </p>\n\n<p>What is wrong with this?</p>\n"}, {"tags": ["c", "c-preprocessor"], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 2, "last_activity_date": 1543986658, "creation_date": 1543986658, "answer_id": 53625528, "question_id": 53625450, "link": "https://stackoverflow.com/questions/53625450/square-brackets-in-define/53625528#53625528", "title": "Square brackets in #define", "body": "<p>In c99, a syntax was introduced for designated initializers. The square bracket syntax is for array initialization. So the line:</p>\n\n<pre><code>int a[] = { [10] = 4 };\n</code></pre>\n\n<p>will create an array <code>a</code> that can hold 11 <code>int</code>s, and initializes <code>a[10]</code> to 4, and the rest of its members initialized to 0.</p>\n"}], "owner": {"reputation": 8717, "user_id": 73249, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa58ce9763beb48289b05c19f716bcd8?s=128&d=identicon&r=PG", "display_name": "Sahas", "link": "https://stackoverflow.com/users/73249/sahas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 53625528, "answer_count": 1, "score": 1, "last_activity_date": 1543987531, "creation_date": 1543986148, "last_edit_date": 1543987531, "question_id": 53625450, "link": "https://stackoverflow.com/questions/53625450/square-brackets-in-define", "title": "Square brackets in #define", "body": "<p>I was going through the Linux Kernel code and found below line.  What do the square brackets mean?</p>\n\n<pre><code>#define __BPF_FUNC_STR_FN(x) [BPF_FUNC_ ## x] = __stringify(bpf_ ## x)\n</code></pre>\n\n<p>From:  <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/bpf/disasm.c#n18\" rel=\"nofollow noreferrer\">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/kernel/bpf/disasm.c#n18</a></p>\n\n<p>It's used like this:</p>\n\n<pre><code>static const char * const func_id_str[] = {\n    __BPF_FUNC_MAPPER(__BPF_FUNC_STR_FN)\n};\n</code></pre>\n"}, {"tags": ["c", "xor"], "comments": [{"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1543984154, "post_id": 53625122, "comment_id": 94110455, "body": "Why would you use OR over XOR?"}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1543984289, "post_id": 53625122, "comment_id": 94110487, "body": "@Ivan to convey the intent better? XOR automatically implies that there is a specific behavior, like overlapping bit flips, needed here which isn&#39;t the case, probably. I&#39;m still not sure though."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1543984290, "post_id": 53625122, "comment_id": 94110488, "body": "I don&#39;t think there&#39;s any performance difference between AND, XOR and OR, according to some references they all use 2 CPU operation cycles. I suppose the programmer chose to use XOR simply because <code>^</code> can be typed with a single hand and is easier to read."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1543984295, "post_id": 53625122, "comment_id": 94110489, "body": "You are missing the fallthrough from one case to the next.  This looks like a form of <a href=\"https://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\">Duff&#39;s Device</a>."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1543984349, "post_id": 53625122, "comment_id": 94110502, "body": "@JohnBollinger I&#39;m not missing it. But if you look at the indices and the shift levels , bytes don&#39;t overlap so XOR doesn&#39;t do its magic there and just works as an OR."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 0, "creation_date": 1543984391, "post_id": 53625122, "comment_id": 94110512, "body": "@TessellatingHeckler no it&#39;s just a single pass. code is not edited. you can see the full code here: <a href=\"https://github.com/aappleby/smhasher/blob/master/src/MurmurHash3.cpp\" rel=\"nofollow noreferrer\">github.com/aappleby/smhasher/blob/master/src/MurmurHash3.cpp</a>"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1543984439, "post_id": 53625122, "comment_id": 94110524, "body": "I highly doubt there is no difference between using <code>xor</code> and <code>or</code> just because you started with zero. Can you show the contents of the <code>tail</code> array?"}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1543984463, "post_id": 53625122, "comment_id": 94110534, "body": "@SedatKapanoglu Depends on how you look at it. If author &quot;thinks&quot; in terms on XOR function, then XOR &quot;conveys intent better&quot;."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1543984487, "post_id": 53625122, "comment_id": 94110544, "body": "@smac89 It&#39;s an array of <code>uint8_t</code>, that&#39;s all we need to know."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1543984503, "post_id": 53625122, "comment_id": 94110548, "body": "@smac89 the contents don&#39;t matter because whatever the contents are, the individual bytes are laid out over k2 without any overlaps. I provided a link to the full code two comments above if you&#39;re curious."}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1543984581, "post_id": 53625122, "comment_id": 94110573, "body": "XOR is supposedly faster because of circuit implementation of gates, but it&#39;s quite minor and unimportant."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 0, "creation_date": 1543984628, "post_id": 53625122, "comment_id": 94110588, "body": "@Ivan I understand your point but what we&#39;re looking at is simply building an unsigned integer out of variable number of bytes. There is no secret algorithm or some mysterious thing. There is no reason for author to think about XOR here, unless I&#39;m missing something of course."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 3, "creation_date": 1543984662, "post_id": 53625122, "comment_id": 94110602, "body": "@texasbruce The CPU is paced by a clock though, so the speed of the gate is of no consequence to the performance."}, {"owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1543984665, "post_id": 53625122, "comment_id": 94110604, "body": "Following on @texasbruce comment, there is a post on SO that goes more into this here: <a href=\"https://stackoverflow.com/questions/2308293/efficiency-of-bitwise-xor-in-c-in-comparison-to-more-readable-methods\" title=\"efficiency of bitwise xor in c in comparison to more readable methods\">stackoverflow.com/questions/2308293/&hellip;</a>"}, {"owner": {"reputation": 1240, "user_id": 4192366, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b6bf1ce902b1530a88a47e781d3c3bdc?s=128&d=identicon&r=PG&f=1", "display_name": "ZisIsNotZis", "link": "https://stackoverflow.com/users/4192366/zisisnotzis"}, "edited": false, "score": 4, "creation_date": 1543984720, "post_id": 53625122, "comment_id": 94110619, "body": "Maybe it was designed to overlap before then the author changed it somehow. Anyway, <code>xor</code> feels more &quot;cryptologic&quot;"}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 1240, "user_id": 4192366, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b6bf1ce902b1530a88a47e781d3c3bdc?s=128&d=identicon&r=PG&f=1", "display_name": "ZisIsNotZis", "link": "https://stackoverflow.com/users/4192366/zisisnotzis"}, "edited": false, "score": 0, "creation_date": 1543984782, "post_id": 53625122, "comment_id": 94110634, "body": "@ZisIsNotZis this is the most plausible answer I think. author probably used the notion of xors everywhere and didn&#39;t bother to change his approach here as the result isn&#39;t any different."}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1543984878, "post_id": 53625122, "comment_id": 94110659, "body": "I&#39;m talking about hardware circuit with transistors, not software. XOR gate uses less transistors and supposedly respond faster to a voltage change"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 2, "creation_date": 1543984968, "post_id": 53625122, "comment_id": 94110680, "body": "Well if you are saying that the author should have used <code>OR</code>, we might as well say that the author should have just used <code>ADD</code> then"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1543984989, "post_id": 53625122, "comment_id": 94110685, "body": "@texasbruce The CPU is still clocked at the hardware level. OR or XOR, the result will be available at the clock edge, not earlier."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1543985176, "post_id": 53625122, "comment_id": 94110723, "body": "@smac89 ADD implies an arithmetic operation rather than bitwise. The intent here is clearly bitwise (overlaying bytes at correct bit positions to get an integer). OR is the best candidate for what&#39;s done here."}, {"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1543985537, "post_id": 53625122, "comment_id": 94110808, "body": "Different binary operation speed is different, which means the number of operations per CPU clock cycle is different. Also the latency is different"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1543986416, "post_id": 53625122, "comment_id": 94111035, "body": "Is this the true code?  I&#39;d expect <code>break;</code> on each line."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1543986656, "post_id": 53625122, "comment_id": 94111106, "body": "@chux yes, it&#39;s legit. when you expect rest of the statements to run after the specific case, you can use this kind of construct."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1543988422, "post_id": 53625122, "comment_id": 94111636, "body": "@Of course it is legit, yet still unusual.  And you are looking for for reasons why code is the way it is, so unusual things deserve vetting.  Like why <code>uint64_t k1 = 0;</code>?"}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1543988565, "post_id": 53625122, "comment_id": 94111684, "body": "@chux he&#39;s practically building an integer out of variable number of bytes. the only alternative here is to use a loop. he might have thought this is as a performance optimization but i&#39;m not sure if a loop would suffer terribly. i did my own implementation with a loop: <a href=\"https://github.com/ssg/HashDepot/blob/master/src/MurmurHash3.cs#L121\" rel=\"nofollow noreferrer\">github.com/ssg/HashDepot/blob/master/src/MurmurHash3.cs#L121</a>"}], "answers": [{"comments": [{"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 1, "creation_date": 1543984846, "post_id": 53625240, "comment_id": 94110649, "body": "The code just converts variable number of bytes into an integer. This has been done with OR for centuries now. I see no reason for author to think XOR first, unless he&#39;s been dealing with a lot of XORs lately."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 1, "creation_date": 1543985334, "post_id": 53625240, "comment_id": 94110757, "body": "@SedatKapanoglu Which could be the case, and because it is orthodox it gets attention."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 0, "creation_date": 1543985443, "post_id": 53625240, "comment_id": 94110781, "body": "I certainly don&#39;t disregard that possibility but just wanted to know if I&#39;m missing something in terms of performance or behavior. Apparently, there isn&#39;t any."}, {"owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "reply_to_user": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 1, "creation_date": 1543985493, "post_id": 53625240, "comment_id": 94110793, "body": "@SedatKapanoglu Reworded it"}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1543985850, "post_id": 53625240, "comment_id": 94110884, "body": "I still think it&#39;s just because <code>^</code> is both easier to type and easier to read.  <code>|</code> has a bunch of ambiguous-looking symbols and you typically need two hands to type it (it&#39;s actually a pain to find it in some keyboards). Also <code>^</code> makes people come to SO wondering if they are crazy, which is always a bonus."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "reply_to_user": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1543986233, "post_id": 53625240, "comment_id": 94110994, "body": "@Havenard interesting, two more people said the same. but i type ^ with two hands (right shift + 6) because it&#39;s quite far from left shift and i have to strecth my hand. on the other hand, i type pipe with a single hand (right shift + \\&#41;."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 0, "creation_date": 1543986426, "post_id": 53625240, "comment_id": 94111037, "body": "@SedatKapanoglu Oh, yeah I forgot that detail. I use an ABNT2 keyboard which has a <a href=\"https://www.smartkeyboardsolutions.com/images/Brazil-10063-zoom.gif\" rel=\"nofollow noreferrer\">slightly different layout</a>. Though I&#39;m pretty sure US keyboards suffer from lack of <code>|</code> too, specially on laptops. In fact I saw a keyboard once that simply didn&#39;t have this symbol anywhere."}], "tags": [], "owner": {"reputation": 25106, "user_id": 6699433, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/1mOTM.jpg?s=128&g=1", "display_name": "klutt", "link": "https://stackoverflow.com/users/6699433/klutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1543985486, "last_edit_date": 1543985486, "creation_date": 1543984464, "answer_id": 53625240, "question_id": 53625122, "link": "https://stackoverflow.com/questions/53625122/why-use-xor-over-or/53625240#53625240", "title": "Why use XOR over OR?", "body": "<p>Yes, in this case they are completely equivalent. Furthermore, since they ARE equivalent, the compiler may use this for optimization on its own. When you compile, you will have no guarantee that it will actually be or xor xor. Actually, on a more general level, you have no guarantee that it will be any of them, as long as the compiler produces code whose observable behavior is identical.</p>\n\n<p>A reasonable reason for using xor is that it was the first thing that came to mind for the programmer in question, or that the code originally was written in a way where it mattered but later was changed into a version where it did not matter. But since they are equivalent in this case it is very hard to know.</p>\n"}, {"comments": [{"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "edited": false, "score": 1, "creation_date": 1543998662, "post_id": 53625972, "comment_id": 94115846, "body": "In hash algorithms, the core difference between &#39;or&#39; and &#39;xor&#39; is that &#39;xor&#39; operation retains the entropy (&quot;randomness&quot;) in the arguments, while &#39;or&#39; does not. &#39;xor&#39; of different uniform random sources is still uniform random, but &#39;or&#39; is not, as the binary result will have more ones than zeroes (&quot;biased&quot;, as chux described)."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 0, "creation_date": 1544042364, "post_id": 53625972, "comment_id": 94140222, "body": "In this case, there is no loss of entropy from use of OR because bit placements don&#39;t overlap. That part of code isn&#39;t cryptography related either; it&#39;s just a code that converts variable number of bytes to an integer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 0, "creation_date": 1544044499, "post_id": 53625972, "comment_id": 94141214, "body": "@SedatKapanoglu Yes we all agree no entropy with <code>^</code> or <code>|</code> <i>in this code</i>.  But the question is &quot;Why use XOR over OR&quot;.  <code>^</code> is more often used the <code>|</code> with hash functions that would otherwise have an entropy loss.  Using <code>^</code> is therefore the more conventional notation with hashing and <code>|</code> would serve to bring about concerns.  Even if you find <code>|</code> &quot;conveys its intent better&quot; than <code>^</code>, it is the opposite with hash algorithms:  <code>^</code> conveys its intent better then <code>|</code>."}, {"owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "edited": false, "score": 0, "creation_date": 1544047486, "post_id": 53625972, "comment_id": 94142395, "body": "@chux I understand where you&#39;re coming from but my question is specifically about when OR and XOR are interchangeable, like in the example. The entropy case you mentioned means they are not interchangeable."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1544018764, "last_edit_date": 1544018764, "creation_date": 1543989239, "answer_id": 53625972, "question_id": 53625122, "link": "https://stackoverflow.com/questions/53625122/why-use-xor-over-or/53625972#53625972", "title": "Why use XOR over OR?", "body": "<blockquote>\n  <p>Why use XOR over OR?</p>\n</blockquote>\n\n<p>When one can use <code>|</code> or <code>^</code> in this restrictive code to get and archive the same functionality, then the preferred one should reflect larger issues.</p>\n\n<p><code>^</code> retains entropy <a href=\"https://stackoverflow.com/questions/53625122/why-use-xor-over-or/53625972?noredirect=1#comment94115846_53625972\">@Nominal Animal</a>.</p>\n\n<p>When code is seeking to form a <strong>hash</strong> (as here with MurmurHash3), <code>^</code> is better then <code>|</code>.  <code>^</code> flips bits resulting, in general, to a fair distribution of 1s and 0s.  <code>|</code> biases to making  1s. </p>\n\n<p>Many hash algorithm will \"add\" <code>a</code> and <code>b</code> as with <a href=\"https://math.stackexchange.com/a/319611/83175\">binary addition with no carries</a>, which is to say <code>a ^ b</code> and not <code>a | b</code>. So in this hash algorithm context, <code>^</code> conveys the better algorithm intent.</p>\n\n<hr>\n\n<p>Form time to time I have come across hashing code that does use <code>|</code> and unfortunately results in a biased results, whereas <code>^</code> would have worked fine.  IMO, a <code>|</code> in hash code is a red flag that biasing is possible.</p>\n"}], "owner": {"reputation": 42860, "user_id": 54937, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d968f2f1240bf3e2c4080e773cc95129?s=128&d=identicon&r=PG", "display_name": "Sedat Kapanoglu", "link": "https://stackoverflow.com/users/54937/sedat-kapanoglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1544018764, "creation_date": 1543983579, "last_edit_date": 1543985522, "question_id": 53625122, "link": "https://stackoverflow.com/questions/53625122/why-use-xor-over-or", "title": "Why use XOR over OR?", "body": "<p><a href=\"https://github.com/aappleby/smhasher/issues\" rel=\"nofollow noreferrer\">The C code of MurmurHash3</a> has this part:</p>\n\n<pre><code>  uint64_t k1 = 0;\n  uint64_t k2 = 0;\n\n  switch(len &amp; 15)\n  {\n  case 15: k2 ^= ((uint64_t)tail[14]) &lt;&lt; 48;\n  case 14: k2 ^= ((uint64_t)tail[13]) &lt;&lt; 40;\n  case 13: k2 ^= ((uint64_t)tail[12]) &lt;&lt; 32;\n  case 12: k2 ^= ((uint64_t)tail[11]) &lt;&lt; 24;\n  case 11: k2 ^= ((uint64_t)tail[10]) &lt;&lt; 16;\n  case 10: k2 ^= ((uint64_t)tail[ 9]) &lt;&lt; 8;\n  case  9: k2 ^= ((uint64_t)tail[ 8]) &lt;&lt; 0;\n</code></pre>\n\n<p>(The type of <code>tail</code> is <code>uint8_t *</code>)</p>\n\n<p>As far as I can see it's no different than an OR operation. What difference does it make to use XOR here? Is it optimization? If it is, what kind of it is? Or am I missing something about behavior differences of those two operators?</p>\n\n<p>I already know about the differences between XOR and OR. But in this case since the value is zeroed out at the beginning and xored values do not overlap, the behavior shouldn't be any different than OR at all. So I'm asking why author chose this over OR (which conveys its intent better than XOR imho).</p>\n"}, {"tags": ["c", "segmentation-fault"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1543983739, "post_id": 53625106, "comment_id": 94110344, "body": "<code>get_nodeid</code> expects a <code>struct nodeid *id</code>, but you pass <code>struct nodeid **id</code> (mind the <code>**</code>). Have you turned all compiler warnings on?"}, {"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 0, "creation_date": 1543983742, "post_id": 53625106, "comment_id": 94110345, "body": "<code>string</code> is a pointer in the struct <code>node_id</code>. Have you allocated memory for this? Are you sure this pointer is not NULL."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543983860, "post_id": 53625106, "comment_id": 94110378, "body": "<code>struct nodeid *id;</code> is an <i>Uninitialized Pointer</i>. <code>get_nodeid(node,&amp;id);</code> likely invokes <i>Undefined Behavior</i>. Dereferencing <code>id</code> causes the SegFault."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543983930, "post_id": 53625106, "comment_id": 94110393, "body": "@DavidC.Rankin <code>get_nodeid</code> was apparently meant to initialize <code>id</code>. The problem is that it does not."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1543983995, "post_id": 53625106, "comment_id": 94110409, "body": "Agreed, without seeing it, it&#39;s hard to tell. Passing the address of the pointer would allow allocation, but was it? Dunno... Further the declaration <code>get_nodeid(node_t node, struct nodeid *id)</code> does not match the call <code>get_nodeid(node,&amp;id);</code>"}, {"owner": {"reputation": 93, "user_id": 2156513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf485a233e7e9bb78fb55ce5ee2382a6?s=128&d=identicon&r=PG", "display_name": "user2156513", "link": "https://stackoverflow.com/users/2156513/user2156513"}, "edited": false, "score": 0, "creation_date": 1543984465, "post_id": 53625106, "comment_id": 94110537, "body": "Edited the call"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543985110, "post_id": 53625106, "comment_id": 94110712, "body": "OK, now it definitely will not work. Any changes made to <code>id</code> in <code>get_nodeid</code> will not be seen back in <code>main()</code>. Why? C is pass-by-value, so <code>get_nodeid</code> receives <i>a-copy-of</i> the pointer <code>id</code>. Any changes made to <code>id</code> in <code>get_nodeid</code> are lost on function return. You can change the <code>get_nodeid</code> declaration to <code>get_nodeid(node_t node, struct nodeid **id)</code> and pass <code>&amp;id</code> as a parameter to insure the function receives the actual <i>address-of</i> the pointer which you can then allocate for and have the allocation survive return."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1543985655, "post_id": 53625106, "comment_id": 94110841, "body": "Meaning after making the changes above, then within <code>get_nodeid</code> you could allocate for a node with <code>*id = malloc (sizeof **id);</code> and then validate the allocation succeeded by checking <code>if (*id == NULL) { &#47;* handle error *&#47; }</code> and then use the actual pointer <code>*id</code> as needed to have the changes to <code>id</code> visible back in <code>main()</code> (or the calling function)."}, {"owner": {"reputation": 93, "user_id": 2156513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf485a233e7e9bb78fb55ce5ee2382a6?s=128&d=identicon&r=PG", "display_name": "user2156513", "link": "https://stackoverflow.com/users/2156513/user2156513"}, "edited": false, "score": 0, "creation_date": 1543986086, "post_id": 53625106, "comment_id": 94110950, "body": "But this function declaration cannot be changed as it is a library function that i&#39;m using.Any way i can change the calling mechanism to get the proper value?"}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1544022714, "post_id": 53625106, "comment_id": 94130273, "body": "@user2156513 Then I think the function is expecting a pointer to an allocated chunk of type <code>struct nodeid</code>?. which is defined by... you? first time for me."}], "owner": {"reputation": 93, "user_id": 2156513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf485a233e7e9bb78fb55ce5ee2382a6?s=128&d=identicon&r=PG", "display_name": "user2156513", "link": "https://stackoverflow.com/users/2156513/user2156513"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543984454, "creation_date": 1543983476, "last_edit_date": 1543984454, "question_id": 53625106, "link": "https://stackoverflow.com/questions/53625106/getting-segmentation-fault-when-trying-to-access-a-complex-structure", "title": "Getting segmentation fault when trying to access a complex structure", "body": "<p>I am getting segmentation fault when trying to print a string value from inside of a structure.\nI am trying to access cdata parameter.</p>\n\n<p>I am getting segmentation fault at the indicated line.</p>\n\n<pre><code>struct node_id{\n    union {\n         uint32_t numeric;\n         struct my_string *string;\n         struct my_bytestring *opaque;\n    } identifier;\n    enum my_identifiertype type;\n    uint16_t index;\n};\n\nstruct my_string{\n    uint32_t len : 31;\n    uint32_t free: 1;\n    union {\n      const char *cdata;\n      char *data;\n    } d;\n};\n\nget_nodeid(node_t node, struct nodeid *id){\n   //some code\n}\n\nstruct nodeid *id;\nget_nodeid(node,id);\nprintf(\"%s\", id-&gt;identifier.string-&gt;d.cdata );   // ------- Seg Fault comes here\nnodeid_clear(&amp;id);\n</code></pre>\n\n<p>If I print only id using format specifier %o(object),it does not give seg fault and while debugging it shows not able to access memory location for cdata.</p>\n\n<p>Can someone help me understand,why is there segmentation fault while accessing it,when it has been used the same way in other parts of the code also.</p>\n"}, {"tags": ["c", "ncurses", "curses"], "comments": [{"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1543982130, "post_id": 53624925, "comment_id": 94109976, "body": "Did you link <code>ncurses</code> with the <code>-lncurses</code> flag when you compiled?"}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1543983381, "post_id": 53624925, "comment_id": 94110259, "body": "I used <code>g++ -Incurses project.c -o project</code>"}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 2, "creation_date": 1543983638, "post_id": 53624925, "comment_id": 94110311, "body": "That should be a lowercase &quot;ell&quot;, not an uppercase &quot;I&quot;, and the linker flags need to follow the source files: <code>g++ -o project project.c -lncurses</code>."}, {"owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "reply_to_user": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1543983875, "post_id": 53624925, "comment_id": 94110381, "body": "Right on! I wish I can vote you as the answer. Thank you."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1543984513, "post_id": 53624925, "comment_id": 94110551, "body": "You are welcome; I have converted my comments into an answer."}], "answers": [{"comments": [{"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1544000960, "post_id": 53625242, "comment_id": 94116939, "body": "The code example is ISO C - no need for C++ at all."}], "tags": [], "owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "is_accepted": true, "score": 2, "last_activity_date": 1543984473, "creation_date": 1543984473, "answer_id": 53625242, "question_id": 53624925, "link": "https://stackoverflow.com/questions/53624925/create-a-box-in-c-program-with-curses/53625242#53625242", "title": "Create a box in C Program with Curses", "body": "<p>You have to pass a linker flag to the compiler so that the <code>ncurses</code> library is linked at compile time. This flag is <code>-lncurses</code>.</p>\n\n<p>From comments made by OP, the compiler invocation was:</p>\n\n<pre><code>g++ -Incurses project.c -o project\n</code></pre>\n\n<p>The initial <code>l</code> (ell) was mistakenly made into an <code>I</code> in the linker flag (an easy mistake to make). Further, the linker flag is in the wrong position in this invocation. Linker flags must follow their source files. A better invocation would be:</p>\n\n<pre><code>g++ -o project project.c -lncurses\n</code></pre>\n\n<p>I am not sure why OP is using <code>g++</code> here for C code; it might be better to use <code>gcc</code> directly. I would additionally suggest always enabling some warnings:</p>\n\n<pre><code>gcc -std=c11 -Wall -Wextra -Wpedantic -o project project.c -lncurses\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10515213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b43b2f35625513b6c40b6e212d2d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Mike ODell", "link": "https://stackoverflow.com/users/10515213/mike-odell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 53625242, "answer_count": 1, "score": 0, "last_activity_date": 1543989807, "creation_date": 1543981931, "last_edit_date": 1543989807, "question_id": 53624925, "link": "https://stackoverflow.com/questions/53624925/create-a-box-in-c-program-with-curses", "title": "Create a box in C Program with Curses", "body": "<p>I am trying to create a box with a game inside the box, but for now I am using the text <code>this is my box</code> for testing. I am very confusing with curses for first time but I am trying to learn for myself in my spare time. I do not have any problems with other C program before but this time, I keep getting the message error after when I compile on Repl.it, but <code>#include &lt;windows.h&gt;</code> does not existing in the system file or on the Linux system too. </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;ncurses.h&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char ** argv){\n\n  initscr();\n  int height, width, start_y, start_x;\n  height = 10;\n  width = 20;\n  start_y = start_x = 10;\n\n  WINDOW * win = newwin(height, width, start_y, start_x);\n  refresh();\n\n  box(win, 0, 0);\n  mvwprintw(win, 1, 1, \"this is my box\");\n  wrefresh(win);\n\n  int c = getch();\n\n  endwin();\n\n\n\nreturn 0;\n}\n</code></pre>\n\n<p><strong>Error Messages:</strong></p>\n\n<pre><code>gcc version 4.6.3\nexit status 1\n/tmp/cc3HSdBS.o: In function `main':\nmain.c:(.text+0x10): undefined reference to `initscr'\nmain.c:(.text+0x3e): undefined reference to `newwin'\nmain.c:(.text+0x49): undefined reference to `stdscr'\nmain.c:(.text+0x51): undefined reference to `wrefresh'\nmain.c:(.text+0x82): undefined reference to `wborder'\nmain.c:(.text+0xa6): undefined reference to `mvwprintw'\nmain.c:(.text+0xb2): undefined reference to `wrefresh'\nmain.c:(.text+0xb9): undefined reference to `stdscr'\nmain.c:(.text+0xc1): undefined reference to `wgetch'\nmain.c:(.text+0xc9): undefined reference to `endwin'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Compiled with:</p>\n\n<pre><code>g++ -Incurses project.c -o project\n</code></pre>\n"}, {"tags": ["android", "c++", "c", "android-studio", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "is_accepted": true, "score": 0, "last_activity_date": 1543990257, "creation_date": 1543990257, "answer_id": 53626175, "question_id": 53624737, "link": "https://stackoverflow.com/questions/53624737/when-i-add-a-new-c-file-android-studio-informs-me-that-it-is-not-part-of-the-p/53626175#53626175", "title": "When I add a new .c file, Android Studio informs me that it is not part of the project", "body": "<p>I figured it out. I had to add the .c file (full path) to my CMakeLists.txt as a separate line under add_library, and then it worked.</p>\n"}], "owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53626175, "answer_count": 1, "score": -1, "last_activity_date": 1543990257, "creation_date": 1543980451, "question_id": 53624737, "link": "https://stackoverflow.com/questions/53624737/when-i-add-a-new-c-file-android-studio-informs-me-that-it-is-not-part-of-the-p", "title": "When I add a new .c file, Android Studio informs me that it is not part of the project", "body": "<p>I'm developing an Android Studio project with JNI code, and I added a .c and .h source file manually to the project. However, Android Studio informs me that the file is not part of the project. I Googled a bit and the solution seems to be to include it in Android.mk, but I did a search for that file and there are multiple such files on my Windows system, so I'm not sure which to change.</p>\n\n<p>Help please?</p>\n"}, {"tags": ["c"], "comments": [{"owner": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1543980347, "post_id": 53624676, "comment_id": 94109601, "body": "Your comment is almost correct. But there is no reason to allocate <code>10 * sizeof(number)</code>. You can simply do <code>(number *)malloc(sizeof(number))</code>.  You will further need to allocate memory for <code>sNum</code> as well depending on how many digits you want to allocate."}, {"owner": {"reputation": 11, "user_id": 10747269, "user_type": "registered", "profile_image": "https://graph.facebook.com/2055785987798170/picture?type=large", "display_name": "AndrewZ", "link": "https://stackoverflow.com/users/10747269/andrewz"}, "reply_to_user": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1543980928, "post_id": 53624676, "comment_id": 94109729, "body": "Thank you! I am unsure about how to allocate memory for sNum, as the sNum varies in length depending on what the two other int values are."}, {"owner": {"reputation": 11821, "user_id": 2192361, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/739fdeab1b8bfdd773da2f1f0610197e?s=128&d=identicon&r=PG", "display_name": "Pavan Yalamanchili", "link": "https://stackoverflow.com/users/2192361/pavan-yalamanchili"}, "edited": false, "score": 0, "creation_date": 1543981252, "post_id": 53624676, "comment_id": 94109797, "body": "Yes, you will have to figure out how many digits are in the number in the given base. This can be found programatically. You can find a solution for this online fairly easily :)"}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1543985644, "creation_date": 1543985644, "answer_id": 53625389, "question_id": 53624676, "link": "https://stackoverflow.com/questions/53624676/how-do-i-return-a-struct-from-a-function-to-a-struct-pointer/53625389#53625389", "title": "How do I return a struct from a function to a struct pointer?", "body": "<p>Supposing that the actual question is exactly what is presented in the title:</p>\n\n<blockquote>\n  <p>How do I return a struct from a function to a struct pointer?</p>\n</blockquote>\n\n<p>The answer is that although a function can return a struct, it cannot do so <em>to</em> a struct <em>pointer</em>.  Under no circumstance can you assign a struct to an object of of any pointer type.  You can have a pointer to a struct, and you can have a struct that contains a pointer, but no struct is itself a pointer.</p>\n\n<p>If, on the other hand, the question were about how to return a struct pointer then the answer would be \"by using a <code>return</code> statement\", the same way you return a value of any other type.  For that to be useful, the pointer you return ought to be a valid one, but that's a separate question.</p>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 3024176, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/CL0jb.jpg?s=128&g=1", "display_name": "cirrusio", "link": "https://stackoverflow.com/users/3024176/cirrusio"}, "is_accepted": false, "score": 0, "last_activity_date": 1543985723, "creation_date": 1543985723, "answer_id": 53625400, "question_id": 53624676, "link": "https://stackoverflow.com/questions/53624676/how-do-i-return-a-struct-from-a-function-to-a-struct-pointer/53625400#53625400", "title": "How do I return a struct from a function to a struct pointer?", "body": "<p>Why don't you pass in a pointer to the structure in the function such that the signature looks like <code>void intToNumber(number *n)</code>?  And then you would have the implementation look something like </p>\n\n<pre><code>int main ()\n{\n    number Numbers = {.sNum = malloc (25) };\n\n    // Do stuff here...\n    intToNumber(&amp;Numbers);\n\n    // Do some more stuff...\n}\n</code></pre>\n\n<p>Since you are pointing to the variable <code>Numbers</code> on the stack, you can manipulate those variable in the function <code>intToNumber</code> and have them available in the rest of the <code>main</code> function (or in whatever scope you decide to call it).</p>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 1, "last_activity_date": 1543989138, "last_edit_date": 1543989138, "creation_date": 1543988693, "answer_id": 53625873, "question_id": 53624676, "link": "https://stackoverflow.com/questions/53624676/how-do-i-return-a-struct-from-a-function-to-a-struct-pointer/53625873#53625873", "title": "How do I return a struct from a function to a struct pointer?", "body": "<p>You are beginning to think along the correct lines, but your handling of allocation for your <code>theNumbers</code> (you have commented) is just step one. When you allocate <code>theNumbers</code>, the pointer <code>theNumbers-&gt;sNum</code> is created -- but it is an <em>Uninitialized Pointer</em> that holds an <em>indeterminate address</em> as its value. (e.g. it points nowhere you have any ability to make use of). Think about your struct (<code>typedef</code>)</p>\n\n<pre><code>typedef struct {\n    int iNum;   /* automatic storage types */\n    int base;\n    char *sNum; /* a pointer - hold address to something else  */\n} number;       /*             must point to valid memory addr */\n</code></pre>\n\n<p>When you allocate for one of those, you allocate 2 integer values and one character pointer that have <em>automatic storage type</em> and can be assigned values. While <code>iNum</code> and <code>base</code> are integer values and can be assigned immediate values like <code>50</code> and <code>6</code>, <code>sNum</code> by contrast is a pointer and can only be assigned a <em>valid memory address</em> where something else is stored. </p>\n\n<p>Normally, to make use of a pointer, you allocate a new block of memory, fill that memory with whatever is needed for the type, and then assign the starting address for that new block of memory to your pointer (<code>sNum</code> here). So now your pointer will hold the address of (e.g. point to) a valid block of memory containing values usable by that object type. (<code>char*</code>, a pointer to a char, here)</p>\n\n<p>Your <code>intToNumber</code> function takes only <code>int nnum</code> and <code>int nbase</code> as parameters, so after allocating for your <code>struct</code>, you can only initialize <code>theNumbers-&gt;iNum = nnum;</code> and <code>theNumbers-&gt;base = nbase;</code>, but have nothing to size or initialize <code>sNum</code> with (it should therefore be set to <code>NULL</code>). </p>\n\n<p>So you are close on your <code>intToNumber</code>, and all you need to do is return the pointer <code>intToNumber</code> after you have allocated storage for it (because following allocation it has <em>allocated storage type</em> which survives for the life of the program -- or until it is freed), e.g.</p>\n\n<pre><code>number *intToNumber (int nnum, int nbase) {\n\n    number *theNumbers;\n\n    theNumbers= malloc (sizeof *theNumbers);    /* allocate */\n\n    if (theNumbers == NULL) {                   /* validate */\n        perror (\"malloc-theNumbers\");\n        return NULL;\n    }\n\n    theNumbers-&gt;iNum = nnum;    /* initialize values */\n    theNumbers-&gt;base = nbase;\n    theNumbers-&gt;sNum = NULL;\n\n    return theNumbers;          /* return pointer */\n}\n</code></pre>\n\n<p>Now what to do about <code>sNum</code>? Well, it's up to you, but for example, you could create a separate function that takes your allocated <code>struct</code> and a character string as parameters, allocate for <code>length + 1</code> bytes to hold the string (plus the <em>nul-terminating</em> character) assigning the starting address for the new bock to <code>sNum</code>, and then copying the string to the new block of memory, e.g. </p>\n\n<pre><code>/* allocate/set sNum member of n to s */\nchar *setsNum (number *n, const char *s)\n{\n    if (!n) {   /* validate n not NULL, return NULL on failure */\n        fputs (\"error: struct parameter 'n' NULL.\\n\", stderr);\n        return NULL;\n    }\n    size_t len = strlen (s);        /* get length */\n\n    n-&gt;sNum = malloc (len + 1);     /* allocate storage (+1 byte) */\n\n    if (!n-&gt;sNum) {                 /* validate allocation */\n        perror (\"malloc-sNum\");\n        return NULL;\n    }\n\n    memcpy (n-&gt;sNum, s, len + 1);   /* copy s to new block of memory */\n\n    return n-&gt;sNum;                 /* return pointer (convenience) */\n}\n</code></pre>\n\n<p>(I suspect you will be filling it with your base6 conversion -- but that is left to you)</p>\n\n<p>Other than freeing the memory when you are done with it, all that remains is a short example showing how to put it altogether. That you can do with something simple like:</p>\n\n<pre><code>int main (void) {\n\n    number *mynum = intToNumber (50, 6);    /* declare/initialize mynum */\n\n    if (!mynum)     /* validate succeeded */\n        return 1;\n\n    /* allocate/validate mynum-&gt;sNum, copy string */\n    if (!setsNum (mynum, \"created with intToNumber (50, 6)\")) {\n        free (mynum);\n        return 1;\n    }\n    /* output values held in mynum */\n    printf (\"succeeded:\\n iNum: %d\\n base: %d\\n str : %s\\n\",\n            mynum-&gt;iNum, mynum-&gt;base, mynum-&gt;sNum);\n\n    free (mynum-&gt;sNum); /* free allocated string */\n    free (mynum);       /* free struct */\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<p>If you put the example together, you would get:</p>\n\n<pre><code>$ ./bin/struct_alloc_member\nsucceeded:\n iNum: 50\n base: 6\n str : created with intToNumber (50, 6)\n</code></pre>\n\n<p><strong>Memory Use/Error Check</strong></p>\n\n<p>In any code you write that dynamically allocates memory, you have 2 <em>responsibilities</em> regarding any block of memory allocated: (1) <em>always preserve a pointer to the starting address</em> for the block of memory so, (2) it can be <em>freed</em> when it is no longer needed.</p>\n\n<p>It is imperative that you use a memory error checking program to insure you do not attempt to access memory or write beyond/outside the bounds of your allocated block, attempt to read or base a conditional jump on an uninitialized value, and finally, to confirm that you free all the memory you have allocated. </p>\n\n<p>For Linux <code>valgrind</code> is the normal choice. There are similar memory checkers for every platform. They are all simple to use, just run your program through it.</p>\n\n<pre><code>$ valgrind ./bin/struct_alloc_member\n==15553== Memcheck, a memory error detector\n==15553== Copyright (C) 2002-2015, and GNU GPL'd, by Julian Seward et al.\n==15553== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info\n==15553== Command: ./bin/struct_alloc_member\n==15553==\nsucceeded:\n iNum: 50\n base: 6\n str : created with intToNumber (50, 6)\n==15553==\n==15553== HEAP SUMMARY:\n==15553==     in use at exit: 0 bytes in 0 blocks\n==15553==   total heap usage: 2 allocs, 2 frees, 49 bytes allocated\n==15553==\n==15553== All heap blocks were freed -- no leaks are possible\n==15553==\n==15553== For counts of detected and suppressed errors, rerun with: -v\n==15553== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)\n</code></pre>\n\n<p>Always confirm that you have freed all memory you have allocated and that there are no memory errors.</p>\n\n<p>The full example used was:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct {\n    int iNum;   /* automatic storage types */\n    int base;\n    char *sNum; /* a pointer - hold address to something else  */\n} number;       /*             must point to valid memory addr */\n\nnumber *intToNumber (int nnum, int nbase) {\n\n    number *theNumbers;\n\n    theNumbers= malloc (sizeof *theNumbers);    /* allocate */\n\n    if (theNumbers == NULL) {                   /* validate */\n        perror (\"malloc-theNumbers\");\n        return NULL;\n    }\n\n    theNumbers-&gt;iNum = nnum;    /* initialize values */\n    theNumbers-&gt;base = nbase;\n    theNumbers-&gt;sNum = NULL;\n\n    return theNumbers;          /* return pointer */\n}\n\n/* allocate/set sNum member of n to s */\nchar *setsNum (number *n, const char *s)\n{\n    if (!n) {   /* validate n not NULL, return NULL on failure */\n        fputs (\"error: struct parameter 'n' NULL.\\n\", stderr);\n        return NULL;\n    }\n    size_t len = strlen (s);        /* get length */\n\n    n-&gt;sNum = malloc (len + 1);     /* allocate storage (+1 byte) */\n\n    if (!n-&gt;sNum) {                 /* validate allocation */\n        perror (\"malloc-sNum\");\n        return NULL;\n    }\n\n    memcpy (n-&gt;sNum, s, len + 1);   /* copy s to new block of memory */\n\n    return n-&gt;sNum;                 /* return pointer (convenience) */\n}\n\nint main (void) {\n\n    number *mynum = intToNumber (50, 6);    /* declare/initialize mynum */\n\n    if (!mynum)     /* validate succeeded */\n        return 1;\n\n    /* allocate/validate mynum-&gt;sNum, copy string */\n    if (!setsNum (mynum, \"created with intToNumber (50, 6)\")) {\n        free (mynum);\n        return 1;\n    }\n    /* output values held in mynum */\n    printf (\"succeeded:\\n iNum: %d\\n base: %d\\n str : %s\\n\",\n            mynum-&gt;iNum, mynum-&gt;base, mynum-&gt;sNum);\n\n    free (mynum-&gt;sNum); /* free allocated string */\n    free (mynum);       /* free struct */\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10747269, "user_type": "registered", "profile_image": "https://graph.facebook.com/2055785987798170/picture?type=large", "display_name": "AndrewZ", "link": "https://stackoverflow.com/users/10747269/andrewz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1543989138, "creation_date": 1543980011, "last_edit_date": 1543983717, "question_id": 53624676, "link": "https://stackoverflow.com/questions/53624676/how-do-i-return-a-struct-from-a-function-to-a-struct-pointer", "title": "How do I return a struct from a function to a struct pointer?", "body": "<p>I am creating a function for a code and the code uses the function that outputs to a file pointer like for example, </p>\n\n<pre><code>number *base6 = intToNumber(50, 6); \n</code></pre>\n\n<p>Here is the code I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n\ntypedef struct {\n  int iNum;\n  int base;\n  char* sNum;\n} number;\n\nnumber * intToNumber(int nnum, int nbase) {\n  number * theNumbers;\n\n  //theNumbers= (number*)malloc(10*sizeof(number));\n\n  if (theNumbers = NULL) {\n    printf(\"\\n\\nNo\\n\\n\");\n    exit(1);\n  }\n\n  theNumbers-&gt;iNum = nnum;\n  theNumbers-&gt;base = nbase;\n\n}\n</code></pre>\n"}, {"tags": ["c", "endianness", "can-bus"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8134066, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZVxttWTf440/AAAAAAAAAAI/AAAAAAAAABY/LVXL5jDKHdk/photo.jpg?sz=128", "display_name": "Doug", "link": "https://stackoverflow.com/users/8134066/doug"}, "edited": false, "score": 0, "creation_date": 1544111490, "post_id": 53628667, "comment_id": 94168637, "body": "Yeah this is the direction I was heading in.  I was hoping that I could use the GCC bitfields to simplify this some, since I will be dealing with hundreds, even thousands of CAN messages."}, {"owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "reply_to_user": {"reputation": 3, "user_id": 8134066, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZVxttWTf440/AAAAAAAAAAI/AAAAAAAAABY/LVXL5jDKHdk/photo.jpg?sz=128", "display_name": "Doug", "link": "https://stackoverflow.com/users/8134066/doug"}, "edited": false, "score": 0, "creation_date": 1544138092, "post_id": 53628667, "comment_id": 94180546, "body": "@Doug: You could treat each message as a bit stream, and use a function to extract the next N bits from it, with not much more overhead. Want an example of that approach?"}], "tags": [], "owner": {"reputation": 34566, "user_id": 1475978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdQt.png?s=128&g=1", "display_name": "Nominal Animal", "link": "https://stackoverflow.com/users/1475978/nominal-animal"}, "is_accepted": true, "score": 1, "last_activity_date": 1544000925, "creation_date": 1544000925, "answer_id": 53628667, "question_id": 53624627, "link": "https://stackoverflow.com/questions/53624627/byte-order-using-gcc-struct-bit-packing/53628667#53628667", "title": "byte order using GCC struct bit packing", "body": "<p>Because struct packing order varies between compilers and architectures, the best option is to use a helper function to pack/unpack the binary data instead.</p>\n\n<p>For example:</p>\n\n<pre><code>static inline void message1_unpack(uint32_t            *fields,\n                                   const unsigned char *buffer)\n{\n    const uint64_t  data = (((uint64_t)buffer[0]) &lt;&lt; 56)\n                         | (((uint64_t)buffer[1]) &lt;&lt; 48)\n                         | (((uint64_t)buffer[2]) &lt;&lt; 40)\n                         | (((uint64_t)buffer[3]) &lt;&lt; 32)\n                         | (((uint64_t)buffer[4]) &lt;&lt; 24)\n                         | (((uint64_t)buffer[5]) &lt;&lt; 16)\n                         | (((uint64_t)buffer[6]) &lt;&lt;  8)\n                         |  ((uint64_t)buffer[7]);\n    fields[0] =  data &gt;&gt; 32;           /* Bits 32..63 */\n    fields[1] = (data &gt;&gt; 26) &amp; 0x3F;   /* Bits 26..31 */\n    fields[2] = (data &gt;&gt; 10) &amp; 0xFFFF; /* Bits 10..25 */\n    fields[3] = (data &gt;&gt; 2)  &amp; 0xFF;   /* Bits  2..9  */\n    fields[4] =  data        &amp; 0x03;   /* Bits  0..1  */\n}\n</code></pre>\n\n<p>Note that because the consecutive bytes are interpreted as a single unsigned integer (in big-endian byte order), the above will be perfectly portable.</p>\n\n<p>Instead of an array of fields, you could use a structure, of course; but it does not need to have any resemblance to the on-the-wire structure at all.  However, if you have several different structures to unpack, an array of (maximum-width) fields usually turns out to be easier and more robust.</p>\n\n<p>All sane compilers will optimize the above code just fine. In particular, GCC with <code>-O2</code> does a very good job.</p>\n\n<p>The inverse, packing those same fields to a buffer, is very similar:</p>\n\n<pre><code>static inline void  message1_pack(unsigned char  *buffer,\n                                  const uint32_t *fields)\n{\n    const uint64_t  data = (((uint64_t)(fields[0]          )) &lt;&lt; 32)\n                         | (((uint64_t)(fields[1] &amp; 0x3F   )) &lt;&lt; 26)\n                         | (((uint64_t)(fields[2] &amp; 0xFFFF )) &lt;&lt; 10)\n                         | (((uint64_t)(fields[3] &amp; 0xFF   )) &lt;&lt;  2)\n                         | ( (uint64_t)(fields[4] &amp; 0x03   )       );\n    buffer[0] = data &gt;&gt; 56;\n    buffer[1] = data &gt;&gt; 48;\n    buffer[2] = data &gt;&gt; 40;\n    buffer[3] = data &gt;&gt; 32;\n    buffer[4] = data &gt;&gt; 24;\n    buffer[5] = data &gt;&gt; 16;\n    buffer[6] = data &gt;&gt;  8;\n    buffer[7] = data;\n}\n</code></pre>\n\n<p>Note that the masks define the field length (<code>0x03</code> = 0b11 (2 bits), <code>0x3F</code> = 0b111111 (16 bits), <code>0xFF</code> = 0b11111111 (8 bits), <code>0xFFFF</code> = 0b1111111111111111 (16 bits)); and the shift amount depends on the bit position of the least significant bit in each field.</p>\n\n<p>To verify such functions work, pack, unpack, repack, and re-unpack a buffer that should contain all zeros except one of the fields all ones, and verify the data stays correct over two roundtrips. It usually suffices to detect the typical bugs (wrong bit shift amounts, typos in masks).</p>\n\n<p>Note that documentation will be key to ensure the code remains maintainable. I'd personally add comment blocks before each of the above functions, similar to</p>\n\n<pre><code>/* message1_unpack(): Unpack 8-byte message to 5 fields:\n       field[0]: Foobar. Bits 32..63.\n       field[1]: Buzz.   Bits 26..31.\n       field[2]: Wahwah. Bits 10..25.\n       field[3]: Cheez.  Bits  2..9.\n       field[4]: Blop.   Bits  0..1.\n*/\n</code></pre>\n\n<p>with the field \"names\" reflecting their names in documentation.</p>\n"}], "owner": {"reputation": 3, "user_id": 8134066, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZVxttWTf440/AAAAAAAAAAI/AAAAAAAAABY/LVXL5jDKHdk/photo.jpg?sz=128", "display_name": "Doug", "link": "https://stackoverflow.com/users/8134066/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 53628667, "answer_count": 1, "score": 0, "last_activity_date": 1544000925, "creation_date": 1543979629, "question_id": 53624627, "link": "https://stackoverflow.com/questions/53624627/byte-order-using-gcc-struct-bit-packing", "title": "byte order using GCC struct bit packing", "body": "<p>I am using GCC struct bit fields in an attempt interpret 8 byte CAN message data.  I wrote a small program as an example of one possible message layout.  The code and the comments should describe my problem.  I assigned the 8 bytes so that all 5 signals should equal 1.  As the output shows on an Intel PC, that is hardly the case.  All CAN data that I deal with is big endian, and the fact that they are almost never packed 8 bit aligned makes htonl() and friends useless in this case.  Does anyone know of a solution?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;netinet/in.h&gt;\n\ntypedef union\n{\n    unsigned char data[8];\n    struct { \n        unsigned int signal1 : 32;\n        unsigned int signal2 :  6;\n        unsigned int signal3 : 16;\n        unsigned int signal4 :  8;\n        unsigned int signal5 :  2;\n    } __attribute__((__packed__));\n} _message1;\n\nint main()\n{\n    _message1 message1;\n    unsigned char incoming_data[8]; //This is how this message would come in from a CAN bus for all signals == 1\n\n    incoming_data[0] = 0x00;\n    incoming_data[1] = 0x00;\n    incoming_data[2] = 0x00;\n    incoming_data[3] = 0x01; //bit 1 of signal 1\n    incoming_data[4] = 0x04; //bit 1 of signal 2\n    incoming_data[5] = 0x00;\n    incoming_data[6] = 0x04; //bit 1 of signal 3\n    incoming_data[7] = 0x05; //bit 1 of signal 4 and signal 5\n\n    for(int i = 0; i &lt; 8; ++i){\n        message1.data[i] = incoming_data[i];\n    }\n\n    printf(\"signal1 = %x\\n\", message1.signal1);\n    printf(\"signal2 = %x\\n\", message1.signal2);\n    printf(\"signal3 = %x\\n\", message1.signal3);\n    printf(\"signal4 = %x\\n\", message1.signal4);\n    printf(\"signal5 = %x\\n\", message1.signal5);\n}\n</code></pre>\n"}, {"tags": ["c", "string", "segmentation-fault"], "comments": [{"owner": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1543980988, "post_id": 53624614, "comment_id": 94109741, "body": "If you intend to use <code>&quot;</code> instead of <code>&#39;</code>, do it right: <code>for(i=0;a[i] != *&quot;\\0&quot; ;i++)</code> (or simply use <code>&#39;</code> instead). Note that <code>for(i=0; a[i]!= *&quot;&quot;;i++)</code> would also work."}, {"owner": {"reputation": 21, "user_id": 10747259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CO0WYKCBzE/AAAAAAAAAAI/AAAAAAAAAAU/T5nVAJ9SdjY/photo.jpg?sz=128", "display_name": "Suraj Kumar Prasad", "link": "https://stackoverflow.com/users/10747259/suraj-kumar-prasad"}, "reply_to_user": {"reputation": 25937, "user_id": 338904, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dea29233fa03ea84f8a853102deb0344?s=128&d=identicon&r=PG", "display_name": "e2-e4", "link": "https://stackoverflow.com/users/338904/e2-e4"}, "edited": false, "score": 0, "creation_date": 1544012756, "post_id": 53624614, "comment_id": 94123935, "body": "Amazing, learned something new."}], "answers": [{"tags": [], "owner": {"reputation": 3310, "user_id": 1853605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2ab8d886abc51e874c1ed067b912ddd?s=128&d=identicon&r=PG", "display_name": "Potato", "link": "https://stackoverflow.com/users/1853605/potato"}, "is_accepted": false, "score": 0, "last_activity_date": 1543980434, "last_edit_date": 1543980434, "creation_date": 1543979710, "answer_id": 53624635, "question_id": 53624614, "link": "https://stackoverflow.com/questions/53624614/why-segmentation-fault-core-dumped-occur-while-printing-string/53624635#53624635", "title": "why Segmentation fault (core dumped ) occur while printing string?", "body": "<p>your for loop condition is wrong <code>a[i]!=\"\\0\"</code> should be <code>a[i]!='\\0'</code>, you need to look for <code>'\\0'</code> termination and <code>\"\\0\"</code> is a string ( <code>char *</code> ) . Ideally with proper warnings you should have got compilation warnings.</p>\n\n<pre><code>for(i=0;a[i] != '\\0';i++) \n{\n    if(a[i]!=a[i+1])\n      printf(\"%c\",a[i]);\n}\n</code></pre>\n\n<p>in fact a better for loop would be to guard against out of bounds in array sizes, for example consider a case where your input is more than <code>100</code> characters long</p>\n\n<pre><code>for(i=0; (a[i] != '\\0' ) &amp;&amp; ( i &lt; (sizeof a) );i++)\n{\n    if(a[i]!=a[i+1])\n      printf(\"%c\",a[i]);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10747259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9CO0WYKCBzE/AAAAAAAAAAI/AAAAAAAAAAU/T5nVAJ9SdjY/photo.jpg?sz=128", "display_name": "Suraj Kumar Prasad", "link": "https://stackoverflow.com/users/10747259/suraj-kumar-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1543980434, "creation_date": 1543979503, "question_id": 53624614, "link": "https://stackoverflow.com/questions/53624614/why-segmentation-fault-core-dumped-occur-while-printing-string", "title": "why Segmentation fault (core dumped ) occur while printing string?", "body": "<p>Why my code is giving Segmentation fault (core dumped ), I checked all possible test cases.</p>\n\n<p><code>Input: aaabbcc\n Output:abc</code></p>\n\n<p><code>Input: abbcccccc\n Output:abc</code></p>\n\n<p>It will print only nonrepeated characters.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid main()\n{\nchar a[100],c=0;\nint i;\nscanf(\"%s\",a);\nfor(i=0;a[i]!=\"\\0\";i++)\n{\n    if(a[i]!=a[i+1])\n      printf(\"%c\",a[i]);\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 3, "creation_date": 1543979564, "post_id": 53624573, "comment_id": 94109418, "body": "Let&#39;s say you are using Microsoft Visual Studio, for example, If you open your project in your IDE and put your cursor on the macro name, and press F12, it will take you to the definition.  Is that what you want?"}, {"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1543979688, "post_id": 53624573, "comment_id": 94109457, "body": "I think what you are asking is this:  <code>I&#39;ve got some magic number or string I need to reference in code. There&#39;s a good chance one of the platform header files has already defined this value as an existing macro. And if so, how would I discover the macro with another name, so I don&#39;t end up duplicating it was another name?</code>  Am I reading that correctly?"}, {"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 3, "creation_date": 1543979707, "post_id": 53624573, "comment_id": 94109464, "body": "You&#39;re unlikely to find it by value.  But in desparation you could do a Find in Files and look for 1407374883553285, which happens to be 0x5000000000005.  But it might be composed with something like <code>HIGH_FIVE | LOW_FIVE</code>.  So no...you&#39;re unlikely to find it by value."}, {"owner": {"reputation": 199, "user_id": 3541440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0cjHH.jpg?s=128&g=1", "display_name": "Jenny T-Type", "link": "https://stackoverflow.com/users/3541440/jenny-t-type"}, "edited": false, "score": 0, "creation_date": 1543979764, "post_id": 53624573, "comment_id": 94109477, "body": "@VicaYang don&#39;t worry, it happens. I don&#39;t think there is a standard way to achieve this, so you&#39;ll have to look for specific development environments that allow this kind of &#39;lookups&#39;"}, {"owner": {"reputation": 534, "user_id": 9068344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oPjWLvNmvwA/AAAAAAAAAAI/AAAAAAAAACQ/UHoeZN1fpA0/photo.jpg?sz=128", "display_name": "VicaYang", "link": "https://stackoverflow.com/users/9068344/vicayang"}, "reply_to_user": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 0, "creation_date": 1543979812, "post_id": 53624573, "comment_id": 94109491, "body": "@Wyck That&#39;s what I concerned exactly.. lots of bit magic was used here so I would like to see if there&#39;s any tool &quot;compute&quot; it"}, {"owner": {"reputation": 534, "user_id": 9068344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oPjWLvNmvwA/AAAAAAAAAAI/AAAAAAAAACQ/UHoeZN1fpA0/photo.jpg?sz=128", "display_name": "VicaYang", "link": "https://stackoverflow.com/users/9068344/vicayang"}, "reply_to_user": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 0, "creation_date": 1543979889, "post_id": 53624573, "comment_id": 94109511, "body": "@selbie Thankyou! I edit my post to make it more clearly"}, {"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 0, "creation_date": 1543980322, "post_id": 53624573, "comment_id": 94109596, "body": "I&#39;d bet a reasonable sum of money that NO there&#39;s no way to find out if any symbol happens to get defined to the value 0x5000000000005.  That&#39;s backwards programming too, by the way.  Incidentally sometimes I do this when I&#39;m searching for HRESULT definitions when I&#39;m trying to look up a text-based description of an HRESULT.  It&#39;s hard.  It&#39;s easier if you have some context about what you&#39;re looking for.  Clues help immensely."}, {"owner": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 0, "creation_date": 1543980399, "post_id": 53624573, "comment_id": 94109615, "body": "What are the drawbacks to defining this with your own macro?  I presume there are no drawbacks.  Can you just <code>#define SOMETHING_MAGICAL 0x5000000000005</code> and move on?"}, {"owner": {"reputation": 534, "user_id": 9068344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oPjWLvNmvwA/AAAAAAAAAAI/AAAAAAAAACQ/UHoeZN1fpA0/photo.jpg?sz=128", "display_name": "VicaYang", "link": "https://stackoverflow.com/users/9068344/vicayang"}, "reply_to_user": {"reputation": 5746, "user_id": 1563833, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=128&d=identicon&r=PG", "display_name": "Wyck", "link": "https://stackoverflow.com/users/1563833/wyck"}, "edited": false, "score": 0, "creation_date": 1543980688, "post_id": 53624573, "comment_id": 94109675, "body": "@Wyck Yes, there is no drawback in fact. But personally, I prefer to use existing macro so that other developer (with some prior knowledge in this field) will not be confused. Another reason is that I find this is an interesting problem (and probably solvable technically) but seems hard.."}, {"owner": {"reputation": 15451, "user_id": 6879826, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/WzqBC.png?s=128&g=1", "display_name": "ad absurdum", "link": "https://stackoverflow.com/users/6879826/ad-absurdum"}, "edited": false, "score": 0, "creation_date": 1543983361, "post_id": 53624573, "comment_id": 94110252, "body": "What about something like: <code>grep &#39;#define *.* *1407374883553285 *&#39; XXX.h</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1544000739, "post_id": 53624573, "comment_id": 94116834, "body": "Considering that <code>#define SMALLEST_PRIME 2</code> and <code>#define ONE_PLUS_ONE 2</code> and <code>#define MAXIMUM_TERMS_FOR_US_PRESIDENT 2</code> all expand to 2, you can&#39;t look at the preprocessed text and reliably tell which of those macros (if any) was expanded to yield the value 2."}, {"owner": {"reputation": 534, "user_id": 9068344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oPjWLvNmvwA/AAAAAAAAAAI/AAAAAAAAACQ/UHoeZN1fpA0/photo.jpg?sz=128", "display_name": "VicaYang", "link": "https://stackoverflow.com/users/9068344/vicayang"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1544067361, "post_id": 53624573, "comment_id": 94147410, "body": "@JonathanLeffler well, usually the programmer knows what the magic number represents (in my example, the FILEREFERENCE of root) so he/she can use the &#39;correct&#39; macro if all macro with the value printed for he/she."}], "answers": [{"comments": [{"owner": {"reputation": 139291, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1543987199, "post_id": 53624841, "comment_id": 94111254, "body": "Given the list of macros, one could write a bunch of <code>printf</code> statements and run the program with them to see the values (or, more properly but esoterically, use GCC\u2019s inline assembly with immediate operands, then generate assembly code\u2014this has the advantage of not requiring execution on the target platform, so it is more easily made part of a general build system). Although one would want to exclude macros that did not resolve to an integer value."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 3, "last_activity_date": 1543981278, "creation_date": 1543981278, "answer_id": 53624841, "question_id": 53624573, "link": "https://stackoverflow.com/questions/53624573/is-there-any-way-to-search-the-macro-name-by-value/53624841#53624841", "title": "Is there any way to search the macro name by value?", "body": "<p>Gcc and clang will print out a list of <code>#define</code>s if you invoke them with the options <code>-E -dM</code>. (If you don't use <code>-E</code>, <code>-dM</code> does something else.)</p>\n\n<p>Unfortunately, macros and arithmetic expressions in the macro replacement texts are not expanded / evaluated, so you'll only be able to find the value if you know it's textual representation. Still, it's a first step.</p>\n\n<p>That won't work for <code>enum</code> member values and <code>constexpr</code>s. I don't think there is any way to search for those which doesn't involve using some C parsing library to build a symbol table. Such libraries exist, but they're not necessarily well-documented, stable, or easy to use.</p>\n"}], "owner": {"reputation": 534, "user_id": 9068344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oPjWLvNmvwA/AAAAAAAAAAI/AAAAAAAAACQ/UHoeZN1fpA0/photo.jpg?sz=128", "display_name": "VicaYang", "link": "https://stackoverflow.com/users/9068344/vicayang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1543981278, "creation_date": 1543979168, "last_edit_date": 1543979975, "question_id": 53624573, "link": "https://stackoverflow.com/questions/53624573/is-there-any-way-to-search-the-macro-name-by-value", "title": "Is there any way to search the macro name by value?", "body": "<p>Thanks to @selbie, a more clear question is</p>\n\n<blockquote>\n  <p>I've got some magic number or string I need to reference in code. There's a good chance one of the platform header files has already defined this value as an existing macro. And if so, how would I discover the macro with another name, so I don't end up duplicating it was another name?</p>\n</blockquote>\n\n<hr>\n\n<p>We know that macro can be computed (or replaced in fact?) in compile time. So I want to know if there any way to search macro name by its value?</p>\n\n<p>Here is a example. When I parse the USN record, I find that <code>FileReferenceNumber</code> of the root of driver is always <code>1407374883553285</code>, so I would like to check whether it is defined in XXX.h previously, then I don't need to define another one.</p>\n\n<p>By the way, if we can search macro, how about constexpr?</p>\n"}, {"tags": ["android", "c++", "c", "android-studio", "java-native-interface"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543977353, "post_id": 53624310, "comment_id": 94108944, "body": "<i>I&#39;m trying to call a C function</i> -- Did you forget <code>extern &quot;C&quot;</code>?  Otherwise that function is a C++ function, not a C function, and the linker is trying to find the C++ function called <code>foo()</code>, not the <code>C</code> function called <code>foo()</code>."}, {"owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543978742, "post_id": 53624310, "comment_id": 94109227, "body": "How do I use extern &quot;C&quot;?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543978856, "post_id": 53624310, "comment_id": 94109249, "body": "<a href=\"https://stackoverflow.com/questions/1041866/what-is-the-effect-of-extern-c-in-c\">See this</a>, and is probably a dup if it solves your issue."}, {"owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543979066, "post_id": 53624310, "comment_id": 94109291, "body": "Hi, I&#39;m still unsure of where and how to place the extern C&quot; statement. I tried enveloping my foo.c source with extern &quot;C&quot; { /* all C code here*/ } but I still get the same error."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543979450, "post_id": 53624310, "comment_id": 94109383, "body": "Only the declaration needs to have <code>extern &quot;C&quot;</code>.  The function declaration as you have it now is not correct for a C++ module if the function is actually a <code>C</code> function."}, {"owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543979483, "post_id": 53624310, "comment_id": 94109395, "body": "I also notice that when I open my foo.c, Android Studio informs me that &quot;This file is not part of the project. Please include it in the appropriate build file (build.gradle, CMakeLists.txt or Android.mk etc.) and sync the project.&quot; How do I do that?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1543980055, "post_id": 53624310, "comment_id": 94109549, "body": "I do not do Android programming (have done JNI though), so I can&#39;t answer you on your project situation.  What I do know is that the <code>C</code> function needs to be recognized as such, and the way you do that in a mixed C and C++ app is to have <code>extern &quot;C&quot;</code> used to declare the function.  See my answer."}], "answers": [{"comments": [{"owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "edited": false, "score": 0, "creation_date": 1543980193, "post_id": 53624673, "comment_id": 94109579, "body": "I tried that, but now instead of undefined reference to foo(argumentlist), I get undefined reference to foo, without the arguments. I suspect it has something to do with the Android Studio message informing me that foo.c is not part of the project. I googled a bit and the solution is to add it to Android.mk, but I did a search for Android.mk and there are many such files so I&#39;m not sure which one to change."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "edited": false, "score": 1, "creation_date": 1543980500, "post_id": 53624673, "comment_id": 94109636, "body": "The new error indicates that the <code>extern C</code> did work for you, believe it or not.  The <code>foo</code> with no arguments error indicates the linker now sees <code>foo</code> as a <code>C</code> function.  The issue now is an Android project one, which unfortunately I can&#39;t answer or comment on."}, {"owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "edited": false, "score": 0, "creation_date": 1543990198, "post_id": 53624673, "comment_id": 94112189, "body": "Thanks. You&#39;re right. I fixed the Android Studio project configuration by modifying my CMakeLists.txt file to include the .c file and it built successfully."}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 1, "last_activity_date": 1544017690, "last_edit_date": 1544017690, "creation_date": 1543979983, "answer_id": 53624673, "question_id": 53624310, "link": "https://stackoverflow.com/questions/53624310/calling-jni-c-function-in-another-source-file/53624673#53624673", "title": "Calling JNI C function in another source file", "body": "<p>The probable issue is that your <code>foo()</code> function is being recognized by the linker as a <code>C++</code> function, and not a <code>C</code> function.  </p>\n\n<p>Since <code>C++</code> functions can be overloaded, the C++ compiler \"mangles\" the name so that the linker has a unique key to the function. Any C++ module that encounters <code>foo.h</code> will assume the function is a C++ function, thus name mangling will be done on the function name. </p>\n\n<p>For example, possibly the mangled name looks something like this in the compiled object code:</p>\n\n<p><code>foo@ucharp@uintp@int</code></p>\n\n<p>(each brand of C++ compiler will have its own naming scheme).</p>\n\n<p>On the other hand, when the <code>C</code> compiler encounters <code>foo.h</code>, the compiled object code produced a symbol representing an \"unmangled\" <code>foo</code> name, more or less, this:</p>\n\n<p><code>foo</code> or <code>_foo</code></p>\n\n<p>So now at link time, since you called the <code>foo</code> function from C++ code, the linker will attempt to find the mangled version, and since there is no C++ function named <code>foo</code>, you get the linker error.</p>\n\n<p>So basically your <code>foo.h</code> header or your usage of it needs to be smart and work for <code>C</code> modules <em>and</em> C++ modules, where the C++ modules are aware that <code>foo</code> is referring to a <code>C</code> function and thus will not mangle the name. </p>\n\n<hr>\n\n<p>One way to do this is to change <code>foo.h</code> to this:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n    void foo(const unsigned char key[], unsigned int w[], int keysize);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>So basically, when the header is seen by the <code>C</code> compiler the <code>__cplusplus</code> doesn't exist.  For C++ modules, the <code>__cplusplus</code> is defined, and thus the <code>extern \"C\"</code> takes effect, thus the C++ modules recognize <code>foo()</code> as a <code>C</code> function.</p>\n\n<p>If you can't change <code>foo.h</code>, then you can surround it with the <code>extern \"C\"</code> in your C++ modules:</p>\n\n<pre><code>extern \"C\" {\n  #include &lt;foo.h&gt;\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/3789340/combining-c-and-c-how-does-ifdef-cplusplus-work\">See this on more information of __cplusplus</a></p>\n"}], "owner": {"reputation": 7727, "user_id": 1118764, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cc6a77b7454766a42f83d090dc6e9b9b?s=128&d=identicon&r=PG", "display_name": "user1118764", "link": "https://stackoverflow.com/users/1118764/user1118764"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 53624673, "answer_count": 1, "score": -1, "last_activity_date": 1544222745, "creation_date": 1543977112, "last_edit_date": 1544222745, "question_id": 53624310, "link": "https://stackoverflow.com/questions/53624310/calling-jni-c-function-in-another-source-file", "title": "Calling JNI C function in another source file", "body": "<p>I'm trying to call a C function foo() from a JNI native-lib.cpp file. foo() is declared in foo.h and defined in foo.c. native-lib.cpp already included \"foo.h\", so Android Studio seems to recognize that the function exists, but upon build, I get the following error:</p>\n\n<pre><code>error: undefined reference to 'foo(unsigned char const*, unsigned int*, int)'\n</code></pre>\n\n<p>foo() is declared as such in foo.h:</p>\n\n<pre><code>void foo(const unsigned char key[], unsigned int w[], int keysize);\n</code></pre>\n\n<p>foo() is called in native-lib.cpp as follows:</p>\n\n<pre><code>static unsigned char byteArray[32];\nunsigned int intArray[64];\nfoo(byteArray, intArray, 256);\n</code></pre>\n\n<p>Am I missing anything? Why am I getting the error?</p>\n\n<p>I also notice that when I open my foo.c, Android Studio informs me that \"This file is not part of the project. Please include it in the appropriate build file (build.gradle, CMakeLists.txt or Android.mk etc.) and sync the project.\" How do I do that?</p>\n"}, {"tags": ["c", "linux", "zsh", "archlinux", "setuid"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1543976858, "post_id": 53624156, "comment_id": 94108804, "body": "One of the better resources is Chen, Wagner and Dean&#39;s <a href=\"http://www.cs.umd.edu/~jkatz/TEACHING/comp_sec_F04/downloads/setuid.pdf\" rel=\"nofollow noreferrer\">Setuid Demystified</a>."}, {"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1543979306, "post_id": 53624156, "comment_id": 94109342, "body": "No chance with id either. Permissions <code>-rwsr-xr-x 1 root cake 17K Dec  5 04:05 saymyname</code>, <code>id</code> output: <code>uid=1000(cake) gid=1001(cake) groups=1001(cake),998(wheel),1000(autologin)</code>. Getting more puzzled by the minute now."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1543979330, "post_id": 53624156, "comment_id": 94109349, "body": "<code>system</code> runs a shell. The shell might be dropping privileges. Try <code>execlp(&quot;id&quot;,&quot;id&quot;,(char *)0)</code>"}, {"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1543979455, "post_id": 53624156, "comment_id": 94109386, "body": "No luck on <code>execlp</code> either. Same result as plain <code>system()</code>"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1543979617, "post_id": 53624156, "comment_id": 94109437, "body": "I can&#39;t reproduce that, meaning it will never print <code>root</code>. Tip: use <code>strace -f .&#47;saymyname</code> to see the system calls being made and their results."}, {"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1543979812, "post_id": 53624156, "comment_id": 94109492, "body": "It prints root if I run it with sudo for that matter. Feels like it&#39;s time to namedrop the kernel and shell: <code>Kernel: x86_64 Linux 4.19.4-arch1-1-ARCH</code> <code>Shell: zsh 5.6.2</code>"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1543979873, "post_id": 53624156, "comment_id": 94109508, "body": "Of course it prints <code>root</code> if you run it with sudo :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1543980031, "post_id": 53624156, "comment_id": 94109542, "body": "Is it coreutils <code>id</code>? If not, are you sure it would print euid if it found euid different from ruid?"}, {"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1543980310, "post_id": 53624156, "comment_id": 94109594, "body": "It technically doesn&#39;t <code>never print root</code> if there is a way to make it print root ;). Back on topic; here&#39;s what <code>strace</code> has to say <a href=\"https://pastebin.com/ebSDCzf0\" rel=\"nofollow noreferrer\">pastebin.com/ebSDCzf0</a> . Other than some rather unexpected journey through my $PATH there isn&#39;t much I can decipher from it. And it&#39;s the plain old <code>&#47;usr&#47;bin&#47;id</code> that came with the distro for all I know."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1543980448, "post_id": 53624156, "comment_id": 94109623, "body": "<code>strace</code> cancels setuid, because setuid programs don&#39;t necessarily want all their internals exposed to their callers."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1543989156, "post_id": 53624156, "comment_id": 94111847, "body": "@WumpusQ.Wumbley That&#39;s good to know. Following the man page, <code>sudo strace -u cake -f .&#47;saymyname</code> can be used here"}], "answers": [{"comments": [{"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1543983593, "post_id": 53625004, "comment_id": 94110299, "body": "Spot on. As the man pages point out, <code>system()</code> calls <code>&#47;bin&#47;sh</code> (just like exec* family when the file isn&#39;t immediately found) which, in my case, is indeed <code>&#47;bin&#47;bash</code>, which does drop privileges. Before I mark your answer as correct: Do you know a way to prevent it from doing that, or is it just &quot;a security feature&quot;? After all, running it with <code>sudo</code> successfully passes on the privileges to <code>bash</code>, which is what I would expect the SETUID&#39;d program to do too."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1543987497, "post_id": 53625004, "comment_id": 94111336, "body": "That&#39;s because when you run the program with sudo, the uid and euid are 0. It&#39;s like running <code>sudo whoami</code>"}, {"owner": {"reputation": 94, "user_id": 10704685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffea3502c59f3c3267b64170d78fc78a?s=128&d=identicon&r=PG&f=1", "display_name": "Georg", "link": "https://stackoverflow.com/users/10704685/georg"}, "edited": false, "score": 0, "creation_date": 1544055223, "post_id": 53625004, "comment_id": 94144768, "body": "In practice, I also wouldn&#39;t use the setuid bit, but edit /etc/sudoers file instead."}], "tags": [], "owner": {"reputation": 94, "user_id": 10704685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffea3502c59f3c3267b64170d78fc78a?s=128&d=identicon&r=PG&f=1", "display_name": "Georg", "link": "https://stackoverflow.com/users/10704685/georg"}, "is_accepted": false, "score": 4, "last_activity_date": 1543982555, "creation_date": 1543982555, "answer_id": 53625004, "question_id": 53624156, "link": "https://stackoverflow.com/questions/53624156/setuid-at-filesystem-level/53625004#53625004", "title": "SETUID at filesystem level", "body": "<p>Looks like bash, which is executed by system(), drops the privileges. In my tests, replacing the symbolic link /bin/sh pointing to dash (instead of bash) made it work as expected.</p>\n\n<p>Also with bash,</p>\n\n<pre><code>execl(\"/bin/bash\", \"bash\", \"-c\", \"whoami\", NULL);\n</code></pre>\n\n<p>gives cake, whereas</p>\n\n<pre><code>execl(\"/usr/bin/whoami\", \"whoami\", NULL);\n</code></pre>\n\n<p>gives root.</p>\n"}, {"comments": [{"owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1544002467, "post_id": 53626146, "comment_id": 94117751, "body": "Hah. Let this be a warning to everyone to just RTFM, I guess."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "edited": false, "score": 0, "creation_date": 1544008653, "post_id": 53626146, "comment_id": 94121484, "body": "I must say that I have learned a lot in this thread. (Or at least I&#39;m now aware that I know nothing :) ) Especially the pdf linked by jww in the first comment below your question is very interesting to read (and extremely well done)"}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": true, "score": 2, "last_activity_date": 1543998548, "last_edit_date": 1543998548, "creation_date": 1543990096, "answer_id": 53626146, "question_id": 53624156, "link": "https://stackoverflow.com/questions/53624156/setuid-at-filesystem-level/53626146#53626146", "title": "SETUID at filesystem level", "body": "<p><a href=\"https://stackoverflow.com/a/53625004/171318\">Georg's answer</a> is technically correct <sup>1</sup>, but it is worth to mention that the <code>system(3)</code> man page explicitly states that the use of <code>system()</code> in setuid programs is not recommended:</p>\n\n<blockquote>\n  <p><strong>Do not use system() from a program with set-user-ID or set-group-ID privileges, because strange values for some environment variables might\n         be  used  to subvert system integrity.  Use the exec(3) family of functions instead, but not execlp(3) or execvp(3)</strong>.  system() will not, in\n         fact, work properly from programs with set-user-ID or set-group-ID privileges on systems on which /bin/sh is bash version [>=]2, since  bash  2\n         drops privileges on startup.  (Debian uses a modified bash which does not do this when invoked as sh.)</p>\n</blockquote>\n\n<p>This is especially relevant in your example as you are calling <code>whoami</code> without the full path. Imagine the following scenario (as unprivileged user):</p>\n\n<pre><code>&gt; whoami cat &lt;&lt; 'EOF'\n#!/bin/not-bash :)\necho \"I'm root! let's clean up some trash ...\"\n# rm -rf /\nEOF\nchmod +x whoami\n\nPATH=\"${PWD}\" ./saymyname\n</code></pre>\n\n<p>That means, instead of changing the system shell (or using Debian), the code should just use <code>exec()</code>, like this:</p>\n\n<pre><code>int main(int argc, char** argv){\n    execl(\"/usr/bin/whoami\", \"whoami\", NULL);   \n}\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup> <a href=\"https://bugs.launchpad.net/ubuntu/+source/dash/+bug/1215660\" rel=\"nofollow noreferrer\">newer versions of <code>dash</code> on Ubuntu will also drop privileges</a></p>\n"}], "owner": {"reputation": 1031, "user_id": 3134549, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CANRR.jpg?s=128&g=1", "display_name": "nitowa", "link": "https://stackoverflow.com/users/3134549/nitowa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 1, "accepted_answer_id": 53626146, "answer_count": 2, "score": 2, "last_activity_date": 1543998548, "creation_date": 1543975821, "last_edit_date": 1543980912, "question_id": 53624156, "link": "https://stackoverflow.com/questions/53624156/setuid-at-filesystem-level", "title": "SETUID at filesystem level", "body": "<p>Suppose we are looking at the following scenario:</p>\n\n<p>File saymyname.c (includes omitted)</p>\n\n<pre><code>int main(int argc, char** argv){\n    system(\"whoami\");   \n}\n</code></pre>\n\n<p>Build and set permission bits:</p>\n\n<pre><code>cake@lie&gt; gcc saymyname.c -o saymyname\ncake@lie&gt; sudo chown root:root saymyname\ncake@lie&gt; sudo chmod u+s saymyname\ncake@lie&gt; ./saymyname\ncake\n</code></pre>\n\n<p>Every resource under the sun tells me that setting the <code>s</code> permission on the user-column should make the program execute with the owner's privileges, not the calling user's. Why does <code>system(\"whoami\");</code> return <code>cake</code>?</p>\n\n<p>Modifying the program to set the UID manually like so:</p>\n\n<pre><code>int main(int argc, char** argv){\n    setuid(geteuid());\n    system(\"whoami\");   \n}\n</code></pre>\n\n<p>Yields the expected result</p>\n\n<pre><code>cake@lie&gt; ./saymyname\nroot\n</code></pre>\n\n<p>Some resources claim that the SUID and GUID bits are often ignored. Is this why the observed behavior occurs? If so, is there a way to make it behave as if it was executed by root without <code>setuid(.)</code>?</p>\n"}, {"tags": ["c", "pthreads", "global-variables", "redeclaration"], "comments": [{"owner": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 5, "creation_date": 1543975754, "post_id": 53624066, "comment_id": 94108568, "body": "<code>index</code> is the name of a legacy C function declared in strings.h.  You would get the same error if you declared a variable named <code>sprintf</code>.  Also note that the <code>argv</code> parameter of main should be defined as <code>char**</code> not <code>int**</code>."}, {"owner": {"reputation": 1, "user_id": 7151648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dfG-so601f0/AAAAAAAAAAI/AAAAAAAAADY/ZZGyYeQPo_Q/photo.jpg?sz=128", "display_name": "Matthew Snyder", "link": "https://stackoverflow.com/users/7151648/matthew-snyder"}, "reply_to_user": {"reputation": 2137, "user_id": 1212725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152c2f757fe98760a1cca54a21f63a31?s=128&d=identicon&r=PG", "display_name": "bruceg", "link": "https://stackoverflow.com/users/1212725/bruceg"}, "edited": false, "score": 1, "creation_date": 1543976341, "post_id": 53624066, "comment_id": 94108696, "body": "Ah, I was not aware of that. Thank you for your help!"}], "owner": {"reputation": 1, "user_id": 7151648, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dfG-so601f0/AAAAAAAAAAI/AAAAAAAAADY/ZZGyYeQPo_Q/photo.jpg?sz=128", "display_name": "Matthew Snyder", "link": "https://stackoverflow.com/users/7151648/matthew-snyder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543975116, "creation_date": 1543975116, "question_id": 53624066, "link": "https://stackoverflow.com/questions/53624066/c-threaded-program-why-is-this-code-giving-me-the-redeclared-as-different-kind", "title": "C-threaded program: Why is this code giving me the &quot;redeclared as different kind of symbol&quot; error?", "body": "<p>I am trying to write a client program that will download a file from a server in multiple chunks at a time using multiple threads. I am first trying to successfully download the file using only one thread before moving on, but I keep getting this redeclaration error. I have declared a global variable, index, and want to update it within a function. </p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#define FILE_NAME \"output.txt\"\n\nint index = 0;\nFILE * file;\n\nvoid * receiveChunk(void * arg){\n\n    int sockfd = 0;\n    char buffer[1024];\n    char request[128];\n    int status = -1;\n    char ** hostInfo = (char **) arg; //might need three stars\n    struct sockaddr_in serv_addr;\n    int port = atoi(*(hostInfo + 2));\n    int connection_status;\n\n    while(status != 0){\n\n    memset(&amp;serv_addr, 0, sizeof(struct sockaddr));\n    serv_addr.sin_family = AF_INET;\n    serv_addr.sin_addr.s_addr = inet_addr(*(hostInfo + 1));\n    serv_addr.sin_port = htons(port);\n\n    sockfd = socket(PF_INET,SOCK_STREAM,0);\n    connection_status = connect(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr));\n\n    if(connection_status == -1){\n        printf(\"Error connecting to socket\\n\");\n    }\n\n    file = fopen(FILE_NAME, \"w\");\n\n    sprintf(request, \"%d\", index);\n    send(sockfd, request, sizeof(request), 0);\n    index++;\n\n    recv(sockfd, &amp;buffer, sizeof(buffer), 0);\n\n    fwrite(buffer, 1, status, file);\n\n    }\n\n    return NULL;\n\n\n}\n\nint main(int argc, int ** argv){\n\n    pthread_t thread_id;\n    pthread_create(&amp;thread_id, NULL, &amp;receiveChunk, argv);\n    pthread_join(thread_id, NULL);\n\nreturn 0;\n}\n</code></pre>\n\n<p>As far as I can tell, I have not redeclared index within either function and I thought that in C you can modify global variables within functions with no problems. I'm very sorry if this is some obvious error or misunderstanding, but any help would be greatly appreciated. </p>\n"}, {"tags": ["c", "execvp"], "comments": [{"owner": {"reputation": 2676, "user_id": 1429450, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16df5085d4b8372b5dcadabb87545ad3?s=128&d=identicon&r=PG", "display_name": "Geremia", "link": "https://stackoverflow.com/users/1429450/geremia"}, "edited": false, "score": 1, "creation_date": 1543976445, "post_id": 53624042, "comment_id": 94108725, "body": "How can anything in the code you&#39;ve shown return -1? All I see is <code>return 1</code> and <code>return 0</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1543979493, "post_id": 53624042, "comment_id": 94109401, "body": "Your second argument to `execvp()\u2018 is wrong. It needs to be a null terminated array of pointers to strings, and that\u2019s not what you\u2019re passing."}], "owner": {"reputation": 1, "user_id": 5537992, "user_type": "registered", "profile_image": "https://graph.facebook.com/480433978826298/picture?type=large", "display_name": "Michael Balcerzack", "link": "https://stackoverflow.com/users/5537992/michael-balcerzack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1543974869, "creation_date": 1543974869, "question_id": 53624042, "link": "https://stackoverflow.com/questions/53624042/why-it-always-retruns-1", "title": "why it always retruns -1", "body": "<p>When I tested my program, it always retruns -1. I first type the txt file and is reads the text correctly, so my problem is that I am not able to get execvp to work. What documentry I need to write in the execvp function to get it to working. Can anyone explane why this program does not work.</p>\n\n<pre><code>int morph(char* number);                                       \n\nvoid main(int argc,char *argv[]) {         \n\n\nFILE *fileName = NULL;                                                   \nchar numberFromFile[MAX_STRING] = \"\";                                    \n\n// TODO: add work also goes in this function. \n\n// check the number of command line parmeters           \n// if incorrect number print message and exits                           \nif (argc &lt; 2) {                                                         \n    printf(\"usage %s filename \\n\",argv[0]);         \n    printf(\"2 \\n\");                                  \n} else {                                             \n    // check if file exists                   \n    fileName = fopen(argv[1], \"r\");                        \n    if (fileName == NULL) {  \n        printf(\"file %s does not exits \\n\", argv[0]);         \n        printf(\"3 \\n\");                \n    } else {   \n        int number = 0;\n\n        fscanf(fileName, \"%s\", numberFromFile);\n        //printf(\"%s \\n\",numberFromFile); \n\n        //strcpy(numberFromFile, \"1233\");\n\n        number = morph(numberFromFile);\n\n    printf(\"%d \\n\",number);\n    //}                                                                        \n }                                                                              }                                                                                                                                                                                                  \nint morph(char *number)  {        \n\nunsigned int intNumber = 0; \nint checkIfPrime = 0; \ncheckIfPrime = execvp(\"/Documents/assignment_4/isPrime\",&amp;number); \nprintf(\"%d\\n\",checkIfPrime);       \nif (checkIfPrime == 1) { \n    return 1;        \n} else {                 \n    return 0;             \n}                                                                                           }  \n</code></pre>\n"}]